# Comparing `tmp/airfold_cli-0.9.0-py3-none-any.whl.zip` & `tmp/airfold_cli-0.9.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,40 +1,40 @@
-Zip file size: 40857 bytes, number of entries: 38
--rw-r--r--  2.0 unx      351 b- defN 24-Apr-03 17:55 airfold_cli/__init__.py
--rw-r--r--  2.0 unx       85 b- defN 24-Apr-03 17:55 airfold_cli/__main__.py
--rw-r--r--  2.0 unx    17812 b- defN 24-Apr-03 17:55 airfold_cli/api.py
--rw-r--r--  2.0 unx     2219 b- defN 24-Apr-03 17:55 airfold_cli/cli.py
--rw-r--r--  2.0 unx      959 b- defN 24-Apr-03 17:55 airfold_cli/completion.py
--rw-r--r--  2.0 unx     2578 b- defN 24-Apr-03 17:55 airfold_cli/config.py
--rw-r--r--  2.0 unx     2711 b- defN 24-Apr-03 17:55 airfold_cli/diff.py
--rw-r--r--  2.0 unx     2429 b- defN 24-Apr-03 17:55 airfold_cli/doctor.py
--rw-r--r--  2.0 unx      364 b- defN 24-Apr-03 17:55 airfold_cli/error.py
--rw-r--r--  2.0 unx     5501 b- defN 24-Apr-03 17:55 airfold_cli/fmt.py
--rw-r--r--  2.0 unx     3672 b- defN 24-Apr-03 17:55 airfold_cli/generate.py
--rw-r--r--  2.0 unx     1231 b- defN 24-Apr-03 17:55 airfold_cli/graph.py
--rw-r--r--  2.0 unx     2654 b- defN 24-Apr-03 17:55 airfold_cli/models.py
--rw-r--r--  2.0 unx     4003 b- defN 24-Apr-03 17:55 airfold_cli/options.py
--rw-r--r--  2.0 unx     6441 b- defN 24-Apr-03 17:55 airfold_cli/pipe.py
--rw-r--r--  2.0 unx      773 b- defN 24-Apr-03 17:55 airfold_cli/prompts.py
--rw-r--r--  2.0 unx     1727 b- defN 24-Apr-03 17:55 airfold_cli/pull.py
--rw-r--r--  2.0 unx     2473 b- defN 24-Apr-03 17:55 airfold_cli/push.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-03 17:55 airfold_cli/py.typed
--rw-r--r--  2.0 unx     1704 b- defN 24-Apr-03 17:55 airfold_cli/root.py
--rw-r--r--  2.0 unx    10884 b- defN 24-Apr-03 17:55 airfold_cli/source.py
--rw-r--r--  2.0 unx     1956 b- defN 24-Apr-03 17:55 airfold_cli/ui.py
--rw-r--r--  2.0 unx     4776 b- defN 24-Apr-03 17:55 airfold_cli/utils.py
--rw-r--r--  2.0 unx      370 b- defN 24-Apr-03 17:55 airfold_cli/version.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-03 17:55 airfold_cli/events/__init__.py
--rw-r--r--  2.0 unx     7957 b- defN 24-Apr-03 17:55 airfold_cli/events/http_log.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-03 17:55 airfold_cli/tui/__init__.py
--rw-r--r--  2.0 unx    18631 b- defN 24-Apr-03 17:55 airfold_cli/tui/diff.py
--rw-r--r--  2.0 unx     1109 b- defN 24-Apr-03 17:55 airfold_cli/tui/progress.py
--rw-r--r--  2.0 unx     4242 b- defN 24-Apr-03 17:55 airfold_cli/tui/renderables.py
--rw-r--r--  2.0 unx      815 b- defN 24-Apr-03 17:55 airfold_cli/tui/syntax.py
--rw-r--r--  2.0 unx      667 b- defN 24-Apr-03 17:55 airfold_cli/tui/theme.py
--rw-r--r--  2.0 unx     3303 b- defN 24-Apr-03 17:55 airfold_cli/tui/underline_bar.py
--rw-r--r--  2.0 unx     1697 b- defN 24-Apr-03 17:55 airfold_cli-0.9.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-03 17:55 airfold_cli-0.9.0.dist-info/WHEEL
--rw-r--r--  2.0 unx       44 b- defN 24-Apr-03 17:55 airfold_cli-0.9.0.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       12 b- defN 24-Apr-03 17:55 airfold_cli-0.9.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3017 b- defN 24-Apr-03 17:55 airfold_cli-0.9.0.dist-info/RECORD
-38 files, 119259 bytes uncompressed, 36095 bytes compressed:  69.7%
+Zip file size: 41025 bytes, number of entries: 38
+-rw-r--r--  2.0 unx      351 b- defN 24-Apr-18 16:48 airfold_cli/__init__.py
+-rw-r--r--  2.0 unx       85 b- defN 24-Apr-18 16:48 airfold_cli/__main__.py
+-rw-r--r--  2.0 unx    18190 b- defN 24-Apr-18 16:48 airfold_cli/api.py
+-rw-r--r--  2.0 unx     2219 b- defN 24-Apr-18 16:48 airfold_cli/cli.py
+-rw-r--r--  2.0 unx      959 b- defN 24-Apr-18 16:48 airfold_cli/completion.py
+-rw-r--r--  2.0 unx     2578 b- defN 24-Apr-18 16:48 airfold_cli/config.py
+-rw-r--r--  2.0 unx     2711 b- defN 24-Apr-18 16:48 airfold_cli/diff.py
+-rw-r--r--  2.0 unx     2429 b- defN 24-Apr-18 16:48 airfold_cli/doctor.py
+-rw-r--r--  2.0 unx      364 b- defN 24-Apr-18 16:48 airfold_cli/error.py
+-rw-r--r--  2.0 unx     5501 b- defN 24-Apr-18 16:48 airfold_cli/fmt.py
+-rw-r--r--  2.0 unx     3672 b- defN 24-Apr-18 16:48 airfold_cli/generate.py
+-rw-r--r--  2.0 unx     1231 b- defN 24-Apr-18 16:48 airfold_cli/graph.py
+-rw-r--r--  2.0 unx     2654 b- defN 24-Apr-18 16:48 airfold_cli/models.py
+-rw-r--r--  2.0 unx     4003 b- defN 24-Apr-18 16:48 airfold_cli/options.py
+-rw-r--r--  2.0 unx     6435 b- defN 24-Apr-18 16:48 airfold_cli/pipe.py
+-rw-r--r--  2.0 unx      773 b- defN 24-Apr-18 16:48 airfold_cli/prompts.py
+-rw-r--r--  2.0 unx     1727 b- defN 24-Apr-18 16:48 airfold_cli/pull.py
+-rw-r--r--  2.0 unx     2473 b- defN 24-Apr-18 16:48 airfold_cli/push.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 16:48 airfold_cli/py.typed
+-rw-r--r--  2.0 unx     1704 b- defN 24-Apr-18 16:48 airfold_cli/root.py
+-rw-r--r--  2.0 unx    11558 b- defN 24-Apr-18 16:48 airfold_cli/source.py
+-rw-r--r--  2.0 unx     1956 b- defN 24-Apr-18 16:48 airfold_cli/ui.py
+-rw-r--r--  2.0 unx     4776 b- defN 24-Apr-18 16:48 airfold_cli/utils.py
+-rw-r--r--  2.0 unx      370 b- defN 24-Apr-18 16:48 airfold_cli/version.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 16:48 airfold_cli/events/__init__.py
+-rw-r--r--  2.0 unx     7957 b- defN 24-Apr-18 16:48 airfold_cli/events/http_log.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 16:48 airfold_cli/tui/__init__.py
+-rw-r--r--  2.0 unx    18631 b- defN 24-Apr-18 16:48 airfold_cli/tui/diff.py
+-rw-r--r--  2.0 unx     1109 b- defN 24-Apr-18 16:48 airfold_cli/tui/progress.py
+-rw-r--r--  2.0 unx     4242 b- defN 24-Apr-18 16:48 airfold_cli/tui/renderables.py
+-rw-r--r--  2.0 unx      815 b- defN 24-Apr-18 16:48 airfold_cli/tui/syntax.py
+-rw-r--r--  2.0 unx      667 b- defN 24-Apr-18 16:48 airfold_cli/tui/theme.py
+-rw-r--r--  2.0 unx     3303 b- defN 24-Apr-18 16:48 airfold_cli/tui/underline_bar.py
+-rw-r--r--  2.0 unx     1697 b- defN 24-Apr-18 16:48 airfold_cli-0.9.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-18 16:48 airfold_cli-0.9.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx       44 b- defN 24-Apr-18 16:48 airfold_cli-0.9.1.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       12 b- defN 24-Apr-18 16:48 airfold_cli-0.9.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3017 b- defN 24-Apr-18 16:48 airfold_cli-0.9.1.dist-info/RECORD
+38 files, 120305 bytes uncompressed, 36263 bytes compressed:  69.9%
```

## zipnote {}

```diff
@@ -93,23 +93,23 @@
 
 Filename: airfold_cli/tui/theme.py
 Comment: 
 
 Filename: airfold_cli/tui/underline_bar.py
 Comment: 
 
-Filename: airfold_cli-0.9.0.dist-info/METADATA
+Filename: airfold_cli-0.9.1.dist-info/METADATA
 Comment: 
 
-Filename: airfold_cli-0.9.0.dist-info/WHEEL
+Filename: airfold_cli-0.9.1.dist-info/WHEEL
 Comment: 
 
-Filename: airfold_cli-0.9.0.dist-info/entry_points.txt
+Filename: airfold_cli-0.9.1.dist-info/entry_points.txt
 Comment: 
 
-Filename: airfold_cli-0.9.0.dist-info/top_level.txt
+Filename: airfold_cli-0.9.1.dist-info/top_level.txt
 Comment: 
 
-Filename: airfold_cli-0.9.0.dist-info/RECORD
+Filename: airfold_cli-0.9.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## airfold_cli/api.py

```diff
@@ -498,23 +498,33 @@
         interval_s: Optional[int] = None,
     ) -> dict[str, Any]:
         res = self._get_metrics(names, from_dt, to_dt, interval_s)
         if res.ok:
             return res.json()
         raise self._resp_to_err(res)
 
-    def _source_truncate(self, name: str) -> Response:
+    def _source_delete_data(self, name: str, where_condition: Optional[str]) -> Response:
+        params: dict[str, Any] = {}
+        if where_condition:
+            params["where"] = where_condition
         return requests.delete(
             self.endpoint + f"/v1/sources/{name}/data",
+            params=params,
             auth=self.auth,
         )
 
     @api_retry
     def source_truncate(self, name: str) -> None:
-        res = self._source_truncate(name)
+        res = self._source_delete_data(name, None)
+        if not res.ok:
+            raise self._resp_to_err(res)
+
+    @api_retry
+    def source_delete_data(self, name: str, where: str) -> None:
+        res = self._source_delete_data(name, where)
         if not res.ok:
             raise self._resp_to_err(res)
 
     def _pipe_materialize(self, name: str) -> Response:
         return requests.get(
             self.endpoint + f"/v1/pipes/{name}/materialize",
             auth=self.auth,
```

## airfold_cli/pipe.py

```diff
@@ -54,24 +54,24 @@
     try:
         pipe_names: list[str] = get_pipe_names()
         yield from filter(lambda name: name.startswith(cur), pipe_names) if cur else pipe_names
     except Exception as e:
         pass
 
 
-@pipe_app.command("delete")
+@pipe_app.command("drop")
 @catch_airfold_error()
 @with_global_options
-def delete(
+def drop(
     ctx: Context,
     name: Annotated[str, Argument(help="Pipe name", autocompletion=pipe_name_completion)],
     dry_run: Annotated[bool, DryRunOption] = False,
     force: Annotated[bool, ForceOption] = False,
 ) -> None:
-    """Delete pipe.
+    """Drop pipe.
     \f
 
     Args:
         ctx: Typer context
         name: pipe name
         dry_run: show plan without executing it
         force: force delete/overwrite even if data will be lost
```

## airfold_cli/source.py

```diff
@@ -49,24 +49,24 @@
     name="source",
     help="Source commands.",
 )
 
 app.add_typer(source_app)
 
 
-@source_app.command("delete")
+@source_app.command("drop")
 @catch_airfold_error()
 @with_global_options
-def delete(
+def drop(
     ctx: Context,
     name: Annotated[str, SourceNameArgument],
     dry_run: Annotated[bool, DryRunOption] = False,
     force: Annotated[bool, ForceOption] = False,
 ) -> None:
-    """Delete source.
+    """Drop source.
     \f
 
     Args:
         ctx: Typer context
         name: source name
         dry_run: show plan without executing it
         force: force delete/overwrite even if data will be lost
@@ -347,7 +347,32 @@
     source_app.apply_options(ctx)
 
     config: Config = load_config()
     api = AirfoldApi(config.key, config.endpoint)
     api.source_truncate(name=name)
     if source_app.is_interactive():
         source_app.ui.print_success(f"Source truncated")
+
+
+@source_app.command("delete")
+@catch_airfold_error()
+@with_global_options
+def delete(
+    ctx: Context,
+    name: Annotated[str, SourceNameArgument],
+    where: Annotated[str, Option("--where", help="SQL WHERE condition to delete data. Ex.: logLevel='ERROR'")],
+) -> None:
+    """Delete source data.
+    \f
+
+    Args:
+        ctx: Typer context
+        name: source name
+        where: delete condition
+    """
+    source_app.apply_options(ctx)
+
+    config: Config = load_config()
+    api = AirfoldApi(config.key, config.endpoint)
+    api.source_delete_data(name=name, where=where)
+    if source_app.is_interactive():
+        source_app.ui.print_success(f"Source data deleted")
```

## Comparing `airfold_cli-0.9.0.dist-info/METADATA` & `airfold_cli-0.9.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: airfold-cli
-Version: 0.9.0
+Version: 0.9.1
 Summary: Airfold CLI
 Author-email: Constantine Peresypkin <pconstantine@gmail.com>, Oleksandr Bazna <oleksandr.bazna@gmail.com>
 Classifier: Development Status :: 3 - Alpha
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: License :: OSI Approved :: Apache Software License
 Classifier: Operating System :: OS Independent
```

## Comparing `airfold_cli-0.9.0.dist-info/RECORD` & `airfold_cli-0.9.1.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,38 +1,38 @@
 airfold_cli/__init__.py,sha256=OKt6QkA_xFKBrXqg8Sb3yHmZxNdafbfX-4PnXckfIJw,351
 airfold_cli/__main__.py,sha256=njKqgGhQE1Rq-kUn8eQ-Z48JsfaoNd42VPAcycMCkrA,85
-airfold_cli/api.py,sha256=FmeuMA8TTRMxBTg2kqQ98SYUoQCfLXVE4sruWeGQEK4,17812
+airfold_cli/api.py,sha256=dWslvEvgvSnUaYjjcGoJqz5UzsI-TdAvXnIesJUdnto,18190
 airfold_cli/cli.py,sha256=_r0sTb0W34Isx7470GTqMKsa4AiM7gU9BLAa__W5H28,2219
 airfold_cli/completion.py,sha256=LaSdS9ehtIEzrO5_Q-xTYm33nZM1N3jVRZQMro796fs,959
 airfold_cli/config.py,sha256=whgGM16NPkrL-_DwomxZN4vY6fQWrFcxI1EjOTY6ZAU,2578
 airfold_cli/diff.py,sha256=d9DFgC97Xy_SSDWHkfHhqOD3ZmzrpfyYCuiRXQGRc34,2711
 airfold_cli/doctor.py,sha256=2t4l9EB8IWybZqD4oCfGxh0tMQjDpXsQomk12NvsW1g,2429
 airfold_cli/error.py,sha256=gxliYhBXwwmtbZWty2kagnBnxRpPAfmQR8MsdkwC4ao,364
 airfold_cli/fmt.py,sha256=0pMISY4mqUp7m2OiG0hHb__gZo-rzdCOMVcQzgOJwPQ,5501
 airfold_cli/generate.py,sha256=wVMhdoy8BRwyeAJTAD9pzycMWaoXITT1m955aqqP4kk,3672
 airfold_cli/graph.py,sha256=dYfcrzKNRFNJ9m7GbpkL4NgnK_QiCgt0lmH2Qoy1mnQ,1231
 airfold_cli/models.py,sha256=bv6pKpTMV0Of1kFCt-knp1AL7Iaxgg0akuCPn3kwM2A,2654
 airfold_cli/options.py,sha256=loVcsOqo0d2KCG8EJ18fnxzzNzFZxjwuu4fIlSTRa2Q,4003
-airfold_cli/pipe.py,sha256=4wXzcrPeHiKLvOBC-fSMMscPi8eiumkxrzlO2hIYaCk,6441
+airfold_cli/pipe.py,sha256=oSUk7DRhSaLYFBFJx3EDPChJ0B1ezl0tvUeZx9sHkiE,6435
 airfold_cli/prompts.py,sha256=SxXDqGF7MIAxcmjXBFQpKxvFp_TBGmnCSW6lDjfH5Do,773
 airfold_cli/pull.py,sha256=Qd77CCVkfDaRAy3YpJkyX-fTgm-YYfzMOXz9toQZp_I,1727
 airfold_cli/push.py,sha256=0OSgpc0mbDGUvrFfT674y-1vTuZTKk2j_sTMMm11jkQ,2473
 airfold_cli/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 airfold_cli/root.py,sha256=tbJHGTJsmjfT_kHBQaQXrK1Q0nYtis3riLzETNNFknU,1704
-airfold_cli/source.py,sha256=DYj8cKQAR4csGV500aO-YIB6u6C94-80qiKozpZ5TW4,10884
+airfold_cli/source.py,sha256=8FBVbPPmEDMpDHwg88p8GfaDcmN-R9KuUUfPXvPEGLM,11558
 airfold_cli/ui.py,sha256=RcjVTYrbiC0CpGJzdEuctxwmVH9MnXjxTOmICWragNQ,1956
 airfold_cli/utils.py,sha256=BkPXq9MNG5elUquIPjXaScIDKcVyQe5ddbwS0fRe_5I,4776
 airfold_cli/version.py,sha256=pG1wRXqqbDGy9xF6kYa0Zoo-YeUY4Z9USmAegCif1UY,370
 airfold_cli/events/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 airfold_cli/events/http_log.py,sha256=Ca1bN3maem0avhT-OjZH9UjtZ5jL687rtOlsciE4CRk,7957
 airfold_cli/tui/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 airfold_cli/tui/diff.py,sha256=9PLu6CTxz9niVFInIEfdhmvFjT9ifCqqBzkBp90jLMA,18631
 airfold_cli/tui/progress.py,sha256=5Vfpxu1oZ7xXgq3iRJvM57Vg0TM0Zi0HHqjlFBQmtrA,1109
 airfold_cli/tui/renderables.py,sha256=YpMXX3kVr3yN4Gyz_xptK6jyyfLXibnWJwnAJyLR9rQ,4242
 airfold_cli/tui/syntax.py,sha256=7EkriVOMpXrpAp_7Y9z4MibRykTsKcKz2KOzlM0QYDY,815
 airfold_cli/tui/theme.py,sha256=sy8fKZ8mHv38ktSgFjEfTXoHIi59LQCYchfelGSuayI,667
 airfold_cli/tui/underline_bar.py,sha256=G3BHZWxi4fwP2rNmEpTn9UcwgUMnuWDquUf2TNoxBkE,3303
-airfold_cli-0.9.0.dist-info/METADATA,sha256=SS8SVmxFDsH5XEo5fjS14Xvhy7aPZtcg5dTfqnPPDlI,1697
-airfold_cli-0.9.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-airfold_cli-0.9.0.dist-info/entry_points.txt,sha256=U06HVyIpGfedod0MuRa2mBocf-PVnZM87A5DbQe4PwQ,44
-airfold_cli-0.9.0.dist-info/top_level.txt,sha256=nmslueYDEvCCyx_g7mV_P-G8I86vKjoOVC2zLUcuEPM,12
-airfold_cli-0.9.0.dist-info/RECORD,,
+airfold_cli-0.9.1.dist-info/METADATA,sha256=Cs9a9o1cWdBb638KYRkOc67OFyNFJ2bGkF8zJv3ukeA,1697
+airfold_cli-0.9.1.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+airfold_cli-0.9.1.dist-info/entry_points.txt,sha256=U06HVyIpGfedod0MuRa2mBocf-PVnZM87A5DbQe4PwQ,44
+airfold_cli-0.9.1.dist-info/top_level.txt,sha256=nmslueYDEvCCyx_g7mV_P-G8I86vKjoOVC2zLUcuEPM,12
+airfold_cli-0.9.1.dist-info/RECORD,,
```

