# Comparing `tmp/assemblyline_v4_service-4.5.1.dev92-py3-none-any.whl.zip` & `tmp/assemblyline_v4_service-4.5.1.dev93-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,47 +1,47 @@
-Zip file size: 86940 bytes, number of entries: 45
--rw-r--r--  2.0 unx       12 b- defN 24-Apr-17 16:58 assemblyline_v4_service/VERSION
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-17 16:58 assemblyline_v4_service/__init__.py
--rw-r--r--  2.0 unx     1575 b- defN 24-Apr-17 16:58 assemblyline_v4_service/healthz.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-17 16:58 assemblyline_v4_service/py.typed
--rw-r--r--  2.0 unx    14514 b- defN 24-Apr-17 16:58 assemblyline_v4_service/run_privileged_service.py
--rw-r--r--  2.0 unx     5996 b- defN 24-Apr-17 16:58 assemblyline_v4_service/run_service.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/__init__.py
--rw-r--r--  2.0 unx     6849 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/api.py
--rw-r--r--  2.0 unx    14218 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/base.py
--rw-r--r--  2.0 unx     3289 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/helper.py
--rw-r--r--  2.0 unx     8841 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/ocr.py
--rw-r--r--  2.0 unx     7890 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/ontology_helper.py
--rw-r--r--  2.0 unx    11774 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/request.py
--rw-r--r--  2.0 unx    32713 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/result.py
--rw-r--r--  2.0 unx    13720 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/task.py
--rw-r--r--  2.0 unx     3890 b- defN 24-Apr-17 16:58 assemblyline_v4_service/common/utils.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-17 16:58 assemblyline_v4_service/dev/__init__.py
--rw-r--r--  2.0 unx    10456 b- defN 24-Apr-17 16:58 assemblyline_v4_service/dev/run_service_once.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-17 16:58 assemblyline_v4_service/updater/__init__.py
--rw-r--r--  2.0 unx      133 b- defN 24-Apr-17 16:58 assemblyline_v4_service/updater/__main__.py
--rw-r--r--  2.0 unx     3317 b- defN 24-Apr-17 16:58 assemblyline_v4_service/updater/app.py
--rw-r--r--  2.0 unx     9518 b- defN 24-Apr-17 16:58 assemblyline_v4_service/updater/client.py
--rw-r--r--  2.0 unx     1247 b- defN 24-Apr-17 16:58 assemblyline_v4_service/updater/gunicorn_config.py
--rw-r--r--  2.0 unx     9532 b- defN 24-Apr-17 16:58 assemblyline_v4_service/updater/helper.py
--rw-r--r--  2.0 unx    29013 b- defN 24-Apr-17 16:58 assemblyline_v4_service/updater/updater.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-17 16:58 test/__init__.py
--rw-r--r--  2.0 unx     1851 b- defN 24-Apr-17 16:58 test/conftest.py
--rw-r--r--  2.0 unx        7 b- defN 24-Apr-17 16:58 test/test_healthz.py
--rw-r--r--  2.0 unx        7 b- defN 24-Apr-17 16:58 test/test_run_privileged_service.py
--rw-r--r--  2.0 unx        7 b- defN 24-Apr-17 16:58 test/test_run_service.py
--rw-r--r--  2.0 unx     1259 b- defN 24-Apr-17 16:58 test/test_common/__init__.py
--rw-r--r--  2.0 unx     4902 b- defN 24-Apr-17 16:58 test/test_common/test_api.py
--rw-r--r--  2.0 unx    13346 b- defN 24-Apr-17 16:58 test/test_common/test_base.py
--rw-r--r--  2.0 unx     2575 b- defN 24-Apr-17 16:58 test/test_common/test_helper.py
--rw-r--r--  2.0 unx     1753 b- defN 24-Apr-17 16:58 test/test_common/test_ocr.py
--rw-r--r--  2.0 unx     7914 b- defN 24-Apr-17 16:58 test/test_common/test_ontology_helper.py
--rw-r--r--  2.0 unx    11492 b- defN 24-Apr-17 16:58 test/test_common/test_request.py
--rw-r--r--  2.0 unx    41982 b- defN 24-Apr-17 16:58 test/test_common/test_result.py
--rw-r--r--  2.0 unx    18718 b- defN 24-Apr-17 16:58 test/test_common/test_task.py
--rw-r--r--  2.0 unx     5904 b- defN 24-Apr-17 16:58 test/test_common/test_utils.py
--rw-r--r--  2.0 unx     1396 b- defN 24-Apr-17 16:58 assemblyline_v4_service-4.5.1.dev92.dist-info/LICENCE.md
--rw-r--r--  2.0 unx     9498 b- defN 24-Apr-17 16:58 assemblyline_v4_service-4.5.1.dev92.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-17 16:58 assemblyline_v4_service-4.5.1.dev92.dist-info/WHEEL
--rw-r--r--  2.0 unx       29 b- defN 24-Apr-17 16:58 assemblyline_v4_service-4.5.1.dev92.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     4181 b- defN 24-Apr-17 16:58 assemblyline_v4_service-4.5.1.dev92.dist-info/RECORD
-45 files, 315410 bytes uncompressed, 80112 bytes compressed:  74.6%
+Zip file size: 86955 bytes, number of entries: 45
+-rw-r--r--  2.0 unx       12 b- defN 24-Apr-18 15:19 assemblyline_v4_service/VERSION
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 15:19 assemblyline_v4_service/__init__.py
+-rw-r--r--  2.0 unx     1575 b- defN 24-Apr-18 15:19 assemblyline_v4_service/healthz.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 15:19 assemblyline_v4_service/py.typed
+-rw-r--r--  2.0 unx    14514 b- defN 24-Apr-18 15:19 assemblyline_v4_service/run_privileged_service.py
+-rw-r--r--  2.0 unx     5996 b- defN 24-Apr-18 15:19 assemblyline_v4_service/run_service.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/__init__.py
+-rw-r--r--  2.0 unx     6849 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/api.py
+-rw-r--r--  2.0 unx    14218 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/base.py
+-rw-r--r--  2.0 unx     3289 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/helper.py
+-rw-r--r--  2.0 unx     8841 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/ocr.py
+-rw-r--r--  2.0 unx     7890 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/ontology_helper.py
+-rw-r--r--  2.0 unx    11792 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/request.py
+-rw-r--r--  2.0 unx    32713 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/result.py
+-rw-r--r--  2.0 unx    13720 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/task.py
+-rw-r--r--  2.0 unx     3890 b- defN 24-Apr-18 15:19 assemblyline_v4_service/common/utils.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 15:19 assemblyline_v4_service/dev/__init__.py
+-rw-r--r--  2.0 unx    10456 b- defN 24-Apr-18 15:19 assemblyline_v4_service/dev/run_service_once.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 15:19 assemblyline_v4_service/updater/__init__.py
+-rw-r--r--  2.0 unx      133 b- defN 24-Apr-18 15:19 assemblyline_v4_service/updater/__main__.py
+-rw-r--r--  2.0 unx     3317 b- defN 24-Apr-18 15:19 assemblyline_v4_service/updater/app.py
+-rw-r--r--  2.0 unx     9518 b- defN 24-Apr-18 15:19 assemblyline_v4_service/updater/client.py
+-rw-r--r--  2.0 unx     1247 b- defN 24-Apr-18 15:19 assemblyline_v4_service/updater/gunicorn_config.py
+-rw-r--r--  2.0 unx     9532 b- defN 24-Apr-18 15:19 assemblyline_v4_service/updater/helper.py
+-rw-r--r--  2.0 unx    29013 b- defN 24-Apr-18 15:19 assemblyline_v4_service/updater/updater.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-18 15:19 test/__init__.py
+-rw-r--r--  2.0 unx     1851 b- defN 24-Apr-18 15:19 test/conftest.py
+-rw-r--r--  2.0 unx        7 b- defN 24-Apr-18 15:19 test/test_healthz.py
+-rw-r--r--  2.0 unx        7 b- defN 24-Apr-18 15:19 test/test_run_privileged_service.py
+-rw-r--r--  2.0 unx        7 b- defN 24-Apr-18 15:19 test/test_run_service.py
+-rw-r--r--  2.0 unx     1259 b- defN 24-Apr-18 15:19 test/test_common/__init__.py
+-rw-r--r--  2.0 unx     4902 b- defN 24-Apr-18 15:19 test/test_common/test_api.py
+-rw-r--r--  2.0 unx    13346 b- defN 24-Apr-18 15:19 test/test_common/test_base.py
+-rw-r--r--  2.0 unx     2575 b- defN 24-Apr-18 15:19 test/test_common/test_helper.py
+-rw-r--r--  2.0 unx     1753 b- defN 24-Apr-18 15:19 test/test_common/test_ocr.py
+-rw-r--r--  2.0 unx     7914 b- defN 24-Apr-18 15:19 test/test_common/test_ontology_helper.py
+-rw-r--r--  2.0 unx    11492 b- defN 24-Apr-18 15:19 test/test_common/test_request.py
+-rw-r--r--  2.0 unx    41982 b- defN 24-Apr-18 15:19 test/test_common/test_result.py
+-rw-r--r--  2.0 unx    18718 b- defN 24-Apr-18 15:19 test/test_common/test_task.py
+-rw-r--r--  2.0 unx     5904 b- defN 24-Apr-18 15:19 test/test_common/test_utils.py
+-rw-r--r--  2.0 unx     1396 b- defN 24-Apr-18 15:20 assemblyline_v4_service-4.5.1.dev93.dist-info/LICENCE.md
+-rw-r--r--  2.0 unx     9498 b- defN 24-Apr-18 15:20 assemblyline_v4_service-4.5.1.dev93.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-18 15:20 assemblyline_v4_service-4.5.1.dev93.dist-info/WHEEL
+-rw-r--r--  2.0 unx       29 b- defN 24-Apr-18 15:20 assemblyline_v4_service-4.5.1.dev93.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     4181 b- defN 24-Apr-18 15:20 assemblyline_v4_service-4.5.1.dev93.dist-info/RECORD
+45 files, 315428 bytes uncompressed, 80127 bytes compressed:  74.6%
```

## zipnote {}

```diff
@@ -114,23 +114,23 @@
 
 Filename: test/test_common/test_task.py
 Comment: 
 
 Filename: test/test_common/test_utils.py
 Comment: 
 
-Filename: assemblyline_v4_service-4.5.1.dev92.dist-info/LICENCE.md
+Filename: assemblyline_v4_service-4.5.1.dev93.dist-info/LICENCE.md
 Comment: 
 
-Filename: assemblyline_v4_service-4.5.1.dev92.dist-info/METADATA
+Filename: assemblyline_v4_service-4.5.1.dev93.dist-info/METADATA
 Comment: 
 
-Filename: assemblyline_v4_service-4.5.1.dev92.dist-info/WHEEL
+Filename: assemblyline_v4_service-4.5.1.dev93.dist-info/WHEEL
 Comment: 
 
-Filename: assemblyline_v4_service-4.5.1.dev92.dist-info/top_level.txt
+Filename: assemblyline_v4_service-4.5.1.dev93.dist-info/top_level.txt
 Comment: 
 
-Filename: assemblyline_v4_service-4.5.1.dev92.dist-info/RECORD
+Filename: assemblyline_v4_service-4.5.1.dev93.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## assemblyline_v4_service/VERSION

```diff
@@ -1 +1 @@
-4.5.1.dev92
+4.5.1.dev93
```

## assemblyline_v4_service/common/base.py

```diff
@@ -258,15 +258,15 @@
 
         # Resolve the update target
         scheme, verify = 'http', None
         if os.path.exists(UPDATES_CA):
             scheme, verify = 'https', UPDATES_CA
         url_base = f"{scheme}://{self.dependencies['updates']['host']}:{self.dependencies['updates']['port']}/"
         headers = {
-            'X_APIKEY': self.dependencies['updates']['key']
+            'x-apikey': self.dependencies['updates']['key']
         }
 
         # Check if there are new signatures
         retries = 0
         while True:
             resp = requests.get(url_base + 'status', verify=verify)
             resp.raise_for_status()
```

## assemblyline_v4_service/common/request.py

```diff
@@ -74,25 +74,25 @@
         :param description: Descriptive text about the image file
         :param classification: Classification of the image file (default: service classification)
         :param ocr_heuristic_id: Heuristic ID associated to suspicious OCR detections
         :param ocr_io: Stream to write the raw OCR output to
         :return: None
         """
 
-        outtmp = tempfile.NamedTemporaryFile(dir=self._working_directory, delete=False)
-        data = {}
-        with tempfile.NamedTemporaryFile(dir=self._working_directory, delete=False) as thumbtmp:
-            # Load Image
-            img = Image.open(path)
+        # Load Image
+        img = Image.open(path)
 
-            # Force image format switch to prevent exploit to cross-over
-            img_format = 'WEBP'
-            if img.format == img_format:
-                img_format = 'PNG'
+        # Force image format switch to prevent exploit to cross-over
+        img_format = 'WEBP'
+        if img.format == img_format:
+            img_format = 'PNG'
 
+        outtmp = tempfile.NamedTemporaryFile(dir=self._working_directory, delete=False, suffix=f".{img_format}")
+        data = {}
+        with tempfile.NamedTemporaryFile(dir=self._working_directory, delete=False, suffix=".thumb") as thumbtmp:
             if img_format == "WEBP" and (img.height > WEBP_MAX_SIZE or img.width > WEBP_MAX_SIZE):
                 # Maintain aspect ratio
                 img.thumbnail((WEBP_MAX_SIZE, WEBP_MAX_SIZE), Image.LANCZOS)
 
             # Save and upload new image
             try:
                 img.save(outtmp.name, format=img_format)
```

## Comparing `assemblyline_v4_service-4.5.1.dev92.dist-info/LICENCE.md` & `assemblyline_v4_service-4.5.1.dev93.dist-info/LICENCE.md`

 * *Files identical despite different names*

## Comparing `assemblyline_v4_service-4.5.1.dev92.dist-info/METADATA` & `assemblyline_v4_service-4.5.1.dev93.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: assemblyline-v4-service
-Version: 4.5.1.dev92
+Version: 4.5.1.dev93
 Summary: Assemblyline 4 - Service base
 Home-page: https://github.com/CybercentreCanada/assemblyline-v4-service/
 Author: CCCS Assemblyline development team
 Author-email: assemblyline@cyber.gc.ca
 License: MIT
 Keywords: assemblyline automated malware analysis gc canada cse-cst cse cst cyber cccs
 Classifier: Development Status :: 5 - Production/Stable
```

## Comparing `assemblyline_v4_service-4.5.1.dev92.dist-info/RECORD` & `assemblyline_v4_service-4.5.1.dev93.dist-info/RECORD`

 * *Files 5% similar despite different names*

```diff
@@ -1,20 +1,20 @@
-assemblyline_v4_service/VERSION,sha256=IQFQHR8oxRt7ecJ17ZA70nyaEbUx3tEgflhXtE-1Gps,12
+assemblyline_v4_service/VERSION,sha256=G9pBMQfRxZ-eeKDX_TxdkLhDvwbvQLuRw3bfiEq6Zo8,12
 assemblyline_v4_service/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 assemblyline_v4_service/healthz.py,sha256=sS1cFkDLw8hUPMpj7tbHXFv8ZmHcazrwZ0l6oQDwwkQ,1575
 assemblyline_v4_service/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 assemblyline_v4_service/run_privileged_service.py,sha256=qd4DmHo5G_Tpv8tb0A96qNfCGuXBu5MlIKB205z5e5w,14514
 assemblyline_v4_service/run_service.py,sha256=NiFX52NfsbBQY6E3nrjoB3e2XxIlwFcQpYYY-rADIk4,5996
 assemblyline_v4_service/common/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 assemblyline_v4_service/common/api.py,sha256=Xzp8j4HCCfjPvNSGKiZl5ttH2_Itg47cjlH0NXNtth0,6849
-assemblyline_v4_service/common/base.py,sha256=1wxzg_enESdqxloiAWCL0fUNzcKg0kAVfNNkGAfHX0U,14218
+assemblyline_v4_service/common/base.py,sha256=4rnK_183qsSfkRkuVp_0wy-haW49umx4jJIC0OalGDM,14218
 assemblyline_v4_service/common/helper.py,sha256=xs9quuf-M1JOdKieBqOmWaOece0CtzXFhhe85xQYmuY,3289
 assemblyline_v4_service/common/ocr.py,sha256=3fV0PyY3oui_ucAM9dkolP0VRYKACKJuGY4M64DudIE,8841
 assemblyline_v4_service/common/ontology_helper.py,sha256=QpwerYoS5hXjWzpx3Pmwv6j2330PQVYqxYGamjcpW3I,7890
-assemblyline_v4_service/common/request.py,sha256=XXBafAQCV43_OBLXOSHxYoDHmqwERBkNul8fb_X6Ves,11774
+assemblyline_v4_service/common/request.py,sha256=W7fqC2xQE3i5i2jlCDyUDp3ZqJQQqSshNW0mQfJMkFg,11792
 assemblyline_v4_service/common/result.py,sha256=9AqM6qCYiia_Bpyn_fBFhzNQMcqJbtFSiGjp57fXW2E,32713
 assemblyline_v4_service/common/task.py,sha256=-AhtT6qSMLndBB3IOqOF-MV5K8Xp_67yvcgMuzr1IT0,13720
 assemblyline_v4_service/common/utils.py,sha256=k2__d-V5LjB6o2IKbjVe7tJWKcKuUHto5TyT5oKhIa0,3890
 assemblyline_v4_service/dev/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 assemblyline_v4_service/dev/run_service_once.py,sha256=4K3ljw0MnfPGw0-6lzc_vtUYg1EbntJbbsWvNU-ZM_A,10456
 assemblyline_v4_service/updater/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 assemblyline_v4_service/updater/__main__.py,sha256=9Os-u8Tf7MD73JSrUSPmOaErTgfvesNLiEeszU4ujXA,133
@@ -34,12 +34,12 @@
 test/test_common/test_helper.py,sha256=sO6YAiBhKTqaxlpLhFYDuy2ZdbuF2cg07Ylzo83ZzQs,2575
 test/test_common/test_ocr.py,sha256=mt_PgElgwQKJmNrp2nRVx9NjfMedVk40I6IV317vATI,1753
 test/test_common/test_ontology_helper.py,sha256=KhHEBg_ecJyQbDw79NMT4FzUyA4C1Aak3HEQCwBfM2s,7914
 test/test_common/test_request.py,sha256=PPhHfrwpwMdNZ33P1Z_0h1Zaz9ao9VFiDr_MJrBS3Lg,11492
 test/test_common/test_result.py,sha256=b96bCfyW0ukdTcCsl01jS_l5YhfzXFVYs_VPOwz7IEU,41982
 test/test_common/test_task.py,sha256=jnfF68EgJIu30Pz_4jiJHkncfI-3XpGaut5r79KIXOA,18718
 test/test_common/test_utils.py,sha256=TbnBxqpS_ZC5ptXR9XJX3xtbItD0mTbtiBxxdyP8J5k,5904
-assemblyline_v4_service-4.5.1.dev92.dist-info/LICENCE.md,sha256=NSkYo9EH8h5oOkzg4VhjAHF4339MqPP2cQ8msTPgl-c,1396
-assemblyline_v4_service-4.5.1.dev92.dist-info/METADATA,sha256=REMm_bUq5ucd3RiVPeHLVmvTX-rttVcvXoO7uu4ZdLM,9498
-assemblyline_v4_service-4.5.1.dev92.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-assemblyline_v4_service-4.5.1.dev92.dist-info/top_level.txt,sha256=LpTOEaVCatkrvbVq3EZseMSIa2PQZU-2rhuO_FTpZgY,29
-assemblyline_v4_service-4.5.1.dev92.dist-info/RECORD,,
+assemblyline_v4_service-4.5.1.dev93.dist-info/LICENCE.md,sha256=NSkYo9EH8h5oOkzg4VhjAHF4339MqPP2cQ8msTPgl-c,1396
+assemblyline_v4_service-4.5.1.dev93.dist-info/METADATA,sha256=hkquLz3YRfOmXdcQtBr92NTA6GAley5l-9UOmEVbTvA,9498
+assemblyline_v4_service-4.5.1.dev93.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+assemblyline_v4_service-4.5.1.dev93.dist-info/top_level.txt,sha256=LpTOEaVCatkrvbVq3EZseMSIa2PQZU-2rhuO_FTpZgY,29
+assemblyline_v4_service-4.5.1.dev93.dist-info/RECORD,,
```

