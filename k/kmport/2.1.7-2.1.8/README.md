# Comparing `tmp/kmport-2.1.7.tar.gz` & `tmp/kmport-2.1.8.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "kmport-2.1.7.tar", last modified: Fri Apr 12 04:52:28 2024, max compression
+gzip compressed data, was "kmport-2.1.8.tar", last modified: Thu Apr 18 02:39:10 2024, max compression
```

## Comparing `kmport-2.1.7.tar` & `kmport-2.1.8.tar`

### file list

```diff
@@ -1,14 +1,14 @@
-drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-12 04:52:28.252897 kmport-2.1.7/
--rw-rw-r--   0 kage      (1000) kage      (1000)     1066 2021-12-15 17:55:20.000000 kmport-2.1.7/LICENSE
--rw-r--r--   0 kage      (1000) kage      (1000)    26011 2024-04-12 04:52:28.252897 kmport-2.1.7/PKG-INFO
--rw-rw-r--   0 kage      (1000) kage      (1000)    25593 2022-12-30 02:48:56.000000 kmport-2.1.7/README.md
-drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-12 04:52:28.251896 kmport-2.1.7/kmport/
--rw-r--r--   0 kage      (1000) kage      (1000)   304513 2024-04-12 04:51:45.000000 kmport-2.1.7/kmport/__init__.py
-drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-12 04:52:28.251896 kmport-2.1.7/kmport.egg-info/
--rw-rw-r--   0 kage      (1000) kage      (1000)    26011 2024-04-12 04:52:28.000000 kmport-2.1.7/kmport.egg-info/PKG-INFO
--rw-rw-r--   0 kage      (1000) kage      (1000)      180 2024-04-12 04:52:28.000000 kmport-2.1.7/kmport.egg-info/SOURCES.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)        1 2024-04-12 04:52:28.000000 kmport-2.1.7/kmport.egg-info/dependency_links.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)        7 2024-04-12 04:52:28.000000 kmport-2.1.7/kmport.egg-info/top_level.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)      104 2021-12-15 17:55:20.000000 kmport-2.1.7/pyproject.toml
--rw-r--r--   0 kage      (1000) kage      (1000)       38 2024-04-12 04:52:28.252897 kmport-2.1.7/setup.cfg
--rw-rw-r--   0 kage      (1000) kage      (1000)     1975 2022-03-19 17:08:26.000000 kmport-2.1.7/setup.py
+drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-18 02:39:10.673522 kmport-2.1.8/
+-rw-rw-r--   0 kage      (1000) kage      (1000)     1066 2021-12-15 17:55:20.000000 kmport-2.1.8/LICENSE
+-rw-r--r--   0 kage      (1000) kage      (1000)    26011 2024-04-18 02:39:10.673522 kmport-2.1.8/PKG-INFO
+-rw-rw-r--   0 kage      (1000) kage      (1000)    25593 2022-12-30 02:48:56.000000 kmport-2.1.8/README.md
+drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-18 02:39:10.671522 kmport-2.1.8/kmport/
+-rw-r--r--   0 kage      (1000) kage      (1000)   305714 2024-04-18 02:38:50.000000 kmport-2.1.8/kmport/__init__.py
+drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-18 02:39:10.672521 kmport-2.1.8/kmport.egg-info/
+-rw-rw-r--   0 kage      (1000) kage      (1000)    26011 2024-04-18 02:39:10.000000 kmport-2.1.8/kmport.egg-info/PKG-INFO
+-rw-rw-r--   0 kage      (1000) kage      (1000)      180 2024-04-18 02:39:10.000000 kmport-2.1.8/kmport.egg-info/SOURCES.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)        1 2024-04-18 02:39:10.000000 kmport-2.1.8/kmport.egg-info/dependency_links.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)        7 2024-04-18 02:39:10.000000 kmport-2.1.8/kmport.egg-info/top_level.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)      104 2021-12-15 17:55:20.000000 kmport-2.1.8/pyproject.toml
+-rw-r--r--   0 kage      (1000) kage      (1000)       38 2024-04-18 02:39:10.673522 kmport-2.1.8/setup.cfg
+-rw-rw-r--   0 kage      (1000) kage      (1000)     1975 2022-03-19 17:08:26.000000 kmport-2.1.8/setup.py
```

### Comparing `kmport-2.1.7/LICENSE` & `kmport-2.1.8/LICENSE`

 * *Files identical despite different names*

### Comparing `kmport-2.1.7/PKG-INFO` & `kmport-2.1.8/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kmport
-Version: 2.1.7
+Version: 2.1.8
 Summary: Extended import function
 Home-page: https://github.com/kagepark/Import
 Author: Kage Park
 License: MIT
 Classifier: Programming Language :: Python :: 2
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: MIT License
```

### Comparing `kmport-2.1.7/README.md` & `kmport-2.1.8/README.md`

 * *Files identical despite different names*

### Comparing `kmport-2.1.7/kmport/__init__.py` & `kmport-2.1.8/kmport/__init__.py`

 * *Files 2% similar despite different names*

```diff
@@ -276,18758 +276,18833 @@
 00001130: 2054 7275 650a 2020 2020 2020 2020 656c   True.        el
 00001140: 6966 2073 656c 662e 6461 7461 2069 7320  if self.data is 
 00001150: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
 00001160: 2020 7265 7475 726e 2054 7275 650a 2020    return True.  
 00001170: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
 00001180: 7365 0a0a 7072 696e 7466 5f6e 6577 6c69  se..printf_newli
 00001190: 6e65 5f69 6e66 6f3d 5052 494e 5445 4428  ne_info=PRINTED(
-000011a0: 290a 0a64 6566 2047 6c6f 6261 6c28 293a  )..def Global():
-000011b0: 0a20 2020 2027 2727 0a20 2020 204d 6574  .    '''.    Met
-000011c0: 686f 6427 7320 676c 6f62 616c 2076 6172  hod's global var
-000011d0: 6961 626c 6573 0a20 2020 2027 2727 0a20  iables.    '''. 
-000011e0: 2020 2023 7265 7475 726e 2064 6963 7428     #return dict(
-000011f0: 696e 7370 6563 742e 6765 746d 656d 6265  inspect.getmembe
-00001200: 7273 2869 6e73 7065 6374 2e73 7461 636b  rs(inspect.stack
-00001210: 2829 5b2d 315d 5b30 5d29 295b 2266 5f67  ()[-1][0]))["f_g
-00001220: 6c6f 6261 6c73 225d 0a20 2020 207a 3d30  lobals"].    z=0
-00001230: 0a20 2020 2066 6f72 2069 6920 696e 2069  .    for ii in i
-00001240: 6e73 7065 6374 2e73 7461 636b 2829 3a0a  nspect.stack():.
-00001250: 2020 2020 2020 2020 6966 2027 3c6d 6f64          if '<mod
-00001260: 756c 653e 2720 696e 2069 693a 2062 7265  ule>' in ii: bre
-00001270: 616b 0a20 2020 2020 2020 207a 2b3d 310a  ak.        z+=1.
-00001280: 2020 2020 7265 7475 726e 2064 6963 7428      return dict(
-00001290: 696e 7370 6563 742e 6765 746d 656d 6265  inspect.getmembe
-000012a0: 7273 2869 6e73 7065 6374 2e73 7461 636b  rs(inspect.stack
-000012b0: 2829 5b7a 5d5b 305d 2929 5b22 665f 676c  ()[z][0]))["f_gl
-000012c0: 6f62 616c 7322 5d0a 0a0a 6465 6620 5374  obals"]...def St
-000012d0: 644f 7574 286d 7367 293a 0a20 2020 2027  dOut(msg):.    '
-000012e0: 2727 0a20 2020 2053 7461 6e64 6172 6420  ''.    Standard 
-000012f0: 4f75 7470 7574 2050 7269 6e74 2077 6974  Output Print wit
-00001300: 686f 7574 206e 6577 206c 696e 6520 7379  hout new line sy
-00001310: 6d62 6f6c 0a20 2020 2027 2727 0a20 2020  mbol.    '''.   
-00001320: 2074 7279 3a0a 2020 2020 2020 2020 6966   try:.        if
-00001330: 2074 7970 6528 6d73 6729 2e5f 5f6e 616d   type(msg).__nam
-00001340: 655f 5f20 3d3d 2027 6279 7465 7327 3a0a  e__ == 'bytes':.
-00001350: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
-00001360: 7374 646f 7574 2e62 7566 6665 722e 7772  stdout.buffer.wr
-00001370: 6974 6528 6d73 6729 0a20 2020 2020 2020  ite(msg).       
-00001380: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00001390: 2020 2073 7973 2e73 7464 6f75 742e 7772     sys.stdout.wr
-000013a0: 6974 6528 6d73 6729 0a20 2020 2020 2020  ite(msg).       
-000013b0: 2073 7973 2e73 7464 6f75 742e 666c 7573   sys.stdout.flus
-000013c0: 6828 290a 2020 2020 6578 6365 7074 3a0a  h().    except:.
-000013d0: 2020 2020 2020 2020 7379 732e 7374 6465          sys.stde
-000013e0: 7272 2e77 7269 7465 2827 5772 6f6e 6720  rr.write('Wrong 
-000013f0: 6f75 7470 7574 2064 6174 6120 666f 726d  output data form
-00001400: 6174 5c6e 2729 0a20 2020 2020 2020 2073  at\n').        s
-00001410: 7973 2e73 7464 6572 722e 666c 7573 6828  ys.stderr.flush(
-00001420: 290a 0a64 6566 2053 7464 4572 7228 6d73  )..def StdErr(ms
-00001430: 6729 3a0a 2020 2020 2727 270a 2020 2020  g):.    '''.    
-00001440: 5374 616e 6461 7264 2045 7272 6f72 2050  Standard Error P
-00001450: 7269 6e74 2077 6974 686f 7574 206e 6577  rint without new
-00001460: 206c 696e 6520 7379 6d62 6f6c 0a20 2020   line symbol.   
-00001470: 2027 2727 0a20 2020 2074 7279 3a0a 2020   '''.    try:.  
-00001480: 2020 2020 2020 7379 732e 7374 6465 7272        sys.stderr
-00001490: 2e77 7269 7465 286d 7367 290a 2020 2020  .write(msg).    
-000014a0: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
-000014b0: 7379 732e 7374 6465 7272 2e77 7269 7465  sys.stderr.write
-000014c0: 2827 5772 6f6e 6720 4572 726f 7220 6461  ('Wrong Error da
-000014d0: 7461 2066 6f72 6d61 745c 6e27 290a 2020  ta format\n').  
-000014e0: 2020 7379 732e 7374 6465 7272 2e66 6c75    sys.stderr.flu
-000014f0: 7368 2829 0a0a 6465 6620 5079 5665 7228  sh()..def PyVer(
-00001500: 2a76 6572 2c2a 2a6f 7074 7329 3a0a 2020  *ver,**opts):.  
-00001510: 2020 2727 270a 2020 2020 7079 7468 6f6e    '''.    python
-00001520: 2076 6572 7369 6f6e 2063 6865 636b 0a20   version check. 
-00001530: 2020 2027 2727 0a20 2020 2063 7665 723d     '''.    cver=
-00001540: 4e6f 6e65 0a20 2020 206d 7379 6d3d 4e6f  None.    msym=No
-00001550: 6e65 0a20 2020 2076 6572 5f73 796d 3d5b  ne.    ver_sym=[
-00001560: 273d 272c 273d 3d27 2c27 3e27 2c27 3c27  '=','==','>','<'
-00001570: 2c27 3e3d 272c 273c 3d27 2c27 213d 275d  ,'>=','<=','!=']
-00001580: 0a20 2020 2069 6620 6c65 6e28 7665 7229  .    if len(ver)
-00001590: 203e 2030 3a0a 2020 2020 2020 2020 6966   > 0:.        if
-000015a0: 2076 6572 5b30 5d20 696e 2076 6572 5f73   ver[0] in ver_s
-000015b0: 796d 3a0a 2020 2020 2020 2020 2020 2020  ym:.            
-000015c0: 6d73 796d 3d76 6572 5b30 5d0a 2020 2020  msym=ver[0].    
-000015d0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000015e0: 2020 2020 2020 6376 6572 3d27 7b7d 272e        cver='{}'.
-000015f0: 666f 726d 6174 2876 6572 5b30 5d29 0a20  format(ver[0]). 
-00001600: 2020 2020 2020 2069 6620 6c65 6e28 7665         if len(ve
-00001610: 7229 203e 2031 3a0a 2020 2020 2020 2020  r) > 1:.        
-00001620: 2020 2020 6966 206d 7379 6d3a 0a20 2020      if msym:.   
-00001630: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00001640: 2069 2069 6e20 7665 725b 313a 5d3a 0a20   i in ver[1:]:. 
-00001650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001660: 2020 2069 6620 6376 6572 3a0a 2020 2020     if cver:.    
-00001670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001680: 2020 2020 6376 6572 3d63 7665 722b 272e      cver=cver+'.
-00001690: 7b7d 272e 666f 726d 6174 2869 290a 2020  {}'.format(i).  
-000016a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000016b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000016c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000016d0: 6376 6572 3d27 7b7d 272e 666f 726d 6174  cver='{}'.format
-000016e0: 2869 290a 2020 2020 2020 2020 2020 2020  (i).            
-000016f0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00001700: 2020 2020 2020 666f 7220 6920 696e 2076        for i in v
-00001710: 6572 5b31 3a5d 3a0a 2020 2020 2020 2020  er[1:]:.        
-00001720: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00001730: 2069 6e20 7665 725f 7379 6d3a 0a20 2020   in ver_sym:.   
-00001740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001750: 2020 2020 206d 7379 6d3d 690a 2020 2020       msym=i.    
-00001760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001770: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
-00001780: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00001790: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000017a0: 2020 2020 2020 2020 2020 2020 6376 6572              cver
-000017b0: 3d63 7665 722b 272e 7b7d 272e 666f 726d  =cver+'.{}'.form
-000017c0: 6174 2869 290a 2020 2020 6966 2063 7665  at(i).    if cve
-000017d0: 7220 6973 204e 6f6e 653a 0a20 2020 2020  r is None:.     
-000017e0: 2020 2069 6620 6f70 7473 2e67 6574 2827     if opts.get('
-000017f0: 6d61 696e 2729 3a20 6376 6572 3d27 7b7d  main'): cver='{}
-00001800: 272e 666f 726d 6174 286f 7074 732e 6765  '.format(opts.ge
-00001810: 7428 276d 6169 6e27 2929 0a20 2020 2020  t('main')).     
-00001820: 2020 2069 6620 6376 6572 2061 6e64 206f     if cver and o
-00001830: 7074 732e 6765 7428 276d 696e 6572 2729  pts.get('miner')
-00001840: 2061 6e64 2027 2e27 206e 6f74 2069 6e20   and '.' not in 
-00001850: 6376 6572 3a20 6376 6572 3d27 7b7d 2e7b  cver: cver='{}.{
-00001860: 7d27 2e66 6f72 6d61 7428 6376 6572 2c6f  }'.format(cver,o
-00001870: 7074 732e 6765 7428 276d 696e 6572 2729  pts.get('miner')
-00001880: 290a 2020 2020 6966 2063 7665 7220 6973  ).    if cver is
-00001890: 204e 6f6e 653a 2072 6574 7572 6e20 277b   None: return '{
-000018a0: 7d2e 7b7d 272e 666f 726d 6174 2873 7973  }.{}'.format(sys
-000018b0: 2e76 6572 7369 6f6e 5f69 6e66 6f5b 305d  .version_info[0]
-000018c0: 2c73 7973 2e76 6572 7369 6f6e 5f69 6e66  ,sys.version_inf
-000018d0: 6f5b 315d 290a 2020 2020 6966 206d 7379  o[1]).    if msy
-000018e0: 6d20 6973 204e 6f6e 653a 206d 7379 6d3d  m is None: msym=
-000018f0: 6f70 7473 2e67 6574 2827 6d73 796d 272c  opts.get('msym',
-00001900: 273d 3d27 290a 2020 2020 6966 206d 7379  '==').    if msy
-00001910: 6d3d 3d27 3d27 3a20 6d73 796d 3d27 3d3d  m=='=': msym='==
-00001920: 270a 2020 2020 6376 6572 5f61 3d63 7665  '.    cver_a=cve
-00001930: 722e 7370 6c69 7428 272e 2729 0a20 2020  r.split('.').   
-00001940: 2063 7665 725f 6c3d 6c65 6e28 6376 6572   cver_l=len(cver
-00001950: 5f61 290a 2020 2020 666f 7220 7820 696e  _a).    for x in
-00001960: 2072 616e 6765 2830 2c6c 656e 2873 7973   range(0,len(sys
-00001970: 2e76 6572 7369 6f6e 5f69 6e66 6f29 293a  .version_info)):
-00001980: 0a20 2020 2020 2020 2069 6620 7820 3c20  .        if x < 
-00001990: 6376 6572 5f6c 2d31 3a0a 2020 2020 2020  cver_l-1:.      
-000019a0: 2020 2020 2020 636d 7379 6d3d 6d73 796d        cmsym=msym
-000019b0: 2b27 3d27 2069 6620 273d 2720 6e6f 7420  +'=' if '=' not 
-000019c0: 696e 206d 7379 6d20 656c 7365 206d 7379  in msym else msy
-000019d0: 6d0a 2020 2020 2020 2020 2020 2020 6966  m.            if
-000019e0: 206e 6f74 2065 7661 6c28 277b 7d20 7b7d   not eval('{} {}
-000019f0: 207b 7d27 2e66 6f72 6d61 7428 7379 732e   {}'.format(sys.
-00001a00: 7665 7273 696f 6e5f 696e 666f 5b78 5d2c  version_info[x],
-00001a10: 636d 7379 6d2c 6376 6572 5f61 5b78 5d29  cmsym,cver_a[x])
-00001a20: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00001a30: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
-00001a40: 2020 2020 2020 2020 656c 6966 2078 203d          elif x =
-00001a50: 3d20 6376 6572 5f6c 2d31 3a0a 2020 2020  = cver_l-1:.    
-00001a60: 2020 2020 2020 2020 6966 206e 6f74 2065          if not e
-00001a70: 7661 6c28 277b 7d20 7b7d 207b 7d27 2e66  val('{} {} {}'.f
-00001a80: 6f72 6d61 7428 7379 732e 7665 7273 696f  ormat(sys.versio
-00001a90: 6e5f 696e 666f 5b78 5d2c 6d73 796d 2c63  n_info[x],msym,c
-00001aa0: 7665 725f 615b 785d 2929 3a0a 2020 2020  ver_a[x])):.    
-00001ab0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00001ac0: 726e 2046 616c 7365 0a20 2020 2072 6574  rn False.    ret
-00001ad0: 7572 6e20 5472 7565 0a0a 6465 6620 6669  urn True..def fi
-00001ae0: 6e64 5f65 7865 6375 7461 626c 6528 6578  nd_executable(ex
-00001af0: 6563 7574 6162 6c65 2c70 6174 683d 4e6f  ecutable,path=No
-00001b00: 6e65 293a 0a20 2020 2069 6620 6e6f 7420  ne):.    if not 
-00001b10: 5479 7065 2865 7865 6375 7461 626c 652c  Type(executable,
-00001b20: 2773 7472 272c 6461 7461 3d54 7275 6529  'str',data=True)
-00001b30: 3a20 7265 7475 726e 204e 6f6e 650a 2020  : return None.  
-00001b40: 2020 6966 206e 6f74 2054 7970 6528 7061    if not Type(pa
-00001b50: 7468 2c27 7374 7227 2c64 6174 613d 5472  th,'str',data=Tr
-00001b60: 7565 293a 0a20 2020 2020 2020 2070 6174  ue):.        pat
-00001b70: 683d 6f73 2e65 6e76 6972 6f6e 5b27 5041  h=os.environ['PA
-00001b80: 5448 275d 0a20 2020 2070 6174 685f 613d  TH'].    path_a=
-00001b90: 7061 7468 2e73 706c 6974 286f 732e 7061  path.split(os.pa
-00001ba0: 7468 7365 7029 0a20 2020 2069 6620 6f73  thsep).    if os
-00001bb0: 2e6e 616d 6520 3d3d 2027 6f73 3227 3a0a  .name == 'os2':.
-00001bc0: 2020 2020 2020 2020 2862 6173 652c 6578          (base,ex
-00001bd0: 7429 3d6f 732e 7061 7468 2e73 706c 6974  t)=os.path.split
-00001be0: 6578 2865 7865 6375 7461 626c 6529 0a20  ex(executable). 
-00001bf0: 2020 2020 2020 2069 6620 6e6f 7420 6578         if not ex
-00001c00: 743a 0a20 2020 2020 2020 2020 2020 2065  t:.            e
-00001c10: 7865 6375 7461 626c 653d 6578 6563 7574  xecutable=execut
-00001c20: 6162 6c65 2b27 2e65 7865 270a 2020 2020  able+'.exe'.    
-00001c30: 656c 6966 2073 7973 2e70 6c61 7466 6f72  elif sys.platfor
-00001c40: 6d20 3d3d 2027 7769 6e33 3227 3a0a 2020  m == 'win32':.  
-00001c50: 2020 2020 2020 2862 6173 652c 6578 7429        (base,ext)
-00001c60: 3d6f 732e 7061 7468 2e73 706c 6974 6578  =os.path.splitex
-00001c70: 2865 7865 6375 7461 626c 6529 0a20 2020  (executable).   
-00001c80: 2020 2020 2069 6620 6e6f 7420 6578 743a       if not ext:
-00001c90: 0a20 2020 2020 2020 2020 2020 2065 7865  .            exe
-00001ca0: 6375 7461 626c 653d 6578 6563 7574 6162  cutable=executab
-00001cb0: 6c65 2b27 2e65 7865 270a 2020 2020 666f  le+'.exe'.    fo
-00001cc0: 7220 7020 696e 2070 6174 685f 613a 0a20  r p in path_a:. 
-00001cd0: 2020 2020 2020 2066 3d6f 732e 7061 7468         f=os.path
-00001ce0: 2e6a 6f69 6e28 702c 6578 6563 7574 6162  .join(p,executab
-00001cf0: 6c65 290a 2020 2020 2020 2020 6966 206f  le).        if o
-00001d00: 732e 7061 7468 2e69 7366 696c 6528 6629  s.path.isfile(f)
-00001d10: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00001d20: 7475 726e 2066 0a20 2020 2072 6574 7572  turn f.    retur
-00001d30: 6e20 4e6f 6e65 0a0a 6465 6620 4279 7465  n None..def Byte
-00001d40: 4e61 6d65 2873 7263 293a 0a20 2020 2027  Name(src):.    '
-00001d50: 2727 0a20 2020 2047 6574 2042 7974 6520  ''.    Get Byte 
-00001d60: 7479 7065 206e 616d 650a 2020 2020 2727  type name.    ''
-00001d70: 270a 2020 2020 6966 2050 7956 6572 2833  '.    if PyVer(3
-00001d80: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
-00001d90: 2873 7263 2c62 7974 6573 293a 0a20 2020  (src,bytes):.   
-00001da0: 2020 2020 2069 6620 7372 632e 7374 6172       if src.star
-00001db0: 7473 7769 7468 2862 275c 7866 665c 7866  tswith(b'\xff\xf
-00001dc0: 655c 7830 305c 7830 3027 2920 616e 6420  e\x00\x00') and 
-00001dd0: 7372 632e 656e 6473 7769 7468 2862 275c  src.endswith(b'\
-00001de0: 7830 305c 7830 305c 7830 3027 293a 0a20  x00\x00\x00'):. 
-00001df0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00001e00: 6e20 5472 7565 2c27 7574 662d 3332 2d6c  n True,'utf-32-l
-00001e10: 6527 0a20 2020 2020 2020 2065 6c69 6620  e'.        elif 
-00001e20: 7372 632e 7374 6172 7473 7769 7468 2862  src.startswith(b
-00001e30: 275c 7830 305c 7830 305c 7830 3027 2920  '\x00\x00\x00') 
-00001e40: 616e 6420 7372 632e 656e 6473 7769 7468  and src.endswith
-00001e50: 2862 275c 7866 665c 7866 655c 7830 305c  (b'\xff\xfe\x00\
-00001e60: 7830 3027 293a 0a20 2020 2020 2020 2020  x00'):.         
-00001e70: 2020 2072 6574 7572 6e20 5472 7565 2c27     return True,'
-00001e80: 7574 662d 3332 2d62 6527 0a20 2020 2020  utf-32-be'.     
-00001e90: 2020 2065 6c69 6620 7372 632e 7374 6172     elif src.star
-00001ea0: 7473 7769 7468 2862 275c 7866 665c 7866  tswith(b'\xff\xf
-00001eb0: 6527 2920 616e 6420 7372 632e 656e 6473  e') and src.ends
-00001ec0: 7769 7468 2862 275c 7830 3027 293a 0a20  with(b'\x00'):. 
-00001ed0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00001ee0: 6e20 5472 7565 2c27 7574 662d 3136 2d6c  n True,'utf-16-l
-00001ef0: 6527 0a20 2020 2020 2020 2065 6c69 6620  e'.        elif 
-00001f00: 7372 632e 7374 6172 7473 7769 7468 2862  src.startswith(b
-00001f10: 275c 7830 3027 2920 616e 6420 7372 632e  '\x00') and src.
-00001f20: 656e 6473 7769 7468 2862 275c 7866 665c  endswith(b'\xff\
-00001f30: 7866 6527 293a 0a20 2020 2020 2020 2020  xfe'):.         
-00001f40: 2020 2072 6574 7572 6e20 5472 7565 2c27     return True,'
-00001f50: 7574 662d 3136 2d62 6527 0a20 2020 2020  utf-16-be'.     
-00001f60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00001f70: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
-00001f80: 2c27 6279 7465 7327 0a20 2020 2072 6574  ,'bytes'.    ret
-00001f90: 7572 6e20 4661 6c73 652c 4e6f 6e65 0a0a  urn False,None..
-00001fa0: 6465 6620 4279 7465 7328 7372 632c 2a2a  def Bytes(src,**
-00001fb0: 6f70 7473 293a 0a20 2020 2027 2727 0a20  opts):.    '''. 
-00001fc0: 2020 2043 6f6e 7665 7274 2064 6174 6120     Convert data 
-00001fd0: 746f 2062 7974 6573 2064 6174 610a 2020  to bytes data.  
-00001fe0: 2020 2727 270a 2020 2020 656e 636f 6465    '''.    encode
-00001ff0: 3d6f 7074 732e 6765 7428 2765 6e63 6f64  =opts.get('encod
-00002000: 6527 2c27 7574 662d 3827 290a 2020 2020  e','utf-8').    
-00002010: 6465 6661 756c 743d 6f70 7473 2e67 6574  default=opts.get
-00002020: 2827 6465 6661 756c 7427 2c7b 276f 7267  ('default',{'org
-00002030: 277d 290a 2020 2020 6465 6620 5f62 7974  '}).    def _byt
-00002040: 6573 5f28 7372 632c 656e 636f 6465 2c64  es_(src,encode,d
-00002050: 6566 6175 6c74 293a 0a20 2020 2020 2020  efault):.       
-00002060: 2069 6620 7479 7065 2873 7263 292e 5f5f   if type(src).__
-00002070: 6e61 6d65 5f5f 203d 3d20 2775 6e69 636f  name__ == 'unico
-00002080: 6465 273a 2073 7263 3d73 7472 2873 7263  de': src=str(src
-00002090: 290a 2020 2020 2020 2020 6966 2069 7369  ).        if isi
-000020a0: 6e73 7461 6e63 6528 7372 632c 6279 7465  nstance(src,byte
-000020b0: 7329 3a20 7265 7475 726e 2073 7263 0a20  s): return src. 
-000020c0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-000020d0: 616e 6365 2873 7263 2c73 7472 293a 0a20  ance(src,str):. 
-000020e0: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-000020f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002100: 7265 7475 726e 2062 7974 6573 2873 7263  return bytes(src
-00002110: 2c65 6e63 6f64 6529 0a20 2020 2020 2020  ,encode).       
-00002120: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-00002130: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-00002140: 730a 2020 2020 2020 2020 6966 2064 6566  s.        if def
-00002150: 6175 6c74 2069 6e20 5b27 6f72 6727 2c7b  ault in ['org',{
-00002160: 276f 7267 277d 5d3a 2072 6574 7572 6e20  'org'}]: return 
-00002170: 7372 630a 2020 2020 2020 2020 7265 7475  src.        retu
-00002180: 726e 2064 6566 6175 6c74 0a0a 2020 2020  rn default..    
-00002190: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
-000021a0: 632c 6c69 7374 293a 0a20 2020 2020 2020  c,list):.       
-000021b0: 2072 6574 7572 6e20 5b20 5f62 7974 6573   return [ _bytes
-000021c0: 5f28 782c 656e 636f 6465 2c64 6566 6175  _(x,encode,defau
-000021d0: 6c74 2920 666f 7220 7820 696e 2073 7263  lt) for x in src
-000021e0: 205d 0a20 2020 2065 6c69 6620 6973 696e   ].    elif isin
-000021f0: 7374 616e 6365 2873 7263 2c74 7570 6c65  stance(src,tuple
-00002200: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00002210: 6e20 7475 706c 6528 5b20 5f62 7974 6573  n tuple([ _bytes
-00002220: 5f28 782c 656e 636f 6465 2c64 6566 6175  _(x,encode,defau
-00002230: 6c74 2920 666f 7220 7820 696e 2073 7263  lt) for x in src
-00002240: 205d 290a 2020 2020 656c 6966 2069 7369   ]).    elif isi
-00002250: 6e73 7461 6e63 6528 7372 632c 6469 6374  nstance(src,dict
-00002260: 293a 0a20 2020 2020 2020 2066 6f72 2069  ):.        for i
-00002270: 6920 696e 2073 7263 3a0a 2020 2020 2020  i in src:.      
-00002280: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00002290: 6e63 6528 7372 635b 6969 5d2c 286c 6973  nce(src[ii],(lis
-000022a0: 742c 7475 706c 652c 6469 6374 2929 3a0a  t,tuple,dict)):.
-000022b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000022c0: 7372 635b 6969 5d3d 4279 7465 7328 7372  src[ii]=Bytes(sr
-000022d0: 635b 6969 5d2c 656e 636f 6465 3d65 6e63  c[ii],encode=enc
-000022e0: 6f64 652c 6465 6661 756c 743d 6465 6661  ode,default=defa
-000022f0: 756c 7429 0a20 2020 2020 2020 2020 2020  ult).           
-00002300: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00002310: 2020 2020 2020 2073 7263 5b69 695d 3d5f         src[ii]=_
-00002320: 6279 7465 735f 2873 7263 5b69 695d 2c65  bytes_(src[ii],e
-00002330: 6e63 6f64 652c 6465 6661 756c 7429 0a20  ncode,default). 
-00002340: 2020 2020 2020 2072 6574 7572 6e20 7372         return sr
-00002350: 630a 2020 2020 656c 7365 3a0a 2020 2020  c.    else:.    
-00002360: 2020 2020 7265 7475 726e 205f 6279 7465      return _byte
-00002370: 735f 2873 7263 2c65 6e63 6f64 652c 6465  s_(src,encode,de
-00002380: 6661 756c 7429 0a64 6566 2049 6e74 3242  fault).def Int2B
-00002390: 7974 6573 2873 7263 2c64 6566 6175 6c74  ytes(src,default
-000023a0: 3d27 6f72 6727 293a 0a20 2020 2074 7279  ='org'):.    try
-000023b0: 3a0a 2020 2020 2020 2020 2373 7472 7563  :.        #struc
-000023c0: 742e 7061 636b 2827 3e49 272c 2073 7263  t.pack('>I', src
-000023d0: 295b 313a 5d0a 2020 2020 2020 2020 2373  )[1:].        #s
-000023e0: 7472 7563 742e 7061 636b 2827 3e4c 272c  truct.pack('>L',
-000023f0: 2073 7263 295b 313a 5d0a 2020 2020 2020   src)[1:].      
-00002400: 2020 7265 7475 726e 2073 7472 7563 742e    return struct.
-00002410: 7061 636b 2827 3e42 4827 2c20 7372 6320  pack('>BH', src 
-00002420: 3e3e 2031 362c 2073 7263 2026 2030 7846  >> 16, src & 0xF
-00002430: 4646 4629 0a20 2020 2065 7863 6570 743a  FFF).    except:
-00002440: 0a20 2020 2020 2020 2069 6620 6465 6661  .        if defa
-00002450: 756c 7420 696e 205b 276f 7267 272c 7b27  ult in ['org',{'
-00002460: 6f72 6727 7d5d 3a20 7265 7475 726e 2073  org'}]: return s
-00002470: 7263 0a20 2020 2020 2020 2072 6574 7572  rc.        retur
-00002480: 6e20 6465 6661 756c 740a 0a64 6566 2042  n default..def B
-00002490: 7974 6573 3249 6e74 2873 7263 2c65 6e63  ytes2Int(src,enc
-000024a0: 6f64 653d 2775 7466 2d38 272c 6465 6661  ode='utf-8',defa
-000024b0: 756c 743d 276f 7267 2729 3a0a 2020 2020  ult='org'):.    
-000024c0: 6966 2050 7956 6572 2833 293a 0a20 2020  if PyVer(3):.   
-000024d0: 2020 2020 2062 7372 633d 4279 7465 7328       bsrc=Bytes(
-000024e0: 7372 632c 656e 636f 6465 3d65 6e63 6f64  src,encode=encod
-000024f0: 6529 0a20 2020 2020 2020 2069 6620 6973  e).        if is
-00002500: 696e 7374 616e 6365 2862 7372 632c 6279  instance(bsrc,by
-00002510: 7465 7329 3a0a 2020 2020 2020 2020 2020  tes):.          
-00002520: 2020 7265 7475 726e 2069 6e74 2862 7372    return int(bsr
-00002530: 632e 6865 7828 292c 3136 290a 2020 2020  c.hex(),16).    
-00002540: 2020 2020 6966 2064 6566 6175 6c74 2069      if default i
-00002550: 6e20 5b27 6f72 6727 2c7b 276f 7267 277d  n ['org',{'org'}
-00002560: 5d3a 2072 6574 7572 6e20 7372 630a 2020  ]: return src.  
-00002570: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-00002580: 6175 6c74 0a20 2020 2074 7279 3a0a 2020  ault.    try:.  
-00002590: 2020 2020 2020 7265 7475 726e 2069 6e74        return int
-000025a0: 2873 7263 2e65 6e63 6f64 6528 2768 6578  (src.encode('hex
-000025b0: 2729 2c31 3629 0a20 2020 2065 7863 6570  '),16).    excep
-000025c0: 743a 0a20 2020 2020 2020 2069 6620 6465  t:.        if de
-000025d0: 6661 756c 7420 696e 205b 276f 7267 272c  fault in ['org',
-000025e0: 7b27 6f72 6727 7d5d 3a20 7265 7475 726e  {'org'}]: return
-000025f0: 2073 7263 0a20 2020 2020 2020 2072 6574   src.        ret
-00002600: 7572 6e20 6465 6661 756c 740a 0a63 6c61  urn default..cla
-00002610: 7373 2053 5452 2873 7472 293a 0a20 2020  ss STR(str):.   
-00002620: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-00002630: 6c66 2c73 7263 2c62 7974 653d 4e6f 6e65  lf,src,byte=None
-00002640: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
-00002650: 696e 7374 616e 6365 2862 7974 652c 626f  instance(byte,bo
-00002660: 6f6c 293a 0a20 2020 2020 2020 2020 2020  ol):.           
-00002670: 2069 6620 6279 7465 3a0a 2020 2020 2020   if byte:.      
-00002680: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-00002690: 7263 3d42 7974 6573 2873 7263 290a 2020  rc=Bytes(src).  
-000026a0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-000026b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000026c0: 7365 6c66 2e73 7263 3d53 7472 2873 7263  self.src=Str(src
-000026d0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-000026e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000026f0: 2e73 7263 3d73 7263 0a0a 2020 2020 6465  .src=src..    de
-00002700: 6620 5261 6e64 2873 656c 662c 6c65 6e67  f Rand(self,leng
-00002710: 7468 3d38 2c73 7472 733d 4e6f 6e65 2c6d  th=8,strs=None,m
-00002720: 6f64 653d 272a 2729 3a0a 2020 2020 2020  ode='*'):.      
-00002730: 2020 7265 7475 726e 2052 616e 646f 6d28    return Random(
-00002740: 6c65 6e67 7468 3d6c 656e 6774 682c 7374  length=length,st
-00002750: 7273 3d73 7472 732c 6d6f 6465 3d6d 6f64  rs=strs,mode=mod
-00002760: 6529 0a0a 2020 2020 6465 6620 4375 7428  e)..    def Cut(
-00002770: 7365 6c66 2c68 6561 645f 6c65 6e3d 4e6f  self,head_len=No
-00002780: 6e65 2c62 6f64 795f 6c65 6e3d 4e6f 6e65  ne,body_len=None
-00002790: 2c6e 6577 5f6c 696e 653d 275c 6e27 2c6f  ,new_line='\n',o
-000027a0: 7574 3d73 7472 293a 0a20 2020 2020 2020  ut=str):.       
-000027b0: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-000027c0: 6365 2873 656c 662e 7372 632c 7374 7229  ce(self.src,str)
-000027d0: 3a0a 2020 2020 2020 2020 2020 2073 656c  :.           sel
-000027e0: 662e 7372 633d 2727 277b 7d27 2727 2e66  f.src='''{}'''.f
-000027f0: 6f72 6d61 7428 7365 6c66 2e73 7263 290a  ormat(self.src).
-00002800: 2020 2020 2020 2020 7265 7475 726e 2043          return C
-00002810: 7574 2873 656c 662e 7372 632c 6865 6164  ut(self.src,head
-00002820: 5f6c 656e 2c62 6f64 795f 6c65 6e2c 6e65  _len,body_len,ne
-00002830: 775f 6c69 6e65 2c6f 7574 290a 0a20 2020  w_line,out)..   
-00002840: 2064 6566 2053 7061 6365 286e 756d 3d31   def Space(num=1
-00002850: 2c66 696c 6c3d 2720 272c 6d6f 6465 3d27  ,fill=' ',mode='
-00002860: 7370 6163 6527 293a 0a20 2020 2020 2020  space'):.       
-00002870: 2072 6574 7572 6e20 5370 6163 6528 6e75   return Space(nu
-00002880: 6d2c 6669 6c6c 2c6d 6f64 6529 0a0a 2020  m,fill,mode)..  
-00002890: 2020 6465 6620 5265 6475 6365 2873 656c    def Reduce(sel
-000028a0: 662c 7374 6172 743d 302c 656e 643d 4e6f  f,start=0,end=No
-000028b0: 6e65 2c73 796d 3d4e 6f6e 652c 6465 6661  ne,sym=None,defa
-000028c0: 756c 743d 4e6f 6e65 293a 0a20 2020 2020  ult=None):.     
-000028d0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-000028e0: 2873 656c 662e 7372 632c 7374 7229 3a0a  (self.src,str):.
-000028f0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00002900: 796d 3a0a 2020 2020 2020 2020 2020 2020  ym:.            
-00002910: 2020 2020 6172 723d 7365 6c66 2e73 7263      arr=self.src
-00002920: 2e73 706c 6974 2873 796d 290a 2020 2020  .split(sym).    
-00002930: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00002940: 7369 6e73 7461 6e63 6528 656e 642c 696e  sinstance(end,in
-00002950: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00002960: 2020 2020 2020 2020 7265 7475 726e 204a          return J
-00002970: 6f69 6e28 6172 725b 7374 6172 743a 656e  oin(arr[start:en
-00002980: 645d 2c73 796d 626f 6c3d 7379 6d29 0a20  d],symbol=sym). 
-00002990: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000029a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000029b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000029c0: 4a6f 696e 2861 7272 5b73 7461 7274 5d2c  Join(arr[start],
-000029d0: 7379 6d62 6f6c 3d73 796d 290a 2020 2020  symbol=sym).    
-000029e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000029f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00002a00: 2069 7369 6e73 7461 6e63 6528 656e 642c   isinstance(end,
-00002a10: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
-00002a20: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00002a30: 2073 656c 662e 7372 635b 7374 6172 743a   self.src[start:
-00002a40: 656e 645d 0a20 2020 2020 2020 2020 2020  end].           
-00002a50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00002a60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00002a70: 6574 7572 6e20 7365 6c66 2e73 7263 5b73  eturn self.src[s
-00002a80: 7461 7274 3a5d 0a20 2020 2020 2020 2072  tart:].        r
-00002a90: 6574 7572 6e20 6465 6661 756c 740a 0a20  eturn default.. 
-00002aa0: 2020 2064 6566 2046 696e 6428 7365 6c66     def Find(self
-00002ab0: 2c66 696e 642c 7372 633d 275f 235f 272c  ,find,src='_#_',
-00002ac0: 7072 733d 4e6f 6e65 2c73 796d 3d27 5c6e  prs=None,sym='\n
-00002ad0: 272c 7061 7474 6572 6e3d 5472 7565 2c64  ',pattern=True,d
-00002ae0: 6566 6175 6c74 3d5b 5d2c 6f75 743d 4e6f  efault=[],out=No
-00002af0: 6e65 2c66 696e 6461 6c6c 3d54 7275 652c  ne,findall=True,
-00002b00: 776f 7264 3d46 616c 7365 2c6c 696e 655f  word=False,line_
-00002b10: 6e75 6d3d 4661 6c73 652c 7065 656c 3d4e  num=False,peel=N
-00002b20: 6f6e 6529 3a0a 2020 2020 2020 2020 6966  one):.        if
-00002b30: 2049 734e 6f6e 6528 7372 632c 6368 6b5f   IsNone(src,chk_
-00002b40: 7661 6c3d 5b27 5f23 5f27 5d2c 6368 6b5f  val=['_#_'],chk_
-00002b50: 6f6e 6c79 3d54 7275 6529 3a20 7372 633d  only=True): src=
-00002b60: 7365 6c66 2e73 7263 0a20 2020 2020 2020  self.src.       
-00002b70: 2072 6574 7572 6e20 4649 4e44 2873 7263   return FIND(src
-00002b80: 292e 4669 6e64 2866 696e 642c 7072 733d  ).Find(find,prs=
-00002b90: 7072 732c 7379 6d3d 7379 6d2c 6465 6661  prs,sym=sym,defa
-00002ba0: 756c 743d 6465 6661 756c 742c 6f75 743d  ult=default,out=
-00002bb0: 6f75 742c 6669 6e64 616c 6c3d 6669 6e64  out,findall=find
-00002bc0: 616c 6c2c 776f 7264 3d77 6f72 642c 6d6f  all,word=word,mo
-00002bd0: 6465 3d27 7661 6c75 6527 2c6c 696e 655f  de='value',line_
-00002be0: 6e75 6d3d 6c69 6e65 5f6e 756d 2c70 6565  num=line_num,pee
-00002bf0: 6c3d 7065 656c 290a 0a20 2020 2064 6566  l=peel)..    def
-00002c00: 2049 6e64 6578 2873 656c 662c 6669 6e64   Index(self,find
-00002c10: 2c73 7461 7274 3d4e 6f6e 652c 656e 643d  ,start=None,end=
-00002c20: 4e6f 6e65 2c73 796d 3d27 5c6e 272c 6465  None,sym='\n',de
-00002c30: 6661 756c 743d 5b5d 2c77 6f72 643d 4661  fault=[],word=Fa
-00002c40: 6c73 652c 7061 7474 6572 6e3d 4661 6c73  lse,pattern=Fals
-00002c50: 652c 6669 6e64 616c 6c3d 4661 6c73 652c  e,findall=False,
-00002c60: 6f75 743d 4e6f 6e65 293a 0a20 2020 2020  out=None):.     
-00002c70: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00002c80: 616e 6365 2873 656c 662e 7372 632c 7374  ance(self.src,st
-00002c90: 7229 3a20 7265 7475 726e 2064 6566 6175  r): return defau
-00002ca0: 6c74 0a20 2020 2020 2020 2072 743d 5b5d  lt.        rt=[]
-00002cb0: 0a20 2020 2020 2020 2073 6f75 7263 653d  .        source=
-00002cc0: 7365 6c66 2e73 7263 2e73 706c 6974 2873  self.src.split(s
-00002cd0: 796d 290a 2020 2020 2020 2020 666f 7220  ym).        for 
-00002ce0: 726f 7720 696e 2072 616e 6765 2830 2c6c  row in range(0,l
-00002cf0: 656e 2873 6f75 7263 6529 293a 0a20 2020  en(source)):.   
-00002d00: 2020 2020 2020 2020 2066 6f72 2066 6620           for ff 
-00002d10: 696e 2073 656c 662e 4669 6e64 2866 696e  in self.Find(fin
-00002d20: 642c 7372 633d 736f 7572 6365 5b72 6f77  d,src=source[row
-00002d30: 5d2c 7061 7474 6572 6e3d 7061 7474 6572  ],pattern=patter
-00002d40: 6e2c 776f 7264 3d77 6f72 642c 6669 6e64  n,word=word,find
-00002d50: 616c 6c3d 6669 6e64 616c 6c2c 6465 6661  all=findall,defa
-00002d60: 756c 743d 5b5d 2c6f 7574 3d6c 6973 7429  ult=[],out=list)
-00002d70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00002d80: 2020 6966 2066 696e 6461 6c6c 3a0a 2020    if findall:.  
-00002d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002da0: 2020 7274 3d72 742b 5b28 726f 772c 5b6d    rt=rt+[(row,[m
-00002db0: 2e73 7461 7274 2829 2066 6f72 206d 2069  .start() for m i
-00002dc0: 6e20 7265 2e66 696e 6469 7465 7228 6666  n re.finditer(ff
-00002dd0: 2c73 6f75 7263 655b 726f 775d 295d 295d  ,source[row])])]
-00002de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002df0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00002e00: 2020 2020 2020 2020 2020 2069 6478 3d73             idx=s
-00002e10: 6f75 7263 655b 726f 775d 2e69 6e64 6578  ource[row].index
-00002e20: 2866 662c 7374 6172 742c 656e 6429 0a20  (ff,start,end). 
-00002e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e40: 2020 2069 6620 6964 7820 3e3d 2030 3a0a     if idx >= 0:.
-00002e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002e60: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
-00002e70: 6428 2872 6f77 2c69 6478 2929 0a20 2020  d((row,idx)).   
-00002e80: 2020 2020 2069 6620 7274 3a0a 2020 2020       if rt:.    
-00002e90: 2020 2020 2020 2020 6966 206f 7574 2069          if out i
-00002ea0: 6e20 5b27 7475 706c 6527 2c74 7570 6c65  n ['tuple',tuple
-00002eb0: 5d3a 2072 6574 7572 6e20 7475 706c 6528  ]: return tuple(
-00002ec0: 7274 290a 2020 2020 2020 2020 2020 2020  rt).            
-00002ed0: 6966 206f 7574 206e 6f74 2069 6e20 5b27  if out not in ['
-00002ee0: 6c69 7374 272c 6c69 7374 5d20 616e 6420  list',list] and 
-00002ef0: 6c65 6e28 7274 2920 3d3d 2031 2061 6e64  len(rt) == 1 and
-00002f00: 2072 745b 305d 5b30 5d20 3d3d 2030 3a0a   rt[0][0] == 0:.
-00002f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002f20: 6966 206c 656e 2872 745b 305d 5b31 5d29  if len(rt[0][1])
-00002f30: 203d 3d20 313a 7265 7475 726e 2072 745b   == 1:return rt[
-00002f40: 305d 5b31 5d5b 305d 0a20 2020 2020 2020  0][1][0].       
-00002f50: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00002f60: 7274 5b30 5d5b 315d 0a20 2020 2020 2020  rt[0][1].       
-00002f70: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
-00002f80: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-00002f90: 6661 756c 740a 0a20 2020 2064 6566 2052  fault..    def R
-00002fa0: 6570 6c61 6365 2873 656c 662c 7265 706c  eplace(self,repl
-00002fb0: 6163 655f 7768 6174 2c72 6570 6c61 6365  ace_what,replace
-00002fc0: 5f74 6f2c 6465 6661 756c 743d 4e6f 6e65  _to,default=None
-00002fd0: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
-00002fe0: 696e 7374 616e 6365 2873 656c 662e 7372  instance(self.sr
-00002ff0: 632c 7374 7229 3a0a 2020 2020 2020 2020  c,str):.        
-00003000: 2020 2020 6966 2072 6570 6c61 6365 5f77      if replace_w
-00003010: 6861 745b 2d31 5d20 3d3d 2027 2427 206f  hat[-1] == '$' o
-00003020: 7220 7265 706c 6163 655f 7768 6174 5b30  r replace_what[0
-00003030: 5d20 3d3d 2027 5e27 3a0a 2020 2020 2020  ] == '^':.      
-00003040: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00003050: 2072 652e 7375 6228 7265 706c 6163 655f   re.sub(replace_
-00003060: 7768 6174 2c20 7265 706c 6163 655f 746f  what, replace_to
-00003070: 2c20 7365 6c66 2e73 7263 290a 2020 2020  , self.src).    
-00003080: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00003090: 2020 2020 2020 2020 2020 2020 2020 6865                he
-000030a0: 6164 2c20 5f73 6570 2c20 7461 696c 203d  ad, _sep, tail =
-000030b0: 2073 656c 662e 7372 632e 7270 6172 7469   self.src.rparti
-000030c0: 7469 6f6e 2872 6570 6c61 6365 5f77 6861  tion(replace_wha
-000030d0: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-000030e0: 2020 2072 6574 7572 6e20 6865 6164 202b     return head +
-000030f0: 2072 6570 6c61 6365 5f74 6f20 2b20 7461   replace_to + ta
-00003100: 696c 0a20 2020 2020 2020 2072 6574 7572  il.        retur
-00003110: 6e20 6465 6661 756c 740a 0a20 2020 2064  n default..    d
-00003120: 6566 2052 656d 6f76 654e 6577 6c69 6e65  ef RemoveNewline
-00003130: 2873 656c 662c 7372 633d 275f 235f 272c  (self,src='_#_',
-00003140: 6d6f 6465 3d27 6564 6765 272c 6e65 776c  mode='edge',newl
-00003150: 696e 653d 275c 6e27 2c62 7974 653d 4e6f  ine='\n',byte=No
-00003160: 6e65 293a 0a20 2020 2020 2020 2069 6620  ne):.        if 
-00003170: 4973 4e6f 6e65 2873 7263 2c63 686b 5f76  IsNone(src,chk_v
-00003180: 616c 3d5b 275f 235f 275d 2c63 686b 5f6f  al=['_#_'],chk_o
-00003190: 6e6c 793d 5472 7565 293a 2073 7263 3d73  nly=True): src=s
-000031a0: 656c 662e 7372 630a 2020 2020 2020 2020  elf.src.        
-000031b0: 6966 2069 7369 6e73 7461 6e63 6528 6279  if isinstance(by
-000031c0: 7465 2c62 6f6f 6c29 3a0a 2020 2020 2020  te,bool):.      
-000031d0: 2020 2020 2020 6966 2062 7974 653a 0a20        if byte:. 
-000031e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000031f0: 7263 3d42 7974 6573 2873 7263 290a 2020  rc=Bytes(src).  
-00003200: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00003210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003220: 7372 633d 5374 7228 7372 6329 0a20 2020  src=Str(src).   
-00003230: 2020 2020 2073 7263 5f61 3d53 706c 6974       src_a=Split
-00003240: 2873 7263 2c6e 6577 6c69 6e65 2c64 6566  (src,newline,def
-00003250: 6175 6c74 3d46 616c 7365 2c6c 6973 746f  ault=False,listo
-00003260: 6e6c 793d 4661 6c73 6529 0a20 2020 2020  nly=False).     
-00003270: 2020 2069 6620 7372 635f 6120 6973 2046     if src_a is F
-00003280: 616c 7365 3a0a 2020 2020 2020 2020 2020  alse:.          
-00003290: 2020 7265 7475 726e 2073 7263 0a20 2020    return src.   
-000032a0: 2020 2020 2069 6620 6d6f 6465 2069 6e20       if mode in 
-000032b0: 5b27 6564 6765 272c 2762 6f74 6827 5d3a  ['edge','both']:
-000032c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000032d0: 6e6f 7420 7372 635f 615b 305d 2e73 7472  not src_a[0].str
-000032e0: 6970 2829 2061 6e64 206e 6f74 2073 7263  ip() and not src
-000032f0: 5f61 5b2d 315d 2e73 7472 6970 2829 3a0a  _a[-1].strip():.
-00003300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003310: 7265 7475 726e 204a 6f69 6e28 7372 635f  return Join(src_
-00003320: 615b 313a 2d31 5d2c 7379 6d62 6f6c 3d6e  a[1:-1],symbol=n
-00003330: 6577 6c69 6e65 290a 2020 2020 2020 2020  ewline).        
-00003340: 2020 2020 656c 6966 206e 6f74 2073 7263      elif not src
-00003350: 5f61 5b30 5d2e 7374 7269 7028 293a 0a20  _a[0].strip():. 
-00003360: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00003370: 6574 7572 6e20 4a6f 696e 2873 7263 5f61  eturn Join(src_a
-00003380: 5b31 3a5d 2c73 796d 626f 6c3d 6e65 776c  [1:],symbol=newl
-00003390: 696e 6529 0a20 2020 2020 2020 2020 2020  ine).           
-000033a0: 2065 6c69 6620 6e6f 7420 7372 635f 615b   elif not src_a[
-000033b0: 2d31 5d2e 7374 7269 7028 293a 0a20 2020  -1].strip():.   
-000033c0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000033d0: 7572 6e20 4a6f 696e 2873 7263 5f61 5b3a  urn Join(src_a[:
-000033e0: 2d31 5d2c 7379 6d62 6f6c 3d6e 6577 6c69  -1],symbol=newli
-000033f0: 6e65 290a 2020 2020 2020 2020 656c 6966  ne).        elif
-00003400: 206d 6f64 6520 696e 205b 2766 6972 7374   mode in ['first
-00003410: 272c 2773 7461 7274 272c 305d 3a0a 2020  ','start',0]:.  
-00003420: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00003430: 2073 7263 5f61 5b30 5d2e 7374 7269 7028   src_a[0].strip(
-00003440: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00003450: 2020 2072 6574 7572 6e20 4a6f 696e 2873     return Join(s
-00003460: 7263 5f61 5b31 3a5d 2c73 796d 626f 6c3d  rc_a[1:],symbol=
-00003470: 6e65 776c 696e 6529 0a20 2020 2020 2020  newline).       
-00003480: 2065 6c69 6620 6d6f 6465 2069 6e20 5b27   elif mode in ['
-00003490: 656e 6427 2c27 6c61 7374 272c 2d31 5d3a  end','last',-1]:
-000034a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000034b0: 6e6f 7420 7372 635f 615b 2d31 5d2e 7374  not src_a[-1].st
-000034c0: 7269 7028 293a 0a20 2020 2020 2020 2020  rip():.         
-000034d0: 2020 2020 2020 2072 6574 7572 6e20 4a6f         return Jo
-000034e0: 696e 2873 7263 5f61 5b3a 2d31 5d2c 7379  in(src_a[:-1],sy
-000034f0: 6d62 6f6c 3d6e 6577 6c69 6e65 290a 2020  mbol=newline).  
-00003500: 2020 2020 2020 656c 6966 206d 6f64 6520        elif mode 
-00003510: 696e 205b 272a 272c 2761 6c6c 272c 2765  in ['*','all','e
-00003520: 7665 7279 7468 696e 6727 5d3a 0a20 2020  verything']:.   
-00003530: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00003540: 4a6f 696e 2873 7263 5f61 2c73 796d 626f  Join(src_a,symbo
-00003550: 6c3d 2727 290a 2020 2020 2020 2020 7265  l='').        re
-00003560: 7475 726e 2073 7263 0a0a 2020 2020 6465  turn src..    de
-00003570: 6620 5461 7028 7365 6c66 2c2a 2a6f 7074  f Tap(self,**opt
-00003580: 7329 3a0a 2020 2020 2020 2020 6673 7061  s):.        fspa
-00003590: 6365 3d6f 7074 732e 6765 7428 2773 7061  ce=opts.get('spa
-000035a0: 6365 272c 6f70 7473 2e67 6574 2827 6673  ce',opts.get('fs
-000035b0: 7061 6365 272c 2727 2929 0a20 2020 2020  pace','')).     
-000035c0: 2020 206e 7370 6163 653d 6f70 7473 2e67     nspace=opts.g
-000035d0: 6574 2827 6e73 7061 6365 272c 6673 7061  et('nspace',fspa
-000035e0: 6365 290a 2020 2020 2020 2020 7379 6d3d  ce).        sym=
-000035f0: 6f70 7473 2e67 6574 2827 7379 6d27 2c6f  opts.get('sym',o
-00003600: 7074 732e 6765 7428 276e 6577 5f6c 696e  pts.get('new_lin
-00003610: 6527 2c27 5c6e 2729 290a 2020 2020 2020  e','\n')).      
-00003620: 2020 6465 6661 756c 743d 6f70 7473 2e67    default=opts.g
-00003630: 6574 2827 6465 6661 756c 7427 2c27 6f72  et('default','or
-00003640: 6727 290a 2020 2020 2020 2020 4e46 4c54  g').        NFLT
-00003650: 3d6f 7074 732e 6765 7428 274e 464c 5427  =opts.get('NFLT'
-00003660: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
-00003670: 6f75 743d 6f70 7473 2e67 6574 2827 6f75  out=opts.get('ou
-00003680: 7427 2c73 7472 290a 2020 2020 2020 2020  t',str).        
-00003690: 6d6f 6465 3d6f 7074 732e 6765 7428 276d  mode=opts.get('m
-000036a0: 6f64 6527 2c27 7370 6163 6527 290a 2020  ode','space').  
-000036b0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-000036c0: 6e63 6528 6673 7061 6365 2c73 7472 293a  nce(fspace,str):
-000036d0: 0a20 2020 2020 2020 2020 2020 2066 7370  .            fsp
-000036e0: 6163 653d 6c65 6e28 6673 7061 6365 290a  ace=len(fspace).
-000036f0: 2020 2020 2020 2020 7265 7475 726e 2057          return W
-00003700: 7261 7053 7472 696e 6728 7365 6c66 2e73  rapString(self.s
-00003710: 7263 2c66 7370 6163 653d 6673 7061 6365  rc,fspace=fspace
-00003720: 2c6e 7370 6163 653d 6e73 7061 6365 2c6e  ,nspace=nspace,n
-00003730: 6577 5f6c 696e 653d 7379 6d2c 4e46 4c54  ew_line=sym,NFLT
-00003740: 3d4e 464c 542c 6d6f 6465 3d6d 6f64 6529  =NFLT,mode=mode)
-00003750: 0a0a 6465 6620 5374 7228 7372 632c 2a2a  ..def Str(src,**
-00003760: 6f70 7473 293a 0a20 2020 2027 2727 0a20  opts):.    '''. 
-00003770: 2020 2043 6f6e 7665 7274 2064 6174 6120     Convert data 
-00003780: 746f 2053 7472 696e 6720 6461 7461 0a20  to String data. 
-00003790: 2020 2065 6e63 6f64 6520 3a20 6465 6661     encode : defa
-000037a0: 756c 7420 2775 7466 2d38 272c 276c 6174  ult 'utf-8','lat
-000037b0: 696e 3127 2c27 7769 6e64 6f77 732d 3132  in1','windows-12
-000037c0: 3532 270a 2020 2020 6465 6661 756c 7420  52'.    default 
-000037d0: 3a20 7265 7475 726e 2074 6f20 6f72 6967  : return to orig
-000037e0: 696e 616c 2076 616c 7565 2c20 6966 2079  inal value, if y
-000037f0: 6f75 2064 6566 696e 6520 6465 6661 756c  ou define defaul
-00003800: 7420 7661 6c75 6520 7468 656e 2072 6574  t value then ret
-00003810: 7572 6e20 746f 2074 6865 2064 6566 696e  urn to the defin
-00003820: 6564 2076 616c 7565 0a20 2020 206d 6f64  ed value.    mod
-00003830: 6520 3a20 6175 746f 2c20 6966 2065 7869  e : auto, if exi
-00003840: 7374 2064 6174 6120 7468 656e 2063 6f6e  st data then con
-00003850: 7665 7274 2074 6f20 7374 7269 6e67 2c20  vert to string, 
-00003860: 6e6f 7420 7468 656e 2072 6574 7572 6e20  not then return 
-00003870: 746f 2074 6865 2066 6f72 6d2e 0a20 2020  to the form..   
-00003880: 2020 2020 2020 2020 2766 6f72 6365 272c          'force',
-00003890: 2766 6978 272c 2766 6978 6564 2720 3a20  'fix','fixed' : 
-000038a0: 6576 6572 7974 6869 6e67 2063 6f6e 7665  everything conve
-000038b0: 7274 2074 6f20 7374 7269 6e67 0a20 2020  rt to string.   
-000038c0: 2072 656d 6f76 653a 2069 6620 796f 7520   remove: if you 
-000038d0: 7761 6e74 2072 656d 6f76 6520 6461 7461  want remove data
-000038e0: 2074 6865 6e20 6465 6669 6e65 2068 6572   then define her
-000038f0: 652e 2028 3a77 6869 7465 7370 6163 653a  e. (:whitespace:
-00003900: 2077 696c 6c20 7265 6d6f 7665 2077 6869   will remove whi
-00003910: 7465 2073 7061 6365 2074 6f20 7369 6e67  te space to sing
-00003920: 6c65 2073 7061 6365 290a 2020 2020 636f  le space).    co
-00003930: 6c6f 725f 636f 6465 3a20 203c 636f 6c6f  lor_code:  <colo
-00003940: 723e 5b3a 3c61 7474 723e 5d0a 2020 2020  r>[:<attr>].    
-00003950: 2727 270a 2020 2020 656e 636f 6465 3d6f  '''.    encode=o
-00003960: 7074 732e 6765 7428 2765 6e63 6f64 6527  pts.get('encode'
-00003970: 2c4e 6f6e 6529 0a20 2020 2064 6566 6175  ,None).    defau
-00003980: 6c74 3d6f 7074 732e 6765 7428 2764 6566  lt=opts.get('def
-00003990: 6175 6c74 272c 276f 7267 2729 0a20 2020  ault','org').   
-000039a0: 206d 6f64 653d 6f70 7473 2e67 6574 2827   mode=opts.get('
-000039b0: 6d6f 6465 272c 2761 7574 6f27 290a 2020  mode','auto').  
-000039c0: 2020 7265 6d6f 7665 3d6f 7074 732e 6765    remove=opts.ge
-000039d0: 7428 2772 656d 6f76 6527 2c4e 6f6e 6529  t('remove',None)
-000039e0: 0a20 2020 2063 6f6c 6f72 5f63 6f64 653d  .    color_code=
-000039f0: 6f70 7473 2e67 6574 2827 636f 6c6f 725f  opts.get('color_
-00003a00: 636f 6465 2729 0a0a 2020 2020 636f 6c6f  code')..    colo
-00003a10: 725f 6462 3d6f 7074 732e 6765 7428 2763  r_db=opts.get('c
-00003a20: 6f6c 6f72 5f64 6227 2c7b 2763 6f6c 6f72  olor_db',{'color
-00003a30: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00003a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a50: 2020 2020 2020 7b27 626c 7565 273a 2033        {'blue': 3
-00003a60: 342c 2027 6772 6579 273a 2033 302c 2027  4, 'grey': 30, '
-00003a70: 7965 6c6c 6f77 273a 2033 332c 2027 6772  yellow': 33, 'gr
-00003a80: 6565 6e27 3a20 3332 2c20 2763 7961 6e27  een': 32, 'cyan'
-00003a90: 3a20 3336 2c20 276d 6167 656e 7461 273a  : 36, 'magenta':
-00003aa0: 2033 352c 2027 7768 6974 6527 3a20 3337   35, 'white': 37
-00003ab0: 2c20 2772 6564 273a 2033 317d 2c0a 2020  , 'red': 31},.  
-00003ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ae0: 2762 6727 3a7b 2763 7961 6e27 3a20 3436  'bg':{'cyan': 46
-00003af0: 2c20 2777 6869 7465 273a 2034 372c 2027  , 'white': 47, '
-00003b00: 6772 6579 273a 2034 302c 2027 7965 6c6c  grey': 40, 'yell
-00003b10: 6f77 273a 2034 332c 2027 626c 7565 273a  ow': 43, 'blue':
-00003b20: 2034 342c 2027 6d61 6765 6e74 6127 3a20   44, 'magenta': 
-00003b30: 3435 2c20 2772 6564 273a 2034 312c 2027  45, 'red': 41, '
-00003b40: 6772 6565 6e27 3a20 3432 7d2c 0a20 2020  green': 42},.   
-00003b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003b60: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00003b70: 6174 7472 273a 7b27 7265 7665 7273 6527  attr':{'reverse'
-00003b80: 3a20 372c 2027 626c 696e 6b27 3a20 352c  : 7, 'blink': 5,
-00003b90: 2763 6f6e 6365 616c 6564 273a 2038 2c20  'concealed': 8, 
-00003ba0: 2775 6e64 6572 6c69 6e65 273a 2034 2c20  'underline': 4, 
-00003bb0: 2762 6f6c 6427 3a20 317d 7d29 0a0a 2020  'bold': 1}})..  
-00003bc0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00003bd0: 636f 6c6f 725f 636f 6465 2c73 7472 293a  color_code,str):
-00003be0: 0a20 2020 2020 2020 2063 6f6c 6f72 5f63  .        color_c
-00003bf0: 6f64 655f 613d 636f 6c6f 725f 636f 6465  ode_a=color_code
-00003c00: 2e73 706c 6974 2827 3a27 290a 2020 2020  .split(':').    
-00003c10: 2020 2020 636d 6f64 653d 636f 6c6f 725f      cmode=color_
-00003c20: 636f 6465 5f61 5b31 5d20 6966 206c 656e  code_a[1] if len
-00003c30: 2863 6f6c 6f72 5f63 6f64 655f 6129 203d  (color_code_a) =
-00003c40: 3d20 3220 656c 7365 204e 6f6e 650a 2020  = 2 else None.  
-00003c50: 2020 2020 2020 636f 6c6f 723d 636f 6c6f        color=colo
-00003c60: 725f 636f 6465 5f61 5b30 5d0a 2020 2020  r_code_a[0].    
-00003c70: 2020 2020 6966 2063 6d6f 6465 3a0a 2020      if cmode:.  
-00003c80: 2020 2020 2020 2020 2020 636f 6c6f 725f            color_
-00003c90: 636f 6465 3d63 6f6c 6f72 5f64 622e 6765  code=color_db.ge
-00003ca0: 7428 636d 6f64 652c 7b7d 292e 6765 7428  t(cmode,{}).get(
-00003cb0: 636f 6c6f 7229 0a20 2020 2020 2020 2065  color).        e
-00003cc0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00003cd0: 2063 6f6c 6f72 5f63 6f64 653d 636f 6c6f   color_code=colo
-00003ce0: 725f 6462 2e67 6574 2827 636f 6c6f 7227  r_db.get('color'
-00003cf0: 2c7b 7d29 2e67 6574 2863 6f6c 6f72 290a  ,{}).get(color).
-00003d00: 0a20 2020 2069 6620 6e6f 7420 6973 696e  .    if not isin
-00003d10: 7374 616e 6365 2865 6e63 6f64 652c 2873  stance(encode,(s
-00003d20: 7472 2c6c 6973 742c 7475 706c 6529 293a  tr,list,tuple)):
-00003d30: 2065 6e63 6f64 653d 5b27 7574 662d 3827   encode=['utf-8'
-00003d40: 2c27 6c61 7469 6e31 272c 2777 696e 646f  ,'latin1','windo
-00003d50: 7773 2d31 3235 3227 5d0a 2020 2020 6465  ws-1252'].    de
-00003d60: 6620 5f62 7974 6532 7374 725f 2873 7263  f _byte2str_(src
-00003d70: 2c65 6e63 6f64 652c 7265 6d6f 7665 3d4e  ,encode,remove=N
-00003d80: 6f6e 652c 636f 6c6f 725f 636f 6465 3d4e  one,color_code=N
-00003d90: 6f6e 6529 3a0a 2020 2020 2020 2020 6966  one):.        if
-00003da0: 2069 7369 6e73 7461 6e63 6528 656e 636f   isinstance(enco
-00003db0: 6465 2c73 7472 293a 2065 6e63 6f64 653d  de,str): encode=
-00003dc0: 5b65 6e63 6f64 655d 0a20 2020 2020 2020  [encode].       
-00003dd0: 2062 7974 652c 626e 616d 653d 4279 7465   byte,bname=Byte
-00003de0: 4e61 6d65 2873 7263 290a 2020 2020 2020  Name(src).      
-00003df0: 2020 6966 2062 7974 653a 0a20 2020 2020    if byte:.     
-00003e00: 2020 2020 2020 2069 6620 626e 616d 6520         if bname 
-00003e10: 3d3d 2027 6279 7465 7327 3a0a 2020 2020  == 'bytes':.    
-00003e20: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00003e30: 6920 696e 2065 6e63 6f64 653a 0a20 2020  i in encode:.   
-00003e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e50: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00003e60: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00003e70: 2072 656d 6f76 653a 0a20 2020 2020 2020   remove:.       
-00003e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003e90: 2020 2020 2073 7263 5f64 3d73 7263 2e64       src_d=src.d
-00003ea0: 6563 6f64 6528 6929 0a20 2020 2020 2020  ecode(i).       
-00003eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ec0: 2020 2020 2069 6620 4973 5361 6d65 2872       if IsSame(r
-00003ed0: 656d 6f76 652c 273a 7768 6974 6573 7061  emove,':whitespa
-00003ee0: 6365 3a27 293a 0a20 2020 2020 2020 2020  ce:'):.         
-00003ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003f00: 2020 2020 2020 2072 6574 7572 6e20 2720         return ' 
-00003f10: 272e 6a6f 696e 2873 7263 5f64 2e73 706c  '.join(src_d.spl
-00003f20: 6974 2829 290a 2020 2020 2020 2020 2020  it()).          
-00003f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003f40: 2020 656c 6966 2072 656d 6f76 6520 696e    elif remove in
-00003f50: 2073 7263 5f64 3a0a 2020 2020 2020 2020   src_d:.        
-00003f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003f70: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00003f80: 7263 5f64 2e72 6570 6c61 6365 2872 656d  rc_d.replace(rem
-00003f90: 6f76 652c 2727 290a 2020 2020 2020 2020  ove,'').        
-00003fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003fb0: 7265 7475 726e 2073 7263 2e64 6563 6f64  return src.decod
-00003fc0: 6528 6929 0a20 2020 2020 2020 2020 2020  e(i).           
-00003fd0: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-00003fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003ff0: 2020 2020 2020 2020 2070 6173 730a 2020           pass.  
-00004000: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00004010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004020: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-00004030: 2020 2020 2020 2020 2069 6620 7265 6d6f           if remo
-00004040: 7665 3a0a 2020 2020 2020 2020 2020 2020  ve:.            
-00004050: 2020 2020 2020 2020 2020 2020 7372 635f              src_
-00004060: 643d 7372 632e 6465 636f 6465 2862 6e61  d=src.decode(bna
-00004070: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
-00004080: 2020 2020 2020 2020 2020 2020 6966 2049              if I
-00004090: 7353 616d 6528 7265 6d6f 7665 2c27 3a77  sSame(remove,':w
-000040a0: 6869 7465 7370 6163 653a 2729 3a0a 2020  hitespace:'):.  
-000040b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000040c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000040d0: 2027 2027 2e6a 6f69 6e28 7372 635f 642e   ' '.join(src_d.
-000040e0: 7370 6c69 7428 2929 0a20 2020 2020 2020  split()).       
-000040f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004100: 2065 6c69 6620 7265 6d6f 7665 2069 6e20   elif remove in 
-00004110: 7372 635f 643a 0a20 2020 2020 2020 2020  src_d:.         
-00004120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004130: 2020 2072 6574 7572 6e20 7372 635f 642e     return src_d.
-00004140: 7265 706c 6163 6528 7265 6d6f 7665 2c27  replace(remove,'
-00004150: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00004160: 2020 2020 2020 2072 6574 7572 6e20 7372         return sr
-00004170: 632e 6465 636f 6465 2862 6e61 6d65 290a  c.decode(bname).
-00004180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004190: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
-000041a0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-000041b0: 0a20 2020 2020 2020 2065 6c69 6620 7479  .        elif ty
-000041c0: 7065 2873 7263 292e 5f5f 6e61 6d65 5f5f  pe(src).__name__
-000041d0: 3d3d 2775 6e69 636f 6465 273a 0a20 2020  =='unicode':.   
-000041e0: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
-000041f0: 6e20 656e 636f 6465 3a0a 2020 2020 2020  n encode:.      
-00004200: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-00004210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004220: 2020 2069 6620 7265 6d6f 7665 3a0a 2020     if remove:.  
-00004230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004240: 2020 2020 2020 7372 635f 643d 7372 632e        src_d=src.
-00004250: 656e 636f 6465 2869 290a 2020 2020 2020  encode(i).      
-00004260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004270: 2020 6966 2049 7353 616d 6528 7265 6d6f    if IsSame(remo
-00004280: 7665 2c27 3a77 6869 7465 7370 6163 653a  ve,':whitespace:
-00004290: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-000042a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000042b0: 7265 7475 726e 2027 2027 2e6a 6f69 6e28  return ' '.join(
-000042c0: 7372 635f 642e 7370 6c69 7428 2929 0a20  src_d.split()). 
-000042d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000042e0: 2020 2020 2020 2065 6c69 6620 7265 6d6f         elif remo
-000042f0: 7665 2069 6e20 7372 635f 643a 0a20 2020  ve in src_d:.   
-00004300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004310: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00004320: 7372 635f 642e 7265 706c 6163 6528 7265  src_d.replace(re
-00004330: 6d6f 7665 2c27 2729 0a20 2020 2020 2020  move,'').       
-00004340: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00004350: 7572 6e20 7372 632e 656e 636f 6465 2869  urn src.encode(i
-00004360: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00004370: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-00004380: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00004390: 7373 0a0a 2020 2020 2020 2020 6966 2069  ss..        if i
-000043a0: 7369 6e73 7461 6e63 6528 636f 6c6f 725f  sinstance(color_
-000043b0: 636f 6465 2c69 6e74 2920 616e 6420 636f  code,int) and co
-000043c0: 6c6f 725f 636f 6465 2061 6e64 2049 734e  lor_code and IsN
-000043d0: 6f6e 6528 6f73 2e67 6574 656e 7628 2741  one(os.getenv('A
-000043e0: 4e53 495f 434f 4c4f 5253 5f44 4953 4142  NSI_COLORS_DISAB
-000043f0: 4c45 4427 2929 3a0a 2020 2020 2020 2020  LED')):.        
-00004400: 2020 2020 7265 7365 743d 2727 275c 3033      reset='''\03
-00004410: 335b 306d 2727 270a 2020 2020 2020 2020  3[0m'''.        
-00004420: 2020 2020 666d 745f 6d73 673d 2727 275c      fmt_msg='''\
-00004430: 3033 335b 2564 6d25 7327 2727 0a20 2020  033[%dm%s'''.   
-00004440: 2020 2020 2020 2020 206d 7367 3d66 6d74           msg=fmt
-00004450: 5f6d 7367 2025 2028 636f 6c6f 725f 636f  _msg % (color_co
-00004460: 6465 2c73 7263 290a 2020 2020 2020 2020  de,src).        
-00004470: 2020 2020 7265 7475 726e 206d 7367 2b72      return msg+r
-00004480: 6573 6574 0a20 2020 2020 2020 2072 6574  eset.        ret
-00004490: 7572 6e20 7372 630a 2020 2020 7475 706c  urn src.    tupl
-000044a0: 655f 6461 7461 3d46 616c 7365 0a20 2020  e_data=False.   
-000044b0: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-000044c0: 7263 2c74 7570 6c65 293a 0a20 2020 2020  rc,tuple):.     
-000044d0: 2020 2073 7263 3d6c 6973 7428 7372 6329     src=list(src)
-000044e0: 0a20 2020 2020 2020 2074 7570 6c65 5f64  .        tuple_d
-000044f0: 6174 613d 5472 7565 0a20 2020 2069 6620  ata=True.    if 
-00004500: 6973 696e 7374 616e 6365 2873 7263 2c6c  isinstance(src,l
-00004510: 6973 7429 3a0a 2020 2020 2020 2020 666f  ist):.        fo
-00004520: 7220 6920 696e 2072 616e 6765 2830 2c6c  r i in range(0,l
-00004530: 656e 2873 7263 2929 3a0a 2020 2020 2020  en(src)):.      
-00004540: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00004550: 6e63 6528 7372 635b 695d 2c6c 6973 7429  nce(src[i],list)
-00004560: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00004570: 2020 7372 635b 695d 3d53 7472 2873 7263    src[i]=Str(src
-00004580: 5b69 5d2c 656e 636f 6465 3d65 6e63 6f64  [i],encode=encod
-00004590: 652c 7265 6d6f 7665 3d72 656d 6f76 6529  e,remove=remove)
-000045a0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-000045b0: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-000045c0: 5b69 5d2c 6469 6374 293a 0a20 2020 2020  [i],dict):.     
-000045d0: 2020 2020 2020 2020 2020 2066 6f72 207a             for z
-000045e0: 2069 6e20 7372 635b 695d 3a0a 2020 2020   in src[i]:.    
-000045f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004600: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
-00004610: 635b 695d 5b7a 5d2c 2864 6963 742c 6c69  c[i][z],(dict,li
-00004620: 7374 2929 3a0a 2020 2020 2020 2020 2020  st)):.          
-00004630: 2020 2020 2020 2020 2020 2020 2020 7372                sr
-00004640: 635b 695d 5b7a 5d3d 5374 7228 7372 635b  c[i][z]=Str(src[
-00004650: 695d 5b7a 5d2c 656e 636f 6465 3d65 6e63  i][z],encode=enc
-00004660: 6f64 652c 7265 6d6f 7665 3d72 656d 6f76  ode,remove=remov
-00004670: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00004680: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00004690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046a0: 2020 2020 2073 7263 5b69 5d5b 7a5d 3d5f       src[i][z]=_
-000046b0: 6279 7465 3273 7472 5f28 7372 635b 695d  byte2str_(src[i]
-000046c0: 5b7a 5d2c 656e 636f 6465 2c72 656d 6f76  [z],encode,remov
-000046d0: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
-000046e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000046f0: 2020 2020 2073 7263 5b69 5d3d 5f62 7974       src[i]=_byt
-00004700: 6532 7374 725f 2873 7263 5b69 5d2c 656e  e2str_(src[i],en
-00004710: 636f 6465 290a 2020 2020 656c 6966 2069  code).    elif i
-00004720: 7369 6e73 7461 6e63 6528 7372 632c 6469  sinstance(src,di
-00004730: 6374 293a 0a20 2020 2020 2020 2066 6f72  ct):.        for
-00004740: 2069 2069 6e20 7372 633a 0a20 2020 2020   i in src:.     
-00004750: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00004760: 616e 6365 2873 7263 5b69 5d2c 2864 6963  ance(src[i],(dic
-00004770: 742c 6c69 7374 2929 3a0a 2020 2020 2020  t,list)):.      
-00004780: 2020 2020 2020 2020 2020 7372 635b 695d            src[i]
-00004790: 3d53 7472 2873 7263 5b69 5d2c 656e 636f  =Str(src[i],enco
-000047a0: 6465 3d65 6e63 6f64 652c 7265 6d6f 7665  de=encode,remove
-000047b0: 3d72 656d 6f76 652c 636f 6c6f 725f 636f  =remove,color_co
-000047c0: 6465 3d63 6f6c 6f72 5f63 6f64 6529 0a20  de=color_code). 
-000047d0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000047e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000047f0: 2073 7263 5b69 5d3d 5f62 7974 6532 7374   src[i]=_byte2st
-00004800: 725f 2873 7263 5b69 5d2c 656e 636f 6465  r_(src[i],encode
-00004810: 2c72 656d 6f76 652c 636f 6c6f 725f 636f  ,remove,color_co
-00004820: 6465 3d63 6f6c 6f72 5f63 6f64 6529 0a20  de=color_code). 
-00004830: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00004840: 2073 7263 3d5f 6279 7465 3273 7472 5f28   src=_byte2str_(
-00004850: 7372 632c 656e 636f 6465 2c72 656d 6f76  src,encode,remov
-00004860: 652c 636f 6c6f 725f 636f 6465 3d63 6f6c  e,color_code=col
-00004870: 6f72 5f63 6f64 6529 0a0a 2020 2020 2320  or_code)..    # 
-00004880: 466f 7263 6520 6d61 6b65 2061 6c6c 2074  Force make all t
-00004890: 6f20 7374 7269 6e67 0a20 2020 2069 6620  o string.    if 
-000048a0: 6d6f 6465 206e 6f74 2069 6e20 5b27 666f  mode not in ['fo
-000048b0: 7263 6527 2c27 6669 7827 2c27 6669 7865  rce','fix','fixe
-000048c0: 6427 5d20 616e 6420 6973 696e 7374 616e  d'] and isinstan
-000048d0: 6365 2873 7263 2c28 6c69 7374 2c74 7570  ce(src,(list,tup
-000048e0: 6c65 2c64 6963 7429 293a 0a20 2020 2020  le,dict)):.     
-000048f0: 2020 2069 6620 7475 706c 655f 6461 7461     if tuple_data
-00004900: 3a20 7265 7475 726e 2074 7570 6c65 2873  : return tuple(s
-00004910: 7263 290a 2020 2020 2020 2020 7265 7475  rc).        retu
-00004920: 726e 2073 7263 0a20 2020 2072 6574 7572  rn src.    retur
-00004930: 6e20 2727 277b 7d27 2727 2e66 6f72 6d61  n '''{}'''.forma
-00004940: 7428 7372 6329 0a0a 6465 6620 5374 7269  t(src)..def Stri
-00004950: 6e67 7328 2a73 7263 2c6d 6572 6765 5f73  ngs(*src,merge_s
-00004960: 796d 626f 6c3d 2720 272c 6578 636c 7564  ymbol=' ',exclud
-00004970: 6573 3d4e 6f6e 652c 7370 6c69 745f 7379  es=None,split_sy
-00004980: 6d62 6f6c 3d27 2027 2c6d 6f64 653d 4e6f  mbol=' ',mode=No
-00004990: 6e65 293a 0a20 2020 2027 2727 0a20 2020  ne):.    '''.   
-000049a0: 206d 6572 6765 206d 756c 7469 706c 6520   merge multiple 
-000049b0: 7374 7269 6e67 7320 746f 2073 696e 676c  strings to singl
-000049c0: 6520 7374 7269 6e67 0a20 2020 206d 6572  e string.    mer
-000049d0: 6765 5f73 796d 626f 6c3d 2720 2720 3a20  ge_symbol=' ' : 
-000049e0: 6465 6661 756c 7420 2720 272e 206d 6572  default ' '. mer
-000049f0: 6765 2077 6974 6820 7468 6174 2073 796d  ge with that sym
-00004a00: 626f 6c20 6265 7477 6565 6e20 7374 7269  bol between stri
-00004a10: 6e67 730a 2020 2020 7370 6c69 745f 7379  ngs.    split_sy
-00004a20: 6d62 6f6c 3d27 2027 203a 2064 6566 6175  mbol=' ' : defau
-00004a30: 6c74 2027 2027 2e20 7370 6c69 7420 6561  lt ' '. split ea
-00004a40: 6368 2073 7472 696e 6773 2077 6974 6820  ch strings with 
-00004a50: 7468 6520 7379 6d62 6f6c 2066 6f72 2063  the symbol for c
-00004a60: 6865 636b 2065 7863 6c75 6465 730a 2020  heck excludes.  
-00004a70: 2020 6578 636c 7564 6573 2020 203a 2065    excludes   : e
-00004a80: 7863 6c75 6469 6e67 2073 7472 696e 6773  xcluding strings
-00004a90: 2873 7472 2077 6974 6820 636f 6d6d 612c  (str with comma,
-00004aa0: 206c 6973 742c 2074 7570 6c65 292c 2077   list, tuple), w
-00004ab0: 6869 6368 2069 7320 6e6f 7420 7375 7070  hich is not supp
-00004ac0: 6f72 7420 7370 6163 650a 2020 2020 2727  ort space.    ''
-00004ad0: 270a 2020 2020 6465 6620 7374 7269 6e67  '.    def string
-00004ae0: 5f74 6f5f 7368 656c 6c5f 6c69 6e65 2873  _to_shell_line(s
-00004af0: 7263 293a 0a20 2020 2020 2020 206e 6577  rc):.        new
-00004b00: 5f73 6865 6c6c 5f6c 696e 653d 2727 0a20  _shell_line=''. 
-00004b10: 2020 2020 2020 2073 7263 5f61 3d73 7263         src_a=src
-00004b20: 2e73 706c 6974 2827 5c6e 2729 0a20 2020  .split('\n').   
-00004b30: 2020 2020 2073 7263 5f6d 783d 6c65 6e28       src_mx=len(
-00004b40: 7372 635f 6129 0a20 2020 2020 2020 2073  src_a).        s
-00004b50: 7263 5f6d 3d6c 656e 2873 7263 5f61 292d  rc_m=len(src_a)-
-00004b60: 310a 2020 2020 2020 2020 666f 7220 6920  1.        for i 
-00004b70: 696e 2072 616e 6765 2830 2c73 7263 5f6d  in range(0,src_m
-00004b80: 7829 3a0a 2020 2020 2020 2020 2020 2020  x):.            
-00004b90: 695f 613d 7372 635f 615b 695d 2e73 7472  i_a=src_a[i].str
-00004ba0: 6970 2829 2e73 706c 6974 2829 0a20 2020  ip().split().   
-00004bb0: 2020 2020 2020 2020 2069 6620 695f 613a           if i_a:
-00004bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004bd0: 2069 6620 695f 615b 2d31 5d20 696e 205b   if i_a[-1] in [
-00004be0: 2764 6f27 2c27 7468 656e 272c 2765 6c73  'do','then','els
-00004bf0: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
-00004c00: 2020 2020 2020 2020 206e 6577 5f73 6865           new_she
-00004c10: 6c6c 5f6c 696e 653d 6e65 775f 7368 656c  ll_line=new_shel
-00004c20: 6c5f 6c69 6e65 2b27 2027 2b73 7263 5f61  l_line+' '+src_a
-00004c30: 5b69 5d2e 6c73 7472 6970 2829 0a20 2020  [i].lstrip().   
-00004c40: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00004c50: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00004c60: 2020 2020 2020 2069 6620 6920 3e3d 2073         if i >= s
-00004c70: 7263 5f6d 3a0a 2020 2020 2020 2020 2020  rc_m:.          
-00004c80: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-00004c90: 775f 7368 656c 6c5f 6c69 6e65 3d6e 6577  w_shell_line=new
-00004ca0: 5f73 6865 6c6c 5f6c 696e 652b 2720 272b  _shell_line+' '+
-00004cb0: 7372 635f 615b 695d 2e6c 7374 7269 7028  src_a[i].lstrip(
-00004cc0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00004cd0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00004ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004cf0: 2020 2020 6e65 775f 7368 656c 6c5f 6c69      new_shell_li
-00004d00: 6e65 3d6e 6577 5f73 6865 6c6c 5f6c 696e  ne=new_shell_lin
-00004d10: 652b 2720 272b 7372 635f 615b 695d 2e6c  e+' '+src_a[i].l
-00004d20: 7374 7269 7028 292b 273b 270a 2020 2020  strip()+';'.    
-00004d30: 2020 2020 7265 7475 726e 206e 6577 5f73      return new_s
-00004d40: 6865 6c6c 5f6c 696e 650a 0a20 2020 206f  hell_line..    o
-00004d50: 7574 3d5b 5d0a 2020 2020 6966 206d 6f64  ut=[].    if mod
-00004d60: 6520 3d3d 2027 7368 656c 6c27 3a0a 2020  e == 'shell':.  
-00004d70: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00004d80: 6e63 6528 7372 632c 7374 7229 3a0a 2020  nce(src,str):.  
-00004d90: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00004da0: 2073 7472 696e 675f 746f 5f73 6865 6c6c   string_to_shell
-00004db0: 5f6c 696e 6528 7372 6329 0a20 2020 2020  _line(src).     
-00004dc0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-00004dd0: 6365 2873 7263 2c74 7570 6c65 2920 616e  ce(src,tuple) an
-00004de0: 6420 6c65 6e28 7372 6329 203d 3d20 3120  d len(src) == 1 
-00004df0: 616e 6420 6973 696e 7374 616e 6365 2873  and isinstance(s
-00004e00: 7263 5b30 5d2c 7374 7229 3a0a 2020 2020  rc[0],str):.    
-00004e10: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00004e20: 7472 696e 675f 746f 5f73 6865 6c6c 5f6c  tring_to_shell_l
-00004e30: 696e 6528 7372 635b 305d 290a 2020 2020  ine(src[0]).    
-00004e40: 656c 7365 3a0a 2020 2020 2020 2020 6966  else:.        if
-00004e50: 2069 7369 6e73 7461 6e63 6528 6578 636c   isinstance(excl
-00004e60: 7564 6573 2c28 7374 722c 6c69 7374 2c74  udes,(str,list,t
-00004e70: 7570 6c65 2929 3a0a 2020 2020 2020 2020  uple)):.        
-00004e80: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00004e90: 6528 6578 636c 7564 6573 2c73 7472 293a  e(excludes,str):
-00004ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004eb0: 2065 7863 6c75 6465 733d 6578 636c 7564   excludes=exclud
-00004ec0: 6573 2e73 706c 6974 2827 2c27 290a 2020  es.split(',').  
-00004ed0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00004ee0: 6e63 6528 6578 636c 7564 6573 2c28 6c69  nce(excludes,(li
-00004ef0: 7374 2c74 7570 6c65 2929 2061 6e64 2065  st,tuple)) and e
-00004f00: 7863 6c75 6465 733a 0a20 2020 2020 2020  xcludes:.       
-00004f10: 2020 2020 2066 6f72 2069 2069 6e20 7372       for i in sr
-00004f20: 633a 0a20 2020 2020 2020 2020 2020 2020  c:.             
-00004f30: 2020 2069 5f6f 3d5b 5d0a 2020 2020 2020     i_o=[].      
-00004f40: 2020 2020 2020 2020 2020 6966 2054 7970            if Typ
-00004f50: 6528 692c 2827 7374 7227 2c27 6279 7465  e(i,('str','byte
-00004f60: 7327 2929 3a0a 2020 2020 2020 2020 2020  s')):.          
-00004f70: 2020 2020 2020 2020 2020 666f 7220 6969            for ii
-00004f80: 2069 6e20 5370 6c69 7428 692c 7370 6c69   in Split(i,spli
-00004f90: 745f 7379 6d62 6f6c 293a 0a20 2020 2020  t_symbol):.     
-00004fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004fb0: 2020 2069 6620 4973 496e 2869 692c 6578     if IsIn(ii,ex
-00004fc0: 636c 7564 6573 293a 2063 6f6e 7469 6e75  cludes): continu
-00004fd0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00004fe0: 2020 2020 2020 2020 2020 695f 6f2e 6170            i_o.ap
-00004ff0: 7065 6e64 2869 6929 0a20 2020 2020 2020  pend(ii).       
-00005000: 2020 2020 2020 2020 2069 6620 695f 6f3a           if i_o:
-00005010: 206f 7574 2e61 7070 656e 6428 4a6f 696e   out.append(Join
-00005020: 2869 5f6f 2c73 796d 626f 6c3d 7370 6c69  (i_o,symbol=spli
-00005030: 745f 7379 6d62 6f6c 2929 0a20 2020 2020  t_symbol)).     
-00005040: 2020 2020 2020 2072 6574 7572 6e20 4a6f         return Jo
-00005050: 696e 286f 7574 2c73 796d 626f 6c3d 6d65  in(out,symbol=me
-00005060: 7267 655f 7379 6d62 6f6c 290a 2020 2020  rge_symbol).    
-00005070: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00005080: 2020 2020 2020 7265 7475 726e 204a 6f69        return Joi
-00005090: 6e28 7372 632c 7379 6d62 6f6c 3d6d 6572  n(src,symbol=mer
-000050a0: 6765 5f73 796d 626f 6c29 0a20 2020 2020  ge_symbol).     
-000050b0: 2020 200a 2020 2020 2020 2020 2020 2020     .            
-000050c0: 0a64 6566 2044 6566 6175 6c74 2861 2c62  .def Default(a,b
-000050d0: 3d4e 6f6e 6529 3a0a 2020 2020 2727 270a  =None):.    '''.
-000050e0: 2020 2020 4d61 6b65 2061 2072 6574 7572      Make a retur
-000050f0: 6e20 7661 6c75 650a 2020 2020 6220 6973  n value.    b is
-00005100: 206f 7267 2074 6865 6e20 7265 7475 726e   org then return
-00005110: 206f 7269 6769 6e61 6c20 7661 6c75 6520   original value 
-00005120: 610a 2020 2020 6966 2062 206e 6f74 206f  a.    if b not o
-00005130: 7267 2074 6865 6e20 7265 7475 726e 2062  rg then return b
-00005140: 200a 2020 2020 2727 270a 2020 2020 6966   .    '''.    if
-00005150: 2062 2069 6e20 5b27 6f72 6727 2c27 6f72   b in ['org','or
-00005160: 6967 696e 616c 272c 7b27 6f72 6727 7d5d  iginal',{'org'}]
-00005170: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00005180: 2061 0a20 2020 2072 6574 7572 6e20 620a   a.    return b.
-00005190: 0a64 6566 2050 6565 6c28 692c 6d6f 6465  .def Peel(i,mode
-000051a0: 3d54 7275 652c 6465 6661 756c 743d 276f  =True,default='o
-000051b0: 7267 272c 6572 723d 5472 7565 2c6f 7574  rg',err=True,out
-000051c0: 7075 745f 6368 6563 6b3d 5472 7565 293a  put_check=True):
-000051d0: 0a20 2020 2027 2727 0a20 2020 2050 6565  .    '''.    Pee
-000051e0: 6c20 6c69 7374 2c74 7570 6c65 2c64 6963  l list,tuple,dic
-000051f0: 7420 746f 2064 6174 612c 2069 6620 6e6f  t to data, if no
-00005200: 7420 7065 656c 6162 6c65 2074 6865 6e20  t peelable then 
-00005210: 7265 7475 726e 206f 7269 6769 6e61 6c20  return original 
-00005220: 6461 7461 0a20 2020 2020 202d 2073 696e  data.      - sin
-00005230: 676c 6520 6461 7461 203a 206a 7573 7420  gle data : just 
-00005240: 6765 7420 6461 7461 0a20 2020 2020 202d  get data.      -
-00005250: 206d 756c 7469 2064 6174 6120 203a 2067   multi data  : g
-00005260: 6574 2066 6972 7374 2064 6174 610a 2020  et first data.  
-00005270: 2020 6966 2070 6565 6c65 6420 6461 7461    if peeled data
-00005280: 2069 7320 4e6f 6e65 2074 6865 6e20 7265   is None then re
-00005290: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-000052a0: 2064 6566 6175 6c74 203a 2027 6f72 6727   default : 'org'
-000052b0: 2864 6566 6175 6c74 2920 3a20 7265 7475  (default) : retu
-000052c0: 726e 206f 7269 6769 6e61 6c20 6461 7461  rn original data
-000052d0: 0a20 2020 2065 7272 2020 2020 203a 2054  .    err     : T
-000052e0: 7275 6520 3a28 6465 6661 756c 7429 2069  rue :(default) i
-000052f0: 6620 6e6f 7420 7369 6e67 6c65 2064 6174  f not single dat
-00005300: 6120 7468 656e 2072 6574 7572 6e20 6465  a then return de
-00005310: 6661 756c 742c 2046 616c 7365 3a20 7768  fault, False: wh
-00005320: 6174 6576 6572 2069 7420 7769 6c6c 2072  atever it will r
-00005330: 6574 7572 6e20 6669 7273 7420 6461 7461  eturn first data
-00005340: 0a20 2020 206d 6f64 6520 2020 203a 2054  .    mode    : T
-00005350: 7275 6520 3a28 6465 6661 756c 7429 2c20  rue :(default), 
-00005360: 7065 656c 696e 6720 6461 7461 2c20 4661  peeling data, Fa
-00005370: 6c73 653a 206e 6f74 2070 6565 6c69 6e67  lse: not peeling
-00005380: 2872 6574 7572 6e20 6f72 6967 696e 616c  (return original
-00005390: 290a 2020 2020 6f75 7470 7574 5f63 6865  ).    output_che
-000053a0: 636b 3a20 5472 7565 3a28 6465 6661 756c  ck: True:(defaul
-000053b0: 7429 2049 6620 7065 656c 6564 2064 6174  t) If peeled dat
-000053c0: 6120 6973 206c 6973 742c 7475 706c 652c  a is list,tuple,
-000053d0: 6469 6374 2074 6865 6e20 7265 7475 726e  dict then return
-000053e0: 2064 6566 6175 6c74 2c20 4661 6c73 653a   default, False:
-000053f0: 206a 7573 7420 7265 7475 726e 2070 6565   just return pee
-00005400: 6c65 6420 6461 7461 0a20 2020 2027 2727  led data.    '''
-00005410: 0a20 2020 2069 6620 6d6f 6465 2069 7320  .    if mode is 
-00005420: 4661 6c73 653a 2072 6574 7572 6e20 690a  False: return i.
-00005430: 2020 2020 656c 6966 206d 6f64 6520 3d3d      elif mode ==
-00005440: 2027 666f 7263 6527 3a0a 2020 2020 2020   'force':.      
-00005450: 2020 6572 723d 4661 6c73 650a 2020 2020    err=False.    
-00005460: 2020 2020 6f75 7470 7574 5f63 6865 636b      output_check
-00005470: 3d46 616c 7365 0a20 2020 2069 6620 6973  =False.    if is
-00005480: 696e 7374 616e 6365 2869 2c28 6c69 7374  instance(i,(list
-00005490: 2c74 7570 6c65 2c64 6963 7429 293a 0a20  ,tuple,dict)):. 
-000054a0: 2020 2020 2020 2023 4572 726f 7220 636f         #Error co
-000054b0: 6e64 6974 696f 6e0a 2020 2020 2020 2020  ndition.        
-000054c0: 6966 206c 656e 2869 2920 3d3d 2030 3a20  if len(i) == 0: 
-000054d0: 7265 7475 726e 2044 6566 6175 6c74 2869  return Default(i
-000054e0: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
-000054f0: 2020 6966 206c 656e 2869 2920 3e20 313a    if len(i) > 1:
-00005500: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00005510: 6572 7220 6973 2054 7275 653a 2072 6574  err is True: ret
-00005520: 7572 6e20 4465 6661 756c 7428 692c 6465  urn Default(i,de
-00005530: 6661 756c 7429 0a20 2020 2020 2020 2072  fault).        r
-00005540: 743d 695b 305d 2069 6620 6973 696e 7374  t=i[0] if isinst
-00005550: 616e 6365 2869 2c28 6c69 7374 2c74 7570  ance(i,(list,tup
-00005560: 6c65 2929 2065 6c73 6520 695b 4e65 7874  le)) else i[Next
-00005570: 2869 295d 0a20 2020 2020 2020 2069 6620  (i)].        if 
-00005580: 6f75 7470 7574 5f63 6865 636b 2069 7320  output_check is 
-00005590: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
-000055a0: 2020 2343 6865 636b 206f 7574 7075 7420    #Check output 
-000055b0: 6461 7461 2066 6f72 6d61 740a 2020 2020  data format.    
-000055c0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-000055d0: 7461 6e63 6528 7274 2c28 6c69 7374 2c74  tance(rt,(list,t
-000055e0: 7570 6c65 2c64 6963 7429 293a 0a20 2020  uple,dict)):.   
-000055f0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00005600: 7572 6e20 4465 6661 756c 7428 692c 6465  urn Default(i,de
-00005610: 6661 756c 7429 0a20 2020 2020 2020 2072  fault).        r
-00005620: 6574 7572 6e20 7274 0a20 2020 2065 6c73  eturn rt.    els
-00005630: 653a 0a20 2020 2020 2020 2023 4e6f 7420  e:.        #Not 
-00005640: 7065 656c 6162 6c65 0a20 2020 2020 2020  peelable.       
-00005650: 2072 6574 7572 6e20 690a 0a64 6566 2049   return i..def I
-00005660: 6e74 2869 2c64 6566 6175 6c74 3d27 6f72  nt(i,default='or
-00005670: 6727 2c73 796d 3d4e 6f6e 652c 6572 723d  g',sym=None,err=
-00005680: 4661 6c73 6529 3a0a 2020 2020 2727 270a  False):.    '''.
-00005690: 2020 2020 436f 6e76 6572 7420 6461 7461      Convert data
-000056a0: 2074 6f20 496e 7420 6461 7461 2077 6865   to Int data whe
-000056b0: 6e20 706f 7373 6962 6c65 2e20 6966 206e  n possible. if n
-000056c0: 6f74 2074 6865 6e20 7265 7475 726e 2064  ot then return d
-000056d0: 6566 6175 6c74 2028 6f72 6967 696e 616c  efault (original
-000056e0: 2064 6174 6129 0a20 2020 2073 7570 706f   data).    suppo
-000056f0: 7274 2064 6174 6120 7479 7065 3a20 696e  rt data type: in
-00005700: 742c 666c 6f61 742c 6469 6769 7420 6e75  t,float,digit nu
-00005710: 6d62 6572 2c6c 6973 742c 7475 706c 650a  mber,list,tuple.
-00005720: 2020 2020 6465 6661 756c 743a 2028 6465      default: (de
-00005730: 6661 756c 7420 6f72 6729 0a20 2020 2020  fault org).     
-00005740: 2020 206f 7267 203a 2066 6169 6c20 7468     org : fail th
-00005750: 656e 2072 6574 7572 6e20 6f72 206b 6565  en return or kee
-00005760: 7069 6e67 2074 6865 2069 6e70 7574 2064  ping the input d
-00005770: 6174 610a 2020 2020 2020 2020 5472 7565  ata.        True
-00005780: 2c46 616c 7365 2c4e 6f6e 653a 2066 6169  ,False,None: fai
-00005790: 6c20 7468 656e 2072 6574 7572 6e20 6465  l then return de
-000057a0: 6661 756c 7420 7661 6c75 6520 696e 2073  fault value in s
-000057b0: 696e 676c 6520 6461 7461 206f 7220 6967  ingle data or ig
-000057c0: 6e6f 7265 2074 6865 2069 7465 6d20 696e  nore the item in
-000057d0: 206c 6973 740a 2020 2020 7379 6d20 2020   list.    sym   
-000057e0: 2020 3a20 7370 6c69 7420 7379 6d62 6f6c    : split symbol
-000057f0: 2077 6865 6e20 696e 7075 7420 6973 2073   when input is s
-00005800: 7472 696e 670a 2020 2020 6572 7220 2020  tring.    err   
-00005810: 2020 3a20 0a20 2020 2020 2020 2046 616c    : .        Fal
-00005820: 7365 3a20 7265 706c 6163 6520 6461 7461  se: replace data
-00005830: 2066 6f72 2070 6f73 7369 626c 6520 706f   for possible po
-00005840: 7369 7469 6f6e 730a 2020 2020 2020 2020  sitions.        
-00005850: 5472 7565 203a 2069 6620 636f 6e76 6572  True : if conver
-00005860: 7420 6572 726f 7220 696e 206c 6973 742f  t error in list/
-00005870: 7475 706c 6520 7468 656e 2072 6574 7572  tuple then retur
-00005880: 6e20 6465 6661 756c 740a 2020 2020 2727  n default.    ''
-00005890: 270a 2020 2020 6966 2069 7369 6e73 7461  '.    if isinsta
-000058a0: 6e63 6528 692c 626f 6f6c 293a 2072 6574  nce(i,bool): ret
-000058b0: 7572 6e20 4465 6661 756c 7428 692c 6465  urn Default(i,de
-000058c0: 6661 756c 7429 0a20 2020 2069 6620 6973  fault).    if is
-000058d0: 696e 7374 616e 6365 2869 2c69 6e74 293a  instance(i,int):
-000058e0: 2072 6574 7572 6e20 690a 2020 2020 695f   return i.    i_
-000058f0: 7479 7065 3d54 7970 654e 616d 6528 6929  type=TypeName(i)
-00005900: 0a20 2020 2069 6620 695f 7479 7065 2069  .    if i_type i
-00005910: 6e20 2827 7374 7227 2c27 6279 7465 7327  n ('str','bytes'
-00005920: 293a 0a20 2020 2020 2020 2069 6620 7379  ):.        if sy
-00005930: 6d3a 0a20 2020 2020 2020 2020 2020 2073  m:.            s
-00005940: 796d 3d42 7974 6573 2873 796d 2920 6966  ym=Bytes(sym) if
-00005950: 2069 5f74 7970 6520 3d3d 2027 6279 7465   i_type == 'byte
-00005960: 7327 2065 6c73 6520 5374 7228 7379 6d29  s' else Str(sym)
-00005970: 0a20 2020 2020 2020 2020 2020 2069 3d69  .            i=i
-00005980: 2e73 706c 6974 2873 796d 290a 2020 2020  .split(sym).    
-00005990: 2020 2020 2020 2020 695f 7479 7065 3d54          i_type=T
-000059a0: 7970 654e 616d 6528 6929 0a20 2020 2020  ypeName(i).     
-000059b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000059c0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-000059d0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000059e0: 2069 6e74 2866 6c6f 6174 2869 2929 0a20   int(float(i)). 
-000059f0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-00005a00: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00005a10: 2020 2072 6574 7572 6e20 4465 6661 756c     return Defaul
-00005a20: 7428 692c 6465 6661 756c 7429 0a20 2020  t(i,default).   
-00005a30: 2069 6620 695f 7479 7065 2069 6e20 2827   if i_type in ('
-00005a40: 6c69 7374 272c 2774 7570 6c65 2729 3a0a  list','tuple'):.
-00005a50: 2020 2020 2020 2020 7475 706c 655f 6f75          tuple_ou
-00005a60: 743d 5472 7565 2069 6620 695f 7479 7065  t=True if i_type
-00005a70: 203d 3d20 2774 7570 6c65 2720 656c 7365   == 'tuple' else
-00005a80: 2046 616c 7365 0a20 2020 2020 2020 2072   False.        r
-00005a90: 743d 5b5d 0a20 2020 2020 2020 2066 6f72  t=[].        for
-00005aa0: 2061 2069 6e20 693a 0a20 2020 2020 2020   a in i:.       
-00005ab0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00005ac0: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
-00005ad0: 6428 696e 7428 666c 6f61 7428 6129 2929  d(int(float(a)))
-00005ae0: 0a20 2020 2020 2020 2020 2020 6578 6365  .           exce
-00005af0: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-00005b00: 2020 2069 6620 6572 723a 2072 6574 7572     if err: retur
-00005b10: 6e20 4465 6661 756c 7428 692c 6465 6661  n Default(i,defa
-00005b20: 756c 7429 0a20 2020 2020 2020 2020 2020  ult).           
-00005b30: 2020 2020 2372 742e 6170 7065 6e64 2861      #rt.append(a
-00005b40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00005b50: 2072 742e 6170 7065 6e64 2844 6566 6175   rt.append(Defau
-00005b60: 6c74 2861 2c64 6566 6175 6c74 2929 0a20  lt(a,default)). 
-00005b70: 2020 2020 2020 2072 6574 7572 6e20 7475         return tu
-00005b80: 706c 6528 7274 2920 6966 2074 7570 6c65  ple(rt) if tuple
-00005b90: 5f6f 7574 2065 6c73 6520 7274 0a20 2020  _out else rt.   
-00005ba0: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
-00005bb0: 692c 6465 6661 756c 7429 0a0a 6465 6620  i,default)..def 
-00005bc0: 4a6f 696e 282a 696e 7073 2c73 796d 626f  Join(*inps,symbo
-00005bd0: 6c3d 275f 2d5f 272c 6279 7465 3d4e 6f6e  l='_-_',byte=Non
-00005be0: 652c 6967 6e6f 7265 5f74 7970 653d 2864  e,ignore_type=(d
-00005bf0: 6963 742c 626f 6f6c 2c4e 6f6e 6529 2c69  ict,bool,None),i
-00005c00: 676e 6f72 655f 6461 7461 3d28 292c 6170  gnore_data=(),ap
-00005c10: 7065 6e64 5f66 726f 6e74 3d27 272c 6170  pend_front='',ap
-00005c20: 7065 6e64 5f65 6e64 3d27 272c 6465 6661  pend_end='',defa
-00005c30: 756c 743d 4e6f 6e65 2c65 7272 3d46 616c  ult=None,err=Fal
-00005c40: 7365 293a 0a20 2020 2027 2727 0a20 2020  se):.    '''.   
-00005c50: 2053 696d 696c 6172 2061 7320 2773 796d   Similar as 'sym
-00005c60: 626f 6c27 2e6a 6f69 6e28 5b6c 6973 745d  bol'.join([list]
-00005c70: 2920 6675 6e63 7469 6f6e 0a20 2020 2027  ) function.    '
-00005c80: 2727 0a20 2020 2064 6566 205f 6967 6e6f  ''.    def _igno
-00005c90: 7265 5f28 7372 632c 6967 6e6f 7265 5f74  re_(src,ignore_t
-00005ca0: 7970 652c 6967 6e6f 7265 5f64 6174 6129  ype,ignore_data)
-00005cb0: 3a0a 2020 2020 2020 2020 7274 3d5b 5d0a  :.        rt=[].
-00005cc0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00005cd0: 2073 7263 3a0a 2020 2020 2020 2020 2020   src:.          
-00005ce0: 2020 6966 2074 7970 6528 6929 2069 6e20    if type(i) in 
-00005cf0: 6967 6e6f 7265 5f74 7970 653a 2063 6f6e  ignore_type: con
-00005d00: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-00005d10: 2020 656c 6966 2069 676e 6f72 655f 6461    elif ignore_da
-00005d20: 7461 2061 6e64 2069 2069 6e20 6967 6e6f  ta and i in igno
-00005d30: 7265 5f64 6174 613a 2063 6f6e 7469 6e75  re_data: continu
-00005d40: 650a 2020 2020 2020 2020 2020 2020 7274  e.            rt
-00005d50: 2e61 7070 656e 6428 6929 0a20 2020 2020  .append(i).     
-00005d60: 2020 2072 6574 7572 6e20 7274 0a20 2020     return rt.   
-00005d70: 2069 6620 6967 6e6f 7265 5f74 7970 653a   if ignore_type:
-00005d80: 0a20 2020 2020 2020 2069 6620 4e6f 6e65  .        if None
-00005d90: 2069 6e20 6967 6e6f 7265 5f74 7970 653a   in ignore_type:
-00005da0: 0a20 2020 2020 2020 2020 2020 2069 676e  .            ign
-00005db0: 6f72 655f 7479 7065 3d6c 6973 7428 6967  ore_type=list(ig
-00005dc0: 6e6f 7265 5f74 7970 6529 0a20 2020 2020  nore_type).     
-00005dd0: 2020 2020 2020 2069 676e 6f72 655f 7479         ignore_ty
-00005de0: 7065 5b69 676e 6f72 655f 7479 7065 2e69  pe[ignore_type.i
-00005df0: 6e64 6578 284e 6f6e 6529 5d3d 7479 7065  ndex(None)]=type
-00005e00: 284e 6f6e 6529 0a20 2020 2073 7263 3d5b  (None).    src=[
-00005e10: 5d0a 2020 2020 6966 206c 656e 2869 6e70  ].    if len(inp
-00005e20: 7329 203d 3d20 3120 616e 6420 6973 696e  s) == 1 and isin
-00005e30: 7374 616e 6365 2869 6e70 735b 305d 2c28  stance(inps[0],(
-00005e40: 6c69 7374 2c74 7570 6c65 2929 3a0a 2020  list,tuple)):.  
-00005e50: 2020 2020 2020 7372 633d 7372 632b 5f69        src=src+_i
-00005e60: 676e 6f72 655f 2869 6e70 735b 305d 2c69  gnore_(inps[0],i
-00005e70: 676e 6f72 655f 7479 7065 2c69 676e 6f72  gnore_type,ignor
-00005e80: 655f 6461 7461 290a 2020 2020 2320 6966  e_data).    # if
-00005e90: 206d 6973 7369 6e67 2073 796d 626f 6c20   missing symbol 
-00005ea0: 6f70 7469 6f6e 2074 6865 6e20 6a75 7374  option then just
-00005eb0: 2074 616b 6520 656e 6420 6f66 2069 6e70   take end of inp
-00005ec0: 7574 730a 2020 2020 656c 6966 206c 656e  uts.    elif len
-00005ed0: 2869 6e70 7329 203e 3d32 3a0a 2020 2020  (inps) >=2:.    
-00005ee0: 2020 2020 6d78 3d6c 656e 2869 6e70 7329      mx=len(inps)
-00005ef0: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-00005f00: 6f6c 3d3d 275f 2d5f 273a 0a20 2020 2020  ol=='_-_':.     
-00005f10: 2020 2020 2020 2073 796d 626f 6c3d 696e         symbol=in
-00005f20: 7073 5b2d 315d 0a20 2020 2020 2020 2020  ps[-1].         
-00005f30: 2020 206d 783d 6d78 2d31 0a20 2020 2020     mx=mx-1.     
-00005f40: 2020 2066 6f72 2069 2069 6e20 696e 7073     for i in inps
-00005f50: 5b3a 6d78 5d3a 0a20 2020 2020 2020 2020  [:mx]:.         
-00005f60: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00005f70: 2869 2c28 6c69 7374 2c74 7570 6c65 2929  (i,(list,tuple))
-00005f80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00005f90: 2020 7372 633d 7372 632b 5f69 676e 6f72    src=src+_ignor
-00005fa0: 655f 2869 2c69 676e 6f72 655f 7479 7065  e_(i,ignore_type
-00005fb0: 2c69 676e 6f72 655f 6461 7461 290a 2020  ,ignore_data).  
-00005fc0: 2020 2020 2020 2020 2020 656c 6966 2074            elif t
-00005fd0: 7970 6528 6929 2069 6e20 6967 6e6f 7265  ype(i) in ignore
-00005fe0: 5f74 7970 6520 6f72 2069 2069 6e20 6967  _type or i in ig
-00005ff0: 6e6f 7265 5f64 6174 613a 0a20 2020 2020  nore_data:.     
-00006000: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
-00006010: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
-00006020: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00006030: 2020 2020 2020 7372 632e 6170 7065 6e64        src.append
-00006040: 2869 290a 2020 2020 2320 4f52 2020 2020  (i).    # OR    
-00006050: 0a20 2020 2023 204f 6e6c 7920 7477 6f20  .    # Only two 
-00006060: 696e 7075 7420 616e 6420 6669 7273 7420  input and first 
-00006070: 6973 206c 6973 7420 7468 656e 206d 6973  is list then mis
-00006080: 7369 6e67 2073 796d 626f 6c20 6f70 7469  sing symbol opti
-00006090: 6f6e 2074 6865 6e20 6c61 7374 206f 6e65  on then last one
-000060a0: 2069 7320 7379 6d62 6f6c 0a20 2020 2023   is symbol.    #
-000060b0: 656c 6966 206c 656e 2869 6e70 7329 203d  elif len(inps) =
-000060c0: 3d20 3220 616e 6420 6973 696e 7374 616e  = 2 and isinstan
-000060d0: 6365 2869 6e70 735b 305d 2c28 6c69 7374  ce(inps[0],(list
-000060e0: 2c74 7570 6c65 2929 2061 6e64 2073 796d  ,tuple)) and sym
-000060f0: 626f 6c3d 3d27 5f2d 5f27 3a0a 2020 2020  bol=='_-_':.    
-00006100: 2320 2020 2073 7263 3d73 7263 2b5f 6967  #    src=src+_ig
-00006110: 6e6f 7265 5f28 696e 7073 5b30 5d2c 6967  nore_(inps[0],ig
-00006120: 6e6f 7265 5f74 7970 652c 6967 6e6f 7265  nore_type,ignore
-00006130: 5f64 6174 6129 0a20 2020 2023 2020 2020  _data).    #    
-00006140: 7379 6d62 6f6c 3d69 6e70 735b 315d 0a20  symbol=inps[1]. 
-00006150: 2020 2023 656c 7365 3a0a 2020 2020 2320     #else:.    # 
-00006160: 2020 2066 6f72 2069 6920 696e 2069 6e70     for ii in inp
-00006170: 733a 0a20 2020 2023 2020 2020 2020 2020  s:.    #        
-00006180: 6966 2069 7369 6e73 7461 6e63 6528 6969  if isinstance(ii
-00006190: 2c28 6c69 7374 2c74 7570 6c65 2929 3a0a  ,(list,tuple)):.
-000061a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000061b0: 2073 7263 3d73 7263 2b5f 6967 6e6f 7265   src=src+_ignore
-000061c0: 5f28 6969 2c69 676e 6f72 655f 7479 7065  _(ii,ignore_type
-000061d0: 2c69 676e 6f72 655f 6461 7461 290a 2020  ,ignore_data).  
-000061e0: 2020 2320 2020 2020 2020 2065 6c69 6620    #        elif 
-000061f0: 7479 7065 2869 6929 2069 6e20 6967 6e6f  type(ii) in igno
-00006200: 7265 5f74 7970 653a 0a20 2020 2023 2020  re_type:.    #  
-00006210: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-00006220: 7565 0a20 2020 2023 2020 2020 2020 2020  ue.    #        
-00006230: 656c 6966 2069 6920 696e 2069 676e 6f72  elif ii in ignor
-00006240: 655f 6461 7461 3a0a 2020 2020 2320 2020  e_data:.    #   
-00006250: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-00006260: 650a 2020 2020 2320 2020 2020 2020 2065  e.    #        e
-00006270: 6c73 653a 0a20 2020 2023 2020 2020 2020  lse:.    #      
-00006280: 2020 2020 2020 7372 632e 6170 7065 6e64        src.append
-00006290: 2869 6929 0a20 2020 2023 6966 2073 796d  (ii).    #if sym
-000062a0: 626f 6c3d 3d27 5f2d 5f27 3a20 7379 6d62  bol=='_-_': symb
-000062b0: 6f6c 3d27 270a 2020 2020 7274 3d27 270a  ol=''.    rt=''.
-000062c0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000062d0: 6528 6279 7465 2c62 6f6f 6c29 3a0a 2020  e(byte,bool):.  
-000062e0: 2020 2020 2020 6966 2062 7974 653a 0a20        if byte:. 
-000062f0: 2020 2020 2020 2020 2020 2072 743d 6227             rt=b'
-00006300: 270a 2020 2020 2020 2020 2020 2020 7379  '.            sy
-00006310: 6d62 6f6c 3d42 7974 6573 2873 796d 626f  mbol=Bytes(symbo
-00006320: 6c29 0a20 2020 2020 2020 2020 2020 2061  l).            a
-00006330: 7070 656e 645f 6672 6f6e 743d 4279 7465  ppend_front=Byte
-00006340: 7328 6170 7065 6e64 5f66 726f 6e74 290a  s(append_front).
-00006350: 2020 2020 2020 2020 2020 2020 6170 7065              appe
-00006360: 6e64 5f65 6e64 3d42 7974 6573 2861 7070  nd_end=Bytes(app
-00006370: 656e 645f 656e 6429 0a20 2020 2020 2020  end_end).       
-00006380: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00006390: 2020 2073 796d 626f 6c3d 5374 7228 7379     symbol=Str(sy
-000063a0: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
-000063b0: 2020 6170 7065 6e64 5f66 726f 6e74 3d53    append_front=S
-000063c0: 7472 2861 7070 656e 645f 6672 6f6e 7429  tr(append_front)
-000063d0: 0a20 2020 2020 2020 2020 2020 2061 7070  .            app
-000063e0: 656e 645f 656e 643d 5374 7228 6170 7065  end_end=Str(appe
-000063f0: 6e64 5f65 6e64 290a 2020 2020 656c 7365  nd_end).    else
-00006400: 3a0a 2020 2020 2020 2020 6279 7465 3d46  :.        byte=F
-00006410: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
-00006420: 7372 6320 616e 6420 6973 696e 7374 616e  src and isinstan
-00006430: 6365 2873 7263 2c28 6c69 7374 2c74 7570  ce(src,(list,tup
-00006440: 6c65 2929 3a0a 2020 2020 2020 2020 2020  le)):.          
-00006450: 2020 6966 2049 7342 7974 6573 2873 7263    if IsBytes(src
-00006460: 5b30 5d29 3a0a 2020 2020 2020 2020 2020  [0]):.          
-00006470: 2020 2020 2020 7274 3d62 2727 0a20 2020        rt=b''.   
-00006480: 2020 2020 2020 2020 2020 2020 2062 7974               byt
-00006490: 653d 5472 7565 0a20 2020 2020 2020 2020  e=True.         
-000064a0: 2020 2020 2020 2073 796d 626f 6c3d 4279         symbol=By
-000064b0: 7465 7328 7379 6d62 6f6c 290a 2020 2020  tes(symbol).    
-000064c0: 2020 2020 2020 2020 2020 2020 6170 7065              appe
-000064d0: 6e64 5f66 726f 6e74 3d42 7974 6573 2861  nd_front=Bytes(a
-000064e0: 7070 656e 645f 6672 6f6e 7429 0a20 2020  ppend_front).   
-000064f0: 2020 2020 2020 2020 2020 2020 2061 7070               app
-00006500: 656e 645f 656e 643d 4279 7465 7328 6170  end_end=Bytes(ap
-00006510: 7065 6e64 5f65 6e64 290a 2020 2020 696e  pend_end).    in
-00006520: 6974 5f6e 6f6e 653d 4e6f 6e65 0a20 2020  it_none=None.   
-00006530: 2066 6f72 2069 2069 6e20 7372 633a 0a20   for i in src:. 
-00006540: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-00006550: 696e 7374 616e 6365 2869 2c28 7374 722c  instance(i,(str,
-00006560: 6279 7465 7329 293a 0a20 2020 2020 2020  bytes)):.       
-00006570: 2020 2020 2069 6620 6572 723a 0a20 2020       if err:.   
-00006580: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00006590: 7572 6e20 4465 6661 756c 7428 696e 7073  urn Default(inps
-000065a0: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
-000065b0: 2020 2020 2020 693d 277b 7d27 2e66 6f72        i='{}'.for
-000065c0: 6d61 7428 6929 0a20 2020 2020 2020 2069  mat(i).        i
-000065d0: 6620 6279 7465 3a0a 2020 2020 2020 2020  f byte:.        
-000065e0: 2020 2020 693d 4279 7465 7328 6929 0a20      i=Bytes(i). 
-000065f0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00006600: 2020 2020 2020 2020 2069 3d53 7472 2869           i=Str(i
-00006610: 290a 2020 2020 2020 2020 6966 2069 6e69  ).        if ini
-00006620: 745f 6e6f 6e65 2069 7320 4e6f 6e65 3a0a  t_none is None:.
-00006630: 2020 2020 2020 2020 2020 2020 7274 3d69              rt=i
-00006640: 0a20 2020 2020 2020 2020 2020 2069 6e69  .            ini
-00006650: 745f 6e6f 6e65 3d31 0a20 2020 2020 2020  t_none=1.       
-00006660: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00006670: 2020 2072 743d 7274 2b73 796d 626f 6c2b     rt=rt+symbol+
-00006680: 6170 7065 6e64 5f66 726f 6e74 2b69 2b61  append_front+i+a
-00006690: 7070 656e 645f 656e 640a 2020 2020 7265  ppend_end.    re
-000066a0: 7475 726e 2072 740a 0a64 6566 2046 6978  turn rt..def Fix
-000066b0: 496e 6465 7828 7372 632c 6964 782c 6465  Index(src,idx,de
-000066c0: 6661 756c 743d 4661 6c73 652c 6572 723d  fault=False,err=
-000066d0: 4661 6c73 6529 3a0a 2020 2020 2727 270a  False):.    '''.
-000066e0: 2020 2020 4669 6e64 2049 6e64 6578 206e      Find Index n
-000066f0: 756d 6265 7220 696e 2074 6865 206c 6973  umber in the lis
-00006700: 742c 7475 706c 652c 7374 722c 6469 6374  t,tuple,str,dict
-00006710: 0a20 2020 2064 6566 6175 6c74 2020 203a  .    default   :
-00006720: 2069 6620 7772 6f6e 6720 6f72 2065 7272   if wrong or err
-00006730: 6f72 2074 6865 6e20 7265 7475 726e 2064  or then return d
-00006740: 6566 6175 6c74 0a20 2020 2065 7272 203a  efault.    err :
-00006750: 2064 6566 6175 6c74 2046 616c 7365 0a20   default False. 
-00006760: 2020 2020 2020 2046 616c 7365 3a20 6669         False: fi
-00006770: 7869 6e67 2069 6e64 6578 2074 6f20 636f  xing index to co
-00006780: 7272 6563 7469 6e67 2069 6e64 6578 2077  rrecting index w
-00006790: 6974 686f 7574 2065 7272 6f72 0a20 2020  ithout error.   
-000067a0: 2020 2020 2054 7275 653a 2069 6620 7772       True: if wr
-000067b0: 6f6e 6720 696e 6465 7820 7468 656e 2072  ong index then r
-000067c0: 6574 7572 6e20 6465 6661 756c 7420 7661  eturn default va
-000067d0: 6c75 650a 2020 2020 2727 270a 2020 2020  lue.    '''.    
-000067e0: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
-000067f0: 632c 286c 6973 742c 7475 706c 652c 7374  c,(list,tuple,st
-00006800: 722c 6469 6374 2929 2061 6e64 2069 7369  r,dict)) and isi
-00006810: 6e73 7461 6e63 6528 6964 782c 696e 7429  nstance(idx,int)
-00006820: 3a0a 2020 2020 2020 2020 6966 2069 6478  :.        if idx
-00006830: 203c 2030 3a0a 2020 2020 2020 2020 2020   < 0:.          
-00006840: 2020 6966 206c 656e 2873 7263 2920 3e20    if len(src) > 
-00006850: 6162 7328 6964 7829 3a0a 2020 2020 2020  abs(idx):.      
-00006860: 2020 2020 2020 2020 2020 6964 783d 6c65            idx=le
-00006870: 6e28 7372 6329 2d61 6273 2869 6478 290a  n(src)-abs(idx).
-00006880: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00006890: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000068a0: 2020 6966 2065 7272 3a20 7265 7475 726e    if err: return
-000068b0: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
-000068c0: 2020 2020 2020 2020 2069 6478 3d30 0a20           idx=0. 
-000068d0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000068e0: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-000068f0: 7372 6329 203c 3d20 6964 783a 0a20 2020  src) <= idx:.   
-00006900: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00006910: 6572 723a 2072 6574 7572 6e20 6465 6661  err: return defa
-00006920: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
-00006930: 2020 2020 6964 783d 6c65 6e28 7372 6329      idx=len(src)
-00006940: 2d31 0a20 2020 2020 2020 2072 6574 7572  -1.        retur
-00006950: 6e20 6964 780a 2020 2020 7265 7475 726e  n idx.    return
-00006960: 2064 6566 6175 6c74 0a0a 0a64 6566 204e   default...def N
-00006970: 6578 7428 7372 632c 7374 6570 3d30 2c6f  ext(src,step=0,o
-00006980: 7574 3d4e 6f6e 652c 6465 6661 756c 743d  ut=None,default=
-00006990: 276f 7267 2729 3a0a 2020 2020 2727 270a  'org'):.    '''.
-000069a0: 2020 2020 4765 7420 4e65 7874 2064 6174      Get Next dat
-000069b0: 6120 6f72 2066 6972 7374 206b 6579 206f  a or first key o
-000069c0: 6620 7468 6520 6469 6374 200a 2020 2020  f the dict .    
-000069d0: 2727 270a 2020 2020 6966 2069 7369 6e73  '''.    if isins
-000069e0: 7461 6e63 6528 7372 632c 286c 6973 742c  tance(src,(list,
-000069f0: 7475 706c 652c 6469 6374 2929 3a0a 2020  tuple,dict)):.  
-00006a00: 2020 2020 2020 7374 6570 3d46 6978 496e        step=FixIn
-00006a10: 6465 7828 7372 632c 7374 6570 2c64 6566  dex(src,step,def
-00006a20: 6175 6c74 3d30 290a 2020 2020 2020 2020  ault=0).        
-00006a30: 6974 6572 6174 6f72 3d69 7465 7228 7372  iterator=iter(sr
-00006a40: 6329 0a20 2020 2020 2020 2066 6f72 2069  c).        for i
-00006a50: 2069 6e20 7261 6e67 6528 2d31 2c73 7465   in range(-1,ste
-00006a60: 7029 3a0a 2020 2020 2020 2020 2020 2020  p):.            
-00006a70: 7274 3d6e 6578 7428 6974 6572 6174 6f72  rt=next(iterator
-00006a80: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00006a90: 2072 740a 2020 2020 656c 6966 2069 7369   rt.    elif isi
-00006aa0: 6e73 7461 6e63 6528 7372 632c 7374 7229  nstance(src,str)
-00006ab0: 3a0a 2020 2020 2020 2020 7374 6570 3d46  :.        step=F
-00006ac0: 6978 496e 6465 7828 7372 632c 7374 6570  ixIndex(src,step
-00006ad0: 2c64 6566 6175 6c74 3d30 290a 2020 2020  ,default=0).    
-00006ae0: 2020 2020 6966 206c 656e 2873 7263 2920      if len(src) 
-00006af0: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
-00006b00: 2020 7265 7475 726e 2027 270a 2020 2020    return ''.    
-00006b10: 2020 2020 656c 6966 206c 656e 2873 7263      elif len(src
-00006b20: 2920 3e3d 2030 206f 7220 6c65 6e28 7372  ) >= 0 or len(sr
-00006b30: 6329 203c 3d20 7374 6570 3a0a 2020 2020  c) <= step:.    
-00006b40: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00006b50: 7263 5b73 7465 705d 0a20 2020 2072 6574  rc[step].    ret
-00006b60: 7572 6e20 4465 6661 756c 7428 7372 632c  urn Default(src,
-00006b70: 6465 6661 756c 7429 0a0a 6465 6620 436f  default)..def Co
-00006b80: 7079 2873 7263 2c64 6565 703d 4661 6c73  py(src,deep=Fals
-00006b90: 6529 3a0a 2020 2020 2727 270a 2020 2020  e):.    '''.    
-00006ba0: 436f 7079 2064 6174 6120 0a20 2020 2027  Copy data .    '
-00006bb0: 2727 0a20 2020 2069 6620 6973 696e 7374  ''.    if isinst
-00006bc0: 616e 6365 2873 7263 2c28 6c69 7374 2c74  ance(src,(list,t
-00006bd0: 7570 6c65 2929 3a20 7265 7475 726e 2073  uple)): return s
-00006be0: 7263 5b3a 5d0a 2020 2020 6966 2069 7369  rc[:].    if isi
-00006bf0: 6e73 7461 6e63 6528 7372 632c 6469 6374  nstance(src,dict
-00006c00: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00006c10: 6e20 636f 7079 2e64 6565 7063 6f70 7928  n copy.deepcopy(
-00006c20: 7372 6329 2069 6620 6465 6570 2065 6c73  src) if deep els
-00006c30: 6520 7372 632e 636f 7079 2829 0a20 2020  e src.copy().   
-00006c40: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-00006c50: 7263 2c73 7472 293a 2072 6574 7572 6e20  rc,str): return 
-00006c60: 277b 7d27 2e66 6f72 6d61 7428 7372 6329  '{}'.format(src)
-00006c70: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
-00006c80: 6365 2873 7263 2c62 6f6f 6c29 3a20 7265  ce(src,bool): re
-00006c90: 7475 726e 2073 7263 0a20 2020 2069 6620  turn src.    if 
-00006ca0: 6973 696e 7374 616e 6365 2873 7263 2c69  isinstance(src,i
-00006cb0: 6e74 293a 2072 6574 7572 6e20 696e 7428  nt): return int(
-00006cc0: 277b 7d27 2e66 6f72 6d61 7428 7372 6329  '{}'.format(src)
-00006cd0: 290a 2020 2020 6966 2069 7369 6e73 7461  ).    if isinsta
-00006ce0: 6e63 6528 7372 632c 666c 6f61 7429 3a20  nce(src,float): 
-00006cf0: 7265 7475 726e 2066 6c6f 6174 2827 7b7d  return float('{}
-00006d00: 272e 666f 726d 6174 2873 7263 2929 0a20  '.format(src)). 
-00006d10: 2020 2069 6620 5079 5665 7228 3229 3a0a     if PyVer(2):.
-00006d20: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00006d30: 7461 6e63 6528 7372 632c 6c6f 6e67 293a  tance(src,long):
-00006d40: 2072 6574 7572 6e20 6c6f 6e67 2827 7b7d   return long('{}
-00006d50: 272e 666f 726d 6174 2873 7263 2929 0a20  '.format(src)). 
-00006d60: 2020 2072 6574 7572 6e20 7372 630a 0a64     return src..d
-00006d70: 6566 2049 6e73 6572 7428 7372 632c 2a69  ef Insert(src,*i
-00006d80: 6e70 732c 2a2a 6f70 7473 293a 0a20 2020  nps,**opts):.   
-00006d90: 2027 2727 0a20 2020 2073 7263 2069 7320   '''.    src is 
-00006da0: 6469 6374 2074 6865 6e20 7361 6d65 2061  dict then same a
-00006db0: 7320 496e 7365 7274 2061 6e64 2055 7064  s Insert and Upd
-00006dc0: 6174 650a 2020 2020 7372 6320 6973 206c  ate.    src is l
-00006dd0: 6973 742c 7475 706c 652c 7374 7220 7468  ist,tuple,str th
-00006de0: 656e 2069 6e73 6572 7420 6461 7461 2061  en insert data a
-00006df0: 7420 2761 7427 0a20 2020 2061 7420 3a20  t 'at'.    at : 
-00006e00: 0a20 2020 2020 2073 7263 2069 7320 6c69  .      src is li
-00006e10: 7374 2c74 7570 6c65 2c73 7472 2074 6865  st,tuple,str the
-00006e20: 6e20 6e75 6d62 6572 0a20 2020 2020 2073  n number.      s
-00006e30: 7263 2069 7320 6469 6374 2074 6865 6e20  rc is dict then 
-00006e40: 7061 7468 2028 2f61 2f62 2f63 290a 2020  path (/a/b/c).  
-00006e50: 2020 756e 6971 3a20 7372 6320 6973 206c    uniq: src is l
-00006e60: 6973 7420 2c74 7570 6c65 2074 6865 6e20  ist ,tuple then 
-00006e70: 6d61 6b65 2074 6f20 756e 6971 2064 6174  make to uniq dat
-00006e80: 610a 2020 2020 6572 7220 6973 2054 7275  a.    err is Tru
-00006e90: 6520 7468 656e 2c20 6966 2061 6e79 2069  e then, if any i
-00006ea0: 7373 7565 2074 6865 6e20 7265 7475 726e  ssue then return
-00006eb0: 2064 6566 6175 6c74 2076 616c 7565 2c20   default value, 
-00006ec0: 4661 6c73 6520 7468 656e 2069 676e 6f72  False then ignor
-00006ed0: 650a 2020 2020 2727 270a 2020 2020 6174  e.    '''.    at
-00006ee0: 3d6f 7074 732e 706f 7028 2761 7427 2c30  =opts.pop('at',0
-00006ef0: 290a 2020 2020 6465 6661 756c 743d 6f70  ).    default=op
-00006f00: 7473 2e70 6f70 2827 6465 6661 756c 7427  ts.pop('default'
-00006f10: 2c46 616c 7365 290a 2020 2020 6572 723d  ,False).    err=
-00006f20: 6f70 7473 2e70 6f70 2827 6572 7227 2c46  opts.pop('err',F
-00006f30: 616c 7365 290a 2020 2020 666f 7263 653d  alse).    force=
-00006f40: 6f70 7473 2e70 6f70 2827 666f 7263 6527  opts.pop('force'
-00006f50: 2c46 616c 7365 290a 2020 2020 756e 6971  ,False).    uniq
-00006f60: 3d6f 7074 732e 706f 7028 2775 6e69 7127  =opts.pop('uniq'
-00006f70: 2c46 616c 7365 290a 2020 2020 6966 2069  ,False).    if i
-00006f80: 7369 6e73 7461 6e63 6528 7372 632c 286c  sinstance(src,(l
-00006f90: 6973 742c 7475 706c 652c 7374 7229 293a  ist,tuple,str)):
-00006fa0: 0a20 2020 2020 2020 2074 7570 6c65 5f6f  .        tuple_o
-00006fb0: 7574 3d46 616c 7365 0a20 2020 2020 2020  ut=False.       
-00006fc0: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-00006fd0: 7263 2c74 7570 6c65 2920 616e 6420 666f  rc,tuple) and fo
-00006fe0: 7263 653a 0a20 2020 2020 2020 2020 2020  rce:.           
-00006ff0: 2073 7263 3d6c 6973 7428 7372 6329 0a20   src=list(src). 
-00007000: 2020 2020 2020 2020 2020 2074 7570 6c65             tuple
-00007010: 5f6f 7574 3d54 7275 650a 2020 2020 2020  _out=True.      
-00007020: 2020 6966 2075 6e69 713a 2069 6e70 733d    if uniq: inps=
-00007030: 7475 706c 6528 7365 7428 696e 7073 2929  tuple(set(inps))
-00007040: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00007050: 7374 616e 6365 2861 742c 7374 7229 3a0a  stance(at,str):.
-00007060: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-00007070: 7420 696e 205b 2773 7461 7274 272c 2766  t in ['start','f
-00007080: 6972 7374 275d 3a20 7372 633d 6c69 7374  irst']: src=list
-00007090: 2869 6e70 7329 2b73 7263 0a20 2020 2020  (inps)+src.     
-000070a0: 2020 2020 2020 2065 6c69 6620 6174 2069         elif at i
-000070b0: 6e20 5b27 656e 6427 2c27 6c61 7374 275d  n ['end','last']
-000070c0: 3a20 7372 633d 7372 632b 6c69 7374 2869  : src=src+list(i
-000070d0: 6e70 7329 0a20 2020 2020 2020 2065 6c69  nps).        eli
-000070e0: 6620 6c65 6e28 7372 6329 203d 3d20 303a  f len(src) == 0:
-000070f0: 0a20 2020 2020 2020 2020 2020 2073 7263  .            src
-00007100: 3d6c 6973 7428 696e 7073 290a 2020 2020  =list(inps).    
-00007110: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00007120: 6e63 6528 6174 2c69 6e74 2920 616e 6420  nce(at,int) and 
-00007130: 6e6f 7420 6973 696e 7374 616e 6365 2861  not isinstance(a
-00007140: 742c 626f 6f6c 2920 616e 6420 6c65 6e28  t,bool) and len(
-00007150: 7372 6329 203e 2061 743a 0a20 2020 2020  src) > at:.     
-00007160: 2020 2020 2020 2073 7263 3d73 7263 5b3a         src=src[:
-00007170: 6174 5d2b 6c69 7374 2869 6e70 7329 2b73  at]+list(inps)+s
-00007180: 7263 5b61 743a 5d0a 2020 2020 2020 2020  rc[at:].        
-00007190: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000071a0: 2020 6966 2065 7272 3a0a 2020 2020 2020    if err:.      
-000071b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000071c0: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
-000071d0: 2020 2020 2073 7263 3d73 7263 2b6c 6973       src=src+lis
-000071e0: 7428 696e 7073 290a 2020 2020 2020 2020  t(inps).        
-000071f0: 6966 2074 7570 6c65 5f6f 7574 3a20 7265  if tuple_out: re
-00007200: 7475 726e 2074 7570 6c65 2873 7263 290a  turn tuple(src).
-00007210: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00007220: 6e63 6528 7372 632c 6469 6374 293a 0a20  nce(src,dict):. 
-00007230: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00007240: 616e 6365 2861 742c 7374 7229 3a0a 2020  ance(at,str):.  
-00007250: 2020 2020 2020 2020 2020 6174 5f61 3d61            at_a=a
-00007260: 742e 7370 6c69 7428 272f 2729 0a20 2020  t.split('/').   
-00007270: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
-00007280: 6e20 6174 5f61 3a0a 2020 2020 2020 2020  n at_a:.        
-00007290: 2020 2020 2020 2020 6966 2069 2069 6e20          if i in 
-000072a0: 7372 633a 0a20 2020 2020 2020 2020 2020  src:.           
-000072b0: 2020 2020 2020 2020 2073 7263 3d73 7263           src=src
-000072c0: 5b69 5d0a 2020 2020 2020 2020 2020 2020  [i].            
-000072d0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000072e0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-000072f0: 696e 7428 274b 4559 287b 7d20 6f66 2061  int('KEY({} of a
-00007300: 7428 7b7d 2929 206e 6f74 2066 6f75 6e64  t({})) not found
-00007310: 2069 6e20 736f 7572 6365 272e 666f 726d   in source'.form
-00007320: 6174 2861 742c 6929 290a 2020 2020 2020  at(at,i)).      
-00007330: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00007340: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
-00007350: 2020 2066 6f72 2069 6920 696e 2069 6e70     for ii in inp
-00007360: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
-00007370: 6620 6973 696e 7374 616e 6365 2869 692c  f isinstance(ii,
-00007380: 6469 6374 293a 0a20 2020 2020 2020 2020  dict):.         
-00007390: 2020 2020 2020 2020 7372 632e 7570 6461          src.upda
-000073a0: 7465 2869 6929 0a20 2020 2020 2020 2069  te(ii).        i
-000073b0: 6620 6f70 7473 3a0a 2020 2020 2020 2020  f opts:.        
-000073c0: 2020 2020 7372 632e 7570 6461 7465 286f      src.update(o
-000073d0: 7074 7329 0a20 2020 2072 6574 7572 6e20  pts).    return 
-000073e0: 7372 630a 0a64 6566 2055 7064 6174 6528  src..def Update(
-000073f0: 7372 632c 2a69 6e70 732c 2a2a 6f70 7473  src,*inps,**opts
-00007400: 293a 0a20 2020 2027 2727 0a20 2020 2073  ):.    '''.    s
-00007410: 7263 2069 7320 6469 6374 2074 6865 6e20  rc is dict then 
-00007420: 7361 6d65 2061 7320 496e 7365 7274 2061  same as Insert a
-00007430: 6e64 2055 7064 6174 650a 2020 2020 7372  nd Update.    sr
-00007440: 6320 6973 206c 6973 742c 7475 706c 652c  c is list,tuple,
-00007450: 7374 7220 7468 656e 2072 6570 6c61 6365  str then replace
-00007460: 2064 6174 6120 6174 2027 6174 270a 2020   data at 'at'.  
-00007470: 2020 6174 203a 200a 2020 2020 2020 7372    at : .      sr
-00007480: 6320 6973 206c 6973 742c 7475 706c 652c  c is list,tuple,
-00007490: 7374 7220 7468 656e 206e 756d 6265 720a  str then number.
-000074a0: 2020 2020 2020 7372 6320 6973 2064 6963        src is dic
-000074b0: 7420 7468 656e 2070 6174 6820 282f 612f  t then path (/a/
-000074c0: 622f 6329 0a20 2020 2065 7272 2069 7320  b/c).    err is 
-000074d0: 5472 7565 2074 6865 6e2c 2069 6620 616e  True then, if an
-000074e0: 7920 6973 7375 6520 7468 656e 2072 6574  y issue then ret
-000074f0: 7572 6e20 6465 6661 756c 7420 7661 6c75  urn default valu
-00007500: 652c 2046 616c 7365 2074 6865 6e20 6967  e, False then ig
-00007510: 6e6f 7265 0a20 2020 2073 796d 2066 6f72  nore.    sym for
-00007520: 2073 7263 2069 7320 7374 7269 6e67 2873   src is string(s
-00007530: 7472 292e 2073 706c 6974 2073 7263 2077  tr). split src w
-00007540: 6974 6820 7379 6d0a 2020 2020 2727 270a  ith sym.    '''.
-00007550: 2020 2020 6174 3d6f 7074 732e 706f 7028      at=opts.pop(
-00007560: 2761 7427 2c30 290a 2020 2020 6572 723d  'at',0).    err=
-00007570: 6f70 7473 2e70 6f70 2827 6572 7227 2c46  opts.pop('err',F
-00007580: 616c 7365 290a 2020 2020 6465 6661 756c  alse).    defaul
-00007590: 743d 6f70 7473 2e70 6f70 2827 6465 6661  t=opts.pop('defa
-000075a0: 756c 7427 2c46 616c 7365 290a 2020 2020  ult',False).    
-000075b0: 666f 7263 653d 6f70 7473 2e70 6f70 2827  force=opts.pop('
-000075c0: 666f 7263 6527 2c46 616c 7365 290a 2020  force',False).  
-000075d0: 2020 7379 6d3d 6f70 7473 2e70 6f70 2827    sym=opts.pop('
-000075e0: 7379 6d27 2c4e 6f6e 6529 0a20 2020 2069  sym',None).    i
-000075f0: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-00007600: 2c28 6c69 7374 2c74 7570 6c65 2c73 7472  ,(list,tuple,str
-00007610: 2929 3a0a 2020 2020 2020 2020 6966 2069  )):.        if i
-00007620: 7369 6e73 7461 6e63 6528 7372 632c 7374  sinstance(src,st
-00007630: 7229 2061 6e64 2073 796d 3a20 7372 633d  r) and sym: src=
-00007640: 7372 632e 7370 6c69 7428 7379 6d29 0a20  src.split(sym). 
-00007650: 2020 2020 2020 2074 7570 6c65 5f6f 7574         tuple_out
-00007660: 3d46 616c 7365 0a20 2020 2020 2020 2069  =False.        i
-00007670: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-00007680: 2c74 7570 6c65 2920 616e 6420 666f 7263  ,tuple) and forc
-00007690: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-000076a0: 7263 3d6c 6973 7428 7372 6329 0a20 2020  rc=list(src).   
-000076b0: 2020 2020 2020 2020 2074 7570 6c65 5f6f           tuple_o
-000076c0: 7574 3d54 7275 650a 2020 2020 2020 2020  ut=True.        
-000076d0: 6e3d 6c65 6e28 7372 6329 0a20 2020 2020  n=len(src).     
-000076e0: 2020 2069 6620 6e20 3d3d 2030 3a0a 2020     if n == 0:.  
-000076f0: 2020 2020 2020 2020 2020 6966 2065 7272            if err
-00007700: 2069 7320 5472 7565 3a0a 2020 2020 2020   is True:.      
-00007710: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00007720: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
-00007730: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00007740: 2020 2020 2020 2020 2020 2073 7263 3d6c             src=l
-00007750: 6973 7428 696e 7073 290a 2020 2020 2020  ist(inps).      
-00007760: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-00007770: 6528 6174 2c69 6e74 2920 616e 6420 6e20  e(at,int) and n 
-00007780: 3e20 6174 3a0a 2020 2020 2020 2020 2020  > at:.          
-00007790: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-000077a0: 2830 2c6c 656e 2869 6e70 7329 293a 0a20  (0,len(inps)):. 
-000077b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000077c0: 6620 6e20 3e20 6174 2b69 3a0a 2020 2020  f n > at+i:.    
-000077d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077e0: 7372 635b 6174 2b69 5d3d 696e 7073 5b69  src[at+i]=inps[i
-000077f0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00007800: 2020 656c 6966 2065 7272 2069 7320 5472    elif err is Tr
-00007810: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-00007820: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-00007830: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
-00007840: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00007850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007860: 2073 7263 3d73 7263 2b6c 6973 7428 696e   src=src+list(in
-00007870: 7073 295b 693a 5d0a 2020 2020 2020 2020  ps)[i:].        
-00007880: 2020 2020 2020 2020 2020 2020 6272 6561              brea
-00007890: 6b0a 2020 2020 2020 2020 656c 6966 2069  k.        elif i
-000078a0: 7369 6e73 7461 6e63 6528 6174 2c28 7475  sinstance(at,(tu
-000078b0: 706c 652c 6c69 7374 2929 3a0a 2020 2020  ple,list)):.    
-000078c0: 2020 2020 2020 2020 6966 206c 656e 2869          if len(i
-000078d0: 6e70 7329 203d 3d20 6c65 6e28 6174 293a  nps) == len(at):
-000078e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000078f0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-00007900: 302c 6c65 6e28 6174 2929 3a0a 2020 2020  0,len(at)):.    
-00007910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007920: 6966 2069 7369 6e73 7461 6e63 6528 6174  if isinstance(at
-00007930: 5b69 5d2c 696e 7429 2061 6e64 206e 203e  [i],int) and n >
-00007940: 2061 745b 695d 3a0a 2020 2020 2020 2020   at[i]:.        
-00007950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007960: 7372 635b 6174 5b69 5d5d 3d69 6e70 735b  src[at[i]]=inps[
-00007970: 695d 0a20 2020 2020 2020 2020 2020 2020  i].             
-00007980: 2020 2020 2020 2065 6c69 6620 6572 7220         elif err 
-00007990: 6973 2054 7275 653a 0a20 2020 2020 2020  is True:.       
-000079a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000079b0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-000079c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000079d0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000079e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000079f0: 2020 7372 632e 6170 7065 6e64 2869 6e70    src.append(inp
-00007a00: 735b 695d 290a 2020 2020 2020 2020 6966  s[i]).        if
-00007a10: 2074 7570 6c65 5f6f 7574 3a20 7265 7475   tuple_out: retu
-00007a20: 726e 2074 7570 6c65 2873 7263 290a 2020  rn tuple(src).  
-00007a30: 2020 2020 2020 7265 7475 726e 2073 7263        return src
-00007a40: 0a20 2020 2065 6c69 6620 6973 696e 7374  .    elif isinst
-00007a50: 616e 6365 2873 7263 2c64 6963 7429 3a0a  ance(src,dict):.
-00007a60: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00007a70: 7461 6e63 6528 6174 2c73 7472 293a 0a20  tance(at,str):. 
-00007a80: 2020 2020 2020 2020 2020 2061 745f 613d             at_a=
-00007a90: 6174 2e73 706c 6974 2827 2f27 290a 2020  at.split('/').  
-00007aa0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-00007ab0: 696e 2061 745f 613a 0a20 2020 2020 2020  in at_a:.       
-00007ac0: 2020 2020 2020 2020 2069 6620 6920 696e           if i in
-00007ad0: 2073 7263 3a0a 2020 2020 2020 2020 2020   src:.          
-00007ae0: 2020 2020 2020 2020 2020 7372 633d 7372            src=sr
-00007af0: 635b 695d 0a20 2020 2020 2020 2020 2020  c[i].           
-00007b00: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00007b10: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00007b20: 7269 6e74 2827 4b45 5928 7b7d 206f 6620  rint('KEY({} of 
-00007b30: 6174 287b 7d29 2920 6e6f 7420 666f 756e  at({})) not foun
-00007b40: 6420 696e 2073 6f75 7263 6527 2e66 6f72  d in source'.for
-00007b50: 6d61 7428 6174 2c69 2929 0a20 2020 2020  mat(at,i)).     
-00007b60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00007b70: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-00007b80: 2020 2020 666f 7220 6969 2069 6e20 696e      for ii in in
-00007b90: 7073 3a0a 2020 2020 2020 2020 2020 2069  ps:.           i
-00007ba0: 6620 6973 696e 7374 616e 6365 2869 692c  f isinstance(ii,
-00007bb0: 6469 6374 293a 0a20 2020 2020 2020 2020  dict):.         
-00007bc0: 2020 2020 2020 7372 632e 7570 6461 7465        src.update
-00007bd0: 2869 6929 0a20 2020 2020 2020 2069 6620  (ii).        if 
-00007be0: 6f70 7473 3a0a 2020 2020 2020 2020 2020  opts:.          
-00007bf0: 2073 7263 2e75 7064 6174 6528 6f70 7473   src.update(opts
-00007c00: 290a 2020 2020 7265 7475 726e 2073 7263  ).    return src
-00007c10: 0a0a 6465 6620 5479 7065 4e61 6d65 286f  ..def TypeName(o
-00007c20: 626a 293a 0a20 2020 2027 2727 0a20 2020  bj):.    '''.   
-00007c30: 2047 6574 2069 6e70 7574 2773 2054 7970   Get input's Typ
-00007c40: 652c 496e 7374 616e 6365 2773 206e 616d  e,Instance's nam
-00007c50: 650a 2020 2020 2727 270a 2020 2020 6f62  e.    '''.    ob
-00007c60: 6a5f 6469 723d 6469 7228 6f62 6a29 0a20  j_dir=dir(obj). 
-00007c70: 2020 206f 626a 5f6e 616d 653d 7479 7065     obj_name=type
-00007c80: 286f 626a 292e 5f5f 6e61 6d65 5f5f 0a20  (obj).__name__. 
-00007c90: 2020 2069 6620 6f62 6a5f 6e61 6d65 2069     if obj_name i
-00007ca0: 6e20 5b27 6675 6e63 7469 6f6e 272c 2749  n ['function','I
-00007cb0: 6d6d 7574 6162 6c65 4d75 6c74 6944 6963  mmutableMultiDic
-00007cc0: 7427 5d3a 2072 6574 7572 6e20 6f62 6a5f  t']: return obj_
-00007cd0: 6e61 6d65 0a20 2020 2023 2053 7065 6369  name.    # Speci
-00007ce0: 616c 2054 7970 6520 6f66 2043 6c61 7373  al Type of Class
-00007cf0: 203a 2052 656d 6f76 6520 6163 636f 7264   : Remove accord
-00007d00: 696e 6720 746f 2062 656c 6f77 2063 6f64  ing to below cod
-00007d10: 650a 2020 2020 2365 6c69 6620 6f62 6a5f  e.    #elif obj_
-00007d20: 6e61 6d65 2069 6e20 5b27 6b44 6963 7427  name in ['kDict'
-00007d30: 2c27 6b4c 6973 7427 5d2b 5b6e 616d 6520  ,'kList']+[name 
-00007d40: 666f 7220 6e61 6d65 2c20 6f62 6a20 696e  for name, obj in
-00007d50: 2069 6e73 7065 6374 2e67 6574 6d65 6d62   inspect.getmemb
-00007d60: 6572 7328 7379 732e 6d6f 6475 6c65 735b  ers(sys.modules[
-00007d70: 5f5f 6e61 6d65 5f5f 5d29 2069 6620 696e  __name__]) if in
-00007d80: 7370 6563 742e 6973 636c 6173 7328 6f62  spect.isclass(ob
-00007d90: 6a29 5d3a 2023 2053 7065 6369 616c 2063  j)]: # Special c
-00007da0: 6173 6520 6e61 6d65 0a20 2020 2023 2020  ase name.    #  
-00007db0: 2020 7072 696e 7428 273e 3e3e 2054 7970    print('>>> Typ
-00007dc0: 654e 616d 6532 3a27 2c6f 626a 5f6e 616d  eName2:',obj_nam
-00007dd0: 652c 2027 3c3d 272c 206f 626a 290a 2020  e, '<=', obj).  
-00007de0: 2020 2320 2020 2072 6574 7572 6e20 6f62    #    return ob
-00007df0: 6a5f 6e61 6d65 0a20 2020 2065 6c69 6620  j_name.    elif 
-00007e00: 6f62 6a5f 6e61 6d65 2069 6e20 5b27 7374  obj_name in ['st
-00007e10: 7227 5d3a 0a20 2020 2020 2020 2023 7472  r']:.        #tr
-00007e20: 793a 0a20 2020 2020 2020 2023 2020 2020  y:.        #    
-00007e30: 6f62 6a5f 746d 703d 6576 616c 286f 626a  obj_tmp=eval(obj
-00007e40: 290a 2020 2020 2020 2020 2320 2020 2069  ).        #    i
-00007e50: 6620 7479 7065 286f 626a 5f74 6d70 292e  f type(obj_tmp).
-00007e60: 5f5f 6e61 6d65 5f5f 206e 6f74 2069 6e20  __name__ not in 
-00007e70: 5b27 6d6f 6475 6c65 272c 2763 6c61 7373  ['module','class
-00007e80: 6f62 6a27 2c27 6675 6e63 7469 6f6e 272c  obj','function',
-00007e90: 2772 6573 706f 6e73 6527 2c27 7265 7175  'response','requ
-00007ea0: 6573 7427 5d3a 0a20 2020 2020 2020 2023  est']:.        #
-00007eb0: 2020 2020 2020 2020 6f62 6a5f 6e61 6d65          obj_name
-00007ec0: 3d65 7661 6c28 6f62 6a29 2e5f 5f6e 616d  =eval(obj).__nam
-00007ed0: 655f 5f0a 2020 2020 2020 2020 2320 2020  e__.        #   
-00007ee0: 2020 2020 2069 6620 6f62 6a5f 6e61 6d65       if obj_name
-00007ef0: 2e6c 6f77 6572 2829 203d 3d20 6f62 6a2e  .lower() == obj.
-00007f00: 6c6f 7765 7228 293a 2072 6574 7572 6e20  lower(): return 
-00007f10: 6f62 6a2e 6c6f 7765 7228 290a 2020 2020  obj.lower().    
-00007f20: 2020 2020 2365 7863 6570 743a 0a20 2020      #except:.   
-00007f30: 2020 2020 2023 2020 2020 6966 206f 626a       #    if obj
-00007f40: 2e6c 6f77 6572 2829 2069 6e20 5b27 6d6f  .lower() in ['mo
-00007f50: 6475 6c65 272c 2763 6c61 7373 6f62 6a27  dule','classobj'
-00007f60: 2c27 6675 6e63 7469 6f6e 272c 2775 6e6b  ,'function','unk
-00007f70: 6e6f 776e 272c 2772 6573 706f 6e73 6527  nown','response'
-00007f80: 2c27 7265 7175 6573 7427 5d3a 0a20 2020  ,'request']:.   
-00007f90: 2020 2020 2023 2020 2020 2020 2020 7265       #        re
-00007fa0: 7475 726e 206f 626a 2e6c 6f77 6572 2829  turn obj.lower()
-00007fb0: 0a20 2020 2020 2020 2023 2020 2020 656c  .        #    el
-00007fc0: 6966 206f 626a 2069 6e20 5b27 6b44 6963  if obj in ['kDic
-00007fd0: 7427 2c27 6b4c 6973 7427 2c27 4449 4354  t','kList','DICT
-00007fe0: 275d 3a20 2320 5370 6563 6961 6c20 6361  ']: # Special ca
-00007ff0: 7365 206e 616d 650a 2020 2020 2020 2020  se name.        
-00008000: 2320 2020 2020 2020 2072 6574 7572 6e20  #        return 
-00008010: 6f62 6a0a 2020 2020 2020 2020 7265 7475  obj.        retu
-00008020: 726e 2027 7374 7227 0a20 2020 2069 6620  rn 'str'.    if 
-00008030: 275f 5f64 6963 745f 5f27 2069 6e20 6f62  '__dict__' in ob
-00008040: 6a5f 6469 723a 2023 2043 6c61 7373 204f  j_dir: # Class O
-00008050: 626a 6563 740a 2020 2020 2020 2020 2320  bject.        # 
-00008060: 5370 6563 6961 6c20 6361 7365 2043 6c61  Special case Cla
-00008070: 7373 3a20 7375 6220 636c 6173 7320 6672  ss: sub class fr
-00008080: 6f6d 2070 6172 656e 7420 636c 6173 7320  om parent class 
-00008090: 7468 656e 2072 6574 7572 6e20 7061 7265  then return pare
-000080a0: 6e74 2063 6c61 7373 2074 7970 650a 2020  nt class type.  
-000080b0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-000080c0: 2020 2020 2020 2023 2043 4e20 6361 7365         # CN case
-000080d0: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
-000080e0: 656e 745f 6e61 6d65 3d69 6e73 7065 6374  ent_name=inspect
-000080f0: 2e67 6574 6d72 6f28 6f62 6a29 5b31 5d2e  .getmro(obj)[1].
-00008100: 5f5f 6e61 6d65 5f5f 0a20 2020 2020 2020  __name__.       
-00008110: 2020 2020 2069 6620 7061 7265 6e74 5f6e       if parent_n
-00008120: 616d 6520 213d 2027 6f62 6a65 6374 273a  ame != 'object':
-00008130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008140: 2072 6574 7572 6e20 7061 7265 6e74 5f6e   return parent_n
-00008150: 616d 650a 2020 2020 2020 2020 6578 6365  ame.        exce
-00008160: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-00008170: 2320 434e 2829 2063 6173 650a 2020 2020  # CN() case.    
-00008180: 2020 2020 2020 2020 7061 7265 6e74 5f6e          parent_n
-00008190: 616d 653d 696e 7370 6563 742e 6765 746d  ame=inspect.getm
-000081a0: 726f 286f 626a 2e5f 5f63 6c61 7373 5f5f  ro(obj.__class__
-000081b0: 295b 315d 2e5f 5f6e 616d 655f 5f0a 2020  )[1].__name__.  
-000081c0: 2020 2020 2020 2020 2020 6966 2070 6172            if par
-000081d0: 656e 745f 6e61 6d65 2021 3d20 276f 626a  ent_name != 'obj
-000081e0: 6563 7427 3a0a 2020 2020 2020 2020 2020  ect':.          
-000081f0: 2020 2020 2020 7265 7475 726e 2070 6172        return par
-00008200: 656e 745f 6e61 6d65 0a20 2020 2020 2020  ent_name.       
-00008210: 2069 6620 6f62 6a5f 6e61 6d65 203d 3d20   if obj_name == 
-00008220: 2774 7970 6527 3a20 7265 7475 726e 2027  'type': return '
-00008230: 636c 6173 736f 626a 270a 2020 2020 2020  classobj'.      
-00008240: 2020 6966 206f 626a 5f6e 616d 6520 3d3d    if obj_name ==
-00008250: 2027 5265 7370 6f6e 7365 273a 2072 6574   'Response': ret
-00008260: 7572 6e20 2772 6573 706f 6e73 6527 0a20  urn 'response'. 
-00008270: 2020 2020 2020 2069 6620 6f62 6a5f 6e61         if obj_na
-00008280: 6d65 203d 3d20 2752 6571 7565 7374 273a  me == 'Request':
-00008290: 2072 6574 7572 6e20 2772 6571 7565 7374   return 'request
-000082a0: 270a 2020 2020 2020 2020 7265 7475 726e  '.        return
-000082b0: 2027 696e 7374 616e 6365 270a 2020 2020   'instance'.    
-000082c0: 2369 6620 696e 7370 6563 742e 6973 636c  #if inspect.iscl
-000082d0: 6173 7328 6f62 6a29 3a20 7265 7475 726e  ass(obj): return
-000082e0: 2027 636c 6173 736f 626a 270a 2020 2020   'classobj'.    
-000082f0: 7472 793a 0a20 2020 2020 2020 2069 6620  try:.        if 
-00008300: 6f62 6a5f 6e61 6d65 203d 3d20 2774 7970  obj_name == 'typ
-00008310: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
-00008320: 7265 7475 726e 206f 626a 2e5f 5f6e 616d  return obj.__nam
-00008330: 655f 5f0a 2020 2020 2020 2020 7265 7475  e__.        retu
-00008340: 726e 206f 626a 5f6e 616d 652e 6c6f 7765  rn obj_name.lowe
-00008350: 7228 2920 2320 4f62 6a65 6374 204e 616d  r() # Object Nam
-00008360: 650a 2020 2020 6578 6365 7074 3a0a 2020  e.    except:.  
-00008370: 2020 2020 2020 7265 7475 726e 2027 756e        return 'un
-00008380: 6b6e 6f77 6e27 0a0a 6465 6620 5479 7065  known'..def Type
-00008390: 282a 696e 7073 2c2a 2a6f 7074 7329 3a0a  (*inps,**opts):.
-000083a0: 2020 2020 2727 270a 2020 2020 5369 6d69      '''.    Simi
-000083b0: 6c61 7220 6173 2069 7369 6e73 7461 6e63  lar as isinstanc
-000083c0: 6528 412c 2829 290a 2020 2020 7375 7070  e(A,()).    supp
-000083d0: 6f72 7420 3a20 6261 7369 6320 7479 7065  ort : basic type
-000083e0: 2061 6e64 2028 2762 7974 6527 2c27 6279   and ('byte','by
-000083f0: 7465 7327 292c 2827 6f62 6a27 2c27 6f62  tes'),('obj','ob
-00008400: 6a65 6374 2729 2c28 2766 756e 6327 2c27  ject'),('func','
-00008410: 756e 626f 756e 646d 6574 686f 6427 2c27  unboundmethod','
-00008420: 6675 6e63 7469 6f6e 2729 2c28 2763 6c61  function'),('cla
-00008430: 7373 6f62 6a27 2c27 636c 6173 7327 292c  ssobj','class'),
-00008440: 2767 656e 6572 6174 6f72 272c 276d 6574  'generator','met
-00008450: 686f 6427 2c27 6c6f 6e67 272c 2e2e 2e2e  hod','long',....
-00008460: 0a20 2020 2027 2727 0a20 2020 2064 6566  .    '''.    def
-00008470: 204e 616d 6546 6978 2869 293a 0a20 2020   NameFix(i):.   
-00008480: 2020 2020 2069 6620 6920 3d3d 2073 7472       if i == str
-00008490: 3a20 7265 7475 726e 2027 7374 7227 0a20  : return 'str'. 
-000084a0: 2020 2020 2020 2069 6620 6920 696e 205b         if i in [
-000084b0: 2762 7974 6527 2c27 6279 7465 7327 5d3a  'byte','bytes']:
-000084c0: 2072 6574 7572 6e20 2762 7974 6573 270a   return 'bytes'.
-000084d0: 2020 2020 2020 2020 6966 2069 2069 6e20          if i in 
-000084e0: 5b27 6f62 6a27 2c27 6f62 6a65 6374 275d  ['obj','object']
-000084f0: 3a20 7265 7475 726e 2027 6f62 6a65 6374  : return 'object
-00008500: 270a 2020 2020 2020 2020 6966 2069 2069  '.        if i i
-00008510: 6e20 5b27 6675 6e63 272c 2775 6e62 6f75  n ['func','unbou
-00008520: 6e64 6d65 7468 6f64 275d 3a20 7265 7475  ndmethod']: retu
-00008530: 726e 2027 6675 6e63 7469 6f6e 270a 2020  rn 'function'.  
-00008540: 2020 2020 2020 6966 2069 2069 6e20 5b27        if i in ['
-00008550: 636c 6173 7327 2c27 636c 6173 736f 626a  class','classobj
-00008560: 275d 3a20 7265 7475 726e 2027 636c 6173  ']: return 'clas
-00008570: 736f 626a 270a 2020 2020 2020 2020 6966  sobj'.        if
-00008580: 2069 2069 6e20 5b27 7969 656c 6427 2c27   i in ['yield','
-00008590: 6765 6e65 7261 746f 7227 5d3a 2072 6574  generator']: ret
-000085a0: 7572 6e20 2767 656e 6572 6174 6f72 270a  urn 'generator'.
-000085b0: 2020 2020 2020 2020 6966 2069 2069 6e20          if i in 
-000085c0: 5b27 6275 696c 7469 6e66 756e 6374 696f  ['builtinfunctio
-000085d0: 6e27 2c27 6275 696c 7469 6e6d 6574 686f  n','builtinmetho
-000085e0: 6427 2c27 6275 696c 7469 6e5f 6675 6e63  d','builtin_func
-000085f0: 7469 6f6e 5f6f 725f 6d65 7468 6f64 275d  tion_or_method']
-00008600: 3a20 7265 7475 726e 2027 6275 696c 7469  : return 'builti
-00008610: 6e5f 6675 6e63 7469 6f6e 5f6f 725f 6d65  n_function_or_me
-00008620: 7468 6f64 270a 2020 2020 2020 2020 2320  thod'.        # 
-00008630: 6675 6e63 7469 6f6e 3a20 6675 6e63 7469  function: functi
-00008640: 6f6e 2061 6e64 2069 6e73 7461 6e63 6527  on and instance'
-00008650: 7320 6675 6e63 7469 6f6e 2069 6e20 5079  s function in Py
-00008660: 7468 6f6e 330a 2020 2020 2020 2020 2320  thon3.        # 
-00008670: 6d65 7468 6f64 3a20 2063 6c61 7373 2773  method:  class's
-00008680: 2066 756e 6374 696f 6e20 696e 2050 7974   function in Pyt
-00008690: 686f 6e33 0a20 2020 2020 2020 2023 2069  hon3.        # i
-000086a0: 6e73 7461 6e63 656d 6574 686f 643a 2069  nstancemethod: i
-000086b0: 6e73 7461 6e63 6527 7320 616e 6420 636c  nstance's and cl
-000086c0: 6173 7327 7320 6675 6e63 7469 6f6e 2069  ass's function i
-000086d0: 6e20 5079 7468 6f6e 320a 2020 2020 2020  n Python2.      
-000086e0: 2020 6966 2069 2069 6e20 5b27 6d65 7468    if i in ['meth
-000086f0: 6f64 272c 2763 6c61 7373 6675 6e63 7469  od','classfuncti
-00008700: 6f6e 272c 2769 6e73 7461 6e63 656d 6574  on','instancemet
-00008710: 686f 6427 2c27 756e 626f 756e 646d 6574  hod','unboundmet
-00008720: 686f 6427 5d3a 2072 6574 7572 6e20 276d  hod']: return 'm
-00008730: 6574 686f 6427 0a20 2020 2020 2020 2023  ethod'.        #
-00008740: 2046 6978 2070 7974 686f 6e20 7665 7273   Fix python vers
-00008750: 696f 6e20 666f 7220 6c6f 6e67 0a20 2020  ion for long.   
-00008760: 2020 2020 2069 6620 6920 696e 205b 276c       if i in ['l
-00008770: 6f6e 6727 5d3a 0a20 2020 2020 2020 2020  ong']:.         
-00008780: 2020 2069 6620 5079 5665 7228 273e 272c     if PyVer('>',
-00008790: 3329 3a20 7265 7475 726e 2027 696e 7427  3): return 'int'
-000087a0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000087b0: 690a 2020 2020 696e 7073 5f6c 3d6c 656e  i.    inps_l=len
-000087c0: 2869 6e70 7329 0a20 2020 2069 6620 696e  (inps).    if in
-000087d0: 7073 5f6c 203d 3d20 303a 0a20 2020 2020  ps_l == 0:.     
-000087e0: 2020 2053 7464 4572 7228 276d 696e 696d     StdErr('minim
-000087f0: 756d 206f 7665 7220 3120 7265 7175 6972  um over 1 requir
-00008800: 656d 656e 7427 290a 2020 2020 2020 2020  ement').        
-00008810: 7265 7475 726e 0a20 2020 206f 626a 5f74  return.    obj_t
-00008820: 7970 653d 5479 7065 4e61 6d65 2869 6e70  ype=TypeName(inp
-00008830: 735b 305d 290a 2020 2020 6966 2069 6e70  s[0]).    if inp
-00008840: 735f 6c20 3d3d 2031 3a20 7265 7475 726e  s_l == 1: return
-00008850: 206f 626a 5f74 7970 650a 2020 2020 666f   obj_type.    fo
-00008860: 7220 6368 6563 6b20 696e 2069 6e70 735b  r check in inps[
-00008870: 313a 5d3a 0a20 2020 2020 2020 2069 6620  1:]:.        if 
-00008880: 6973 696e 7374 616e 6365 2863 6865 636b  isinstance(check
-00008890: 2c28 7475 706c 652c 6c69 7374 2929 3a0a  ,(tuple,list)):.
-000088a0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-000088b0: 6920 696e 2063 6865 636b 3a0a 2020 2020  i in check:.    
-000088c0: 2020 2020 2020 2020 2020 2020 2369 3d4e              #i=N
-000088d0: 616d 6546 6978 2869 290a 2020 2020 2020  ameFix(i).      
-000088e0: 2020 2020 2020 2020 2020 6368 6563 6b5f            check_
-000088f0: 7479 7065 3d54 7970 654e 616d 6528 6929  type=TypeName(i)
-00008900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008910: 2069 6620 6368 6563 6b5f 7479 7065 203d   if check_type =
-00008920: 3d20 2773 7472 273a 2063 6865 636b 5f74  = 'str': check_t
-00008930: 7970 653d 4e61 6d65 4669 7828 6929 0a20  ype=NameFix(i). 
-00008940: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00008950: 6368 6563 6b5f 7479 7065 3d69 2069 6620  check_type=i if 
-00008960: 6120 3d3d 2027 7374 7227 2065 6c73 6520  a == 'str' else 
-00008970: 610a 2020 2020 2020 2020 2020 2020 2020  a.              
-00008980: 2020 6966 206f 626a 5f74 7970 6520 3d3d    if obj_type ==
-00008990: 2063 6865 636b 5f74 7970 653a 0a20 2020   check_type:.   
-000089a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000089b0: 2069 6620 6f70 7473 2e67 6574 2827 6461   if opts.get('da
-000089c0: 7461 2729 3a0a 2020 2020 2020 2020 2020  ta'):.          
-000089d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000089e0: 2049 734e 6f6e 6528 696e 7073 5b30 5d29   IsNone(inps[0])
-000089f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00008a00: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00008a10: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
-00008a20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00008a30: 6574 7572 6e20 5472 7565 0a20 2020 2020  eturn True.     
-00008a40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00008a50: 2020 2020 2023 6368 6563 6b3d 4e61 6d65       #check=Name
-00008a60: 4669 7828 6368 6563 6b29 0a20 2020 2020  Fix(check).     
-00008a70: 2020 2020 2020 2063 6865 636b 5f74 7970         check_typ
-00008a80: 653d 5479 7065 4e61 6d65 2863 6865 636b  e=TypeName(check
-00008a90: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00008aa0: 2063 6865 636b 5f74 7970 6520 3d3d 2027   check_type == '
-00008ab0: 7374 7227 3a0a 2020 2020 2020 2020 2020  str':.          
-00008ac0: 2020 2020 2020 6368 6563 6b5f 7479 7065        check_type
-00008ad0: 3d4e 616d 6546 6978 2863 6865 636b 290a  =NameFix(check).
-00008ae0: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-00008af0: 626a 5f74 7970 6520 3d3d 2063 6865 636b  bj_type == check
-00008b00: 5f74 7970 653a 0a20 2020 2020 2020 2020  _type:.         
-00008b10: 2020 2020 2020 2069 6620 6f70 7473 2e67         if opts.g
-00008b20: 6574 2827 6461 7461 2729 3a0a 2020 2020  et('data'):.    
-00008b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b40: 6966 2049 734e 6f6e 6528 696e 7073 5b30  if IsNone(inps[0
-00008b50: 5d29 3a0a 2020 2020 2020 2020 2020 2020  ]):.            
-00008b60: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00008b70: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
-00008b80: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00008b90: 5472 7565 0a20 2020 2072 6574 7572 6e20  True.    return 
-00008ba0: 4661 6c73 650a 0a63 6c61 7373 2046 494e  False..class FIN
-00008bb0: 443a 0a20 2020 2027 2727 0a20 2020 2053  D:.    '''.    S
-00008bc0: 6561 7263 6869 6e67 2072 6567 756c 6172  earching regular
-00008bd0: 2065 7870 7265 7373 696f 6e20 666f 726d   expression form
-00008be0: 2064 6174 6120 616e 6420 7265 7475 726e   data and return
-00008bf0: 2074 6865 2064 6174 610a 2020 2020 2727   the data.    ''
-00008c00: 270a 2020 2020 6465 6620 5f5f 696e 6974  '.    def __init
-00008c10: 5f5f 2873 656c 662c 7372 633d 4e6f 6e65  __(self,src=None
-00008c20: 2c66 696e 643d 4e6f 6e65 2c6f 7574 3d27  ,find=None,out='
-00008c30: 696e 6465 7827 2c77 6f72 643d 4661 6c73  index',word=Fals
-00008c40: 6529 3a0a 2020 2020 2020 2020 7365 6c66  e):.        self
-00008c50: 2e73 7263 3d73 7263 0a20 2020 2020 2020  .src=src.       
-00008c60: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
-00008c70: 696e 642c 7374 7229 3a0a 2020 2020 2020  ind,str):.      
-00008c80: 2020 2020 2020 6669 6e64 3d66 696e 642e        find=find.
-00008c90: 7265 706c 6163 6528 272a 272c 272e 2b27  replace('*','.+'
-00008ca0: 292e 7265 706c 6163 6528 273f 272c 272e  ).replace('?','.
-00008cb0: 2729 0a20 2020 2020 2020 2020 2020 2069  ').            i
-00008cc0: 6620 776f 7264 3a0a 2020 2020 2020 2020  f word:.        
-00008cd0: 2020 2020 2020 2020 7365 6c66 2e66 696e          self.fin
-00008ce0: 645f 7265 3d72 652e 636f 6d70 696c 6528  d_re=re.compile(
-00008cf0: 7227 5c62 287b 307d 295c 6227 2e66 6f72  r'\b({0})\b'.for
-00008d00: 6d61 7428 6669 6e64 292c 666c 6167 733d  mat(find),flags=
-00008d10: 7265 2e49 474e 4f52 4543 4153 4529 0a20  re.IGNORECASE). 
-00008d20: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00008d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008d40: 2073 656c 662e 6669 6e64 5f72 653d 7265   self.find_re=re
-00008d50: 2e63 6f6d 7069 6c65 2866 696e 642c 666c  .compile(find,fl
-00008d60: 6167 733d 7265 2e49 474e 4f52 4543 4153  ags=re.IGNORECAS
-00008d70: 4529 0a20 2020 2020 2020 2073 656c 662e  E).        self.
-00008d80: 6669 6e64 3d66 696e 640a 2020 2020 2020  find=find.      
-00008d90: 2020 7365 6c66 2e6f 7574 3d6f 7574 0a0a    self.out=out..
-00008da0: 2020 2020 6465 6620 4672 6f6d 2873 656c      def From(sel
-00008db0: 662c 6461 7461 2c73 796d 626f 6c3d 275c  f,data,symbol='\
-00008dc0: 6e27 293a 0a20 2020 2020 2020 2072 743d  n'):.        rt=
-00008dd0: 5b5d 0a0a 2020 2020 2020 2020 6465 6620  []..        def 
-00008de0: 5365 6172 6368 2864 6174 612c 6b65 792c  Search(data,key,
-00008df0: 7274 293a 0a20 2020 2020 2020 2020 2020  rt):.           
-00008e00: 2066 6f75 6e64 3d73 656c 662e 6669 6e64   found=self.find
-00008e10: 5f72 652e 6669 6e64 616c 6c28 6461 7461  _re.findall(data
-00008e20: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00008e30: 2066 6f75 6e64 3a0a 2020 2020 2020 2020   found:.        
-00008e40: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00008e50: 6f75 7420 696e 205b 2766 6f75 6e64 275d  out in ['found']
-00008e60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00008e70: 2020 2020 2020 7274 3d72 742b 666f 756e        rt=rt+foun
-00008e80: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
-00008e90: 2020 656c 6966 2073 656c 662e 6f75 7420    elif self.out 
-00008ea0: 696e 205b 2769 6e64 6578 272c 2769 6478  in ['index','idx
-00008eb0: 272c 276b 6579 275d 3a0a 2020 2020 2020  ','key']:.      
-00008ec0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-00008ed0: 2e61 7070 656e 6428 6b65 7929 0a20 2020  .append(key).   
-00008ee0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00008ef0: 6620 7365 6c66 2e6f 7574 2069 6e20 5b27  f self.out in ['
-00008f00: 616c 6c27 2c27 2a27 5d3a 0a20 2020 2020  all','*']:.     
-00008f10: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00008f20: 742e 6170 7065 6e64 2828 6b65 792c 6461  t.append((key,da
-00008f30: 7461 2929 0a20 2020 2020 2020 2020 2020  ta)).           
-00008f40: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00008f50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00008f60: 742e 6170 7065 6e64 2864 6174 6129 0a20  t.append(data). 
-00008f70: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00008f80: 6e20 7274 0a0a 2020 2020 2020 2020 6966  n rt..        if
-00008f90: 2054 7970 6528 6461 7461 2c73 7472 293a   Type(data,str):
-00008fa0: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-00008fb0: 613d 6461 7461 2e73 706c 6974 2873 796d  a=data.split(sym
-00008fc0: 626f 6c29 0a20 2020 2020 2020 2069 6620  bol).        if 
-00008fd0: 5479 7065 2864 6174 612c 6c69 7374 2c74  Type(data,list,t
-00008fe0: 7570 6c65 293a 0a20 2020 2020 2020 2020  uple):.         
-00008ff0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-00009000: 6528 302c 6c65 6e28 6461 7461 2929 3a0a  e(0,len(data)):.
-00009010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009020: 6966 2054 7970 6528 6461 7461 5b69 5d2c  if Type(data[i],
-00009030: 286c 6973 742c 7475 706c 652c 6469 6374  (list,tuple,dict
-00009040: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00009050: 2020 2020 2020 2020 7375 623d 7365 6c66          sub=self
-00009060: 2e46 726f 6d28 6461 7461 5b69 5d2c 7379  .From(data[i],sy
-00009070: 6d62 6f6c 3d73 796d 626f 6c29 0a20 2020  mbol=symbol).   
-00009080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009090: 2069 6620 7375 623a 0a20 2020 2020 2020   if sub:.       
-000090a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000090b0: 2069 6620 7365 6c66 2e6f 7574 2069 6e20   if self.out in 
-000090c0: 5b27 6b65 7927 2c27 696e 6465 7827 2c27  ['key','index','
-000090d0: 6964 7827 5d3a 0a20 2020 2020 2020 2020  idx']:.         
-000090e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000090f0: 2020 2066 6f72 207a 2069 6e20 7375 623a     for z in sub:
-00009100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009120: 2072 742e 6170 7065 6e64 2827 7b7d 2f7b   rt.append('{}/{
-00009130: 7d27 2e66 6f72 6d61 7428 692c 7a29 290a  }'.format(i,z)).
-00009140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009150: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00009160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009170: 2020 2020 2020 2020 2020 7274 3d72 742b            rt=rt+
-00009180: 7375 620a 2020 2020 2020 2020 2020 2020  sub.            
-00009190: 2020 2020 656c 6966 2054 7970 6528 6461      elif Type(da
-000091a0: 7461 5b69 5d2c 7374 7229 3a0a 2020 2020  ta[i],str):.    
-000091b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000091c0: 7274 3d53 6561 7263 6828 6461 7461 5b69  rt=Search(data[i
-000091d0: 5d2c 692c 7274 290a 2020 2020 2020 2020  ],i,rt).        
-000091e0: 656c 6966 2054 7970 6528 6461 7461 2c64  elif Type(data,d
-000091f0: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
-00009200: 2020 666f 7220 6920 696e 2064 6174 613a    for i in data:
-00009210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009220: 2069 6620 5479 7065 2864 6174 615b 695d   if Type(data[i]
-00009230: 2c28 6c69 7374 2c74 7570 6c65 2c64 6963  ,(list,tuple,dic
-00009240: 7429 293a 0a20 2020 2020 2020 2020 2020  t)):.           
-00009250: 2020 2020 2020 2020 2073 7562 3d73 656c           sub=sel
-00009260: 662e 4672 6f6d 2864 6174 615b 695d 2c73  f.From(data[i],s
-00009270: 796d 626f 6c3d 7379 6d62 6f6c 290a 2020  ymbol=symbol).  
-00009280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009290: 2020 6966 2073 7562 3a0a 2020 2020 2020    if sub:.      
-000092a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000092b0: 2020 6966 2073 656c 662e 6f75 7420 696e    if self.out in
-000092c0: 205b 276b 6579 272c 2769 6e64 6578 272c   ['key','index',
-000092d0: 2769 6478 275d 3a0a 2020 2020 2020 2020  'idx']:.        
-000092e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000092f0: 2020 2020 666f 7220 7a20 696e 2073 7562      for z in sub
-00009300: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000011a0: 290a 0a64 6566 2047 6c6f 6261 6c28 6967  )..def Global(ig
+000011b0: 6e6f 7265 733d 5b27 5f5f 6275 696c 7469  nores=['__builti
+000011c0: 6e73 5f5f 272c 275f 5f73 7065 635f 5f27  ns__','__spec__'
+000011d0: 2c27 5f5f 6c6f 6164 6572 5f5f 272c 275f  ,'__loader__','_
+000011e0: 5f63 6163 6865 645f 5f27 2c27 5f5f 646f  _cached__','__do
+000011f0: 635f 5f27 2c27 5f5f 7061 636b 6167 655f  c__','__package_
+00001200: 5f27 2c27 5f5f 6e61 6d65 5f5f 272c 275f  _','__name__','_
+00001210: 5f66 696c 655f 5f27 2c27 5f5f 616e 6e6f  _file__','__anno
+00001220: 7461 7469 6f6e 735f 5f27 5d2c 496e 4675  tations__'],InFu
+00001230: 6e63 3d46 616c 7365 293a 0a20 2020 2065  nc=False):.    e
+00001240: 6e76 3d7b 275f 5f6e 616d 655f 5f27 3a5b  nv={'__name__':[
+00001250: 5d2c 275f 5f66 696c 655f 5f27 3a5b 5d7d  ],'__file__':[]}
+00001260: 0a20 2020 2073 7461 636b 733d 696e 7370  .    stacks=insp
+00001270: 6563 742e 7374 6163 6b28 290a 2020 2020  ect.stack().    
+00001280: 6d61 783d 6c65 6e28 7374 6163 6b73 290a  max=len(stacks).
+00001290: 2020 2020 666f 7220 6969 2069 6e20 7261      for ii in ra
+000012a0: 6e67 6528 312c 6d61 7829 3a0a 2020 2020  nge(1,max):.    
+000012b0: 2020 2020 6e61 6d65 3d73 7973 2e5f 6765      name=sys._ge
+000012c0: 7466 7261 6d65 2869 6929 2e66 5f63 6f64  tframe(ii).f_cod
+000012d0: 652e 636f 5f6e 616d 650a 2020 2020 2020  e.co_name.      
+000012e0: 2020 656e 765b 275f 5f6e 616d 655f 5f27    env['__name__'
+000012f0: 5d2e 6170 7065 6e64 286e 616d 6529 0a20  ].append(name). 
+00001300: 2020 2020 2020 2061 3d64 6963 7428 696e         a=dict(in
+00001310: 7370 6563 742e 6765 746d 656d 6265 7273  spect.getmembers
+00001320: 2873 7461 636b 735b 6969 5d5b 305d 2929  (stacks[ii][0]))
+00001330: 5b22 665f 676c 6f62 616c 7322 5d0a 2020  ["f_globals"].  
+00001340: 2020 2020 2020 666f 7220 6920 696e 2061        for i in a
+00001350: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00001360: 2069 203d 3d20 275f 5f66 696c 655f 5f27   i == '__file__'
+00001370: 3a20 656e 765b 275f 5f66 696c 655f 5f27  : env['__file__'
+00001380: 5d2e 6170 7065 6e64 2861 5b69 5d29 0a20  ].append(a[i]). 
+00001390: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
+000013a0: 696e 2069 676e 6f72 6573 3a20 636f 6e74  in ignores: cont
+000013b0: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
+000013c0: 2069 6620 6969 203c 3d20 323a 0a20 2020   if ii <= 2:.   
+000013d0: 2020 2020 2020 2020 2020 2020 2065 6e76               env
+000013e0: 5b69 5d3d 615b 695d 0a20 2020 2020 2020  [i]=a[i].       
+000013f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00001400: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
+00001410: 6e6f 7420 696e 2065 6e76 3a20 656e 765b  not in env: env[
+00001420: 695d 3d61 5b69 5d0a 2020 2020 2020 2020  i]=a[i].        
+00001430: 6966 2049 6e46 756e 633a 0a20 2020 2020  if InFunc:.     
+00001440: 2020 2020 2020 2062 3d64 6963 7428 696e         b=dict(in
+00001450: 7370 6563 742e 6765 746d 656d 6265 7273  spect.getmembers
+00001460: 2873 7461 636b 735b 6969 5d5b 305d 2929  (stacks[ii][0]))
+00001470: 5b22 665f 6c6f 6361 6c73 225d 0a20 2020  ["f_locals"].   
+00001480: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00001490: 6e20 623a 0a20 2020 2020 2020 2020 2020  n b:.           
+000014a0: 2020 2020 2069 6620 6920 696e 2069 676e       if i in ign
+000014b0: 6f72 6573 3a20 636f 6e74 696e 7565 0a20  ores: continue. 
+000014c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000014d0: 6620 6920 6e6f 7420 696e 2065 6e76 3a20  f i not in env: 
+000014e0: 656e 765b 695d 3d62 5b69 5d0a 2020 2020  env[i]=b[i].    
+000014f0: 7265 7475 726e 2065 6e76 0a0a 6465 6620  return env..def 
+00001500: 5374 644f 7574 286d 7367 293a 0a20 2020  StdOut(msg):.   
+00001510: 2027 2727 0a20 2020 2053 7461 6e64 6172   '''.    Standar
+00001520: 6420 4f75 7470 7574 2050 7269 6e74 2077  d Output Print w
+00001530: 6974 686f 7574 206e 6577 206c 696e 6520  ithout new line 
+00001540: 7379 6d62 6f6c 0a20 2020 2027 2727 0a20  symbol.    '''. 
+00001550: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+00001560: 6966 2074 7970 6528 6d73 6729 2e5f 5f6e  if type(msg).__n
+00001570: 616d 655f 5f20 3d3d 2027 6279 7465 7327  ame__ == 'bytes'
+00001580: 3a0a 2020 2020 2020 2020 2020 2020 7379  :.            sy
+00001590: 732e 7374 646f 7574 2e62 7566 6665 722e  s.stdout.buffer.
+000015a0: 7772 6974 6528 6d73 6729 0a20 2020 2020  write(msg).     
+000015b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000015c0: 2020 2020 2073 7973 2e73 7464 6f75 742e       sys.stdout.
+000015d0: 7772 6974 6528 6d73 6729 0a20 2020 2020  write(msg).     
+000015e0: 2020 2073 7973 2e73 7464 6f75 742e 666c     sys.stdout.fl
+000015f0: 7573 6828 290a 2020 2020 6578 6365 7074  ush().    except
+00001600: 3a0a 2020 2020 2020 2020 5374 6445 7272  :.        StdErr
+00001610: 2827 5772 6f6e 6720 6f75 7470 7574 2064  ('Wrong output d
+00001620: 6174 6120 666f 726d 6174 5c6e 2729 0a0a  ata format\n')..
+00001630: 6465 6620 5374 6445 7272 286d 7367 293a  def StdErr(msg):
+00001640: 0a20 2020 2027 2727 0a20 2020 2053 7461  .    '''.    Sta
+00001650: 6e64 6172 6420 4572 726f 7220 5072 696e  ndard Error Prin
+00001660: 7420 7769 7468 6f75 7420 6e65 7720 6c69  t without new li
+00001670: 6e65 2073 796d 626f 6c0a 2020 2020 2727  ne symbol.    ''
+00001680: 270a 2020 2020 7472 793a 0a20 2020 2020  '.    try:.     
+00001690: 2020 2073 7973 2e73 7464 6572 722e 7772     sys.stderr.wr
+000016a0: 6974 6528 6d73 6729 0a20 2020 2065 7863  ite(msg).    exc
+000016b0: 6570 743a 0a20 2020 2020 2020 2073 7973  ept:.        sys
+000016c0: 2e73 7464 6572 722e 7772 6974 6528 2757  .stderr.write('W
+000016d0: 726f 6e67 2045 7272 6f72 2064 6174 6120  rong Error data 
+000016e0: 666f 726d 6174 5c6e 2729 0a20 2020 2073  format\n').    s
+000016f0: 7973 2e73 7464 6572 722e 666c 7573 6828  ys.stderr.flush(
+00001700: 290a 0a64 6566 2050 7956 6572 282a 7665  )..def PyVer(*ve
+00001710: 722c 2a2a 6f70 7473 293a 0a20 2020 2027  r,**opts):.    '
+00001720: 2727 0a20 2020 2070 7974 686f 6e20 7665  ''.    python ve
+00001730: 7273 696f 6e20 6368 6563 6b0a 2020 2020  rsion check.    
+00001740: 2727 270a 2020 2020 6376 6572 3d4e 6f6e  '''.    cver=Non
+00001750: 650a 2020 2020 6d73 796d 3d4e 6f6e 650a  e.    msym=None.
+00001760: 2020 2020 7665 725f 7379 6d3d 5b27 3d27      ver_sym=['='
+00001770: 2c27 3d3d 272c 273e 272c 273c 272c 273e  ,'==','>','<','>
+00001780: 3d27 2c27 3c3d 272c 2721 3d27 5d0a 2020  =','<=','!='].  
+00001790: 2020 6966 206c 656e 2876 6572 2920 3e20    if len(ver) > 
+000017a0: 303a 0a20 2020 2020 2020 2069 6620 7665  0:.        if ve
+000017b0: 725b 305d 2069 6e20 7665 725f 7379 6d3a  r[0] in ver_sym:
+000017c0: 0a20 2020 2020 2020 2020 2020 206d 7379  .            msy
+000017d0: 6d3d 7665 725b 305d 0a20 2020 2020 2020  m=ver[0].       
+000017e0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000017f0: 2020 2063 7665 723d 277b 7d27 2e66 6f72     cver='{}'.for
+00001800: 6d61 7428 7665 725b 305d 290a 2020 2020  mat(ver[0]).    
+00001810: 2020 2020 6966 206c 656e 2876 6572 2920      if len(ver) 
+00001820: 3e20 313a 0a20 2020 2020 2020 2020 2020  > 1:.           
+00001830: 2069 6620 6d73 796d 3a0a 2020 2020 2020   if msym:.      
+00001840: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+00001850: 696e 2076 6572 5b31 3a5d 3a0a 2020 2020  in ver[1:]:.    
+00001860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001870: 6966 2063 7665 723a 0a20 2020 2020 2020  if cver:.       
+00001880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001890: 2063 7665 723d 6376 6572 2b27 2e7b 7d27   cver=cver+'.{}'
+000018a0: 2e66 6f72 6d61 7428 6929 0a20 2020 2020  .format(i).     
+000018b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000018c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000018d0: 2020 2020 2020 2020 2020 2020 2063 7665               cve
+000018e0: 723d 277b 7d27 2e66 6f72 6d61 7428 6929  r='{}'.format(i)
+000018f0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00001900: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00001910: 2020 2066 6f72 2069 2069 6e20 7665 725b     for i in ver[
+00001920: 313a 5d3a 0a20 2020 2020 2020 2020 2020  1:]:.           
+00001930: 2020 2020 2020 2020 2069 6620 6920 696e           if i in
+00001940: 2076 6572 5f73 796d 3a0a 2020 2020 2020   ver_sym:.      
+00001950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001960: 2020 6d73 796d 3d69 0a20 2020 2020 2020    msym=i.       
+00001970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001980: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
+00001990: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000019a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000019b0: 2020 2020 2020 2020 2063 7665 723d 6376           cver=cv
+000019c0: 6572 2b27 2e7b 7d27 2e66 6f72 6d61 7428  er+'.{}'.format(
+000019d0: 6929 0a20 2020 2069 6620 6376 6572 2069  i).    if cver i
+000019e0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000019f0: 6966 206f 7074 732e 6765 7428 276d 6169  if opts.get('mai
+00001a00: 6e27 293a 2063 7665 723d 277b 7d27 2e66  n'): cver='{}'.f
+00001a10: 6f72 6d61 7428 6f70 7473 2e67 6574 2827  ormat(opts.get('
+00001a20: 6d61 696e 2729 290a 2020 2020 2020 2020  main')).        
+00001a30: 6966 2063 7665 7220 616e 6420 6f70 7473  if cver and opts
+00001a40: 2e67 6574 2827 6d69 6e65 7227 2920 616e  .get('miner') an
+00001a50: 6420 272e 2720 6e6f 7420 696e 2063 7665  d '.' not in cve
+00001a60: 723a 2063 7665 723d 277b 7d2e 7b7d 272e  r: cver='{}.{}'.
+00001a70: 666f 726d 6174 2863 7665 722c 6f70 7473  format(cver,opts
+00001a80: 2e67 6574 2827 6d69 6e65 7227 2929 0a20  .get('miner')). 
+00001a90: 2020 2069 6620 6376 6572 2069 7320 4e6f     if cver is No
+00001aa0: 6e65 3a20 7265 7475 726e 2027 7b7d 2e7b  ne: return '{}.{
+00001ab0: 7d27 2e66 6f72 6d61 7428 7379 732e 7665  }'.format(sys.ve
+00001ac0: 7273 696f 6e5f 696e 666f 5b30 5d2c 7379  rsion_info[0],sy
+00001ad0: 732e 7665 7273 696f 6e5f 696e 666f 5b31  s.version_info[1
+00001ae0: 5d29 0a20 2020 2069 6620 6d73 796d 2069  ]).    if msym i
+00001af0: 7320 4e6f 6e65 3a20 6d73 796d 3d6f 7074  s None: msym=opt
+00001b00: 732e 6765 7428 276d 7379 6d27 2c27 3d3d  s.get('msym','==
+00001b10: 2729 0a20 2020 2069 6620 6d73 796d 3d3d  ').    if msym==
+00001b20: 273d 273a 206d 7379 6d3d 273d 3d27 0a20  '=': msym='=='. 
+00001b30: 2020 2063 7665 725f 613d 6376 6572 2e73     cver_a=cver.s
+00001b40: 706c 6974 2827 2e27 290a 2020 2020 6376  plit('.').    cv
+00001b50: 6572 5f6c 3d6c 656e 2863 7665 725f 6129  er_l=len(cver_a)
+00001b60: 0a20 2020 2066 6f72 2078 2069 6e20 7261  .    for x in ra
+00001b70: 6e67 6528 302c 6c65 6e28 7379 732e 7665  nge(0,len(sys.ve
+00001b80: 7273 696f 6e5f 696e 666f 2929 3a0a 2020  rsion_info)):.  
+00001b90: 2020 2020 2020 6966 2078 203c 2063 7665        if x < cve
+00001ba0: 725f 6c2d 313a 0a20 2020 2020 2020 2020  r_l-1:.         
+00001bb0: 2020 2063 6d73 796d 3d6d 7379 6d2b 273d     cmsym=msym+'=
+00001bc0: 2720 6966 2027 3d27 206e 6f74 2069 6e20  ' if '=' not in 
+00001bd0: 6d73 796d 2065 6c73 6520 6d73 796d 0a20  msym else msym. 
+00001be0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00001bf0: 7420 6576 616c 2827 7b7d 207b 7d20 7b7d  t eval('{} {} {}
+00001c00: 272e 666f 726d 6174 2873 7973 2e76 6572  '.format(sys.ver
+00001c10: 7369 6f6e 5f69 6e66 6f5b 785d 2c63 6d73  sion_info[x],cms
+00001c20: 796d 2c63 7665 725f 615b 785d 2929 3a0a  ym,cver_a[x])):.
+00001c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001c40: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
+00001c50: 2020 2020 2065 6c69 6620 7820 3d3d 2063       elif x == c
+00001c60: 7665 725f 6c2d 313a 0a20 2020 2020 2020  ver_l-1:.       
+00001c70: 2020 2020 2069 6620 6e6f 7420 6576 616c       if not eval
+00001c80: 2827 7b7d 207b 7d20 7b7d 272e 666f 726d  ('{} {} {}'.form
+00001c90: 6174 2873 7973 2e76 6572 7369 6f6e 5f69  at(sys.version_i
+00001ca0: 6e66 6f5b 785d 2c6d 7379 6d2c 6376 6572  nfo[x],msym,cver
+00001cb0: 5f61 5b78 5d29 293a 0a20 2020 2020 2020  _a[x])):.       
+00001cc0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00001cd0: 4661 6c73 650a 2020 2020 7265 7475 726e  False.    return
+00001ce0: 2054 7275 650a 0a64 6566 2066 696e 645f   True..def find_
+00001cf0: 6578 6563 7574 6162 6c65 2865 7865 6375  executable(execu
+00001d00: 7461 626c 652c 7061 7468 3d4e 6f6e 6529  table,path=None)
+00001d10: 3a0a 2020 2020 6966 206e 6f74 2054 7970  :.    if not Typ
+00001d20: 6528 6578 6563 7574 6162 6c65 2c27 7374  e(executable,'st
+00001d30: 7227 2c64 6174 613d 5472 7565 293a 2072  r',data=True): r
+00001d40: 6574 7572 6e20 4e6f 6e65 0a20 2020 2069  eturn None.    i
+00001d50: 6620 6e6f 7420 5479 7065 2870 6174 682c  f not Type(path,
+00001d60: 2773 7472 272c 6461 7461 3d54 7275 6529  'str',data=True)
+00001d70: 3a0a 2020 2020 2020 2020 7061 7468 3d6f  :.        path=o
+00001d80: 732e 656e 7669 726f 6e5b 2750 4154 4827  s.environ['PATH'
+00001d90: 5d0a 2020 2020 7061 7468 5f61 3d70 6174  ].    path_a=pat
+00001da0: 682e 7370 6c69 7428 6f73 2e70 6174 6873  h.split(os.paths
+00001db0: 6570 290a 2020 2020 6966 206f 732e 6e61  ep).    if os.na
+00001dc0: 6d65 203d 3d20 276f 7332 273a 0a20 2020  me == 'os2':.   
+00001dd0: 2020 2020 2028 6261 7365 2c65 7874 293d       (base,ext)=
+00001de0: 6f73 2e70 6174 682e 7370 6c69 7465 7828  os.path.splitex(
+00001df0: 6578 6563 7574 6162 6c65 290a 2020 2020  executable).    
+00001e00: 2020 2020 6966 206e 6f74 2065 7874 3a0a      if not ext:.
+00001e10: 2020 2020 2020 2020 2020 2020 6578 6563              exec
+00001e20: 7574 6162 6c65 3d65 7865 6375 7461 626c  utable=executabl
+00001e30: 652b 272e 6578 6527 0a20 2020 2065 6c69  e+'.exe'.    eli
+00001e40: 6620 7379 732e 706c 6174 666f 726d 203d  f sys.platform =
+00001e50: 3d20 2777 696e 3332 273a 0a20 2020 2020  = 'win32':.     
+00001e60: 2020 2028 6261 7365 2c65 7874 293d 6f73     (base,ext)=os
+00001e70: 2e70 6174 682e 7370 6c69 7465 7828 6578  .path.splitex(ex
+00001e80: 6563 7574 6162 6c65 290a 2020 2020 2020  ecutable).      
+00001e90: 2020 6966 206e 6f74 2065 7874 3a0a 2020    if not ext:.  
+00001ea0: 2020 2020 2020 2020 2020 6578 6563 7574            execut
+00001eb0: 6162 6c65 3d65 7865 6375 7461 626c 652b  able=executable+
+00001ec0: 272e 6578 6527 0a20 2020 2066 6f72 2070  '.exe'.    for p
+00001ed0: 2069 6e20 7061 7468 5f61 3a0a 2020 2020   in path_a:.    
+00001ee0: 2020 2020 663d 6f73 2e70 6174 682e 6a6f      f=os.path.jo
+00001ef0: 696e 2870 2c65 7865 6375 7461 626c 6529  in(p,executable)
+00001f00: 0a20 2020 2020 2020 2069 6620 6f73 2e70  .        if os.p
+00001f10: 6174 682e 6973 6669 6c65 2866 293a 0a20  ath.isfile(f):. 
+00001f20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00001f30: 6e20 660a 2020 2020 7265 7475 726e 204e  n f.    return N
+00001f40: 6f6e 650a 0a64 6566 2042 7974 654e 616d  one..def ByteNam
+00001f50: 6528 7372 6329 3a0a 2020 2020 2727 270a  e(src):.    '''.
+00001f60: 2020 2020 4765 7420 4279 7465 2074 7970      Get Byte typ
+00001f70: 6520 6e61 6d65 0a20 2020 2027 2727 0a20  e name.    '''. 
+00001f80: 2020 2069 6620 5079 5665 7228 3329 2061     if PyVer(3) a
+00001f90: 6e64 2069 7369 6e73 7461 6e63 6528 7372  nd isinstance(sr
+00001fa0: 632c 6279 7465 7329 3a0a 2020 2020 2020  c,bytes):.      
+00001fb0: 2020 6966 2073 7263 2e73 7461 7274 7377    if src.startsw
+00001fc0: 6974 6828 6227 5c78 6666 5c78 6665 5c78  ith(b'\xff\xfe\x
+00001fd0: 3030 5c78 3030 2729 2061 6e64 2073 7263  00\x00') and src
+00001fe0: 2e65 6e64 7377 6974 6828 6227 5c78 3030  .endswith(b'\x00
+00001ff0: 5c78 3030 5c78 3030 2729 3a0a 2020 2020  \x00\x00'):.    
+00002000: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+00002010: 7275 652c 2775 7466 2d33 322d 6c65 270a  rue,'utf-32-le'.
+00002020: 2020 2020 2020 2020 656c 6966 2073 7263          elif src
+00002030: 2e73 7461 7274 7377 6974 6828 6227 5c78  .startswith(b'\x
+00002040: 3030 5c78 3030 5c78 3030 2729 2061 6e64  00\x00\x00') and
+00002050: 2073 7263 2e65 6e64 7377 6974 6828 6227   src.endswith(b'
+00002060: 5c78 6666 5c78 6665 5c78 3030 5c78 3030  \xff\xfe\x00\x00
+00002070: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00002080: 7265 7475 726e 2054 7275 652c 2775 7466  return True,'utf
+00002090: 2d33 322d 6265 270a 2020 2020 2020 2020  -32-be'.        
+000020a0: 656c 6966 2073 7263 2e73 7461 7274 7377  elif src.startsw
+000020b0: 6974 6828 6227 5c78 6666 5c78 6665 2729  ith(b'\xff\xfe')
+000020c0: 2061 6e64 2073 7263 2e65 6e64 7377 6974   and src.endswit
+000020d0: 6828 6227 5c78 3030 2729 3a0a 2020 2020  h(b'\x00'):.    
+000020e0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+000020f0: 7275 652c 2775 7466 2d31 362d 6c65 270a  rue,'utf-16-le'.
+00002100: 2020 2020 2020 2020 656c 6966 2073 7263          elif src
+00002110: 2e73 7461 7274 7377 6974 6828 6227 5c78  .startswith(b'\x
+00002120: 3030 2729 2061 6e64 2073 7263 2e65 6e64  00') and src.end
+00002130: 7377 6974 6828 6227 5c78 6666 5c78 6665  swith(b'\xff\xfe
+00002140: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00002150: 7265 7475 726e 2054 7275 652c 2775 7466  return True,'utf
+00002160: 2d31 362d 6265 270a 2020 2020 2020 2020  -16-be'.        
+00002170: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00002180: 2020 7265 7475 726e 2054 7275 652c 2762    return True,'b
+00002190: 7974 6573 270a 2020 2020 7265 7475 726e  ytes'.    return
+000021a0: 2046 616c 7365 2c4e 6f6e 650a 0a64 6566   False,None..def
+000021b0: 2042 7974 6573 2873 7263 2c2a 2a6f 7074   Bytes(src,**opt
+000021c0: 7329 3a0a 2020 2020 2727 270a 2020 2020  s):.    '''.    
+000021d0: 436f 6e76 6572 7420 6461 7461 2074 6f20  Convert data to 
+000021e0: 6279 7465 7320 6461 7461 0a20 2020 2027  bytes data.    '
+000021f0: 2727 0a20 2020 2065 6e63 6f64 653d 6f70  ''.    encode=op
+00002200: 7473 2e67 6574 2827 656e 636f 6465 272c  ts.get('encode',
+00002210: 2775 7466 2d38 2729 0a20 2020 2064 6566  'utf-8').    def
+00002220: 6175 6c74 3d6f 7074 732e 6765 7428 2764  ault=opts.get('d
+00002230: 6566 6175 6c74 272c 7b27 6f72 6727 7d29  efault',{'org'})
+00002240: 0a20 2020 2064 6566 205f 6279 7465 735f  .    def _bytes_
+00002250: 2873 7263 2c65 6e63 6f64 652c 6465 6661  (src,encode,defa
+00002260: 756c 7429 3a0a 2020 2020 2020 2020 6966  ult):.        if
+00002270: 2074 7970 6528 7372 6329 2e5f 5f6e 616d   type(src).__nam
+00002280: 655f 5f20 3d3d 2027 756e 6963 6f64 6527  e__ == 'unicode'
+00002290: 3a20 7372 633d 7374 7228 7372 6329 0a20  : src=str(src). 
+000022a0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000022b0: 616e 6365 2873 7263 2c62 7974 6573 293a  ance(src,bytes):
+000022c0: 2072 6574 7572 6e20 7372 630a 2020 2020   return src.    
+000022d0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+000022e0: 6528 7372 632c 7374 7229 3a0a 2020 2020  e(src,str):.    
+000022f0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00002300: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00002310: 7572 6e20 6279 7465 7328 7372 632c 656e  urn bytes(src,en
+00002320: 636f 6465 290a 2020 2020 2020 2020 2020  code).          
+00002330: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+00002340: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
+00002350: 2020 2020 2020 2069 6620 6465 6661 756c         if defaul
+00002360: 7420 696e 205b 276f 7267 272c 7b27 6f72  t in ['org',{'or
+00002370: 6727 7d5d 3a20 7265 7475 726e 2073 7263  g'}]: return src
+00002380: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00002390: 6465 6661 756c 740a 0a20 2020 2069 6620  default..    if 
+000023a0: 6973 696e 7374 616e 6365 2873 7263 2c6c  isinstance(src,l
+000023b0: 6973 7429 3a0a 2020 2020 2020 2020 7265  ist):.        re
+000023c0: 7475 726e 205b 205f 6279 7465 735f 2878  turn [ _bytes_(x
+000023d0: 2c65 6e63 6f64 652c 6465 6661 756c 7429  ,encode,default)
+000023e0: 2066 6f72 2078 2069 6e20 7372 6320 5d0a   for x in src ].
+000023f0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+00002400: 6e63 6528 7372 632c 7475 706c 6529 3a0a  nce(src,tuple):.
+00002410: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+00002420: 7570 6c65 285b 205f 6279 7465 735f 2878  uple([ _bytes_(x
+00002430: 2c65 6e63 6f64 652c 6465 6661 756c 7429  ,encode,default)
+00002440: 2066 6f72 2078 2069 6e20 7372 6320 5d29   for x in src ])
+00002450: 0a20 2020 2065 6c69 6620 6973 696e 7374  .    elif isinst
+00002460: 616e 6365 2873 7263 2c64 6963 7429 3a0a  ance(src,dict):.
+00002470: 2020 2020 2020 2020 666f 7220 6969 2069          for ii i
+00002480: 6e20 7372 633a 0a20 2020 2020 2020 2020  n src:.         
+00002490: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000024a0: 2873 7263 5b69 695d 2c28 6c69 7374 2c74  (src[ii],(list,t
+000024b0: 7570 6c65 2c64 6963 7429 293a 0a20 2020  uple,dict)):.   
+000024c0: 2020 2020 2020 2020 2020 2020 2073 7263               src
+000024d0: 5b69 695d 3d42 7974 6573 2873 7263 5b69  [ii]=Bytes(src[i
+000024e0: 695d 2c65 6e63 6f64 653d 656e 636f 6465  i],encode=encode
+000024f0: 2c64 6566 6175 6c74 3d64 6566 6175 6c74  ,default=default
+00002500: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+00002510: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00002520: 2020 2020 7372 635b 6969 5d3d 5f62 7974      src[ii]=_byt
+00002530: 6573 5f28 7372 635b 6969 5d2c 656e 636f  es_(src[ii],enco
+00002540: 6465 2c64 6566 6175 6c74 290a 2020 2020  de,default).    
+00002550: 2020 2020 7265 7475 726e 2073 7263 0a20      return src. 
+00002560: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00002570: 2072 6574 7572 6e20 5f62 7974 6573 5f28   return _bytes_(
+00002580: 7372 632c 656e 636f 6465 2c64 6566 6175  src,encode,defau
+00002590: 6c74 290a 6465 6620 496e 7432 4279 7465  lt).def Int2Byte
+000025a0: 7328 7372 632c 6465 6661 756c 743d 276f  s(src,default='o
+000025b0: 7267 2729 3a0a 2020 2020 7472 793a 0a20  rg'):.    try:. 
+000025c0: 2020 2020 2020 2023 7374 7275 6374 2e70         #struct.p
+000025d0: 6163 6b28 273e 4927 2c20 7372 6329 5b31  ack('>I', src)[1
+000025e0: 3a5d 0a20 2020 2020 2020 2023 7374 7275  :].        #stru
+000025f0: 6374 2e70 6163 6b28 273e 4c27 2c20 7372  ct.pack('>L', sr
+00002600: 6329 5b31 3a5d 0a20 2020 2020 2020 2072  c)[1:].        r
+00002610: 6574 7572 6e20 7374 7275 6374 2e70 6163  eturn struct.pac
+00002620: 6b28 273e 4248 272c 2073 7263 203e 3e20  k('>BH', src >> 
+00002630: 3136 2c20 7372 6320 2620 3078 4646 4646  16, src & 0xFFFF
+00002640: 290a 2020 2020 6578 6365 7074 3a0a 2020  ).    except:.  
+00002650: 2020 2020 2020 6966 2064 6566 6175 6c74        if default
+00002660: 2069 6e20 5b27 6f72 6727 2c7b 276f 7267   in ['org',{'org
+00002670: 277d 5d3a 2072 6574 7572 6e20 7372 630a  '}]: return src.
+00002680: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+00002690: 6566 6175 6c74 0a0a 6465 6620 4279 7465  efault..def Byte
+000026a0: 7332 496e 7428 7372 632c 656e 636f 6465  s2Int(src,encode
+000026b0: 3d27 7574 662d 3827 2c64 6566 6175 6c74  ='utf-8',default
+000026c0: 3d27 6f72 6727 293a 0a20 2020 2069 6620  ='org'):.    if 
+000026d0: 5079 5665 7228 3329 3a0a 2020 2020 2020  PyVer(3):.      
+000026e0: 2020 6273 7263 3d42 7974 6573 2873 7263    bsrc=Bytes(src
+000026f0: 2c65 6e63 6f64 653d 656e 636f 6465 290a  ,encode=encode).
+00002700: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00002710: 7461 6e63 6528 6273 7263 2c62 7974 6573  tance(bsrc,bytes
+00002720: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00002730: 6574 7572 6e20 696e 7428 6273 7263 2e68  eturn int(bsrc.h
+00002740: 6578 2829 2c31 3629 0a20 2020 2020 2020  ex(),16).       
+00002750: 2069 6620 6465 6661 756c 7420 696e 205b   if default in [
+00002760: 276f 7267 272c 7b27 6f72 6727 7d5d 3a20  'org',{'org'}]: 
+00002770: 7265 7475 726e 2073 7263 0a20 2020 2020  return src.     
+00002780: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
+00002790: 740a 2020 2020 7472 793a 0a20 2020 2020  t.    try:.     
+000027a0: 2020 2072 6574 7572 6e20 696e 7428 7372     return int(sr
+000027b0: 632e 656e 636f 6465 2827 6865 7827 292c  c.encode('hex'),
+000027c0: 3136 290a 2020 2020 6578 6365 7074 3a0a  16).    except:.
+000027d0: 2020 2020 2020 2020 6966 2064 6566 6175          if defau
+000027e0: 6c74 2069 6e20 5b27 6f72 6727 2c7b 276f  lt in ['org',{'o
+000027f0: 7267 277d 5d3a 2072 6574 7572 6e20 7372  rg'}]: return sr
+00002800: 630a 2020 2020 2020 2020 7265 7475 726e  c.        return
+00002810: 2064 6566 6175 6c74 0a0a 636c 6173 7320   default..class 
+00002820: 5354 5228 7374 7229 3a0a 2020 2020 6465  STR(str):.    de
+00002830: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+00002840: 7372 632c 6279 7465 3d4e 6f6e 6529 3a0a  src,byte=None):.
+00002850: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00002860: 7461 6e63 6528 6279 7465 2c62 6f6f 6c29  tance(byte,bool)
+00002870: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00002880: 2062 7974 653a 0a20 2020 2020 2020 2020   byte:.         
+00002890: 2020 2020 2020 2073 656c 662e 7372 633d         self.src=
+000028a0: 4279 7465 7328 7372 6329 0a20 2020 2020  Bytes(src).     
+000028b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000028c0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000028d0: 662e 7372 633d 5374 7228 7372 6329 0a20  f.src=Str(src). 
+000028e0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000028f0: 2020 2020 2020 2020 2073 656c 662e 7372           self.sr
+00002900: 633d 7372 630a 0a20 2020 2064 6566 2052  c=src..    def R
+00002910: 616e 6428 7365 6c66 2c6c 656e 6774 683d  and(self,length=
+00002920: 382c 7374 7273 3d4e 6f6e 652c 6d6f 6465  8,strs=None,mode
+00002930: 3d27 2a27 293a 0a20 2020 2020 2020 2072  ='*'):.        r
+00002940: 6574 7572 6e20 5261 6e64 6f6d 286c 656e  eturn Random(len
+00002950: 6774 683d 6c65 6e67 7468 2c73 7472 733d  gth=length,strs=
+00002960: 7374 7273 2c6d 6f64 653d 6d6f 6465 290a  strs,mode=mode).
+00002970: 0a20 2020 2064 6566 2043 7574 2873 656c  .    def Cut(sel
+00002980: 662c 6865 6164 5f6c 656e 3d4e 6f6e 652c  f,head_len=None,
+00002990: 626f 6479 5f6c 656e 3d4e 6f6e 652c 6e65  body_len=None,ne
+000029a0: 775f 6c69 6e65 3d27 5c6e 272c 6f75 743d  w_line='\n',out=
+000029b0: 7374 7229 3a0a 2020 2020 2020 2020 6966  str):.        if
+000029c0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+000029d0: 7365 6c66 2e73 7263 2c73 7472 293a 0a20  self.src,str):. 
+000029e0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+000029f0: 7263 3d27 2727 7b7d 2727 272e 666f 726d  rc='''{}'''.form
+00002a00: 6174 2873 656c 662e 7372 6329 0a20 2020  at(self.src).   
+00002a10: 2020 2020 2072 6574 7572 6e20 4375 7428       return Cut(
+00002a20: 7365 6c66 2e73 7263 2c68 6561 645f 6c65  self.src,head_le
+00002a30: 6e2c 626f 6479 5f6c 656e 2c6e 6577 5f6c  n,body_len,new_l
+00002a40: 696e 652c 6f75 7429 0a0a 2020 2020 6465  ine,out)..    de
+00002a50: 6620 5370 6163 6528 6e75 6d3d 312c 6669  f Space(num=1,fi
+00002a60: 6c6c 3d27 2027 2c6d 6f64 653d 2773 7061  ll=' ',mode='spa
+00002a70: 6365 2729 3a0a 2020 2020 2020 2020 7265  ce'):.        re
+00002a80: 7475 726e 2053 7061 6365 286e 756d 2c66  turn Space(num,f
+00002a90: 696c 6c2c 6d6f 6465 290a 0a20 2020 2064  ill,mode)..    d
+00002aa0: 6566 2052 6564 7563 6528 7365 6c66 2c73  ef Reduce(self,s
+00002ab0: 7461 7274 3d30 2c65 6e64 3d4e 6f6e 652c  tart=0,end=None,
+00002ac0: 7379 6d3d 4e6f 6e65 2c64 6566 6175 6c74  sym=None,default
+00002ad0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00002ae0: 6966 2069 7369 6e73 7461 6e63 6528 7365  if isinstance(se
+00002af0: 6c66 2e73 7263 2c73 7472 293a 0a20 2020  lf.src,str):.   
+00002b00: 2020 2020 2020 2020 2069 6620 7379 6d3a           if sym:
+00002b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002b20: 2061 7272 3d73 656c 662e 7372 632e 7370   arr=self.src.sp
+00002b30: 6c69 7428 7379 6d29 0a20 2020 2020 2020  lit(sym).       
+00002b40: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00002b50: 7374 616e 6365 2865 6e64 2c69 6e74 293a  stance(end,int):
+00002b60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002b70: 2020 2020 2072 6574 7572 6e20 4a6f 696e       return Join
+00002b80: 2861 7272 5b73 7461 7274 3a65 6e64 5d2c  (arr[start:end],
+00002b90: 7379 6d62 6f6c 3d73 796d 290a 2020 2020  symbol=sym).    
+00002ba0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00002bb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00002bc0: 2020 2020 2020 7265 7475 726e 204a 6f69        return Joi
+00002bd0: 6e28 6172 725b 7374 6172 745d 2c73 796d  n(arr[start],sym
+00002be0: 626f 6c3d 7379 6d29 0a20 2020 2020 2020  bol=sym).       
+00002bf0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00002c00: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00002c10: 696e 7374 616e 6365 2865 6e64 2c69 6e74  instance(end,int
+00002c20: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00002c30: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00002c40: 6c66 2e73 7263 5b73 7461 7274 3a65 6e64  lf.src[start:end
+00002c50: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00002c60: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00002c70: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00002c80: 726e 2073 656c 662e 7372 635b 7374 6172  rn self.src[star
+00002c90: 743a 5d0a 2020 2020 2020 2020 7265 7475  t:].        retu
+00002ca0: 726e 2064 6566 6175 6c74 0a0a 2020 2020  rn default..    
+00002cb0: 6465 6620 4669 6e64 2873 656c 662c 6669  def Find(self,fi
+00002cc0: 6e64 2c73 7263 3d27 5f23 5f27 2c70 7273  nd,src='_#_',prs
+00002cd0: 3d4e 6f6e 652c 7379 6d3d 275c 6e27 2c70  =None,sym='\n',p
+00002ce0: 6174 7465 726e 3d54 7275 652c 6465 6661  attern=True,defa
+00002cf0: 756c 743d 5b5d 2c6f 7574 3d4e 6f6e 652c  ult=[],out=None,
+00002d00: 6669 6e64 616c 6c3d 5472 7565 2c77 6f72  findall=True,wor
+00002d10: 643d 4661 6c73 652c 6c69 6e65 5f6e 756d  d=False,line_num
+00002d20: 3d46 616c 7365 2c70 6565 6c3d 4e6f 6e65  =False,peel=None
+00002d30: 293a 0a20 2020 2020 2020 2069 6620 4973  ):.        if Is
+00002d40: 4e6f 6e65 2873 7263 2c63 686b 5f76 616c  None(src,chk_val
+00002d50: 3d5b 275f 235f 275d 2c63 686b 5f6f 6e6c  =['_#_'],chk_onl
+00002d60: 793d 5472 7565 293a 2073 7263 3d73 656c  y=True): src=sel
+00002d70: 662e 7372 630a 2020 2020 2020 2020 7265  f.src.        re
+00002d80: 7475 726e 2046 494e 4428 7372 6329 2e46  turn FIND(src).F
+00002d90: 696e 6428 6669 6e64 2c70 7273 3d70 7273  ind(find,prs=prs
+00002da0: 2c73 796d 3d73 796d 2c64 6566 6175 6c74  ,sym=sym,default
+00002db0: 3d64 6566 6175 6c74 2c6f 7574 3d6f 7574  =default,out=out
+00002dc0: 2c66 696e 6461 6c6c 3d66 696e 6461 6c6c  ,findall=findall
+00002dd0: 2c77 6f72 643d 776f 7264 2c6d 6f64 653d  ,word=word,mode=
+00002de0: 2776 616c 7565 272c 6c69 6e65 5f6e 756d  'value',line_num
+00002df0: 3d6c 696e 655f 6e75 6d2c 7065 656c 3d70  =line_num,peel=p
+00002e00: 6565 6c29 0a0a 2020 2020 6465 6620 496e  eel)..    def In
+00002e10: 6465 7828 7365 6c66 2c66 696e 642c 7374  dex(self,find,st
+00002e20: 6172 743d 4e6f 6e65 2c65 6e64 3d4e 6f6e  art=None,end=Non
+00002e30: 652c 7379 6d3d 275c 6e27 2c64 6566 6175  e,sym='\n',defau
+00002e40: 6c74 3d5b 5d2c 776f 7264 3d46 616c 7365  lt=[],word=False
+00002e50: 2c70 6174 7465 726e 3d46 616c 7365 2c66  ,pattern=False,f
+00002e60: 696e 6461 6c6c 3d46 616c 7365 2c6f 7574  indall=False,out
+00002e70: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00002e80: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+00002e90: 6528 7365 6c66 2e73 7263 2c73 7472 293a  e(self.src,str):
+00002ea0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+00002eb0: 2020 2020 2020 2020 7274 3d5b 5d0a 2020          rt=[].  
+00002ec0: 2020 2020 2020 736f 7572 6365 3d73 656c        source=sel
+00002ed0: 662e 7372 632e 7370 6c69 7428 7379 6d29  f.src.split(sym)
+00002ee0: 0a20 2020 2020 2020 2066 6f72 2072 6f77  .        for row
+00002ef0: 2069 6e20 7261 6e67 6528 302c 6c65 6e28   in range(0,len(
+00002f00: 736f 7572 6365 2929 3a0a 2020 2020 2020  source)):.      
+00002f10: 2020 2020 2020 666f 7220 6666 2069 6e20        for ff in 
+00002f20: 7365 6c66 2e46 696e 6428 6669 6e64 2c73  self.Find(find,s
+00002f30: 7263 3d73 6f75 7263 655b 726f 775d 2c70  rc=source[row],p
+00002f40: 6174 7465 726e 3d70 6174 7465 726e 2c77  attern=pattern,w
+00002f50: 6f72 643d 776f 7264 2c66 696e 6461 6c6c  ord=word,findall
+00002f60: 3d66 696e 6461 6c6c 2c64 6566 6175 6c74  =findall,default
+00002f70: 3d5b 5d2c 6f75 743d 6c69 7374 293a 0a20  =[],out=list):. 
+00002f80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00002f90: 6620 6669 6e64 616c 6c3a 0a20 2020 2020  f findall:.     
+00002fa0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00002fb0: 743d 7274 2b5b 2872 6f77 2c5b 6d2e 7374  t=rt+[(row,[m.st
+00002fc0: 6172 7428 2920 666f 7220 6d20 696e 2072  art() for m in r
+00002fd0: 652e 6669 6e64 6974 6572 2866 662c 736f  e.finditer(ff,so
+00002fe0: 7572 6365 5b72 6f77 5d29 5d29 5d0a 2020  urce[row])])].  
+00002ff0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00003000: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00003010: 2020 2020 2020 2020 6964 783d 736f 7572          idx=sour
+00003020: 6365 5b72 6f77 5d2e 696e 6465 7828 6666  ce[row].index(ff
+00003030: 2c73 7461 7274 2c65 6e64 290a 2020 2020  ,start,end).    
+00003040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003050: 6966 2069 6478 203e 3d20 303a 0a20 2020  if idx >= 0:.   
+00003060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003070: 2020 2020 2072 742e 6170 7065 6e64 2828       rt.append((
+00003080: 726f 772c 6964 7829 290a 2020 2020 2020  row,idx)).      
+00003090: 2020 6966 2072 743a 0a20 2020 2020 2020    if rt:.       
+000030a0: 2020 2020 2069 6620 6f75 7420 696e 205b       if out in [
+000030b0: 2774 7570 6c65 272c 7475 706c 655d 3a20  'tuple',tuple]: 
+000030c0: 7265 7475 726e 2074 7570 6c65 2872 7429  return tuple(rt)
+000030d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000030e0: 6f75 7420 6e6f 7420 696e 205b 276c 6973  out not in ['lis
+000030f0: 7427 2c6c 6973 745d 2061 6e64 206c 656e  t',list] and len
+00003100: 2872 7429 203d 3d20 3120 616e 6420 7274  (rt) == 1 and rt
+00003110: 5b30 5d5b 305d 203d 3d20 303a 0a20 2020  [0][0] == 0:.   
+00003120: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00003130: 6c65 6e28 7274 5b30 5d5b 315d 2920 3d3d  len(rt[0][1]) ==
+00003140: 2031 3a72 6574 7572 6e20 7274 5b30 5d5b   1:return rt[0][
+00003150: 315d 5b30 5d0a 2020 2020 2020 2020 2020  1][0].          
+00003160: 2020 2020 2020 7265 7475 726e 2072 745b        return rt[
+00003170: 305d 5b31 5d0a 2020 2020 2020 2020 2020  0][1].          
+00003180: 2020 7265 7475 726e 2072 740a 2020 2020    return rt.    
+00003190: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+000031a0: 6c74 0a0a 2020 2020 6465 6620 5265 706c  lt..    def Repl
+000031b0: 6163 6528 7365 6c66 2c72 6570 6c61 6365  ace(self,replace
+000031c0: 5f77 6861 742c 7265 706c 6163 655f 746f  _what,replace_to
+000031d0: 2c64 6566 6175 6c74 3d4e 6f6e 6529 3a0a  ,default=None):.
+000031e0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+000031f0: 7461 6e63 6528 7365 6c66 2e73 7263 2c73  tance(self.src,s
+00003200: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+00003210: 2069 6620 7265 706c 6163 655f 7768 6174   if replace_what
+00003220: 5b2d 315d 203d 3d20 2724 2720 6f72 2072  [-1] == '$' or r
+00003230: 6570 6c61 6365 5f77 6861 745b 305d 203d  eplace_what[0] =
+00003240: 3d20 275e 273a 0a20 2020 2020 2020 2020  = '^':.         
+00003250: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
+00003260: 2e73 7562 2872 6570 6c61 6365 5f77 6861  .sub(replace_wha
+00003270: 742c 2072 6570 6c61 6365 5f74 6f2c 2073  t, replace_to, s
+00003280: 656c 662e 7372 6329 0a20 2020 2020 2020  elf.src).       
+00003290: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000032a0: 2020 2020 2020 2020 2020 2068 6561 642c             head,
+000032b0: 205f 7365 702c 2074 6169 6c20 3d20 7365   _sep, tail = se
+000032c0: 6c66 2e73 7263 2e72 7061 7274 6974 696f  lf.src.rpartitio
+000032d0: 6e28 7265 706c 6163 655f 7768 6174 290a  n(replace_what).
+000032e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032f0: 7265 7475 726e 2068 6561 6420 2b20 7265  return head + re
+00003300: 706c 6163 655f 746f 202b 2074 6169 6c0a  place_to + tail.
+00003310: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+00003320: 6566 6175 6c74 0a0a 2020 2020 6465 6620  efault..    def 
+00003330: 5265 6d6f 7665 4e65 776c 696e 6528 7365  RemoveNewline(se
+00003340: 6c66 2c73 7263 3d27 5f23 5f27 2c6d 6f64  lf,src='_#_',mod
+00003350: 653d 2765 6467 6527 2c6e 6577 6c69 6e65  e='edge',newline
+00003360: 3d27 5c6e 272c 6279 7465 3d4e 6f6e 6529  ='\n',byte=None)
+00003370: 3a0a 2020 2020 2020 2020 6966 2049 734e  :.        if IsN
+00003380: 6f6e 6528 7372 632c 6368 6b5f 7661 6c3d  one(src,chk_val=
+00003390: 5b27 5f23 5f27 5d2c 6368 6b5f 6f6e 6c79  ['_#_'],chk_only
+000033a0: 3d54 7275 6529 3a20 7372 633d 7365 6c66  =True): src=self
+000033b0: 2e73 7263 0a20 2020 2020 2020 2069 6620  .src.        if 
+000033c0: 6973 696e 7374 616e 6365 2862 7974 652c  isinstance(byte,
+000033d0: 626f 6f6c 293a 0a20 2020 2020 2020 2020  bool):.         
+000033e0: 2020 2069 6620 6279 7465 3a0a 2020 2020     if byte:.    
+000033f0: 2020 2020 2020 2020 2020 2020 7372 633d              src=
+00003400: 4279 7465 7328 7372 6329 0a20 2020 2020  Bytes(src).     
+00003410: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00003420: 2020 2020 2020 2020 2020 2020 2073 7263               src
+00003430: 3d53 7472 2873 7263 290a 2020 2020 2020  =Str(src).      
+00003440: 2020 7372 635f 613d 5370 6c69 7428 7372    src_a=Split(sr
+00003450: 632c 6e65 776c 696e 652c 6465 6661 756c  c,newline,defaul
+00003460: 743d 4661 6c73 652c 6c69 7374 6f6e 6c79  t=False,listonly
+00003470: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
+00003480: 6966 2073 7263 5f61 2069 7320 4661 6c73  if src_a is Fals
+00003490: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+000034a0: 6574 7572 6e20 7372 630a 2020 2020 2020  eturn src.      
+000034b0: 2020 6966 206d 6f64 6520 696e 205b 2765    if mode in ['e
+000034c0: 6467 6527 2c27 626f 7468 275d 3a0a 2020  dge','both']:.  
+000034d0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+000034e0: 2073 7263 5f61 5b30 5d2e 7374 7269 7028   src_a[0].strip(
+000034f0: 2920 616e 6420 6e6f 7420 7372 635f 615b  ) and not src_a[
+00003500: 2d31 5d2e 7374 7269 7028 293a 0a20 2020  -1].strip():.   
+00003510: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00003520: 7572 6e20 4a6f 696e 2873 7263 5f61 5b31  urn Join(src_a[1
+00003530: 3a2d 315d 2c73 796d 626f 6c3d 6e65 776c  :-1],symbol=newl
+00003540: 696e 6529 0a20 2020 2020 2020 2020 2020  ine).           
+00003550: 2065 6c69 6620 6e6f 7420 7372 635f 615b   elif not src_a[
+00003560: 305d 2e73 7472 6970 2829 3a0a 2020 2020  0].strip():.    
+00003570: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00003580: 726e 204a 6f69 6e28 7372 635f 615b 313a  rn Join(src_a[1:
+00003590: 5d2c 7379 6d62 6f6c 3d6e 6577 6c69 6e65  ],symbol=newline
+000035a0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+000035b0: 6966 206e 6f74 2073 7263 5f61 5b2d 315d  if not src_a[-1]
+000035c0: 2e73 7472 6970 2829 3a0a 2020 2020 2020  .strip():.      
+000035d0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000035e0: 204a 6f69 6e28 7372 635f 615b 3a2d 315d   Join(src_a[:-1]
+000035f0: 2c73 796d 626f 6c3d 6e65 776c 696e 6529  ,symbol=newline)
+00003600: 0a20 2020 2020 2020 2065 6c69 6620 6d6f  .        elif mo
+00003610: 6465 2069 6e20 5b27 6669 7273 7427 2c27  de in ['first','
+00003620: 7374 6172 7427 2c30 5d3a 0a20 2020 2020  start',0]:.     
+00003630: 2020 2020 2020 2069 6620 6e6f 7420 7372         if not sr
+00003640: 635f 615b 305d 2e73 7472 6970 2829 3a0a  c_a[0].strip():.
+00003650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003660: 7265 7475 726e 204a 6f69 6e28 7372 635f  return Join(src_
+00003670: 615b 313a 5d2c 7379 6d62 6f6c 3d6e 6577  a[1:],symbol=new
+00003680: 6c69 6e65 290a 2020 2020 2020 2020 656c  line).        el
+00003690: 6966 206d 6f64 6520 696e 205b 2765 6e64  if mode in ['end
+000036a0: 272c 276c 6173 7427 2c2d 315d 3a0a 2020  ','last',-1]:.  
+000036b0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+000036c0: 2073 7263 5f61 5b2d 315d 2e73 7472 6970   src_a[-1].strip
+000036d0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+000036e0: 2020 2020 7265 7475 726e 204a 6f69 6e28      return Join(
+000036f0: 7372 635f 615b 3a2d 315d 2c73 796d 626f  src_a[:-1],symbo
+00003700: 6c3d 6e65 776c 696e 6529 0a20 2020 2020  l=newline).     
+00003710: 2020 2065 6c69 6620 6d6f 6465 2069 6e20     elif mode in 
+00003720: 5b27 2a27 2c27 616c 6c27 2c27 6576 6572  ['*','all','ever
+00003730: 7974 6869 6e67 275d 3a0a 2020 2020 2020  ything']:.      
+00003740: 2020 2020 2020 7265 7475 726e 204a 6f69        return Joi
+00003750: 6e28 7372 635f 612c 7379 6d62 6f6c 3d27  n(src_a,symbol='
+00003760: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
+00003770: 6e20 7372 630a 0a20 2020 2064 6566 2054  n src..    def T
+00003780: 6170 2873 656c 662c 2a2a 6f70 7473 293a  ap(self,**opts):
+00003790: 0a20 2020 2020 2020 2066 7370 6163 653d  .        fspace=
+000037a0: 6f70 7473 2e67 6574 2827 7370 6163 6527  opts.get('space'
+000037b0: 2c6f 7074 732e 6765 7428 2766 7370 6163  ,opts.get('fspac
+000037c0: 6527 2c27 2729 290a 2020 2020 2020 2020  e','')).        
+000037d0: 6e73 7061 6365 3d6f 7074 732e 6765 7428  nspace=opts.get(
+000037e0: 276e 7370 6163 6527 2c66 7370 6163 6529  'nspace',fspace)
+000037f0: 0a20 2020 2020 2020 2073 796d 3d6f 7074  .        sym=opt
+00003800: 732e 6765 7428 2773 796d 272c 6f70 7473  s.get('sym',opts
+00003810: 2e67 6574 2827 6e65 775f 6c69 6e65 272c  .get('new_line',
+00003820: 275c 6e27 2929 0a20 2020 2020 2020 2064  '\n')).        d
+00003830: 6566 6175 6c74 3d6f 7074 732e 6765 7428  efault=opts.get(
+00003840: 2764 6566 6175 6c74 272c 276f 7267 2729  'default','org')
+00003850: 0a20 2020 2020 2020 204e 464c 543d 6f70  .        NFLT=op
+00003860: 7473 2e67 6574 2827 4e46 4c54 272c 4661  ts.get('NFLT',Fa
+00003870: 6c73 6529 0a20 2020 2020 2020 206f 7574  lse).        out
+00003880: 3d6f 7074 732e 6765 7428 276f 7574 272c  =opts.get('out',
+00003890: 7374 7229 0a20 2020 2020 2020 206d 6f64  str).        mod
+000038a0: 653d 6f70 7473 2e67 6574 2827 6d6f 6465  e=opts.get('mode
+000038b0: 272c 2773 7061 6365 2729 0a20 2020 2020  ','space').     
+000038c0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000038d0: 2866 7370 6163 652c 7374 7229 3a0a 2020  (fspace,str):.  
+000038e0: 2020 2020 2020 2020 2020 6673 7061 6365            fspace
+000038f0: 3d6c 656e 2866 7370 6163 6529 0a20 2020  =len(fspace).   
+00003900: 2020 2020 2072 6574 7572 6e20 5772 6170       return Wrap
+00003910: 5374 7269 6e67 2873 656c 662e 7372 632c  String(self.src,
+00003920: 6673 7061 6365 3d66 7370 6163 652c 6e73  fspace=fspace,ns
+00003930: 7061 6365 3d6e 7370 6163 652c 6e65 775f  pace=nspace,new_
+00003940: 6c69 6e65 3d73 796d 2c4e 464c 543d 4e46  line=sym,NFLT=NF
+00003950: 4c54 2c6d 6f64 653d 6d6f 6465 290a 0a64  LT,mode=mode)..d
+00003960: 6566 2053 7472 2873 7263 2c2a 2a6f 7074  ef Str(src,**opt
+00003970: 7329 3a0a 2020 2020 2727 270a 2020 2020  s):.    '''.    
+00003980: 436f 6e76 6572 7420 6461 7461 2074 6f20  Convert data to 
+00003990: 5374 7269 6e67 2064 6174 610a 2020 2020  String data.    
+000039a0: 656e 636f 6465 203a 2064 6566 6175 6c74  encode : default
+000039b0: 2027 7574 662d 3827 2c27 6c61 7469 6e31   'utf-8','latin1
+000039c0: 272c 2777 696e 646f 7773 2d31 3235 3227  ','windows-1252'
+000039d0: 0a20 2020 2064 6566 6175 6c74 203a 2072  .    default : r
+000039e0: 6574 7572 6e20 746f 206f 7269 6769 6e61  eturn to origina
+000039f0: 6c20 7661 6c75 652c 2069 6620 796f 7520  l value, if you 
+00003a00: 6465 6669 6e65 2064 6566 6175 6c74 2076  define default v
+00003a10: 616c 7565 2074 6865 6e20 7265 7475 726e  alue then return
+00003a20: 2074 6f20 7468 6520 6465 6669 6e65 6420   to the defined 
+00003a30: 7661 6c75 650a 2020 2020 6d6f 6465 203a  value.    mode :
+00003a40: 2061 7574 6f2c 2069 6620 6578 6973 7420   auto, if exist 
+00003a50: 6461 7461 2074 6865 6e20 636f 6e76 6572  data then conver
+00003a60: 7420 746f 2073 7472 696e 672c 206e 6f74  t to string, not
+00003a70: 2074 6865 6e20 7265 7475 726e 2074 6f20   then return to 
+00003a80: 7468 6520 666f 726d 2e0a 2020 2020 2020  the form..      
+00003a90: 2020 2020 2027 666f 7263 6527 2c27 6669       'force','fi
+00003aa0: 7827 2c27 6669 7865 6427 203a 2065 7665  x','fixed' : eve
+00003ab0: 7279 7468 696e 6720 636f 6e76 6572 7420  rything convert 
+00003ac0: 746f 2073 7472 696e 670a 2020 2020 7265  to string.    re
+00003ad0: 6d6f 7665 3a20 6966 2079 6f75 2077 616e  move: if you wan
+00003ae0: 7420 7265 6d6f 7665 2064 6174 6120 7468  t remove data th
+00003af0: 656e 2064 6566 696e 6520 6865 7265 2e20  en define here. 
+00003b00: 283a 7768 6974 6573 7061 6365 3a20 7769  (:whitespace: wi
+00003b10: 6c6c 2072 656d 6f76 6520 7768 6974 6520  ll remove white 
+00003b20: 7370 6163 6520 746f 2073 696e 676c 6520  space to single 
+00003b30: 7370 6163 6529 0a20 2020 2063 6f6c 6f72  space).    color
+00003b40: 5f63 6f64 653a 2020 3c63 6f6c 6f72 3e5b  _code:  <color>[
+00003b50: 3a3c 6174 7472 3e5d 0a20 2020 2027 2727  :<attr>].    '''
+00003b60: 0a20 2020 2065 6e63 6f64 653d 6f70 7473  .    encode=opts
+00003b70: 2e67 6574 2827 656e 636f 6465 272c 4e6f  .get('encode',No
+00003b80: 6e65 290a 2020 2020 6465 6661 756c 743d  ne).    default=
+00003b90: 6f70 7473 2e67 6574 2827 6465 6661 756c  opts.get('defaul
+00003ba0: 7427 2c27 6f72 6727 290a 2020 2020 6d6f  t','org').    mo
+00003bb0: 6465 3d6f 7074 732e 6765 7428 276d 6f64  de=opts.get('mod
+00003bc0: 6527 2c27 6175 746f 2729 0a20 2020 2072  e','auto').    r
+00003bd0: 656d 6f76 653d 6f70 7473 2e67 6574 2827  emove=opts.get('
+00003be0: 7265 6d6f 7665 272c 4e6f 6e65 290a 2020  remove',None).  
+00003bf0: 2020 636f 6c6f 725f 636f 6465 3d6f 7074    color_code=opt
+00003c00: 732e 6765 7428 2763 6f6c 6f72 5f63 6f64  s.get('color_cod
+00003c10: 6527 290a 0a20 2020 2063 6f6c 6f72 5f64  e')..    color_d
+00003c20: 623d 6f70 7473 2e67 6574 2827 636f 6c6f  b=opts.get('colo
+00003c30: 725f 6462 272c 7b27 636f 6c6f 7227 3a0a  r_db',{'color':.
+00003c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003c60: 2020 207b 2762 6c75 6527 3a20 3334 2c20     {'blue': 34, 
+00003c70: 2767 7265 7927 3a20 3330 2c20 2779 656c  'grey': 30, 'yel
+00003c80: 6c6f 7727 3a20 3333 2c20 2767 7265 656e  low': 33, 'green
+00003c90: 273a 2033 322c 2027 6379 616e 273a 2033  ': 32, 'cyan': 3
+00003ca0: 362c 2027 6d61 6765 6e74 6127 3a20 3335  6, 'magenta': 35
+00003cb0: 2c20 2777 6869 7465 273a 2033 372c 2027  , 'white': 37, '
+00003cc0: 7265 6427 3a20 3331 7d2c 0a20 2020 2020  red': 31},.     
+00003cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003ce0: 2020 2020 2020 2020 2020 2020 2027 6267               'bg
+00003cf0: 273a 7b27 6379 616e 273a 2034 362c 2027  ':{'cyan': 46, '
+00003d00: 7768 6974 6527 3a20 3437 2c20 2767 7265  white': 47, 'gre
+00003d10: 7927 3a20 3430 2c20 2779 656c 6c6f 7727  y': 40, 'yellow'
+00003d20: 3a20 3433 2c20 2762 6c75 6527 3a20 3434  : 43, 'blue': 44
+00003d30: 2c20 276d 6167 656e 7461 273a 2034 352c  , 'magenta': 45,
+00003d40: 2027 7265 6427 3a20 3431 2c20 2767 7265   'red': 41, 'gre
+00003d50: 656e 273a 2034 327d 2c0a 2020 2020 2020  en': 42},.      
+00003d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003d70: 2020 2020 2020 2020 2020 2020 2761 7474              'att
+00003d80: 7227 3a7b 2772 6576 6572 7365 273a 2037  r':{'reverse': 7
+00003d90: 2c20 2762 6c69 6e6b 273a 2035 2c27 636f  , 'blink': 5,'co
+00003da0: 6e63 6561 6c65 6427 3a20 382c 2027 756e  ncealed': 8, 'un
+00003db0: 6465 726c 696e 6527 3a20 342c 2027 626f  derline': 4, 'bo
+00003dc0: 6c64 273a 2031 7d7d 290a 0a20 2020 2069  ld': 1}})..    i
+00003dd0: 6620 6973 696e 7374 616e 6365 2863 6f6c  f isinstance(col
+00003de0: 6f72 5f63 6f64 652c 7374 7229 3a0a 2020  or_code,str):.  
+00003df0: 2020 2020 2020 636f 6c6f 725f 636f 6465        color_code
+00003e00: 5f61 3d63 6f6c 6f72 5f63 6f64 652e 7370  _a=color_code.sp
+00003e10: 6c69 7428 273a 2729 0a20 2020 2020 2020  lit(':').       
+00003e20: 2063 6d6f 6465 3d63 6f6c 6f72 5f63 6f64   cmode=color_cod
+00003e30: 655f 615b 315d 2069 6620 6c65 6e28 636f  e_a[1] if len(co
+00003e40: 6c6f 725f 636f 6465 5f61 2920 3d3d 2032  lor_code_a) == 2
+00003e50: 2065 6c73 6520 4e6f 6e65 0a20 2020 2020   else None.     
+00003e60: 2020 2063 6f6c 6f72 3d63 6f6c 6f72 5f63     color=color_c
+00003e70: 6f64 655f 615b 305d 0a20 2020 2020 2020  ode_a[0].       
+00003e80: 2069 6620 636d 6f64 653a 0a20 2020 2020   if cmode:.     
+00003e90: 2020 2020 2020 2063 6f6c 6f72 5f63 6f64         color_cod
+00003ea0: 653d 636f 6c6f 725f 6462 2e67 6574 2863  e=color_db.get(c
+00003eb0: 6d6f 6465 2c7b 7d29 2e67 6574 2863 6f6c  mode,{}).get(col
+00003ec0: 6f72 290a 2020 2020 2020 2020 656c 7365  or).        else
+00003ed0: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+00003ee0: 6c6f 725f 636f 6465 3d63 6f6c 6f72 5f64  lor_code=color_d
+00003ef0: 622e 6765 7428 2763 6f6c 6f72 272c 7b7d  b.get('color',{}
+00003f00: 292e 6765 7428 636f 6c6f 7229 0a0a 2020  ).get(color)..  
+00003f10: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+00003f20: 6e63 6528 656e 636f 6465 2c28 7374 722c  nce(encode,(str,
+00003f30: 6c69 7374 2c74 7570 6c65 2929 3a20 656e  list,tuple)): en
+00003f40: 636f 6465 3d5b 2775 7466 2d38 272c 276c  code=['utf-8','l
+00003f50: 6174 696e 3127 2c27 7769 6e64 6f77 732d  atin1','windows-
+00003f60: 3132 3532 275d 0a20 2020 2064 6566 205f  1252'].    def _
+00003f70: 6279 7465 3273 7472 5f28 7372 632c 656e  byte2str_(src,en
+00003f80: 636f 6465 2c72 656d 6f76 653d 4e6f 6e65  code,remove=None
+00003f90: 2c63 6f6c 6f72 5f63 6f64 653d 4e6f 6e65  ,color_code=None
+00003fa0: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
+00003fb0: 696e 7374 616e 6365 2865 6e63 6f64 652c  instance(encode,
+00003fc0: 7374 7229 3a20 656e 636f 6465 3d5b 656e  str): encode=[en
+00003fd0: 636f 6465 5d0a 2020 2020 2020 2020 6279  code].        by
+00003fe0: 7465 2c62 6e61 6d65 3d42 7974 654e 616d  te,bname=ByteNam
+00003ff0: 6528 7372 6329 0a20 2020 2020 2020 2069  e(src).        i
+00004000: 6620 6279 7465 3a0a 2020 2020 2020 2020  f byte:.        
+00004010: 2020 2020 6966 2062 6e61 6d65 203d 3d20      if bname == 
+00004020: 2762 7974 6573 273a 0a20 2020 2020 2020  'bytes':.       
+00004030: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00004040: 6e20 656e 636f 6465 3a0a 2020 2020 2020  n encode:.      
+00004050: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00004060: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00004070: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+00004080: 6d6f 7665 3a0a 2020 2020 2020 2020 2020  move:.          
+00004090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000040a0: 2020 7372 635f 643d 7372 632e 6465 636f    src_d=src.deco
+000040b0: 6465 2869 290a 2020 2020 2020 2020 2020  de(i).          
+000040c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000040d0: 2020 6966 2049 7353 616d 6528 7265 6d6f    if IsSame(remo
+000040e0: 7665 2c27 3a77 6869 7465 7370 6163 653a  ve,':whitespace:
+000040f0: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00004100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004110: 2020 2020 7265 7475 726e 2027 2027 2e6a      return ' '.j
+00004120: 6f69 6e28 7372 635f 642e 7370 6c69 7428  oin(src_d.split(
+00004130: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00004140: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00004150: 6c69 6620 7265 6d6f 7665 2069 6e20 7372  lif remove in sr
+00004160: 635f 643a 0a20 2020 2020 2020 2020 2020  c_d:.           
+00004170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004180: 2020 2020 2072 6574 7572 6e20 7372 635f       return src_
+00004190: 642e 7265 706c 6163 6528 7265 6d6f 7665  d.replace(remove
+000041a0: 2c27 2729 0a20 2020 2020 2020 2020 2020  ,'').           
+000041b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000041c0: 7572 6e20 7372 632e 6465 636f 6465 2869  urn src.decode(i
+000041d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000041e0: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
+000041f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004200: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
+00004210: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00004220: 2020 2020 2020 2020 2020 2020 2074 7279               try
+00004230: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00004240: 2020 2020 2020 6966 2072 656d 6f76 653a        if remove:
+00004250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004260: 2020 2020 2020 2020 2073 7263 5f64 3d73           src_d=s
+00004270: 7263 2e64 6563 6f64 6528 626e 616d 6529  rc.decode(bname)
+00004280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004290: 2020 2020 2020 2020 2069 6620 4973 5361           if IsSa
+000042a0: 6d65 2872 656d 6f76 652c 273a 7768 6974  me(remove,':whit
+000042b0: 6573 7061 6365 3a27 293a 0a20 2020 2020  espace:'):.     
+000042c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000042d0: 2020 2020 2020 2072 6574 7572 6e20 2720         return ' 
+000042e0: 272e 6a6f 696e 2873 7263 5f64 2e73 706c  '.join(src_d.spl
+000042f0: 6974 2829 290a 2020 2020 2020 2020 2020  it()).          
+00004300: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00004310: 6966 2072 656d 6f76 6520 696e 2073 7263  if remove in src
+00004320: 5f64 3a0a 2020 2020 2020 2020 2020 2020  _d:.            
+00004330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004340: 7265 7475 726e 2073 7263 5f64 2e72 6570  return src_d.rep
+00004350: 6c61 6365 2872 656d 6f76 652c 2727 290a  lace(remove,'').
+00004360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004370: 2020 2020 7265 7475 726e 2073 7263 2e64      return src.d
+00004380: 6563 6f64 6528 626e 616d 6529 0a20 2020  ecode(bname).   
+00004390: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+000043a0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+000043b0: 2020 2020 2020 2020 2070 6173 730a 2020           pass.  
+000043c0: 2020 2020 2020 656c 6966 2074 7970 6528        elif type(
+000043d0: 7372 6329 2e5f 5f6e 616d 655f 5f3d 3d27  src).__name__=='
+000043e0: 756e 6963 6f64 6527 3a0a 2020 2020 2020  unicode':.      
+000043f0: 2020 2020 2020 666f 7220 6920 696e 2065        for i in e
+00004400: 6e63 6f64 653a 0a20 2020 2020 2020 2020  ncode:.         
+00004410: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+00004420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004430: 6966 2072 656d 6f76 653a 0a20 2020 2020  if remove:.     
+00004440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004450: 2020 2073 7263 5f64 3d73 7263 2e65 6e63     src_d=src.enc
+00004460: 6f64 6528 6929 0a20 2020 2020 2020 2020  ode(i).         
+00004470: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00004480: 6620 4973 5361 6d65 2872 656d 6f76 652c  f IsSame(remove,
+00004490: 273a 7768 6974 6573 7061 6365 3a27 293a  ':whitespace:'):
+000044a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000044b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000044c0: 7572 6e20 2720 272e 6a6f 696e 2873 7263  urn ' '.join(src
+000044d0: 5f64 2e73 706c 6974 2829 290a 2020 2020  _d.split()).    
+000044e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000044f0: 2020 2020 656c 6966 2072 656d 6f76 6520      elif remove 
+00004500: 696e 2073 7263 5f64 3a0a 2020 2020 2020  in src_d:.      
+00004510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004520: 2020 2020 2020 7265 7475 726e 2073 7263        return src
+00004530: 5f64 2e72 6570 6c61 6365 2872 656d 6f76  _d.replace(remov
+00004540: 652c 2727 290a 2020 2020 2020 2020 2020  e,'').          
+00004550: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00004560: 2073 7263 2e65 6e63 6f64 6528 6929 0a20   src.encode(i). 
+00004570: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00004580: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+00004590: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
+000045a0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+000045b0: 7374 616e 6365 2863 6f6c 6f72 5f63 6f64  stance(color_cod
+000045c0: 652c 696e 7429 2061 6e64 2063 6f6c 6f72  e,int) and color
+000045d0: 5f63 6f64 6520 616e 6420 4973 4e6f 6e65  _code and IsNone
+000045e0: 286f 732e 6765 7465 6e76 2827 414e 5349  (os.getenv('ANSI
+000045f0: 5f43 4f4c 4f52 535f 4449 5341 424c 4544  _COLORS_DISABLED
+00004600: 2729 293a 0a20 2020 2020 2020 2020 2020  ')):.           
+00004610: 2072 6573 6574 3d27 2727 5c30 3333 5b30   reset='''\033[0
+00004620: 6d27 2727 0a20 2020 2020 2020 2020 2020  m'''.           
+00004630: 2066 6d74 5f6d 7367 3d27 2727 5c30 3333   fmt_msg='''\033
+00004640: 5b25 646d 2573 2727 270a 2020 2020 2020  [%dm%s'''.      
+00004650: 2020 2020 2020 6d73 673d 666d 745f 6d73        msg=fmt_ms
+00004660: 6720 2520 2863 6f6c 6f72 5f63 6f64 652c  g % (color_code,
+00004670: 7372 6329 0a20 2020 2020 2020 2020 2020  src).           
+00004680: 2072 6574 7572 6e20 6d73 672b 7265 7365   return msg+rese
+00004690: 740a 2020 2020 2020 2020 7265 7475 726e  t.        return
+000046a0: 2073 7263 0a20 2020 2074 7570 6c65 5f64   src.    tuple_d
+000046b0: 6174 613d 4661 6c73 650a 2020 2020 6966  ata=False.    if
+000046c0: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
+000046d0: 7475 706c 6529 3a0a 2020 2020 2020 2020  tuple):.        
+000046e0: 7372 633d 6c69 7374 2873 7263 290a 2020  src=list(src).  
+000046f0: 2020 2020 2020 7475 706c 655f 6461 7461        tuple_data
+00004700: 3d54 7275 650a 2020 2020 6966 2069 7369  =True.    if isi
+00004710: 6e73 7461 6e63 6528 7372 632c 6c69 7374  nstance(src,list
+00004720: 293a 0a20 2020 2020 2020 2066 6f72 2069  ):.        for i
+00004730: 2069 6e20 7261 6e67 6528 302c 6c65 6e28   in range(0,len(
+00004740: 7372 6329 293a 0a20 2020 2020 2020 2020  src)):.         
+00004750: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00004760: 2873 7263 5b69 5d2c 6c69 7374 293a 0a20  (src[i],list):. 
+00004770: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00004780: 7263 5b69 5d3d 5374 7228 7372 635b 695d  rc[i]=Str(src[i]
+00004790: 2c65 6e63 6f64 653d 656e 636f 6465 2c72  ,encode=encode,r
+000047a0: 656d 6f76 653d 7265 6d6f 7665 290a 2020  emove=remove).  
+000047b0: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
+000047c0: 7369 6e73 7461 6e63 6528 7372 635b 695d  sinstance(src[i]
+000047d0: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
+000047e0: 2020 2020 2020 2020 666f 7220 7a20 696e          for z in
+000047f0: 2073 7263 5b69 5d3a 0a20 2020 2020 2020   src[i]:.       
+00004800: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00004810: 6973 696e 7374 616e 6365 2873 7263 5b69  isinstance(src[i
+00004820: 5d5b 7a5d 2c28 6469 6374 2c6c 6973 7429  ][z],(dict,list)
+00004830: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00004840: 2020 2020 2020 2020 2020 2073 7263 5b69             src[i
+00004850: 5d5b 7a5d 3d53 7472 2873 7263 5b69 5d5b  ][z]=Str(src[i][
+00004860: 7a5d 2c65 6e63 6f64 653d 656e 636f 6465  z],encode=encode
+00004870: 2c72 656d 6f76 653d 7265 6d6f 7665 290a  ,remove=remove).
+00004880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004890: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000048a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000048b0: 2020 7372 635b 695d 5b7a 5d3d 5f62 7974    src[i][z]=_byt
+000048c0: 6532 7374 725f 2873 7263 5b69 5d5b 7a5d  e2str_(src[i][z]
+000048d0: 2c65 6e63 6f64 652c 7265 6d6f 7665 290a  ,encode,remove).
+000048e0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000048f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00004900: 2020 7372 635b 695d 3d5f 6279 7465 3273    src[i]=_byte2s
+00004910: 7472 5f28 7372 635b 695d 2c65 6e63 6f64  tr_(src[i],encod
+00004920: 6529 0a20 2020 2065 6c69 6620 6973 696e  e).    elif isin
+00004930: 7374 616e 6365 2873 7263 2c64 6963 7429  stance(src,dict)
+00004940: 3a0a 2020 2020 2020 2020 666f 7220 6920  :.        for i 
+00004950: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
+00004960: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00004970: 6528 7372 635b 695d 2c28 6469 6374 2c6c  e(src[i],(dict,l
+00004980: 6973 7429 293a 0a20 2020 2020 2020 2020  ist)):.         
+00004990: 2020 2020 2020 2073 7263 5b69 5d3d 5374         src[i]=St
+000049a0: 7228 7372 635b 695d 2c65 6e63 6f64 653d  r(src[i],encode=
+000049b0: 656e 636f 6465 2c72 656d 6f76 653d 7265  encode,remove=re
+000049c0: 6d6f 7665 2c63 6f6c 6f72 5f63 6f64 653d  move,color_code=
+000049d0: 636f 6c6f 725f 636f 6465 290a 2020 2020  color_code).    
+000049e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000049f0: 2020 2020 2020 2020 2020 2020 2020 7372                sr
+00004a00: 635b 695d 3d5f 6279 7465 3273 7472 5f28  c[i]=_byte2str_(
+00004a10: 7372 635b 695d 2c65 6e63 6f64 652c 7265  src[i],encode,re
+00004a20: 6d6f 7665 2c63 6f6c 6f72 5f63 6f64 653d  move,color_code=
+00004a30: 636f 6c6f 725f 636f 6465 290a 2020 2020  color_code).    
+00004a40: 656c 7365 3a0a 2020 2020 2020 2020 7372  else:.        sr
+00004a50: 633d 5f62 7974 6532 7374 725f 2873 7263  c=_byte2str_(src
+00004a60: 2c65 6e63 6f64 652c 7265 6d6f 7665 2c63  ,encode,remove,c
+00004a70: 6f6c 6f72 5f63 6f64 653d 636f 6c6f 725f  olor_code=color_
+00004a80: 636f 6465 290a 0a20 2020 2023 2046 6f72  code)..    # For
+00004a90: 6365 206d 616b 6520 616c 6c20 746f 2073  ce make all to s
+00004aa0: 7472 696e 670a 2020 2020 6966 206d 6f64  tring.    if mod
+00004ab0: 6520 6e6f 7420 696e 205b 2766 6f72 6365  e not in ['force
+00004ac0: 272c 2766 6978 272c 2766 6978 6564 275d  ','fix','fixed']
+00004ad0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
+00004ae0: 7372 632c 286c 6973 742c 7475 706c 652c  src,(list,tuple,
+00004af0: 6469 6374 2929 3a0a 2020 2020 2020 2020  dict)):.        
+00004b00: 6966 2074 7570 6c65 5f64 6174 613a 2072  if tuple_data: r
+00004b10: 6574 7572 6e20 7475 706c 6528 7372 6329  eturn tuple(src)
+00004b20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00004b30: 7372 630a 2020 2020 7265 7475 726e 2027  src.    return '
+00004b40: 2727 7b7d 2727 272e 666f 726d 6174 2873  ''{}'''.format(s
+00004b50: 7263 290a 0a64 6566 2053 7472 696e 6773  rc)..def Strings
+00004b60: 282a 7372 632c 6d65 7267 655f 7379 6d62  (*src,merge_symb
+00004b70: 6f6c 3d27 2027 2c65 7863 6c75 6465 733d  ol=' ',excludes=
+00004b80: 4e6f 6e65 2c73 706c 6974 5f73 796d 626f  None,split_symbo
+00004b90: 6c3d 2720 272c 6d6f 6465 3d4e 6f6e 6529  l=' ',mode=None)
+00004ba0: 3a0a 2020 2020 2727 270a 2020 2020 6d65  :.    '''.    me
+00004bb0: 7267 6520 6d75 6c74 6970 6c65 2073 7472  rge multiple str
+00004bc0: 696e 6773 2074 6f20 7369 6e67 6c65 2073  ings to single s
+00004bd0: 7472 696e 670a 2020 2020 6d65 7267 655f  tring.    merge_
+00004be0: 7379 6d62 6f6c 3d27 2027 203a 2064 6566  symbol=' ' : def
+00004bf0: 6175 6c74 2027 2027 2e20 6d65 7267 6520  ault ' '. merge 
+00004c00: 7769 7468 2074 6861 7420 7379 6d62 6f6c  with that symbol
+00004c10: 2062 6574 7765 656e 2073 7472 696e 6773   between strings
+00004c20: 0a20 2020 2073 706c 6974 5f73 796d 626f  .    split_symbo
+00004c30: 6c3d 2720 2720 3a20 6465 6661 756c 7420  l=' ' : default 
+00004c40: 2720 272e 2073 706c 6974 2065 6163 6820  ' '. split each 
+00004c50: 7374 7269 6e67 7320 7769 7468 2074 6865  strings with the
+00004c60: 2073 796d 626f 6c20 666f 7220 6368 6563   symbol for chec
+00004c70: 6b20 6578 636c 7564 6573 0a20 2020 2065  k excludes.    e
+00004c80: 7863 6c75 6465 7320 2020 3a20 6578 636c  xcludes   : excl
+00004c90: 7564 696e 6720 7374 7269 6e67 7328 7374  uding strings(st
+00004ca0: 7220 7769 7468 2063 6f6d 6d61 2c20 6c69  r with comma, li
+00004cb0: 7374 2c20 7475 706c 6529 2c20 7768 6963  st, tuple), whic
+00004cc0: 6820 6973 206e 6f74 2073 7570 706f 7274  h is not support
+00004cd0: 2073 7061 6365 0a20 2020 2027 2727 0a20   space.    '''. 
+00004ce0: 2020 2064 6566 2073 7472 696e 675f 746f     def string_to
+00004cf0: 5f73 6865 6c6c 5f6c 696e 6528 7372 6329  _shell_line(src)
+00004d00: 3a0a 2020 2020 2020 2020 6e65 775f 7368  :.        new_sh
+00004d10: 656c 6c5f 6c69 6e65 3d27 270a 2020 2020  ell_line=''.    
+00004d20: 2020 2020 7372 635f 613d 7372 632e 7370      src_a=src.sp
+00004d30: 6c69 7428 275c 6e27 290a 2020 2020 2020  lit('\n').      
+00004d40: 2020 7372 635f 6d78 3d6c 656e 2873 7263    src_mx=len(src
+00004d50: 5f61 290a 2020 2020 2020 2020 7372 635f  _a).        src_
+00004d60: 6d3d 6c65 6e28 7372 635f 6129 2d31 0a20  m=len(src_a)-1. 
+00004d70: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00004d80: 7261 6e67 6528 302c 7372 635f 6d78 293a  range(0,src_mx):
+00004d90: 0a20 2020 2020 2020 2020 2020 2069 5f61  .            i_a
+00004da0: 3d73 7263 5f61 5b69 5d2e 7374 7269 7028  =src_a[i].strip(
+00004db0: 292e 7370 6c69 7428 290a 2020 2020 2020  ).split().      
+00004dc0: 2020 2020 2020 6966 2069 5f61 3a0a 2020        if i_a:.  
+00004dd0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00004de0: 2069 5f61 5b2d 315d 2069 6e20 5b27 646f   i_a[-1] in ['do
+00004df0: 272c 2774 6865 6e27 2c27 656c 7365 275d  ','then','else']
+00004e00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00004e10: 2020 2020 2020 6e65 775f 7368 656c 6c5f        new_shell_
+00004e20: 6c69 6e65 3d6e 6577 5f73 6865 6c6c 5f6c  line=new_shell_l
+00004e30: 696e 652b 2720 272b 7372 635f 615b 695d  ine+' '+src_a[i]
+00004e40: 2e6c 7374 7269 7028 290a 2020 2020 2020  .lstrip().      
+00004e50: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00004e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004e70: 2020 2020 6966 2069 203e 3d20 7372 635f      if i >= src_
+00004e80: 6d3a 0a20 2020 2020 2020 2020 2020 2020  m:.             
+00004e90: 2020 2020 2020 2020 2020 206e 6577 5f73             new_s
+00004ea0: 6865 6c6c 5f6c 696e 653d 6e65 775f 7368  hell_line=new_sh
+00004eb0: 656c 6c5f 6c69 6e65 2b27 2027 2b73 7263  ell_line+' '+src
+00004ec0: 5f61 5b69 5d2e 6c73 7472 6970 2829 0a20  _a[i].lstrip(). 
+00004ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004ee0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00004ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004f00: 206e 6577 5f73 6865 6c6c 5f6c 696e 653d   new_shell_line=
+00004f10: 6e65 775f 7368 656c 6c5f 6c69 6e65 2b27  new_shell_line+'
+00004f20: 2027 2b73 7263 5f61 5b69 5d2e 6c73 7472   '+src_a[i].lstr
+00004f30: 6970 2829 2b27 3b27 0a20 2020 2020 2020  ip()+';'.       
+00004f40: 2072 6574 7572 6e20 6e65 775f 7368 656c   return new_shel
+00004f50: 6c5f 6c69 6e65 0a0a 2020 2020 6f75 743d  l_line..    out=
+00004f60: 5b5d 0a20 2020 2069 6620 6d6f 6465 203d  [].    if mode =
+00004f70: 3d20 2773 6865 6c6c 273a 0a20 2020 2020  = 'shell':.     
+00004f80: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00004f90: 2873 7263 2c73 7472 293a 0a20 2020 2020  (src,str):.     
+00004fa0: 2020 2020 2020 2072 6574 7572 6e20 7374         return st
+00004fb0: 7269 6e67 5f74 6f5f 7368 656c 6c5f 6c69  ring_to_shell_li
+00004fc0: 6e65 2873 7263 290a 2020 2020 2020 2020  ne(src).        
+00004fd0: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00004fe0: 7372 632c 7475 706c 6529 2061 6e64 206c  src,tuple) and l
+00004ff0: 656e 2873 7263 2920 3d3d 2031 2061 6e64  en(src) == 1 and
+00005000: 2069 7369 6e73 7461 6e63 6528 7372 635b   isinstance(src[
+00005010: 305d 2c73 7472 293a 0a20 2020 2020 2020  0],str):.       
+00005020: 2020 2020 2072 6574 7572 6e20 7374 7269       return stri
+00005030: 6e67 5f74 6f5f 7368 656c 6c5f 6c69 6e65  ng_to_shell_line
+00005040: 2873 7263 5b30 5d29 0a20 2020 2065 6c73  (src[0]).    els
+00005050: 653a 0a20 2020 2020 2020 2069 6620 6973  e:.        if is
+00005060: 696e 7374 616e 6365 2865 7863 6c75 6465  instance(exclude
+00005070: 732c 2873 7472 2c6c 6973 742c 7475 706c  s,(str,list,tupl
+00005080: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
+00005090: 2069 6620 6973 696e 7374 616e 6365 2865   if isinstance(e
+000050a0: 7863 6c75 6465 732c 7374 7229 3a0a 2020  xcludes,str):.  
+000050b0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+000050c0: 636c 7564 6573 3d65 7863 6c75 6465 732e  cludes=excludes.
+000050d0: 7370 6c69 7428 272c 2729 0a20 2020 2020  split(',').     
+000050e0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000050f0: 2865 7863 6c75 6465 732c 286c 6973 742c  (excludes,(list,
+00005100: 7475 706c 6529 2920 616e 6420 6578 636c  tuple)) and excl
+00005110: 7564 6573 3a0a 2020 2020 2020 2020 2020  udes:.          
+00005120: 2020 666f 7220 6920 696e 2073 7263 3a0a    for i in src:.
+00005130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005140: 695f 6f3d 5b5d 0a20 2020 2020 2020 2020  i_o=[].         
+00005150: 2020 2020 2020 2069 6620 5479 7065 2869         if Type(i
+00005160: 2c28 2773 7472 272c 2762 7974 6573 2729  ,('str','bytes')
+00005170: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00005180: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
+00005190: 2053 706c 6974 2869 2c73 706c 6974 5f73   Split(i,split_s
+000051a0: 796d 626f 6c29 3a0a 2020 2020 2020 2020  ymbol):.        
+000051b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000051c0: 6966 2049 7349 6e28 6969 2c65 7863 6c75  if IsIn(ii,exclu
+000051d0: 6465 7329 3a20 636f 6e74 696e 7565 0a20  des): continue. 
+000051e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000051f0: 2020 2020 2020 2069 5f6f 2e61 7070 656e         i_o.appen
+00005200: 6428 6969 290a 2020 2020 2020 2020 2020  d(ii).          
+00005210: 2020 2020 2020 6966 2069 5f6f 3a20 6f75        if i_o: ou
+00005220: 742e 6170 7065 6e64 284a 6f69 6e28 695f  t.append(Join(i_
+00005230: 6f2c 7379 6d62 6f6c 3d73 706c 6974 5f73  o,symbol=split_s
+00005240: 796d 626f 6c29 290a 2020 2020 2020 2020  ymbol)).        
+00005250: 2020 2020 7265 7475 726e 204a 6f69 6e28      return Join(
+00005260: 6f75 742c 7379 6d62 6f6c 3d6d 6572 6765  out,symbol=merge
+00005270: 5f73 796d 626f 6c29 0a20 2020 2020 2020  _symbol).       
+00005280: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00005290: 2020 2072 6574 7572 6e20 4a6f 696e 2873     return Join(s
+000052a0: 7263 2c73 796d 626f 6c3d 6d65 7267 655f  rc,symbol=merge_
+000052b0: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+000052c0: 0a20 2020 2020 2020 2020 2020 200a 6465  .            .de
+000052d0: 6620 4465 6661 756c 7428 612c 623d 4e6f  f Default(a,b=No
+000052e0: 6e65 293a 0a20 2020 2027 2727 0a20 2020  ne):.    '''.   
+000052f0: 204d 616b 6520 6120 7265 7475 726e 2076   Make a return v
+00005300: 616c 7565 0a20 2020 2062 2069 7320 6f72  alue.    b is or
+00005310: 6720 7468 656e 2072 6574 7572 6e20 6f72  g then return or
+00005320: 6967 696e 616c 2076 616c 7565 2061 0a20  iginal value a. 
+00005330: 2020 2069 6620 6220 6e6f 7420 6f72 6720     if b not org 
+00005340: 7468 656e 2072 6574 7572 6e20 6220 0a20  then return b . 
+00005350: 2020 2027 2727 0a20 2020 2069 6620 6220     '''.    if b 
+00005360: 696e 205b 276f 7267 272c 276f 7269 6769  in ['org','origi
+00005370: 6e61 6c27 2c7b 276f 7267 277d 5d3a 0a20  nal',{'org'}]:. 
+00005380: 2020 2020 2020 2072 6574 7572 6e20 610a         return a.
+00005390: 2020 2020 7265 7475 726e 2062 0a0a 6465      return b..de
+000053a0: 6620 5065 656c 2869 2c6d 6f64 653d 5472  f Peel(i,mode=Tr
+000053b0: 7565 2c64 6566 6175 6c74 3d27 6f72 6727  ue,default='org'
+000053c0: 2c65 7272 3d54 7275 652c 6f75 7470 7574  ,err=True,output
+000053d0: 5f63 6865 636b 3d54 7275 6529 3a0a 2020  _check=True):.  
+000053e0: 2020 2727 270a 2020 2020 5065 656c 206c    '''.    Peel l
+000053f0: 6973 742c 7475 706c 652c 6469 6374 2074  ist,tuple,dict t
+00005400: 6f20 6461 7461 2c20 6966 206e 6f74 2070  o data, if not p
+00005410: 6565 6c61 626c 6520 7468 656e 2072 6574  eelable then ret
+00005420: 7572 6e20 6f72 6967 696e 616c 2064 6174  urn original dat
+00005430: 610a 2020 2020 2020 2d20 7369 6e67 6c65  a.      - single
+00005440: 2064 6174 6120 3a20 6a75 7374 2067 6574   data : just get
+00005450: 2064 6174 610a 2020 2020 2020 2d20 6d75   data.      - mu
+00005460: 6c74 6920 6461 7461 2020 3a20 6765 7420  lti data  : get 
+00005470: 6669 7273 7420 6461 7461 0a20 2020 2069  first data.    i
+00005480: 6620 7065 656c 6564 2064 6174 6120 6973  f peeled data is
+00005490: 204e 6f6e 6520 7468 656e 2072 6574 7572   None then retur
+000054a0: 6e20 6465 6661 756c 740a 2020 2020 6465  n default.    de
+000054b0: 6661 756c 7420 3a20 276f 7267 2728 6465  fault : 'org'(de
+000054c0: 6661 756c 7429 203a 2072 6574 7572 6e20  fault) : return 
+000054d0: 6f72 6967 696e 616c 2064 6174 610a 2020  original data.  
+000054e0: 2020 6572 7220 2020 2020 3a20 5472 7565    err     : True
+000054f0: 203a 2864 6566 6175 6c74 2920 6966 206e   :(default) if n
+00005500: 6f74 2073 696e 676c 6520 6461 7461 2074  ot single data t
+00005510: 6865 6e20 7265 7475 726e 2064 6566 6175  hen return defau
+00005520: 6c74 2c20 4661 6c73 653a 2077 6861 7465  lt, False: whate
+00005530: 7665 7220 6974 2077 696c 6c20 7265 7475  ver it will retu
+00005540: 726e 2066 6972 7374 2064 6174 610a 2020  rn first data.  
+00005550: 2020 6d6f 6465 2020 2020 3a20 5472 7565    mode    : True
+00005560: 203a 2864 6566 6175 6c74 292c 2070 6565   :(default), pee
+00005570: 6c69 6e67 2064 6174 612c 2046 616c 7365  ling data, False
+00005580: 3a20 6e6f 7420 7065 656c 696e 6728 7265  : not peeling(re
+00005590: 7475 726e 206f 7269 6769 6e61 6c29 0a20  turn original). 
+000055a0: 2020 206f 7574 7075 745f 6368 6563 6b3a     output_check:
+000055b0: 2054 7275 653a 2864 6566 6175 6c74 2920   True:(default) 
+000055c0: 4966 2070 6565 6c65 6420 6461 7461 2069  If peeled data i
+000055d0: 7320 6c69 7374 2c74 7570 6c65 2c64 6963  s list,tuple,dic
+000055e0: 7420 7468 656e 2072 6574 7572 6e20 6465  t then return de
+000055f0: 6661 756c 742c 2046 616c 7365 3a20 6a75  fault, False: ju
+00005600: 7374 2072 6574 7572 6e20 7065 656c 6564  st return peeled
+00005610: 2064 6174 610a 2020 2020 2727 270a 2020   data.    '''.  
+00005620: 2020 6966 206d 6f64 6520 6973 2046 616c    if mode is Fal
+00005630: 7365 3a20 7265 7475 726e 2069 0a20 2020  se: return i.   
+00005640: 2065 6c69 6620 6d6f 6465 203d 3d20 2766   elif mode == 'f
+00005650: 6f72 6365 273a 0a20 2020 2020 2020 2065  orce':.        e
+00005660: 7272 3d46 616c 7365 0a20 2020 2020 2020  rr=False.       
+00005670: 206f 7574 7075 745f 6368 6563 6b3d 4661   output_check=Fa
+00005680: 6c73 650a 2020 2020 6966 2069 7369 6e73  lse.    if isins
+00005690: 7461 6e63 6528 692c 286c 6973 742c 7475  tance(i,(list,tu
+000056a0: 706c 652c 6469 6374 2929 3a0a 2020 2020  ple,dict)):.    
+000056b0: 2020 2020 2345 7272 6f72 2063 6f6e 6469      #Error condi
+000056c0: 7469 6f6e 0a20 2020 2020 2020 2069 6620  tion.        if 
+000056d0: 6c65 6e28 6929 203d 3d20 303a 2072 6574  len(i) == 0: ret
+000056e0: 7572 6e20 4465 6661 756c 7428 692c 6465  urn Default(i,de
+000056f0: 6661 756c 7429 0a20 2020 2020 2020 2069  fault).        i
+00005700: 6620 6c65 6e28 6929 203e 2031 3a0a 2020  f len(i) > 1:.  
+00005710: 2020 2020 2020 2020 2020 6966 2065 7272            if err
+00005720: 2069 7320 5472 7565 3a20 7265 7475 726e   is True: return
+00005730: 2044 6566 6175 6c74 2869 2c64 6566 6175   Default(i,defau
+00005740: 6c74 290a 2020 2020 2020 2020 7274 3d69  lt).        rt=i
+00005750: 5b30 5d20 6966 2069 7369 6e73 7461 6e63  [0] if isinstanc
+00005760: 6528 692c 286c 6973 742c 7475 706c 6529  e(i,(list,tuple)
+00005770: 2920 656c 7365 2069 5b4e 6578 7428 6929  ) else i[Next(i)
+00005780: 5d0a 2020 2020 2020 2020 6966 206f 7574  ].        if out
+00005790: 7075 745f 6368 6563 6b20 6973 2054 7275  put_check is Tru
+000057a0: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
+000057b0: 4368 6563 6b20 6f75 7470 7574 2064 6174  Check output dat
+000057c0: 6120 666f 726d 6174 0a20 2020 2020 2020  a format.       
+000057d0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+000057e0: 6365 2872 742c 286c 6973 742c 7475 706c  ce(rt,(list,tupl
+000057f0: 652c 6469 6374 2929 3a0a 2020 2020 2020  e,dict)):.      
+00005800: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00005810: 2044 6566 6175 6c74 2869 2c64 6566 6175   Default(i,defau
+00005820: 6c74 290a 2020 2020 2020 2020 7265 7475  lt).        retu
+00005830: 726e 2072 740a 2020 2020 656c 7365 3a0a  rn rt.    else:.
+00005840: 2020 2020 2020 2020 234e 6f74 2070 6565          #Not pee
+00005850: 6c61 626c 650a 2020 2020 2020 2020 7265  lable.        re
+00005860: 7475 726e 2069 0a0a 6465 6620 496e 7428  turn i..def Int(
+00005870: 692c 6465 6661 756c 743d 276f 7267 272c  i,default='org',
+00005880: 7379 6d3d 4e6f 6e65 2c65 7272 3d46 616c  sym=None,err=Fal
+00005890: 7365 293a 0a20 2020 2027 2727 0a20 2020  se):.    '''.   
+000058a0: 2043 6f6e 7665 7274 2064 6174 6120 746f   Convert data to
+000058b0: 2049 6e74 2064 6174 6120 7768 656e 2070   Int data when p
+000058c0: 6f73 7369 626c 652e 2069 6620 6e6f 7420  ossible. if not 
+000058d0: 7468 656e 2072 6574 7572 6e20 6465 6661  then return defa
+000058e0: 756c 7420 286f 7269 6769 6e61 6c20 6461  ult (original da
+000058f0: 7461 290a 2020 2020 7375 7070 6f72 7420  ta).    support 
+00005900: 6461 7461 2074 7970 653a 2069 6e74 2c66  data type: int,f
+00005910: 6c6f 6174 2c64 6967 6974 206e 756d 6265  loat,digit numbe
+00005920: 722c 6c69 7374 2c74 7570 6c65 0a20 2020  r,list,tuple.   
+00005930: 2064 6566 6175 6c74 3a20 2864 6566 6175   default: (defau
+00005940: 6c74 206f 7267 290a 2020 2020 2020 2020  lt org).        
+00005950: 6f72 6720 3a20 6661 696c 2074 6865 6e20  org : fail then 
+00005960: 7265 7475 726e 206f 7220 6b65 6570 696e  return or keepin
+00005970: 6720 7468 6520 696e 7075 7420 6461 7461  g the input data
+00005980: 0a20 2020 2020 2020 2054 7275 652c 4661  .        True,Fa
+00005990: 6c73 652c 4e6f 6e65 3a20 6661 696c 2074  lse,None: fail t
+000059a0: 6865 6e20 7265 7475 726e 2064 6566 6175  hen return defau
+000059b0: 6c74 2076 616c 7565 2069 6e20 7369 6e67  lt value in sing
+000059c0: 6c65 2064 6174 6120 6f72 2069 676e 6f72  le data or ignor
+000059d0: 6520 7468 6520 6974 656d 2069 6e20 6c69  e the item in li
+000059e0: 7374 0a20 2020 2073 796d 2020 2020 203a  st.    sym     :
+000059f0: 2073 706c 6974 2073 796d 626f 6c20 7768   split symbol wh
+00005a00: 656e 2069 6e70 7574 2069 7320 7374 7269  en input is stri
+00005a10: 6e67 0a20 2020 2065 7272 2020 2020 203a  ng.    err     :
+00005a20: 200a 2020 2020 2020 2020 4661 6c73 653a   .        False:
+00005a30: 2072 6570 6c61 6365 2064 6174 6120 666f   replace data fo
+00005a40: 7220 706f 7373 6962 6c65 2070 6f73 6974  r possible posit
+00005a50: 696f 6e73 0a20 2020 2020 2020 2054 7275  ions.        Tru
+00005a60: 6520 3a20 6966 2063 6f6e 7665 7274 2065  e : if convert e
+00005a70: 7272 6f72 2069 6e20 6c69 7374 2f74 7570  rror in list/tup
+00005a80: 6c65 2074 6865 6e20 7265 7475 726e 2064  le then return d
+00005a90: 6566 6175 6c74 0a20 2020 2027 2727 0a20  efault.    '''. 
+00005aa0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00005ab0: 2869 2c62 6f6f 6c29 3a20 7265 7475 726e  (i,bool): return
+00005ac0: 2044 6566 6175 6c74 2869 2c64 6566 6175   Default(i,defau
+00005ad0: 6c74 290a 2020 2020 6966 2069 7369 6e73  lt).    if isins
+00005ae0: 7461 6e63 6528 692c 696e 7429 3a20 7265  tance(i,int): re
+00005af0: 7475 726e 2069 0a20 2020 2069 5f74 7970  turn i.    i_typ
+00005b00: 653d 5479 7065 4e61 6d65 2869 290a 2020  e=TypeName(i).  
+00005b10: 2020 6966 2069 5f74 7970 6520 696e 2028    if i_type in (
+00005b20: 2773 7472 272c 2762 7974 6573 2729 3a0a  'str','bytes'):.
+00005b30: 2020 2020 2020 2020 6966 2073 796d 3a0a          if sym:.
+00005b40: 2020 2020 2020 2020 2020 2020 7379 6d3d              sym=
+00005b50: 4279 7465 7328 7379 6d29 2069 6620 695f  Bytes(sym) if i_
+00005b60: 7479 7065 203d 3d20 2762 7974 6573 2720  type == 'bytes' 
+00005b70: 656c 7365 2053 7472 2873 796d 290a 2020  else Str(sym).  
+00005b80: 2020 2020 2020 2020 2020 693d 692e 7370            i=i.sp
+00005b90: 6c69 7428 7379 6d29 0a20 2020 2020 2020  lit(sym).       
+00005ba0: 2020 2020 2069 5f74 7970 653d 5479 7065       i_type=Type
+00005bb0: 4e61 6d65 2869 290a 2020 2020 2020 2020  Name(i).        
+00005bc0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00005bd0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+00005be0: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
+00005bf0: 7428 666c 6f61 7428 6929 290a 2020 2020  t(float(i)).    
+00005c00: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+00005c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c20: 7265 7475 726e 2044 6566 6175 6c74 2869  return Default(i
+00005c30: 2c64 6566 6175 6c74 290a 2020 2020 6966  ,default).    if
+00005c40: 2069 5f74 7970 6520 696e 2028 276c 6973   i_type in ('lis
+00005c50: 7427 2c27 7475 706c 6527 293a 0a20 2020  t','tuple'):.   
+00005c60: 2020 2020 2074 7570 6c65 5f6f 7574 3d54       tuple_out=T
+00005c70: 7275 6520 6966 2069 5f74 7970 6520 3d3d  rue if i_type ==
+00005c80: 2027 7475 706c 6527 2065 6c73 6520 4661   'tuple' else Fa
+00005c90: 6c73 650a 2020 2020 2020 2020 7274 3d5b  lse.        rt=[
+00005ca0: 5d0a 2020 2020 2020 2020 666f 7220 6120  ].        for a 
+00005cb0: 696e 2069 3a0a 2020 2020 2020 2020 2020  in i:.          
+00005cc0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00005cd0: 2020 2020 2072 742e 6170 7065 6e64 2869       rt.append(i
+00005ce0: 6e74 2866 6c6f 6174 2861 2929 290a 2020  nt(float(a))).  
+00005cf0: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+00005d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005d10: 6966 2065 7272 3a20 7265 7475 726e 2044  if err: return D
+00005d20: 6566 6175 6c74 2869 2c64 6566 6175 6c74  efault(i,default
+00005d30: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00005d40: 2023 7274 2e61 7070 656e 6428 6129 0a20   #rt.append(a). 
+00005d50: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+00005d60: 2e61 7070 656e 6428 4465 6661 756c 7428  .append(Default(
+00005d70: 612c 6465 6661 756c 7429 290a 2020 2020  a,default)).    
+00005d80: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
+00005d90: 2872 7429 2069 6620 7475 706c 655f 6f75  (rt) if tuple_ou
+00005da0: 7420 656c 7365 2072 740a 2020 2020 7265  t else rt.    re
+00005db0: 7475 726e 2044 6566 6175 6c74 2869 2c64  turn Default(i,d
+00005dc0: 6566 6175 6c74 290a 0a64 6566 204a 6f69  efault)..def Joi
+00005dd0: 6e28 2a69 6e70 732c 7379 6d62 6f6c 3d27  n(*inps,symbol='
+00005de0: 5f2d 5f27 2c62 7974 653d 4e6f 6e65 2c69  _-_',byte=None,i
+00005df0: 676e 6f72 655f 7479 7065 3d28 6469 6374  gnore_type=(dict
+00005e00: 2c62 6f6f 6c2c 4e6f 6e65 292c 6967 6e6f  ,bool,None),igno
+00005e10: 7265 5f64 6174 613d 2829 2c61 7070 656e  re_data=(),appen
+00005e20: 645f 6672 6f6e 743d 2727 2c61 7070 656e  d_front='',appen
+00005e30: 645f 656e 643d 2727 2c64 6566 6175 6c74  d_end='',default
+00005e40: 3d4e 6f6e 652c 6572 723d 4661 6c73 6529  =None,err=False)
+00005e50: 3a0a 2020 2020 2727 270a 2020 2020 5369  :.    '''.    Si
+00005e60: 6d69 6c61 7220 6173 2027 7379 6d62 6f6c  milar as 'symbol
+00005e70: 272e 6a6f 696e 285b 6c69 7374 5d29 2066  '.join([list]) f
+00005e80: 756e 6374 696f 6e0a 2020 2020 2727 270a  unction.    '''.
+00005e90: 2020 2020 6465 6620 5f69 676e 6f72 655f      def _ignore_
+00005ea0: 2873 7263 2c69 676e 6f72 655f 7479 7065  (src,ignore_type
+00005eb0: 2c69 676e 6f72 655f 6461 7461 293a 0a20  ,ignore_data):. 
+00005ec0: 2020 2020 2020 2072 743d 5b5d 0a20 2020         rt=[].   
+00005ed0: 2020 2020 2066 6f72 2069 2069 6e20 7372       for i in sr
+00005ee0: 633a 0a20 2020 2020 2020 2020 2020 2069  c:.            i
+00005ef0: 6620 7479 7065 2869 2920 696e 2069 676e  f type(i) in ign
+00005f00: 6f72 655f 7479 7065 3a20 636f 6e74 696e  ore_type: contin
+00005f10: 7565 0a20 2020 2020 2020 2020 2020 2065  ue.            e
+00005f20: 6c69 6620 6967 6e6f 7265 5f64 6174 6120  lif ignore_data 
+00005f30: 616e 6420 6920 696e 2069 676e 6f72 655f  and i in ignore_
+00005f40: 6461 7461 3a20 636f 6e74 696e 7565 0a20  data: continue. 
+00005f50: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+00005f60: 7065 6e64 2869 290a 2020 2020 2020 2020  pend(i).        
+00005f70: 7265 7475 726e 2072 740a 2020 2020 6966  return rt.    if
+00005f80: 2069 676e 6f72 655f 7479 7065 3a0a 2020   ignore_type:.  
+00005f90: 2020 2020 2020 6966 204e 6f6e 6520 696e        if None in
+00005fa0: 2069 676e 6f72 655f 7479 7065 3a0a 2020   ignore_type:.  
+00005fb0: 2020 2020 2020 2020 2020 6967 6e6f 7265            ignore
+00005fc0: 5f74 7970 653d 6c69 7374 2869 676e 6f72  _type=list(ignor
+00005fd0: 655f 7479 7065 290a 2020 2020 2020 2020  e_type).        
+00005fe0: 2020 2020 6967 6e6f 7265 5f74 7970 655b      ignore_type[
+00005ff0: 6967 6e6f 7265 5f74 7970 652e 696e 6465  ignore_type.inde
+00006000: 7828 4e6f 6e65 295d 3d74 7970 6528 4e6f  x(None)]=type(No
+00006010: 6e65 290a 2020 2020 7372 633d 5b5d 0a20  ne).    src=[]. 
+00006020: 2020 2069 6620 6c65 6e28 696e 7073 2920     if len(inps) 
+00006030: 3d3d 2031 2061 6e64 2069 7369 6e73 7461  == 1 and isinsta
+00006040: 6e63 6528 696e 7073 5b30 5d2c 286c 6973  nce(inps[0],(lis
+00006050: 742c 7475 706c 6529 293a 0a20 2020 2020  t,tuple)):.     
+00006060: 2020 2073 7263 3d73 7263 2b5f 6967 6e6f     src=src+_igno
+00006070: 7265 5f28 696e 7073 5b30 5d2c 6967 6e6f  re_(inps[0],igno
+00006080: 7265 5f74 7970 652c 6967 6e6f 7265 5f64  re_type,ignore_d
+00006090: 6174 6129 0a20 2020 2023 2069 6620 6d69  ata).    # if mi
+000060a0: 7373 696e 6720 7379 6d62 6f6c 206f 7074  ssing symbol opt
+000060b0: 696f 6e20 7468 656e 206a 7573 7420 7461  ion then just ta
+000060c0: 6b65 2065 6e64 206f 6620 696e 7075 7473  ke end of inputs
+000060d0: 0a20 2020 2065 6c69 6620 6c65 6e28 696e  .    elif len(in
+000060e0: 7073 2920 3e3d 323a 0a20 2020 2020 2020  ps) >=2:.       
+000060f0: 206d 783d 6c65 6e28 696e 7073 290a 2020   mx=len(inps).  
+00006100: 2020 2020 2020 6966 2073 796d 626f 6c3d        if symbol=
+00006110: 3d27 5f2d 5f27 3a0a 2020 2020 2020 2020  ='_-_':.        
+00006120: 2020 2020 7379 6d62 6f6c 3d69 6e70 735b      symbol=inps[
+00006130: 2d31 5d0a 2020 2020 2020 2020 2020 2020  -1].            
+00006140: 6d78 3d6d 782d 310a 2020 2020 2020 2020  mx=mx-1.        
+00006150: 666f 7220 6920 696e 2069 6e70 735b 3a6d  for i in inps[:m
+00006160: 785d 3a0a 2020 2020 2020 2020 2020 2020  x]:.            
+00006170: 6966 2069 7369 6e73 7461 6e63 6528 692c  if isinstance(i,
+00006180: 286c 6973 742c 7475 706c 6529 293a 0a20  (list,tuple)):. 
+00006190: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000061a0: 7263 3d73 7263 2b5f 6967 6e6f 7265 5f28  rc=src+_ignore_(
+000061b0: 692c 6967 6e6f 7265 5f74 7970 652c 6967  i,ignore_type,ig
+000061c0: 6e6f 7265 5f64 6174 6129 0a20 2020 2020  nore_data).     
+000061d0: 2020 2020 2020 2065 6c69 6620 7479 7065         elif type
+000061e0: 2869 2920 696e 2069 676e 6f72 655f 7479  (i) in ignore_ty
+000061f0: 7065 206f 7220 6920 696e 2069 676e 6f72  pe or i in ignor
+00006200: 655f 6461 7461 3a0a 2020 2020 2020 2020  e_data:.        
+00006210: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
+00006220: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00006230: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00006240: 2020 2073 7263 2e61 7070 656e 6428 6929     src.append(i)
+00006250: 0a20 2020 2023 204f 5220 2020 200a 2020  .    # OR    .  
+00006260: 2020 2320 4f6e 6c79 2074 776f 2069 6e70    # Only two inp
+00006270: 7574 2061 6e64 2066 6972 7374 2069 7320  ut and first is 
+00006280: 6c69 7374 2074 6865 6e20 6d69 7373 696e  list then missin
+00006290: 6720 7379 6d62 6f6c 206f 7074 696f 6e20  g symbol option 
+000062a0: 7468 656e 206c 6173 7420 6f6e 6520 6973  then last one is
+000062b0: 2073 796d 626f 6c0a 2020 2020 2365 6c69   symbol.    #eli
+000062c0: 6620 6c65 6e28 696e 7073 2920 3d3d 2032  f len(inps) == 2
+000062d0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
+000062e0: 696e 7073 5b30 5d2c 286c 6973 742c 7475  inps[0],(list,tu
+000062f0: 706c 6529 2920 616e 6420 7379 6d62 6f6c  ple)) and symbol
+00006300: 3d3d 275f 2d5f 273a 0a20 2020 2023 2020  =='_-_':.    #  
+00006310: 2020 7372 633d 7372 632b 5f69 676e 6f72    src=src+_ignor
+00006320: 655f 2869 6e70 735b 305d 2c69 676e 6f72  e_(inps[0],ignor
+00006330: 655f 7479 7065 2c69 676e 6f72 655f 6461  e_type,ignore_da
+00006340: 7461 290a 2020 2020 2320 2020 2073 796d  ta).    #    sym
+00006350: 626f 6c3d 696e 7073 5b31 5d0a 2020 2020  bol=inps[1].    
+00006360: 2365 6c73 653a 0a20 2020 2023 2020 2020  #else:.    #    
+00006370: 666f 7220 6969 2069 6e20 696e 7073 3a0a  for ii in inps:.
+00006380: 2020 2020 2320 2020 2020 2020 2069 6620      #        if 
+00006390: 6973 696e 7374 616e 6365 2869 692c 286c  isinstance(ii,(l
+000063a0: 6973 742c 7475 706c 6529 293a 0a20 2020  ist,tuple)):.   
+000063b0: 2023 2020 2020 2020 2020 2020 2020 7372   #            sr
+000063c0: 633d 7372 632b 5f69 676e 6f72 655f 2869  c=src+_ignore_(i
+000063d0: 692c 6967 6e6f 7265 5f74 7970 652c 6967  i,ignore_type,ig
+000063e0: 6e6f 7265 5f64 6174 6129 0a20 2020 2023  nore_data).    #
+000063f0: 2020 2020 2020 2020 656c 6966 2074 7970          elif typ
+00006400: 6528 6969 2920 696e 2069 676e 6f72 655f  e(ii) in ignore_
+00006410: 7479 7065 3a0a 2020 2020 2320 2020 2020  type:.    #     
+00006420: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+00006430: 2020 2020 2320 2020 2020 2020 2065 6c69      #        eli
+00006440: 6620 6969 2069 6e20 6967 6e6f 7265 5f64  f ii in ignore_d
+00006450: 6174 613a 0a20 2020 2023 2020 2020 2020  ata:.    #      
+00006460: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+00006470: 2020 2023 2020 2020 2020 2020 656c 7365     #        else
+00006480: 3a0a 2020 2020 2320 2020 2020 2020 2020  :.    #         
+00006490: 2020 2073 7263 2e61 7070 656e 6428 6969     src.append(ii
+000064a0: 290a 2020 2020 2369 6620 7379 6d62 6f6c  ).    #if symbol
+000064b0: 3d3d 275f 2d5f 273a 2073 796d 626f 6c3d  =='_-_': symbol=
+000064c0: 2727 0a20 2020 2072 743d 2727 0a20 2020  ''.    rt=''.   
+000064d0: 2069 6620 6973 696e 7374 616e 6365 2862   if isinstance(b
+000064e0: 7974 652c 626f 6f6c 293a 0a20 2020 2020  yte,bool):.     
+000064f0: 2020 2069 6620 6279 7465 3a0a 2020 2020     if byte:.    
+00006500: 2020 2020 2020 2020 7274 3d62 2727 0a20          rt=b''. 
+00006510: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
+00006520: 6c3d 4279 7465 7328 7379 6d62 6f6c 290a  l=Bytes(symbol).
+00006530: 2020 2020 2020 2020 2020 2020 6170 7065              appe
+00006540: 6e64 5f66 726f 6e74 3d42 7974 6573 2861  nd_front=Bytes(a
+00006550: 7070 656e 645f 6672 6f6e 7429 0a20 2020  ppend_front).   
+00006560: 2020 2020 2020 2020 2061 7070 656e 645f           append_
+00006570: 656e 643d 4279 7465 7328 6170 7065 6e64  end=Bytes(append
+00006580: 5f65 6e64 290a 2020 2020 2020 2020 656c  _end).        el
+00006590: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000065a0: 7379 6d62 6f6c 3d53 7472 2873 796d 626f  symbol=Str(symbo
+000065b0: 6c29 0a20 2020 2020 2020 2020 2020 2061  l).            a
+000065c0: 7070 656e 645f 6672 6f6e 743d 5374 7228  ppend_front=Str(
+000065d0: 6170 7065 6e64 5f66 726f 6e74 290a 2020  append_front).  
+000065e0: 2020 2020 2020 2020 2020 6170 7065 6e64            append
+000065f0: 5f65 6e64 3d53 7472 2861 7070 656e 645f  _end=Str(append_
+00006600: 656e 6429 0a20 2020 2065 6c73 653a 0a20  end).    else:. 
+00006610: 2020 2020 2020 2062 7974 653d 4661 6c73         byte=Fals
+00006620: 650a 2020 2020 2020 2020 6966 2073 7263  e.        if src
+00006630: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
+00006640: 7372 632c 286c 6973 742c 7475 706c 6529  src,(list,tuple)
+00006650: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+00006660: 6620 4973 4279 7465 7328 7372 635b 305d  f IsBytes(src[0]
+00006670: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00006680: 2020 2072 743d 6227 270a 2020 2020 2020     rt=b''.      
+00006690: 2020 2020 2020 2020 2020 6279 7465 3d54            byte=T
+000066a0: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+000066b0: 2020 2020 7379 6d62 6f6c 3d42 7974 6573      symbol=Bytes
+000066c0: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+000066d0: 2020 2020 2020 2020 2061 7070 656e 645f           append_
+000066e0: 6672 6f6e 743d 4279 7465 7328 6170 7065  front=Bytes(appe
+000066f0: 6e64 5f66 726f 6e74 290a 2020 2020 2020  nd_front).      
+00006700: 2020 2020 2020 2020 2020 6170 7065 6e64            append
+00006710: 5f65 6e64 3d42 7974 6573 2861 7070 656e  _end=Bytes(appen
+00006720: 645f 656e 6429 0a20 2020 2069 6e69 745f  d_end).    init_
+00006730: 6e6f 6e65 3d4e 6f6e 650a 2020 2020 666f  none=None.    fo
+00006740: 7220 6920 696e 2073 7263 3a0a 2020 2020  r i in src:.    
+00006750: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+00006760: 7461 6e63 6528 692c 2873 7472 2c62 7974  tance(i,(str,byt
+00006770: 6573 2929 3a0a 2020 2020 2020 2020 2020  es)):.          
+00006780: 2020 6966 2065 7272 3a0a 2020 2020 2020    if err:.      
+00006790: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000067a0: 2044 6566 6175 6c74 2869 6e70 732c 6465   Default(inps,de
+000067b0: 6661 756c 7429 0a20 2020 2020 2020 2020  fault).         
+000067c0: 2020 2069 3d27 7b7d 272e 666f 726d 6174     i='{}'.format
+000067d0: 2869 290a 2020 2020 2020 2020 6966 2062  (i).        if b
+000067e0: 7974 653a 0a20 2020 2020 2020 2020 2020  yte:.           
+000067f0: 2069 3d42 7974 6573 2869 290a 2020 2020   i=Bytes(i).    
+00006800: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00006810: 2020 2020 2020 693d 5374 7228 6929 0a20        i=Str(i). 
+00006820: 2020 2020 2020 2069 6620 696e 6974 5f6e         if init_n
+00006830: 6f6e 6520 6973 204e 6f6e 653a 0a20 2020  one is None:.   
+00006840: 2020 2020 2020 2020 2072 743d 690a 2020           rt=i.  
+00006850: 2020 2020 2020 2020 2020 696e 6974 5f6e            init_n
+00006860: 6f6e 653d 310a 2020 2020 2020 2020 656c  one=1.        el
+00006870: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00006880: 7274 3d72 742b 7379 6d62 6f6c 2b61 7070  rt=rt+symbol+app
+00006890: 656e 645f 6672 6f6e 742b 692b 6170 7065  end_front+i+appe
+000068a0: 6e64 5f65 6e64 0a20 2020 2072 6574 7572  nd_end.    retur
+000068b0: 6e20 7274 0a0a 6465 6620 4669 7849 6e64  n rt..def FixInd
+000068c0: 6578 2873 7263 2c69 6478 2c64 6566 6175  ex(src,idx,defau
+000068d0: 6c74 3d46 616c 7365 2c65 7272 3d46 616c  lt=False,err=Fal
+000068e0: 7365 293a 0a20 2020 2027 2727 0a20 2020  se):.    '''.   
+000068f0: 2046 696e 6420 496e 6465 7820 6e75 6d62   Find Index numb
+00006900: 6572 2069 6e20 7468 6520 6c69 7374 2c74  er in the list,t
+00006910: 7570 6c65 2c73 7472 2c64 6963 740a 2020  uple,str,dict.  
+00006920: 2020 6465 6661 756c 7420 2020 3a20 6966    default   : if
+00006930: 2077 726f 6e67 206f 7220 6572 726f 7220   wrong or error 
+00006940: 7468 656e 2072 6574 7572 6e20 6465 6661  then return defa
+00006950: 756c 740a 2020 2020 6572 7220 3a20 6465  ult.    err : de
+00006960: 6661 756c 7420 4661 6c73 650a 2020 2020  fault False.    
+00006970: 2020 2020 4661 6c73 653a 2066 6978 696e      False: fixin
+00006980: 6720 696e 6465 7820 746f 2063 6f72 7265  g index to corre
+00006990: 6374 696e 6720 696e 6465 7820 7769 7468  cting index with
+000069a0: 6f75 7420 6572 726f 720a 2020 2020 2020  out error.      
+000069b0: 2020 5472 7565 3a20 6966 2077 726f 6e67    True: if wrong
+000069c0: 2069 6e64 6578 2074 6865 6e20 7265 7475   index then retu
+000069d0: 726e 2064 6566 6175 6c74 2076 616c 7565  rn default value
+000069e0: 0a20 2020 2027 2727 0a20 2020 2069 6620  .    '''.    if 
+000069f0: 6973 696e 7374 616e 6365 2873 7263 2c28  isinstance(src,(
+00006a00: 6c69 7374 2c74 7570 6c65 2c73 7472 2c64  list,tuple,str,d
+00006a10: 6963 7429 2920 616e 6420 6973 696e 7374  ict)) and isinst
+00006a20: 616e 6365 2869 6478 2c69 6e74 293a 0a20  ance(idx,int):. 
+00006a30: 2020 2020 2020 2069 6620 6964 7820 3c20         if idx < 
+00006a40: 303a 0a20 2020 2020 2020 2020 2020 2069  0:.            i
+00006a50: 6620 6c65 6e28 7372 6329 203e 2061 6273  f len(src) > abs
+00006a60: 2869 6478 293a 0a20 2020 2020 2020 2020  (idx):.         
+00006a70: 2020 2020 2020 2069 6478 3d6c 656e 2873         idx=len(s
+00006a80: 7263 292d 6162 7328 6964 7829 0a20 2020  rc)-abs(idx).   
+00006a90: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00006aa0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00006ab0: 6620 6572 723a 2072 6574 7572 6e20 6465  f err: return de
+00006ac0: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
+00006ad0: 2020 2020 2020 6964 783d 300a 2020 2020        idx=0.    
+00006ae0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00006af0: 2020 2020 2020 6966 206c 656e 2873 7263        if len(src
+00006b00: 2920 3c3d 2069 6478 3a0a 2020 2020 2020  ) <= idx:.      
+00006b10: 2020 2020 2020 2020 2020 6966 2065 7272            if err
+00006b20: 3a20 7265 7475 726e 2064 6566 6175 6c74  : return default
+00006b30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006b40: 2069 6478 3d6c 656e 2873 7263 292d 310a   idx=len(src)-1.
+00006b50: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+00006b60: 6478 0a20 2020 2072 6574 7572 6e20 6465  dx.    return de
+00006b70: 6661 756c 740a 0a0a 6465 6620 4e65 7874  fault...def Next
+00006b80: 2873 7263 2c73 7465 703d 302c 6f75 743d  (src,step=0,out=
+00006b90: 4e6f 6e65 2c64 6566 6175 6c74 3d27 6f72  None,default='or
+00006ba0: 6727 293a 0a20 2020 2027 2727 0a20 2020  g'):.    '''.   
+00006bb0: 2047 6574 204e 6578 7420 6461 7461 206f   Get Next data o
+00006bc0: 7220 6669 7273 7420 6b65 7920 6f66 2074  r first key of t
+00006bd0: 6865 2064 6963 7420 0a20 2020 2027 2727  he dict .    '''
+00006be0: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
+00006bf0: 6365 2873 7263 2c28 6c69 7374 2c74 7570  ce(src,(list,tup
+00006c00: 6c65 2c64 6963 7429 293a 0a20 2020 2020  le,dict)):.     
+00006c10: 2020 2073 7465 703d 4669 7849 6e64 6578     step=FixIndex
+00006c20: 2873 7263 2c73 7465 702c 6465 6661 756c  (src,step,defaul
+00006c30: 743d 3029 0a20 2020 2020 2020 2069 7465  t=0).        ite
+00006c40: 7261 746f 723d 6974 6572 2873 7263 290a  rator=iter(src).
+00006c50: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+00006c60: 2072 616e 6765 282d 312c 7374 6570 293a   range(-1,step):
+00006c70: 0a20 2020 2020 2020 2020 2020 2072 743d  .            rt=
+00006c80: 6e65 7874 2869 7465 7261 746f 7229 0a20  next(iterator). 
+00006c90: 2020 2020 2020 2072 6574 7572 6e20 7274         return rt
+00006ca0: 0a20 2020 2065 6c69 6620 6973 696e 7374  .    elif isinst
+00006cb0: 616e 6365 2873 7263 2c73 7472 293a 0a20  ance(src,str):. 
+00006cc0: 2020 2020 2020 2073 7465 703d 4669 7849         step=FixI
+00006cd0: 6e64 6578 2873 7263 2c73 7465 702c 6465  ndex(src,step,de
+00006ce0: 6661 756c 743d 3029 0a20 2020 2020 2020  fault=0).       
+00006cf0: 2069 6620 6c65 6e28 7372 6329 203d 3d20   if len(src) == 
+00006d00: 303a 0a20 2020 2020 2020 2020 2020 2072  0:.            r
+00006d10: 6574 7572 6e20 2727 0a20 2020 2020 2020  eturn ''.       
+00006d20: 2065 6c69 6620 6c65 6e28 7372 6329 203e   elif len(src) >
+00006d30: 3d20 3020 6f72 206c 656e 2873 7263 2920  = 0 or len(src) 
+00006d40: 3c3d 2073 7465 703a 0a20 2020 2020 2020  <= step:.       
+00006d50: 2020 2020 2072 6574 7572 6e20 7372 635b       return src[
+00006d60: 7374 6570 5d0a 2020 2020 7265 7475 726e  step].    return
+00006d70: 2044 6566 6175 6c74 2873 7263 2c64 6566   Default(src,def
+00006d80: 6175 6c74 290a 0a64 6566 2043 6f70 7928  ault)..def Copy(
+00006d90: 7372 632c 6465 6570 3d46 616c 7365 293a  src,deep=False):
+00006da0: 0a20 2020 2027 2727 0a20 2020 2043 6f70  .    '''.    Cop
+00006db0: 7920 6461 7461 200a 2020 2020 2727 270a  y data .    '''.
+00006dc0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00006dd0: 6528 7372 632c 286c 6973 742c 7475 706c  e(src,(list,tupl
+00006de0: 6529 293a 2072 6574 7572 6e20 7372 635b  e)): return src[
+00006df0: 3a5d 0a20 2020 2069 6620 6973 696e 7374  :].    if isinst
+00006e00: 616e 6365 2873 7263 2c64 6963 7429 3a0a  ance(src,dict):.
+00006e10: 2020 2020 2020 2020 7265 7475 726e 2063          return c
+00006e20: 6f70 792e 6465 6570 636f 7079 2873 7263  opy.deepcopy(src
+00006e30: 2920 6966 2064 6565 7020 656c 7365 2073  ) if deep else s
+00006e40: 7263 2e63 6f70 7928 290a 2020 2020 6966  rc.copy().    if
+00006e50: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
+00006e60: 7374 7229 3a20 7265 7475 726e 2027 7b7d  str): return '{}
+00006e70: 272e 666f 726d 6174 2873 7263 290a 2020  '.format(src).  
+00006e80: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00006e90: 7372 632c 626f 6f6c 293a 2072 6574 7572  src,bool): retur
+00006ea0: 6e20 7372 630a 2020 2020 6966 2069 7369  n src.    if isi
+00006eb0: 6e73 7461 6e63 6528 7372 632c 696e 7429  nstance(src,int)
+00006ec0: 3a20 7265 7475 726e 2069 6e74 2827 7b7d  : return int('{}
+00006ed0: 272e 666f 726d 6174 2873 7263 2929 0a20  '.format(src)). 
+00006ee0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00006ef0: 2873 7263 2c66 6c6f 6174 293a 2072 6574  (src,float): ret
+00006f00: 7572 6e20 666c 6f61 7428 277b 7d27 2e66  urn float('{}'.f
+00006f10: 6f72 6d61 7428 7372 6329 290a 2020 2020  ormat(src)).    
+00006f20: 6966 2050 7956 6572 2832 293a 0a20 2020  if PyVer(2):.   
+00006f30: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00006f40: 6365 2873 7263 2c6c 6f6e 6729 3a20 7265  ce(src,long): re
+00006f50: 7475 726e 206c 6f6e 6728 277b 7d27 2e66  turn long('{}'.f
+00006f60: 6f72 6d61 7428 7372 6329 290a 2020 2020  ormat(src)).    
+00006f70: 7265 7475 726e 2073 7263 0a0a 6465 6620  return src..def 
+00006f80: 496e 7365 7274 2873 7263 2c2a 696e 7073  Insert(src,*inps
+00006f90: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2727  ,**opts):.    ''
+00006fa0: 270a 2020 2020 7372 6320 6973 2064 6963  '.    src is dic
+00006fb0: 7420 7468 656e 2073 616d 6520 6173 2049  t then same as I
+00006fc0: 6e73 6572 7420 616e 6420 5570 6461 7465  nsert and Update
+00006fd0: 0a20 2020 2073 7263 2069 7320 6c69 7374  .    src is list
+00006fe0: 2c74 7570 6c65 2c73 7472 2074 6865 6e20  ,tuple,str then 
+00006ff0: 696e 7365 7274 2064 6174 6120 6174 2027  insert data at '
+00007000: 6174 270a 2020 2020 6174 203a 200a 2020  at'.    at : .  
+00007010: 2020 2020 7372 6320 6973 206c 6973 742c      src is list,
+00007020: 7475 706c 652c 7374 7220 7468 656e 206e  tuple,str then n
+00007030: 756d 6265 720a 2020 2020 2020 7372 6320  umber.      src 
+00007040: 6973 2064 6963 7420 7468 656e 2070 6174  is dict then pat
+00007050: 6820 282f 612f 622f 6329 0a20 2020 2075  h (/a/b/c).    u
+00007060: 6e69 713a 2073 7263 2069 7320 6c69 7374  niq: src is list
+00007070: 202c 7475 706c 6520 7468 656e 206d 616b   ,tuple then mak
+00007080: 6520 746f 2075 6e69 7120 6461 7461 0a20  e to uniq data. 
+00007090: 2020 2065 7272 2069 7320 5472 7565 2074     err is True t
+000070a0: 6865 6e2c 2069 6620 616e 7920 6973 7375  hen, if any issu
+000070b0: 6520 7468 656e 2072 6574 7572 6e20 6465  e then return de
+000070c0: 6661 756c 7420 7661 6c75 652c 2046 616c  fault value, Fal
+000070d0: 7365 2074 6865 6e20 6967 6e6f 7265 0a20  se then ignore. 
+000070e0: 2020 2027 2727 0a20 2020 2061 743d 6f70     '''.    at=op
+000070f0: 7473 2e70 6f70 2827 6174 272c 3029 0a20  ts.pop('at',0). 
+00007100: 2020 2064 6566 6175 6c74 3d6f 7074 732e     default=opts.
+00007110: 706f 7028 2764 6566 6175 6c74 272c 4661  pop('default',Fa
+00007120: 6c73 6529 0a20 2020 2065 7272 3d6f 7074  lse).    err=opt
+00007130: 732e 706f 7028 2765 7272 272c 4661 6c73  s.pop('err',Fals
+00007140: 6529 0a20 2020 2066 6f72 6365 3d6f 7074  e).    force=opt
+00007150: 732e 706f 7028 2766 6f72 6365 272c 4661  s.pop('force',Fa
+00007160: 6c73 6529 0a20 2020 2075 6e69 713d 6f70  lse).    uniq=op
+00007170: 7473 2e70 6f70 2827 756e 6971 272c 4661  ts.pop('uniq',Fa
+00007180: 6c73 6529 0a20 2020 2069 6620 6973 696e  lse).    if isin
+00007190: 7374 616e 6365 2873 7263 2c28 6c69 7374  stance(src,(list
+000071a0: 2c74 7570 6c65 2c73 7472 2929 3a0a 2020  ,tuple,str)):.  
+000071b0: 2020 2020 2020 7475 706c 655f 6f75 743d        tuple_out=
+000071c0: 4661 6c73 650a 2020 2020 2020 2020 6966  False.        if
+000071d0: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
+000071e0: 7475 706c 6529 2061 6e64 2066 6f72 6365  tuple) and force
+000071f0: 3a0a 2020 2020 2020 2020 2020 2020 7372  :.            sr
+00007200: 633d 6c69 7374 2873 7263 290a 2020 2020  c=list(src).    
+00007210: 2020 2020 2020 2020 7475 706c 655f 6f75          tuple_ou
+00007220: 743d 5472 7565 0a20 2020 2020 2020 2069  t=True.        i
+00007230: 6620 756e 6971 3a20 696e 7073 3d74 7570  f uniq: inps=tup
+00007240: 6c65 2873 6574 2869 6e70 7329 290a 2020  le(set(inps)).  
+00007250: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00007260: 6e63 6528 6174 2c73 7472 293a 0a20 2020  nce(at,str):.   
+00007270: 2020 2020 2020 2020 2069 6620 6174 2069           if at i
+00007280: 6e20 5b27 7374 6172 7427 2c27 6669 7273  n ['start','firs
+00007290: 7427 5d3a 2073 7263 3d6c 6973 7428 696e  t']: src=list(in
+000072a0: 7073 292b 7372 630a 2020 2020 2020 2020  ps)+src.        
+000072b0: 2020 2020 656c 6966 2061 7420 696e 205b      elif at in [
+000072c0: 2765 6e64 272c 276c 6173 7427 5d3a 2073  'end','last']: s
+000072d0: 7263 3d73 7263 2b6c 6973 7428 696e 7073  rc=src+list(inps
+000072e0: 290a 2020 2020 2020 2020 656c 6966 206c  ).        elif l
+000072f0: 656e 2873 7263 2920 3d3d 2030 3a0a 2020  en(src) == 0:.  
+00007300: 2020 2020 2020 2020 2020 7372 633d 6c69            src=li
+00007310: 7374 2869 6e70 7329 0a20 2020 2020 2020  st(inps).       
+00007320: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00007330: 2861 742c 696e 7429 2061 6e64 206e 6f74  (at,int) and not
+00007340: 2069 7369 6e73 7461 6e63 6528 6174 2c62   isinstance(at,b
+00007350: 6f6f 6c29 2061 6e64 206c 656e 2873 7263  ool) and len(src
+00007360: 2920 3e20 6174 3a0a 2020 2020 2020 2020  ) > at:.        
+00007370: 2020 2020 7372 633d 7372 635b 3a61 745d      src=src[:at]
+00007380: 2b6c 6973 7428 696e 7073 292b 7372 635b  +list(inps)+src[
+00007390: 6174 3a5d 0a20 2020 2020 2020 2065 6c73  at:].        els
+000073a0: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+000073b0: 6620 6572 723a 0a20 2020 2020 2020 2020  f err:.         
+000073c0: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+000073d0: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
+000073e0: 2020 7372 633d 7372 632b 6c69 7374 2869    src=src+list(i
+000073f0: 6e70 7329 0a20 2020 2020 2020 2069 6620  nps).        if 
+00007400: 7475 706c 655f 6f75 743a 2072 6574 7572  tuple_out: retur
+00007410: 6e20 7475 706c 6528 7372 6329 0a20 2020  n tuple(src).   
+00007420: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00007430: 2873 7263 2c64 6963 7429 3a0a 2020 2020  (src,dict):.    
+00007440: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00007450: 6528 6174 2c73 7472 293a 0a20 2020 2020  e(at,str):.     
+00007460: 2020 2020 2020 2061 745f 613d 6174 2e73         at_a=at.s
+00007470: 706c 6974 2827 2f27 290a 2020 2020 2020  plit('/').      
+00007480: 2020 2020 2020 666f 7220 6920 696e 2061        for i in a
+00007490: 745f 613a 0a20 2020 2020 2020 2020 2020  t_a:.           
+000074a0: 2020 2020 2069 6620 6920 696e 2073 7263       if i in src
+000074b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000074c0: 2020 2020 2020 7372 633d 7372 635b 695d        src=src[i]
+000074d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000074e0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000074f0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00007500: 2827 4b45 5928 7b7d 206f 6620 6174 287b  ('KEY({} of at({
+00007510: 7d29 2920 6e6f 7420 666f 756e 6420 696e  })) not found in
+00007520: 2073 6f75 7263 6527 2e66 6f72 6d61 7428   source'.format(
+00007530: 6174 2c69 2929 0a20 2020 2020 2020 2020  at,i)).         
+00007540: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00007550: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
+00007560: 666f 7220 6969 2069 6e20 696e 7073 3a0a  for ii in inps:.
+00007570: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00007580: 7369 6e73 7461 6e63 6528 6969 2c64 6963  sinstance(ii,dic
+00007590: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+000075a0: 2020 2020 2073 7263 2e75 7064 6174 6528       src.update(
+000075b0: 6969 290a 2020 2020 2020 2020 6966 206f  ii).        if o
+000075c0: 7074 733a 0a20 2020 2020 2020 2020 2020  pts:.           
+000075d0: 2073 7263 2e75 7064 6174 6528 6f70 7473   src.update(opts
+000075e0: 290a 2020 2020 7265 7475 726e 2073 7263  ).    return src
+000075f0: 0a0a 6465 6620 5570 6461 7465 2873 7263  ..def Update(src
+00007600: 2c2a 696e 7073 2c2a 2a6f 7074 7329 3a0a  ,*inps,**opts):.
+00007610: 2020 2020 2727 270a 2020 2020 7372 6320      '''.    src 
+00007620: 6973 2064 6963 7420 7468 656e 2073 616d  is dict then sam
+00007630: 6520 6173 2049 6e73 6572 7420 616e 6420  e as Insert and 
+00007640: 5570 6461 7465 0a20 2020 2073 7263 2069  Update.    src i
+00007650: 7320 6c69 7374 2c74 7570 6c65 2c73 7472  s list,tuple,str
+00007660: 2074 6865 6e20 7265 706c 6163 6520 6461   then replace da
+00007670: 7461 2061 7420 2761 7427 0a20 2020 2061  ta at 'at'.    a
+00007680: 7420 3a20 0a20 2020 2020 2073 7263 2069  t : .      src i
+00007690: 7320 6c69 7374 2c74 7570 6c65 2c73 7472  s list,tuple,str
+000076a0: 2074 6865 6e20 6e75 6d62 6572 0a20 2020   then number.   
+000076b0: 2020 2073 7263 2069 7320 6469 6374 2074     src is dict t
+000076c0: 6865 6e20 7061 7468 2028 2f61 2f62 2f63  hen path (/a/b/c
+000076d0: 290a 2020 2020 6572 7220 6973 2054 7275  ).    err is Tru
+000076e0: 6520 7468 656e 2c20 6966 2061 6e79 2069  e then, if any i
+000076f0: 7373 7565 2074 6865 6e20 7265 7475 726e  ssue then return
+00007700: 2064 6566 6175 6c74 2076 616c 7565 2c20   default value, 
+00007710: 4661 6c73 6520 7468 656e 2069 676e 6f72  False then ignor
+00007720: 650a 2020 2020 7379 6d20 666f 7220 7372  e.    sym for sr
+00007730: 6320 6973 2073 7472 696e 6728 7374 7229  c is string(str)
+00007740: 2e20 7370 6c69 7420 7372 6320 7769 7468  . split src with
+00007750: 2073 796d 0a20 2020 2027 2727 0a20 2020   sym.    '''.   
+00007760: 2061 743d 6f70 7473 2e70 6f70 2827 6174   at=opts.pop('at
+00007770: 272c 3029 0a20 2020 2065 7272 3d6f 7074  ',0).    err=opt
+00007780: 732e 706f 7028 2765 7272 272c 4661 6c73  s.pop('err',Fals
+00007790: 6529 0a20 2020 2064 6566 6175 6c74 3d6f  e).    default=o
+000077a0: 7074 732e 706f 7028 2764 6566 6175 6c74  pts.pop('default
+000077b0: 272c 4661 6c73 6529 0a20 2020 2066 6f72  ',False).    for
+000077c0: 6365 3d6f 7074 732e 706f 7028 2766 6f72  ce=opts.pop('for
+000077d0: 6365 272c 4661 6c73 6529 0a20 2020 2073  ce',False).    s
+000077e0: 796d 3d6f 7074 732e 706f 7028 2773 796d  ym=opts.pop('sym
+000077f0: 272c 4e6f 6e65 290a 2020 2020 6966 2069  ',None).    if i
+00007800: 7369 6e73 7461 6e63 6528 7372 632c 286c  sinstance(src,(l
+00007810: 6973 742c 7475 706c 652c 7374 7229 293a  ist,tuple,str)):
+00007820: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00007830: 7374 616e 6365 2873 7263 2c73 7472 2920  stance(src,str) 
+00007840: 616e 6420 7379 6d3a 2073 7263 3d73 7263  and sym: src=src
+00007850: 2e73 706c 6974 2873 796d 290a 2020 2020  .split(sym).    
+00007860: 2020 2020 7475 706c 655f 6f75 743d 4661      tuple_out=Fa
+00007870: 6c73 650a 2020 2020 2020 2020 6966 2069  lse.        if i
+00007880: 7369 6e73 7461 6e63 6528 7372 632c 7475  sinstance(src,tu
+00007890: 706c 6529 2061 6e64 2066 6f72 6365 3a0a  ple) and force:.
+000078a0: 2020 2020 2020 2020 2020 2020 7372 633d              src=
+000078b0: 6c69 7374 2873 7263 290a 2020 2020 2020  list(src).      
+000078c0: 2020 2020 2020 7475 706c 655f 6f75 743d        tuple_out=
+000078d0: 5472 7565 0a20 2020 2020 2020 206e 3d6c  True.        n=l
+000078e0: 656e 2873 7263 290a 2020 2020 2020 2020  en(src).        
+000078f0: 6966 206e 203d 3d20 303a 0a20 2020 2020  if n == 0:.     
+00007900: 2020 2020 2020 2069 6620 6572 7220 6973         if err is
+00007910: 2054 7275 653a 0a20 2020 2020 2020 2020   True:.         
+00007920: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00007930: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
+00007940: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00007950: 2020 2020 2020 2020 7372 633d 6c69 7374          src=list
+00007960: 2869 6e70 7329 0a20 2020 2020 2020 2065  (inps).        e
+00007970: 6c69 6620 6973 696e 7374 616e 6365 2861  lif isinstance(a
+00007980: 742c 696e 7429 2061 6e64 206e 203e 2061  t,int) and n > a
+00007990: 743a 0a20 2020 2020 2020 2020 2020 2066  t:.            f
+000079a0: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+000079b0: 6c65 6e28 696e 7073 2929 3a0a 2020 2020  len(inps)):.    
+000079c0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+000079d0: 203e 2061 742b 693a 0a20 2020 2020 2020   > at+i:.       
+000079e0: 2020 2020 2020 2020 2020 2020 2073 7263               src
+000079f0: 5b61 742b 695d 3d69 6e70 735b 695d 0a20  [at+i]=inps[i]. 
+00007a00: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00007a10: 6c69 6620 6572 7220 6973 2054 7275 653a  lif err is True:
+00007a20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007a30: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
+00007a40: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
+00007a50: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00007a60: 2020 2020 2020 2020 2020 2020 2020 7372                sr
+00007a70: 633d 7372 632b 6c69 7374 2869 6e70 7329  c=src+list(inps)
+00007a80: 5b69 3a5d 0a20 2020 2020 2020 2020 2020  [i:].           
+00007a90: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
+00007aa0: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+00007ab0: 7374 616e 6365 2861 742c 2874 7570 6c65  stance(at,(tuple
+00007ac0: 2c6c 6973 7429 293a 0a20 2020 2020 2020  ,list)):.       
+00007ad0: 2020 2020 2069 6620 6c65 6e28 696e 7073       if len(inps
+00007ae0: 2920 3d3d 206c 656e 2861 7429 3a0a 2020  ) == len(at):.  
+00007af0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00007b00: 7220 6920 696e 2072 616e 6765 2830 2c6c  r i in range(0,l
+00007b10: 656e 2861 7429 293a 0a20 2020 2020 2020  en(at)):.       
+00007b20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00007b30: 6973 696e 7374 616e 6365 2861 745b 695d  isinstance(at[i]
+00007b40: 2c69 6e74 2920 616e 6420 6e20 3e20 6174  ,int) and n > at
+00007b50: 5b69 5d3a 0a20 2020 2020 2020 2020 2020  [i]:.           
+00007b60: 2020 2020 2020 2020 2020 2020 2073 7263               src
+00007b70: 5b61 745b 695d 5d3d 696e 7073 5b69 5d0a  [at[i]]=inps[i].
+00007b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007b90: 2020 2020 656c 6966 2065 7272 2069 7320      elif err is 
+00007ba0: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
+00007bb0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00007bc0: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
+00007bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007be0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00007bf0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00007c00: 7263 2e61 7070 656e 6428 696e 7073 5b69  rc.append(inps[i
+00007c10: 5d29 0a20 2020 2020 2020 2069 6620 7475  ]).        if tu
+00007c20: 706c 655f 6f75 743a 2072 6574 7572 6e20  ple_out: return 
+00007c30: 7475 706c 6528 7372 6329 0a20 2020 2020  tuple(src).     
+00007c40: 2020 2072 6574 7572 6e20 7372 630a 2020     return src.  
+00007c50: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00007c60: 6528 7372 632c 6469 6374 293a 0a20 2020  e(src,dict):.   
+00007c70: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00007c80: 6365 2861 742c 7374 7229 3a0a 2020 2020  ce(at,str):.    
+00007c90: 2020 2020 2020 2020 6174 5f61 3d61 742e          at_a=at.
+00007ca0: 7370 6c69 7428 272f 2729 0a20 2020 2020  split('/').     
+00007cb0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00007cc0: 6174 5f61 3a0a 2020 2020 2020 2020 2020  at_a:.          
+00007cd0: 2020 2020 2020 6966 2069 2069 6e20 7372        if i in sr
+00007ce0: 633a 0a20 2020 2020 2020 2020 2020 2020  c:.             
+00007cf0: 2020 2020 2020 2073 7263 3d73 7263 5b69         src=src[i
+00007d00: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00007d10: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00007d20: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00007d30: 7428 274b 4559 287b 7d20 6f66 2061 7428  t('KEY({} of at(
+00007d40: 7b7d 2929 206e 6f74 2066 6f75 6e64 2069  {})) not found i
+00007d50: 6e20 736f 7572 6365 272e 666f 726d 6174  n source'.format
+00007d60: 2861 742c 6929 290a 2020 2020 2020 2020  (at,i)).        
+00007d70: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00007d80: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+00007d90: 2066 6f72 2069 6920 696e 2069 6e70 733a   for ii in inps:
+00007da0: 0a20 2020 2020 2020 2020 2020 6966 2069  .           if i
+00007db0: 7369 6e73 7461 6e63 6528 6969 2c64 6963  sinstance(ii,dic
+00007dc0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00007dd0: 2020 2073 7263 2e75 7064 6174 6528 6969     src.update(ii
+00007de0: 290a 2020 2020 2020 2020 6966 206f 7074  ).        if opt
+00007df0: 733a 0a20 2020 2020 2020 2020 2020 7372  s:.           sr
+00007e00: 632e 7570 6461 7465 286f 7074 7329 0a20  c.update(opts). 
+00007e10: 2020 2072 6574 7572 6e20 7372 630a 0a64     return src..d
+00007e20: 6566 2054 7970 654e 616d 6528 6f62 6a29  ef TypeName(obj)
+00007e30: 3a0a 2020 2020 2727 270a 2020 2020 4765  :.    '''.    Ge
+00007e40: 7420 696e 7075 7427 7320 5479 7065 2c49  t input's Type,I
+00007e50: 6e73 7461 6e63 6527 7320 6e61 6d65 0a20  nstance's name. 
+00007e60: 2020 2027 2727 0a20 2020 206f 626a 5f64     '''.    obj_d
+00007e70: 6972 3d64 6972 286f 626a 290a 2020 2020  ir=dir(obj).    
+00007e80: 6f62 6a5f 6e61 6d65 3d74 7970 6528 6f62  obj_name=type(ob
+00007e90: 6a29 2e5f 5f6e 616d 655f 5f0a 2020 2020  j).__name__.    
+00007ea0: 6966 206f 626a 5f6e 616d 6520 696e 205b  if obj_name in [
+00007eb0: 2766 756e 6374 696f 6e27 2c27 496d 6d75  'function','Immu
+00007ec0: 7461 626c 654d 756c 7469 4469 6374 275d  tableMultiDict']
+00007ed0: 3a20 7265 7475 726e 206f 626a 5f6e 616d  : return obj_nam
+00007ee0: 650a 2020 2020 2320 5370 6563 6961 6c20  e.    # Special 
+00007ef0: 5479 7065 206f 6620 436c 6173 7320 3a20  Type of Class : 
+00007f00: 5265 6d6f 7665 2061 6363 6f72 6469 6e67  Remove according
+00007f10: 2074 6f20 6265 6c6f 7720 636f 6465 0a20   to below code. 
+00007f20: 2020 2023 656c 6966 206f 626a 5f6e 616d     #elif obj_nam
+00007f30: 6520 696e 205b 276b 4469 6374 272c 276b  e in ['kDict','k
+00007f40: 4c69 7374 275d 2b5b 6e61 6d65 2066 6f72  List']+[name for
+00007f50: 206e 616d 652c 206f 626a 2069 6e20 696e   name, obj in in
+00007f60: 7370 6563 742e 6765 746d 656d 6265 7273  spect.getmembers
+00007f70: 2873 7973 2e6d 6f64 756c 6573 5b5f 5f6e  (sys.modules[__n
+00007f80: 616d 655f 5f5d 2920 6966 2069 6e73 7065  ame__]) if inspe
+00007f90: 6374 2e69 7363 6c61 7373 286f 626a 295d  ct.isclass(obj)]
+00007fa0: 3a20 2320 5370 6563 6961 6c20 6361 7365  : # Special case
+00007fb0: 206e 616d 650a 2020 2020 2320 2020 2070   name.    #    p
+00007fc0: 7269 6e74 2827 3e3e 3e20 5479 7065 4e61  rint('>>> TypeNa
+00007fd0: 6d65 323a 272c 6f62 6a5f 6e61 6d65 2c20  me2:',obj_name, 
+00007fe0: 273c 3d27 2c20 6f62 6a29 0a20 2020 2023  '<=', obj).    #
+00007ff0: 2020 2020 7265 7475 726e 206f 626a 5f6e      return obj_n
+00008000: 616d 650a 2020 2020 656c 6966 206f 626a  ame.    elif obj
+00008010: 5f6e 616d 6520 696e 205b 2773 7472 275d  _name in ['str']
+00008020: 3a0a 2020 2020 2020 2020 2374 7279 3a0a  :.        #try:.
+00008030: 2020 2020 2020 2020 2320 2020 206f 626a          #    obj
+00008040: 5f74 6d70 3d65 7661 6c28 6f62 6a29 0a20  _tmp=eval(obj). 
+00008050: 2020 2020 2020 2023 2020 2020 6966 2074         #    if t
+00008060: 7970 6528 6f62 6a5f 746d 7029 2e5f 5f6e  ype(obj_tmp).__n
+00008070: 616d 655f 5f20 6e6f 7420 696e 205b 276d  ame__ not in ['m
+00008080: 6f64 756c 6527 2c27 636c 6173 736f 626a  odule','classobj
+00008090: 272c 2766 756e 6374 696f 6e27 2c27 7265  ','function','re
+000080a0: 7370 6f6e 7365 272c 2772 6571 7565 7374  sponse','request
+000080b0: 275d 3a0a 2020 2020 2020 2020 2320 2020  ']:.        #   
+000080c0: 2020 2020 206f 626a 5f6e 616d 653d 6576       obj_name=ev
+000080d0: 616c 286f 626a 292e 5f5f 6e61 6d65 5f5f  al(obj).__name__
+000080e0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000080f0: 2020 6966 206f 626a 5f6e 616d 652e 6c6f    if obj_name.lo
+00008100: 7765 7228 2920 3d3d 206f 626a 2e6c 6f77  wer() == obj.low
+00008110: 6572 2829 3a20 7265 7475 726e 206f 626a  er(): return obj
+00008120: 2e6c 6f77 6572 2829 0a20 2020 2020 2020  .lower().       
+00008130: 2023 6578 6365 7074 3a0a 2020 2020 2020   #except:.      
+00008140: 2020 2320 2020 2069 6620 6f62 6a2e 6c6f    #    if obj.lo
+00008150: 7765 7228 2920 696e 205b 276d 6f64 756c  wer() in ['modul
+00008160: 6527 2c27 636c 6173 736f 626a 272c 2766  e','classobj','f
+00008170: 756e 6374 696f 6e27 2c27 756e 6b6e 6f77  unction','unknow
+00008180: 6e27 2c27 7265 7370 6f6e 7365 272c 2772  n','response','r
+00008190: 6571 7565 7374 275d 3a0a 2020 2020 2020  equest']:.      
+000081a0: 2020 2320 2020 2020 2020 2072 6574 7572    #        retur
+000081b0: 6e20 6f62 6a2e 6c6f 7765 7228 290a 2020  n obj.lower().  
+000081c0: 2020 2020 2020 2320 2020 2065 6c69 6620        #    elif 
+000081d0: 6f62 6a20 696e 205b 276b 4469 6374 272c  obj in ['kDict',
+000081e0: 276b 4c69 7374 272c 2744 4943 5427 5d3a  'kList','DICT']:
+000081f0: 2023 2053 7065 6369 616c 2063 6173 6520   # Special case 
+00008200: 6e61 6d65 0a20 2020 2020 2020 2023 2020  name.        #  
+00008210: 2020 2020 2020 7265 7475 726e 206f 626a        return obj
+00008220: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00008230: 2773 7472 270a 2020 2020 6966 2027 5f5f  'str'.    if '__
+00008240: 6469 6374 5f5f 2720 696e 206f 626a 5f64  dict__' in obj_d
+00008250: 6972 3a20 2320 436c 6173 7320 4f62 6a65  ir: # Class Obje
+00008260: 6374 0a20 2020 2020 2020 2023 2053 7065  ct.        # Spe
+00008270: 6369 616c 2063 6173 6520 436c 6173 733a  cial case Class:
+00008280: 2073 7562 2063 6c61 7373 2066 726f 6d20   sub class from 
+00008290: 7061 7265 6e74 2063 6c61 7373 2074 6865  parent class the
+000082a0: 6e20 7265 7475 726e 2070 6172 656e 7420  n return parent 
+000082b0: 636c 6173 7320 7479 7065 0a20 2020 2020  class type.     
+000082c0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+000082d0: 2020 2020 2320 434e 2063 6173 650a 2020      # CN case.  
+000082e0: 2020 2020 2020 2020 2020 7061 7265 6e74            parent
+000082f0: 5f6e 616d 653d 696e 7370 6563 742e 6765  _name=inspect.ge
+00008300: 746d 726f 286f 626a 295b 315d 2e5f 5f6e  tmro(obj)[1].__n
+00008310: 616d 655f 5f0a 2020 2020 2020 2020 2020  ame__.          
+00008320: 2020 6966 2070 6172 656e 745f 6e61 6d65    if parent_name
+00008330: 2021 3d20 276f 626a 6563 7427 3a0a 2020   != 'object':.  
+00008340: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00008350: 7475 726e 2070 6172 656e 745f 6e61 6d65  turn parent_name
+00008360: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+00008370: 0a20 2020 2020 2020 2020 2020 2023 2043  .            # C
+00008380: 4e28 2920 6361 7365 0a20 2020 2020 2020  N() case.       
+00008390: 2020 2020 2070 6172 656e 745f 6e61 6d65       parent_name
+000083a0: 3d69 6e73 7065 6374 2e67 6574 6d72 6f28  =inspect.getmro(
+000083b0: 6f62 6a2e 5f5f 636c 6173 735f 5f29 5b31  obj.__class__)[1
+000083c0: 5d2e 5f5f 6e61 6d65 5f5f 0a20 2020 2020  ].__name__.     
+000083d0: 2020 2020 2020 2069 6620 7061 7265 6e74         if parent
+000083e0: 5f6e 616d 6520 213d 2027 6f62 6a65 6374  _name != 'object
+000083f0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00008400: 2020 2072 6574 7572 6e20 7061 7265 6e74     return parent
+00008410: 5f6e 616d 650a 2020 2020 2020 2020 6966  _name.        if
+00008420: 206f 626a 5f6e 616d 6520 3d3d 2027 7479   obj_name == 'ty
+00008430: 7065 273a 2072 6574 7572 6e20 2763 6c61  pe': return 'cla
+00008440: 7373 6f62 6a27 0a20 2020 2020 2020 2069  ssobj'.        i
+00008450: 6620 6f62 6a5f 6e61 6d65 203d 3d20 2752  f obj_name == 'R
+00008460: 6573 706f 6e73 6527 3a20 7265 7475 726e  esponse': return
+00008470: 2027 7265 7370 6f6e 7365 270a 2020 2020   'response'.    
+00008480: 2020 2020 6966 206f 626a 5f6e 616d 6520      if obj_name 
+00008490: 3d3d 2027 5265 7175 6573 7427 3a20 7265  == 'Request': re
+000084a0: 7475 726e 2027 7265 7175 6573 7427 0a20  turn 'request'. 
+000084b0: 2020 2020 2020 2072 6574 7572 6e20 2769         return 'i
+000084c0: 6e73 7461 6e63 6527 0a20 2020 2023 6966  nstance'.    #if
+000084d0: 2069 6e73 7065 6374 2e69 7363 6c61 7373   inspect.isclass
+000084e0: 286f 626a 293a 2072 6574 7572 6e20 2763  (obj): return 'c
+000084f0: 6c61 7373 6f62 6a27 0a20 2020 2074 7279  lassobj'.    try
+00008500: 3a0a 2020 2020 2020 2020 6966 206f 626a  :.        if obj
+00008510: 5f6e 616d 6520 3d3d 2027 7479 7065 273a  _name == 'type':
+00008520: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00008530: 7572 6e20 6f62 6a2e 5f5f 6e61 6d65 5f5f  urn obj.__name__
+00008540: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00008550: 6f62 6a5f 6e61 6d65 2e6c 6f77 6572 2829  obj_name.lower()
+00008560: 2023 204f 626a 6563 7420 4e61 6d65 0a20   # Object Name. 
+00008570: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+00008580: 2020 2072 6574 7572 6e20 2775 6e6b 6e6f     return 'unkno
+00008590: 776e 270a 0a64 6566 2054 7970 6528 2a69  wn'..def Type(*i
+000085a0: 6e70 732c 2a2a 6f70 7473 293a 0a20 2020  nps,**opts):.   
+000085b0: 2027 2727 0a20 2020 2053 696d 696c 6172   '''.    Similar
+000085c0: 2061 7320 6973 696e 7374 616e 6365 2841   as isinstance(A
+000085d0: 2c28 2929 0a20 2020 2073 7570 706f 7274  ,()).    support
+000085e0: 203a 2062 6173 6963 2074 7970 6520 616e   : basic type an
+000085f0: 6420 2827 6279 7465 272c 2762 7974 6573  d ('byte','bytes
+00008600: 2729 2c28 276f 626a 272c 276f 626a 6563  '),('obj','objec
+00008610: 7427 292c 2827 6675 6e63 272c 2775 6e62  t'),('func','unb
+00008620: 6f75 6e64 6d65 7468 6f64 272c 2766 756e  oundmethod','fun
+00008630: 6374 696f 6e27 292c 2827 636c 6173 736f  ction'),('classo
+00008640: 626a 272c 2763 6c61 7373 2729 2c27 6765  bj','class'),'ge
+00008650: 6e65 7261 746f 7227 2c27 6d65 7468 6f64  nerator','method
+00008660: 272c 276c 6f6e 6727 2c2e 2e2e 2e0a 2020  ','long',.....  
+00008670: 2020 2727 270a 2020 2020 6465 6620 4e61    '''.    def Na
+00008680: 6d65 4669 7828 6929 3a0a 2020 2020 2020  meFix(i):.      
+00008690: 2020 6966 2069 203d 3d20 7374 723a 2072    if i == str: r
+000086a0: 6574 7572 6e20 2773 7472 270a 2020 2020  eturn 'str'.    
+000086b0: 2020 2020 6966 2069 2069 6e20 5b27 6279      if i in ['by
+000086c0: 7465 272c 2762 7974 6573 275d 3a20 7265  te','bytes']: re
+000086d0: 7475 726e 2027 6279 7465 7327 0a20 2020  turn 'bytes'.   
+000086e0: 2020 2020 2069 6620 6920 696e 205b 276f       if i in ['o
+000086f0: 626a 272c 276f 626a 6563 7427 5d3a 2072  bj','object']: r
+00008700: 6574 7572 6e20 276f 626a 6563 7427 0a20  eturn 'object'. 
+00008710: 2020 2020 2020 2069 6620 6920 696e 205b         if i in [
+00008720: 2766 756e 6327 2c27 756e 626f 756e 646d  'func','unboundm
+00008730: 6574 686f 6427 5d3a 2072 6574 7572 6e20  ethod']: return 
+00008740: 2766 756e 6374 696f 6e27 0a20 2020 2020  'function'.     
+00008750: 2020 2069 6620 6920 696e 205b 2763 6c61     if i in ['cla
+00008760: 7373 272c 2763 6c61 7373 6f62 6a27 5d3a  ss','classobj']:
+00008770: 2072 6574 7572 6e20 2763 6c61 7373 6f62   return 'classob
+00008780: 6a27 0a20 2020 2020 2020 2069 6620 6920  j'.        if i 
+00008790: 696e 205b 2779 6965 6c64 272c 2767 656e  in ['yield','gen
+000087a0: 6572 6174 6f72 275d 3a20 7265 7475 726e  erator']: return
+000087b0: 2027 6765 6e65 7261 746f 7227 0a20 2020   'generator'.   
+000087c0: 2020 2020 2069 6620 6920 696e 205b 2762       if i in ['b
+000087d0: 7569 6c74 696e 6675 6e63 7469 6f6e 272c  uiltinfunction',
+000087e0: 2762 7569 6c74 696e 6d65 7468 6f64 272c  'builtinmethod',
+000087f0: 2762 7569 6c74 696e 5f66 756e 6374 696f  'builtin_functio
+00008800: 6e5f 6f72 5f6d 6574 686f 6427 5d3a 2072  n_or_method']: r
+00008810: 6574 7572 6e20 2762 7569 6c74 696e 5f66  eturn 'builtin_f
+00008820: 756e 6374 696f 6e5f 6f72 5f6d 6574 686f  unction_or_metho
+00008830: 6427 0a20 2020 2020 2020 2023 2066 756e  d'.        # fun
+00008840: 6374 696f 6e3a 2066 756e 6374 696f 6e20  ction: function 
+00008850: 616e 6420 696e 7374 616e 6365 2773 2066  and instance's f
+00008860: 756e 6374 696f 6e20 696e 2050 7974 686f  unction in Pytho
+00008870: 6e33 0a20 2020 2020 2020 2023 206d 6574  n3.        # met
+00008880: 686f 643a 2020 636c 6173 7327 7320 6675  hod:  class's fu
+00008890: 6e63 7469 6f6e 2069 6e20 5079 7468 6f6e  nction in Python
+000088a0: 330a 2020 2020 2020 2020 2320 696e 7374  3.        # inst
+000088b0: 616e 6365 6d65 7468 6f64 3a20 696e 7374  ancemethod: inst
+000088c0: 616e 6365 2773 2061 6e64 2063 6c61 7373  ance's and class
+000088d0: 2773 2066 756e 6374 696f 6e20 696e 2050  's function in P
+000088e0: 7974 686f 6e32 0a20 2020 2020 2020 2069  ython2.        i
+000088f0: 6620 6920 696e 205b 276d 6574 686f 6427  f i in ['method'
+00008900: 2c27 636c 6173 7366 756e 6374 696f 6e27  ,'classfunction'
+00008910: 2c27 696e 7374 616e 6365 6d65 7468 6f64  ,'instancemethod
+00008920: 272c 2775 6e62 6f75 6e64 6d65 7468 6f64  ','unboundmethod
+00008930: 275d 3a20 7265 7475 726e 2027 6d65 7468  ']: return 'meth
+00008940: 6f64 270a 2020 2020 2020 2020 2320 4669  od'.        # Fi
+00008950: 7820 7079 7468 6f6e 2076 6572 7369 6f6e  x python version
+00008960: 2066 6f72 206c 6f6e 670a 2020 2020 2020   for long.      
+00008970: 2020 6966 2069 2069 6e20 5b27 6c6f 6e67    if i in ['long
+00008980: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00008990: 6966 2050 7956 6572 2827 3e27 2c33 293a  if PyVer('>',3):
+000089a0: 2072 6574 7572 6e20 2769 6e74 270a 2020   return 'int'.  
+000089b0: 2020 2020 2020 7265 7475 726e 2069 0a20        return i. 
+000089c0: 2020 2069 6e70 735f 6c3d 6c65 6e28 696e     inps_l=len(in
+000089d0: 7073 290a 2020 2020 6966 2069 6e70 735f  ps).    if inps_
+000089e0: 6c20 3d3d 2030 3a0a 2020 2020 2020 2020  l == 0:.        
+000089f0: 5374 6445 7272 2827 6d69 6e69 6d75 6d20  StdErr('minimum 
+00008a00: 6f76 6572 2031 2072 6571 7569 7265 6d65  over 1 requireme
+00008a10: 6e74 2729 0a20 2020 2020 2020 2072 6574  nt').        ret
+00008a20: 7572 6e0a 2020 2020 6f62 6a5f 7479 7065  urn.    obj_type
+00008a30: 3d54 7970 654e 616d 6528 696e 7073 5b30  =TypeName(inps[0
+00008a40: 5d29 0a20 2020 2069 6620 696e 7073 5f6c  ]).    if inps_l
+00008a50: 203d 3d20 313a 2072 6574 7572 6e20 6f62   == 1: return ob
+00008a60: 6a5f 7479 7065 0a20 2020 2066 6f72 2063  j_type.    for c
+00008a70: 6865 636b 2069 6e20 696e 7073 5b31 3a5d  heck in inps[1:]
+00008a80: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
+00008a90: 6e73 7461 6e63 6528 6368 6563 6b2c 2874  nstance(check,(t
+00008aa0: 7570 6c65 2c6c 6973 7429 293a 0a20 2020  uple,list)):.   
+00008ab0: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00008ac0: 6e20 6368 6563 6b3a 0a20 2020 2020 2020  n check:.       
+00008ad0: 2020 2020 2020 2020 2023 693d 4e61 6d65           #i=Name
+00008ae0: 4669 7828 6929 0a20 2020 2020 2020 2020  Fix(i).         
+00008af0: 2020 2020 2020 2063 6865 636b 5f74 7970         check_typ
+00008b00: 653d 5479 7065 4e61 6d65 2869 290a 2020  e=TypeName(i).  
+00008b10: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00008b20: 2063 6865 636b 5f74 7970 6520 3d3d 2027   check_type == '
+00008b30: 7374 7227 3a20 6368 6563 6b5f 7479 7065  str': check_type
+00008b40: 3d4e 616d 6546 6978 2869 290a 2020 2020  =NameFix(i).    
+00008b50: 2020 2020 2020 2020 2020 2020 2363 6865              #che
+00008b60: 636b 5f74 7970 653d 6920 6966 2061 203d  ck_type=i if a =
+00008b70: 3d20 2773 7472 2720 656c 7365 2061 0a20  = 'str' else a. 
+00008b80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00008b90: 6620 6f62 6a5f 7479 7065 203d 3d20 6368  f obj_type == ch
+00008ba0: 6563 6b5f 7479 7065 3a0a 2020 2020 2020  eck_type:.      
+00008bb0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00008bc0: 206f 7074 732e 6765 7428 2764 6174 6127   opts.get('data'
+00008bd0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00008be0: 2020 2020 2020 2020 2020 2069 6620 4973             if Is
+00008bf0: 4e6f 6e65 2869 6e70 735b 305d 293a 0a20  None(inps[0]):. 
+00008c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c10: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00008c20: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
+00008c30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00008c40: 726e 2054 7275 650a 2020 2020 2020 2020  rn True.        
+00008c50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00008c60: 2020 2363 6865 636b 3d4e 616d 6546 6978    #check=NameFix
+00008c70: 2863 6865 636b 290a 2020 2020 2020 2020  (check).        
+00008c80: 2020 2020 6368 6563 6b5f 7479 7065 3d54      check_type=T
+00008c90: 7970 654e 616d 6528 6368 6563 6b29 0a20  ypeName(check). 
+00008ca0: 2020 2020 2020 2020 2020 2069 6620 6368             if ch
+00008cb0: 6563 6b5f 7479 7065 203d 3d20 2773 7472  eck_type == 'str
+00008cc0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00008cd0: 2020 2063 6865 636b 5f74 7970 653d 4e61     check_type=Na
+00008ce0: 6d65 4669 7828 6368 6563 6b29 0a20 2020  meFix(check).   
+00008cf0: 2020 2020 2020 2020 2069 6620 6f62 6a5f           if obj_
+00008d00: 7479 7065 203d 3d20 6368 6563 6b5f 7479  type == check_ty
+00008d10: 7065 3a0a 2020 2020 2020 2020 2020 2020  pe:.            
+00008d20: 2020 2020 6966 206f 7074 732e 6765 7428      if opts.get(
+00008d30: 2764 6174 6127 293a 0a20 2020 2020 2020  'data'):.       
+00008d40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00008d50: 4973 4e6f 6e65 2869 6e70 735b 305d 293a  IsNone(inps[0]):
+00008d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008d70: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00008d80: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
+00008d90: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+00008da0: 650a 2020 2020 7265 7475 726e 2046 616c  e.    return Fal
+00008db0: 7365 0a0a 636c 6173 7320 4649 4e44 3a0a  se..class FIND:.
+00008dc0: 2020 2020 2727 270a 2020 2020 5365 6172      '''.    Sear
+00008dd0: 6368 696e 6720 7265 6775 6c61 7220 6578  ching regular ex
+00008de0: 7072 6573 7369 6f6e 2066 6f72 6d20 6461  pression form da
+00008df0: 7461 2061 6e64 2072 6574 7572 6e20 7468  ta and return th
+00008e00: 6520 6461 7461 0a20 2020 2027 2727 0a20  e data.    '''. 
+00008e10: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00008e20: 7365 6c66 2c73 7263 3d4e 6f6e 652c 6669  self,src=None,fi
+00008e30: 6e64 3d4e 6f6e 652c 6f75 743d 2769 6e64  nd=None,out='ind
+00008e40: 6578 272c 776f 7264 3d46 616c 7365 293a  ex',word=False):
+00008e50: 0a20 2020 2020 2020 2073 656c 662e 7372  .        self.sr
+00008e60: 633d 7372 630a 2020 2020 2020 2020 6966  c=src.        if
+00008e70: 2069 7369 6e73 7461 6e63 6528 6669 6e64   isinstance(find
+00008e80: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
+00008e90: 2020 2066 696e 643d 6669 6e64 2e72 6570     find=find.rep
+00008ea0: 6c61 6365 2827 2a27 2c27 2e2b 2729 2e72  lace('*','.+').r
+00008eb0: 6570 6c61 6365 2827 3f27 2c27 2e27 290a  eplace('?','.').
+00008ec0: 2020 2020 2020 2020 2020 2020 6966 2077              if w
+00008ed0: 6f72 643a 0a20 2020 2020 2020 2020 2020  ord:.           
+00008ee0: 2020 2020 2073 656c 662e 6669 6e64 5f72       self.find_r
+00008ef0: 653d 7265 2e63 6f6d 7069 6c65 2872 275c  e=re.compile(r'\
+00008f00: 6228 7b30 7d29 5c62 272e 666f 726d 6174  b({0})\b'.format
+00008f10: 2866 696e 6429 2c66 6c61 6773 3d72 652e  (find),flags=re.
+00008f20: 4947 4e4f 5245 4341 5345 290a 2020 2020  IGNORECASE).    
+00008f30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00008f40: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00008f50: 6c66 2e66 696e 645f 7265 3d72 652e 636f  lf.find_re=re.co
+00008f60: 6d70 696c 6528 6669 6e64 2c66 6c61 6773  mpile(find,flags
+00008f70: 3d72 652e 4947 4e4f 5245 4341 5345 290a  =re.IGNORECASE).
+00008f80: 2020 2020 2020 2020 7365 6c66 2e66 696e          self.fin
+00008f90: 643d 6669 6e64 0a20 2020 2020 2020 2073  d=find.        s
+00008fa0: 656c 662e 6f75 743d 6f75 740a 0a20 2020  elf.out=out..   
+00008fb0: 2064 6566 2046 726f 6d28 7365 6c66 2c64   def From(self,d
+00008fc0: 6174 612c 7379 6d62 6f6c 3d27 5c6e 2729  ata,symbol='\n')
+00008fd0: 3a0a 2020 2020 2020 2020 7274 3d5b 5d0a  :.        rt=[].
+00008fe0: 0a20 2020 2020 2020 2064 6566 2053 6561  .        def Sea
+00008ff0: 7263 6828 6461 7461 2c6b 6579 2c72 7429  rch(data,key,rt)
+00009000: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
+00009010: 756e 643d 7365 6c66 2e66 696e 645f 7265  und=self.find_re
+00009020: 2e66 696e 6461 6c6c 2864 6174 6129 0a20  .findall(data). 
+00009030: 2020 2020 2020 2020 2020 2069 6620 666f             if fo
+00009040: 756e 643a 0a20 2020 2020 2020 2020 2020  und:.           
+00009050: 2020 2020 2069 6620 7365 6c66 2e6f 7574       if self.out
+00009060: 2069 6e20 5b27 666f 756e 6427 5d3a 0a20   in ['found']:. 
+00009070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009080: 2020 2072 743d 7274 2b66 6f75 6e64 0a20     rt=rt+found. 
+00009090: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000090a0: 6c69 6620 7365 6c66 2e6f 7574 2069 6e20  lif self.out in 
+000090b0: 5b27 696e 6465 7827 2c27 6964 7827 2c27  ['index','idx','
+000090c0: 6b65 7927 5d3a 0a20 2020 2020 2020 2020  key']:.         
+000090d0: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+000090e0: 7065 6e64 286b 6579 290a 2020 2020 2020  pend(key).      
+000090f0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
+00009100: 656c 662e 6f75 7420 696e 205b 2761 6c6c  elf.out in ['all
+00009110: 272c 272a 275d 3a0a 2020 2020 2020 2020  ','*']:.        
+00009120: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
+00009130: 7070 656e 6428 286b 6579 2c64 6174 6129  ppend((key,data)
+00009140: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00009150: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00009160: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
+00009170: 7070 656e 6428 6461 7461 290a 2020 2020  ppend(data).    
+00009180: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00009190: 740a 0a20 2020 2020 2020 2069 6620 5479  t..        if Ty
+000091a0: 7065 2864 6174 612c 7374 7229 3a0a 2020  pe(data,str):.  
+000091b0: 2020 2020 2020 2020 2020 6461 7461 3d64            data=d
+000091c0: 6174 612e 7370 6c69 7428 7379 6d62 6f6c  ata.split(symbol
+000091d0: 290a 2020 2020 2020 2020 6966 2054 7970  ).        if Typ
+000091e0: 6528 6461 7461 2c6c 6973 742c 7475 706c  e(data,list,tupl
+000091f0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00009200: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
+00009210: 2c6c 656e 2864 6174 6129 293a 0a20 2020  ,len(data)):.   
+00009220: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00009230: 5479 7065 2864 6174 615b 695d 2c28 6c69  Type(data[i],(li
+00009240: 7374 2c74 7570 6c65 2c64 6963 7429 293a  st,tuple,dict)):
+00009250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009260: 2020 2020 2073 7562 3d73 656c 662e 4672       sub=self.Fr
+00009270: 6f6d 2864 6174 615b 695d 2c73 796d 626f  om(data[i],symbo
+00009280: 6c3d 7379 6d62 6f6c 290a 2020 2020 2020  l=symbol).      
+00009290: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000092a0: 2073 7562 3a0a 2020 2020 2020 2020 2020   sub:.          
+000092b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000092c0: 2073 656c 662e 6f75 7420 696e 205b 276b   self.out in ['k
+000092d0: 6579 272c 2769 6e64 6578 272c 2769 6478  ey','index','idx
+000092e0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+000092f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009300: 666f 7220 7a20 696e 2073 7562 3a0a 2020  for z in sub:.  
 00009310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009320: 2020 7274 2e61 7070 656e 6428 277b 7d2f    rt.append('{}/
-00009330: 7b7d 272e 666f 726d 6174 2869 2c7a 2929  {}'.format(i,z))
-00009340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009350: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00009360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009370: 2020 2020 2020 2020 2020 2072 743d 7274             rt=rt
-00009380: 2b73 7562 0a20 2020 2020 2020 2020 2020  +sub.           
-00009390: 2020 2020 2065 6c69 6620 5479 7065 2864       elif Type(d
-000093a0: 6174 615b 695d 2c73 7472 293a 0a20 2020  ata[i],str):.   
-000093b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000093c0: 2072 743d 5365 6172 6368 2864 6174 615b   rt=Search(data[
-000093d0: 695d 2c69 2c72 7429 0a20 2020 2020 2020  i],i,rt).       
-000093e0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000093f0: 2020 2020 7265 7475 726e 2027 556e 6b6e      return 'Unkn
-00009400: 6f77 6e20 666f 726d 6174 270a 2020 2020  own format'.    
-00009410: 2020 2020 7265 7475 726e 2072 740a 0a20      return rt.. 
-00009420: 2020 2064 6566 2046 696e 6428 7365 6c66     def Find(self
-00009430: 2c66 696e 642c 7372 633d 275f 235f 272c  ,find,src='_#_',
-00009440: 7379 6d3d 275c 6e27 2c64 6566 6175 6c74  sym='\n',default
-00009450: 3d5b 5d2c 6f75 743d 4e6f 6e65 2c66 696e  =[],out=None,fin
-00009460: 6461 6c6c 3d54 7275 652c 776f 7264 3d46  dall=True,word=F
-00009470: 616c 7365 2c6d 6f64 653d 2776 616c 7565  alse,mode='value
-00009480: 272c 7072 733d 4e6f 6e65 2c6c 696e 655f  ',prs=None,line_
-00009490: 6e75 6d3d 4661 6c73 652c 7065 656c 3d4e  num=False,peel=N
-000094a0: 6f6e 652c 6964 783d 4e6f 6e65 293a 0a20  one,idx=None):. 
-000094b0: 2020 2020 2020 2069 6620 4973 4e6f 6e65         if IsNone
-000094c0: 2873 7263 2c63 686b 5f76 616c 3d5b 275f  (src,chk_val=['_
-000094d0: 235f 275d 2c63 686b 5f6f 6e6c 793d 5472  #_'],chk_only=Tr
-000094e0: 7565 293a 2073 7263 3d73 656c 662e 7372  ue): src=self.sr
-000094f0: 630a 2020 2020 2020 2020 2369 6620 5479  c.        #if Ty
-00009500: 7065 2873 7263 2c27 696e 7374 616e 6365  pe(src,'instance
-00009510: 272c 2763 6c61 7373 6f62 6a27 293a 0a20  ','classobj'):. 
-00009520: 2020 2020 2020 2023 2069 6620 7372 6320         # if src 
-00009530: 6973 2069 6e73 7461 6e63 6520 6f72 2063  is instance or c
-00009540: 6c61 7373 6f62 6a20 7468 656e 2073 6561  lassobj then sea
-00009550: 7263 6820 696e 2064 6573 6372 6970 7469  rch in descripti
-00009560: 6f6e 2061 6e64 206d 6164 6520 6675 6e63  on and made func
-00009570: 7469 6f6e 206e 616d 6520 6174 206b 6579  tion name at key
-00009580: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00009590: 7374 616e 6365 2873 7263 2c28 6c69 7374  stance(src,(list
-000095a0: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
-000095b0: 2020 2020 2020 7274 3d5b 5d0a 2020 2020        rt=[].    
-000095c0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-000095d0: 2072 616e 6765 2830 2c6c 656e 2873 7263   range(0,len(src
-000095e0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-000095f0: 2020 2020 613d 7365 6c66 2e46 696e 6428      a=self.Find(
-00009600: 6669 6e64 2c73 7263 5b69 5d2c 7379 6d3d  find,src[i],sym=
-00009610: 7379 6d2c 6465 6661 756c 743d 5b5d 2c6f  sym,default=[],o
-00009620: 7574 3d27 6c69 7374 272c 6669 6e64 616c  ut='list',findal
-00009630: 6c3d 6669 6e64 616c 6c2c 776f 7264 3d77  l=findall,word=w
-00009640: 6f72 642c 6d6f 6465 3d6d 6f64 652c 7072  ord,mode=mode,pr
-00009650: 733d 7072 732c 6c69 6e65 5f6e 756d 3d6c  s=prs,line_num=l
-00009660: 696e 655f 6e75 6d2c 7065 656c 3d70 6565  ine_num,peel=pee
-00009670: 6c2c 6964 783d 6964 7829 0a20 2020 2020  l,idx=idx).     
-00009680: 2020 2020 2020 2020 2020 2069 6620 613a             if a:
-00009690: 2072 743d 7274 2b61 0a20 2020 2020 2020   rt=rt+a.       
-000096a0: 2020 2020 2069 6620 6c65 6e28 7274 293a       if len(rt):
-000096b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000096c0: 2072 6574 7572 6e20 7274 0a20 2020 2020   return rt.     
-000096d0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-000096e0: 6365 2873 7263 2c64 6963 7429 3a0a 2020  ce(src,dict):.  
-000096f0: 2020 2020 2020 2020 2020 7061 7468 3d5b            path=[
-00009700: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
-00009710: 7220 6b65 7920 696e 2073 7263 3a0a 2020  r key in src:.  
-00009720: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00009730: 206d 6f64 6520 696e 205b 276b 6579 272c   mode in ['key',
-00009740: 272a 272c 2761 6c6c 275d 3a20 2320 6669  '*','all']: # fi
-00009750: 6e64 2069 6e20 6b65 7920 6f6e 6c79 0a20  nd in key only. 
-00009760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009770: 2020 2069 6620 6669 6e64 203d 3d20 6b65     if find == ke
-00009780: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00009790: 2020 2020 2020 2020 2020 2070 6174 682e             path.
-000097a0: 6170 7065 6e64 286b 6579 290a 2020 2020  append(key).    
-000097b0: 2020 2020 2020 2020 2020 2020 666f 756e              foun
-000097c0: 643d 7372 632e 6765 7428 6b65 792c 4e6f  d=src.get(key,No
-000097d0: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
-000097e0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000097f0: 6528 666f 756e 642c 6469 6374 293a 0a20  e(found,dict):. 
-00009800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009810: 2020 2069 6620 6465 7020 696e 2066 6f75     if dep in fou
-00009820: 6e64 3a0a 2020 2020 2020 2020 2020 2020  nd:.            
-00009830: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00009840: 6d6f 6465 2069 6e20 5b27 7661 6c75 6527  mode in ['value'
-00009850: 2c27 2a27 2c27 616c 6c27 5d20 616e 6420  ,'*','all'] and 
-00009860: 2866 696e 6420 3d3d 2066 6f75 6e64 5b64  (find == found[d
-00009870: 6570 5d20 6f72 2028 7479 7065 2866 6f75  ep] or (type(fou
-00009880: 6e64 5b64 6570 5d29 2069 6e20 5b44 4943  nd[dep]) in [DIC
-00009890: 542c 6469 6374 2c6c 6973 742c 7475 706c  T,dict,list,tupl
-000098a0: 655d 2061 6e64 2066 696e 6420 696e 2066  e] and find in f
-000098b0: 6f75 6e64 5b64 6570 5d29 206f 7220 2874  ound[dep]) or (t
-000098c0: 7970 6528 6669 6e64 2920 6973 2073 7472  ype(find) is str
-000098d0: 2061 6e64 2074 7970 6528 666f 756e 645b   and type(found[
-000098e0: 6465 705d 2920 6973 2073 7472 2061 6e64  dep]) is str and
-000098f0: 2066 696e 6420 696e 2066 6f75 6e64 5b64   find in found[d
-00009900: 6570 5d29 293a 2023 2066 696e 6420 696e  ep])): # find in
-00009910: 2027 6669 6e64 2720 6f6e 6c79 0a20 2020   'find' only.   
-00009920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009930: 2020 2020 2020 2020 2020 2023 2056 616c             # Val
-00009940: 7565 2066 696e 640a 2020 2020 2020 2020  ue find.        
-00009950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009960: 2020 2020 2020 7061 7468 2e61 7070 656e        path.appen
-00009970: 6428 6b65 7929 0a20 2020 2020 2020 2020  d(key).         
-00009980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009990: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-000099a0: 666f 756e 645b 6465 705d 2c20 6469 6374  found[dep], dict
-000099b0: 293a 2023 2072 6563 7572 7369 6e67 0a20  ): # recursing. 
-000099c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000099d0: 2020 2020 2020 2020 2020 2020 2070 6174               pat
-000099e0: 683d 7061 7468 2b73 656c 662e 4669 6e64  h=path+self.Find
-000099f0: 2866 696e 642c 666f 756e 645b 6465 705d  (find,found[dep]
-00009a00: 2c70 726f 7065 723d 7072 6f70 6572 2c6d  ,proper=proper,m
-00009a10: 6f64 653d 6d6f 6465 290a 2020 2020 2020  ode=mode).      
-00009a20: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00009a30: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00009a40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00009a50: 6d6f 6465 2069 6e20 5b27 7661 6c75 6527  mode in ['value'
-00009a60: 2c27 2a27 2c27 616c 6c27 5d20 616e 6420  ,'*','all'] and 
-00009a70: 6669 6e64 203d 3d20 666f 756e 6420 6f72  find == found or
-00009a80: 2028 7479 7065 2866 6f75 6e64 2920 696e   (type(found) in
-00009a90: 205b 6c69 7374 2c74 7570 6c65 5d20 616e   [list,tuple] an
-00009aa0: 6420 6669 6e64 2069 6e20 666f 756e 6429  d find in found)
-00009ab0: 206f 7220 2874 7970 6528 6669 6e64 2920   or (type(find) 
-00009ac0: 6973 2073 7472 2061 6e64 2074 7970 6528  is str and type(
-00009ad0: 666f 756e 6429 2069 7320 7374 7220 616e  found) is str an
-00009ae0: 6420 6669 6e64 2069 6e20 666f 756e 6429  d find in found)
-00009af0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00009b00: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00009b10: 6174 682e 6170 7065 6e64 286b 6579 290a  ath.append(key).
-00009b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b30: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00009b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b50: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00009b60: 6b6b 2069 6e20 7365 6c66 2e46 696e 6428  kk in self.Find(
-00009b70: 6669 6e64 2c73 7263 5b6b 6579 5d2c 7072  find,src[key],pr
-00009b80: 6f70 6572 3d70 726f 7065 722c 6d6f 6465  oper=proper,mode
-00009b90: 3d6d 6f64 652c 6f75 743d 6469 6374 2c64  =mode,out=dict,d
-00009ba0: 6566 6175 6c74 3d7b 7d29 3a20 2320 7265  efault={}): # re
-00009bb0: 6375 7273 696e 670a 2020 2020 2020 2020  cursing.        
-00009bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009bd0: 2020 2020 2020 2020 2070 6174 682e 6170           path.ap
-00009be0: 7065 6e64 286b 6579 2b27 2f27 2b6b 6b29  pend(key+'/'+kk)
-00009bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009c00: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00009c10: 2020 2020 2020 2020 2020 2069 6620 6d6f             if mo
-00009c20: 6465 2069 6e20 5b27 7661 6c75 6527 2c27  de in ['value','
-00009c30: 2a27 2c27 616c 6c27 5d20 616e 6420 6669  *','all'] and fi
-00009c40: 6e64 203d 3d20 666f 756e 6420 6f72 2028  nd == found or (
-00009c50: 7479 7065 2866 6f75 6e64 2920 696e 205b  type(found) in [
-00009c60: 6c69 7374 2c74 7570 6c65 5d20 616e 6420  list,tuple] and 
-00009c70: 6669 6e64 2069 6e20 666f 756e 6429 206f  find in found) o
-00009c80: 7220 2874 7970 6528 6669 6e64 2920 6973  r (type(find) is
-00009c90: 2073 7472 2061 6e64 2074 7970 6528 666f   str and type(fo
-00009ca0: 756e 6429 2069 7320 7374 7220 616e 6420  und) is str and 
-00009cb0: 6669 6e64 2069 6e20 666f 756e 6429 3a0a  find in found):.
-00009cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009cd0: 2020 2020 2020 2020 7061 7468 2e61 7070          path.app
-00009ce0: 656e 6428 6b65 7929 0a20 2020 2020 2020  end(key).       
-00009cf0: 2020 2020 2072 6574 7572 6e20 7061 7468       return path
-00009d00: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
-00009d10: 696e 7374 616e 6365 2873 7263 2c73 7472  instance(src,str
-00009d20: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00009d30: 6620 6669 6e64 616c 6c3a 0a20 2020 2020  f findall:.     
-00009d40: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
-00009d50: 7320 3d3d 2027 2427 3a20 6964 783d 2d31  s == '$': idx=-1
-00009d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009d70: 2069 6620 7072 7320 3d3d 2027 5e27 3a20   if prs == '^': 
-00009d80: 6964 783d 300a 2020 2020 2020 2020 2020  idx=0.          
-00009d90: 2020 2020 2020 6966 2073 796d 3a0a 2020        if sym:.  
-00009da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009db0: 2020 7374 7269 6e67 5f61 3d73 7263 2e73    string_a=src.s
-00009dc0: 706c 6974 2873 796d 290a 2020 2020 2020  plit(sym).      
-00009dd0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00009de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009df0: 2020 2020 7374 7269 6e67 5f61 3d5b 7372      string_a=[sr
-00009e00: 635d 0a20 2020 2020 2020 2020 2020 2020  c].             
-00009e10: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00009e20: 2866 696e 642c 6469 6374 293a 0a20 2020  (find,dict):.   
-00009e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009e40: 2066 6f75 6e64 3d7b 7d0a 2020 2020 2020   found={}.      
-00009e50: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00009e60: 7220 6e6e 2069 6e20 7261 6e67 6528 302c  r nn in range(0,
-00009e70: 6c65 6e28 7374 7269 6e67 5f61 2929 3a0a  len(string_a)):.
-00009e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009e90: 2020 2020 2020 2020 666f 7220 6464 2069          for dd i
-00009ea0: 6e20 6669 6e64 3a0a 2020 2020 2020 2020  n find:.        
-00009eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ec0: 2020 2020 6469 6478 3d4e 6f6e 650a 2020      didx=None.  
+00009320: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+00009330: 2e61 7070 656e 6428 277b 7d2f 7b7d 272e  .append('{}/{}'.
+00009340: 666f 726d 6174 2869 2c7a 2929 0a20 2020  format(i,z)).   
+00009350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009360: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00009370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009380: 2020 2020 2020 2072 743d 7274 2b73 7562         rt=rt+sub
+00009390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000093a0: 2065 6c69 6620 5479 7065 2864 6174 615b   elif Type(data[
+000093b0: 695d 2c73 7472 293a 0a20 2020 2020 2020  i],str):.       
+000093c0: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
+000093d0: 5365 6172 6368 2864 6174 615b 695d 2c69  Search(data[i],i
+000093e0: 2c72 7429 0a20 2020 2020 2020 2065 6c69  ,rt).        eli
+000093f0: 6620 5479 7065 2864 6174 612c 6469 6374  f Type(data,dict
+00009400: 293a 0a20 2020 2020 2020 2020 2020 2066  ):.            f
+00009410: 6f72 2069 2069 6e20 6461 7461 3a0a 2020  or i in data:.  
+00009420: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00009430: 2054 7970 6528 6461 7461 5b69 5d2c 286c   Type(data[i],(l
+00009440: 6973 742c 7475 706c 652c 6469 6374 2929  ist,tuple,dict))
+00009450: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009460: 2020 2020 2020 7375 623d 7365 6c66 2e46        sub=self.F
+00009470: 726f 6d28 6461 7461 5b69 5d2c 7379 6d62  rom(data[i],symb
+00009480: 6f6c 3d73 796d 626f 6c29 0a20 2020 2020  ol=symbol).     
+00009490: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000094a0: 6620 7375 623a 0a20 2020 2020 2020 2020  f sub:.         
+000094b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000094c0: 6620 7365 6c66 2e6f 7574 2069 6e20 5b27  f self.out in ['
+000094d0: 6b65 7927 2c27 696e 6465 7827 2c27 6964  key','index','id
+000094e0: 7827 5d3a 0a20 2020 2020 2020 2020 2020  x']:.           
+000094f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009500: 2066 6f72 207a 2069 6e20 7375 623a 0a20   for z in sub:. 
+00009510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009520: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00009530: 742e 6170 7065 6e64 2827 7b7d 2f7b 7d27  t.append('{}/{}'
+00009540: 2e66 6f72 6d61 7428 692c 7a29 290a 2020  .format(i,z)).  
+00009550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009560: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00009570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009580: 2020 2020 2020 2020 7274 3d72 742b 7375          rt=rt+su
+00009590: 620a 2020 2020 2020 2020 2020 2020 2020  b.              
+000095a0: 2020 656c 6966 2054 7970 6528 6461 7461    elif Type(data
+000095b0: 5b69 5d2c 7374 7229 3a0a 2020 2020 2020  [i],str):.      
+000095c0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+000095d0: 3d53 6561 7263 6828 6461 7461 5b69 5d2c  =Search(data[i],
+000095e0: 692c 7274 290a 2020 2020 2020 2020 656c  i,rt).        el
+000095f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00009600: 2072 6574 7572 6e20 2755 6e6b 6e6f 776e   return 'Unknown
+00009610: 2066 6f72 6d61 7427 0a20 2020 2020 2020   format'.       
+00009620: 2072 6574 7572 6e20 7274 0a0a 2020 2020   return rt..    
+00009630: 6465 6620 4669 6e64 2873 656c 662c 6669  def Find(self,fi
+00009640: 6e64 2c73 7263 3d27 5f23 5f27 2c73 796d  nd,src='_#_',sym
+00009650: 3d27 5c6e 272c 6465 6661 756c 743d 5b5d  ='\n',default=[]
+00009660: 2c6f 7574 3d4e 6f6e 652c 6669 6e64 616c  ,out=None,findal
+00009670: 6c3d 5472 7565 2c77 6f72 643d 4661 6c73  l=True,word=Fals
+00009680: 652c 6d6f 6465 3d27 7661 6c75 6527 2c70  e,mode='value',p
+00009690: 7273 3d4e 6f6e 652c 6c69 6e65 5f6e 756d  rs=None,line_num
+000096a0: 3d46 616c 7365 2c70 6565 6c3d 4e6f 6e65  =False,peel=None
+000096b0: 2c69 6478 3d4e 6f6e 6529 3a0a 2020 2020  ,idx=None):.    
+000096c0: 2020 2020 6966 2049 734e 6f6e 6528 7372      if IsNone(sr
+000096d0: 632c 6368 6b5f 7661 6c3d 5b27 5f23 5f27  c,chk_val=['_#_'
+000096e0: 5d2c 6368 6b5f 6f6e 6c79 3d54 7275 6529  ],chk_only=True)
+000096f0: 3a20 7372 633d 7365 6c66 2e73 7263 0a20  : src=self.src. 
+00009700: 2020 2020 2020 2023 6966 2054 7970 6528         #if Type(
+00009710: 7372 632c 2769 6e73 7461 6e63 6527 2c27  src,'instance','
+00009720: 636c 6173 736f 626a 2729 3a0a 2020 2020  classobj'):.    
+00009730: 2020 2020 2320 6966 2073 7263 2069 7320      # if src is 
+00009740: 696e 7374 616e 6365 206f 7220 636c 6173  instance or clas
+00009750: 736f 626a 2074 6865 6e20 7365 6172 6368  sobj then search
+00009760: 2069 6e20 6465 7363 7269 7074 696f 6e20   in description 
+00009770: 616e 6420 6d61 6465 2066 756e 6374 696f  and made functio
+00009780: 6e20 6e61 6d65 2061 7420 6b65 790a 2020  n name at key.  
+00009790: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000097a0: 6e63 6528 7372 632c 286c 6973 742c 7475  nce(src,(list,tu
+000097b0: 706c 6529 293a 0a20 2020 2020 2020 2020  ple)):.         
+000097c0: 2020 2072 743d 5b5d 0a20 2020 2020 2020     rt=[].       
+000097d0: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
+000097e0: 6e67 6528 302c 6c65 6e28 7372 6329 293a  nge(0,len(src)):
+000097f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009800: 2061 3d73 656c 662e 4669 6e64 2866 696e   a=self.Find(fin
+00009810: 642c 7372 635b 695d 2c73 796d 3d73 796d  d,src[i],sym=sym
+00009820: 2c64 6566 6175 6c74 3d5b 5d2c 6f75 743d  ,default=[],out=
+00009830: 276c 6973 7427 2c66 696e 6461 6c6c 3d66  'list',findall=f
+00009840: 696e 6461 6c6c 2c77 6f72 643d 776f 7264  indall,word=word
+00009850: 2c6d 6f64 653d 6d6f 6465 2c70 7273 3d70  ,mode=mode,prs=p
+00009860: 7273 2c6c 696e 655f 6e75 6d3d 6c69 6e65  rs,line_num=line
+00009870: 5f6e 756d 2c70 6565 6c3d 7065 656c 2c69  _num,peel=peel,i
+00009880: 6478 3d69 6478 290a 2020 2020 2020 2020  dx=idx).        
+00009890: 2020 2020 2020 2020 6966 2061 3a20 7274          if a: rt
+000098a0: 3d72 742b 610a 2020 2020 2020 2020 2020  =rt+a.          
+000098b0: 2020 6966 206c 656e 2872 7429 3a0a 2020    if len(rt):.  
+000098c0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000098d0: 7475 726e 2072 740a 2020 2020 2020 2020  turn rt.        
+000098e0: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+000098f0: 7372 632c 6469 6374 293a 0a20 2020 2020  src,dict):.     
+00009900: 2020 2020 2020 2070 6174 683d 5b5d 0a20         path=[]. 
+00009910: 2020 2020 2020 2020 2020 2066 6f72 206b             for k
+00009920: 6579 2069 6e20 7372 633a 0a20 2020 2020  ey in src:.     
+00009930: 2020 2020 2020 2020 2020 2069 6620 6d6f             if mo
+00009940: 6465 2069 6e20 5b27 6b65 7927 2c27 2a27  de in ['key','*'
+00009950: 2c27 616c 6c27 5d3a 2023 2066 696e 6420  ,'all']: # find 
+00009960: 696e 206b 6579 206f 6e6c 790a 2020 2020  in key only.    
+00009970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009980: 6966 2066 696e 6420 3d3d 206b 6579 3a0a  if find == key:.
+00009990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000099a0: 2020 2020 2020 2020 7061 7468 2e61 7070          path.app
+000099b0: 656e 6428 6b65 7929 0a20 2020 2020 2020  end(key).       
+000099c0: 2020 2020 2020 2020 2066 6f75 6e64 3d73           found=s
+000099d0: 7263 2e67 6574 286b 6579 2c4e 6f6e 6529  rc.get(key,None)
+000099e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000099f0: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
+00009a00: 6f75 6e64 2c64 6963 7429 3a0a 2020 2020  ound,dict):.    
+00009a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009a20: 6966 2064 6570 2069 6e20 666f 756e 643a  if dep in found:
+00009a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009a40: 2020 2020 2020 2020 2020 6966 206d 6f64            if mod
+00009a50: 6520 696e 205b 2776 616c 7565 272c 272a  e in ['value','*
+00009a60: 272c 2761 6c6c 275d 2061 6e64 2028 6669  ','all'] and (fi
+00009a70: 6e64 203d 3d20 666f 756e 645b 6465 705d  nd == found[dep]
+00009a80: 206f 7220 2874 7970 6528 666f 756e 645b   or (type(found[
+00009a90: 6465 705d 2920 696e 205b 4449 4354 2c64  dep]) in [DICT,d
+00009aa0: 6963 742c 6c69 7374 2c74 7570 6c65 5d20  ict,list,tuple] 
+00009ab0: 616e 6420 6669 6e64 2069 6e20 666f 756e  and find in foun
+00009ac0: 645b 6465 705d 2920 6f72 2028 7479 7065  d[dep]) or (type
+00009ad0: 2866 696e 6429 2069 7320 7374 7220 616e  (find) is str an
+00009ae0: 6420 7479 7065 2866 6f75 6e64 5b64 6570  d type(found[dep
+00009af0: 5d29 2069 7320 7374 7220 616e 6420 6669  ]) is str and fi
+00009b00: 6e64 2069 6e20 666f 756e 645b 6465 705d  nd in found[dep]
+00009b10: 2929 3a20 2320 6669 6e64 2069 6e20 2766  )): # find in 'f
+00009b20: 696e 6427 206f 6e6c 790a 2020 2020 2020  ind' only.      
+00009b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009b40: 2020 2020 2020 2020 2320 5661 6c75 6520          # Value 
+00009b50: 6669 6e64 0a20 2020 2020 2020 2020 2020  find.           
+00009b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009b70: 2020 2070 6174 682e 6170 7065 6e64 286b     path.append(k
+00009b80: 6579 290a 2020 2020 2020 2020 2020 2020  ey).            
+00009b90: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00009ba0: 6620 6973 696e 7374 616e 6365 2866 6f75  f isinstance(fou
+00009bb0: 6e64 5b64 6570 5d2c 2064 6963 7429 3a20  nd[dep], dict): 
+00009bc0: 2320 7265 6375 7273 696e 670a 2020 2020  # recursing.    
+00009bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009be0: 2020 2020 2020 2020 2020 7061 7468 3d70            path=p
+00009bf0: 6174 682b 7365 6c66 2e46 696e 6428 6669  ath+self.Find(fi
+00009c00: 6e64 2c66 6f75 6e64 5b64 6570 5d2c 7072  nd,found[dep],pr
+00009c10: 6f70 6572 3d70 726f 7065 722c 6d6f 6465  oper=proper,mode
+00009c20: 3d6d 6f64 6529 0a20 2020 2020 2020 2020  =mode).         
+00009c30: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00009c40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009c50: 2020 2020 2020 2020 2020 6966 206d 6f64            if mod
+00009c60: 6520 696e 205b 2776 616c 7565 272c 272a  e in ['value','*
+00009c70: 272c 2761 6c6c 275d 2061 6e64 2066 696e  ','all'] and fin
+00009c80: 6420 3d3d 2066 6f75 6e64 206f 7220 2874  d == found or (t
+00009c90: 7970 6528 666f 756e 6429 2069 6e20 5b6c  ype(found) in [l
+00009ca0: 6973 742c 7475 706c 655d 2061 6e64 2066  ist,tuple] and f
+00009cb0: 696e 6420 696e 2066 6f75 6e64 2920 6f72  ind in found) or
+00009cc0: 2028 7479 7065 2866 696e 6429 2069 7320   (type(find) is 
+00009cd0: 7374 7220 616e 6420 7479 7065 2866 6f75  str and type(fou
+00009ce0: 6e64 2920 6973 2073 7472 2061 6e64 2066  nd) is str and f
+00009cf0: 696e 6420 696e 2066 6f75 6e64 293a 0a20  ind in found):. 
+00009d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009d10: 2020 2020 2020 2020 2020 2020 7061 7468              path
+00009d20: 2e61 7070 656e 6428 6b65 7929 0a20 2020  .append(key).   
+00009d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009d40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00009d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009d60: 2020 2020 2020 2020 2066 6f72 206b 6b20           for kk 
+00009d70: 696e 2073 656c 662e 4669 6e64 2866 696e  in self.Find(fin
+00009d80: 642c 7372 635b 6b65 795d 2c70 726f 7065  d,src[key],prope
+00009d90: 723d 7072 6f70 6572 2c6d 6f64 653d 6d6f  r=proper,mode=mo
+00009da0: 6465 2c6f 7574 3d64 6963 742c 6465 6661  de,out=dict,defa
+00009db0: 756c 743d 7b7d 293a 2023 2072 6563 7572  ult={}): # recur
+00009dc0: 7369 6e67 0a20 2020 2020 2020 2020 2020  sing.           
+00009dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009de0: 2020 2020 2020 7061 7468 2e61 7070 656e        path.appen
+00009df0: 6428 6b65 792b 272f 272b 6b6b 290a 2020  d(key+'/'+kk).  
+00009e00: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00009e10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00009e20: 2020 2020 2020 2020 6966 206d 6f64 6520          if mode 
+00009e30: 696e 205b 2776 616c 7565 272c 272a 272c  in ['value','*',
+00009e40: 2761 6c6c 275d 2061 6e64 2066 696e 6420  'all'] and find 
+00009e50: 3d3d 2066 6f75 6e64 206f 7220 2874 7970  == found or (typ
+00009e60: 6528 666f 756e 6429 2069 6e20 5b6c 6973  e(found) in [lis
+00009e70: 742c 7475 706c 655d 2061 6e64 2066 696e  t,tuple] and fin
+00009e80: 6420 696e 2066 6f75 6e64 2920 6f72 2028  d in found) or (
+00009e90: 7479 7065 2866 696e 6429 2069 7320 7374  type(find) is st
+00009ea0: 7220 616e 6420 7479 7065 2866 6f75 6e64  r and type(found
+00009eb0: 2920 6973 2073 7472 2061 6e64 2066 696e  ) is str and fin
+00009ec0: 6420 696e 2066 6f75 6e64 293a 0a20 2020  d in found):.   
 00009ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ee0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00009ef0: 6e73 7461 6e63 6528 6669 6e64 5b64 645d  nstance(find[dd]
-00009f00: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
-00009f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f20: 2020 2020 2020 2020 666d 743d 6e65 7874          fmt=next
-00009f30: 2869 7465 7228 6669 6e64 5b64 645d 2929  (iter(find[dd]))
-00009f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f60: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00009f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f80: 2020 2020 2020 2020 2020 6469 6478 3d69            didx=i
-00009f90: 6e74 2866 696e 645b 6464 5d5b 666d 745d  nt(find[dd][fmt]
-00009fa0: 2e67 6574 2827 6964 7827 2929 0a20 2020  .get('idx')).   
-00009fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009fc0: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-00009fd0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-00009fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ff0: 2020 2020 2020 2020 2064 6964 783d 4e6f           didx=No
-0000a000: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-0000a010: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000a020: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0000a030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a040: 2020 2020 2066 6d74 3d66 696e 645b 6464       fmt=find[dd
-0000a050: 5d0a 2320 2020 2020 2020 2020 2020 2020  ].#             
-0000a060: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0000a070: 613d 7265 2e63 6f6d 7069 6c65 2866 6d74  a=re.compile(fmt
-0000a080: 292e 6669 6e64 616c 6c28 7374 7269 6e67  ).findall(string
-0000a090: 5f61 5b6e 6e5d 290a 2020 2020 2020 2020  _a[nn]).        
-0000a0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0b0: 2020 2020 6966 2077 6f72 643a 0a20 2020      if word:.   
+00009ee0: 2020 2020 2070 6174 682e 6170 7065 6e64       path.append
+00009ef0: 286b 6579 290a 2020 2020 2020 2020 2020  (key).          
+00009f00: 2020 7265 7475 726e 2070 6174 680a 2020    return path.  
+00009f10: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+00009f20: 7461 6e63 6528 7372 632c 7374 7229 3a0a  tance(src,str):.
+00009f30: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+00009f40: 696e 6461 6c6c 3a0a 2020 2020 2020 2020  indall:.        
+00009f50: 2020 2020 2020 2020 6966 2070 7273 203d          if prs =
+00009f60: 3d20 2724 273a 2069 6478 3d2d 310a 2020  = '$': idx=-1.  
+00009f70: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00009f80: 2070 7273 203d 3d20 275e 273a 2069 6478   prs == '^': idx
+00009f90: 3d30 0a20 2020 2020 2020 2020 2020 2020  =0.             
+00009fa0: 2020 2069 6620 7379 6d3a 0a20 2020 2020     if sym:.     
+00009fb0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00009fc0: 7472 696e 675f 613d 7372 632e 7370 6c69  tring_a=src.spli
+00009fd0: 7428 7379 6d29 0a20 2020 2020 2020 2020  t(sym).         
+00009fe0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00009ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a000: 2073 7472 696e 675f 613d 5b73 7263 5d0a   string_a=[src].
+0000a010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a020: 6966 2069 7369 6e73 7461 6e63 6528 6669  if isinstance(fi
+0000a030: 6e64 2c64 6963 7429 3a0a 2020 2020 2020  nd,dict):.      
+0000a040: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0000a050: 756e 643d 7b7d 0a20 2020 2020 2020 2020  und={}.         
+0000a060: 2020 2020 2020 2020 2020 2066 6f72 206e             for n
+0000a070: 6e20 696e 2072 616e 6765 2830 2c6c 656e  n in range(0,len
+0000a080: 2873 7472 696e 675f 6129 293a 0a20 2020  (string_a)):.   
+0000a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a0a0: 2020 2020 2066 6f72 2064 6420 696e 2066       for dd in f
+0000a0b0: 696e 643a 0a20 2020 2020 2020 2020 2020  ind:.           
 0000a0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0d0: 2020 2020 2020 2020 2020 2020 2061 613d               aa=
-0000a0e0: 7265 2e63 6f6d 7069 6c65 2872 275c 6228  re.compile(r'\b(
-0000a0f0: 7b30 7d29 5c62 272e 666f 726d 6174 2866  {0})\b'.format(f
-0000a100: 6d74 292c 666c 6167 733d 7265 2e49 474e  mt),flags=re.IGN
-0000a110: 4f52 4543 4153 4529 2e66 696e 6461 6c6c  ORECASE).findall
-0000a120: 2873 7472 696e 675f 615b 6e6e 5d29 0a20  (string_a[nn]). 
-0000a130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a140: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0000a150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a170: 2061 613d 7265 2e63 6f6d 7069 6c65 2866   aa=re.compile(f
-0000a180: 6d74 2c66 6c61 6773 3d72 652e 4947 4e4f  mt,flags=re.IGNO
-0000a190: 5245 4341 5345 292e 6669 6e64 616c 6c28  RECASE).findall(
-0000a1a0: 7374 7269 6e67 5f61 5b6e 6e5d 290a 2020  string_a[nn]).  
-0000a1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1c0: 2020 2020 2020 2020 2020 6966 2061 613a            if aa:
-0000a1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1f0: 2066 6f72 206d 6d20 696e 2061 613a 0a20   for mm in aa:. 
-0000a200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a0d0: 2064 6964 783d 4e6f 6e65 0a20 2020 2020   didx=None.     
+0000a0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a0f0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0000a100: 616e 6365 2866 696e 645b 6464 5d2c 6469  ance(find[dd],di
+0000a110: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
+0000a120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a130: 2020 2020 2066 6d74 3d6e 6578 7428 6974       fmt=next(it
+0000a140: 6572 2866 696e 645b 6464 5d29 290a 2020  er(find[dd])).  
+0000a150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a160: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0000a170: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+0000a180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a190: 2020 2020 2020 2064 6964 783d 696e 7428         didx=int(
+0000a1a0: 6669 6e64 5b64 645d 5b66 6d74 5d2e 6765  find[dd][fmt].ge
+0000a1b0: 7428 2769 6478 2729 290a 2020 2020 2020  t('idx')).      
+0000a1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a1d0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0000a1e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000a1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a200: 2020 2020 2020 6469 6478 3d4e 6f6e 650a        didx=None.
 0000a210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a220: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0000a230: 286d 6d2c 2874 7570 6c65 2c6c 6973 7429  (mm,(tuple,list)
-0000a240: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
-0000a250: 2864 6964 782c 696e 7429 3a0a 2020 2020  (didx,int):.    
+0000a220: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000a230: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000a240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a250: 2020 666d 743d 6669 6e64 5b64 645d 0a23    fmt=find[dd].#
 0000a260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a280: 2020 2020 6966 206c 696e 655f 6e75 6d3a      if line_num:
-0000a290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a2b0: 2020 2020 2020 2020 2020 2020 2066 6f75               fou
-0000a2c0: 6e64 2e75 7064 6174 6528 7b64 643a 7b27  nd.update({dd:{'
-0000a2d0: 6461 7461 273a 6d6d 5b64 6964 785d 2c27  data':mm[didx],'
-0000a2e0: 6c69 6e65 273a 6e6e 2c27 7372 6327 3a73  line':nn,'src':s
-0000a2f0: 7472 696e 675f 615b 6e6e 5d7d 7d29 0a20  tring_a[nn]}}). 
-0000a300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a320: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0000a330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a270: 2020 2020 2020 2020 2020 2020 6161 3d72              aa=r
+0000a280: 652e 636f 6d70 696c 6528 666d 7429 2e66  e.compile(fmt).f
+0000a290: 696e 6461 6c6c 2873 7472 696e 675f 615b  indall(string_a[
+0000a2a0: 6e6e 5d29 0a20 2020 2020 2020 2020 2020  nn]).           
+0000a2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a2c0: 2069 6620 776f 7264 3a0a 2020 2020 2020   if word:.      
+0000a2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a2e0: 2020 2020 2020 2020 2020 6161 3d72 652e            aa=re.
+0000a2f0: 636f 6d70 696c 6528 7227 5c62 287b 307d  compile(r'\b({0}
+0000a300: 295c 6227 2e66 6f72 6d61 7428 666d 7429  )\b'.format(fmt)
+0000a310: 2c66 6c61 6773 3d72 652e 4947 4e4f 5245  ,flags=re.IGNORE
+0000a320: 4341 5345 292e 6669 6e64 616c 6c28 7374  CASE).findall(st
+0000a330: 7269 6e67 5f61 5b6e 6e5d 290a 2020 2020  ring_a[nn]).    
 0000a340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a350: 2020 2020 2020 2020 2066 6f75 6e64 2e75           found.u
-0000a360: 7064 6174 6528 7b64 643a 6d6d 5b64 6964  pdate({dd:mm[did
-0000a370: 785d 7d29 0a20 2020 2020 2020 2020 2020  x]}).           
-0000a380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a390: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0000a3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3c0: 2020 2020 2020 2069 6620 6c69 6e65 5f6e         if line_n
-0000a3d0: 756d 3a0a 2020 2020 2020 2020 2020 2020  um:.            
+0000a350: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000a360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a370: 2020 2020 2020 2020 2020 2020 2020 6161                aa
+0000a380: 3d72 652e 636f 6d70 696c 6528 666d 742c  =re.compile(fmt,
+0000a390: 666c 6167 733d 7265 2e49 474e 4f52 4543  flags=re.IGNOREC
+0000a3a0: 4153 4529 2e66 696e 6461 6c6c 2873 7472  ASE).findall(str
+0000a3b0: 696e 675f 615b 6e6e 5d29 0a20 2020 2020  ing_a[nn]).     
+0000a3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a3d0: 2020 2020 2020 2069 6620 6161 3a0a 2020         if aa:.  
 0000a3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a400: 666f 756e 642e 7570 6461 7465 287b 6464  found.update({dd
-0000a410: 3a7b 2764 6174 6127 3a6d 6d2c 276c 696e  :{'data':mm,'lin
-0000a420: 6527 3a6e 6e2c 2773 7263 273a 7374 7269  e':nn,'src':stri
-0000a430: 6e67 5f61 5b6e 6e5d 7d7d 290a 2020 2020  ng_a[nn]}}).    
-0000a440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a460: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000a3f0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0000a400: 7220 6d6d 2069 6e20 6161 3a0a 2020 2020  r mm in aa:.    
+0000a410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a430: 6966 2069 7369 6e73 7461 6e63 6528 6d6d  if isinstance(mm
+0000a440: 2c28 7475 706c 652c 6c69 7374 2929 2061  ,(tuple,list)) a
+0000a450: 6e64 2069 7369 6e73 7461 6e63 6528 6469  nd isinstance(di
+0000a460: 6478 2c69 6e74 293a 0a20 2020 2020 2020  dx,int):.       
 0000a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a490: 2020 2020 2020 666f 756e 642e 7570 6461        found.upda
-0000a4a0: 7465 287b 6464 3a6d 6d7d 290a 2020 2020  te({dd:mm}).    
+0000a490: 2069 6620 6c69 6e65 5f6e 756d 3a0a 2020   if line_num:.  
+0000a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a4c0: 2369 6620 666f 756e 643a 2072 6574 7572  #if found: retur
-0000a4d0: 6e20 4f75 7446 6f72 6d61 7428 666f 756e  n OutFormat(foun
-0000a4e0: 642c 6f75 743d 6f75 742c 7065 656c 3d70  d,out=out,peel=p
-0000a4f0: 6565 6c29 0a20 2020 2020 2020 2020 2020  eel).           
-0000a500: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000a510: 4f75 7446 6f72 6d61 7428 666f 756e 642c  OutFormat(found,
-0000a520: 6f75 743d 6f75 742c 7065 656c 3d70 6565  out=out,peel=pee
-0000a530: 6c2c 6f72 673d 7372 632c 6465 6661 756c  l,org=src,defaul
-0000a540: 743d 6465 6661 756c 7429 0a20 2020 2020  t=default).     
-0000a550: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0000a560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a570: 2020 2020 2066 6f75 6e64 3d5b 5d0a 2020       found=[].  
-0000a580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a590: 2020 666f 7220 6e6e 2069 6e20 7261 6e67    for nn in rang
-0000a5a0: 6528 302c 6c65 6e28 7374 7269 6e67 5f61  e(0,len(string_a
-0000a5b0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-0000a5c0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-0000a5d0: 7369 6e73 7461 6e63 6528 6669 6e64 2c28  sinstance(find,(
-0000a5e0: 6c69 7374 2c74 7570 6c65 2929 3a0a 2020  list,tuple)):.  
+0000a4c0: 2020 2020 2020 2020 2020 666f 756e 642e            found.
+0000a4d0: 7570 6461 7465 287b 6464 3a7b 2764 6174  update({dd:{'dat
+0000a4e0: 6127 3a6d 6d5b 6469 6478 5d2c 276c 696e  a':mm[didx],'lin
+0000a4f0: 6527 3a6e 6e2c 2773 7263 273a 7374 7269  e':nn,'src':stri
+0000a500: 6e67 5f61 5b6e 6e5d 7d7d 290a 2020 2020  ng_a[nn]}}).    
+0000a510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a530: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000a540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a560: 2020 2020 2020 666f 756e 642e 7570 6461        found.upda
+0000a570: 7465 287b 6464 3a6d 6d5b 6469 6478 5d7d  te({dd:mm[didx]}
+0000a580: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000a590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a5a0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a5d0: 2020 2020 6966 206c 696e 655f 6e75 6d3a      if line_num:
+0000a5e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 0000a5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a600: 2020 2020 2020 2020 2020 6669 6e64 3d6c            find=l
-0000a610: 6973 7428 6669 6e64 290a 2020 2020 2020  ist(find).      
-0000a620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a630: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a650: 2020 2020 6669 6e64 3d5b 6669 6e64 5d0a      find=[find].
+0000a600: 2020 2020 2020 2020 2020 2020 2066 6f75               fou
+0000a610: 6e64 2e75 7064 6174 6528 7b64 643a 7b27  nd.update({dd:{'
+0000a620: 6461 7461 273a 6d6d 2c27 6c69 6e65 273a  data':mm,'line':
+0000a630: 6e6e 2c27 7372 6327 3a73 7472 696e 675f  nn,'src':string_
+0000a640: 615b 6e6e 5d7d 7d29 0a20 2020 2020 2020  a[nn]}}).       
+0000a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a670: 2020 2020 2020 2020 666f 7220 6666 2069          for ff i
-0000a680: 6e20 6669 6e64 3a0a 2020 2020 2020 2020  n find:.        
+0000a670: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000a680: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000a690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a6a0: 2020 2020 2361 613d 7265 2e63 6f6d 7069      #aa=re.compi
-0000a6b0: 6c65 2866 6629 2e66 696e 6461 6c6c 2873  le(ff).findall(s
-0000a6c0: 7472 696e 675f 615b 6e6e 5d29 0a20 2020  tring_a[nn]).   
-0000a6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a6e0: 2020 2020 2020 2020 2069 6620 776f 7264           if word
-0000a6f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000a700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a710: 2020 6161 3d72 652e 636f 6d70 696c 6528    aa=re.compile(
-0000a720: 7227 5c62 287b 307d 295c 6227 2e66 6f72  r'\b({0})\b'.for
-0000a730: 6d61 7428 6666 292c 666c 6167 733d 7265  mat(ff),flags=re
-0000a740: 2e49 474e 4f52 4543 4153 4529 2e66 696e  .IGNORECASE).fin
-0000a750: 6461 6c6c 2873 7472 696e 675f 615b 6e6e  dall(string_a[nn
-0000a760: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-0000a770: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000a780: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0000a790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a7a0: 2020 2020 2061 613d 7265 2e63 6f6d 7069       aa=re.compi
-0000a7b0: 6c65 2866 662c 666c 6167 733d 7265 2e49  le(ff,flags=re.I
-0000a7c0: 474e 4f52 4543 4153 4529 2e66 696e 6461  GNORECASE).finda
-0000a7d0: 6c6c 2873 7472 696e 675f 615b 6e6e 5d29  ll(string_a[nn])
-0000a7e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a7f0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-0000a800: 206d 6d20 696e 2061 613a 0a20 2020 2020   mm in aa:.     
-0000a810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a820: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-0000a830: 696e 7374 616e 6365 2869 6478 2c69 6e74  instance(idx,int
-0000a840: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0000a6a0: 2020 2066 6f75 6e64 2e75 7064 6174 6528     found.update(
+0000a6b0: 7b64 643a 6d6d 7d29 0a20 2020 2020 2020  {dd:mm}).       
+0000a6c0: 2020 2020 2020 2020 2020 2020 2023 6966               #if
+0000a6d0: 2066 6f75 6e64 3a20 7265 7475 726e 204f   found: return O
+0000a6e0: 7574 466f 726d 6174 2866 6f75 6e64 2c6f  utFormat(found,o
+0000a6f0: 7574 3d6f 7574 2c70 6565 6c3d 7065 656c  ut=out,peel=peel
+0000a700: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000a710: 2020 2020 2020 7265 7475 726e 204f 7574        return Out
+0000a720: 466f 726d 6174 2866 6f75 6e64 2c6f 7574  Format(found,out
+0000a730: 3d6f 7574 2c70 6565 6c3d 7065 656c 2c6f  =out,peel=peel,o
+0000a740: 7267 3d73 7263 2c64 6566 6175 6c74 3d64  rg=src,default=d
+0000a750: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
+0000a760: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000a770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a780: 2020 666f 756e 643d 5b5d 0a20 2020 2020    found=[].     
+0000a790: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000a7a0: 6f72 206e 6e20 696e 2072 616e 6765 2830  or nn in range(0
+0000a7b0: 2c6c 656e 2873 7472 696e 675f 6129 293a  ,len(string_a)):
+0000a7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a7d0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0000a7e0: 7374 616e 6365 2866 696e 642c 286c 6973  stance(find,(lis
+0000a7f0: 742c 7475 706c 6529 293a 0a20 2020 2020  t,tuple)):.     
+0000a800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a810: 2020 2020 2020 2066 696e 643d 6c69 7374         find=list
+0000a820: 2866 696e 6429 0a20 2020 2020 2020 2020  (find).         
+0000a830: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000a840: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
 0000a850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a860: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000a870: 616e 6365 286d 6d2c 2874 7570 6c65 2c6c  ance(mm,(tuple,l
-0000a880: 6973 7429 293a 0a20 2020 2020 2020 2020  ist)):.         
-0000a890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000a8b0: 6620 6c69 6e65 5f6e 756d 3a0a 2020 2020  f line_num:.    
-0000a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8e0: 2020 2020 2020 2020 666f 756e 642e 6170          found.ap
-0000a8f0: 7065 6e64 2828 6d6d 5b69 6478 5d2c 6e6e  pend((mm[idx],nn
-0000a900: 2c73 7472 696e 675f 615b 6e6e 5d29 290a  ,string_a[nn])).
-0000a910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a930: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0000a940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a960: 2020 2020 2020 2020 2020 666f 756e 642e            found.
-0000a970: 6170 7065 6e64 286d 6d5b 6964 785d 290a  append(mm[idx]).
-0000a980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9c0: 2020 2020 2020 2020 2020 6966 206c 696e            if lin
-0000a9d0: 655f 6e75 6d3a 0a20 2020 2020 2020 2020  e_num:.         
-0000a9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0000aa00: 6f75 6e64 2e61 7070 656e 6428 286d 6d2c  ound.append((mm,
-0000aa10: 6e6e 2c73 7472 696e 675f 615b 6e6e 5d29  nn,string_a[nn])
-0000aa20: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000aa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000a860: 2066 696e 643d 5b66 696e 645d 0a20 2020   find=[find].   
+0000a870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a880: 2020 2020 2066 6f72 2066 6620 696e 2066       for ff in f
+0000a890: 696e 643a 0a20 2020 2020 2020 2020 2020  ind:.           
+0000a8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8b0: 2023 6161 3d72 652e 636f 6d70 696c 6528   #aa=re.compile(
+0000a8c0: 6666 292e 6669 6e64 616c 6c28 7374 7269  ff).findall(stri
+0000a8d0: 6e67 5f61 5b6e 6e5d 290a 2020 2020 2020  ng_a[nn]).      
+0000a8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a8f0: 2020 2020 2020 6966 2077 6f72 643a 0a20        if word:. 
+0000a900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a910: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000a920: 613d 7265 2e63 6f6d 7069 6c65 2872 275c  a=re.compile(r'\
+0000a930: 6228 7b30 7d29 5c62 272e 666f 726d 6174  b({0})\b'.format
+0000a940: 2866 6629 2c66 6c61 6773 3d72 652e 4947  (ff),flags=re.IG
+0000a950: 4e4f 5245 4341 5345 292e 6669 6e64 616c  NORECASE).findal
+0000a960: 6c28 7374 7269 6e67 5f61 5b6e 6e5d 290a  l(string_a[nn]).
+0000a970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a980: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000a990: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000a9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a9b0: 2020 6161 3d72 652e 636f 6d70 696c 6528    aa=re.compile(
+0000a9c0: 6666 2c66 6c61 6773 3d72 652e 4947 4e4f  ff,flags=re.IGNO
+0000a9d0: 5245 4341 5345 292e 6669 6e64 616c 6c28  RECASE).findall(
+0000a9e0: 7374 7269 6e67 5f61 5b6e 6e5d 290a 2020  string_a[nn]).  
+0000a9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa00: 2020 2020 2020 2020 2020 666f 7220 6d6d            for mm
+0000aa10: 2069 6e20 6161 3a0a 2020 2020 2020 2020   in aa:.        
+0000aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aa30: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0000aa40: 7461 6e63 6528 6964 782c 696e 7429 3a0a  tance(idx,int):.
 0000aa50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000aa60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa70: 2020 2020 666f 756e 642e 6170 7065 6e64      found.append
-0000aa80: 286d 6d29 0a20 2020 2020 2020 2020 2020  (mm).           
-0000aa90: 2020 2020 2020 2020 2023 6966 2066 6f75           #if fou
-0000aaa0: 6e64 3a72 6574 7572 6e20 4f75 7446 6f72  nd:return OutFor
-0000aab0: 6d61 7428 666f 756e 642c 6f75 743d 6f75  mat(found,out=ou
-0000aac0: 742c 7065 656c 3d70 6565 6c29 0a20 2020  t,peel=peel).   
+0000aa70: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0000aa80: 6528 6d6d 2c28 7475 706c 652c 6c69 7374  e(mm,(tuple,list
+0000aa90: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+0000aaa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aab0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+0000aac0: 696e 655f 6e75 6d3a 0a20 2020 2020 2020  ine_num:.       
 0000aad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aae0: 2072 6574 7572 6e20 4f75 7446 6f72 6d61   return OutForma
-0000aaf0: 7428 666f 756e 642c 6f75 743d 6f75 742c  t(found,out=out,
-0000ab00: 7065 656c 3d70 6565 6c2c 6f72 673d 7372  peel=peel,org=sr
-0000ab10: 632c 6465 6661 756c 743d 6465 6661 756c  c,default=defaul
-0000ab20: 7429 0a23 2020 2020 2020 2020 2020 2020  t).#            
-0000ab30: 2020 2020 6d61 7463 683d 6669 6e64 5f72      match=find_r
-0000ab40: 652e 6669 6e64 616c 6c28 7372 6329 0a23  e.findall(src).#
+0000aae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aaf0: 2020 2020 2066 6f75 6e64 2e61 7070 656e       found.appen
+0000ab00: 6428 286d 6d5b 6964 785d 2c6e 6e2c 7374  d((mm[idx],nn,st
+0000ab10: 7269 6e67 5f61 5b6e 6e5d 2929 0a20 2020  ring_a[nn])).   
+0000ab20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab40: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
 0000ab50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab60: 6966 206d 6174 6368 3a20 7265 7475 726e  if match: return
-0000ab70: 204f 7574 466f 726d 6174 286d 6174 6368   OutFormat(match
-0000ab80: 2c6f 7574 3d6f 7574 290a 2020 2020 2020  ,out=out).      
-0000ab90: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-0000aba0: 7461 6e63 6528 6669 6e64 2c73 7472 293a  tance(find,str):
-0000abb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000abc0: 2069 6620 776f 7264 3a0a 2020 2020 2020   if word:.      
-0000abd0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-0000abe0: 6e64 5f72 653d 7265 2e63 6f6d 7069 6c65  nd_re=re.compile
-0000abf0: 2872 275c 6228 7b30 7d29 5c62 272e 666f  (r'\b({0})\b'.fo
-0000ac00: 726d 6174 2866 696e 6429 2c66 6c61 6773  rmat(find),flags
-0000ac10: 3d72 652e 4947 4e4f 5245 4341 5345 290a  =re.IGNORECASE).
-0000ac20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac30: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000ac40: 2020 2020 2020 2020 2020 6669 6e64 5f72            find_r
-0000ac50: 653d 7265 2e63 6f6d 7069 6c65 2866 696e  e=re.compile(fin
-0000ac60: 642c 666c 6167 733d 7265 2e49 474e 4f52  d,flags=re.IGNOR
-0000ac70: 4543 4153 4529 0a20 2020 2020 2020 2020  ECASE).         
-0000ac80: 2020 2020 2020 206d 6174 6368 3d66 696e         match=fin
-0000ac90: 645f 7265 2e73 6561 7263 6828 7372 6329  d_re.search(src)
-0000aca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000acb0: 2069 6620 6d61 7463 683a 2072 6574 7572   if match: retur
-0000acc0: 6e20 4f75 7446 6f72 6d61 7428 5b6d 6174  n OutFormat([mat
-0000acd0: 6368 2e67 726f 7570 2829 5d2c 6f75 743d  ch.group()],out=
-0000ace0: 6f75 742c 7065 656c 3d70 6565 6c29 0a20  out,peel=peel). 
-0000acf0: 2020 2020 2020 2023 7265 7475 726e 204f         #return O
-0000ad00: 7574 466f 726d 6174 2864 6566 6175 6c74  utFormat(default
-0000ad10: 2c6f 7574 3d6f 7574 2c70 6565 6c3d 7065  ,out=out,peel=pe
-0000ad20: 656c 290a 2020 2020 2020 2020 7265 7475  el).        retu
-0000ad30: 726e 204f 7574 466f 726d 6174 285b 5d2c  rn OutFormat([],
-0000ad40: 6f75 743d 6f75 742c 7065 656c 3d70 6565  out=out,peel=pee
-0000ad50: 6c2c 6f72 673d 7372 632c 6465 6661 756c  l,org=src,defaul
-0000ad60: 743d 6465 6661 756c 7429 0a64 6566 2046  t=default).def F
-0000ad70: 6f75 6e64 2864 6174 612c 6669 6e64 2c64  ound(data,find,d
-0000ad80: 6967 6974 7374 7269 6e67 3d46 616c 7365  igitstring=False
-0000ad90: 2c77 6f72 643d 4661 6c73 652c 7768 6974  ,word=False,whit
-0000ada0: 655f 7370 6163 653d 5472 7565 2c73 656e  e_space=True,sen
-0000adb0: 7365 3d54 7275 652c 6c6f 6361 7469 6f6e  se=True,location
-0000adc0: 3d46 616c 7365 2c70 7974 686f 6e6c 696b  =False,pythonlik
-0000add0: 653d 4661 6c73 6529 3a0a 2020 2020 2727  e=False):.    ''
-0000ade0: 270a 2020 2020 6966 2066 6f75 6e64 203c  '.    if found <
-0000adf0: 6669 6e64 3e20 696e 203c 6461 7461 3e20  find> in <data> 
-0000ae00: 7468 656e 2072 6574 7572 6e20 5472 7565  then return True
-0000ae10: 2c20 6e6f 7420 7468 656e 2046 616c 7365  , not then False
-0000ae20: 0a20 2020 2049 6620 6669 6e64 2022 5b41  .    If find "[A
-0000ae30: 6c6c 5d22 2074 6865 6e20 796f 7520 6361  ll]" then you ca
-0000ae40: 6e20 7479 7065 2022 5c5b 416c 6c5c 5d22  n type "\[All\]"
-0000ae50: 2061 7420 7468 6520 3c66 696e 643e 206c   at the <find> l
-0000ae60: 6f63 6174 696f 6e0a 2020 2020 6966 206e  ocation.    if n
-0000ae70: 6f74 2074 6865 6e20 225b 5d22 2077 696c  ot then "[]" wil
-0000ae80: 6c20 6265 2077 6f72 6b20 7769 7468 2072  l be work with r
-0000ae90: 6520 6578 7072 6573 7369 6f6e 0a20 2020  e expression.   
-0000aea0: 203c 6669 6e64 3e20 7275 6c65 3a0a 2020   <find> rule:.  
-0000aeb0: 2020 2020 2072 652e 636f 6d70 696c 6520       re.compile 
-0000aec0: 7265 6775 6c61 7220 6578 7072 6573 7369  regular expressi
-0000aed0: 6f6e 0a20 2020 2020 2020 616e 7920 6b65  on.       any ke
-0000aee0: 6570 2063 6861 7261 6374 6572 7320 203a  ep characters  :
-0000aef0: 202a 0a20 2020 2020 2020 616e 7920 7369   *.       any si
-0000af00: 6e67 6c65 2063 6861 7261 6374 6572 203a  ngle character :
-0000af10: 203f 0a20 2020 2020 2020 5e20 2020 2020   ?.       ^     
-0000af20: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-0000af30: 2073 7461 7274 0a20 2020 2020 2020 2420   start.       $ 
-0000af40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af50: 2020 203a 2065 6e64 0a20 2020 203c 6f70     : end.    <op
-0000af60: 7469 6f6e 3e0a 2020 2020 2020 2073 656e  tion>.       sen
-0000af70: 7365 2020 2020 2020 2020 2020 2020 2020  se              
-0000af80: 2020 3a20 5472 7565 3a28 6465 6661 756c    : True:(defaul
-0000af90: 7429 2073 656e 7365 7469 7665 2c20 4661  t) sensetive, Fa
-0000afa0: 6c73 653a 206c 6f77 6572 2061 6e64 2075  lse: lower and u
-0000afb0: 7070 6572 2069 7320 7361 6d65 0a20 2020  pper is same.   
-0000afc0: 2020 2020 7768 6974 655f 7370 6163 6520      white_space 
-0000afd0: 2020 2020 2020 2020 203a 2054 7275 653a           : True:
-0000afe0: 2864 6566 6175 6c74 2920 6b65 6570 2077  (default) keep w
-0000aff0: 6869 7465 5f73 7061 6365 2c20 4661 6c73  hite_space, Fals
-0000b000: 653a 2069 676e 6f72 6520 7768 6974 655f  e: ignore white_
-0000b010: 7370 6163 650a 2020 2020 2020 2077 6f72  space.       wor
-0000b020: 6420 2020 2020 2020 2020 2020 2020 2020  d               
-0000b030: 2020 3a20 5472 7565 3a20 3c66 696e 643e    : True: <find>
-0000b040: 2069 7320 636f 7272 6563 7420 776f 7264   is correct word
-0000b050: 2c20 4661 6c73 653a 2864 6566 6175 6c74  , False:(default
-0000b060: 2920 3c66 696e 643e 2069 6e20 696e 7364  ) <find> in insd
-0000b070: 6520 7374 7269 6e67 0a20 2020 2020 2020  e string.       
-0000b080: 6469 6769 7473 7472 696e 6720 2020 2020  digitstring     
-0000b090: 2020 2020 203a 2054 7275 653a 2073 7472       : True: str
-0000b0a0: 696e 6720 616e 6420 696e 7469 6765 7220  ing and intiger 
-0000b0b0: 6973 2073 616d 652c 2046 616c 7365 3a28  is same, False:(
-0000b0c0: 6465 6661 756c 7429 2064 6966 6665 7265  default) differe
-0000b0d0: 6e74 0a20 2020 2020 2020 6c6f 6361 7469  nt.       locati
-0000b0e0: 6f6e 2020 2020 2020 2020 2020 2020 203a  on             :
-0000b0f0: 2054 7275 653a 2072 6574 7572 6e20 666f   True: return fo
-0000b100: 756e 6420 6c6f 6361 7469 6f6e 2065 783a  und location ex:
-0000b110: 2833 2c31 3029 2c20 4661 6c73 653a 2864  (3,10), False:(d
-0000b120: 6566 6175 6c74 2920 7265 7475 726e 2054  efault) return T
-0000b130: 7275 652f 4661 6c73 650a 2020 2020 2727  rue/False.    ''
-0000b140: 270a 2020 2020 6465 6620 5f46 6f75 6e64  '.    def _Found
-0000b150: 5f28 6461 7461 2c66 696e 642c 776f 7264  _(data,find,word
-0000b160: 2c73 656e 7365 2c6c 6f63 6174 696f 6e29  ,sense,location)
-0000b170: 3a0a 2020 2020 2020 2020 6461 7461 5f74  :.        data_t
-0000b180: 7970 653d 7479 7065 2864 6174 6129 2e5f  ype=type(data)._
-0000b190: 5f6e 616d 655f 5f0a 2020 2020 2020 2020  _name__.        
-0000b1a0: 6966 2064 6174 615f 7479 7065 203d 3d20  if data_type == 
-0000b1b0: 2762 7974 6573 273a 0a20 2020 2020 2020  'bytes':.       
-0000b1c0: 2020 2020 2066 696e 643d 4279 7465 7328       find=Bytes(
-0000b1d0: 6669 6e64 290a 2020 2020 2020 2020 656c  find).        el
-0000b1e0: 6966 2064 6174 615f 7479 7065 203d 3d20  if data_type == 
-0000b1f0: 2773 7472 273a 0a20 2020 2020 2020 2020  'str':.         
-0000b200: 2020 2066 696e 643d 5374 7228 6669 6e64     find=Str(find
-0000b210: 290a 2020 2020 2020 2020 6966 2064 6174  ).        if dat
-0000b220: 6120 3d3d 2066 696e 643a 2023 5361 6d65  a == find: #Same
-0000b230: 2044 6174 610a 2020 2020 2020 2020 2020   Data.          
-0000b240: 2020 6966 206c 6f63 6174 696f 6e3a 2072    if location: r
-0000b250: 6574 7572 6e20 5b28 302c 6c65 6e28 6461  eturn [(0,len(da
-0000b260: 7461 2929 5d0a 2020 2020 2020 2020 2020  ta))].          
-0000b270: 2020 7265 7475 726e 2054 7275 6520 0a20    return True . 
-0000b280: 2020 2020 2020 2069 6620 6461 7461 5f74         if data_t
-0000b290: 7970 6520 3d3d 2027 6279 7465 7327 3a0a  ype == 'bytes':.
-0000b2a0: 2020 2020 2020 2020 2020 2020 6669 6e64              find
-0000b2b0: 3d66 696e 642e 7265 706c 6163 6528 6227  =find.replace(b'
-0000b2c0: 2a27 2c62 272e 2b27 292e 7265 706c 6163  *',b'.+').replac
-0000b2d0: 6528 6227 3f27 2c62 272e 2729 2023 2046  e(b'?',b'.') # F
-0000b2e0: 6978 202a 206f 7220 3f20 6361 7365 0a20  ix * or ? case. 
-0000b2f0: 2020 2020 2020 2020 2020 2069 6620 776f             if wo
-0000b300: 7264 2061 6e64 2066 696e 643a 2066 696e  rd and find: fin
-0000b310: 643d 4279 7465 7328 7227 5c62 2827 292b  d=Bytes(r'\b(')+
-0000b320: 6669 6e64 2b42 7974 6573 2827 295c 6227  find+Bytes(')\b'
-0000b330: 290a 2020 2020 2020 2020 656c 6966 2064  ).        elif d
-0000b340: 6174 615f 7479 7065 203d 3d20 2773 7472  ata_type == 'str
-0000b350: 273a 0a20 2020 2020 2020 2020 2020 2066  ':.            f
-0000b360: 696e 643d 6669 6e64 2e72 6570 6c61 6365  ind=find.replace
-0000b370: 2827 2a27 2c27 2e2b 2729 2e72 6570 6c61  ('*','.+').repla
-0000b380: 6365 2827 3f27 2c27 2e27 2920 2320 4669  ce('?','.') # Fi
-0000b390: 7820 2a20 6f72 203f 2063 6173 650a 2020  x * or ? case.  
-0000b3a0: 2020 2020 2020 2020 2020 6966 2077 6f72            if wor
-0000b3b0: 6420 616e 6420 6669 6e64 3a20 6669 6e64  d and find: find
-0000b3c0: 3d72 275c 6228 7b30 7d29 5c62 272e 666f  =r'\b({0})\b'.fo
-0000b3d0: 726d 6174 2866 696e 6429 0a20 2020 2020  rmat(find).     
-0000b3e0: 2020 2069 6620 6e6f 7420 6669 6e64 3a20     if not find: 
-0000b3f0: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-0000b400: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-0000b410: 2020 2020 2020 6966 2073 656e 7365 3a0a        if sense:.
-0000b420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b430: 6d6d 3d72 652e 636f 6d70 696c 6528 6669  mm=re.compile(fi
-0000b440: 6e64 290a 2020 2020 2020 2020 2020 2020  nd).            
-0000b450: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000b460: 2020 2020 2020 6d6d 3d72 652e 636f 6d70        mm=re.comp
-0000b470: 696c 6528 6669 6e64 2c66 6c61 6773 3d72  ile(find,flags=r
-0000b480: 652e 4947 4e4f 5245 4341 5345 290a 2020  e.IGNORECASE).  
-0000b490: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
-0000b4a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000b4b0: 2046 616c 7365 0a20 2020 2020 2020 2023   False.        #
-0000b4c0: 6966 2077 6f72 643a 0a20 2020 2020 2020  if word:.       
-0000b4d0: 2023 2020 2020 6666 3d72 652e 6d61 7463   #    ff=re.matc
-0000b4e0: 6828 6d6d 2c64 6174 6129 2023 2046 696e  h(mm,data) # Fin
-0000b4f0: 6420 4669 7273 7420 4d61 7463 6865 6428  d First Matched(
-0000b500: 776f 7264 2074 7970 6529 206c 6f63 6174  word type) locat
-0000b510: 696f 6e0a 2020 2020 2020 2020 2365 6c73  ion.        #els
-0000b520: 653a 0a20 2020 2020 2020 2023 2020 2020  e:.        #    
-0000b530: 2366 663d 6d6d 2e66 696e 6461 6c6c 2864  #ff=mm.findall(d
-0000b540: 6174 6129 2023 2046 696e 6420 416c 6c20  ata) # Find All 
-0000b550: 4461 7461 0a20 2020 2020 2020 2066 663d  Data.        ff=
-0000b560: 6d6d 2e66 696e 6469 7465 7228 6461 7461  mm.finditer(data
-0000b570: 290a 2020 2020 2020 2020 6966 2062 6f6f  ).        if boo
-0000b580: 6c28 6666 293a 0a20 2020 2020 2020 2020  l(ff):.         
-0000b590: 2020 2072 743d 5b5d 0a20 2020 2020 2020     rt=[].       
-0000b5a0: 2020 2020 2066 6f72 2069 2069 6e20 6c69       for i in li
-0000b5b0: 7374 2866 6629 3a20 2320 7768 656e 2063  st(ff): # when c
-0000b5c0: 6861 6e67 6520 6c69 7374 2866 6629 2074  hange list(ff) t
-0000b5d0: 6865 6e20 6c6f 7374 2064 6174 610a 2020  hen lost data.  
-0000b5e0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-0000b5f0: 2e61 7070 656e 6428 692e 7370 616e 2829  .append(i.span()
-0000b600: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0000b610: 206c 6f63 6174 696f 6e3a 2072 6574 7572   location: retur
-0000b620: 6e20 7274 0a20 2020 2020 2020 2020 2020  n rt.           
-0000b630: 2072 6574 7572 6e20 5472 7565 2069 6620   return True if 
-0000b640: 7274 2065 6c73 6520 4661 6c73 650a 2020  rt else False.  
-0000b650: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-0000b660: 7365 0a0a 2020 2020 6461 7461 3d57 6869  se..    data=Whi
-0000b670: 7465 5374 7269 7028 6461 7461 2c42 6f6f  teStrip(data,Boo
-0000b680: 6c4f 7065 7261 7469 6f6e 2877 6869 7465  lOperation(white
-0000b690: 5f73 7061 6365 2c6d 6f64 653d 276f 7070  _space,mode='opp
-0000b6a0: 6973 6974 2729 290a 2020 2020 7479 7065  isit')).    type
-0000b6b0: 5f64 6174 613d 7479 7065 2864 6174 6129  _data=type(data)
-0000b6c0: 2e5f 5f6e 616d 655f 5f0a 2020 2020 7479  .__name__.    ty
-0000b6d0: 7065 5f66 696e 643d 7479 7065 2866 696e  pe_find=type(fin
-0000b6e0: 6429 2e5f 5f6e 616d 655f 5f0a 2020 2020  d).__name__.    
-0000b6f0: 6966 2070 7974 686f 6e6c 696b 653a 0a20  if pythonlike:. 
-0000b700: 2020 2020 2020 2069 6620 7479 7065 5f64         if type_d
-0000b710: 6174 6120 696e 205b 274e 6f6e 6554 7970  ata in ['NoneTyp
-0000b720: 6527 2c27 626f 6f6c 272c 2773 7472 275d  e','bool','str']
-0000b730: 3a0a 2020 2020 2020 2020 2020 2020 6461  :.            da
-0000b740: 7461 3d27 7b7d 272e 666f 726d 6174 2864  ta='{}'.format(d
-0000b750: 6174 6129 2e63 6170 6974 616c 697a 6528  ata).capitalize(
-0000b760: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0000b770: 2064 6174 6120 3d3d 2027 4e75 6c6c 273a   data == 'Null':
-0000b780: 2064 6174 613d 274e 6f6e 6527 0a20 2020   data='None'.   
-0000b790: 2020 2020 2020 2020 2074 7970 655f 6461           type_da
-0000b7a0: 7461 3d27 7374 7227 0a20 2020 2020 2020  ta='str'.       
-0000b7b0: 2069 6620 7479 7065 5f66 696e 6420 696e   if type_find in
-0000b7c0: 205b 274e 6f6e 6554 7970 6527 2c27 626f   ['NoneType','bo
-0000b7d0: 6f6c 272c 2773 7472 275d 3a0a 2020 2020  ol','str']:.    
-0000b7e0: 2020 2020 2020 2020 6669 6e64 3d27 7b7d          find='{}
-0000b7f0: 272e 666f 726d 6174 2866 696e 6429 2e63  '.format(find).c
-0000b800: 6170 6974 616c 697a 6528 290a 2020 2020  apitalize().    
-0000b810: 2020 2020 2020 2020 6966 2066 696e 6420          if find 
-0000b820: 3d3d 2027 4e75 6c6c 273a 2066 696e 643d  == 'Null': find=
-0000b830: 274e 6f6e 6527 0a20 2020 2020 2020 2020  'None'.         
-0000b840: 2020 2074 7970 655f 6669 6e64 3d27 7374     type_find='st
-0000b850: 7227 0a20 2020 2069 6620 6469 6769 7473  r'.    if digits
-0000b860: 7472 696e 673a 0a20 2020 2020 2020 2069  tring:.        i
-0000b870: 6620 7479 7065 5f64 6174 6120 696e 205b  f type_data in [
-0000b880: 2769 6e74 272c 2766 6c6f 6174 275d 3a0a  'int','float']:.
-0000b890: 2020 2020 2020 2020 2020 2020 6461 7461              data
-0000b8a0: 3d27 7b7d 272e 666f 726d 6174 2864 6174  ='{}'.format(dat
-0000b8b0: 6129 0a20 2020 2020 2020 2020 2020 2074  a).            t
-0000b8c0: 7970 655f 6461 7461 3d27 7374 7227 0a20  ype_data='str'. 
-0000b8d0: 2020 2020 2020 2069 6620 7479 7065 5f66         if type_f
-0000b8e0: 696e 6420 696e 205b 2769 6e74 272c 2766  ind in ['int','f
-0000b8f0: 6c6f 6174 275d 3a0a 2020 2020 2020 2020  loat']:.        
-0000b900: 2020 2020 6669 6e64 3d27 7b7d 272e 666f      find='{}'.fo
-0000b910: 726d 6174 2866 696e 6429 0a20 2020 2020  rmat(find).     
-0000b920: 2020 2020 2020 2074 7970 655f 6669 6e64         type_find
-0000b930: 3d27 7374 7227 0a20 2020 2069 6620 7479  ='str'.    if ty
-0000b940: 7065 5f64 6174 6120 696e 205b 2773 7472  pe_data in ['str
-0000b950: 272c 2762 7974 6573 275d 2061 6e64 2074  ','bytes'] and t
-0000b960: 7970 655f 6669 6e64 2069 6e20 5b27 7374  ype_find in ['st
-0000b970: 7227 2c27 6279 7465 7327 5d3a 0a20 2020  r','bytes']:.   
-0000b980: 2020 2020 2072 6574 7572 6e20 5f46 6f75       return _Fou
-0000b990: 6e64 5f28 6461 7461 2c66 696e 642c 776f  nd_(data,find,wo
-0000b9a0: 7264 2c73 656e 7365 2c6c 6f63 6174 696f  rd,sense,locatio
-0000b9b0: 6e29 0a20 2020 2072 6574 7572 6e20 6461  n).    return da
-0000b9c0: 7461 203d 3d20 6669 6e64 0a0a 6465 6620  ta == find..def 
-0000b9d0: 4973 5361 6d65 2873 7263 2c64 6573 742c  IsSame(src,dest,
-0000b9e0: 7365 6e73 653d 4661 6c73 652c 6f72 6465  sense=False,orde
-0000b9f0: 723d 4661 6c73 652c 5f74 7970 655f 3d46  r=False,_type_=F
-0000ba00: 616c 7365 2c64 6967 6974 7374 7269 6e67  alse,digitstring
-0000ba10: 3d54 7275 652c 7768 6974 655f 7370 6163  =True,white_spac
-0000ba20: 653d 4661 6c73 652c 7079 7468 6f6e 6c69  e=False,pythonli
-0000ba30: 6b65 3d46 616c 7365 2c69 676e 6f72 655f  ke=False,ignore_
-0000ba40: 6b65 7973 3d5b 5d29 3a0a 2020 2020 2727  keys=[]):.    ''
-0000ba50: 270a 2020 2020 7265 7475 726e 2054 7275  '.    return Tru
-0000ba60: 652f 4661 6c73 650a 2020 2020 4368 6563  e/False.    Chec
-0000ba70: 6b20 7361 6d65 2064 6174 6120 6f72 206e  k same data or n
-0000ba80: 6f74 2062 6574 7765 656e 2073 7263 2061  ot between src a
-0000ba90: 6e64 2064 6573 7420 6461 7461 730a 2020  nd dest datas.  
-0000baa0: 2020 3c64 6573 743e 2072 756c 653a 0a20    <dest> rule:. 
-0000bab0: 2020 2020 2020 7265 2e63 6f6d 7069 6c65        re.compile
-0000bac0: 2066 6f72 6d61 740a 2020 2020 2020 2061   format.       a
-0000bad0: 6e79 206b 6565 7020 6368 6172 6163 7465  ny keep characte
-0000bae0: 7273 2020 3a20 2a0a 2020 2020 2020 2061  rs  : *.       a
-0000baf0: 6e79 2073 696e 676c 6520 6368 6172 6163  ny single charac
-0000bb00: 7465 7220 3a20 3f0a 2020 2020 2020 205e  ter : ?.       ^
-0000bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb20: 2020 2020 3a20 7374 6172 740a 2020 2020      : start.    
-0000bb30: 2020 2024 2020 2020 2020 2020 2020 2020     $            
-0000bb40: 2020 2020 2020 2020 3a20 656e 640a 2020          : end.  
-0000bb50: 2020 3c6f 7074 696f 6e3e 0a20 2020 2020    <option>.     
-0000bb60: 2020 6f72 6465 7220 2020 2020 2020 2020    order         
-0000bb70: 2020 2020 2020 203a 2054 7275 653a 2069         : True: i
-0000bb80: 6620 6c69 7374 2c74 7570 6c65 2074 6865  f list,tuple the
-0000bb90: 6e20 6368 6563 6b20 6f72 6465 7269 6e67  n check ordering
-0000bba0: 2074 6f6f 2c20 4661 6c73 653a 2864 6566   too, False:(def
-0000bbb0: 6175 6c74 2920 6a75 7374 2063 6865 636b  ault) just check
-0000bbc0: 2064 6174 6120 6973 2073 616d 6520 6f72   data is same or
-0000bbd0: 206e 6f74 0a20 2020 2020 2020 5479 7065   not.       Type
-0000bbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bbf0: 203a 2054 7275 653a 2063 6865 636b 2054   : True: check T
-0000bc00: 7970 6520 6f6e 6c79 2c20 4661 6c73 653a  ype only, False:
-0000bc10: 2864 6566 6175 6c74 2920 6368 6563 6b20  (default) check 
-0000bc20: 6461 7461 0a20 2020 2020 2020 7365 6e73  data.       sens
-0000bc30: 6520 2020 2020 2020 2020 2020 2020 2020  e               
-0000bc40: 203a 2054 7275 653a 2073 656e 7365 7469   : True: senseti
-0000bc50: 7665 2c20 4661 6c73 653a 2864 6566 6175  ve, False:(defau
-0000bc60: 6c74 2920 6c6f 7765 7220 616e 6420 7570  lt) lower and up
-0000bc70: 7065 7220 6973 2073 616d 650a 2020 2020  per is same.    
-0000bc80: 2020 2077 6869 7465 5f73 7061 6365 2020     white_space  
-0000bc90: 2020 2020 2020 2020 3a20 5472 7565 3a20          : True: 
-0000bca0: 6b65 6570 2077 6869 7465 2073 7061 6365  keep white space
-0000bcb0: 2c20 4661 6c73 653a 2864 6566 6175 6c74  , False:(default
-0000bcc0: 2920 6967 6e6f 7265 2077 6869 7465 5f73  ) ignore white_s
-0000bcd0: 7061 6365 0a20 2020 2020 2020 6469 6769  pace.       digi
-0000bce0: 7473 7472 696e 6720 2020 2020 2020 2020  tstring         
-0000bcf0: 203a 2054 7275 653a 2864 6566 6175 6c74   : True:(default
-0000bd00: 2920 7374 7269 6e67 2061 6e64 2069 6e74  ) string and int
-0000bd10: 6967 6572 2069 7320 7361 6d65 2c20 4661  iger is same, Fa
-0000bd20: 6c73 653a 2064 6966 6665 7265 6e74 0a20  lse: different. 
-0000bd30: 2020 2027 2727 0a20 2020 2069 6620 5f74     '''.    if _t
-0000bd40: 7970 655f 2069 7320 5472 7565 3a20 2320  ype_ is True: # 
-0000bd50: 4966 2063 6865 636b 2074 7970 6520 6f6e  If check type on
-0000bd60: 6c79 0a20 2020 2020 2020 2072 6574 7572  ly.        retur
-0000bd70: 6e20 5479 7065 2873 7263 2c64 6573 7429  n Type(src,dest)
-0000bd80: 0a20 2020 2069 6620 5479 7065 2873 7263  .    if Type(src
-0000bd90: 2c28 2773 7472 272c 2762 7974 6573 2729  ,('str','bytes')
-0000bda0: 2920 616e 6420 5479 7065 2864 6573 742c  ) and Type(dest,
-0000bdb0: 2827 7374 7227 2c27 6279 7465 7327 2929  ('str','bytes'))
-0000bdc0: 3a23 2061 6e64 2064 6573 743a 0a20 2020  :# and dest:.   
-0000bdd0: 2020 2020 2069 6620 5479 7065 2864 6573       if Type(des
-0000bde0: 742c 2762 7974 6573 2729 206f 7220 5479  t,'bytes') or Ty
-0000bdf0: 7065 2873 7263 2c27 6279 7465 7327 293a  pe(src,'bytes'):
-0000be00: 0a20 2020 2020 2020 2020 2020 2073 7263  .            src
-0000be10: 3d42 7974 6573 2873 7263 290a 2020 2020  =Bytes(src).    
-0000be20: 2020 2020 2020 2020 6465 7374 3d42 7974          dest=Byt
-0000be30: 6573 2864 6573 7429 0a20 2020 2020 2020  es(dest).       
-0000be40: 2020 2020 2069 6620 7372 6320 3d3d 2064       if src == d
-0000be50: 6573 743a 2072 6574 7572 6e20 5472 7565  est: return True
-0000be60: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000be70: 6465 7374 3a0a 2020 2020 2020 2020 2020  dest:.          
-0000be80: 2020 2020 2020 6966 2064 6573 745b 305d        if dest[0]
-0000be90: 2021 3d20 6227 5e27 3a20 6465 7374 3d62   != b'^': dest=b
-0000bea0: 275e 272b 6465 7374 0a20 2020 2020 2020  '^'+dest.       
-0000beb0: 2020 2020 2020 2020 2069 6620 6465 7374           if dest
-0000bec0: 5b2d 315d 2021 3d20 6227 2427 3a20 6465  [-1] != b'$': de
-0000bed0: 7374 3d64 6573 742b 6227 2427 0a20 2020  st=dest+b'$'.   
-0000bee0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0000bef0: 2020 2020 2020 2073 7263 3d53 7472 2873         src=Str(s
-0000bf00: 7263 290a 2020 2020 2020 2020 2020 2020  rc).            
-0000bf10: 6465 7374 3d53 7472 2864 6573 7429 0a20  dest=Str(dest). 
-0000bf20: 2020 2020 2020 2020 2020 2069 6620 7372             if sr
-0000bf30: 6320 3d3d 2064 6573 743a 2072 6574 7572  c == dest: retur
-0000bf40: 6e20 5472 7565 0a20 2020 2020 2020 2020  n True.         
-0000bf50: 2020 2069 6620 6465 7374 3a0a 2020 2020     if dest:.    
-0000bf60: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-0000bf70: 6573 745b 305d 2021 3d20 275e 273a 2064  est[0] != '^': d
-0000bf80: 6573 743d 275e 272b 6465 7374 0a20 2020  est='^'+dest.   
-0000bf90: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000bfa0: 6465 7374 5b2d 315d 2021 3d20 2724 273a  dest[-1] != '$':
-0000bfb0: 2064 6573 743d 6465 7374 2b27 2427 0a20   dest=dest+'$'. 
-0000bfc0: 2020 2069 6620 7079 7468 6f6e 6c69 6b65     if pythonlike
-0000bfd0: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
-0000bfe0: 6e73 7461 6e63 6528 7372 632c 7374 7229  nstance(src,str)
-0000bff0: 3a0a 2020 2020 2020 2020 2020 2020 7372  :.            sr
-0000c000: 633d 466f 726d 4461 7461 2873 7263 290a  c=FormData(src).
-0000c010: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0000c020: 7461 6e63 6528 6465 7374 2c73 7472 293a  tance(dest,str):
-0000c030: 0a20 2020 2020 2020 2020 2020 2064 6573  .            des
-0000c040: 743d 466f 726d 4461 7461 2864 6573 7429  t=FormData(dest)
-0000c050: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
-0000c060: 6365 2873 7263 2c28 6c69 7374 2c74 7570  ce(src,(list,tup
-0000c070: 6c65 2929 2061 6e64 2069 7369 6e73 7461  le)) and isinsta
-0000c080: 6e63 6528 6465 7374 2c28 6c69 7374 2c74  nce(dest,(list,t
-0000c090: 7570 6c65 2929 3a0a 2020 2020 2020 2020  uple)):.        
-0000c0a0: 6966 2073 656e 7365 2061 6e64 206f 7264  if sense and ord
-0000c0b0: 6572 3a20 7265 7475 726e 2073 7263 203d  er: return src =
-0000c0c0: 3d20 6465 7374 0a20 2020 2020 2020 2069  = dest.        i
-0000c0d0: 6620 6c65 6e28 7372 6329 2021 3d20 6c65  f len(src) != le
-0000c0e0: 6e28 6465 7374 293a 2072 6574 7572 6e20  n(dest): return 
-0000c0f0: 4661 6c73 650a 2020 2020 2020 2020 6966  False.        if
-0000c100: 206f 7264 6572 3a0a 2020 2020 2020 2020   order:.        
-0000c110: 2020 2020 666f 7220 6a20 696e 2072 616e      for j in ran
-0000c120: 6765 2830 2c6c 656e 2873 7263 2929 3a0a  ge(0,len(src)):.
-0000c130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c140: 6966 206e 6f74 2046 6f75 6e64 2873 7263  if not Found(src
-0000c150: 5b6a 5d2c 6465 7374 5b6a 5d2c 6469 6769  [j],dest[j],digi
-0000c160: 7473 7472 696e 673d 6469 6769 7473 7472  tstring=digitstr
-0000c170: 696e 672c 7768 6974 655f 7370 6163 653d  ing,white_space=
-0000c180: 7768 6974 655f 7370 6163 652c 7365 6e73  white_space,sens
-0000c190: 653d 7365 6e73 652c 7079 7468 6f6e 6c69  e=sense,pythonli
-0000c1a0: 6b65 3d70 7974 686f 6e6c 696b 6529 3a20  ke=pythonlike): 
-0000c1b0: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-0000c1c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000c1d0: 5472 7565 0a20 2020 2020 2020 2065 6c73  True.        els
-0000c1e0: 653a 0a20 2020 2020 2020 2020 2020 2061  e:.            a
-0000c1f0: 3d6c 6973 7428 7372 635b 3a5d 290a 2020  =list(src[:]).  
-0000c200: 2020 2020 2020 2020 2020 623d 6c69 7374            b=list
-0000c210: 2864 6573 745b 3a5d 290a 2020 2020 2020  (dest[:]).      
-0000c220: 2020 2020 2020 666f 7220 6a20 696e 2072        for j in r
-0000c230: 616e 6765 2830 2c6c 656e 2873 7263 2929  ange(0,len(src))
-0000c240: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000c250: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-0000c260: 2830 2c6c 656e 2864 6573 7429 293a 0a20  (0,len(dest)):. 
-0000c270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c280: 2020 2069 6620 2869 7369 6e73 7461 6e63     if (isinstanc
-0000c290: 6528 7372 635b 6a5d 2c64 6963 7429 2061  e(src[j],dict) a
-0000c2a0: 6e64 2069 7369 6e73 7461 6e63 6528 6465  nd isinstance(de
-0000c2b0: 7374 5b6a 5d2c 6469 6374 2929 206f 7220  st[j],dict)) or 
-0000c2c0: 2869 7369 6e73 7461 6e63 6528 7372 635b  (isinstance(src[
-0000c2d0: 6a5d 2c28 6c69 7374 2c74 7570 6c65 2929  j],(list,tuple))
-0000c2e0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-0000c2f0: 6465 7374 5b6a 5d2c 286c 6973 742c 7475  dest[j],(list,tu
-0000c300: 706c 6529 2929 3a0a 2020 2020 2020 2020  ple))):.        
-0000c310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c320: 6966 2049 7353 616d 6528 7372 635b 6a5d  if IsSame(src[j]
-0000c330: 2c64 6573 745b 695d 2c73 656e 7365 2c6f  ,dest[i],sense,o
-0000c340: 7264 6572 2c5f 7479 7065 5f2c 6469 6769  rder,_type_,digi
-0000c350: 7473 7472 696e 672c 7768 6974 655f 7370  tstring,white_sp
-0000c360: 6163 652c 7079 7468 6f6e 6c69 6b65 2c69  ace,pythonlike,i
-0000c370: 676e 6f72 655f 6b65 7973 293a 0a20 2020  gnore_keys):.   
-0000c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c390: 2020 2020 2020 2020 2061 5b6a 5d3d 4e6f           a[j]=No
-0000c3a0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-0000c3b0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0000c3c0: 5b69 5d3d 4e6f 6e65 0a20 2020 2020 2020  [i]=None.       
-0000c3d0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-0000c3e0: 6620 466f 756e 6428 7372 635b 6a5d 2c64  f Found(src[j],d
-0000c3f0: 6573 745b 695d 2c64 6967 6974 7374 7269  est[i],digitstri
-0000c400: 6e67 3d64 6967 6974 7374 7269 6e67 2c77  ng=digitstring,w
-0000c410: 6869 7465 5f73 7061 6365 3d77 6869 7465  hite_space=white
-0000c420: 5f73 7061 6365 2c73 656e 7365 3d73 656e  _space,sense=sen
-0000c430: 7365 2c70 7974 686f 6e6c 696b 653d 7079  se,pythonlike=py
-0000c440: 7468 6f6e 6c69 6b65 293a 0a20 2020 2020  thonlike):.     
-0000c450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c460: 2020 2061 5b6a 5d3d 4e6f 6e65 0a20 2020     a[j]=None.   
-0000c470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c480: 2020 2020 2062 5b69 5d3d 4e6f 6e65 0a20       b[i]=None. 
-0000c490: 2020 2020 2020 2020 2020 2069 6620 612e             if a.
-0000c4a0: 636f 756e 7428 4e6f 6e65 2920 3d3d 206c  count(None) == l
-0000c4b0: 656e 2861 2920 616e 6420 622e 636f 756e  en(a) and b.coun
-0000c4c0: 7428 4e6f 6e65 2920 3d3d 206c 656e 2862  t(None) == len(b
-0000c4d0: 293a 2072 6574 7572 6e20 5472 7565 0a20  ): return True. 
-0000c4e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000c4f0: 6e20 4661 6c73 650a 2020 2020 656c 6966  n False.    elif
-0000c500: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
-0000c510: 6469 6374 2920 616e 6420 6973 696e 7374  dict) and isinst
-0000c520: 616e 6365 2864 6573 742c 6469 6374 293a  ance(dest,dict):
-0000c530: 0a20 2020 2020 2020 2069 6620 7365 6e73  .        if sens
-0000c540: 653a 2072 6574 7572 6e20 7372 6320 3d3d  e: return src ==
-0000c550: 2064 6573 740a 2020 2020 2020 2020 6966   dest.        if
-0000c560: 206c 656e 2873 7263 2920 213d 206c 656e   len(src) != len
-0000c570: 2864 6573 7429 3a20 7265 7475 726e 2046  (dest): return F
-0000c580: 616c 7365 0a20 2020 2020 2020 2066 6f72  alse.        for
-0000c590: 2073 2069 6e20 7372 633a 0a20 2020 2020   s in src:.     
-0000c5a0: 2020 2020 2020 2069 6620 7320 696e 2069         if s in i
-0000c5b0: 676e 6f72 655f 6b65 7973 3a20 636f 6e74  gnore_keys: cont
-0000c5c0: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
-0000c5d0: 2069 6620 7320 696e 2064 6573 743a 0a20   if s in dest:. 
-0000c5e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000c5f0: 6620 2869 7369 6e73 7461 6e63 6528 7372  f (isinstance(sr
-0000c600: 635b 735d 2c64 6963 7429 2061 6e64 2069  c[s],dict) and i
-0000c610: 7369 6e73 7461 6e63 6528 6465 7374 5b73  sinstance(dest[s
-0000c620: 5d2c 6469 6374 2929 206f 7220 2869 7369  ],dict)) or (isi
-0000c630: 6e73 7461 6e63 6528 7372 635b 735d 2c28  nstance(src[s],(
-0000c640: 6c69 7374 2c74 7570 6c65 2929 2061 6e64  list,tuple)) and
-0000c650: 2069 7369 6e73 7461 6e63 6528 6465 7374   isinstance(dest
-0000c660: 5b73 5d2c 286c 6973 742c 7475 706c 6529  [s],(list,tuple)
-0000c670: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-0000c680: 2020 2020 2020 2020 6966 206e 6f74 2049          if not I
-0000c690: 7353 616d 6528 7372 635b 735d 2c64 6573  sSame(src[s],des
-0000c6a0: 745b 735d 2c73 656e 7365 2c6f 7264 6572  t[s],sense,order
-0000c6b0: 2c5f 7479 7065 5f2c 6469 6769 7473 7472  ,_type_,digitstr
-0000c6c0: 696e 672c 7768 6974 655f 7370 6163 652c  ing,white_space,
-0000c6d0: 7079 7468 6f6e 6c69 6b65 2c69 676e 6f72  pythonlike,ignor
-0000c6e0: 655f 6b65 7973 293a 2072 6574 7572 6e20  e_keys): return 
-0000c6f0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
-0000c700: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000c710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c720: 6966 206e 6f74 2046 6f75 6e64 2873 7263  if not Found(src
-0000c730: 5b73 5d2c 6465 7374 5b73 5d2c 6469 6769  [s],dest[s],digi
-0000c740: 7473 7472 696e 673d 6469 6769 7473 7472  tstring=digitstr
-0000c750: 696e 672c 7768 6974 655f 7370 6163 653d  ing,white_space=
-0000c760: 7768 6974 655f 7370 6163 652c 7365 6e73  white_space,sens
-0000c770: 653d 7365 6e73 652c 7079 7468 6f6e 6c69  e=sense,pythonli
-0000c780: 6b65 3d70 7974 686f 6e6c 696b 6529 3a20  ke=pythonlike): 
-0000c790: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-0000c7a0: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
-0000c7b0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-0000c7c0: 2020 2072 6574 7572 6e20 466f 756e 6428     return Found(
-0000c7d0: 7372 632c 6465 7374 2c64 6967 6974 7374  src,dest,digitst
-0000c7e0: 7269 6e67 3d64 6967 6974 7374 7269 6e67  ring=digitstring
-0000c7f0: 2c77 6869 7465 5f73 7061 6365 3d77 6869  ,white_space=whi
-0000c800: 7465 5f73 7061 6365 2c73 656e 7365 3d73  te_space,sense=s
-0000c810: 656e 7365 2c70 7974 686f 6e6c 696b 653d  ense,pythonlike=
-0000c820: 7079 7468 6f6e 6c69 6b65 290a 0a64 6566  pythonlike)..def
-0000c830: 2049 7349 6e28 6669 6e64 2c64 6573 742c   IsIn(find,dest,
-0000c840: 6964 783d 4661 6c73 652c 6465 6661 756c  idx=False,defaul
-0000c850: 743d 4661 6c73 652c 7365 6e73 653d 4661  t=False,sense=Fa
-0000c860: 6c73 652c 7374 6172 7473 7769 7468 3d54  lse,startswith=T
-0000c870: 7275 652c 656e 6473 7769 7468 3d54 7275  rue,endswith=Tru
-0000c880: 652c 6469 6769 7473 7472 696e 673d 5472  e,digitstring=Tr
-0000c890: 7565 2c77 6f72 643d 5472 7565 2c77 6869  ue,word=True,whi
-0000c8a0: 7465 5f73 7061 6365 3d46 616c 7365 2c6f  te_space=False,o
-0000c8b0: 7264 6572 3d46 616c 7365 2c2a 2a6f 7074  rder=False,**opt
-0000c8c0: 7329 3a0a 2020 2020 2727 270a 2020 2020  s):.    '''.    
-0000c8d0: 4368 6563 6b20 6b65 7920 6f72 2076 616c  Check key or val
-0000c8e0: 7565 2069 6e20 7468 6520 6469 6374 2c20  ue in the dict, 
-0000c8f0: 6c69 7374 206f 7220 7475 706c 6520 7468  list or tuple th
-0000c900: 656e 2054 7275 652c 206e 6f74 2074 6865  en True, not the
-0000c910: 6e20 4661 6c73 650a 2020 2020 7265 7475  n False.    retu
-0000c920: 726e 2054 7275 652f 4661 6c73 650a 2020  rn True/False.  
-0000c930: 2020 4368 6563 6b20 7361 6d65 2064 6174    Check same dat
-0000c940: 6120 6f72 206e 6f74 2062 6574 7765 656e  a or not between
-0000c950: 2073 7263 2061 6e64 2064 6573 7420 6461   src and dest da
-0000c960: 7461 730a 2020 2020 3c64 6573 743e 2072  tas.    <dest> r
-0000c970: 756c 653a 0a20 2020 2020 2020 7265 2e63  ule:.       re.c
-0000c980: 6f6d 7069 6c65 2066 6f72 6d61 740a 2020  ompile format.  
-0000c990: 2020 2020 2061 6e79 206b 6565 7020 6368       any keep ch
-0000c9a0: 6172 6163 7465 7273 2020 3a20 2a0a 2020  aracters  : *.  
-0000c9b0: 2020 2020 2061 6e79 2073 696e 676c 6520       any single 
-0000c9c0: 6368 6172 6163 7465 7220 3a20 3f0a 2020  character : ?.  
-0000c9d0: 2020 2020 205e 2020 2020 2020 2020 2020       ^          
-0000c9e0: 2020 2020 2020 2020 2020 3a20 7374 6172            : star
-0000c9f0: 740a 2020 2020 2020 2024 2020 2020 2020  t.       $      
-0000ca00: 2020 2020 2020 2020 2020 2020 2020 3a20                : 
-0000ca10: 656e 640a 2020 2020 3c6f 7074 696f 6e3e  end.    <option>
-0000ca20: 0a20 2020 2020 2020 6f72 6465 7220 2020  .       order   
-0000ca30: 2020 2020 2020 2020 2020 2020 203a 2054               : T
-0000ca40: 7275 653a 2069 6620 6c69 7374 2c74 7570  rue: if list,tup
-0000ca50: 6c65 2074 6865 6e20 6368 6563 6b20 6f72  le then check or
-0000ca60: 6465 7269 6e67 2074 6f6f 2c20 4661 6c73  dering too, Fals
-0000ca70: 653a 2864 6566 6175 6c74 2920 6a75 7374  e:(default) just
-0000ca80: 2063 6865 636b 2064 6174 6120 6973 2073   check data is s
-0000ca90: 616d 6520 6f72 206e 6f74 0a20 2020 2020  ame or not.     
-0000caa0: 2020 7374 6172 7473 7769 7468 2020 2020    startswith    
-0000cab0: 2020 2020 2020 203a 2054 7275 653a 2864         : True:(d
-0000cac0: 6566 6175 6c74 2920 4669 6e64 2022 5e41  efault) Find "^A
-0000cad0: 4243 2220 7479 7065 2c20 4661 6c73 653a  BC" type, False:
-0000cae0: 2061 6363 6f72 6469 6e67 2074 6f20 3c64   according to <d
-0000caf0: 6573 743e 0a20 2020 2020 2020 656e 6473  est>.       ends
-0000cb00: 7769 7468 2020 2020 2020 2020 2020 2020  with            
-0000cb10: 203a 2054 7275 653a 2864 6566 6175 6c74   : True:(default
-0000cb20: 2920 4669 6e64 2022 4142 4324 2220 7479  ) Find "ABC$" ty
-0000cb30: 7065 2c20 4661 6c73 653a 2061 6363 6f72  pe, False: accor
-0000cb40: 6469 6e67 2074 6f20 3c64 6573 743e 0a20  ding to <dest>. 
-0000cb50: 2020 2020 2020 5479 7065 2020 2020 2020        Type      
-0000cb60: 2020 2020 2020 2020 2020 203a 2054 7275             : Tru
-0000cb70: 653a 2063 6865 636b 2054 7970 6520 6f6e  e: check Type on
-0000cb80: 6c79 2c20 4661 6c73 653a 2864 6566 6175  ly, False:(defau
-0000cb90: 6c74 2920 6368 6563 6b20 6461 7461 0a20  lt) check data. 
-0000cba0: 2020 2020 2020 7365 6e73 6520 2020 2020        sense     
-0000cbb0: 2020 2020 2020 2020 2020 203a 2054 7275             : Tru
-0000cbc0: 653a 2073 656e 7365 7469 7665 2c20 4661  e: sensetive, Fa
-0000cbd0: 6c73 653a 2864 6566 6175 6c74 2920 6c6f  lse:(default) lo
-0000cbe0: 7765 7220 616e 6420 7570 7065 7220 6973  wer and upper is
-0000cbf0: 2073 616d 650a 2020 2020 2020 2077 6869   same.       whi
-0000cc00: 7465 5f73 7061 6365 2020 2020 2020 2020  te_space        
-0000cc10: 2020 3a20 5472 7565 3a20 6b65 6570 2077    : True: keep w
-0000cc20: 6869 7465 2073 7061 6365 2c20 4661 6c73  hite space, Fals
-0000cc30: 653a 2864 6566 6175 6c74 2920 6967 6e6f  e:(default) igno
-0000cc40: 7265 2077 6869 7465 5f73 7061 6365 0a20  re white_space. 
-0000cc50: 2020 2020 2020 776f 7264 2020 2020 2020        word      
-0000cc60: 2020 2020 2020 2020 2020 203a 2054 7275             : Tru
-0000cc70: 653a 2864 6566 6175 6c74 2920 3c66 696e  e:(default) <fin
-0000cc80: 643e 2069 7320 636f 7272 6563 7420 776f  d> is correct wo
-0000cc90: 7264 2c20 4661 6c73 653a 203c 6669 6e64  rd, False: <find
-0000cca0: 3e20 696e 2069 6e73 6465 2073 7472 696e  > in insde strin
-0000ccb0: 670a 2020 2020 2020 2064 6967 6974 7374  g.       digitst
-0000ccc0: 7269 6e67 2020 2020 2020 2020 2020 3a20  ring          : 
-0000ccd0: 5472 7565 3a28 6465 6661 756c 7429 2073  True:(default) s
-0000cce0: 7472 696e 6720 616e 6420 696e 7469 6765  tring and intige
-0000ccf0: 7220 6973 2073 616d 652c 2046 616c 7365  r is same, False
-0000cd00: 3a20 6469 6666 6572 656e 740a 2020 2020  : different.    
-0000cd10: 2727 270a 2020 2020 5f74 7970 655f 3d6f  '''.    _type_=o
-0000cd20: 7074 732e 6765 7428 2754 7970 6527 2c6f  pts.get('Type',o
-0000cd30: 7074 732e 6765 7428 275f 7479 7065 5f27  pts.get('_type_'
-0000cd40: 2c46 616c 7365 2929 0a20 2020 2023 6465  ,False)).    #de
-0000cd50: 7374 5f74 7970 653d 5479 7065 4e61 6d65  st_type=TypeName
-0000cd60: 2864 6573 7429 0a20 2020 2023 6966 2064  (dest).    #if d
-0000cd70: 6573 745f 7479 7065 2069 6e20 5b27 6c69  est_type in ['li
-0000cd80: 7374 272c 2774 7570 6c65 272c 2773 7472  st','tuple','str
-0000cd90: 272c 2762 7974 6573 275d 3a0a 2020 2020  ','bytes']:.    
-0000cda0: 6966 2054 7970 6528 6465 7374 2c28 276c  if Type(dest,('l
-0000cdb0: 6973 7427 2c27 7475 706c 6527 2c27 7374  ist','tuple','st
-0000cdc0: 7227 2c27 6279 7465 7327 2929 3a0a 2020  r','bytes')):.  
-0000cdd0: 2020 2020 2020 2369 6620 5479 7065 4e61        #if TypeNa
-0000cde0: 6d65 2869 6478 2920 3d3d 2027 696e 7427  me(idx) == 'int'
-0000cdf0: 3a0a 2020 2020 2020 2020 6966 2054 7970  :.        if Typ
-0000ce00: 6528 6964 782c 2769 6e74 2729 3a0a 2020  e(idx,'int'):.  
-0000ce10: 2020 2020 2020 2020 2020 6964 783d 4669            idx=Fi
-0000ce20: 7849 6e64 6578 2864 6573 742c 6964 782c  xIndex(dest,idx,
-0000ce30: 6465 6661 756c 743d 4661 6c73 652c 6572  default=False,er
-0000ce40: 723d 5472 7565 290a 2020 2020 2020 2020  r=True).        
-0000ce50: 2020 2020 6966 2069 6478 2069 7320 4661      if idx is Fa
-0000ce60: 6c73 653a 2072 6574 7572 6e20 6465 6661  lse: return defa
-0000ce70: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
-0000ce80: 2369 6620 6465 7374 5f74 7970 6520 696e  #if dest_type in
-0000ce90: 205b 2773 7472 272c 2762 7974 6573 275d   ['str','bytes']
-0000cea0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0000ceb0: 2054 7970 6528 6465 7374 2c28 2773 7472   Type(dest,('str
-0000cec0: 272c 2762 7974 6573 2729 293a 0a20 2020  ','bytes')):.   
-0000ced0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000cee0: 466f 756e 6428 6465 7374 5b69 6478 3a5d  Found(dest[idx:]
-0000cef0: 2c66 696e 642c 6469 6769 7473 7472 696e  ,find,digitstrin
-0000cf00: 672c 776f 7264 2c77 6869 7465 5f73 7061  g,word,white_spa
-0000cf10: 6365 2c73 656e 7365 293a 2072 6574 7572  ce,sense): retur
-0000cf20: 6e20 5472 7565 0a20 2020 2020 2020 2020  n True.         
-0000cf30: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0000cf40: 2020 2020 2020 2020 2069 6620 466f 756e           if Foun
-0000cf50: 6428 6465 7374 5b69 6478 5d2c 6669 6e64  d(dest[idx],find
-0000cf60: 2c64 6967 6974 7374 7269 6e67 2c77 6f72  ,digitstring,wor
-0000cf70: 642c 7768 6974 655f 7370 6163 652c 7365  d,white_space,se
-0000cf80: 6e73 6529 3a20 7265 7475 726e 2054 7275  nse): return Tru
-0000cf90: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
-0000cfa0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0000cfb0: 6920 696e 2064 6573 743a 0a20 2020 2020  i in dest:.     
-0000cfc0: 2020 2020 2020 2020 2020 2069 6620 4973             if Is
-0000cfd0: 5361 6d65 2869 2c66 696e 642c 7365 6e73  Same(i,find,sens
-0000cfe0: 652c 6f72 6465 722c 5f74 7970 655f 2c64  e,order,_type_,d
-0000cff0: 6967 6974 7374 7269 6e67 2c77 6869 7465  igitstring,white
-0000d000: 5f73 7061 6365 293a 2072 6574 7572 6e20  _space): return 
-0000d010: 5472 7565 0a20 2020 2065 6c69 6620 6973  True.    elif is
-0000d020: 696e 7374 616e 6365 2864 6573 742c 2064  instance(dest, d
-0000d030: 6963 7429 3a0a 2020 2020 2020 2020 6966  ict):.        if
-0000d040: 2069 6478 2069 6e20 5b4e 6f6e 652c 2727   idx in [None,''
-0000d050: 2c46 616c 7365 5d3a 0a20 2020 2020 2020  ,False]:.       
-0000d060: 2020 2020 2066 6f72 2069 2069 6e20 6465       for i in de
-0000d070: 7374 3a0a 2020 2020 2020 2020 2020 2020  st:.            
-0000d080: 2020 2020 6966 2049 7353 616d 6528 692c      if IsSame(i,
-0000d090: 6669 6e64 2c73 656e 7365 2c6f 7264 6572  find,sense,order
-0000d0a0: 2c5f 7479 7065 5f2c 6469 6769 7473 7472  ,_type_,digitstr
-0000d0b0: 696e 672c 7768 6974 655f 7370 6163 6529  ing,white_space)
-0000d0c0: 3a20 7265 7475 726e 2054 7275 650a 2020  : return True.  
-0000d0d0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000d0e0: 2020 2020 2020 2020 6966 2046 6f75 6e64          if Found
-0000d0f0: 2864 6573 742e 6765 7428 6964 7829 2c66  (dest.get(idx),f
-0000d100: 696e 642c 6469 6769 7473 7472 696e 672c  ind,digitstring,
-0000d110: 776f 7264 2c77 6869 7465 5f73 7061 6365  word,white_space
-0000d120: 2c73 656e 7365 293a 2072 6574 7572 6e20  ,sense): return 
-0000d130: 5472 7565 0a20 2020 2072 6574 7572 6e20  True.    return 
-0000d140: 6465 6661 756c 740a 0a64 6566 2042 6f6f  default..def Boo
-0000d150: 6c4f 7065 7261 7469 6f6e 2861 2c6d 6f64  lOperation(a,mod
-0000d160: 653d 626f 6f6c 293a 0a20 2020 2069 6620  e=bool):.    if 
-0000d170: 7479 7065 2861 292e 5f5f 6e61 6d65 5f5f  type(a).__name__
-0000d180: 203d 3d20 2762 6f6f 6c27 3a0a 2020 2020   == 'bool':.    
-0000d190: 2020 2020 6966 206d 6f64 6520 6973 2062      if mode is b
-0000d1a0: 6f6f 6c3a 2072 6574 7572 6e20 610a 2020  ool: return a.  
-0000d1b0: 2020 2020 2020 6966 206d 6f64 6520 696e        if mode in
-0000d1c0: 205b 276f 7070 6f73 6974 696f 6e27 2c27   ['opposition','
-0000d1d0: 6f70 706f 7369 7427 5d3a 0a20 2020 2020  opposit']:.     
-0000d1e0: 2020 2020 2020 2072 6574 7572 6e20 6e6f         return no
-0000d1f0: 7420 610a 0a64 6566 2042 6f6f 6c28 7372  t a..def Bool(sr
-0000d200: 632c 7761 6e74 3d54 7275 652c 6175 746f  c,want=True,auto
-0000d210: 5f62 6f6f 6c3d 4661 6c73 652c 7368 656c  _bool=False,shel
-0000d220: 6c5f 636f 6465 3d54 7275 6529 3a0a 2020  l_code=True):.  
-0000d230: 2020 6966 2077 616e 7420 696e 205b 5472    if want in [Tr
-0000d240: 7565 2c46 616c 7365 2c27 5472 7565 272c  ue,False,'True',
-0000d250: 2746 616c 7365 272c 6227 5472 7565 272c  'False',b'True',
-0000d260: 6227 4661 6c73 6527 5d3a 0a20 2020 2020  b'False']:.     
-0000d270: 2020 2069 6620 7479 7065 2877 616e 7429     if type(want)
-0000d280: 2e5f 5f6e 616d 655f 5f20 696e 205b 2773  .__name__ in ['s
-0000d290: 7472 272c 2762 7974 6573 275d 3a20 7761  tr','bytes']: wa
-0000d2a0: 6e74 3d65 7661 6c28 7761 6e74 2920 2320  nt=eval(want) # 
-0000d2b0: 636f 6e76 6572 7420 7374 7269 6e67 2062  convert string b
-0000d2c0: 6f6f 6c20 746f 2062 6f6f 6c0a 2020 2020  ool to bool.    
-0000d2d0: 2020 2020 6966 2061 7574 6f5f 626f 6f6c      if auto_bool
-0000d2e0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-0000d2f0: 7372 632c 2028 6c69 7374 2c74 7570 6c65  src, (list,tuple
-0000d300: 2c64 6963 7429 2920 616e 6420 7372 633a  ,dict)) and src:
-0000d310: 2023 2063 6f6e 7665 7274 206c 6973 742c   # convert list,
-0000d320: 7475 706c 652c 6469 6374 2074 6f20 626f  tuple,dict to bo
-0000d330: 6f6c 0a20 2020 2020 2020 2020 2020 2069  ol.            i
-0000d340: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-0000d350: 2c28 6c69 7374 2c74 7570 6c65 2929 3a0a  ,(list,tuple)):.
-0000d360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d370: 7372 633d 7372 635b 305d 0a20 2020 2020  src=src[0].     
-0000d380: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-0000d390: 7374 616e 6365 2873 7263 2c64 6963 7429  stance(src,dict)
-0000d3a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000d3b0: 2020 7372 633d 7372 632e 6765 7428 2772    src=src.get('r
-0000d3c0: 6327 290a 2020 2020 2020 2020 656c 6966  c').        elif
-0000d3d0: 2073 7263 2069 6e20 5b54 7275 652c 4661   src in [True,Fa
-0000d3e0: 6c73 652c 2754 7275 6527 2c27 4661 6c73  lse,'True','Fals
-0000d3f0: 6527 2c62 2754 7275 6527 2c62 2746 616c  e',b'True',b'Fal
-0000d400: 7365 275d 3a20 2320 436f 6e76 6572 7420  se']: # Convert 
-0000d410: 7374 7269 6e67 2062 6f6f 6c20 746f 2062  string bool to b
-0000d420: 6f6f 6c0a 2020 2020 2020 2020 2020 2020  ool.            
-0000d430: 6966 2074 7970 6528 7372 6329 2e5f 5f6e  if type(src).__n
-0000d440: 616d 655f 5f20 696e 205b 2773 7472 272c  ame__ in ['str',
-0000d450: 2762 7974 6573 275d 3a20 7372 633d 6576  'bytes']: src=ev
-0000d460: 616c 2873 7263 290a 2020 2020 2020 2020  al(src).        
-0000d470: 6966 2073 6865 6c6c 5f63 6f64 6520 616e  if shell_code an
-0000d480: 6420 6973 696e 7374 616e 6365 2873 7263  d isinstance(src
-0000d490: 2c69 6e74 2920 616e 6420 6e6f 7420 6973  ,int) and not is
-0000d4a0: 696e 7374 616e 6365 2873 7263 2c62 6f6f  instance(src,boo
-0000d4b0: 6c29 3a20 2320 436f 6e76 6572 7420 7368  l): # Convert sh
-0000d4c0: 656c 6c20 7263 2074 6f20 626f 6f6c 0a20  ell rc to bool. 
-0000d4d0: 2020 2020 2020 2020 2020 2073 7263 3d54             src=T
-0000d4e0: 7275 6520 6966 2073 7263 203d 3d20 3020  rue if src == 0 
-0000d4f0: 656c 7365 2046 616c 7365 0a20 2020 2020  else False.     
-0000d500: 2020 2072 6574 7572 6e20 7372 6320 3d3d     return src ==
-0000d510: 2077 616e 740a 2020 2020 656c 6966 2077   want.    elif w
-0000d520: 616e 7420 696e 205b 7374 722c 2773 7472  ant in [str,'str
-0000d530: 272c 696e 742c 2769 6e74 272c 6469 6374  ',int,'int',dict
-0000d540: 2c27 6469 6374 272c 6c69 7374 2c27 6c69  ,'dict',list,'li
-0000d550: 7374 272c 7475 706c 652c 2774 7570 6c65  st',tuple,'tuple
-0000d560: 272c 4e6f 6e65 2c27 4e6f 6e65 275d 3a0a  ',None,'None']:.
-0000d570: 2020 2020 2020 2020 6966 2074 7970 6528          if type(
-0000d580: 7761 6e74 292e 5f5f 6e61 6d65 5f5f 2069  want).__name__ i
-0000d590: 6e20 5b27 7374 7227 2c27 6279 7465 7327  n ['str','bytes'
-0000d5a0: 5d3a 2077 616e 743d 6576 616c 2877 616e  ]: want=eval(wan
-0000d5b0: 7429 2023 2063 6f6e 7665 7274 2073 7472  t) # convert str
-0000d5c0: 696e 6720 626f 6f6c 2074 6f20 626f 6f6c  ing bool to bool
-0000d5d0: 0a20 2020 2020 2020 2069 6620 7761 6e74  .        if want
-0000d5e0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0000d5f0: 2020 2020 2020 6966 2073 7263 203d 3d20        if src == 
-0000d600: 2727 3a20 7372 633d 4e6f 6e65 0a20 2020  '': src=None.   
-0000d610: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000d620: 7372 6320 3d3d 2077 616e 740a 2020 2020  src == want.    
-0000d630: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000d640: 2020 2020 2020 7265 7475 726e 2069 7369        return isi
-0000d650: 6e73 7461 6e63 6528 7372 632c 7761 6e74  nstance(src,want
-0000d660: 290a 2020 2020 7265 7475 726e 2046 616c  ).    return Fal
-0000d670: 7365 0a0a 6465 6620 5079 4465 6669 6e65  se..def PyDefine
-0000d680: 2861 6129 3a0a 2020 2020 6966 2049 7349  (aa):.    if IsI
-0000d690: 6e28 6161 2c5b 4e6f 6e65 2c22 274e 6f6e  n(aa,[None,"'Non
-0000d6a0: 6527 222c 2722 4e6f 6e65 2227 2c27 4e6f  e'",'"None"','No
-0000d6b0: 6e65 272c 276e 756c 6c27 2c22 276e 756c  ne','null',"'nul
-0000d6c0: 6c27 222c 2722 6e75 6c6c 2227 5d29 3a0a  l'",'"null"']):.
-0000d6d0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-0000d6e0: 6f6e 650a 2020 2020 656c 6966 2049 7349  one.    elif IsI
-0000d6f0: 6e28 6161 2c5b 5472 7565 2c22 2754 7275  n(aa,[True,"'Tru
-0000d700: 6527 222c 2722 5472 7565 2227 2c27 5472  e'",'"True"','Tr
-0000d710: 7565 272c 276f 6b27 5d29 3a0a 2020 2020  ue','ok']):.    
-0000d720: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
-0000d730: 2020 2020 656c 6966 2049 7349 6e28 6161      elif IsIn(aa
-0000d740: 2c5b 4661 6c73 652c 2227 4661 6c73 6527  ,[False,"'False'
-0000d750: 222c 2722 4661 6c73 6522 272c 2746 616c  ",'"False"','Fal
-0000d760: 7365 272c 2766 6169 6c27 5d29 3a0a 2020  se','fail']):.  
-0000d770: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-0000d780: 7365 0a20 2020 2072 6574 7572 6e20 6161  se.    return aa
-0000d790: 0a0a 6465 6620 5768 6974 6553 7472 6970  ..def WhiteStrip
-0000d7a0: 2873 7263 2c6d 6f64 653d 5472 7565 293a  (src,mode=True):
-0000d7b0: 0a20 2020 2027 2727 0a20 2020 2072 656d  .    '''.    rem
-0000d7c0: 6f76 6520 6d75 6c74 6920 7370 6163 6520  ove multi space 
-0000d7d0: 746f 2073 696e 676c 6520 7370 6163 652c  to single space,
-0000d7e0: 2072 656d 6f76 6520 6669 7273 7420 616e   remove first an
-0000d7f0: 6420 656e 6420 7370 6163 650a 2020 2020  d end space.    
-0000d800: 6f74 6865 7273 2072 6574 7572 6e20 6f72  others return or
-0000d810: 6967 696e 616c 0a20 2020 2027 2727 0a20  iginal.    '''. 
-0000d820: 2020 2069 6620 6d6f 6465 2069 7320 5472     if mode is Tr
-0000d830: 7565 2061 6e64 2074 7970 6528 7372 6329  ue and type(src)
-0000d840: 2e5f 5f6e 616d 655f 5f20 696e 2028 2773  .__name__ in ('s
-0000d850: 7472 272c 2762 7974 6573 2729 3a20 7265  tr','bytes'): re
-0000d860: 7475 726e 2073 7263 2e73 7472 6970 2829  turn src.strip()
-0000d870: 0a20 2020 2072 6574 7572 6e20 7372 630a  .    return src.
-0000d880: 0a64 6566 2049 734e 6f6e 6528 7372 632c  .def IsNone(src,
-0000d890: 2a2a 6f70 7473 293a 0a20 2020 2027 2727  **opts):.    '''
-0000d8a0: 0a20 2020 2043 6865 636b 2074 6865 2053  .    Check the S
-0000d8b0: 5243 2069 7320 7369 6d69 6c61 7220 4e6f  RC is similar No
-0000d8c0: 6e65 2074 7970 6520 6461 7461 2827 272c  ne type data('',
-0000d8d0: 4e6f 6e65 2920 6f72 206e 6f74 0a20 2020  None) or not.   
-0000d8e0: 202d 6368 6563 6b5f 7479 7065 3d3c 7479   -check_type=<ty
-0000d8f0: 7065 3e20 3a20 696e 636c 7564 6520 6162  pe> : include ab
-0000d900: 6f76 6520 616e 6420 6966 2064 6966 6665  ove and if diffe
-0000d910: 7265 6e74 2074 7970 6520 7468 656e 2074  rent type then t
-0000d920: 6865 2072 6574 7572 6e20 5472 7565 0a20  he return True. 
-0000d930: 2020 202d 6c69 7374 5f6e 6f6e 6520 3a0a     -list_none :.
-0000d940: 2020 2020 2020 2d20 4661 6c73 653a 2063        - False: c
-0000d950: 6865 636b 2069 6e64 6578 2069 7465 6d20  heck index item 
-0000d960: 696e 2074 6865 2073 6f75 7263 6520 2864  in the source (d
-0000d970: 6566 6175 6c74 290a 2020 2020 2020 2d20  efault).      - 
-0000d980: 5472 7565 203a 2063 6865 636b 2061 6c6c  True : check all
-0000d990: 206c 6973 7420 6f66 2073 6f75 7263 650a   list of source.
-0000d9a0: 2020 2020 2d69 6e64 6578 2020 203a 2069      -index   : i
-0000d9b0: 6620 736f 7572 6365 2069 7320 6c69 7374  f source is list
-0000d9c0: 2074 6865 6e20 6a75 7374 2077 616e 7420   then just want 
-0000d9d0: 6368 6563 6b20 696e 6465 7820 6974 656d  check index item
-0000d9e0: 0a20 2020 202d 7370 6163 6520 2020 3a0a  .    -space   :.
-0000d9f0: 2020 2020 2020 2d20 5472 7565 203a 2061        - True : a
-0000da00: 7072 6f76 6520 7370 6163 6520 746f 2064  prove space to d
-0000da10: 6174 6120 696e 2073 6f75 7263 650a 2020  ata in source.  
-0000da20: 2020 2020 2d20 4661 6c73 653a 2069 676e      - False: ign
-0000da30: 6f72 6520 7370 6163 6520 6461 7461 2069  ore space data i
-0000da40: 6e20 736f 7572 6365 0a20 2020 2027 2727  n source.    '''
-0000da50: 0a20 2020 2076 616c 7565 3d6f 7074 732e  .    value=opts.
-0000da60: 6765 7428 2776 616c 7565 272c 6f70 7473  get('value',opts
-0000da70: 2e67 6574 2827 6368 6b5f 7661 6c27 2c5b  .get('chk_val',[
-0000da80: 2727 2c4e 6f6e 655d 2929 0a20 2020 2073  '',None])).    s
-0000da90: 7061 6365 3d6f 7074 732e 6765 7428 2773  pace=opts.get('s
-0000daa0: 7061 6365 272c 5472 7565 290a 2020 2020  pace',True).    
-0000dab0: 6368 6b5f 6f6e 6c79 3d6f 7074 732e 6765  chk_only=opts.ge
-0000dac0: 7428 2763 686b 5f6f 6e6c 7927 2c6f 7074  t('chk_only',opt
-0000dad0: 732e 6765 7428 2763 6865 636b 5f6f 6e6c  s.get('check_onl
-0000dae0: 7927 2c46 616c 7365 2929 0a20 2020 2069  y',False)).    i
-0000daf0: 6e64 6578 3d6f 7074 732e 6765 7428 2769  ndex=opts.get('i
-0000db00: 6e64 6578 272c 6f70 7473 2e67 6574 2827  ndex',opts.get('
-0000db10: 6964 7827 2929 0a20 2020 206c 6973 745f  idx')).    list_
-0000db20: 6e6f 6e65 3d6f 7074 732e 6765 7428 274c  none=opts.get('L
-0000db30: 4953 5427 2c46 616c 7365 290a 0a20 2020  IST',False)..   
-0000db40: 2023 6368 6563 6b20 7479 7065 0a20 2020   #check type.   
-0000db50: 2043 6865 636b 5479 7065 3d6f 7074 732e   CheckType=opts.
-0000db60: 6765 7428 2763 6865 636b 5f74 7970 6527  get('check_type'
-0000db70: 2c4e 6f6e 6529 0a20 2020 205f 7479 7065  ,None).    _type
-0000db80: 5f3d 4661 6c73 650a 2020 2020 6966 2043  _=False.    if C
-0000db90: 6865 636b 5479 7065 2069 7320 6e6f 7420  heckType is not 
-0000dba0: 4e6f 6e65 3a0a 2020 2020 2020 2020 7661  None:.        va
-0000dbb0: 6c75 653d 7661 6c75 652b 5b43 6865 636b  lue=value+[Check
-0000dbc0: 5479 7065 5d0a 2020 2020 2020 2020 5f74  Type].        _t
-0000dbd0: 7970 655f 3d54 7275 650a 2020 2020 6465  ype_=True.    de
-0000dbe0: 6620 5f49 7349 6e5f 2873 7263 2c76 616c  f _IsIn_(src,val
-0000dbf0: 7565 2c73 656e 7365 3d46 616c 7365 293a  ue,sense=False):
-0000dc00: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0000dc10: 7374 616e 6365 2876 616c 7565 2c28 6c69  stance(value,(li
-0000dc20: 7374 2c74 7570 6c65 2929 3a0a 2020 2020  st,tuple)):.    
-0000dc30: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-0000dc40: 2076 616c 7565 3a0a 2020 2020 2020 2020   value:.        
-0000dc50: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
-0000dc60: 656e 7365 2061 6e64 2020 7479 7065 2869  ense and  type(i
-0000dc70: 292e 5f5f 6e61 6d65 5f5f 2069 6e20 5b27  ).__name__ in ['
-0000dc80: 7374 7227 2c27 6279 7465 7327 5d20 616e  str','bytes'] an
-0000dc90: 6420 7479 7065 2873 7263 292e 5f5f 6e61  d type(src).__na
-0000dca0: 6d65 5f5f 2069 6e20 5b27 7374 7227 2c27  me__ in ['str','
-0000dcb0: 6279 7465 7327 5d3a 0a20 2020 2020 2020  bytes']:.       
-0000dcc0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000dcd0: 5374 7228 6929 2e6c 6f77 6572 2829 203d  Str(i).lower() =
-0000dce0: 3d20 5374 7228 7372 6329 2e6c 6f77 6572  = Str(src).lower
-0000dcf0: 2829 3a20 7265 7475 726e 2054 7275 650a  (): return True.
-0000dd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dd10: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000dd20: 2020 2020 2020 2020 2020 6966 2069 203d            if i =
-0000dd30: 3d20 7372 633a 2072 6574 7572 6e20 5472  = src: return Tr
-0000dd40: 7565 0a20 2020 2020 2020 2065 6c73 653a  ue.        else:
-0000dd50: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000dd60: 6e6f 7420 7365 6e73 6520 616e 6420 7479  not sense and ty
-0000dd70: 7065 2876 616c 7565 292e 5f5f 6e61 6d65  pe(value).__name
-0000dd80: 5f5f 2069 6e20 5b27 7374 7227 2c27 6279  __ in ['str','by
-0000dd90: 7465 7327 5d20 616e 6420 7479 7065 2873  tes'] and type(s
-0000dda0: 7263 292e 5f5f 6e61 6d65 5f5f 2069 6e20  rc).__name__ in 
-0000ddb0: 5b27 7374 7227 2c27 6279 7465 7327 5d3a  ['str','bytes']:
-0000ddc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ddd0: 2069 6620 5374 7228 7661 6c75 6529 2e6c   if Str(value).l
-0000dde0: 6f77 6572 2829 203d 3d20 5374 7228 7372  ower() == Str(sr
-0000ddf0: 6329 2e6c 6f77 6572 2829 3a20 7265 7475  c).lower(): retu
-0000de00: 726e 2054 7275 650a 2020 2020 2020 2020  rn True.        
-0000de10: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000de20: 2020 2020 2020 2020 2020 6966 2076 616c            if val
-0000de30: 7565 203d 3d20 7372 633a 2072 6574 7572  ue == src: retur
-0000de40: 6e20 5472 7565 0a20 2020 2020 2020 2072  n True.        r
-0000de50: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-0000de60: 2020 2020 0a20 2020 2073 7263 3d57 6869      .    src=Whi
-0000de70: 7465 5374 7269 7028 7372 632c 426f 6f6c  teStrip(src,Bool
-0000de80: 4f70 6572 6174 696f 6e28 7370 6163 652c  Operation(space,
-0000de90: 6d6f 6465 3d27 6f70 706f 7369 7427 2929  mode='opposit'))
-0000dea0: 0a20 2020 2069 6620 5f49 7349 6e5f 2873  .    if _IsIn_(s
-0000deb0: 7263 2c76 616c 7565 2c73 656e 7365 3d46  rc,value,sense=F
-0000dec0: 616c 7365 293a 2072 6574 7572 6e20 5472  alse): return Tr
-0000ded0: 7565 0a20 2020 2069 6620 7372 633a 0a20  ue.    if src:. 
-0000dee0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000def0: 616e 6365 2873 7263 2c28 6c69 7374 2c74  ance(src,(list,t
-0000df00: 7570 6c65 2929 3a0a 2020 2020 2020 2020  uple)):.        
-0000df10: 2020 2020 6966 206c 6973 745f 6e6f 6e65      if list_none
-0000df20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000df30: 2020 666f 7220 6920 696e 2073 7263 3a0a    for i in src:.
-0000df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000df50: 2020 2020 6966 206e 6f74 205f 4973 496e      if not _IsIn
-0000df60: 5f28 5768 6974 6553 7472 6970 2869 2c42  _(WhiteStrip(i,B
-0000df70: 6f6f 6c4f 7065 7261 7469 6f6e 2873 7061  oolOperation(spa
-0000df80: 6365 2c6d 6f64 653d 276f 7070 6f73 6974  ce,mode='opposit
-0000df90: 2729 292c 7661 6c75 652c 7365 6e73 653d  ')),value,sense=
-0000dfa0: 4661 6c73 6529 3a20 7265 7475 726e 2046  False): return F
-0000dfb0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-0000dfc0: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
-0000dfd0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0000dfe0: 6620 6973 696e 7374 616e 6365 2869 6e64  f isinstance(ind
-0000dff0: 6578 2c69 6e74 2920 616e 6420 6c65 6e28  ex,int) and len(
-0000e000: 7372 6329 203e 2061 6273 2869 6e64 6578  src) > abs(index
-0000e010: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0000e020: 2020 2069 6620 5f49 7349 6e5f 2857 6869     if _IsIn_(Whi
-0000e030: 7465 5374 7269 7028 7372 635b 696e 6465  teStrip(src[inde
-0000e040: 785d 2c42 6f6f 6c4f 7065 7261 7469 6f6e  x],BoolOperation
-0000e050: 2873 7061 6365 2c6d 6f64 653d 276f 7070  (space,mode='opp
-0000e060: 6f73 6974 2729 292c 7661 6c75 652c 7365  osit')),value,se
-0000e070: 6e73 653d 4661 6c73 6529 3a20 7265 7475  nse=False): retu
-0000e080: 726e 2054 7275 650a 2020 2020 2020 2020  rn True.        
-0000e090: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-0000e0a0: 7372 632c 6469 6374 293a 0a20 2020 2020  src,dict):.     
-0000e0b0: 2020 2020 2020 2069 6620 696e 6465 7820         if index 
-0000e0c0: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
-0000e0d0: 2020 2020 2020 2020 6966 205f 4973 496e          if _IsIn
-0000e0e0: 5f28 5768 6974 6553 7472 6970 2873 7263  _(WhiteStrip(src
-0000e0f0: 5b69 6e64 6578 5d2c 426f 6f6c 4f70 6572  [index],BoolOper
-0000e100: 6174 696f 6e28 7370 6163 652c 6d6f 6465  ation(space,mode
-0000e110: 3d27 6f70 706f 7369 7427 2929 2c76 616c  ='opposit')),val
-0000e120: 7565 2c73 656e 7365 3d46 616c 7365 293a  ue,sense=False):
-0000e130: 2072 6574 7572 6e20 5472 7565 0a20 2020   return True.   
-0000e140: 2069 6620 6368 6b5f 6f6e 6c79 3a0a 2020   if chk_only:.  
-0000e150: 2020 2020 2020 2320 6920 7761 6e74 2063        # i want c
-0000e160: 6865 636b 2054 7970 6520 7468 656e 2064  heck Type then d
-0000e170: 6966 6665 7265 6e74 2074 7970 6520 7468  ifferent type th
-0000e180: 656e 2072 6574 7572 6e20 5472 7565 0a20  en return True. 
-0000e190: 2020 2020 2020 2069 6620 5f74 7970 655f         if _type_
-0000e1a0: 3a0a 2020 2020 2020 2020 2020 2020 2369  :.            #i
-0000e1b0: 6620 5479 7065 4e61 6d65 2873 7263 2920  f TypeName(src) 
-0000e1c0: 213d 2054 7970 654e 616d 6528 4368 6563  != TypeName(Chec
-0000e1d0: 6b54 7970 6529 3a20 7265 7475 726e 2054  kType): return T
-0000e1e0: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0000e1f0: 7265 7475 726e 2046 616c 7365 2069 6620  return False if 
-0000e200: 5479 7065 2873 7263 2c43 6865 636b 5479  Type(src,CheckTy
-0000e210: 7065 2920 656c 7365 2054 7275 650a 2020  pe) else True.  
-0000e220: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-0000e230: 7365 0a20 2020 2069 6620 6e6f 7420 6973  se.    if not is
-0000e240: 696e 7374 616e 6365 2873 7263 2c28 626f  instance(src,(bo
-0000e250: 6f6c 2c69 6e74 2929 3a0a 2020 2020 2020  ol,int)):.      
-0000e260: 2020 6966 206e 6f74 2073 7263 3a20 7265    if not src: re
-0000e270: 7475 726e 2054 7275 650a 2020 2020 2320  turn True.    # 
-0000e280: 6920 7761 6e74 2063 6865 636b 2054 7970  i want check Typ
-0000e290: 6520 7468 656e 2064 6966 6665 7265 6e74  e then different
-0000e2a0: 2074 7970 6520 7468 656e 2072 6574 7572   type then retur
-0000e2b0: 6e20 5472 7565 0a20 2020 2069 6620 5f74  n True.    if _t
-0000e2c0: 7970 655f 3a0a 2020 2020 2020 2020 2369  ype_:.        #i
-0000e2d0: 6620 5479 7065 4e61 6d65 2873 7263 2920  f TypeName(src) 
-0000e2e0: 213d 2054 7970 654e 616d 6528 4368 6563  != TypeName(Chec
-0000e2f0: 6b54 7970 6529 3a20 7265 7475 726e 2054  kType): return T
-0000e300: 7275 650a 2020 2020 2020 2020 7265 7475  rue.        retu
-0000e310: 726e 2046 616c 7365 2069 6620 5479 7065  rn False if Type
-0000e320: 2873 7263 2c43 6865 636b 5479 7065 2920  (src,CheckType) 
-0000e330: 656c 7365 2054 7275 650a 2020 2020 7265  else True.    re
-0000e340: 7475 726e 2046 616c 7365 0a0a 6465 6620  turn False..def 
-0000e350: 4973 5661 7228 7372 632c 6f62 6a3d 4e6f  IsVar(src,obj=No
-0000e360: 6e65 2c64 6566 6175 6c74 3d46 616c 7365  ne,default=False
-0000e370: 2c6d 6f64 653d 2761 6c6c 272c 7061 7265  ,mode='all',pare
-0000e380: 6e74 3d30 293a 0a20 2020 2027 2727 0a20  nt=0):.    '''. 
-0000e390: 2020 2043 6865 636b 2074 6865 2069 6e70     Check the inp
-0000e3a0: 7574 2873 7263 2920 6973 2056 6172 6961  ut(src) is Varia
-0000e3b0: 626c 6520 6e61 6d65 206f 7220 6e6f 7420  ble name or not 
-0000e3c0: 2869 6e20 4f42 4a20 6f72 2069 6e20 6d79  (in OBJ or in my
-0000e3d0: 2066 756e 6374 696f 6e29 0a20 2020 2027   function).    '
-0000e3e0: 2727 0a20 2020 206f 6f3d 5661 7269 6162  ''.    oo=Variab
-0000e3f0: 6c65 2873 7263 2c6f 626a 3d6f 626a 2c70  le(src,obj=obj,p
-0000e400: 6172 656e 743d 312b 7061 7265 6e74 2c68  arent=1+parent,h
-0000e410: 6973 746f 7279 3d46 616c 7365 2c64 6566  istory=False,def
-0000e420: 6175 6c74 3d27 5f23 5f27 2c6d 6f64 653d  ault='_#_',mode=
-0000e430: 6d6f 6465 290a 2020 2020 6966 206f 6f20  mode).    if oo 
-0000e440: 3d3d 2027 5f23 5f27 3a20 7265 7475 726e  == '_#_': return
-0000e450: 2064 6566 6175 6c74 0a20 2020 2072 6574   default.    ret
-0000e460: 7572 6e20 5472 7565 0a0a 6465 6620 4973  urn True..def Is
-0000e470: 4675 6e63 7469 6f6e 2873 7263 3d4e 6f6e  Function(src=Non
-0000e480: 652c 6669 6e64 3d27 5f23 5f27 2c62 7569  e,find='_#_',bui
-0000e490: 6c74 696e 3d46 616c 7365 293a 0a20 2020  ltin=False):.   
-0000e4a0: 2027 2727 0a20 2020 2043 6865 636b 2074   '''.    Check t
-0000e4b0: 6865 2066 696e 6420 6973 2046 756e 6374  he find is Funct
-0000e4c0: 696f 6e20 696e 2073 7263 206f 626a 6563  ion in src objec
-0000e4d0: 740a 2020 2020 2727 270a 2020 2020 6966  t.    '''.    if
-0000e4e0: 2049 734e 6f6e 6528 7372 6329 3a0a 2020   IsNone(src):.  
-0000e4f0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0000e500: 6e63 6528 6669 6e64 2c73 7472 2920 616e  nce(find,str) an
-0000e510: 6420 6669 6e64 2021 3d20 275f 235f 273a  d find != '_#_':
-0000e520: 0a20 2020 2020 2020 2020 2020 2066 696e  .            fin
-0000e530: 643d 476c 6f62 616c 2829 2e67 6574 2866  d=Global().get(f
-0000e540: 696e 6429 0a20 2020 2020 2020 2072 6574  ind).        ret
-0000e550: 7572 6e20 696e 7370 6563 742e 6973 6675  urn inspect.isfu
-0000e560: 6e63 7469 6f6e 2866 696e 6429 0a20 2020  nction(find).   
-0000e570: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
-0000e580: 6620 6275 696c 7469 6e3a 0a20 2020 2020  f builtin:.     
-0000e590: 2020 2020 2020 2069 6620 7479 7065 2873         if type(s
-0000e5a0: 7263 292e 5f5f 6e61 6d65 5f5f 2069 6e20  rc).__name__ in 
-0000e5b0: 5b27 6675 6e63 7469 6f6e 272c 2769 6e73  ['function','ins
-0000e5c0: 7461 6e63 656d 6574 686f 6427 2c27 6d65  tancemethod','me
-0000e5d0: 7468 6f64 272c 2762 7569 6c74 696e 5f66  thod','builtin_f
-0000e5e0: 756e 6374 696f 6e5f 6f72 5f6d 6574 686f  unction_or_metho
-0000e5f0: 6427 5d3a 2072 6574 7572 6e20 5472 7565  d']: return True
-0000e600: 2023 2073 7263 2069 7320 6675 6e63 7469   # src is functi
-0000e610: 6f6e 2074 6865 6e0a 2020 2020 2020 2020  on then.        
-0000e620: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000e630: 2020 6966 2074 7970 6528 7372 6329 2e5f    if type(src)._
-0000e640: 5f6e 616d 655f 5f20 696e 205b 2766 756e  _name__ in ['fun
-0000e650: 6374 696f 6e27 2c27 696e 7374 616e 6365  ction','instance
-0000e660: 6d65 7468 6f64 272c 276d 6574 686f 6427  method','method'
-0000e670: 5d3a 2072 6574 7572 6e20 5472 7565 2023  ]: return True #
-0000e680: 2073 7263 2069 7320 6675 6e63 7469 6f6e   src is function
-0000e690: 2074 6865 6e0a 2020 2020 2320 6669 6e64   then.    # find
-0000e6a0: 2066 756e 6374 696f 6e20 696e 206f 626a   function in obj
-0000e6b0: 6563 740a 2020 2020 6161 3d5b 5d0a 2020  ect.    aa=[].  
-0000e6c0: 2020 6966 2074 7970 6528 6669 6e64 292e    if type(find).
-0000e6d0: 5f5f 6e61 6d65 5f5f 203d 3d20 2766 756e  __name__ == 'fun
-0000e6e0: 6374 696f 6e27 3a20 6669 6e64 3d66 696e  ction': find=fin
-0000e6f0: 642e 5f5f 6e61 6d65 5f5f 0a20 2020 2069  d.__name__.    i
-0000e700: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-0000e710: 2866 696e 642c 7374 7229 3a20 7265 7475  (find,str): retu
-0000e720: 726e 2046 616c 7365 0a20 2020 2069 6620  rn False.    if 
-0000e730: 6973 696e 7374 616e 6365 2873 7263 2c73  isinstance(src,s
-0000e740: 7472 293a 2073 7263 3d73 7973 2e6d 6f64  tr): src=sys.mod
-0000e750: 756c 6573 2e67 6574 2873 7263 290a 2020  ules.get(src).  
-0000e760: 2020 6966 2069 6e73 7065 6374 2e69 736d    if inspect.ism
-0000e770: 6f64 756c 6528 7372 6329 206f 7220 696e  odule(src) or in
-0000e780: 7370 6563 742e 6973 636c 6173 7328 7372  spect.isclass(sr
-0000e790: 6329 3a0a 2020 2020 2020 2020 666f 7220  c):.        for 
-0000e7a0: 6e61 6d65 2c66 6f62 6a20 696e 2069 6e73  name,fobj in ins
-0000e7b0: 7065 6374 2e67 6574 6d65 6d62 6572 7328  pect.getmembers(
-0000e7c0: 7372 6329 3a0a 2020 2020 2020 2020 2020  src):.          
-0000e7d0: 2020 6966 2069 6e73 7065 6374 2e69 7366    if inspect.isf
-0000e7e0: 756e 6374 696f 6e28 666f 626a 293a 2023  unction(fobj): #
-0000e7f0: 2069 6e73 7065 6374 2e69 736d 6f64 756c   inspect.ismodul
-0000e800: 6528 6f62 6a29 2063 6865 636b 2074 6865  e(obj) check the
-0000e810: 206f 626a 2069 7320 6d6f 6475 6c65 206f   obj is module o
-0000e820: 7220 6e6f 740a 2020 2020 2020 2020 2020  r not.          
-0000e830: 2020 2020 2020 6161 2e61 7070 656e 6428        aa.append(
-0000e840: 6e61 6d65 290a 2020 2020 656c 7365 3a0a  name).    else:.
-0000e850: 2020 2020 2020 2020 666f 7220 6e61 6d65          for name
-0000e860: 2c66 6f62 6a20 696e 2069 6e73 7065 6374  ,fobj in inspect
-0000e870: 2e67 6574 6d65 6d62 6572 7328 7372 6329  .getmembers(src)
-0000e880: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0000e890: 2069 6e73 7065 6374 2e69 736d 6574 686f   inspect.ismetho
-0000e8a0: 6428 666f 626a 293a 2023 2069 6e73 7065  d(fobj): # inspe
-0000e8b0: 6374 2e69 736d 6f64 756c 6528 6f62 6a29  ct.ismodule(obj)
-0000e8c0: 2063 6865 636b 2074 6865 206f 626a 2069   check the obj i
-0000e8d0: 7320 6d6f 6475 6c65 206f 7220 6e6f 740a  s module or not.
-0000e8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e8f0: 6161 2e61 7070 656e 6428 6e61 6d65 290a  aa.append(name).
-0000e900: 2020 2020 6966 2066 696e 6420 696e 2061      if find in a
-0000e910: 613a 2072 6574 7572 6e20 5472 7565 0a20  a: return True. 
-0000e920: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
-0000e930: 0a64 6566 2049 7342 7974 6573 2873 7263  .def IsBytes(src
-0000e940: 293a 0a20 2020 2027 2727 0a20 2020 2043  ):.    '''.    C
-0000e950: 6865 636b 2064 6174 6120 6973 2042 7974  heck data is Byt
-0000e960: 6573 206f 7220 6e6f 740a 2020 2020 2727  es or not.    ''
-0000e970: 270a 2020 2020 6966 2050 7956 6572 2833  '.    if PyVer(3
-0000e980: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
-0000e990: 696e 7374 616e 6365 2873 7263 2c62 7974  instance(src,byt
-0000e9a0: 6573 293a 0a20 2020 2020 2020 2020 2020  es):.           
-0000e9b0: 2072 6574 7572 6e20 5472 7565 0a20 2020   return True.   
-0000e9c0: 2072 6574 7572 6e20 4661 6c73 650a 0a64   return False..d
-0000e9d0: 6566 2049 7349 6e74 2873 7263 2c6d 6f64  ef IsInt(src,mod
-0000e9e0: 653d 2761 6c6c 2729 3a0a 2020 2020 2727  e='all'):.    ''
-0000e9f0: 270a 2020 2020 4368 6563 6b20 6461 7461  '.    Check data
-0000ea00: 2069 7320 496e 7420 6f72 206e 6f74 0a20   is Int or not. 
-0000ea10: 2020 202d 206d 6f64 6520 3a20 696e 7420     - mode : int 
-0000ea20: 3d3e 2063 6865 636b 206f 6e6c 7920 696e  => check only in
-0000ea30: 740a 2020 2020 2020 2020 2020 2020 2073  t.             s
-0000ea40: 7472 203d 3e20 696e 7420 7479 7065 2073  tr => int type s
-0000ea50: 7472 696e 6720 6f6e 6c79 0a20 2020 2020  tring only.     
-0000ea60: 2020 2020 2020 2020 616c 6c20 3d3e 2049          all => I
-0000ea70: 6e74 2061 6e64 2069 6e74 2074 7970 6520  nt and int type 
-0000ea80: 7374 7269 6e67 0a20 2020 2027 2727 0a20  string.    '''. 
-0000ea90: 2020 2064 6566 205f 696e 745f 2864 6174     def _int_(dat
-0000eaa0: 6129 3a0a 2020 2020 2020 2020 7472 793a  a):.        try:
-0000eab0: 0a20 2020 2020 2020 2020 2020 2069 6e74  .            int
-0000eac0: 2864 6174 6129 0a20 2020 2020 2020 2020  (data).         
-0000ead0: 2020 2072 6574 7572 6e20 5472 7565 0a20     return True. 
-0000eae0: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
-0000eaf0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000eb00: 6e20 4661 6c73 650a 0a20 2020 2069 6620  n False..    if 
-0000eb10: 6e6f 7420 6973 696e 7374 616e 6365 2873  not isinstance(s
-0000eb20: 7263 2c62 6f6f 6c29 3a0a 2020 2020 2020  rc,bool):.      
-0000eb30: 2020 6966 206d 6f64 6520 696e 205b 696e    if mode in [in
-0000eb40: 742c 2769 6e74 275d 3a0a 2020 2020 2020  t,'int']:.      
-0000eb50: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0000eb60: 6e63 6528 7372 632c 696e 7429 3a0a 2020  nce(src,int):.  
-0000eb70: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0000eb80: 7475 726e 2054 7275 650a 2020 2020 2020  turn True.      
-0000eb90: 2020 656c 6966 206d 6f64 6520 696e 205b    elif mode in [
-0000eba0: 7374 722c 2773 7472 272c 2774 6578 7427  str,'str','text'
-0000ebb0: 2c27 7374 7269 6e67 275d 3a0a 2020 2020  ,'string']:.    
-0000ebc0: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
-0000ebd0: 7372 632c 2827 7374 7227 2c27 6279 7465  src,('str','byte
-0000ebe0: 7327 2929 3a0a 2020 2020 2020 2020 2020  s')):.          
-0000ebf0: 2020 2020 2020 7265 7475 726e 205f 696e        return _in
-0000ec00: 745f 2873 7263 290a 2020 2020 2020 2020  t_(src).        
-0000ec10: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000ec20: 2020 7265 7475 726e 205f 696e 745f 2873    return _int_(s
-0000ec30: 7263 290a 2020 2020 7265 7475 726e 2046  rc).    return F
-0000ec40: 616c 7365 0a0a 6465 6620 5f6f 626a 5f6d  alse..def _obj_m
-0000ec50: 6178 5f69 6478 5f28 6f62 6a2c 6964 782c  ax_idx_(obj,idx,
-0000ec60: 6572 723d 5472 7565 293a 0a20 2020 2023  err=True):.    #
-0000ec70: 4765 7420 4f62 6a65 6374 2773 206d 6178  Get Object's max
-0000ec80: 206c 656e 6774 680a 2020 2020 6f62 6a5f   length.    obj_
-0000ec90: 6c65 6e3d 6c65 6e28 6f62 6a29 0a20 2020  len=len(obj).   
-0000eca0: 2069 6620 6f62 6a5f 6c65 6e20 3d3d 2030   if obj_len == 0
-0000ecb0: 3a20 7265 7475 726e 204e 6f6e 650a 2020  : return None.  
-0000ecc0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-0000ecd0: 6e63 6528 6964 782c 696e 7429 3a0a 2020  nce(idx,int):.  
-0000ece0: 2020 2020 2020 6966 2065 7272 2069 7320        if err is 
-0000ecf0: 5472 7565 3a20 7265 7475 726e 2046 616c  True: return Fal
-0000ed00: 7365 0a20 2020 2020 2020 2072 6574 7572  se.        retur
-0000ed10: 6e20 6f62 6a5f 6c65 6e2d 310a 2020 2020  n obj_len-1.    
-0000ed20: 6966 2069 6478 203e 3d20 303a 0a20 2020  if idx >= 0:.   
-0000ed30: 2020 2020 2069 6620 6f62 6a5f 6c65 6e20       if obj_len 
-0000ed40: 3c3d 2069 6478 3a0a 2020 2020 2020 2020  <= idx:.        
-0000ed50: 2020 2020 6966 2065 7272 2069 7320 5472      if err is Tr
-0000ed60: 7565 3a20 7265 7475 726e 2046 616c 7365  ue: return False
-0000ed70: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000ed80: 7572 6e20 6f62 6a5f 6c65 6e2d 310a 2020  urn obj_len-1.  
-0000ed90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000eda0: 2020 2020 2020 2020 7265 7475 726e 2069          return i
-0000edb0: 6478 0a20 2020 2065 6c73 653a 0a20 2020  dx.    else:.   
-0000edc0: 2020 2020 2069 6620 6f62 6a5f 6c65 6e20       if obj_len 
-0000edd0: 3c20 6162 7328 6964 7829 3a0a 2020 2020  < abs(idx):.    
-0000ede0: 2020 2020 2020 2020 6966 2065 7272 2069          if err i
-0000edf0: 7320 5472 7565 3a20 7265 7475 726e 2046  s True: return F
-0000ee00: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-0000ee10: 2072 6574 7572 6e20 300a 2020 2020 2020   return 0.      
-0000ee20: 2020 7265 7475 726e 206f 626a 5f6c 656e    return obj_len
-0000ee30: 2b69 6478 0a0a 6465 6620 4d61 7828 6f62  +idx..def Max(ob
-0000ee40: 6a2c 6b65 793d 4661 6c73 652c 6572 723d  j,key=False,err=
-0000ee50: 5472 7565 293a 0a20 2020 2023 546f 446f  True):.    #ToDo
-0000ee60: 3a0a 2020 2020 2320 2d20 6c69 7374 2c74  :.    # - list,t
-0000ee70: 7570 6c65 3a0a 2020 2020 2320 2020 202d  uple:.    #    -
-0000ee80: 206b 6579 203a 2054 7275 6520 3a20 4d61   key : True : Ma
-0000ee90: 7820 6f66 2069 6478 0a20 2020 2023 2020  x of idx.    #  
-0000eea0: 2020 2d20 6b65 7920 3a20 4661 6c73 653a    - key : False:
-0000eeb0: 2067 6574 206d 6178 696d 756d 206e 756d   get maximum num
-0000eec0: 6265 7220 6f72 206c 6173 7420 7374 7269  ber or last stri
-0000eed0: 6e67 0a20 2020 2023 2020 2020 2d20 6b65  ng.    #    - ke
-0000eee0: 7920 3a20 7665 7273 696f 6e3a 206c 6173  y : version: las
-0000eef0: 7420 7665 7273 696f 6e0a 2020 2020 2320  t version.    # 
-0000ef00: 2d20 6469 6374 203a 0a20 2020 2023 2020  - dict :.    #  
-0000ef10: 2020 2d20 6b65 7920 3a20 5472 7565 203a    - key : True :
-0000ef20: 204d 6178 2069 6e20 6b65 7973 0a20 2020   Max in keys.   
-0000ef30: 2023 2020 2020 2d20 6b65 7920 3a20 4661   #    - key : Fa
-0000ef40: 6c73 653a 204d 6178 2069 6e20 7661 6c75  lse: Max in valu
-0000ef50: 6573 0a20 2020 2023 2020 2020 2d20 6b65  es.    #    - ke
-0000ef60: 7920 3a20 4e6f 6e65 206f 7220 6469 6374  y : None or dict
-0000ef70: 3a20 6c61 7374 2069 6e70 7574 2064 6963  : last input dic
-0000ef80: 740a 2020 2020 2370 7269 6e74 2827 3e3e  t.    #print('>>
-0000ef90: 272c 6f62 6a29 0a20 2020 2069 6620 6973  ',obj).    if is
-0000efa0: 696e 7374 616e 6365 286f 626a 2c28 6c69  instance(obj,(li
-0000efb0: 7374 2c74 7570 6c65 2929 3a0a 2020 2020  st,tuple)):.    
-0000efc0: 2020 2020 6966 206b 6579 2069 7320 5472      if key is Tr
-0000efd0: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-0000efe0: 7265 7475 726e 205f 6f62 6a5f 6d61 785f  return _obj_max_
-0000eff0: 6964 785f 286f 626a 2c65 7272 3d65 7272  idx_(obj,err=err
-0000f000: 290a 2020 2020 2020 2020 656c 6966 2049  ).        elif I
-0000f010: 7349 6e28 6b65 792c 5b27 7665 7227 2c27  sIn(key,['ver','
-0000f020: 7665 7273 696f 6e27 5d29 3a0a 2020 2020  version']):.    
-0000f030: 2020 2020 2020 2020 613d 2730 2e30 270a          a='0.0'.
-0000f040: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0000f050: 6920 696e 206f 626a 3a0a 2020 2020 2020  i in obj:.      
-0000f060: 2020 2020 2020 2020 2020 6966 2043 6f6d            if Com
-0000f070: 7056 6572 7369 6f6e 2869 2c27 3e27 2c61  pVersion(i,'>',a
-0000f080: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0000f090: 2020 2020 2020 2061 3d69 0a20 2020 2020         a=i.     
-0000f0a0: 2020 2020 2020 2069 6620 613d 3d27 302e         if a=='0.
-0000f0b0: 3027 3a0a 2020 2020 2020 2020 2020 2020  0':.            
-0000f0c0: 2020 2020 6966 2065 7272 3a0a 2020 2020      if err:.    
-0000f0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f0e0: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-0000f0f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000f100: 610a 2020 2020 2020 2020 656c 6966 206b  a.        elif k
-0000f110: 6579 2069 7320 4661 6c73 653a 0a20 2020  ey is False:.   
-0000f120: 2020 2020 2020 2020 2061 3d2d 3120 236e           a=-1 #n
-0000f130: 756d 6265 720a 2020 2020 2020 2020 2020  umber.          
-0000f140: 2020 623d 5b5d 2023 7374 7269 6e67 0a20    b=[] #string. 
-0000f150: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-0000f160: 2069 6e20 6f62 6a3a 0a20 2020 2020 2020   in obj:.       
-0000f170: 2020 2020 2020 2020 2069 3d49 6e74 2869           i=Int(i
-0000f180: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000f190: 2020 2370 7269 6e74 2827 3e3e 693a 272c    #print('>>i:',
-0000f1a0: 6929 0a20 2020 2020 2020 2020 2020 2020  i).             
-0000f1b0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0000f1c0: 2869 2c69 6e74 293a 0a20 2020 2020 2020  (i,int):.       
-0000f1d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000f1e0: 6120 3c20 693a 0a20 2020 2020 2020 2020  a < i:.         
-0000f1f0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0000f200: 3d69 0a20 2020 2020 2020 2020 2020 2020  =i.             
-0000f210: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-0000f220: 6365 2869 2c73 7472 293a 0a20 2020 2020  ce(i,str):.     
-0000f230: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0000f240: 2e61 7070 656e 6428 6929 0a20 2020 2020  .append(i).     
-0000f250: 2020 2020 2020 2023 7072 696e 7428 273e         #print('>
-0000f260: 3e62 3a27 2c62 290a 2020 2020 2020 2020  >b:',b).        
-0000f270: 2020 2020 6966 2061 203e 202d 313a 0a20      if a > -1:. 
-0000f280: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000f290: 6574 7572 6e20 610a 2020 2020 2020 2020  eturn a.        
-0000f2a0: 2020 2020 656c 6966 2062 3a0a 2020 2020      elif b:.    
-0000f2b0: 2020 2020 2020 2020 2020 2020 622e 736f              b.so
-0000f2c0: 7274 2829 0a20 2020 2020 2020 2020 2020  rt().           
-0000f2d0: 2020 2020 2072 6574 7572 6e20 625b 2d31       return b[-1
-0000f2e0: 5d0a 2020 2020 2020 2020 2020 2020 656c  ].            el
-0000f2f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000f300: 2020 2020 6966 2065 7272 3a0a 2020 2020      if err:.    
-0000f310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f320: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-0000f330: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0000f340: 7572 6e20 6f62 6a5b 2d31 5d0a 2020 2020  urn obj[-1].    
-0000f350: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-0000f360: 6f62 6a2c 6469 6374 293a 0a20 2020 2020  obj,dict):.     
-0000f370: 2020 2069 6620 6b65 7920 6973 2054 7275     if key is Tru
-0000f380: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0000f390: 6574 7572 6e20 4d61 7828 6c69 7374 286f  eturn Max(list(o
-0000f3a0: 626a 2e6b 6579 7328 2929 2c65 7272 3d65  bj.keys()),err=e
-0000f3b0: 7272 290a 2020 2020 2020 2020 656c 6966  rr).        elif
-0000f3c0: 206b 6579 2069 7320 4661 6c73 653a 0a20   key is False:. 
-0000f3d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000f3e0: 6e20 4d61 7828 6c69 7374 286f 626a 2e76  n Max(list(obj.v
-0000f3f0: 616c 7565 7328 2929 2c65 7272 3d65 7272  alues()),err=err
-0000f400: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-0000f410: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000f420: 726e 204d 6178 286c 6973 7428 6f62 6a2e  rn Max(list(obj.
-0000f430: 6974 656d 7328 2929 2c65 7272 3d46 616c  items()),err=Fal
-0000f440: 7365 290a 2020 2020 656c 7365 3a0a 2020  se).    else:.  
-0000f450: 2020 2020 2020 6966 2065 7272 3a0a 2020        if err:.  
-0000f460: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000f470: 2046 616c 7365 0a20 2020 2020 2020 2065   False.        e
-0000f480: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0000f490: 2072 6574 7572 6e20 6f62 6a0a 0a63 6c61   return obj..cla
-0000f4a0: 7373 2044 4943 5428 6469 6374 293a 0a20  ss DICT(dict):. 
-0000f4b0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-0000f4c0: 7365 6c66 2c20 2a69 6e70 732c 2a2a 6f70  self, *inps,**op
-0000f4d0: 7473 293a 0a20 2020 2020 2020 2066 6f72  ts):.        for
-0000f4e0: 2069 2069 6e20 696e 7073 3a0a 2020 2020   i in inps:.    
-0000f4f0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0000f500: 7461 6e63 6528 692c 2864 6963 742c 4449  tance(i,(dict,DI
-0000f510: 4354 2929 3a0a 2020 2020 2020 2020 2020  CT)):.          
-0000f520: 2020 2020 2020 666f 7220 6b20 696e 2069        for k in i
-0000f530: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000f540: 2020 2020 2020 7365 6c66 2e5f 5f73 6574        self.__set
-0000f550: 6974 656d 5f5f 286b 2c69 5b6b 5d29 0a20  item__(k,i[k]). 
-0000f560: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0000f570: 6973 696e 7374 616e 6365 2869 2c74 7570  isinstance(i,tup
-0000f580: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
-0000f590: 2020 2020 2073 656c 662e 5475 706c 6544       self.TupleD
-0000f5a0: 6963 7428 6929 0a20 2020 2020 2020 2020  ict(i).         
-0000f5b0: 2020 2065 6c69 6620 5479 7065 2869 2c27     elif Type(i,'
-0000f5c0: 6469 6374 5f69 7465 6d73 2729 3a0a 2020  dict_items'):.  
-0000f5d0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000f5e0: 6c66 2e54 7570 6c65 4469 6374 282a 7475  lf.TupleDict(*tu
-0000f5f0: 706c 6528 6929 290a 2020 2020 2020 2020  ple(i)).        
-0000f600: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000f610: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-0000f620: 7565 0a20 2020 2020 2020 2069 6620 6f70  ue.        if op
-0000f630: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-0000f640: 666f 7220 6920 696e 206f 7074 733a 0a20  for i in opts:. 
-0000f650: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000f660: 656c 662e 5f5f 7365 7469 7465 6d5f 5f28  elf.__setitem__(
-0000f670: 692c 6f70 7473 5b69 5d29 0a20 2020 2064  i,opts[i]).    d
-0000f680: 6566 205f 5f67 6574 6974 656d 5f5f 2873  ef __getitem__(s
-0000f690: 656c 662c 206b 6579 293a 0a20 2020 2020  elf, key):.     
-0000f6a0: 2020 2072 6574 7572 6e20 6469 6374 2e5f     return dict._
-0000f6b0: 5f67 6574 6974 656d 5f5f 2873 656c 662c  _getitem__(self,
-0000f6c0: 6b65 7929 0a0a 2020 2020 6465 6620 5f5f  key)..    def __
-0000f6d0: 7365 7469 7465 6d5f 5f28 7365 6c66 2c20  setitem__(self, 
-0000f6e0: 6b65 792c 2076 616c 7565 293a 0a20 2020  key, value):.   
-0000f6f0: 2020 2020 2066 6f75 6e64 3d73 656c 662e       found=self.
-0000f700: 6765 7428 6b65 792c 4e6f 6e65 290a 2020  get(key,None).  
-0000f710: 2020 2020 2020 6966 2054 7970 6528 666f        if Type(fo
-0000f720: 756e 642c 2827 4449 4354 272c 2764 6963  und,('DICT','dic
-0000f730: 7427 2929 3a0a 2020 2020 2020 2020 2020  t')):.          
-0000f740: 2020 2320 6368 616e 6765 2069 6e74 6f20    # change into 
-0000f750: 6469 6374 0a20 2020 2020 2020 2020 2020  dict.           
-0000f760: 2073 7570 6572 2844 4943 542c 2073 656c   super(DICT, sel
-0000f770: 6629 2e5f 5f73 6574 6974 656d 5f5f 286b  f).__setitem__(k
-0000f780: 6579 2c20 666f 756e 6429 0a20 2020 2020  ey, found).     
-0000f790: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0000f7a0: 2020 2020 2023 206d 616b 6520 6120 7375       # make a su
-0000f7b0: 6220 6469 6374 2074 6f20 646f 7420 6469  b dict to dot di
-0000f7c0: 6374 0a20 2020 2020 2020 2020 2020 2069  ct.            i
-0000f7d0: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
-0000f7e0: 7565 2c64 6963 7429 2061 6e64 206e 6f74  ue,dict) and not
-0000f7f0: 2069 7369 6e73 7461 6e63 6528 7661 6c75   isinstance(valu
-0000f800: 652c 4449 4354 293a 0a20 2020 2020 2020  e,DICT):.       
-0000f810: 2020 2020 2020 2020 2076 616c 7565 3d44           value=D
-0000f820: 4943 5428 7661 6c75 6529 0a20 2020 2020  ICT(value).     
-0000f830: 2020 2020 2020 2023 2073 6574 2064 6f74         # set dot
-0000f840: 2074 7970 6520 6469 6374 2074 6f20 7375   type dict to su
-0000f850: 6220 6469 6374 0a20 2020 2020 2020 2020  b dict.         
-0000f860: 2020 2073 7570 6572 2844 4943 542c 2073     super(DICT, s
-0000f870: 656c 6629 2e5f 5f73 6574 6974 656d 5f5f  elf).__setitem__
-0000f880: 286b 6579 2c20 7661 6c75 6529 0a20 2020  (key, value).   
-0000f890: 2064 6566 2043 6428 7365 6c66 2c20 6b65   def Cd(self, ke
-0000f8a0: 792c 7379 6d62 6f6c 3d27 2f27 2c64 6566  y,symbol='/',def
-0000f8b0: 6175 6c74 3d46 616c 7365 293a 0a20 2020  ault=False):.   
-0000f8c0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0000f8d0: 6365 286b 6579 2c73 7472 293a 0a20 2020  ce(key,str):.   
-0000f8e0: 2020 2020 2020 2020 206b 6579 3d6b 6579           key=key
-0000f8f0: 2e73 706c 6974 2827 2f27 290a 2020 2020  .split('/').    
-0000f900: 2020 2020 2020 2020 6966 206b 6579 5b30          if key[0
-0000f910: 5d20 3d3d 2027 273a 2064 656c 206b 6579  ] == '': del key
-0000f920: 5b30 5d0a 2020 2020 2020 2020 6966 2069  [0].        if i
-0000f930: 7369 6e73 7461 6e63 6528 6b65 792c 286c  sinstance(key,(l
-0000f940: 6973 742c 7475 706c 6529 293a 0a20 2020  ist,tuple)):.   
-0000f950: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
-0000f960: 6e20 6b65 793a 0a20 2020 2020 2020 2020  n key:.         
-0000f970: 2020 2020 2020 2069 6620 6920 696e 2073         if i in s
-0000f980: 656c 663a 0a20 2020 2020 2020 2020 2020  elf:.           
-0000f990: 2020 2020 2020 2020 2073 656c 663d 7365           self=se
-0000f9a0: 6c66 5b69 5d0a 2020 2020 2020 2020 2020  lf[i].          
-0000f9b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000f9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f9d0: 7265 7475 726e 2020 6465 6661 756c 740a  return  default.
-0000f9e0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000f9f0: 726e 2073 656c 660a 2020 2020 2020 2020  rn self.        
-0000fa00: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-0000fa10: 2020 2064 6566 2054 7570 6c65 4469 6374     def TupleDict
-0000fa20: 2873 656c 662c 2a69 6e70 732c 2a2a 6f70  (self,*inps,**op
-0000fa30: 7473 293a 0a20 2020 2020 2020 2023 4d65  ts):.        #Me
-0000fa40: 7267 6520 2a69 6e70 7320 746f 2044 4943  rge *inps to DIC
-0000fa50: 5428 2920 6461 7461 0a20 2020 2020 2020  T() data.       
-0000fa60: 2065 7272 3d6f 7074 732e 6765 7428 2765   err=opts.get('e
-0000fa70: 7272 272c 4661 6c73 6529 0a20 2020 2020  rr',False).     
-0000fa80: 2020 2064 6566 6175 6c74 3d6f 7074 732e     default=opts.
-0000fa90: 6765 7428 2764 6566 6175 6c74 272c 4661  get('default',Fa
-0000faa0: 6c73 6529 0a20 2020 2020 2020 206f 7574  lse).        out
-0000fab0: 3d7b 7d0a 2020 2020 2020 2020 666f 7220  ={}.        for 
-0000fac0: 6920 696e 2069 6e70 733a 0a20 2020 2020  i in inps:.     
-0000fad0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0000fae0: 616e 6365 2869 2c74 7570 6c65 2920 616e  ance(i,tuple) an
-0000faf0: 6420 6c65 6e28 6929 203d 3d20 323a 0a20  d len(i) == 2:. 
-0000fb00: 2020 2020 2020 2020 2020 2020 2020 206b                 k
-0000fb10: 2c76 3d69 0a20 2020 2020 2020 2020 2020  ,v=i.           
-0000fb20: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0000fb30: 6365 2876 2c28 6469 6374 2c44 4943 5429  ce(v,(dict,DICT)
-0000fb40: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0000fb50: 2020 2020 2020 2076 3d64 6963 7428 7629         v=dict(v)
-0000fb60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fb70: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-0000fb80: 2876 2c74 7570 6c65 293a 0a20 2020 2020  (v,tuple):.     
-0000fb90: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-0000fba0: 3d73 656c 662e 5475 706c 6544 6963 7428  =self.TupleDict(
-0000fbb0: 762c 2a2a 6f70 7473 290a 2020 2020 2020  v,**opts).      
-0000fbc0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000fbd0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-0000fbe0: 762c 2864 6963 742c 4449 4354 2929 3a0a  v,(dict,DICT)):.
-0000fbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fc00: 2020 2020 2020 2020 6966 2065 7272 3a0a          if err:.
-0000fc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fc20: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000fc30: 726e 2044 6566 6175 6c74 2869 6e70 732c  rn Default(inps,
-0000fc40: 6465 6661 756c 7429 0a20 2020 2020 2020  default).       
-0000fc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fc60: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-0000fc70: 2020 2020 2020 2020 2020 6f75 745b 6b5d            out[k]
-0000fc80: 3d76 0a20 2020 2020 2020 2020 2020 2065  =v.            e
-0000fc90: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0000fca0: 2020 2020 2069 6620 6572 723a 0a20 2020       if err:.   
-0000fcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fcc0: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
-0000fcd0: 696e 7073 2c64 6566 6175 6c74 290a 2020  inps,default).  
-0000fce0: 2020 2020 2020 666f 7220 6b20 696e 206f        for k in o
-0000fcf0: 7574 3a0a 2020 2020 2020 2020 2020 2020  ut:.            
-0000fd00: 7365 6c66 2e5f 5f73 6574 6974 656d 5f5f  self.__setitem__
-0000fd10: 286b 2c6f 7574 5b6b 5d29 0a20 2020 2020  (k,out[k]).     
-0000fd20: 2020 2072 6574 7572 6e20 7365 6c66 0a20     return self. 
-0000fd30: 2020 2064 6566 2054 7570 6c65 2873 656c     def Tuple(sel
-0000fd40: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
-0000fd50: 726e 2074 7570 6c65 2873 656c 662e 6974  rn tuple(self.it
-0000fd60: 656d 7328 2929 0a20 2020 2064 6566 2047  ems()).    def G
-0000fd70: 6574 2873 656c 662c 2a69 6e70 732c 2a2a  et(self,*inps,**
-0000fd80: 6f70 7473 293a 0a20 2020 2020 2020 2069  opts):.        i
-0000fd90: 6620 6c65 6e28 696e 7073 2920 3d3d 2031  f len(inps) == 1
-0000fda0: 3a0a 2020 2020 2020 2020 2020 2020 6964  :.            id
-0000fdb0: 783d 696e 7073 5b30 5d0a 2020 2020 2020  x=inps[0].      
-0000fdc0: 2020 656c 6966 206c 656e 2869 6e70 7329    elif len(inps)
-0000fdd0: 203e 2031 3a0a 2020 2020 2020 2020 2020   > 1:.          
-0000fde0: 2020 6964 783d 696e 7073 5b3a 5d0a 2020    idx=inps[:].  
-0000fdf0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000fe00: 2020 2020 2020 2020 6964 783d 4e6f 6e65          idx=None
-0000fe10: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
-0000fe20: 3d6f 7074 732e 6765 7428 2764 6566 6175  =opts.get('defau
-0000fe30: 6c74 2729 0a20 2020 2020 2020 2065 7272  lt').        err
-0000fe40: 3d6f 7074 732e 6765 7428 2765 7272 272c  =opts.get('err',
-0000fe50: 6f70 7473 2e67 6574 2827 6572 726f 7227  opts.get('error'
-0000fe60: 2c46 616c 7365 2929 0a20 2020 2020 2020  ,False)).       
-0000fe70: 2066 696c 6c5f 7570 3d6f 7074 732e 6765   fill_up=opts.ge
-0000fe80: 7428 2766 696c 6c5f 7570 272c 275f 6641  t('fill_up','_fA
-0000fe90: 6c73 455f 2729 0a20 2020 2020 2020 2069  lsE_').        i
-0000fea0: 6478 5f6f 6e6c 793d 6f70 7473 2e67 6574  dx_only=opts.get
-0000feb0: 2827 6964 785f 6f6e 6c79 272c 6f70 7473  ('idx_only',opts
-0000fec0: 2e67 6574 2827 696e 6465 785f 6f6e 6c79  .get('index_only
-0000fed0: 272c 6f70 7473 2e67 6574 2827 6f72 6465  ',opts.get('orde
-0000fee0: 7227 2c46 616c 7365 2929 290a 2020 2020  r',False))).    
-0000fef0: 2020 2020 5f74 7970 653d 6f70 7473 2e67      _type=opts.g
-0000ff00: 6574 2827 5f74 7970 655f 272c 6f70 7473  et('_type_',opts
-0000ff10: 2e67 6574 2827 7479 7065 2729 290a 2020  .get('type')).  
-0000ff20: 2020 2020 2020 6f75 743d 6f70 7473 2e67        out=opts.g
-0000ff30: 6574 2827 6f75 7427 2c6f 7074 732e 6765  et('out',opts.ge
-0000ff40: 7428 276f 7574 5f66 6f72 6d27 2c27 7261  t('out_form','ra
-0000ff50: 7727 2929 0a20 2020 2020 2020 2070 6565  w')).        pee
-0000ff60: 6c3d 6f70 7473 2e67 6574 2827 7065 656c  l=opts.get('peel
-0000ff70: 2729 0a20 2020 2020 2020 2073 7472 6970  ').        strip
-0000ff80: 3d6f 7074 732e 6765 7428 2773 7472 6970  =opts.get('strip
-0000ff90: 272c 4661 6c73 6529 0a20 2020 2020 2020  ',False).       
-0000ffa0: 206f 6b2c 6e69 6478 3d49 6e64 6578 466f   ok,nidx=IndexFo
-0000ffb0: 726d 2869 6478 2c69 6478 5f6f 6e6c 793d  rm(idx,idx_only=
-0000ffc0: 4661 6c73 6529 0a20 2020 2020 2020 2069  False).        i
-0000ffd0: 6478 5f74 7970 653d 7479 7065 286e 6964  dx_type=type(nid
-0000ffe0: 7829 2e5f 5f6e 616d 655f 5f0a 2020 2020  x).__name__.    
-0000fff0: 2020 2020 6966 206f 6b20 6973 2054 7275      if ok is Tru
-00010000: 653a 0a20 2020 2020 2020 2020 2020 206f  e:.            o
-00010010: 626a 5f69 7465 6d73 3d6c 6973 7428 7365  bj_items=list(se
-00010020: 6c66 2e69 7465 6d73 2829 290a 2020 2020  lf.items()).    
-00010030: 2020 2020 2020 2020 6966 2069 6478 5f74          if idx_t
-00010040: 7970 6520 3d3d 2027 7475 706c 6527 3a20  ype == 'tuple': 
-00010050: 2352 616e 6765 2049 6e64 6578 0a20 2020  #Range Index.   
-00010060: 2020 2020 2020 2020 2020 2020 2073 733d               ss=
-00010070: 5f6f 626a 5f6d 6178 5f69 6478 5f28 6f62  _obj_max_idx_(ob
-00010080: 6a5f 6974 656d 732c 496e 7428 6e69 6478  j_items,Int(nidx
-00010090: 5b30 5d29 2c65 7272 290a 2020 2020 2020  [0]),err).      
-000100a0: 2020 2020 2020 2020 2020 6565 3d5f 6f62            ee=_ob
-000100b0: 6a5f 6d61 785f 6964 785f 286f 626a 5f69  j_max_idx_(obj_i
-000100c0: 7465 6d73 2c49 6e74 286e 6964 785b 315d  tems,Int(nidx[1]
-000100d0: 292c 6572 7229 0a20 2020 2020 2020 2020  ),err).         
-000100e0: 2020 2020 2020 2069 6620 5479 7065 2873         if Type(s
-000100f0: 732c 696e 7429 2061 6e64 2054 7970 6528  s,int) and Type(
-00010100: 6565 2c69 6e74 293a 0a20 2020 2020 2020  ee,int):.       
-00010110: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00010120: 7572 6e20 4449 4354 2864 6963 7428 6f62  urn DICT(dict(ob
-00010130: 6a5f 6974 656d 735b 7373 3a65 652b 315d  j_items[ss:ee+1]
-00010140: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
-00010150: 6c69 6620 6964 785f 7479 7065 203d 3d20  lif idx_type == 
-00010160: 276c 6973 7427 3a20 234f 5220 496e 6465  'list': #OR Inde
-00010170: 780a 2020 2020 2020 2020 2020 2020 2020  x.              
-00010180: 2020 7274 3d5b 5d0a 2020 2020 2020 2020    rt=[].        
-00010190: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-000101a0: 206e 6964 783a 0a20 2020 2020 2020 2020   nidx:.         
-000101b0: 2020 2020 2020 2020 2020 2069 6620 6964             if id
-000101c0: 785f 6f6e 6c79 3a0a 2020 2020 2020 2020  x_only:.        
-000101d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000101e0: 6978 3d5f 6f62 6a5f 6d61 785f 6964 785f  ix=_obj_max_idx_
-000101f0: 286f 626a 5f69 7465 6d73 2c49 6e74 2869  (obj_items,Int(i
-00010200: 2c64 6566 6175 6c74 3d46 616c 7365 2c65  ,default=False,e
-00010210: 7272 3d54 7275 6529 2c65 7272 290a 2020  rr=True),err).  
-00010220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010230: 2020 2020 2020 6966 2054 7970 6528 6978        if Type(ix
-00010240: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
-00010250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010260: 2020 2072 742e 6170 7065 6e64 286f 626a     rt.append(obj
-00010270: 5f69 7465 6d73 5b69 785d 290a 2020 2020  _items[ix]).    
-00010280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010290: 2020 2020 656c 6966 2066 696c 6c5f 7570      elif fill_up
-000102a0: 2021 3d20 275f 6641 6c73 455f 273a 0a20   != '_fAlsE_':. 
-000102b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000102c0: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
-000102d0: 7065 6e64 2866 696c 6c5f 7570 290a 2020  pend(fill_up).  
-000102e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000102f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00010300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010310: 743d 7365 6c66 2e67 6574 2869 290a 2020  t=self.get(i).  
-00010320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010330: 2020 2020 2020 6966 2074 2069 7320 6e6f        if t is no
-00010340: 7420 4e6f 6e65 3a20 7274 2e61 7070 656e  t None: rt.appen
-00010350: 6428 7429 0a20 2020 2020 2020 2020 2020  d(t).           
-00010360: 2020 2020 2072 6574 7572 6e20 4f75 7446       return OutF
-00010370: 6f72 6d61 7428 7274 2c6f 7574 3d6f 7574  ormat(rt,out=out
-00010380: 2c64 6566 6175 6c74 3d64 6566 6175 6c74  ,default=default
-00010390: 2c6f 7267 3d73 656c 662c 7065 656c 3d70  ,org=self,peel=p
-000103a0: 6565 6c2c 7374 7269 703d 7374 7269 7029  eel,strip=strip)
-000103b0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-000103c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000103d0: 2020 2069 6620 6964 785f 6f6e 6c79 3a0a     if idx_only:.
-000103e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000103f0: 2020 2020 6978 3d5f 6f62 6a5f 6d61 785f      ix=_obj_max_
-00010400: 6964 785f 286f 626a 5f69 7465 6d73 2c49  idx_(obj_items,I
-00010410: 6e74 2869 6478 292c 6572 7229 0a20 2020  nt(idx),err).   
-00010420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010430: 2069 6620 5479 7065 2869 782c 696e 7429   if Type(ix,int)
-00010440: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00010450: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00010460: 2044 4943 5428 6469 6374 2828 6f62 6a5f   DICT(dict((obj_
-00010470: 6974 656d 735b 6978 5d2c 2929 290a 2020  items[ix],))).  
-00010480: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00010490: 7475 726e 2073 656c 662e 6765 7428 6964  turn self.get(id
-000104a0: 782c 4465 6661 756c 7428 7365 6c66 2c64  x,Default(self,d
-000104b0: 6566 6175 6c74 2929 0a20 2020 2020 2020  efault)).       
-000104c0: 2065 6c69 6620 6f6b 2069 7320 4e6f 6e65   elif ok is None
-000104d0: 3a20 2350 6174 6820 496e 6465 780a 2020  : #Path Index.  
-000104e0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-000104f0: 696e 206e 6964 783a 0a20 2020 2020 2020  in nidx:.       
-00010500: 2020 2020 2020 2020 2069 6620 6920 6e6f           if i no
-00010510: 7420 696e 2073 656c 663a 2072 6574 7572  t in self: retur
-00010520: 6e20 4465 6661 756c 7428 7365 6c66 2c64  n Default(self,d
-00010530: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
-00010540: 2020 2020 2020 2020 7365 6c66 3d73 656c          self=sel
-00010550: 665b 695d 0a20 2020 2020 2020 2020 2020  f[i].           
-00010560: 2072 6574 7572 6e20 7365 6c66 0a20 2020   return self.   
-00010570: 2020 2020 2072 6574 7572 6e20 4465 6661       return Defa
-00010580: 756c 7428 7365 6c66 2c64 6566 6175 6c74  ult(self,default
-00010590: 290a 0a20 2020 2023 206d 616b 6520 646f  )..    # make do
-000105a0: 7420 6469 6374 0a20 2020 205f 5f73 6574  t dict.    __set
-000105b0: 6174 7472 5f5f 2c20 5f5f 6765 7461 7474  attr__, __getatt
-000105c0: 725f 5f20 3d20 5f5f 7365 7469 7465 6d5f  r__ = __setitem_
-000105d0: 5f2c 205f 5f67 6574 6974 656d 5f5f 0a0a  _, __getitem__..
-000105e0: 6465 6620 4469 6374 282a 696e 702c 6465  def Dict(*inp,de
-000105f0: 6570 636f 7079 3d46 616c 7365 2c63 6f70  epcopy=False,cop
-00010600: 793d 4661 6c73 652c 2a2a 6f70 7429 3a0a  y=False,**opt):.
-00010610: 2020 2020 2727 270a 2020 2020 4469 6374      '''.    Dict
-00010620: 696f 6e61 7279 0a20 2020 202d 2044 6566  ionary.    - Def
-00010630: 696e 650a 2020 2020 2d20 6d61 7267 650a  ine.    - marge.
-00010640: 2020 2020 2d20 5570 6461 7465 0a20 2020      - Update.   
-00010650: 202d 2041 7070 656e 640a 2020 2020 7375   - Append.    su
-00010660: 7070 6f72 7420 3a20 4469 6374 2c20 6c69  pport : Dict, li
-00010670: 7374 206f 7220 7475 706c 6520 7769 7468  st or tuple with
-00010680: 2032 2064 6174 612c 2064 6963 745f 6974   2 data, dict_it
-00010690: 656d 732c 2044 6a61 6e67 6f20 7265 7175  ems, Django requ
-000106a0: 6573 742e 6461 7461 2c20 7265 7175 6573  est.data, reques
-000106b0: 7420 6461 7461 2c20 6c69 6b65 2070 6174  t data, like pat
-000106c0: 6820 7479 7065 206c 6973 7428 5b28 272f  h type list([('/
-000106d0: 612f 6227 2c32 292c 2827 2f61 2f63 272c  a/b',2),('/a/c',
-000106e0: 3329 2c2e 2e2e 5d29 2c20 6b44 6963 740a  3),...]), kDict.
-000106f0: 2020 2020 2727 270a 2020 2020 7372 633d      '''.    src=
-00010700: 7b7d 0a20 2020 2069 6620 6c65 6e28 696e  {}.    if len(in
-00010710: 7029 203e 3d20 313a 0a20 2020 2020 2020  p) >= 1:.       
-00010720: 2069 6620 6465 6570 636f 7079 206f 7220   if deepcopy or 
-00010730: 636f 7079 3a0a 2020 2020 2020 2020 2020  copy:.          
-00010740: 2020 7372 633d 436f 7079 2869 6e70 5b30    src=Copy(inp[0
-00010750: 5d2c 6465 6570 3d64 6565 7063 6f70 7929  ],deep=deepcopy)
-00010760: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00010770: 2020 2020 2020 2020 2020 2073 7263 3d69             src=i
-00010780: 6e70 5b30 5d0a 2020 2020 7372 635f 7479  np[0].    src_ty
-00010790: 7065 3d54 7970 654e 616d 6528 7372 6329  pe=TypeName(src)
-000107a0: 0a20 2020 2069 6620 7372 635f 7479 7065  .    if src_type
-000107b0: 2069 6e20 5b27 496d 6d75 7461 626c 654d   in ['ImmutableM
-000107c0: 756c 7469 4469 6374 275d 3a0a 2020 2020  ultiDict']:.    
-000107d0: 2020 2020 6966 206c 656e 2873 7263 2920      if len(src) 
-000107e0: 3e20 303a 0a20 2020 2020 2020 2020 2020  > 0:.           
-000107f0: 2074 6d70 3d7b 7d0a 2020 2020 2020 2020   tmp={}.        
-00010800: 2020 2020 666f 7220 6969 2069 6e20 7372      for ii in sr
-00010810: 633a 0a20 2020 2020 2020 2020 2020 2020  c:.             
-00010820: 2020 2074 6d70 5b69 695d 3d73 7263 5b69     tmp[ii]=src[i
-00010830: 695d 0a20 2020 2020 2020 2020 2020 2073  i].            s
-00010840: 7263 3d74 6d70 0a20 2020 2065 6c69 6620  rc=tmp.    elif 
-00010850: 6973 696e 7374 616e 6365 2873 7263 2c64  isinstance(src,d
-00010860: 6963 7429 3a0a 2020 2020 2020 2020 6966  ict):.        if
-00010870: 2073 7263 5f74 7970 6520 3d3d 2027 5175   src_type == 'Qu
-00010880: 6572 7944 6963 7427 3a20 2320 5570 6461  eryDict': # Upda
-00010890: 7465 2064 6174 6120 6174 2072 6571 7565  te data at reque
-000108a0: 7374 2e64 6174 6120 6f66 2044 6a61 6e67  st.data of Djang
-000108b0: 6f0a 2020 2020 2020 2020 2020 2020 7472  o.            tr
-000108c0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-000108d0: 2020 2073 7263 2e5f 6d75 7461 626c 653d     src._mutable=
-000108e0: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-000108f0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00010900: 2020 2020 2020 2020 2053 7464 4572 7228           StdErr(
-00010910: 2273 7263 2851 7565 7279 4469 6374 2920  "src(QueryDict) 
-00010920: 6e6f 7420 7375 7070 6f72 7420 5f6d 7574  not support _mut
-00010930: 6162 6c65 3d54 7275 6520 7061 7261 6d65  able=True parame
-00010940: 7465 725c 6e22 290a 2020 2020 2020 2020  ter\n").        
-00010950: 666f 7220 6465 7374 2069 6e20 696e 705b  for dest in inp[
-00010960: 313a 5d3a 0a20 2020 2020 2020 2020 2020  1:]:.           
-00010970: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00010980: 6365 2864 6573 742c 6469 6374 293a 2063  ce(dest,dict): c
-00010990: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-000109a0: 2020 2020 666f 7220 6920 696e 2064 6573      for i in des
-000109b0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-000109c0: 2020 2069 6620 6920 696e 2073 7263 2061     if i in src a
-000109d0: 6e64 2069 7369 6e73 7461 6e63 6528 7372  nd isinstance(sr
-000109e0: 635b 695d 2c64 6963 7429 2061 6e64 2069  c[i],dict) and i
-000109f0: 7369 6e73 7461 6e63 6528 6465 7374 5b69  sinstance(dest[i
-00010a00: 5d2c 6469 6374 293a 0a20 2020 2020 2020  ],dict):.       
-00010a10: 2020 2020 2020 2020 2020 2020 2073 7263               src
-00010a20: 5b69 5d3d 4469 6374 2873 7263 5b69 5d2c  [i]=Dict(src[i],
-00010a30: 6465 7374 5b69 5d29 0a20 2020 2020 2020  dest[i]).       
-00010a40: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00010a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010a60: 2020 2073 7263 5b69 5d3d 6465 7374 5b69     src[i]=dest[i
-00010a70: 5d0a 2020 2020 656c 6966 2073 7263 5f74  ].    elif src_t
-00010a80: 7970 6520 696e 205b 2764 6963 745f 6974  ype in ['dict_it
-00010a90: 656d 7327 5d3a 0a20 2020 2020 2020 2073  ems']:.        s
-00010aa0: 7263 3d64 6963 7428 7372 6329 0a20 2020  rc=dict(src).   
-00010ab0: 2065 6c69 6620 7372 635f 7479 7065 2069   elif src_type i
-00010ac0: 6e20 5b27 6b44 6963 7427 5d3a 0a20 2020  n ['kDict']:.   
-00010ad0: 2020 2020 2073 7263 3d73 7263 2e47 6574       src=src.Get
-00010ae0: 2829 0a20 2020 2065 6c69 6620 7372 635f  ().    elif src_
-00010af0: 7479 7065 2069 6e20 5b27 6c69 7374 272c  type in ['list',
-00010b00: 2774 7570 6c65 275d 3a0a 2020 2020 2020  'tuple']:.      
-00010b10: 2020 746d 703d 7b7d 0a20 2020 2020 2020    tmp={}.       
-00010b20: 2066 6f72 2069 6920 696e 2073 7263 3a0a   for ii in src:.
-00010b30: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00010b40: 7369 6e73 7461 6e63 6528 6969 2c74 7570  sinstance(ii,tup
-00010b50: 6c65 2920 616e 6420 6c65 6e28 6969 2920  le) and len(ii) 
-00010b60: 3d3d 2032 3a0a 2020 2020 2020 2020 2020  == 2:.          
-00010b70: 2020 2020 2020 6966 2069 695b 305d 5b30        if ii[0][0
-00010b80: 5d20 3d3d 2027 2f27 3a0a 2020 2020 2020  ] == '/':.      
-00010b90: 2020 2020 2020 2020 2020 2020 2020 7372                sr
-00010ba0: 635f 613d 6969 5b30 5d2e 7370 6c69 7428  c_a=ii[0].split(
-00010bb0: 272f 2729 5b31 3a5d 0a20 2020 2020 2020  '/')[1:].       
-00010bc0: 2020 2020 2020 2020 2020 2020 2074 743d               tt=
-00010bd0: 746d 700a 2020 2020 2020 2020 2020 2020  tmp.            
-00010be0: 2020 2020 2020 2020 666f 7220 6b6b 2069          for kk i
-00010bf0: 6e20 7372 635f 615b 3a2d 315d 3a0a 2020  n src_a[:-1]:.  
-00010c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010c10: 2020 2020 2020 6966 206b 6b20 6e6f 7420        if kk not 
-00010c20: 696e 2074 743a 2074 745b 6b6b 5d3d 7b7d  in tt: tt[kk]={}
-00010c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010c40: 2020 2020 2020 2020 2074 743d 7474 5b6b           tt=tt[k
-00010c50: 6b5d 0a20 2020 2020 2020 2020 2020 2020  k].             
-00010c60: 2020 2020 2020 2074 745b 7372 635f 615b         tt[src_a[
-00010c70: 2d31 5d5d 3d69 695b 315d 0a20 2020 2020  -1]]=ii[1].     
-00010c80: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00010c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010ca0: 2020 2020 2074 6d70 5b69 695b 305d 5d3d       tmp[ii[0]]=
-00010cb0: 6969 5b31 5d0a 2020 2020 2020 2020 7372  ii[1].        sr
-00010cc0: 633d 746d 700a 2020 2020 656c 7365 3a0a  c=tmp.    else:.
-00010cd0: 2020 2020 2020 2020 7372 633d 7b7d 0a20          src={}. 
-00010ce0: 2020 2023 5570 6461 7465 2045 7874 7261     #Update Extra
-00010cf0: 2069 6e70 7574 730a 2020 2020 666f 7220   inputs.    for 
-00010d00: 6578 7420 696e 2069 6e70 5b31 3a5d 3a0a  ext in inp[1:]:.
-00010d10: 2020 2020 2020 2020 6578 7472 613d 4469          extra=Di
-00010d20: 6374 2865 7874 290a 2020 2020 2020 2020  ct(ext).        
-00010d30: 6966 2054 7970 6528 6578 7472 612c 6469  if Type(extra,di
-00010d40: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
-00010d50: 2073 7263 2e75 7064 6174 6528 6578 7472   src.update(extr
-00010d60: 6129 0a20 2020 2023 5570 6461 7465 2045  a).    #Update E
-00010d70: 7874 7261 206f 7074 696f 6e20 6461 7461  xtra option data
-00010d80: 0a20 2020 2069 6620 6f70 743a 0a20 2020  .    if opt:.   
-00010d90: 2020 2020 2066 6f72 2069 2069 6e20 6f70       for i in op
-00010da0: 743a 0a20 2020 2020 2020 2020 2020 2069  t:.            i
-00010db0: 6620 6920 696e 2073 7263 2061 6e64 2069  f i in src and i
-00010dc0: 7369 6e73 7461 6e63 6528 7372 635b 695d  sinstance(src[i]
-00010dd0: 2c64 6963 7429 2061 6e64 2069 7369 6e73  ,dict) and isins
-00010de0: 7461 6e63 6528 6f70 745b 695d 2c64 6963  tance(opt[i],dic
-00010df0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00010e00: 2020 2020 7372 635b 695d 3d44 6963 7428      src[i]=Dict(
-00010e10: 7372 635b 695d 2c6f 7074 5b69 5d29 0a20  src[i],opt[i]). 
-00010e20: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00010e30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010e40: 2073 7263 5b69 5d3d 6f70 745b 695d 0a20   src[i]=opt[i]. 
-00010e50: 2020 2072 6574 7572 6e20 7372 630a 0a64     return src..d
-00010e60: 6566 2043 6f6d 7056 6572 7369 6f6e 282a  ef CompVersion(*
-00010e70: 696e 702c 2a2a 6f70 7473 293a 0a20 2020  inp,**opts):.   
-00010e80: 2027 2727 0a20 2020 2069 6e70 7574 3a20   '''.    input: 
-00010e90: 736f 7572 6365 2c20 636f 6d70 6172 655f  source, compare_
-00010ea0: 7379 6d62 6f6c 283e 782c 3c78 2c3d 3d2c  symbol(>x,<x,==,
-00010eb0: 2178 7829 2c20 6465 7374 696e 6174 696f  !xx), destinatio
-00010ec0: 6e0a 2020 2020 2020 7265 7475 726e 2042  n.      return B
-00010ed0: 4f4f 4c0a 2020 2020 696e 7075 743a 2073  OOL.    input: s
-00010ee0: 6f75 7263 652c 2064 6573 7469 6e61 7469  ource, destinati
-00010ef0: 6f6e 2c20 636f 6d70 6172 655f 7379 6d62  on, compare_symb
-00010f00: 6f6c 3d27 3e78 2c3c 782c 3d3d 2c21 7878  ol='>x,<x,==,!xx
-00010f10: 270a 2020 2020 2020 7265 7475 726e 2042  '.      return B
-00010f20: 4f4f 4c0a 2020 2020 696e 7075 743a 2073  OOL.    input: s
-00010f30: 6f75 7263 652c 2064 6573 7469 6e61 7469  ource, destinati
-00010f40: 6f6e 0a20 2020 2020 202d 2077 6974 686f  on.      - witho
-00010f50: 7574 2063 6f6d 7061 7265 5f73 796d 626f  ut compare_symbo
-00010f60: 6c0a 2020 2020 2020 2d20 6f75 743d 7379  l.      - out=sy
-00010f70: 6d20 2020 2020 203a 2072 6574 7572 6e20  m      : return 
-00010f80: 7379 6d62 6f6c 2028 3e2c 203d 3d2c 203c  symbol (>, ==, <
-00010f90: 2920 2028 6465 6661 756c 7429 0a20 2020  )  (default).   
-00010fa0: 2020 202d 206f 7574 3d69 6e74 2020 2020     - out=int    
-00010fb0: 2020 3a20 7265 7475 726e 2031 283e 292c    : return 1(>),
-00010fc0: 2030 283d 3d29 2c20 2d31 283c 290a 2020   0(==), -1(<).  
-00010fd0: 2020 2020 2d20 6f75 743d 7374 7220 2020      - out=str   
-00010fe0: 2020 203a 2072 6574 7572 6e20 6269 6767     : return bigg
-00010ff0: 6572 283e 292c 2073 616d 6528 3d3d 292c  er(>), same(==),
-00011000: 206c 6f77 6572 283c 290a 2020 2020 696e   lower(<).    in
-00011010: 7075 743a 2073 6f75 7263 650a 2020 2020  put: source.    
-00011020: 2020 2d20 6f75 743d 7374 7220 2020 2020    - out=str     
-00011030: 203a 2072 6574 7572 6e20 2733 2e30 2e31   : return '3.0.1
-00011040: 2720 2864 6566 6175 6c74 290a 2020 2020  ' (default).    
-00011050: 2020 2d20 6f75 743d 7475 706c 6520 2020    - out=tuple   
-00011060: 203a 2072 6574 7572 6e20 746f 2074 7570   : return to tup
-00011070: 6c65 2074 7970 6520 2833 2c30 2c31 290a  le type (3,0,1).
-00011080: 2020 2020 2020 2d20 6f75 743d 6c69 7374        - out=list
-00011090: 2020 2020 203a 2072 6574 7572 6e20 746f       : return to
-000110a0: 206c 6973 7420 7479 7065 205b 332c 302c   list type [3,0,
-000110b0: 315d 0a20 2020 2076 6572 7369 6f6e 5f73  1].    version_s
-000110c0: 796d 626f 6c20 6f72 2073 796d 626f 6c20  ymbol or symbol 
-000110d0: 3a20 6465 6661 756c 7420 272e 270a 0a20  : default '.'.. 
-000110e0: 2020 2073 6f72 7420 6c69 7374 0a20 2020     sort list.   
-000110f0: 203c 6c69 7374 3e2e 736f 7274 286b 6579   <list>.sort(key
-00011100: 3d43 6f6d 7056 6572 7369 6f6e 2920 206f  =CompVersion)  o
-00011110: 7220 736f 7274 6564 283c 6c69 7374 3e2c  r sorted(<list>,
-00011120: 6b65 793d 436f 6d70 5665 7273 696f 6e29  key=CompVersion)
-00011130: 0a20 2020 2027 2727 0a20 2020 2076 6572  .    '''.    ver
-00011140: 7369 6f6e 5f73 796d 626f 6c3d 6f70 7473  sion_symbol=opts
-00011150: 2e67 6574 2827 7665 7273 696f 6e5f 7379  .get('version_sy
-00011160: 6d62 6f6c 272c 6f70 7473 2e67 6574 2827  mbol',opts.get('
-00011170: 7379 6d62 6f6c 272c 272e 2729 290a 2020  symbol','.')).  
-00011180: 2020 636f 6d70 6172 655f 7379 6d62 6f6c    compare_symbol
-00011190: 3d6f 7074 732e 6765 7428 2763 6f6d 7061  =opts.get('compa
-000111a0: 7265 5f73 796d 626f 6c27 2c6f 7074 732e  re_symbol',opts.
-000111b0: 6765 7428 2763 6f6d 7061 7265 2729 290a  get('compare')).
-000111c0: 2020 2020 6966 2063 6f6d 7061 7265 5f73      if compare_s
-000111d0: 796d 626f 6c20 3d3d 2027 6973 273a 2063  ymbol == 'is': c
-000111e0: 6f6d 7061 7265 5f73 796d 626f 6c3d 273d  ompare_symbol='=
-000111f0: 3d27 0a20 2020 2065 6c69 6620 636f 6d70  ='.    elif comp
-00011200: 6172 655f 7379 6d62 6f6c 203d 3d20 2769  are_symbol == 'i
-00011210: 7320 6e6f 7427 3a20 636f 6d70 6172 655f  s not': compare_
-00011220: 7379 6d62 6f6c 3d27 213d 270a 2020 2020  symbol='!='.    
-00011230: 6f75 743d 6f70 7473 2e67 6574 2827 6f75  out=opts.get('ou
-00011240: 7427 2c6f 7074 732e 6765 7428 276f 7574  t',opts.get('out
-00011250: 7075 7427 2c73 7472 2929 0a20 2020 2064  put',str)).    d
-00011260: 6566 205f 636c 6561 6e5f 2861 293a 0a20  ef _clean_(a):. 
-00011270: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00011280: 7261 6e67 6528 302c 6c65 6e28 6129 293a  range(0,len(a)):
-00011290: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000112a0: 615b 695d 203d 3d20 2727 3a20 615b 695d  a[i] == '': a[i]
-000112b0: 3d30 0a20 2020 2020 2020 2066 6f72 2069  =0.        for i
-000112c0: 2069 6e20 7261 6e67 6528 6c65 6e28 6129   in range(len(a)
-000112d0: 2d31 2c30 2c2d 3129 3a0a 2020 2020 2020  -1,0,-1):.      
-000112e0: 2020 2020 2020 6966 2069 203e 2031 2061        if i > 1 a
-000112f0: 6e64 2061 5b69 5d20 3d3d 2030 2061 6e64  nd a[i] == 0 and
-00011300: 2061 5b69 2d31 5d3d 3d30 3a0a 2020 2020   a[i-1]==0:.    
-00011310: 2020 2020 2020 2020 2020 2020 612e 706f              a.po
-00011320: 7028 6929 0a20 2020 2020 2020 2072 6574  p(i).        ret
-00011330: 7572 6e20 610a 2020 2020 6465 6620 436f  urn a.    def Co
-00011340: 6d70 2873 7263 2c64 6573 7429 3a0a 2020  mp(src,dest):.  
-00011350: 2020 2020 2020 6c65 6e5f 7372 633d 6c65        len_src=le
-00011360: 6e28 7372 6329 0a20 2020 2020 2020 206c  n(src).        l
-00011370: 656e 5f64 6573 743d 6c65 6e28 6465 7374  en_dest=len(dest
-00011380: 290a 2020 2020 2020 2020 6269 6767 6572  ).        bigger
-00011390: 3d6c 656e 5f64 6573 7420 6966 206c 656e  =len_dest if len
-000113a0: 5f64 6573 7420 3e20 6c65 6e5f 7372 6320  _dest > len_src 
-000113b0: 656c 7365 206c 656e 5f73 7263 0a20 2020  else len_src.   
-000113c0: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-000113d0: 6e67 6528 302c 6269 6767 6572 293a 0a20  nge(0,bigger):. 
-000113e0: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
-000113f0: 3c20 6c65 6e5f 7372 6320 616e 6420 6920  < len_src and i 
-00011400: 3c20 6c65 6e5f 6465 7374 3a0a 2020 2020  < len_dest:.    
-00011410: 2020 2020 2020 2020 2020 2020 7373 3d73              ss=s
-00011420: 7263 5b69 5d0a 2020 2020 2020 2020 2020  rc[i].          
-00011430: 2020 2020 2020 6464 3d64 6573 745b 695d        dd=dest[i]
-00011440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011450: 2069 6620 7479 7065 2873 7329 2021 3d20   if type(ss) != 
-00011460: 7479 7065 2864 6429 3a0a 2020 2020 2020  type(dd):.      
-00011470: 2020 2020 2020 2020 2020 2020 2020 7373                ss
-00011480: 3d53 7472 2873 7263 5b69 5d29 0a20 2020  =Str(src[i]).   
-00011490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000114a0: 2064 643d 5374 7228 6465 7374 5b69 5d29   dd=Str(dest[i])
-000114b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000114c0: 2069 6620 7373 203e 2064 643a 0a20 2020   if ss > dd:.   
-000114d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000114e0: 2072 6574 7572 6e20 310a 2020 2020 2020   return 1.      
-000114f0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
-00011500: 7320 3c20 6464 3a0a 2020 2020 2020 2020  s < dd:.        
-00011510: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00011520: 726e 202d 310a 2020 2020 2020 2020 2020  rn -1.          
-00011530: 2020 656c 6966 2069 203c 206c 656e 5f73    elif i < len_s
-00011540: 7263 3a0a 2020 2020 2020 2020 2020 2020  rc:.            
-00011550: 2020 2020 7265 7475 726e 2031 0a20 2020      return 1.   
-00011560: 2020 2020 2020 2020 2065 6c69 6620 6920           elif i 
-00011570: 3c20 6c65 6e5f 6465 7374 3a0a 2020 2020  < len_dest:.    
-00011580: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00011590: 726e 202d 310a 2020 2020 2020 2020 7265  rn -1.        re
-000115a0: 7475 726e 2030 0a20 2020 2064 6566 204d  turn 0.    def M
-000115b0: 6b56 6572 4c69 7374 2873 7263 2c76 6572  kVerList(src,ver
-000115c0: 7369 6f6e 5f73 796d 626f 6c29 3a0a 2020  sion_symbol):.  
-000115d0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-000115e0: 6e63 6528 7372 632c 6469 6374 293a 2073  nce(src,dict): s
-000115f0: 7263 3d73 7263 2e67 6574 2827 7665 7273  rc=src.get('vers
-00011600: 696f 6e27 2c73 7263 2e67 6574 2827 5f5f  ion',src.get('__
-00011610: 7665 7273 696f 6e5f 5f27 2929 0a20 2020  version__')).   
-00011620: 2020 2020 2069 6620 5479 7065 2873 7263       if Type(src
-00011630: 2c28 2773 7472 272c 2762 7974 6573 2729  ,('str','bytes')
-00011640: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-00011650: 7263 3d53 7472 2873 7263 292e 7370 6c69  rc=Str(src).spli
-00011660: 7428 7665 7273 696f 6e5f 7379 6d62 6f6c  t(version_symbol
-00011670: 290a 2020 2020 2020 2020 656c 6966 2054  ).        elif T
-00011680: 7970 6528 7372 632c 2827 696e 7427 2c27  ype(src,('int','
-00011690: 666c 6f61 7427 2929 3a0a 2020 2020 2020  float')):.      
-000116a0: 2020 2020 2020 7372 633d 5b73 7263 5d0a        src=[src].
-000116b0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-000116c0: 6e73 7461 6e63 6528 7372 632c 2074 7570  nstance(src, tup
-000116d0: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
-000116e0: 2073 7263 3d6c 6973 7428 7372 6329 0a20   src=list(src). 
-000116f0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00011700: 616e 6365 2873 7263 2c6c 6973 7429 3a0a  ance(src,list):.
-00011710: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00011720: 726e 2074 7570 6c65 285f 636c 6561 6e5f  rn tuple(_clean_
-00011730: 285b 2049 6e74 2869 2920 666f 7220 6920  ([ Int(i) for i 
-00011740: 696e 2073 7263 205d 2929 0a20 2020 2073  in src ])).    s
-00011750: 7263 3d5b 5d0a 2020 2020 6465 7374 3d5b  rc=[].    dest=[
-00011760: 5d0a 2020 2020 6966 206c 656e 2869 6e70  ].    if len(inp
-00011770: 2920 3d3d 2031 3a0a 2020 2020 2020 2020  ) == 1:.        
-00011780: 7665 725f 7475 706c 653d 4d6b 5665 724c  ver_tuple=MkVerL
-00011790: 6973 7428 696e 705b 305d 2c76 6572 7369  ist(inp[0],versi
-000117a0: 6f6e 5f73 796d 626f 6c29 0a20 2020 2020  on_symbol).     
-000117b0: 2020 2069 6620 6f75 7420 696e 205b 7374     if out in [st
-000117c0: 722c 2773 7472 275d 3a0a 2020 2020 2020  r,'str']:.      
-000117d0: 2020 2020 2020 7265 7475 726e 2027 2e27        return '.'
-000117e0: 2e6a 6f69 6e28 5b53 7472 2869 2920 666f  .join([Str(i) fo
-000117f0: 7220 6920 696e 2076 6572 5f74 7570 6c65  r i in ver_tuple
-00011800: 5d29 0a20 2020 2020 2020 2065 6c69 6620  ]).        elif 
-00011810: 6f75 7420 696e 205b 6c69 7374 2c27 6c69  out in [list,'li
-00011820: 7374 275d 3a0a 2020 2020 2020 2020 2020  st']:.          
-00011830: 2020 7265 7475 726e 206c 6973 7428 7665    return list(ve
-00011840: 725f 7475 706c 6529 0a20 2020 2020 2020  r_tuple).       
-00011850: 2072 6574 7572 6e20 7665 725f 7475 706c   return ver_tupl
-00011860: 650a 2020 2020 656c 6966 206c 656e 2869  e.    elif len(i
-00011870: 6e70 2920 3d3d 2032 3a0a 2020 2020 2020  np) == 2:.      
-00011880: 2020 7372 633d 4d6b 5665 724c 6973 7428    src=MkVerList(
-00011890: 696e 705b 305d 2c76 6572 7369 6f6e 5f73  inp[0],version_s
-000118a0: 796d 626f 6c29 0a20 2020 2020 2020 2064  ymbol).        d
-000118b0: 6573 743d 4d6b 5665 724c 6973 7428 696e  est=MkVerList(in
-000118c0: 705b 315d 2c76 6572 7369 6f6e 5f73 796d  p[1],version_sym
-000118d0: 626f 6c29 0a20 2020 2065 6c69 6620 6c65  bol).    elif le
-000118e0: 6e28 696e 7029 203d 3d20 333a 0a20 2020  n(inp) == 3:.   
-000118f0: 2020 2020 2073 7263 3d4d 6b56 6572 4c69       src=MkVerLi
-00011900: 7374 2869 6e70 5b30 5d2c 7665 7273 696f  st(inp[0],versio
-00011910: 6e5f 7379 6d62 6f6c 290a 2020 2020 2020  n_symbol).      
-00011920: 2020 636f 6d70 6172 655f 7379 6d62 6f6c    compare_symbol
-00011930: 3d69 6e70 5b31 5d0a 2020 2020 2020 2020  =inp[1].        
-00011940: 6465 7374 3d4d 6b56 6572 4c69 7374 2869  dest=MkVerList(i
-00011950: 6e70 5b32 5d2c 7665 7273 696f 6e5f 7379  np[2],version_sy
-00011960: 6d62 6f6c 290a 2020 2020 6966 2073 7263  mbol).    if src
-00011970: 2061 6e64 2064 6573 743a 0a20 2020 2020   and dest:.     
-00011980: 2020 2063 633d 436f 6d70 2873 7263 2c64     cc=Comp(src,d
-00011990: 6573 7429 0a20 2020 2020 2020 2069 6620  est).        if 
-000119a0: 6973 696e 7374 616e 6365 2863 6f6d 7061  isinstance(compa
-000119b0: 7265 5f73 796d 626f 6c2c 7374 7229 2061  re_symbol,str) a
-000119c0: 6e64 2063 6f6d 7061 7265 5f73 796d 626f  nd compare_symbo
-000119d0: 6c3a 0a20 2020 2020 2020 2020 2020 2072  l:.            r
-000119e0: 6576 3d46 616c 7365 0a20 2020 2020 2020  ev=False.       
-000119f0: 2020 2020 2069 6620 2721 2720 696e 2063       if '!' in c
-00011a00: 6f6d 7061 7265 5f73 796d 626f 6c3a 2072  ompare_symbol: r
-00011a10: 6576 3d54 7275 650a 2020 2020 2020 2020  ev=True.        
-00011a20: 2020 2020 6966 2063 6320 3d3d 2030 3a0a      if cc == 0:.
-00011a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a40: 6966 2027 3d27 2069 6e20 636f 6d70 6172  if '=' in compar
-00011a50: 655f 7379 6d62 6f6c 3a0a 2020 2020 2020  e_symbol:.      
-00011a60: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00011a70: 7475 726e 2046 616c 7365 2069 6620 7265  turn False if re
-00011a80: 7620 656c 7365 2054 7275 650a 2020 2020  v else True.    
-00011a90: 2020 2020 2020 2020 656c 6966 2063 6320          elif cc 
-00011aa0: 3d3d 2031 3a0a 2020 2020 2020 2020 2020  == 1:.          
-00011ab0: 2020 2020 2020 6966 2027 3e27 2069 6e20        if '>' in 
-00011ac0: 636f 6d70 6172 655f 7379 6d62 6f6c 3a0a  compare_symbol:.
-00011ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ae0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-00011af0: 2069 6620 7265 7620 656c 7365 2054 7275   if rev else Tru
-00011b00: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00011b10: 2020 6966 2072 6576 3a20 7265 7475 726e    if rev: return
-00011b20: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-00011b30: 2020 656c 6966 2063 6320 3d3d 202d 313a    elif cc == -1:
-00011b40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011b50: 2069 6620 273c 2720 696e 2063 6f6d 7061   if '<' in compa
-00011b60: 7265 5f73 796d 626f 6c3a 0a20 2020 2020  re_symbol:.     
-00011b70: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00011b80: 6574 7572 6e20 4661 6c73 6520 6966 2072  eturn False if r
-00011b90: 6576 2065 6c73 6520 5472 7565 0a20 2020  ev else True.   
-00011ba0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00011bb0: 5472 7565 2069 6620 7265 7620 656c 7365  True if rev else
-00011bc0: 2046 616c 7365 0a20 2020 2020 2020 2065   False.        e
-00011bd0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00011be0: 2069 6620 6f75 7420 696e 205b 696e 742c   if out in [int,
-00011bf0: 2769 6e74 272c 2769 6e74 6567 6572 272c  'int','integer',
-00011c00: 276e 756d 275d 3a20 7265 7475 726e 2063  'num']: return c
-00011c10: 630a 2020 2020 2020 2020 2020 2020 6966  c.            if
-00011c20: 2063 6320 3e20 303a 0a20 2020 2020 2020   cc > 0:.       
-00011c30: 2020 2020 2020 2020 2069 6620 6f75 7420           if out 
-00011c40: 696e 205b 7374 722c 2773 7472 272c 2773  in [str,'str','s
-00011c50: 7472 696e 6727 5d3a 2072 6574 7572 6e20  tring']: return 
-00011c60: 2762 6967 6765 7228 3e29 270a 2020 2020  'bigger(>)'.    
-00011c70: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00011c80: 726e 2027 3e27 0a20 2020 2020 2020 2020  rn '>'.         
-00011c90: 2020 2065 6c69 6620 6363 203c 2030 3a0a     elif cc < 0:.
-00011ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011cb0: 6966 206f 7574 2069 6e20 5b73 7472 2c27  if out in [str,'
-00011cc0: 7374 7227 2c27 7374 7269 6e67 275d 3a20  str','string']: 
-00011cd0: 7265 7475 726e 2027 6c6f 7765 7228 3c29  return 'lower(<)
-00011ce0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-00011cf0: 2020 7265 7475 726e 2027 3c27 0a20 2020    return '<'.   
-00011d00: 2020 2020 2020 2020 2069 6620 6f75 7420           if out 
-00011d10: 696e 205b 7374 722c 2773 7472 272c 2773  in [str,'str','s
-00011d20: 7472 696e 6727 5d3a 2072 6574 7572 6e20  tring']: return 
-00011d30: 2773 616d 6528 3d29 270a 2020 2020 2020  'same(=)'.      
-00011d40: 2020 2020 2020 7265 7475 726e 2027 3d3d        return '==
-00011d50: 270a 0a0a 6465 6620 4d6f 6456 6572 7369  '...def ModVersi
-00011d60: 6f6e 286d 6f64 293a 0a20 2020 2027 2727  on(mod):.    '''
-00011d70: 0a20 2020 2046 696e 6420 4d6f 6475 6c65  .    Find Module
-00011d80: 2056 6572 7369 6f6e 0a20 2020 2027 2727   Version.    '''
-00011d90: 0a20 2020 2069 6620 5079 5665 7228 332c  .    if PyVer(3,
-00011da0: 382c 273c 2729 3a20 0a20 2020 2020 2020  8,'<'): .       
-00011db0: 2069 6d70 6f72 7420 706b 675f 7265 736f   import pkg_reso
-00011dc0: 7572 6365 730a 2020 2020 2020 2020 7472  urces.        tr
-00011dd0: 793a 0a20 2020 2020 2020 2020 2020 2072  y:.            r
-00011de0: 6574 7572 6e20 706b 675f 7265 736f 7572  eturn pkg_resour
-00011df0: 6365 732e 6765 745f 6469 7374 7269 6275  ces.get_distribu
-00011e00: 7469 6f6e 286d 6f64 292e 7665 7273 696f  tion(mod).versio
-00011e10: 6e0a 2020 2020 2020 2020 6578 6365 7074  n.        except
-00011e20: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00011e30: 7475 726e 204e 6f6e 650a 2020 2020 656c  turn None.    el
-00011e40: 7365 3a0a 2020 2020 2020 2020 6672 6f6d  se:.        from
-00011e50: 2069 6d70 6f72 746c 6962 2e6d 6574 6164   importlib.metad
-00011e60: 6174 6120 696d 706f 7274 2076 6572 7369  ata import versi
-00011e70: 6f6e 0a20 2020 2020 2020 2074 7279 3a0a  on.        try:.
-00011e80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00011e90: 726e 2076 6572 7369 6f6e 286d 6f64 290a  rn version(mod).
-00011ea0: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-00011eb0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00011ec0: 726e 204e 6f6e 650a 0a23 2050 7974 686f  rn None..# Pytho
-00011ed0: 6e20 3220 6861 7320 6275 696c 7420 696e  n 2 has built in
-00011ee0: 2072 656c 6f61 640a 6966 2050 7956 6572   reload.if PyVer
-00011ef0: 2833 2c34 2c27 3c3d 2729 3a20 0a20 2020  (3,4,'<='): .   
-00011f00: 2066 726f 6d20 696d 7020 696d 706f 7274   from imp import
-00011f10: 2072 656c 6f61 6420 2320 5079 7468 6f6e   reload # Python
-00011f20: 2033 2e30 202d 2033 2e34 200a 656c 6966   3.0 - 3.4 .elif
-00011f30: 2050 7956 6572 2833 2c34 2c27 3e27 293a   PyVer(3,4,'>'):
-00011f40: 200a 2020 2020 6672 6f6d 2069 6d70 6f72   .    from impor
-00011f50: 746c 6962 2069 6d70 6f72 7420 7265 6c6f  tlib import relo
-00011f60: 6164 2023 2050 7974 686f 6e20 332e 352b  ad # Python 3.5+
-00011f70: 0a0a 6465 6620 476c 6f62 616c 456e 7628  ..def GlobalEnv(
-00011f80: 293a 2023 2047 6574 206d 7920 7061 7265  ): # Get my pare
-00011f90: 6e74 2773 2067 6c6f 6261 6c73 2829 0a20  nt's globals(). 
-00011fa0: 2020 2027 2727 0a20 2020 2047 6574 2047     '''.    Get G
-00011fb0: 6c6f 6261 6c20 456e 7669 726f 6e6d 656e  lobal Environmen
-00011fc0: 7420 6f66 2074 6865 2070 7974 686f 6e20  t of the python 
-00011fd0: 636f 6465 0a20 2020 2027 2727 0a20 2020  code.    '''.   
-00011fe0: 2072 6574 7572 6e20 6469 6374 2869 6e73   return dict(ins
-00011ff0: 7065 6374 2e67 6574 6d65 6d62 6572 7328  pect.getmembers(
-00012000: 696e 7370 6563 742e 7374 6163 6b28 295b  inspect.stack()[
-00012010: 315d 5b30 5d29 295b 2266 5f67 6c6f 6261  1][0]))["f_globa
-00012020: 6c73 225d 0a0a 6465 6620 496e 7374 616c  ls"]..def Instal
-00012030: 6c28 6d6f 6475 6c65 2c69 6e73 7461 6c6c  l(module,install
-00012040: 5f61 6363 6f75 6e74 3d27 272c 6d6f 6465  _account='',mode
-00012050: 3d4e 6f6e 652c 7570 6772 6164 653d 4661  =None,upgrade=Fa
-00012060: 6c73 652c 7665 7273 696f 6e3d 4e6f 6e65  lse,version=None
-00012070: 2c66 6f72 6365 3d46 616c 7365 2c70 6b67  ,force=False,pkg
-00012080: 5f6d 6170 3d4e 6f6e 652c 6572 723d 4661  _map=None,err=Fa
-00012090: 6c73 652c 696e 7374 616c 6c5f 6e61 6d65  lse,install_name
-000120a0: 3d4e 6f6e 6529 3a0a 2020 2020 2727 270a  =None):.    '''.
-000120b0: 2020 2020 496e 7374 616c 6c20 7079 7468      Install pyth
-000120c0: 6f6e 206d 6f64 756c 6520 6669 6c65 0a20  on module file. 
-000120d0: 2020 206d 6f64 756c 6520 6e61 6d65 0a20     module name. 
-000120e0: 2020 2069 6e73 7461 6c6c 5f61 6363 6f75     install_accou
-000120f0: 743d 2727 203a 2064 6566 6175 6c74 204e  t='' : default N
-00012100: 6f6e 652c 2020 2d2d 7573 6572 203a 2069  one,  --user : i
-00012110: 6e73 7461 6c6c 206f 6e20 6163 636f 756e  nstall on accoun
-00012120: 7427 7320 6469 7265 6374 6f72 790a 2020  t's directory.  
-00012130: 2020 7570 6772 6164 6520 3a0a 2020 2020    upgrade :.    
-00012140: 2020 4661 6c73 6520 3a20 6465 6661 756c    False : defaul
-00012150: 740a 2020 2020 2020 5472 7565 2020 3a20  t.      True  : 
-00012160: 496e 7374 616c 6c20 6f72 2055 7067 7261  Install or Upgra
-00012170: 6465 2074 6865 206d 6f64 756c 650a 2020  de the module.  
-00012180: 2020 7665 7273 696f 6e20 3a0a 2020 2020    version :.    
-00012190: 2020 4e6f 6e65 2020 3a20 6465 6661 756c    None  : defaul
-000121a0: 740a 2020 2020 2020 3c76 6572 7369 6f6e  t.      <version
-000121b0: 3e3a 2043 6865 636b 2074 6865 2076 6572  >: Check the ver
-000121c0: 7369 6f6e 0a20 2020 2020 2020 2020 2020  sion.           
-000121d0: 2020 2020 2020 3d3d 203c 7665 7273 696f        == <versio
-000121e0: 6e3e 203a 2069 6620 6e6f 7420 5361 6d65  n> : if not Same
-000121f0: 2076 6572 7369 6f6e 2074 6865 6e20 696e   version then in
-00012200: 7374 616c 6c20 6174 2074 6865 2073 616d  stall at the sam
-00012210: 6520 7665 7273 696f 6e0a 2020 2020 2020  e version.      
-00012220: 2020 2020 2020 2020 2020 203e 3d20 3c76             >= <v
-00012230: 6572 7369 6f6e 3e20 3a20 6966 206e 6f74  ersion> : if not
-00012240: 2062 6967 6765 7220 7468 6520 7665 7273   bigger the vers
-00012250: 696f 6e20 7468 656e 2069 6e73 7461 6c6c  ion then install
-00012260: 206f 7220 7570 6772 6164 650a 2020 2020   or upgrade.    
-00012270: 2020 2020 2020 2020 2020 2020 203c 3d20               <= 
-00012280: 3c76 6572 7369 6f6e 3e20 3a20 6966 206e  <version> : if n
-00012290: 6f74 206c 6f77 6572 2074 6865 2076 6572  ot lower the ver
-000122a0: 7369 6f6e 2074 6865 6e20 696e 7374 616c  sion then instal
-000122b0: 6c20 6174 2074 6865 2076 6572 7369 6f6e  l at the version
-000122c0: 0a20 2020 2066 6f72 6365 2020 3a20 6465  .    force  : de
-000122d0: 6661 756c 7420 4661 6c73 650a 2020 2020  fault False.    
-000122e0: 2020 5472 7565 203a 2069 6620 696e 7374    True : if inst
-000122f0: 616c 6c65 6420 7468 656e 2066 6f72 6365  alled then force
-00012300: 2072 652d 696e 7374 616c 6c2c 206e 6f74   re-install, not
-00012310: 2074 6865 6e20 696e 7374 616c 6c0a 2020   then install.  
-00012320: 2020 706b 675f 6d61 703a 206d 6170 7069    pkg_map: mappi
-00012330: 6e67 2070 6163 6b61 6765 206e 616d 6520  ng package name 
-00012340: 616e 6420 7265 616c 2070 6163 6b61 6765  and real package
-00012350: 206e 616d 650a 2020 2020 2020 666f 726d   name.      form
-00012360: 6174 203d 3e20 7b20 3c70 6b67 206e 616d  at => { <pkg nam
-00012370: 653e 3a20 3c72 6561 6c20 696e 7374 616c  e>: <real instal
-00012380: 6c20 706b 6720 6e61 6d65 3e20 7d0a 2020  l pkg name> }.  
-00012390: 2020 6572 7220 2020 203a 2064 6566 6175    err    : defau
-000123a0: 6c74 2046 616c 7365 0a20 2020 2020 2054  lt False.      T
-000123b0: 7275 6520 3a20 6966 2069 6e73 7461 6c6c  rue : if install
-000123c0: 696e 6720 676f 7420 616e 7920 6973 7365  ing got any isse
-000123d0: 7520 7468 656e 2063 7261 7368 696e 670a  u then crashing.
-000123e0: 2020 2020 2020 4661 6c73 653a 2069 6620        False: if 
-000123f0: 696e 7374 616c 6c69 6e67 2067 6f74 2061  installing got a
-00012400: 6e79 2069 7373 7565 2074 6865 6e20 7265  ny issue then re
-00012410: 7475 726e 2046 616c 7365 0a20 2020 2027  turn False.    '
-00012420: 2727 0a20 2020 2023 2076 6572 7369 6f6e  ''.    # version
-00012430: 200a 2020 2020 2320 202d 2073 616d 6520   .    #  - same 
-00012440: 3a20 3d3d 312e 302e 300a 2020 2020 2320  : ==1.0.0.    # 
-00012450: 202d 2062 6967 2020 3a20 3e31 2e30 2e30   - big  : >1.0.0
-00012460: 0a20 2020 2023 2020 2d20 6f72 2020 203a  .    #  - or   :
-00012470: 203e 3d31 2e33 2e30 2c3c 312e 342e 300a   >=1.3.0,<1.4.0.
-00012480: 2020 2020 2320 7069 7020 6d6f 6475 6c65      # pip module
-00012490: 290a 2020 2020 2370 6970 5f6d 6169 6e3d  ).    #pip_main=
-000124a0: 4e6f 6e65 0a20 2020 2023 6966 2068 6173  None.    #if has
-000124b0: 6174 7472 2870 6970 2c27 6d61 696e 2729  attr(pip,'main')
-000124c0: 3a0a 2020 2020 2320 2020 2070 6970 5f6d  :.    #    pip_m
-000124d0: 6169 6e3d 7069 702e 6d61 696e 0a20 2020  ain=pip.main.   
-000124e0: 2023 656c 6966 2068 6173 6174 7472 2870   #elif hasattr(p
-000124f0: 6970 2c27 5f69 6e74 6572 6e61 6c27 293a  ip,'_internal'):
-00012500: 0a20 2020 2023 2020 2020 7069 705f 6d61  .    #    pip_ma
-00012510: 696e 3d70 6970 2e5f 696e 7465 726e 616c  in=pip._internal
-00012520: 2e6d 6169 6e0a 2020 2020 6966 2070 6b67  .main.    if pkg
-00012530: 5f6d 6170 2069 7320 4e6f 6e65 3a0a 2020  _map is None:.  
-00012540: 2020 2020 2020 706b 675f 6d61 703d 7b0a        pkg_map={.
-00012550: 2020 2020 2020 2020 2020 2027 6d61 6769             'magi
-00012560: 6327 3a27 7079 7468 6f6e 2d6d 6167 6963  c':'python-magic
-00012570: 272c 0a20 2020 2020 2020 2020 2020 2762  ',.           'b
-00012580: 6469 7374 5f77 6865 656c 273a 2777 6865  dist_wheel':'whe
-00012590: 656c 272c 0a20 2020 2020 2020 207d 0a0a  el',.        }..
-000125a0: 2020 2020 7069 705f 6d61 696e 3d73 7562      pip_main=sub
-000125b0: 7072 6f63 6573 732e 6368 6563 6b5f 6361  process.check_ca
-000125c0: 6c6c 0a20 2020 2069 6620 6e6f 7420 7069  ll.    if not pi
-000125d0: 705f 6d61 696e 3a0a 2020 2020 2020 2020  p_main:.        
-000125e0: 7072 696e 7428 2721 2120 5049 5020 6d6f  print('!! PIP mo
-000125f0: 6475 6c65 206e 6f74 2066 6f75 6e64 2729  dule not found')
-00012600: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00012610: 4661 6c73 650a 0a20 2020 2070 6b67 5f6e  False..    pkg_n
-00012620: 616d 653d 6d6f 6475 6c65 2e73 706c 6974  ame=module.split
-00012630: 2827 2e27 295b 305d 0a20 2020 2069 6620  ('.')[0].    if 
-00012640: 6e6f 7420 696e 7374 616c 6c5f 6e61 6d65  not install_name
-00012650: 3a20 696e 7374 616c 6c5f 6e61 6d65 3d70  : install_name=p
-00012660: 6b67 5f6d 6170 2e67 6574 2870 6b67 5f6e  kg_map.get(pkg_n
-00012670: 616d 652c 706b 675f 6e61 6d65 290a 2020  ame,pkg_name).  
-00012680: 2020 2320 4368 6563 6b20 696e 7374 616c    # Check instal
-00012690: 6c65 6420 7061 636b 6167 650a 2020 2020  led package.    
-000126a0: 2320 7069 7020 6d6f 6475 6c65 290a 2020  # pip module).  
-000126b0: 2020 2369 6e73 7461 6c6c 5f63 6d64 3d5b    #install_cmd=[
-000126c0: 2769 6e73 7461 6c6c 275d 0a20 2020 2069  'install'].    i
-000126d0: 6620 6f73 2e70 6174 682e 6261 7365 6e61  f os.path.basena
-000126e0: 6d65 2873 7973 2e65 7865 6375 7461 626c  me(sys.executabl
-000126f0: 6529 2e73 7461 7274 7377 6974 6828 2770  e).startswith('p
-00012700: 7974 686f 6e27 293a 0a20 2020 2020 2020  ython'):.       
-00012710: 2069 6e73 7461 6c6c 5f63 6d64 3d5b 7379   install_cmd=[sy
-00012720: 732e 6578 6563 7574 6162 6c65 2c27 2d6d  s.executable,'-m
-00012730: 272c 2770 6970 272c 2769 6e73 7461 6c6c  ','pip','install
-00012740: 275d 0a20 2020 2065 6c73 653a 0a20 2020  '].    else:.   
-00012750: 2020 2020 2069 6e73 7461 6c6c 5f63 6d64       install_cmd
-00012760: 3d5b 2770 7974 686f 6e33 272c 272d 6d27  =['python3','-m'
-00012770: 2c27 7069 7027 2c27 696e 7374 616c 6c27  ,'pip','install'
-00012780: 5d0a 2020 2020 6966 2050 7956 6572 2827  ].    if PyVer('
-00012790: 3e3d 272c 2733 2e32 2729 3a20 0a20 2020  >=','3.2'): .   
-000127a0: 2020 2020 2069 6d70 6f72 7420 706b 675f       import pkg_
-000127b0: 7265 736f 7572 6365 730a 2020 2020 2020  resources.      
-000127c0: 2020 706b 6e3d 706b 675f 7265 736f 7572    pkn=pkg_resour
-000127d0: 6365 732e 776f 726b 696e 675f 7365 742e  ces.working_set.
-000127e0: 5f5f 6469 6374 5f5f 2e67 6574 2827 6279  __dict__.get('by
-000127f0: 5f6b 6579 272c 7b7d 292e 6765 7428 696e  _key',{}).get(in
-00012800: 7374 616c 6c5f 6e61 6d65 290a 2020 2020  stall_name).    
-00012810: 2020 2020 6966 2070 6b6e 3a0a 2020 2020      if pkn:.    
-00012820: 2020 2020 2020 2020 6966 2076 6572 7369          if versi
-00012830: 6f6e 3a0a 2020 2020 2020 2020 2020 2020  on:.            
-00012840: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-00012850: 6765 286c 656e 2876 6572 7369 6f6e 292d  ge(len(version)-
-00012860: 312c 302c 2d31 293a 0a20 2020 2020 2020  1,0,-1):.       
-00012870: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00012880: 7665 7273 696f 6e5b 695d 2069 6e20 5b27  version[i] in ['
-00012890: 3e27 2c27 3c27 2c27 3d27 5d3a 2062 7265  >','<','=']: bre
-000128a0: 616b 0a20 2020 2020 2020 2020 2020 2020  ak.             
-000128b0: 2020 2076 6572 5f73 7472 3d76 6572 7369     ver_str=versi
-000128c0: 6f6e 5b69 2b31 3a5d 0a20 2020 2020 2020  on[i+1:].       
-000128d0: 2020 2020 2020 2020 2063 6f6d 7061 7265           compare
-000128e0: 5f73 796d 626f 6c3d 7665 7273 696f 6e5b  _symbol=version[
-000128f0: 3a69 2b31 5d0a 2020 2020 2020 2020 2020  :i+1].          
-00012900: 2020 2020 2020 6966 206e 6f74 2043 6f6d        if not Com
-00012910: 7056 6572 7369 6f6e 2870 6b6e 2e76 6572  pVersion(pkn.ver
-00012920: 7369 6f6e 2c63 6f6d 7061 7265 5f73 796d  sion,compare_sym
-00012930: 626f 6c2c 7665 725f 7374 7229 3a0a 2020  bol,ver_str):.  
-00012940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012950: 2020 7570 6772 6164 653d 5472 7565 0a20    upgrade=True. 
-00012960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012970: 2020 2069 6e73 7461 6c6c 5f63 6d64 2e61     install_cmd.a
-00012980: 7070 656e 6428 696e 7374 616c 6c5f 6e61  ppend(install_na
-00012990: 6d65 2b76 6572 7369 6f6e 290a 2020 2020  me+version).    
-000129a0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000129b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000129c0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-000129d0: 650a 2020 2020 2020 2020 2020 2020 656c  e.            el
-000129e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000129f0: 2020 2020 696e 7374 616c 6c5f 636d 642e      install_cmd.
-00012a00: 6170 7065 6e64 2869 6e73 7461 6c6c 5f6e  append(install_n
-00012a10: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
-00012a20: 2069 6620 666f 7263 653a 2069 6e73 7461   if force: insta
-00012a30: 6c6c 5f63 6d64 2e61 7070 656e 6428 272d  ll_cmd.append('-
-00012a40: 2d66 6f72 6365 2d72 6569 6e73 7461 6c6c  -force-reinstall
-00012a50: 2729 0a20 2020 2020 2020 2020 2020 2069  ').            i
-00012a60: 6620 696e 7374 616c 6c5f 6163 636f 756e  f install_accoun
-00012a70: 743a 2069 6e73 7461 6c6c 5f63 6d64 2e61  t: install_cmd.a
-00012a80: 7070 656e 6428 696e 7374 616c 6c5f 6163  ppend(install_ac
-00012a90: 636f 756e 7429 0a20 2020 2020 2020 2020  count).         
-00012aa0: 2020 2069 6620 6e6f 7420 666f 7263 6520     if not force 
-00012ab0: 616e 6420 7570 6772 6164 653a 2069 6e73  and upgrade: ins
-00012ac0: 7461 6c6c 5f63 6d64 2e61 7070 656e 6428  tall_cmd.append(
-00012ad0: 272d 2d75 7067 7261 6465 2729 0a20 2020  '--upgrade').   
-00012ae0: 2020 2020 2020 2020 2069 6620 7069 705f           if pip_
-00012af0: 6d61 696e 2061 6e64 2066 6f72 6365 206f  main and force o
-00012b00: 7220 7570 6772 6164 653a 0a20 2020 2020  r upgrade:.     
-00012b10: 2020 2020 2020 2020 2020 2069 6620 6572             if er
-00012b20: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-00012b30: 2020 2020 2020 2069 6620 7069 705f 6d61         if pip_ma
-00012b40: 696e 2869 6e73 7461 6c6c 5f63 6d64 2920  in(install_cmd) 
-00012b50: 3d3d 2030 3a20 7265 7475 726e 2054 7275  == 0: return Tru
-00012b60: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00012b70: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-00012b80: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
-00012b90: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00012ba0: 2020 2020 2020 2020 2020 2020 2074 7279               try
-00012bb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00012bc0: 2020 2020 2020 2020 2020 6966 2070 6970            if pip
-00012bd0: 5f6d 6169 6e28 696e 7374 616c 6c5f 636d  _main(install_cm
-00012be0: 6429 203d 3d20 303a 2072 6574 7572 6e20  d) == 0: return 
-00012bf0: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-00012c00: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00012c10: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
-00012c20: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00012c30: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-00012c40: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00012c50: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
-00012c60: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
-00012c70: 7565 0a0a 2320 2020 2069 6620 6d6f 6465  ue..#    if mode
-00012c80: 203d 3d20 2767 6974 273a 0a23 2020 2020   == 'git':.#    
-00012c90: 2020 2020 6769 742e 5265 706f 2e63 6c6f      git.Repo.clo
-00012ca0: 6e65 5f66 726f 6d28 6d6f 6475 6c65 2c27  ne_from(module,'
-00012cb0: 2f74 6d70 2f2e 6769 742e 746d 7027 2c62  /tmp/.git.tmp',b
-00012cc0: 7261 6e63 683d 276d 6173 7465 7227 290a  ranch='master').
-00012cd0: 2320 2020 2020 2020 2062 7569 6c64 2074  #        build t
-00012ce0: 6865 2073 6f75 7263 6520 616e 6420 696e  he source and in
-00012cf0: 7374 616c 6c0a 2320 2020 2020 2020 2072  stall.#        r
-00012d00: 6574 7572 6e20 5472 7565 0a0a 2020 2020  eturn True..    
-00012d10: 6966 2076 6572 7369 6f6e 3a0a 2020 2020  if version:.    
-00012d20: 2020 2020 696e 7374 616c 6c5f 636d 642e      install_cmd.
-00012d30: 6170 7065 6e64 2869 6e73 7461 6c6c 5f6e  append(install_n
-00012d40: 616d 652b 7665 7273 696f 6e29 0a20 2020  ame+version).   
-00012d50: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
-00012d60: 6e73 7461 6c6c 5f63 6d64 2e61 7070 656e  nstall_cmd.appen
-00012d70: 6428 696e 7374 616c 6c5f 6e61 6d65 290a  d(install_name).
-00012d80: 2020 2020 6966 2066 6f72 6365 3a20 696e      if force: in
-00012d90: 7374 616c 6c5f 636d 642e 6170 7065 6e64  stall_cmd.append
-00012da0: 2827 2d2d 666f 7263 652d 7265 696e 7374  ('--force-reinst
-00012db0: 616c 6c27 290a 2020 2020 6966 2069 6e73  all').    if ins
-00012dc0: 7461 6c6c 5f61 6363 6f75 6e74 3a20 696e  tall_account: in
-00012dd0: 7374 616c 6c5f 636d 642e 6170 7065 6e64  stall_cmd.append
-00012de0: 2869 6e73 7461 6c6c 5f61 6363 6f75 6e74  (install_account
-00012df0: 290a 0a20 2020 2069 6620 6572 723a 0a20  )..    if err:. 
-00012e00: 2020 2020 2020 2069 6620 7069 705f 6d61         if pip_ma
-00012e10: 696e 2869 6e73 7461 6c6c 5f63 6d64 2920  in(install_cmd) 
-00012e20: 3d3d 2030 3a20 7265 7475 726e 2054 7275  == 0: return Tru
-00012e30: 650a 2020 2020 656c 7365 3a0a 2020 2020  e.    else:.    
-00012e40: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00012e50: 2020 2020 2069 6620 7069 705f 6d61 696e       if pip_main
-00012e60: 2869 6e73 7461 6c6c 5f63 6d64 2920 3d3d  (install_cmd) ==
-00012e70: 2030 3a20 7265 7475 726e 2054 7275 650a   0: return True.
-00012e80: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-00012e90: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-00012ea0: 0a20 2020 2072 6574 7572 6e20 4661 6c73  .    return Fals
-00012eb0: 650a 0a0a 6465 6620 4d6f 644e 616d 6528  e...def ModName(
-00012ec0: 7372 6329 3a0a 2020 2020 2727 270a 2020  src):.    '''.  
-00012ed0: 2020 416e 616c 7973 6973 204d 6f64 756c    Analysis Modul
-00012ee0: 6520 6e61 6d65 2066 726f 6d20 696e 7075  e name from inpu
-00012ef0: 7420 7374 7269 6e67 0a20 2020 2027 2727  t string.    '''
-00012f00: 0a20 2020 2072 743d 5472 7565 0a20 2020  .    rt=True.   
-00012f10: 2063 6c61 7373 5f6e 616d 653d 4e6f 6e65   class_name=None
-00012f20: 0a20 2020 206d 6f64 756c 655f 6e61 6d65  .    module_name
-00012f30: 3d4e 6f6e 650a 2020 2020 616c 6961 735f  =None.    alias_
-00012f40: 6e61 6d65 3d4e 6f6e 650a 2020 2020 7665  name=None.    ve
-00012f50: 7273 696f 6e3d 4e6f 6e65 0a20 2020 2073  rsion=None.    s
-00012f60: 796d 626f 6c3d 4e6f 6e65 0a20 2020 2069  ymbol=None.    i
-00012f70: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-00012f80: 2c73 7472 293a 0a20 2020 2020 2020 2073  ,str):.        s
-00012f90: 7263 5f61 3d73 7263 2e73 706c 6974 2829  rc_a=src.split()
-00012fa0: 0a20 2020 2020 2020 2023 7265 6d6f 7665  .        #remove
-00012fb0: 2066 726f 6d20 2c20 696d 706f 7274 2074   from , import t
-00012fc0: 6167 0a20 2020 2020 2020 2069 6620 7372  ag.        if sr
-00012fd0: 635f 615b 305d 2069 6e20 5b27 6672 6f6d  c_a[0] in ['from
-00012fe0: 272c 2769 6d70 6f72 7427 5d3a 0a20 2020  ','import']:.   
-00012ff0: 2020 2020 2020 2020 2064 656c 2073 7263           del src
-00013000: 5f61 5b30 5d0a 2020 2020 2020 2020 6d6f  _a[0].        mo
-00013010: 6475 6c65 5f6e 616d 653d 7372 635f 615b  dule_name=src_a[
-00013020: 305d 0a20 2020 2020 2020 2023 7265 6d6f  0].        #remo
-00013030: 7665 2076 6572 7369 6f6e 2069 6e66 6f72  ve version infor
-00013040: 6d61 7469 6f6e 0a20 2020 2020 2020 2073  mation.        s
-00013050: 7263 5f61 5f6c 656e 3d6c 656e 2873 7263  rc_a_len=len(src
-00013060: 5f61 290a 2020 2020 2020 2020 666f 7220  _a).        for 
-00013070: 6920 696e 2072 616e 6765 2873 7263 5f61  i in range(src_a
-00013080: 5f6c 656e 2d31 2c30 2c2d 3129 3a0a 2020  _len-1,0,-1):.  
-00013090: 2020 2020 2020 2020 2020 6966 2073 7263            if src
-000130a0: 5f61 5b69 5d20 696e 205b 273d 3d27 2c27  _a[i] in ['==','
-000130b0: 3d27 2c27 3e27 2c27 3e3d 272c 273c 272c  =','>','>=','<',
-000130c0: 273c 3d27 5d3a 0a20 2020 2020 2020 2020  '<=']:.         
-000130d0: 2020 2020 2020 2069 6620 6920 3c20 7372         if i < sr
-000130e0: 635f 615f 6c65 6e3a 0a20 2020 2020 2020  c_a_len:.       
-000130f0: 2020 2020 2020 2020 2020 2020 2073 796d               sym
-00013100: 626f 6c3d 7372 635f 615b 695d 0a20 2020  bol=src_a[i].   
-00013110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013120: 2076 6572 7369 6f6e 3d73 7263 5f61 5b69   version=src_a[i
-00013130: 2b31 5d0a 2020 2020 2020 2020 2020 2020  +1].            
-00013140: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
-00013150: 2020 6966 2027 696d 706f 7274 2720 696e    if 'import' in
-00013160: 2073 7263 5f61 3a0a 2020 2020 2020 2020   src_a:.        
-00013170: 2020 2020 696d 706f 7274 5f69 6478 3d73      import_idx=s
-00013180: 7263 5f61 2e69 6e64 6578 2827 696d 706f  rc_a.index('impo
-00013190: 7274 2729 0a20 2020 2020 2020 2020 2020  rt').           
-000131a0: 2069 6620 7372 635f 615f 6c65 6e20 3e20   if src_a_len > 
-000131b0: 696d 706f 7274 5f69 6478 2b31 3a0a 2020  import_idx+1:.  
-000131c0: 2020 2020 2020 2020 2020 2020 2020 636c                cl
-000131d0: 6173 735f 6e61 6d65 3d73 7263 5f61 5b69  ass_name=src_a[i
-000131e0: 6d70 6f72 745f 6964 782b 315d 0a20 2020  mport_idx+1].   
-000131f0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00013200: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00013210: 743d 4661 6c73 650a 2020 2020 2020 2020  t=False.        
-00013220: 6966 2027 6173 2720 696e 2073 7263 5f61  if 'as' in src_a
-00013230: 3a0a 2020 2020 2020 2020 2020 2020 616c  :.            al
-00013240: 6961 735f 6964 783d 7372 635f 612e 696e  ias_idx=src_a.in
-00013250: 6465 7828 2761 7327 290a 2020 2020 2020  dex('as').      
-00013260: 2020 2020 2020 6966 2073 7263 5f61 5f6c        if src_a_l
-00013270: 656e 203e 2061 6c69 6173 5f69 6478 2b31  en > alias_idx+1
-00013280: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00013290: 2020 616c 6961 735f 6e61 6d65 3d73 7263    alias_name=src
-000132a0: 5f61 5b61 6c69 6173 5f69 6478 2b31 5d0a  _a[alias_idx+1].
-000132b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000132c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000132d0: 2020 7274 3d46 616c 7365 0a20 2020 2020    rt=False.     
-000132e0: 2020 2069 6620 616c 6961 735f 6e61 6d65     if alias_name
-000132f0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00013300: 2020 2020 2020 616c 6961 735f 6e61 6d65        alias_name
-00013310: 3d6d 6f64 756c 655f 6e61 6d65 0a20 2020  =module_name.   
-00013320: 2072 6574 7572 6e20 7274 2c6d 6f64 756c   return rt,modul
-00013330: 655f 6e61 6d65 2c61 6c69 6173 5f6e 616d  e_name,alias_nam
-00013340: 652c 636c 6173 735f 6e61 6d65 2c76 6572  e,class_name,ver
-00013350: 7369 6f6e 2c73 796d 626f 6c0a 0a23 6465  sion,symbol..#de
-00013360: 6620 4d6f 644c 6f61 6428 696e 702c 666f  f ModLoad(inp,fo
-00013370: 7263 653d 4661 6c73 652c 676c 6f62 616c  rce=False,global
-00013380: 656e 763d 6469 6374 2869 6e73 7065 6374  env=dict(inspect
-00013390: 2e67 6574 6d65 6d62 6572 7328 696e 7370  .getmembers(insp
-000133a0: 6563 742e 7374 6163 6b28 295b 315d 5b30  ect.stack()[1][0
-000133b0: 5d29 295b 2266 5f67 6c6f 6261 6c73 225d  ]))["f_globals"]
-000133c0: 2c75 6e6c 6f61 643d 4661 6c73 652c 7265  ,unload=False,re
-000133d0: 5f6c 6f61 643d 4661 6c73 6529 3a0a 6465  _load=False):.de
-000133e0: 6620 4d6f 644c 6f61 6428 696e 702c 666f  f ModLoad(inp,fo
-000133f0: 7263 653d 4661 6c73 652c 676c 6f62 616c  rce=False,global
-00013400: 656e 763d 476c 6f62 616c 2829 2c75 6e6c  env=Global(),unl
-00013410: 6f61 643d 4661 6c73 652c 7265 5f6c 6f61  oad=False,re_loa
-00013420: 643d 4661 6c73 6529 3a0a 2020 2020 2727  d=False):.    ''
-00013430: 270a 2020 2020 4c6f 6164 2070 7974 686f  '.    Load pytho
-00013440: 6e20 6d6f 6475 6c65 0a20 2020 2030 3a20  n module.    0: 
-00013450: 4c6f 6164 6564 0a20 2020 2031 3a20 4c6f  Loaded.    1: Lo
-00013460: 6164 2065 7272 6f72 2028 4d61 7920 6265  ad error (May be
-00013470: 206e 6565 6420 696e 7374 616c 6c20 6f72   need install or
-00013480: 204c 6f61 6469 6e67 2065 7272 6f72 2077   Loading error w
-00013490: 6974 6820 616e 7920 6372 6974 6963 616c  ith any critical
-000134a0: 2069 7373 7565 290a 2020 2020 323a 2055   issue).    2: U
-000134b0: 6e6c 6f61 6420 6f72 204e 6f74 206c 6f61  nload or Not loa
-000134c0: 6465 640a 2020 2020 2727 270a 2020 2020  ded.    '''.    
-000134d0: 6465 6620 5265 6c6f 6164 286e 616d 6529  def Reload(name)
-000134e0: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
-000134f0: 6e73 7461 6e63 6528 6e61 6d65 2c73 7472  nstance(name,str
-00013500: 293a 0a20 2020 2020 2020 2020 2020 2067  ):.            g
-00013510: 6c6f 6261 6c65 6e76 5b6e 616d 655d 3d72  lobalenv[name]=r
-00013520: 656c 6f61 6428 676c 6f62 616c 656e 765b  eload(globalenv[
-00013530: 6e61 6d65 5d29 0a20 2020 2020 2020 2065  name]).        e
-00013540: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00013550: 206e 616d 653d 7265 6c6f 6164 286e 616d   name=reload(nam
-00013560: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
-00013570: 6e20 5472 7565 0a0a 2020 2020 6465 6620  n True..    def 
-00013580: 556e 6c6f 6164 286e 616d 6529 3a0a 2020  Unload(name):.  
-00013590: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-000135a0: 6e63 6528 6e61 6d65 2c73 7472 293a 0a20  nce(name,str):. 
-000135b0: 2020 2020 2020 2020 2020 2064 656c 2067             del g
-000135c0: 6c6f 6261 6c65 6e76 5b6e 616d 655d 0a20  lobalenv[name]. 
-000135d0: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-000135e0: 7374 616e 6365 286e 616d 652c 7479 7065  stance(name,type
-000135f0: 2869 6e73 7065 6374 2929 3a0a 2020 2020  (inspect)):.    
-00013600: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-00013610: 2020 2020 2020 2020 2020 2020 206e 6e61               nna
-00013620: 6d65 203d 206e 616d 652e 5f5f 7370 6563  me = name.__spec
-00013630: 5f5f 2e6e 616d 650a 2020 2020 2020 2020  __.name.        
-00013640: 2020 2020 6578 6365 7074 2041 7474 7269      except Attri
-00013650: 6275 7465 4572 726f 723a 0a20 2020 2020  buteError:.     
-00013660: 2020 2020 2020 2020 2020 206e 6e61 6d65             nname
-00013670: 203d 206e 616d 652e 5f5f 6e61 6d65 5f5f   = name.__name__
-00013680: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00013690: 6e6e 616d 6520 696e 2067 6c6f 6261 6c65  nname in globale
-000136a0: 6e76 3a20 6465 6c20 676c 6f62 616c 656e  nv: del globalen
-000136b0: 765b 6e6e 616d 655d 0a0a 2020 2020 6966  v[nname]..    if
-000136c0: 206e 6f74 2069 6e70 3a20 7265 7475 726e   not inp: return
-000136d0: 2030 2c27 270a 2320 2020 2069 6e70 5f61   0,''.#    inp_a
-000136e0: 3d69 6e70 2e73 706c 6974 2829 0a20 2020  =inp.split().   
-000136f0: 2077 696c 6463 6172 643d 4e6f 6e65 0a20   wildcard=None. 
-00013700: 2020 2063 6c61 7373 5f6e 616d 653d 4e6f     class_name=No
-00013710: 6e65 0a23 2020 2020 6966 2069 6e70 5f61  ne.#    if inp_a
-00013720: 5b30 5d20 696e 205b 2766 726f 6d27 2c27  [0] in ['from','
-00013730: 696d 706f 7274 275d 3a0a 2320 2020 2020  import']:.#     
-00013740: 2020 2064 656c 2069 6e70 5f61 5b30 5d0a     del inp_a[0].
-00013750: 2320 2020 206e 616d 653d 696e 705f 615b  #    name=inp_a[
-00013760: 2d31 5d0a 2320 2020 206d 6f64 756c 653d  -1].#    module=
-00013770: 696e 705f 615b 305d 0a20 2020 206f 6b2c  inp_a[0].    ok,
-00013780: 6d6f 6475 6c65 2c6e 616d 652c 636c 6173  module,name,clas
-00013790: 735f 6e61 6d65 2c76 6572 7369 6f6e 2c73  s_name,version,s
-000137a0: 796d 626f 6c3d 4d6f 644e 616d 6528 696e  ymbol=ModName(in
-000137b0: 7029 0a20 2020 2069 6620 6f6b 2069 7320  p).    if ok is 
-000137c0: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
-000137d0: 2020 2070 7269 6e74 2827 2a2a 2a20 5772     print('*** Wr
-000137e0: 6f6e 6720 696e 666f 726d 6174 696f 6e27  ong information'
-000137f0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00013800: 7475 726e 2030 2c6d 6f64 756c 650a 2020  turn 0,module.  
-00013810: 2020 6966 2075 6e6c 6f61 643a 0a20 2020    if unload:.   
-00013820: 2020 2020 2023 6966 2027 2a27 206e 6f74       #if '*' not
-00013830: 2069 6e20 696e 7020 616e 6420 6e61 6d65   in inp and name
-00013840: 2069 6e20 676c 6f62 616c 656e 763a 2023   in globalenv: #
-00013850: 2061 6c72 6561 6479 206c 6f61 6465 640a   already loaded.
-00013860: 2020 2020 2020 2020 6966 2063 6c61 7373          if class
-00013870: 5f6e 616d 6520 213d 2027 2a27 2061 6e64  _name != '*' and
-00013880: 206e 616d 6520 696e 2067 6c6f 6261 6c65   name in globale
-00013890: 6e76 3a20 2320 616c 7265 6164 7920 6c6f  nv: # already lo
-000138a0: 6164 6564 0a20 2020 2020 2020 2020 2020  aded.           
-000138b0: 2055 6e6c 6f61 6428 6e61 6d65 2920 2355   Unload(name) #U
-000138c0: 6e6c 6f61 640a 2020 2020 2020 2020 7265  nload.        re
-000138d0: 7475 726e 2032 2c6d 6f64 756c 6520 234e  turn 2,module #N
-000138e0: 6f74 206c 6f61 6465 640a 0a23 2020 2020  ot loaded..#    
-000138f0: 696d 706f 7274 2069 6e73 7065 6374 2c73  import inspect,s
-00013900: 7973 0a23 2020 2020 7072 696e 7428 696e  ys.#    print(in
-00013910: 7370 6563 742e 7374 6163 6b28 2929 0a23  spect.stack()).#
-00013920: 2020 2020 6465 703d 6c65 6e28 696e 7370      dep=len(insp
-00013930: 6563 742e 7374 6163 6b28 2929 2d31 0a23  ect.stack())-1.#
-00013940: 2020 2020 666e 616d 653d 7379 732e 5f67      fname=sys._g
-00013950: 6574 6672 616d 6528 6465 7029 2e66 5f63  etframe(dep).f_c
-00013960: 6f64 652e 636f 5f6e 616d 650a 2320 2020  ode.co_name.#   
-00013970: 2069 6620 666e 616d 6520 3d3d 2027 5f62   if fname == '_b
-00013980: 6f6f 7473 7472 6170 5f69 6e6e 6572 2720  ootstrap_inner' 
-00013990: 6f72 206e 616d 6520 3d3d 2027 5f72 756e  or name == '_run
-000139a0: 5f63 6f64 6527 3a0a 2320 2020 2020 2020  _code':.#       
-000139b0: 2066 6e61 6d65 3d73 7973 2e5f 6765 7466   fname=sys._getf
-000139c0: 7261 6d65 2832 292e 665f 636f 6465 2e63  rame(2).f_code.c
-000139d0: 6f5f 6e61 6d65 0a23 2020 2020 7072 696e  o_name.#    prin
-000139e0: 7428 273e 3e27 2c66 6e61 6d65 2c27 3a3a  t('>>',fname,'::
-000139f0: 3a27 2c6e 616d 652c 636c 6173 735f 6e61  :',name,class_na
-00013a00: 6d65 2c6d 6f64 756c 6529 0a20 2020 2023  me,module).    #
-00013a10: 6966 2027 2a27 206e 6f74 2069 6e20 696e  if '*' not in in
-00013a20: 7020 616e 6420 6e61 6d65 2069 6e20 676c  p and name in gl
-00013a30: 6f62 616c 656e 763a 2023 2061 6c72 6561  obalenv: # alrea
-00013a40: 6479 206c 6f61 6465 640a 2020 2020 6966  dy loaded.    if
-00013a50: 2063 6c61 7373 5f6e 616d 6520 213d 2027   class_name != '
-00013a60: 2a27 2061 6e64 206e 616d 6520 696e 2067  *' and name in g
-00013a70: 6c6f 6261 6c65 6e76 3a20 2320 616c 7265  lobalenv: # alre
-00013a80: 6164 7920 6c6f 6164 6564 0a20 2020 2020  ady loaded.     
-00013a90: 2020 2069 6620 7265 5f6c 6f61 643a 0a20     if re_load:. 
-00013aa0: 2020 2020 2020 2020 2020 2052 656c 6f61             Reloa
-00013ab0: 6428 6e61 6d65 2920 2320 6966 2066 6f72  d(name) # if for
-00013ac0: 6365 2074 6865 6e20 7265 6c6f 6164 0a20  ce then reload. 
-00013ad0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00013ae0: 6e20 302c 6d6f 6475 6c65 0a20 2020 2020  n 0,module.     
-00013af0: 2020 2065 6c69 6620 666f 7263 653a 0a20     elif force:. 
-00013b00: 2020 2020 2020 2020 2020 2055 6e6c 6f61             Unloa
-00013b10: 6428 6e61 6d65 2920 2369 6620 666f 7263  d(name) #if forc
-00013b20: 6520 7468 656e 2075 6e6c 6f61 6420 616e  e then unload an
-00013b30: 6420 6c6f 6164 2061 6761 696e 0a23 2020  d load again.#  
-00013b40: 2020 6966 2027 696d 706f 7274 2720 696e    if 'import' in
-00013b50: 2069 6e70 5f61 3a0a 2320 2020 2020 2020   inp_a:.#       
-00013b60: 2069 6d70 6f72 745f 6964 783d 696e 705f   import_idx=inp_
-00013b70: 612e 696e 6465 7828 2769 6d70 6f72 7427  a.index('import'
-00013b80: 290a 2320 2020 2020 2020 2069 6620 6c65  ).#        if le
-00013b90: 6e28 696e 705f 6129 203e 2069 6d70 6f72  n(inp_a) > impor
-00013ba0: 745f 6964 782b 313a 0a23 2020 2020 2020  t_idx+1:.#      
-00013bb0: 2020 2020 2020 636c 6173 735f 6e61 6d65        class_name
-00013bc0: 3d69 6e70 5f61 5b69 6d70 6f72 745f 6964  =inp_a[import_id
-00013bd0: 782b 315d 0a23 2020 2020 2020 2020 656c  x+1].#        el
-00013be0: 7365 3a0a 2320 2020 2020 2020 2020 2020  se:.#           
-00013bf0: 2070 7269 6e74 2827 2a2a 2a20 5772 6f6e   print('*** Wron
-00013c00: 6720 696e 666f 726d 6174 696f 6e27 290a  g information').
-00013c10: 2320 2020 2020 2020 2020 2020 2072 6574  #            ret
-00013c20: 7572 6e20 302c 6d6f 6475 6c65 0a20 2020  urn 0,module.   
-00013c30: 2074 7279 3a0a 2020 2020 2020 2020 6966   try:.        if
-00013c40: 2063 6c61 7373 5f6e 616d 653a 0a20 2020   class_name:.   
-00013c50: 2020 2020 2020 2020 2069 6620 636c 6173           if clas
-00013c60: 735f 6e61 6d65 203d 3d20 272a 273a 0a20  s_name == '*':. 
-00013c70: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00013c80: 696c 6463 6172 643d 696d 706f 7274 5f6d  ildcard=import_m
-00013c90: 6f64 756c 6528 6d6f 6475 6c65 290a 2020  odule(module).  
-00013ca0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00013cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013cc0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-00013cd0: 2020 2020 2020 2020 2067 6c6f 6261 6c65           globale
-00013ce0: 6e76 5b6e 616d 655d 3d67 6574 6174 7472  nv[name]=getattr
-00013cf0: 2869 6d70 6f72 745f 6d6f 6475 6c65 286d  (import_module(m
-00013d00: 6f64 756c 6529 2c63 6c61 7373 5f6e 616d  odule),class_nam
-00013d10: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00013d20: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-00013d30: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00013d40: 6c6f 6261 6c65 6e76 5b6e 616d 655d 3d69  lobalenv[name]=i
-00013d50: 6d70 6f72 745f 6d6f 6475 6c65 2827 7b7d  mport_module('{}
-00013d60: 2e7b 7d27 2e66 6f72 6d61 7428 6d6f 6475  .{}'.format(modu
-00013d70: 6c65 2c63 6c61 7373 5f6e 616d 6529 290a  le,class_name)).
-00013d80: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00013d90: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-00013da0: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00013db0: 6c6f 6261 6c65 6e76 5b6e 616d 655d 3d69  lobalenv[name]=i
-00013dc0: 6d70 6f72 745f 6d6f 6475 6c65 286d 6f64  mport_module(mod
-00013dd0: 756c 6529 0a20 2020 2020 2020 2020 2020  ule).           
-00013de0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00013df0: 2020 2020 2020 2020 2065 7272 3d45 7863           err=Exc
-00013e00: 6570 744d 6573 7361 6765 2829 0a20 2020  eptMessage().   
-00013e10: 2020 2020 2020 2020 2020 2020 2053 7464               Std
-00013e20: 4572 7228 272d 2d2d 2d2d 2d2d 2d2d 2d2d  Err('-----------
-00013e30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 5c6e  --------------\n
-00013e60: 7b7d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  {}--------------
-00013e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00013e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d5c 6e27 2e66  -----------\n'.f
-00013ea0: 6f72 6d61 7428 6572 7229 290a 2020 2020  ormat(err)).    
-00013eb0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00013ec0: 726e 2030 2c6d 6f64 756c 650a 2020 2020  rn 0,module.    
-00013ed0: 2020 2020 7265 7475 726e 2077 696c 6463      return wildc
-00013ee0: 6172 642c 6d6f 6475 6c65 2023 204c 6f61  ard,module # Loa
-00013ef0: 6465 642e 2053 6f20 7265 7475 726e 2077  ded. So return w
-00013f00: 696c 6463 6172 6420 696e 666f 726d 6174  ildcard informat
-00013f10: 696f 6e0a 2020 2020 6578 6365 7074 2041  ion.    except A
-00013f20: 7474 7269 6275 7465 4572 726f 723a 2023  ttributeError: #
-00013f30: 2054 7279 204c 6f61 6469 6e67 206c 6f6f   Try Loading loo
-00013f40: 7065 6420 4d6f 6475 6c65 2f43 6c61 7373  ped Module/Class
-00013f50: 2074 6865 6e20 6967 6e6f 7265 2020 6f72   then ignore  or
-00013f60: 2057 726f 6e67 2064 6566 696e 650a 2020   Wrong define.  
-00013f70: 2020 2020 2020 7265 7475 726e 2030 2c6d        return 0,m
-00013f80: 6f64 756c 650a 2020 2020 6578 6365 7074  odule.    except
-00013f90: 2049 6d70 6f72 7445 7272 6f72 3a20 2320   ImportError: # 
-00013fa0: 496d 706f 7274 2065 7272 6f72 2074 6865  Import error the
-00013fb0: 6e20 7472 7920 696e 7374 616c 6c0a 2020  n try install.  
-00013fc0: 2020 2020 2020 7265 7475 726e 2031 2c6d        return 1,m
-00013fd0: 6f64 756c 650a 0a64 6566 2049 6d70 6f72  odule..def Impor
-00013fe0: 7428 2a69 6e70 732c 2a2a 6f70 7473 293a  t(*inps,**opts):
-00013ff0: 0a20 2020 2027 2727 0a20 2020 2062 6173  .    '''.    bas
-00014000: 6963 2066 756e 6374 696f 6e20 6f66 2069  ic function of i
-00014010: 6d70 6f72 740a 2020 2020 6966 206e 6f74  mport.    if not
-00014020: 2066 6f75 6e64 2074 6865 206d 6f64 756c   found the modul
-00014030: 6520 7468 656e 2061 7574 6f6d 6174 6963  e then automatic
-00014040: 616c 6c20 696e 7374 616c 6c0a 2020 2020  all install.    
-00014050: 7665 7273 696f 6e20 6368 6563 6b20 616e  version check an
-00014060: 6420 7570 6772 6164 652c 2072 6569 6e73  d upgrade, reins
-00014070: 7461 6c6c 2061 6363 6f72 6469 6e67 2074  tall according t
-00014080: 6f20 7468 6520 7665 7273 696f 6e0a 2020  o the version.  
-00014090: 2020 7375 7070 6f72 7420 7265 7175 6972    support requir
-000140a0: 656d 656e 7420 6669 6c65 730a 0a20 2020  ement files..   
-000140b0: 2069 6e70 7320 6861 7320 2272 6571 7569   inps has "requi
-000140c0: 7265 203c 7265 7175 6972 6520 6669 6c65  re <require file
-000140d0: 3e22 2074 6865 6e20 696e 7374 616c 6c20  >" then install 
-000140e0: 7468 6520 616c 6c20 7265 7175 6972 6520  the all require 
-000140f0: 6669 6c65 7320 696e 203c 7265 7175 6972  files in <requir
-00014100: 6520 6669 6c65 3e0a 2020 2020 496d 706f  e file>.    Impo
-00014110: 7274 2827 3c6d 6f64 756c 6520 6e61 6d65  rt('<module name
-00014120: 3e20 203e 3d20 3c76 6572 7369 6f6e 3e27  >  >= <version>'
-00014130: 2920 3a20 4368 6563 6b20 7665 7273 696f  ) : Check versio
-00014140: 6e20 616e 6420 6c6f 7765 7220 7468 656e  n and lower then
-00014150: 2061 7574 6f6d 6174 6963 616c 6c20 7570   automaticall up
-00014160: 6772 6164 6520 0a20 2020 2049 6d70 6f72  grade .    Impor
-00014170: 7428 273c 6d6f 6475 6c65 206e 616d 653e  t('<module name>
-00014180: 2020 3d3d 203c 7665 7273 696f 6e3e 2729    == <version>')
-00014190: 203a 2043 6865 636b 2076 6572 7369 6f6e   : Check version
-000141a0: 2061 6e64 2064 6966 6665 7265 6e74 2074   and different t
-000141b0: 6865 6e20 6175 746f 6d61 7469 6361 6c6c  hen automaticall
-000141c0: 2072 6569 6e73 7461 6c6c 2077 6974 6820   reinstall with 
-000141d0: 7468 6520 7665 7273 696f 6e0a 2020 2020  the version.    
-000141e0: 496d 706f 7274 2827 3c6d 6f64 756c 6520  Import('<module 
-000141f0: 6e61 6d65 3e27 2c70 6174 683d 2741 4141  name>',path='AAA
-00014200: 2c42 4242 2c43 4343 4327 2920 3a20 696d  ,BBB,CCCC') : im
-00014210: 706f 7274 203c 6d6f 6475 6c65 206e 616d  port <module nam
-00014220: 653e 2066 726f 6d20 6465 6661 756c 7420  e> from default 
-00014230: 616e 6420 6578 7472 6120 4141 4120 616e  and extra AAA an
-00014240: 6420 4242 4220 616e 6420 4343 432e 0a20  d BBB and CCC.. 
-00014250: 2020 202d 7061 7468 3d20 2020 2020 2020     -path=       
-00014260: 3a20 7365 6172 6368 696e 6720 616e 6420  : searching and 
-00014270: 7468 6520 6d6f 6475 6c65 2069 6e20 7468  the module in th
-00014280: 6520 6578 7472 6120 7061 7468 2028 7365  e extra path (se
-00014290: 7065 7261 7465 2077 6974 6820 272c 2720  perate with ',' 
-000142a0: 6f72 2027 3a27 2029 0a20 2020 202d 666f  or ':' ).    -fo
-000142b0: 7263 653d 5472 7565 2020 3a20 756e 6c6f  rce=True  : unlo
-000142c0: 6164 2061 6e64 206c 6f61 6420 6167 6169  ad and load agai
-000142d0: 6e20 7768 656e 2061 6c72 6561 6479 206c  n when already l
-000142e0: 6f61 6465 6420 2864 6566 6175 6c74 3a20  oaded (default: 
-000142f0: 4661 6c73 6529 0a20 2020 202d 7265 6c6f  False).    -relo
-00014300: 6164 3d54 7275 6520 3a20 7275 6e20 7265  ad=True : run re
-00014310: 6c6f 6164 2077 6865 6e20 616c 7265 6164  load when alread
-00014320: 7920 6c6f 6164 6564 2028 6465 6661 756c  y loaded (defaul
-00014330: 743a 2046 616c 7365 290a 2020 2020 2d75  t: False).    -u
-00014340: 6e6c 6f61 643d 5472 7565 203a 2075 6e6c  nload=True : unl
-00014350: 6f61 6420 6d6f 6475 6c65 2028 6465 6661  oad module (defa
-00014360: 756c 7420 3a20 4661 6c73 6529 0a20 2020  ult : False).   
-00014370: 202d 6572 723d 5472 7565 2020 2020 3a20   -err=True    : 
-00014380: 7368 6f77 2069 6e73 7461 6c6c 206f 7220  show install or 
-00014390: 6c6f 6164 696e 6720 6572 726f 7220 2864  loading error (d
-000143a0: 6566 6175 6c74 3a20 4661 6c73 6529 0a20  efault: False). 
-000143b0: 2020 202d 6462 673d 5472 7565 2020 2020     -dbg=True    
-000143c0: 3a20 7368 6f77 2063 6f6d 6d65 6e74 2028  : show comment (
-000143d0: 6465 6661 756c 7420 3a20 4661 6c73 6529  default : False)
-000143e0: 0a20 2020 202d 696e 7374 616c 6c5f 6163  .    -install_ac
-000143f0: 636f 756e 743d 3a20 272d 2d75 7365 7227  count=: '--user'
-00014400: 2c27 7573 6572 272c 276d 7961 6363 6f75  ,'user','myaccou
-00014410: 6e74 272c 2761 6363 6f75 6e74 272c 6d79  nt','account',my
-00014420: 7365 6c66 2074 6865 6e20 696e 7374 616c  self then instal
-00014430: 6c20 6174 206d 7920 6c6f 6361 6c20 6163  l at my local ac
-00014440: 636f 756e 740a 2020 2020 2020 2020 2020  count.          
-00014450: 2020 2020 2020 2064 6566 6175 6c74 3a20         default: 
-00014460: 496e 7374 616c 6c20 6279 2053 7973 7465  Install by Syste
-00014470: 6d20 6465 6661 756c 7420 7365 7474 696e  m default settin
-00014480: 670a 0a20 2020 2027 2727 0a20 2020 2067  g..    '''.    g
-00014490: 6c6f 6261 6c65 6e76 3d6f 7074 732e 6765  lobalenv=opts.ge
-000144a0: 7428 2767 6c6f 6261 6c65 6e76 272c 6469  t('globalenv',di
-000144b0: 6374 2869 6e73 7065 6374 2e67 6574 6d65  ct(inspect.getme
-000144c0: 6d62 6572 7328 696e 7370 6563 742e 7374  mbers(inspect.st
-000144d0: 6163 6b28 295b 315d 5b30 5d29 295b 2266  ack()[1][0]))["f
-000144e0: 5f67 6c6f 6261 6c73 225d 2920 2320 4765  _globals"]) # Ge
-000144f0: 7420 6d79 2070 6172 656e 7427 7320 676c  t my parent's gl
-00014500: 6f62 616c 7328 290a 2020 2020 666f 7263  obals().    forc
-00014510: 653d 6f70 7473 2e67 6574 2827 666f 7263  e=opts.get('forc
-00014520: 6527 2c4e 6f6e 6529 2023 2075 6e6c 6f61  e',None) # unloa
-00014530: 6420 616e 6420 6c6f 6164 2061 6761 696e  d and load again
-00014540: 2077 6865 6e20 616c 7265 6164 7920 6c6f   when already lo
-00014550: 6164 6564 2028 666f 7263 653d 5472 7565  aded (force=True
-00014560: 290a 2020 2020 7265 5f6c 6f61 643d 6f70  ).    re_load=op
-00014570: 7473 2e67 6574 2827 7265 6c6f 6164 272c  ts.get('reload',
-00014580: 4e6f 6e65 2920 2320 2072 756e 2072 656c  None) #  run rel
-00014590: 6f61 6420 7768 656e 2061 6c72 6561 6479  oad when already
-000145a0: 206c 6f61 6465 640a 2020 2020 756e 6c6f   loaded.    unlo
-000145b0: 6164 3d6f 7074 732e 6765 7428 2775 6e6c  ad=opts.get('unl
-000145c0: 6f61 6427 2c46 616c 7365 2920 2320 756e  oad',False) # un
-000145d0: 6c6f 6164 206d 6f64 756c 6520 7768 656e  load module when
-000145e0: 2054 7275 650a 2020 2020 6572 723d 6f70   True.    err=op
-000145f0: 7473 2e67 6574 2827 6572 7227 2c46 616c  ts.get('err',Fal
-00014600: 7365 2920 2320 7368 6f77 2069 6e73 7461  se) # show insta
-00014610: 6c6c 206f 7220 6c6f 6164 696e 6720 6572  ll or loading er
-00014620: 726f 7220 7768 656e 2054 7275 650a 2020  ror when True.  
-00014630: 2020 6465 6661 756c 743d 6f70 7473 2e67    default=opts.g
-00014640: 6574 2827 6465 6661 756c 7427 2c46 616c  et('default',Fal
-00014650: 7365 290a 2020 2020 6462 673d 6f70 7473  se).    dbg=opts
-00014660: 2e67 6574 2827 6462 6727 2c46 616c 7365  .get('dbg',False
-00014670: 2920 2320 7368 6f77 2063 6f6d 6d65 6e74  ) # show comment
-00014680: 2077 6865 6e20 5472 7565 0a20 2020 2061   when True.    a
-00014690: 7574 6f5f 696e 7374 616c 6c3d 6f70 7473  uto_install=opts
-000146a0: 2e67 6574 2827 6175 746f 5f69 6e73 7461  .get('auto_insta
-000146b0: 6c6c 272c 5472 7565 2920 2320 6966 206e  ll',True) # if n
-000146c0: 6f74 2066 6f75 6e64 2074 6865 206d 6f64  ot found the mod
-000146d0: 756c 6520 7468 656e 2061 7574 6f6d 6174  ule then automat
-000146e0: 6963 616c 6c79 2069 6e73 7461 6c6c 0a20  ically install. 
-000146f0: 2020 2072 6571 7569 7265 6d65 6e74 733d     requirements=
-00014700: 6f70 7473 2e67 6574 2827 7265 7175 6972  opts.get('requir
-00014710: 656d 656e 7473 2729 0a20 2020 2023 696e  ements').    #in
-00014720: 7374 616c 6c5f 6163 636f 756e 743d 6f70  stall_account=op
-00014730: 7473 2e67 6574 2827 696e 7374 616c 6c5f  ts.get('install_
-00014740: 6163 636f 756e 7427 2c27 2d2d 7573 6572  account','--user
-00014750: 2729 0a20 2020 2069 6e73 7461 6c6c 5f61  ').    install_a
-00014760: 6363 6f75 6e74 3d6f 7074 732e 6765 7428  ccount=opts.get(
-00014770: 2769 6e73 7461 6c6c 5f61 6363 6f75 6e74  'install_account
-00014780: 272c 2727 2920 2320 272d 2d75 7365 7227  ','') # '--user'
-00014790: 2c27 7573 6572 272c 276d 7961 6363 6f75  ,'user','myaccou
-000147a0: 6e74 272c 2761 6363 6f75 6e74 272c 6d79  nt','account',my
-000147b0: 7365 6c66 2074 6865 6e20 696e 7374 616c  self then instal
-000147c0: 6c20 6174 206d 7920 6c6f 6361 6c20 6163  l at my local ac
-000147d0: 636f 756e 740a 2020 2020 696e 7374 616c  count.    instal
-000147e0: 6c5f 6e61 6d65 3d6f 7074 732e 6765 7428  l_name=opts.get(
-000147f0: 2769 6e73 7461 6c6c 5f6e 616d 6527 290a  'install_name').
-00014800: 0a20 2020 2023 4170 7065 6e64 204d 6f64  .    #Append Mod
-00014810: 756c 6520 5061 7468 0a20 2020 2076 6972  ule Path.    vir
-00014820: 7475 616c 5f65 6e76 3d6f 732e 656e 7669  tual_env=os.envi
-00014830: 726f 6e2e 6765 7428 2756 4952 5455 414c  ron.get('VIRTUAL
-00014840: 5f45 4e56 2729 0a20 2020 2065 6e76 5f62  _ENV').    env_b
-00014850: 6173 655f 6469 723d 7669 7274 7561 6c5f  ase_dir=virtual_
-00014860: 656e 7620 6966 2076 6972 7475 616c 5f65  env if virtual_e
-00014870: 6e76 2065 6c73 6520 272f 7573 7227 0a20  nv else '/usr'. 
-00014880: 2020 2062 6173 655f 6c69 625f 7061 7468     base_lib_path
-00014890: 3d5b 5d0a 2020 2020 7079 5f76 6572 3d50  =[].    py_ver=P
-000148a0: 7956 6572 2829 0a20 2020 2066 6f72 2069  yVer().    for i
-000148b0: 2069 6e20 5b27 6c69 622f 7079 7468 6f6e   in ['lib/python
-000148c0: 7b7d 2f73 6974 652d 7061 636b 6167 6573  {}/site-packages
-000148d0: 272e 666f 726d 6174 2870 795f 7665 7229  '.format(py_ver)
-000148e0: 2c27 6c69 6236 342f 7079 7468 6f6e 7b7d  ,'lib64/python{}
-000148f0: 2f73 6974 652d 7061 636b 6167 6573 272e  /site-packages'.
-00014900: 666f 726d 6174 2870 795f 7665 7229 2c27  format(py_ver),'
-00014910: 6c6f 6361 6c2f 7079 7468 6f6e 7b7d 2f73  local/python{}/s
-00014920: 6974 652d 7061 636b 6167 6573 272e 666f  ite-packages'.fo
-00014930: 726d 6174 2870 795f 7665 7229 2c27 6c6f  rmat(py_ver),'lo
-00014940: 6361 6c2f 6c69 622f 7079 7468 6f6e 7b7d  cal/lib/python{}
-00014950: 2f73 6974 652d 7061 636b 6167 6573 272e  /site-packages'.
-00014960: 666f 726d 6174 2870 795f 7665 7229 2c27  format(py_ver),'
-00014970: 6c6f 6361 6c2f 6c69 6236 342f 7079 7468  local/lib64/pyth
-00014980: 6f6e 7b7d 2f73 6974 652d 7061 636b 6167  on{}/site-packag
-00014990: 6573 272e 666f 726d 6174 2870 795f 7665  es'.format(py_ve
-000149a0: 7229 5d3a 0a20 2020 2020 2020 206a 3d6f  r)]:.        j=o
-000149b0: 732e 7061 7468 2e6a 6f69 6e28 656e 765f  s.path.join(env_
-000149c0: 6261 7365 5f64 6972 2c69 290a 2020 2020  base_dir,i).    
-000149d0: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
-000149e0: 7364 6972 286a 293a 0a20 2020 2020 2020  sdir(j):.       
-000149f0: 2020 2020 2062 6173 655f 6c69 625f 7061       base_lib_pa
-00014a00: 7468 2e61 7070 656e 6428 6a29 0a0a 2020  th.append(j)..  
-00014a10: 2020 7061 7468 3d6f 7074 732e 6765 7428    path=opts.get(
-00014a20: 2770 6174 6827 2920 2320 6966 2074 6865  'path') # if the
-00014a30: 206d 6f64 756c 6520 6669 6c65 2069 6e20   module file in 
-00014a40: 6120 7370 6563 6961 6c20 7061 7468 2074  a special path t
-00014a50: 6865 6e20 6465 6669 6e65 2070 6174 680a  hen define path.
-00014a60: 2020 2020 6966 206e 6f74 2049 734e 6f6e      if not IsNon
-00014a70: 6528 7061 7468 2c63 6865 636b 5f74 7970  e(path,check_typ
-00014a80: 653d 7374 7229 3a0a 2020 2020 2020 2020  e=str):.        
-00014a90: 6966 2027 2c27 2069 6e20 7061 7468 3a0a  if ',' in path:.
-00014aa0: 2020 2020 2020 2020 2020 2020 6261 7365              base
-00014ab0: 5f6c 6962 5f70 6174 683d 6261 7365 5f6c  _lib_path=base_l
-00014ac0: 6962 5f70 6174 682b 7061 7468 2e73 706c  ib_path+path.spl
-00014ad0: 6974 2827 2c27 290a 2020 2020 2020 2020  it(',').        
-00014ae0: 656c 6966 2027 3a27 2069 6e20 7061 7468  elif ':' in path
-00014af0: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
-00014b00: 7365 5f6c 6962 5f70 6174 683d 6261 7365  se_lib_path=base
-00014b10: 5f6c 6962 5f70 6174 682b 7061 7468 2e73  _lib_path+path.s
-00014b20: 706c 6974 2827 3a27 290a 2020 2020 2020  plit(':').      
-00014b30: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00014b40: 2020 2020 6261 7365 5f6c 6962 5f70 6174      base_lib_pat
-00014b50: 683d 6261 7365 5f6c 6962 5f70 6174 682b  h=base_lib_path+
-00014b60: 5b70 6174 685d 0a20 2020 2065 6c69 6620  [path].    elif 
-00014b70: 6973 696e 7374 616e 6365 2870 6174 682c  isinstance(path,
-00014b80: 286c 6973 742c 7475 706c 6529 293a 0a20  (list,tuple)):. 
-00014b90: 2020 2020 2020 2062 6173 655f 6c69 625f         base_lib_
-00014ba0: 7061 7468 3d62 6173 655f 6c69 625f 7061  path=base_lib_pa
-00014bb0: 7468 2b6c 6973 7428 7061 7468 290a 2020  th+list(path).  
-00014bc0: 2020 6966 206e 6f74 2076 6972 7475 616c    if not virtual
-00014bd0: 5f65 6e76 3a0a 2020 2020 2020 2020 686f  _env:.        ho
-00014be0: 6d65 3d50 6174 6828 277e 2729 0a20 2020  me=Path('~').   
-00014bf0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00014c00: 6365 2868 6f6d 652c 7374 7229 3a0a 2020  ce(home,str):.  
-00014c10: 2020 2020 2020 2020 2020 6261 7365 5f6c            base_l
-00014c20: 6962 5f70 6174 682e 6170 7065 6e64 2827  ib_path.append('
-00014c30: 7b7d 2f2e 6c6f 6361 6c2f 6c69 622f 7079  {}/.local/lib/py
-00014c40: 7468 6f6e 332e 362f 7369 7465 2d70 6163  thon3.6/site-pac
-00014c50: 6b61 6765 7327 2e66 6f72 6d61 7428 686f  kages'.format(ho
-00014c60: 6d65 2929 0a20 2020 2020 2020 2066 6f72  me)).        for
-00014c70: 2069 6920 696e 2062 6173 655f 6c69 625f   ii in base_lib_
-00014c80: 7061 7468 3a0a 2020 2020 2020 2020 2020  path:.          
-00014c90: 2020 6966 206f 732e 7061 7468 2e69 7364    if os.path.isd
-00014ca0: 6972 2869 6929 2061 6e64 206e 6f74 2069  ir(ii) and not i
-00014cb0: 6920 696e 2073 7973 2e70 6174 683a 0a20  i in sys.path:. 
-00014cc0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00014cd0: 7973 2e70 6174 682e 6170 7065 6e64 2869  ys.path.append(i
-00014ce0: 6929 0a20 2020 2069 6620 6f73 2e67 6574  i).    if os.get
-00014cf0: 6377 6428 2920 6e6f 7420 696e 2073 7973  cwd() not in sys
-00014d00: 2e70 6174 683a 2073 7973 2e70 6174 683d  .path: sys.path=
-00014d10: 5b6f 732e 6765 7463 7764 2829 5d2b 7379  [os.getcwd()]+sy
-00014d20: 732e 7061 7468 0a0a 2020 2020 6966 206e  s.path..    if n
-00014d30: 6f74 2076 6972 7475 616c 5f65 6e76 2061  ot virtual_env a
-00014d40: 6e64 2069 6e73 7461 6c6c 5f61 6363 6f75  nd install_accou
-00014d50: 6e74 2069 6e20 5b27 7573 6572 272c 272d  nt in ['user','-
-00014d60: 2d75 7365 7227 2c27 7065 7273 6f6e 616c  -user','personal
-00014d70: 272c 276d 7961 6363 6f75 6e74 272c 2761  ','myaccount','a
-00014d80: 6363 6f75 6e74 272c 276d 7973 656c 6627  ccount','myself'
-00014d90: 5d3a 0a20 2020 2020 2020 2069 6e73 7461  ]:.        insta
-00014da0: 6c6c 5f61 6363 6f75 6e74 3d27 2d2d 7573  ll_account='--us
-00014db0: 6572 270a 2020 2020 656c 7365 3a0a 2020  er'.    else:.  
-00014dc0: 2020 2020 2020 696e 7374 616c 6c5f 6163        install_ac
-00014dd0: 636f 756e 743d 2727 0a0a 2020 2020 6465  count=''..    de
-00014de0: 6620 4368 6563 6b4f 626a 286f 626a 293a  f CheckObj(obj):
-00014df0: 0a20 2020 2020 2020 206f 626a 5f64 6972  .        obj_dir
-00014e00: 3d64 6972 286f 626a 290a 2020 2020 2020  =dir(obj).      
-00014e10: 2020 6f62 6a5f 6e61 6d65 3d74 7970 6528    obj_name=type(
-00014e20: 6f62 6a29 2e5f 5f6e 616d 655f 5f0a 2020  obj).__name__.  
-00014e30: 2020 2020 2020 6966 206f 626a 5f6e 616d        if obj_nam
-00014e40: 6520 696e 205b 2766 756e 6374 696f 6e27  e in ['function'
-00014e50: 5d3a 2072 6574 7572 6e20 6f62 6a5f 6e61  ]: return obj_na
-00014e60: 6d65 0a20 2020 2020 2020 2069 6620 275f  me.        if '_
-00014e70: 5f64 6963 745f 5f27 2069 6e20 6f62 6a5f  _dict__' in obj_
-00014e80: 6469 723a 0a20 2020 2020 2020 2020 2020  dir:.           
-00014e90: 2069 6620 6f62 6a5f 6e61 6d65 203d 3d20   if obj_name == 
-00014ea0: 2774 7970 6527 3a20 7265 7475 726e 2027  'type': return '
-00014eb0: 636c 6173 736f 626a 270a 2020 2020 2020  classobj'.      
-00014ec0: 2020 2020 2020 7265 7475 726e 2027 696e        return 'in
-00014ed0: 7374 616e 6365 270a 2020 2020 2020 2020  stance'.        
-00014ee0: 7265 7475 726e 206f 626a 5f6e 616d 652e  return obj_name.
-00014ef0: 6c6f 7765 7228 290a 0a20 2020 206e 696e  lower()..    nin
-00014f00: 7073 3d5b 5d0a 2020 2020 666f 7220 696e  ps=[].    for in
-00014f10: 7020 696e 2069 6e70 733a 0a20 2020 2020  p in inps:.     
-00014f20: 2020 206e 696e 7073 3d6e 696e 7073 2b69     ninps=ninps+i
-00014f30: 6e70 2e73 706c 6974 2827 2c27 290a 2020  np.split(',').  
-00014f40: 2020 6c6f 6164 5f66 6169 6c65 643d 5b5d    load_failed=[]
-00014f50: 0a20 2020 2066 6f72 2069 6e70 2069 6e20  .    for inp in 
-00014f60: 6e69 6e70 733a 0a20 2020 2020 2020 2023  ninps:.        #
-00014f70: 2069 6620 696e 7020 6973 2046 696c 6520   if inp is File 
-00014f80: 7468 656e 2061 7574 6f6d 6174 6963 616c  then automatical
-00014f90: 6c79 2067 6574 2074 6865 2050 6174 6820  ly get the Path 
-00014fa0: 616e 6420 6669 6c65 206e 616d 650a 2020  and file name.  
-00014fb0: 2020 2020 2020 2320 616e 6420 6175 746f        # and auto
-00014fc0: 6d61 7469 6361 6c6c 7920 6164 6469 6e67  matically adding
-00014fd0: 2050 6174 6820 746f 2070 6174 6820 616e   Path to path an
-00014fe0: 6420 696d 706f 7274 2074 6865 2046 696c  d import the Fil
-00014ff0: 6520 4e61 6d65 0a20 2020 2020 2020 2069  e Name.        i
-00015000: 6620 6f73 2e70 6174 682e 6973 6669 6c65  f os.path.isfile
-00015010: 2869 6e70 293a 2023 2073 7065 6369 616c  (inp): # special
-00015020: 2066 696c 6520 6d6f 6475 6c65 0a20 2020   file module.   
-00015030: 2020 2020 2020 2020 2069 7061 7468 3d6f           ipath=o
-00015040: 732e 7061 7468 2e64 6972 6e61 6d65 2869  s.path.dirname(i
-00015050: 6e70 290a 2020 2020 2020 2020 2020 2020  np).            
-00015060: 6966 696c 653d 6f73 2e70 6174 682e 6261  ifile=os.path.ba
-00015070: 7365 6e61 6d65 2869 6e70 290a 2020 2020  sename(inp).    
-00015080: 2020 2020 2020 2020 6966 696c 655f 613d          ifile_a=
-00015090: 6966 696c 652e 7370 6c69 7428 272e 2729  ifile.split('.')
-000150a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000150b0: 6c65 6e28 6966 696c 655f 6129 203e 2032  len(ifile_a) > 2
-000150c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000150d0: 2020 6966 2064 6267 3a0a 2020 2020 2020    if dbg:.      
-000150e0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-000150f0: 696e 7428 272a 2a2a 204e 6f74 2073 7570  int('*** Not sup
-00015100: 706f 7274 207b 7d20 6669 6c65 6e61 6d65  port {} filename
-00015110: 272e 666f 726d 6174 2869 6e70 2929 0a20  '.format(inp)). 
-00015120: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00015130: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-00015140: 2020 2020 696e 703d 6966 696c 655f 615b      inp=ifile_a[
-00015150: 305d 0a20 2020 2020 2020 2020 2020 2069  0].            i
-00015160: 6620 6970 6174 6820 6e6f 7420 696e 2073  f ipath not in s
-00015170: 7973 2e70 6174 683a 0a20 2020 2020 2020  ys.path:.       
-00015180: 2020 2020 2020 2020 2073 7973 2e70 6174           sys.pat
-00015190: 683d 5b69 7061 7468 5d2b 7379 732e 7061  h=[ipath]+sys.pa
-000151a0: 7468 0a20 2020 2020 2020 2020 2020 206c  th.            l
-000151b0: 6f61 6465 642c 6d6f 6475 6c65 3d4d 6f64  oaded,module=Mod
-000151c0: 4c6f 6164 2869 6e70 2c66 6f72 6365 3d66  Load(inp,force=f
-000151d0: 6f72 6365 2c67 6c6f 6261 6c65 6e76 3d67  orce,globalenv=g
-000151e0: 6c6f 6261 6c65 6e76 2c75 6e6c 6f61 643d  lobalenv,unload=
-000151f0: 756e 6c6f 6164 2c72 655f 6c6f 6164 3d72  unload,re_load=r
-00015200: 655f 6c6f 6164 290a 2020 2020 2020 2020  e_load).        
-00015210: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-00015220: 2020 2020 2065 6c73 653a 2023 2043 6865       else: # Che
-00015230: 636b 204c 6f63 616c 2046 696c 650a 2020  ck Local File.  
-00015240: 2020 2020 2020 2020 2020 696e 705f 613d            inp_a=
-00015250: 696e 702e 7370 6c69 7428 290a 2020 2020  inp.split().    
-00015260: 2020 2020 2020 2020 696e 705f 6368 6b5f          inp_chk_
-00015270: 6669 6c65 3d27 7b7d 2e70 7927 2e66 6f72  file='{}.py'.for
-00015280: 6d61 7428 696e 705f 615b 315d 2069 6620  mat(inp_a[1] if 
-00015290: 696e 705f 615b 305d 2069 6e20 5b27 696d  inp_a[0] in ['im
-000152a0: 706f 7274 272c 2766 726f 6d27 5d20 656c  port','from'] el
-000152b0: 7365 2069 6e70 290a 2020 2020 2020 2020  se inp).        
-000152c0: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
-000152d0: 7366 696c 6528 696e 705f 6368 6b5f 6669  sfile(inp_chk_fi
-000152e0: 6c65 293a 0a20 2020 2020 2020 2020 2020  le):.           
-000152f0: 2020 2020 206c 6f61 6465 642c 6d6f 6475       loaded,modu
-00015300: 6c65 3d4d 6f64 4c6f 6164 2869 6e70 2c66  le=ModLoad(inp,f
-00015310: 6f72 6365 3d66 6f72 6365 2c67 6c6f 6261  orce=force,globa
-00015320: 6c65 6e76 3d67 6c6f 6261 6c65 6e76 2c75  lenv=globalenv,u
-00015330: 6e6c 6f61 643d 756e 6c6f 6164 2c72 655f  nload=unload,re_
-00015340: 6c6f 6164 3d72 655f 6c6f 6164 290a 2020  load=re_load).  
-00015350: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00015360: 6e74 696e 7565 0a20 2020 2020 2020 2069  ntinue.        i
-00015370: 6e70 5f61 3d69 6e70 2e73 706c 6974 2829  np_a=inp.split()
-00015380: 0a20 2020 2020 2020 2076 6572 7369 6f6e  .        version
-00015390: 3d4e 6f6e 650a 2020 2020 2020 2020 7665  =None.        ve
-000153a0: 725f 636f 6d70 6172 653d 4e6f 6e65 0a20  r_compare=None. 
-000153b0: 2020 2020 2020 2069 6620 6c65 6e28 696e         if len(in
-000153c0: 705f 6129 2069 6e20 5b31 2c32 5d20 616e  p_a) in [1,2] an
-000153d0: 6420 696e 705f 615b 305d 2069 6e20 5b27  d inp_a[0] in ['
-000153e0: 7265 7175 6972 6527 2c27 7265 7175 6972  require','requir
-000153f0: 656d 656e 7427 5d3a 0a20 2020 2020 2020  ement']:.       
-00015400: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
-00015410: 6973 6669 6c65 2869 6e70 5f61 5b31 5d29  isfile(inp_a[1])
-00015420: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00015430: 2020 7271 3d5b 5d0a 2020 2020 2020 2020    rq=[].        
-00015440: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-00015450: 6e28 696e 705f 615b 315d 2920 6173 2066  n(inp_a[1]) as f
-00015460: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00015470: 2020 2020 2020 7271 3d66 2e72 6561 6428        rq=f.read(
-00015480: 292e 7370 6c69 7428 275c 6e27 290a 2020  ).split('\n').  
-00015490: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-000154a0: 7220 6969 2069 6e20 7271 3a0a 2020 2020  r ii in rq:.    
-000154b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154c0: 6966 206e 6f74 2069 693a 2063 6f6e 7469  if not ii: conti
-000154d0: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
-000154e0: 2020 2020 2020 2020 6969 5f6c 3d69 692e          ii_l=ii.
-000154f0: 7370 6c69 7428 290a 2020 2020 2020 2020  split().        
-00015500: 2020 2020 2020 2020 2020 2020 7665 7273              vers
-00015510: 696f 6e3d 4e6f 6e65 0a20 2020 2020 2020  ion=None.       
-00015520: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00015530: 6c65 6e28 6969 5f6c 2920 696e 205b 322c  len(ii_l) in [2,
-00015540: 335d 3a0a 2020 2020 2020 2020 2020 2020  3]:.            
-00015550: 2020 2020 2020 2020 2020 2020 6966 2027              if '
-00015560: 3d27 2069 6e20 6969 5f6c 5b31 5d20 6f72  =' in ii_l[1] or
-00015570: 2027 3e27 2069 6e20 6969 5f6c 5b31 5d20   '>' in ii_l[1] 
-00015580: 6f72 2027 3c27 2069 6e20 6969 5f6c 5b31  or '<' in ii_l[1
-00015590: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-000155a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000155b0: 6620 6c65 6e28 6969 5f6c 2920 3d3d 2033  f len(ii_l) == 3
-000155c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000155d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000155e0: 2020 7665 7273 696f 6e3d 6969 5f6c 5b31    version=ii_l[1
-000155f0: 5d2b 6969 5f6c 5b32 5d0a 2020 2020 2020  ]+ii_l[2].      
+0000ab60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab70: 2020 2020 2020 2066 6f75 6e64 2e61 7070         found.app
+0000ab80: 656e 6428 6d6d 5b69 6478 5d29 0a20 2020  end(mm[idx]).   
+0000ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aba0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000abb0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000abd0: 2020 2020 2020 2069 6620 6c69 6e65 5f6e         if line_n
+0000abe0: 756d 3a0a 2020 2020 2020 2020 2020 2020  um:.            
+0000abf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac00: 2020 2020 2020 2020 2020 2020 666f 756e              foun
+0000ac10: 642e 6170 7065 6e64 2828 6d6d 2c6e 6e2c  d.append((mm,nn,
+0000ac20: 7374 7269 6e67 5f61 5b6e 6e5d 2929 0a20  string_a[nn])). 
+0000ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac50: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000ac60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac80: 2066 6f75 6e64 2e61 7070 656e 6428 6d6d   found.append(mm
+0000ac90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000aca0: 2020 2020 2020 2369 6620 666f 756e 643a        #if found:
+0000acb0: 7265 7475 726e 204f 7574 466f 726d 6174  return OutFormat
+0000acc0: 2866 6f75 6e64 2c6f 7574 3d6f 7574 2c70  (found,out=out,p
+0000acd0: 6565 6c3d 7065 656c 290a 2020 2020 2020  eel=peel).      
+0000ace0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000acf0: 7475 726e 204f 7574 466f 726d 6174 2866  turn OutFormat(f
+0000ad00: 6f75 6e64 2c6f 7574 3d6f 7574 2c70 6565  ound,out=out,pee
+0000ad10: 6c3d 7065 656c 2c6f 7267 3d73 7263 2c64  l=peel,org=src,d
+0000ad20: 6566 6175 6c74 3d64 6566 6175 6c74 290a  efault=default).
+0000ad30: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000ad40: 206d 6174 6368 3d66 696e 645f 7265 2e66   match=find_re.f
+0000ad50: 696e 6461 6c6c 2873 7263 290a 2320 2020  indall(src).#   
+0000ad60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000ad70: 6d61 7463 683a 2072 6574 7572 6e20 4f75  match: return Ou
+0000ad80: 7446 6f72 6d61 7428 6d61 7463 682c 6f75  tFormat(match,ou
+0000ad90: 743d 6f75 7429 0a20 2020 2020 2020 2020  t=out).         
+0000ada0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+0000adb0: 6365 2866 696e 642c 7374 7229 3a0a 2020  ce(find,str):.  
+0000adc0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000add0: 2077 6f72 643a 0a20 2020 2020 2020 2020   word:.         
+0000ade0: 2020 2020 2020 2020 2020 2066 696e 645f             find_
+0000adf0: 7265 3d72 652e 636f 6d70 696c 6528 7227  re=re.compile(r'
+0000ae00: 5c62 287b 307d 295c 6227 2e66 6f72 6d61  \b({0})\b'.forma
+0000ae10: 7428 6669 6e64 292c 666c 6167 733d 7265  t(find),flags=re
+0000ae20: 2e49 474e 4f52 4543 4153 4529 0a20 2020  .IGNORECASE).   
+0000ae30: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000ae40: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000ae50: 2020 2020 2020 2066 696e 645f 7265 3d72         find_re=r
+0000ae60: 652e 636f 6d70 696c 6528 6669 6e64 2c66  e.compile(find,f
+0000ae70: 6c61 6773 3d72 652e 4947 4e4f 5245 4341  lags=re.IGNORECA
+0000ae80: 5345 290a 2020 2020 2020 2020 2020 2020  SE).            
+0000ae90: 2020 2020 6d61 7463 683d 6669 6e64 5f72      match=find_r
+0000aea0: 652e 7365 6172 6368 2873 7263 290a 2020  e.search(src).  
+0000aeb0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000aec0: 206d 6174 6368 3a20 7265 7475 726e 204f   match: return O
+0000aed0: 7574 466f 726d 6174 285b 6d61 7463 682e  utFormat([match.
+0000aee0: 6772 6f75 7028 295d 2c6f 7574 3d6f 7574  group()],out=out
+0000aef0: 2c70 6565 6c3d 7065 656c 290a 2020 2020  ,peel=peel).    
+0000af00: 2020 2020 2372 6574 7572 6e20 4f75 7446      #return OutF
+0000af10: 6f72 6d61 7428 6465 6661 756c 742c 6f75  ormat(default,ou
+0000af20: 743d 6f75 742c 7065 656c 3d70 6565 6c29  t=out,peel=peel)
+0000af30: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000af40: 4f75 7446 6f72 6d61 7428 5b5d 2c6f 7574  OutFormat([],out
+0000af50: 3d6f 7574 2c70 6565 6c3d 7065 656c 2c6f  =out,peel=peel,o
+0000af60: 7267 3d73 7263 2c64 6566 6175 6c74 3d64  rg=src,default=d
+0000af70: 6566 6175 6c74 290a 6465 6620 466f 756e  efault).def Foun
+0000af80: 6428 6461 7461 2c66 696e 642c 6469 6769  d(data,find,digi
+0000af90: 7473 7472 696e 673d 4661 6c73 652c 776f  tstring=False,wo
+0000afa0: 7264 3d46 616c 7365 2c77 6869 7465 5f73  rd=False,white_s
+0000afb0: 7061 6365 3d54 7275 652c 7365 6e73 653d  pace=True,sense=
+0000afc0: 5472 7565 2c6c 6f63 6174 696f 6e3d 4661  True,location=Fa
+0000afd0: 6c73 652c 7079 7468 6f6e 6c69 6b65 3d46  lse,pythonlike=F
+0000afe0: 616c 7365 293a 0a20 2020 2027 2727 0a20  alse):.    '''. 
+0000aff0: 2020 2069 6620 666f 756e 6420 3c66 696e     if found <fin
+0000b000: 643e 2069 6e20 3c64 6174 613e 2074 6865  d> in <data> the
+0000b010: 6e20 7265 7475 726e 2054 7275 652c 206e  n return True, n
+0000b020: 6f74 2074 6865 6e20 4661 6c73 650a 2020  ot then False.  
+0000b030: 2020 4966 2066 696e 6420 225b 416c 6c5d    If find "[All]
+0000b040: 2220 7468 656e 2079 6f75 2063 616e 2074  " then you can t
+0000b050: 7970 6520 225c 5b41 6c6c 5c5d 2220 6174  ype "\[All\]" at
+0000b060: 2074 6865 203c 6669 6e64 3e20 6c6f 6361   the <find> loca
+0000b070: 7469 6f6e 0a20 2020 2069 6620 6e6f 7420  tion.    if not 
+0000b080: 7468 656e 2022 5b5d 2220 7769 6c6c 2062  then "[]" will b
+0000b090: 6520 776f 726b 2077 6974 6820 7265 2065  e work with re e
+0000b0a0: 7870 7265 7373 696f 6e0a 2020 2020 3c66  xpression.    <f
+0000b0b0: 696e 643e 2072 756c 653a 0a20 2020 2020  ind> rule:.     
+0000b0c0: 2020 7265 2e63 6f6d 7069 6c65 2072 6567    re.compile reg
+0000b0d0: 756c 6172 2065 7870 7265 7373 696f 6e0a  ular expression.
+0000b0e0: 2020 2020 2020 2061 6e79 206b 6565 7020         any keep 
+0000b0f0: 6368 6172 6163 7465 7273 2020 3a20 2a0a  characters  : *.
+0000b100: 2020 2020 2020 2061 6e79 2073 696e 676c         any singl
+0000b110: 6520 6368 6172 6163 7465 7220 3a20 3f0a  e character : ?.
+0000b120: 2020 2020 2020 205e 2020 2020 2020 2020         ^        
+0000b130: 2020 2020 2020 2020 2020 2020 3a20 7374              : st
+0000b140: 6172 740a 2020 2020 2020 2024 2020 2020  art.       $    
+0000b150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b160: 3a20 656e 640a 2020 2020 3c6f 7074 696f  : end.    <optio
+0000b170: 6e3e 0a20 2020 2020 2020 7365 6e73 6520  n>.       sense 
+0000b180: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0000b190: 2054 7275 653a 2864 6566 6175 6c74 2920   True:(default) 
+0000b1a0: 7365 6e73 6574 6976 652c 2046 616c 7365  sensetive, False
+0000b1b0: 3a20 6c6f 7765 7220 616e 6420 7570 7065  : lower and uppe
+0000b1c0: 7220 6973 2073 616d 650a 2020 2020 2020  r is same.      
+0000b1d0: 2077 6869 7465 5f73 7061 6365 2020 2020   white_space    
+0000b1e0: 2020 2020 2020 3a20 5472 7565 3a28 6465        : True:(de
+0000b1f0: 6661 756c 7429 206b 6565 7020 7768 6974  fault) keep whit
+0000b200: 655f 7370 6163 652c 2046 616c 7365 3a20  e_space, False: 
+0000b210: 6967 6e6f 7265 2077 6869 7465 5f73 7061  ignore white_spa
+0000b220: 6365 0a20 2020 2020 2020 776f 7264 2020  ce.       word  
+0000b230: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+0000b240: 2054 7275 653a 203c 6669 6e64 3e20 6973   True: <find> is
+0000b250: 2063 6f72 7265 6374 2077 6f72 642c 2046   correct word, F
+0000b260: 616c 7365 3a28 6465 6661 756c 7429 203c  alse:(default) <
+0000b270: 6669 6e64 3e20 696e 2069 6e73 6465 2073  find> in insde s
+0000b280: 7472 696e 670a 2020 2020 2020 2064 6967  tring.       dig
+0000b290: 6974 7374 7269 6e67 2020 2020 2020 2020  itstring        
+0000b2a0: 2020 3a20 5472 7565 3a20 7374 7269 6e67    : True: string
+0000b2b0: 2061 6e64 2069 6e74 6967 6572 2069 7320   and intiger is 
+0000b2c0: 7361 6d65 2c20 4661 6c73 653a 2864 6566  same, False:(def
+0000b2d0: 6175 6c74 2920 6469 6666 6572 656e 740a  ault) different.
+0000b2e0: 2020 2020 2020 206c 6f63 6174 696f 6e20         location 
+0000b2f0: 2020 2020 2020 2020 2020 2020 3a20 5472              : Tr
+0000b300: 7565 3a20 7265 7475 726e 2066 6f75 6e64  ue: return found
+0000b310: 206c 6f63 6174 696f 6e20 6578 3a28 332c   location ex:(3,
+0000b320: 3130 292c 2046 616c 7365 3a28 6465 6661  10), False:(defa
+0000b330: 756c 7429 2072 6574 7572 6e20 5472 7565  ult) return True
+0000b340: 2f46 616c 7365 0a20 2020 2027 2727 0a20  /False.    '''. 
+0000b350: 2020 2064 6566 205f 466f 756e 645f 2864     def _Found_(d
+0000b360: 6174 612c 6669 6e64 2c77 6f72 642c 7365  ata,find,word,se
+0000b370: 6e73 652c 6c6f 6361 7469 6f6e 293a 0a20  nse,location):. 
+0000b380: 2020 2020 2020 2064 6174 615f 7479 7065         data_type
+0000b390: 3d74 7970 6528 6461 7461 292e 5f5f 6e61  =type(data).__na
+0000b3a0: 6d65 5f5f 0a20 2020 2020 2020 2069 6620  me__.        if 
+0000b3b0: 6461 7461 5f74 7970 6520 3d3d 2027 6279  data_type == 'by
+0000b3c0: 7465 7327 3a0a 2020 2020 2020 2020 2020  tes':.          
+0000b3d0: 2020 6669 6e64 3d42 7974 6573 2866 696e    find=Bytes(fin
+0000b3e0: 6429 0a20 2020 2020 2020 2065 6c69 6620  d).        elif 
+0000b3f0: 6461 7461 5f74 7970 6520 3d3d 2027 7374  data_type == 'st
+0000b400: 7227 3a0a 2020 2020 2020 2020 2020 2020  r':.            
+0000b410: 6669 6e64 3d53 7472 2866 696e 6429 0a20  find=Str(find). 
+0000b420: 2020 2020 2020 2069 6620 6461 7461 203d         if data =
+0000b430: 3d20 6669 6e64 3a20 2353 616d 6520 4461  = find: #Same Da
+0000b440: 7461 0a20 2020 2020 2020 2020 2020 2069  ta.            i
+0000b450: 6620 6c6f 6361 7469 6f6e 3a20 7265 7475  f location: retu
+0000b460: 726e 205b 2830 2c6c 656e 2864 6174 6129  rn [(0,len(data)
+0000b470: 295d 0a20 2020 2020 2020 2020 2020 2072  )].            r
+0000b480: 6574 7572 6e20 5472 7565 200a 2020 2020  eturn True .    
+0000b490: 2020 2020 6966 2064 6174 615f 7479 7065      if data_type
+0000b4a0: 203d 3d20 2762 7974 6573 273a 0a20 2020   == 'bytes':.   
+0000b4b0: 2020 2020 2020 2020 2066 696e 643d 6669           find=fi
+0000b4c0: 6e64 2e72 6570 6c61 6365 2862 272a 272c  nd.replace(b'*',
+0000b4d0: 6227 2e2b 2729 2e72 6570 6c61 6365 2862  b'.+').replace(b
+0000b4e0: 273f 272c 6227 2e27 2920 2320 4669 7820  '?',b'.') # Fix 
+0000b4f0: 2a20 6f72 203f 2063 6173 650a 2020 2020  * or ? case.    
+0000b500: 2020 2020 2020 2020 6966 2077 6f72 6420          if word 
+0000b510: 616e 6420 6669 6e64 3a20 6669 6e64 3d42  and find: find=B
+0000b520: 7974 6573 2872 275c 6228 2729 2b66 696e  ytes(r'\b(')+fin
+0000b530: 642b 4279 7465 7328 2729 5c62 2729 0a20  d+Bytes(')\b'). 
+0000b540: 2020 2020 2020 2065 6c69 6620 6461 7461         elif data
+0000b550: 5f74 7970 6520 3d3d 2027 7374 7227 3a0a  _type == 'str':.
+0000b560: 2020 2020 2020 2020 2020 2020 6669 6e64              find
+0000b570: 3d66 696e 642e 7265 706c 6163 6528 272a  =find.replace('*
+0000b580: 272c 272e 2b27 292e 7265 706c 6163 6528  ','.+').replace(
+0000b590: 273f 272c 272e 2729 2023 2046 6978 202a  '?','.') # Fix *
+0000b5a0: 206f 7220 3f20 6361 7365 0a20 2020 2020   or ? case.     
+0000b5b0: 2020 2020 2020 2069 6620 776f 7264 2061         if word a
+0000b5c0: 6e64 2066 696e 643a 2066 696e 643d 7227  nd find: find=r'
+0000b5d0: 5c62 287b 307d 295c 6227 2e66 6f72 6d61  \b({0})\b'.forma
+0000b5e0: 7428 6669 6e64 290a 2020 2020 2020 2020  t(find).        
+0000b5f0: 6966 206e 6f74 2066 696e 643a 2072 6574  if not find: ret
+0000b600: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+0000b610: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+0000b620: 2020 2069 6620 7365 6e73 653a 0a20 2020     if sense:.   
+0000b630: 2020 2020 2020 2020 2020 2020 206d 6d3d               mm=
+0000b640: 7265 2e63 6f6d 7069 6c65 2866 696e 6429  re.compile(find)
+0000b650: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0000b660: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000b670: 2020 206d 6d3d 7265 2e63 6f6d 7069 6c65     mm=re.compile
+0000b680: 2866 696e 642c 666c 6167 733d 7265 2e49  (find,flags=re.I
+0000b690: 474e 4f52 4543 4153 4529 0a20 2020 2020  GNORECASE).     
+0000b6a0: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+0000b6b0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0000b6c0: 6c73 650a 2020 2020 2020 2020 2369 6620  lse.        #if 
+0000b6d0: 776f 7264 3a0a 2020 2020 2020 2020 2320  word:.        # 
+0000b6e0: 2020 2066 663d 7265 2e6d 6174 6368 286d     ff=re.match(m
+0000b6f0: 6d2c 6461 7461 2920 2320 4669 6e64 2046  m,data) # Find F
+0000b700: 6972 7374 204d 6174 6368 6564 2877 6f72  irst Matched(wor
+0000b710: 6420 7479 7065 2920 6c6f 6361 7469 6f6e  d type) location
+0000b720: 0a20 2020 2020 2020 2023 656c 7365 3a0a  .        #else:.
+0000b730: 2020 2020 2020 2020 2320 2020 2023 6666          #    #ff
+0000b740: 3d6d 6d2e 6669 6e64 616c 6c28 6461 7461  =mm.findall(data
+0000b750: 2920 2320 4669 6e64 2041 6c6c 2044 6174  ) # Find All Dat
+0000b760: 610a 2020 2020 2020 2020 6666 3d6d 6d2e  a.        ff=mm.
+0000b770: 6669 6e64 6974 6572 2864 6174 6129 0a20  finditer(data). 
+0000b780: 2020 2020 2020 2069 6620 626f 6f6c 2866         if bool(f
+0000b790: 6629 3a0a 2020 2020 2020 2020 2020 2020  f):.            
+0000b7a0: 7274 3d5b 5d0a 2020 2020 2020 2020 2020  rt=[].          
+0000b7b0: 2020 666f 7220 6920 696e 206c 6973 7428    for i in list(
+0000b7c0: 6666 293a 2023 2077 6865 6e20 6368 616e  ff): # when chan
+0000b7d0: 6765 206c 6973 7428 6666 2920 7468 656e  ge list(ff) then
+0000b7e0: 206c 6f73 7420 6461 7461 0a20 2020 2020   lost data.     
+0000b7f0: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+0000b800: 7065 6e64 2869 2e73 7061 6e28 2929 0a20  pend(i.span()). 
+0000b810: 2020 2020 2020 2020 2020 2069 6620 6c6f             if lo
+0000b820: 6361 7469 6f6e 3a20 7265 7475 726e 2072  cation: return r
+0000b830: 740a 2020 2020 2020 2020 2020 2020 7265  t.            re
+0000b840: 7475 726e 2054 7275 6520 6966 2072 7420  turn True if rt 
+0000b850: 656c 7365 2046 616c 7365 0a20 2020 2020  else False.     
+0000b860: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+0000b870: 0a20 2020 2064 6174 613d 5768 6974 6553  .    data=WhiteS
+0000b880: 7472 6970 2864 6174 612c 426f 6f6c 4f70  trip(data,BoolOp
+0000b890: 6572 6174 696f 6e28 7768 6974 655f 7370  eration(white_sp
+0000b8a0: 6163 652c 6d6f 6465 3d27 6f70 7069 7369  ace,mode='oppisi
+0000b8b0: 7427 2929 0a20 2020 2074 7970 655f 6461  t')).    type_da
+0000b8c0: 7461 3d74 7970 6528 6461 7461 292e 5f5f  ta=type(data).__
+0000b8d0: 6e61 6d65 5f5f 0a20 2020 2074 7970 655f  name__.    type_
+0000b8e0: 6669 6e64 3d74 7970 6528 6669 6e64 292e  find=type(find).
+0000b8f0: 5f5f 6e61 6d65 5f5f 0a20 2020 2069 6620  __name__.    if 
+0000b900: 7079 7468 6f6e 6c69 6b65 3a0a 2020 2020  pythonlike:.    
+0000b910: 2020 2020 6966 2074 7970 655f 6461 7461      if type_data
+0000b920: 2069 6e20 5b27 4e6f 6e65 5479 7065 272c   in ['NoneType',
+0000b930: 2762 6f6f 6c27 2c27 7374 7227 5d3a 0a20  'bool','str']:. 
+0000b940: 2020 2020 2020 2020 2020 2064 6174 613d             data=
+0000b950: 277b 7d27 2e66 6f72 6d61 7428 6461 7461  '{}'.format(data
+0000b960: 292e 6361 7069 7461 6c69 7a65 2829 0a20  ).capitalize(). 
+0000b970: 2020 2020 2020 2020 2020 2069 6620 6461             if da
+0000b980: 7461 203d 3d20 274e 756c 6c27 3a20 6461  ta == 'Null': da
+0000b990: 7461 3d27 4e6f 6e65 270a 2020 2020 2020  ta='None'.      
+0000b9a0: 2020 2020 2020 7479 7065 5f64 6174 613d        type_data=
+0000b9b0: 2773 7472 270a 2020 2020 2020 2020 6966  'str'.        if
+0000b9c0: 2074 7970 655f 6669 6e64 2069 6e20 5b27   type_find in ['
+0000b9d0: 4e6f 6e65 5479 7065 272c 2762 6f6f 6c27  NoneType','bool'
+0000b9e0: 2c27 7374 7227 5d3a 0a20 2020 2020 2020  ,'str']:.       
+0000b9f0: 2020 2020 2066 696e 643d 277b 7d27 2e66       find='{}'.f
+0000ba00: 6f72 6d61 7428 6669 6e64 292e 6361 7069  ormat(find).capi
+0000ba10: 7461 6c69 7a65 2829 0a20 2020 2020 2020  talize().       
+0000ba20: 2020 2020 2069 6620 6669 6e64 203d 3d20       if find == 
+0000ba30: 274e 756c 6c27 3a20 6669 6e64 3d27 4e6f  'Null': find='No
+0000ba40: 6e65 270a 2020 2020 2020 2020 2020 2020  ne'.            
+0000ba50: 7479 7065 5f66 696e 643d 2773 7472 270a  type_find='str'.
+0000ba60: 2020 2020 6966 2064 6967 6974 7374 7269      if digitstri
+0000ba70: 6e67 3a0a 2020 2020 2020 2020 6966 2074  ng:.        if t
+0000ba80: 7970 655f 6461 7461 2069 6e20 5b27 696e  ype_data in ['in
+0000ba90: 7427 2c27 666c 6f61 7427 5d3a 0a20 2020  t','float']:.   
+0000baa0: 2020 2020 2020 2020 2064 6174 613d 277b           data='{
+0000bab0: 7d27 2e66 6f72 6d61 7428 6461 7461 290a  }'.format(data).
+0000bac0: 2020 2020 2020 2020 2020 2020 7479 7065              type
+0000bad0: 5f64 6174 613d 2773 7472 270a 2020 2020  _data='str'.    
+0000bae0: 2020 2020 6966 2074 7970 655f 6669 6e64      if type_find
+0000baf0: 2069 6e20 5b27 696e 7427 2c27 666c 6f61   in ['int','floa
+0000bb00: 7427 5d3a 0a20 2020 2020 2020 2020 2020  t']:.           
+0000bb10: 2066 696e 643d 277b 7d27 2e66 6f72 6d61   find='{}'.forma
+0000bb20: 7428 6669 6e64 290a 2020 2020 2020 2020  t(find).        
+0000bb30: 2020 2020 7479 7065 5f66 696e 643d 2773      type_find='s
+0000bb40: 7472 270a 2020 2020 6966 2074 7970 655f  tr'.    if type_
+0000bb50: 6461 7461 2069 6e20 5b27 7374 7227 2c27  data in ['str','
+0000bb60: 6279 7465 7327 5d20 616e 6420 7479 7065  bytes'] and type
+0000bb70: 5f66 696e 6420 696e 205b 2773 7472 272c  _find in ['str',
+0000bb80: 2762 7974 6573 275d 3a0a 2020 2020 2020  'bytes']:.      
+0000bb90: 2020 7265 7475 726e 205f 466f 756e 645f    return _Found_
+0000bba0: 2864 6174 612c 6669 6e64 2c77 6f72 642c  (data,find,word,
+0000bbb0: 7365 6e73 652c 6c6f 6361 7469 6f6e 290a  sense,location).
+0000bbc0: 2020 2020 7265 7475 726e 2064 6174 6120      return data 
+0000bbd0: 3d3d 2066 696e 640a 0a64 6566 2049 7353  == find..def IsS
+0000bbe0: 616d 6528 7372 632c 6465 7374 2c73 656e  ame(src,dest,sen
+0000bbf0: 7365 3d46 616c 7365 2c6f 7264 6572 3d46  se=False,order=F
+0000bc00: 616c 7365 2c5f 7479 7065 5f3d 4661 6c73  alse,_type_=Fals
+0000bc10: 652c 6469 6769 7473 7472 696e 673d 5472  e,digitstring=Tr
+0000bc20: 7565 2c77 6869 7465 5f73 7061 6365 3d46  ue,white_space=F
+0000bc30: 616c 7365 2c70 7974 686f 6e6c 696b 653d  alse,pythonlike=
+0000bc40: 4661 6c73 652c 6967 6e6f 7265 5f6b 6579  False,ignore_key
+0000bc50: 733d 5b5d 293a 0a20 2020 2027 2727 0a20  s=[]):.    '''. 
+0000bc60: 2020 2072 6574 7572 6e20 5472 7565 2f46     return True/F
+0000bc70: 616c 7365 0a20 2020 2043 6865 636b 2073  alse.    Check s
+0000bc80: 616d 6520 6461 7461 206f 7220 6e6f 7420  ame data or not 
+0000bc90: 6265 7477 6565 6e20 7372 6320 616e 6420  between src and 
+0000bca0: 6465 7374 2064 6174 6173 0a20 2020 203c  dest datas.    <
+0000bcb0: 6465 7374 3e20 7275 6c65 3a0a 2020 2020  dest> rule:.    
+0000bcc0: 2020 2072 652e 636f 6d70 696c 6520 666f     re.compile fo
+0000bcd0: 726d 6174 0a20 2020 2020 2020 616e 7920  rmat.       any 
+0000bce0: 6b65 6570 2063 6861 7261 6374 6572 7320  keep characters 
+0000bcf0: 203a 202a 0a20 2020 2020 2020 616e 7920   : *.       any 
+0000bd00: 7369 6e67 6c65 2063 6861 7261 6374 6572  single character
+0000bd10: 203a 203f 0a20 2020 2020 2020 5e20 2020   : ?.       ^   
+0000bd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bd30: 203a 2073 7461 7274 0a20 2020 2020 2020   : start.       
+0000bd40: 2420 2020 2020 2020 2020 2020 2020 2020  $               
+0000bd50: 2020 2020 203a 2065 6e64 0a20 2020 203c       : end.    <
+0000bd60: 6f70 7469 6f6e 3e0a 2020 2020 2020 206f  option>.       o
+0000bd70: 7264 6572 2020 2020 2020 2020 2020 2020  rder            
+0000bd80: 2020 2020 3a20 5472 7565 3a20 6966 206c      : True: if l
+0000bd90: 6973 742c 7475 706c 6520 7468 656e 2063  ist,tuple then c
+0000bda0: 6865 636b 206f 7264 6572 696e 6720 746f  heck ordering to
+0000bdb0: 6f2c 2046 616c 7365 3a28 6465 6661 756c  o, False:(defaul
+0000bdc0: 7429 206a 7573 7420 6368 6563 6b20 6461  t) just check da
+0000bdd0: 7461 2069 7320 7361 6d65 206f 7220 6e6f  ta is same or no
+0000bde0: 740a 2020 2020 2020 2054 7970 6520 2020  t.       Type   
+0000bdf0: 2020 2020 2020 2020 2020 2020 2020 3a20                : 
+0000be00: 5472 7565 3a20 6368 6563 6b20 5479 7065  True: check Type
+0000be10: 206f 6e6c 792c 2046 616c 7365 3a28 6465   only, False:(de
+0000be20: 6661 756c 7429 2063 6865 636b 2064 6174  fault) check dat
+0000be30: 610a 2020 2020 2020 2073 656e 7365 2020  a.       sense  
+0000be40: 2020 2020 2020 2020 2020 2020 2020 3a20                : 
+0000be50: 5472 7565 3a20 7365 6e73 6574 6976 652c  True: sensetive,
+0000be60: 2046 616c 7365 3a28 6465 6661 756c 7429   False:(default)
+0000be70: 206c 6f77 6572 2061 6e64 2075 7070 6572   lower and upper
+0000be80: 2069 7320 7361 6d65 0a20 2020 2020 2020   is same.       
+0000be90: 7768 6974 655f 7370 6163 6520 2020 2020  white_space     
+0000bea0: 2020 2020 203a 2054 7275 653a 206b 6565       : True: kee
+0000beb0: 7020 7768 6974 6520 7370 6163 652c 2046  p white space, F
+0000bec0: 616c 7365 3a28 6465 6661 756c 7429 2069  alse:(default) i
+0000bed0: 676e 6f72 6520 7768 6974 655f 7370 6163  gnore white_spac
+0000bee0: 650a 2020 2020 2020 2064 6967 6974 7374  e.       digitst
+0000bef0: 7269 6e67 2020 2020 2020 2020 2020 3a20  ring          : 
+0000bf00: 5472 7565 3a28 6465 6661 756c 7429 2073  True:(default) s
+0000bf10: 7472 696e 6720 616e 6420 696e 7469 6765  tring and intige
+0000bf20: 7220 6973 2073 616d 652c 2046 616c 7365  r is same, False
+0000bf30: 3a20 6469 6666 6572 656e 740a 2020 2020  : different.    
+0000bf40: 2727 270a 2020 2020 6966 205f 7479 7065  '''.    if _type
+0000bf50: 5f20 6973 2054 7275 653a 2023 2049 6620  _ is True: # If 
+0000bf60: 6368 6563 6b20 7479 7065 206f 6e6c 790a  check type only.
+0000bf70: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+0000bf80: 7970 6528 7372 632c 6465 7374 290a 2020  ype(src,dest).  
+0000bf90: 2020 6966 2054 7970 6528 7372 632c 2827    if Type(src,('
+0000bfa0: 7374 7227 2c27 6279 7465 7327 2929 2061  str','bytes')) a
+0000bfb0: 6e64 2054 7970 6528 6465 7374 2c28 2773  nd Type(dest,('s
+0000bfc0: 7472 272c 2762 7974 6573 2729 293a 2320  tr','bytes')):# 
+0000bfd0: 616e 6420 6465 7374 3a0a 2020 2020 2020  and dest:.      
+0000bfe0: 2020 6966 2054 7970 6528 6465 7374 2c27    if Type(dest,'
+0000bff0: 6279 7465 7327 2920 6f72 2054 7970 6528  bytes') or Type(
+0000c000: 7372 632c 2762 7974 6573 2729 3a0a 2020  src,'bytes'):.  
+0000c010: 2020 2020 2020 2020 2020 7372 633d 4279            src=By
+0000c020: 7465 7328 7372 6329 0a20 2020 2020 2020  tes(src).       
+0000c030: 2020 2020 2064 6573 743d 4279 7465 7328       dest=Bytes(
+0000c040: 6465 7374 290a 2020 2020 2020 2020 2020  dest).          
+0000c050: 2020 6966 2073 7263 203d 3d20 6465 7374    if src == dest
+0000c060: 3a20 7265 7475 726e 2054 7275 650a 2020  : return True.  
+0000c070: 2020 2020 2020 2020 2020 6966 2064 6573            if des
+0000c080: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+0000c090: 2020 2069 6620 6465 7374 5b30 5d20 213d     if dest[0] !=
+0000c0a0: 2062 275e 273a 2064 6573 743d 6227 5e27   b'^': dest=b'^'
+0000c0b0: 2b64 6573 740a 2020 2020 2020 2020 2020  +dest.          
+0000c0c0: 2020 2020 2020 6966 2064 6573 745b 2d31        if dest[-1
+0000c0d0: 5d20 213d 2062 2724 273a 2064 6573 743d  ] != b'$': dest=
+0000c0e0: 6465 7374 2b62 2724 270a 2020 2020 2020  dest+b'$'.      
+0000c0f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000c100: 2020 2020 7372 633d 5374 7228 7372 6329      src=Str(src)
+0000c110: 0a20 2020 2020 2020 2020 2020 2064 6573  .            des
+0000c120: 743d 5374 7228 6465 7374 290a 2020 2020  t=Str(dest).    
+0000c130: 2020 2020 2020 2020 6966 2073 7263 203d          if src =
+0000c140: 3d20 6465 7374 3a20 7265 7475 726e 2054  = dest: return T
+0000c150: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+0000c160: 6966 2064 6573 743a 0a20 2020 2020 2020  if dest:.       
+0000c170: 2020 2020 2020 2020 2069 6620 6465 7374           if dest
+0000c180: 5b30 5d20 213d 2027 5e27 3a20 6465 7374  [0] != '^': dest
+0000c190: 3d27 5e27 2b64 6573 740a 2020 2020 2020  ='^'+dest.      
+0000c1a0: 2020 2020 2020 2020 2020 6966 2064 6573            if des
+0000c1b0: 745b 2d31 5d20 213d 2027 2427 3a20 6465  t[-1] != '$': de
+0000c1c0: 7374 3d64 6573 742b 2724 270a 2020 2020  st=dest+'$'.    
+0000c1d0: 6966 2070 7974 686f 6e6c 696b 653a 0a20  if pythonlike:. 
+0000c1e0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0000c1f0: 616e 6365 2873 7263 2c73 7472 293a 0a20  ance(src,str):. 
+0000c200: 2020 2020 2020 2020 2020 2073 7263 3d46             src=F
+0000c210: 6f72 6d44 6174 6128 7372 6329 0a20 2020  ormData(src).   
+0000c220: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0000c230: 6365 2864 6573 742c 7374 7229 3a0a 2020  ce(dest,str):.  
+0000c240: 2020 2020 2020 2020 2020 6465 7374 3d46            dest=F
+0000c250: 6f72 6d44 6174 6128 6465 7374 290a 2020  ormData(dest).  
+0000c260: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000c270: 7372 632c 286c 6973 742c 7475 706c 6529  src,(list,tuple)
+0000c280: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
+0000c290: 2864 6573 742c 286c 6973 742c 7475 706c  (dest,(list,tupl
+0000c2a0: 6529 293a 0a20 2020 2020 2020 2069 6620  e)):.        if 
+0000c2b0: 7365 6e73 6520 616e 6420 6f72 6465 723a  sense and order:
+0000c2c0: 2072 6574 7572 6e20 7372 6320 3d3d 2064   return src == d
+0000c2d0: 6573 740a 2020 2020 2020 2020 6966 206c  est.        if l
+0000c2e0: 656e 2873 7263 2920 213d 206c 656e 2864  en(src) != len(d
+0000c2f0: 6573 7429 3a20 7265 7475 726e 2046 616c  est): return Fal
+0000c300: 7365 0a20 2020 2020 2020 2069 6620 6f72  se.        if or
+0000c310: 6465 723a 0a20 2020 2020 2020 2020 2020  der:.           
+0000c320: 2066 6f72 206a 2069 6e20 7261 6e67 6528   for j in range(
+0000c330: 302c 6c65 6e28 7372 6329 293a 0a20 2020  0,len(src)):.   
+0000c340: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000c350: 6e6f 7420 466f 756e 6428 7372 635b 6a5d  not Found(src[j]
+0000c360: 2c64 6573 745b 6a5d 2c64 6967 6974 7374  ,dest[j],digitst
+0000c370: 7269 6e67 3d64 6967 6974 7374 7269 6e67  ring=digitstring
+0000c380: 2c77 6869 7465 5f73 7061 6365 3d77 6869  ,white_space=whi
+0000c390: 7465 5f73 7061 6365 2c73 656e 7365 3d73  te_space,sense=s
+0000c3a0: 656e 7365 2c70 7974 686f 6e6c 696b 653d  ense,pythonlike=
+0000c3b0: 7079 7468 6f6e 6c69 6b65 293a 2072 6574  pythonlike): ret
+0000c3c0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+0000c3d0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+0000c3e0: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
+0000c3f0: 2020 2020 2020 2020 2020 2020 613d 6c69              a=li
+0000c400: 7374 2873 7263 5b3a 5d29 0a20 2020 2020  st(src[:]).     
+0000c410: 2020 2020 2020 2062 3d6c 6973 7428 6465         b=list(de
+0000c420: 7374 5b3a 5d29 0a20 2020 2020 2020 2020  st[:]).         
+0000c430: 2020 2066 6f72 206a 2069 6e20 7261 6e67     for j in rang
+0000c440: 6528 302c 6c65 6e28 7372 6329 293a 0a20  e(0,len(src)):. 
+0000c450: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000c460: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+0000c470: 6c65 6e28 6465 7374 2929 3a0a 2020 2020  len(dest)):.    
+0000c480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c490: 6966 2028 6973 696e 7374 616e 6365 2873  if (isinstance(s
+0000c4a0: 7263 5b6a 5d2c 6469 6374 2920 616e 6420  rc[j],dict) and 
+0000c4b0: 6973 696e 7374 616e 6365 2864 6573 745b  isinstance(dest[
+0000c4c0: 6a5d 2c64 6963 7429 2920 6f72 2028 6973  j],dict)) or (is
+0000c4d0: 696e 7374 616e 6365 2873 7263 5b6a 5d2c  instance(src[j],
+0000c4e0: 286c 6973 742c 7475 706c 6529 2920 616e  (list,tuple)) an
+0000c4f0: 6420 6973 696e 7374 616e 6365 2864 6573  d isinstance(des
+0000c500: 745b 6a5d 2c28 6c69 7374 2c74 7570 6c65  t[j],(list,tuple
+0000c510: 2929 293a 0a20 2020 2020 2020 2020 2020  ))):.           
+0000c520: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000c530: 4973 5361 6d65 2873 7263 5b6a 5d2c 6465  IsSame(src[j],de
+0000c540: 7374 5b69 5d2c 7365 6e73 652c 6f72 6465  st[i],sense,orde
+0000c550: 722c 5f74 7970 655f 2c64 6967 6974 7374  r,_type_,digitst
+0000c560: 7269 6e67 2c77 6869 7465 5f73 7061 6365  ring,white_space
+0000c570: 2c70 7974 686f 6e6c 696b 652c 6967 6e6f  ,pythonlike,igno
+0000c580: 7265 5f6b 6579 7329 3a0a 2020 2020 2020  re_keys):.      
+0000c590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c5a0: 2020 2020 2020 615b 6a5d 3d4e 6f6e 650a        a[j]=None.
+0000c5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c5c0: 2020 2020 2020 2020 2020 2020 625b 695d              b[i]
+0000c5d0: 3d4e 6f6e 650a 2020 2020 2020 2020 2020  =None.          
+0000c5e0: 2020 2020 2020 2020 2020 656c 6966 2046            elif F
+0000c5f0: 6f75 6e64 2873 7263 5b6a 5d2c 6465 7374  ound(src[j],dest
+0000c600: 5b69 5d2c 6469 6769 7473 7472 696e 673d  [i],digitstring=
+0000c610: 6469 6769 7473 7472 696e 672c 7768 6974  digitstring,whit
+0000c620: 655f 7370 6163 653d 7768 6974 655f 7370  e_space=white_sp
+0000c630: 6163 652c 7365 6e73 653d 7365 6e73 652c  ace,sense=sense,
+0000c640: 7079 7468 6f6e 6c69 6b65 3d70 7974 686f  pythonlike=pytho
+0000c650: 6e6c 696b 6529 3a0a 2020 2020 2020 2020  nlike):.        
+0000c660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c670: 615b 6a5d 3d4e 6f6e 650a 2020 2020 2020  a[j]=None.      
+0000c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c690: 2020 625b 695d 3d4e 6f6e 650a 2020 2020    b[i]=None.    
+0000c6a0: 2020 2020 2020 2020 6966 2061 2e63 6f75          if a.cou
+0000c6b0: 6e74 284e 6f6e 6529 203d 3d20 6c65 6e28  nt(None) == len(
+0000c6c0: 6129 2061 6e64 2062 2e63 6f75 6e74 284e  a) and b.count(N
+0000c6d0: 6f6e 6529 203d 3d20 6c65 6e28 6229 3a20  one) == len(b): 
+0000c6e0: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+0000c6f0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+0000c700: 616c 7365 0a20 2020 2065 6c69 6620 6973  alse.    elif is
+0000c710: 696e 7374 616e 6365 2873 7263 2c64 6963  instance(src,dic
+0000c720: 7429 2061 6e64 2069 7369 6e73 7461 6e63  t) and isinstanc
+0000c730: 6528 6465 7374 2c64 6963 7429 3a0a 2020  e(dest,dict):.  
+0000c740: 2020 2020 2020 6966 2073 656e 7365 3a20        if sense: 
+0000c750: 7265 7475 726e 2073 7263 203d 3d20 6465  return src == de
+0000c760: 7374 0a20 2020 2020 2020 2069 6620 6c65  st.        if le
+0000c770: 6e28 7372 6329 2021 3d20 6c65 6e28 6465  n(src) != len(de
+0000c780: 7374 293a 2072 6574 7572 6e20 4661 6c73  st): return Fals
+0000c790: 650a 2020 2020 2020 2020 666f 7220 7320  e.        for s 
+0000c7a0: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
+0000c7b0: 2020 2020 6966 2073 2069 6e20 6967 6e6f      if s in igno
+0000c7c0: 7265 5f6b 6579 733a 2063 6f6e 7469 6e75  re_keys: continu
+0000c7d0: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+0000c7e0: 2073 2069 6e20 6465 7374 3a0a 2020 2020   s in dest:.    
+0000c7f0: 2020 2020 2020 2020 2020 2020 6966 2028              if (
+0000c800: 6973 696e 7374 616e 6365 2873 7263 5b73  isinstance(src[s
+0000c810: 5d2c 6469 6374 2920 616e 6420 6973 696e  ],dict) and isin
+0000c820: 7374 616e 6365 2864 6573 745b 735d 2c64  stance(dest[s],d
+0000c830: 6963 7429 2920 6f72 2028 6973 696e 7374  ict)) or (isinst
+0000c840: 616e 6365 2873 7263 5b73 5d2c 286c 6973  ance(src[s],(lis
+0000c850: 742c 7475 706c 6529 2920 616e 6420 6973  t,tuple)) and is
+0000c860: 696e 7374 616e 6365 2864 6573 745b 735d  instance(dest[s]
+0000c870: 2c28 6c69 7374 2c74 7570 6c65 2929 293a  ,(list,tuple))):
+0000c880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c890: 2020 2020 2069 6620 6e6f 7420 4973 5361       if not IsSa
+0000c8a0: 6d65 2873 7263 5b73 5d2c 6465 7374 5b73  me(src[s],dest[s
+0000c8b0: 5d2c 7365 6e73 652c 6f72 6465 722c 5f74  ],sense,order,_t
+0000c8c0: 7970 655f 2c64 6967 6974 7374 7269 6e67  ype_,digitstring
+0000c8d0: 2c77 6869 7465 5f73 7061 6365 2c70 7974  ,white_space,pyt
+0000c8e0: 686f 6e6c 696b 652c 6967 6e6f 7265 5f6b  honlike,ignore_k
+0000c8f0: 6579 7329 3a20 7265 7475 726e 2046 616c  eys): return Fal
+0000c900: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
+0000c910: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000c920: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000c930: 6e6f 7420 466f 756e 6428 7372 635b 735d  not Found(src[s]
+0000c940: 2c64 6573 745b 735d 2c64 6967 6974 7374  ,dest[s],digitst
+0000c950: 7269 6e67 3d64 6967 6974 7374 7269 6e67  ring=digitstring
+0000c960: 2c77 6869 7465 5f73 7061 6365 3d77 6869  ,white_space=whi
+0000c970: 7465 5f73 7061 6365 2c73 656e 7365 3d73  te_space,sense=s
+0000c980: 656e 7365 2c70 7974 686f 6e6c 696b 653d  ense,pythonlike=
+0000c990: 7079 7468 6f6e 6c69 6b65 293a 2072 6574  pythonlike): ret
+0000c9a0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+0000c9b0: 2020 7265 7475 726e 2054 7275 650a 2020    return True.  
+0000c9c0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000c9d0: 7265 7475 726e 2046 6f75 6e64 2873 7263  return Found(src
+0000c9e0: 2c64 6573 742c 6469 6769 7473 7472 696e  ,dest,digitstrin
+0000c9f0: 673d 6469 6769 7473 7472 696e 672c 7768  g=digitstring,wh
+0000ca00: 6974 655f 7370 6163 653d 7768 6974 655f  ite_space=white_
+0000ca10: 7370 6163 652c 7365 6e73 653d 7365 6e73  space,sense=sens
+0000ca20: 652c 7079 7468 6f6e 6c69 6b65 3d70 7974  e,pythonlike=pyt
+0000ca30: 686f 6e6c 696b 6529 0a0a 6465 6620 4973  honlike)..def Is
+0000ca40: 496e 2866 696e 642c 6465 7374 2c69 6478  In(find,dest,idx
+0000ca50: 3d46 616c 7365 2c64 6566 6175 6c74 3d46  =False,default=F
+0000ca60: 616c 7365 2c73 656e 7365 3d46 616c 7365  alse,sense=False
+0000ca70: 2c73 7461 7274 7377 6974 683d 5472 7565  ,startswith=True
+0000ca80: 2c65 6e64 7377 6974 683d 5472 7565 2c64  ,endswith=True,d
+0000ca90: 6967 6974 7374 7269 6e67 3d54 7275 652c  igitstring=True,
+0000caa0: 776f 7264 3d54 7275 652c 7768 6974 655f  word=True,white_
+0000cab0: 7370 6163 653d 4661 6c73 652c 6f72 6465  space=False,orde
+0000cac0: 723d 4661 6c73 652c 2a2a 6f70 7473 293a  r=False,**opts):
+0000cad0: 0a20 2020 2027 2727 0a20 2020 2043 6865  .    '''.    Che
+0000cae0: 636b 206b 6579 206f 7220 7661 6c75 6520  ck key or value 
+0000caf0: 696e 2074 6865 2064 6963 742c 206c 6973  in the dict, lis
+0000cb00: 7420 6f72 2074 7570 6c65 2074 6865 6e20  t or tuple then 
+0000cb10: 5472 7565 2c20 6e6f 7420 7468 656e 2046  True, not then F
+0000cb20: 616c 7365 0a20 2020 2072 6574 7572 6e20  alse.    return 
+0000cb30: 5472 7565 2f46 616c 7365 0a20 2020 2043  True/False.    C
+0000cb40: 6865 636b 2073 616d 6520 6461 7461 206f  heck same data o
+0000cb50: 7220 6e6f 7420 6265 7477 6565 6e20 7372  r not between sr
+0000cb60: 6320 616e 6420 6465 7374 2064 6174 6173  c and dest datas
+0000cb70: 0a20 2020 203c 6465 7374 3e20 7275 6c65  .    <dest> rule
+0000cb80: 3a0a 2020 2020 2020 2072 652e 636f 6d70  :.       re.comp
+0000cb90: 696c 6520 666f 726d 6174 0a20 2020 2020  ile format.     
+0000cba0: 2020 616e 7920 6b65 6570 2063 6861 7261    any keep chara
+0000cbb0: 6374 6572 7320 203a 202a 0a20 2020 2020  cters  : *.     
+0000cbc0: 2020 616e 7920 7369 6e67 6c65 2063 6861    any single cha
+0000cbd0: 7261 6374 6572 203a 203f 0a20 2020 2020  racter : ?.     
+0000cbe0: 2020 5e20 2020 2020 2020 2020 2020 2020    ^             
+0000cbf0: 2020 2020 2020 203a 2073 7461 7274 0a20         : start. 
+0000cc00: 2020 2020 2020 2420 2020 2020 2020 2020        $         
+0000cc10: 2020 2020 2020 2020 2020 203a 2065 6e64             : end
+0000cc20: 0a20 2020 203c 6f70 7469 6f6e 3e0a 2020  .    <option>.  
+0000cc30: 2020 2020 206f 7264 6572 2020 2020 2020       order      
+0000cc40: 2020 2020 2020 2020 2020 3a20 5472 7565            : True
+0000cc50: 3a20 6966 206c 6973 742c 7475 706c 6520  : if list,tuple 
+0000cc60: 7468 656e 2063 6865 636b 206f 7264 6572  then check order
+0000cc70: 696e 6720 746f 6f2c 2046 616c 7365 3a28  ing too, False:(
+0000cc80: 6465 6661 756c 7429 206a 7573 7420 6368  default) just ch
+0000cc90: 6563 6b20 6461 7461 2069 7320 7361 6d65  eck data is same
+0000cca0: 206f 7220 6e6f 740a 2020 2020 2020 2073   or not.       s
+0000ccb0: 7461 7274 7377 6974 6820 2020 2020 2020  tartswith       
+0000ccc0: 2020 2020 3a20 5472 7565 3a28 6465 6661      : True:(defa
+0000ccd0: 756c 7429 2046 696e 6420 225e 4142 4322  ult) Find "^ABC"
+0000cce0: 2074 7970 652c 2046 616c 7365 3a20 6163   type, False: ac
+0000ccf0: 636f 7264 696e 6720 746f 203c 6465 7374  cording to <dest
+0000cd00: 3e0a 2020 2020 2020 2065 6e64 7377 6974  >.       endswit
+0000cd10: 6820 2020 2020 2020 2020 2020 2020 3a20  h             : 
+0000cd20: 5472 7565 3a28 6465 6661 756c 7429 2046  True:(default) F
+0000cd30: 696e 6420 2241 4243 2422 2074 7970 652c  ind "ABC$" type,
+0000cd40: 2046 616c 7365 3a20 6163 636f 7264 696e   False: accordin
+0000cd50: 6720 746f 203c 6465 7374 3e0a 2020 2020  g to <dest>.    
+0000cd60: 2020 2054 7970 6520 2020 2020 2020 2020     Type         
+0000cd70: 2020 2020 2020 2020 3a20 5472 7565 3a20          : True: 
+0000cd80: 6368 6563 6b20 5479 7065 206f 6e6c 792c  check Type only,
+0000cd90: 2046 616c 7365 3a28 6465 6661 756c 7429   False:(default)
+0000cda0: 2063 6865 636b 2064 6174 610a 2020 2020   check data.    
+0000cdb0: 2020 2073 656e 7365 2020 2020 2020 2020     sense        
+0000cdc0: 2020 2020 2020 2020 3a20 5472 7565 3a20          : True: 
+0000cdd0: 7365 6e73 6574 6976 652c 2046 616c 7365  sensetive, False
+0000cde0: 3a28 6465 6661 756c 7429 206c 6f77 6572  :(default) lower
+0000cdf0: 2061 6e64 2075 7070 6572 2069 7320 7361   and upper is sa
+0000ce00: 6d65 0a20 2020 2020 2020 7768 6974 655f  me.       white_
+0000ce10: 7370 6163 6520 2020 2020 2020 2020 203a  space          :
+0000ce20: 2054 7275 653a 206b 6565 7020 7768 6974   True: keep whit
+0000ce30: 6520 7370 6163 652c 2046 616c 7365 3a28  e space, False:(
+0000ce40: 6465 6661 756c 7429 2069 676e 6f72 6520  default) ignore 
+0000ce50: 7768 6974 655f 7370 6163 650a 2020 2020  white_space.    
+0000ce60: 2020 2077 6f72 6420 2020 2020 2020 2020     word         
+0000ce70: 2020 2020 2020 2020 3a20 5472 7565 3a28          : True:(
+0000ce80: 6465 6661 756c 7429 203c 6669 6e64 3e20  default) <find> 
+0000ce90: 6973 2063 6f72 7265 6374 2077 6f72 642c  is correct word,
+0000cea0: 2046 616c 7365 3a20 3c66 696e 643e 2069   False: <find> i
+0000ceb0: 6e20 696e 7364 6520 7374 7269 6e67 0a20  n insde string. 
+0000cec0: 2020 2020 2020 6469 6769 7473 7472 696e        digitstrin
+0000ced0: 6720 2020 2020 2020 2020 203a 2054 7275  g          : Tru
+0000cee0: 653a 2864 6566 6175 6c74 2920 7374 7269  e:(default) stri
+0000cef0: 6e67 2061 6e64 2069 6e74 6967 6572 2069  ng and intiger i
+0000cf00: 7320 7361 6d65 2c20 4661 6c73 653a 2064  s same, False: d
+0000cf10: 6966 6665 7265 6e74 0a20 2020 2027 2727  ifferent.    '''
+0000cf20: 0a20 2020 205f 7479 7065 5f3d 6f70 7473  .    _type_=opts
+0000cf30: 2e67 6574 2827 5479 7065 272c 6f70 7473  .get('Type',opts
+0000cf40: 2e67 6574 2827 5f74 7970 655f 272c 4661  .get('_type_',Fa
+0000cf50: 6c73 6529 290a 2020 2020 2364 6573 745f  lse)).    #dest_
+0000cf60: 7479 7065 3d54 7970 654e 616d 6528 6465  type=TypeName(de
+0000cf70: 7374 290a 2020 2020 2369 6620 6465 7374  st).    #if dest
+0000cf80: 5f74 7970 6520 696e 205b 276c 6973 7427  _type in ['list'
+0000cf90: 2c27 7475 706c 6527 2c27 7374 7227 2c27  ,'tuple','str','
+0000cfa0: 6279 7465 7327 5d3a 0a20 2020 2069 6620  bytes']:.    if 
+0000cfb0: 5479 7065 2864 6573 742c 2827 6c69 7374  Type(dest,('list
+0000cfc0: 272c 2774 7570 6c65 272c 2773 7472 272c  ','tuple','str',
+0000cfd0: 2762 7974 6573 2729 293a 0a20 2020 2020  'bytes')):.     
+0000cfe0: 2020 2023 6966 2054 7970 654e 616d 6528     #if TypeName(
+0000cff0: 6964 7829 203d 3d20 2769 6e74 273a 0a20  idx) == 'int':. 
+0000d000: 2020 2020 2020 2069 6620 5479 7065 2869         if Type(i
+0000d010: 6478 2c27 696e 7427 293a 0a20 2020 2020  dx,'int'):.     
+0000d020: 2020 2020 2020 2069 6478 3d46 6978 496e         idx=FixIn
+0000d030: 6465 7828 6465 7374 2c69 6478 2c64 6566  dex(dest,idx,def
+0000d040: 6175 6c74 3d46 616c 7365 2c65 7272 3d54  ault=False,err=T
+0000d050: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
+0000d060: 2069 6620 6964 7820 6973 2046 616c 7365   if idx is False
+0000d070: 3a20 7265 7475 726e 2064 6566 6175 6c74  : return default
+0000d080: 0a20 2020 2020 2020 2020 2020 2023 6966  .            #if
+0000d090: 2064 6573 745f 7479 7065 2069 6e20 5b27   dest_type in ['
+0000d0a0: 7374 7227 2c27 6279 7465 7327 5d3a 0a20  str','bytes']:. 
+0000d0b0: 2020 2020 2020 2020 2020 2069 6620 5479             if Ty
+0000d0c0: 7065 2864 6573 742c 2827 7374 7227 2c27  pe(dest,('str','
+0000d0d0: 6279 7465 7327 2929 3a0a 2020 2020 2020  bytes')):.      
+0000d0e0: 2020 2020 2020 2020 2020 6966 2046 6f75            if Fou
+0000d0f0: 6e64 2864 6573 745b 6964 783a 5d2c 6669  nd(dest[idx:],fi
+0000d100: 6e64 2c64 6967 6974 7374 7269 6e67 2c77  nd,digitstring,w
+0000d110: 6f72 642c 7768 6974 655f 7370 6163 652c  ord,white_space,
+0000d120: 7365 6e73 6529 3a20 7265 7475 726e 2054  sense): return T
+0000d130: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+0000d140: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000d150: 2020 2020 2020 6966 2046 6f75 6e64 2864        if Found(d
+0000d160: 6573 745b 6964 785d 2c66 696e 642c 6469  est[idx],find,di
+0000d170: 6769 7473 7472 696e 672c 776f 7264 2c77  gitstring,word,w
+0000d180: 6869 7465 5f73 7061 6365 2c73 656e 7365  hite_space,sense
+0000d190: 293a 2072 6574 7572 6e20 5472 7565 0a20  ): return True. 
+0000d1a0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0000d1b0: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+0000d1c0: 6e20 6465 7374 3a0a 2020 2020 2020 2020  n dest:.        
+0000d1d0: 2020 2020 2020 2020 6966 2049 7353 616d          if IsSam
+0000d1e0: 6528 692c 6669 6e64 2c73 656e 7365 2c6f  e(i,find,sense,o
+0000d1f0: 7264 6572 2c5f 7479 7065 5f2c 6469 6769  rder,_type_,digi
+0000d200: 7473 7472 696e 672c 7768 6974 655f 7370  tstring,white_sp
+0000d210: 6163 6529 3a20 7265 7475 726e 2054 7275  ace): return Tru
+0000d220: 650a 2020 2020 656c 6966 2069 7369 6e73  e.    elif isins
+0000d230: 7461 6e63 6528 6465 7374 2c20 6469 6374  tance(dest, dict
+0000d240: 293a 0a20 2020 2020 2020 2069 6620 6964  ):.        if id
+0000d250: 7820 696e 205b 4e6f 6e65 2c27 272c 4661  x in [None,'',Fa
+0000d260: 6c73 655d 3a0a 2020 2020 2020 2020 2020  lse]:.          
+0000d270: 2020 666f 7220 6920 696e 2064 6573 743a    for i in dest:
+0000d280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000d290: 2069 6620 4973 5361 6d65 2869 2c66 696e   if IsSame(i,fin
+0000d2a0: 642c 7365 6e73 652c 6f72 6465 722c 5f74  d,sense,order,_t
+0000d2b0: 7970 655f 2c64 6967 6974 7374 7269 6e67  ype_,digitstring
+0000d2c0: 2c77 6869 7465 5f73 7061 6365 293a 2072  ,white_space): r
+0000d2d0: 6574 7572 6e20 5472 7565 0a20 2020 2020  eturn True.     
+0000d2e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000d2f0: 2020 2020 2069 6620 466f 756e 6428 6465       if Found(de
+0000d300: 7374 2e67 6574 2869 6478 292c 6669 6e64  st.get(idx),find
+0000d310: 2c64 6967 6974 7374 7269 6e67 2c77 6f72  ,digitstring,wor
+0000d320: 642c 7768 6974 655f 7370 6163 652c 7365  d,white_space,se
+0000d330: 6e73 6529 3a20 7265 7475 726e 2054 7275  nse): return Tru
+0000d340: 650a 2020 2020 7265 7475 726e 2064 6566  e.    return def
+0000d350: 6175 6c74 0a0a 6465 6620 426f 6f6c 4f70  ault..def BoolOp
+0000d360: 6572 6174 696f 6e28 612c 6d6f 6465 3d62  eration(a,mode=b
+0000d370: 6f6f 6c29 3a0a 2020 2020 6966 2074 7970  ool):.    if typ
+0000d380: 6528 6129 2e5f 5f6e 616d 655f 5f20 3d3d  e(a).__name__ ==
+0000d390: 2027 626f 6f6c 273a 0a20 2020 2020 2020   'bool':.       
+0000d3a0: 2069 6620 6d6f 6465 2069 7320 626f 6f6c   if mode is bool
+0000d3b0: 3a20 7265 7475 726e 2061 0a20 2020 2020  : return a.     
+0000d3c0: 2020 2069 6620 6d6f 6465 2069 6e20 5b27     if mode in ['
+0000d3d0: 6f70 706f 7369 7469 6f6e 272c 276f 7070  opposition','opp
+0000d3e0: 6f73 6974 275d 3a0a 2020 2020 2020 2020  osit']:.        
+0000d3f0: 2020 2020 7265 7475 726e 206e 6f74 2061      return not a
+0000d400: 0a0a 6465 6620 426f 6f6c 2873 7263 2c77  ..def Bool(src,w
+0000d410: 616e 743d 5472 7565 2c61 7574 6f5f 626f  ant=True,auto_bo
+0000d420: 6f6c 3d46 616c 7365 2c73 6865 6c6c 5f63  ol=False,shell_c
+0000d430: 6f64 653d 5472 7565 293a 0a20 2020 2069  ode=True):.    i
+0000d440: 6620 7761 6e74 2069 6e20 5b54 7275 652c  f want in [True,
+0000d450: 4661 6c73 652c 2754 7275 6527 2c27 4661  False,'True','Fa
+0000d460: 6c73 6527 2c62 2754 7275 6527 2c62 2746  lse',b'True',b'F
+0000d470: 616c 7365 275d 3a0a 2020 2020 2020 2020  alse']:.        
+0000d480: 6966 2074 7970 6528 7761 6e74 292e 5f5f  if type(want).__
+0000d490: 6e61 6d65 5f5f 2069 6e20 5b27 7374 7227  name__ in ['str'
+0000d4a0: 2c27 6279 7465 7327 5d3a 2077 616e 743d  ,'bytes']: want=
+0000d4b0: 6576 616c 2877 616e 7429 2023 2063 6f6e  eval(want) # con
+0000d4c0: 7665 7274 2073 7472 696e 6720 626f 6f6c  vert string bool
+0000d4d0: 2074 6f20 626f 6f6c 0a20 2020 2020 2020   to bool.       
+0000d4e0: 2069 6620 6175 746f 5f62 6f6f 6c20 616e   if auto_bool an
+0000d4f0: 6420 6973 696e 7374 616e 6365 2873 7263  d isinstance(src
+0000d500: 2c20 286c 6973 742c 7475 706c 652c 6469  , (list,tuple,di
+0000d510: 6374 2929 2061 6e64 2073 7263 3a20 2320  ct)) and src: # 
+0000d520: 636f 6e76 6572 7420 6c69 7374 2c74 7570  convert list,tup
+0000d530: 6c65 2c64 6963 7420 746f 2062 6f6f 6c0a  le,dict to bool.
+0000d540: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0000d550: 7369 6e73 7461 6e63 6528 7372 632c 286c  sinstance(src,(l
+0000d560: 6973 742c 7475 706c 6529 293a 0a20 2020  ist,tuple)):.   
+0000d570: 2020 2020 2020 2020 2020 2020 2073 7263               src
+0000d580: 3d73 7263 5b30 5d0a 2020 2020 2020 2020  =src[0].        
+0000d590: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0000d5a0: 6e63 6528 7372 632c 6469 6374 293a 0a20  nce(src,dict):. 
+0000d5b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000d5c0: 7263 3d73 7263 2e67 6574 2827 7263 2729  rc=src.get('rc')
+0000d5d0: 0a20 2020 2020 2020 2065 6c69 6620 7372  .        elif sr
+0000d5e0: 6320 696e 205b 5472 7565 2c46 616c 7365  c in [True,False
+0000d5f0: 2c27 5472 7565 272c 2746 616c 7365 272c  ,'True','False',
+0000d600: 6227 5472 7565 272c 6227 4661 6c73 6527  b'True',b'False'
+0000d610: 5d3a 2023 2043 6f6e 7665 7274 2073 7472  ]: # Convert str
+0000d620: 696e 6720 626f 6f6c 2074 6f20 626f 6f6c  ing bool to bool
+0000d630: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000d640: 7479 7065 2873 7263 292e 5f5f 6e61 6d65  type(src).__name
+0000d650: 5f5f 2069 6e20 5b27 7374 7227 2c27 6279  __ in ['str','by
+0000d660: 7465 7327 5d3a 2073 7263 3d65 7661 6c28  tes']: src=eval(
+0000d670: 7372 6329 0a20 2020 2020 2020 2069 6620  src).        if 
+0000d680: 7368 656c 6c5f 636f 6465 2061 6e64 2069  shell_code and i
+0000d690: 7369 6e73 7461 6e63 6528 7372 632c 696e  sinstance(src,in
+0000d6a0: 7429 2061 6e64 206e 6f74 2069 7369 6e73  t) and not isins
+0000d6b0: 7461 6e63 6528 7372 632c 626f 6f6c 293a  tance(src,bool):
+0000d6c0: 2023 2043 6f6e 7665 7274 2073 6865 6c6c   # Convert shell
+0000d6d0: 2072 6320 746f 2062 6f6f 6c0a 2020 2020   rc to bool.    
+0000d6e0: 2020 2020 2020 2020 7372 633d 5472 7565          src=True
+0000d6f0: 2069 6620 7372 6320 3d3d 2030 2065 6c73   if src == 0 els
+0000d700: 6520 4661 6c73 650a 2020 2020 2020 2020  e False.        
+0000d710: 7265 7475 726e 2073 7263 203d 3d20 7761  return src == wa
+0000d720: 6e74 0a20 2020 2065 6c69 6620 7761 6e74  nt.    elif want
+0000d730: 2069 6e20 5b73 7472 2c27 7374 7227 2c69   in [str,'str',i
+0000d740: 6e74 2c27 696e 7427 2c64 6963 742c 2764  nt,'int',dict,'d
+0000d750: 6963 7427 2c6c 6973 742c 276c 6973 7427  ict',list,'list'
+0000d760: 2c74 7570 6c65 2c27 7475 706c 6527 2c4e  ,tuple,'tuple',N
+0000d770: 6f6e 652c 274e 6f6e 6527 5d3a 0a20 2020  one,'None']:.   
+0000d780: 2020 2020 2069 6620 7479 7065 2877 616e       if type(wan
+0000d790: 7429 2e5f 5f6e 616d 655f 5f20 696e 205b  t).__name__ in [
+0000d7a0: 2773 7472 272c 2762 7974 6573 275d 3a20  'str','bytes']: 
+0000d7b0: 7761 6e74 3d65 7661 6c28 7761 6e74 2920  want=eval(want) 
+0000d7c0: 2320 636f 6e76 6572 7420 7374 7269 6e67  # convert string
+0000d7d0: 2062 6f6f 6c20 746f 2062 6f6f 6c0a 2020   bool to bool.  
+0000d7e0: 2020 2020 2020 6966 2077 616e 7420 6973        if want is
+0000d7f0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000d800: 2020 2069 6620 7372 6320 3d3d 2027 273a     if src == '':
+0000d810: 2073 7263 3d4e 6f6e 650a 2020 2020 2020   src=None.      
+0000d820: 2020 2020 2020 7265 7475 726e 2073 7263        return src
+0000d830: 203d 3d20 7761 6e74 0a20 2020 2020 2020   == want.       
+0000d840: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000d850: 2020 2072 6574 7572 6e20 6973 696e 7374     return isinst
+0000d860: 616e 6365 2873 7263 2c77 616e 7429 0a20  ance(src,want). 
+0000d870: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+0000d880: 0a64 6566 2050 7944 6566 696e 6528 6161  .def PyDefine(aa
+0000d890: 293a 0a20 2020 2069 6620 4973 496e 2861  ):.    if IsIn(a
+0000d8a0: 612c 5b4e 6f6e 652c 2227 4e6f 6e65 2722  a,[None,"'None'"
+0000d8b0: 2c27 224e 6f6e 6522 272c 274e 6f6e 6527  ,'"None"','None'
+0000d8c0: 2c27 6e75 6c6c 272c 2227 6e75 6c6c 2722  ,'null',"'null'"
+0000d8d0: 2c27 226e 756c 6c22 275d 293a 0a20 2020  ,'"null"']):.   
+0000d8e0: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+0000d8f0: 0a20 2020 2065 6c69 6620 4973 496e 2861  .    elif IsIn(a
+0000d900: 612c 5b54 7275 652c 2227 5472 7565 2722  a,[True,"'True'"
+0000d910: 2c27 2254 7275 6522 272c 2754 7275 6527  ,'"True"','True'
+0000d920: 2c27 6f6b 275d 293a 0a20 2020 2020 2020  ,'ok']):.       
+0000d930: 2072 6574 7572 6e20 5472 7565 0a20 2020   return True.   
+0000d940: 2065 6c69 6620 4973 496e 2861 612c 5b46   elif IsIn(aa,[F
+0000d950: 616c 7365 2c22 2746 616c 7365 2722 2c27  alse,"'False'",'
+0000d960: 2246 616c 7365 2227 2c27 4661 6c73 6527  "False"','False'
+0000d970: 2c27 6661 696c 275d 293a 0a20 2020 2020  ,'fail']):.     
+0000d980: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+0000d990: 2020 2020 7265 7475 726e 2061 610a 0a64      return aa..d
+0000d9a0: 6566 2057 6869 7465 5374 7269 7028 7372  ef WhiteStrip(sr
+0000d9b0: 632c 6d6f 6465 3d54 7275 6529 3a0a 2020  c,mode=True):.  
+0000d9c0: 2020 2727 270a 2020 2020 7265 6d6f 7665    '''.    remove
+0000d9d0: 206d 756c 7469 2073 7061 6365 2074 6f20   multi space to 
+0000d9e0: 7369 6e67 6c65 2073 7061 6365 2c20 7265  single space, re
+0000d9f0: 6d6f 7665 2066 6972 7374 2061 6e64 2065  move first and e
+0000da00: 6e64 2073 7061 6365 0a20 2020 206f 7468  nd space.    oth
+0000da10: 6572 7320 7265 7475 726e 206f 7269 6769  ers return origi
+0000da20: 6e61 6c0a 2020 2020 2727 270a 2020 2020  nal.    '''.    
+0000da30: 6966 206d 6f64 6520 6973 2054 7275 6520  if mode is True 
+0000da40: 616e 6420 7479 7065 2873 7263 292e 5f5f  and type(src).__
+0000da50: 6e61 6d65 5f5f 2069 6e20 2827 7374 7227  name__ in ('str'
+0000da60: 2c27 6279 7465 7327 293a 2072 6574 7572  ,'bytes'): retur
+0000da70: 6e20 7372 632e 7374 7269 7028 290a 2020  n src.strip().  
+0000da80: 2020 7265 7475 726e 2073 7263 0a0a 6465    return src..de
+0000da90: 6620 4973 4e6f 6e65 2873 7263 2c2a 2a6f  f IsNone(src,**o
+0000daa0: 7074 7329 3a0a 2020 2020 2727 270a 2020  pts):.    '''.  
+0000dab0: 2020 4368 6563 6b20 7468 6520 5352 4320    Check the SRC 
+0000dac0: 6973 2073 696d 696c 6172 204e 6f6e 6520  is similar None 
+0000dad0: 7479 7065 2064 6174 6128 2727 2c4e 6f6e  type data('',Non
+0000dae0: 6529 206f 7220 6e6f 740a 2020 2020 2d63  e) or not.    -c
+0000daf0: 6865 636b 5f74 7970 653d 3c74 7970 653e  heck_type=<type>
+0000db00: 203a 2069 6e63 6c75 6465 2061 626f 7665   : include above
+0000db10: 2061 6e64 2069 6620 6469 6666 6572 656e   and if differen
+0000db20: 7420 7479 7065 2074 6865 6e20 7468 6520  t type then the 
+0000db30: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+0000db40: 2d6c 6973 745f 6e6f 6e65 203a 0a20 2020  -list_none :.   
+0000db50: 2020 202d 2046 616c 7365 3a20 6368 6563     - False: chec
+0000db60: 6b20 696e 6465 7820 6974 656d 2069 6e20  k index item in 
+0000db70: 7468 6520 736f 7572 6365 2028 6465 6661  the source (defa
+0000db80: 756c 7429 0a20 2020 2020 202d 2054 7275  ult).      - Tru
+0000db90: 6520 3a20 6368 6563 6b20 616c 6c20 6c69  e : check all li
+0000dba0: 7374 206f 6620 736f 7572 6365 0a20 2020  st of source.   
+0000dbb0: 202d 696e 6465 7820 2020 3a20 6966 2073   -index   : if s
+0000dbc0: 6f75 7263 6520 6973 206c 6973 7420 7468  ource is list th
+0000dbd0: 656e 206a 7573 7420 7761 6e74 2063 6865  en just want che
+0000dbe0: 636b 2069 6e64 6578 2069 7465 6d0a 2020  ck index item.  
+0000dbf0: 2020 2d73 7061 6365 2020 203a 0a20 2020    -space   :.   
+0000dc00: 2020 202d 2054 7275 6520 3a20 6170 726f     - True : apro
+0000dc10: 7665 2073 7061 6365 2074 6f20 6461 7461  ve space to data
+0000dc20: 2069 6e20 736f 7572 6365 0a20 2020 2020   in source.     
+0000dc30: 202d 2046 616c 7365 3a20 6967 6e6f 7265   - False: ignore
+0000dc40: 2073 7061 6365 2064 6174 6120 696e 2073   space data in s
+0000dc50: 6f75 7263 650a 2020 2020 2727 270a 2020  ource.    '''.  
+0000dc60: 2020 7661 6c75 653d 6f70 7473 2e67 6574    value=opts.get
+0000dc70: 2827 7661 6c75 6527 2c6f 7074 732e 6765  ('value',opts.ge
+0000dc80: 7428 2763 686b 5f76 616c 272c 5b27 272c  t('chk_val',['',
+0000dc90: 4e6f 6e65 5d29 290a 2020 2020 7370 6163  None])).    spac
+0000dca0: 653d 6f70 7473 2e67 6574 2827 7370 6163  e=opts.get('spac
+0000dcb0: 6527 2c54 7275 6529 0a20 2020 2063 686b  e',True).    chk
+0000dcc0: 5f6f 6e6c 793d 6f70 7473 2e67 6574 2827  _only=opts.get('
+0000dcd0: 6368 6b5f 6f6e 6c79 272c 6f70 7473 2e67  chk_only',opts.g
+0000dce0: 6574 2827 6368 6563 6b5f 6f6e 6c79 272c  et('check_only',
+0000dcf0: 4661 6c73 6529 290a 2020 2020 696e 6465  False)).    inde
+0000dd00: 783d 6f70 7473 2e67 6574 2827 696e 6465  x=opts.get('inde
+0000dd10: 7827 2c6f 7074 732e 6765 7428 2769 6478  x',opts.get('idx
+0000dd20: 2729 290a 2020 2020 6c69 7374 5f6e 6f6e  ')).    list_non
+0000dd30: 653d 6f70 7473 2e67 6574 2827 4c49 5354  e=opts.get('LIST
+0000dd40: 272c 4661 6c73 6529 0a0a 2020 2020 2363  ',False)..    #c
+0000dd50: 6865 636b 2074 7970 650a 2020 2020 4368  heck type.    Ch
+0000dd60: 6563 6b54 7970 653d 6f70 7473 2e67 6574  eckType=opts.get
+0000dd70: 2827 6368 6563 6b5f 7479 7065 272c 4e6f  ('check_type',No
+0000dd80: 6e65 290a 2020 2020 5f74 7970 655f 3d46  ne).    _type_=F
+0000dd90: 616c 7365 0a20 2020 2069 6620 4368 6563  alse.    if Chec
+0000dda0: 6b54 7970 6520 6973 206e 6f74 204e 6f6e  kType is not Non
+0000ddb0: 653a 0a20 2020 2020 2020 2076 616c 7565  e:.        value
+0000ddc0: 3d76 616c 7565 2b5b 4368 6563 6b54 7970  =value+[CheckTyp
+0000ddd0: 655d 0a20 2020 2020 2020 205f 7479 7065  e].        _type
+0000dde0: 5f3d 5472 7565 0a20 2020 2064 6566 205f  _=True.    def _
+0000ddf0: 4973 496e 5f28 7372 632c 7661 6c75 652c  IsIn_(src,value,
+0000de00: 7365 6e73 653d 4661 6c73 6529 3a0a 2020  sense=False):.  
+0000de10: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0000de20: 6e63 6528 7661 6c75 652c 286c 6973 742c  nce(value,(list,
+0000de30: 7475 706c 6529 293a 0a20 2020 2020 2020  tuple)):.       
+0000de40: 2020 2020 2066 6f72 2069 2069 6e20 7661       for i in va
+0000de50: 6c75 653a 0a20 2020 2020 2020 2020 2020  lue:.           
+0000de60: 2020 2020 2069 6620 6e6f 7420 7365 6e73       if not sens
+0000de70: 6520 616e 6420 2074 7970 6528 6929 2e5f  e and  type(i)._
+0000de80: 5f6e 616d 655f 5f20 696e 205b 2773 7472  _name__ in ['str
+0000de90: 272c 2762 7974 6573 275d 2061 6e64 2074  ','bytes'] and t
+0000dea0: 7970 6528 7372 6329 2e5f 5f6e 616d 655f  ype(src).__name_
+0000deb0: 5f20 696e 205b 2773 7472 272c 2762 7974  _ in ['str','byt
+0000dec0: 6573 275d 3a0a 2020 2020 2020 2020 2020  es']:.          
+0000ded0: 2020 2020 2020 2020 2020 6966 2053 7472            if Str
+0000dee0: 2869 292e 6c6f 7765 7228 2920 3d3d 2053  (i).lower() == S
+0000def0: 7472 2873 7263 292e 6c6f 7765 7228 293a  tr(src).lower():
+0000df00: 2072 6574 7572 6e20 5472 7565 0a20 2020   return True.   
+0000df10: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000df20: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000df30: 2020 2020 2020 2069 6620 6920 3d3d 2073         if i == s
+0000df40: 7263 3a20 7265 7475 726e 2054 7275 650a  rc: return True.
+0000df50: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000df60: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+0000df70: 2073 656e 7365 2061 6e64 2074 7970 6528   sense and type(
+0000df80: 7661 6c75 6529 2e5f 5f6e 616d 655f 5f20  value).__name__ 
+0000df90: 696e 205b 2773 7472 272c 2762 7974 6573  in ['str','bytes
+0000dfa0: 275d 2061 6e64 2074 7970 6528 7372 6329  '] and type(src)
+0000dfb0: 2e5f 5f6e 616d 655f 5f20 696e 205b 2773  .__name__ in ['s
+0000dfc0: 7472 272c 2762 7974 6573 275d 3a0a 2020  tr','bytes']:.  
+0000dfd0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0000dfe0: 2053 7472 2876 616c 7565 292e 6c6f 7765   Str(value).lowe
+0000dff0: 7228 2920 3d3d 2053 7472 2873 7263 292e  r() == Str(src).
+0000e000: 6c6f 7765 7228 293a 2072 6574 7572 6e20  lower(): return 
+0000e010: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
+0000e020: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000e030: 2020 2020 2020 2069 6620 7661 6c75 6520         if value 
+0000e040: 3d3d 2073 7263 3a20 7265 7475 726e 2054  == src: return T
+0000e050: 7275 650a 2020 2020 2020 2020 7265 7475  rue.        retu
+0000e060: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+0000e070: 200a 2020 2020 7372 633d 5768 6974 6553   .    src=WhiteS
+0000e080: 7472 6970 2873 7263 2c42 6f6f 6c4f 7065  trip(src,BoolOpe
+0000e090: 7261 7469 6f6e 2873 7061 6365 2c6d 6f64  ration(space,mod
+0000e0a0: 653d 276f 7070 6f73 6974 2729 290a 2020  e='opposit')).  
+0000e0b0: 2020 6966 205f 4973 496e 5f28 7372 632c    if _IsIn_(src,
+0000e0c0: 7661 6c75 652c 7365 6e73 653d 4661 6c73  value,sense=Fals
+0000e0d0: 6529 3a20 7265 7475 726e 2054 7275 650a  e): return True.
+0000e0e0: 2020 2020 6966 2073 7263 3a0a 2020 2020      if src:.    
+0000e0f0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0000e100: 6528 7372 632c 286c 6973 742c 7475 706c  e(src,(list,tupl
+0000e110: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
+0000e120: 2069 6620 6c69 7374 5f6e 6f6e 653a 0a20   if list_none:. 
+0000e130: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000e140: 6f72 2069 2069 6e20 7372 633a 0a20 2020  or i in src:.   
+0000e150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e160: 2069 6620 6e6f 7420 5f49 7349 6e5f 2857   if not _IsIn_(W
+0000e170: 6869 7465 5374 7269 7028 692c 426f 6f6c  hiteStrip(i,Bool
+0000e180: 4f70 6572 6174 696f 6e28 7370 6163 652c  Operation(space,
+0000e190: 6d6f 6465 3d27 6f70 706f 7369 7427 2929  mode='opposit'))
+0000e1a0: 2c76 616c 7565 2c73 656e 7365 3d46 616c  ,value,sense=Fal
+0000e1b0: 7365 293a 2072 6574 7572 6e20 4661 6c73  se): return Fals
+0000e1c0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0000e1d0: 2020 7265 7475 726e 2054 7275 650a 2020    return True.  
+0000e1e0: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
+0000e1f0: 7369 6e73 7461 6e63 6528 696e 6465 782c  sinstance(index,
+0000e200: 696e 7429 2061 6e64 206c 656e 2873 7263  int) and len(src
+0000e210: 2920 3e20 6162 7328 696e 6465 7829 3a0a  ) > abs(index):.
+0000e220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e230: 6966 205f 4973 496e 5f28 5768 6974 6553  if _IsIn_(WhiteS
+0000e240: 7472 6970 2873 7263 5b69 6e64 6578 5d2c  trip(src[index],
+0000e250: 426f 6f6c 4f70 6572 6174 696f 6e28 7370  BoolOperation(sp
+0000e260: 6163 652c 6d6f 6465 3d27 6f70 706f 7369  ace,mode='opposi
+0000e270: 7427 2929 2c76 616c 7565 2c73 656e 7365  t')),value,sense
+0000e280: 3d46 616c 7365 293a 2072 6574 7572 6e20  =False): return 
+0000e290: 5472 7565 0a20 2020 2020 2020 2065 6c69  True.        eli
+0000e2a0: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
+0000e2b0: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
+0000e2c0: 2020 2020 6966 2069 6e64 6578 2069 6e20      if index in 
+0000e2d0: 7372 633a 0a20 2020 2020 2020 2020 2020  src:.           
+0000e2e0: 2020 2020 2069 6620 5f49 7349 6e5f 2857       if _IsIn_(W
+0000e2f0: 6869 7465 5374 7269 7028 7372 635b 696e  hiteStrip(src[in
+0000e300: 6465 785d 2c42 6f6f 6c4f 7065 7261 7469  dex],BoolOperati
+0000e310: 6f6e 2873 7061 6365 2c6d 6f64 653d 276f  on(space,mode='o
+0000e320: 7070 6f73 6974 2729 292c 7661 6c75 652c  pposit')),value,
+0000e330: 7365 6e73 653d 4661 6c73 6529 3a20 7265  sense=False): re
+0000e340: 7475 726e 2054 7275 650a 2020 2020 6966  turn True.    if
+0000e350: 2063 686b 5f6f 6e6c 793a 0a20 2020 2020   chk_only:.     
+0000e360: 2020 2023 2069 2077 616e 7420 6368 6563     # i want chec
+0000e370: 6b20 5479 7065 2074 6865 6e20 6469 6666  k Type then diff
+0000e380: 6572 656e 7420 7479 7065 2074 6865 6e20  erent type then 
+0000e390: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+0000e3a0: 2020 2020 6966 205f 7479 7065 5f3a 0a20      if _type_:. 
+0000e3b0: 2020 2020 2020 2020 2020 2023 6966 2054             #if T
+0000e3c0: 7970 654e 616d 6528 7372 6329 2021 3d20  ypeName(src) != 
+0000e3d0: 5479 7065 4e61 6d65 2843 6865 636b 5479  TypeName(CheckTy
+0000e3e0: 7065 293a 2072 6574 7572 6e20 5472 7565  pe): return True
+0000e3f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000e400: 7572 6e20 4661 6c73 6520 6966 2054 7970  urn False if Typ
+0000e410: 6528 7372 632c 4368 6563 6b54 7970 6529  e(src,CheckType)
+0000e420: 2065 6c73 6520 5472 7565 0a20 2020 2020   else True.     
+0000e430: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+0000e440: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+0000e450: 7461 6e63 6528 7372 632c 2862 6f6f 6c2c  tance(src,(bool,
+0000e460: 696e 7429 293a 0a20 2020 2020 2020 2069  int)):.        i
+0000e470: 6620 6e6f 7420 7372 633a 2072 6574 7572  f not src: retur
+0000e480: 6e20 5472 7565 0a20 2020 2023 2069 2077  n True.    # i w
+0000e490: 616e 7420 6368 6563 6b20 5479 7065 2074  ant check Type t
+0000e4a0: 6865 6e20 6469 6666 6572 656e 7420 7479  hen different ty
+0000e4b0: 7065 2074 6865 6e20 7265 7475 726e 2054  pe then return T
+0000e4c0: 7275 650a 2020 2020 6966 205f 7479 7065  rue.    if _type
+0000e4d0: 5f3a 0a20 2020 2020 2020 2023 6966 2054  _:.        #if T
+0000e4e0: 7970 654e 616d 6528 7372 6329 2021 3d20  ypeName(src) != 
+0000e4f0: 5479 7065 4e61 6d65 2843 6865 636b 5479  TypeName(CheckTy
+0000e500: 7065 293a 2072 6574 7572 6e20 5472 7565  pe): return True
+0000e510: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000e520: 4661 6c73 6520 6966 2054 7970 6528 7372  False if Type(sr
+0000e530: 632c 4368 6563 6b54 7970 6529 2065 6c73  c,CheckType) els
+0000e540: 6520 5472 7565 0a20 2020 2072 6574 7572  e True.    retur
+0000e550: 6e20 4661 6c73 650a 0a64 6566 2049 7356  n False..def IsV
+0000e560: 6172 2873 7263 2c6f 626a 3d4e 6f6e 652c  ar(src,obj=None,
+0000e570: 6465 6661 756c 743d 4661 6c73 652c 6d6f  default=False,mo
+0000e580: 6465 3d27 616c 6c27 2c70 6172 656e 743d  de='all',parent=
+0000e590: 3029 3a0a 2020 2020 2727 270a 2020 2020  0):.    '''.    
+0000e5a0: 4368 6563 6b20 7468 6520 696e 7075 7428  Check the input(
+0000e5b0: 7372 6329 2069 7320 5661 7269 6162 6c65  src) is Variable
+0000e5c0: 206e 616d 6520 6f72 206e 6f74 2028 696e   name or not (in
+0000e5d0: 204f 424a 206f 7220 696e 206d 7920 6675   OBJ or in my fu
+0000e5e0: 6e63 7469 6f6e 290a 2020 2020 2727 270a  nction).    '''.
+0000e5f0: 2020 2020 6f6f 3d56 6172 6961 626c 6528      oo=Variable(
+0000e600: 7372 632c 6f62 6a3d 6f62 6a2c 7061 7265  src,obj=obj,pare
+0000e610: 6e74 3d31 2b70 6172 656e 742c 6869 7374  nt=1+parent,hist
+0000e620: 6f72 793d 4661 6c73 652c 6465 6661 756c  ory=False,defaul
+0000e630: 743d 275f 235f 272c 6d6f 6465 3d6d 6f64  t='_#_',mode=mod
+0000e640: 6529 0a20 2020 2069 6620 6f6f 203d 3d20  e).    if oo == 
+0000e650: 275f 235f 273a 2072 6574 7572 6e20 6465  '_#_': return de
+0000e660: 6661 756c 740a 2020 2020 7265 7475 726e  fault.    return
+0000e670: 2054 7275 650a 0a64 6566 2049 7346 756e   True..def IsFun
+0000e680: 6374 696f 6e28 7372 633d 4e6f 6e65 2c66  ction(src=None,f
+0000e690: 696e 643d 275f 235f 272c 6275 696c 7469  ind='_#_',builti
+0000e6a0: 6e3d 4661 6c73 6529 3a0a 2020 2020 2727  n=False):.    ''
+0000e6b0: 270a 2020 2020 4368 6563 6b20 7468 6520  '.    Check the 
+0000e6c0: 6669 6e64 2069 7320 4675 6e63 7469 6f6e  find is Function
+0000e6d0: 2069 6e20 7372 6320 6f62 6a65 6374 0a20   in src object. 
+0000e6e0: 2020 2027 2727 0a20 2020 2069 6620 4973     '''.    if Is
+0000e6f0: 4e6f 6e65 2873 7263 293a 0a20 2020 2020  None(src):.     
+0000e700: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0000e710: 2866 696e 642c 7374 7229 2061 6e64 2066  (find,str) and f
+0000e720: 696e 6420 213d 2027 5f23 5f27 3a0a 2020  ind != '_#_':.  
+0000e730: 2020 2020 2020 2020 2020 6669 6e64 3d47            find=G
+0000e740: 6c6f 6261 6c28 292e 6765 7428 6669 6e64  lobal().get(find
+0000e750: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0000e760: 2069 6e73 7065 6374 2e69 7366 756e 6374   inspect.isfunct
+0000e770: 696f 6e28 6669 6e64 290a 2020 2020 656c  ion(find).    el
+0000e780: 7365 3a0a 2020 2020 2020 2020 6966 2062  se:.        if b
+0000e790: 7569 6c74 696e 3a0a 2020 2020 2020 2020  uiltin:.        
+0000e7a0: 2020 2020 6966 2074 7970 6528 7372 6329      if type(src)
+0000e7b0: 2e5f 5f6e 616d 655f 5f20 696e 205b 2766  .__name__ in ['f
+0000e7c0: 756e 6374 696f 6e27 2c27 696e 7374 616e  unction','instan
+0000e7d0: 6365 6d65 7468 6f64 272c 276d 6574 686f  cemethod','metho
+0000e7e0: 6427 2c27 6275 696c 7469 6e5f 6675 6e63  d','builtin_func
+0000e7f0: 7469 6f6e 5f6f 725f 6d65 7468 6f64 275d  tion_or_method']
+0000e800: 3a20 7265 7475 726e 2054 7275 6520 2320  : return True # 
+0000e810: 7372 6320 6973 2066 756e 6374 696f 6e20  src is function 
+0000e820: 7468 656e 0a20 2020 2020 2020 2065 6c73  then.        els
+0000e830: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+0000e840: 6620 7479 7065 2873 7263 292e 5f5f 6e61  f type(src).__na
+0000e850: 6d65 5f5f 2069 6e20 5b27 6675 6e63 7469  me__ in ['functi
+0000e860: 6f6e 272c 2769 6e73 7461 6e63 656d 6574  on','instancemet
+0000e870: 686f 6427 2c27 6d65 7468 6f64 275d 3a20  hod','method']: 
+0000e880: 7265 7475 726e 2054 7275 6520 2320 7372  return True # sr
+0000e890: 6320 6973 2066 756e 6374 696f 6e20 7468  c is function th
+0000e8a0: 656e 0a20 2020 2023 2066 696e 6420 6675  en.    # find fu
+0000e8b0: 6e63 7469 6f6e 2069 6e20 6f62 6a65 6374  nction in object
+0000e8c0: 0a20 2020 2061 613d 5b5d 0a20 2020 2069  .    aa=[].    i
+0000e8d0: 6620 7479 7065 2866 696e 6429 2e5f 5f6e  f type(find).__n
+0000e8e0: 616d 655f 5f20 3d3d 2027 6675 6e63 7469  ame__ == 'functi
+0000e8f0: 6f6e 273a 2066 696e 643d 6669 6e64 2e5f  on': find=find._
+0000e900: 5f6e 616d 655f 5f0a 2020 2020 6966 206e  _name__.    if n
+0000e910: 6f74 2069 7369 6e73 7461 6e63 6528 6669  ot isinstance(fi
+0000e920: 6e64 2c73 7472 293a 2072 6574 7572 6e20  nd,str): return 
+0000e930: 4661 6c73 650a 2020 2020 6966 2069 7369  False.    if isi
+0000e940: 6e73 7461 6e63 6528 7372 632c 7374 7229  nstance(src,str)
+0000e950: 3a20 7372 633d 7379 732e 6d6f 6475 6c65  : src=sys.module
+0000e960: 732e 6765 7428 7372 6329 0a20 2020 2069  s.get(src).    i
+0000e970: 6620 696e 7370 6563 742e 6973 6d6f 6475  f inspect.ismodu
+0000e980: 6c65 2873 7263 2920 6f72 2069 6e73 7065  le(src) or inspe
+0000e990: 6374 2e69 7363 6c61 7373 2873 7263 293a  ct.isclass(src):
+0000e9a0: 0a20 2020 2020 2020 2066 6f72 206e 616d  .        for nam
+0000e9b0: 652c 666f 626a 2069 6e20 696e 7370 6563  e,fobj in inspec
+0000e9c0: 742e 6765 746d 656d 6265 7273 2873 7263  t.getmembers(src
+0000e9d0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+0000e9e0: 6620 696e 7370 6563 742e 6973 6675 6e63  f inspect.isfunc
+0000e9f0: 7469 6f6e 2866 6f62 6a29 3a20 2320 696e  tion(fobj): # in
+0000ea00: 7370 6563 742e 6973 6d6f 6475 6c65 286f  spect.ismodule(o
+0000ea10: 626a 2920 6368 6563 6b20 7468 6520 6f62  bj) check the ob
+0000ea20: 6a20 6973 206d 6f64 756c 6520 6f72 206e  j is module or n
+0000ea30: 6f74 0a20 2020 2020 2020 2020 2020 2020  ot.             
+0000ea40: 2020 2061 612e 6170 7065 6e64 286e 616d     aa.append(nam
+0000ea50: 6529 0a20 2020 2065 6c73 653a 0a20 2020  e).    else:.   
+0000ea60: 2020 2020 2066 6f72 206e 616d 652c 666f       for name,fo
+0000ea70: 626a 2069 6e20 696e 7370 6563 742e 6765  bj in inspect.ge
+0000ea80: 746d 656d 6265 7273 2873 7263 293a 0a20  tmembers(src):. 
+0000ea90: 2020 2020 2020 2020 2020 2069 6620 696e             if in
+0000eaa0: 7370 6563 742e 6973 6d65 7468 6f64 2866  spect.ismethod(f
+0000eab0: 6f62 6a29 3a20 2320 696e 7370 6563 742e  obj): # inspect.
+0000eac0: 6973 6d6f 6475 6c65 286f 626a 2920 6368  ismodule(obj) ch
+0000ead0: 6563 6b20 7468 6520 6f62 6a20 6973 206d  eck the obj is m
+0000eae0: 6f64 756c 6520 6f72 206e 6f74 0a20 2020  odule or not.   
+0000eaf0: 2020 2020 2020 2020 2020 2020 2061 612e               aa.
+0000eb00: 6170 7065 6e64 286e 616d 6529 0a20 2020  append(name).   
+0000eb10: 2069 6620 6669 6e64 2069 6e20 6161 3a20   if find in aa: 
+0000eb20: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+0000eb30: 7265 7475 726e 2046 616c 7365 0a0a 6465  return False..de
+0000eb40: 6620 4973 4279 7465 7328 7372 6329 3a0a  f IsBytes(src):.
+0000eb50: 2020 2020 2727 270a 2020 2020 4368 6563      '''.    Chec
+0000eb60: 6b20 6461 7461 2069 7320 4279 7465 7320  k data is Bytes 
+0000eb70: 6f72 206e 6f74 0a20 2020 2027 2727 0a20  or not.    '''. 
+0000eb80: 2020 2069 6620 5079 5665 7228 3329 3a0a     if PyVer(3):.
+0000eb90: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0000eba0: 7461 6e63 6528 7372 632c 6279 7465 7329  tance(src,bytes)
+0000ebb0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0000ebc0: 7475 726e 2054 7275 650a 2020 2020 7265  turn True.    re
+0000ebd0: 7475 726e 2046 616c 7365 0a0a 6465 6620  turn False..def 
+0000ebe0: 4973 496e 7428 7372 632c 6d6f 6465 3d27  IsInt(src,mode='
+0000ebf0: 616c 6c27 293a 0a20 2020 2027 2727 0a20  all'):.    '''. 
+0000ec00: 2020 2043 6865 636b 2064 6174 6120 6973     Check data is
+0000ec10: 2049 6e74 206f 7220 6e6f 740a 2020 2020   Int or not.    
+0000ec20: 2d20 6d6f 6465 203a 2069 6e74 203d 3e20  - mode : int => 
+0000ec30: 6368 6563 6b20 6f6e 6c79 2069 6e74 0a20  check only int. 
+0000ec40: 2020 2020 2020 2020 2020 2020 7374 7220              str 
+0000ec50: 3d3e 2069 6e74 2074 7970 6520 7374 7269  => int type stri
+0000ec60: 6e67 206f 6e6c 790a 2020 2020 2020 2020  ng only.        
+0000ec70: 2020 2020 2061 6c6c 203d 3e20 496e 7420       all => Int 
+0000ec80: 616e 6420 696e 7420 7479 7065 2073 7472  and int type str
+0000ec90: 696e 670a 2020 2020 2727 270a 2020 2020  ing.    '''.    
+0000eca0: 6465 6620 5f69 6e74 5f28 6461 7461 293a  def _int_(data):
+0000ecb0: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+0000ecc0: 2020 2020 2020 2020 2020 696e 7428 6461            int(da
+0000ecd0: 7461 290a 2020 2020 2020 2020 2020 2020  ta).            
+0000ece0: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+0000ecf0: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+0000ed00: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+0000ed10: 616c 7365 0a0a 2020 2020 6966 206e 6f74  alse..    if not
+0000ed20: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
+0000ed30: 626f 6f6c 293a 0a20 2020 2020 2020 2069  bool):.        i
+0000ed40: 6620 6d6f 6465 2069 6e20 5b69 6e74 2c27  f mode in [int,'
+0000ed50: 696e 7427 5d3a 0a20 2020 2020 2020 2020  int']:.         
+0000ed60: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0000ed70: 2873 7263 2c69 6e74 293a 0a20 2020 2020  (src,int):.     
+0000ed80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000ed90: 6e20 5472 7565 0a20 2020 2020 2020 2065  n True.        e
+0000eda0: 6c69 6620 6d6f 6465 2069 6e20 5b73 7472  lif mode in [str
+0000edb0: 2c27 7374 7227 2c27 7465 7874 272c 2773  ,'str','text','s
+0000edc0: 7472 696e 6727 5d3a 0a20 2020 2020 2020  tring']:.       
+0000edd0: 2020 2020 2069 6620 5479 7065 2873 7263       if Type(src
+0000ede0: 2c28 2773 7472 272c 2762 7974 6573 2729  ,('str','bytes')
+0000edf0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0000ee00: 2020 2072 6574 7572 6e20 5f69 6e74 5f28     return _int_(
+0000ee10: 7372 6329 0a20 2020 2020 2020 2065 6c73  src).        els
+0000ee20: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0000ee30: 6574 7572 6e20 5f69 6e74 5f28 7372 6329  eturn _int_(src)
+0000ee40: 0a20 2020 2072 6574 7572 6e20 4661 6c73  .    return Fals
+0000ee50: 650a 0a64 6566 205f 6f62 6a5f 6d61 785f  e..def _obj_max_
+0000ee60: 6964 785f 286f 626a 2c69 6478 2c65 7272  idx_(obj,idx,err
+0000ee70: 3d54 7275 6529 3a0a 2020 2020 2347 6574  =True):.    #Get
+0000ee80: 204f 626a 6563 7427 7320 6d61 7820 6c65   Object's max le
+0000ee90: 6e67 7468 0a20 2020 206f 626a 5f6c 656e  ngth.    obj_len
+0000eea0: 3d6c 656e 286f 626a 290a 2020 2020 6966  =len(obj).    if
+0000eeb0: 206f 626a 5f6c 656e 203d 3d20 303a 2072   obj_len == 0: r
+0000eec0: 6574 7572 6e20 4e6f 6e65 0a20 2020 2069  eturn None.    i
+0000eed0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+0000eee0: 2869 6478 2c69 6e74 293a 0a20 2020 2020  (idx,int):.     
+0000eef0: 2020 2069 6620 6572 7220 6973 2054 7275     if err is Tru
+0000ef00: 653a 2072 6574 7572 6e20 4661 6c73 650a  e: return False.
+0000ef10: 2020 2020 2020 2020 7265 7475 726e 206f          return o
+0000ef20: 626a 5f6c 656e 2d31 0a20 2020 2069 6620  bj_len-1.    if 
+0000ef30: 6964 7820 3e3d 2030 3a0a 2020 2020 2020  idx >= 0:.      
+0000ef40: 2020 6966 206f 626a 5f6c 656e 203c 3d20    if obj_len <= 
+0000ef50: 6964 783a 0a20 2020 2020 2020 2020 2020  idx:.           
+0000ef60: 2069 6620 6572 7220 6973 2054 7275 653a   if err is True:
+0000ef70: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
+0000ef80: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000ef90: 206f 626a 5f6c 656e 2d31 0a20 2020 2020   obj_len-1.     
+0000efa0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000efb0: 2020 2020 2072 6574 7572 6e20 6964 780a       return idx.
+0000efc0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000efd0: 2020 6966 206f 626a 5f6c 656e 203c 2061    if obj_len < a
+0000efe0: 6273 2869 6478 293a 0a20 2020 2020 2020  bs(idx):.       
+0000eff0: 2020 2020 2069 6620 6572 7220 6973 2054       if err is T
+0000f000: 7275 653a 2072 6574 7572 6e20 4661 6c73  rue: return Fals
+0000f010: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
+0000f020: 7475 726e 2030 0a20 2020 2020 2020 2072  turn 0.        r
+0000f030: 6574 7572 6e20 6f62 6a5f 6c65 6e2b 6964  eturn obj_len+id
+0000f040: 780a 0a64 6566 204d 6178 286f 626a 2c6b  x..def Max(obj,k
+0000f050: 6579 3d46 616c 7365 2c65 7272 3d54 7275  ey=False,err=Tru
+0000f060: 6529 3a0a 2020 2020 2354 6f44 6f3a 0a20  e):.    #ToDo:. 
+0000f070: 2020 2023 202d 206c 6973 742c 7475 706c     # - list,tupl
+0000f080: 653a 0a20 2020 2023 2020 2020 2d20 6b65  e:.    #    - ke
+0000f090: 7920 3a20 5472 7565 203a 204d 6178 206f  y : True : Max o
+0000f0a0: 6620 6964 780a 2020 2020 2320 2020 202d  f idx.    #    -
+0000f0b0: 206b 6579 203a 2046 616c 7365 3a20 6765   key : False: ge
+0000f0c0: 7420 6d61 7869 6d75 6d20 6e75 6d62 6572  t maximum number
+0000f0d0: 206f 7220 6c61 7374 2073 7472 696e 670a   or last string.
+0000f0e0: 2020 2020 2320 2020 202d 206b 6579 203a      #    - key :
+0000f0f0: 2076 6572 7369 6f6e 3a20 6c61 7374 2076   version: last v
+0000f100: 6572 7369 6f6e 0a20 2020 2023 202d 2064  ersion.    # - d
+0000f110: 6963 7420 3a0a 2020 2020 2320 2020 202d  ict :.    #    -
+0000f120: 206b 6579 203a 2054 7275 6520 3a20 4d61   key : True : Ma
+0000f130: 7820 696e 206b 6579 730a 2020 2020 2320  x in keys.    # 
+0000f140: 2020 202d 206b 6579 203a 2046 616c 7365     - key : False
+0000f150: 3a20 4d61 7820 696e 2076 616c 7565 730a  : Max in values.
+0000f160: 2020 2020 2320 2020 202d 206b 6579 203a      #    - key :
+0000f170: 204e 6f6e 6520 6f72 2064 6963 743a 206c   None or dict: l
+0000f180: 6173 7420 696e 7075 7420 6469 6374 0a20  ast input dict. 
+0000f190: 2020 2023 7072 696e 7428 273e 3e27 2c6f     #print('>>',o
+0000f1a0: 626a 290a 2020 2020 6966 2069 7369 6e73  bj).    if isins
+0000f1b0: 7461 6e63 6528 6f62 6a2c 286c 6973 742c  tance(obj,(list,
+0000f1c0: 7475 706c 6529 293a 0a20 2020 2020 2020  tuple)):.       
+0000f1d0: 2069 6620 6b65 7920 6973 2054 7275 653a   if key is True:
+0000f1e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000f1f0: 7572 6e20 5f6f 626a 5f6d 6178 5f69 6478  urn _obj_max_idx
+0000f200: 5f28 6f62 6a2c 6572 723d 6572 7229 0a20  _(obj,err=err). 
+0000f210: 2020 2020 2020 2065 6c69 6620 4973 496e         elif IsIn
+0000f220: 286b 6579 2c5b 2776 6572 272c 2776 6572  (key,['ver','ver
+0000f230: 7369 6f6e 275d 293a 0a20 2020 2020 2020  sion']):.       
+0000f240: 2020 2020 2061 3d27 302e 3027 0a20 2020       a='0.0'.   
+0000f250: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+0000f260: 6e20 6f62 6a3a 0a20 2020 2020 2020 2020  n obj:.         
+0000f270: 2020 2020 2020 2069 6620 436f 6d70 5665         if CompVe
+0000f280: 7273 696f 6e28 692c 273e 272c 6129 3a0a  rsion(i,'>',a):.
+0000f290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f2a0: 2020 2020 613d 690a 2020 2020 2020 2020      a=i.        
+0000f2b0: 2020 2020 6966 2061 3d3d 2730 2e30 273a      if a=='0.0':
+0000f2c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f2d0: 2069 6620 6572 723a 0a20 2020 2020 2020   if err:.       
+0000f2e0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0000f2f0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+0000f300: 2020 2020 2020 7265 7475 726e 2061 0a20        return a. 
+0000f310: 2020 2020 2020 2065 6c69 6620 6b65 7920         elif key 
+0000f320: 6973 2046 616c 7365 3a0a 2020 2020 2020  is False:.      
+0000f330: 2020 2020 2020 613d 2d31 2023 6e75 6d62        a=-1 #numb
+0000f340: 6572 0a20 2020 2020 2020 2020 2020 2062  er.            b
+0000f350: 3d5b 5d20 2373 7472 696e 670a 2020 2020  =[] #string.    
+0000f360: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+0000f370: 206f 626a 3a0a 2020 2020 2020 2020 2020   obj:.          
+0000f380: 2020 2020 2020 693d 496e 7428 6929 0a20        i=Int(i). 
+0000f390: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000f3a0: 7072 696e 7428 273e 3e69 3a27 2c69 290a  print('>>i:',i).
+0000f3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f3c0: 6966 2069 7369 6e73 7461 6e63 6528 692c  if isinstance(i,
+0000f3d0: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+0000f3e0: 2020 2020 2020 2020 2020 6966 2061 203c            if a <
+0000f3f0: 2069 3a0a 2020 2020 2020 2020 2020 2020   i:.            
+0000f400: 2020 2020 2020 2020 2020 2020 613d 690a              a=i.
+0000f410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f420: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+0000f430: 692c 7374 7229 3a0a 2020 2020 2020 2020  i,str):.        
+0000f440: 2020 2020 2020 2020 2020 2020 622e 6170              b.ap
+0000f450: 7065 6e64 2869 290a 2020 2020 2020 2020  pend(i).        
+0000f460: 2020 2020 2370 7269 6e74 2827 3e3e 623a      #print('>>b:
+0000f470: 272c 6229 0a20 2020 2020 2020 2020 2020  ',b).           
+0000f480: 2069 6620 6120 3e20 2d31 3a0a 2020 2020   if a > -1:.    
+0000f490: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000f4a0: 726e 2061 0a20 2020 2020 2020 2020 2020  rn a.           
+0000f4b0: 2065 6c69 6620 623a 0a20 2020 2020 2020   elif b:.       
+0000f4c0: 2020 2020 2020 2020 2062 2e73 6f72 7428           b.sort(
+0000f4d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000f4e0: 2020 7265 7475 726e 2062 5b2d 315d 0a20    return b[-1]. 
+0000f4f0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0000f500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f510: 2069 6620 6572 723a 0a20 2020 2020 2020   if err:.       
+0000f520: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0000f530: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+0000f540: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000f550: 206f 626a 5b2d 315d 0a20 2020 2065 6c69   obj[-1].    eli
+0000f560: 6620 6973 696e 7374 616e 6365 286f 626a  f isinstance(obj
+0000f570: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
+0000f580: 6966 206b 6579 2069 7320 5472 7565 3a0a  if key is True:.
+0000f590: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000f5a0: 726e 204d 6178 286c 6973 7428 6f62 6a2e  rn Max(list(obj.
+0000f5b0: 6b65 7973 2829 292c 6572 723d 6572 7229  keys()),err=err)
+0000f5c0: 0a20 2020 2020 2020 2065 6c69 6620 6b65  .        elif ke
+0000f5d0: 7920 6973 2046 616c 7365 3a0a 2020 2020  y is False:.    
+0000f5e0: 2020 2020 2020 2020 7265 7475 726e 204d          return M
+0000f5f0: 6178 286c 6973 7428 6f62 6a2e 7661 6c75  ax(list(obj.valu
+0000f600: 6573 2829 292c 6572 723d 6572 7229 0a20  es()),err=err). 
+0000f610: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0000f620: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000f630: 4d61 7828 6c69 7374 286f 626a 2e69 7465  Max(list(obj.ite
+0000f640: 6d73 2829 292c 6572 723d 4661 6c73 6529  ms()),err=False)
+0000f650: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+0000f660: 2020 2069 6620 6572 723a 0a20 2020 2020     if err:.     
+0000f670: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0000f680: 6c73 650a 2020 2020 2020 2020 656c 7365  lse.        else
+0000f690: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0000f6a0: 7475 726e 206f 626a 0a0a 636c 6173 7320  turn obj..class 
+0000f6b0: 4449 4354 2864 6963 7429 3a0a 2020 2020  DICT(dict):.    
+0000f6c0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+0000f6d0: 662c 202a 696e 7073 2c2a 2a6f 7074 7329  f, *inps,**opts)
+0000f6e0: 3a0a 2020 2020 2020 2020 666f 7220 6920  :.        for i 
+0000f6f0: 696e 2069 6e70 733a 0a20 2020 2020 2020  in inps:.       
+0000f700: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0000f710: 6365 2869 2c28 6469 6374 2c44 4943 5429  ce(i,(dict,DICT)
+0000f720: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0000f730: 2020 2066 6f72 206b 2069 6e20 693a 0a20     for k in i:. 
+0000f740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f750: 2020 2073 656c 662e 5f5f 7365 7469 7465     self.__setite
+0000f760: 6d5f 5f28 6b2c 695b 6b5d 290a 2020 2020  m__(k,i[k]).    
+0000f770: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+0000f780: 6e73 7461 6e63 6528 692c 7475 706c 6529  nstance(i,tuple)
+0000f790: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000f7a0: 2020 7365 6c66 2e54 7570 6c65 4469 6374    self.TupleDict
+0000f7b0: 2869 290a 2020 2020 2020 2020 2020 2020  (i).            
+0000f7c0: 656c 6966 2054 7970 6528 692c 2764 6963  elif Type(i,'dic
+0000f7d0: 745f 6974 656d 7327 293a 0a20 2020 2020  t_items'):.     
+0000f7e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000f7f0: 5475 706c 6544 6963 7428 2a74 7570 6c65  TupleDict(*tuple
+0000f800: 2869 2929 0a20 2020 2020 2020 2020 2020  (i)).           
+0000f810: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000f820: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+0000f830: 2020 2020 2020 2020 6966 206f 7074 733a          if opts:
+0000f840: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+0000f850: 2069 2069 6e20 6f70 7473 3a0a 2020 2020   i in opts:.    
+0000f860: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000f870: 2e5f 5f73 6574 6974 656d 5f5f 2869 2c6f  .__setitem__(i,o
+0000f880: 7074 735b 695d 290a 2020 2020 6465 6620  pts[i]).    def 
+0000f890: 5f5f 6765 7469 7465 6d5f 5f28 7365 6c66  __getitem__(self
+0000f8a0: 2c20 6b65 7929 3a0a 2020 2020 2020 2020  , key):.        
+0000f8b0: 7265 7475 726e 2064 6963 742e 5f5f 6765  return dict.__ge
+0000f8c0: 7469 7465 6d5f 5f28 7365 6c66 2c6b 6579  titem__(self,key
+0000f8d0: 290a 0a20 2020 2064 6566 205f 5f73 6574  )..    def __set
+0000f8e0: 6974 656d 5f5f 2873 656c 662c 206b 6579  item__(self, key
+0000f8f0: 2c20 7661 6c75 6529 3a0a 2020 2020 2020  , value):.      
+0000f900: 2020 666f 756e 643d 7365 6c66 2e67 6574    found=self.get
+0000f910: 286b 6579 2c4e 6f6e 6529 0a20 2020 2020  (key,None).     
+0000f920: 2020 2069 6620 5479 7065 2866 6f75 6e64     if Type(found
+0000f930: 2c28 2744 4943 5427 2c27 6469 6374 2729  ,('DICT','dict')
+0000f940: 293a 0a20 2020 2020 2020 2020 2020 2023  ):.            #
+0000f950: 2063 6861 6e67 6520 696e 746f 2064 6963   change into dic
+0000f960: 740a 2020 2020 2020 2020 2020 2020 7375  t.            su
+0000f970: 7065 7228 4449 4354 2c20 7365 6c66 292e  per(DICT, self).
+0000f980: 5f5f 7365 7469 7465 6d5f 5f28 6b65 792c  __setitem__(key,
+0000f990: 2066 6f75 6e64 290a 2020 2020 2020 2020   found).        
+0000f9a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000f9b0: 2020 2320 6d61 6b65 2061 2073 7562 2064    # make a sub d
+0000f9c0: 6963 7420 746f 2064 6f74 2064 6963 740a  ict to dot dict.
+0000f9d0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0000f9e0: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
+0000f9f0: 6469 6374 2920 616e 6420 6e6f 7420 6973  dict) and not is
+0000fa00: 696e 7374 616e 6365 2876 616c 7565 2c44  instance(value,D
+0000fa10: 4943 5429 3a0a 2020 2020 2020 2020 2020  ICT):.          
+0000fa20: 2020 2020 2020 7661 6c75 653d 4449 4354        value=DICT
+0000fa30: 2876 616c 7565 290a 2020 2020 2020 2020  (value).        
+0000fa40: 2020 2020 2320 7365 7420 646f 7420 7479      # set dot ty
+0000fa50: 7065 2064 6963 7420 746f 2073 7562 2064  pe dict to sub d
+0000fa60: 6963 740a 2020 2020 2020 2020 2020 2020  ict.            
+0000fa70: 7375 7065 7228 4449 4354 2c20 7365 6c66  super(DICT, self
+0000fa80: 292e 5f5f 7365 7469 7465 6d5f 5f28 6b65  ).__setitem__(ke
+0000fa90: 792c 2076 616c 7565 290a 2020 2020 6465  y, value).    de
+0000faa0: 6620 4364 2873 656c 662c 206b 6579 2c73  f Cd(self, key,s
+0000fab0: 796d 626f 6c3d 272f 272c 6465 6661 756c  ymbol='/',defaul
+0000fac0: 743d 4661 6c73 6529 3a0a 2020 2020 2020  t=False):.      
+0000fad0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000fae0: 6b65 792c 7374 7229 3a0a 2020 2020 2020  key,str):.      
+0000faf0: 2020 2020 2020 6b65 793d 6b65 792e 7370        key=key.sp
+0000fb00: 6c69 7428 272f 2729 0a20 2020 2020 2020  lit('/').       
+0000fb10: 2020 2020 2069 6620 6b65 795b 305d 203d       if key[0] =
+0000fb20: 3d20 2727 3a20 6465 6c20 6b65 795b 305d  = '': del key[0]
+0000fb30: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+0000fb40: 7374 616e 6365 286b 6579 2c28 6c69 7374  stance(key,(list
+0000fb50: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
+0000fb60: 2020 2020 2020 666f 7220 6920 696e 206b        for i in k
+0000fb70: 6579 3a0a 2020 2020 2020 2020 2020 2020  ey:.            
+0000fb80: 2020 2020 6966 2069 2069 6e20 7365 6c66      if i in self
+0000fb90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000fba0: 2020 2020 2020 7365 6c66 3d73 656c 665b        self=self[
+0000fbb0: 695d 0a20 2020 2020 2020 2020 2020 2020  i].             
+0000fbc0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000fbd0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0000fbe0: 7572 6e20 2064 6566 6175 6c74 0a20 2020  urn  default.   
+0000fbf0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000fc00: 7365 6c66 0a20 2020 2020 2020 2072 6574  self.        ret
+0000fc10: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
+0000fc20: 6465 6620 5475 706c 6544 6963 7428 7365  def TupleDict(se
+0000fc30: 6c66 2c2a 696e 7073 2c2a 2a6f 7074 7329  lf,*inps,**opts)
+0000fc40: 3a0a 2020 2020 2020 2020 234d 6572 6765  :.        #Merge
+0000fc50: 202a 696e 7073 2074 6f20 4449 4354 2829   *inps to DICT()
+0000fc60: 2064 6174 610a 2020 2020 2020 2020 6572   data.        er
+0000fc70: 723d 6f70 7473 2e67 6574 2827 6572 7227  r=opts.get('err'
+0000fc80: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
+0000fc90: 6465 6661 756c 743d 6f70 7473 2e67 6574  default=opts.get
+0000fca0: 2827 6465 6661 756c 7427 2c46 616c 7365  ('default',False
+0000fcb0: 290a 2020 2020 2020 2020 6f75 743d 7b7d  ).        out={}
+0000fcc0: 0a20 2020 2020 2020 2066 6f72 2069 2069  .        for i i
+0000fcd0: 6e20 696e 7073 3a0a 2020 2020 2020 2020  n inps:.        
+0000fce0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0000fcf0: 6528 692c 7475 706c 6529 2061 6e64 206c  e(i,tuple) and l
+0000fd00: 656e 2869 2920 3d3d 2032 3a0a 2020 2020  en(i) == 2:.    
+0000fd10: 2020 2020 2020 2020 2020 2020 6b2c 763d              k,v=
+0000fd20: 690a 2020 2020 2020 2020 2020 2020 2020  i.              
+0000fd30: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0000fd40: 762c 2864 6963 742c 4449 4354 2929 3a0a  v,(dict,DICT)):.
+0000fd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fd60: 2020 2020 763d 6469 6374 2876 290a 2020      v=dict(v).  
+0000fd70: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0000fd80: 6966 2069 7369 6e73 7461 6e63 6528 762c  if isinstance(v,
+0000fd90: 7475 706c 6529 3a0a 2020 2020 2020 2020  tuple):.        
+0000fda0: 2020 2020 2020 2020 2020 2020 763d 7365              v=se
+0000fdb0: 6c66 2e54 7570 6c65 4469 6374 2876 2c2a  lf.TupleDict(v,*
+0000fdc0: 2a6f 7074 7329 0a20 2020 2020 2020 2020  *opts).         
+0000fdd0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0000fde0: 7420 6973 696e 7374 616e 6365 2876 2c28  t isinstance(v,(
+0000fdf0: 6469 6374 2c44 4943 5429 293a 0a20 2020  dict,DICT)):.   
+0000fe00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fe10: 2020 2020 2069 6620 6572 723a 0a20 2020       if err:.   
+0000fe20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fe30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000fe40: 4465 6661 756c 7428 696e 7073 2c64 6566  Default(inps,def
+0000fe50: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
+0000fe60: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0000fe70: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+0000fe80: 2020 2020 2020 206f 7574 5b6b 5d3d 760a         out[k]=v.
+0000fe90: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000fea0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000feb0: 2020 6966 2065 7272 3a0a 2020 2020 2020    if err:.      
+0000fec0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000fed0: 7475 726e 2044 6566 6175 6c74 2869 6e70  turn Default(inp
+0000fee0: 732c 6465 6661 756c 7429 0a20 2020 2020  s,default).     
+0000fef0: 2020 2066 6f72 206b 2069 6e20 6f75 743a     for k in out:
+0000ff00: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000ff10: 662e 5f5f 7365 7469 7465 6d5f 5f28 6b2c  f.__setitem__(k,
+0000ff20: 6f75 745b 6b5d 290a 2020 2020 2020 2020  out[k]).        
+0000ff30: 7265 7475 726e 2073 656c 660a 2020 2020  return self.    
+0000ff40: 6465 6620 5475 706c 6528 7365 6c66 293a  def Tuple(self):
+0000ff50: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000ff60: 7475 706c 6528 7365 6c66 2e69 7465 6d73  tuple(self.items
+0000ff70: 2829 290a 2020 2020 6465 6620 4765 7428  ()).    def Get(
+0000ff80: 7365 6c66 2c2a 696e 7073 2c2a 2a6f 7074  self,*inps,**opt
+0000ff90: 7329 3a0a 2020 2020 2020 2020 6966 206c  s):.        if l
+0000ffa0: 656e 2869 6e70 7329 203d 3d20 313a 0a20  en(inps) == 1:. 
+0000ffb0: 2020 2020 2020 2020 2020 2069 6478 3d69             idx=i
+0000ffc0: 6e70 735b 305d 0a20 2020 2020 2020 2065  nps[0].        e
+0000ffd0: 6c69 6620 6c65 6e28 696e 7073 2920 3e20  lif len(inps) > 
+0000ffe0: 313a 0a20 2020 2020 2020 2020 2020 2069  1:.            i
+0000fff0: 6478 3d69 6e70 735b 3a5d 0a20 2020 2020  dx=inps[:].     
+00010000: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00010010: 2020 2020 2069 6478 3d4e 6f6e 650a 2020       idx=None.  
+00010020: 2020 2020 2020 6465 6661 756c 743d 6f70        default=op
+00010030: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
+00010040: 290a 2020 2020 2020 2020 6572 723d 6f70  ).        err=op
+00010050: 7473 2e67 6574 2827 6572 7227 2c6f 7074  ts.get('err',opt
+00010060: 732e 6765 7428 2765 7272 6f72 272c 4661  s.get('error',Fa
+00010070: 6c73 6529 290a 2020 2020 2020 2020 6669  lse)).        fi
+00010080: 6c6c 5f75 703d 6f70 7473 2e67 6574 2827  ll_up=opts.get('
+00010090: 6669 6c6c 5f75 7027 2c27 5f66 416c 7345  fill_up','_fAlsE
+000100a0: 5f27 290a 2020 2020 2020 2020 6964 785f  _').        idx_
+000100b0: 6f6e 6c79 3d6f 7074 732e 6765 7428 2769  only=opts.get('i
+000100c0: 6478 5f6f 6e6c 7927 2c6f 7074 732e 6765  dx_only',opts.ge
+000100d0: 7428 2769 6e64 6578 5f6f 6e6c 7927 2c6f  t('index_only',o
+000100e0: 7074 732e 6765 7428 276f 7264 6572 272c  pts.get('order',
+000100f0: 4661 6c73 6529 2929 0a20 2020 2020 2020  False))).       
+00010100: 205f 7479 7065 3d6f 7074 732e 6765 7428   _type=opts.get(
+00010110: 275f 7479 7065 5f27 2c6f 7074 732e 6765  '_type_',opts.ge
+00010120: 7428 2774 7970 6527 2929 0a20 2020 2020  t('type')).     
+00010130: 2020 206f 7574 3d6f 7074 732e 6765 7428     out=opts.get(
+00010140: 276f 7574 272c 6f70 7473 2e67 6574 2827  'out',opts.get('
+00010150: 6f75 745f 666f 726d 272c 2772 6177 2729  out_form','raw')
+00010160: 290a 2020 2020 2020 2020 7065 656c 3d6f  ).        peel=o
+00010170: 7074 732e 6765 7428 2770 6565 6c27 290a  pts.get('peel').
+00010180: 2020 2020 2020 2020 7374 7269 703d 6f70          strip=op
+00010190: 7473 2e67 6574 2827 7374 7269 7027 2c46  ts.get('strip',F
+000101a0: 616c 7365 290a 2020 2020 2020 2020 6f6b  alse).        ok
+000101b0: 2c6e 6964 783d 496e 6465 7846 6f72 6d28  ,nidx=IndexForm(
+000101c0: 6964 782c 6964 785f 6f6e 6c79 3d46 616c  idx,idx_only=Fal
+000101d0: 7365 290a 2020 2020 2020 2020 6964 785f  se).        idx_
+000101e0: 7479 7065 3d74 7970 6528 6e69 6478 292e  type=type(nidx).
+000101f0: 5f5f 6e61 6d65 5f5f 0a20 2020 2020 2020  __name__.       
+00010200: 2069 6620 6f6b 2069 7320 5472 7565 3a0a   if ok is True:.
+00010210: 2020 2020 2020 2020 2020 2020 6f62 6a5f              obj_
+00010220: 6974 656d 733d 6c69 7374 2873 656c 662e  items=list(self.
+00010230: 6974 656d 7328 2929 0a20 2020 2020 2020  items()).       
+00010240: 2020 2020 2069 6620 6964 785f 7479 7065       if idx_type
+00010250: 203d 3d20 2774 7570 6c65 273a 2023 5261   == 'tuple': #Ra
+00010260: 6e67 6520 496e 6465 780a 2020 2020 2020  nge Index.      
+00010270: 2020 2020 2020 2020 2020 7373 3d5f 6f62            ss=_ob
+00010280: 6a5f 6d61 785f 6964 785f 286f 626a 5f69  j_max_idx_(obj_i
+00010290: 7465 6d73 2c49 6e74 286e 6964 785b 305d  tems,Int(nidx[0]
+000102a0: 292c 6572 7229 0a20 2020 2020 2020 2020  ),err).         
+000102b0: 2020 2020 2020 2065 653d 5f6f 626a 5f6d         ee=_obj_m
+000102c0: 6178 5f69 6478 5f28 6f62 6a5f 6974 656d  ax_idx_(obj_item
+000102d0: 732c 496e 7428 6e69 6478 5b31 5d29 2c65  s,Int(nidx[1]),e
+000102e0: 7272 290a 2020 2020 2020 2020 2020 2020  rr).            
+000102f0: 2020 2020 6966 2054 7970 6528 7373 2c69      if Type(ss,i
+00010300: 6e74 2920 616e 6420 5479 7065 2865 652c  nt) and Type(ee,
+00010310: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+00010320: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00010330: 2044 4943 5428 6469 6374 286f 626a 5f69   DICT(dict(obj_i
+00010340: 7465 6d73 5b73 733a 6565 2b31 5d29 290a  tems[ss:ee+1])).
+00010350: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00010360: 2069 6478 5f74 7970 6520 3d3d 2027 6c69   idx_type == 'li
+00010370: 7374 273a 2023 4f52 2049 6e64 6578 0a20  st': #OR Index. 
+00010380: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00010390: 743d 5b5d 0a20 2020 2020 2020 2020 2020  t=[].           
+000103a0: 2020 2020 2066 6f72 2069 2069 6e20 6e69       for i in ni
+000103b0: 6478 3a0a 2020 2020 2020 2020 2020 2020  dx:.            
+000103c0: 2020 2020 2020 2020 6966 2069 6478 5f6f          if idx_o
+000103d0: 6e6c 793a 0a20 2020 2020 2020 2020 2020  nly:.           
+000103e0: 2020 2020 2020 2020 2020 2020 2069 783d               ix=
+000103f0: 5f6f 626a 5f6d 6178 5f69 6478 5f28 6f62  _obj_max_idx_(ob
+00010400: 6a5f 6974 656d 732c 496e 7428 692c 6465  j_items,Int(i,de
+00010410: 6661 756c 743d 4661 6c73 652c 6572 723d  fault=False,err=
+00010420: 5472 7565 292c 6572 7229 0a20 2020 2020  True),err).     
+00010430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010440: 2020 2069 6620 5479 7065 2869 782c 696e     if Type(ix,in
+00010450: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00010460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010470: 7274 2e61 7070 656e 6428 6f62 6a5f 6974  rt.append(obj_it
+00010480: 656d 735b 6978 5d29 0a20 2020 2020 2020  ems[ix]).       
+00010490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000104a0: 2065 6c69 6620 6669 6c6c 5f75 7020 213d   elif fill_up !=
+000104b0: 2027 5f66 416c 7345 5f27 3a0a 2020 2020   '_fAlsE_':.    
+000104c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000104d0: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
+000104e0: 6428 6669 6c6c 5f75 7029 0a20 2020 2020  d(fill_up).     
+000104f0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00010500: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00010510: 2020 2020 2020 2020 2020 2020 2074 3d73               t=s
+00010520: 656c 662e 6765 7428 6929 0a20 2020 2020  elf.get(i).     
+00010530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010540: 2020 2069 6620 7420 6973 206e 6f74 204e     if t is not N
+00010550: 6f6e 653a 2072 742e 6170 7065 6e64 2874  one: rt.append(t
+00010560: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00010570: 2020 7265 7475 726e 204f 7574 466f 726d    return OutForm
+00010580: 6174 2872 742c 6f75 743d 6f75 742c 6465  at(rt,out=out,de
+00010590: 6661 756c 743d 6465 6661 756c 742c 6f72  fault=default,or
+000105a0: 673d 7365 6c66 2c70 6565 6c3d 7065 656c  g=self,peel=peel
+000105b0: 2c73 7472 6970 3d73 7472 6970 290a 2020  ,strip=strip).  
+000105c0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000105d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000105e0: 6966 2069 6478 5f6f 6e6c 793a 0a20 2020  if idx_only:.   
+000105f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010600: 2069 783d 5f6f 626a 5f6d 6178 5f69 6478   ix=_obj_max_idx
+00010610: 5f28 6f62 6a5f 6974 656d 732c 496e 7428  _(obj_items,Int(
+00010620: 6964 7829 2c65 7272 290a 2020 2020 2020  idx),err).      
+00010630: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00010640: 2054 7970 6528 6978 2c69 6e74 293a 0a20   Type(ix,int):. 
+00010650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010660: 2020 2020 2020 2072 6574 7572 6e20 4449         return DI
+00010670: 4354 2864 6963 7428 286f 626a 5f69 7465  CT(dict((obj_ite
+00010680: 6d73 5b69 785d 2c29 2929 0a20 2020 2020  ms[ix],))).     
+00010690: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000106a0: 6e20 7365 6c66 2e67 6574 2869 6478 2c44  n self.get(idx,D
+000106b0: 6566 6175 6c74 2873 656c 662c 6465 6661  efault(self,defa
+000106c0: 756c 7429 290a 2020 2020 2020 2020 656c  ult)).        el
+000106d0: 6966 206f 6b20 6973 204e 6f6e 653a 2023  if ok is None: #
+000106e0: 5061 7468 2049 6e64 6578 0a20 2020 2020  Path Index.     
+000106f0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00010700: 6e69 6478 3a0a 2020 2020 2020 2020 2020  nidx:.          
+00010710: 2020 2020 2020 6966 2069 206e 6f74 2069        if i not i
+00010720: 6e20 7365 6c66 3a20 7265 7475 726e 2044  n self: return D
+00010730: 6566 6175 6c74 2873 656c 662c 6465 6661  efault(self,defa
+00010740: 756c 7429 0a20 2020 2020 2020 2020 2020  ult).           
+00010750: 2020 2020 2073 656c 663d 7365 6c66 5b69       self=self[i
+00010760: 5d0a 2020 2020 2020 2020 2020 2020 7265  ].            re
+00010770: 7475 726e 2073 656c 660a 2020 2020 2020  turn self.      
+00010780: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
+00010790: 2873 656c 662c 6465 6661 756c 7429 0a0a  (self,default)..
+000107a0: 2020 2020 2320 6d61 6b65 2064 6f74 2064      # make dot d
+000107b0: 6963 740a 2020 2020 5f5f 7365 7461 7474  ict.    __setatt
+000107c0: 725f 5f2c 205f 5f67 6574 6174 7472 5f5f  r__, __getattr__
+000107d0: 203d 205f 5f73 6574 6974 656d 5f5f 2c20   = __setitem__, 
+000107e0: 5f5f 6765 7469 7465 6d5f 5f0a 0a64 6566  __getitem__..def
+000107f0: 2044 6963 7428 2a69 6e70 2c64 6565 7063   Dict(*inp,deepc
+00010800: 6f70 793d 4661 6c73 652c 636f 7079 3d46  opy=False,copy=F
+00010810: 616c 7365 2c69 676e 6f72 653d 5b5d 2c2a  alse,ignore=[],*
+00010820: 2a6f 7074 293a 0a20 2020 2027 2727 0a20  *opt):.    '''. 
+00010830: 2020 2044 6963 7469 6f6e 6172 790a 2020     Dictionary.  
+00010840: 2020 2d20 4465 6669 6e65 0a20 2020 202d    - Define.    -
+00010850: 206d 6172 6765 0a20 2020 202d 2055 7064   marge.    - Upd
+00010860: 6174 650a 2020 2020 2d20 4170 7065 6e64  ate.    - Append
+00010870: 0a20 2020 2073 7570 706f 7274 203a 2044  .    support : D
+00010880: 6963 742c 206c 6973 7420 6f72 2074 7570  ict, list or tup
+00010890: 6c65 2077 6974 6820 3220 6461 7461 2c20  le with 2 data, 
+000108a0: 6469 6374 5f69 7465 6d73 2c20 446a 616e  dict_items, Djan
+000108b0: 676f 2072 6571 7565 7374 2e64 6174 612c  go request.data,
+000108c0: 2072 6571 7565 7374 2064 6174 612c 206c   request data, l
+000108d0: 696b 6520 7061 7468 2074 7970 6520 6c69  ike path type li
+000108e0: 7374 285b 2827 2f61 2f62 272c 3229 2c28  st([('/a/b',2),(
+000108f0: 272f 612f 6327 2c33 292c 2e2e 2e5d 292c  '/a/c',3),...]),
+00010900: 206b 4469 6374 0a20 2020 2027 2727 0a20   kDict.    '''. 
+00010910: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
+00010920: 616e 6365 2869 676e 6f72 652c 6c69 7374  ance(ignore,list
+00010930: 293a 2069 676e 6f72 653d 5b5d 0a20 2020  ): ignore=[].   
+00010940: 2073 7263 3d7b 7d0a 2020 2020 6966 206c   src={}.    if l
+00010950: 656e 2869 6e70 2920 3e3d 2031 3a0a 2020  en(inp) >= 1:.  
+00010960: 2020 2020 2020 6966 2064 6565 7063 6f70        if deepcop
+00010970: 7920 6f72 2063 6f70 793a 0a20 2020 2020  y or copy:.     
+00010980: 2020 2020 2020 2073 7263 3d43 6f70 7928         src=Copy(
+00010990: 696e 705b 305d 2c64 6565 703d 6465 6570  inp[0],deep=deep
+000109a0: 636f 7079 290a 2020 2020 2020 2020 656c  copy).        el
+000109b0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000109c0: 7372 633d 696e 705b 305d 0a20 2020 2073  src=inp[0].    s
+000109d0: 7263 5f74 7970 653d 5479 7065 4e61 6d65  rc_type=TypeName
+000109e0: 2873 7263 290a 2020 2020 6966 2073 7263  (src).    if src
+000109f0: 5f74 7970 6520 696e 205b 2749 6d6d 7574  _type in ['Immut
+00010a00: 6162 6c65 4d75 6c74 6944 6963 7427 5d3a  ableMultiDict']:
+00010a10: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
+00010a20: 7372 6329 203e 2030 3a0a 2020 2020 2020  src) > 0:.      
+00010a30: 2020 2020 2020 746d 703d 7b7d 0a20 2020        tmp={}.   
+00010a40: 2020 2020 2020 2020 2066 6f72 2069 6920           for ii 
+00010a50: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
+00010a60: 2020 2020 2020 2020 6966 2069 6920 696e          if ii in
+00010a70: 2069 676e 6f72 653a 2063 6f6e 7469 6e75   ignore: continu
+00010a80: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00010a90: 2020 746d 705b 6969 5d3d 7372 635b 6969    tmp[ii]=src[ii
+00010aa0: 5d0a 2020 2020 2020 2020 2020 2020 7372  ].            sr
+00010ab0: 633d 746d 700a 2020 2020 656c 6966 2069  c=tmp.    elif i
+00010ac0: 7369 6e73 7461 6e63 6528 7372 632c 6469  sinstance(src,di
+00010ad0: 6374 293a 0a20 2020 2020 2020 2069 6620  ct):.        if 
+00010ae0: 7372 635f 7479 7065 203d 3d20 2751 7565  src_type == 'Que
+00010af0: 7279 4469 6374 273a 2023 2055 7064 6174  ryDict': # Updat
+00010b00: 6520 6461 7461 2061 7420 7265 7175 6573  e data at reques
+00010b10: 742e 6461 7461 206f 6620 446a 616e 676f  t.data of Django
+00010b20: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+00010b30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00010b40: 2020 7372 632e 5f6d 7574 6162 6c65 3d54    src._mutable=T
+00010b50: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00010b60: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+00010b70: 2020 2020 2020 2020 5374 6445 7272 2822          StdErr("
+00010b80: 7372 6328 5175 6572 7944 6963 7429 206e  src(QueryDict) n
+00010b90: 6f74 2073 7570 706f 7274 205f 6d75 7461  ot support _muta
+00010ba0: 626c 653d 5472 7565 2070 6172 616d 6574  ble=True paramet
+00010bb0: 6572 5c6e 2229 0a20 2020 2020 2020 2066  er\n").        f
+00010bc0: 6f72 2064 6573 7420 696e 2069 6e70 5b31  or dest in inp[1
+00010bd0: 3a5d 3a0a 2020 2020 2020 2020 2020 2020  :]:.            
+00010be0: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+00010bf0: 6528 6465 7374 2c64 6963 7429 3a20 636f  e(dest,dict): co
+00010c00: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+00010c10: 2020 2066 6f72 2069 2069 6e20 6465 7374     for i in dest
+00010c20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00010c30: 2020 6966 2069 2069 6e20 6967 6e6f 7265    if i in ignore
+00010c40: 3a20 636f 6e74 696e 7565 0a20 2020 2020  : continue.     
+00010c50: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
+00010c60: 696e 2073 7263 2061 6e64 2069 7369 6e73  in src and isins
+00010c70: 7461 6e63 6528 7372 635b 695d 2c64 6963  tance(src[i],dic
+00010c80: 7429 2061 6e64 2069 7369 6e73 7461 6e63  t) and isinstanc
+00010c90: 6528 6465 7374 5b69 5d2c 6469 6374 293a  e(dest[i],dict):
+00010ca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010cb0: 2020 2020 2073 7263 5b69 5d3d 4469 6374       src[i]=Dict
+00010cc0: 2873 7263 5b69 5d2c 6465 7374 5b69 5d29  (src[i],dest[i])
+00010cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010ce0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00010cf0: 2020 2020 2020 2020 2020 2073 7263 5b69             src[i
+00010d00: 5d3d 6465 7374 5b69 5d0a 2020 2020 656c  ]=dest[i].    el
+00010d10: 6966 2073 7263 5f74 7970 6520 696e 205b  if src_type in [
+00010d20: 2764 6963 745f 6974 656d 7327 5d3a 0a20  'dict_items']:. 
+00010d30: 2020 2020 2020 2073 7263 3d64 6963 7428         src=dict(
+00010d40: 7372 6329 0a20 2020 2065 6c69 6620 7372  src).    elif sr
+00010d50: 635f 7479 7065 2069 6e20 5b27 6b44 6963  c_type in ['kDic
+00010d60: 7427 5d3a 0a20 2020 2020 2020 2073 7263  t']:.        src
+00010d70: 3d73 7263 2e47 6574 2829 0a20 2020 2065  =src.Get().    e
+00010d80: 6c69 6620 7372 635f 7479 7065 2069 6e20  lif src_type in 
+00010d90: 5b27 6c69 7374 272c 2774 7570 6c65 275d  ['list','tuple']
+00010da0: 3a0a 2020 2020 2020 2020 746d 703d 7b7d  :.        tmp={}
+00010db0: 0a20 2020 2020 2020 2066 6f72 2069 6920  .        for ii 
+00010dc0: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
+00010dd0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00010de0: 6528 6969 2c74 7570 6c65 2920 616e 6420  e(ii,tuple) and 
+00010df0: 6c65 6e28 6969 2920 3d3d 2032 3a0a 2020  len(ii) == 2:.  
+00010e00: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00010e10: 2069 695b 305d 2069 6e20 6967 6e6f 7265   ii[0] in ignore
+00010e20: 3a20 636f 6e74 696e 7565 0a20 2020 2020  : continue.     
+00010e30: 2020 2020 2020 2020 2020 2069 6620 6969             if ii
+00010e40: 5b30 5d5b 305d 203d 3d20 272f 273a 0a20  [0][0] == '/':. 
+00010e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010e60: 2020 2073 7263 5f61 3d69 695b 305d 2e73     src_a=ii[0].s
+00010e70: 706c 6974 2827 2f27 295b 313a 5d0a 2020  plit('/')[1:].  
+00010e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010e90: 2020 7474 3d74 6d70 0a20 2020 2020 2020    tt=tmp.       
+00010ea0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00010eb0: 206b 6b20 696e 2073 7263 5f61 5b3a 2d31   kk in src_a[:-1
+00010ec0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00010ed0: 2020 2020 2020 2020 2020 2069 6620 6b6b             if kk
+00010ee0: 206e 6f74 2069 6e20 7474 3a20 7474 5b6b   not in tt: tt[k
+00010ef0: 6b5d 3d7b 7d0a 2020 2020 2020 2020 2020  k]={}.          
+00010f00: 2020 2020 2020 2020 2020 2020 2020 7474                tt
+00010f10: 3d74 745b 6b6b 5d0a 2020 2020 2020 2020  =tt[kk].        
+00010f20: 2020 2020 2020 2020 2020 2020 7474 5b73              tt[s
+00010f30: 7263 5f61 5b2d 315d 5d3d 6969 5b31 5d0a  rc_a[-1]]=ii[1].
+00010f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010f50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00010f60: 2020 2020 2020 2020 2020 746d 705b 6969            tmp[ii
+00010f70: 5b30 5d5d 3d69 695b 315d 0a20 2020 2020  [0]]=ii[1].     
+00010f80: 2020 2073 7263 3d74 6d70 0a20 2020 2065     src=tmp.    e
+00010f90: 6c73 653a 0a20 2020 2020 2020 2073 7263  lse:.        src
+00010fa0: 3d7b 7d0a 2020 2020 2355 7064 6174 6520  ={}.    #Update 
+00010fb0: 4578 7472 6120 696e 7075 7473 0a20 2020  Extra inputs.   
+00010fc0: 2066 6f72 2065 7874 2069 6e20 696e 705b   for ext in inp[
+00010fd0: 313a 5d3a 0a20 2020 2020 2020 2065 7874  1:]:.        ext
+00010fe0: 7261 3d44 6963 7428 6578 7429 0a20 2020  ra=Dict(ext).   
+00010ff0: 2020 2020 2069 6620 5479 7065 2865 7874       if Type(ext
+00011000: 7261 2c64 6963 7429 3a0a 2020 2020 2020  ra,dict):.      
+00011010: 2020 2020 2020 7372 632e 7570 6461 7465        src.update
+00011020: 2865 7874 7261 290a 2020 2020 2355 7064  (extra).    #Upd
+00011030: 6174 6520 4578 7472 6120 6f70 7469 6f6e  ate Extra option
+00011040: 2064 6174 610a 2020 2020 6966 206f 7074   data.    if opt
+00011050: 3a0a 2020 2020 2020 2020 666f 7220 6920  :.        for i 
+00011060: 696e 206f 7074 3a0a 2020 2020 2020 2020  in opt:.        
+00011070: 2020 2020 6966 2069 2069 6e20 6967 6e6f      if i in igno
+00011080: 7265 3a20 636f 6e74 696e 7565 0a20 2020  re: continue.   
+00011090: 2020 2020 2020 2020 2069 6620 6920 696e           if i in
+000110a0: 2073 7263 2061 6e64 2069 7369 6e73 7461   src and isinsta
+000110b0: 6e63 6528 7372 635b 695d 2c64 6963 7429  nce(src[i],dict)
+000110c0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
+000110d0: 6f70 745b 695d 2c64 6963 7429 3a0a 2020  opt[i],dict):.  
+000110e0: 2020 2020 2020 2020 2020 2020 2020 7372                sr
+000110f0: 635b 695d 3d44 6963 7428 7372 635b 695d  c[i]=Dict(src[i]
+00011100: 2c6f 7074 5b69 5d29 0a20 2020 2020 2020  ,opt[i]).       
+00011110: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00011120: 2020 2020 2020 2020 2020 2073 7263 5b69             src[i
+00011130: 5d3d 6f70 745b 695d 0a20 2020 2072 6574  ]=opt[i].    ret
+00011140: 7572 6e20 7372 630a 0a64 6566 2043 6f6d  urn src..def Com
+00011150: 7056 6572 7369 6f6e 282a 696e 702c 2a2a  pVersion(*inp,**
+00011160: 6f70 7473 293a 0a20 2020 2027 2727 0a20  opts):.    '''. 
+00011170: 2020 2069 6e70 7574 3a20 736f 7572 6365     input: source
+00011180: 2c20 636f 6d70 6172 655f 7379 6d62 6f6c  , compare_symbol
+00011190: 283e 782c 3c78 2c3d 3d2c 2178 7829 2c20  (>x,<x,==,!xx), 
+000111a0: 6465 7374 696e 6174 696f 6e0a 2020 2020  destination.    
+000111b0: 2020 7265 7475 726e 2042 4f4f 4c0a 2020    return BOOL.  
+000111c0: 2020 696e 7075 743a 2073 6f75 7263 652c    input: source,
+000111d0: 2064 6573 7469 6e61 7469 6f6e 2c20 636f   destination, co
+000111e0: 6d70 6172 655f 7379 6d62 6f6c 3d27 3e78  mpare_symbol='>x
+000111f0: 2c3c 782c 3d3d 2c21 7878 270a 2020 2020  ,<x,==,!xx'.    
+00011200: 2020 7265 7475 726e 2042 4f4f 4c0a 2020    return BOOL.  
+00011210: 2020 696e 7075 743a 2073 6f75 7263 652c    input: source,
+00011220: 2064 6573 7469 6e61 7469 6f6e 0a20 2020   destination.   
+00011230: 2020 202d 2077 6974 686f 7574 2063 6f6d     - without com
+00011240: 7061 7265 5f73 796d 626f 6c0a 2020 2020  pare_symbol.    
+00011250: 2020 2d20 6f75 743d 7379 6d20 2020 2020    - out=sym     
+00011260: 203a 2072 6574 7572 6e20 7379 6d62 6f6c   : return symbol
+00011270: 2028 3e2c 203d 3d2c 203c 2920 2028 6465   (>, ==, <)  (de
+00011280: 6661 756c 7429 0a20 2020 2020 202d 206f  fault).      - o
+00011290: 7574 3d69 6e74 2020 2020 2020 3a20 7265  ut=int      : re
+000112a0: 7475 726e 2031 283e 292c 2030 283d 3d29  turn 1(>), 0(==)
+000112b0: 2c20 2d31 283c 290a 2020 2020 2020 2d20  , -1(<).      - 
+000112c0: 6f75 743d 7374 7220 2020 2020 203a 2072  out=str      : r
+000112d0: 6574 7572 6e20 6269 6767 6572 283e 292c  eturn bigger(>),
+000112e0: 2073 616d 6528 3d3d 292c 206c 6f77 6572   same(==), lower
+000112f0: 283c 290a 2020 2020 696e 7075 743a 2073  (<).    input: s
+00011300: 6f75 7263 650a 2020 2020 2020 2d20 6f75  ource.      - ou
+00011310: 743d 7374 7220 2020 2020 203a 2072 6574  t=str      : ret
+00011320: 7572 6e20 2733 2e30 2e31 2720 2864 6566  urn '3.0.1' (def
+00011330: 6175 6c74 290a 2020 2020 2020 2d20 6f75  ault).      - ou
+00011340: 743d 7475 706c 6520 2020 203a 2072 6574  t=tuple    : ret
+00011350: 7572 6e20 746f 2074 7570 6c65 2074 7970  urn to tuple typ
+00011360: 6520 2833 2c30 2c31 290a 2020 2020 2020  e (3,0,1).      
+00011370: 2d20 6f75 743d 6c69 7374 2020 2020 203a  - out=list     :
+00011380: 2072 6574 7572 6e20 746f 206c 6973 7420   return to list 
+00011390: 7479 7065 205b 332c 302c 315d 0a20 2020  type [3,0,1].   
+000113a0: 2076 6572 7369 6f6e 5f73 796d 626f 6c20   version_symbol 
+000113b0: 6f72 2073 796d 626f 6c20 3a20 6465 6661  or symbol : defa
+000113c0: 756c 7420 272e 270a 0a20 2020 2073 6f72  ult '.'..    sor
+000113d0: 7420 6c69 7374 0a20 2020 203c 6c69 7374  t list.    <list
+000113e0: 3e2e 736f 7274 286b 6579 3d43 6f6d 7056  >.sort(key=CompV
+000113f0: 6572 7369 6f6e 2920 206f 7220 736f 7274  ersion)  or sort
+00011400: 6564 283c 6c69 7374 3e2c 6b65 793d 436f  ed(<list>,key=Co
+00011410: 6d70 5665 7273 696f 6e29 0a20 2020 2027  mpVersion).    '
+00011420: 2727 0a20 2020 2076 6572 7369 6f6e 5f73  ''.    version_s
+00011430: 796d 626f 6c3d 6f70 7473 2e67 6574 2827  ymbol=opts.get('
+00011440: 7665 7273 696f 6e5f 7379 6d62 6f6c 272c  version_symbol',
+00011450: 6f70 7473 2e67 6574 2827 7379 6d62 6f6c  opts.get('symbol
+00011460: 272c 272e 2729 290a 2020 2020 636f 6d70  ','.')).    comp
+00011470: 6172 655f 7379 6d62 6f6c 3d6f 7074 732e  are_symbol=opts.
+00011480: 6765 7428 2763 6f6d 7061 7265 5f73 796d  get('compare_sym
+00011490: 626f 6c27 2c6f 7074 732e 6765 7428 2763  bol',opts.get('c
+000114a0: 6f6d 7061 7265 2729 290a 2020 2020 6966  ompare')).    if
+000114b0: 2063 6f6d 7061 7265 5f73 796d 626f 6c20   compare_symbol 
+000114c0: 3d3d 2027 6973 273a 2063 6f6d 7061 7265  == 'is': compare
+000114d0: 5f73 796d 626f 6c3d 273d 3d27 0a20 2020  _symbol='=='.   
+000114e0: 2065 6c69 6620 636f 6d70 6172 655f 7379   elif compare_sy
+000114f0: 6d62 6f6c 203d 3d20 2769 7320 6e6f 7427  mbol == 'is not'
+00011500: 3a20 636f 6d70 6172 655f 7379 6d62 6f6c  : compare_symbol
+00011510: 3d27 213d 270a 2020 2020 6f75 743d 6f70  ='!='.    out=op
+00011520: 7473 2e67 6574 2827 6f75 7427 2c6f 7074  ts.get('out',opt
+00011530: 732e 6765 7428 276f 7574 7075 7427 2c73  s.get('output',s
+00011540: 7472 2929 0a20 2020 2064 6566 205f 636c  tr)).    def _cl
+00011550: 6561 6e5f 2861 293a 0a20 2020 2020 2020  ean_(a):.       
+00011560: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00011570: 302c 6c65 6e28 6129 293a 0a20 2020 2020  0,len(a)):.     
+00011580: 2020 2020 2020 2069 6620 615b 695d 203d         if a[i] =
+00011590: 3d20 2727 3a20 615b 695d 3d30 0a20 2020  = '': a[i]=0.   
+000115a0: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
+000115b0: 6e67 6528 6c65 6e28 6129 2d31 2c30 2c2d  nge(len(a)-1,0,-
+000115c0: 3129 3a0a 2020 2020 2020 2020 2020 2020  1):.            
+000115d0: 6966 2069 203e 2031 2061 6e64 2061 5b69  if i > 1 and a[i
+000115e0: 5d20 3d3d 2030 2061 6e64 2061 5b69 2d31  ] == 0 and a[i-1
+000115f0: 5d3d 3d30 3a0a 2020 2020 2020 2020 2020  ]==0:.          
+00011600: 2020 2020 2020 612e 706f 7028 6929 0a20        a.pop(i). 
+00011610: 2020 2020 2020 2072 6574 7572 6e20 610a         return a.
+00011620: 2020 2020 6465 6620 436f 6d70 2873 7263      def Comp(src
+00011630: 2c64 6573 7429 3a0a 2020 2020 2020 2020  ,dest):.        
+00011640: 6c65 6e5f 7372 633d 6c65 6e28 7372 6329  len_src=len(src)
+00011650: 0a20 2020 2020 2020 206c 656e 5f64 6573  .        len_des
+00011660: 743d 6c65 6e28 6465 7374 290a 2020 2020  t=len(dest).    
+00011670: 2020 2020 6269 6767 6572 3d6c 656e 5f64      bigger=len_d
+00011680: 6573 7420 6966 206c 656e 5f64 6573 7420  est if len_dest 
+00011690: 3e20 6c65 6e5f 7372 6320 656c 7365 206c  > len_src else l
+000116a0: 656e 5f73 7263 0a20 2020 2020 2020 2066  en_src.        f
+000116b0: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+000116c0: 6269 6767 6572 293a 0a20 2020 2020 2020  bigger):.       
+000116d0: 2020 2020 2069 6620 6920 3c20 6c65 6e5f       if i < len_
+000116e0: 7372 6320 616e 6420 6920 3c20 6c65 6e5f  src and i < len_
+000116f0: 6465 7374 3a0a 2020 2020 2020 2020 2020  dest:.          
+00011700: 2020 2020 2020 7373 3d73 7263 5b69 5d0a        ss=src[i].
+00011710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011720: 6464 3d64 6573 745b 695d 0a20 2020 2020  dd=dest[i].     
+00011730: 2020 2020 2020 2020 2020 2069 6620 7479             if ty
+00011740: 7065 2873 7329 2021 3d20 7479 7065 2864  pe(ss) != type(d
+00011750: 6429 3a0a 2020 2020 2020 2020 2020 2020  d):.            
+00011760: 2020 2020 2020 2020 7373 3d53 7472 2873          ss=Str(s
+00011770: 7263 5b69 5d29 0a20 2020 2020 2020 2020  rc[i]).         
+00011780: 2020 2020 2020 2020 2020 2064 643d 5374             dd=St
+00011790: 7228 6465 7374 5b69 5d29 0a20 2020 2020  r(dest[i]).     
+000117a0: 2020 2020 2020 2020 2020 2069 6620 7373             if ss
+000117b0: 203e 2064 643a 0a20 2020 2020 2020 2020   > dd:.         
+000117c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000117d0: 6e20 310a 2020 2020 2020 2020 2020 2020  n 1.            
+000117e0: 2020 2020 656c 6966 2073 7320 3c20 6464      elif ss < dd
+000117f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00011800: 2020 2020 2020 7265 7475 726e 202d 310a        return -1.
+00011810: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00011820: 2069 203c 206c 656e 5f73 7263 3a0a 2020   i < len_src:.  
+00011830: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00011840: 7475 726e 2031 0a20 2020 2020 2020 2020  turn 1.         
+00011850: 2020 2065 6c69 6620 6920 3c20 6c65 6e5f     elif i < len_
+00011860: 6465 7374 3a0a 2020 2020 2020 2020 2020  dest:.          
+00011870: 2020 2020 2020 7265 7475 726e 202d 310a        return -1.
+00011880: 2020 2020 2020 2020 7265 7475 726e 2030          return 0
+00011890: 0a20 2020 2064 6566 204d 6b56 6572 4c69  .    def MkVerLi
+000118a0: 7374 2873 7263 2c76 6572 7369 6f6e 5f73  st(src,version_s
+000118b0: 796d 626f 6c29 3a0a 2020 2020 2020 2020  ymbol):.        
+000118c0: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
+000118d0: 632c 6469 6374 293a 2073 7263 3d73 7263  c,dict): src=src
+000118e0: 2e67 6574 2827 7665 7273 696f 6e27 2c73  .get('version',s
+000118f0: 7263 2e67 6574 2827 5f5f 7665 7273 696f  rc.get('__versio
+00011900: 6e5f 5f27 2929 0a20 2020 2020 2020 2069  n__')).        i
+00011910: 6620 5479 7065 2873 7263 2c28 2773 7472  f Type(src,('str
+00011920: 272c 2762 7974 6573 2729 293a 0a20 2020  ','bytes')):.   
+00011930: 2020 2020 2020 2020 2073 7263 3d53 7472           src=Str
+00011940: 2873 7263 292e 7370 6c69 7428 7665 7273  (src).split(vers
+00011950: 696f 6e5f 7379 6d62 6f6c 290a 2020 2020  ion_symbol).    
+00011960: 2020 2020 656c 6966 2054 7970 6528 7372      elif Type(sr
+00011970: 632c 2827 696e 7427 2c27 666c 6f61 7427  c,('int','float'
+00011980: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00011990: 7372 633d 5b73 7263 5d0a 2020 2020 2020  src=[src].      
+000119a0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+000119b0: 6528 7372 632c 2074 7570 6c65 293a 0a20  e(src, tuple):. 
+000119c0: 2020 2020 2020 2020 2020 2073 7263 3d6c             src=l
+000119d0: 6973 7428 7372 6329 0a20 2020 2020 2020  ist(src).       
+000119e0: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+000119f0: 7263 2c6c 6973 7429 3a0a 2020 2020 2020  rc,list):.      
+00011a00: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
+00011a10: 6c65 285f 636c 6561 6e5f 285b 2049 6e74  le(_clean_([ Int
+00011a20: 2869 2920 666f 7220 6920 696e 2073 7263  (i) for i in src
+00011a30: 205d 2929 0a20 2020 2073 7263 3d5b 5d0a   ])).    src=[].
+00011a40: 2020 2020 6465 7374 3d5b 5d0a 2020 2020      dest=[].    
+00011a50: 6966 206c 656e 2869 6e70 2920 3d3d 2031  if len(inp) == 1
+00011a60: 3a0a 2020 2020 2020 2020 7665 725f 7475  :.        ver_tu
+00011a70: 706c 653d 4d6b 5665 724c 6973 7428 696e  ple=MkVerList(in
+00011a80: 705b 305d 2c76 6572 7369 6f6e 5f73 796d  p[0],version_sym
+00011a90: 626f 6c29 0a20 2020 2020 2020 2069 6620  bol).        if 
+00011aa0: 6f75 7420 696e 205b 7374 722c 2773 7472  out in [str,'str
+00011ab0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00011ac0: 7265 7475 726e 2027 2e27 2e6a 6f69 6e28  return '.'.join(
+00011ad0: 5b53 7472 2869 2920 666f 7220 6920 696e  [Str(i) for i in
+00011ae0: 2076 6572 5f74 7570 6c65 5d29 0a20 2020   ver_tuple]).   
+00011af0: 2020 2020 2065 6c69 6620 6f75 7420 696e       elif out in
+00011b00: 205b 6c69 7374 2c27 6c69 7374 275d 3a0a   [list,'list']:.
+00011b10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00011b20: 726e 206c 6973 7428 7665 725f 7475 706c  rn list(ver_tupl
+00011b30: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
+00011b40: 6e20 7665 725f 7475 706c 650a 2020 2020  n ver_tuple.    
+00011b50: 656c 6966 206c 656e 2869 6e70 2920 3d3d  elif len(inp) ==
+00011b60: 2032 3a0a 2020 2020 2020 2020 7372 633d   2:.        src=
+00011b70: 4d6b 5665 724c 6973 7428 696e 705b 305d  MkVerList(inp[0]
+00011b80: 2c76 6572 7369 6f6e 5f73 796d 626f 6c29  ,version_symbol)
+00011b90: 0a20 2020 2020 2020 2064 6573 743d 4d6b  .        dest=Mk
+00011ba0: 5665 724c 6973 7428 696e 705b 315d 2c76  VerList(inp[1],v
+00011bb0: 6572 7369 6f6e 5f73 796d 626f 6c29 0a20  ersion_symbol). 
+00011bc0: 2020 2065 6c69 6620 6c65 6e28 696e 7029     elif len(inp)
+00011bd0: 203d 3d20 333a 0a20 2020 2020 2020 2073   == 3:.        s
+00011be0: 7263 3d4d 6b56 6572 4c69 7374 2869 6e70  rc=MkVerList(inp
+00011bf0: 5b30 5d2c 7665 7273 696f 6e5f 7379 6d62  [0],version_symb
+00011c00: 6f6c 290a 2020 2020 2020 2020 636f 6d70  ol).        comp
+00011c10: 6172 655f 7379 6d62 6f6c 3d69 6e70 5b31  are_symbol=inp[1
+00011c20: 5d0a 2020 2020 2020 2020 6465 7374 3d4d  ].        dest=M
+00011c30: 6b56 6572 4c69 7374 2869 6e70 5b32 5d2c  kVerList(inp[2],
+00011c40: 7665 7273 696f 6e5f 7379 6d62 6f6c 290a  version_symbol).
+00011c50: 2020 2020 6966 2073 7263 2061 6e64 2064      if src and d
+00011c60: 6573 743a 0a20 2020 2020 2020 2063 633d  est:.        cc=
+00011c70: 436f 6d70 2873 7263 2c64 6573 7429 0a20  Comp(src,dest). 
+00011c80: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00011c90: 616e 6365 2863 6f6d 7061 7265 5f73 796d  ance(compare_sym
+00011ca0: 626f 6c2c 7374 7229 2061 6e64 2063 6f6d  bol,str) and com
+00011cb0: 7061 7265 5f73 796d 626f 6c3a 0a20 2020  pare_symbol:.   
+00011cc0: 2020 2020 2020 2020 2072 6576 3d46 616c           rev=Fal
+00011cd0: 7365 0a20 2020 2020 2020 2020 2020 2069  se.            i
+00011ce0: 6620 2721 2720 696e 2063 6f6d 7061 7265  f '!' in compare
+00011cf0: 5f73 796d 626f 6c3a 2072 6576 3d54 7275  _symbol: rev=Tru
+00011d00: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00011d10: 2063 6320 3d3d 2030 3a0a 2020 2020 2020   cc == 0:.      
+00011d20: 2020 2020 2020 2020 2020 6966 2027 3d27            if '='
+00011d30: 2069 6e20 636f 6d70 6172 655f 7379 6d62   in compare_symb
+00011d40: 6f6c 3a0a 2020 2020 2020 2020 2020 2020  ol:.            
+00011d50: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+00011d60: 616c 7365 2069 6620 7265 7620 656c 7365  alse if rev else
+00011d70: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
+00011d80: 2020 656c 6966 2063 6320 3d3d 2031 3a0a    elif cc == 1:.
+00011d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011da0: 6966 2027 3e27 2069 6e20 636f 6d70 6172  if '>' in compar
+00011db0: 655f 7379 6d62 6f6c 3a0a 2020 2020 2020  e_symbol:.      
+00011dc0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00011dd0: 7475 726e 2046 616c 7365 2069 6620 7265  turn False if re
+00011de0: 7620 656c 7365 2054 7275 650a 2020 2020  v else True.    
+00011df0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+00011e00: 6576 3a20 7265 7475 726e 2054 7275 650a  ev: return True.
+00011e10: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00011e20: 2063 6320 3d3d 202d 313a 0a20 2020 2020   cc == -1:.     
+00011e30: 2020 2020 2020 2020 2020 2069 6620 273c             if '<
+00011e40: 2720 696e 2063 6f6d 7061 7265 5f73 796d  ' in compare_sym
+00011e50: 626f 6c3a 0a20 2020 2020 2020 2020 2020  bol:.           
+00011e60: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00011e70: 4661 6c73 6520 6966 2072 6576 2065 6c73  False if rev els
+00011e80: 6520 5472 7565 0a20 2020 2020 2020 2020  e True.         
+00011e90: 2020 2072 6574 7572 6e20 5472 7565 2069     return True i
+00011ea0: 6620 7265 7620 656c 7365 2046 616c 7365  f rev else False
+00011eb0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00011ec0: 2020 2020 2020 2020 2020 2069 6620 6f75             if ou
+00011ed0: 7420 696e 205b 696e 742c 2769 6e74 272c  t in [int,'int',
+00011ee0: 2769 6e74 6567 6572 272c 276e 756d 275d  'integer','num']
+00011ef0: 3a20 7265 7475 726e 2063 630a 2020 2020  : return cc.    
+00011f00: 2020 2020 2020 2020 6966 2063 6320 3e20          if cc > 
+00011f10: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00011f20: 2020 2069 6620 6f75 7420 696e 205b 7374     if out in [st
+00011f30: 722c 2773 7472 272c 2773 7472 696e 6727  r,'str','string'
+00011f40: 5d3a 2072 6574 7572 6e20 2762 6967 6765  ]: return 'bigge
+00011f50: 7228 3e29 270a 2020 2020 2020 2020 2020  r(>)'.          
+00011f60: 2020 2020 2020 7265 7475 726e 2027 3e27        return '>'
+00011f70: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00011f80: 6620 6363 203c 2030 3a0a 2020 2020 2020  f cc < 0:.      
+00011f90: 2020 2020 2020 2020 2020 6966 206f 7574            if out
+00011fa0: 2069 6e20 5b73 7472 2c27 7374 7227 2c27   in [str,'str','
+00011fb0: 7374 7269 6e67 275d 3a20 7265 7475 726e  string']: return
+00011fc0: 2027 6c6f 7765 7228 3c29 270a 2020 2020   'lower(<)'.    
+00011fd0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00011fe0: 726e 2027 3c27 0a20 2020 2020 2020 2020  rn '<'.         
+00011ff0: 2020 2069 6620 6f75 7420 696e 205b 7374     if out in [st
+00012000: 722c 2773 7472 272c 2773 7472 696e 6727  r,'str','string'
+00012010: 5d3a 2072 6574 7572 6e20 2773 616d 6528  ]: return 'same(
+00012020: 3d29 270a 2020 2020 2020 2020 2020 2020  =)'.            
+00012030: 7265 7475 726e 2027 3d3d 270a 0a0a 6465  return '=='...de
+00012040: 6620 4d6f 6456 6572 7369 6f6e 286d 6f64  f ModVersion(mod
+00012050: 293a 0a20 2020 2027 2727 0a20 2020 2046  ):.    '''.    F
+00012060: 696e 6420 4d6f 6475 6c65 2056 6572 7369  ind Module Versi
+00012070: 6f6e 0a20 2020 2027 2727 0a20 2020 2069  on.    '''.    i
+00012080: 6620 5079 5665 7228 332c 382c 273c 2729  f PyVer(3,8,'<')
+00012090: 3a20 0a20 2020 2020 2020 2069 6d70 6f72  : .        impor
+000120a0: 7420 706b 675f 7265 736f 7572 6365 730a  t pkg_resources.
+000120b0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+000120c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000120d0: 706b 675f 7265 736f 7572 6365 732e 6765  pkg_resources.ge
+000120e0: 745f 6469 7374 7269 6275 7469 6f6e 286d  t_distribution(m
+000120f0: 6f64 292e 7665 7273 696f 6e0a 2020 2020  od).version.    
+00012100: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+00012110: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+00012120: 6f6e 650a 2020 2020 656c 7365 3a0a 2020  one.    else:.  
+00012130: 2020 2020 2020 6672 6f6d 2069 6d70 6f72        from impor
+00012140: 746c 6962 2e6d 6574 6164 6174 6120 696d  tlib.metadata im
+00012150: 706f 7274 2076 6572 7369 6f6e 0a20 2020  port version.   
+00012160: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00012170: 2020 2020 2020 7265 7475 726e 2076 6572        return ver
+00012180: 7369 6f6e 286d 6f64 290a 2020 2020 2020  sion(mod).      
+00012190: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+000121a0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+000121b0: 650a 0a23 2050 7974 686f 6e20 3220 6861  e..# Python 2 ha
+000121c0: 7320 6275 696c 7420 696e 2072 656c 6f61  s built in reloa
+000121d0: 640a 6966 2050 7956 6572 2833 2c34 2c27  d.if PyVer(3,4,'
+000121e0: 3c3d 2729 3a20 0a20 2020 2066 726f 6d20  <='): .    from 
+000121f0: 696d 7020 696d 706f 7274 2072 656c 6f61  imp import reloa
+00012200: 6420 2320 5079 7468 6f6e 2033 2e30 202d  d # Python 3.0 -
+00012210: 2033 2e34 200a 656c 6966 2050 7956 6572   3.4 .elif PyVer
+00012220: 2833 2c34 2c27 3e27 293a 200a 2020 2020  (3,4,'>'): .    
+00012230: 6672 6f6d 2069 6d70 6f72 746c 6962 2069  from importlib i
+00012240: 6d70 6f72 7420 7265 6c6f 6164 2023 2050  mport reload # P
+00012250: 7974 686f 6e20 332e 352b 0a0a 6465 6620  ython 3.5+..def 
+00012260: 476c 6f62 616c 456e 7628 293a 2023 2047  GlobalEnv(): # G
+00012270: 6574 206d 7920 7061 7265 6e74 2773 2067  et my parent's g
+00012280: 6c6f 6261 6c73 2829 0a20 2020 2027 2727  lobals().    '''
+00012290: 0a20 2020 2047 6574 2047 6c6f 6261 6c20  .    Get Global 
+000122a0: 456e 7669 726f 6e6d 656e 7420 6f66 2074  Environment of t
+000122b0: 6865 2070 7974 686f 6e20 636f 6465 0a20  he python code. 
+000122c0: 2020 2027 2727 0a20 2020 2072 6574 7572     '''.    retur
+000122d0: 6e20 6469 6374 2869 6e73 7065 6374 2e67  n dict(inspect.g
+000122e0: 6574 6d65 6d62 6572 7328 696e 7370 6563  etmembers(inspec
+000122f0: 742e 7374 6163 6b28 295b 315d 5b30 5d29  t.stack()[1][0])
+00012300: 295b 2266 5f67 6c6f 6261 6c73 225d 0a0a  )["f_globals"]..
+00012310: 6465 6620 496e 7374 616c 6c28 6d6f 6475  def Install(modu
+00012320: 6c65 2c69 6e73 7461 6c6c 5f61 6363 6f75  le,install_accou
+00012330: 6e74 3d27 272c 6d6f 6465 3d4e 6f6e 652c  nt='',mode=None,
+00012340: 7570 6772 6164 653d 4661 6c73 652c 7665  upgrade=False,ve
+00012350: 7273 696f 6e3d 4e6f 6e65 2c66 6f72 6365  rsion=None,force
+00012360: 3d46 616c 7365 2c70 6b67 5f6d 6170 3d4e  =False,pkg_map=N
+00012370: 6f6e 652c 6572 723d 4661 6c73 652c 696e  one,err=False,in
+00012380: 7374 616c 6c5f 6e61 6d65 3d4e 6f6e 6529  stall_name=None)
+00012390: 3a0a 2020 2020 2727 270a 2020 2020 496e  :.    '''.    In
+000123a0: 7374 616c 6c20 7079 7468 6f6e 206d 6f64  stall python mod
+000123b0: 756c 6520 6669 6c65 0a20 2020 206d 6f64  ule file.    mod
+000123c0: 756c 6520 6e61 6d65 0a20 2020 2069 6e73  ule name.    ins
+000123d0: 7461 6c6c 5f61 6363 6f75 743d 2727 203a  tall_accout='' :
+000123e0: 2064 6566 6175 6c74 204e 6f6e 652c 2020   default None,  
+000123f0: 2d2d 7573 6572 203a 2069 6e73 7461 6c6c  --user : install
+00012400: 206f 6e20 6163 636f 756e 7427 7320 6469   on account's di
+00012410: 7265 6374 6f72 790a 2020 2020 7570 6772  rectory.    upgr
+00012420: 6164 6520 3a0a 2020 2020 2020 4661 6c73  ade :.      Fals
+00012430: 6520 3a20 6465 6661 756c 740a 2020 2020  e : default.    
+00012440: 2020 5472 7565 2020 3a20 496e 7374 616c    True  : Instal
+00012450: 6c20 6f72 2055 7067 7261 6465 2074 6865  l or Upgrade the
+00012460: 206d 6f64 756c 650a 2020 2020 7665 7273   module.    vers
+00012470: 696f 6e20 3a0a 2020 2020 2020 4e6f 6e65  ion :.      None
+00012480: 2020 3a20 6465 6661 756c 740a 2020 2020    : default.    
+00012490: 2020 3c76 6572 7369 6f6e 3e3a 2043 6865    <version>: Che
+000124a0: 636b 2074 6865 2076 6572 7369 6f6e 0a20  ck the version. 
+000124b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000124c0: 3d3d 203c 7665 7273 696f 6e3e 203a 2069  == <version> : i
+000124d0: 6620 6e6f 7420 5361 6d65 2076 6572 7369  f not Same versi
+000124e0: 6f6e 2074 6865 6e20 696e 7374 616c 6c20  on then install 
+000124f0: 6174 2074 6865 2073 616d 6520 7665 7273  at the same vers
+00012500: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+00012510: 2020 2020 203e 3d20 3c76 6572 7369 6f6e       >= <version
+00012520: 3e20 3a20 6966 206e 6f74 2062 6967 6765  > : if not bigge
+00012530: 7220 7468 6520 7665 7273 696f 6e20 7468  r the version th
+00012540: 656e 2069 6e73 7461 6c6c 206f 7220 7570  en install or up
+00012550: 6772 6164 650a 2020 2020 2020 2020 2020  grade.          
+00012560: 2020 2020 2020 203c 3d20 3c76 6572 7369         <= <versi
+00012570: 6f6e 3e20 3a20 6966 206e 6f74 206c 6f77  on> : if not low
+00012580: 6572 2074 6865 2076 6572 7369 6f6e 2074  er the version t
+00012590: 6865 6e20 696e 7374 616c 6c20 6174 2074  hen install at t
+000125a0: 6865 2076 6572 7369 6f6e 0a20 2020 2066  he version.    f
+000125b0: 6f72 6365 2020 3a20 6465 6661 756c 7420  orce  : default 
+000125c0: 4661 6c73 650a 2020 2020 2020 5472 7565  False.      True
+000125d0: 203a 2069 6620 696e 7374 616c 6c65 6420   : if installed 
+000125e0: 7468 656e 2066 6f72 6365 2072 652d 696e  then force re-in
+000125f0: 7374 616c 6c2c 206e 6f74 2074 6865 6e20  stall, not then 
+00012600: 696e 7374 616c 6c0a 2020 2020 706b 675f  install.    pkg_
+00012610: 6d61 703a 206d 6170 7069 6e67 2070 6163  map: mapping pac
+00012620: 6b61 6765 206e 616d 6520 616e 6420 7265  kage name and re
+00012630: 616c 2070 6163 6b61 6765 206e 616d 650a  al package name.
+00012640: 2020 2020 2020 666f 726d 6174 203d 3e20        format => 
+00012650: 7b20 3c70 6b67 206e 616d 653e 3a20 3c72  { <pkg name>: <r
+00012660: 6561 6c20 696e 7374 616c 6c20 706b 6720  eal install pkg 
+00012670: 6e61 6d65 3e20 7d0a 2020 2020 6572 7220  name> }.    err 
+00012680: 2020 203a 2064 6566 6175 6c74 2046 616c     : default Fal
+00012690: 7365 0a20 2020 2020 2054 7275 6520 3a20  se.      True : 
+000126a0: 6966 2069 6e73 7461 6c6c 696e 6720 676f  if installing go
+000126b0: 7420 616e 7920 6973 7365 7520 7468 656e  t any isseu then
+000126c0: 2063 7261 7368 696e 670a 2020 2020 2020   crashing.      
+000126d0: 4661 6c73 653a 2069 6620 696e 7374 616c  False: if instal
+000126e0: 6c69 6e67 2067 6f74 2061 6e79 2069 7373  ling got any iss
+000126f0: 7565 2074 6865 6e20 7265 7475 726e 2046  ue then return F
+00012700: 616c 7365 0a20 2020 2027 2727 0a20 2020  alse.    '''.   
+00012710: 2023 2076 6572 7369 6f6e 200a 2020 2020   # version .    
+00012720: 2320 202d 2073 616d 6520 3a20 3d3d 312e  #  - same : ==1.
+00012730: 302e 300a 2020 2020 2320 202d 2062 6967  0.0.    #  - big
+00012740: 2020 3a20 3e31 2e30 2e30 0a20 2020 2023    : >1.0.0.    #
+00012750: 2020 2d20 6f72 2020 203a 203e 3d31 2e33    - or   : >=1.3
+00012760: 2e30 2c3c 312e 342e 300a 2020 2020 2320  .0,<1.4.0.    # 
+00012770: 7069 7020 6d6f 6475 6c65 290a 2020 2020  pip module).    
+00012780: 2370 6970 5f6d 6169 6e3d 4e6f 6e65 0a20  #pip_main=None. 
+00012790: 2020 2023 6966 2068 6173 6174 7472 2870     #if hasattr(p
+000127a0: 6970 2c27 6d61 696e 2729 3a0a 2020 2020  ip,'main'):.    
+000127b0: 2320 2020 2070 6970 5f6d 6169 6e3d 7069  #    pip_main=pi
+000127c0: 702e 6d61 696e 0a20 2020 2023 656c 6966  p.main.    #elif
+000127d0: 2068 6173 6174 7472 2870 6970 2c27 5f69   hasattr(pip,'_i
+000127e0: 6e74 6572 6e61 6c27 293a 0a20 2020 2023  nternal'):.    #
+000127f0: 2020 2020 7069 705f 6d61 696e 3d70 6970      pip_main=pip
+00012800: 2e5f 696e 7465 726e 616c 2e6d 6169 6e0a  ._internal.main.
+00012810: 2020 2020 6966 2070 6b67 5f6d 6170 2069      if pkg_map i
+00012820: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00012830: 706b 675f 6d61 703d 7b0a 2020 2020 2020  pkg_map={.      
+00012840: 2020 2020 2027 6d61 6769 6327 3a27 7079       'magic':'py
+00012850: 7468 6f6e 2d6d 6167 6963 272c 0a20 2020  thon-magic',.   
+00012860: 2020 2020 2020 2020 2762 6469 7374 5f77          'bdist_w
+00012870: 6865 656c 273a 2777 6865 656c 272c 0a20  heel':'wheel',. 
+00012880: 2020 2020 2020 207d 0a0a 2020 2020 7069         }..    pi
+00012890: 705f 6d61 696e 3d73 7562 7072 6f63 6573  p_main=subproces
+000128a0: 732e 6368 6563 6b5f 6361 6c6c 0a20 2020  s.check_call.   
+000128b0: 2069 6620 6e6f 7420 7069 705f 6d61 696e   if not pip_main
+000128c0: 3a0a 2020 2020 2020 2020 7072 696e 7428  :.        print(
+000128d0: 2721 2120 5049 5020 6d6f 6475 6c65 206e  '!! PIP module n
+000128e0: 6f74 2066 6f75 6e64 2729 0a20 2020 2020  ot found').     
+000128f0: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+00012900: 0a20 2020 2070 6b67 5f6e 616d 653d 6d6f  .    pkg_name=mo
+00012910: 6475 6c65 2e73 706c 6974 2827 2e27 295b  dule.split('.')[
+00012920: 305d 0a20 2020 2069 6620 6e6f 7420 696e  0].    if not in
+00012930: 7374 616c 6c5f 6e61 6d65 3a20 696e 7374  stall_name: inst
+00012940: 616c 6c5f 6e61 6d65 3d70 6b67 5f6d 6170  all_name=pkg_map
+00012950: 2e67 6574 2870 6b67 5f6e 616d 652c 706b  .get(pkg_name,pk
+00012960: 675f 6e61 6d65 290a 2020 2020 2320 4368  g_name).    # Ch
+00012970: 6563 6b20 696e 7374 616c 6c65 6420 7061  eck installed pa
+00012980: 636b 6167 650a 2020 2020 2320 7069 7020  ckage.    # pip 
+00012990: 6d6f 6475 6c65 290a 2020 2020 2369 6e73  module).    #ins
+000129a0: 7461 6c6c 5f63 6d64 3d5b 2769 6e73 7461  tall_cmd=['insta
+000129b0: 6c6c 275d 0a20 2020 2069 6620 6f73 2e70  ll'].    if os.p
+000129c0: 6174 682e 6261 7365 6e61 6d65 2873 7973  ath.basename(sys
+000129d0: 2e65 7865 6375 7461 626c 6529 2e73 7461  .executable).sta
+000129e0: 7274 7377 6974 6828 2770 7974 686f 6e27  rtswith('python'
+000129f0: 293a 0a20 2020 2020 2020 2069 6e73 7461  ):.        insta
+00012a00: 6c6c 5f63 6d64 3d5b 7379 732e 6578 6563  ll_cmd=[sys.exec
+00012a10: 7574 6162 6c65 2c27 2d6d 272c 2770 6970  utable,'-m','pip
+00012a20: 272c 2769 6e73 7461 6c6c 275d 0a20 2020  ','install'].   
+00012a30: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
+00012a40: 6e73 7461 6c6c 5f63 6d64 3d5b 2770 7974  nstall_cmd=['pyt
+00012a50: 686f 6e33 272c 272d 6d27 2c27 7069 7027  hon3','-m','pip'
+00012a60: 2c27 696e 7374 616c 6c27 5d0a 2020 2020  ,'install'].    
+00012a70: 6966 2050 7956 6572 2827 3e3d 272c 2733  if PyVer('>=','3
+00012a80: 2e32 2729 3a20 0a20 2020 2020 2020 2069  .2'): .        i
+00012a90: 6d70 6f72 7420 706b 675f 7265 736f 7572  mport pkg_resour
+00012aa0: 6365 730a 2020 2020 2020 2020 706b 6e3d  ces.        pkn=
+00012ab0: 706b 675f 7265 736f 7572 6365 732e 776f  pkg_resources.wo
+00012ac0: 726b 696e 675f 7365 742e 5f5f 6469 6374  rking_set.__dict
+00012ad0: 5f5f 2e67 6574 2827 6279 5f6b 6579 272c  __.get('by_key',
+00012ae0: 7b7d 292e 6765 7428 696e 7374 616c 6c5f  {}).get(install_
+00012af0: 6e61 6d65 290a 2020 2020 2020 2020 6966  name).        if
+00012b00: 2070 6b6e 3a0a 2020 2020 2020 2020 2020   pkn:.          
+00012b10: 2020 6966 2076 6572 7369 6f6e 3a0a 2020    if version:.  
+00012b20: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00012b30: 7220 6920 696e 2072 616e 6765 286c 656e  r i in range(len
+00012b40: 2876 6572 7369 6f6e 292d 312c 302c 2d31  (version)-1,0,-1
+00012b50: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00012b60: 2020 2020 2020 2069 6620 7665 7273 696f         if versio
+00012b70: 6e5b 695d 2069 6e20 5b27 3e27 2c27 3c27  n[i] in ['>','<'
+00012b80: 2c27 3d27 5d3a 2062 7265 616b 0a20 2020  ,'=']: break.   
+00012b90: 2020 2020 2020 2020 2020 2020 2076 6572               ver
+00012ba0: 5f73 7472 3d76 6572 7369 6f6e 5b69 2b31  _str=version[i+1
+00012bb0: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
+00012bc0: 2020 2063 6f6d 7061 7265 5f73 796d 626f     compare_symbo
+00012bd0: 6c3d 7665 7273 696f 6e5b 3a69 2b31 5d0a  l=version[:i+1].
+00012be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012bf0: 6966 206e 6f74 2043 6f6d 7056 6572 7369  if not CompVersi
+00012c00: 6f6e 2870 6b6e 2e76 6572 7369 6f6e 2c63  on(pkn.version,c
+00012c10: 6f6d 7061 7265 5f73 796d 626f 6c2c 7665  ompare_symbol,ve
+00012c20: 725f 7374 7229 3a0a 2020 2020 2020 2020  r_str):.        
+00012c30: 2020 2020 2020 2020 2020 2020 7570 6772              upgr
+00012c40: 6164 653d 5472 7565 0a20 2020 2020 2020  ade=True.       
+00012c50: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
+00012c60: 7461 6c6c 5f63 6d64 2e61 7070 656e 6428  tall_cmd.append(
+00012c70: 696e 7374 616c 6c5f 6e61 6d65 2b76 6572  install_name+ver
+00012c80: 7369 6f6e 290a 2020 2020 2020 2020 2020  sion).          
+00012c90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00012ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012cb0: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+00012cc0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00012cd0: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00012ce0: 7374 616c 6c5f 636d 642e 6170 7065 6e64  stall_cmd.append
+00012cf0: 2869 6e73 7461 6c6c 5f6e 616d 6529 0a20  (install_name). 
+00012d00: 2020 2020 2020 2020 2020 2069 6620 666f             if fo
+00012d10: 7263 653a 2069 6e73 7461 6c6c 5f63 6d64  rce: install_cmd
+00012d20: 2e61 7070 656e 6428 272d 2d66 6f72 6365  .append('--force
+00012d30: 2d72 6569 6e73 7461 6c6c 2729 0a20 2020  -reinstall').   
+00012d40: 2020 2020 2020 2020 2069 6620 696e 7374           if inst
+00012d50: 616c 6c5f 6163 636f 756e 743a 2069 6e73  all_account: ins
+00012d60: 7461 6c6c 5f63 6d64 2e61 7070 656e 6428  tall_cmd.append(
+00012d70: 696e 7374 616c 6c5f 6163 636f 756e 7429  install_account)
+00012d80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00012d90: 6e6f 7420 666f 7263 6520 616e 6420 7570  not force and up
+00012da0: 6772 6164 653a 2069 6e73 7461 6c6c 5f63  grade: install_c
+00012db0: 6d64 2e61 7070 656e 6428 272d 2d75 7067  md.append('--upg
+00012dc0: 7261 6465 2729 0a20 2020 2020 2020 2020  rade').         
+00012dd0: 2020 2069 6620 7069 705f 6d61 696e 2061     if pip_main a
+00012de0: 6e64 2066 6f72 6365 206f 7220 7570 6772  nd force or upgr
+00012df0: 6164 653a 0a20 2020 2020 2020 2020 2020  ade:.           
+00012e00: 2020 2020 2069 6620 6572 723a 0a20 2020       if err:.   
+00012e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e20: 2069 6620 7069 705f 6d61 696e 2869 6e73   if pip_main(ins
+00012e30: 7461 6c6c 5f63 6d64 2920 3d3d 2030 3a20  tall_cmd) == 0: 
+00012e40: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+00012e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012e60: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
+00012e70: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00012e80: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00012e90: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+00012ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012eb0: 2020 2020 6966 2070 6970 5f6d 6169 6e28      if pip_main(
+00012ec0: 696e 7374 616c 6c5f 636d 6429 203d 3d20  install_cmd) == 
+00012ed0: 303a 2072 6574 7572 6e20 5472 7565 0a20  0: return True. 
+00012ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ef0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+00012f00: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
+00012f10: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+00012f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f30: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+00012f40: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+00012f50: 2072 6574 7572 6e20 5472 7565 0a0a 2320   return True..# 
+00012f60: 2020 2069 6620 6d6f 6465 203d 3d20 2767     if mode == 'g
+00012f70: 6974 273a 0a23 2020 2020 2020 2020 6769  it':.#        gi
+00012f80: 742e 5265 706f 2e63 6c6f 6e65 5f66 726f  t.Repo.clone_fro
+00012f90: 6d28 6d6f 6475 6c65 2c27 2f74 6d70 2f2e  m(module,'/tmp/.
+00012fa0: 6769 742e 746d 7027 2c62 7261 6e63 683d  git.tmp',branch=
+00012fb0: 276d 6173 7465 7227 290a 2320 2020 2020  'master').#     
+00012fc0: 2020 2062 7569 6c64 2074 6865 2073 6f75     build the sou
+00012fd0: 7263 6520 616e 6420 696e 7374 616c 6c0a  rce and install.
+00012fe0: 2320 2020 2020 2020 2072 6574 7572 6e20  #        return 
+00012ff0: 5472 7565 0a0a 2020 2020 6966 2076 6572  True..    if ver
+00013000: 7369 6f6e 3a0a 2020 2020 2020 2020 696e  sion:.        in
+00013010: 7374 616c 6c5f 636d 642e 6170 7065 6e64  stall_cmd.append
+00013020: 2869 6e73 7461 6c6c 5f6e 616d 652b 7665  (install_name+ve
+00013030: 7273 696f 6e29 0a20 2020 2065 6c73 653a  rsion).    else:
+00013040: 0a20 2020 2020 2020 2069 6e73 7461 6c6c  .        install
+00013050: 5f63 6d64 2e61 7070 656e 6428 696e 7374  _cmd.append(inst
+00013060: 616c 6c5f 6e61 6d65 290a 2020 2020 6966  all_name).    if
+00013070: 2066 6f72 6365 3a20 696e 7374 616c 6c5f   force: install_
+00013080: 636d 642e 6170 7065 6e64 2827 2d2d 666f  cmd.append('--fo
+00013090: 7263 652d 7265 696e 7374 616c 6c27 290a  rce-reinstall').
+000130a0: 2020 2020 6966 2069 6e73 7461 6c6c 5f61      if install_a
+000130b0: 6363 6f75 6e74 3a20 696e 7374 616c 6c5f  ccount: install_
+000130c0: 636d 642e 6170 7065 6e64 2869 6e73 7461  cmd.append(insta
+000130d0: 6c6c 5f61 6363 6f75 6e74 290a 0a20 2020  ll_account)..   
+000130e0: 2069 6620 6572 723a 0a20 2020 2020 2020   if err:.       
+000130f0: 2069 6620 7069 705f 6d61 696e 2869 6e73   if pip_main(ins
+00013100: 7461 6c6c 5f63 6d64 2920 3d3d 2030 3a20  tall_cmd) == 0: 
+00013110: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+00013120: 656c 7365 3a0a 2020 2020 2020 2020 7472  else:.        tr
+00013130: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
+00013140: 6620 7069 705f 6d61 696e 2869 6e73 7461  f pip_main(insta
+00013150: 6c6c 5f63 6d64 2920 3d3d 2030 3a20 7265  ll_cmd) == 0: re
+00013160: 7475 726e 2054 7275 650a 2020 2020 2020  turn True.      
+00013170: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+00013180: 2020 2020 2020 7061 7373 0a20 2020 2072        pass.    r
+00013190: 6574 7572 6e20 4661 6c73 650a 0a0a 6465  eturn False...de
+000131a0: 6620 4d6f 644e 616d 6528 7372 6329 3a0a  f ModName(src):.
+000131b0: 2020 2020 2727 270a 2020 2020 416e 616c      '''.    Anal
+000131c0: 7973 6973 204d 6f64 756c 6520 6e61 6d65  ysis Module name
+000131d0: 2066 726f 6d20 696e 7075 7420 7374 7269   from input stri
+000131e0: 6e67 0a20 2020 2027 2727 0a20 2020 2072  ng.    '''.    r
+000131f0: 743d 5472 7565 0a20 2020 2063 6c61 7373  t=True.    class
+00013200: 5f6e 616d 653d 4e6f 6e65 0a20 2020 206d  _name=None.    m
+00013210: 6f64 756c 655f 6e61 6d65 3d4e 6f6e 650a  odule_name=None.
+00013220: 2020 2020 616c 6961 735f 6e61 6d65 3d4e      alias_name=N
+00013230: 6f6e 650a 2020 2020 7665 7273 696f 6e3d  one.    version=
+00013240: 4e6f 6e65 0a20 2020 2073 796d 626f 6c3d  None.    symbol=
+00013250: 4e6f 6e65 0a20 2020 2069 6620 6973 696e  None.    if isin
+00013260: 7374 616e 6365 2873 7263 2c73 7472 293a  stance(src,str):
+00013270: 0a20 2020 2020 2020 2073 7263 5f61 3d73  .        src_a=s
+00013280: 7263 2e73 706c 6974 2829 0a20 2020 2020  rc.split().     
+00013290: 2020 2023 7265 6d6f 7665 2066 726f 6d20     #remove from 
+000132a0: 2c20 696d 706f 7274 2074 6167 0a20 2020  , import tag.   
+000132b0: 2020 2020 2069 6620 7372 635f 615b 305d       if src_a[0]
+000132c0: 2069 6e20 5b27 6672 6f6d 272c 2769 6d70   in ['from','imp
+000132d0: 6f72 7427 5d3a 0a20 2020 2020 2020 2020  ort']:.         
+000132e0: 2020 2064 656c 2073 7263 5f61 5b30 5d0a     del src_a[0].
+000132f0: 2020 2020 2020 2020 6d6f 6475 6c65 5f6e          module_n
+00013300: 616d 653d 7372 635f 615b 305d 0a20 2020  ame=src_a[0].   
+00013310: 2020 2020 2023 7265 6d6f 7665 2076 6572       #remove ver
+00013320: 7369 6f6e 2069 6e66 6f72 6d61 7469 6f6e  sion information
+00013330: 0a20 2020 2020 2020 2073 7263 5f61 5f6c  .        src_a_l
+00013340: 656e 3d6c 656e 2873 7263 5f61 290a 2020  en=len(src_a).  
+00013350: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
+00013360: 616e 6765 2873 7263 5f61 5f6c 656e 2d31  ange(src_a_len-1
+00013370: 2c30 2c2d 3129 3a0a 2020 2020 2020 2020  ,0,-1):.        
+00013380: 2020 2020 6966 2073 7263 5f61 5b69 5d20      if src_a[i] 
+00013390: 696e 205b 273d 3d27 2c27 3d27 2c27 3e27  in ['==','=','>'
+000133a0: 2c27 3e3d 272c 273c 272c 273c 3d27 5d3a  ,'>=','<','<=']:
+000133b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000133c0: 2069 6620 6920 3c20 7372 635f 615f 6c65   if i < src_a_le
+000133d0: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
+000133e0: 2020 2020 2020 2073 796d 626f 6c3d 7372         symbol=sr
+000133f0: 635f 615b 695d 0a20 2020 2020 2020 2020  c_a[i].         
+00013400: 2020 2020 2020 2020 2020 2076 6572 7369             versi
+00013410: 6f6e 3d73 7263 5f61 5b69 2b31 5d0a 2020  on=src_a[i+1].  
+00013420: 2020 2020 2020 2020 2020 2020 2020 6272                br
+00013430: 6561 6b0a 2020 2020 2020 2020 6966 2027  eak.        if '
+00013440: 696d 706f 7274 2720 696e 2073 7263 5f61  import' in src_a
+00013450: 3a0a 2020 2020 2020 2020 2020 2020 696d  :.            im
+00013460: 706f 7274 5f69 6478 3d73 7263 5f61 2e69  port_idx=src_a.i
+00013470: 6e64 6578 2827 696d 706f 7274 2729 0a20  ndex('import'). 
+00013480: 2020 2020 2020 2020 2020 2069 6620 7372             if sr
+00013490: 635f 615f 6c65 6e20 3e20 696d 706f 7274  c_a_len > import
+000134a0: 5f69 6478 2b31 3a0a 2020 2020 2020 2020  _idx+1:.        
+000134b0: 2020 2020 2020 2020 636c 6173 735f 6e61          class_na
+000134c0: 6d65 3d73 7263 5f61 5b69 6d70 6f72 745f  me=src_a[import_
+000134d0: 6964 782b 315d 0a20 2020 2020 2020 2020  idx+1].         
+000134e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000134f0: 2020 2020 2020 2020 2072 743d 4661 6c73           rt=Fals
+00013500: 650a 2020 2020 2020 2020 6966 2027 6173  e.        if 'as
+00013510: 2720 696e 2073 7263 5f61 3a0a 2020 2020  ' in src_a:.    
+00013520: 2020 2020 2020 2020 616c 6961 735f 6964          alias_id
+00013530: 783d 7372 635f 612e 696e 6465 7828 2761  x=src_a.index('a
+00013540: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
+00013550: 6966 2073 7263 5f61 5f6c 656e 203e 2061  if src_a_len > a
+00013560: 6c69 6173 5f69 6478 2b31 3a0a 2020 2020  lias_idx+1:.    
+00013570: 2020 2020 2020 2020 2020 2020 616c 6961              alia
+00013580: 735f 6e61 6d65 3d73 7263 5f61 5b61 6c69  s_name=src_a[ali
+00013590: 6173 5f69 6478 2b31 5d0a 2020 2020 2020  as_idx+1].      
+000135a0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000135b0: 2020 2020 2020 2020 2020 2020 7274 3d46              rt=F
+000135c0: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
+000135d0: 616c 6961 735f 6e61 6d65 2069 7320 4e6f  alias_name is No
+000135e0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+000135f0: 616c 6961 735f 6e61 6d65 3d6d 6f64 756c  alias_name=modul
+00013600: 655f 6e61 6d65 0a20 2020 2072 6574 7572  e_name.    retur
+00013610: 6e20 7274 2c6d 6f64 756c 655f 6e61 6d65  n rt,module_name
+00013620: 2c61 6c69 6173 5f6e 616d 652c 636c 6173  ,alias_name,clas
+00013630: 735f 6e61 6d65 2c76 6572 7369 6f6e 2c73  s_name,version,s
+00013640: 796d 626f 6c0a 0a23 6465 6620 4d6f 644c  ymbol..#def ModL
+00013650: 6f61 6428 696e 702c 666f 7263 653d 4661  oad(inp,force=Fa
+00013660: 6c73 652c 676c 6f62 616c 656e 763d 6469  lse,globalenv=di
+00013670: 6374 2869 6e73 7065 6374 2e67 6574 6d65  ct(inspect.getme
+00013680: 6d62 6572 7328 696e 7370 6563 742e 7374  mbers(inspect.st
+00013690: 6163 6b28 295b 315d 5b30 5d29 295b 2266  ack()[1][0]))["f
+000136a0: 5f67 6c6f 6261 6c73 225d 2c75 6e6c 6f61  _globals"],unloa
+000136b0: 643d 4661 6c73 652c 7265 5f6c 6f61 643d  d=False,re_load=
+000136c0: 4661 6c73 6529 3a0a 6465 6620 4d6f 644c  False):.def ModL
+000136d0: 6f61 6428 696e 702c 666f 7263 653d 4661  oad(inp,force=Fa
+000136e0: 6c73 652c 676c 6f62 616c 656e 763d 476c  lse,globalenv=Gl
+000136f0: 6f62 616c 2829 2c75 6e6c 6f61 643d 4661  obal(),unload=Fa
+00013700: 6c73 652c 7265 5f6c 6f61 643d 4661 6c73  lse,re_load=Fals
+00013710: 6529 3a0a 2020 2020 2727 270a 2020 2020  e):.    '''.    
+00013720: 4c6f 6164 2070 7974 686f 6e20 6d6f 6475  Load python modu
+00013730: 6c65 0a20 2020 2030 3a20 4c6f 6164 6564  le.    0: Loaded
+00013740: 0a20 2020 2031 3a20 4c6f 6164 2065 7272  .    1: Load err
+00013750: 6f72 2028 4d61 7920 6265 206e 6565 6420  or (May be need 
+00013760: 696e 7374 616c 6c20 6f72 204c 6f61 6469  install or Loadi
+00013770: 6e67 2065 7272 6f72 2077 6974 6820 616e  ng error with an
+00013780: 7920 6372 6974 6963 616c 2069 7373 7565  y critical issue
+00013790: 290a 2020 2020 323a 2055 6e6c 6f61 6420  ).    2: Unload 
+000137a0: 6f72 204e 6f74 206c 6f61 6465 640a 2020  or Not loaded.  
+000137b0: 2020 2727 270a 2020 2020 6465 6620 5265    '''.    def Re
+000137c0: 6c6f 6164 286e 616d 6529 3a0a 2020 2020  load(name):.    
+000137d0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+000137e0: 6528 6e61 6d65 2c73 7472 293a 0a20 2020  e(name,str):.   
+000137f0: 2020 2020 2020 2020 2067 6c6f 6261 6c65           globale
+00013800: 6e76 5b6e 616d 655d 3d72 656c 6f61 6428  nv[name]=reload(
+00013810: 676c 6f62 616c 656e 765b 6e61 6d65 5d29  globalenv[name])
+00013820: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00013830: 2020 2020 2020 2020 2020 206e 616d 653d             name=
+00013840: 7265 6c6f 6164 286e 616d 6529 0a20 2020  reload(name).   
+00013850: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
+00013860: 0a0a 2020 2020 6465 6620 556e 6c6f 6164  ..    def Unload
+00013870: 286e 616d 6529 3a0a 2020 2020 2020 2020  (name):.        
+00013880: 6966 2069 7369 6e73 7461 6e63 6528 6e61  if isinstance(na
+00013890: 6d65 2c73 7472 293a 0a20 2020 2020 2020  me,str):.       
+000138a0: 2020 2020 2064 656c 2067 6c6f 6261 6c65       del globale
+000138b0: 6e76 5b6e 616d 655d 0a20 2020 2020 2020  nv[name].       
+000138c0: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+000138d0: 286e 616d 652c 7479 7065 2869 6e73 7065  (name,type(inspe
+000138e0: 6374 2929 3a0a 2020 2020 2020 2020 2020  ct)):.          
+000138f0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+00013900: 2020 2020 2020 206e 6e61 6d65 203d 206e         nname = n
+00013910: 616d 652e 5f5f 7370 6563 5f5f 2e6e 616d  ame.__spec__.nam
+00013920: 650a 2020 2020 2020 2020 2020 2020 6578  e.            ex
+00013930: 6365 7074 2041 7474 7269 6275 7465 4572  cept AttributeEr
+00013940: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
+00013950: 2020 2020 206e 6e61 6d65 203d 206e 616d       nname = nam
+00013960: 652e 5f5f 6e61 6d65 5f5f 0a20 2020 2020  e.__name__.     
+00013970: 2020 2020 2020 2069 6620 6e6e 616d 6520         if nname 
+00013980: 696e 2067 6c6f 6261 6c65 6e76 3a20 6465  in globalenv: de
+00013990: 6c20 676c 6f62 616c 656e 765b 6e6e 616d  l globalenv[nnam
+000139a0: 655d 0a0a 2020 2020 6966 206e 6f74 2069  e]..    if not i
+000139b0: 6e70 3a20 7265 7475 726e 2030 2c27 270a  np: return 0,''.
+000139c0: 2320 2020 2069 6e70 5f61 3d69 6e70 2e73  #    inp_a=inp.s
+000139d0: 706c 6974 2829 0a20 2020 2077 696c 6463  plit().    wildc
+000139e0: 6172 643d 4e6f 6e65 0a20 2020 2063 6c61  ard=None.    cla
+000139f0: 7373 5f6e 616d 653d 4e6f 6e65 0a23 2020  ss_name=None.#  
+00013a00: 2020 6966 2069 6e70 5f61 5b30 5d20 696e    if inp_a[0] in
+00013a10: 205b 2766 726f 6d27 2c27 696d 706f 7274   ['from','import
+00013a20: 275d 3a0a 2320 2020 2020 2020 2064 656c  ']:.#        del
+00013a30: 2069 6e70 5f61 5b30 5d0a 2320 2020 206e   inp_a[0].#    n
+00013a40: 616d 653d 696e 705f 615b 2d31 5d0a 2320  ame=inp_a[-1].# 
+00013a50: 2020 206d 6f64 756c 653d 696e 705f 615b     module=inp_a[
+00013a60: 305d 0a20 2020 206f 6b2c 6d6f 6475 6c65  0].    ok,module
+00013a70: 2c6e 616d 652c 636c 6173 735f 6e61 6d65  ,name,class_name
+00013a80: 2c76 6572 7369 6f6e 2c73 796d 626f 6c3d  ,version,symbol=
+00013a90: 4d6f 644e 616d 6528 696e 7029 0a20 2020  ModName(inp).   
+00013aa0: 2069 6620 6f6b 2069 7320 4661 6c73 653a   if ok is False:
+00013ab0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00013ac0: 6e74 2827 2a2a 2a20 5772 6f6e 6720 696e  nt('*** Wrong in
+00013ad0: 666f 726d 6174 696f 6e27 290a 2020 2020  formation').    
+00013ae0: 2020 2020 2020 2020 7265 7475 726e 2030          return 0
+00013af0: 2c6d 6f64 756c 650a 2020 2020 6966 2075  ,module.    if u
+00013b00: 6e6c 6f61 643a 0a20 2020 2020 2020 2023  nload:.        #
+00013b10: 6966 2027 2a27 206e 6f74 2069 6e20 696e  if '*' not in in
+00013b20: 7020 616e 6420 6e61 6d65 2069 6e20 676c  p and name in gl
+00013b30: 6f62 616c 656e 763a 2023 2061 6c72 6561  obalenv: # alrea
+00013b40: 6479 206c 6f61 6465 640a 2020 2020 2020  dy loaded.      
+00013b50: 2020 6966 2063 6c61 7373 5f6e 616d 6520    if class_name 
+00013b60: 213d 2027 2a27 2061 6e64 206e 616d 6520  != '*' and name 
+00013b70: 696e 2067 6c6f 6261 6c65 6e76 3a20 2320  in globalenv: # 
+00013b80: 616c 7265 6164 7920 6c6f 6164 6564 0a20  already loaded. 
+00013b90: 2020 2020 2020 2020 2020 2055 6e6c 6f61             Unloa
+00013ba0: 6428 6e61 6d65 2920 2355 6e6c 6f61 640a  d(name) #Unload.
+00013bb0: 2020 2020 2020 2020 7265 7475 726e 2032          return 2
+00013bc0: 2c6d 6f64 756c 6520 234e 6f74 206c 6f61  ,module #Not loa
+00013bd0: 6465 640a 0a23 2020 2020 696d 706f 7274  ded..#    import
+00013be0: 2069 6e73 7065 6374 2c73 7973 0a23 2020   inspect,sys.#  
+00013bf0: 2020 7072 696e 7428 696e 7370 6563 742e    print(inspect.
+00013c00: 7374 6163 6b28 2929 0a23 2020 2020 6465  stack()).#    de
+00013c10: 703d 6c65 6e28 696e 7370 6563 742e 7374  p=len(inspect.st
+00013c20: 6163 6b28 2929 2d31 0a23 2020 2020 666e  ack())-1.#    fn
+00013c30: 616d 653d 7379 732e 5f67 6574 6672 616d  ame=sys._getfram
+00013c40: 6528 6465 7029 2e66 5f63 6f64 652e 636f  e(dep).f_code.co
+00013c50: 5f6e 616d 650a 2320 2020 2069 6620 666e  _name.#    if fn
+00013c60: 616d 6520 3d3d 2027 5f62 6f6f 7473 7472  ame == '_bootstr
+00013c70: 6170 5f69 6e6e 6572 2720 6f72 206e 616d  ap_inner' or nam
+00013c80: 6520 3d3d 2027 5f72 756e 5f63 6f64 6527  e == '_run_code'
+00013c90: 3a0a 2320 2020 2020 2020 2066 6e61 6d65  :.#        fname
+00013ca0: 3d73 7973 2e5f 6765 7466 7261 6d65 2832  =sys._getframe(2
+00013cb0: 292e 665f 636f 6465 2e63 6f5f 6e61 6d65  ).f_code.co_name
+00013cc0: 0a23 2020 2020 7072 696e 7428 273e 3e27  .#    print('>>'
+00013cd0: 2c66 6e61 6d65 2c27 3a3a 3a27 2c6e 616d  ,fname,':::',nam
+00013ce0: 652c 636c 6173 735f 6e61 6d65 2c6d 6f64  e,class_name,mod
+00013cf0: 756c 6529 0a20 2020 2023 6966 2027 2a27  ule).    #if '*'
+00013d00: 206e 6f74 2069 6e20 696e 7020 616e 6420   not in inp and 
+00013d10: 6e61 6d65 2069 6e20 676c 6f62 616c 656e  name in globalen
+00013d20: 763a 2023 2061 6c72 6561 6479 206c 6f61  v: # already loa
+00013d30: 6465 640a 2020 2020 6966 2063 6c61 7373  ded.    if class
+00013d40: 5f6e 616d 6520 213d 2027 2a27 2061 6e64  _name != '*' and
+00013d50: 206e 616d 6520 696e 2067 6c6f 6261 6c65   name in globale
+00013d60: 6e76 3a20 2320 616c 7265 6164 7920 6c6f  nv: # already lo
+00013d70: 6164 6564 0a20 2020 2020 2020 2069 6620  aded.        if 
+00013d80: 7265 5f6c 6f61 643a 0a20 2020 2020 2020  re_load:.       
+00013d90: 2020 2020 2052 656c 6f61 6428 6e61 6d65       Reload(name
+00013da0: 2920 2320 6966 2066 6f72 6365 2074 6865  ) # if force the
+00013db0: 6e20 7265 6c6f 6164 0a20 2020 2020 2020  n reload.       
+00013dc0: 2020 2020 2072 6574 7572 6e20 302c 6d6f       return 0,mo
+00013dd0: 6475 6c65 0a20 2020 2020 2020 2065 6c69  dule.        eli
+00013de0: 6620 666f 7263 653a 0a20 2020 2020 2020  f force:.       
+00013df0: 2020 2020 2055 6e6c 6f61 6428 6e61 6d65       Unload(name
+00013e00: 2920 2369 6620 666f 7263 6520 7468 656e  ) #if force then
+00013e10: 2075 6e6c 6f61 6420 616e 6420 6c6f 6164   unload and load
+00013e20: 2061 6761 696e 0a23 2020 2020 6966 2027   again.#    if '
+00013e30: 696d 706f 7274 2720 696e 2069 6e70 5f61  import' in inp_a
+00013e40: 3a0a 2320 2020 2020 2020 2069 6d70 6f72  :.#        impor
+00013e50: 745f 6964 783d 696e 705f 612e 696e 6465  t_idx=inp_a.inde
+00013e60: 7828 2769 6d70 6f72 7427 290a 2320 2020  x('import').#   
+00013e70: 2020 2020 2069 6620 6c65 6e28 696e 705f       if len(inp_
+00013e80: 6129 203e 2069 6d70 6f72 745f 6964 782b  a) > import_idx+
+00013e90: 313a 0a23 2020 2020 2020 2020 2020 2020  1:.#            
+00013ea0: 636c 6173 735f 6e61 6d65 3d69 6e70 5f61  class_name=inp_a
+00013eb0: 5b69 6d70 6f72 745f 6964 782b 315d 0a23  [import_idx+1].#
+00013ec0: 2020 2020 2020 2020 656c 7365 3a0a 2320          else:.# 
+00013ed0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00013ee0: 2827 2a2a 2a20 5772 6f6e 6720 696e 666f  ('*** Wrong info
+00013ef0: 726d 6174 696f 6e27 290a 2320 2020 2020  rmation').#     
+00013f00: 2020 2020 2020 2072 6574 7572 6e20 302c         return 0,
+00013f10: 6d6f 6475 6c65 0a20 2020 2074 7279 3a0a  module.    try:.
+00013f20: 2020 2020 2020 2020 6966 2063 6c61 7373          if class
+00013f30: 5f6e 616d 653a 0a20 2020 2020 2020 2020  _name:.         
+00013f40: 2020 2069 6620 636c 6173 735f 6e61 6d65     if class_name
+00013f50: 203d 3d20 272a 273a 0a20 2020 2020 2020   == '*':.       
+00013f60: 2020 2020 2020 2020 2077 696c 6463 6172           wildcar
+00013f70: 643d 696d 706f 7274 5f6d 6f64 756c 6528  d=import_module(
+00013f80: 6d6f 6475 6c65 290a 2020 2020 2020 2020  module).        
+00013f90: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00013fa0: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00013fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013fc0: 2020 2067 6c6f 6261 6c65 6e76 5b6e 616d     globalenv[nam
+00013fd0: 655d 3d67 6574 6174 7472 2869 6d70 6f72  e]=getattr(impor
+00013fe0: 745f 6d6f 6475 6c65 286d 6f64 756c 6529  t_module(module)
+00013ff0: 2c63 6c61 7373 5f6e 616d 6529 0a20 2020  ,class_name).   
+00014000: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+00014010: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+00014020: 2020 2020 2020 2020 2067 6c6f 6261 6c65           globale
+00014030: 6e76 5b6e 616d 655d 3d69 6d70 6f72 745f  nv[name]=import_
+00014040: 6d6f 6475 6c65 2827 7b7d 2e7b 7d27 2e66  module('{}.{}'.f
+00014050: 6f72 6d61 7428 6d6f 6475 6c65 2c63 6c61  ormat(module,cla
+00014060: 7373 5f6e 616d 6529 290a 2020 2020 2020  ss_name)).      
+00014070: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00014080: 2020 2020 676c 6f62 616c 656e 765b 6e61      globalenv[na
+00014090: 6d65 5d3d 696d 706f 7274 5f6d 6f64 756c  me]=import_modul
+000140a0: 6528 6d6f 6475 6c65 290a 2020 2020 2020  e(module).      
+000140b0: 2020 7265 7475 726e 2077 696c 6463 6172    return wildcar
+000140c0: 642c 6d6f 6475 6c65 2023 204c 6f61 6465  d,module # Loade
+000140d0: 642e 2053 6f20 7265 7475 726e 2077 696c  d. So return wil
+000140e0: 6463 6172 6420 696e 666f 726d 6174 696f  dcard informatio
+000140f0: 6e0a 2020 2020 6578 6365 7074 2041 7474  n.    except Att
+00014100: 7269 6275 7465 4572 726f 723a 2023 2054  ributeError: # T
+00014110: 7279 204c 6f61 6469 6e67 206c 6f6f 7065  ry Loading loope
+00014120: 6420 4d6f 6475 6c65 2f43 6c61 7373 2074  d Module/Class t
+00014130: 6865 6e20 6967 6e6f 7265 2020 6f72 2057  hen ignore  or W
+00014140: 726f 6e67 2064 6566 696e 650a 2020 2020  rong define.    
+00014150: 2020 2020 7265 7475 726e 2030 2c6d 6f64      return 0,mod
+00014160: 756c 650a 2020 2020 6578 6365 7074 2049  ule.    except I
+00014170: 6d70 6f72 7445 7272 6f72 3a20 2320 496d  mportError: # Im
+00014180: 706f 7274 2065 7272 6f72 2074 6865 6e20  port error then 
+00014190: 7472 7920 696e 7374 616c 6c0a 2020 2020  try install.    
+000141a0: 2020 2020 7265 7475 726e 2031 2c6d 6f64      return 1,mod
+000141b0: 756c 650a 0a64 6566 2049 6d70 6f72 7428  ule..def Import(
+000141c0: 2a69 6e70 732c 2a2a 6f70 7473 293a 0a20  *inps,**opts):. 
+000141d0: 2020 2027 2727 0a20 2020 2062 6173 6963     '''.    basic
+000141e0: 2066 756e 6374 696f 6e20 6f66 2069 6d70   function of imp
+000141f0: 6f72 740a 2020 2020 6966 206e 6f74 2066  ort.    if not f
+00014200: 6f75 6e64 2074 6865 206d 6f64 756c 6520  ound the module 
+00014210: 7468 656e 2061 7574 6f6d 6174 6963 616c  then automatical
+00014220: 6c20 696e 7374 616c 6c0a 2020 2020 7665  l install.    ve
+00014230: 7273 696f 6e20 6368 6563 6b20 616e 6420  rsion check and 
+00014240: 7570 6772 6164 652c 2072 6569 6e73 7461  upgrade, reinsta
+00014250: 6c6c 2061 6363 6f72 6469 6e67 2074 6f20  ll according to 
+00014260: 7468 6520 7665 7273 696f 6e0a 2020 2020  the version.    
+00014270: 7375 7070 6f72 7420 7265 7175 6972 656d  support requirem
+00014280: 656e 7420 6669 6c65 730a 0a20 2020 2069  ent files..    i
+00014290: 6e70 7320 6861 7320 2272 6571 7569 7265  nps has "require
+000142a0: 203c 7265 7175 6972 6520 6669 6c65 3e22   <require file>"
+000142b0: 2074 6865 6e20 696e 7374 616c 6c20 7468   then install th
+000142c0: 6520 616c 6c20 7265 7175 6972 6520 6669  e all require fi
+000142d0: 6c65 7320 696e 203c 7265 7175 6972 6520  les in <require 
+000142e0: 6669 6c65 3e0a 2020 2020 496d 706f 7274  file>.    Import
+000142f0: 2827 3c6d 6f64 756c 6520 6e61 6d65 3e20  ('<module name> 
+00014300: 203e 3d20 3c76 6572 7369 6f6e 3e27 2920   >= <version>') 
+00014310: 3a20 4368 6563 6b20 7665 7273 696f 6e20  : Check version 
+00014320: 616e 6420 6c6f 7765 7220 7468 656e 2061  and lower then a
+00014330: 7574 6f6d 6174 6963 616c 6c20 7570 6772  utomaticall upgr
+00014340: 6164 6520 0a20 2020 2049 6d70 6f72 7428  ade .    Import(
+00014350: 273c 6d6f 6475 6c65 206e 616d 653e 2020  '<module name>  
+00014360: 3d3d 203c 7665 7273 696f 6e3e 2729 203a  == <version>') :
+00014370: 2043 6865 636b 2076 6572 7369 6f6e 2061   Check version a
+00014380: 6e64 2064 6966 6665 7265 6e74 2074 6865  nd different the
+00014390: 6e20 6175 746f 6d61 7469 6361 6c6c 2072  n automaticall r
+000143a0: 6569 6e73 7461 6c6c 2077 6974 6820 7468  einstall with th
+000143b0: 6520 7665 7273 696f 6e0a 2020 2020 496d  e version.    Im
+000143c0: 706f 7274 2827 3c6d 6f64 756c 6520 6e61  port('<module na
+000143d0: 6d65 3e27 2c70 6174 683d 2741 4141 2c42  me>',path='AAA,B
+000143e0: 4242 2c43 4343 4327 2920 3a20 696d 706f  BB,CCCC') : impo
+000143f0: 7274 203c 6d6f 6475 6c65 206e 616d 653e  rt <module name>
+00014400: 2066 726f 6d20 6465 6661 756c 7420 616e   from default an
+00014410: 6420 6578 7472 6120 4141 4120 616e 6420  d extra AAA and 
+00014420: 4242 4220 616e 6420 4343 432e 0a20 2020  BBB and CCC..   
+00014430: 202d 7061 7468 3d20 2020 2020 2020 3a20   -path=       : 
+00014440: 7365 6172 6368 696e 6720 616e 6420 7468  searching and th
+00014450: 6520 6d6f 6475 6c65 2069 6e20 7468 6520  e module in the 
+00014460: 6578 7472 6120 7061 7468 2028 7365 7065  extra path (sepe
+00014470: 7261 7465 2077 6974 6820 272c 2720 6f72  rate with ',' or
+00014480: 2027 3a27 2029 0a20 2020 202d 666f 7263   ':' ).    -forc
+00014490: 653d 5472 7565 2020 3a20 756e 6c6f 6164  e=True  : unload
+000144a0: 2061 6e64 206c 6f61 6420 6167 6169 6e20   and load again 
+000144b0: 7768 656e 2061 6c72 6561 6479 206c 6f61  when already loa
+000144c0: 6465 6420 2864 6566 6175 6c74 3a20 4661  ded (default: Fa
+000144d0: 6c73 6529 0a20 2020 202d 7265 6c6f 6164  lse).    -reload
+000144e0: 3d54 7275 6520 3a20 7275 6e20 7265 6c6f  =True : run relo
+000144f0: 6164 2077 6865 6e20 616c 7265 6164 7920  ad when already 
+00014500: 6c6f 6164 6564 2028 6465 6661 756c 743a  loaded (default:
+00014510: 2046 616c 7365 290a 2020 2020 2d75 6e6c   False).    -unl
+00014520: 6f61 643d 5472 7565 203a 2075 6e6c 6f61  oad=True : unloa
+00014530: 6420 6d6f 6475 6c65 2028 6465 6661 756c  d module (defaul
+00014540: 7420 3a20 4661 6c73 6529 0a20 2020 202d  t : False).    -
+00014550: 6572 723d 5472 7565 2020 2020 3a20 7368  err=True    : sh
+00014560: 6f77 2069 6e73 7461 6c6c 206f 7220 6c6f  ow install or lo
+00014570: 6164 696e 6720 6572 726f 7220 2864 6566  ading error (def
+00014580: 6175 6c74 3a20 4661 6c73 6529 0a20 2020  ault: False).   
+00014590: 202d 6462 673d 5472 7565 2020 2020 3a20   -dbg=True    : 
+000145a0: 7368 6f77 2063 6f6d 6d65 6e74 2028 6465  show comment (de
+000145b0: 6661 756c 7420 3a20 4661 6c73 6529 0a20  fault : False). 
+000145c0: 2020 202d 696e 7374 616c 6c5f 6163 636f     -install_acco
+000145d0: 756e 743d 3a20 272d 2d75 7365 7227 2c27  unt=: '--user','
+000145e0: 7573 6572 272c 276d 7961 6363 6f75 6e74  user','myaccount
+000145f0: 272c 2761 6363 6f75 6e74 272c 6d79 7365  ','account',myse
+00014600: 6c66 2074 6865 6e20 696e 7374 616c 6c20  lf then install 
+00014610: 6174 206d 7920 6c6f 6361 6c20 6163 636f  at my local acco
+00014620: 756e 740a 2020 2020 2020 2020 2020 2020  unt.            
+00014630: 2020 2020 2064 6566 6175 6c74 3a20 496e       default: In
+00014640: 7374 616c 6c20 6279 2053 7973 7465 6d20  stall by System 
+00014650: 6465 6661 756c 7420 7365 7474 696e 670a  default setting.
+00014660: 0a20 2020 2027 2727 0a20 2020 2067 6c6f  .    '''.    glo
+00014670: 6261 6c65 6e76 3d6f 7074 732e 6765 7428  balenv=opts.get(
+00014680: 2767 6c6f 6261 6c65 6e76 272c 6469 6374  'globalenv',dict
+00014690: 2869 6e73 7065 6374 2e67 6574 6d65 6d62  (inspect.getmemb
+000146a0: 6572 7328 696e 7370 6563 742e 7374 6163  ers(inspect.stac
+000146b0: 6b28 295b 315d 5b30 5d29 295b 2266 5f67  k()[1][0]))["f_g
+000146c0: 6c6f 6261 6c73 225d 2920 2320 4765 7420  lobals"]) # Get 
+000146d0: 6d79 2070 6172 656e 7427 7320 676c 6f62  my parent's glob
+000146e0: 616c 7328 290a 2020 2020 666f 7263 653d  als().    force=
+000146f0: 6f70 7473 2e67 6574 2827 666f 7263 6527  opts.get('force'
+00014700: 2c4e 6f6e 6529 2023 2075 6e6c 6f61 6420  ,None) # unload 
+00014710: 616e 6420 6c6f 6164 2061 6761 696e 2077  and load again w
+00014720: 6865 6e20 616c 7265 6164 7920 6c6f 6164  hen already load
+00014730: 6564 2028 666f 7263 653d 5472 7565 290a  ed (force=True).
+00014740: 2020 2020 7265 5f6c 6f61 643d 6f70 7473      re_load=opts
+00014750: 2e67 6574 2827 7265 6c6f 6164 272c 4e6f  .get('reload',No
+00014760: 6e65 2920 2320 2072 756e 2072 656c 6f61  ne) #  run reloa
+00014770: 6420 7768 656e 2061 6c72 6561 6479 206c  d when already l
+00014780: 6f61 6465 640a 2020 2020 756e 6c6f 6164  oaded.    unload
+00014790: 3d6f 7074 732e 6765 7428 2775 6e6c 6f61  =opts.get('unloa
+000147a0: 6427 2c46 616c 7365 2920 2320 756e 6c6f  d',False) # unlo
+000147b0: 6164 206d 6f64 756c 6520 7768 656e 2054  ad module when T
+000147c0: 7275 650a 2020 2020 6572 723d 6f70 7473  rue.    err=opts
+000147d0: 2e67 6574 2827 6572 7227 2c46 616c 7365  .get('err',False
+000147e0: 2920 2320 7368 6f77 2069 6e73 7461 6c6c  ) # show install
+000147f0: 206f 7220 6c6f 6164 696e 6720 6572 726f   or loading erro
+00014800: 7220 7768 656e 2054 7275 650a 2020 2020  r when True.    
+00014810: 6465 6661 756c 743d 6f70 7473 2e67 6574  default=opts.get
+00014820: 2827 6465 6661 756c 7427 2c46 616c 7365  ('default',False
+00014830: 290a 2020 2020 6462 673d 6f70 7473 2e67  ).    dbg=opts.g
+00014840: 6574 2827 6462 6727 2c46 616c 7365 2920  et('dbg',False) 
+00014850: 2320 7368 6f77 2063 6f6d 6d65 6e74 2077  # show comment w
+00014860: 6865 6e20 5472 7565 0a20 2020 2061 7574  hen True.    aut
+00014870: 6f5f 696e 7374 616c 6c3d 6f70 7473 2e67  o_install=opts.g
+00014880: 6574 2827 6175 746f 5f69 6e73 7461 6c6c  et('auto_install
+00014890: 272c 5472 7565 2920 2320 6966 206e 6f74  ',True) # if not
+000148a0: 2066 6f75 6e64 2074 6865 206d 6f64 756c   found the modul
+000148b0: 6520 7468 656e 2061 7574 6f6d 6174 6963  e then automatic
+000148c0: 616c 6c79 2069 6e73 7461 6c6c 0a20 2020  ally install.   
+000148d0: 2072 6571 7569 7265 6d65 6e74 733d 6f70   requirements=op
+000148e0: 7473 2e67 6574 2827 7265 7175 6972 656d  ts.get('requirem
+000148f0: 656e 7473 2729 0a20 2020 2023 696e 7374  ents').    #inst
+00014900: 616c 6c5f 6163 636f 756e 743d 6f70 7473  all_account=opts
+00014910: 2e67 6574 2827 696e 7374 616c 6c5f 6163  .get('install_ac
+00014920: 636f 756e 7427 2c27 2d2d 7573 6572 2729  count','--user')
+00014930: 0a20 2020 2069 6e73 7461 6c6c 5f61 6363  .    install_acc
+00014940: 6f75 6e74 3d6f 7074 732e 6765 7428 2769  ount=opts.get('i
+00014950: 6e73 7461 6c6c 5f61 6363 6f75 6e74 272c  nstall_account',
+00014960: 2727 2920 2320 272d 2d75 7365 7227 2c27  '') # '--user','
+00014970: 7573 6572 272c 276d 7961 6363 6f75 6e74  user','myaccount
+00014980: 272c 2761 6363 6f75 6e74 272c 6d79 7365  ','account',myse
+00014990: 6c66 2074 6865 6e20 696e 7374 616c 6c20  lf then install 
+000149a0: 6174 206d 7920 6c6f 6361 6c20 6163 636f  at my local acco
+000149b0: 756e 740a 2020 2020 696e 7374 616c 6c5f  unt.    install_
+000149c0: 6e61 6d65 3d6f 7074 732e 6765 7428 2769  name=opts.get('i
+000149d0: 6e73 7461 6c6c 5f6e 616d 6527 290a 0a20  nstall_name').. 
+000149e0: 2020 2023 4170 7065 6e64 204d 6f64 756c     #Append Modul
+000149f0: 6520 5061 7468 0a20 2020 2076 6972 7475  e Path.    virtu
+00014a00: 616c 5f65 6e76 3d6f 732e 656e 7669 726f  al_env=os.enviro
+00014a10: 6e2e 6765 7428 2756 4952 5455 414c 5f45  n.get('VIRTUAL_E
+00014a20: 4e56 2729 0a20 2020 2065 6e76 5f62 6173  NV').    env_bas
+00014a30: 655f 6469 723d 7669 7274 7561 6c5f 656e  e_dir=virtual_en
+00014a40: 7620 6966 2076 6972 7475 616c 5f65 6e76  v if virtual_env
+00014a50: 2065 6c73 6520 272f 7573 7227 0a20 2020   else '/usr'.   
+00014a60: 2062 6173 655f 6c69 625f 7061 7468 3d5b   base_lib_path=[
+00014a70: 5d0a 2020 2020 7079 5f76 6572 3d50 7956  ].    py_ver=PyV
+00014a80: 6572 2829 0a20 2020 2066 6f72 2069 2069  er().    for i i
+00014a90: 6e20 5b27 6c69 622f 7079 7468 6f6e 7b7d  n ['lib/python{}
+00014aa0: 2f73 6974 652d 7061 636b 6167 6573 272e  /site-packages'.
+00014ab0: 666f 726d 6174 2870 795f 7665 7229 2c27  format(py_ver),'
+00014ac0: 6c69 6236 342f 7079 7468 6f6e 7b7d 2f73  lib64/python{}/s
+00014ad0: 6974 652d 7061 636b 6167 6573 272e 666f  ite-packages'.fo
+00014ae0: 726d 6174 2870 795f 7665 7229 2c27 6c6f  rmat(py_ver),'lo
+00014af0: 6361 6c2f 7079 7468 6f6e 7b7d 2f73 6974  cal/python{}/sit
+00014b00: 652d 7061 636b 6167 6573 272e 666f 726d  e-packages'.form
+00014b10: 6174 2870 795f 7665 7229 2c27 6c6f 6361  at(py_ver),'loca
+00014b20: 6c2f 6c69 622f 7079 7468 6f6e 7b7d 2f73  l/lib/python{}/s
+00014b30: 6974 652d 7061 636b 6167 6573 272e 666f  ite-packages'.fo
+00014b40: 726d 6174 2870 795f 7665 7229 2c27 6c6f  rmat(py_ver),'lo
+00014b50: 6361 6c2f 6c69 6236 342f 7079 7468 6f6e  cal/lib64/python
+00014b60: 7b7d 2f73 6974 652d 7061 636b 6167 6573  {}/site-packages
+00014b70: 272e 666f 726d 6174 2870 795f 7665 7229  '.format(py_ver)
+00014b80: 5d3a 0a20 2020 2020 2020 206a 3d6f 732e  ]:.        j=os.
+00014b90: 7061 7468 2e6a 6f69 6e28 656e 765f 6261  path.join(env_ba
+00014ba0: 7365 5f64 6972 2c69 290a 2020 2020 2020  se_dir,i).      
+00014bb0: 2020 6966 206f 732e 7061 7468 2e69 7364    if os.path.isd
+00014bc0: 6972 286a 293a 0a20 2020 2020 2020 2020  ir(j):.         
+00014bd0: 2020 2062 6173 655f 6c69 625f 7061 7468     base_lib_path
+00014be0: 2e61 7070 656e 6428 6a29 0a0a 2020 2020  .append(j)..    
+00014bf0: 7061 7468 3d6f 7074 732e 6765 7428 2770  path=opts.get('p
+00014c00: 6174 6827 2920 2320 6966 2074 6865 206d  ath') # if the m
+00014c10: 6f64 756c 6520 6669 6c65 2069 6e20 6120  odule file in a 
+00014c20: 7370 6563 6961 6c20 7061 7468 2074 6865  special path the
+00014c30: 6e20 6465 6669 6e65 2070 6174 680a 2020  n define path.  
+00014c40: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
+00014c50: 7061 7468 2c63 6865 636b 5f74 7970 653d  path,check_type=
+00014c60: 7374 7229 3a0a 2020 2020 2020 2020 6966  str):.        if
+00014c70: 2027 2c27 2069 6e20 7061 7468 3a0a 2020   ',' in path:.  
+00014c80: 2020 2020 2020 2020 2020 6261 7365 5f6c            base_l
+00014c90: 6962 5f70 6174 683d 6261 7365 5f6c 6962  ib_path=base_lib
+00014ca0: 5f70 6174 682b 7061 7468 2e73 706c 6974  _path+path.split
+00014cb0: 2827 2c27 290a 2020 2020 2020 2020 656c  (',').        el
+00014cc0: 6966 2027 3a27 2069 6e20 7061 7468 3a0a  if ':' in path:.
+00014cd0: 2020 2020 2020 2020 2020 2020 6261 7365              base
+00014ce0: 5f6c 6962 5f70 6174 683d 6261 7365 5f6c  _lib_path=base_l
+00014cf0: 6962 5f70 6174 682b 7061 7468 2e73 706c  ib_path+path.spl
+00014d00: 6974 2827 3a27 290a 2020 2020 2020 2020  it(':').        
+00014d10: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00014d20: 2020 6261 7365 5f6c 6962 5f70 6174 683d    base_lib_path=
+00014d30: 6261 7365 5f6c 6962 5f70 6174 682b 5b70  base_lib_path+[p
+00014d40: 6174 685d 0a20 2020 2065 6c69 6620 6973  ath].    elif is
+00014d50: 696e 7374 616e 6365 2870 6174 682c 286c  instance(path,(l
+00014d60: 6973 742c 7475 706c 6529 293a 0a20 2020  ist,tuple)):.   
+00014d70: 2020 2020 2062 6173 655f 6c69 625f 7061       base_lib_pa
+00014d80: 7468 3d62 6173 655f 6c69 625f 7061 7468  th=base_lib_path
+00014d90: 2b6c 6973 7428 7061 7468 290a 2020 2020  +list(path).    
+00014da0: 6966 206e 6f74 2076 6972 7475 616c 5f65  if not virtual_e
+00014db0: 6e76 3a0a 2020 2020 2020 2020 686f 6d65  nv:.        home
+00014dc0: 3d50 6174 6828 277e 2729 0a20 2020 2020  =Path('~').     
+00014dd0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00014de0: 2868 6f6d 652c 7374 7229 3a0a 2020 2020  (home,str):.    
+00014df0: 2020 2020 2020 2020 6261 7365 5f6c 6962          base_lib
+00014e00: 5f70 6174 682e 6170 7065 6e64 2827 7b7d  _path.append('{}
+00014e10: 2f2e 6c6f 6361 6c2f 6c69 622f 7079 7468  /.local/lib/pyth
+00014e20: 6f6e 332e 362f 7369 7465 2d70 6163 6b61  on3.6/site-packa
+00014e30: 6765 7327 2e66 6f72 6d61 7428 686f 6d65  ges'.format(home
+00014e40: 2929 0a20 2020 2020 2020 2066 6f72 2069  )).        for i
+00014e50: 6920 696e 2062 6173 655f 6c69 625f 7061  i in base_lib_pa
+00014e60: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
+00014e70: 6966 206f 732e 7061 7468 2e69 7364 6972  if os.path.isdir
+00014e80: 2869 6929 2061 6e64 206e 6f74 2069 6920  (ii) and not ii 
+00014e90: 696e 2073 7973 2e70 6174 683a 0a20 2020  in sys.path:.   
+00014ea0: 2020 2020 2020 2020 2020 2020 2073 7973               sys
+00014eb0: 2e70 6174 682e 6170 7065 6e64 2869 6929  .path.append(ii)
+00014ec0: 0a20 2020 2069 6620 6f73 2e67 6574 6377  .    if os.getcw
+00014ed0: 6428 2920 6e6f 7420 696e 2073 7973 2e70  d() not in sys.p
+00014ee0: 6174 683a 2073 7973 2e70 6174 683d 5b6f  ath: sys.path=[o
+00014ef0: 732e 6765 7463 7764 2829 5d2b 7379 732e  s.getcwd()]+sys.
+00014f00: 7061 7468 0a0a 2020 2020 6966 206e 6f74  path..    if not
+00014f10: 2076 6972 7475 616c 5f65 6e76 2061 6e64   virtual_env and
+00014f20: 2069 6e73 7461 6c6c 5f61 6363 6f75 6e74   install_account
+00014f30: 2069 6e20 5b27 7573 6572 272c 272d 2d75   in ['user','--u
+00014f40: 7365 7227 2c27 7065 7273 6f6e 616c 272c  ser','personal',
+00014f50: 276d 7961 6363 6f75 6e74 272c 2761 6363  'myaccount','acc
+00014f60: 6f75 6e74 272c 276d 7973 656c 6627 5d3a  ount','myself']:
+00014f70: 0a20 2020 2020 2020 2069 6e73 7461 6c6c  .        install
+00014f80: 5f61 6363 6f75 6e74 3d27 2d2d 7573 6572  _account='--user
+00014f90: 270a 2020 2020 656c 7365 3a0a 2020 2020  '.    else:.    
+00014fa0: 2020 2020 696e 7374 616c 6c5f 6163 636f      install_acco
+00014fb0: 756e 743d 2727 0a0a 2020 2020 6465 6620  unt=''..    def 
+00014fc0: 4368 6563 6b4f 626a 286f 626a 293a 0a20  CheckObj(obj):. 
+00014fd0: 2020 2020 2020 206f 626a 5f64 6972 3d64         obj_dir=d
+00014fe0: 6972 286f 626a 290a 2020 2020 2020 2020  ir(obj).        
+00014ff0: 6f62 6a5f 6e61 6d65 3d74 7970 6528 6f62  obj_name=type(ob
+00015000: 6a29 2e5f 5f6e 616d 655f 5f0a 2020 2020  j).__name__.    
+00015010: 2020 2020 6966 206f 626a 5f6e 616d 6520      if obj_name 
+00015020: 696e 205b 2766 756e 6374 696f 6e27 5d3a  in ['function']:
+00015030: 2072 6574 7572 6e20 6f62 6a5f 6e61 6d65   return obj_name
+00015040: 0a20 2020 2020 2020 2069 6620 275f 5f64  .        if '__d
+00015050: 6963 745f 5f27 2069 6e20 6f62 6a5f 6469  ict__' in obj_di
+00015060: 723a 0a20 2020 2020 2020 2020 2020 2069  r:.            i
+00015070: 6620 6f62 6a5f 6e61 6d65 203d 3d20 2774  f obj_name == 't
+00015080: 7970 6527 3a20 7265 7475 726e 2027 636c  ype': return 'cl
+00015090: 6173 736f 626a 270a 2020 2020 2020 2020  assobj'.        
+000150a0: 2020 2020 7265 7475 726e 2027 696e 7374      return 'inst
+000150b0: 616e 6365 270a 2020 2020 2020 2020 7265  ance'.        re
+000150c0: 7475 726e 206f 626a 5f6e 616d 652e 6c6f  turn obj_name.lo
+000150d0: 7765 7228 290a 0a20 2020 206e 696e 7073  wer()..    ninps
+000150e0: 3d5b 5d0a 2020 2020 666f 7220 696e 7020  =[].    for inp 
+000150f0: 696e 2069 6e70 733a 0a20 2020 2020 2020  in inps:.       
+00015100: 206e 696e 7073 3d6e 696e 7073 2b69 6e70   ninps=ninps+inp
+00015110: 2e73 706c 6974 2827 2c27 290a 2020 2020  .split(',').    
+00015120: 6c6f 6164 5f66 6169 6c65 643d 5b5d 0a20  load_failed=[]. 
+00015130: 2020 2066 6f72 2069 6e70 2069 6e20 6e69     for inp in ni
+00015140: 6e70 733a 0a20 2020 2020 2020 2023 2069  nps:.        # i
+00015150: 6620 696e 7020 6973 2046 696c 6520 7468  f inp is File th
+00015160: 656e 2061 7574 6f6d 6174 6963 616c 6c79  en automatically
+00015170: 2067 6574 2074 6865 2050 6174 6820 616e   get the Path an
+00015180: 6420 6669 6c65 206e 616d 650a 2020 2020  d file name.    
+00015190: 2020 2020 2320 616e 6420 6175 746f 6d61      # and automa
+000151a0: 7469 6361 6c6c 7920 6164 6469 6e67 2050  tically adding P
+000151b0: 6174 6820 746f 2070 6174 6820 616e 6420  ath to path and 
+000151c0: 696d 706f 7274 2074 6865 2046 696c 6520  import the File 
+000151d0: 4e61 6d65 0a20 2020 2020 2020 2069 6620  Name.        if 
+000151e0: 6f73 2e70 6174 682e 6973 6669 6c65 2869  os.path.isfile(i
+000151f0: 6e70 293a 2023 2073 7065 6369 616c 2066  np): # special f
+00015200: 696c 6520 6d6f 6475 6c65 0a20 2020 2020  ile module.     
+00015210: 2020 2020 2020 2069 7061 7468 3d6f 732e         ipath=os.
+00015220: 7061 7468 2e64 6972 6e61 6d65 2869 6e70  path.dirname(inp
+00015230: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00015240: 696c 653d 6f73 2e70 6174 682e 6261 7365  ile=os.path.base
+00015250: 6e61 6d65 2869 6e70 290a 2020 2020 2020  name(inp).      
+00015260: 2020 2020 2020 6966 696c 655f 613d 6966        ifile_a=if
+00015270: 696c 652e 7370 6c69 7428 272e 2729 0a20  ile.split('.'). 
+00015280: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+00015290: 6e28 6966 696c 655f 6129 203e 2032 3a0a  n(ifile_a) > 2:.
+000152a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000152b0: 6966 2064 6267 3a0a 2020 2020 2020 2020  if dbg:.        
+000152c0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+000152d0: 7428 272a 2a2a 204e 6f74 2073 7570 706f  t('*** Not suppo
+000152e0: 7274 207b 7d20 6669 6c65 6e61 6d65 272e  rt {} filename'.
+000152f0: 666f 726d 6174 2869 6e70 2929 0a20 2020  format(inp)).   
+00015300: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00015310: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00015320: 2020 696e 703d 6966 696c 655f 615b 305d    inp=ifile_a[0]
+00015330: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00015340: 6970 6174 6820 6e6f 7420 696e 2073 7973  ipath not in sys
+00015350: 2e70 6174 683a 0a20 2020 2020 2020 2020  .path:.         
+00015360: 2020 2020 2020 2073 7973 2e70 6174 683d         sys.path=
+00015370: 5b69 7061 7468 5d2b 7379 732e 7061 7468  [ipath]+sys.path
+00015380: 0a20 2020 2020 2020 2020 2020 206c 6f61  .            loa
+00015390: 6465 642c 6d6f 6475 6c65 3d4d 6f64 4c6f  ded,module=ModLo
+000153a0: 6164 2869 6e70 2c66 6f72 6365 3d66 6f72  ad(inp,force=for
+000153b0: 6365 2c67 6c6f 6261 6c65 6e76 3d67 6c6f  ce,globalenv=glo
+000153c0: 6261 6c65 6e76 2c75 6e6c 6f61 643d 756e  balenv,unload=un
+000153d0: 6c6f 6164 2c72 655f 6c6f 6164 3d72 655f  load,re_load=re_
+000153e0: 6c6f 6164 290a 2020 2020 2020 2020 2020  load).          
+000153f0: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
+00015400: 2020 2065 6c73 653a 2023 2043 6865 636b     else: # Check
+00015410: 204c 6f63 616c 2046 696c 650a 2020 2020   Local File.    
+00015420: 2020 2020 2020 2020 696e 705f 613d 696e          inp_a=in
+00015430: 702e 7370 6c69 7428 290a 2020 2020 2020  p.split().      
+00015440: 2020 2020 2020 696e 705f 6368 6b5f 6669        inp_chk_fi
+00015450: 6c65 3d27 7b7d 2e70 7927 2e66 6f72 6d61  le='{}.py'.forma
+00015460: 7428 696e 705f 615b 315d 2069 6620 696e  t(inp_a[1] if in
+00015470: 705f 615b 305d 2069 6e20 5b27 696d 706f  p_a[0] in ['impo
+00015480: 7274 272c 2766 726f 6d27 5d20 656c 7365  rt','from'] else
+00015490: 2069 6e70 290a 2020 2020 2020 2020 2020   inp).          
+000154a0: 2020 6966 206f 732e 7061 7468 2e69 7366    if os.path.isf
+000154b0: 696c 6528 696e 705f 6368 6b5f 6669 6c65  ile(inp_chk_file
+000154c0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000154d0: 2020 206c 6f61 6465 642c 6d6f 6475 6c65     loaded,module
+000154e0: 3d4d 6f64 4c6f 6164 2869 6e70 2c66 6f72  =ModLoad(inp,for
+000154f0: 6365 3d66 6f72 6365 2c67 6c6f 6261 6c65  ce=force,globale
+00015500: 6e76 3d67 6c6f 6261 6c65 6e76 2c75 6e6c  nv=globalenv,unl
+00015510: 6f61 643d 756e 6c6f 6164 2c72 655f 6c6f  oad=unload,re_lo
+00015520: 6164 3d72 655f 6c6f 6164 290a 2020 2020  ad=re_load).    
+00015530: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00015540: 696e 7565 0a20 2020 2020 2020 2069 6e70  inue.        inp
+00015550: 5f61 3d69 6e70 2e73 706c 6974 2829 0a20  _a=inp.split(). 
+00015560: 2020 2020 2020 2076 6572 7369 6f6e 3d4e         version=N
+00015570: 6f6e 650a 2020 2020 2020 2020 7665 725f  one.        ver_
+00015580: 636f 6d70 6172 653d 4e6f 6e65 0a20 2020  compare=None.   
+00015590: 2020 2020 2069 6620 6c65 6e28 696e 705f       if len(inp_
+000155a0: 6129 2069 6e20 5b31 2c32 5d20 616e 6420  a) in [1,2] and 
+000155b0: 696e 705f 615b 305d 2069 6e20 5b27 7265  inp_a[0] in ['re
+000155c0: 7175 6972 6527 2c27 7265 7175 6972 656d  quire','requirem
+000155d0: 656e 7427 5d3a 0a20 2020 2020 2020 2020  ent']:.         
+000155e0: 2020 2069 6620 6f73 2e70 6174 682e 6973     if os.path.is
+000155f0: 6669 6c65 2869 6e70 5f61 5b31 5d29 3a0a  file(inp_a[1]):.
 00015600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015610: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00015620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015630: 2020 2020 2020 2020 2020 2020 7665 7273              vers
-00015640: 696f 6e3d 6969 5f6c 5b31 5d0a 2020 2020  ion=ii_l[1].    
-00015650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015660: 6969 5f61 3d69 695f 6c5b 305d 2e73 706c  ii_a=ii_l[0].spl
-00015670: 6974 2827 3a27 290a 2020 2020 2020 2020  it(':').        
-00015680: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00015690: 656e 2869 695f 6129 203d 3d20 323a 0a20  en(ii_a) == 2:. 
-000156a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000156b0: 2020 2020 2020 2069 633d 496e 7374 616c         ic=Instal
-000156c0: 6c28 6969 5f61 5b31 5d2c 696e 7374 616c  l(ii_a[1],instal
-000156d0: 6c5f 6163 636f 756e 742c 7665 7273 696f  l_account,versio
-000156e0: 6e3d 7665 7273 696f 6e2c 696e 7374 616c  n=version,instal
-000156f0: 6c5f 6e61 6d65 3d69 6e73 7461 6c6c 5f6e  l_name=install_n
-00015700: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
-00015710: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00015720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015730: 2020 2020 2020 2069 633d 496e 7374 616c         ic=Instal
-00015740: 6c28 6969 5f61 5b30 5d2c 696e 7374 616c  l(ii_a[0],instal
-00015750: 6c5f 6163 636f 756e 742c 7665 7273 696f  l_account,versio
-00015760: 6e3d 7665 7273 696f 6e2c 696e 7374 616c  n=version,instal
-00015770: 6c5f 6e61 6d65 3d69 6e73 7461 6c6c 5f6e  l_name=install_n
-00015780: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
-00015790: 2020 2020 2020 2020 2069 6620 6963 3a0a           if ic:.
+00015610: 7271 3d5b 5d0a 2020 2020 2020 2020 2020  rq=[].          
+00015620: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+00015630: 696e 705f 615b 315d 2920 6173 2066 3a0a  inp_a[1]) as f:.
+00015640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015650: 2020 2020 7271 3d66 2e72 6561 6428 292e      rq=f.read().
+00015660: 7370 6c69 7428 275c 6e27 290a 2020 2020  split('\n').    
+00015670: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00015680: 6969 2069 6e20 7271 3a0a 2020 2020 2020  ii in rq:.      
+00015690: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000156a0: 206e 6f74 2069 693a 2063 6f6e 7469 6e75   not ii: continu
+000156b0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000156c0: 2020 2020 2020 6969 5f6c 3d69 692e 7370        ii_l=ii.sp
+000156d0: 6c69 7428 290a 2020 2020 2020 2020 2020  lit().          
+000156e0: 2020 2020 2020 2020 2020 7665 7273 696f            versio
+000156f0: 6e3d 4e6f 6e65 0a20 2020 2020 2020 2020  n=None.         
+00015700: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+00015710: 6e28 6969 5f6c 2920 696e 205b 322c 335d  n(ii_l) in [2,3]
+00015720: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00015730: 2020 2020 2020 2020 2020 6966 2027 3d27            if '='
+00015740: 2069 6e20 6969 5f6c 5b31 5d20 6f72 2027   in ii_l[1] or '
+00015750: 3e27 2069 6e20 6969 5f6c 5b31 5d20 6f72  >' in ii_l[1] or
+00015760: 2027 3c27 2069 6e20 6969 5f6c 5b31 5d3a   '<' in ii_l[1]:
+00015770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015780: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00015790: 6c65 6e28 6969 5f6c 2920 3d3d 2033 3a0a  len(ii_l) == 3:.
 000157a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000157b0: 2020 2020 2020 2020 6c6f 6164 6564 2c6d          loaded,m
-000157c0: 6f64 756c 653d 4d6f 644c 6f61 6428 6969  odule=ModLoad(ii
-000157d0: 5f61 5b30 5d2c 666f 7263 653d 666f 7263  _a[0],force=forc
-000157e0: 652c 676c 6f62 616c 656e 763d 676c 6f62  e,globalenv=glob
-000157f0: 616c 656e 762c 7265 5f6c 6f61 643d 7265  alenv,re_load=re
-00015800: 5f6c 6f61 6429 0a20 2020 2020 2020 2020  _load).         
-00015810: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-00015820: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00015830: 2020 2020 2020 6f6b 2c6d 6f64 756c 652c        ok,module,
-00015840: 6e61 6d65 2c63 6c61 7373 5f6e 616d 652c  name,class_name,
-00015850: 7665 7273 696f 6e2c 7379 6d62 6f6c 3d4d  version,symbol=M
-00015860: 6f64 4e61 6d65 2869 6e70 290a 2020 2020  odName(inp).    
-00015870: 2020 2020 2020 2020 6966 206f 6b20 616e          if ok an
-00015880: 6420 7665 7273 696f 6e20 616e 6420 7379  d version and sy
-00015890: 6d62 6f6c 3a0a 2020 2020 2020 2020 2020  mbol:.          
-000158a0: 2020 2020 2020 6375 725f 7665 7273 696f        cur_versio
-000158b0: 6e3d 4d6f 6456 6572 7369 6f6e 286d 6f64  n=ModVersion(mod
-000158c0: 756c 6529 0a20 2020 2020 2020 2020 2020  ule).           
-000158d0: 2020 2020 2023 4d69 736d 6174 6368 6564       #Mismatched
-000158e0: 2076 6572 7369 6f6e 206f 7220 6e6f 7420   version or not 
-000158f0: 696e 7374 616c 6c65 6420 7468 656e 2069  installed then i
-00015900: 6e73 7461 6c6c 0a20 2020 2020 2020 2020  nstall.         
-00015910: 2020 2020 2020 2069 6620 6375 725f 7665         if cur_ve
-00015920: 7273 696f 6e20 6973 204e 6f6e 6520 6f72  rsion is None or
-00015930: 2028 6375 725f 7665 7273 696f 6e20 616e   (cur_version an
-00015940: 6420 6e6f 7420 436f 6d70 5665 7273 696f  d not CompVersio
-00015950: 6e28 6375 725f 7665 7273 696f 6e2c 7379  n(cur_version,sy
-00015960: 6d62 6f6c 2c76 6572 7369 6f6e 2929 3a0a  mbol,version)):.
-00015970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015980: 2020 2020 6966 2073 796d 626f 6c20 696e      if symbol in
-00015990: 205b 273e 272c 273e 3d27 5d3a 0a20 2020   ['>','>=']:.   
-000159a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000159b0: 2020 2020 2049 6e73 7461 6c6c 286d 6f64       Install(mod
-000159c0: 756c 652c 696e 7374 616c 6c5f 6163 636f  ule,install_acco
-000159d0: 756e 743d 696e 7374 616c 6c5f 6163 636f  unt=install_acco
-000159e0: 756e 742c 7570 6772 6164 653d 5472 7565  unt,upgrade=True
-000159f0: 2c69 6e73 7461 6c6c 5f6e 616d 653d 696e  ,install_name=in
-00015a00: 7374 616c 6c5f 6e61 6d65 290a 2020 2020  stall_name).    
-00015a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015a20: 656c 6966 2073 796d 626f 6c20 696e 205b  elif symbol in [
-00015a30: 273d 3d27 5d3a 0a20 2020 2020 2020 2020  '==']:.         
-00015a40: 2020 2020 2020 2020 2020 2020 2020 2049                 I
-00015a50: 6e73 7461 6c6c 286d 6f64 756c 652c 696e  nstall(module,in
-00015a60: 7374 616c 6c5f 6163 636f 756e 743d 696e  stall_account=in
-00015a70: 7374 616c 6c5f 6163 636f 756e 742c 7570  stall_account,up
-00015a80: 6772 6164 653d 5472 7565 2c76 6572 7369  grade=True,versi
-00015a90: 6f6e 3d27 3d3d 207b 7d27 2e66 6f72 6d61  on='== {}'.forma
-00015aa0: 7428 7665 7273 696f 6e29 2c69 6e73 7461  t(version),insta
-00015ab0: 6c6c 5f6e 616d 653d 696e 7374 616c 6c5f  ll_name=install_
-00015ac0: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
-00015ad0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
-00015ae0: 796d 626f 6c20 696e 205b 273c 272c 273c  ymbol in ['<','<
-00015af0: 3d27 5d3a 0a20 2020 2020 2020 2020 2020  =']:.           
-00015b00: 2020 2020 2020 2020 2020 2020 2049 6e73               Ins
-00015b10: 7461 6c6c 286d 6f64 756c 652c 696e 7374  tall(module,inst
-00015b20: 616c 6c5f 6163 636f 756e 743d 696e 7374  all_account=inst
-00015b30: 616c 6c5f 6163 636f 756e 742c 7570 6772  all_account,upgr
-00015b40: 6164 653d 5472 7565 2c76 6572 7369 6f6e  ade=True,version
-00015b50: 3d27 7b7d 207b 7d27 2e66 6f72 6d61 7428  ='{} {}'.format(
-00015b60: 7379 6d62 6f6c 2c76 6572 7369 6f6e 292c  symbol,version),
-00015b70: 696e 7374 616c 6c5f 6e61 6d65 3d69 6e73  install_name=ins
-00015b80: 7461 6c6c 5f6e 616d 6529 0a0a 2020 2020  tall_name)..    
-00015b90: 2020 2020 234c 6f61 6420 6d6f 6475 6c65      #Load module
-00015ba0: 0a20 2020 2020 2020 206c 6f61 6465 642c  .        loaded,
-00015bb0: 6d6f 6475 6c65 3d4d 6f64 4c6f 6164 2869  module=ModLoad(i
-00015bc0: 6e70 2c66 6f72 6365 3d66 6f72 6365 2c67  np,force=force,g
-00015bd0: 6c6f 6261 6c65 6e76 3d67 6c6f 6261 6c65  lobalenv=globale
-00015be0: 6e76 2c75 6e6c 6f61 643d 756e 6c6f 6164  nv,unload=unload
-00015bf0: 2c72 655f 6c6f 6164 3d72 655f 6c6f 6164  ,re_load=re_load
-00015c00: 290a 2020 2020 2020 2020 6966 206c 6f61  ).        if loa
-00015c10: 6465 6420 3d3d 2032 3a20 2375 6e6c 6f61  ded == 2: #unloa
-00015c20: 6465 640a 2020 2020 2020 2020 2020 2020  ded.            
-00015c30: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-00015c40: 2069 6620 6c6f 6164 6564 203d 3d20 313a   if loaded == 1:
-00015c50: 2023 4e6f 7420 666f 756e 642f 696e 7374   #Not found/inst
-00015c60: 616c 6c65 6420 4d6f 6475 6c65 0a20 2020  alled Module.   
-00015c70: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00015c80: 4973 4e6f 6e65 2872 6571 7569 7265 6d65  IsNone(requireme
-00015c90: 6e74 7329 3a0a 2020 2020 2020 2020 2020  nts):.          
-00015ca0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00015cb0: 6e63 6528 7265 7175 6972 656d 656e 7473  nce(requirements
-00015cc0: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
-00015cd0: 2020 2020 2020 2020 2020 2072 6571 7569             requi
-00015ce0: 7265 6d65 6e74 733d 7265 7175 6972 656d  rements=requirem
-00015cf0: 656e 7473 2e73 706c 6974 2827 2c27 290a  ents.split(',').
-00015d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015d10: 6966 2069 7369 6e73 7461 6e63 6528 7265  if isinstance(re
-00015d20: 7175 6972 656d 656e 7473 2c28 6c69 7374  quirements,(list
-00015d30: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
-00015d40: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00015d50: 2069 2069 6e20 7265 7175 6972 656d 656e   i in requiremen
-00015d60: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-00015d70: 2020 2020 2020 2020 2020 2020 6969 5f6c              ii_l
-00015d80: 3d69 2e73 706c 6974 2829 0a20 2020 2020  =i.split().     
-00015d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015da0: 2020 2076 6572 7369 6f6e 3d4e 6f6e 650a     version=None.
-00015db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015dc0: 2020 2020 2020 2020 7570 6772 6164 653d          upgrade=
-00015dd0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
-00015de0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00015df0: 206c 656e 2869 695f 6c29 203d 3d20 333a   len(ii_l) == 3:
-00015e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015e10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00015e20: 6969 5f6c 5b31 5d20 696e 205b 273d 272c  ii_l[1] in ['=',
-00015e30: 273d 3d27 5d3a 0a20 2020 2020 2020 2020  '==']:.         
-00015e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015e50: 2020 2020 2020 2075 7067 7261 6465 3d54         upgrade=T
-00015e60: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-00015e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015e80: 2020 2020 7665 7273 696f 6e3d 273d 3d20      version='== 
-00015e90: 272b 6969 5f6c 5b32 5d0a 2020 2020 2020  '+ii_l[2].      
-00015ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015eb0: 2020 2020 2020 656c 6966 2069 695f 6c5b        elif ii_l[
-00015ec0: 315d 2069 6e20 5b27 3e27 2c27 3e3d 275d  1] in ['>','>=']
-00015ed0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00015ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015ef0: 2020 7570 6772 6164 653d 5472 7565 0a20    upgrade=True. 
-00015f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f10: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00015f20: 6969 5f6c 5b31 5d20 696e 205b 273c 272c  ii_l[1] in ['<',
-00015f30: 273c 3d27 5d3a 0a20 2020 2020 2020 2020  '<=']:.         
-00015f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f50: 2020 2020 2020 2075 7067 7261 6465 3d54         upgrade=T
-00015f60: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+000157b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000157c0: 7665 7273 696f 6e3d 6969 5f6c 5b31 5d2b  version=ii_l[1]+
+000157d0: 6969 5f6c 5b32 5d0a 2020 2020 2020 2020  ii_l[2].        
+000157e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000157f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00015800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015810: 2020 2020 2020 2020 2020 7665 7273 696f            versio
+00015820: 6e3d 6969 5f6c 5b31 5d0a 2020 2020 2020  n=ii_l[1].      
+00015830: 2020 2020 2020 2020 2020 2020 2020 6969                ii
+00015840: 5f61 3d69 695f 6c5b 305d 2e73 706c 6974  _a=ii_l[0].split
+00015850: 2827 3a27 290a 2020 2020 2020 2020 2020  (':').          
+00015860: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+00015870: 2869 695f 6129 203d 3d20 323a 0a20 2020  (ii_a) == 2:.   
+00015880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015890: 2020 2020 2069 633d 496e 7374 616c 6c28       ic=Install(
+000158a0: 6969 5f61 5b31 5d2c 696e 7374 616c 6c5f  ii_a[1],install_
+000158b0: 6163 636f 756e 742c 7665 7273 696f 6e3d  account,version=
+000158c0: 7665 7273 696f 6e2c 696e 7374 616c 6c5f  version,install_
+000158d0: 6e61 6d65 3d69 6e73 7461 6c6c 5f6e 616d  name=install_nam
+000158e0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+000158f0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00015900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015910: 2020 2020 2069 633d 496e 7374 616c 6c28       ic=Install(
+00015920: 6969 5f61 5b30 5d2c 696e 7374 616c 6c5f  ii_a[0],install_
+00015930: 6163 636f 756e 742c 7665 7273 696f 6e3d  account,version=
+00015940: 7665 7273 696f 6e2c 696e 7374 616c 6c5f  version,install_
+00015950: 6e61 6d65 3d69 6e73 7461 6c6c 5f6e 616d  name=install_nam
+00015960: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00015970: 2020 2020 2020 2069 6620 6963 3a0a 2020         if ic:.  
+00015980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015990: 2020 2020 2020 6c6f 6164 6564 2c6d 6f64        loaded,mod
+000159a0: 756c 653d 4d6f 644c 6f61 6428 6969 5f61  ule=ModLoad(ii_a
+000159b0: 5b30 5d2c 666f 7263 653d 666f 7263 652c  [0],force=force,
+000159c0: 676c 6f62 616c 656e 763d 676c 6f62 616c  globalenv=global
+000159d0: 656e 762c 7265 5f6c 6f61 643d 7265 5f6c  env,re_load=re_l
+000159e0: 6f61 6429 0a20 2020 2020 2020 2020 2020  oad).           
+000159f0: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+00015a00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00015a10: 2020 2020 6f6b 2c6d 6f64 756c 652c 6e61      ok,module,na
+00015a20: 6d65 2c63 6c61 7373 5f6e 616d 652c 7665  me,class_name,ve
+00015a30: 7273 696f 6e2c 7379 6d62 6f6c 3d4d 6f64  rsion,symbol=Mod
+00015a40: 4e61 6d65 2869 6e70 290a 2020 2020 2020  Name(inp).      
+00015a50: 2020 2020 2020 6966 206f 6b20 616e 6420        if ok and 
+00015a60: 7665 7273 696f 6e20 616e 6420 7379 6d62  version and symb
+00015a70: 6f6c 3a0a 2020 2020 2020 2020 2020 2020  ol:.            
+00015a80: 2020 2020 6375 725f 7665 7273 696f 6e3d      cur_version=
+00015a90: 4d6f 6456 6572 7369 6f6e 286d 6f64 756c  ModVersion(modul
+00015aa0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00015ab0: 2020 2023 4d69 736d 6174 6368 6564 2076     #Mismatched v
+00015ac0: 6572 7369 6f6e 206f 7220 6e6f 7420 696e  ersion or not in
+00015ad0: 7374 616c 6c65 6420 7468 656e 2069 6e73  stalled then ins
+00015ae0: 7461 6c6c 0a20 2020 2020 2020 2020 2020  tall.           
+00015af0: 2020 2020 2069 6620 6375 725f 7665 7273       if cur_vers
+00015b00: 696f 6e20 6973 204e 6f6e 6520 6f72 2028  ion is None or (
+00015b10: 6375 725f 7665 7273 696f 6e20 616e 6420  cur_version and 
+00015b20: 6e6f 7420 436f 6d70 5665 7273 696f 6e28  not CompVersion(
+00015b30: 6375 725f 7665 7273 696f 6e2c 7379 6d62  cur_version,symb
+00015b40: 6f6c 2c76 6572 7369 6f6e 2929 3a0a 2020  ol,version)):.  
+00015b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015b60: 2020 6966 2073 796d 626f 6c20 696e 205b    if symbol in [
+00015b70: 273e 272c 273e 3d27 5d3a 0a20 2020 2020  '>','>=']:.     
+00015b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015b90: 2020 2049 6e73 7461 6c6c 286d 6f64 756c     Install(modul
+00015ba0: 652c 696e 7374 616c 6c5f 6163 636f 756e  e,install_accoun
+00015bb0: 743d 696e 7374 616c 6c5f 6163 636f 756e  t=install_accoun
+00015bc0: 742c 7570 6772 6164 653d 5472 7565 2c69  t,upgrade=True,i
+00015bd0: 6e73 7461 6c6c 5f6e 616d 653d 696e 7374  nstall_name=inst
+00015be0: 616c 6c5f 6e61 6d65 290a 2020 2020 2020  all_name).      
+00015bf0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00015c00: 6966 2073 796d 626f 6c20 696e 205b 273d  if symbol in ['=
+00015c10: 3d27 5d3a 0a20 2020 2020 2020 2020 2020  =']:.           
+00015c20: 2020 2020 2020 2020 2020 2020 2049 6e73               Ins
+00015c30: 7461 6c6c 286d 6f64 756c 652c 696e 7374  tall(module,inst
+00015c40: 616c 6c5f 6163 636f 756e 743d 696e 7374  all_account=inst
+00015c50: 616c 6c5f 6163 636f 756e 742c 7570 6772  all_account,upgr
+00015c60: 6164 653d 5472 7565 2c76 6572 7369 6f6e  ade=True,version
+00015c70: 3d27 3d3d 207b 7d27 2e66 6f72 6d61 7428  ='== {}'.format(
+00015c80: 7665 7273 696f 6e29 2c69 6e73 7461 6c6c  version),install
+00015c90: 5f6e 616d 653d 696e 7374 616c 6c5f 6e61  _name=install_na
+00015ca0: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
+00015cb0: 2020 2020 2020 2020 656c 6966 2073 796d          elif sym
+00015cc0: 626f 6c20 696e 205b 273c 272c 273c 3d27  bol in ['<','<='
+00015cd0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00015ce0: 2020 2020 2020 2020 2020 2049 6e73 7461             Insta
+00015cf0: 6c6c 286d 6f64 756c 652c 696e 7374 616c  ll(module,instal
+00015d00: 6c5f 6163 636f 756e 743d 696e 7374 616c  l_account=instal
+00015d10: 6c5f 6163 636f 756e 742c 7570 6772 6164  l_account,upgrad
+00015d20: 653d 5472 7565 2c76 6572 7369 6f6e 3d27  e=True,version='
+00015d30: 7b7d 207b 7d27 2e66 6f72 6d61 7428 7379  {} {}'.format(sy
+00015d40: 6d62 6f6c 2c76 6572 7369 6f6e 292c 696e  mbol,version),in
+00015d50: 7374 616c 6c5f 6e61 6d65 3d69 6e73 7461  stall_name=insta
+00015d60: 6c6c 5f6e 616d 6529 0a0a 2020 2020 2020  ll_name)..      
+00015d70: 2020 234c 6f61 6420 6d6f 6475 6c65 0a20    #Load module. 
+00015d80: 2020 2020 2020 206c 6f61 6465 642c 6d6f         loaded,mo
+00015d90: 6475 6c65 3d4d 6f64 4c6f 6164 2869 6e70  dule=ModLoad(inp
+00015da0: 2c66 6f72 6365 3d66 6f72 6365 2c67 6c6f  ,force=force,glo
+00015db0: 6261 6c65 6e76 3d67 6c6f 6261 6c65 6e76  balenv=globalenv
+00015dc0: 2c75 6e6c 6f61 643d 756e 6c6f 6164 2c72  ,unload=unload,r
+00015dd0: 655f 6c6f 6164 3d72 655f 6c6f 6164 290a  e_load=re_load).
+00015de0: 2020 2020 2020 2020 6966 206c 6f61 6465          if loade
+00015df0: 6420 3d3d 2032 3a20 2375 6e6c 6f61 6465  d == 2: #unloade
+00015e00: 640a 2020 2020 2020 2020 2020 2020 636f  d.            co
+00015e10: 6e74 696e 7565 0a20 2020 2020 2020 2069  ntinue.        i
+00015e20: 6620 6c6f 6164 6564 203d 3d20 313a 2023  f loaded == 1: #
+00015e30: 4e6f 7420 666f 756e 642f 696e 7374 616c  Not found/instal
+00015e40: 6c65 6420 4d6f 6475 6c65 0a20 2020 2020  led Module.     
+00015e50: 2020 2020 2020 2069 6620 6e6f 7420 4973         if not Is
+00015e60: 4e6f 6e65 2872 6571 7569 7265 6d65 6e74  None(requirement
+00015e70: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+00015e80: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00015e90: 6528 7265 7175 6972 656d 656e 7473 2c73  e(requirements,s
+00015ea0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+00015eb0: 2020 2020 2020 2020 2072 6571 7569 7265           require
+00015ec0: 6d65 6e74 733d 7265 7175 6972 656d 656e  ments=requiremen
+00015ed0: 7473 2e73 706c 6974 2827 2c27 290a 2020  ts.split(',').  
+00015ee0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00015ef0: 2069 7369 6e73 7461 6e63 6528 7265 7175   isinstance(requ
+00015f00: 6972 656d 656e 7473 2c28 6c69 7374 2c74  irements,(list,t
+00015f10: 7570 6c65 2929 3a0a 2020 2020 2020 2020  uple)):.        
+00015f20: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+00015f30: 2069 6e20 7265 7175 6972 656d 656e 7473   in requirements
+00015f40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00015f50: 2020 2020 2020 2020 2020 6969 5f6c 3d69            ii_l=i
+00015f60: 2e73 706c 6974 2829 0a20 2020 2020 2020  .split().       
 00015f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f80: 2020 2020 7665 7273 696f 6e3d 6969 5f6c      version=ii_l
-00015f90: 5b69 5d2b 2720 272b 6969 5f6c 5b32 5d0a  [i]+' '+ii_l[2].
-00015fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015fb0: 2020 2020 2020 2020 6969 5f61 3d69 695f          ii_a=ii_
-00015fc0: 6c5b 305d 2e73 706c 6974 2827 3a27 290a  l[0].split(':').
-00015fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015fe0: 2020 2020 2020 2020 6966 206c 656e 2869          if len(i
-00015ff0: 695f 6129 203d 3d20 323a 0a20 2020 2020  i_a) == 2:.     
-00016000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016010: 2020 2020 2020 2069 633d 496e 7374 616c         ic=Instal
-00016020: 6c28 6969 5f61 5b31 5d2c 696e 7374 616c  l(ii_a[1],instal
-00016030: 6c5f 6163 636f 756e 742c 7665 7273 696f  l_account,versio
-00016040: 6e3d 7665 7273 696f 6e2c 7570 6772 6164  n=version,upgrad
-00016050: 653d 7570 6772 6164 652c 696e 7374 616c  e=upgrade,instal
-00016060: 6c5f 6e61 6d65 3d69 6e73 7461 6c6c 5f6e  l_name=install_n
-00016070: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
-00016080: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00016090: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000160a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000160b0: 633d 496e 7374 616c 6c28 6969 5f61 5b30  c=Install(ii_a[0
-000160c0: 5d2c 696e 7374 616c 6c5f 6163 636f 756e  ],install_accoun
-000160d0: 742c 7665 7273 696f 6e3d 7665 7273 696f  t,version=versio
-000160e0: 6e2c 7570 6772 6164 653d 7570 6772 6164  n,upgrade=upgrad
-000160f0: 652c 696e 7374 616c 6c5f 6e61 6d65 3d69  e,install_name=i
-00016100: 6e73 7461 6c6c 5f6e 616d 6529 0a20 2020  nstall_name).   
-00016110: 2020 2020 2020 2020 2023 496e 7374 616c           #Instal
-00016120: 6c20 6175 746f 5f69 6e73 7461 6c6c 2061  l auto_install a
-00016130: 6e64 206e 6f74 2069 6e73 7461 6c6c 6564  nd not installed
-00016140: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-00016150: 6620 6175 746f 5f69 6e73 7461 6c6c 2061  f auto_install a
-00016160: 6e64 2049 6e73 7461 6c6c 286d 6f64 756c  nd Install(modul
-00016170: 652c 696e 7374 616c 6c5f 6163 636f 756e  e,install_accoun
-00016180: 742c 696e 7374 616c 6c5f 6e61 6d65 3d69  t,install_name=i
-00016190: 6e73 7461 6c6c 5f6e 616d 6529 3a0a 2020  nstall_name):.  
-000161a0: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
-000161b0: 6164 6564 2c6d 6f64 756c 653d 4d6f 644c  aded,module=ModL
-000161c0: 6f61 6428 696e 702c 666f 7263 653d 666f  oad(inp,force=fo
-000161d0: 7263 652c 676c 6f62 616c 656e 763d 676c  rce,globalenv=gl
-000161e0: 6f62 616c 656e 762c 7265 5f6c 6f61 643d  obalenv,re_load=
-000161f0: 7265 5f6c 6f61 6429 0a20 2020 2020 2020  re_load).       
-00016200: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00016210: 2020 2020 2020 2020 2020 2069 6620 6462             if db
-00016220: 673a 0a20 2020 2020 2020 2020 2020 2020  g:.             
-00016230: 2020 2020 2020 2070 7269 6e74 2827 2a2a         print('**
-00016240: 2a20 496d 706f 7274 2045 7272 6f72 206f  * Import Error o
-00016250: 7220 4e65 6564 2069 6e73 7461 6c6c 2077  r Need install w
-00016260: 6974 6820 5355 444f 206f 7220 524f 4f54  ith SUDO or ROOT
-00016270: 206f 7220 2d2d 7573 6572 2070 6572 6d69   or --user permi
-00016280: 7373 696f 6e27 290a 2020 2020 2020 2020  ssion').        
-00016290: 2020 2020 2020 2020 6c6f 6164 5f66 6169          load_fai
-000162a0: 6c65 642e 6170 7065 6e64 2869 6e70 290a  led.append(inp).
-000162b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000162c0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-000162d0: 2069 6620 6c6f 6164 6564 206e 6f74 2069   if loaded not i
-000162e0: 6e20 5b4e 6f6e 652c 302c 315d 3a20 2320  n [None,0,1]: # 
-000162f0: 696d 706f 7274 2077 696c 6463 6172 640a  import wildcard.
-00016300: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00016310: 6969 2069 6e20 6c6f 6164 6564 2e5f 5f64  ii in loaded.__d
-00016320: 6963 745f 5f2e 6b65 7973 2829 3a0a 2020  ict__.keys():.  
-00016330: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00016340: 2069 6920 6e6f 7420 696e 205b 275f 5f6e   ii not in ['__n
-00016350: 616d 655f 5f27 2c27 5f5f 646f 635f 5f27  ame__','__doc__'
-00016360: 2c27 5f5f 7061 636b 6167 655f 5f27 2c27  ,'__package__','
-00016370: 5f5f 6c6f 6164 6572 5f5f 272c 275f 5f73  __loader__','__s
-00016380: 7065 635f 5f27 2c27 5f5f 6669 6c65 5f5f  pec__','__file__
-00016390: 272c 275f 5f63 6163 6865 645f 5f27 2c27  ','__cached__','
-000163a0: 5f5f 6275 696c 7469 6e73 5f5f 275d 3a0a  __builtins__']:.
-000163b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000163c0: 2020 2020 6966 2069 6920 696e 2067 6c6f      if ii in glo
-000163d0: 6261 6c65 6e76 3a0a 2020 2020 2020 2020  balenv:.        
-000163e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000163f0: 2320 7377 6170 2053 616d 6520 4e61 6d65  # swap Same Name
-00016400: 2062 6574 7765 656e 206d 6f64 756c 6528   between module(
-00016410: 6d79 206d 6f64 756c 6520 6f66 2074 6865  my module of the
-00016420: 2077 696c 6420 6361 7264 2920 616e 6420   wild card) and 
-00016430: 636c 6173 7328 7769 6c64 2063 6172 6420  class(wild card 
-00016440: 696d 706f 7274 2063 6c61 7373 206e 616d  import class nam
-00016450: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00016460: 2020 2020 2020 2020 2020 2069 6620 6969             if ii
-00016470: 2069 6e20 6c6f 6164 6564 2e5f 5f64 6963   in loaded.__dic
-00016480: 745f 5f2e 6b65 7973 2829 3a0a 2020 2020  t__.keys():.    
-00016490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000164a0: 2020 2020 2020 2020 6966 2043 6865 636b          if Check
-000164b0: 4f62 6a28 676c 6f62 616c 656e 765b 6969  Obj(globalenv[ii
-000164c0: 5d29 203d 3d20 276d 6f64 756c 6527 2061  ]) == 'module' a
-000164d0: 6e64 2043 6865 636b 4f62 6a28 6c6f 6164  nd CheckObj(load
-000164e0: 6564 2e5f 5f64 6963 745f 5f5b 6969 5d29  ed.__dict__[ii])
-000164f0: 203d 3d20 2763 6c61 7373 6f62 6a27 3a0a   == 'classobj':.
-00016500: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00016510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016520: 2054 4d50 3d67 6c6f 6261 6c65 6e76 5b69   TMP=globalenv[i
-00016530: 695d 2023 206d 6f76 6520 746f 206c 6f63  i] # move to loc
-00016540: 616c 2074 656d 706f 7261 7920 0a20 2020  al temporay .   
-00016550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016560: 2020 2020 2020 2020 2020 2020 2067 6c6f               glo
-00016570: 6261 6c65 6e76 5b69 695d 3d6c 6f61 6465  balenv[ii]=loade
-00016580: 642e 5f5f 6469 6374 5f5f 5b69 695d 0a20  d.__dict__[ii]. 
+00015f80: 2076 6572 7369 6f6e 3d4e 6f6e 650a 2020   version=None.  
+00015f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015fa0: 2020 2020 2020 7570 6772 6164 653d 4661        upgrade=Fa
+00015fb0: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
+00015fc0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00015fd0: 656e 2869 695f 6c29 203d 3d20 333a 0a20  en(ii_l) == 3:. 
+00015fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ff0: 2020 2020 2020 2020 2020 2069 6620 6969             if ii
+00016000: 5f6c 5b31 5d20 696e 205b 273d 272c 273d  _l[1] in ['=','=
+00016010: 3d27 5d3a 0a20 2020 2020 2020 2020 2020  =']:.           
+00016020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016030: 2020 2020 2075 7067 7261 6465 3d54 7275       upgrade=Tru
+00016040: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00016050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016060: 2020 7665 7273 696f 6e3d 273d 3d20 272b    version='== '+
+00016070: 6969 5f6c 5b32 5d0a 2020 2020 2020 2020  ii_l[2].        
+00016080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016090: 2020 2020 656c 6966 2069 695f 6c5b 315d      elif ii_l[1]
+000160a0: 2069 6e20 5b27 3e27 2c27 3e3d 275d 3a0a   in ['>','>=']:.
+000160b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000160c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000160d0: 7570 6772 6164 653d 5472 7565 0a20 2020  upgrade=True.   
+000160e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000160f0: 2020 2020 2020 2020 2065 6c69 6620 6969           elif ii
+00016100: 5f6c 5b31 5d20 696e 205b 273c 272c 273c  _l[1] in ['<','<
+00016110: 3d27 5d3a 0a20 2020 2020 2020 2020 2020  =']:.           
+00016120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016130: 2020 2020 2075 7067 7261 6465 3d54 7275       upgrade=Tru
+00016140: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00016150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016160: 2020 7665 7273 696f 6e3d 6969 5f6c 5b69    version=ii_l[i
+00016170: 5d2b 2720 272b 6969 5f6c 5b32 5d0a 2020  ]+' '+ii_l[2].  
+00016180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016190: 2020 2020 2020 6969 5f61 3d69 695f 6c5b        ii_a=ii_l[
+000161a0: 305d 2e73 706c 6974 2827 3a27 290a 2020  0].split(':').  
+000161b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000161c0: 2020 2020 2020 6966 206c 656e 2869 695f        if len(ii_
+000161d0: 6129 203d 3d20 323a 0a20 2020 2020 2020  a) == 2:.       
+000161e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000161f0: 2020 2020 2069 633d 496e 7374 616c 6c28       ic=Install(
+00016200: 6969 5f61 5b31 5d2c 696e 7374 616c 6c5f  ii_a[1],install_
+00016210: 6163 636f 756e 742c 7665 7273 696f 6e3d  account,version=
+00016220: 7665 7273 696f 6e2c 7570 6772 6164 653d  version,upgrade=
+00016230: 7570 6772 6164 652c 696e 7374 616c 6c5f  upgrade,install_
+00016240: 6e61 6d65 3d69 6e73 7461 6c6c 5f6e 616d  name=install_nam
+00016250: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00016260: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00016270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016280: 2020 2020 2020 2020 2020 2020 2069 633d               ic=
+00016290: 496e 7374 616c 6c28 6969 5f61 5b30 5d2c  Install(ii_a[0],
+000162a0: 696e 7374 616c 6c5f 6163 636f 756e 742c  install_account,
+000162b0: 7665 7273 696f 6e3d 7665 7273 696f 6e2c  version=version,
+000162c0: 7570 6772 6164 653d 7570 6772 6164 652c  upgrade=upgrade,
+000162d0: 696e 7374 616c 6c5f 6e61 6d65 3d69 6e73  install_name=ins
+000162e0: 7461 6c6c 5f6e 616d 6529 0a20 2020 2020  tall_name).     
+000162f0: 2020 2020 2020 2023 496e 7374 616c 6c20         #Install 
+00016300: 6175 746f 5f69 6e73 7461 6c6c 2061 6e64  auto_install and
+00016310: 206e 6f74 2069 6e73 7461 6c6c 6564 0a20   not installed. 
+00016320: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00016330: 6175 746f 5f69 6e73 7461 6c6c 2061 6e64  auto_install and
+00016340: 2049 6e73 7461 6c6c 286d 6f64 756c 652c   Install(module,
+00016350: 696e 7374 616c 6c5f 6163 636f 756e 742c  install_account,
+00016360: 696e 7374 616c 6c5f 6e61 6d65 3d69 6e73  install_name=ins
+00016370: 7461 6c6c 5f6e 616d 6529 3a0a 2020 2020  tall_name):.    
+00016380: 2020 2020 2020 2020 2020 2020 6c6f 6164              load
+00016390: 6564 2c6d 6f64 756c 653d 4d6f 644c 6f61  ed,module=ModLoa
+000163a0: 6428 696e 702c 666f 7263 653d 666f 7263  d(inp,force=forc
+000163b0: 652c 676c 6f62 616c 656e 763d 676c 6f62  e,globalenv=glob
+000163c0: 616c 656e 762c 7265 5f6c 6f61 643d 7265  alenv,re_load=re
+000163d0: 5f6c 6f61 6429 0a20 2020 2020 2020 2020  _load).         
+000163e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000163f0: 2020 2020 2020 2020 2069 6620 6462 673a           if dbg:
+00016400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016410: 2020 2020 2070 7269 6e74 2827 2a2a 2a20       print('*** 
+00016420: 496d 706f 7274 2045 7272 6f72 206f 7220  Import Error or 
+00016430: 4e65 6564 2069 6e73 7461 6c6c 2077 6974  Need install wit
+00016440: 6820 5355 444f 206f 7220 524f 4f54 206f  h SUDO or ROOT o
+00016450: 7220 2d2d 7573 6572 2070 6572 6d69 7373  r --user permiss
+00016460: 696f 6e27 290a 2020 2020 2020 2020 2020  ion').          
+00016470: 2020 2020 2020 6c6f 6164 5f66 6169 6c65        load_faile
+00016480: 642e 6170 7065 6e64 2869 6e70 290a 2020  d.append(inp).  
+00016490: 2020 2020 2020 2020 2020 2020 2020 636f                co
+000164a0: 6e74 696e 7565 0a20 2020 2020 2020 2069  ntinue.        i
+000164b0: 6620 6c6f 6164 6564 206e 6f74 2069 6e20  f loaded not in 
+000164c0: 5b4e 6f6e 652c 302c 315d 3a20 2320 696d  [None,0,1]: # im
+000164d0: 706f 7274 2077 696c 6463 6172 640a 2020  port wildcard.  
+000164e0: 2020 2020 2020 2020 2020 666f 7220 6969            for ii
+000164f0: 2069 6e20 6c6f 6164 6564 2e5f 5f64 6963   in loaded.__dic
+00016500: 745f 5f2e 6b65 7973 2829 3a0a 2020 2020  t__.keys():.    
+00016510: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00016520: 6920 6e6f 7420 696e 205b 275f 5f6e 616d  i not in ['__nam
+00016530: 655f 5f27 2c27 5f5f 646f 635f 5f27 2c27  e__','__doc__','
+00016540: 5f5f 7061 636b 6167 655f 5f27 2c27 5f5f  __package__','__
+00016550: 6c6f 6164 6572 5f5f 272c 275f 5f73 7065  loader__','__spe
+00016560: 635f 5f27 2c27 5f5f 6669 6c65 5f5f 272c  c__','__file__',
+00016570: 275f 5f63 6163 6865 645f 5f27 2c27 5f5f  '__cached__','__
+00016580: 6275 696c 7469 6e73 5f5f 275d 3a0a 2020  builtins__']:.  
 00016590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000165a0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000165b0: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-000165c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000165d0: 6966 206e 6f74 2066 6f72 6365 3a20 636f  if not force: co
-000165e0: 6e74 696e 7565 2023 204e 6f74 2066 6f72  ntinue # Not for
-000165f0: 6365 2074 6865 6e20 6967 6e6f 7265 2073  ce then ignore s
-00016600: 616d 6520 6e61 6d65 0a20 2020 2020 2020  ame name.       
-00016610: 2020 2020 2020 2020 2020 2020 2067 6c6f               glo
-00016620: 6261 6c65 6e76 5b69 695d 3d6c 6f61 6465  balenv[ii]=loade
-00016630: 642e 5f5f 6469 6374 5f5f 5b69 695d 0a20  d.__dict__[ii]. 
-00016640: 2020 2072 6574 7572 6e20 6c6f 6164 5f66     return load_f
-00016650: 6169 6c65 640a 0a64 6566 204d 6574 686f  ailed..def Metho
-00016660: 6449 6e43 6c61 7373 2863 6c61 7373 5f6e  dInClass(class_n
-00016670: 616d 6529 3a0a 2020 2020 2727 270a 2020  ame):.    '''.  
-00016680: 2020 4765 7420 4d65 7468 6f64 206c 6973    Get Method lis
-00016690: 7420 696e 2043 6c61 7373 0a20 2020 2027  t in Class.    '
-000166a0: 2727 0a20 2020 2072 6574 3d64 6972 2863  ''.    ret=dir(c
-000166b0: 6c61 7373 5f6e 616d 6529 0a20 2020 2069  lass_name).    i
-000166c0: 6620 6861 7361 7474 7228 636c 6173 735f  f hasattr(class_
-000166d0: 6e61 6d65 2c27 5f5f 6261 7365 735f 5f27  name,'__bases__'
-000166e0: 293a 0a20 2020 2020 2020 2066 6f72 2062  ):.        for b
-000166f0: 6173 6520 696e 2063 6c61 7373 5f6e 616d  ase in class_nam
-00016700: 652e 5f5f 6261 7365 735f 5f3a 0a20 2020  e.__bases__:.   
-00016710: 2020 2020 2020 2020 2072 6574 3d72 6574           ret=ret
-00016720: 2b4d 6574 686f 6449 6e43 6c61 7373 2862  +MethodInClass(b
-00016730: 6173 6529 0a20 2020 2072 6574 7572 6e20  ase).    return 
-00016740: 7265 740a 0a64 6566 204f 626a 496e 666f  ret..def ObjInfo
-00016750: 286f 626a 293a 0a20 2020 2027 2727 0a20  (obj):.    '''. 
-00016760: 2020 2047 6574 206f 626a 6563 7420 696e     Get object in
-00016770: 666f 726d 6174 696f 6e20 3a20 7479 7065  formation : type
-00016780: 2c20 6e61 6d65 2c20 6d65 7468 6f64 206c  , name, method l
-00016790: 6973 742c 2070 6174 682c 206d 6f64 756c  ist, path, modul
-000167a0: 655f 6e61 6d65 2c20 6d6f 6475 6c65 5f76  e_name, module_v
-000167b0: 6572 7369 6f6e 2c20 6d6f 6475 6c65 0a20  ersion, module. 
-000167c0: 2020 2027 2727 0a20 2020 2072 743d 7b7d     '''.    rt={}
-000167d0: 0a20 2020 2072 745b 2774 7970 6527 5d3d  .    rt['type']=
-000167e0: 7479 7065 286f 626a 292e 5f5f 6e61 6d65  type(obj).__name
-000167f0: 5f5f 0a20 2020 2072 745b 276e 616d 6527  __.    rt['name'
-00016800: 5d3d 6f62 6a2e 5f5f 6e61 6d65 5f5f 0a20  ]=obj.__name__. 
-00016810: 2020 2072 745b 276d 6574 686f 6473 275d     rt['methods']
-00016820: 3d4d 6574 686f 6449 6e43 6c61 7373 286f  =MethodInClass(o
-00016830: 626a 290a 2020 2020 6966 2072 745b 2774  bj).    if rt['t
-00016840: 7970 6527 5d20 696e 205b 276d 6f64 756c  ype'] in ['modul
-00016850: 6527 5d3a 0a20 2020 2020 2020 2072 745b  e']:.        rt[
-00016860: 2770 6174 6827 5d3d 6f62 6a2e 5f5f 7061  'path']=obj.__pa
-00016870: 7468 5f5f 0a20 2020 2020 2020 2072 745b  th__.        rt[
-00016880: 2776 6572 7369 6f6e 275d 3d4d 6f64 5665  'version']=ModVe
-00016890: 7273 696f 6e28 7274 5b27 6e61 6d65 275d  rsion(rt['name']
-000168a0: 290a 2020 2020 2020 2020 7274 5b27 6d6f  ).        rt['mo
-000168b0: 6475 6c65 5f6e 616d 6527 5d3d 6f62 6a2e  dule_name']=obj.
-000168c0: 5f5f 6e61 6d65 5f5f 0a20 2020 2020 2020  __name__.       
-000168d0: 2072 745b 276d 6f64 756c 6527 5d3d 6f62   rt['module']=ob
-000168e0: 6a0a 2020 2020 656c 6966 2072 745b 2774  j.    elif rt['t
-000168f0: 7970 6527 5d20 696e 205b 2766 756e 6374  ype'] in ['funct
-00016900: 696f 6e27 5d3a 0a20 2020 2020 2020 2072  ion']:.        r
-00016910: 745b 2770 6174 6827 5d3d 6f73 2e70 6174  t['path']=os.pat
-00016920: 682e 6162 7370 6174 6828 696e 7370 6563  h.abspath(inspec
-00016930: 742e 6765 7466 696c 6528 6f62 6a29 290a  t.getfile(obj)).
-00016940: 2020 2020 2020 2020 7274 5b27 6d6f 6475          rt['modu
-00016950: 6c65 275d 3d69 6e73 7065 6374 2e67 6574  le']=inspect.get
-00016960: 6d6f 6475 6c65 286f 626a 290a 2020 2020  module(obj).    
-00016970: 2020 2020 7274 5b27 6d6f 6475 6c65 5f6e      rt['module_n
-00016980: 616d 6527 5d3d 7274 5b27 6d6f 6475 6c65  ame']=rt['module
-00016990: 275d 2e5f 5f6e 616d 655f 5f0a 2020 2020  '].__name__.    
-000169a0: 2020 2020 7274 5b27 6d6f 6475 6c65 5f76      rt['module_v
-000169b0: 6572 7369 6f6e 275d 3d4d 6f64 5665 7273  ersion']=ModVers
-000169c0: 696f 6e28 7274 5b27 6d6f 6475 6c65 5f6e  ion(rt['module_n
-000169d0: 616d 6527 5d29 0a23 2020 2020 2020 2020  ame']).#        
-000169e0: 7274 5b27 6d65 7468 6f64 7327 5d3d 5b72  rt['methods']=[r
-000169f0: 745b 276d 6f64 756c 655f 6e61 6d65 275d  t['module_name']
-00016a00: 5d0a 2020 2020 656c 6966 2072 745b 2774  ].    elif rt['t
-00016a10: 7970 6527 5d20 696e 205b 2763 6c61 7373  ype'] in ['class
-00016a20: 275d 3a0a 2020 2020 2020 2020 7274 5b27  ']:.        rt['
-00016a30: 6d6f 6475 6c65 5f6e 616d 6527 5d3d 6f62  module_name']=ob
-00016a40: 6a2e 5f5f 6d6f 6475 6c65 5f5f 0a20 2020  j.__module__.   
-00016a50: 2020 2020 2072 745b 2770 6174 6827 5d3d       rt['path']=
-00016a60: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
-00016a70: 7379 732e 6d6f 6475 6c65 735b 7274 5b27  sys.modules[rt['
-00016a80: 6d6f 6475 6c65 5f6e 616d 6527 5d5d 2e5f  module_name']]._
-00016a90: 5f66 696c 655f 5f29 0a20 2020 2020 2020  _file__).       
-00016aa0: 2072 745b 276d 6f64 756c 6527 5d3d 7379   rt['module']=sy
-00016ab0: 732e 6d6f 6475 6c65 735b 7274 5b27 6d6f  s.modules[rt['mo
-00016ac0: 6475 6c65 5f6e 616d 6527 5d5d 0a20 2020  dule_name']].   
-00016ad0: 2020 2020 2072 745b 276d 6f64 756c 655f       rt['module_
-00016ae0: 7665 7273 696f 6e27 5d3d 4d6f 6456 6572  version']=ModVer
-00016af0: 7369 6f6e 2872 745b 276d 6f64 756c 655f  sion(rt['module_
-00016b00: 6e61 6d65 275d 290a 2020 2020 7265 7475  name']).    retu
-00016b10: 726e 2072 740a 0a64 6566 204d 794d 6f64  rn rt..def MyMod
-00016b20: 756c 6528 6465 6661 756c 743d 4661 6c73  ule(default=Fals
-00016b30: 652c 7061 7265 6e74 3d2d 3129 3a0a 2020  e,parent=-1):.  
-00016b40: 2020 2727 270a 2020 2020 4765 7420 6375    '''.    Get cu
-00016b50: 7272 656e 7420 6d6f 6475 6c65 200a 2020  rrent module .  
-00016b60: 2020 2d20 7061 7265 6e74 0a20 2020 2020    - parent.     
-00016b70: 202d 3120 3a20 6d79 2063 7572 7265 6e74   -1 : my current
-00016b80: 2070 7974 686f 6e20 7061 6765 2773 206d   python page's m
-00016b90: 6f64 756c 650a 2020 2020 2020 3020 203a  odule.      0  :
-00016ba0: 206d 7920 6675 6e63 7469 6f6e 2773 206d   my function's m
-00016bb0: 6f64 756c 650a 2020 2020 2020 3120 203a  odule.      1  :
-00016bc0: 206d 7920 7061 7265 6e74 2773 206d 6f64   my parent's mod
-00016bd0: 756c 650a 2020 2020 2727 270a 2020 2020  ule.    '''.    
-00016be0: 6966 2070 6172 656e 7420 3e3d 2030 3a0a  if parent >= 0:.
-00016bf0: 2020 2020 2020 2020 6c6f 633d 312b 7061          loc=1+pa
-00016c00: 7265 6e74 0a20 2020 2065 6c73 653a 0a20  rent.    else:. 
-00016c10: 2020 2020 2020 206c 6f63 3d70 6172 656e         loc=paren
-00016c20: 740a 2020 2020 7472 793a 0a20 2020 2020  t.    try:.     
-00016c30: 2020 2023 6672 616d 653d 696e 7370 6563     #frame=inspec
-00016c40: 742e 7374 6163 6b28 295b 2d31 5d0a 2020  t.stack()[-1].  
-00016c50: 2020 2020 2020 6672 616d 653d 696e 7370        frame=insp
-00016c60: 6563 742e 7374 6163 6b28 290a 2020 2020  ect.stack().    
-00016c70: 2020 2020 6966 206c 656e 2866 7261 6d65      if len(frame
-00016c80: 2920 3c3d 206c 6f63 3a0a 2020 2020 2020  ) <= loc:.      
-00016c90: 2020 2020 2020 6c6f 633d 2d31 0a20 2020        loc=-1.   
-00016ca0: 2020 2020 2072 6574 7572 6e20 696e 7370       return insp
-00016cb0: 6563 742e 6765 746d 6f64 756c 6528 6672  ect.getmodule(fr
-00016cc0: 616d 655b 6c6f 635d 5b30 5d29 0a20 2020  ame[loc][0]).   
-00016cd0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00016ce0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-00016cf0: 0a64 6566 2043 616c 6c65 724e 616d 6528  .def CallerName(
-00016d00: 6465 6661 756c 743d 4661 6c73 652c 6465  default=False,de
-00016d10: 7461 696c 3d46 616c 7365 293a 0a20 2020  tail=False):.   
-00016d20: 2027 2727 0a20 2020 2047 6574 2074 6865   '''.    Get the
-00016d30: 2063 616c 6c65 7220 6e61 6d65 206f 6620   caller name of 
-00016d40: 6d79 2067 726f 7570 2066 756e 6374 696f  my group functio
-00016d50: 6e0a 2020 2020 6465 7461 696c 3d54 7275  n.    detail=Tru
-00016d60: 653a 2072 6574 7572 6e20 2866 756e 6320  e: return (func 
-00016d70: 6e61 6d65 2c20 6c69 6e65 206e 756d 6265  name, line numbe
-00016d80: 722c 2066 696c 656e 616d 6529 0a20 2020  r, filename).   
-00016d90: 2064 6566 6175 6c74 2020 2020 3a20 4966   default    : If
-00016da0: 206e 6f74 2066 6f75 6e64 2063 616c 6c65   not found calle
-00016db0: 7220 6e61 6d65 2074 6865 6e20 7265 7475  r name then retu
-00016dc0: 726e 2064 6566 6175 6c74 0a0a 2020 2020  rn default..    
-00016dd0: 6465 6620 4128 293a 2020 2020 2020 2020  def A():        
-00016de0: 2020 2020 2020 2023 4772 6f75 7020 4128         #Group A(
-00016df0: 290a 2020 2020 2020 2020 4361 6c6c 6572  ).        Caller
-00016e00: 4e61 6d65 2829 2020 2020 2020 202d 3e20  Name()       -> 
-00016e10: 4361 6c6c 6564 2062 7920 6d6f 6475 6c65  Called by module
-00016e20: 2773 2041 2829 203d 3e20 410a 2020 2020  's A() => A.    
-00016e30: 2020 2020 4228 290a 2020 2020 6465 6620      B().    def 
-00016e40: 4228 293a 2020 2020 2020 2020 2020 2020  B():            
-00016e50: 2020 2023 4772 6f75 7020 4228 290a 2020     #Group B().  
-00016e60: 2020 2020 2020 4361 6c6c 6572 4e61 6d65        CallerName
-00016e70: 2829 2020 2020 2020 202d 3e20 4361 6c6c  ()       -> Call
-00016e80: 6564 206d 7920 6772 6f75 7020 6279 2041  ed my group by A
-00016e90: 2829 2066 756e 6374 696f 6e20 3d3e 2041  () function => A
-00016ea0: 0a20 2020 2020 2020 2064 6566 2043 2829  .        def C()
-00016eb0: 3a0a 2020 2020 2020 2020 2020 2020 4361  :.            Ca
-00016ec0: 6c6c 6572 4e61 6d65 2829 2020 202d 3e20  llerName()   -> 
-00016ed0: 4361 6c6c 6564 206d 7920 6772 6f75 7020  Called my group 
-00016ee0: 6279 2041 2829 2066 756e 6374 696f 6e20  by A() function 
-00016ef0: 3d3e 2041 0a20 2020 2020 2020 2043 2829  => A.        C()
-00016f00: 0a20 2020 2041 2829 2020 2020 2020 2020  .    A()        
-00016f10: 2020 2020 2020 2020 2020 2020 2d3e 2043              -> C
-00016f20: 616c 6c69 6e67 2064 6566 2041 2829 2069  alling def A() i
-00016f30: 6e20 7079 7468 6f6e 2073 6372 6970 7428  n python script(
-00016f40: 6d6f 6475 6c65 290a 2020 2020 2727 270a  module).    '''.
-00016f50: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00016f60: 2064 6570 3d6c 656e 2869 6e73 7065 6374   dep=len(inspect
-00016f70: 2e73 7461 636b 2829 292d 320a 2020 2020  .stack())-2.    
-00016f80: 2020 2020 6e61 6d65 3d73 7973 2e5f 6765      name=sys._ge
-00016f90: 7466 7261 6d65 2864 6570 292e 665f 636f  tframe(dep).f_co
-00016fa0: 6465 2e63 6f5f 6e61 6d65 0a20 2020 2020  de.co_name.     
-00016fb0: 2020 2069 6620 6e61 6d65 203d 3d20 275f     if name == '_
-00016fc0: 626f 6f74 7374 7261 705f 696e 6e65 7227  bootstrap_inner'
-00016fd0: 206f 7220 6e61 6d65 203d 3d20 275f 7275   or name == '_ru
-00016fe0: 6e5f 636f 6465 273a 0a20 2020 2020 2020  n_code':.       
-00016ff0: 2020 2020 2064 6570 3d33 0a20 2020 2020       dep=3.     
-00017000: 2020 2069 6620 6465 7461 696c 3a0a 2020     if detail:.  
-00017010: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00017020: 2073 7973 2e5f 6765 7466 7261 6d65 2864   sys._getframe(d
-00017030: 6570 292e 665f 636f 6465 2e63 6f5f 6e61  ep).f_code.co_na
-00017040: 6d65 2c73 7973 2e5f 6765 7466 7261 6d65  me,sys._getframe
-00017050: 2864 6570 292e 665f 6c69 6e65 6e6f 2c73  (dep).f_lineno,s
-00017060: 7973 2e5f 6765 7466 7261 6d65 2864 6570  ys._getframe(dep
-00017070: 292e 665f 636f 6465 2e63 6f5f 6669 6c65  ).f_code.co_file
-00017080: 6e61 6d65 0a20 2020 2020 2020 2072 6574  name.        ret
-00017090: 7572 6e20 7379 732e 5f67 6574 6672 616d  urn sys._getfram
-000170a0: 6528 6465 7029 2e66 5f63 6f64 652e 636f  e(dep).f_code.co
-000170b0: 5f6e 616d 650a 2020 2020 6578 6365 7074  _name.    except
-000170c0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-000170d0: 2064 6566 6175 6c74 0a0a 6465 6620 4672   default..def Fr
-000170e0: 616d 6532 4675 6e63 7469 6f6e 286f 626a  ame2Function(obj
-000170f0: 2c64 6566 6175 6c74 3d46 616c 7365 293a  ,default=False):
-00017100: 0a20 2020 2027 2727 0a20 2020 2047 6574  .    '''.    Get
-00017110: 2046 756e 6374 696f 6e20 4f62 6a65 6374   Function Object
-00017120: 2066 726f 6d20 6672 616d 6520 6f72 2066   from frame or f
-00017130: 7261 6d65 2069 6e66 6f0a 2020 2020 2727  rame info.    ''
-00017140: 270a 2020 2020 6f62 6a5f 7479 7065 3d54  '.    obj_type=T
-00017150: 7970 654e 616d 6528 6f62 6a29 0a20 2020  ypeName(obj).   
-00017160: 2023 6966 206f 626a 5f74 7970 6520 3d3d   #if obj_type ==
-00017170: 2027 6675 6e63 7469 6f6e 273a 2072 6574   'function': ret
-00017180: 7572 6e20 6f62 6a0a 2020 2020 6966 2049  urn obj.    if I
-00017190: 7346 756e 6374 696f 6e28 6f62 6a29 3a20  sFunction(obj): 
-000171a0: 7265 7475 726e 206f 626a 0a20 2020 2069  return obj.    i
-000171b0: 6620 6f62 6a5f 7479 7065 203d 3d20 2766  f obj_type == 'f
-000171c0: 7261 6d65 696e 666f 273a 0a20 2020 2020  rameinfo':.     
-000171d0: 2020 2072 6574 7572 6e20 6763 2e67 6574     return gc.get
-000171e0: 5f72 6566 6572 7265 7273 286f 626a 2e66  _referrers(obj.f
-000171f0: 7261 6d65 2e66 5f63 6f64 6529 5b30 5d0a  rame.f_code)[0].
-00017200: 2020 2020 656c 6966 206f 626a 5f74 7970      elif obj_typ
-00017210: 6520 3d3d 2027 6672 616d 6527 3a0a 2020  e == 'frame':.  
-00017220: 2020 2020 2020 7265 7475 726e 2067 632e        return gc.
-00017230: 6765 745f 7265 6665 7272 6572 7328 6f62  get_referrers(ob
-00017240: 6a2e 665f 636f 6465 295b 305d 0a20 2020  j.f_code)[0].   
-00017250: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-00017260: 0a64 6566 2046 756e 6374 696f 6e4e 616d  .def FunctionNam
-00017270: 6528 7061 7265 6e74 3d30 2c64 6566 6175  e(parent=0,defau
-00017280: 6c74 3d46 616c 7365 2c68 6973 746f 7279  lt=False,history
-00017290: 3d46 616c 7365 2c74 7265 653d 4661 6c73  =False,tree=Fals
-000172a0: 652c 6172 6773 3d46 616c 7365 2c6c 696e  e,args=False,lin
-000172b0: 655f 6e75 6d62 6572 3d46 616c 7365 2c66  e_number=False,f
-000172c0: 756c 6c5f 6669 6c65 6e61 6d65 3d46 616c  ull_filename=Fal
-000172d0: 7365 2c66 696c 656e 616d 653d 4661 6c73  se,filename=Fals
-000172e0: 652c 6f62 6a3d 4661 6c73 652c 7368 6f77  e,obj=False,show
-000172f0: 3d46 616c 7365 293a 0a20 2020 2027 2727  =False):.    '''
-00017300: 0a20 2020 2047 6574 2066 756e 6374 696f  .    Get functio
-00017310: 6e20 6e61 6d65 0a20 2020 2020 2d20 7061  n name.     - pa
-00017320: 7265 6e74 0a20 2020 2020 2020 3020 2020  rent.       0   
-00017330: 2020 2020 2020 2020 203a 206d 7920 6e61           : my na
-00017340: 6d65 2028 6465 6661 756c 7429 0a20 2020  me (default).   
-00017350: 2020 2020 3120 2020 2020 2020 2020 2020      1           
-00017360: 203a 206d 7920 7061 7265 6e74 2066 756e   : my parent fun
-00017370: 6374 696f 6e0a 2020 2020 2020 202e 2e2e  ction.       ...
-00017380: 2020 2020 2020 2020 2020 3a20 676f 696e            : goin
-00017390: 6720 746f 7020 7061 7265 6e74 2066 756e  g top parent fun
-000173a0: 6374 696f 6e0a 2020 2020 202d 2068 6973  ction.     - his
-000173b0: 746f 7279 2020 2020 2020 3a20 4765 7474  tory      : Gett
-000173c0: 696e 6720 6869 7374 6f72 7920 2872 6574  ing history (ret
-000173d0: 7572 6e20 6c69 7374 290a 2020 2020 202d  urn list).     -
-000173e0: 2074 7265 6520 2020 2020 2020 2020 3a20   tree         : 
-000173f0: 7472 6565 2020 2872 6574 7572 6e20 6c69  tree  (return li
-00017400: 7374 290a 2020 2020 2020 2020 2020 2020  st).            
-00017410: 2020 2020 2020 2020 3a20 6966 2065 7869          : if exi
-00017420: 7374 2070 6172 656e 7420 7061 7261 6d65  st parent parame
-00017430: 7465 7220 7468 656e 2068 6973 746f 7279  ter then history
-00017440: 2066 726f 6d20 7061 7265 6e74 2074 6f20   from parent to 
-00017450: 6d65 0a20 2020 2020 2020 2d20 7368 6f77  me.       - show
-00017460: 2020 2020 2020 203a 2073 686f 7720 7472         : show tr
-00017470: 6565 206f 6e20 7363 7265 656e 0a20 2020  ee on screen.   
-00017480: 2020 2d20 6172 6773 2020 2020 2020 2020    - args        
-00017490: 203a 2073 686f 7720 6172 6775 6d65 6e74   : show argument
-000174a0: 730a 2020 2020 202d 206c 696e 655f 6e75  s.     - line_nu
-000174b0: 6d62 6572 2020 3a20 7368 6f77 206c 696e  mber  : show lin
-000174c0: 6520 6e75 6d62 6572 0a20 2020 2020 2d20  e number.     - 
-000174d0: 6669 6c65 6e61 6d65 2020 2020 203a 2073  filename     : s
-000174e0: 686f 7720 6669 6c65 6e61 6d65 0a20 2020  how filename.   
-000174f0: 2020 2d20 6675 6c6c 5f66 696c 656e 616d    - full_filenam
-00017500: 653a 2073 686f 7720 6675 6c6c 2070 6174  e: show full pat
-00017510: 6820 6669 6c65 6e61 6d65 0a20 2020 2020  h filename.     
-00017520: 2d20 6f62 6a20 2020 2020 2020 2020 203a  - obj          :
-00017530: 2047 6574 204f 424a 2028 7265 7475 726e   Get OBJ (return
-00017540: 206c 6973 7429 0a20 2020 2027 2727 0a20   list).    '''. 
-00017550: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00017560: 6d79 5f68 6973 746f 7279 3d69 6e73 7065  my_history=inspe
-00017570: 6374 2e73 7461 636b 2829 0a20 2020 2065  ct.stack().    e
-00017580: 7863 6570 743a 0a20 2020 2020 2020 2072  xcept:.        r
-00017590: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-000175a0: 2020 6966 2074 7265 653a 2068 6973 746f    if tree: histo
-000175b0: 7279 3d54 7275 650a 2020 2020 6966 2068  ry=True.    if h
-000175c0: 6973 746f 7279 3a0a 2020 2020 2020 2020  istory:.        
-000175d0: 7274 3d5b 5d0a 2020 2020 2020 2020 7370  rt=[].        sp
-000175e0: 6163 653d 2727 0a20 2020 2020 2020 2023  ace=''.        #
-000175f0: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
-00017600: 656e 286d 795f 6869 7374 6f72 7929 2d31  en(my_history)-1
-00017610: 2c30 2c2d 3129 3a0a 2020 2020 2020 2020  ,0,-1):.        
-00017620: 6d79 5f68 6973 746f 7279 5f6d 3d6c 656e  my_history_m=len
-00017630: 286d 795f 6869 7374 6f72 7929 2d31 0a20  (my_history)-1. 
-00017640: 2020 2020 2020 206d 795f 6869 7374 6f72         my_histor
-00017650: 795f 613d 5b69 2066 6f72 2069 2069 6e20  y_a=[i for i in 
-00017660: 7261 6e67 6528 6c65 6e28 6d79 5f68 6973  range(len(my_his
-00017670: 746f 7279 292d 3129 5d0a 2020 2020 2020  tory)-1)].      
-00017680: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00017690: 7061 7265 6e74 2c73 7472 293a 0a20 2020  parent,str):.   
-000176a0: 2020 2020 2020 2020 2069 6620 272d 2720           if '-' 
-000176b0: 696e 2070 6172 656e 743a 0a20 2020 2020  in parent:.     
-000176c0: 2020 2020 2020 2020 2020 2070 6172 656e             paren
-000176d0: 745f 613d 7061 7265 6e74 2e73 706c 6974  t_a=parent.split
-000176e0: 2827 2d27 290a 2020 2020 2020 2020 2020  ('-').          
-000176f0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00017700: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00017710: 6172 656e 745f 653d 696e 7428 7061 7265  arent_e=int(pare
-00017720: 6e74 5f61 5b30 5d29 0a20 2020 2020 2020  nt_a[0]).       
-00017730: 2020 2020 2020 2020 2020 2020 2023 6261               #ba
-00017740: 636b 776f 7264 0a20 2020 2020 2020 2020  ckword.         
-00017750: 2020 2020 2020 2020 2020 2065 6e64 3d70             end=p
-00017760: 6172 656e 745f 6520 6966 2070 6172 656e  arent_e if paren
-00017770: 745f 6520 3c20 6c65 6e28 6d79 5f68 6973  t_e < len(my_his
-00017780: 746f 7279 5f61 2920 656c 7365 2030 0a20  tory_a) else 0. 
-00017790: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000177a0: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-000177b0: 2020 2020 2020 2020 2020 2065 6e64 3d30             end=0
-000177c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000177d0: 2020 2020 2070 6172 656e 745f 653d 6d79       parent_e=my
-000177e0: 5f68 6973 746f 7279 5f61 5b65 6e64 5d0a  _history_a[end].
-000177f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017800: 6966 206c 656e 2870 6172 656e 745f 6129  if len(parent_a)
-00017810: 203d 3d20 323a 0a20 2020 2020 2020 2020   == 2:.         
-00017820: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-00017830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017840: 2020 2020 2020 2020 7061 7265 6e74 5f73          parent_s
-00017850: 3d69 6e74 2870 6172 656e 745f 615b 315d  =int(parent_a[1]
-00017860: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00017870: 2020 2020 2020 2020 2020 2362 6163 6b77            #backw
-00017880: 6f72 640a 2020 2020 2020 2020 2020 2020  ord.            
-00017890: 2020 2020 2020 2020 2020 2020 7374 6172              star
-000178a0: 743d 7061 7265 6e74 5f73 2069 6620 7061  t=parent_s if pa
-000178b0: 7265 6e74 5f73 203e 2070 6172 656e 745f  rent_s > parent_
-000178c0: 6520 616e 6420 7061 7265 6e74 5f73 203c  e and parent_s <
-000178d0: 206c 656e 286d 795f 6869 7374 6f72 795f   len(my_history_
-000178e0: 6129 2065 6c73 6520 2d31 0a20 2020 2020  a) else -1.     
-000178f0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00017900: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-00017910: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00017920: 7461 7274 3d2d 310a 2020 2020 2020 2020  tart=-1.        
-00017930: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00017940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017950: 2020 7374 6172 743d 2d31 0a20 2020 2020    start=-1.     
-00017960: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00017970: 2020 2020 2020 2020 2020 2020 2073 7461               sta
-00017980: 7274 3d2d 310a 2020 2020 2020 2020 2020  rt=-1.          
-00017990: 2020 2020 2020 656e 643d 300a 2020 2020        end=0.    
-000179a0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000179b0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-000179c0: 2020 2020 2020 2020 2020 2070 6172 656e             paren
-000179d0: 743d 696e 7428 7061 7265 6e74 290a 2020  t=int(parent).  
-000179e0: 2020 2020 2020 2020 2020 2020 2020 2362                #b
-000179f0: 6163 6b77 6f72 640a 2020 2020 2020 2020  ackword.        
-00017a00: 2020 2020 2020 2020 7374 6172 743d 6d79          start=my
-00017a10: 5f68 6973 746f 7279 5f61 5b70 6172 656e  _history_a[paren
-00017a20: 745d 2069 6620 7061 7265 6e74 203c 206c  t] if parent < l
-00017a30: 656e 286d 795f 6869 7374 6f72 795f 6129  en(my_history_a)
-00017a40: 2065 6c73 6520 2d31 0a20 2020 2020 2020   else -1.       
-00017a50: 2020 2020 2020 2020 2065 6e64 3d30 0a20           end=0. 
-00017a60: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-00017a70: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00017a80: 2020 2073 7461 7274 3d2d 310a 2020 2020     start=-1.    
-00017a90: 2020 2020 2020 2020 2020 2020 656e 643d              end=
-00017aa0: 300a 2020 2020 2020 2020 666f 7220 6920  0.        for i 
-00017ab0: 696e 2072 616e 6765 286d 795f 6869 7374  in range(my_hist
-00017ac0: 6f72 795f 615b 7374 6172 745d 2c6d 795f  ory_a[start],my_
-00017ad0: 6869 7374 6f72 795f 615b 656e 645d 2c2d  history_a[end],-
-00017ae0: 3129 3a0a 2020 2020 2020 2020 2020 2020  1):.            
-00017af0: 6966 2074 7265 653a 0a20 2020 2020 2020  if tree:.       
-00017b00: 2020 2020 2020 2020 2069 6620 7370 6163           if spac
-00017b10: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00017b20: 2020 2020 2020 2070 703d 277b 7d20 2d3e         pp='{} ->
-00017b30: 207b 7d27 2e66 6f72 6d61 7428 7370 6163   {}'.format(spac
-00017b40: 652c 6d79 5f68 6973 746f 7279 5b69 5d2e  e,my_history[i].
-00017b50: 6675 6e63 7469 6f6e 290a 2020 2020 2020  function).      
-00017b60: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00017b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b80: 2020 2020 7070 3d6d 795f 6869 7374 6f72      pp=my_histor
-00017b90: 795b 695d 2e66 756e 6374 696f 6e0a 2020  y[i].function.  
-00017ba0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00017bb0: 2070 7020 3d3d 2027 3c6d 6f64 756c 653e   pp == '<module>
-00017bc0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00017bd0: 2020 2020 2020 2069 6620 7368 6f77 3a0a         if show:.
-00017be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017bf0: 2020 2020 2020 2020 7072 696e 7428 7070          print(pp
-00017c00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00017c10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00017c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017c30: 2020 2020 7274 2e61 7070 656e 6428 7070      rt.append(pp
-00017c40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00017c50: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00017c60: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-00017c70: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-00017c80: 2020 2020 2020 2020 2020 2020 2061 7267               arg
-00017c90: 3d46 756e 6374 696f 6e41 7267 7328 4672  =FunctionArgs(Fr
-00017ca0: 616d 6532 4675 6e63 7469 6f6e 286d 795f  ame2Function(my_
-00017cb0: 6869 7374 6f72 795b 695d 2e66 7261 6d65  history[i].frame
-00017cc0: 292c 6d6f 6465 3d27 7374 7269 6e67 272c  ),mode='string',
-00017cd0: 6465 6661 756c 743d 2727 290a 2020 2020  default='').    
-00017ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017cf0: 2020 2020 6966 2061 7267 3a20 7070 3d70      if arg: pp=p
-00017d00: 702b 277b 7d27 2e66 6f72 6d61 7428 6172  p+'{}'.format(ar
-00017d10: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-00017d20: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00017d30: 2070 703d 7070 2b27 2829 270a 2020 2020   pp=pp+'()'.    
-00017d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017d50: 6966 206c 696e 655f 6e75 6d62 6572 3a20  if line_number: 
-00017d60: 7070 3d70 702b 2720 6174 207b 7d27 2e66  pp=pp+' at {}'.f
-00017d70: 6f72 6d61 7428 6d79 5f68 6973 746f 7279  ormat(my_history
-00017d80: 5b69 5d2e 6c69 6e65 6e6f 290a 2020 2020  [i].lineno).    
-00017d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017da0: 6966 2066 756c 6c5f 6669 6c65 6e61 6d65  if full_filename
-00017db0: 3a20 7070 3d70 702b 2720 696e 207b 7d27  : pp=pp+' in {}'
-00017dc0: 2e66 6f72 6d61 7428 6d79 5f68 6973 746f  .format(my_histo
-00017dd0: 7279 5b69 5d2e 6669 6c65 6e61 6d65 290a  ry[i].filename).
+000165a0: 2020 6966 2069 6920 696e 2067 6c6f 6261    if ii in globa
+000165b0: 6c65 6e76 3a0a 2020 2020 2020 2020 2020  lenv:.          
+000165c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000165d0: 7377 6170 2053 616d 6520 4e61 6d65 2062  swap Same Name b
+000165e0: 6574 7765 656e 206d 6f64 756c 6528 6d79  etween module(my
+000165f0: 206d 6f64 756c 6520 6f66 2074 6865 2077   module of the w
+00016600: 696c 6420 6361 7264 2920 616e 6420 636c  ild card) and cl
+00016610: 6173 7328 7769 6c64 2063 6172 6420 696d  ass(wild card im
+00016620: 706f 7274 2063 6c61 7373 206e 616d 6529  port class name)
+00016630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016640: 2020 2020 2020 2020 2069 6620 6969 2069           if ii i
+00016650: 6e20 6c6f 6164 6564 2e5f 5f64 6963 745f  n loaded.__dict_
+00016660: 5f2e 6b65 7973 2829 3a0a 2020 2020 2020  _.keys():.      
+00016670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016680: 2020 2020 2020 6966 2043 6865 636b 4f62        if CheckOb
+00016690: 6a28 676c 6f62 616c 656e 765b 6969 5d29  j(globalenv[ii])
+000166a0: 203d 3d20 276d 6f64 756c 6527 2061 6e64   == 'module' and
+000166b0: 2043 6865 636b 4f62 6a28 6c6f 6164 6564   CheckObj(loaded
+000166c0: 2e5f 5f64 6963 745f 5f5b 6969 5d29 203d  .__dict__[ii]) =
+000166d0: 3d20 2763 6c61 7373 6f62 6a27 3a0a 2320  = 'classobj':.# 
+000166e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000166f0: 2020 2020 2020 2020 2020 2020 2020 2054                 T
+00016700: 4d50 3d67 6c6f 6261 6c65 6e76 5b69 695d  MP=globalenv[ii]
+00016710: 2023 206d 6f76 6520 746f 206c 6f63 616c   # move to local
+00016720: 2074 656d 706f 7261 7920 0a20 2020 2020   temporay .     
+00016730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016740: 2020 2020 2020 2020 2020 2067 6c6f 6261             globa
+00016750: 6c65 6e76 5b69 695d 3d6c 6f61 6465 642e  lenv[ii]=loaded.
+00016760: 5f5f 6469 6374 5f5f 5b69 695d 0a20 2020  __dict__[ii].   
+00016770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016780: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00016790: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+000167a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000167b0: 206e 6f74 2066 6f72 6365 3a20 636f 6e74   not force: cont
+000167c0: 696e 7565 2023 204e 6f74 2066 6f72 6365  inue # Not force
+000167d0: 2074 6865 6e20 6967 6e6f 7265 2073 616d   then ignore sam
+000167e0: 6520 6e61 6d65 0a20 2020 2020 2020 2020  e name.         
+000167f0: 2020 2020 2020 2020 2020 2067 6c6f 6261             globa
+00016800: 6c65 6e76 5b69 695d 3d6c 6f61 6465 642e  lenv[ii]=loaded.
+00016810: 5f5f 6469 6374 5f5f 5b69 695d 0a20 2020  __dict__[ii].   
+00016820: 2072 6574 7572 6e20 6c6f 6164 5f66 6169   return load_fai
+00016830: 6c65 640a 0a64 6566 204d 6574 686f 6449  led..def MethodI
+00016840: 6e43 6c61 7373 2863 6c61 7373 5f6e 616d  nClass(class_nam
+00016850: 6529 3a0a 2020 2020 2727 270a 2020 2020  e):.    '''.    
+00016860: 4765 7420 4d65 7468 6f64 206c 6973 7420  Get Method list 
+00016870: 696e 2043 6c61 7373 0a20 2020 2027 2727  in Class.    '''
+00016880: 0a20 2020 2072 6574 3d64 6972 2863 6c61  .    ret=dir(cla
+00016890: 7373 5f6e 616d 6529 0a20 2020 2069 6620  ss_name).    if 
+000168a0: 6861 7361 7474 7228 636c 6173 735f 6e61  hasattr(class_na
+000168b0: 6d65 2c27 5f5f 6261 7365 735f 5f27 293a  me,'__bases__'):
+000168c0: 0a20 2020 2020 2020 2066 6f72 2062 6173  .        for bas
+000168d0: 6520 696e 2063 6c61 7373 5f6e 616d 652e  e in class_name.
+000168e0: 5f5f 6261 7365 735f 5f3a 0a20 2020 2020  __bases__:.     
+000168f0: 2020 2020 2020 2072 6574 3d72 6574 2b4d         ret=ret+M
+00016900: 6574 686f 6449 6e43 6c61 7373 2862 6173  ethodInClass(bas
+00016910: 6529 0a20 2020 2072 6574 7572 6e20 7265  e).    return re
+00016920: 740a 0a64 6566 204f 626a 496e 666f 286f  t..def ObjInfo(o
+00016930: 626a 293a 0a20 2020 2027 2727 0a20 2020  bj):.    '''.   
+00016940: 2047 6574 206f 626a 6563 7420 696e 666f   Get object info
+00016950: 726d 6174 696f 6e20 3a20 7479 7065 2c20  rmation : type, 
+00016960: 6e61 6d65 2c20 6d65 7468 6f64 206c 6973  name, method lis
+00016970: 742c 2070 6174 682c 206d 6f64 756c 655f  t, path, module_
+00016980: 6e61 6d65 2c20 6d6f 6475 6c65 5f76 6572  name, module_ver
+00016990: 7369 6f6e 2c20 6d6f 6475 6c65 0a20 2020  sion, module.   
+000169a0: 2027 2727 0a20 2020 2072 743d 7b7d 0a20   '''.    rt={}. 
+000169b0: 2020 2072 745b 2774 7970 6527 5d3d 7479     rt['type']=ty
+000169c0: 7065 286f 626a 292e 5f5f 6e61 6d65 5f5f  pe(obj).__name__
+000169d0: 0a20 2020 2072 745b 276e 616d 6527 5d3d  .    rt['name']=
+000169e0: 6f62 6a2e 5f5f 6e61 6d65 5f5f 0a20 2020  obj.__name__.   
+000169f0: 2072 745b 276d 6574 686f 6473 275d 3d4d   rt['methods']=M
+00016a00: 6574 686f 6449 6e43 6c61 7373 286f 626a  ethodInClass(obj
+00016a10: 290a 2020 2020 6966 2072 745b 2774 7970  ).    if rt['typ
+00016a20: 6527 5d20 696e 205b 276d 6f64 756c 6527  e'] in ['module'
+00016a30: 5d3a 0a20 2020 2020 2020 2072 745b 2770  ]:.        rt['p
+00016a40: 6174 6827 5d3d 6f62 6a2e 5f5f 7061 7468  ath']=obj.__path
+00016a50: 5f5f 0a20 2020 2020 2020 2072 745b 2776  __.        rt['v
+00016a60: 6572 7369 6f6e 275d 3d4d 6f64 5665 7273  ersion']=ModVers
+00016a70: 696f 6e28 7274 5b27 6e61 6d65 275d 290a  ion(rt['name']).
+00016a80: 2020 2020 2020 2020 7274 5b27 6d6f 6475          rt['modu
+00016a90: 6c65 5f6e 616d 6527 5d3d 6f62 6a2e 5f5f  le_name']=obj.__
+00016aa0: 6e61 6d65 5f5f 0a20 2020 2020 2020 2072  name__.        r
+00016ab0: 745b 276d 6f64 756c 6527 5d3d 6f62 6a0a  t['module']=obj.
+00016ac0: 2020 2020 656c 6966 2072 745b 2774 7970      elif rt['typ
+00016ad0: 6527 5d20 696e 205b 2766 756e 6374 696f  e'] in ['functio
+00016ae0: 6e27 5d3a 0a20 2020 2020 2020 2072 745b  n']:.        rt[
+00016af0: 2770 6174 6827 5d3d 6f73 2e70 6174 682e  'path']=os.path.
+00016b00: 6162 7370 6174 6828 696e 7370 6563 742e  abspath(inspect.
+00016b10: 6765 7466 696c 6528 6f62 6a29 290a 2020  getfile(obj)).  
+00016b20: 2020 2020 2020 7274 5b27 6d6f 6475 6c65        rt['module
+00016b30: 275d 3d69 6e73 7065 6374 2e67 6574 6d6f  ']=inspect.getmo
+00016b40: 6475 6c65 286f 626a 290a 2020 2020 2020  dule(obj).      
+00016b50: 2020 7274 5b27 6d6f 6475 6c65 5f6e 616d    rt['module_nam
+00016b60: 6527 5d3d 7274 5b27 6d6f 6475 6c65 275d  e']=rt['module']
+00016b70: 2e5f 5f6e 616d 655f 5f0a 2020 2020 2020  .__name__.      
+00016b80: 2020 7274 5b27 6d6f 6475 6c65 5f76 6572    rt['module_ver
+00016b90: 7369 6f6e 275d 3d4d 6f64 5665 7273 696f  sion']=ModVersio
+00016ba0: 6e28 7274 5b27 6d6f 6475 6c65 5f6e 616d  n(rt['module_nam
+00016bb0: 6527 5d29 0a23 2020 2020 2020 2020 7274  e']).#        rt
+00016bc0: 5b27 6d65 7468 6f64 7327 5d3d 5b72 745b  ['methods']=[rt[
+00016bd0: 276d 6f64 756c 655f 6e61 6d65 275d 5d0a  'module_name']].
+00016be0: 2020 2020 656c 6966 2072 745b 2774 7970      elif rt['typ
+00016bf0: 6527 5d20 696e 205b 2763 6c61 7373 275d  e'] in ['class']
+00016c00: 3a0a 2020 2020 2020 2020 7274 5b27 6d6f  :.        rt['mo
+00016c10: 6475 6c65 5f6e 616d 6527 5d3d 6f62 6a2e  dule_name']=obj.
+00016c20: 5f5f 6d6f 6475 6c65 5f5f 0a20 2020 2020  __module__.     
+00016c30: 2020 2072 745b 2770 6174 6827 5d3d 6f73     rt['path']=os
+00016c40: 2e70 6174 682e 6162 7370 6174 6828 7379  .path.abspath(sy
+00016c50: 732e 6d6f 6475 6c65 735b 7274 5b27 6d6f  s.modules[rt['mo
+00016c60: 6475 6c65 5f6e 616d 6527 5d5d 2e5f 5f66  dule_name']].__f
+00016c70: 696c 655f 5f29 0a20 2020 2020 2020 2072  ile__).        r
+00016c80: 745b 276d 6f64 756c 6527 5d3d 7379 732e  t['module']=sys.
+00016c90: 6d6f 6475 6c65 735b 7274 5b27 6d6f 6475  modules[rt['modu
+00016ca0: 6c65 5f6e 616d 6527 5d5d 0a20 2020 2020  le_name']].     
+00016cb0: 2020 2072 745b 276d 6f64 756c 655f 7665     rt['module_ve
+00016cc0: 7273 696f 6e27 5d3d 4d6f 6456 6572 7369  rsion']=ModVersi
+00016cd0: 6f6e 2872 745b 276d 6f64 756c 655f 6e61  on(rt['module_na
+00016ce0: 6d65 275d 290a 2020 2020 7265 7475 726e  me']).    return
+00016cf0: 2072 740a 0a64 6566 204d 794d 6f64 756c   rt..def MyModul
+00016d00: 6528 6465 6661 756c 743d 4661 6c73 652c  e(default=False,
+00016d10: 7061 7265 6e74 3d2d 3129 3a0a 2020 2020  parent=-1):.    
+00016d20: 2727 270a 2020 2020 4765 7420 6375 7272  '''.    Get curr
+00016d30: 656e 7420 6d6f 6475 6c65 200a 2020 2020  ent module .    
+00016d40: 2d20 7061 7265 6e74 0a20 2020 2020 202d  - parent.      -
+00016d50: 3120 3a20 6d79 2063 7572 7265 6e74 2070  1 : my current p
+00016d60: 7974 686f 6e20 7061 6765 2773 206d 6f64  ython page's mod
+00016d70: 756c 650a 2020 2020 2020 3020 203a 206d  ule.      0  : m
+00016d80: 7920 6675 6e63 7469 6f6e 2773 206d 6f64  y function's mod
+00016d90: 756c 650a 2020 2020 2020 3120 203a 206d  ule.      1  : m
+00016da0: 7920 7061 7265 6e74 2773 206d 6f64 756c  y parent's modul
+00016db0: 650a 2020 2020 2727 270a 2020 2020 6966  e.    '''.    if
+00016dc0: 2070 6172 656e 7420 3e3d 2030 3a0a 2020   parent >= 0:.  
+00016dd0: 2020 2020 2020 6c6f 633d 312b 7061 7265        loc=1+pare
+00016de0: 6e74 0a20 2020 2065 6c73 653a 0a20 2020  nt.    else:.   
+00016df0: 2020 2020 206c 6f63 3d70 6172 656e 740a       loc=parent.
+00016e00: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00016e10: 2023 6672 616d 653d 696e 7370 6563 742e   #frame=inspect.
+00016e20: 7374 6163 6b28 295b 2d31 5d0a 2020 2020  stack()[-1].    
+00016e30: 2020 2020 6672 616d 653d 696e 7370 6563      frame=inspec
+00016e40: 742e 7374 6163 6b28 290a 2020 2020 2020  t.stack().      
+00016e50: 2020 6966 206c 656e 2866 7261 6d65 2920    if len(frame) 
+00016e60: 3c3d 206c 6f63 3a0a 2020 2020 2020 2020  <= loc:.        
+00016e70: 2020 2020 6c6f 633d 2d31 0a20 2020 2020      loc=-1.     
+00016e80: 2020 2072 6574 7572 6e20 696e 7370 6563     return inspec
+00016e90: 742e 6765 746d 6f64 756c 6528 6672 616d  t.getmodule(fram
+00016ea0: 655b 6c6f 635d 5b30 5d29 0a20 2020 2065  e[loc][0]).    e
+00016eb0: 7863 6570 743a 0a20 2020 2020 2020 2072  xcept:.        r
+00016ec0: 6574 7572 6e20 6465 6661 756c 740a 0a64  eturn default..d
+00016ed0: 6566 2043 616c 6c65 724e 616d 6528 6465  ef CallerName(de
+00016ee0: 6661 756c 743d 4661 6c73 652c 6465 7461  fault=False,deta
+00016ef0: 696c 3d46 616c 7365 293a 0a20 2020 2027  il=False):.    '
+00016f00: 2727 0a20 2020 2047 6574 2074 6865 2063  ''.    Get the c
+00016f10: 616c 6c65 7220 6e61 6d65 206f 6620 6d79  aller name of my
+00016f20: 2067 726f 7570 2066 756e 6374 696f 6e0a   group function.
+00016f30: 2020 2020 6465 7461 696c 3d54 7275 653a      detail=True:
+00016f40: 2072 6574 7572 6e20 2866 756e 6320 6e61   return (func na
+00016f50: 6d65 2c20 6c69 6e65 206e 756d 6265 722c  me, line number,
+00016f60: 2066 696c 656e 616d 6529 0a20 2020 2064   filename).    d
+00016f70: 6566 6175 6c74 2020 2020 3a20 4966 206e  efault    : If n
+00016f80: 6f74 2066 6f75 6e64 2063 616c 6c65 7220  ot found caller 
+00016f90: 6e61 6d65 2074 6865 6e20 7265 7475 726e  name then return
+00016fa0: 2064 6566 6175 6c74 0a0a 2020 2020 6465   default..    de
+00016fb0: 6620 4128 293a 2020 2020 2020 2020 2020  f A():          
+00016fc0: 2020 2020 2023 4772 6f75 7020 4128 290a       #Group A().
+00016fd0: 2020 2020 2020 2020 4361 6c6c 6572 4e61          CallerNa
+00016fe0: 6d65 2829 2020 2020 2020 202d 3e20 4361  me()       -> Ca
+00016ff0: 6c6c 6564 2062 7920 6d6f 6475 6c65 2773  lled by module's
+00017000: 2041 2829 203d 3e20 410a 2020 2020 2020   A() => A.      
+00017010: 2020 4228 290a 2020 2020 6465 6620 4228    B().    def B(
+00017020: 293a 2020 2020 2020 2020 2020 2020 2020  ):              
+00017030: 2023 4772 6f75 7020 4228 290a 2020 2020   #Group B().    
+00017040: 2020 2020 4361 6c6c 6572 4e61 6d65 2829      CallerName()
+00017050: 2020 2020 2020 202d 3e20 4361 6c6c 6564         -> Called
+00017060: 206d 7920 6772 6f75 7020 6279 2041 2829   my group by A()
+00017070: 2066 756e 6374 696f 6e20 3d3e 2041 0a20   function => A. 
+00017080: 2020 2020 2020 2064 6566 2043 2829 3a0a         def C():.
+00017090: 2020 2020 2020 2020 2020 2020 4361 6c6c              Call
+000170a0: 6572 4e61 6d65 2829 2020 202d 3e20 4361  erName()   -> Ca
+000170b0: 6c6c 6564 206d 7920 6772 6f75 7020 6279  lled my group by
+000170c0: 2041 2829 2066 756e 6374 696f 6e20 3d3e   A() function =>
+000170d0: 2041 0a20 2020 2020 2020 2043 2829 0a20   A.        C(). 
+000170e0: 2020 2041 2829 2020 2020 2020 2020 2020     A()          
+000170f0: 2020 2020 2020 2020 2020 2d3e 2043 616c            -> Cal
+00017100: 6c69 6e67 2064 6566 2041 2829 2069 6e20  ling def A() in 
+00017110: 7079 7468 6f6e 2073 6372 6970 7428 6d6f  python script(mo
+00017120: 6475 6c65 290a 2020 2020 2727 270a 2020  dule).    '''.  
+00017130: 2020 7472 793a 0a20 2020 2020 2020 2064    try:.        d
+00017140: 6570 3d6c 656e 2869 6e73 7065 6374 2e73  ep=len(inspect.s
+00017150: 7461 636b 2829 292d 320a 2020 2020 2020  tack())-2.      
+00017160: 2020 6e61 6d65 3d73 7973 2e5f 6765 7466    name=sys._getf
+00017170: 7261 6d65 2864 6570 292e 665f 636f 6465  rame(dep).f_code
+00017180: 2e63 6f5f 6e61 6d65 0a20 2020 2020 2020  .co_name.       
+00017190: 2069 6620 6e61 6d65 203d 3d20 275f 626f   if name == '_bo
+000171a0: 6f74 7374 7261 705f 696e 6e65 7227 206f  otstrap_inner' o
+000171b0: 7220 6e61 6d65 203d 3d20 275f 7275 6e5f  r name == '_run_
+000171c0: 636f 6465 273a 0a20 2020 2020 2020 2020  code':.         
+000171d0: 2020 2064 6570 3d33 0a20 2020 2020 2020     dep=3.       
+000171e0: 2069 6620 6465 7461 696c 3a0a 2020 2020   if detail:.    
+000171f0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00017200: 7973 2e5f 6765 7466 7261 6d65 2864 6570  ys._getframe(dep
+00017210: 292e 665f 636f 6465 2e63 6f5f 6e61 6d65  ).f_code.co_name
+00017220: 2c73 7973 2e5f 6765 7466 7261 6d65 2864  ,sys._getframe(d
+00017230: 6570 292e 665f 6c69 6e65 6e6f 2c73 7973  ep).f_lineno,sys
+00017240: 2e5f 6765 7466 7261 6d65 2864 6570 292e  ._getframe(dep).
+00017250: 665f 636f 6465 2e63 6f5f 6669 6c65 6e61  f_code.co_filena
+00017260: 6d65 0a20 2020 2020 2020 2072 6574 7572  me.        retur
+00017270: 6e20 7379 732e 5f67 6574 6672 616d 6528  n sys._getframe(
+00017280: 6465 7029 2e66 5f63 6f64 652e 636f 5f6e  dep).f_code.co_n
+00017290: 616d 650a 2020 2020 6578 6365 7074 3a0a  ame.    except:.
+000172a0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+000172b0: 6566 6175 6c74 0a0a 6465 6620 4672 616d  efault..def Fram
+000172c0: 6532 4675 6e63 7469 6f6e 286f 626a 2c64  e2Function(obj,d
+000172d0: 6566 6175 6c74 3d46 616c 7365 293a 0a20  efault=False):. 
+000172e0: 2020 2027 2727 0a20 2020 2047 6574 2046     '''.    Get F
+000172f0: 756e 6374 696f 6e20 4f62 6a65 6374 2066  unction Object f
+00017300: 726f 6d20 6672 616d 6520 6f72 2066 7261  rom frame or fra
+00017310: 6d65 2069 6e66 6f0a 2020 2020 2727 270a  me info.    '''.
+00017320: 2020 2020 6f62 6a5f 7479 7065 3d54 7970      obj_type=Typ
+00017330: 654e 616d 6528 6f62 6a29 0a20 2020 2023  eName(obj).    #
+00017340: 6966 206f 626a 5f74 7970 6520 3d3d 2027  if obj_type == '
+00017350: 6675 6e63 7469 6f6e 273a 2072 6574 7572  function': retur
+00017360: 6e20 6f62 6a0a 2020 2020 6966 2049 7346  n obj.    if IsF
+00017370: 756e 6374 696f 6e28 6f62 6a29 3a20 7265  unction(obj): re
+00017380: 7475 726e 206f 626a 0a20 2020 2069 6620  turn obj.    if 
+00017390: 6f62 6a5f 7479 7065 203d 3d20 2766 7261  obj_type == 'fra
+000173a0: 6d65 696e 666f 273a 0a20 2020 2020 2020  meinfo':.       
+000173b0: 2072 6574 7572 6e20 6763 2e67 6574 5f72   return gc.get_r
+000173c0: 6566 6572 7265 7273 286f 626a 2e66 7261  eferrers(obj.fra
+000173d0: 6d65 2e66 5f63 6f64 6529 5b30 5d0a 2020  me.f_code)[0].  
+000173e0: 2020 656c 6966 206f 626a 5f74 7970 6520    elif obj_type 
+000173f0: 3d3d 2027 6672 616d 6527 3a0a 2020 2020  == 'frame':.    
+00017400: 2020 2020 7265 7475 726e 2067 632e 6765      return gc.ge
+00017410: 745f 7265 6665 7272 6572 7328 6f62 6a2e  t_referrers(obj.
+00017420: 665f 636f 6465 295b 305d 0a20 2020 2072  f_code)[0].    r
+00017430: 6574 7572 6e20 6465 6661 756c 740a 0a64  eturn default..d
+00017440: 6566 2046 756e 6374 696f 6e4e 616d 6528  ef FunctionName(
+00017450: 7061 7265 6e74 3d30 2c64 6566 6175 6c74  parent=0,default
+00017460: 3d46 616c 7365 2c68 6973 746f 7279 3d46  =False,history=F
+00017470: 616c 7365 2c74 7265 653d 4661 6c73 652c  alse,tree=False,
+00017480: 6172 6773 3d46 616c 7365 2c6c 696e 655f  args=False,line_
+00017490: 6e75 6d62 6572 3d46 616c 7365 2c66 756c  number=False,ful
+000174a0: 6c5f 6669 6c65 6e61 6d65 3d46 616c 7365  l_filename=False
+000174b0: 2c66 696c 656e 616d 653d 4661 6c73 652c  ,filename=False,
+000174c0: 6f62 6a3d 4661 6c73 652c 7368 6f77 3d46  obj=False,show=F
+000174d0: 616c 7365 293a 0a20 2020 2027 2727 0a20  alse):.    '''. 
+000174e0: 2020 2047 6574 2066 756e 6374 696f 6e20     Get function 
+000174f0: 6e61 6d65 0a20 2020 2020 2d20 7061 7265  name.     - pare
+00017500: 6e74 0a20 2020 2020 2020 3020 2020 2020  nt.       0     
+00017510: 2020 2020 2020 203a 206d 7920 6e61 6d65         : my name
+00017520: 2028 6465 6661 756c 7429 0a20 2020 2020   (default).     
+00017530: 2020 3120 2020 2020 2020 2020 2020 203a    1            :
+00017540: 206d 7920 7061 7265 6e74 2066 756e 6374   my parent funct
+00017550: 696f 6e0a 2020 2020 2020 202e 2e2e 2020  ion.       ...  
+00017560: 2020 2020 2020 2020 3a20 676f 696e 6720          : going 
+00017570: 746f 7020 7061 7265 6e74 2066 756e 6374  top parent funct
+00017580: 696f 6e0a 2020 2020 202d 2068 6973 746f  ion.     - histo
+00017590: 7279 2020 2020 2020 3a20 4765 7474 696e  ry      : Gettin
+000175a0: 6720 6869 7374 6f72 7920 2872 6574 7572  g history (retur
+000175b0: 6e20 6c69 7374 290a 2020 2020 202d 2074  n list).     - t
+000175c0: 7265 6520 2020 2020 2020 2020 3a20 7472  ree         : tr
+000175d0: 6565 2020 2872 6574 7572 6e20 6c69 7374  ee  (return list
+000175e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000175f0: 2020 2020 2020 3a20 6966 2065 7869 7374        : if exist
+00017600: 2070 6172 656e 7420 7061 7261 6d65 7465   parent paramete
+00017610: 7220 7468 656e 2068 6973 746f 7279 2066  r then history f
+00017620: 726f 6d20 7061 7265 6e74 2074 6f20 6d65  rom parent to me
+00017630: 0a20 2020 2020 2020 2d20 7368 6f77 2020  .       - show  
+00017640: 2020 2020 203a 2073 686f 7720 7472 6565       : show tree
+00017650: 206f 6e20 7363 7265 656e 0a20 2020 2020   on screen.     
+00017660: 2d20 6172 6773 2020 2020 2020 2020 203a  - args         :
+00017670: 2073 686f 7720 6172 6775 6d65 6e74 730a   show arguments.
+00017680: 2020 2020 202d 206c 696e 655f 6e75 6d62       - line_numb
+00017690: 6572 2020 3a20 7368 6f77 206c 696e 6520  er  : show line 
+000176a0: 6e75 6d62 6572 0a20 2020 2020 2d20 6669  number.     - fi
+000176b0: 6c65 6e61 6d65 2020 2020 203a 2073 686f  lename     : sho
+000176c0: 7720 6669 6c65 6e61 6d65 0a20 2020 2020  w filename.     
+000176d0: 2d20 6675 6c6c 5f66 696c 656e 616d 653a  - full_filename:
+000176e0: 2073 686f 7720 6675 6c6c 2070 6174 6820   show full path 
+000176f0: 6669 6c65 6e61 6d65 0a20 2020 2020 2d20  filename.     - 
+00017700: 6f62 6a20 2020 2020 2020 2020 203a 2047  obj          : G
+00017710: 6574 204f 424a 2028 7265 7475 726e 206c  et OBJ (return l
+00017720: 6973 7429 0a20 2020 2027 2727 0a20 2020  ist).    '''.   
+00017730: 2074 7279 3a0a 2020 2020 2020 2020 6d79   try:.        my
+00017740: 5f68 6973 746f 7279 3d69 6e73 7065 6374  _history=inspect
+00017750: 2e73 7461 636b 2829 0a20 2020 2065 7863  .stack().    exc
+00017760: 6570 743a 0a20 2020 2020 2020 2072 6574  ept:.        ret
+00017770: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
+00017780: 6966 2074 7265 653a 2068 6973 746f 7279  if tree: history
+00017790: 3d54 7275 650a 2020 2020 6966 2068 6973  =True.    if his
+000177a0: 746f 7279 3a0a 2020 2020 2020 2020 7274  tory:.        rt
+000177b0: 3d5b 5d0a 2020 2020 2020 2020 7370 6163  =[].        spac
+000177c0: 653d 2727 0a20 2020 2020 2020 2023 666f  e=''.        #fo
+000177d0: 7220 6920 696e 2072 616e 6765 286c 656e  r i in range(len
+000177e0: 286d 795f 6869 7374 6f72 7929 2d31 2c30  (my_history)-1,0
+000177f0: 2c2d 3129 3a0a 2020 2020 2020 2020 6d79  ,-1):.        my
+00017800: 5f68 6973 746f 7279 5f6d 3d6c 656e 286d  _history_m=len(m
+00017810: 795f 6869 7374 6f72 7929 2d31 0a20 2020  y_history)-1.   
+00017820: 2020 2020 206d 795f 6869 7374 6f72 795f       my_history_
+00017830: 613d 5b69 2066 6f72 2069 2069 6e20 7261  a=[i for i in ra
+00017840: 6e67 6528 6c65 6e28 6d79 5f68 6973 746f  nge(len(my_histo
+00017850: 7279 292d 3129 5d0a 2020 2020 2020 2020  ry)-1)].        
+00017860: 6966 2069 7369 6e73 7461 6e63 6528 7061  if isinstance(pa
+00017870: 7265 6e74 2c73 7472 293a 0a20 2020 2020  rent,str):.     
+00017880: 2020 2020 2020 2069 6620 272d 2720 696e         if '-' in
+00017890: 2070 6172 656e 743a 0a20 2020 2020 2020   parent:.       
+000178a0: 2020 2020 2020 2020 2070 6172 656e 745f           parent_
+000178b0: 613d 7061 7265 6e74 2e73 706c 6974 2827  a=parent.split('
+000178c0: 2d27 290a 2020 2020 2020 2020 2020 2020  -').            
+000178d0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+000178e0: 2020 2020 2020 2020 2020 2020 2070 6172               par
+000178f0: 656e 745f 653d 696e 7428 7061 7265 6e74  ent_e=int(parent
+00017900: 5f61 5b30 5d29 0a20 2020 2020 2020 2020  _a[0]).         
+00017910: 2020 2020 2020 2020 2020 2023 6261 636b             #back
+00017920: 776f 7264 0a20 2020 2020 2020 2020 2020  word.           
+00017930: 2020 2020 2020 2020 2065 6e64 3d70 6172           end=par
+00017940: 656e 745f 6520 6966 2070 6172 656e 745f  ent_e if parent_
+00017950: 6520 3c20 6c65 6e28 6d79 5f68 6973 746f  e < len(my_histo
+00017960: 7279 5f61 2920 656c 7365 2030 0a20 2020  ry_a) else 0.   
+00017970: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+00017980: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+00017990: 2020 2020 2020 2020 2065 6e64 3d30 0a20           end=0. 
+000179a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000179b0: 2020 2070 6172 656e 745f 653d 6d79 5f68     parent_e=my_h
+000179c0: 6973 746f 7279 5f61 5b65 6e64 5d0a 2020  istory_a[end].  
+000179d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000179e0: 206c 656e 2870 6172 656e 745f 6129 203d   len(parent_a) =
+000179f0: 3d20 323a 0a20 2020 2020 2020 2020 2020  = 2:.           
+00017a00: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+00017a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017a20: 2020 2020 2020 7061 7265 6e74 5f73 3d69        parent_s=i
+00017a30: 6e74 2870 6172 656e 745f 615b 315d 290a  nt(parent_a[1]).
+00017a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017a50: 2020 2020 2020 2020 2362 6163 6b77 6f72          #backwor
+00017a60: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
+00017a70: 2020 2020 2020 2020 2020 7374 6172 743d            start=
+00017a80: 7061 7265 6e74 5f73 2069 6620 7061 7265  parent_s if pare
+00017a90: 6e74 5f73 203e 2070 6172 656e 745f 6520  nt_s > parent_e 
+00017aa0: 616e 6420 7061 7265 6e74 5f73 203c 206c  and parent_s < l
+00017ab0: 656e 286d 795f 6869 7374 6f72 795f 6129  en(my_history_a)
+00017ac0: 2065 6c73 6520 2d31 0a20 2020 2020 2020   else -1.       
+00017ad0: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+00017ae0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+00017af0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+00017b00: 7274 3d2d 310a 2020 2020 2020 2020 2020  rt=-1.          
+00017b10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00017b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017b30: 7374 6172 743d 2d31 0a20 2020 2020 2020  start=-1.       
+00017b40: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00017b50: 2020 2020 2020 2020 2020 2073 7461 7274             start
+00017b60: 3d2d 310a 2020 2020 2020 2020 2020 2020  =-1.            
+00017b70: 2020 2020 656e 643d 300a 2020 2020 2020      end=0.      
+00017b80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00017b90: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00017ba0: 2020 2020 2020 2020 2070 6172 656e 743d           parent=
+00017bb0: 696e 7428 7061 7265 6e74 290a 2020 2020  int(parent).    
+00017bc0: 2020 2020 2020 2020 2020 2020 2362 6163              #bac
+00017bd0: 6b77 6f72 640a 2020 2020 2020 2020 2020  kword.          
+00017be0: 2020 2020 2020 7374 6172 743d 6d79 5f68        start=my_h
+00017bf0: 6973 746f 7279 5f61 5b70 6172 656e 745d  istory_a[parent]
+00017c00: 2069 6620 7061 7265 6e74 203c 206c 656e   if parent < len
+00017c10: 286d 795f 6869 7374 6f72 795f 6129 2065  (my_history_a) e
+00017c20: 6c73 6520 2d31 0a20 2020 2020 2020 2020  lse -1.         
+00017c30: 2020 2020 2020 2065 6e64 3d30 0a20 2020         end=0.   
+00017c40: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+00017c50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017c60: 2073 7461 7274 3d2d 310a 2020 2020 2020   start=-1.      
+00017c70: 2020 2020 2020 2020 2020 656e 643d 300a            end=0.
+00017c80: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+00017c90: 2072 616e 6765 286d 795f 6869 7374 6f72   range(my_histor
+00017ca0: 795f 615b 7374 6172 745d 2c6d 795f 6869  y_a[start],my_hi
+00017cb0: 7374 6f72 795f 615b 656e 645d 2c2d 3129  story_a[end],-1)
+00017cc0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00017cd0: 2074 7265 653a 0a20 2020 2020 2020 2020   tree:.         
+00017ce0: 2020 2020 2020 2069 6620 7370 6163 653a         if space:
+00017cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017d00: 2020 2020 2070 703d 277b 7d20 2d3e 207b       pp='{} -> {
+00017d10: 7d27 2e66 6f72 6d61 7428 7370 6163 652c  }'.format(space,
+00017d20: 6d79 5f68 6973 746f 7279 5b69 5d2e 6675  my_history[i].fu
+00017d30: 6e63 7469 6f6e 290a 2020 2020 2020 2020  nction).        
+00017d40: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00017d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d60: 2020 7070 3d6d 795f 6869 7374 6f72 795b    pp=my_history[
+00017d70: 695d 2e66 756e 6374 696f 6e0a 2020 2020  i].function.    
+00017d80: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+00017d90: 7020 3d3d 2027 3c6d 6f64 756c 653e 273a  p == '<module>':
+00017da0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017db0: 2020 2020 2069 6620 7368 6f77 3a0a 2020       if show:.  
+00017dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017dd0: 2020 2020 2020 7072 696e 7428 7070 290a        print(pp).
 00017de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017df0: 2020 2020 656c 6966 2066 696c 656e 616d      elif filenam
-00017e00: 653a 2070 703d 7070 2b27 2069 6e20 7b7d  e: pp=pp+' in {}
-00017e10: 272e 666f 726d 6174 286f 732e 7061 7468  '.format(os.path
-00017e20: 2e62 6173 656e 616d 6528 6d79 5f68 6973  .basename(my_his
-00017e30: 746f 7279 5b69 5d2e 6669 6c65 6e61 6d65  tory[i].filename
-00017e40: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00017e50: 2020 2020 2020 2069 6620 7368 6f77 3a0a         if show:.
-00017e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017e70: 2020 2020 2020 2020 7072 696e 7428 7070          print(pp
-00017e80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00017e90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00017ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017eb0: 2020 2020 7274 2e61 7070 656e 6428 7070      rt.append(pp
-00017ec0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00017ed0: 2020 7370 6163 653d 7370 6163 652b 2720    space=space+' 
-00017ee0: 2027 0a20 2020 2020 2020 2020 2020 2065   '.            e
-00017ef0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00017f00: 2020 2020 2069 6620 6f62 6a3a 0a20 2020       if obj:.   
-00017f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f20: 2069 6620 6675 6c6c 5f66 696c 656e 616d   if full_filenam
-00017f30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00017f40: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
-00017f50: 7065 6e64 2828 6d79 5f68 6973 746f 7279  pend((my_history
-00017f60: 5b69 5d2e 6675 6e63 7469 6f6e 2c46 7261  [i].function,Fra
-00017f70: 6d65 3246 756e 6374 696f 6e28 6d79 5f68  me2Function(my_h
-00017f80: 6973 746f 7279 5b69 5d2e 6672 616d 6529  istory[i].frame)
-00017f90: 2c6d 795f 6869 7374 6f72 795b 695d 2e6c  ,my_history[i].l
-00017fa0: 696e 656e 6f2c 6d79 5f68 6973 746f 7279  ineno,my_history
-00017fb0: 5b69 5d2e 6669 6c65 6e61 6d65 2929 0a20  [i].filename)). 
+00017df0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00017e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017e10: 2020 7274 2e61 7070 656e 6428 7070 290a    rt.append(pp).
+00017e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017e30: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00017e40: 2020 2020 2020 2020 2020 6966 2061 7267            if arg
+00017e50: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00017e60: 2020 2020 2020 2020 2020 2061 7267 3d46             arg=F
+00017e70: 756e 6374 696f 6e41 7267 7328 4672 616d  unctionArgs(Fram
+00017e80: 6532 4675 6e63 7469 6f6e 286d 795f 6869  e2Function(my_hi
+00017e90: 7374 6f72 795b 695d 2e66 7261 6d65 292c  story[i].frame),
+00017ea0: 6d6f 6465 3d27 7374 7269 6e67 272c 6465  mode='string',de
+00017eb0: 6661 756c 743d 2727 290a 2020 2020 2020  fault='').      
+00017ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017ed0: 2020 6966 2061 7267 3a20 7070 3d70 702b    if arg: pp=pp+
+00017ee0: 277b 7d27 2e66 6f72 6d61 7428 6172 6729  '{}'.format(arg)
+00017ef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017f00: 2020 2020 2020 2020 2065 6c73 653a 2070           else: p
+00017f10: 703d 7070 2b27 2829 270a 2020 2020 2020  p=pp+'()'.      
+00017f20: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00017f30: 206c 696e 655f 6e75 6d62 6572 3a20 7070   line_number: pp
+00017f40: 3d70 702b 2720 6174 207b 7d27 2e66 6f72  =pp+' at {}'.for
+00017f50: 6d61 7428 6d79 5f68 6973 746f 7279 5b69  mat(my_history[i
+00017f60: 5d2e 6c69 6e65 6e6f 290a 2020 2020 2020  ].lineno).      
+00017f70: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00017f80: 2066 756c 6c5f 6669 6c65 6e61 6d65 3a20   full_filename: 
+00017f90: 7070 3d70 702b 2720 696e 207b 7d27 2e66  pp=pp+' in {}'.f
+00017fa0: 6f72 6d61 7428 6d79 5f68 6973 746f 7279  ormat(my_history
+00017fb0: 5b69 5d2e 6669 6c65 6e61 6d65 290a 2020  [i].filename).  
 00017fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017fd0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00017fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ff0: 2072 742e 6170 7065 6e64 2828 6d79 5f68   rt.append((my_h
-00018000: 6973 746f 7279 5b69 5d2e 6675 6e63 7469  istory[i].functi
-00018010: 6f6e 2c46 7261 6d65 3246 756e 6374 696f  on,Frame2Functio
-00018020: 6e28 6d79 5f68 6973 746f 7279 5b69 5d2e  n(my_history[i].
-00018030: 6672 616d 6529 2c6d 795f 6869 7374 6f72  frame),my_histor
-00018040: 795b 695d 2e6c 696e 656e 6f2c 6f73 2e70  y[i].lineno,os.p
-00018050: 6174 682e 6261 7365 6e61 6d65 286d 795f  ath.basename(my_
-00018060: 6869 7374 6f72 795b 695d 2e66 696c 656e  history[i].filen
-00018070: 616d 6529 2929 0a20 2020 2020 2020 2020  ame))).         
-00018080: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00018090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000180a0: 2069 6620 6675 6c6c 5f66 696c 656e 616d   if full_filenam
-000180b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000180c0: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
-000180d0: 7065 6e64 2828 6d79 5f68 6973 746f 7279  pend((my_history
-000180e0: 5b69 5d2e 6675 6e63 7469 6f6e 2c6d 795f  [i].function,my_
-000180f0: 6869 7374 6f72 795b 695d 2e6c 696e 656e  history[i].linen
-00018100: 6f2c 6d79 5f68 6973 746f 7279 5b69 5d2e  o,my_history[i].
-00018110: 6669 6c65 6e61 6d65 2929 0a20 2020 2020  filename)).     
-00018120: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00018130: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00018140: 2020 2020 2020 2020 2020 2020 2072 742e               rt.
-00018150: 6170 7065 6e64 2828 6d79 5f68 6973 746f  append((my_histo
-00018160: 7279 5b69 5d2e 6675 6e63 7469 6f6e 2c6d  ry[i].function,m
+00017fd0: 2020 656c 6966 2066 696c 656e 616d 653a    elif filename:
+00017fe0: 2070 703d 7070 2b27 2069 6e20 7b7d 272e   pp=pp+' in {}'.
+00017ff0: 666f 726d 6174 286f 732e 7061 7468 2e62  format(os.path.b
+00018000: 6173 656e 616d 6528 6d79 5f68 6973 746f  asename(my_histo
+00018010: 7279 5b69 5d2e 6669 6c65 6e61 6d65 2929  ry[i].filename))
+00018020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018030: 2020 2020 2069 6620 7368 6f77 3a0a 2020       if show:.  
+00018040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018050: 2020 2020 2020 7072 696e 7428 7070 290a        print(pp).
+00018060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018070: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00018080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018090: 2020 7274 2e61 7070 656e 6428 7070 290a    rt.append(pp).
+000180a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000180b0: 7370 6163 653d 7370 6163 652b 2720 2027  space=space+'  '
+000180c0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+000180d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000180e0: 2020 2069 6620 6f62 6a3a 0a20 2020 2020     if obj:.     
+000180f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00018100: 6620 6675 6c6c 5f66 696c 656e 616d 653a  f full_filename:
+00018110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018120: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
+00018130: 6e64 2828 6d79 5f68 6973 746f 7279 5b69  nd((my_history[i
+00018140: 5d2e 6675 6e63 7469 6f6e 2c46 7261 6d65  ].function,Frame
+00018150: 3246 756e 6374 696f 6e28 6d79 5f68 6973  2Function(my_his
+00018160: 746f 7279 5b69 5d2e 6672 616d 6529 2c6d  tory[i].frame),m
 00018170: 795f 6869 7374 6f72 795b 695d 2e6c 696e  y_history[i].lin
-00018180: 656e 6f2c 6f73 2e70 6174 682e 6261 7365  eno,os.path.base
-00018190: 6e61 6d65 286d 795f 6869 7374 6f72 795b  name(my_history[
-000181a0: 695d 2e66 696c 656e 616d 6529 2929 0a20  i].filename))). 
-000181b0: 2020 2020 2020 2072 6574 7572 6e20 7274         return rt
-000181c0: 0a20 2020 2065 6c69 6620 6973 696e 7374  .    elif isinst
-000181d0: 616e 6365 2870 6172 656e 742c 696e 7429  ance(parent,int)
-000181e0: 3a20 2320 7369 6e67 6c65 2066 756e 6374  : # single funct
-000181f0: 696f 6e0a 2020 2020 2020 2020 6966 2070  ion.        if p
-00018200: 6172 656e 7420 3e3d 2030 3a0a 2020 2020  arent >= 0:.    
-00018210: 2020 2020 2020 2020 6c6f 633d 312b 7061          loc=1+pa
-00018220: 7265 6e74 0a20 2020 2020 2020 2065 6c73  rent.        els
-00018230: 653a 0a20 2020 2020 2020 2020 2020 206c  e:.            l
-00018240: 6f63 3d70 6172 656e 740a 2020 2020 2020  oc=parent.      
-00018250: 2020 6966 206c 656e 286d 795f 6869 7374    if len(my_hist
-00018260: 6f72 7929 203c 3d20 6c6f 633a 2023 6f75  ory) <= loc: #ou
-00018270: 7420 6f66 2072 616e 6765 0a20 2020 2020  t of range.     
-00018280: 2020 2020 2020 206c 6f63 3d2d 310a 2020         loc=-1.  
-00018290: 2020 2020 2020 6966 206f 626a 3a0a 2020        if obj:.  
-000182a0: 2020 2020 2020 2020 2020 2320 7265 7475            # retu
-000182b0: 726e 206e 616d 6520 616e 6420 6f62 6a65  rn name and obje
-000182c0: 6374 0a20 2020 2020 2020 2020 2020 2072  ct.            r
-000182d0: 6574 7572 6e20 286d 795f 6869 7374 6f72  eturn (my_histor
-000182e0: 795b 6c6f 635d 2e66 756e 6374 696f 6e2c  y[loc].function,
-000182f0: 4672 616d 6532 4675 6e63 7469 6f6e 286d  Frame2Function(m
-00018300: 795f 6869 7374 6f72 795b 6c6f 635d 2e66  y_history[loc].f
-00018310: 7261 6d65 2929 0a20 2020 2020 2020 2065  rame)).        e
-00018320: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00018330: 2072 743d 6d79 5f68 6973 746f 7279 5b6c   rt=my_history[l
-00018340: 6f63 5d2e 6675 6e63 7469 6f6e 0a20 2020  oc].function.   
-00018350: 2020 2020 2020 2020 2069 6620 6172 6773           if args
-00018360: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018370: 2020 6172 673d 4675 6e63 7469 6f6e 4172    arg=FunctionAr
-00018380: 6773 2846 7261 6d65 3246 756e 6374 696f  gs(Frame2Functio
-00018390: 6e28 6d79 5f68 6973 746f 7279 5b6c 6f63  n(my_history[loc
-000183a0: 5d2e 6672 616d 6529 2c6d 6f64 653d 2773  ].frame),mode='s
-000183b0: 7472 696e 6727 2c64 6566 6175 6c74 3d27  tring',default='
-000183c0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-000183d0: 2020 2069 6620 6172 673a 2072 743d 7274     if arg: rt=rt
-000183e0: 2b27 7b7d 272e 666f 726d 6174 2861 7267  +'{}'.format(arg
-000183f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00018400: 2020 656c 7365 3a20 7274 3d72 742b 2728    else: rt=rt+'(
-00018410: 2927 0a20 2020 2020 2020 2020 2020 2069  )'.            i
-00018420: 6620 6c69 6e65 5f6e 756d 6265 723a 2072  f line_number: r
-00018430: 743d 7274 2b27 2061 7420 7b7d 272e 666f  t=rt+' at {}'.fo
-00018440: 726d 6174 286d 795f 6869 7374 6f72 795b  rmat(my_history[
-00018450: 6c6f 635d 2e6c 696e 656e 6f29 0a20 2020  loc].lineno).   
-00018460: 2020 2020 2020 2020 2069 6620 6675 6c6c           if full
-00018470: 5f66 696c 656e 616d 653a 2072 743d 7274  _filename: rt=rt
-00018480: 2b27 2069 6e20 7b7d 272e 666f 726d 6174  +' in {}'.format
-00018490: 286d 795f 6869 7374 6f72 795b 6c6f 635d  (my_history[loc]
-000184a0: 2e66 696c 656e 616d 6529 0a20 2020 2020  .filename).     
-000184b0: 2020 2020 2020 2065 6c69 6620 6669 6c65         elif file
-000184c0: 6e61 6d65 3a20 7274 3d72 742b 2720 696e  name: rt=rt+' in
-000184d0: 207b 7d27 2e66 6f72 6d61 7428 6f73 2e70   {}'.format(os.p
-000184e0: 6174 682e 6261 7365 6e61 6d65 286d 795f  ath.basename(my_
-000184f0: 6869 7374 6f72 795b 6c6f 635d 2e66 696c  history[loc].fil
-00018500: 656e 616d 6529 290a 2020 2020 2020 2020  ename)).        
-00018510: 2020 2020 7265 7475 726e 2072 740a 0a64      return rt..d
-00018520: 6566 2046 756e 6374 696f 6e4c 6973 7428  ef FunctionList(
-00018530: 6f62 6a3d 4e6f 6e65 293a 0a20 2020 2027  obj=None):.    '
-00018540: 2727 0a20 2020 2047 6574 2066 756e 6374  ''.    Get funct
-00018550: 696f 6e20 6c69 7374 2069 6e20 7468 6973  ion list in this
-00018560: 206f 626a 6563 740a 2020 2020 2727 270a   object.    '''.
-00018570: 2020 2020 6161 3d7b 7d0a 2020 2020 6966      aa={}.    if
-00018580: 2069 7369 6e73 7461 6e63 6528 6f62 6a2c   isinstance(obj,
-00018590: 7374 7229 3a0a 2020 2020 2020 206f 626a  str):.       obj
-000185a0: 3d73 7973 2e6d 6f64 756c 6573 2e67 6574  =sys.modules.get
-000185b0: 286f 626a 290a 2020 2020 656c 6966 2049  (obj).    elif I
-000185c0: 734e 6f6e 6528 6f62 6a29 3a0a 2020 2020  sNone(obj):.    
-000185d0: 2020 206f 626a 3d4d 794d 6f64 756c 6528     obj=MyModule(
-000185e0: 6465 6661 756c 743d 4e6f 6e65 290a 2020  default=None).  
-000185f0: 2020 6966 2054 7970 6528 6f62 6a2c 2827    if Type(obj,('
-00018600: 636c 6173 736f 626a 272c 276d 6f64 756c  classobj','modul
-00018610: 6527 2c27 696e 7374 616e 6365 2729 293a  e','instance')):
-00018620: 0a20 2020 2020 2020 2069 6620 5479 7065  .        if Type
-00018630: 286f 626a 2c27 696e 7374 616e 6365 2729  (obj,'instance')
-00018640: 3a20 6f62 6a3d 6f62 6a2e 5f5f 636c 6173  : obj=obj.__clas
-00018650: 735f 5f20 2320 6d6f 7665 2043 4c41 5353  s__ # move CLASS
-00018660: 2829 2074 6f20 434c 4153 530a 2020 2020  () to CLASS.    
-00018670: 2020 2020 666f 7220 6e61 6d65 2c66 6f62      for name,fob
-00018680: 6a20 696e 2069 6e73 7065 6374 2e67 6574  j in inspect.get
-00018690: 6d65 6d62 6572 7328 6f62 6a29 3a0a 2020  members(obj):.  
-000186a0: 2020 2020 2020 2020 2020 6966 2069 6e73            if ins
-000186b0: 7065 6374 2e69 7366 756e 6374 696f 6e28  pect.isfunction(
-000186c0: 666f 626a 293a 0a20 2020 2020 2020 2020  fobj):.         
-000186d0: 2020 2020 2020 2061 612e 7570 6461 7465         aa.update
-000186e0: 287b 6e61 6d65 3a66 6f62 6a7d 290a 2020  ({name:fobj}).  
-000186f0: 2020 7265 7475 726e 2061 610a 0a64 6566    return aa..def
-00018700: 2047 6574 436c 6173 7328 6f62 6a2c 6465   GetClass(obj,de
-00018710: 6661 756c 743d 4e6f 6e65 293a 0a20 2020  fault=None):.   
-00018720: 2027 2727 0a20 2020 2047 6574 2043 6c61   '''.    Get Cla
-00018730: 7373 206f 626a 6563 7420 6672 6f6d 2069  ss object from i
-00018740: 6e73 7461 6e63 652c 6d65 7468 6f64 2c66  nstance,method,f
-00018750: 756e 6374 696f 6e0a 2020 2020 2727 270a  unction.    '''.
-00018760: 2020 2020 6f62 6a5f 7479 7065 3d54 7970      obj_type=Typ
-00018770: 654e 616d 6528 6f62 6a29 0a20 2020 2069  eName(obj).    i
-00018780: 6620 6f62 6a5f 7479 7065 2069 6e20 5b27  f obj_type in ['
-00018790: 696e 7374 616e 6365 275d 3a0a 2020 2020  instance']:.    
-000187a0: 2020 2020 6f62 6a3d 6f62 6a2e 5f5f 636c      obj=obj.__cl
-000187b0: 6173 735f 5f20 2320 436f 6e76 6572 7420  ass__ # Convert 
-000187c0: 696e 7374 616e 6365 2074 6f20 636c 6173  instance to clas
-000187d0: 736f 626a 0a20 2020 2020 2020 206f 626a  sobj.        obj
-000187e0: 5f74 7970 653d 5479 7065 4e61 6d65 286f  _type=TypeName(o
-000187f0: 626a 290a 2020 2020 6966 206f 626a 5f74  bj).    if obj_t
-00018800: 7970 6520 696e 205b 2763 6c61 7373 6f62  ype in ['classob
-00018810: 6a27 5d3a 2072 6574 7572 6e20 6f62 6a0a  j']: return obj.
-00018820: 2020 2020 6966 206f 626a 5f74 7970 6520      if obj_type 
-00018830: 696e 205b 276d 6574 686f 6427 5d3a 0a20  in ['method']:. 
-00018840: 2020 2020 2020 206f 626a 5f6e 616d 6520         obj_name 
-00018850: 3d20 6f62 6a2e 5f5f 6e61 6d65 5f5f 0a20  = obj.__name__. 
-00018860: 2020 2020 2020 2069 6620 6f62 6a2e 5f5f         if obj.__
-00018870: 7365 6c66 5f5f 3a0a 2020 2020 2020 2020  self__:.        
-00018880: 2020 2020 636c 6173 7365 7320 3d20 5b6f      classes = [o
-00018890: 626a 2e5f 5f73 656c 665f 5f2e 5f5f 636c  bj.__self__.__cl
-000188a0: 6173 735f 5f5d 0a20 2020 2020 2020 2065  ass__].        e
-000188b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000188c0: 2023 756e 626f 756e 6420 6d65 7468 6f64   #unbound method
-000188d0: 0a20 2020 2020 2020 2020 2020 2063 6c61  .            cla
-000188e0: 7373 6573 203d 205b 6f62 6a2e 696d 5f63  sses = [obj.im_c
-000188f0: 6c61 7373 5d0a 2020 2020 2020 2020 7768  lass].        wh
-00018900: 696c 6520 636c 6173 7365 733a 0a20 2020  ile classes:.   
-00018910: 2020 2020 2020 2020 2063 203d 2063 6c61           c = cla
-00018920: 7373 6573 2e70 6f70 2829 0a20 2020 2020  sses.pop().     
-00018930: 2020 2020 2020 2069 6620 6f62 6a5f 6e61         if obj_na
-00018940: 6d65 2069 6e20 632e 5f5f 6469 6374 5f5f  me in c.__dict__
-00018950: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018960: 2020 7265 7475 726e 2063 0a20 2020 2020    return c.     
-00018970: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00018980: 2020 2020 2020 2020 2020 2020 2063 6c61               cla
-00018990: 7373 6573 203d 206c 6973 7428 632e 5f5f  sses = list(c.__
-000189a0: 6261 7365 735f 5f29 202b 2063 6c61 7373  bases__) + class
-000189b0: 6573 0a20 2020 2065 6c69 6620 6f62 6a5f  es.    elif obj_
-000189c0: 7479 7065 2069 6e20 5b27 6675 6e63 7469  type in ['functi
-000189d0: 6f6e 275d 3a0a 2020 2020 2020 2020 6966  on']:.        if
-000189e0: 2050 7956 6572 2833 293a 0a20 2020 2020   PyVer(3):.     
-000189f0: 2020 2020 2020 2023 6361 6c6c 6572 5f6d         #caller_m
-00018a00: 6f64 756c 655f 6e61 6d65 3d69 6e73 7065  odule_name=inspe
-00018a10: 6374 2e63 7572 7265 6e74 6672 616d 6528  ct.currentframe(
-00018a20: 292e 665f 6261 636b 2e66 5f67 6c6f 6261  ).f_back.f_globa
-00018a30: 6c73 5b27 5f5f 6e61 6d65 5f5f 275d 0a20  ls['__name__']. 
-00018a40: 2020 2020 2020 2020 2020 2023 6361 6c6c             #call
-00018a50: 6572 5f6d 6f64 756c 653d 7379 732e 6d6f  er_module=sys.mo
-00018a60: 6475 6c65 735b 6361 6c6c 6572 5f6d 6f64  dules[caller_mod
-00018a70: 756c 655f 6e61 6d65 5d0a 2020 2020 2020  ule_name].      
-00018a80: 2020 2020 2020 6361 6c6c 6572 5f6d 6f64        caller_mod
-00018a90: 756c 653d 696e 7370 6563 742e 6765 746d  ule=inspect.getm
-00018aa0: 6f64 756c 6528 696e 7370 6563 742e 6375  odule(inspect.cu
-00018ab0: 7272 656e 7466 7261 6d65 2829 2e66 5f62  rrentframe().f_b
-00018ac0: 6163 6b29 0a20 2020 2020 2020 2020 2020  ack).           
-00018ad0: 2072 6574 7572 6e20 6765 7461 7474 7228   return getattr(
-00018ae0: 6361 6c6c 6572 5f6d 6f64 756c 655f 6e61  caller_module_na
-00018af0: 6d65 2c27 2e27 2e6a 6f69 6e28 6f62 6a2e  me,'.'.join(obj.
-00018b00: 5f5f 7175 616c 6e61 6d65 5f5f 2e73 706c  __qualname__.spl
-00018b10: 6974 2827 2e27 295b 3a2d 315d 2929 0a20  it('.')[:-1])). 
-00018b20: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-00018b30: 740a 0a64 6566 2046 756e 6374 696f 6e41  t..def FunctionA
-00018b40: 7267 7328 6675 6e63 2c2a 2a6f 7074 7329  rgs(func,**opts)
-00018b50: 3a0a 2020 2020 2727 270a 2020 2020 4765  :.    '''.    Ge
-00018b60: 7420 6675 6e63 7469 6f6e 2773 2069 6e70  t function's inp
-00018b70: 7574 2041 7267 756d 656e 7473 0a20 2020  ut Arguments.   
-00018b80: 202d 206d 6f64 650a 2020 2020 2020 2d20   - mode.      - 
-00018b90: 6465 6661 756c 7473 203a 2067 6574 2064  defaults : get d
-00018ba0: 6566 6175 6c74 2028 563d 3f2c 2e2e 2e29  efault (V=?,...)
-00018bb0: 0a20 2020 2020 202d 2061 7267 7320 2020  .      - args   
-00018bc0: 2020 3a20 6765 7420 6172 6773 2020 2856    : get args  (V
-00018bd0: 2c56 322c 2e2e 2e29 0a20 2020 2020 202d  ,V2,...).      -
-00018be0: 2076 6172 6172 6773 2020 3a20 6765 7420   varargs  : get 
-00018bf0: 7661 7261 7267 7320 282a 5629 0a20 2020  varargs (*V).   
-00018c00: 2020 202d 206b 6579 776f 7264 7320 3a20     - keywords : 
-00018c10: 6765 7420 6b65 7977 6f72 6473 2028 2a2a  get keywords (**
-00018c20: 5629 0a20 2020 2020 202d 2073 7472 696e  V).      - strin
-00018c30: 6720 2020 3a20 7265 7475 726e 2061 7267  g   : return arg
-00018c40: 756d 656e 7473 2074 6f20 7374 7269 6e67  uments to string
-00018c50: 2066 6f72 6d61 740a 2020 2020 2020 2d20   format.      - 
-00018c60: 6c69 7374 2c74 7570 6c65 3a20 7265 7475  list,tuple: retu
-00018c70: 726e 2061 7267 756d 656e 7473 2074 6f20  rn arguments to 
-00018c80: 6c69 7374 2066 6f72 6d61 740a 2020 2020  list format.    
-00018c90: 2020 6465 6661 756c 7420 6f75 7470 7574    default output
-00018ca0: 203a 2064 6963 7469 6f6e 6961 7279 2066   : dictioniary f
-00018cb0: 6f72 6d61 740a 2020 2020 2d20 6465 6661  ormat.    - defa
-00018cc0: 756c 7420 3a20 6966 206e 6f74 6869 6e67  ult : if nothing
-00018cd0: 2074 6865 6e20 7265 7475 726e 2064 6566   then return def
-00018ce0: 6175 6c74 2076 616c 7565 2028 6465 6661  ault value (defa
-00018cf0: 756c 7420 4e6f 6e65 290a 2020 2020 2727  ult None).    ''
-00018d00: 270a 2020 2020 6d6f 6465 3d6f 7074 732e  '.    mode=opts.
-00018d10: 6765 7428 276d 6f64 6527 2c6f 7074 732e  get('mode',opts.
-00018d20: 6765 7428 2766 6965 6c64 272c 2764 6566  get('field','def
-00018d30: 6175 6c74 7327 2929 0a20 2020 2064 6566  aults')).    def
-00018d40: 6175 6c74 3d6f 7074 732e 6765 7428 2764  ault=opts.get('d
-00018d50: 6566 6175 6c74 272c 4e6f 6e65 290a 2020  efault',None).  
-00018d60: 2020 2369 6620 6e6f 7420 5479 7065 2866    #if not Type(f
-00018d70: 756e 632c 2766 756e 6374 696f 6e27 2c27  unc,'function','
-00018d80: 6d65 7468 6f64 2729 3a0a 2020 2020 6966  method'):.    if
-00018d90: 206e 6f74 2049 7346 756e 6374 696f 6e28   not IsFunction(
-00018da0: 6675 6e63 293a 0a20 2020 2020 2020 2072  func):.        r
-00018db0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-00018dc0: 2020 7274 3d7b 7d0a 2020 2020 234e 6f74    rt={}.    #Not
-00018dd0: 2073 7570 706f 7274 202a 7620 7061 7261   support *v para
-00018de0: 6d65 7465 7220 7769 7468 2067 6574 6172  meter with getar
-00018df0: 6773 7065 6328 290a 2020 2020 2361 7267  gspec().    #arg
-00018e00: 732c 2076 6172 6172 6773 2c20 6b65 7977  s, varargs, keyw
-00018e10: 6f72 6473 2c20 6465 6661 756c 7473 203d  ords, defaults =
-00018e20: 2069 6e73 7065 6374 2e67 6574 6172 6773   inspect.getargs
-00018e30: 7065 6328 6675 6e63 290a 2020 2020 2369  pec(func).    #i
-00018e40: 6620 6e6f 7420 4973 4e6f 6e65 2864 6566  f not IsNone(def
-00018e50: 6175 6c74 7329 3a0a 2020 2020 2320 2020  aults):.    #   
-00018e60: 2064 6566 6175 6c74 733d 6469 6374 287a   defaults=dict(z
-00018e70: 6970 2861 7267 735b 2d6c 656e 2864 6566  ip(args[-len(def
-00018e80: 6175 6c74 7329 3a5d 2c20 6465 6661 756c  aults):], defaul
-00018e90: 7473 2929 0a20 2020 2023 2020 2020 6465  ts)).    #    de
-00018ea0: 6c20 6172 6773 5b2d 6c65 6e28 6465 6661  l args[-len(defa
-00018eb0: 756c 7473 293a 5d0a 2020 2020 2320 2020  ults):].    #   
-00018ec0: 2072 745b 2764 6566 6175 6c74 7327 5d3d   rt['defaults']=
-00018ed0: 6465 6661 756c 7473 0a20 2020 2023 2069  defaults.    # i
-00018ee0: 6e73 7065 6374 2e67 6574 6361 6c6c 6172  nspect.getcallar
-00018ef0: 6773 283c 6675 6e63 7469 6f6e 3e2c 6461  gs(<function>,da
-00018f00: 7461 732e 2e2e 2e29 203a 2061 7574 6f6d  tas....) : autom
-00018f10: 6174 6963 616c 6c79 206d 6174 6368 696e  atically matchin
-00018f20: 6720 616e 6420 7075 7420 746f 203c 6675  g and put to <fu
-00018f30: 6e63 7469 6f6e 733e 2773 2069 6e70 7574  nctions>'s input
-00018f40: 7320 3a20 4368 6563 6b20 6974 206c 6174  s : Check it lat
-00018f50: 6572 0a20 2020 2074 7279 3a0a 2020 2020  er.    try:.    
-00018f60: 2020 2020 6172 6720 3d20 696e 7370 6563      arg = inspec
-00018f70: 742e 6765 7466 756c 6c61 7267 7370 6563  t.getfullargspec
-00018f80: 2866 756e 6329 0a20 2020 2065 7863 6570  (func).    excep
-00018f90: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
-00018fa0: 6e20 7274 0a0a 2020 2020 6172 6773 3d61  n rt..    args=a
-00018fb0: 7267 2e61 7267 730a 2020 2020 7661 7261  rg.args.    vara
-00018fc0: 7267 733d 6172 672e 7661 7261 7267 730a  rgs=arg.varargs.
-00018fd0: 2020 2020 6b65 7977 6f72 6473 3d61 7267      keywords=arg
-00018fe0: 2e76 6172 6b77 0a20 2020 2064 6566 6175  .varkw.    defau
-00018ff0: 6c74 733d 6172 672e 6b77 6f6e 6c79 6465  lts=arg.kwonlyde
-00019000: 6661 756c 7473 0a20 2020 2069 6620 6e6f  faults.    if no
-00019010: 7420 4973 4e6f 6e65 2861 7267 2e64 6566  t IsNone(arg.def
-00019020: 6175 6c74 7329 3a0a 2020 2020 2020 2020  aults):.        
-00019030: 6966 2064 6566 6175 6c74 7320 6973 204e  if defaults is N
-00019040: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00019050: 2064 6566 6175 6c74 733d 6469 6374 287a   defaults=dict(z
-00019060: 6970 2861 7267 735b 2d6c 656e 2861 7267  ip(args[-len(arg
-00019070: 2e64 6566 6175 6c74 7329 3a5d 2c61 7267  .defaults):],arg
-00019080: 2e64 6566 6175 6c74 7329 290a 2020 2020  .defaults)).    
-00019090: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000190a0: 2020 2020 2020 6465 6661 756c 7473 2e75        defaults.u
-000190b0: 7064 6174 6528 6469 6374 287a 6970 2861  pdate(dict(zip(a
-000190c0: 7267 735b 2d6c 656e 2861 7267 2e64 6566  rgs[-len(arg.def
-000190d0: 6175 6c74 7329 3a5d 2c61 7267 2e64 6566  aults):],arg.def
-000190e0: 6175 6c74 7329 2929 0a20 2020 2020 2020  aults))).       
-000190f0: 2064 656c 2061 7267 735b 2d6c 656e 2861   del args[-len(a
-00019100: 7267 2e64 6566 6175 6c74 7329 3a5d 0a0a  rg.defaults):]..
-00019110: 2020 2020 6966 206e 6f74 2049 734e 6f6e      if not IsNon
-00019120: 6528 6465 6661 756c 7473 293a 2072 745b  e(defaults): rt[
-00019130: 2764 6566 6175 6c74 7327 5d3d 6465 6661  'defaults']=defa
-00019140: 756c 7473 0a20 2020 2069 6620 6172 6773  ults.    if args
-00019150: 3a0a 2020 2020 2020 2020 6966 2061 7267  :.        if arg
-00019160: 735b 305d 203d 3d20 2773 656c 6627 3a0a  s[0] == 'self':.
-00019170: 2020 2020 2020 2020 2020 2020 6172 6773              args
-00019180: 3d61 7267 735b 313a 5d0a 2020 2020 2020  =args[1:].      
-00019190: 2020 7274 5b27 6172 6773 275d 3d61 7267    rt['args']=arg
-000191a0: 730a 2020 2020 6966 2076 6172 6172 6773  s.    if varargs
-000191b0: 3a20 7274 5b27 7661 7261 7267 7327 5d3d  : rt['varargs']=
-000191c0: 7661 7261 7267 730a 2020 2020 6966 206b  varargs.    if k
-000191d0: 6579 776f 7264 733a 2072 745b 276b 6579  eywords: rt['key
-000191e0: 776f 7264 7327 5d3d 6b65 7977 6f72 6473  words']=keywords
-000191f0: 0a20 2020 2069 6620 5479 7065 286d 6f64  .    if Type(mod
-00019200: 652c 286c 6973 742c 7475 706c 6529 293a  e,(list,tuple)):
-00019210: 0a20 2020 2020 2020 2072 7473 3d5b 5d0a  .        rts=[].
-00019220: 2020 2020 2020 2020 666f 7220 6969 2069          for ii i
-00019230: 6e20 7274 3a0a 2020 2020 2020 2020 2020  n rt:.          
-00019240: 2020 7274 732e 6170 7065 6e64 2872 742e    rts.append(rt.
-00019250: 6765 7428 6969 2c64 6566 6175 6c74 2929  get(ii,default))
-00019260: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00019270: 7274 730a 2020 2020 656c 7365 3a0a 2020  rts.    else:.  
-00019280: 2020 2020 2020 6966 206d 6f64 6520 696e        if mode in
-00019290: 205b 2773 7472 272c 2773 7472 696e 6727   ['str','string'
-000192a0: 2c27 666f 726d 6174 275d 3a0a 2020 2020  ,'format']:.    
-000192b0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-000192c0: 7472 2869 6e73 7065 6374 2e73 6967 6e61  tr(inspect.signa
-000192d0: 7475 7265 2866 756e 6329 290a 2020 2020  ture(func)).    
-000192e0: 2020 2020 2020 2020 2361 7267 5f73 7472          #arg_str
-000192f0: 3d27 270a 2020 2020 2020 2020 2020 2020  =''.            
-00019300: 2369 6620 7274 3a0a 2020 2020 2020 2020  #if rt:.        
-00019310: 2020 2020 2320 2020 2066 6f72 207a 2069      #    for z i
-00019320: 6e20 7274 2e67 6574 2827 6172 6773 272c  n rt.get('args',
-00019330: 5b5d 293a 0a20 2020 2020 2020 2020 2020  []):.           
-00019340: 2023 2020 2020 2020 2020 2069 6620 6172   #         if ar
-00019350: 675f 7374 723a 0a20 2020 2020 2020 2020  g_str:.         
-00019360: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00019370: 2061 7267 5f73 7472 3d61 7267 5f73 7472   arg_str=arg_str
-00019380: 2b27 2c7b 7d27 2e66 6f72 6d61 7428 7a29  +',{}'.format(z)
-00019390: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000193a0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000193b0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-000193c0: 2020 2020 2020 2061 7267 5f73 7472 3d27         arg_str='
-000193d0: 7b7d 272e 666f 726d 6174 287a 290a 2020  {}'.format(z).  
-000193e0: 2020 2020 2020 2020 2020 2320 2020 2069            #    i
-000193f0: 6620 2776 6172 6172 6773 2720 696e 2072  f 'varargs' in r
-00019400: 743a 0a20 2020 2020 2020 2020 2020 2023  t:.            #
-00019410: 2020 2020 2020 2020 2069 6620 6172 675f           if arg_
-00019420: 7374 723a 0a20 2020 2020 2020 2020 2020  str:.           
-00019430: 2023 2020 2020 2020 2020 2020 2020 2061   #             a
-00019440: 7267 5f73 7472 3d61 7267 5f73 7472 2b27  rg_str=arg_str+'
-00019450: 2c2a 7b7d 272e 666f 726d 6174 2872 745b  ,*{}'.format(rt[
-00019460: 2776 6172 6172 6773 275d 290a 2020 2020  'varargs']).    
-00019470: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00019480: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00019490: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000194a0: 2020 6172 675f 7374 723d 272a 7b7d 272e    arg_str='*{}'.
-000194b0: 666f 726d 6174 2872 745b 2776 6172 6172  format(rt['varar
-000194c0: 6773 275d 290a 2020 2020 2020 2020 2020  gs']).          
-000194d0: 2020 2320 2020 2069 6620 2764 6566 6175    #    if 'defau
-000194e0: 6c74 7327 2069 6e20 7274 3a0a 2020 2020  lts' in rt:.    
-000194f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00019500: 2066 6f72 207a 2069 6e20 7274 5b27 6465   for z in rt['de
-00019510: 6661 756c 7473 275d 3a0a 2020 2020 2020  faults']:.      
-00019520: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00019530: 2020 2020 6966 2061 7267 5f73 7472 3a0a      if arg_str:.
-00019540: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-00019550: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-00019560: 675f 7374 723d 6172 675f 7374 722b 272c  g_str=arg_str+',
-00019570: 7b7d 3d27 2e66 6f72 6d61 7428 7a29 0a20  {}='.format(z). 
-00019580: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00019590: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-000195a0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-000195b0: 2020 2020 2020 2020 2020 2020 2061 7267               arg
-000195c0: 5f73 7472 3d27 7b7d 3d27 2e66 6f72 6d61  _str='{}='.forma
-000195d0: 7428 7a29 0a20 2020 2020 2020 2020 2020  t(z).           
-000195e0: 2023 2020 2020 2020 2020 2020 2020 2069   #             i
-000195f0: 6620 5479 7065 2872 745b 2764 6566 6175  f Type(rt['defau
-00019600: 6c74 7327 5d5b 7a5d 2c73 7472 293a 0a20  lts'][z],str):. 
-00019610: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00019620: 2020 2020 2020 2020 2020 2020 2061 7267               arg
-00019630: 5f73 7472 3d61 7267 5f73 7472 2b22 277b  _str=arg_str+"'{
-00019640: 7d27 222e 666f 726d 6174 2872 745b 2764  }'".format(rt['d
-00019650: 6566 6175 6c74 7327 5d5b 7a5d 290a 2020  efaults'][z]).  
-00019660: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00019670: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00019680: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00019690: 2020 2020 2020 2020 2020 2020 6172 675f              arg_
-000196a0: 7374 723d 6172 675f 7374 722b 227b 7d22  str=arg_str+"{}"
-000196b0: 2e66 6f72 6d61 7428 7274 5b27 6465 6661  .format(rt['defa
-000196c0: 756c 7473 275d 5b7a 5d29 0a20 2020 2020  ults'][z]).     
-000196d0: 2020 2020 2020 2023 2020 2020 6966 2027         #    if '
-000196e0: 6b65 7977 6f72 6473 2720 696e 2072 743a  keywords' in rt:
-000196f0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00019700: 2020 2020 2020 6966 2061 7267 5f73 7472        if arg_str
-00019710: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-00019720: 2020 2020 2020 2020 2020 2020 6172 675f              arg_
-00019730: 7374 723d 6172 675f 7374 722b 272c 2a2a  str=arg_str+',**
-00019740: 7b7d 272e 666f 726d 6174 2872 745b 276b  {}'.format(rt['k
-00019750: 6579 776f 7264 7327 5d29 0a20 2020 2020  eywords']).     
-00019760: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00019770: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00019780: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00019790: 6172 675f 7374 723d 272a 2a7b 7d27 2e66  arg_str='**{}'.f
-000197a0: 6f72 6d61 7428 7274 5b27 6b65 7977 6f72  ormat(rt['keywor
-000197b0: 6473 275d 290a 2020 2020 2020 2020 2020  ds']).          
-000197c0: 2020 2372 6574 7572 6e20 6172 675f 7374    #return arg_st
-000197d0: 720a 2020 2020 2020 2020 6966 206d 6f64  r.        if mod
-000197e0: 6520 696e 2072 743a 0a20 2020 2020 2020  e in rt:.       
-000197f0: 2020 2020 2072 6574 7572 6e20 7274 5b6d       return rt[m
-00019800: 6f64 655d 0a20 2020 2020 2020 2072 6574  ode].        ret
-00019810: 7572 6e20 7274 0a0a 6465 6620 4172 6773  urn rt..def Args
-00019820: 2873 7263 2c66 6965 6c64 3d27 616c 6c27  (src,field='all'
-00019830: 2c64 6566 6175 6c74 3d7b 7d29 3a0a 2020  ,default={}):.  
-00019840: 2020 2727 270a 2020 2020 4765 7420 436c    '''.    Get Cl
-00019850: 6173 732c 2069 6e73 7461 6e63 6527 7320  ass, instance's 
-00019860: 676c 6f62 616c 2061 7267 756d 656e 7473  global arguments
-00019870: 0a20 2020 2047 6574 2046 756e 6374 696f  .    Get Functio
-00019880: 6e20 696e 7075 7420 7061 7261 6d65 7465  n input paramete
-00019890: 7273 0a20 2020 2027 2727 0a20 2020 2072  rs.    '''.    r
-000198a0: 743d 7b7d 0a20 2020 2069 6620 5479 7065  t={}.    if Type
-000198b0: 2873 7263 2c28 2763 6c61 7373 6f62 6a27  (src,('classobj'
-000198c0: 2c27 696e 7374 616e 6365 2729 293a 0a20  ,'instance')):. 
-000198d0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-000198e0: 2020 2020 2020 2020 7372 633d 6765 7461          src=geta
-000198f0: 7474 7228 7372 632c 275f 5f69 6e69 745f  ttr(src,'__init_
-00019900: 5f27 290a 2020 2020 2020 2020 6578 6365  _').        exce
-00019910: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-00019920: 7265 7475 726e 2073 7263 2e5f 5f64 6963  return src.__dic
-00019930: 745f 5f0a 2020 2020 2365 6c69 6620 6e6f  t__.    #elif no
-00019940: 7420 5479 7065 2873 7263 2c27 6675 6e63  t Type(src,'func
-00019950: 7469 6f6e 2729 3a0a 2020 2020 656c 6966  tion'):.    elif
-00019960: 206e 6f74 2049 7346 756e 6374 696f 6e28   not IsFunction(
-00019970: 7372 6329 3a0a 2020 2020 2020 2020 7265  src):.        re
-00019980: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-00019990: 2072 6574 7572 6e20 4675 6e63 7469 6f6e   return Function
-000199a0: 4172 6773 2873 7263 2c6d 6f64 653d 6669  Args(src,mode=fi
-000199b0: 656c 642c 6465 6661 756c 743d 6465 6661  eld,default=defa
-000199c0: 756c 7429 0a0a 6465 6620 5661 7269 6162  ult)..def Variab
-000199d0: 6c65 2873 7263 3d4e 6f6e 652c 6f62 6a3d  le(src=None,obj=
-000199e0: 4e6f 6e65 2c70 6172 656e 743d 302c 6869  None,parent=0,hi
-000199f0: 7374 6f72 793d 4661 6c73 652c 6465 6661  story=False,defa
-00019a00: 756c 743d 4661 6c73 652c 6d6f 6465 3d27  ult=False,mode='
-00019a10: 6c6f 6361 6c27 2c56 6172 5479 7065 3d4e  local',VarType=N
-00019a20: 6f6e 652c 616c 6c74 7970 653d 5472 7565  one,alltype=True
-00019a30: 293a 0a20 2020 2027 2727 0a20 2020 2047  ):.    '''.    G
-00019a40: 6574 2061 7661 696c 6162 6c65 2076 6172  et available var
-00019a50: 6961 626c 6520 6461 7461 0a20 2020 2020  iable data.     
-00019a60: 2d20 7372 633a 200a 2020 2020 2020 2069  - src: .       i
-00019a70: 6620 4e6f 6e65 3a20 7265 7475 726e 2077  f None: return w
-00019a80: 686f 6c65 2065 6e76 6972 6f6e 6d65 6e74  hole environment
-00019a90: 2028 6469 6374 290a 2020 2020 2020 2069   (dict).       i
-00019aa0: 6620 7374 7269 6e67 2074 6865 6e20 6669  f string then fi
-00019ab0: 6e64 2074 6865 2073 7472 696e 6720 7661  nd the string va
-00019ac0: 7269 6162 6c65 2069 6e20 7468 6520 656e  riable in the en
-00019ad0: 7669 726f 6e6d 656e 740a 2020 2020 2020  vironment.      
-00019ae0: 2069 6620 7661 7269 6162 6c65 2074 6865   if variable the
-00019af0: 6e20 7265 7475 726e 2074 6861 740a 2020  n return that.  
-00019b00: 2020 202d 2070 6172 656e 7420 0a20 2020     - parent .   
-00019b10: 2020 2020 3020 3a20 6d79 2066 756e 6374      0 : my funct
-00019b20: 696f 6e20 2864 6566 6175 6c74 290a 2020  ion (default).  
-00019b30: 2020 2020 2031 203a 206d 7920 7061 7265       1 : my pare
-00019b40: 6e74 7320 6675 6e63 7469 6f6e 0a20 2020  nts function.   
-00019b50: 2020 2020 2e2e 2e0a 2020 2020 202d 2068      ....     - h
-00019b60: 6973 746f 7279 3a20 6672 6f6d 206d 6520  istory: from me 
-00019b70: 746f 206d 7920 746f 7020 6f66 2074 6865  to my top of the
-00019b80: 2066 756e 6374 696f 6e73 0a20 2020 2020   functions.     
-00019b90: 2d20 6d6f 6465 2020 3a20 7661 7269 6162  - mode  : variab
-00019ba0: 6c65 2061 7265 610a 2020 2020 2020 206c  le area.       l
-00019bb0: 6f63 616c 203a 2066 756e 6374 696f 6e27  ocal : function'
-00019bc0: 7320 6c6f 6361 6c28 696e 7369 6465 2920  s local(inside) 
-00019bd0: 7661 7269 6162 6c65 0a20 2020 2020 2020  variable.       
-00019be0: 676c 6f62 616c 3a20 6675 6e63 7469 6f6e  global: function
-00019bf0: 2773 2067 6c6f 6261 6c20 7661 7269 6162  's global variab
-00019c00: 6c65 0a20 2020 2027 2727 0a20 2020 2073  le.    '''.    s
-00019c10: 7263 5f74 7970 653d 5479 7065 4e61 6d65  rc_type=TypeName
-00019c20: 2873 7263 290a 2020 2020 6f62 6a5f 7479  (src).    obj_ty
-00019c30: 7065 3d54 7970 654e 616d 6528 6f62 6a29  pe=TypeName(obj)
-00019c40: 0a20 2020 2070 6172 656e 743d 496e 7428  .    parent=Int(
-00019c50: 7061 7265 6e74 290a 2020 2020 6966 206e  parent).    if n
-00019c60: 6f74 2069 7369 6e73 7461 6e63 6528 7061  ot isinstance(pa
-00019c70: 7265 6e74 2c69 6e74 293a 2070 6172 656e  rent,int): paren
-00019c80: 743d 300a 2020 2020 6966 2070 6172 656e  t=0.    if paren
-00019c90: 7420 3e3d 2030 3a0a 2020 2020 2020 2020  t >= 0:.        
-00019ca0: 6c6f 633d 312b 7061 7265 6e74 0a20 2020  loc=1+parent.   
-00019cb0: 2065 6c73 653a 0a20 2020 2020 2020 206c   else:.        l
-00019cc0: 6f63 3d70 6172 656e 740a 2020 2020 696e  oc=parent.    in
-00019cd0: 7370 7374 3d69 6e73 7065 6374 2e73 7461  spst=inspect.sta
-00019ce0: 636b 2829 0a20 2020 2023 696e 7370 6563  ck().    #inspec
-00019cf0: 742e 7374 6163 6b28 295b 6465 7074 685d  t.stack()[depth]
-00019d00: 5b30 5d20 3a20 6672 616d 6520 0a20 2020  [0] : frame .   
-00019d10: 2023 696e 7370 6563 742e 6765 746d 656d   #inspect.getmem
-00019d20: 6265 7273 2866 7261 6d65 2920 3a20 656e  bers(frame) : en
-00019d30: 7669 726f 6e6d 656e 7473 0a20 2020 2069  vironments.    i
-00019d40: 6620 6c65 6e28 696e 7370 7374 2920 3c3d  f len(inspst) <=
-00019d50: 206c 6f63 3a20 236f 7574 206f 6620 7261   loc: #out of ra
-00019d60: 6e67 650a 2020 2020 2020 2020 6c6f 633d  nge.        loc=
-00019d70: 2d31 0a20 2020 2072 743d 7b7d 0a20 2020  -1.    rt={}.   
-00019d80: 2069 6620 6f62 6a5f 7479 7065 2069 6e20   if obj_type in 
-00019d90: 5b27 6d6f 6475 6c65 272c 2763 6c61 7373  ['module','class
-00019da0: 6f62 6a27 2c27 696e 7374 616e 6365 275d  obj','instance']
-00019db0: 3a0a 2020 2020 2020 2020 7274 2e75 7064  :.        rt.upd
-00019dc0: 6174 6528 6f62 6a2e 5f5f 6469 6374 5f5f  ate(obj.__dict__
-00019dd0: 290a 2020 2020 656c 7365 3a20 2320 676c  ).    else: # gl
-00019de0: 6f62 616c 2061 6e64 206c 6f63 616c 7320  obal and locals 
-00019df0: 7661 7269 6162 6c65 7320 6672 6f6d 206d  variables from m
-00019e00: 6520 746f 2074 6f70 0a20 2020 2020 2020  e to top.       
-00019e10: 2069 6620 6869 7374 6f72 793a 0a20 2020   if history:.   
-00019e20: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
-00019e30: 6e20 7261 6e67 6528 6c65 6e28 696e 7370  n range(len(insp
-00019e40: 7374 292d 312c 302c 2d31 293a 0a20 2020  st)-1,0,-1):.   
-00019e50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00019e60: 6d6f 6465 2069 6e20 5b27 676c 6f62 616c  mode in ['global
-00019e70: 272c 2761 6c6c 275d 3a0a 2020 2020 2020  ','all']:.      
-00019e80: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-00019e90: 2e75 7064 6174 6528 6469 6374 2869 6e73  .update(dict(ins
-00019ea0: 7065 6374 2e67 6574 6d65 6d62 6572 7328  pect.getmembers(
-00019eb0: 696e 7370 7374 5b69 5d5b 305d 2929 5b22  inspst[i][0]))["
-00019ec0: 665f 676c 6f62 616c 7322 5d29 0a20 2020  f_globals"]).   
-00019ed0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00019ee0: 6d6f 6465 2069 6e20 5b27 6c6f 6361 6c27  mode in ['local'
-00019ef0: 2c27 616c 6c27 5d3a 0a20 2020 2020 2020  ,'all']:.       
-00019f00: 2020 2020 2020 2020 2020 2020 2072 742e               rt.
-00019f10: 7570 6461 7465 2864 6963 7428 696e 7370  update(dict(insp
-00019f20: 6563 742e 6765 746d 656d 6265 7273 2869  ect.getmembers(i
-00019f30: 6e73 7073 745b 695d 5b30 5d29 295b 2266  nspst[i][0]))["f
-00019f40: 5f6c 6f63 616c 7322 5d29 0a20 2020 2020  _locals"]).     
-00019f50: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00019f60: 2020 2020 2069 6620 6d6f 6465 2069 6e20       if mode in 
-00019f70: 5b27 676c 6f62 616c 272c 2761 6c6c 275d  ['global','all']
-00019f80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00019f90: 2020 7274 2e75 7064 6174 6528 6469 6374    rt.update(dict
-00019fa0: 2869 6e73 7065 6374 2e67 6574 6d65 6d62  (inspect.getmemb
-00019fb0: 6572 7328 696e 7370 7374 5b6c 6f63 5d5b  ers(inspst[loc][
-00019fc0: 305d 2929 5b22 665f 676c 6f62 616c 7322  0]))["f_globals"
-00019fd0: 5d29 0a20 2020 2020 2020 2020 2020 2069  ]).            i
-00019fe0: 6620 6d6f 6465 2069 6e20 5b27 6c6f 6361  f mode in ['loca
-00019ff0: 6c27 2c27 616c 6c27 5d3a 0a20 2020 2020  l','all']:.     
-0001a000: 2020 2020 2020 2020 2020 2072 742e 7570             rt.up
-0001a010: 6461 7465 2864 6963 7428 696e 7370 6563  date(dict(inspec
-0001a020: 742e 6765 746d 656d 6265 7273 2869 6e73  t.getmembers(ins
-0001a030: 7073 745b 6c6f 635d 5b30 5d29 295b 2266  pst[loc][0]))["f
-0001a040: 5f6c 6f63 616c 7322 5d29 0a20 2020 2069  _locals"]).    i
-0001a050: 6620 7372 635f 7479 7065 3d3d 276e 6f6e  f src_type=='non
-0001a060: 6574 7970 6527 3a0a 2020 2020 2020 2020  etype':.        
-0001a070: 6966 2061 6c6c 7479 7065 3a0a 2020 2020  if alltype:.    
-0001a080: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-0001a090: 740a 2020 2020 2020 2020 6f3d 7b7d 0a20  t.        o={}. 
-0001a0a0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0001a0b0: 7274 3a0a 2020 2020 2020 2020 2020 2020  rt:.            
-0001a0c0: 6966 2069 2069 6e20 2827 5f5f 6275 696c  if i in ('__buil
-0001a0d0: 7469 6e73 5f5f 272c 275f 5f63 6163 6865  tins__','__cache
-0001a0e0: 645f 5f27 2c27 6d6f 6475 6c65 7327 2c27  d__','modules','
-0001a0f0: 6d6f 645f 7061 7468 2729 206f 7220 5479  mod_path') or Ty
-0001a100: 7065 4e61 6d65 2872 745b 695d 2920 696e  peName(rt[i]) in
-0001a110: 2028 2766 756e 6374 696f 6e27 2c27 6d6f   ('function','mo
-0001a120: 6475 6c65 272c 2763 6c61 7373 6f62 6a27  dule','classobj'
-0001a130: 2c27 696e 7374 616e 6365 272c 2762 7569  ,'instance','bui
-0001a140: 6c74 696e 5f66 756e 6374 696f 6e5f 6f72  ltin_function_or
-0001a150: 5f6d 6574 686f 6427 2c27 6d65 7468 6f64  _method','method
-0001a160: 2729 3a20 0a20 2020 2020 2020 2020 2020  '): .           
-0001a170: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
-0001a180: 2020 2020 2020 2020 2020 6f5b 695d 3d72            o[i]=r
-0001a190: 745b 695d 0a20 2020 2020 2020 2072 6574  t[i].        ret
-0001a1a0: 7572 6e20 6f0a 2020 2020 656c 6966 2073  urn o.    elif s
-0001a1b0: 7263 5f74 7970 6520 3d3d 2027 7374 7227  rc_type == 'str'
-0001a1c0: 3a0a 2020 2020 2020 2020 6f75 743d 7274  :.        out=rt
-0001a1d0: 2e67 6574 2873 7263 2c64 6566 6175 6c74  .get(src,default
-0001a1e0: 290a 2020 2020 2020 2020 6966 2056 6172  ).        if Var
-0001a1f0: 5479 7065 3a20 2320 6966 2070 7574 2065  Type: # if put e
-0001a200: 7870 6563 7465 6420 7479 7065 2074 6865  xpected type the
-0001a210: 6e0a 2020 2020 2020 2020 2020 2020 6966  n.            if
-0001a220: 2054 7970 6528 6f75 742c 5661 7254 7970   Type(out,VarTyp
-0001a230: 6529 3a20 7265 7475 726e 206f 7574 2023  e): return out #
-0001a240: 2069 6620 6765 7474 696e 6720 6461 7461   if getting data
-0001a250: 2069 7320 6578 7065 6374 6564 2074 7970   is expected typ
-0001a260: 6520 7468 656e 200a 2020 2020 2020 2020  e then .        
-0001a270: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-0001a280: 6c74 2023 2069 6620 6e6f 7420 6578 7065  lt # if not expe
-0001a290: 6374 6564 2074 6865 6e20 7265 7475 726e  cted then return
-0001a2a0: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
-0001a2b0: 2072 6574 7572 6e20 6f75 7420 2320 6a75   return out # ju
-0001a2c0: 7374 2072 6574 7572 6e20 676f 7474 656e  st return gotten
-0001a2d0: 2064 6174 610a 2020 2020 2020 2020 2369   data.        #i
-0001a2e0: 6620 6f62 6a5f 7479 7065 2069 6e20 5b27  f obj_type in ['
-0001a2f0: 6d6f 6475 6c65 275d 3a0a 2020 2020 2020  module']:.      
-0001a300: 2020 2320 2020 2023 2067 6574 6174 7472    #    # getattr
-0001a310: 283c 636c 6173 733e 2c27 6e61 6d65 2729  (<class>,'name')
-0001a320: 203a 2047 6574 2064 6174 610a 2020 2020   : Get data.    
-0001a330: 2020 2020 2320 2020 2023 2068 6173 6174      #    # hasat
-0001a340: 7472 283c 636c 6173 733e 2c27 6e61 6d65  tr(<class>,'name
-0001a350: 2729 203a 2063 6865 636b 206e 616d 650a  ') : check name.
-0001a360: 2020 2020 2020 2020 2320 2020 2023 2073          #    # s
-0001a370: 6574 6174 7472 283c 636c 6173 733e 2c27  etattr(<class>,'
-0001a380: 6e61 6d65 2729 203a 2075 7064 6174 6520  name') : update 
-0001a390: 746f 206e 616d 650a 2020 2020 2020 2020  to name.        
-0001a3a0: 2320 2020 2023 2064 656c 6174 7472 283c  #    # delattr(<
-0001a3b0: 636c 6173 733e 2c27 6e61 6d65 2729 203a  class>,'name') :
-0001a3c0: 2072 656d 6f76 6520 6e61 6d65 0a20 2020   remove name.   
-0001a3d0: 2020 2020 2023 2020 2020 6966 2068 6173       #    if has
-0001a3e0: 6174 7472 286f 626a 2c73 7263 293a 2072  attr(obj,src): r
-0001a3f0: 6574 7572 6e20 6765 7461 7474 7228 6f62  eturn getattr(ob
-0001a400: 6a2c 7372 6329 0a20 2020 2020 2020 2023  j,src).        #
-0001a410: 656c 6966 206f 626a 5f74 7970 6520 696e  elif obj_type in
-0001a420: 205b 2763 6c61 7373 275d 3a0a 2020 2020   ['class']:.    
-0001a430: 2020 2020 2320 2020 206f 626a 3d6f 626a      #    obj=obj
-0001a440: 2829 0a20 2020 2020 2020 2023 2020 2020  ().        #    
-0001a450: 6966 2068 6173 6174 7472 286f 626a 2c73  if hasattr(obj,s
-0001a460: 7263 293a 2072 6574 7572 6e20 6765 7461  rc): return geta
-0001a470: 7474 7228 6f62 6a2c 7372 6329 0a20 2020  ttr(obj,src).   
-0001a480: 2020 2020 2023 656c 7365 3a20 234e 6f20       #else: #No 
-0001a490: 6f62 6a65 6374 0a20 2020 2020 2020 2023  object.        #
-0001a4a0: 2020 2020 6f75 743d 7274 2e67 6574 2873      out=rt.get(s
-0001a4b0: 7263 2c64 6566 6175 6c74 290a 2020 2020  rc,default).    
-0001a4c0: 2020 2020 2320 2020 2069 6620 5661 7254      #    if VarT
-0001a4d0: 7970 653a 2023 2069 6620 7075 7420 6578  ype: # if put ex
-0001a4e0: 7065 6374 6564 2074 7970 6520 7468 656e  pected type then
-0001a4f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0001a500: 2020 6966 2054 7970 6528 6f75 742c 5661    if Type(out,Va
-0001a510: 7254 7970 6529 3a20 7265 7475 726e 206f  rType): return o
-0001a520: 7574 2023 2069 6620 6765 7474 696e 6720  ut # if getting 
-0001a530: 6461 7461 2069 7320 6578 7065 6374 6564  data is expected
-0001a540: 2074 7970 6520 7468 656e 200a 2020 2020   type then .    
-0001a550: 2020 2020 2320 2020 2020 2020 2072 6574      #        ret
-0001a560: 7572 6e20 6465 6661 756c 7420 2320 6966  urn default # if
-0001a570: 206e 6f74 2065 7870 6563 7465 6420 7468   not expected th
-0001a580: 656e 2072 6574 7572 6e20 6465 6661 756c  en return defaul
-0001a590: 740a 2020 2020 2020 2020 2320 2020 2072  t.        #    r
-0001a5a0: 6574 7572 6e20 6f75 7420 2320 6a75 7374  eturn out # just
-0001a5b0: 2072 6574 7572 6e20 676f 7474 656e 2064   return gotten d
-0001a5c0: 6174 610a 2020 2020 7265 7475 726e 2064  ata.    return d
-0001a5d0: 6566 6175 6c74 0a0a 6465 6620 556e 6971  efault..def Uniq
-0001a5e0: 2873 7263 2c64 6566 6175 6c74 3d27 6f72  (src,default='or
-0001a5f0: 6727 2c73 6f72 743d 4661 6c73 652c 7374  g',sort=False,st
-0001a600: 7269 703d 4661 6c73 652c 6373 7472 6970  rip=False,cstrip
-0001a610: 3d46 616c 7365 293a 0a20 2020 2027 2727  =False):.    '''
-0001a620: 0a20 2020 206d 616b 6520 746f 2075 6e69  .    make to uni
-0001a630: 7120 6461 7461 0a20 2020 2064 6566 6175  q data.    defau
-0001a640: 6c74 3d27 6f72 6727 3a20 7265 7475 726e  lt='org': return
-0001a650: 206f 7269 6769 6e61 6c20 6461 7461 0a20   original data. 
-0001a660: 2020 2073 6f72 743d 4661 6c73 6520 2020     sort=False   
-0001a670: 3a20 736f 7274 2064 6174 610a 2020 2020  : sort data.    
-0001a680: 7374 7269 703d 4661 6c73 6520 203a 2072  strip=False  : r
-0001a690: 656d 6f76 6520 7768 6974 6520 7370 6163  emove white spac
-0001a6a0: 6520 616e 6420 6d61 6b65 2074 6f20 756e  e and make to un
-0001a6b0: 6971 0a20 2020 2063 7374 7269 703d 4661  iq.    cstrip=Fa
-0001a6c0: 6c73 6520 3a20 6368 6563 6b20 7769 7468  lse : check with
-0001a6d0: 6f75 7420 7768 6974 6520 7370 6163 652c  out white space,
-0001a6e0: 2062 7574 2072 656d 6169 6e20 6669 7273   but remain firs
-0001a6f0: 7420 7369 6d69 6c61 7220 6461 7461 0a20  t similar data. 
-0001a700: 2020 2027 2727 0a20 2020 2069 6620 6973     '''.    if is
-0001a710: 696e 7374 616e 6365 2873 7263 2c28 6c69  instance(src,(li
-0001a720: 7374 2c74 7570 6c65 2929 3a0a 2020 2020  st,tuple)):.    
-0001a730: 2020 2020 7274 3d5b 5d0a 2020 2020 2020      rt=[].      
-0001a740: 2020 6966 2063 7374 7269 703a 0a20 2020    if cstrip:.   
-0001a750: 2020 2020 2020 2020 206e 7372 633d 5b69           nsrc=[i
-0001a760: 2e73 7472 6970 2829 2069 6620 6973 696e  .strip() if isin
-0001a770: 7374 616e 6365 2869 2c28 7374 722c 6279  stance(i,(str,by
-0001a780: 7465 7329 2920 656c 7365 2069 2066 6f72  tes)) else i for
-0001a790: 2069 2069 6e20 7372 635d 0a20 2020 2020   i in src].     
-0001a7a0: 2020 2020 2020 2063 3d5b 5d0a 2020 2020         c=[].    
-0001a7b0: 2020 2020 2020 2020 666f 7220 692c 6420          for i,d 
-0001a7c0: 696e 2065 6e75 6d65 7261 7465 286e 7372  in enumerate(nsr
-0001a7d0: 6329 3a0a 2020 2020 2020 2020 2020 2020  c):.            
-0001a7e0: 2020 2020 6966 2064 206e 6f74 2069 6e20      if d not in 
-0001a7f0: 633a 0a20 2020 2020 2020 2020 2020 2020  c:.             
-0001a800: 2020 2020 2020 2063 2e61 7070 656e 6428         c.append(
-0001a810: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
-0001a820: 2020 2020 2020 2072 742e 6170 7065 6e64         rt.append
-0001a830: 2873 7263 5b69 5d29 0a20 2020 2020 2020  (src[i]).       
-0001a840: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001a850: 2020 2069 6620 7374 7269 703a 0a20 2020     if strip:.   
-0001a860: 2020 2020 2020 2020 2020 2020 2073 7263               src
-0001a870: 3d5b 692e 7374 7269 7028 2920 6966 2069  =[i.strip() if i
-0001a880: 7369 6e73 7461 6e63 6528 692c 2873 7472  sinstance(i,(str
-0001a890: 2c62 7974 6573 2929 2065 6c73 6520 6920  ,bytes)) else i 
-0001a8a0: 666f 7220 6920 696e 2073 7263 5d0a 2020  for i in src].  
-0001a8b0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-0001a8c0: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
-0001a8d0: 2020 2020 2020 2020 6966 2069 206e 6f74          if i not
-0001a8e0: 2069 6e20 7274 3a20 7274 2e61 7070 656e   in rt: rt.appen
-0001a8f0: 6428 6929 0a20 2020 2020 2020 2069 6620  d(i).        if 
-0001a900: 736f 7274 3a20 7274 3d53 6f72 7428 7274  sort: rt=Sort(rt
-0001a910: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0001a920: 2074 7570 6c65 2872 7429 2069 6620 6973   tuple(rt) if is
-0001a930: 696e 7374 616e 6365 2873 7263 2c74 7570  instance(src,tup
-0001a940: 6c65 2920 656c 7365 2072 740a 2020 2020  le) else rt.    
-0001a950: 7265 7475 726e 2044 6566 6175 6c74 2873  return Default(s
-0001a960: 7263 2c64 6566 6175 6c74 290a 0a64 6566  rc,default)..def
-0001a970: 2053 706c 6974 2873 7263 2c73 796d 626f   Split(src,symbo
-0001a980: 6c3d 4e6f 6e65 2c64 6566 6175 6c74 3d5b  l=None,default=[
-0001a990: 5d2c 7379 6d5f 7370 6c69 7465 723d 277c  ],sym_spliter='|
-0001a9a0: 272c 6c69 7374 6f6e 6c79 3d54 7275 6529  ',listonly=True)
-0001a9b0: 3a0a 2020 2020 2727 270a 2020 2020 6d75  :.    '''.    mu
-0001a9c0: 6c74 6970 756c 2073 706c 6974 2074 6865  ltipul split the
-0001a9d0: 6e20 2761 7c62 7c2e 2e2e 270a 2020 2020  n 'a|b|...'.    
-0001a9e0: 7769 7468 6f75 7420 227c 2220 7468 656e  without "|" then
-0001a9f0: 2073 616d 6520 6173 2073 7472 696e 6720   same as string 
-0001aa00: 7370 6c69 7420 6675 6e63 7469 6f6e 0a20  split function. 
-0001aa10: 2020 2073 796d 626f 6c3d 4e6f 6e65 206f     symbol=None o
-0001aa20: 7220 273a 7768 6974 6573 7061 6365 3a27  r ':whitespace:'
-0001aa30: 203a 2052 656d 6f74 6520 7768 6974 6520   : Remote white 
-0001aa40: 7370 6163 6520 616e 6420 7370 6c69 7420  space and split 
-0001aa50: 7769 7468 2073 696e 676c 6520 7370 6163  with single spac
-0001aa60: 6528 2720 2729 0a20 2020 2027 2727 0a20  e(' ').    '''. 
-0001aa70: 2020 2023 5359 4d42 4f4c 2053 706c 6974     #SYMBOL Split
-0001aa80: 0a20 2020 2069 6620 5479 7065 2873 7263  .    if Type(src
-0001aa90: 2c28 7374 722c 6279 7465 7329 293a 0a20  ,(str,bytes)):. 
-0001aaa0: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-0001aab0: 2069 7320 4e6f 6e65 206f 7220 4973 5361   is None or IsSa
-0001aac0: 6d65 2873 796d 626f 6c2c 273a 7768 6974  me(symbol,':whit
-0001aad0: 6573 7061 6365 3a27 293a 0a20 2020 2020  espace:'):.     
-0001aae0: 2020 2020 2020 2072 6574 7572 6e20 7372         return sr
-0001aaf0: 632e 7370 6c69 7428 290a 2020 2020 2020  c.split().      
-0001ab00: 2020 656c 6966 206e 6f74 2054 7970 6528    elif not Type(
-0001ab10: 7379 6d62 6f6c 2c28 7374 722c 6279 7465  symbol,(str,byte
-0001ab20: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
-0001ab30: 2073 796d 626f 6c3d 2720 270a 2020 2020   symbol=' '.    
-0001ab40: 2020 2020 6966 206c 656e 2873 796d 626f      if len(symbo
-0001ab50: 6c29 203e 2031 3a0a 2020 2020 2020 2020  l) > 1:.        
-0001ab60: 2020 2020 6966 2073 796d 5f73 706c 6974      if sym_split
-0001ab70: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-0001ab80: 2020 2020 6966 2054 7970 6528 7379 6d62      if Type(symb
-0001ab90: 6f6c 2c62 7974 6573 293a 2073 796d 5f73  ol,bytes): sym_s
-0001aba0: 706c 6974 6572 3d42 7974 6573 2873 796d  pliter=Bytes(sym
-0001abb0: 5f73 706c 6974 6572 290a 2020 2020 2020  _spliter).      
-0001abc0: 2020 2020 2020 2020 2020 656c 7365 3a20            else: 
-0001abd0: 7379 6d5f 7370 6c69 7465 723d 5374 7228  sym_spliter=Str(
-0001abe0: 7379 6d5f 7370 6c69 7465 7229 0a20 2020  sym_spliter).   
-0001abf0: 2020 2020 2020 2020 2020 2020 2073 796d               sym
-0001ac00: 626f 6c3d 556e 6971 2873 796d 626f 6c2e  bol=Uniq(symbol.
-0001ac10: 7370 6c69 7428 7379 6d5f 7370 6c69 7465  split(sym_splite
-0001ac20: 7229 290a 2020 2020 2020 2020 2020 2020  r)).            
-0001ac30: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-0001ac40: 2020 2020 206d 7379 6d3d 277c 272e 6a6f       msym='|'.jo
-0001ac50: 696e 286d 6170 2872 652e 6573 6361 7065  in(map(re.escape
-0001ac60: 2c74 7570 6c65 2873 796d 626f 6c29 2929  ,tuple(symbol)))
-0001ac70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ac80: 2069 6620 5479 7065 2873 7263 2c27 6279   if Type(src,'by
-0001ac90: 7465 7327 293a 206d 7379 6d3d 4279 7465  tes'): msym=Byte
-0001aca0: 7328 6d73 796d 290a 2020 2020 2020 2020  s(msym).        
-0001acb0: 2020 2020 2020 2020 656c 7365 3a20 6d73          else: ms
-0001acc0: 796d 3d53 7472 286d 7379 6d29 0a20 2020  ym=Str(msym).   
-0001acd0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001ace0: 7572 6e20 7265 2e73 706c 6974 286d 7379  urn re.split(msy
-0001acf0: 6d2c 7372 6329 2023 2073 706c 6974 6564  m,src) # splited
-0001ad00: 2062 7920 277c 2720 6f72 2065 7870 7265   by '|' or expre
-0001ad10: 7373 696f 6e0a 2020 2020 2020 2020 2020  ssion.          
-0001ad20: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-0001ad30: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
-0001ad40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0001ad50: 2020 2020 2020 2020 2023 204e 6f72 6d61           # Norma
-0001ad60: 6c20 7370 6c69 740a 2020 2020 2020 2020  l split.        
-0001ad70: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0001ad80: 2020 2020 2020 2020 2069 6620 5479 7065           if Type
-0001ad90: 2873 7263 2c27 6279 7465 7327 293a 2073  (src,'bytes'): s
-0001ada0: 796d 626f 6c3d 4279 7465 7328 7379 6d62  ymbol=Bytes(symb
-0001adb0: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
-0001adc0: 2020 2020 656c 7365 203a 2073 796d 626f      else : symbo
-0001add0: 6c3d 5374 7228 7379 6d62 6f6c 290a 2020  l=Str(symbol).  
-0001ade0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001adf0: 7475 726e 2073 7263 2e73 706c 6974 2873  turn src.split(s
-0001ae00: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
-0001ae10: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-0001ae20: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
-0001ae30: 2020 2020 6966 2064 6566 6175 6c74 2069      if default i
-0001ae40: 6e20 5b27 6f72 6727 2c7b 276f 7267 277d  n ['org',{'org'}
-0001ae50: 5d3a 0a20 2020 2020 2020 2069 6620 6c69  ]:.        if li
-0001ae60: 7374 6f6e 6c79 3a0a 2020 2020 2020 2020  stonly:.        
-0001ae70: 2020 2020 7265 7475 726e 205b 7372 635d      return [src]
-0001ae80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001ae90: 7372 630a 2020 2020 6966 206c 6973 746f  src.    if listo
-0001aea0: 6e6c 793a 0a20 2020 2020 2020 2069 6620  nly:.        if 
-0001aeb0: 6465 6661 756c 7420 3d3d 205b 5d3a 0a20  default == []:. 
-0001aec0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001aed0: 6e20 5b5d 0a20 2020 2020 2020 2072 6574  n [].        ret
-0001aee0: 7572 6e20 5b64 6566 6175 6c74 5d0a 2020  urn [default].  
-0001aef0: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
-0001af00: 0a0a 6465 6620 466f 726d 4461 7461 282a  ..def FormData(*
-0001af10: 7372 632c 6465 6661 756c 743d 4e6f 6e65  src,default=None
-0001af20: 2c77 616e 745f 7479 7065 3d4e 6f6e 652c  ,want_type=None,
-0001af30: 6572 723d 4661 6c73 6529 3a0a 2020 2020  err=False):.    
-0001af40: 2727 270a 2020 2020 636f 6e76 6572 7420  '''.    convert 
-0001af50: 7374 7269 6e67 2064 6174 6120 746f 2066  string data to f
-0001af60: 6f72 6d61 740a 2020 2020 2731 2720 3d3e  ormat.    '1' =>
-0001af70: 2031 0a20 2020 206a 736f 6e20 7374 7269   1.    json stri
-0001af80: 6e67 2074 6f20 6a73 6f6e 2066 6f72 6d61  ng to json forma
-0001af90: 740a 2020 2020 227b 2761 273a 317d 2220  t.    "{'a':1}" 
-0001afa0: 3d3e 207b 2761 273a 317d 0a20 2020 2022  => {'a':1}.    "
-0001afb0: 5b31 2c32 2c33 5d22 203d 3e20 5b31 2c32  [1,2,3]" => [1,2
-0001afc0: 2c33 5d0a 2020 2020 2e2e 2e2e 0a20 2020  ,3].    .....   
-0001afd0: 2027 2727 0a20 2020 2065 633d 4661 6c73   '''.    ec=Fals
-0001afe0: 650a 2020 2020 615f 733d 2727 0a20 2020  e.    a_s=''.   
-0001aff0: 2069 6620 6c65 6e28 7372 6329 203e 2030   if len(src) > 0
-0001b000: 3a0a 2020 2020 2020 2020 666f 7220 6920  :.        for i 
-0001b010: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
-0001b020: 2020 2020 615f 743d 5374 7228 692c 6465      a_t=Str(i,de
-0001b030: 6661 756c 743d 276f 7267 2729 0a20 2020  fault='org').   
-0001b040: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-0001b050: 7374 616e 6365 2861 5f74 2c73 7472 293a  stance(a_t,str):
-0001b060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b070: 2069 6620 615f 733a 0a20 2020 2020 2020   if a_s:.       
-0001b080: 2020 2020 2020 2020 2020 2020 2061 5f73               a_s
-0001b090: 3d61 5f73 2b27 2727 2027 2727 2b61 5f74  =a_s+''' '''+a_t
-0001b0a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b0b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001b0c0: 2020 2020 2020 2020 2020 2061 5f73 3d61             a_s=a
-0001b0d0: 5f74 0a20 2020 2020 2020 2020 2020 2065  _t.            e
-0001b0e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0001b0f0: 2020 2020 2065 633d 5472 7565 0a20 2020       ec=True.   
-0001b100: 2020 2020 2020 2020 2020 2020 2062 7265               bre
-0001b110: 616b 0a20 2020 2069 6620 6563 3a0a 2020  ak.    if ec:.  
-0001b120: 2020 2020 2020 6966 2065 7272 3a0a 2020        if err:.  
-0001b130: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001b140: 2046 616c 7365 0a20 2020 2020 2020 2069   False.        i
-0001b150: 6620 6c65 6e28 7372 6329 203d 3d20 313a  f len(src) == 1:
-0001b160: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001b170: 7572 6e20 7372 635b 305d 0a20 2020 2020  urn src[0].     
-0001b180: 2020 2072 6574 7572 6e20 7372 630a 2020     return src.  
-0001b190: 2020 7372 633d 615f 730a 2020 2020 666f    src=a_s.    fo
-0001b1a0: 726d 5f73 7263 3d4e 6f6e 650a 2020 2020  rm_src=None.    
-0001b1b0: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
-0001b1c0: 632c 7374 7229 3a0a 2020 2020 2020 2020  c,str):.        
-0001b1d0: 6966 2054 7970 6528 7761 6e74 5f74 7970  if Type(want_typ
-0001b1e0: 652c 2773 7472 2729 3a20 7265 7475 726e  e,'str'): return
-0001b1f0: 2073 7263 0a20 2020 2020 2020 2074 7279   src.        try
-0001b200: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
-0001b210: 726d 5f73 7263 3d61 7374 2e6c 6974 6572  rm_src=ast.liter
-0001b220: 616c 5f65 7661 6c28 7372 6329 0a20 2020  al_eval(src).   
-0001b230: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-0001b240: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
-0001b250: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0001b260: 726d 5f73 7263 3d6a 736f 6e2e 6c6f 6164  rm_src=json.load
-0001b270: 7328 7372 6329 0a20 2020 2020 2020 2020  s(src).         
-0001b280: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-0001b290: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-0001b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b2b0: 2020 2020 666f 726d 5f73 7263 3d65 7661      form_src=eva
-0001b2c0: 6c28 7372 6329 0a20 2020 2020 2020 2020  l(src).         
-0001b2d0: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
-0001b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b2f0: 2020 2072 6574 7572 6e20 4465 6661 756c     return Defaul
-0001b300: 7428 7372 632c 6465 6661 756c 7429 0a20  t(src,default). 
-0001b310: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001b320: 2066 6f72 6d5f 7372 633d 7372 630a 2020   form_src=src.  
-0001b330: 2020 6966 2049 734e 6f6e 6528 7761 6e74    if IsNone(want
-0001b340: 5f74 7970 6529 3a0a 2020 2020 2020 2020  _type):.        
-0001b350: 7265 7475 726e 2066 6f72 6d5f 7372 630a  return form_src.
-0001b360: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001b370: 2020 6966 2054 7970 6528 666f 726d 5f73    if Type(form_s
-0001b380: 7263 2c77 616e 745f 7479 7065 293a 2072  rc,want_type): r
-0001b390: 6574 7572 6e20 666f 726d 5f73 7263 0a20  eturn form_src. 
-0001b3a0: 2020 2020 2020 2072 6574 7572 6e20 4465         return De
-0001b3b0: 6661 756c 7428 7372 632c 6465 6661 756c  fault(src,defaul
-0001b3c0: 7429 0a0a 6465 6620 496e 6465 7846 6f72  t)..def IndexFor
-0001b3d0: 6d28 6964 782c 6964 785f 6f6e 6c79 3d46  m(idx,idx_only=F
-0001b3e0: 616c 7365 2c73 796d 626f 6c3d 4e6f 6e65  alse,symbol=None
-0001b3f0: 293a 0a20 2020 2027 2727 0a20 2020 2072  ):.    '''.    r
-0001b400: 6574 7572 6e20 3a20 3c54 7275 652f 4661  eturn : <True/Fa
-0001b410: 6c73 653e 2c20 496e 6465 7820 4461 7461  lse>, Index Data
-0001b420: 0a20 2020 2020 2d20 4661 6c73 653a 206e  .     - False: n
-0001b430: 6f74 2066 6f75 6e64 2049 6e64 6578 2066  ot found Index f
-0001b440: 6f72 6d20 6672 6f6d 2069 6e70 7574 2069  orm from input i
-0001b450: 6478 200a 2020 2020 202d 2054 7275 6520  dx .     - True 
-0001b460: 3a20 666f 756e 6420 496e 6465 780a 2020  : found Index.  
-0001b470: 2020 496e 6465 7820 4461 7461 0a20 2020    Index Data.   
-0001b480: 2020 2d20 7475 706c 6528 412c 4229 203a    - tuple(A,B) :
-0001b490: 2052 616e 6765 2049 6e64 6578 2028 417e   Range Index (A~
-0001b4a0: 4229 0a20 2020 2020 2d20 6c69 7374 205b  B).     - list [
-0001b4b0: 412c 425d 203a 204f 5220 496e 6465 7820  A,B] : OR Index 
-0001b4c0: 6f72 206b 6579 7320 4120 6f72 2042 0a20  or keys A or B. 
-0001b4d0: 2020 2020 2d20 5369 6e67 6c65 2020 2020      - Single    
-0001b4e0: 203a 2069 6e74 3a20 496e 6465 782c 206f   : int: Index, o
-0001b4f0: 7468 6572 733a 206b 6579 0a20 2020 202d  thers: key.    -
-0001b500: 2069 6478 5f6f 6e6c 7920 2020 203a 206f   idx_only    : o
-0001b510: 6e6c 7920 7265 7475 726e 2069 6e74 6567  nly return integ
-0001b520: 6572 2069 6e64 6578 0a20 2020 202d 2073  er index.    - s
-0001b530: 796d 626f 6c20 2020 3a20 6465 6661 756c  ymbol   : defaul
-0001b540: 7420 4e6f 6e65 2c20 6966 2069 6478 2069  t None, if idx i
-0001b550: 7320 7374 7269 6e67 2061 6e64 2077 616e  s string and wan
-0001b560: 7420 7370 6c69 7420 7769 7468 2073 796d  t split with sym
-0001b570: 626f 6c0a 2020 2020 2727 270a 2020 2020  bol.    '''.    
-0001b580: 6966 2049 734e 6f6e 6528 6964 7829 3a0a  if IsNone(idx):.
-0001b590: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-0001b5a0: 616c 7365 2c4e 6f6e 650a 2020 2020 656c  alse,None.    el
-0001b5b0: 6966 2069 7369 6e73 7461 6e63 6528 6964  if isinstance(id
-0001b5c0: 782c 7374 7229 3a0a 2020 2020 2020 2020  x,str):.        
-0001b5d0: 666f 7220 7320 696e 205b 273a 272c 272d  for s in [':','-
-0001b5e0: 272c 277e 275d 3a20 2320 5261 6e67 6520  ','~']: # Range 
-0001b5f0: 496e 6465 780a 2020 2020 2020 2020 2020  Index.          
-0001b600: 2020 6966 2073 2069 6e20 6964 783a 0a20    if s in idx:. 
-0001b610: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001b620: 6478 5f61 3d69 6478 2e73 706c 6974 2873  dx_a=idx.split(s
-0001b630: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001b640: 2020 6966 206c 656e 2869 6478 5f61 2920    if len(idx_a) 
-0001b650: 3d3d 2032 3a0a 2020 2020 2020 2020 2020  == 2:.          
-0001b660: 2020 2020 2020 2020 2020 7373 3d49 6e74            ss=Int
-0001b670: 2869 6478 5f61 5b30 5d29 2069 6620 4973  (idx_a[0]) if Is
-0001b680: 496e 7428 6964 785f 615b 305d 2920 656c  Int(idx_a[0]) el
-0001b690: 7365 2030 0a20 2020 2020 2020 2020 2020  se 0.           
-0001b6a0: 2020 2020 2020 2020 2065 653d 496e 7428           ee=Int(
-0001b6b0: 6964 785f 615b 315d 2920 6966 2049 7349  idx_a[1]) if IsI
-0001b6c0: 6e74 2869 6478 5f61 5b31 5d29 2065 6c73  nt(idx_a[1]) els
-0001b6d0: 6520 2d31 0a20 2020 2020 2020 2020 2020  e -1.           
-0001b6e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001b6f0: 5472 7565 2c28 7373 2c65 6529 0a20 2020  True,(ss,ee).   
-0001b700: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001b710: 7572 6e20 4661 6c73 652c 4e6f 6e65 0a20  urn False,None. 
-0001b720: 2020 2020 2020 2069 6620 277c 2720 696e         if '|' in
-0001b730: 2069 6478 3a20 2320 4f52 2049 6e64 6578   idx: # OR Index
-0001b740: 0a20 2020 2020 2020 2020 2020 2069 6478  .            idx
-0001b750: 5f61 3d69 6478 2e73 706c 6974 2827 7c27  _a=idx.split('|'
-0001b760: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0001b770: 2069 6478 5f6f 6e6c 793a 0a20 2020 2020   idx_only:.     
-0001b780: 2020 2020 2020 2020 2020 2072 743d 5b5d             rt=[]
-0001b790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b7a0: 2066 6f72 2069 2069 6e20 6964 785f 613a   for i in idx_a:
-0001b7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b7c0: 2020 2020 2069 6620 4973 496e 7428 6929       if IsInt(i)
-0001b7d0: 3a20 7274 2e61 7070 656e 6428 496e 7428  : rt.append(Int(
-0001b7e0: 6929 290a 2020 2020 2020 2020 2020 2020  i)).            
-0001b7f0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
-0001b800: 7274 0a20 2020 2020 2020 2020 2020 2072  rt.            r
-0001b810: 6574 7572 6e20 5472 7565 2c69 6478 2e73  eturn True,idx.s
-0001b820: 706c 6974 2827 7c27 290a 2020 2020 2020  plit('|').      
-0001b830: 2020 656c 6966 2027 2f27 2069 6e20 6964    elif '/' in id
-0001b840: 783a 2023 2050 6174 6820 696e 6465 780a  x: # Path index.
-0001b850: 2020 2020 2020 2020 2020 2020 6964 785f              idx_
-0001b860: 613d 6964 782e 7370 6c69 7428 272f 2729  a=idx.split('/')
-0001b870: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001b880: 6964 785f 615b 305d 203d 3d20 2727 3a0a  idx_a[0] == '':.
-0001b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b8a0: 7265 7475 726e 204e 6f6e 652c 6964 785f  return None,idx_
-0001b8b0: 615b 313a 5d0a 2020 2020 2020 2020 2020  a[1:].          
-0001b8c0: 2020 7265 7475 726e 204e 6f6e 652c 6964    return None,id
-0001b8d0: 785f 610a 2020 2020 2020 2020 656c 7365  x_a.        else
-0001b8e0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0001b8f0: 2069 6478 5f6f 6e6c 793a 0a20 2020 2020   idx_only:.     
-0001b900: 2020 2020 2020 2020 2020 2069 6620 7379             if sy
-0001b910: 6d62 6f6c 3a0a 2020 2020 2020 2020 2020  mbol:.          
-0001b920: 2020 2020 2020 2020 2020 6964 7873 3d69            idxs=i
-0001b930: 6478 2e73 706c 6974 2873 796d 626f 6c29  dx.split(symbol)
-0001b940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b950: 2020 2020 2072 743d 5b5d 0a20 2020 2020       rt=[].     
-0001b960: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001b970: 6f72 2069 2069 6e20 6964 7873 3a0a 2020  or i in idxs:.  
-0001b980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b990: 2020 2020 2020 6966 2049 7349 6e74 2869        if IsInt(i
-0001b9a0: 293a 2072 742e 6170 7065 6e64 2849 6e74  ): rt.append(Int
-0001b9b0: 2869 2929 0a20 2020 2020 2020 2020 2020  (i)).           
-0001b9c0: 2020 2020 2020 2020 2069 6620 7274 3a20           if rt: 
-0001b9d0: 7265 7475 726e 2054 7275 652c 7274 0a20  return True,rt. 
-0001b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b9f0: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
-0001ba00: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-0001ba10: 2020 2020 2069 6620 4973 496e 7428 6964       if IsInt(id
-0001ba20: 7829 3a0a 2020 2020 2020 2020 2020 2020  x):.            
-0001ba30: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-0001ba40: 7275 652c 496e 7428 6964 7829 0a20 2020  rue,Int(idx).   
-0001ba50: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001ba60: 7572 6e20 4661 6c73 652c 4e6f 6e65 0a20  urn False,None. 
-0001ba70: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-0001ba80: 6365 2869 6478 2c6c 6973 7429 3a0a 2020  ce(idx,list):.  
-0001ba90: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-0001baa0: 652c 6964 780a 2020 2020 656c 6966 2069  e,idx.    elif i
-0001bab0: 7369 6e73 7461 6e63 6528 6964 782c 7475  sinstance(idx,tu
-0001bac0: 706c 6529 2061 6e64 206c 656e 2869 6478  ple) and len(idx
-0001bad0: 2920 3d3d 2032 3a0a 2020 2020 2020 2020  ) == 2:.        
-0001bae0: 7265 7475 726e 2054 7275 652c 6964 780a  return True,idx.
-0001baf0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
-0001bb00: 6964 7820 2320 5265 7475 726e 206f 7269  idx # Return ori
-0001bb10: 6769 6e61 6c0a 0a64 6566 2047 6574 282a  ginal..def Get(*
-0001bb20: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
-0001bb30: 2020 2727 270a 2020 2020 4765 7420 2841    '''.    Get (A
-0001bb40: 6e79 2920 736f 6d65 7468 696e 670a 2020  ny) something.  
-0001bb50: 2020 4765 7428 2777 686f 616d 6927 2920    Get('whoami') 
-0001bb60: 203a 2072 6574 7572 6e20 6d79 2066 756e   : return my fun
-0001bb70: 6374 696f 6e20 6e61 6d65 0a20 2020 2047  ction name.    G
-0001bb80: 6574 2827 6675 6e63 6c69 7374 2729 3a20  et('funclist'): 
-0001bb90: 7265 7475 726e 206d 7920 6d6f 6475 6c65  return my module
-0001bba0: 2773 2066 756e 6374 696f 6e20 6c69 7374  's function list
-0001bbb0: 0a20 2020 2020 2d20 7061 7265 6e74 3d31  .     - parent=1
-0001bbc0: 2020 2020 3a20 6d79 2070 6172 656e 7427      : my parent'
-0001bbd0: 7320 6675 6e63 7469 6f6e 206c 6973 740a  s function list.
-0001bbe0: 2020 2020 4765 7428 3c6c 6973 747c 7374      Get(<list|st
-0001bbf0: 7269 6e67 7c64 6963 747c 696e 747c 2e2e  ring|dict|int|..
-0001bc00: 2e3e 2c3c 696e 6465 787c 6b65 797c 6b65  .>,<index|key|ke
-0001bc10: 7970 6174 683e 293a 2047 6574 2064 6174  ypath>): Get dat
-0001bc20: 6120 6174 2074 6865 203c 696e 6465 787c  a at the <index|
-0001bc30: 6b65 797c 6b65 7970 6174 683e 0a20 2020  key|keypath>.   
-0001bc40: 2020 2d20 6b65 7970 6174 6820 3a20 272f    - keypath : '/
-0001bc50: 612f 622f 6327 203d 3e20 7b27 6127 3a7b  a/b/c' => {'a':{
-0001bc60: 2762 273a 7b27 6327 3a31 2c27 6427 7d7d  'b':{'c':1,'d'}}
-0001bc70: 7d20 3d3e 2072 6574 7572 6e20 6327 7320  } => return c's 
-0001bc80: 310a 2020 2020 202d 206b 6579 2020 2020  1.     - key    
-0001bc90: 203a 0a20 2020 2020 2020 5261 6e67 6520   :.       Range 
-0001bca0: 466f 726d 6174 2066 726f 6d20 3120 746f  Format from 1 to
-0001bcb0: 2035 3a20 7475 706c 6520 666f 726d 6174   5: tuple format
-0001bcc0: 2028 312c 3529 2c20 5374 7269 6e67 2066   (1,5), String f
-0001bcd0: 6f72 6d61 7420 2731 2d35 2720 6f72 2027  ormat '1-5' or '
-0001bce0: 313a 3527 206f 7220 2731 7e35 270a 2020  1:5' or '1~5'.  
-0001bcf0: 2020 2020 204f 5220 6461 7461 2031 2c33       OR data 1,3
-0001bd00: 2c35 2020 2020 2020 2020 2020 203a 206c  ,5           : l
-0001bd10: 6973 7420 666f 726d 6174 2020 5b31 2c33  ist format  [1,3
-0001bd20: 2c35 5d2c 2053 7472 696e 6720 666f 726d  ,5], String form
-0001bd30: 6174 2027 317c 337c 3527 0a20 2020 2020  at '1|3|5'.     
-0001bd40: 2020 2020 2d20 6966 2066 6f75 6e64 2061      - if found a
-0001bd50: 6e79 2064 6174 6120 7468 656e 2067 6574  ny data then get
-0001bd60: 7469 6e67 2074 6861 7420 6461 7461 206f  ting that data o
-0001bd70: 6e6c 790a 2020 2020 2020 2020 202d 2069  nly.         - i
-0001bd80: 6620 7573 6520 6669 6c6c 5f75 7020 6f70  f use fill_up op
-0001bd90: 7469 6f6e 2074 6865 6e20 6966 2065 7272  tion then if err
-0001bda0: 6f72 206f 6620 6120 6b65 7920 7468 656e  or of a key then
-0001bdb0: 2066 696c 6c20 746f 203c 6669 6c6c 5f75   fill to <fill_u
-0001bdc0: 703e 2076 616c 7565 2061 7420 7468 6520  p> value at the 
-0001bdd0: 6572 726f 7220 6c6f 6361 7469 6f6e 2e0a  error location..
-0001bde0: 2020 2020 202d 2069 6e64 6578 2020 203a       - index   :
-0001bdf0: 2069 6e74 6567 6572 2020 2020 2020 203a   integer       :
-0001be00: 2073 696e 676c 6520 6461 7461 0a20 2020   single data.   
-0001be10: 2047 6574 2827 5f74 6869 735f 272c 3c6b   Get('_this_',<k
-0001be20: 6579 3e29 3a20 6d79 2066 756e 6374 696f  ey>): my functio
-0001be30: 6e73 2773 203c 6b65 793e 0a20 2020 2047  ns's <key>.    G
-0001be40: 6574 2827 3c76 6172 206e 616d 653e 2729  et('<var name>')
-0001be50: 2020 3a20 7265 7475 726e 2076 6172 6961    : return varia
-0001be60: 626c 6520 6461 7461 0a20 2020 2047 6574  ble data.    Get
-0001be70: 2827 5f74 6869 735f 272c 2761 7267 7327  ('_this_','args'
-0001be80: 2920 203a 2072 6574 7572 6e20 6d79 2066  )  : return my f
-0001be90: 756e 6374 696f 6e73 2041 7267 756d 656e  unctions Argumen
-0001bea0: 7473 0a20 2020 2047 6574 283c 6675 6e63  ts.    Get(<func
-0001beb0: 7469 6f6e 3e2c 2761 7267 7327 2920 203a  tion>,'args')  :
-0001bec0: 2072 6574 7572 6e20 7468 6520 6675 6e63   return the func
-0001bed0: 7469 6f6e 7320 4172 6775 6d65 6e74 730a  tions Arguments.
-0001bee0: 2020 2020 3c6f 7074 696f 6e3e 0a20 2020      <option>.   
-0001bef0: 2020 2066 696c 6c5f 7570 203a 2049 6620     fill_up : If 
-0001bf00: 6572 726f 7220 6f66 2074 6865 206b 6579  error of the key
-0001bf10: 2773 2076 616c 7565 2074 6865 6e20 6669  's value then fi
-0001bf20: 6c6c 2075 7020 3c66 696c 6c5f 7570 3e20  ll up <fill_up> 
-0001bf30: 746f 2072 6967 6874 2070 6f73 6974 696f  to right positio
-0001bf40: 6e20 7768 656e 2074 6865 203c 6b65 793e  n when the <key>
-0001bf50: 2069 7320 6c69 7374 0a20 2020 2020 2064   is list.      d
-0001bf60: 6566 6175 6c74 203a 204e 6f6e 652c 2061  efault : None, a
-0001bf70: 6e79 2069 7373 7565 0a20 2020 2020 2065  ny issue.      e
-0001bf80: 7272 2020 2020 203a 2046 616c 7365 2c20  rr     : False, 
-0001bf90: 6966 2061 6e79 2065 7272 6f72 2074 6865  if any error the
-0001bfa0: 6e20 6967 6e6f 7265 2074 6865 2064 6174  n ignore the dat
-0001bfb0: 610a 2020 2020 2020 6964 785f 6f6e 6c79  a.      idx_only
-0001bfc0: 3a20 6966 2069 6e70 7574 2064 6174 6120  : if input data 
-0001bfd0: 6973 2064 6963 7469 6f6e 6172 7920 7468  is dictionary th
-0001bfe0: 656e 2063 6f6e 7665 7274 2064 6963 7469  en convert dicti
-0001bff0: 6f6e 6172 7927 7320 6b65 7973 2074 6f20  onary's keys to 
-0001c000: 696e 7075 7420 6461 7461 2e20 536f 2c20  input data. So, 
-0001c010: 696e 7420 6964 7820 6361 6e20 6765 7420  int idx can get 
-0001c020: 6b65 7973 286c 6973 7429 206e 616d 650a  keys(list) name.
-0001c030: 2020 2020 2020 5f74 7970 655f 2020 3a20        _type_  : 
-0001c040: 6465 6669 6e65 2074 6f20 696e 7075 7420  define to input 
-0001c050: 6461 7461 2773 2064 6174 6120 666f 726d  data's data form
-0001c060: 6174 2028 6578 3a20 286c 6973 742c 7475  at (ex: (list,tu
-0001c070: 706c 6529 290a 2020 2020 2020 6d65 7468  ple)).      meth
-0001c080: 6f64 2020 3a20 6966 2069 6e70 7574 2069  od  : if input i
-0001c090: 7320 7265 7175 6573 7420 7468 656e 2063  s request then c
-0001c0a0: 616e 2064 6566 696e 6520 6d65 7468 6f64  an define method
-0001c0b0: 2827 4745 5427 2c27 504f 5354 272c 2e2e  ('GET','POST',..
-0001c0c0: 2e29 0a20 2020 2020 2073 7472 6970 2020  .).      strip  
-0001c0d0: 203a 2064 6566 6175 6c74 3a20 4661 6c73   : default: Fals
-0001c0e0: 652c 2069 7420 6361 6e20 7374 7269 7020  e, it can strip 
-0001c0f0: 7768 6974 6520 7370 6163 650a 2020 2020  white space.    
-0001c100: 2020 7065 656c 2020 2020 3a20 0a20 2020    peel    : .   
-0001c110: 2020 2020 2020 2066 6f72 6365 3a20 6a75         force: ju
-0001c120: 7374 2074 616b 6520 6669 7273 7420 6461  st take first da
-0001c130: 7461 2069 6e20 7468 6520 6c69 7374 2c74  ta in the list,t
-0001c140: 7570 6c65 2028 6966 2064 6174 6120 666f  uple (if data fo
-0001c150: 726d 6174 2068 6173 2061 6e79 2066 6f72  rmat has any for
-0001c160: 6d20 616c 736f 204f 4b2c 206a 7573 7420  m also OK, just 
-0001c170: 7265 7475 726e 2074 6865 2064 6174 6129  return the data)
-0001c180: 0a20 2020 2020 2020 2020 2054 7275 6520  .          True 
-0001c190: 3a20 7369 6e67 6c65 2064 6174 6128 6c69  : single data(li
-0001c1a0: 7374 2c74 7570 6c65 2c64 6963 7429 2074  st,tuple,dict) t
-0001c1b0: 6865 6e20 7065 656c 2074 6f20 6461 7461  hen peel to data
-0001c1c0: 2028 6966 2064 6174 6120 666f 726d 6174   (if data format
-0001c1d0: 2069 7320 6c69 7374 2c74 7570 6c65 2c64   is list,tuple,d
-0001c1e0: 6963 742e 2e2e 2074 6865 6e20 7265 7475  ict... then retu
-0001c1f0: 726e 2064 6566 6175 6c74 290a 2020 2020  rn default).    
-0001c200: 2020 2020 2020 4661 6c73 653a 2072 6574        False: ret
-0001c210: 7572 6e20 666f 756e 6465 6420 6461 7461  urn founded data
-0001c220: 2028 616e 7920 666f 726d 6174 290a 2020   (any format).  
-0001c230: 2020 2020 6f75 7420 2020 2020 3a20 6465      out     : de
-0001c240: 6669 6e65 2074 6f20 6f75 7470 7574 2064  fine to output d
-0001c250: 6174 6120 286c 6973 742d 3e20 6f75 7470  ata (list-> outp
-0001c260: 7574 2077 696c 6c20 6c69 7374 2c20 2e2e  ut will list, ..
-0001c270: 2e29 2c20 6966 2077 726f 6e67 2066 6f72  .), if wrong for
-0001c280: 6d61 7420 7468 656e 2072 6574 7572 6e20  mat then return 
-0001c290: 6465 6661 756c 740a 2020 2020 2727 270a  default.    '''.
-0001c2a0: 2020 2020 6465 6661 756c 743d 6f70 7473      default=opts
-0001c2b0: 2e67 6574 2827 6465 6661 756c 7427 290a  .get('default').
-0001c2c0: 2020 2020 6572 723d 6f70 7473 2e67 6574      err=opts.get
-0001c2d0: 2827 6572 7227 2c6f 7074 732e 6765 7428  ('err',opts.get(
-0001c2e0: 2765 7272 6f72 272c 4661 6c73 6529 290a  'error',False)).
-0001c2f0: 2020 2020 6669 6c6c 5f75 703d 6f70 7473      fill_up=opts
-0001c300: 2e67 6574 2827 6669 6c6c 5f75 7027 2c27  .get('fill_up','
-0001c310: 5f66 416c 7345 5f27 290a 2020 2020 6964  _fAlsE_').    id
-0001c320: 785f 6f6e 6c79 3d6f 7074 732e 6765 7428  x_only=opts.get(
-0001c330: 2769 6478 5f6f 6e6c 7927 2c6f 7074 732e  'idx_only',opts.
-0001c340: 6765 7428 2769 6e64 6578 5f6f 6e6c 7927  get('index_only'
-0001c350: 2c46 616c 7365 2929 0a20 2020 205f 7479  ,False)).    _ty
-0001c360: 7065 3d6f 7074 732e 6765 7428 275f 7479  pe=opts.get('_ty
-0001c370: 7065 5f27 2c6f 7074 732e 6765 7428 2774  pe_',opts.get('t
-0001c380: 7970 6527 2929 0a20 2020 206f 7574 3d6f  ype')).    out=o
-0001c390: 7074 732e 6765 7428 276f 7574 272c 6f70  pts.get('out',op
-0001c3a0: 7473 2e67 6574 2827 6f75 745f 666f 726d  ts.get('out_form
-0001c3b0: 272c 2772 6177 2729 290a 2020 2020 7065  ','raw')).    pe
-0001c3c0: 656c 3d6f 7074 732e 6765 7428 2770 6565  el=opts.get('pee
-0001c3d0: 6c27 290a 2020 2020 7374 7269 703d 6f70  l').    strip=op
-0001c3e0: 7473 2e67 6574 2827 7374 7269 7027 2c46  ts.get('strip',F
-0001c3f0: 616c 7365 290a 0a20 2020 2069 6620 6c65  alse)..    if le
-0001c400: 6e28 696e 7073 2920 3d3d 2030 3a0a 2020  n(inps) == 0:.  
-0001c410: 2020 2020 2020 7265 7475 726e 2044 6566        return Def
-0001c420: 6175 6c74 2869 6e70 732c 6465 6661 756c  ault(inps,defaul
-0001c430: 7429 0a20 2020 2069 6620 6c65 6e28 696e  t).    if len(in
-0001c440: 7073 2920 3d3d 2031 3a0a 2020 2020 2020  ps) == 1:.      
-0001c450: 2020 6966 2069 6e70 735b 305d 2069 6e20    if inps[0] in 
-0001c460: 5b27 7768 6f61 6d69 272c 276d 796e 616d  ['whoami','mynam
-0001c470: 6527 2c27 6675 6e63 6e61 6d65 272c 2766  e','funcname','f
-0001c480: 756e 6374 696f 6e6e 616d 6527 2c27 4675  unctionname','Fu
-0001c490: 6e63 7469 6f6e 4e61 6d65 275d 3a0a 2020  nctionName']:.  
-0001c4a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001c4b0: 2046 756e 6374 696f 6e4e 616d 6528 7061   FunctionName(pa
-0001c4c0: 7265 6e74 3d6f 7074 732e 6765 7428 2770  rent=opts.get('p
-0001c4d0: 6172 656e 7427 2c31 2929 2023 206d 7920  arent',1)) # my 
-0001c4e0: 7061 7265 6e74 2773 2066 756e 6374 696f  parent's functio
-0001c4f0: 6e20 6e61 6d65 0a20 2020 2020 2020 2065  n name.        e
-0001c500: 6c69 6620 6973 696e 7374 616e 6365 2869  lif isinstance(i
-0001c510: 6e70 735b 305d 2c73 7472 293a 0a20 2020  nps[0],str):.   
-0001c520: 2020 2020 2020 2020 2069 6620 696e 7073           if inps
-0001c530: 5b30 5d2e 6c6f 7765 7228 2920 696e 205b  [0].lower() in [
-0001c540: 2766 756e 6327 2c27 6675 6e63 7469 6f6e  'func','function
-0001c550: 272c 2766 756e 6374 696f 6e73 272c 2766  ','functions','f
-0001c560: 756e 636c 6973 7427 2c27 6675 6e63 5f6c  unclist','func_l
-0001c570: 6973 7427 2c27 6c69 7374 275d 3a0a 2020  ist','list']:.  
-0001c580: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001c590: 7475 726e 2046 756e 6374 696f 6e4c 6973  turn FunctionLis
-0001c5a0: 7428 7061 7265 6e74 3d6f 7074 732e 6765  t(parent=opts.ge
-0001c5b0: 7428 2770 6172 656e 7427 2c2d 3129 2920  t('parent',-1)) 
-0001c5c0: 2320 6465 6661 756c 743a 206d 7920 7061  # default: my pa
-0001c5d0: 6765 2773 2066 756e 6374 696f 6e20 6c69  ge's function li
-0001c5e0: 7374 0a20 2020 2020 2020 2020 2020 2072  st.            r
-0001c5f0: 6574 7572 6e20 5661 7269 6162 6c65 2869  eturn Variable(i
-0001c600: 6e70 735b 305d 2c70 6172 656e 743d 6f70  nps[0],parent=op
-0001c610: 7473 2e67 6574 2827 7061 7265 6e74 272c  ts.get('parent',
-0001c620: 3129 2920 2320 6d79 2070 6172 656e 7427  1)) # my parent'
-0001c630: 7320 7661 7269 6162 6c65 0a20 2020 2069  s variable.    i
-0001c640: 6e70 733d 6c69 7374 2869 6e70 7329 0a20  nps=list(inps). 
-0001c650: 2020 206f 626a 3d69 6e70 735b 305d 0a20     obj=inps[0]. 
-0001c660: 2020 2069 6620 4973 4e6f 6e65 286f 626a     if IsNone(obj
-0001c670: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-0001c680: 6e20 4465 6661 756c 7428 6f62 6a2c 6465  n Default(obj,de
-0001c690: 6661 756c 7429 0a20 2020 2064 656c 2069  fault).    del i
-0001c6a0: 6e70 735b 305d 0a20 2020 2069 6620 6c65  nps[0].    if le
-0001c6b0: 6e28 696e 7073 2920 3d3d 2031 3a0a 2020  n(inps) == 1:.  
-0001c6c0: 2020 2020 2020 6964 783d 696e 7073 5b30        idx=inps[0
-0001c6d0: 5d0a 2020 2020 656c 6966 206c 656e 2869  ].    elif len(i
-0001c6e0: 6e70 7329 203e 2031 3a0a 2020 2020 2020  nps) > 1:.      
-0001c6f0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0001c700: 6f62 6a2c 286c 6973 742c 7475 706c 6529  obj,(list,tuple)
-0001c710: 2920 616e 6420 6e6f 7420 6973 696e 7374  ) and not isinst
-0001c720: 616e 6365 2869 6e70 735b 2d31 5d2c 696e  ance(inps[-1],in
-0001c730: 7429 2061 6e64 2027 6465 6661 756c 7427  t) and 'default'
-0001c740: 206e 6f74 2069 6e20 6f70 7473 3a0a 2020   not in opts:.  
-0001c750: 2020 2020 2020 2020 2020 6964 783d 696e            idx=in
-0001c760: 7073 5b3a 2d31 5d0a 2020 2020 2020 2020  ps[:-1].        
-0001c770: 2020 2020 6465 6661 756c 743d 696e 7073      default=inps
-0001c780: 5b2d 315d 0a20 2020 2020 2020 2065 6c73  [-1].        els
-0001c790: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-0001c7a0: 6478 3d69 6e70 735b 3a5d 0a20 2020 2065  dx=inps[:].    e
-0001c7b0: 6c73 653a 0a20 2020 2020 2020 2069 6478  lse:.        idx
-0001c7c0: 3d4e 6f6e 650a 2020 2020 2357 6865 6e20  =None.    #When 
-0001c7d0: 6368 6563 6b20 7479 7065 0a20 2020 2069  check type.    i
-0001c7e0: 6620 5f74 7970 6520 6973 206e 6f74 204e  f _type is not N
-0001c7f0: 6f6e 653a 0a20 2020 2020 2020 2069 6620  one:.        if 
-0001c800: 6e6f 7420 5479 7065 286f 626a 2c5f 7479  not Type(obj,_ty
-0001c810: 7065 293a 0a20 2020 2020 2020 2020 2020  pe):.           
-0001c820: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
-0001c830: 6f62 6a2c 6465 6661 756c 7429 0a20 2020  obj,default).   
-0001c840: 206f 6b2c 6e69 6478 3d49 6e64 6578 466f   ok,nidx=IndexFo
-0001c850: 726d 2869 6478 2c69 6478 5f6f 6e6c 793d  rm(idx,idx_only=
-0001c860: 6964 785f 6f6e 6c79 290a 2020 2020 6964  idx_only).    id
-0001c870: 785f 7479 7065 3d74 7970 6528 6e69 6478  x_type=type(nidx
-0001c880: 292e 5f5f 6e61 6d65 5f5f 0a20 2020 2069  ).__name__.    i
-0001c890: 6620 6f62 6a20 3d3d 2027 5f74 6869 735f  f obj == '_this_
-0001c8a0: 273a 0a20 2020 2020 2020 206f 626a 5f74  ':.        obj_t
-0001c8b0: 7970 653d 2766 756e 6374 696f 6e27 0a20  ype='function'. 
-0001c8c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001c8d0: 206f 626a 5f74 7970 653d 5479 7065 4e61   obj_type=TypeNa
-0001c8e0: 6d65 286f 626a 290a 2020 2020 2020 2020  me(obj).        
-0001c8f0: 0a20 2020 2069 6620 6f6b 2061 6e64 206f  .    if ok and o
-0001c900: 626a 5f74 7970 6520 696e 2028 276c 6973  bj_type in ('lis
-0001c910: 7427 2c27 7475 706c 6527 2c27 7374 7227  t','tuple','str'
-0001c920: 2c27 6279 7465 7327 293a 0a20 2020 2020  ,'bytes'):.     
-0001c930: 2020 2069 6620 6964 785f 7479 7065 203d     if idx_type =
-0001c940: 3d20 2774 7570 6c65 273a 0a20 2020 2020  = 'tuple':.     
-0001c950: 2020 2020 2020 2073 733d 5f6f 626a 5f6d         ss=_obj_m
-0001c960: 6178 5f69 6478 5f28 6f62 6a2c 496e 7428  ax_idx_(obj,Int(
-0001c970: 6e69 6478 5b30 5d29 2c65 7272 290a 2020  nidx[0]),err).  
-0001c980: 2020 2020 2020 2020 2020 6565 3d5f 6f62            ee=_ob
-0001c990: 6a5f 6d61 785f 6964 785f 286f 626a 2c49  j_max_idx_(obj,I
-0001c9a0: 6e74 286e 6964 785b 315d 292c 6572 7229  nt(nidx[1]),err)
-0001c9b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001c9c0: 5479 7065 2873 732c 696e 7429 2061 6e64  Type(ss,int) and
-0001c9d0: 2054 7970 6528 6565 2c69 6e74 293a 0a20   Type(ee,int):. 
-0001c9e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001c9f0: 6574 7572 6e20 6f62 6a5b 7373 3a65 652b  eturn obj[ss:ee+
-0001ca00: 315d 0a20 2020 2020 2020 2065 6c69 6620  1].        elif 
-0001ca10: 6964 785f 7479 7065 203d 3d20 276c 6973  idx_type == 'lis
-0001ca20: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
-0001ca30: 7274 3d5b 5d0a 2020 2020 2020 2020 2020  rt=[].          
-0001ca40: 2020 666f 7220 6920 696e 206e 6964 783a    for i in nidx:
-0001ca50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ca60: 2069 783d 5f6f 626a 5f6d 6178 5f69 6478   ix=_obj_max_idx
-0001ca70: 5f28 6f62 6a2c 496e 7428 692c 6465 6661  _(obj,Int(i,defa
-0001ca80: 756c 743d 4661 6c73 652c 6572 723d 5472  ult=False,err=Tr
-0001ca90: 7565 292c 6572 7229 0a20 2020 2020 2020  ue),err).       
-0001caa0: 2020 2020 2020 2020 2069 6620 5479 7065           if Type
-0001cab0: 2869 782c 696e 7429 3a0a 2020 2020 2020  (ix,int):.      
-0001cac0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-0001cad0: 2e61 7070 656e 6428 6f62 6a5b 6978 5d29  .append(obj[ix])
-0001cae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001caf0: 2065 6c69 6620 6669 6c6c 5f75 7020 213d   elif fill_up !=
-0001cb00: 2027 5f66 416c 7345 5f27 3a0a 2020 2020   '_fAlsE_':.    
-0001cb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cb20: 7274 2e61 7070 656e 6428 6669 6c6c 5f75  rt.append(fill_u
-0001cb30: 7029 0a20 2020 2020 2020 2020 2020 2072  p).            r
-0001cb40: 6574 7572 6e20 4f75 7446 6f72 6d61 7428  eturn OutFormat(
-0001cb50: 7274 2c6f 7574 3d6f 7574 2c64 6566 6175  rt,out=out,defau
-0001cb60: 6c74 3d64 6566 6175 6c74 2c6f 7267 3d6f  lt=default,org=o
-0001cb70: 626a 2c70 6565 6c3d 7065 656c 2c73 7472  bj,peel=peel,str
-0001cb80: 6970 3d73 7472 6970 290a 2020 2020 2020  ip=strip).      
-0001cb90: 2020 656c 6966 2069 6478 5f74 7970 6520    elif idx_type 
-0001cba0: 3d3d 2027 696e 7427 3a0a 2020 2020 2020  == 'int':.      
-0001cbb0: 2020 2020 2020 6978 3d5f 6f62 6a5f 6d61        ix=_obj_ma
-0001cbc0: 785f 6964 785f 286f 626a 2c6e 6964 782c  x_idx_(obj,nidx,
-0001cbd0: 6572 7229 0a20 2020 2020 2020 2020 2020  err).           
-0001cbe0: 2069 6620 5479 7065 2869 782c 696e 7429   if Type(ix,int)
-0001cbf0: 3a20 7265 7475 726e 206f 626a 5b69 785d  : return obj[ix]
-0001cc00: 0a20 2020 2020 2020 2069 6620 6964 7820  .        if idx 
-0001cc10: 696e 2064 6972 286f 626a 293a 0a20 2020  in dir(obj):.   
-0001cc20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001cc30: 6f62 6a2e 5f5f 6469 6374 5f5f 2e67 6574  obj.__dict__.get
-0001cc40: 2869 6478 290a 2020 2020 2020 2020 7265  (idx).        re
-0001cc50: 7475 726e 2044 6566 6175 6c74 286f 626a  turn Default(obj
-0001cc60: 2c64 6566 6175 6c74 290a 2020 2020 656c  ,default).    el
-0001cc70: 6966 206f 626a 5f74 7970 6520 696e 2028  if obj_type in (
-0001cc80: 2764 6963 7427 293a 0a20 2020 2020 2020  'dict'):.       
-0001cc90: 2072 6574 7572 6e20 4449 4354 286f 626a   return DICT(obj
-0001cca0: 292e 4765 7428 6964 782c 2a2a 6f70 7473  ).Get(idx,**opts
-0001ccb0: 290a 2020 2020 656c 6966 206f 626a 5f74  ).    elif obj_t
-0001ccc0: 7970 6520 696e 2028 2766 756e 6374 696f  ype in ('functio
-0001ccd0: 6e27 293a 2023 3f3f 3f0a 2020 2020 2020  n'): #???.      
-0001cce0: 2020 6966 206f 6b3a 0a20 2020 2020 2020    if ok:.       
-0001ccf0: 2020 2020 2069 6620 6964 785f 7479 7065       if idx_type
-0001cd00: 203d 3d20 2773 7472 273a 0a20 2020 2020   == 'str':.     
-0001cd10: 2020 2020 2020 2020 2020 2069 6620 6e69             if ni
-0001cd20: 6478 2e6c 6f77 6572 2829 2069 6e20 5b27  dx.lower() in ['
-0001cd30: 6172 6773 272c 2761 7267 756d 656e 7473  args','arguments
-0001cd40: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-0001cd50: 2020 2020 2020 2020 6966 206f 626a 203d          if obj =
-0001cd60: 3d20 275f 7468 6973 5f27 3a0a 2020 2020  = '_this_':.    
-0001cd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd80: 2020 2020 6f62 6a3d 696e 7370 6563 742e      obj=inspect.
-0001cd90: 6765 746d 656d 6265 7273 284d 794d 6f64  getmembers(MyMod
-0001cda0: 756c 6528 2929 2e67 6574 2843 616c 6c65  ule()).get(Calle
-0001cdb0: 724e 616d 6528 2929 0a20 2020 2020 2020  rName()).       
-0001cdc0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001cdd0: 7572 6e20 4675 6e63 7469 6f6e 4172 6773  urn FunctionArgs
-0001cde0: 286f 626a 290a 2020 2020 2020 2020 2020  (obj).          
-0001cdf0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0001ce00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce10: 6966 206f 626a 203d 3d20 275f 7468 6973  if obj == '_this
-0001ce20: 5f27 3a0a 2020 2020 2020 2020 2020 2020  _':.            
-0001ce30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001ce40: 726e 2056 6172 6961 626c 6528 6e69 6478  rn Variable(nidx
-0001ce50: 2c70 6172 656e 743d 3129 0a20 2020 2020  ,parent=1).     
-0001ce60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001ce70: 6574 7572 6e20 5661 7261 626c 6528 6e69  eturn Varable(ni
-0001ce80: 6478 2c6f 626a 290a 2020 2020 2020 2020  dx,obj).        
-0001ce90: 2020 2020 656c 6966 2069 6478 5f74 7970      elif idx_typ
-0001cea0: 6520 3d3d 2027 6c69 7374 273a 0a20 2020  e == 'list':.   
-0001ceb0: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
-0001cec0: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
-0001ced0: 2020 2066 6f72 2069 2069 6e20 6e69 6478     for i in nidx
-0001cee0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001cef0: 2020 2020 2020 6966 2054 7970 6528 692c        if Type(i,
-0001cf00: 7374 7229 2061 6e64 2069 2e6c 6f77 6572  str) and i.lower
-0001cf10: 2829 2069 6e20 5b27 6172 6773 272c 2761  () in ['args','a
-0001cf20: 7267 756d 656e 7473 275d 3a0a 2020 2020  rguments']:.    
-0001cf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf40: 2020 2020 6966 206f 626a 203d 3d20 275f      if obj == '_
-0001cf50: 7468 6973 5f27 3a0a 2020 2020 2020 2020  this_':.        
-0001cf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf70: 2020 2020 6f62 6a32 3d69 6e73 7065 6374      obj2=inspect
-0001cf80: 2e67 6574 6d65 6d62 6572 7328 4d79 4d6f  .getmembers(MyMo
-0001cf90: 6475 6c65 2829 292e 6765 7428 4361 6c6c  dule()).get(Call
-0001cfa0: 6572 4e61 6d65 2829 290a 2020 2020 2020  erName()).      
-0001cfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cfc0: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
-0001cfd0: 4675 6e63 7469 6f6e 4172 6773 286f 626a  FunctionArgs(obj
-0001cfe0: 3229 290a 2020 2020 2020 2020 2020 2020  2)).            
-0001cff0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00018180: 656e 6f2c 6d79 5f68 6973 746f 7279 5b69  eno,my_history[i
+00018190: 5d2e 6669 6c65 6e61 6d65 2929 0a20 2020  ].filename)).   
+000181a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000181b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000181c0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000181d0: 742e 6170 7065 6e64 2828 6d79 5f68 6973  t.append((my_his
+000181e0: 746f 7279 5b69 5d2e 6675 6e63 7469 6f6e  tory[i].function
+000181f0: 2c46 7261 6d65 3246 756e 6374 696f 6e28  ,Frame2Function(
+00018200: 6d79 5f68 6973 746f 7279 5b69 5d2e 6672  my_history[i].fr
+00018210: 616d 6529 2c6d 795f 6869 7374 6f72 795b  ame),my_history[
+00018220: 695d 2e6c 696e 656e 6f2c 6f73 2e70 6174  i].lineno,os.pat
+00018230: 682e 6261 7365 6e61 6d65 286d 795f 6869  h.basename(my_hi
+00018240: 7374 6f72 795b 695d 2e66 696c 656e 616d  story[i].filenam
+00018250: 6529 2929 0a20 2020 2020 2020 2020 2020  e))).           
+00018260: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00018270: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00018280: 6620 6675 6c6c 5f66 696c 656e 616d 653a  f full_filename:
+00018290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000182a0: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
+000182b0: 6e64 2828 6d79 5f68 6973 746f 7279 5b69  nd((my_history[i
+000182c0: 5d2e 6675 6e63 7469 6f6e 2c6d 795f 6869  ].function,my_hi
+000182d0: 7374 6f72 795b 695d 2e6c 696e 656e 6f2c  story[i].lineno,
+000182e0: 6d79 5f68 6973 746f 7279 5b69 5d2e 6669  my_history[i].fi
+000182f0: 6c65 6e61 6d65 2929 0a20 2020 2020 2020  lename)).       
+00018300: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00018310: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00018320: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+00018330: 7065 6e64 2828 6d79 5f68 6973 746f 7279  pend((my_history
+00018340: 5b69 5d2e 6675 6e63 7469 6f6e 2c6d 795f  [i].function,my_
+00018350: 6869 7374 6f72 795b 695d 2e6c 696e 656e  history[i].linen
+00018360: 6f2c 6f73 2e70 6174 682e 6261 7365 6e61  o,os.path.basena
+00018370: 6d65 286d 795f 6869 7374 6f72 795b 695d  me(my_history[i]
+00018380: 2e66 696c 656e 616d 6529 2929 0a20 2020  .filename))).   
+00018390: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
+000183a0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+000183b0: 6365 2870 6172 656e 742c 696e 7429 3a20  ce(parent,int): 
+000183c0: 2320 7369 6e67 6c65 2066 756e 6374 696f  # single functio
+000183d0: 6e0a 2020 2020 2020 2020 6966 2070 6172  n.        if par
+000183e0: 656e 7420 3e3d 2030 3a0a 2020 2020 2020  ent >= 0:.      
+000183f0: 2020 2020 2020 6c6f 633d 312b 7061 7265        loc=1+pare
+00018400: 6e74 0a20 2020 2020 2020 2065 6c73 653a  nt.        else:
+00018410: 0a20 2020 2020 2020 2020 2020 206c 6f63  .            loc
+00018420: 3d70 6172 656e 740a 2020 2020 2020 2020  =parent.        
+00018430: 6966 206c 656e 286d 795f 6869 7374 6f72  if len(my_histor
+00018440: 7929 203c 3d20 6c6f 633a 2023 6f75 7420  y) <= loc: #out 
+00018450: 6f66 2072 616e 6765 0a20 2020 2020 2020  of range.       
+00018460: 2020 2020 206c 6f63 3d2d 310a 2020 2020       loc=-1.    
+00018470: 2020 2020 6966 206f 626a 3a0a 2020 2020      if obj:.    
+00018480: 2020 2020 2020 2020 2320 7265 7475 726e          # return
+00018490: 206e 616d 6520 616e 6420 6f62 6a65 6374   name and object
+000184a0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000184b0: 7572 6e20 286d 795f 6869 7374 6f72 795b  urn (my_history[
+000184c0: 6c6f 635d 2e66 756e 6374 696f 6e2c 4672  loc].function,Fr
+000184d0: 616d 6532 4675 6e63 7469 6f6e 286d 795f  ame2Function(my_
+000184e0: 6869 7374 6f72 795b 6c6f 635d 2e66 7261  history[loc].fra
+000184f0: 6d65 2929 0a20 2020 2020 2020 2065 6c73  me)).        els
+00018500: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00018510: 743d 6d79 5f68 6973 746f 7279 5b6c 6f63  t=my_history[loc
+00018520: 5d2e 6675 6e63 7469 6f6e 0a20 2020 2020  ].function.     
+00018530: 2020 2020 2020 2069 6620 6172 6773 3a0a         if args:.
+00018540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018550: 6172 673d 4675 6e63 7469 6f6e 4172 6773  arg=FunctionArgs
+00018560: 2846 7261 6d65 3246 756e 6374 696f 6e28  (Frame2Function(
+00018570: 6d79 5f68 6973 746f 7279 5b6c 6f63 5d2e  my_history[loc].
+00018580: 6672 616d 6529 2c6d 6f64 653d 2773 7472  frame),mode='str
+00018590: 696e 6727 2c64 6566 6175 6c74 3d27 2729  ing',default='')
+000185a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000185b0: 2069 6620 6172 673a 2072 743d 7274 2b27   if arg: rt=rt+'
+000185c0: 7b7d 272e 666f 726d 6174 2861 7267 290a  {}'.format(arg).
+000185d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000185e0: 656c 7365 3a20 7274 3d72 742b 2728 2927  else: rt=rt+'()'
+000185f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00018600: 6c69 6e65 5f6e 756d 6265 723a 2072 743d  line_number: rt=
+00018610: 7274 2b27 2061 7420 7b7d 272e 666f 726d  rt+' at {}'.form
+00018620: 6174 286d 795f 6869 7374 6f72 795b 6c6f  at(my_history[lo
+00018630: 635d 2e6c 696e 656e 6f29 0a20 2020 2020  c].lineno).     
+00018640: 2020 2020 2020 2069 6620 6675 6c6c 5f66         if full_f
+00018650: 696c 656e 616d 653a 2072 743d 7274 2b27  ilename: rt=rt+'
+00018660: 2069 6e20 7b7d 272e 666f 726d 6174 286d   in {}'.format(m
+00018670: 795f 6869 7374 6f72 795b 6c6f 635d 2e66  y_history[loc].f
+00018680: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
+00018690: 2020 2020 2065 6c69 6620 6669 6c65 6e61       elif filena
+000186a0: 6d65 3a20 7274 3d72 742b 2720 696e 207b  me: rt=rt+' in {
+000186b0: 7d27 2e66 6f72 6d61 7428 6f73 2e70 6174  }'.format(os.pat
+000186c0: 682e 6261 7365 6e61 6d65 286d 795f 6869  h.basename(my_hi
+000186d0: 7374 6f72 795b 6c6f 635d 2e66 696c 656e  story[loc].filen
+000186e0: 616d 6529 290a 2020 2020 2020 2020 2020  ame)).          
+000186f0: 2020 7265 7475 726e 2072 740a 0a64 6566    return rt..def
+00018700: 2046 756e 6374 696f 6e4c 6973 7428 6f62   FunctionList(ob
+00018710: 6a3d 4e6f 6e65 293a 0a20 2020 2027 2727  j=None):.    '''
+00018720: 0a20 2020 2047 6574 2066 756e 6374 696f  .    Get functio
+00018730: 6e20 6c69 7374 2069 6e20 7468 6973 206f  n list in this o
+00018740: 626a 6563 740a 2020 2020 2727 270a 2020  bject.    '''.  
+00018750: 2020 6161 3d7b 7d0a 2020 2020 6966 2069    aa={}.    if i
+00018760: 7369 6e73 7461 6e63 6528 6f62 6a2c 7374  sinstance(obj,st
+00018770: 7229 3a0a 2020 2020 2020 206f 626a 3d73  r):.       obj=s
+00018780: 7973 2e6d 6f64 756c 6573 2e67 6574 286f  ys.modules.get(o
+00018790: 626a 290a 2020 2020 656c 6966 2049 734e  bj).    elif IsN
+000187a0: 6f6e 6528 6f62 6a29 3a0a 2020 2020 2020  one(obj):.      
+000187b0: 206f 626a 3d4d 794d 6f64 756c 6528 6465   obj=MyModule(de
+000187c0: 6661 756c 743d 4e6f 6e65 290a 2020 2020  fault=None).    
+000187d0: 6966 2054 7970 6528 6f62 6a2c 2827 636c  if Type(obj,('cl
+000187e0: 6173 736f 626a 272c 276d 6f64 756c 6527  assobj','module'
+000187f0: 2c27 696e 7374 616e 6365 2729 293a 0a20  ,'instance')):. 
+00018800: 2020 2020 2020 2069 6620 5479 7065 286f         if Type(o
+00018810: 626a 2c27 696e 7374 616e 6365 2729 3a20  bj,'instance'): 
+00018820: 6f62 6a3d 6f62 6a2e 5f5f 636c 6173 735f  obj=obj.__class_
+00018830: 5f20 2320 6d6f 7665 2043 4c41 5353 2829  _ # move CLASS()
+00018840: 2074 6f20 434c 4153 530a 2020 2020 2020   to CLASS.      
+00018850: 2020 666f 7220 6e61 6d65 2c66 6f62 6a20    for name,fobj 
+00018860: 696e 2069 6e73 7065 6374 2e67 6574 6d65  in inspect.getme
+00018870: 6d62 6572 7328 6f62 6a29 3a0a 2020 2020  mbers(obj):.    
+00018880: 2020 2020 2020 2020 6966 2069 6e73 7065          if inspe
+00018890: 6374 2e69 7366 756e 6374 696f 6e28 666f  ct.isfunction(fo
+000188a0: 626a 293a 0a20 2020 2020 2020 2020 2020  bj):.           
+000188b0: 2020 2020 2061 612e 7570 6461 7465 287b       aa.update({
+000188c0: 6e61 6d65 3a66 6f62 6a7d 290a 2020 2020  name:fobj}).    
+000188d0: 7265 7475 726e 2061 610a 0a64 6566 2047  return aa..def G
+000188e0: 6574 436c 6173 7328 6f62 6a2c 6465 6661  etClass(obj,defa
+000188f0: 756c 743d 4e6f 6e65 293a 0a20 2020 2027  ult=None):.    '
+00018900: 2727 0a20 2020 2047 6574 2043 6c61 7373  ''.    Get Class
+00018910: 206f 626a 6563 7420 6672 6f6d 2069 6e73   object from ins
+00018920: 7461 6e63 652c 6d65 7468 6f64 2c66 756e  tance,method,fun
+00018930: 6374 696f 6e0a 2020 2020 2727 270a 2020  ction.    '''.  
+00018940: 2020 6f62 6a5f 7479 7065 3d54 7970 654e    obj_type=TypeN
+00018950: 616d 6528 6f62 6a29 0a20 2020 2069 6620  ame(obj).    if 
+00018960: 6f62 6a5f 7479 7065 2069 6e20 5b27 696e  obj_type in ['in
+00018970: 7374 616e 6365 275d 3a0a 2020 2020 2020  stance']:.      
+00018980: 2020 6f62 6a3d 6f62 6a2e 5f5f 636c 6173    obj=obj.__clas
+00018990: 735f 5f20 2320 436f 6e76 6572 7420 696e  s__ # Convert in
+000189a0: 7374 616e 6365 2074 6f20 636c 6173 736f  stance to classo
+000189b0: 626a 0a20 2020 2020 2020 206f 626a 5f74  bj.        obj_t
+000189c0: 7970 653d 5479 7065 4e61 6d65 286f 626a  ype=TypeName(obj
+000189d0: 290a 2020 2020 6966 206f 626a 5f74 7970  ).    if obj_typ
+000189e0: 6520 696e 205b 2763 6c61 7373 6f62 6a27  e in ['classobj'
+000189f0: 5d3a 2072 6574 7572 6e20 6f62 6a0a 2020  ]: return obj.  
+00018a00: 2020 6966 206f 626a 5f74 7970 6520 696e    if obj_type in
+00018a10: 205b 276d 6574 686f 6427 5d3a 0a20 2020   ['method']:.   
+00018a20: 2020 2020 206f 626a 5f6e 616d 6520 3d20       obj_name = 
+00018a30: 6f62 6a2e 5f5f 6e61 6d65 5f5f 0a20 2020  obj.__name__.   
+00018a40: 2020 2020 2069 6620 6f62 6a2e 5f5f 7365       if obj.__se
+00018a50: 6c66 5f5f 3a0a 2020 2020 2020 2020 2020  lf__:.          
+00018a60: 2020 636c 6173 7365 7320 3d20 5b6f 626a    classes = [obj
+00018a70: 2e5f 5f73 656c 665f 5f2e 5f5f 636c 6173  .__self__.__clas
+00018a80: 735f 5f5d 0a20 2020 2020 2020 2065 6c73  s__].        els
+00018a90: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
+00018aa0: 756e 626f 756e 6420 6d65 7468 6f64 0a20  unbound method. 
+00018ab0: 2020 2020 2020 2020 2020 2063 6c61 7373             class
+00018ac0: 6573 203d 205b 6f62 6a2e 696d 5f63 6c61  es = [obj.im_cla
+00018ad0: 7373 5d0a 2020 2020 2020 2020 7768 696c  ss].        whil
+00018ae0: 6520 636c 6173 7365 733a 0a20 2020 2020  e classes:.     
+00018af0: 2020 2020 2020 2063 203d 2063 6c61 7373         c = class
+00018b00: 6573 2e70 6f70 2829 0a20 2020 2020 2020  es.pop().       
+00018b10: 2020 2020 2069 6620 6f62 6a5f 6e61 6d65       if obj_name
+00018b20: 2069 6e20 632e 5f5f 6469 6374 5f5f 3a0a   in c.__dict__:.
+00018b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018b40: 7265 7475 726e 2063 0a20 2020 2020 2020  return c.       
+00018b50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00018b60: 2020 2020 2020 2020 2020 2063 6c61 7373             class
+00018b70: 6573 203d 206c 6973 7428 632e 5f5f 6261  es = list(c.__ba
+00018b80: 7365 735f 5f29 202b 2063 6c61 7373 6573  ses__) + classes
+00018b90: 0a20 2020 2065 6c69 6620 6f62 6a5f 7479  .    elif obj_ty
+00018ba0: 7065 2069 6e20 5b27 6675 6e63 7469 6f6e  pe in ['function
+00018bb0: 275d 3a0a 2020 2020 2020 2020 6966 2050  ']:.        if P
+00018bc0: 7956 6572 2833 293a 0a20 2020 2020 2020  yVer(3):.       
+00018bd0: 2020 2020 2023 6361 6c6c 6572 5f6d 6f64       #caller_mod
+00018be0: 756c 655f 6e61 6d65 3d69 6e73 7065 6374  ule_name=inspect
+00018bf0: 2e63 7572 7265 6e74 6672 616d 6528 292e  .currentframe().
+00018c00: 665f 6261 636b 2e66 5f67 6c6f 6261 6c73  f_back.f_globals
+00018c10: 5b27 5f5f 6e61 6d65 5f5f 275d 0a20 2020  ['__name__'].   
+00018c20: 2020 2020 2020 2020 2023 6361 6c6c 6572           #caller
+00018c30: 5f6d 6f64 756c 653d 7379 732e 6d6f 6475  _module=sys.modu
+00018c40: 6c65 735b 6361 6c6c 6572 5f6d 6f64 756c  les[caller_modul
+00018c50: 655f 6e61 6d65 5d0a 2020 2020 2020 2020  e_name].        
+00018c60: 2020 2020 6361 6c6c 6572 5f6d 6f64 756c      caller_modul
+00018c70: 653d 696e 7370 6563 742e 6765 746d 6f64  e=inspect.getmod
+00018c80: 756c 6528 696e 7370 6563 742e 6375 7272  ule(inspect.curr
+00018c90: 656e 7466 7261 6d65 2829 2e66 5f62 6163  entframe().f_bac
+00018ca0: 6b29 0a20 2020 2020 2020 2020 2020 2072  k).            r
+00018cb0: 6574 7572 6e20 6765 7461 7474 7228 6361  eturn getattr(ca
+00018cc0: 6c6c 6572 5f6d 6f64 756c 655f 6e61 6d65  ller_module_name
+00018cd0: 2c27 2e27 2e6a 6f69 6e28 6f62 6a2e 5f5f  ,'.'.join(obj.__
+00018ce0: 7175 616c 6e61 6d65 5f5f 2e73 706c 6974  qualname__.split
+00018cf0: 2827 2e27 295b 3a2d 315d 2929 0a20 2020  ('.')[:-1])).   
+00018d00: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+00018d10: 0a64 6566 2046 756e 6374 696f 6e41 7267  .def FunctionArg
+00018d20: 7328 6675 6e63 2c2a 2a6f 7074 7329 3a0a  s(func,**opts):.
+00018d30: 2020 2020 2727 270a 2020 2020 4765 7420      '''.    Get 
+00018d40: 6675 6e63 7469 6f6e 2773 2069 6e70 7574  function's input
+00018d50: 2041 7267 756d 656e 7473 0a20 2020 202d   Arguments.    -
+00018d60: 206d 6f64 650a 2020 2020 2020 2d20 6465   mode.      - de
+00018d70: 6661 756c 7473 203a 2067 6574 2064 6566  faults : get def
+00018d80: 6175 6c74 2028 563d 3f2c 2e2e 2e29 0a20  ault (V=?,...). 
+00018d90: 2020 2020 202d 2061 7267 7320 2020 2020       - args     
+00018da0: 3a20 6765 7420 6172 6773 2020 2856 2c56  : get args  (V,V
+00018db0: 322c 2e2e 2e29 0a20 2020 2020 202d 2076  2,...).      - v
+00018dc0: 6172 6172 6773 2020 3a20 6765 7420 7661  arargs  : get va
+00018dd0: 7261 7267 7320 282a 5629 0a20 2020 2020  rargs (*V).     
+00018de0: 202d 206b 6579 776f 7264 7320 3a20 6765   - keywords : ge
+00018df0: 7420 6b65 7977 6f72 6473 2028 2a2a 5629  t keywords (**V)
+00018e00: 0a20 2020 2020 202d 2073 7472 696e 6720  .      - string 
+00018e10: 2020 3a20 7265 7475 726e 2061 7267 756d    : return argum
+00018e20: 656e 7473 2074 6f20 7374 7269 6e67 2066  ents to string f
+00018e30: 6f72 6d61 740a 2020 2020 2020 2d20 6c69  ormat.      - li
+00018e40: 7374 2c74 7570 6c65 3a20 7265 7475 726e  st,tuple: return
+00018e50: 2061 7267 756d 656e 7473 2074 6f20 6c69   arguments to li
+00018e60: 7374 2066 6f72 6d61 740a 2020 2020 2020  st format.      
+00018e70: 6465 6661 756c 7420 6f75 7470 7574 203a  default output :
+00018e80: 2064 6963 7469 6f6e 6961 7279 2066 6f72   dictioniary for
+00018e90: 6d61 740a 2020 2020 2d20 6465 6661 756c  mat.    - defaul
+00018ea0: 7420 3a20 6966 206e 6f74 6869 6e67 2074  t : if nothing t
+00018eb0: 6865 6e20 7265 7475 726e 2064 6566 6175  hen return defau
+00018ec0: 6c74 2076 616c 7565 2028 6465 6661 756c  lt value (defaul
+00018ed0: 7420 4e6f 6e65 290a 2020 2020 2727 270a  t None).    '''.
+00018ee0: 2020 2020 6d6f 6465 3d6f 7074 732e 6765      mode=opts.ge
+00018ef0: 7428 276d 6f64 6527 2c6f 7074 732e 6765  t('mode',opts.ge
+00018f00: 7428 2766 6965 6c64 272c 2764 6566 6175  t('field','defau
+00018f10: 6c74 7327 2929 0a20 2020 2064 6566 6175  lts')).    defau
+00018f20: 6c74 3d6f 7074 732e 6765 7428 2764 6566  lt=opts.get('def
+00018f30: 6175 6c74 272c 4e6f 6e65 290a 2020 2020  ault',None).    
+00018f40: 2369 6620 6e6f 7420 5479 7065 2866 756e  #if not Type(fun
+00018f50: 632c 2766 756e 6374 696f 6e27 2c27 6d65  c,'function','me
+00018f60: 7468 6f64 2729 3a0a 2020 2020 6966 206e  thod'):.    if n
+00018f70: 6f74 2049 7346 756e 6374 696f 6e28 6675  ot IsFunction(fu
+00018f80: 6e63 293a 0a20 2020 2020 2020 2072 6574  nc):.        ret
+00018f90: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
+00018fa0: 7274 3d7b 7d0a 2020 2020 234e 6f74 2073  rt={}.    #Not s
+00018fb0: 7570 706f 7274 202a 7620 7061 7261 6d65  upport *v parame
+00018fc0: 7465 7220 7769 7468 2067 6574 6172 6773  ter with getargs
+00018fd0: 7065 6328 290a 2020 2020 2361 7267 732c  pec().    #args,
+00018fe0: 2076 6172 6172 6773 2c20 6b65 7977 6f72   varargs, keywor
+00018ff0: 6473 2c20 6465 6661 756c 7473 203d 2069  ds, defaults = i
+00019000: 6e73 7065 6374 2e67 6574 6172 6773 7065  nspect.getargspe
+00019010: 6328 6675 6e63 290a 2020 2020 2369 6620  c(func).    #if 
+00019020: 6e6f 7420 4973 4e6f 6e65 2864 6566 6175  not IsNone(defau
+00019030: 6c74 7329 3a0a 2020 2020 2320 2020 2064  lts):.    #    d
+00019040: 6566 6175 6c74 733d 6469 6374 287a 6970  efaults=dict(zip
+00019050: 2861 7267 735b 2d6c 656e 2864 6566 6175  (args[-len(defau
+00019060: 6c74 7329 3a5d 2c20 6465 6661 756c 7473  lts):], defaults
+00019070: 2929 0a20 2020 2023 2020 2020 6465 6c20  )).    #    del 
+00019080: 6172 6773 5b2d 6c65 6e28 6465 6661 756c  args[-len(defaul
+00019090: 7473 293a 5d0a 2020 2020 2320 2020 2072  ts):].    #    r
+000190a0: 745b 2764 6566 6175 6c74 7327 5d3d 6465  t['defaults']=de
+000190b0: 6661 756c 7473 0a20 2020 2023 2069 6e73  faults.    # ins
+000190c0: 7065 6374 2e67 6574 6361 6c6c 6172 6773  pect.getcallargs
+000190d0: 283c 6675 6e63 7469 6f6e 3e2c 6461 7461  (<function>,data
+000190e0: 732e 2e2e 2e29 203a 2061 7574 6f6d 6174  s....) : automat
+000190f0: 6963 616c 6c79 206d 6174 6368 696e 6720  ically matching 
+00019100: 616e 6420 7075 7420 746f 203c 6675 6e63  and put to <func
+00019110: 7469 6f6e 733e 2773 2069 6e70 7574 7320  tions>'s inputs 
+00019120: 3a20 4368 6563 6b20 6974 206c 6174 6572  : Check it later
+00019130: 0a20 2020 2074 7279 3a0a 2020 2020 2020  .    try:.      
+00019140: 2020 6172 6720 3d20 696e 7370 6563 742e    arg = inspect.
+00019150: 6765 7466 756c 6c61 7267 7370 6563 2866  getfullargspec(f
+00019160: 756e 6329 0a20 2020 2065 7863 6570 743a  unc).    except:
+00019170: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00019180: 7274 0a0a 2020 2020 6172 6773 3d61 7267  rt..    args=arg
+00019190: 2e61 7267 730a 2020 2020 7661 7261 7267  .args.    vararg
+000191a0: 733d 6172 672e 7661 7261 7267 730a 2020  s=arg.varargs.  
+000191b0: 2020 6b65 7977 6f72 6473 3d61 7267 2e76    keywords=arg.v
+000191c0: 6172 6b77 0a20 2020 2064 6566 6175 6c74  arkw.    default
+000191d0: 733d 6172 672e 6b77 6f6e 6c79 6465 6661  s=arg.kwonlydefa
+000191e0: 756c 7473 0a20 2020 2069 6620 6e6f 7420  ults.    if not 
+000191f0: 4973 4e6f 6e65 2861 7267 2e64 6566 6175  IsNone(arg.defau
+00019200: 6c74 7329 3a0a 2020 2020 2020 2020 6966  lts):.        if
+00019210: 2064 6566 6175 6c74 7320 6973 204e 6f6e   defaults is Non
+00019220: 653a 0a20 2020 2020 2020 2020 2020 2064  e:.            d
+00019230: 6566 6175 6c74 733d 6469 6374 287a 6970  efaults=dict(zip
+00019240: 2861 7267 735b 2d6c 656e 2861 7267 2e64  (args[-len(arg.d
+00019250: 6566 6175 6c74 7329 3a5d 2c61 7267 2e64  efaults):],arg.d
+00019260: 6566 6175 6c74 7329 290a 2020 2020 2020  efaults)).      
+00019270: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00019280: 2020 2020 6465 6661 756c 7473 2e75 7064      defaults.upd
+00019290: 6174 6528 6469 6374 287a 6970 2861 7267  ate(dict(zip(arg
+000192a0: 735b 2d6c 656e 2861 7267 2e64 6566 6175  s[-len(arg.defau
+000192b0: 6c74 7329 3a5d 2c61 7267 2e64 6566 6175  lts):],arg.defau
+000192c0: 6c74 7329 2929 0a20 2020 2020 2020 2064  lts))).        d
+000192d0: 656c 2061 7267 735b 2d6c 656e 2861 7267  el args[-len(arg
+000192e0: 2e64 6566 6175 6c74 7329 3a5d 0a0a 2020  .defaults):]..  
+000192f0: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
+00019300: 6465 6661 756c 7473 293a 2072 745b 2764  defaults): rt['d
+00019310: 6566 6175 6c74 7327 5d3d 6465 6661 756c  efaults']=defaul
+00019320: 7473 0a20 2020 2069 6620 6172 6773 3a0a  ts.    if args:.
+00019330: 2020 2020 2020 2020 6966 2061 7267 735b          if args[
+00019340: 305d 203d 3d20 2773 656c 6627 3a0a 2020  0] == 'self':.  
+00019350: 2020 2020 2020 2020 2020 6172 6773 3d61            args=a
+00019360: 7267 735b 313a 5d0a 2020 2020 2020 2020  rgs[1:].        
+00019370: 7274 5b27 6172 6773 275d 3d61 7267 730a  rt['args']=args.
+00019380: 2020 2020 6966 2076 6172 6172 6773 3a20      if varargs: 
+00019390: 7274 5b27 7661 7261 7267 7327 5d3d 7661  rt['varargs']=va
+000193a0: 7261 7267 730a 2020 2020 6966 206b 6579  rargs.    if key
+000193b0: 776f 7264 733a 2072 745b 276b 6579 776f  words: rt['keywo
+000193c0: 7264 7327 5d3d 6b65 7977 6f72 6473 0a20  rds']=keywords. 
+000193d0: 2020 2069 6620 5479 7065 286d 6f64 652c     if Type(mode,
+000193e0: 286c 6973 742c 7475 706c 6529 293a 0a20  (list,tuple)):. 
+000193f0: 2020 2020 2020 2072 7473 3d5b 5d0a 2020         rts=[].  
+00019400: 2020 2020 2020 666f 7220 6969 2069 6e20        for ii in 
+00019410: 7274 3a0a 2020 2020 2020 2020 2020 2020  rt:.            
+00019420: 7274 732e 6170 7065 6e64 2872 742e 6765  rts.append(rt.ge
+00019430: 7428 6969 2c64 6566 6175 6c74 2929 0a20  t(ii,default)). 
+00019440: 2020 2020 2020 2072 6574 7572 6e20 7274         return rt
+00019450: 730a 2020 2020 656c 7365 3a0a 2020 2020  s.    else:.    
+00019460: 2020 2020 6966 206d 6f64 6520 696e 205b      if mode in [
+00019470: 2773 7472 272c 2773 7472 696e 6727 2c27  'str','string','
+00019480: 666f 726d 6174 275d 3a0a 2020 2020 2020  format']:.      
+00019490: 2020 2020 2020 7265 7475 726e 2073 7472        return str
+000194a0: 2869 6e73 7065 6374 2e73 6967 6e61 7475  (inspect.signatu
+000194b0: 7265 2866 756e 6329 290a 2020 2020 2020  re(func)).      
+000194c0: 2020 2020 2020 2361 7267 5f73 7472 3d27        #arg_str='
+000194d0: 270a 2020 2020 2020 2020 2020 2020 2369  '.            #i
+000194e0: 6620 7274 3a0a 2020 2020 2020 2020 2020  f rt:.          
+000194f0: 2020 2320 2020 2066 6f72 207a 2069 6e20    #    for z in 
+00019500: 7274 2e67 6574 2827 6172 6773 272c 5b5d  rt.get('args',[]
+00019510: 293a 0a20 2020 2020 2020 2020 2020 2023  ):.            #
+00019520: 2020 2020 2020 2020 2069 6620 6172 675f           if arg_
+00019530: 7374 723a 0a20 2020 2020 2020 2020 2020  str:.           
+00019540: 2023 2020 2020 2020 2020 2020 2020 2061   #             a
+00019550: 7267 5f73 7472 3d61 7267 5f73 7472 2b27  rg_str=arg_str+'
+00019560: 2c7b 7d27 2e66 6f72 6d61 7428 7a29 0a20  ,{}'.format(z). 
+00019570: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+00019580: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00019590: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000195a0: 2020 2020 2061 7267 5f73 7472 3d27 7b7d       arg_str='{}
+000195b0: 272e 666f 726d 6174 287a 290a 2020 2020  '.format(z).    
+000195c0: 2020 2020 2020 2020 2320 2020 2069 6620          #    if 
+000195d0: 2776 6172 6172 6773 2720 696e 2072 743a  'varargs' in rt:
+000195e0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+000195f0: 2020 2020 2020 2069 6620 6172 675f 7374         if arg_st
+00019600: 723a 0a20 2020 2020 2020 2020 2020 2023  r:.            #
+00019610: 2020 2020 2020 2020 2020 2020 2061 7267               arg
+00019620: 5f73 7472 3d61 7267 5f73 7472 2b27 2c2a  _str=arg_str+',*
+00019630: 7b7d 272e 666f 726d 6174 2872 745b 2776  {}'.format(rt['v
+00019640: 6172 6172 6773 275d 290a 2020 2020 2020  arargs']).      
+00019650: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00019660: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00019670: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00019680: 6172 675f 7374 723d 272a 7b7d 272e 666f  arg_str='*{}'.fo
+00019690: 726d 6174 2872 745b 2776 6172 6172 6773  rmat(rt['varargs
+000196a0: 275d 290a 2020 2020 2020 2020 2020 2020  ']).            
+000196b0: 2320 2020 2069 6620 2764 6566 6175 6c74  #    if 'default
+000196c0: 7327 2069 6e20 7274 3a0a 2020 2020 2020  s' in rt:.      
+000196d0: 2020 2020 2020 2320 2020 2020 2020 2066        #        f
+000196e0: 6f72 207a 2069 6e20 7274 5b27 6465 6661  or z in rt['defa
+000196f0: 756c 7473 275d 3a0a 2020 2020 2020 2020  ults']:.        
+00019700: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00019710: 2020 6966 2061 7267 5f73 7472 3a0a 2020    if arg_str:.  
+00019720: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00019730: 2020 2020 2020 2020 2020 2020 6172 675f              arg_
+00019740: 7374 723d 6172 675f 7374 722b 272c 7b7d  str=arg_str+',{}
+00019750: 3d27 2e66 6f72 6d61 7428 7a29 0a20 2020  ='.format(z).   
+00019760: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00019770: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00019780: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00019790: 2020 2020 2020 2020 2020 2061 7267 5f73             arg_s
+000197a0: 7472 3d27 7b7d 3d27 2e66 6f72 6d61 7428  tr='{}='.format(
+000197b0: 7a29 0a20 2020 2020 2020 2020 2020 2023  z).            #
+000197c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000197d0: 5479 7065 2872 745b 2764 6566 6175 6c74  Type(rt['default
+000197e0: 7327 5d5b 7a5d 2c73 7472 293a 0a20 2020  s'][z],str):.   
+000197f0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00019800: 2020 2020 2020 2020 2020 2061 7267 5f73             arg_s
+00019810: 7472 3d61 7267 5f73 7472 2b22 277b 7d27  tr=arg_str+"'{}'
+00019820: 222e 666f 726d 6174 2872 745b 2764 6566  ".format(rt['def
+00019830: 6175 6c74 7327 5d5b 7a5d 290a 2020 2020  aults'][z]).    
+00019840: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019850: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00019860: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019870: 2020 2020 2020 2020 2020 6172 675f 7374            arg_st
+00019880: 723d 6172 675f 7374 722b 227b 7d22 2e66  r=arg_str+"{}".f
+00019890: 6f72 6d61 7428 7274 5b27 6465 6661 756c  ormat(rt['defaul
+000198a0: 7473 275d 5b7a 5d29 0a20 2020 2020 2020  ts'][z]).       
+000198b0: 2020 2020 2023 2020 2020 6966 2027 6b65       #    if 'ke
+000198c0: 7977 6f72 6473 2720 696e 2072 743a 0a20  ywords' in rt:. 
+000198d0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+000198e0: 2020 2020 6966 2061 7267 5f73 7472 3a0a      if arg_str:.
+000198f0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00019900: 2020 2020 2020 2020 2020 6172 675f 7374            arg_st
+00019910: 723d 6172 675f 7374 722b 272c 2a2a 7b7d  r=arg_str+',**{}
+00019920: 272e 666f 726d 6174 2872 745b 276b 6579  '.format(rt['key
+00019930: 776f 7264 7327 5d29 0a20 2020 2020 2020  words']).       
+00019940: 2020 2020 2023 2020 2020 2020 2020 656c       #        el
+00019950: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00019960: 2320 2020 2020 2020 2020 2020 2020 6172  #             ar
+00019970: 675f 7374 723d 272a 2a7b 7d27 2e66 6f72  g_str='**{}'.for
+00019980: 6d61 7428 7274 5b27 6b65 7977 6f72 6473  mat(rt['keywords
+00019990: 275d 290a 2020 2020 2020 2020 2020 2020  ']).            
+000199a0: 2372 6574 7572 6e20 6172 675f 7374 720a  #return arg_str.
+000199b0: 2020 2020 2020 2020 6966 206d 6f64 6520          if mode 
+000199c0: 696e 2072 743a 0a20 2020 2020 2020 2020  in rt:.         
+000199d0: 2020 2072 6574 7572 6e20 7274 5b6d 6f64     return rt[mod
+000199e0: 655d 0a20 2020 2020 2020 2072 6574 7572  e].        retur
+000199f0: 6e20 7274 0a0a 6465 6620 4172 6773 2873  n rt..def Args(s
+00019a00: 7263 2c66 6965 6c64 3d27 616c 6c27 2c64  rc,field='all',d
+00019a10: 6566 6175 6c74 3d7b 7d29 3a0a 2020 2020  efault={}):.    
+00019a20: 2727 270a 2020 2020 4765 7420 436c 6173  '''.    Get Clas
+00019a30: 732c 2069 6e73 7461 6e63 6527 7320 676c  s, instance's gl
+00019a40: 6f62 616c 2061 7267 756d 656e 7473 0a20  obal arguments. 
+00019a50: 2020 2047 6574 2046 756e 6374 696f 6e20     Get Function 
+00019a60: 696e 7075 7420 7061 7261 6d65 7465 7273  input parameters
+00019a70: 0a20 2020 2027 2727 0a20 2020 2072 743d  .    '''.    rt=
+00019a80: 7b7d 0a20 2020 2069 6620 5479 7065 2873  {}.    if Type(s
+00019a90: 7263 2c28 2763 6c61 7373 6f62 6a27 2c27  rc,('classobj','
+00019aa0: 696e 7374 616e 6365 2729 293a 0a20 2020  instance')):.   
+00019ab0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00019ac0: 2020 2020 2020 7372 633d 6765 7461 7474        src=getatt
+00019ad0: 7228 7372 632c 275f 5f69 6e69 745f 5f27  r(src,'__init__'
+00019ae0: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
+00019af0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00019b00: 7475 726e 2073 7263 2e5f 5f64 6963 745f  turn src.__dict_
+00019b10: 5f0a 2020 2020 2365 6c69 6620 6e6f 7420  _.    #elif not 
+00019b20: 5479 7065 2873 7263 2c27 6675 6e63 7469  Type(src,'functi
+00019b30: 6f6e 2729 3a0a 2020 2020 656c 6966 206e  on'):.    elif n
+00019b40: 6f74 2049 7346 756e 6374 696f 6e28 7372  ot IsFunction(sr
+00019b50: 6329 3a0a 2020 2020 2020 2020 7265 7475  c):.        retu
+00019b60: 726e 2064 6566 6175 6c74 0a20 2020 2072  rn default.    r
+00019b70: 6574 7572 6e20 4675 6e63 7469 6f6e 4172  eturn FunctionAr
+00019b80: 6773 2873 7263 2c6d 6f64 653d 6669 656c  gs(src,mode=fiel
+00019b90: 642c 6465 6661 756c 743d 6465 6661 756c  d,default=defaul
+00019ba0: 7429 0a0a 6465 6620 5661 7269 6162 6c65  t)..def Variable
+00019bb0: 2873 7263 3d4e 6f6e 652c 6f62 6a3d 4e6f  (src=None,obj=No
+00019bc0: 6e65 2c70 6172 656e 743d 302c 6869 7374  ne,parent=0,hist
+00019bd0: 6f72 793d 4661 6c73 652c 6465 6661 756c  ory=False,defaul
+00019be0: 743d 4661 6c73 652c 6d6f 6465 3d27 6c6f  t=False,mode='lo
+00019bf0: 6361 6c27 2c56 6172 5479 7065 3d4e 6f6e  cal',VarType=Non
+00019c00: 652c 616c 6c74 7970 653d 5472 7565 293a  e,alltype=True):
+00019c10: 0a20 2020 2027 2727 0a20 2020 2047 6574  .    '''.    Get
+00019c20: 2061 7661 696c 6162 6c65 2076 6172 6961   available varia
+00019c30: 626c 6520 6461 7461 0a20 2020 2020 2d20  ble data.     - 
+00019c40: 7372 633a 200a 2020 2020 2020 2069 6620  src: .       if 
+00019c50: 4e6f 6e65 3a20 7265 7475 726e 2077 686f  None: return who
+00019c60: 6c65 2065 6e76 6972 6f6e 6d65 6e74 2028  le environment (
+00019c70: 6469 6374 290a 2020 2020 2020 2069 6620  dict).       if 
+00019c80: 7374 7269 6e67 2074 6865 6e20 6669 6e64  string then find
+00019c90: 2074 6865 2073 7472 696e 6720 7661 7269   the string vari
+00019ca0: 6162 6c65 2069 6e20 7468 6520 656e 7669  able in the envi
+00019cb0: 726f 6e6d 656e 740a 2020 2020 2020 2069  ronment.       i
+00019cc0: 6620 7661 7269 6162 6c65 2074 6865 6e20  f variable then 
+00019cd0: 7265 7475 726e 2074 6861 740a 2020 2020  return that.    
+00019ce0: 202d 2070 6172 656e 7420 0a20 2020 2020   - parent .     
+00019cf0: 2020 3020 3a20 6d79 2066 756e 6374 696f    0 : my functio
+00019d00: 6e20 2864 6566 6175 6c74 290a 2020 2020  n (default).    
+00019d10: 2020 2031 203a 206d 7920 7061 7265 6e74     1 : my parent
+00019d20: 7320 6675 6e63 7469 6f6e 0a20 2020 2020  s function.     
+00019d30: 2020 2e2e 2e0a 2020 2020 202d 2068 6973    ....     - his
+00019d40: 746f 7279 3a20 6672 6f6d 206d 6520 746f  tory: from me to
+00019d50: 206d 7920 746f 7020 6f66 2074 6865 2066   my top of the f
+00019d60: 756e 6374 696f 6e73 0a20 2020 2020 2d20  unctions.     - 
+00019d70: 6d6f 6465 2020 3a20 7661 7269 6162 6c65  mode  : variable
+00019d80: 2061 7265 610a 2020 2020 2020 206c 6f63   area.       loc
+00019d90: 616c 203a 2066 756e 6374 696f 6e27 7320  al : function's 
+00019da0: 6c6f 6361 6c28 696e 7369 6465 2920 7661  local(inside) va
+00019db0: 7269 6162 6c65 0a20 2020 2020 2020 676c  riable.       gl
+00019dc0: 6f62 616c 3a20 6675 6e63 7469 6f6e 2773  obal: function's
+00019dd0: 2067 6c6f 6261 6c20 7661 7269 6162 6c65   global variable
+00019de0: 0a20 2020 2027 2727 0a20 2020 2073 7263  .    '''.    src
+00019df0: 5f74 7970 653d 5479 7065 4e61 6d65 2873  _type=TypeName(s
+00019e00: 7263 290a 2020 2020 6f62 6a5f 7479 7065  rc).    obj_type
+00019e10: 3d54 7970 654e 616d 6528 6f62 6a29 0a20  =TypeName(obj). 
+00019e20: 2020 2070 6172 656e 743d 496e 7428 7061     parent=Int(pa
+00019e30: 7265 6e74 290a 2020 2020 6966 206e 6f74  rent).    if not
+00019e40: 2069 7369 6e73 7461 6e63 6528 7061 7265   isinstance(pare
+00019e50: 6e74 2c69 6e74 293a 2070 6172 656e 743d  nt,int): parent=
+00019e60: 300a 2020 2020 6966 2070 6172 656e 7420  0.    if parent 
+00019e70: 3e3d 2030 3a0a 2020 2020 2020 2020 6c6f  >= 0:.        lo
+00019e80: 633d 312b 7061 7265 6e74 0a20 2020 2065  c=1+parent.    e
+00019e90: 6c73 653a 0a20 2020 2020 2020 206c 6f63  lse:.        loc
+00019ea0: 3d70 6172 656e 740a 2020 2020 696e 7370  =parent.    insp
+00019eb0: 7374 3d69 6e73 7065 6374 2e73 7461 636b  st=inspect.stack
+00019ec0: 2829 0a20 2020 2023 696e 7370 6563 742e  ().    #inspect.
+00019ed0: 7374 6163 6b28 295b 6465 7074 685d 5b30  stack()[depth][0
+00019ee0: 5d20 3a20 6672 616d 6520 0a20 2020 2023  ] : frame .    #
+00019ef0: 696e 7370 6563 742e 6765 746d 656d 6265  inspect.getmembe
+00019f00: 7273 2866 7261 6d65 2920 3a20 656e 7669  rs(frame) : envi
+00019f10: 726f 6e6d 656e 7473 0a20 2020 2069 6620  ronments.    if 
+00019f20: 6c65 6e28 696e 7370 7374 2920 3c3d 206c  len(inspst) <= l
+00019f30: 6f63 3a20 236f 7574 206f 6620 7261 6e67  oc: #out of rang
+00019f40: 650a 2020 2020 2020 2020 6c6f 633d 2d31  e.        loc=-1
+00019f50: 0a20 2020 2072 743d 7b7d 0a20 2020 2069  .    rt={}.    i
+00019f60: 6620 6f62 6a5f 7479 7065 2069 6e20 5b27  f obj_type in ['
+00019f70: 6d6f 6475 6c65 272c 2763 6c61 7373 6f62  module','classob
+00019f80: 6a27 2c27 696e 7374 616e 6365 275d 3a0a  j','instance']:.
+00019f90: 2020 2020 2020 2020 7274 2e75 7064 6174          rt.updat
+00019fa0: 6528 6f62 6a2e 5f5f 6469 6374 5f5f 290a  e(obj.__dict__).
+00019fb0: 2020 2020 656c 7365 3a20 2320 676c 6f62      else: # glob
+00019fc0: 616c 2061 6e64 206c 6f63 616c 7320 7661  al and locals va
+00019fd0: 7269 6162 6c65 7320 6672 6f6d 206d 6520  riables from me 
+00019fe0: 746f 2074 6f70 0a20 2020 2020 2020 2069  to top.        i
+00019ff0: 6620 6869 7374 6f72 793a 0a20 2020 2020  f history:.     
+0001a000: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0001a010: 7261 6e67 6528 6c65 6e28 696e 7370 7374  range(len(inspst
+0001a020: 292d 312c 302c 2d31 293a 0a20 2020 2020  )-1,0,-1):.     
+0001a030: 2020 2020 2020 2020 2020 2069 6620 6d6f             if mo
+0001a040: 6465 2069 6e20 5b27 676c 6f62 616c 272c  de in ['global',
+0001a050: 2761 6c6c 275d 3a0a 2020 2020 2020 2020  'all']:.        
+0001a060: 2020 2020 2020 2020 2020 2020 7274 2e75              rt.u
+0001a070: 7064 6174 6528 6469 6374 2869 6e73 7065  pdate(dict(inspe
+0001a080: 6374 2e67 6574 6d65 6d62 6572 7328 696e  ct.getmembers(in
+0001a090: 7370 7374 5b69 5d5b 305d 2929 5b22 665f  spst[i][0]))["f_
+0001a0a0: 676c 6f62 616c 7322 5d29 0a20 2020 2020  globals"]).     
+0001a0b0: 2020 2020 2020 2020 2020 2069 6620 6d6f             if mo
+0001a0c0: 6465 2069 6e20 5b27 6c6f 6361 6c27 2c27  de in ['local','
+0001a0d0: 616c 6c27 5d3a 0a20 2020 2020 2020 2020  all']:.         
+0001a0e0: 2020 2020 2020 2020 2020 2072 742e 7570             rt.up
+0001a0f0: 6461 7465 2864 6963 7428 696e 7370 6563  date(dict(inspec
+0001a100: 742e 6765 746d 656d 6265 7273 2869 6e73  t.getmembers(ins
+0001a110: 7073 745b 695d 5b30 5d29 295b 2266 5f6c  pst[i][0]))["f_l
+0001a120: 6f63 616c 7322 5d29 0a20 2020 2020 2020  ocals"]).       
+0001a130: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0001a140: 2020 2069 6620 6d6f 6465 2069 6e20 5b27     if mode in ['
+0001a150: 676c 6f62 616c 272c 2761 6c6c 275d 3a0a  global','all']:.
+0001a160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a170: 7274 2e75 7064 6174 6528 6469 6374 2869  rt.update(dict(i
+0001a180: 6e73 7065 6374 2e67 6574 6d65 6d62 6572  nspect.getmember
+0001a190: 7328 696e 7370 7374 5b6c 6f63 5d5b 305d  s(inspst[loc][0]
+0001a1a0: 2929 5b22 665f 676c 6f62 616c 7322 5d29  ))["f_globals"])
+0001a1b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001a1c0: 6d6f 6465 2069 6e20 5b27 6c6f 6361 6c27  mode in ['local'
+0001a1d0: 2c27 616c 6c27 5d3a 0a20 2020 2020 2020  ,'all']:.       
+0001a1e0: 2020 2020 2020 2020 2072 742e 7570 6461           rt.upda
+0001a1f0: 7465 2864 6963 7428 696e 7370 6563 742e  te(dict(inspect.
+0001a200: 6765 746d 656d 6265 7273 2869 6e73 7073  getmembers(insps
+0001a210: 745b 6c6f 635d 5b30 5d29 295b 2266 5f6c  t[loc][0]))["f_l
+0001a220: 6f63 616c 7322 5d29 0a20 2020 2069 6620  ocals"]).    if 
+0001a230: 7372 635f 7479 7065 3d3d 276e 6f6e 6574  src_type=='nonet
+0001a240: 7970 6527 3a0a 2020 2020 2020 2020 6966  ype':.        if
+0001a250: 2061 6c6c 7479 7065 3a0a 2020 2020 2020   alltype:.      
+0001a260: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
+0001a270: 2020 2020 2020 2020 6f3d 7b7d 0a20 2020          o={}.   
+0001a280: 2020 2020 2066 6f72 2069 2069 6e20 7274       for i in rt
+0001a290: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0001a2a0: 2069 2069 6e20 2827 5f5f 6275 696c 7469   i in ('__builti
+0001a2b0: 6e73 5f5f 272c 275f 5f63 6163 6865 645f  ns__','__cached_
+0001a2c0: 5f27 2c27 6d6f 6475 6c65 7327 2c27 6d6f  _','modules','mo
+0001a2d0: 645f 7061 7468 2729 206f 7220 5479 7065  d_path') or Type
+0001a2e0: 4e61 6d65 2872 745b 695d 2920 696e 2028  Name(rt[i]) in (
+0001a2f0: 2766 756e 6374 696f 6e27 2c27 6d6f 6475  'function','modu
+0001a300: 6c65 272c 2763 6c61 7373 6f62 6a27 2c27  le','classobj','
+0001a310: 696e 7374 616e 6365 272c 2762 7569 6c74  instance','built
+0001a320: 696e 5f66 756e 6374 696f 6e5f 6f72 5f6d  in_function_or_m
+0001a330: 6574 686f 6427 2c27 6d65 7468 6f64 2729  ethod','method')
+0001a340: 3a20 0a20 2020 2020 2020 2020 2020 2020  : .             
+0001a350: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
+0001a360: 2020 2020 2020 2020 6f5b 695d 3d72 745b          o[i]=rt[
+0001a370: 695d 0a20 2020 2020 2020 2072 6574 7572  i].        retur
+0001a380: 6e20 6f0a 2020 2020 656c 6966 2073 7263  n o.    elif src
+0001a390: 5f74 7970 6520 3d3d 2027 7374 7227 3a0a  _type == 'str':.
+0001a3a0: 2020 2020 2020 2020 6f75 743d 7274 2e67          out=rt.g
+0001a3b0: 6574 2873 7263 2c64 6566 6175 6c74 290a  et(src,default).
+0001a3c0: 2020 2020 2020 2020 6966 2056 6172 5479          if VarTy
+0001a3d0: 7065 3a20 2320 6966 2070 7574 2065 7870  pe: # if put exp
+0001a3e0: 6563 7465 6420 7479 7065 2074 6865 6e0a  ected type then.
+0001a3f0: 2020 2020 2020 2020 2020 2020 6966 2054              if T
+0001a400: 7970 6528 6f75 742c 5661 7254 7970 6529  ype(out,VarType)
+0001a410: 3a20 7265 7475 726e 206f 7574 2023 2069  : return out # i
+0001a420: 6620 6765 7474 696e 6720 6461 7461 2069  f getting data i
+0001a430: 7320 6578 7065 6374 6564 2074 7970 6520  s expected type 
+0001a440: 7468 656e 200a 2020 2020 2020 2020 2020  then .          
+0001a450: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
+0001a460: 2023 2069 6620 6e6f 7420 6578 7065 6374   # if not expect
+0001a470: 6564 2074 6865 6e20 7265 7475 726e 2064  ed then return d
+0001a480: 6566 6175 6c74 0a20 2020 2020 2020 2072  efault.        r
+0001a490: 6574 7572 6e20 6f75 7420 2320 6a75 7374  eturn out # just
+0001a4a0: 2072 6574 7572 6e20 676f 7474 656e 2064   return gotten d
+0001a4b0: 6174 610a 2020 2020 2020 2020 2369 6620  ata.        #if 
+0001a4c0: 6f62 6a5f 7479 7065 2069 6e20 5b27 6d6f  obj_type in ['mo
+0001a4d0: 6475 6c65 275d 3a0a 2020 2020 2020 2020  dule']:.        
+0001a4e0: 2320 2020 2023 2067 6574 6174 7472 283c  #    # getattr(<
+0001a4f0: 636c 6173 733e 2c27 6e61 6d65 2729 203a  class>,'name') :
+0001a500: 2047 6574 2064 6174 610a 2020 2020 2020   Get data.      
+0001a510: 2020 2320 2020 2023 2068 6173 6174 7472    #    # hasattr
+0001a520: 283c 636c 6173 733e 2c27 6e61 6d65 2729  (<class>,'name')
+0001a530: 203a 2063 6865 636b 206e 616d 650a 2020   : check name.  
+0001a540: 2020 2020 2020 2320 2020 2023 2073 6574        #    # set
+0001a550: 6174 7472 283c 636c 6173 733e 2c27 6e61  attr(<class>,'na
+0001a560: 6d65 2729 203a 2075 7064 6174 6520 746f  me') : update to
+0001a570: 206e 616d 650a 2020 2020 2020 2020 2320   name.        # 
+0001a580: 2020 2023 2064 656c 6174 7472 283c 636c     # delattr(<cl
+0001a590: 6173 733e 2c27 6e61 6d65 2729 203a 2072  ass>,'name') : r
+0001a5a0: 656d 6f76 6520 6e61 6d65 0a20 2020 2020  emove name.     
+0001a5b0: 2020 2023 2020 2020 6966 2068 6173 6174     #    if hasat
+0001a5c0: 7472 286f 626a 2c73 7263 293a 2072 6574  tr(obj,src): ret
+0001a5d0: 7572 6e20 6765 7461 7474 7228 6f62 6a2c  urn getattr(obj,
+0001a5e0: 7372 6329 0a20 2020 2020 2020 2023 656c  src).        #el
+0001a5f0: 6966 206f 626a 5f74 7970 6520 696e 205b  if obj_type in [
+0001a600: 2763 6c61 7373 275d 3a0a 2020 2020 2020  'class']:.      
+0001a610: 2020 2320 2020 206f 626a 3d6f 626a 2829    #    obj=obj()
+0001a620: 0a20 2020 2020 2020 2023 2020 2020 6966  .        #    if
+0001a630: 2068 6173 6174 7472 286f 626a 2c73 7263   hasattr(obj,src
+0001a640: 293a 2072 6574 7572 6e20 6765 7461 7474  ): return getatt
+0001a650: 7228 6f62 6a2c 7372 6329 0a20 2020 2020  r(obj,src).     
+0001a660: 2020 2023 656c 7365 3a20 234e 6f20 6f62     #else: #No ob
+0001a670: 6a65 6374 0a20 2020 2020 2020 2023 2020  ject.        #  
+0001a680: 2020 6f75 743d 7274 2e67 6574 2873 7263    out=rt.get(src
+0001a690: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
+0001a6a0: 2020 2320 2020 2069 6620 5661 7254 7970    #    if VarTyp
+0001a6b0: 653a 2023 2069 6620 7075 7420 6578 7065  e: # if put expe
+0001a6c0: 6374 6564 2074 7970 6520 7468 656e 0a20  cted type then. 
+0001a6d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001a6e0: 6966 2054 7970 6528 6f75 742c 5661 7254  if Type(out,VarT
+0001a6f0: 7970 6529 3a20 7265 7475 726e 206f 7574  ype): return out
+0001a700: 2023 2069 6620 6765 7474 696e 6720 6461   # if getting da
+0001a710: 7461 2069 7320 6578 7065 6374 6564 2074  ta is expected t
+0001a720: 7970 6520 7468 656e 200a 2020 2020 2020  ype then .      
+0001a730: 2020 2320 2020 2020 2020 2072 6574 7572    #        retur
+0001a740: 6e20 6465 6661 756c 7420 2320 6966 206e  n default # if n
+0001a750: 6f74 2065 7870 6563 7465 6420 7468 656e  ot expected then
+0001a760: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+0001a770: 2020 2020 2020 2020 2320 2020 2072 6574          #    ret
+0001a780: 7572 6e20 6f75 7420 2320 6a75 7374 2072  urn out # just r
+0001a790: 6574 7572 6e20 676f 7474 656e 2064 6174  eturn gotten dat
+0001a7a0: 610a 2020 2020 7265 7475 726e 2064 6566  a.    return def
+0001a7b0: 6175 6c74 0a0a 6465 6620 556e 6971 2873  ault..def Uniq(s
+0001a7c0: 7263 2c64 6566 6175 6c74 3d27 6f72 6727  rc,default='org'
+0001a7d0: 2c73 6f72 743d 4661 6c73 652c 7374 7269  ,sort=False,stri
+0001a7e0: 703d 4661 6c73 652c 6373 7472 6970 3d46  p=False,cstrip=F
+0001a7f0: 616c 7365 293a 0a20 2020 2027 2727 0a20  alse):.    '''. 
+0001a800: 2020 206d 616b 6520 746f 2075 6e69 7120     make to uniq 
+0001a810: 6461 7461 0a20 2020 2064 6566 6175 6c74  data.    default
+0001a820: 3d27 6f72 6727 3a20 7265 7475 726e 206f  ='org': return o
+0001a830: 7269 6769 6e61 6c20 6461 7461 0a20 2020  riginal data.   
+0001a840: 2073 6f72 743d 4661 6c73 6520 2020 3a20   sort=False   : 
+0001a850: 736f 7274 2064 6174 610a 2020 2020 7374  sort data.    st
+0001a860: 7269 703d 4661 6c73 6520 203a 2072 656d  rip=False  : rem
+0001a870: 6f76 6520 7768 6974 6520 7370 6163 6520  ove white space 
+0001a880: 616e 6420 6d61 6b65 2074 6f20 756e 6971  and make to uniq
+0001a890: 0a20 2020 2063 7374 7269 703d 4661 6c73  .    cstrip=Fals
+0001a8a0: 6520 3a20 6368 6563 6b20 7769 7468 6f75  e : check withou
+0001a8b0: 7420 7768 6974 6520 7370 6163 652c 2062  t white space, b
+0001a8c0: 7574 2072 656d 6169 6e20 6669 7273 7420  ut remain first 
+0001a8d0: 7369 6d69 6c61 7220 6461 7461 0a20 2020  similar data.   
+0001a8e0: 2027 2727 0a20 2020 2069 6620 6973 696e   '''.    if isin
+0001a8f0: 7374 616e 6365 2873 7263 2c28 6c69 7374  stance(src,(list
+0001a900: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
+0001a910: 2020 7274 3d5b 5d0a 2020 2020 2020 2020    rt=[].        
+0001a920: 6966 2063 7374 7269 703a 0a20 2020 2020  if cstrip:.     
+0001a930: 2020 2020 2020 206e 7372 633d 5b69 2e73         nsrc=[i.s
+0001a940: 7472 6970 2829 2069 6620 6973 696e 7374  trip() if isinst
+0001a950: 616e 6365 2869 2c28 7374 722c 6279 7465  ance(i,(str,byte
+0001a960: 7329 2920 656c 7365 2069 2066 6f72 2069  s)) else i for i
+0001a970: 2069 6e20 7372 635d 0a20 2020 2020 2020   in src].       
+0001a980: 2020 2020 2063 3d5b 5d0a 2020 2020 2020       c=[].      
+0001a990: 2020 2020 2020 666f 7220 692c 6420 696e        for i,d in
+0001a9a0: 2065 6e75 6d65 7261 7465 286e 7372 6329   enumerate(nsrc)
+0001a9b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001a9c0: 2020 6966 2064 206e 6f74 2069 6e20 633a    if d not in c:
+0001a9d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a9e0: 2020 2020 2063 2e61 7070 656e 6428 6429       c.append(d)
+0001a9f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001aa00: 2020 2020 2072 742e 6170 7065 6e64 2873       rt.append(s
+0001aa10: 7263 5b69 5d29 0a20 2020 2020 2020 2065  rc[i]).        e
+0001aa20: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001aa30: 2069 6620 7374 7269 703a 0a20 2020 2020   if strip:.     
+0001aa40: 2020 2020 2020 2020 2020 2073 7263 3d5b             src=[
+0001aa50: 692e 7374 7269 7028 2920 6966 2069 7369  i.strip() if isi
+0001aa60: 6e73 7461 6e63 6528 692c 2873 7472 2c62  nstance(i,(str,b
+0001aa70: 7974 6573 2929 2065 6c73 6520 6920 666f  ytes)) else i fo
+0001aa80: 7220 6920 696e 2073 7263 5d0a 2020 2020  r i in src].    
+0001aa90: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+0001aaa0: 2073 7263 3a0a 2020 2020 2020 2020 2020   src:.          
+0001aab0: 2020 2020 2020 6966 2069 206e 6f74 2069        if i not i
+0001aac0: 6e20 7274 3a20 7274 2e61 7070 656e 6428  n rt: rt.append(
+0001aad0: 6929 0a20 2020 2020 2020 2069 6620 736f  i).        if so
+0001aae0: 7274 3a20 7274 3d53 6f72 7428 7274 290a  rt: rt=Sort(rt).
+0001aaf0: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+0001ab00: 7570 6c65 2872 7429 2069 6620 6973 696e  uple(rt) if isin
+0001ab10: 7374 616e 6365 2873 7263 2c74 7570 6c65  stance(src,tuple
+0001ab20: 2920 656c 7365 2072 740a 2020 2020 7265  ) else rt.    re
+0001ab30: 7475 726e 2044 6566 6175 6c74 2873 7263  turn Default(src
+0001ab40: 2c64 6566 6175 6c74 290a 0a64 6566 2053  ,default)..def S
+0001ab50: 706c 6974 2873 7263 2c73 796d 626f 6c3d  plit(src,symbol=
+0001ab60: 4e6f 6e65 2c64 6566 6175 6c74 3d5b 5d2c  None,default=[],
+0001ab70: 7379 6d5f 7370 6c69 7465 723d 277c 272c  sym_spliter='|',
+0001ab80: 6c69 7374 6f6e 6c79 3d54 7275 6529 3a0a  listonly=True):.
+0001ab90: 2020 2020 2727 270a 2020 2020 6d75 6c74      '''.    mult
+0001aba0: 6970 756c 2073 706c 6974 2074 6865 6e20  ipul split then 
+0001abb0: 2761 7c62 7c2e 2e2e 270a 2020 2020 7769  'a|b|...'.    wi
+0001abc0: 7468 6f75 7420 227c 2220 7468 656e 2073  thout "|" then s
+0001abd0: 616d 6520 6173 2073 7472 696e 6720 7370  ame as string sp
+0001abe0: 6c69 7420 6675 6e63 7469 6f6e 0a20 2020  lit function.   
+0001abf0: 2073 796d 626f 6c3d 4e6f 6e65 206f 7220   symbol=None or 
+0001ac00: 273a 7768 6974 6573 7061 6365 3a27 203a  ':whitespace:' :
+0001ac10: 2052 656d 6f74 6520 7768 6974 6520 7370   Remote white sp
+0001ac20: 6163 6520 616e 6420 7370 6c69 7420 7769  ace and split wi
+0001ac30: 7468 2073 696e 676c 6520 7370 6163 6528  th single space(
+0001ac40: 2720 2729 0a20 2020 2027 2727 0a20 2020  ' ').    '''.   
+0001ac50: 2023 5359 4d42 4f4c 2053 706c 6974 0a20   #SYMBOL Split. 
+0001ac60: 2020 2069 6620 5479 7065 2873 7263 2c28     if Type(src,(
+0001ac70: 7374 722c 6279 7465 7329 293a 0a20 2020  str,bytes)):.   
+0001ac80: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
+0001ac90: 7320 4e6f 6e65 206f 7220 4973 5361 6d65  s None or IsSame
+0001aca0: 2873 796d 626f 6c2c 273a 7768 6974 6573  (symbol,':whites
+0001acb0: 7061 6365 3a27 293a 0a20 2020 2020 2020  pace:'):.       
+0001acc0: 2020 2020 2072 6574 7572 6e20 7372 632e       return src.
+0001acd0: 7370 6c69 7428 290a 2020 2020 2020 2020  split().        
+0001ace0: 656c 6966 206e 6f74 2054 7970 6528 7379  elif not Type(sy
+0001acf0: 6d62 6f6c 2c28 7374 722c 6279 7465 7329  mbol,(str,bytes)
+0001ad00: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+0001ad10: 796d 626f 6c3d 2720 270a 2020 2020 2020  ymbol=' '.      
+0001ad20: 2020 6966 206c 656e 2873 796d 626f 6c29    if len(symbol)
+0001ad30: 203e 2031 3a0a 2020 2020 2020 2020 2020   > 1:.          
+0001ad40: 2020 6966 2073 796d 5f73 706c 6974 6572    if sym_spliter
+0001ad50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001ad60: 2020 6966 2054 7970 6528 7379 6d62 6f6c    if Type(symbol
+0001ad70: 2c62 7974 6573 293a 2073 796d 5f73 706c  ,bytes): sym_spl
+0001ad80: 6974 6572 3d42 7974 6573 2873 796d 5f73  iter=Bytes(sym_s
+0001ad90: 706c 6974 6572 290a 2020 2020 2020 2020  pliter).        
+0001ada0: 2020 2020 2020 2020 656c 7365 3a20 7379          else: sy
+0001adb0: 6d5f 7370 6c69 7465 723d 5374 7228 7379  m_spliter=Str(sy
+0001adc0: 6d5f 7370 6c69 7465 7229 0a20 2020 2020  m_spliter).     
+0001add0: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
+0001ade0: 6c3d 556e 6971 2873 796d 626f 6c2e 7370  l=Uniq(symbol.sp
+0001adf0: 6c69 7428 7379 6d5f 7370 6c69 7465 7229  lit(sym_spliter)
+0001ae00: 290a 2020 2020 2020 2020 2020 2020 7472  ).            tr
+0001ae10: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+0001ae20: 2020 206d 7379 6d3d 277c 272e 6a6f 696e     msym='|'.join
+0001ae30: 286d 6170 2872 652e 6573 6361 7065 2c74  (map(re.escape,t
+0001ae40: 7570 6c65 2873 796d 626f 6c29 2929 0a20  uple(symbol))). 
+0001ae50: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001ae60: 6620 5479 7065 2873 7263 2c27 6279 7465  f Type(src,'byte
+0001ae70: 7327 293a 206d 7379 6d3d 4279 7465 7328  s'): msym=Bytes(
+0001ae80: 6d73 796d 290a 2020 2020 2020 2020 2020  msym).          
+0001ae90: 2020 2020 2020 656c 7365 3a20 6d73 796d        else: msym
+0001aea0: 3d53 7472 286d 7379 6d29 0a20 2020 2020  =Str(msym).     
+0001aeb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001aec0: 6e20 7265 2e73 706c 6974 286d 7379 6d2c  n re.split(msym,
+0001aed0: 7372 6329 2023 2073 706c 6974 6564 2062  src) # splited b
+0001aee0: 7920 277c 2720 6f72 2065 7870 7265 7373  y '|' or express
+0001aef0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+0001af00: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+0001af10: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
+0001af20: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001af30: 2020 2020 2020 2023 204e 6f72 6d61 6c20         # Normal 
+0001af40: 7370 6c69 740a 2020 2020 2020 2020 2020  split.          
+0001af50: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+0001af60: 2020 2020 2020 2069 6620 5479 7065 2873         if Type(s
+0001af70: 7263 2c27 6279 7465 7327 293a 2073 796d  rc,'bytes'): sym
+0001af80: 626f 6c3d 4279 7465 7328 7379 6d62 6f6c  bol=Bytes(symbol
+0001af90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001afa0: 2020 656c 7365 203a 2073 796d 626f 6c3d    else : symbol=
+0001afb0: 5374 7228 7379 6d62 6f6c 290a 2020 2020  Str(symbol).    
+0001afc0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001afd0: 726e 2073 7263 2e73 706c 6974 2873 796d  rn src.split(sym
+0001afe0: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+0001aff0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+0001b000: 2020 2020 2020 2020 2070 6173 730a 2020           pass.  
+0001b010: 2020 6966 2064 6566 6175 6c74 2069 6e20    if default in 
+0001b020: 5b27 6f72 6727 2c7b 276f 7267 277d 5d3a  ['org',{'org'}]:
+0001b030: 0a20 2020 2020 2020 2069 6620 6c69 7374  .        if list
+0001b040: 6f6e 6c79 3a0a 2020 2020 2020 2020 2020  only:.          
+0001b050: 2020 7265 7475 726e 205b 7372 635d 0a20    return [src]. 
+0001b060: 2020 2020 2020 2072 6574 7572 6e20 7372         return sr
+0001b070: 630a 2020 2020 6966 206c 6973 746f 6e6c  c.    if listonl
+0001b080: 793a 0a20 2020 2020 2020 2069 6620 6465  y:.        if de
+0001b090: 6661 756c 7420 3d3d 205b 5d3a 0a20 2020  fault == []:.   
+0001b0a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001b0b0: 5b5d 0a20 2020 2020 2020 2072 6574 7572  [].        retur
+0001b0c0: 6e20 5b64 6566 6175 6c74 5d0a 2020 2020  n [default].    
+0001b0d0: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
+0001b0e0: 6465 6620 466f 726d 4461 7461 282a 7372  def FormData(*sr
+0001b0f0: 632c 6465 6661 756c 743d 4e6f 6e65 2c77  c,default=None,w
+0001b100: 616e 745f 7479 7065 3d4e 6f6e 652c 6572  ant_type=None,er
+0001b110: 723d 4661 6c73 6529 3a0a 2020 2020 2727  r=False):.    ''
+0001b120: 270a 2020 2020 636f 6e76 6572 7420 7374  '.    convert st
+0001b130: 7269 6e67 2064 6174 6120 746f 2066 6f72  ring data to for
+0001b140: 6d61 740a 2020 2020 2731 2720 3d3e 2031  mat.    '1' => 1
+0001b150: 0a20 2020 206a 736f 6e20 7374 7269 6e67  .    json string
+0001b160: 2074 6f20 6a73 6f6e 2066 6f72 6d61 740a   to json format.
+0001b170: 2020 2020 227b 2761 273a 317d 2220 3d3e      "{'a':1}" =>
+0001b180: 207b 2761 273a 317d 0a20 2020 2022 5b31   {'a':1}.    "[1
+0001b190: 2c32 2c33 5d22 203d 3e20 5b31 2c32 2c33  ,2,3]" => [1,2,3
+0001b1a0: 5d0a 2020 2020 2e2e 2e2e 0a20 2020 2027  ].    .....    '
+0001b1b0: 2727 0a20 2020 2065 633d 4661 6c73 650a  ''.    ec=False.
+0001b1c0: 2020 2020 615f 733d 2727 0a20 2020 2069      a_s=''.    i
+0001b1d0: 6620 6c65 6e28 7372 6329 203e 2030 3a0a  f len(src) > 0:.
+0001b1e0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+0001b1f0: 2073 7263 3a0a 2020 2020 2020 2020 2020   src:.          
+0001b200: 2020 615f 743d 5374 7228 692c 6465 6661    a_t=Str(i,defa
+0001b210: 756c 743d 276f 7267 2729 0a20 2020 2020  ult='org').     
+0001b220: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0001b230: 616e 6365 2861 5f74 2c73 7472 293a 0a20  ance(a_t,str):. 
+0001b240: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001b250: 6620 615f 733a 0a20 2020 2020 2020 2020  f a_s:.         
+0001b260: 2020 2020 2020 2020 2020 2061 5f73 3d61             a_s=a
+0001b270: 5f73 2b27 2727 2027 2727 2b61 5f74 0a20  _s+''' '''+a_t. 
+0001b280: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001b290: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001b2a0: 2020 2020 2020 2020 2061 5f73 3d61 5f74           a_s=a_t
+0001b2b0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0001b2c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0001b2d0: 2020 2065 633d 5472 7565 0a20 2020 2020     ec=True.     
+0001b2e0: 2020 2020 2020 2020 2020 2062 7265 616b             break
+0001b2f0: 0a20 2020 2069 6620 6563 3a0a 2020 2020  .    if ec:.    
+0001b300: 2020 2020 6966 2065 7272 3a0a 2020 2020      if err:.    
+0001b310: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+0001b320: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
+0001b330: 6c65 6e28 7372 6329 203d 3d20 313a 0a20  len(src) == 1:. 
+0001b340: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001b350: 6e20 7372 635b 305d 0a20 2020 2020 2020  n src[0].       
+0001b360: 2072 6574 7572 6e20 7372 630a 2020 2020   return src.    
+0001b370: 7372 633d 615f 730a 2020 2020 666f 726d  src=a_s.    form
+0001b380: 5f73 7263 3d4e 6f6e 650a 2020 2020 6966  _src=None.    if
+0001b390: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
+0001b3a0: 7374 7229 3a0a 2020 2020 2020 2020 6966  str):.        if
+0001b3b0: 2054 7970 6528 7761 6e74 5f74 7970 652c   Type(want_type,
+0001b3c0: 2773 7472 2729 3a20 7265 7475 726e 2073  'str'): return s
+0001b3d0: 7263 0a20 2020 2020 2020 2074 7279 3a0a  rc.        try:.
+0001b3e0: 2020 2020 2020 2020 2020 2020 666f 726d              form
+0001b3f0: 5f73 7263 3d61 7374 2e6c 6974 6572 616c  _src=ast.literal
+0001b400: 5f65 7661 6c28 7372 6329 0a20 2020 2020  _eval(src).     
+0001b410: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+0001b420: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+0001b430: 2020 2020 2020 2020 2020 2020 666f 726d              form
+0001b440: 5f73 7263 3d6a 736f 6e2e 6c6f 6164 7328  _src=json.loads(
+0001b450: 7372 6329 0a20 2020 2020 2020 2020 2020  src).           
+0001b460: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+0001b470: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+0001b480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b490: 2020 666f 726d 5f73 7263 3d65 7661 6c28    form_src=eval(
+0001b4a0: 7372 6329 0a20 2020 2020 2020 2020 2020  src).           
+0001b4b0: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+0001b4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b4d0: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
+0001b4e0: 7372 632c 6465 6661 756c 7429 0a20 2020  src,default).   
+0001b4f0: 2065 6c73 653a 0a20 2020 2020 2020 2066   else:.        f
+0001b500: 6f72 6d5f 7372 633d 7372 630a 2020 2020  orm_src=src.    
+0001b510: 6966 2049 734e 6f6e 6528 7761 6e74 5f74  if IsNone(want_t
+0001b520: 7970 6529 3a0a 2020 2020 2020 2020 7265  ype):.        re
+0001b530: 7475 726e 2066 6f72 6d5f 7372 630a 2020  turn form_src.  
+0001b540: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001b550: 6966 2054 7970 6528 666f 726d 5f73 7263  if Type(form_src
+0001b560: 2c77 616e 745f 7479 7065 293a 2072 6574  ,want_type): ret
+0001b570: 7572 6e20 666f 726d 5f73 7263 0a20 2020  urn form_src.   
+0001b580: 2020 2020 2072 6574 7572 6e20 4465 6661       return Defa
+0001b590: 756c 7428 7372 632c 6465 6661 756c 7429  ult(src,default)
+0001b5a0: 0a0a 6465 6620 496e 6465 7846 6f72 6d28  ..def IndexForm(
+0001b5b0: 6964 782c 6964 785f 6f6e 6c79 3d46 616c  idx,idx_only=Fal
+0001b5c0: 7365 2c73 796d 626f 6c3d 4e6f 6e65 293a  se,symbol=None):
+0001b5d0: 0a20 2020 2027 2727 0a20 2020 2072 6574  .    '''.    ret
+0001b5e0: 7572 6e20 3a20 3c54 7275 652f 4661 6c73  urn : <True/Fals
+0001b5f0: 653e 2c20 496e 6465 7820 4461 7461 0a20  e>, Index Data. 
+0001b600: 2020 2020 2d20 4661 6c73 653a 206e 6f74      - False: not
+0001b610: 2066 6f75 6e64 2049 6e64 6578 2066 6f72   found Index for
+0001b620: 6d20 6672 6f6d 2069 6e70 7574 2069 6478  m from input idx
+0001b630: 200a 2020 2020 202d 2054 7275 6520 3a20   .     - True : 
+0001b640: 666f 756e 6420 496e 6465 780a 2020 2020  found Index.    
+0001b650: 496e 6465 7820 4461 7461 0a20 2020 2020  Index Data.     
+0001b660: 2d20 7475 706c 6528 412c 4229 203a 2052  - tuple(A,B) : R
+0001b670: 616e 6765 2049 6e64 6578 2028 417e 4229  ange Index (A~B)
+0001b680: 0a20 2020 2020 2d20 6c69 7374 205b 412c  .     - list [A,
+0001b690: 425d 203a 204f 5220 496e 6465 7820 6f72  B] : OR Index or
+0001b6a0: 206b 6579 7320 4120 6f72 2042 0a20 2020   keys A or B.   
+0001b6b0: 2020 2d20 5369 6e67 6c65 2020 2020 203a    - Single     :
+0001b6c0: 2069 6e74 3a20 496e 6465 782c 206f 7468   int: Index, oth
+0001b6d0: 6572 733a 206b 6579 0a20 2020 202d 2069  ers: key.    - i
+0001b6e0: 6478 5f6f 6e6c 7920 2020 203a 206f 6e6c  dx_only    : onl
+0001b6f0: 7920 7265 7475 726e 2069 6e74 6567 6572  y return integer
+0001b700: 2069 6e64 6578 0a20 2020 202d 2073 796d   index.    - sym
+0001b710: 626f 6c20 2020 3a20 6465 6661 756c 7420  bol   : default 
+0001b720: 4e6f 6e65 2c20 6966 2069 6478 2069 7320  None, if idx is 
+0001b730: 7374 7269 6e67 2061 6e64 2077 616e 7420  string and want 
+0001b740: 7370 6c69 7420 7769 7468 2073 796d 626f  split with symbo
+0001b750: 6c0a 2020 2020 2727 270a 2020 2020 6966  l.    '''.    if
+0001b760: 2049 734e 6f6e 6528 6964 7829 3a0a 2020   IsNone(idx):.  
+0001b770: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+0001b780: 7365 2c4e 6f6e 650a 2020 2020 656c 6966  se,None.    elif
+0001b790: 2069 7369 6e73 7461 6e63 6528 6964 782c   isinstance(idx,
+0001b7a0: 7374 7229 3a0a 2020 2020 2020 2020 666f  str):.        fo
+0001b7b0: 7220 7320 696e 205b 273a 272c 272d 272c  r s in [':','-',
+0001b7c0: 277e 275d 3a20 2320 5261 6e67 6520 496e  '~']: # Range In
+0001b7d0: 6465 780a 2020 2020 2020 2020 2020 2020  dex.            
+0001b7e0: 6966 2073 2069 6e20 6964 783a 0a20 2020  if s in idx:.   
+0001b7f0: 2020 2020 2020 2020 2020 2020 2069 6478               idx
+0001b800: 5f61 3d69 6478 2e73 706c 6974 2873 290a  _a=idx.split(s).
+0001b810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b820: 6966 206c 656e 2869 6478 5f61 2920 3d3d  if len(idx_a) ==
+0001b830: 2032 3a0a 2020 2020 2020 2020 2020 2020   2:.            
+0001b840: 2020 2020 2020 2020 7373 3d49 6e74 2869          ss=Int(i
+0001b850: 6478 5f61 5b30 5d29 2069 6620 4973 496e  dx_a[0]) if IsIn
+0001b860: 7428 6964 785f 615b 305d 2920 656c 7365  t(idx_a[0]) else
+0001b870: 2030 0a20 2020 2020 2020 2020 2020 2020   0.             
+0001b880: 2020 2020 2020 2065 653d 496e 7428 6964         ee=Int(id
+0001b890: 785f 615b 315d 2920 6966 2049 7349 6e74  x_a[1]) if IsInt
+0001b8a0: 2869 6478 5f61 5b31 5d29 2065 6c73 6520  (idx_a[1]) else 
+0001b8b0: 2d31 0a20 2020 2020 2020 2020 2020 2020  -1.             
+0001b8c0: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
+0001b8d0: 7565 2c28 7373 2c65 6529 0a20 2020 2020  ue,(ss,ee).     
+0001b8e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001b8f0: 6e20 4661 6c73 652c 4e6f 6e65 0a20 2020  n False,None.   
+0001b900: 2020 2020 2069 6620 277c 2720 696e 2069       if '|' in i
+0001b910: 6478 3a20 2320 4f52 2049 6e64 6578 0a20  dx: # OR Index. 
+0001b920: 2020 2020 2020 2020 2020 2069 6478 5f61             idx_a
+0001b930: 3d69 6478 2e73 706c 6974 2827 7c27 290a  =idx.split('|').
+0001b940: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0001b950: 6478 5f6f 6e6c 793a 0a20 2020 2020 2020  dx_only:.       
+0001b960: 2020 2020 2020 2020 2072 743d 5b5d 0a20           rt=[]. 
+0001b970: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001b980: 6f72 2069 2069 6e20 6964 785f 613a 0a20  or i in idx_a:. 
+0001b990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b9a0: 2020 2069 6620 4973 496e 7428 6929 3a20     if IsInt(i): 
+0001b9b0: 7274 2e61 7070 656e 6428 496e 7428 6929  rt.append(Int(i)
+0001b9c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001b9d0: 2020 7265 7475 726e 2054 7275 652c 7274    return True,rt
+0001b9e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0001b9f0: 7572 6e20 5472 7565 2c69 6478 2e73 706c  urn True,idx.spl
+0001ba00: 6974 2827 7c27 290a 2020 2020 2020 2020  it('|').        
+0001ba10: 656c 6966 2027 2f27 2069 6e20 6964 783a  elif '/' in idx:
+0001ba20: 2023 2050 6174 6820 696e 6465 780a 2020   # Path index.  
+0001ba30: 2020 2020 2020 2020 2020 6964 785f 613d            idx_a=
+0001ba40: 6964 782e 7370 6c69 7428 272f 2729 0a20  idx.split('/'). 
+0001ba50: 2020 2020 2020 2020 2020 2069 6620 6964             if id
+0001ba60: 785f 615b 305d 203d 3d20 2727 3a0a 2020  x_a[0] == '':.  
+0001ba70: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001ba80: 7475 726e 204e 6f6e 652c 6964 785f 615b  turn None,idx_a[
+0001ba90: 313a 5d0a 2020 2020 2020 2020 2020 2020  1:].            
+0001baa0: 7265 7475 726e 204e 6f6e 652c 6964 785f  return None,idx_
+0001bab0: 610a 2020 2020 2020 2020 656c 7365 3a0a  a.        else:.
+0001bac0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0001bad0: 6478 5f6f 6e6c 793a 0a20 2020 2020 2020  dx_only:.       
+0001bae0: 2020 2020 2020 2020 2069 6620 7379 6d62           if symb
+0001baf0: 6f6c 3a0a 2020 2020 2020 2020 2020 2020  ol:.            
+0001bb00: 2020 2020 2020 2020 6964 7873 3d69 6478          idxs=idx
+0001bb10: 2e73 706c 6974 2873 796d 626f 6c29 0a20  .split(symbol). 
+0001bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb30: 2020 2072 743d 5b5d 0a20 2020 2020 2020     rt=[].       
+0001bb40: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0001bb50: 2069 2069 6e20 6964 7873 3a0a 2020 2020   i in idxs:.    
+0001bb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb70: 2020 2020 6966 2049 7349 6e74 2869 293a      if IsInt(i):
+0001bb80: 2072 742e 6170 7065 6e64 2849 6e74 2869   rt.append(Int(i
+0001bb90: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+0001bba0: 2020 2020 2020 2069 6620 7274 3a20 7265         if rt: re
+0001bbb0: 7475 726e 2054 7275 652c 7274 0a20 2020  turn True,rt.   
+0001bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bbd0: 2072 6574 7572 6e20 4661 6c73 652c 4e6f   return False,No
+0001bbe0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+0001bbf0: 2020 2069 6620 4973 496e 7428 6964 7829     if IsInt(idx)
+0001bc00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001bc10: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+0001bc20: 652c 496e 7428 6964 7829 0a20 2020 2020  e,Int(idx).     
+0001bc30: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001bc40: 6e20 4661 6c73 652c 4e6f 6e65 0a20 2020  n False,None.   
+0001bc50: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+0001bc60: 2869 6478 2c6c 6973 7429 3a0a 2020 2020  (idx,list):.    
+0001bc70: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
+0001bc80: 6964 780a 2020 2020 656c 6966 2069 7369  idx.    elif isi
+0001bc90: 6e73 7461 6e63 6528 6964 782c 7475 706c  nstance(idx,tupl
+0001bca0: 6529 2061 6e64 206c 656e 2869 6478 2920  e) and len(idx) 
+0001bcb0: 3d3d 2032 3a0a 2020 2020 2020 2020 7265  == 2:.        re
+0001bcc0: 7475 726e 2054 7275 652c 6964 780a 2020  turn True,idx.  
+0001bcd0: 2020 7265 7475 726e 2054 7275 652c 6964    return True,id
+0001bce0: 7820 2320 5265 7475 726e 206f 7269 6769  x # Return origi
+0001bcf0: 6e61 6c0a 0a64 6566 2047 6574 282a 696e  nal..def Get(*in
+0001bd00: 7073 2c2a 2a6f 7074 7329 3a0a 2020 2020  ps,**opts):.    
+0001bd10: 2727 270a 2020 2020 4765 7420 2841 6e79  '''.    Get (Any
+0001bd20: 2920 736f 6d65 7468 696e 670a 2020 2020  ) something.    
+0001bd30: 4765 7428 2777 686f 616d 6927 2920 203a  Get('whoami')  :
+0001bd40: 2072 6574 7572 6e20 6d79 2066 756e 6374   return my funct
+0001bd50: 696f 6e20 6e61 6d65 0a20 2020 2047 6574  ion name.    Get
+0001bd60: 2827 6675 6e63 6c69 7374 2729 3a20 7265  ('funclist'): re
+0001bd70: 7475 726e 206d 7920 6d6f 6475 6c65 2773  turn my module's
+0001bd80: 2066 756e 6374 696f 6e20 6c69 7374 0a20   function list. 
+0001bd90: 2020 2020 2d20 7061 7265 6e74 3d31 2020      - parent=1  
+0001bda0: 2020 3a20 6d79 2070 6172 656e 7427 7320    : my parent's 
+0001bdb0: 6675 6e63 7469 6f6e 206c 6973 740a 2020  function list.  
+0001bdc0: 2020 4765 7428 3c6c 6973 747c 7374 7269    Get(<list|stri
+0001bdd0: 6e67 7c64 6963 747c 696e 747c 2e2e 2e3e  ng|dict|int|...>
+0001bde0: 2c3c 696e 6465 787c 6b65 797c 6b65 7970  ,<index|key|keyp
+0001bdf0: 6174 683e 293a 2047 6574 2064 6174 6120  ath>): Get data 
+0001be00: 6174 2074 6865 203c 696e 6465 787c 6b65  at the <index|ke
+0001be10: 797c 6b65 7970 6174 683e 0a20 2020 2020  y|keypath>.     
+0001be20: 2d20 6b65 7970 6174 6820 3a20 272f 612f  - keypath : '/a/
+0001be30: 622f 6327 203d 3e20 7b27 6127 3a7b 2762  b/c' => {'a':{'b
+0001be40: 273a 7b27 6327 3a31 2c27 6427 7d7d 7d20  ':{'c':1,'d'}}} 
+0001be50: 3d3e 2072 6574 7572 6e20 6327 7320 310a  => return c's 1.
+0001be60: 2020 2020 202d 206b 6579 2020 2020 203a       - key     :
+0001be70: 0a20 2020 2020 2020 5261 6e67 6520 466f  .       Range Fo
+0001be80: 726d 6174 2066 726f 6d20 3120 746f 2035  rmat from 1 to 5
+0001be90: 3a20 7475 706c 6520 666f 726d 6174 2028  : tuple format (
+0001bea0: 312c 3529 2c20 5374 7269 6e67 2066 6f72  1,5), String for
+0001beb0: 6d61 7420 2731 2d35 2720 6f72 2027 313a  mat '1-5' or '1:
+0001bec0: 3527 206f 7220 2731 7e35 270a 2020 2020  5' or '1~5'.    
+0001bed0: 2020 204f 5220 6461 7461 2031 2c33 2c35     OR data 1,3,5
+0001bee0: 2020 2020 2020 2020 2020 203a 206c 6973             : lis
+0001bef0: 7420 666f 726d 6174 2020 5b31 2c33 2c35  t format  [1,3,5
+0001bf00: 5d2c 2053 7472 696e 6720 666f 726d 6174  ], String format
+0001bf10: 2027 317c 337c 3527 0a20 2020 2020 2020   '1|3|5'.       
+0001bf20: 2020 2d20 6966 2066 6f75 6e64 2061 6e79    - if found any
+0001bf30: 2064 6174 6120 7468 656e 2067 6574 7469   data then getti
+0001bf40: 6e67 2074 6861 7420 6461 7461 206f 6e6c  ng that data onl
+0001bf50: 790a 2020 2020 2020 2020 202d 2069 6620  y.         - if 
+0001bf60: 7573 6520 6669 6c6c 5f75 7020 6f70 7469  use fill_up opti
+0001bf70: 6f6e 2074 6865 6e20 6966 2065 7272 6f72  on then if error
+0001bf80: 206f 6620 6120 6b65 7920 7468 656e 2066   of a key then f
+0001bf90: 696c 6c20 746f 203c 6669 6c6c 5f75 703e  ill to <fill_up>
+0001bfa0: 2076 616c 7565 2061 7420 7468 6520 6572   value at the er
+0001bfb0: 726f 7220 6c6f 6361 7469 6f6e 2e0a 2020  ror location..  
+0001bfc0: 2020 202d 2069 6e64 6578 2020 203a 2069     - index   : i
+0001bfd0: 6e74 6567 6572 2020 2020 2020 203a 2073  nteger       : s
+0001bfe0: 696e 676c 6520 6461 7461 0a20 2020 2047  ingle data.    G
+0001bff0: 6574 2827 5f74 6869 735f 272c 3c6b 6579  et('_this_',<key
+0001c000: 3e29 3a20 6d79 2066 756e 6374 696f 6e73  >): my functions
+0001c010: 2773 203c 6b65 793e 0a20 2020 2047 6574  's <key>.    Get
+0001c020: 2827 3c76 6172 206e 616d 653e 2729 2020  ('<var name>')  
+0001c030: 3a20 7265 7475 726e 2076 6172 6961 626c  : return variabl
+0001c040: 6520 6461 7461 0a20 2020 2047 6574 2827  e data.    Get('
+0001c050: 5f74 6869 735f 272c 2761 7267 7327 2920  _this_','args') 
+0001c060: 203a 2072 6574 7572 6e20 6d79 2066 756e   : return my fun
+0001c070: 6374 696f 6e73 2041 7267 756d 656e 7473  ctions Arguments
+0001c080: 0a20 2020 2047 6574 283c 6675 6e63 7469  .    Get(<functi
+0001c090: 6f6e 3e2c 2761 7267 7327 2920 203a 2072  on>,'args')  : r
+0001c0a0: 6574 7572 6e20 7468 6520 6675 6e63 7469  eturn the functi
+0001c0b0: 6f6e 7320 4172 6775 6d65 6e74 730a 2020  ons Arguments.  
+0001c0c0: 2020 3c6f 7074 696f 6e3e 0a20 2020 2020    <option>.     
+0001c0d0: 2066 696c 6c5f 7570 203a 2049 6620 6572   fill_up : If er
+0001c0e0: 726f 7220 6f66 2074 6865 206b 6579 2773  ror of the key's
+0001c0f0: 2076 616c 7565 2074 6865 6e20 6669 6c6c   value then fill
+0001c100: 2075 7020 3c66 696c 6c5f 7570 3e20 746f   up <fill_up> to
+0001c110: 2072 6967 6874 2070 6f73 6974 696f 6e20   right position 
+0001c120: 7768 656e 2074 6865 203c 6b65 793e 2069  when the <key> i
+0001c130: 7320 6c69 7374 0a20 2020 2020 2064 6566  s list.      def
+0001c140: 6175 6c74 203a 204e 6f6e 652c 2061 6e79  ault : None, any
+0001c150: 2069 7373 7565 0a20 2020 2020 2065 7272   issue.      err
+0001c160: 2020 2020 203a 2046 616c 7365 2c20 6966       : False, if
+0001c170: 2061 6e79 2065 7272 6f72 2074 6865 6e20   any error then 
+0001c180: 6967 6e6f 7265 2074 6865 2064 6174 610a  ignore the data.
+0001c190: 2020 2020 2020 6964 785f 6f6e 6c79 3a20        idx_only: 
+0001c1a0: 6966 2069 6e70 7574 2064 6174 6120 6973  if input data is
+0001c1b0: 2064 6963 7469 6f6e 6172 7920 7468 656e   dictionary then
+0001c1c0: 2063 6f6e 7665 7274 2064 6963 7469 6f6e   convert diction
+0001c1d0: 6172 7927 7320 6b65 7973 2074 6f20 696e  ary's keys to in
+0001c1e0: 7075 7420 6461 7461 2e20 536f 2c20 696e  put data. So, in
+0001c1f0: 7420 6964 7820 6361 6e20 6765 7420 6b65  t idx can get ke
+0001c200: 7973 286c 6973 7429 206e 616d 650a 2020  ys(list) name.  
+0001c210: 2020 2020 5f74 7970 655f 2020 3a20 6465      _type_  : de
+0001c220: 6669 6e65 2074 6f20 696e 7075 7420 6461  fine to input da
+0001c230: 7461 2773 2064 6174 6120 666f 726d 6174  ta's data format
+0001c240: 2028 6578 3a20 286c 6973 742c 7475 706c   (ex: (list,tupl
+0001c250: 6529 290a 2020 2020 2020 6d65 7468 6f64  e)).      method
+0001c260: 2020 3a20 6966 2069 6e70 7574 2069 7320    : if input is 
+0001c270: 7265 7175 6573 7420 7468 656e 2063 616e  request then can
+0001c280: 2064 6566 696e 6520 6d65 7468 6f64 2827   define method('
+0001c290: 4745 5427 2c27 504f 5354 272c 2e2e 2e29  GET','POST',...)
+0001c2a0: 0a20 2020 2020 2073 7472 6970 2020 203a  .      strip   :
+0001c2b0: 2064 6566 6175 6c74 3a20 4661 6c73 652c   default: False,
+0001c2c0: 2069 7420 6361 6e20 7374 7269 7020 7768   it can strip wh
+0001c2d0: 6974 6520 7370 6163 650a 2020 2020 2020  ite space.      
+0001c2e0: 7065 656c 2020 2020 3a20 0a20 2020 2020  peel    : .     
+0001c2f0: 2020 2020 2066 6f72 6365 3a20 6a75 7374       force: just
+0001c300: 2074 616b 6520 6669 7273 7420 6461 7461   take first data
+0001c310: 2069 6e20 7468 6520 6c69 7374 2c74 7570   in the list,tup
+0001c320: 6c65 2028 6966 2064 6174 6120 666f 726d  le (if data form
+0001c330: 6174 2068 6173 2061 6e79 2066 6f72 6d20  at has any form 
+0001c340: 616c 736f 204f 4b2c 206a 7573 7420 7265  also OK, just re
+0001c350: 7475 726e 2074 6865 2064 6174 6129 0a20  turn the data). 
+0001c360: 2020 2020 2020 2020 2054 7275 6520 3a20           True : 
+0001c370: 7369 6e67 6c65 2064 6174 6128 6c69 7374  single data(list
+0001c380: 2c74 7570 6c65 2c64 6963 7429 2074 6865  ,tuple,dict) the
+0001c390: 6e20 7065 656c 2074 6f20 6461 7461 2028  n peel to data (
+0001c3a0: 6966 2064 6174 6120 666f 726d 6174 2069  if data format i
+0001c3b0: 7320 6c69 7374 2c74 7570 6c65 2c64 6963  s list,tuple,dic
+0001c3c0: 742e 2e2e 2074 6865 6e20 7265 7475 726e  t... then return
+0001c3d0: 2064 6566 6175 6c74 290a 2020 2020 2020   default).      
+0001c3e0: 2020 2020 4661 6c73 653a 2072 6574 7572      False: retur
+0001c3f0: 6e20 666f 756e 6465 6420 6461 7461 2028  n founded data (
+0001c400: 616e 7920 666f 726d 6174 290a 2020 2020  any format).    
+0001c410: 2020 6f75 7420 2020 2020 3a20 6465 6669    out     : defi
+0001c420: 6e65 2074 6f20 6f75 7470 7574 2064 6174  ne to output dat
+0001c430: 6120 286c 6973 742d 3e20 6f75 7470 7574  a (list-> output
+0001c440: 2077 696c 6c20 6c69 7374 2c20 2e2e 2e29   will list, ...)
+0001c450: 2c20 6966 2077 726f 6e67 2066 6f72 6d61  , if wrong forma
+0001c460: 7420 7468 656e 2072 6574 7572 6e20 6465  t then return de
+0001c470: 6661 756c 740a 2020 2020 2727 270a 2020  fault.    '''.  
+0001c480: 2020 6465 6661 756c 743d 6f70 7473 2e67    default=opts.g
+0001c490: 6574 2827 6465 6661 756c 7427 290a 2020  et('default').  
+0001c4a0: 2020 6572 723d 6f70 7473 2e67 6574 2827    err=opts.get('
+0001c4b0: 6572 7227 2c6f 7074 732e 6765 7428 2765  err',opts.get('e
+0001c4c0: 7272 6f72 272c 4661 6c73 6529 290a 2020  rror',False)).  
+0001c4d0: 2020 6669 6c6c 5f75 703d 6f70 7473 2e67    fill_up=opts.g
+0001c4e0: 6574 2827 6669 6c6c 5f75 7027 2c27 5f66  et('fill_up','_f
+0001c4f0: 416c 7345 5f27 290a 2020 2020 6964 785f  AlsE_').    idx_
+0001c500: 6f6e 6c79 3d6f 7074 732e 6765 7428 2769  only=opts.get('i
+0001c510: 6478 5f6f 6e6c 7927 2c6f 7074 732e 6765  dx_only',opts.ge
+0001c520: 7428 2769 6e64 6578 5f6f 6e6c 7927 2c46  t('index_only',F
+0001c530: 616c 7365 2929 0a20 2020 205f 7479 7065  alse)).    _type
+0001c540: 3d6f 7074 732e 6765 7428 275f 7479 7065  =opts.get('_type
+0001c550: 5f27 2c6f 7074 732e 6765 7428 2774 7970  _',opts.get('typ
+0001c560: 6527 2929 0a20 2020 206f 7574 3d6f 7074  e')).    out=opt
+0001c570: 732e 6765 7428 276f 7574 272c 6f70 7473  s.get('out',opts
+0001c580: 2e67 6574 2827 6f75 745f 666f 726d 272c  .get('out_form',
+0001c590: 2772 6177 2729 290a 2020 2020 7065 656c  'raw')).    peel
+0001c5a0: 3d6f 7074 732e 6765 7428 2770 6565 6c27  =opts.get('peel'
+0001c5b0: 290a 2020 2020 7374 7269 703d 6f70 7473  ).    strip=opts
+0001c5c0: 2e67 6574 2827 7374 7269 7027 2c46 616c  .get('strip',Fal
+0001c5d0: 7365 290a 0a20 2020 2069 6620 6c65 6e28  se)..    if len(
+0001c5e0: 696e 7073 2920 3d3d 2030 3a0a 2020 2020  inps) == 0:.    
+0001c5f0: 2020 2020 7265 7475 726e 2044 6566 6175      return Defau
+0001c600: 6c74 2869 6e70 732c 6465 6661 756c 7429  lt(inps,default)
+0001c610: 0a20 2020 2069 6620 6c65 6e28 696e 7073  .    if len(inps
+0001c620: 2920 3d3d 2031 3a0a 2020 2020 2020 2020  ) == 1:.        
+0001c630: 6966 2069 6e70 735b 305d 2069 6e20 5b27  if inps[0] in ['
+0001c640: 7768 6f61 6d69 272c 276d 796e 616d 6527  whoami','myname'
+0001c650: 2c27 6675 6e63 6e61 6d65 272c 2766 756e  ,'funcname','fun
+0001c660: 6374 696f 6e6e 616d 6527 2c27 4675 6e63  ctionname','Func
+0001c670: 7469 6f6e 4e61 6d65 275d 3a0a 2020 2020  tionName']:.    
+0001c680: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+0001c690: 756e 6374 696f 6e4e 616d 6528 7061 7265  unctionName(pare
+0001c6a0: 6e74 3d6f 7074 732e 6765 7428 2770 6172  nt=opts.get('par
+0001c6b0: 656e 7427 2c31 2929 2023 206d 7920 7061  ent',1)) # my pa
+0001c6c0: 7265 6e74 2773 2066 756e 6374 696f 6e20  rent's function 
+0001c6d0: 6e61 6d65 0a20 2020 2020 2020 2065 6c69  name.        eli
+0001c6e0: 6620 6973 696e 7374 616e 6365 2869 6e70  f isinstance(inp
+0001c6f0: 735b 305d 2c73 7472 293a 0a20 2020 2020  s[0],str):.     
+0001c700: 2020 2020 2020 2069 6620 696e 7073 5b30         if inps[0
+0001c710: 5d2e 6c6f 7765 7228 2920 696e 205b 2766  ].lower() in ['f
+0001c720: 756e 6327 2c27 6675 6e63 7469 6f6e 272c  unc','function',
+0001c730: 2766 756e 6374 696f 6e73 272c 2766 756e  'functions','fun
+0001c740: 636c 6973 7427 2c27 6675 6e63 5f6c 6973  clist','func_lis
+0001c750: 7427 2c27 6c69 7374 275d 3a0a 2020 2020  t','list']:.    
+0001c760: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001c770: 726e 2046 756e 6374 696f 6e4c 6973 7428  rn FunctionList(
+0001c780: 7061 7265 6e74 3d6f 7074 732e 6765 7428  parent=opts.get(
+0001c790: 2770 6172 656e 7427 2c2d 3129 2920 2320  'parent',-1)) # 
+0001c7a0: 6465 6661 756c 743a 206d 7920 7061 6765  default: my page
+0001c7b0: 2773 2066 756e 6374 696f 6e20 6c69 7374  's function list
+0001c7c0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0001c7d0: 7572 6e20 5661 7269 6162 6c65 2869 6e70  urn Variable(inp
+0001c7e0: 735b 305d 2c70 6172 656e 743d 6f70 7473  s[0],parent=opts
+0001c7f0: 2e67 6574 2827 7061 7265 6e74 272c 3129  .get('parent',1)
+0001c800: 2920 2320 6d79 2070 6172 656e 7427 7320  ) # my parent's 
+0001c810: 7661 7269 6162 6c65 0a20 2020 2069 6e70  variable.    inp
+0001c820: 733d 6c69 7374 2869 6e70 7329 0a20 2020  s=list(inps).   
+0001c830: 206f 626a 3d69 6e70 735b 305d 0a20 2020   obj=inps[0].   
+0001c840: 2069 6620 4973 4e6f 6e65 286f 626a 293a   if IsNone(obj):
+0001c850: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001c860: 4465 6661 756c 7428 6f62 6a2c 6465 6661  Default(obj,defa
+0001c870: 756c 7429 0a20 2020 2064 656c 2069 6e70  ult).    del inp
+0001c880: 735b 305d 0a20 2020 2069 6620 6c65 6e28  s[0].    if len(
+0001c890: 696e 7073 2920 3d3d 2031 3a0a 2020 2020  inps) == 1:.    
+0001c8a0: 2020 2020 6964 783d 696e 7073 5b30 5d0a      idx=inps[0].
+0001c8b0: 2020 2020 656c 6966 206c 656e 2869 6e70      elif len(inp
+0001c8c0: 7329 203e 2031 3a0a 2020 2020 2020 2020  s) > 1:.        
+0001c8d0: 6966 2069 7369 6e73 7461 6e63 6528 6f62  if isinstance(ob
+0001c8e0: 6a2c 286c 6973 742c 7475 706c 6529 2920  j,(list,tuple)) 
+0001c8f0: 616e 6420 6e6f 7420 6973 696e 7374 616e  and not isinstan
+0001c900: 6365 2869 6e70 735b 2d31 5d2c 696e 7429  ce(inps[-1],int)
+0001c910: 2061 6e64 2027 6465 6661 756c 7427 206e   and 'default' n
+0001c920: 6f74 2069 6e20 6f70 7473 3a0a 2020 2020  ot in opts:.    
+0001c930: 2020 2020 2020 2020 6964 783d 696e 7073          idx=inps
+0001c940: 5b3a 2d31 5d0a 2020 2020 2020 2020 2020  [:-1].          
+0001c950: 2020 6465 6661 756c 743d 696e 7073 5b2d    default=inps[-
+0001c960: 315d 0a20 2020 2020 2020 2065 6c73 653a  1].        else:
+0001c970: 0a20 2020 2020 2020 2020 2020 2069 6478  .            idx
+0001c980: 3d69 6e70 735b 3a5d 0a20 2020 2065 6c73  =inps[:].    els
+0001c990: 653a 0a20 2020 2020 2020 2069 6478 3d4e  e:.        idx=N
+0001c9a0: 6f6e 650a 2020 2020 2357 6865 6e20 6368  one.    #When ch
+0001c9b0: 6563 6b20 7479 7065 0a20 2020 2069 6620  eck type.    if 
+0001c9c0: 5f74 7970 6520 6973 206e 6f74 204e 6f6e  _type is not Non
+0001c9d0: 653a 0a20 2020 2020 2020 2069 6620 6e6f  e:.        if no
+0001c9e0: 7420 5479 7065 286f 626a 2c5f 7479 7065  t Type(obj,_type
+0001c9f0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0001ca00: 6574 7572 6e20 4465 6661 756c 7428 6f62  eturn Default(ob
+0001ca10: 6a2c 6465 6661 756c 7429 0a20 2020 206f  j,default).    o
+0001ca20: 6b2c 6e69 6478 3d49 6e64 6578 466f 726d  k,nidx=IndexForm
+0001ca30: 2869 6478 2c69 6478 5f6f 6e6c 793d 6964  (idx,idx_only=id
+0001ca40: 785f 6f6e 6c79 290a 2020 2020 6964 785f  x_only).    idx_
+0001ca50: 7479 7065 3d74 7970 6528 6e69 6478 292e  type=type(nidx).
+0001ca60: 5f5f 6e61 6d65 5f5f 0a20 2020 2069 6620  __name__.    if 
+0001ca70: 6f62 6a20 3d3d 2027 5f74 6869 735f 273a  obj == '_this_':
+0001ca80: 0a20 2020 2020 2020 206f 626a 5f74 7970  .        obj_typ
+0001ca90: 653d 2766 756e 6374 696f 6e27 0a20 2020  e='function'.   
+0001caa0: 2065 6c73 653a 0a20 2020 2020 2020 206f   else:.        o
+0001cab0: 626a 5f74 7970 653d 5479 7065 4e61 6d65  bj_type=TypeName
+0001cac0: 286f 626a 290a 2020 2020 2020 2020 0a20  (obj).        . 
+0001cad0: 2020 2069 6620 6f6b 2061 6e64 206f 626a     if ok and obj
+0001cae0: 5f74 7970 6520 696e 2028 276c 6973 7427  _type in ('list'
+0001caf0: 2c27 7475 706c 6527 2c27 7374 7227 2c27  ,'tuple','str','
+0001cb00: 6279 7465 7327 293a 0a20 2020 2020 2020  bytes'):.       
+0001cb10: 2069 6620 6964 785f 7479 7065 203d 3d20   if idx_type == 
+0001cb20: 2774 7570 6c65 273a 0a20 2020 2020 2020  'tuple':.       
+0001cb30: 2020 2020 2073 733d 5f6f 626a 5f6d 6178       ss=_obj_max
+0001cb40: 5f69 6478 5f28 6f62 6a2c 496e 7428 6e69  _idx_(obj,Int(ni
+0001cb50: 6478 5b30 5d29 2c65 7272 290a 2020 2020  dx[0]),err).    
+0001cb60: 2020 2020 2020 2020 6565 3d5f 6f62 6a5f          ee=_obj_
+0001cb70: 6d61 785f 6964 785f 286f 626a 2c49 6e74  max_idx_(obj,Int
+0001cb80: 286e 6964 785b 315d 292c 6572 7229 0a20  (nidx[1]),err). 
+0001cb90: 2020 2020 2020 2020 2020 2069 6620 5479             if Ty
+0001cba0: 7065 2873 732c 696e 7429 2061 6e64 2054  pe(ss,int) and T
+0001cbb0: 7970 6528 6565 2c69 6e74 293a 0a20 2020  ype(ee,int):.   
+0001cbc0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001cbd0: 7572 6e20 6f62 6a5b 7373 3a65 652b 315d  urn obj[ss:ee+1]
+0001cbe0: 0a20 2020 2020 2020 2065 6c69 6620 6964  .        elif id
+0001cbf0: 785f 7479 7065 203d 3d20 276c 6973 7427  x_type == 'list'
+0001cc00: 3a0a 2020 2020 2020 2020 2020 2020 7274  :.            rt
+0001cc10: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
+0001cc20: 666f 7220 6920 696e 206e 6964 783a 0a20  for i in nidx:. 
+0001cc30: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001cc40: 783d 5f6f 626a 5f6d 6178 5f69 6478 5f28  x=_obj_max_idx_(
+0001cc50: 6f62 6a2c 496e 7428 692c 6465 6661 756c  obj,Int(i,defaul
+0001cc60: 743d 4661 6c73 652c 6572 723d 5472 7565  t=False,err=True
+0001cc70: 292c 6572 7229 0a20 2020 2020 2020 2020  ),err).         
+0001cc80: 2020 2020 2020 2069 6620 5479 7065 2869         if Type(i
+0001cc90: 782c 696e 7429 3a0a 2020 2020 2020 2020  x,int):.        
+0001cca0: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
+0001ccb0: 7070 656e 6428 6f62 6a5b 6978 5d29 0a20  ppend(obj[ix]). 
+0001ccc0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001ccd0: 6c69 6620 6669 6c6c 5f75 7020 213d 2027  lif fill_up != '
+0001cce0: 5f66 416c 7345 5f27 3a0a 2020 2020 2020  _fAlsE_':.      
+0001ccf0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+0001cd00: 2e61 7070 656e 6428 6669 6c6c 5f75 7029  .append(fill_up)
+0001cd10: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0001cd20: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
+0001cd30: 2c6f 7574 3d6f 7574 2c64 6566 6175 6c74  ,out=out,default
+0001cd40: 3d64 6566 6175 6c74 2c6f 7267 3d6f 626a  =default,org=obj
+0001cd50: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
+0001cd60: 3d73 7472 6970 290a 2020 2020 2020 2020  =strip).        
+0001cd70: 656c 6966 2069 6478 5f74 7970 6520 3d3d  elif idx_type ==
+0001cd80: 2027 696e 7427 3a0a 2020 2020 2020 2020   'int':.        
+0001cd90: 2020 2020 6978 3d5f 6f62 6a5f 6d61 785f      ix=_obj_max_
+0001cda0: 6964 785f 286f 626a 2c6e 6964 782c 6572  idx_(obj,nidx,er
+0001cdb0: 7229 0a20 2020 2020 2020 2020 2020 2069  r).            i
+0001cdc0: 6620 5479 7065 2869 782c 696e 7429 3a20  f Type(ix,int): 
+0001cdd0: 7265 7475 726e 206f 626a 5b69 785d 0a20  return obj[ix]. 
+0001cde0: 2020 2020 2020 2069 6620 6964 7820 696e         if idx in
+0001cdf0: 2064 6972 286f 626a 293a 0a20 2020 2020   dir(obj):.     
+0001ce00: 2020 2020 2020 2072 6574 7572 6e20 6f62         return ob
+0001ce10: 6a2e 5f5f 6469 6374 5f5f 2e67 6574 2869  j.__dict__.get(i
+0001ce20: 6478 290a 2020 2020 2020 2020 7265 7475  dx).        retu
+0001ce30: 726e 2044 6566 6175 6c74 286f 626a 2c64  rn Default(obj,d
+0001ce40: 6566 6175 6c74 290a 2020 2020 656c 6966  efault).    elif
+0001ce50: 206f 626a 5f74 7970 6520 696e 2028 2764   obj_type in ('d
+0001ce60: 6963 7427 293a 0a20 2020 2020 2020 2072  ict'):.        r
+0001ce70: 6574 7572 6e20 4449 4354 286f 626a 292e  eturn DICT(obj).
+0001ce80: 4765 7428 6964 782c 2a2a 6f70 7473 290a  Get(idx,**opts).
+0001ce90: 2020 2020 656c 6966 206f 626a 5f74 7970      elif obj_typ
+0001cea0: 6520 696e 2028 2766 756e 6374 696f 6e27  e in ('function'
+0001ceb0: 293a 2023 3f3f 3f0a 2020 2020 2020 2020  ): #???.        
+0001cec0: 6966 206f 6b3a 0a20 2020 2020 2020 2020  if ok:.         
+0001ced0: 2020 2069 6620 6964 785f 7479 7065 203d     if idx_type =
+0001cee0: 3d20 2773 7472 273a 0a20 2020 2020 2020  = 'str':.       
+0001cef0: 2020 2020 2020 2020 2069 6620 6e69 6478           if nidx
+0001cf00: 2e6c 6f77 6572 2829 2069 6e20 5b27 6172  .lower() in ['ar
+0001cf10: 6773 272c 2761 7267 756d 656e 7473 275d  gs','arguments']
+0001cf20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001cf30: 2020 2020 2020 6966 206f 626a 203d 3d20        if obj == 
+0001cf40: 275f 7468 6973 5f27 3a0a 2020 2020 2020  '_this_':.      
+0001cf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf60: 2020 6f62 6a3d 696e 7370 6563 742e 6765    obj=inspect.ge
+0001cf70: 746d 656d 6265 7273 284d 794d 6f64 756c  tmembers(MyModul
+0001cf80: 6528 2929 2e67 6574 2843 616c 6c65 724e  e()).get(CallerN
+0001cf90: 616d 6528 2929 0a20 2020 2020 2020 2020  ame()).         
+0001cfa0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001cfb0: 6e20 4675 6e63 7469 6f6e 4172 6773 286f  n FunctionArgs(o
+0001cfc0: 626a 290a 2020 2020 2020 2020 2020 2020  bj).            
+0001cfd0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001cfe0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001cff0: 206f 626a 203d 3d20 275f 7468 6973 5f27   obj == '_this_'
 0001d000: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001d010: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-0001d020: 2e61 7070 656e 6428 4675 6e63 7469 6f6e  .append(Function
-0001d030: 4172 6773 286f 626a 2929 0a20 2020 2020  Args(obj)).     
-0001d040: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001d050: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0001d060: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001d070: 6f62 6a20 3d3d 2027 5f74 6869 735f 273a  obj == '_this_':
-0001d080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d090: 2020 2020 2020 2020 2020 2020 2072 742e               rt.
-0001d0a0: 6170 7065 6e64 2856 6172 6961 626c 6528  append(Variable(
-0001d0b0: 6e69 6478 2c70 6172 656e 743d 3129 290a  nidx,parent=1)).
+0001d010: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001d020: 2056 6172 6961 626c 6528 6e69 6478 2c70   Variable(nidx,p
+0001d030: 6172 656e 743d 3129 0a20 2020 2020 2020  arent=1).       
+0001d040: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001d050: 7572 6e20 5661 7261 626c 6528 6e69 6478  urn Varable(nidx
+0001d060: 2c6f 626a 290a 2020 2020 2020 2020 2020  ,obj).          
+0001d070: 2020 656c 6966 2069 6478 5f74 7970 6520    elif idx_type 
+0001d080: 3d3d 2027 6c69 7374 273a 0a20 2020 2020  == 'list':.     
+0001d090: 2020 2020 2020 2020 2020 2072 743d 5b5d             rt=[]
+0001d0a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d0b0: 2066 6f72 2069 2069 6e20 6e69 6478 3a0a   for i in nidx:.
 0001d0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d0d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001d0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d0f0: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
-0001d100: 656e 6428 5661 7269 6162 6c65 286e 6964  end(Variable(nid
-0001d110: 782c 6f62 6a29 290a 2020 2020 2020 2020  x,obj)).        
-0001d120: 2020 2020 2020 2020 7265 7475 726e 204f          return O
-0001d130: 7574 466f 726d 6174 2872 742c 6f75 743d  utFormat(rt,out=
-0001d140: 6f75 742c 6465 6661 756c 743d 6465 6661  out,default=defa
-0001d150: 756c 742c 6f72 673d 6f62 6a2c 7065 656c  ult,org=obj,peel
-0001d160: 3d70 6565 6c2c 7374 7269 703d 7374 7269  =peel,strip=stri
-0001d170: 7029 0a20 2020 2065 6c69 6620 6f62 6a5f  p).    elif obj_
-0001d180: 7479 7065 2069 6e20 2827 696e 7374 616e  type in ('instan
-0001d190: 6365 272c 2763 6c61 7373 6f62 6a27 2c27  ce','classobj','
-0001d1a0: 6d6f 6475 6c65 2729 3a0a 2020 2020 2020  module'):.      
-0001d1b0: 2020 6966 2054 7970 6528 6964 782c 7374    if Type(idx,st
-0001d1c0: 7229 2061 6e64 2069 6478 2e6c 6f77 6572  r) and idx.lower
-0001d1d0: 2829 2069 6e20 5b27 6675 6e63 272c 2766  () in ['func','f
-0001d1e0: 756e 6374 696f 6e27 2c27 6675 6e63 7469  unction','functi
-0001d1f0: 6f6e 7327 2c27 6675 6e63 6c69 7374 272c  ons','funclist',
-0001d200: 2766 756e 635f 6c69 7374 272c 276c 6973  'func_list','lis
-0001d210: 7427 5d3a 0a20 2020 2020 2020 2020 2020  t']:.           
-0001d220: 2072 6574 7572 6e20 4675 6e63 7469 6f6e   return Function
-0001d230: 4c69 7374 286f 626a 290a 2020 2020 2020  List(obj).      
-0001d240: 2020 656c 6966 2069 6478 5f74 7970 6520    elif idx_type 
-0001d250: 696e 205b 276c 6973 7427 2c27 7475 706c  in ['list','tupl
-0001d260: 6527 5d3a 2023 4f52 2049 6e64 6578 0a20  e']: #OR Index. 
-0001d270: 2020 2020 2020 2020 2020 2072 743d 5b5d             rt=[]
-0001d280: 0a20 2020 2020 2020 2020 2020 2023 2067  .            # g
-0001d290: 6574 2066 756e 6374 696f 6e20 6f62 6a65  et function obje
-0001d2a0: 6374 206f 6620 6669 6e64 696e 6720 7374  ct of finding st
-0001d2b0: 7269 6e67 206e 616d 6520 696e 2074 6865  ring name in the
-0001d2c0: 2063 6c61 7373 2f69 6e73 7461 6e63 650a   class/instance.
-0001d2d0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001d2e0: 6666 2069 6e20 6e69 6478 3a0a 2020 2020  ff in nidx:.    
-0001d2f0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-0001d300: 7369 6e73 7461 6e63 6528 6666 2c73 7472  sinstance(ff,str
-0001d310: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0001d320: 2020 2020 2020 2069 6620 6666 2069 6e20         if ff in 
-0001d330: 5b27 5f5f 6e61 6d65 5f5f 272c 276d 6574  ['__name__','met
-0001d340: 686f 645f 6e61 6d65 272c 275f 5f6d 6574  hod_name','__met
-0001d350: 686f 645f 5f27 5d3a 2023 4765 7420 4d65  hod__']: #Get Me
-0001d360: 7468 6f64 206e 616d 6520 6c69 7374 2069  thod name list i
-0001d370: 6e20 636c 6173 730a 2020 2020 2020 2020  n class.        
-0001d380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d390: 6966 206f 626a 5f74 7970 6520 696e 2028  if obj_type in (
-0001d3a0: 2763 6c61 7373 6f62 6a27 293a 206f 626a  'classobj'): obj
-0001d3b0: 3d6f 626a 2829 2023 206d 6f76 6520 6672  =obj() # move fr
-0001d3c0: 6f6d 2043 4c41 5353 2074 6f20 434c 4153  om CLASS to CLAS
-0001d3d0: 5328 290a 2020 2020 2020 2020 2020 2020  S().            
-0001d3e0: 2020 2020 2020 2020 2020 2020 6966 2054              if T
-0001d3f0: 7970 6528 6f62 6a2c 2769 6e73 7461 6e63  ype(obj,'instanc
-0001d400: 6527 293a 0a20 2020 2020 2020 2020 2020  e'):.           
-0001d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d420: 2072 743d 7274 2b4d 6574 686f 6449 6e43   rt=rt+MethodInC
-0001d430: 6c61 7373 286f 626a 290a 2020 2020 2020  lass(obj).      
-0001d440: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0001d450: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001d460: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
-0001d470: 7070 656e 6428 6765 7461 7474 7228 6f62  ppend(getattr(ob
-0001d480: 6a2c 6666 2c64 6566 6175 6c74 2929 0a20  j,ff,default)). 
-0001d490: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001d4a0: 6e20 4f75 7446 6f72 6d61 7428 7274 2c6f  n OutFormat(rt,o
-0001d4b0: 7574 3d6f 7574 2c64 6566 6175 6c74 3d64  ut=out,default=d
-0001d4c0: 6566 6175 6c74 2c6f 7267 3d6f 626a 2c70  efault,org=obj,p
-0001d4d0: 6565 6c3d 7065 656c 2c73 7472 6970 3d73  eel=peel,strip=s
-0001d4e0: 7472 6970 290a 2020 2020 2020 2020 656c  trip).        el
-0001d4f0: 6966 2069 6478 5f74 7970 6520 3d3d 2027  if idx_type == '
-0001d500: 7374 7227 3a0a 2020 2020 2020 2020 2020  str':.          
-0001d510: 2020 6966 206f 626a 5f74 7970 6520 3d3d    if obj_type ==
-0001d520: 2027 636c 6173 736f 626a 273a 206f 626a   'classobj': obj
-0001d530: 3d6f 626a 2829 2023 206d 6f76 6520 434c  =obj() # move CL
-0001d540: 4153 5320 746f 2043 4c41 5353 2829 0a20  ASS to CLASS(). 
-0001d550: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001d560: 6e20 6765 7461 7474 7228 6f62 6a2c 6e69  n getattr(obj,ni
-0001d570: 6478 2c44 6566 6175 6c74 286f 626a 2c64  dx,Default(obj,d
-0001d580: 6566 6175 6c74 2929 0a20 2020 2020 2020  efault)).       
-0001d590: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001d5a0: 2020 2069 6620 5479 7065 286f 626a 2c27     if Type(obj,'
-0001d5b0: 636c 6173 736f 626a 2729 3a20 6f62 6a3d  classobj'): obj=
-0001d5c0: 6f62 6a28 2920 2320 6d6f 7665 2066 726f  obj() # move fro
-0001d5d0: 6d20 434c 4153 5320 746f 2043 4c41 5353  m CLASS to CLASS
-0001d5e0: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
-0001d5f0: 6620 6f6b 2069 7320 4661 6c73 653a 0a20  f ok is False:. 
-0001d600: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001d610: 6574 7572 6e20 6f62 6a2e 5f5f 6469 6374  eturn obj.__dict
-0001d620: 5f5f 0a20 2020 2020 2020 2020 2020 2065  __.            e
-0001d630: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0001d640: 2020 2020 2072 6574 7572 6e20 4765 7428       return Get(
-0001d650: 6f62 6a2e 5f5f 6469 6374 5f5f 2c69 6478  obj.__dict__,idx
-0001d660: 2c64 6566 6175 6c74 2c65 7272 2920 2320  ,default,err) # 
-0001d670: 636f 6e76 6572 7465 6420 6f62 6a20 7769  converted obj wi
-0001d680: 7468 206f 7269 6769 6e61 6c20 6964 780a  th original idx.
-0001d690: 2020 2020 656c 6966 206f 626a 5f74 7970      elif obj_typ
-0001d6a0: 6520 696e 2028 2772 6573 706f 6e73 6527  e in ('response'
-0001d6b0: 293a 2023 2057 6562 2044 6174 610a 2020  ): # Web Data.  
-0001d6c0: 2020 2020 2020 6966 206f 6b3a 0a20 2020        if ok:.   
-0001d6d0: 2020 2020 2020 2020 2064 6566 205f 7765           def _we
-0001d6e0: 625f 286f 626a 2c6e 6964 7829 3a0a 2020  b_(obj,nidx):.  
-0001d6f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001d700: 206e 6964 7820 696e 205b 2772 6327 2c27   nidx in ['rc','
-0001d710: 7374 6174 7573 272c 2763 6f64 6527 2c27  status','code','
-0001d720: 7374 6174 6527 2c27 7374 6174 7573 5f63  state','status_c
-0001d730: 6f64 6527 5d3a 0a20 2020 2020 2020 2020  ode']:.         
-0001d740: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001d750: 6e20 6f62 6a2e 7374 6174 7573 5f63 6f64  n obj.status_cod
-0001d760: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0001d770: 2020 656c 6966 206e 6964 7820 696e 205b    elif nidx in [
-0001d780: 2764 6174 6127 2c27 7661 6c75 6527 2c27  'data','value','
-0001d790: 6a73 6f6e 275d 3a0a 2020 2020 2020 2020  json']:.        
-0001d7a0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0001d7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d7c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001d7d0: 466f 726d 4461 7461 286f 626a 2e74 6578  FormData(obj.tex
-0001d7e0: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-0001d7f0: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
-0001d800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d810: 2020 2020 2020 2069 6620 6572 7220 6973         if err is
-0001d820: 2054 7275 653a 2072 6574 7572 6e20 4465   True: return De
-0001d830: 6661 756c 7428 6f62 6a2c 6465 6661 756c  fault(obj,defaul
-0001d840: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-0001d850: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001d860: 6e20 6f62 6a2e 7465 7874 0a20 2020 2020  n obj.text.     
-0001d870: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0001d880: 6e69 6478 2069 6e20 5b27 7465 7874 272c  nidx in ['text',
-0001d890: 2773 7472 272c 2773 7472 696e 6727 5d3a  'str','string']:
-0001d8a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d8b0: 2020 2020 2072 6574 7572 6e20 6f62 6a2e       return obj.
-0001d8c0: 7465 7874 0a20 2020 2020 2020 2020 2020  text.           
-0001d8d0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001d8e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001d8f0: 6574 7572 6e20 6f62 6a0a 2020 2020 2020  eturn obj.      
-0001d900: 2020 2020 2020 6966 2069 6478 5f74 7970        if idx_typ
-0001d910: 653d 3d27 7374 7227 3a0a 2020 2020 2020  e=='str':.      
-0001d920: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001d930: 205f 7765 625f 286f 626a 2c6e 6964 7829   _web_(obj,nidx)
-0001d940: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0001d950: 6620 6964 785f 7479 7065 203d 3d20 276c  f idx_type == 'l
-0001d960: 6973 7427 3a0a 2020 2020 2020 2020 2020  ist':.          
-0001d970: 2020 2020 2020 7274 3d5b 5d0a 2020 2020        rt=[].    
-0001d980: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001d990: 696b 6579 2069 6e20 6e69 6478 3a0a 2020  ikey in nidx:.  
-0001d9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d9b0: 2020 7274 2e61 7070 656e 6428 5f77 6562    rt.append(_web
-0001d9c0: 5f28 6f62 6a2c 696b 6579 2929 0a20 2020  _(obj,ikey)).   
-0001d9d0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001d9e0: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
-0001d9f0: 2c6f 7574 3d6f 7574 2c64 6566 6175 6c74  ,out=out,default
-0001da00: 3d64 6566 6175 6c74 2c6f 7267 3d6f 626a  =default,org=obj
-0001da10: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
-0001da20: 3d73 7472 6970 290a 2020 2020 656c 6966  =strip).    elif
-0001da30: 206f 626a 5f74 7970 6520 696e 2028 2772   obj_type in ('r
-0001da40: 6571 7565 7374 2729 3a20 2320 5765 6220  equest'): # Web 
-0001da50: 4461 7461 320a 2020 2020 2020 2020 7274  Data2.        rt
-0001da60: 3d5b 5d0a 2020 2020 2020 2020 6d65 7468  =[].        meth
-0001da70: 6f64 3d6f 7074 732e 6765 7428 276d 6574  od=opts.get('met
-0001da80: 686f 6427 2c4e 6f6e 6529 0a20 2020 2020  hod',None).     
-0001da90: 2020 2069 6620 4973 4e6f 6e65 286d 6574     if IsNone(met
-0001daa0: 686f 6429 3a20 6d65 7468 6f64 3d6f 626a  hod): method=obj
-0001dab0: 2e6d 6574 686f 642e 7570 7065 7228 290a  .method.upper().
-0001dac0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-0001dad0: 6e73 7461 6e63 6528 6d65 7468 6f64 2c73  nstance(method,s
-0001dae0: 7472 293a 206d 6574 686f 643d 6d65 7468  tr): method=meth
-0001daf0: 6f64 2e75 7070 6572 2829 0a0a 2020 2020  od.upper()..    
-0001db00: 2020 2020 6966 206f 6b3a 0a20 2020 2020      if ok:.     
-0001db10: 2020 2020 2020 2064 6566 205f 7765 625f         def _web_
-0001db20: 6461 7461 286f 626a 2c6e 6b65 792c 6d65  data(obj,nkey,me
-0001db30: 7468 6f64 2c64 6566 6175 6c74 293a 0a20  thod,default):. 
-0001db40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001db50: 6620 6e6b 6579 2e6c 6f77 6572 2829 203d  f nkey.lower() =
-0001db60: 3d20 276d 6574 686f 6427 3a0a 2020 2020  = 'method':.    
-0001db70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001db80: 7265 7475 726e 206d 6574 686f 640a 2020  return method.  
-0001db90: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001dba0: 206d 6574 686f 643d 3d27 4745 5427 3a0a   method=='GET':.
-0001dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dbc0: 2020 2020 7274 3d6f 626a 2e47 4554 2e67      rt=obj.GET.g
-0001dbd0: 6574 286e 6b65 7929 0a20 2020 2020 2020  et(nkey).       
-0001dbe0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001dbf0: 6e6f 7420 4973 4e6f 6e65 2872 7429 3a20  not IsNone(rt): 
-0001dc00: 7265 7475 726e 2072 740a 2020 2020 2020  return rt.      
-0001dc10: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001dc20: 7475 726e 2044 6566 6175 6c74 286f 626a  turn Default(obj
-0001dc30: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
-0001dc40: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
-0001dc50: 6574 686f 643d 3d27 4649 4c45 273a 0a20  ethod=='FILE':. 
-0001dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dc70: 2020 2072 743d 6f62 6a2e 4649 4c45 532e     rt=obj.FILES.
-0001dc80: 6765 746c 6973 7428 6e6b 6579 2c64 6566  getlist(nkey,def
-0001dc90: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
-0001dca0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-0001dcb0: 2049 734e 6f6e 6528 7274 293a 0a20 2020   IsNone(rt):.   
-0001dcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dcd0: 2020 2020 2023 7265 7475 726e 204f 7574       #return Out
-0001dce0: 466f 726d 6174 2872 742c 6f75 743d 2772  Format(rt,out='r
-0001dcf0: 6177 272c 7065 656c 3d70 6565 6c2c 7374  aw',peel=peel,st
-0001dd00: 7269 703d 7374 7269 702c 6465 6661 756c  rip=strip,defaul
-0001dd10: 743d 6465 6661 756c 7429 0a20 2020 2020  t=default).     
-0001dd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dd30: 2020 2072 6574 7572 6e20 4f75 7446 6f72     return OutFor
-0001dd40: 6d61 7428 7274 2c6f 7574 3d6f 7574 2c70  mat(rt,out=out,p
-0001dd50: 6565 6c3d 7065 656c 2c73 7472 6970 3d73  eel=peel,strip=s
-0001dd60: 7472 6970 2c64 6566 6175 6c74 3d64 6566  trip,default=def
-0001dd70: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
-0001dd80: 2020 2020 2020 2020 2020 2369 6620 6e6f            #if no
-0001dd90: 7420 4973 4e6f 6e65 2872 7429 3a20 7265  t IsNone(rt): re
-0001dda0: 7475 726e 2072 740a 2020 2020 2020 2020  turn rt.        
-0001ddb0: 2020 2020 2020 2020 2020 2020 2372 743d              #rt=
-0001ddc0: 6f62 6a2e 4649 4c45 532e 6765 7428 6e6b  obj.FILES.get(nk
-0001ddd0: 6579 2c64 6566 6175 6c74 290a 2020 2020  ey,default).    
-0001dde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ddf0: 2369 6620 6e6f 7420 4973 4e6f 6e65 2872  #if not IsNone(r
-0001de00: 7429 3a20 7265 7475 726e 2072 740a 2020  t): return rt.  
-0001de10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001de20: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
-0001de30: 286f 626a 2c64 6566 6175 6c74 290a 2020  (obj,default).  
-0001de40: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0001de50: 6966 206d 6574 686f 643d 3d27 504f 5354  if method=='POST
-0001de60: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-0001de70: 2020 2020 2020 2072 743d 6f62 6a2e 4649         rt=obj.FI
-0001de80: 4c45 532e 6765 746c 6973 7428 6e6b 6579  LES.getlist(nkey
-0001de90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001dea0: 2020 2020 2020 2372 7432 3d6f 626a 2e46        #rt2=obj.F
-0001deb0: 494c 4553 2e67 6574 286e 6b65 7929 0a20  ILES.get(nkey). 
-0001dec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ded0: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
-0001dee0: 2872 7429 3a0a 2020 2020 2020 2020 2020  (rt):.          
-0001def0: 2020 2020 2020 2020 2020 2020 2020 2372                #r
-0001df00: 6574 7572 6e20 4f75 7446 6f72 6d61 7428  eturn OutFormat(
-0001df10: 7274 2c6f 7574 3d27 7261 7727 2c70 6565  rt,out='raw',pee
-0001df20: 6c3d 7065 656c 2c73 7472 6970 3d73 7472  l=peel,strip=str
-0001df30: 6970 2c64 6566 6175 6c74 3d64 6566 6175  ip,default=defau
-0001df40: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
-0001df50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001df60: 726e 204f 7574 466f 726d 6174 2872 742c  rn OutFormat(rt,
-0001df70: 6f75 743d 6f75 742c 7065 656c 3d70 6565  out=out,peel=pee
-0001df80: 6c2c 7374 7269 703d 7374 7269 702c 6465  l,strip=strip,de
-0001df90: 6661 756c 743d 6465 6661 756c 7429 0a20  fault=default). 
-0001dfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dfb0: 2020 2072 743d 6f62 6a2e 504f 5354 2e67     rt=obj.POST.g
-0001dfc0: 6574 6c69 7374 286e 6b65 7929 0a20 2020  etlist(nkey).   
-0001dfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dfe0: 2023 7274 3d6f 626a 2e50 4f53 542e 6765   #rt=obj.POST.ge
-0001dff0: 7428 6e6b 6579 290a 2020 2020 2020 2020  t(nkey).        
-0001e000: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0001e010: 6f74 2049 734e 6f6e 6528 7274 293a 0a20  ot IsNone(rt):. 
-0001e020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e030: 2020 2020 2020 2023 7265 7475 726e 204f         #return O
-0001e040: 7574 466f 726d 6174 2872 742c 6f75 743d  utFormat(rt,out=
-0001e050: 2772 6177 272c 7065 656c 3d70 6565 6c2c  'raw',peel=peel,
-0001e060: 7374 7269 703d 7374 7269 702c 6465 6661  strip=strip,defa
-0001e070: 756c 743d 6465 6661 756c 7429 0a20 2020  ult=default).   
-0001e080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e090: 2020 2020 2072 6574 7572 6e20 4f75 7446       return OutF
-0001e0a0: 6f72 6d61 7428 7274 2c6f 7574 3d6f 7574  ormat(rt,out=out
-0001e0b0: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
-0001e0c0: 3d73 7472 6970 2c64 6566 6175 6c74 3d64  =strip,default=d
-0001e0d0: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
-0001e0e0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001e0f0: 726e 2044 6566 6175 6c74 286f 626a 2c64  rn Default(obj,d
-0001e100: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
-0001e110: 2020 2020 6966 2069 6478 5f74 7970 6520      if idx_type 
-0001e120: 3d3d 2027 7374 7227 3a0a 2020 2020 2020  == 'str':.      
+0001d0d0: 2020 2020 6966 2054 7970 6528 692c 7374      if Type(i,st
+0001d0e0: 7229 2061 6e64 2069 2e6c 6f77 6572 2829  r) and i.lower()
+0001d0f0: 2069 6e20 5b27 6172 6773 272c 2761 7267   in ['args','arg
+0001d100: 756d 656e 7473 275d 3a0a 2020 2020 2020  uments']:.      
+0001d110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d120: 2020 6966 206f 626a 203d 3d20 275f 7468    if obj == '_th
+0001d130: 6973 5f27 3a0a 2020 2020 2020 2020 2020  is_':.          
+0001d140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d150: 2020 6f62 6a32 3d69 6e73 7065 6374 2e67    obj2=inspect.g
+0001d160: 6574 6d65 6d62 6572 7328 4d79 4d6f 6475  etmembers(MyModu
+0001d170: 6c65 2829 292e 6765 7428 4361 6c6c 6572  le()).get(Caller
+0001d180: 4e61 6d65 2829 290a 2020 2020 2020 2020  Name()).        
+0001d190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d1a0: 2020 2020 7274 2e61 7070 656e 6428 4675      rt.append(Fu
+0001d1b0: 6e63 7469 6f6e 4172 6773 286f 626a 3229  nctionArgs(obj2)
+0001d1c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001d1d0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0001d1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d1f0: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
+0001d200: 7070 656e 6428 4675 6e63 7469 6f6e 4172  ppend(FunctionAr
+0001d210: 6773 286f 626a 2929 0a20 2020 2020 2020  gs(obj)).       
+0001d220: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0001d230: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0001d240: 2020 2020 2020 2020 2020 2069 6620 6f62             if ob
+0001d250: 6a20 3d3d 2027 5f74 6869 735f 273a 0a20  j == '_this_':. 
+0001d260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d270: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+0001d280: 7065 6e64 2856 6172 6961 626c 6528 6e69  pend(Variable(ni
+0001d290: 6478 2c70 6172 656e 743d 3129 290a 2020  dx,parent=1)).  
+0001d2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d2b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d2d0: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
+0001d2e0: 6428 5661 7269 6162 6c65 286e 6964 782c  d(Variable(nidx,
+0001d2f0: 6f62 6a29 290a 2020 2020 2020 2020 2020  obj)).          
+0001d300: 2020 2020 2020 7265 7475 726e 204f 7574        return Out
+0001d310: 466f 726d 6174 2872 742c 6f75 743d 6f75  Format(rt,out=ou
+0001d320: 742c 6465 6661 756c 743d 6465 6661 756c  t,default=defaul
+0001d330: 742c 6f72 673d 6f62 6a2c 7065 656c 3d70  t,org=obj,peel=p
+0001d340: 6565 6c2c 7374 7269 703d 7374 7269 7029  eel,strip=strip)
+0001d350: 0a20 2020 2065 6c69 6620 6f62 6a5f 7479  .    elif obj_ty
+0001d360: 7065 2069 6e20 2827 696e 7374 616e 6365  pe in ('instance
+0001d370: 272c 2763 6c61 7373 6f62 6a27 2c27 6d6f  ','classobj','mo
+0001d380: 6475 6c65 2729 3a0a 2020 2020 2020 2020  dule'):.        
+0001d390: 6966 2054 7970 6528 6964 782c 7374 7229  if Type(idx,str)
+0001d3a0: 2061 6e64 2069 6478 2e6c 6f77 6572 2829   and idx.lower()
+0001d3b0: 2069 6e20 5b27 6675 6e63 272c 2766 756e   in ['func','fun
+0001d3c0: 6374 696f 6e27 2c27 6675 6e63 7469 6f6e  ction','function
+0001d3d0: 7327 2c27 6675 6e63 6c69 7374 272c 2766  s','funclist','f
+0001d3e0: 756e 635f 6c69 7374 272c 276c 6973 7427  unc_list','list'
+0001d3f0: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
+0001d400: 6574 7572 6e20 4675 6e63 7469 6f6e 4c69  eturn FunctionLi
+0001d410: 7374 286f 626a 290a 2020 2020 2020 2020  st(obj).        
+0001d420: 656c 6966 2069 6478 5f74 7970 6520 696e  elif idx_type in
+0001d430: 205b 276c 6973 7427 2c27 7475 706c 6527   ['list','tuple'
+0001d440: 5d3a 2023 4f52 2049 6e64 6578 0a20 2020  ]: #OR Index.   
+0001d450: 2020 2020 2020 2020 2072 743d 5b5d 0a20           rt=[]. 
+0001d460: 2020 2020 2020 2020 2020 2023 2067 6574             # get
+0001d470: 2066 756e 6374 696f 6e20 6f62 6a65 6374   function object
+0001d480: 206f 6620 6669 6e64 696e 6720 7374 7269   of finding stri
+0001d490: 6e67 206e 616d 6520 696e 2074 6865 2063  ng name in the c
+0001d4a0: 6c61 7373 2f69 6e73 7461 6e63 650a 2020  lass/instance.  
+0001d4b0: 2020 2020 2020 2020 2020 666f 7220 6666            for ff
+0001d4c0: 2069 6e20 6e69 6478 3a0a 2020 2020 2020   in nidx:.      
+0001d4d0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+0001d4e0: 6e73 7461 6e63 6528 6666 2c73 7472 293a  nstance(ff,str):
+0001d4f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d500: 2020 2020 2069 6620 6666 2069 6e20 5b27       if ff in ['
+0001d510: 5f5f 6e61 6d65 5f5f 272c 276d 6574 686f  __name__','metho
+0001d520: 645f 6e61 6d65 272c 275f 5f6d 6574 686f  d_name','__metho
+0001d530: 645f 5f27 5d3a 2023 4765 7420 4d65 7468  d__']: #Get Meth
+0001d540: 6f64 206e 616d 6520 6c69 7374 2069 6e20  od name list in 
+0001d550: 636c 6173 730a 2020 2020 2020 2020 2020  class.          
+0001d560: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001d570: 206f 626a 5f74 7970 6520 696e 2028 2763   obj_type in ('c
+0001d580: 6c61 7373 6f62 6a27 293a 206f 626a 3d6f  lassobj'): obj=o
+0001d590: 626a 2829 2023 206d 6f76 6520 6672 6f6d  bj() # move from
+0001d5a0: 2043 4c41 5353 2074 6f20 434c 4153 5328   CLASS to CLASS(
+0001d5b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001d5c0: 2020 2020 2020 2020 2020 6966 2054 7970            if Typ
+0001d5d0: 6528 6f62 6a2c 2769 6e73 7461 6e63 6527  e(obj,'instance'
+0001d5e0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001d5f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001d600: 743d 7274 2b4d 6574 686f 6449 6e43 6c61  t=rt+MethodInCla
+0001d610: 7373 286f 626a 290a 2020 2020 2020 2020  ss(obj).        
+0001d620: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001d630: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001d640: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
+0001d650: 656e 6428 6765 7461 7474 7228 6f62 6a2c  end(getattr(obj,
+0001d660: 6666 2c64 6566 6175 6c74 2929 0a20 2020  ff,default)).   
+0001d670: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001d680: 4f75 7446 6f72 6d61 7428 7274 2c6f 7574  OutFormat(rt,out
+0001d690: 3d6f 7574 2c64 6566 6175 6c74 3d64 6566  =out,default=def
+0001d6a0: 6175 6c74 2c6f 7267 3d6f 626a 2c70 6565  ault,org=obj,pee
+0001d6b0: 6c3d 7065 656c 2c73 7472 6970 3d73 7472  l=peel,strip=str
+0001d6c0: 6970 290a 2020 2020 2020 2020 656c 6966  ip).        elif
+0001d6d0: 2069 6478 5f74 7970 6520 3d3d 2027 7374   idx_type == 'st
+0001d6e0: 7227 3a0a 2020 2020 2020 2020 2020 2020  r':.            
+0001d6f0: 6966 206f 626a 5f74 7970 6520 3d3d 2027  if obj_type == '
+0001d700: 636c 6173 736f 626a 273a 206f 626a 3d6f  classobj': obj=o
+0001d710: 626a 2829 2023 206d 6f76 6520 434c 4153  bj() # move CLAS
+0001d720: 5320 746f 2043 4c41 5353 2829 0a20 2020  S to CLASS().   
+0001d730: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001d740: 6765 7461 7474 7228 6f62 6a2c 6e69 6478  getattr(obj,nidx
+0001d750: 2c44 6566 6175 6c74 286f 626a 2c64 6566  ,Default(obj,def
+0001d760: 6175 6c74 2929 0a20 2020 2020 2020 2065  ault)).        e
+0001d770: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001d780: 2069 6620 5479 7065 286f 626a 2c27 636c   if Type(obj,'cl
+0001d790: 6173 736f 626a 2729 3a20 6f62 6a3d 6f62  assobj'): obj=ob
+0001d7a0: 6a28 2920 2320 6d6f 7665 2066 726f 6d20  j() # move from 
+0001d7b0: 434c 4153 5320 746f 2043 4c41 5353 2829  CLASS to CLASS()
+0001d7c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001d7d0: 6f6b 2069 7320 4661 6c73 653a 0a20 2020  ok is False:.   
+0001d7e0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001d7f0: 7572 6e20 6f62 6a2e 5f5f 6469 6374 5f5f  urn obj.__dict__
+0001d800: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0001d810: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0001d820: 2020 2072 6574 7572 6e20 4765 7428 6f62     return Get(ob
+0001d830: 6a2e 5f5f 6469 6374 5f5f 2c69 6478 2c64  j.__dict__,idx,d
+0001d840: 6566 6175 6c74 2c65 7272 2920 2320 636f  efault,err) # co
+0001d850: 6e76 6572 7465 6420 6f62 6a20 7769 7468  nverted obj with
+0001d860: 206f 7269 6769 6e61 6c20 6964 780a 2020   original idx.  
+0001d870: 2020 656c 6966 206f 626a 5f74 7970 6520    elif obj_type 
+0001d880: 696e 2028 2772 6573 706f 6e73 6527 293a  in ('response'):
+0001d890: 2023 2057 6562 2044 6174 610a 2020 2020   # Web Data.    
+0001d8a0: 2020 2020 6966 206f 6b3a 0a20 2020 2020      if ok:.     
+0001d8b0: 2020 2020 2020 2064 6566 205f 7765 625f         def _web_
+0001d8c0: 286f 626a 2c6e 6964 7829 3a0a 2020 2020  (obj,nidx):.    
+0001d8d0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0001d8e0: 6964 7820 696e 205b 2772 6327 2c27 7374  idx in ['rc','st
+0001d8f0: 6174 7573 272c 2763 6f64 6527 2c27 7374  atus','code','st
+0001d900: 6174 6527 2c27 7374 6174 7573 5f63 6f64  ate','status_cod
+0001d910: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
+0001d920: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001d930: 6f62 6a2e 7374 6174 7573 5f63 6f64 650a  obj.status_code.
+0001d940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d950: 656c 6966 206e 6964 7820 696e 205b 2764  elif nidx in ['d
+0001d960: 6174 6127 2c27 7661 6c75 6527 2c27 6a73  ata','value','js
+0001d970: 6f6e 275d 3a0a 2020 2020 2020 2020 2020  on']:.          
+0001d980: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+0001d990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d9a0: 2020 2020 2020 2072 6574 7572 6e20 466f         return Fo
+0001d9b0: 726d 4461 7461 286f 626a 2e74 6578 7429  rmData(obj.text)
+0001d9c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d9d0: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+0001d9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d9f0: 2020 2020 2069 6620 6572 7220 6973 2054       if err is T
+0001da00: 7275 653a 2072 6574 7572 6e20 4465 6661  rue: return Defa
+0001da10: 756c 7428 6f62 6a2c 6465 6661 756c 7429  ult(obj,default)
+0001da20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001da30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001da40: 6f62 6a2e 7465 7874 0a20 2020 2020 2020  obj.text.       
+0001da50: 2020 2020 2020 2020 2065 6c69 6620 6e69           elif ni
+0001da60: 6478 2069 6e20 5b27 7465 7874 272c 2773  dx in ['text','s
+0001da70: 7472 272c 2773 7472 696e 6727 5d3a 0a20  tr','string']:. 
+0001da80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001da90: 2020 2072 6574 7572 6e20 6f62 6a2e 7465     return obj.te
+0001daa0: 7874 0a20 2020 2020 2020 2020 2020 2020  xt.             
+0001dab0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0001dac0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001dad0: 7572 6e20 6f62 6a0a 2020 2020 2020 2020  urn obj.        
+0001dae0: 2020 2020 6966 2069 6478 5f74 7970 653d      if idx_type=
+0001daf0: 3d27 7374 7227 3a0a 2020 2020 2020 2020  ='str':.        
+0001db00: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+0001db10: 7765 625f 286f 626a 2c6e 6964 7829 0a20  web_(obj,nidx). 
+0001db20: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0001db30: 6964 785f 7479 7065 203d 3d20 276c 6973  idx_type == 'lis
+0001db40: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
+0001db50: 2020 2020 7274 3d5b 5d0a 2020 2020 2020      rt=[].      
+0001db60: 2020 2020 2020 2020 2020 666f 7220 696b            for ik
+0001db70: 6579 2069 6e20 6e69 6478 3a0a 2020 2020  ey in nidx:.    
+0001db80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001db90: 7274 2e61 7070 656e 6428 5f77 6562 5f28  rt.append(_web_(
+0001dba0: 6f62 6a2c 696b 6579 2929 0a20 2020 2020  obj,ikey)).     
+0001dbb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001dbc0: 6e20 4f75 7446 6f72 6d61 7428 7274 2c6f  n OutFormat(rt,o
+0001dbd0: 7574 3d6f 7574 2c64 6566 6175 6c74 3d64  ut=out,default=d
+0001dbe0: 6566 6175 6c74 2c6f 7267 3d6f 626a 2c70  efault,org=obj,p
+0001dbf0: 6565 6c3d 7065 656c 2c73 7472 6970 3d73  eel=peel,strip=s
+0001dc00: 7472 6970 290a 2020 2020 656c 6966 206f  trip).    elif o
+0001dc10: 626a 5f74 7970 6520 696e 2028 2772 6571  bj_type in ('req
+0001dc20: 7565 7374 2729 3a20 2320 5765 6220 4461  uest'): # Web Da
+0001dc30: 7461 320a 2020 2020 2020 2020 7274 3d5b  ta2.        rt=[
+0001dc40: 5d0a 2020 2020 2020 2020 6d65 7468 6f64  ].        method
+0001dc50: 3d6f 7074 732e 6765 7428 276d 6574 686f  =opts.get('metho
+0001dc60: 6427 2c4e 6f6e 6529 0a20 2020 2020 2020  d',None).       
+0001dc70: 2069 6620 4973 4e6f 6e65 286d 6574 686f   if IsNone(metho
+0001dc80: 6429 3a20 6d65 7468 6f64 3d6f 626a 2e6d  d): method=obj.m
+0001dc90: 6574 686f 642e 7570 7065 7228 290a 2020  ethod.upper().  
+0001dca0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+0001dcb0: 7461 6e63 6528 6d65 7468 6f64 2c73 7472  tance(method,str
+0001dcc0: 293a 206d 6574 686f 643d 6d65 7468 6f64  ): method=method
+0001dcd0: 2e75 7070 6572 2829 0a0a 2020 2020 2020  .upper()..      
+0001dce0: 2020 6966 206f 6b3a 0a20 2020 2020 2020    if ok:.       
+0001dcf0: 2020 2020 2064 6566 205f 7765 625f 6461       def _web_da
+0001dd00: 7461 286f 626a 2c6e 6b65 792c 6d65 7468  ta(obj,nkey,meth
+0001dd10: 6f64 2c64 6566 6175 6c74 293a 0a20 2020  od,default):.   
+0001dd20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001dd30: 6e6b 6579 2e6c 6f77 6572 2829 203d 3d20  nkey.lower() == 
+0001dd40: 276d 6574 686f 6427 3a0a 2020 2020 2020  'method':.      
+0001dd50: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001dd60: 7475 726e 206d 6574 686f 640a 2020 2020  turn method.    
+0001dd70: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+0001dd80: 6574 686f 643d 3d27 4745 5427 3a0a 2020  ethod=='GET':.  
+0001dd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dda0: 2020 7274 3d6f 626a 2e47 4554 2e67 6574    rt=obj.GET.get
+0001ddb0: 286e 6b65 7929 0a20 2020 2020 2020 2020  (nkey).         
+0001ddc0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0001ddd0: 7420 4973 4e6f 6e65 2872 7429 3a20 7265  t IsNone(rt): re
+0001dde0: 7475 726e 2072 740a 2020 2020 2020 2020  turn rt.        
+0001ddf0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001de00: 726e 2044 6566 6175 6c74 286f 626a 2c64  rn Default(obj,d
+0001de10: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
+0001de20: 2020 2020 2020 2020 656c 6966 206d 6574          elif met
+0001de30: 686f 643d 3d27 4649 4c45 273a 0a20 2020  hod=='FILE':.   
+0001de40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de50: 2072 743d 6f62 6a2e 4649 4c45 532e 6765   rt=obj.FILES.ge
+0001de60: 746c 6973 7428 6e6b 6579 2c64 6566 6175  tlist(nkey,defau
+0001de70: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
+0001de80: 2020 2020 2020 2020 6966 206e 6f74 2049          if not I
+0001de90: 734e 6f6e 6528 7274 293a 0a20 2020 2020  sNone(rt):.     
+0001dea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001deb0: 2020 2023 7265 7475 726e 204f 7574 466f     #return OutFo
+0001dec0: 726d 6174 2872 742c 6f75 743d 2772 6177  rmat(rt,out='raw
+0001ded0: 272c 7065 656c 3d70 6565 6c2c 7374 7269  ',peel=peel,stri
+0001dee0: 703d 7374 7269 702c 6465 6661 756c 743d  p=strip,default=
+0001def0: 6465 6661 756c 7429 0a20 2020 2020 2020  default).       
+0001df00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001df10: 2072 6574 7572 6e20 4f75 7446 6f72 6d61   return OutForma
+0001df20: 7428 7274 2c6f 7574 3d6f 7574 2c70 6565  t(rt,out=out,pee
+0001df30: 6c3d 7065 656c 2c73 7472 6970 3d73 7472  l=peel,strip=str
+0001df40: 6970 2c64 6566 6175 6c74 3d64 6566 6175  ip,default=defau
+0001df50: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
+0001df60: 2020 2020 2020 2020 2369 6620 6e6f 7420          #if not 
+0001df70: 4973 4e6f 6e65 2872 7429 3a20 7265 7475  IsNone(rt): retu
+0001df80: 726e 2072 740a 2020 2020 2020 2020 2020  rn rt.          
+0001df90: 2020 2020 2020 2020 2020 2372 743d 6f62            #rt=ob
+0001dfa0: 6a2e 4649 4c45 532e 6765 7428 6e6b 6579  j.FILES.get(nkey
+0001dfb0: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
+0001dfc0: 2020 2020 2020 2020 2020 2020 2020 2369                #i
+0001dfd0: 6620 6e6f 7420 4973 4e6f 6e65 2872 7429  f not IsNone(rt)
+0001dfe0: 3a20 7265 7475 726e 2072 740a 2020 2020  : return rt.    
+0001dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e000: 7265 7475 726e 2044 6566 6175 6c74 286f  return Default(o
+0001e010: 626a 2c64 6566 6175 6c74 290a 2020 2020  bj,default).    
+0001e020: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0001e030: 206d 6574 686f 643d 3d27 504f 5354 273a   method=='POST':
+0001e040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001e050: 2020 2020 2072 743d 6f62 6a2e 4649 4c45       rt=obj.FILE
+0001e060: 532e 6765 746c 6973 7428 6e6b 6579 290a  S.getlist(nkey).
+0001e070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e080: 2020 2020 2372 7432 3d6f 626a 2e46 494c      #rt2=obj.FIL
+0001e090: 4553 2e67 6574 286e 6b65 7929 0a20 2020  ES.get(nkey).   
+0001e0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e0b0: 2069 6620 6e6f 7420 4973 4e6f 6e65 2872   if not IsNone(r
+0001e0c0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+0001e0d0: 2020 2020 2020 2020 2020 2020 2372 6574              #ret
+0001e0e0: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
+0001e0f0: 2c6f 7574 3d27 7261 7727 2c70 6565 6c3d  ,out='raw',peel=
+0001e100: 7065 656c 2c73 7472 6970 3d73 7472 6970  peel,strip=strip
+0001e110: 2c64 6566 6175 6c74 3d64 6566 6175 6c74  ,default=default
+0001e120: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
 0001e130: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001e140: 205f 7765 625f 6461 7461 286f 626a 2c6e   _web_data(obj,n
-0001e150: 6964 782c 6d65 7468 6f64 2c64 6566 6175  idx,method,defau
-0001e160: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
-0001e170: 656c 6966 2069 6478 5f74 7970 6520 3d3d  elif idx_type ==
-0001e180: 2027 6c69 7374 273a 0a20 2020 2020 2020   'list':.       
-0001e190: 2020 2020 2020 2020 2072 743d 5b5d 0a20           rt=[]. 
-0001e1a0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001e1b0: 6f72 2069 2069 6e20 6e69 6478 3a0a 2020  or i in nidx:.  
-0001e1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e1d0: 2020 7274 2e61 7070 656e 6428 5f77 6562    rt.append(_web
-0001e1e0: 5f64 6174 6128 6f62 6a2c 692c 6d65 7468  _data(obj,i,meth
-0001e1f0: 6f64 2c64 6566 6175 6c74 2929 0a20 2020  od,default)).   
-0001e200: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001e210: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
-0001e220: 2c6f 7574 3d6f 7574 2c64 6566 6175 6c74  ,out=out,default
-0001e230: 3d64 6566 6175 6c74 2c6f 7267 3d6f 626a  =default,org=obj
-0001e240: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
-0001e250: 3d73 7472 6970 290a 2020 2020 656c 6966  =strip).    elif
-0001e260: 206f 626a 5f74 7970 6520 696e 2028 2749   obj_type in ('I
-0001e270: 6d6d 7574 6162 6c65 4d75 6c74 6944 6963  mmutableMultiDic
-0001e280: 7427 293a 2023 2046 6c61 736b 2057 6562  t'): # Flask Web
-0001e290: 2044 6174 610a 2020 2020 2020 2020 746d   Data.        tm
-0001e2a0: 703d 7b7d 0a20 2020 2020 2020 2069 6620  p={}.        if 
-0001e2b0: 6f62 6a3a 0a20 2020 2020 2020 2020 2020  obj:.           
-0001e2c0: 2066 6f72 2069 6920 696e 206f 626a 3a0a   for ii in obj:.
-0001e2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e2e0: 746d 705b 6969 5d3d 6f62 6a5b 6969 5d0a  tmp[ii]=obj[ii].
-0001e2f0: 2020 2020 2020 2020 7265 7475 726e 2047          return G
-0001e300: 6574 2874 6d70 2c69 6478 2c64 6566 6175  et(tmp,idx,defau
-0001e310: 6c74 2c65 7272 2920 0a20 2020 2065 6c69  lt,err) .    eli
-0001e320: 6620 6f62 6a5f 7479 7065 2069 6e20 2827  f obj_type in ('
-0001e330: 6b44 6963 7427 2c27 6b4c 6973 7427 2c27  kDict','kList','
-0001e340: 4449 4354 2729 3a20 0a20 2020 2020 2020  DICT'): .       
-0001e350: 2072 6574 7572 6e20 4765 7428 6f62 6a2e   return Get(obj.
-0001e360: 4765 7428 292c 6964 782c 6465 6661 756c  Get(),idx,defaul
-0001e370: 742c 6572 7229 200a 2020 2020 7265 7475  t,err) .    retu
-0001e380: 726e 204f 7574 466f 726d 6174 285b 5d2c  rn OutFormat([],
-0001e390: 6f75 743d 6f75 742c 6465 6661 756c 743d  out=out,default=
-0001e3a0: 6465 6661 756c 742c 6f72 673d 6f62 6a2c  default,org=obj,
-0001e3b0: 7065 656c 3d70 6565 6c2c 7374 7269 703d  peel=peel,strip=
-0001e3c0: 7374 7269 7029 0a0a 0a64 6566 2054 7279  strip)...def Try
-0001e3d0: 436f 6465 2863 6f64 652c 6465 6661 756c  Code(code,defaul
-0001e3e0: 743d 4661 6c73 652c 5f72 6574 7572 6e5f  t=False,_return_
-0001e3f0: 3d54 7275 6529 3a0a 2020 2020 2727 270a  =True):.    '''.
-0001e400: 2020 2020 5275 6e20 7374 7269 6e67 2063      Run string c
-0001e410: 6f64 650a 2020 2020 6465 6661 756c 7420  ode.    default 
-0001e420: 3a46 616c 7365 0a20 2020 205f 7265 7475  :False.    _retu
-0001e430: 726e 5f3a 2054 7275 653a 2072 6574 7572  rn_: True: retur
-0001e440: 6e20 6f75 7470 7574 2c20 4661 6c73 653a  n output, False:
-0001e450: 2070 7269 6e74 206f 6e20 7363 7265 656e   print on screen
-0001e460: 0a20 2020 2027 2727 0a20 2020 2069 6620  .    '''.    if 
-0001e470: 5479 7065 2863 6f64 652c 7374 7229 3a0a  Type(code,str):.
-0001e480: 2020 2020 2020 2020 6572 723d 4e6f 6e65          err=None
-0001e490: 0a20 2020 2020 2020 2072 743d 4e6f 6e65  .        rt=None
-0001e4a0: 0a20 2020 2020 2020 2069 6620 5f72 6574  .        if _ret
-0001e4b0: 7572 6e5f 3a0a 2020 2020 2020 2020 2020  urn_:.          
-0001e4c0: 2020 2320 6372 6561 7465 2066 696c 652d    # create file-
-0001e4d0: 6c69 6b65 2073 7472 696e 6720 746f 2063  like string to c
-0001e4e0: 6170 7475 7265 206f 7574 7075 740a 2020  apture output.  
-0001e4f0: 2020 2020 2020 2020 2020 636f 6465 4f75            codeOu
-0001e500: 7420 3d20 5374 7269 6e67 494f 2829 0a20  t = StringIO(). 
-0001e510: 2020 2020 2020 2020 2020 2063 6f64 6545             codeE
-0001e520: 7272 203d 2053 7472 696e 6749 4f28 290a  rr = StringIO().
-0001e530: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
-0001e540: 7374 646f 7574 2e66 6c75 7368 2829 0a20  stdout.flush(). 
-0001e550: 2020 2020 2020 2020 2020 2073 7973 2e73             sys.s
-0001e560: 7464 6572 722e 666c 7573 6828 290a 2020  tderr.flush().  
-0001e570: 2020 2020 2020 2020 2020 7379 732e 7374            sys.st
-0001e580: 646f 7574 3d63 6f64 654f 7574 2023 2053  dout=codeOut # S
-0001e590: 7461 6e64 6172 6420 4f75 7420 6672 6f6d  tandard Out from
-0001e5a0: 2061 7070 6c69 6361 7469 6f6e 0a20 2020   application.   
-0001e5b0: 2020 2020 2020 2020 2073 7973 2e73 7464           sys.std
-0001e5c0: 6572 723d 636f 6465 4572 7220 2320 5374  err=codeErr # St
-0001e5d0: 616e 6461 7264 2045 7272 6f72 2066 726f  andard Error fro
-0001e5e0: 6d20 6170 706c 6963 6174 696f 6e0a 2020  m application.  
-0001e5f0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-0001e600: 2020 2020 2020 2065 7865 6328 636f 6465         exec(code
-0001e610: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
-0001e620: 3a0a 2020 2020 2020 2020 2020 2020 2343  :.            #C
-0001e630: 6f64 6520 4572 726f 7220 6d65 7373 6167  ode Error messag
-0001e640: 650a 2020 2020 2020 2020 2020 2020 6572  e.            er
-0001e650: 723d 4578 6365 7074 4d65 7373 6167 6528  r=ExceptMessage(
-0001e660: 290a 2020 2020 2020 2020 6669 6e61 6c6c  ).        finall
-0001e670: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
-0001e680: 6620 5f72 6574 7572 6e5f 3a0a 2020 2020  f _return_:.    
-0001e690: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
-0001e6a0: 7374 646f 7574 2e66 6c75 7368 2829 0a20  stdout.flush(). 
-0001e6b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001e6c0: 7973 2e73 7464 6572 722e 666c 7573 6828  ys.stderr.flush(
-0001e6d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001e6e0: 2020 2372 6563 6f76 6572 2f72 6573 746f    #recover/resto
-0001e6f0: 7265 2073 7464 6f75 7420 616e 6420 7374  re stdout and st
-0001e700: 6465 7272 0a20 2020 2020 2020 2020 2020  derr.           
-0001e710: 2020 2020 2073 7973 2e73 7464 6f75 743d       sys.stdout=
-0001e720: 7379 732e 5f5f 7374 646f 7574 5f5f 0a20  sys.__stdout__. 
-0001e730: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001e740: 7973 2e73 7464 6572 723d 7379 732e 5f5f  ys.stderr=sys.__
-0001e750: 7374 6465 7272 5f5f 0a20 2020 2020 2020  stderr__.       
-0001e760: 2020 2020 2020 2020 2023 4765 7420 7661           #Get va
-0001e770: 6c75 6520 0a20 2020 2020 2020 2020 2020  lue .           
-0001e780: 2020 2020 2072 743d 636f 6465 4f75 742e       rt=codeOut.
-0001e790: 6765 7476 616c 7565 2829 0a20 2020 2020  getvalue().     
-0001e7a0: 2020 2020 2020 2020 2020 2065 723d 636f             er=co
-0001e7b0: 6465 4572 722e 6765 7476 616c 7565 2829  deErr.getvalue()
-0001e7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e7d0: 2023 436c 6f73 6520 494f 0a20 2020 2020   #Close IO.     
-0001e7e0: 2020 2020 2020 2020 2020 2063 6f64 654f             codeO
-0001e7f0: 7574 2e63 6c6f 7365 2829 0a20 2020 2020  ut.close().     
-0001e800: 2020 2020 2020 2020 2020 2063 6f64 6545             codeE
-0001e810: 7272 2e63 6c6f 7365 2829 0a20 2020 2020  rr.close().     
-0001e820: 2020 2020 2020 2069 6620 6572 723a 2023         if err: #
-0001e830: 436f 6465 2045 7272 6f72 0a20 2020 2020  Code Error.     
-0001e840: 2020 2020 2020 2020 2020 2069 6620 5f72             if _r
-0001e850: 6574 7572 6e5f 3a0a 2020 2020 2020 2020  eturn_:.        
-0001e860: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001e870: 726e 2046 616c 7365 2c72 742c 6572 720a  rn False,rt,err.
-0001e880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e890: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001e8a0: 2020 2020 2020 2020 2020 5374 6445 7272            StdErr
-0001e8b0: 2865 7272 290a 2020 2020 2020 2020 2020  (err).          
-0001e8c0: 2020 6966 205f 7265 7475 726e 5f3a 0a20    if _return_:. 
-0001e8d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001e8e0: 2053 7461 6e64 6172 6420 4f75 7420 616e   Standard Out an
-0001e8f0: 6420 4572 726f 720a 2020 2020 2020 2020  d Error.        
-0001e900: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-0001e910: 7275 652c 7274 2c65 720a 2020 2020 6966  rue,rt,er.    if
-0001e920: 205f 7265 7475 726e 5f3a 0a20 2020 2020   _return_:.     
-0001e930: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
-0001e940: 7274 2c27 4e6f 7420 5374 7269 6e67 2063  rt,'Not String c
-0001e950: 6f64 652e 2072 6571 7569 7265 6420 2a53  ode. required *S
-0001e960: 5452 494e 472a 2043 6f64 652e 2720 2023  TRING* Code.'  #
-0001e970: 4e6f 7420 6120 7374 7269 6e67 2063 6f64  Not a string cod
-0001e980: 650a 0a64 6566 2045 7863 6570 744d 6573  e..def ExceptMes
-0001e990: 7361 6765 286d 7367 3d27 272c 6465 6661  sage(msg='',defa
-0001e9a0: 756c 743d 4e6f 6e65 293a 0a20 2020 2027  ult=None):.    '
-0001e9b0: 2727 0a20 2020 2054 7279 3a0a 2020 2020  ''.    Try:.    
-0001e9c0: 2020 2041 4141 0a20 2020 2045 7863 6570     AAA.    Excep
-0001e9d0: 743a 0a20 2020 2020 2020 6572 723d 4578  t:.       err=Ex
-0001e9e0: 6365 7074 4d65 7373 6167 6528 2920 3d3e  ceptMessage() =>
-0001e9f0: 2049 6620 6578 6365 7074 696e 6720 7468   If excepting th
-0001ea00: 656e 2074 616b 656e 2065 7272 6f72 206f  en taken error o
-0001ea10: 7220 7472 6163 6562 6163 6b20 636f 6465  r traceback code
-0001ea20: 2061 6e64 2072 6574 7572 6e20 6974 0a20   and return it. 
-0001ea30: 2020 2027 2727 0a20 2020 2065 3d73 7973     '''.    e=sys
-0001ea40: 2e65 7863 5f69 6e66 6f28 295b 305d 0a20  .exc_info()[0]. 
-0001ea50: 2020 2065 723d 7472 6163 6562 6163 6b2e     er=traceback.
-0001ea60: 666f 726d 6174 5f65 7863 2829 0a20 2020  format_exc().   
-0001ea70: 2069 6620 6520 6f72 2065 7220 213d 2027   if e or er != '
-0001ea80: 4e6f 6e65 5479 7065 3a20 4e6f 6e65 5c6e  NoneType: None\n
-0001ea90: 273a 0a20 2020 2020 2020 2069 6620 6d73  ':.        if ms
-0001eaa0: 673a 0a20 2020 2020 2020 2020 2020 206d  g:.            m
-0001eab0: 7367 3d27 7b7d 5c6e 5c6e 7b7d 5c6e 5c6e  sg='{}\n\n{}\n\n
-0001eac0: 7b7d 272e 666f 726d 6174 286d 7367 2c65  {}'.format(msg,e
-0001ead0: 2c65 7229 0a20 2020 2020 2020 2065 6c73  ,er).        els
-0001eae0: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-0001eaf0: 7367 3d27 5c6e 5c6e 7b7d 5c6e 5c6e 7b7d  sg='\n\n{}\n\n{}
-0001eb00: 272e 666f 726d 6174 2865 2c65 7229 0a20  '.format(e,er). 
-0001eb10: 2020 2020 2020 2072 6574 7572 6e20 6d73         return ms
-0001eb20: 670a 2020 2020 7265 7475 726e 2064 6566  g.    return def
-0001eb30: 6175 6c74 0a0a 6465 6620 4970 5634 2869  ault..def IpV4(i
-0001eb40: 703d 4e6f 6e65 2c6f 7574 3d27 7374 7227  p=None,out='str'
-0001eb50: 2c64 6566 6175 6c74 3d46 616c 7365 2c70  ,default=False,p
-0001eb60: 6f72 743d 4e6f 6e65 2c62 6d63 3d46 616c  ort=None,bmc=Fal
-0001eb70: 7365 2c75 7365 643d 4661 6c73 652c 706f  se,used=False,po
-0001eb80: 6f6c 3d4e 6f6e 652c 7375 7070 6f72 745f  ol=None,support_
-0001eb90: 686f 7374 6e61 6d65 3d46 616c 7365 2c69  hostname=False,i
-0001eba0: 666e 616d 653d 4661 6c73 6529 3a0a 2020  fname=False):.  
-0001ebb0: 2020 2727 270a 2020 2020 6368 6563 6b2f    '''.    check/
-0001ebc0: 636f 6e76 6572 7420 4950 0a20 2020 2069  convert IP.    i
-0001ebd0: 7020 3a20 696e 742c 2073 7472 2c20 646f  p : int, str, do
-0001ebe0: 6d61 696e 6e61 6d65 2c20 6574 6865 726e  mainname, ethern
-0001ebf0: 6574 2064 6576 206e 616d 652c 204e 6f6e  et dev name, Non
-0001ec00: 650a 2020 2020 6f75 743a 0a20 2020 2020  e.    out:.     
-0001ec10: 2073 7472 203a 2064 6566 6175 6c74 203a   str : default :
-0001ec20: 2063 6f6e 7665 7274 2074 6f20 7878 782e   convert to xxx.
-0001ec30: 7878 782e 7878 782e 7878 7820 666f 726d  xxx.xxx.xxx form
-0001ec40: 6174 0a20 2020 2020 2069 6e74 203a 2063  at.      int : c
-0001ec50: 6f6e 7665 7274 2074 6f20 696e 7420 666f  onvert to int fo
-0001ec60: 726d 6174 0a20 2020 2020 2068 6578 203a  rmat.      hex :
-0001ec70: 2063 6f6e 7665 7274 2074 6f20 6865 7820   convert to hex 
-0001ec80: 666f 726d 6174 0a20 2020 2070 6f72 743a  format.    port:
-0001ec90: 2069 6620 796f 7520 7761 6e74 2063 6865   if you want che
-0001eca0: 636b 2074 6865 2049 5020 7769 7468 2070  ck the IP with p
-0001ecb0: 6f72 7420 7468 656e 2074 7970 650a 2020  ort then type.  
-0001ecc0: 2020 626d 6320 3a20 6465 6661 756c 7420    bmc : default 
-0001ecd0: 4661 6c73 652c 2054 7275 653a 2063 6865  False, True: che
-0001ece0: 636b 2042 4d43 2070 6f72 7420 2836 3233  ck BMC port (623
-0001ecf0: 2c36 3634 2c34 3433 290a 2020 2020 7265  ,664,443).    re
-0001ed00: 7475 726e 203a 2049 502c 2069 6620 6661  turn : IP, if fa
-0001ed10: 696c 2074 6865 6e20 7265 7475 726e 2064  il then return d
-0001ed20: 6566 6175 6c74 2076 616c 7565 0a20 2020  efault value.   
-0001ed30: 2075 7365 643a 0a20 2020 2020 202a 2072   used:.      * r
-0001ed40: 6571 7569 7265 6420 706f 7274 206f 7074  equired port opt
-0001ed50: 696f 6e2c 2062 7574 2063 6865 636b 2077  ion, but check w
-0001ed60: 6974 6820 7369 6e67 6c65 2070 6f72 740a  ith single port.
-0001ed70: 2020 2020 2020 4661 6c73 653a 2064 6566        False: def
-0001ed80: 6175 6c74 2028 6e6f 7420 6368 6563 6b29  ault (not check)
-0001ed90: 0a20 2020 2020 2054 7275 653a 2043 6865  .      True: Che
-0001eda0: 636b 2049 5020 616c 7265 6164 7920 7573  ck IP already us
-0001edb0: 6564 2074 6865 2070 6f72 7428 7265 7475  ed the port(retu
-0001edc0: 726e 2054 7275 6529 206f 7220 7374 696c  rn True) or stil
-0001edd0: 6c20 6176 6169 6c61 626c 6528 7265 7475  l available(retu
-0001ede0: 726e 2046 616c 7365 290a 2020 2020 706f  rn False).    po
-0001edf0: 6f6c 3a0a 2020 2020 2020 5475 706c 653a  ol:.      Tuple:
-0001ee00: 2069 6620 6769 7665 2049 5020 506f 6f6c   if give IP Pool
-0001ee10: 2873 7461 7274 2c65 6e64 2920 7468 656e  (start,end) then
-0001ee20: 2063 6865 636b 2074 6865 2049 5020 6973   check the IP is
-0001ee30: 2069 6e20 7468 6520 504f 4f4c 2072 616e   in the POOL ran
-0001ee40: 6765 206f 7220 6e6f 742e 0a20 2020 2020  ge or not..     
-0001ee50: 204c 6973 7420 3a20 4950 2069 7320 696e   List : IP is in
-0001ee60: 2074 6865 2050 6f6f 6c20 6c69 7374 0a20   the Pool list. 
-0001ee70: 2020 2069 666e 616d 653a 0a20 2020 2020     ifname:.     
-0001ee80: 2054 7275 653a 2069 7020 7769 6c6c 206e   True: ip will n
-0001ee90: 6574 776f 726b 2064 6576 6963 6520 6e61  etwork device na
-0001eea0: 6d65 2074 6865 6e20 6669 6e64 2069 7020  me then find ip 
-0001eeb0: 6164 6472 6573 730a 2020 2020 2727 270a  address.    '''.
-0001eec0: 2020 2020 6966 2069 666e 616d 6520 6973      if ifname is
-0001eed0: 2054 7275 653a 0a20 2020 2020 2020 2069   True:.        i
-0001eee0: 6620 6973 696e 7374 616e 6365 2869 702c  f isinstance(ip,
-0001eef0: 7374 7229 2061 6e64 2069 703a 0a20 2020  str) and ip:.   
-0001ef00: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0001ef10: 6f73 2e70 6174 682e 6973 6469 7228 272f  os.path.isdir('/
-0001ef20: 7379 732f 636c 6173 732f 6e65 742f 7b7d  sys/class/net/{}
-0001ef30: 272e 666f 726d 6174 2869 7029 293a 0a20  '.format(ip)):. 
-0001ef40: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001ef50: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-0001ef60: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-0001ef70: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001ef80: 203d 2073 6f63 6b65 742e 736f 636b 6574   = socket.socket
-0001ef90: 2873 6f63 6b65 742e 4146 5f49 4e45 542c  (socket.AF_INET,
-0001efa0: 2073 6f63 6b65 742e 534f 434b 5f44 4752   socket.SOCK_DGR
-0001efb0: 414d 290a 2020 2020 2020 2020 2020 2020  AM).            
-0001efc0: 2020 2020 7265 7475 726e 2073 6f63 6b65      return socke
-0001efd0: 742e 696e 6574 5f6e 746f 6128 6663 6e74  t.inet_ntoa(fcnt
-0001efe0: 6c2e 696f 6374 6c28 0a20 2020 2020 2020  l.ioctl(.       
-0001eff0: 2020 2020 2020 2020 2020 2020 2073 2e66               s.f
-0001f000: 696c 656e 6f28 292c 0a20 2020 2020 2020  ileno(),.       
-0001f010: 2020 2020 2020 2020 2020 2020 2030 7838               0x8
-0001f020: 3931 352c 2020 2320 5349 4f43 4749 4641  915,  # SIOCGIFA
-0001f030: 4444 520a 2020 2020 2020 2020 2020 2020  DDR.            
-0001f040: 2020 2020 2020 2020 7374 7275 6374 2e70          struct.p
-0001f050: 6163 6b28 2732 3536 7327 2c20 6970 5b3a  ack('256s', ip[:
-0001f060: 3135 5d29 0a20 2020 2020 2020 2020 2020  15]).           
-0001f070: 2020 2020 2029 5b32 303a 3234 5d29 0a20       )[20:24]). 
-0001f080: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-0001f090: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-0001f0a0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0001f0b0: 2020 2020 2020 2020 2020 2020 6465 765f              dev_
-0001f0c0: 696e 666f 3d6f 732e 706f 7065 6e28 2769  info=os.popen('i
-0001f0d0: 7020 6164 6472 2073 686f 7720 7b7d 272e  p addr show {}'.
-0001f0e0: 666f 726d 6174 2869 7029 290a 2020 2020  format(ip)).    
-0001f0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f100: 6966 2064 6576 5f69 6e66 6f3a 0a20 2020  if dev_info:.   
-0001f110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f120: 2020 2020 2066 6f75 6e64 5f69 703d 6465       found_ip=de
-0001f130: 765f 696e 666f 2e72 6561 6428 292e 7370  v_info.read().sp
-0001f140: 6c69 7428 2269 6e65 7420 2229 5b31 5d2e  lit("inet ")[1].
-0001f150: 7370 6c69 7428 222f 2229 5b30 5d0a 2020  split("/")[0].  
-0001f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f170: 2020 2020 2020 6465 765f 696e 666f 2e63        dev_info.c
-0001f180: 6c6f 7365 2829 0a20 2020 2020 2020 2020  lose().         
-0001f190: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001f1a0: 6574 7572 6e20 666f 756e 645f 6970 0a20  eturn found_ip. 
-0001f1b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001f1c0: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-0001f1d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001f1e0: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
-0001f1f0: 2020 7265 7475 726e 2073 6f63 6b65 742e    return socket.
-0001f200: 6765 7468 6f73 7462 796e 616d 6528 736f  gethostbyname(so
-0001f210: 636b 6574 2e67 6574 686f 7374 6e61 6d65  cket.gethostname
-0001f220: 2829 290a 0a20 2020 2069 6620 4973 4e6f  ())..    if IsNo
-0001f230: 6e65 2869 7029 3a20 7265 7475 726e 2064  ne(ip): return d
-0001f240: 6566 6175 6c74 2020 2020 0a0a 2020 2020  efault    ..    
-0001f250: 6465 6620 4973 4f70 656e 506f 7274 2869  def IsOpenPort(i
-0001f260: 702c 706f 7274 293a 0a20 2020 2020 2020  p,port):.       
-0001f270: 2027 2727 0a20 2020 2020 2020 2049 7420   '''.        It 
-0001f280: 636f 6e6e 6563 7469 6f6e 6162 6c65 2070  connectionable p
-0001f290: 6f72 7428 3f29 206c 696b 6520 6173 2073  ort(?) like as s
-0001f2a0: 7368 2c20 6674 702c 2074 656c 6e65 742c  sh, ftp, telnet,
-0001f2b0: 2077 6562 2c20 2e2e 2e0a 2020 2020 2020   web, ....      
-0001f2c0: 2020 2727 270a 2020 2020 2020 2020 7463    '''.        tc
-0001f2d0: 705f 736b 203d 2073 6f63 6b65 742e 736f  p_sk = socket.so
-0001f2e0: 636b 6574 2873 6f63 6b65 742e 4146 5f49  cket(socket.AF_I
-0001f2f0: 4e45 542c 2073 6f63 6b65 742e 534f 434b  NET, socket.SOCK
-0001f300: 5f53 5452 4541 4d29 0a20 2020 2020 2020  _STREAM).       
-0001f310: 2074 6370 5f73 6b2e 7365 7473 6f63 6b6f   tcp_sk.setsocko
-0001f320: 7074 2873 6f63 6b65 742e 534f 4c5f 534f  pt(socket.SOL_SO
-0001f330: 434b 4554 2c20 736f 636b 6574 2e53 4f5f  CKET, socket.SO_
-0001f340: 5245 5553 4541 4444 522c 2031 290a 2020  REUSEADDR, 1).  
-0001f350: 2020 2020 2020 7463 705f 736b 2e73 6574        tcp_sk.set
-0001f360: 7469 6d65 6f75 7428 3129 0a20 2020 2020  timeout(1).     
-0001f370: 2020 2072 743d 5b5d 0a20 2020 2020 2020     rt=[].       
-0001f380: 2066 6f72 2070 7420 696e 2070 6f72 743a   for pt in port:
-0001f390: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
-0001f3a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001f3b0: 2020 7463 705f 736b 2e63 6f6e 6e65 6374    tcp_sk.connect
-0001f3c0: 2828 6970 2c70 7429 290a 2020 2020 2020  ((ip,pt)).      
-0001f3d0: 2020 2020 2020 2020 2020 7463 705f 736b            tcp_sk
-0001f3e0: 2e63 6c6f 7365 2829 0a20 2020 2020 2020  .close().       
-0001f3f0: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
-0001f400: 6e64 2870 7429 0a20 2020 2020 2020 2020  nd(pt).         
-0001f410: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-0001f420: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
-0001f430: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-0001f440: 740a 2020 2020 6465 6620 4973 5573 6564  t.    def IsUsed
-0001f450: 506f 7274 2869 702c 706f 7274 293a 0a20  Port(ip,port):. 
-0001f460: 2020 2020 2020 2027 2727 0a20 2020 2020         '''.     
-0001f470: 2020 2054 6865 2049 5020 616c 7265 6164     The IP alread
-0001f480: 7920 7573 6564 2074 6865 2070 6f72 742c  y used the port,
-0001f490: 2069 7420 6a75 7374 2063 6865 636b 7570   it just checkup
-0001f4a0: 2061 7661 696c 6162 6c65 2070 6f72 7420   available port 
-0001f4b0: 6f72 2061 6c72 6561 6420 7573 6564 0a20  or alread used. 
-0001f4c0: 2020 2020 2020 2027 2727 0a20 2020 2020         '''.     
-0001f4d0: 2020 2069 6620 4973 4e6f 6e65 2869 702c     if IsNone(ip,
-0001f4e0: 6368 6b5f 7661 6c3d 5b4e 6f6e 652c 2727  chk_val=[None,''
-0001f4f0: 2c27 6c6f 6361 6c68 6f73 7427 2c27 6c6f  ,'localhost','lo
-0001f500: 6361 6c27 5d29 3a0a 2020 2020 2020 2020  cal']):.        
-0001f510: 2020 2020 6970 3d27 3132 372e 302e 302e      ip='127.0.0.
-0001f520: 3127 0a20 2020 2020 2020 2073 6f63 3d73  1'.        soc=s
-0001f530: 6f63 6b65 742e 736f 636b 6574 2873 6f63  ocket.socket(soc
-0001f540: 6b65 742e 4146 5f49 4e45 542c 2073 6f63  ket.AF_INET, soc
-0001f550: 6b65 742e 534f 434b 5f53 5452 4541 4d29  ket.SOCK_STREAM)
-0001f560: 0a20 2020 2020 2020 2072 743d 5b5d 0a20  .        rt=[]. 
-0001f570: 2020 2020 2020 2066 6f72 2070 7420 696e         for pt in
-0001f580: 2070 6f72 743a 0a20 2020 2020 2020 2020   port:.         
-0001f590: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0001f5a0: 2020 2020 2020 2020 6c6f 6361 7469 6f6e          location
-0001f5b0: 3d28 6970 2c70 7429 0a20 2020 2020 2020  =(ip,pt).       
-0001f5c0: 2020 2020 2020 2020 2072 743d 736f 632e           rt=soc.
-0001f5d0: 636f 6e6e 6563 745f 6578 286c 6f63 6174  connect_ex(locat
-0001f5e0: 696f 6e29 0a20 2020 2020 2020 2020 2020  ion).           
-0001f5f0: 2020 2020 2073 6f63 2e63 6c6f 7365 2829       soc.close()
-0001f600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f610: 2023 7274 3d3d 3020 7468 656e 2061 6c72   #rt==0 then alr
-0001f620: 6561 6479 2075 7365 640a 2020 2020 2020  eady used.      
-0001f630: 2020 2020 2020 2020 2020 6966 2072 7420            if rt 
-0001f640: 3d3d 2030 3a20 7274 2e61 7070 656e 6428  == 0: rt.append(
-0001f650: 7074 290a 2020 2020 2020 2020 2020 2020  pt).            
-0001f660: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
-0001f670: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
-0001f680: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
-0001f690: 2020 2069 6620 706f 7274 203d 3d20 2762     if port == 'b
-0001f6a0: 6d63 273a 0a20 2020 2020 2020 2062 6d63  mc':.        bmc
-0001f6b0: 3d54 7275 650a 2020 2020 2020 2020 706f  =True.        po
-0001f6c0: 7274 3d4e 6f6e 650a 2020 2020 6966 2062  rt=None.    if b
-0001f6d0: 6d63 3a20 2320 5570 6461 7465 2042 4d43  mc: # Update BMC
-0001f6e0: 2050 6f72 740a 2020 2020 2020 2020 6465   Port.        de
-0001f6f0: 6661 756c 745f 626d 635f 706f 7274 3d5b  fault_bmc_port=[
-0001f700: 3632 332c 3636 342c 3434 335d 0a20 2020  623,664,443].   
-0001f710: 2020 2020 2069 6620 6e6f 7420 4973 4e6f       if not IsNo
-0001f720: 6e65 2870 6f72 7429 3a0a 2020 2020 2020  ne(port):.      
-0001f730: 2020 2020 2020 706f 7274 3d49 6e74 2870        port=Int(p
-0001f740: 6f72 742c 6465 6661 756c 743d 4661 6c73  ort,default=Fals
-0001f750: 6529 0a20 2020 2020 2020 2020 2020 2069  e).            i
-0001f760: 6620 6973 696e 7374 616e 6365 2870 6f72  f isinstance(por
-0001f770: 742c 286c 6973 742c 7475 706c 6529 293a  t,(list,tuple)):
-0001f780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f790: 2066 6f72 2069 2069 6e20 706f 7274 3a0a   for i in port:.
-0001f7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f7b0: 2020 2020 6966 2069 206e 6f74 2069 6e20      if i not in 
-0001f7c0: 6465 6661 756c 745f 626d 635f 706f 7274  default_bmc_port
-0001f7d0: 3a20 6465 6661 756c 745f 626d 635f 706f  : default_bmc_po
-0001f7e0: 7274 2e61 7070 656e 6428 6929 0a20 2020  rt.append(i).   
-0001f7f0: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-0001f800: 696e 7374 616e 6365 2870 6f72 742c 696e  instance(port,in
-0001f810: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-0001f820: 2020 2020 6966 2070 6f72 7420 6e6f 7420      if port not 
-0001f830: 696e 2064 6566 6175 6c74 5f62 6d63 5f70  in default_bmc_p
-0001f840: 6f72 743a 0a20 2020 2020 2020 2020 2020  ort:.           
-0001f850: 2020 2020 2020 2020 2064 6566 6175 6c74           default
-0001f860: 5f62 6d63 5f70 6f72 742e 6170 7065 6e64  _bmc_port.append
-0001f870: 2870 6f72 7429 0a20 2020 2020 2020 2070  (port).        p
-0001f880: 6f72 743d 7475 706c 6528 6465 6661 756c  ort=tuple(defaul
-0001f890: 745f 626d 635f 706f 7274 290a 2020 2020  t_bmc_port).    
-0001f8a0: 6966 2070 6f72 743a 0a20 2020 2020 2020  if port:.       
-0001f8b0: 2070 6f72 743d 496e 7428 706f 7274 2c64   port=Int(port,d
-0001f8c0: 6566 6175 6c74 3d46 616c 7365 290a 2020  efault=False).  
-0001f8d0: 2020 2020 2020 6966 2070 6f72 7420 6973        if port is
-0001f8e0: 2046 616c 7365 3a20 7265 7475 726e 2064   False: return d
-0001f8f0: 6566 6175 6c74 0a20 2020 2020 2020 2069  efault.        i
-0001f900: 6620 5479 7065 2870 6f72 742c 696e 7429  f Type(port,int)
-0001f910: 3a20 706f 7274 3d5b 706f 7274 5d0a 2020  : port=[port].  
-0001f920: 2020 6970 5f69 6e74 3d4e 6f6e 650a 2020    ip_int=None.  
-0001f930: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0001f940: 6970 2c73 7472 293a 0a20 2020 2020 2020  ip,str):.       
-0001f950: 2069 7073 7472 3d69 702e 7374 7269 7028   ipstr=ip.strip(
-0001f960: 290a 2020 2020 2020 2020 6966 2027 3078  ).        if '0x
-0001f970: 2720 696e 2069 7073 7472 3a0a 2020 2020  ' in ipstr:.    
-0001f980: 2020 2020 2020 2020 6970 5f69 6e74 3d69          ip_int=i
-0001f990: 6e74 2869 7073 7472 2c31 3629 0a20 2020  nt(ipstr,16).   
-0001f9a0: 2020 2020 2065 6c69 6620 6970 7374 722e       elif ipstr.
-0001f9b0: 6973 6469 6769 7428 293a 0a20 2020 2020  isdigit():.     
-0001f9c0: 2020 2020 2020 2069 705f 696e 743d 696e         ip_int=in
-0001f9d0: 7428 6970 7374 7229 0a20 2020 2020 2020  t(ipstr).       
-0001f9e0: 2065 6c69 6620 272e 2720 696e 2069 7073   elif '.' in ips
-0001f9f0: 7472 3a0a 2020 2020 2020 2020 2020 2020  tr:.            
-0001fa00: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-0001fa10: 2020 2020 2069 705f 696e 743d 7374 7275       ip_int=stru
-0001fa20: 6374 2e75 6e70 6163 6b28 2221 4922 2c20  ct.unpack("!I", 
-0001fa30: 736f 636b 6574 2e69 6e65 745f 6174 6f6e  socket.inet_aton
-0001fa40: 2869 7073 7472 2929 5b30 5d20 2320 636f  (ipstr))[0] # co
-0001fa50: 6e76 6572 7420 496e 7420 4950 0a20 2020  nvert Int IP.   
-0001fa60: 2020 2020 2020 2020 2020 2020 2023 7374               #st
-0001fa70: 7275 6374 2e75 6e70 6163 6b28 2221 4c22  ruct.unpack("!L"
-0001fa80: 2c20 736f 636b 6574 2e69 6e65 745f 6174  , socket.inet_at
-0001fa90: 6f6e 2869 7029 295b 305d 0a20 2020 2020  on(ip))[0].     
-0001faa0: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
-0001fab0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001fac0: 6620 7375 7070 6f72 745f 686f 7374 6e61  f support_hostna
-0001fad0: 6d65 3a0a 2020 2020 2020 2020 2020 2020  me:.            
-0001fae0: 2020 2020 2020 2020 7472 793a 2023 2068          try: # h
-0001faf0: 6f73 746e 616d 6520 6162 632e 6465 6620  ostname abc.def 
-0001fb00: 6361 7365 0a20 2020 2020 2020 2020 2020  case.           
-0001fb10: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001fb20: 7572 6e20 4970 5634 2873 6f63 6b65 742e  urn IpV4(socket.
-0001fb30: 6765 7468 6f73 7462 796e 616d 6528 6970  gethostbyname(ip
-0001fb40: 7374 7229 2c6f 7574 3d6f 7574 2c64 6566  str),out=out,def
-0001fb50: 6175 6c74 3d64 6566 6175 6c74 2c70 6f72  ault=default,por
-0001fb60: 743d 706f 7274 2c62 6d63 3d62 6d63 2c75  t=port,bmc=bmc,u
-0001fb70: 7365 643d 7573 6564 2c70 6f6f 6c3d 706f  sed=used,pool=po
-0001fb80: 6f6c 290a 2020 2020 2020 2020 2020 2020  ol).            
-0001fb90: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-0001fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fbb0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-0001fbc0: 6566 6175 6c74 0a20 2020 2020 2020 2065  efault.        e
-0001fbd0: 6c69 6620 7375 7070 6f72 745f 686f 7374  lif support_host
-0001fbe0: 6e61 6d65 3a20 2320 686f 7374 6e61 6d65  name: # hostname
-0001fbf0: 2061 6263 2063 6173 650a 2020 2020 2020   abc case.      
-0001fc00: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-0001fc10: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001fc20: 6e20 4970 5634 2873 6f63 6b65 742e 6765  n IpV4(socket.ge
-0001fc30: 7468 6f73 7462 796e 616d 6528 6970 7374  thostbyname(ipst
-0001fc40: 7229 2c6f 7574 3d6f 7574 2c64 6566 6175  r),out=out,defau
-0001fc50: 6c74 3d64 6566 6175 6c74 2c70 6f72 743d  lt=default,port=
-0001fc60: 706f 7274 2c62 6d63 3d62 6d63 2c75 7365  port,bmc=bmc,use
-0001fc70: 643d 7573 6564 2c70 6f6f 6c3d 706f 6f6c  d=used,pool=pool
-0001fc80: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
-0001fc90: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-0001fca0: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-0001fcb0: 6175 6c74 0a20 2020 2065 6c69 6620 6973  ault.    elif is
-0001fcc0: 696e 7374 616e 6365 2869 702c 696e 7429  instance(ip,int)
-0001fcd0: 2061 6e64 206e 6f74 2069 7369 6e73 7461   and not isinsta
-0001fce0: 6e63 6528 6970 2c62 6f6f 6c29 3a0a 2020  nce(ip,bool):.  
-0001fcf0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-0001fd00: 2020 2020 2020 2073 6f63 6b65 742e 696e         socket.in
-0001fd10: 6574 5f6e 746f 6128 7374 7275 6374 2e70  et_ntoa(struct.p
-0001fd20: 6163 6b28 2221 4922 2c20 6970 2929 2023  ack("!I", ip)) #
-0001fd30: 2063 6865 636b 2069 6e74 2069 7320 4950   check int is IP
-0001fd40: 206f 7220 6e6f 740a 2020 2020 2020 2020   or not.        
-0001fd50: 2020 2020 6970 5f69 6e74 3d69 700a 2020      ip_int=ip.  
-0001fd60: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
-0001fd70: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001fd80: 2064 6566 6175 6c74 0a20 2020 2065 6c69   default.    eli
-0001fd90: 6620 6973 696e 7374 616e 6365 2869 702c  f isinstance(ip,
-0001fda0: 7479 7065 2868 6578 2929 3a0a 2020 2020  type(hex)):.    
-0001fdb0: 2020 2020 6970 5f69 6e74 3d69 6e74 2869      ip_int=int(i
-0001fdc0: 702c 3136 290a 0a20 2020 2069 6620 6e6f  p,16)..    if no
-0001fdd0: 7420 4973 4e6f 6e65 2869 705f 696e 7429  t IsNone(ip_int)
-0001fde0: 3a0a 2020 2020 2020 2020 7472 793a 0a20  :.        try:. 
-0001fdf0: 2020 2020 2020 2020 2020 2069 6620 6f75             if ou
-0001fe00: 7420 696e 205b 2769 6e74 272c 696e 745d  t in ['int',int]
-0001fe10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001fe20: 2020 7265 7475 726e 2069 705f 696e 740a    return ip_int.
-0001fe30: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0001fe40: 206f 7574 2069 6e20 5b27 6865 7827 2c68   out in ['hex',h
-0001fe50: 6578 5d3a 0a20 2020 2020 2020 2020 2020  ex]:.           
-0001fe60: 2020 2020 2072 6574 7572 6e20 6865 7828       return hex(
-0001fe70: 6970 5f69 6e74 290a 2020 2020 2020 2020  ip_int).        
-0001fe80: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-0001fe90: 6e63 6528 706f 6f6c 2c74 7570 6c65 293a  nce(pool,tuple):
-0001fea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001feb0: 2069 6620 6c65 6e28 706f 6f6c 2920 3d3d   if len(pool) ==
-0001fec0: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
-0001fed0: 2020 2020 2020 2020 7265 7475 726e 2049          return I
-0001fee0: 7056 3428 706f 6f6c 5b30 5d2c 6f75 743d  pV4(pool[0],out=
-0001fef0: 696e 7429 203c 3d20 6970 5f69 6e74 0a20  int) <= ip_int. 
-0001ff00: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001ff10: 6c69 6620 6c65 6e28 706f 6f6c 2920 3d3d  lif len(pool) ==
-0001ff20: 2032 3a0a 2020 2020 2020 2020 2020 2020   2:.            
-0001ff30: 2020 2020 2020 2020 6966 206e 6f74 2070          if not p
-0001ff40: 6f6f 6c5b 305d 2061 6e64 2070 6f6f 6c5b  ool[0] and pool[
-0001ff50: 315d 3a0a 2020 2020 2020 2020 2020 2020  1]:.            
-0001ff60: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001ff70: 726e 2069 705f 696e 7420 3c3d 2049 7056  rn ip_int <= IpV
-0001ff80: 3428 706f 6f6c 5b31 5d2c 6f75 743d 696e  4(pool[1],out=in
-0001ff90: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-0001ffa0: 2020 2020 2020 2065 6c69 6620 6e6f 7420         elif not 
-0001ffb0: 706f 6f6c 5b31 5d20 616e 6420 706f 6f6c  pool[1] and pool
-0001ffc0: 5b30 5d3a 0a20 2020 2020 2020 2020 2020  [0]:.           
-0001ffd0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001ffe0: 7572 6e20 4970 5634 2870 6f6f 6c5b 305d  urn IpV4(pool[0]
-0001fff0: 2c6f 7574 3d69 6e74 2920 3c3d 2069 705f  ,out=int) <= ip_
-00020000: 696e 7420 0a20 2020 2020 2020 2020 2020  int .           
-00020010: 2020 2020 2020 2020 2065 6c69 6620 706f           elif po
-00020020: 6f6c 5b30 5d20 616e 6420 706f 6f6c 5b31  ol[0] and pool[1
+0001e140: 204f 7574 466f 726d 6174 2872 742c 6f75   OutFormat(rt,ou
+0001e150: 743d 6f75 742c 7065 656c 3d70 6565 6c2c  t=out,peel=peel,
+0001e160: 7374 7269 703d 7374 7269 702c 6465 6661  strip=strip,defa
+0001e170: 756c 743d 6465 6661 756c 7429 0a20 2020  ult=default).   
+0001e180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e190: 2072 743d 6f62 6a2e 504f 5354 2e67 6574   rt=obj.POST.get
+0001e1a0: 6c69 7374 286e 6b65 7929 0a20 2020 2020  list(nkey).     
+0001e1b0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001e1c0: 7274 3d6f 626a 2e50 4f53 542e 6765 7428  rt=obj.POST.get(
+0001e1d0: 6e6b 6579 290a 2020 2020 2020 2020 2020  nkey).          
+0001e1e0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+0001e1f0: 2049 734e 6f6e 6528 7274 293a 0a20 2020   IsNone(rt):.   
+0001e200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e210: 2020 2020 2023 7265 7475 726e 204f 7574       #return Out
+0001e220: 466f 726d 6174 2872 742c 6f75 743d 2772  Format(rt,out='r
+0001e230: 6177 272c 7065 656c 3d70 6565 6c2c 7374  aw',peel=peel,st
+0001e240: 7269 703d 7374 7269 702c 6465 6661 756c  rip=strip,defaul
+0001e250: 743d 6465 6661 756c 7429 0a20 2020 2020  t=default).     
+0001e260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e270: 2020 2072 6574 7572 6e20 4f75 7446 6f72     return OutFor
+0001e280: 6d61 7428 7274 2c6f 7574 3d6f 7574 2c70  mat(rt,out=out,p
+0001e290: 6565 6c3d 7065 656c 2c73 7472 6970 3d73  eel=peel,strip=s
+0001e2a0: 7472 6970 2c64 6566 6175 6c74 3d64 6566  trip,default=def
+0001e2b0: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
+0001e2c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001e2d0: 2044 6566 6175 6c74 286f 626a 2c64 6566   Default(obj,def
+0001e2e0: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
+0001e2f0: 2020 6966 2069 6478 5f74 7970 6520 3d3d    if idx_type ==
+0001e300: 2027 7374 7227 3a0a 2020 2020 2020 2020   'str':.        
+0001e310: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+0001e320: 7765 625f 6461 7461 286f 626a 2c6e 6964  web_data(obj,nid
+0001e330: 782c 6d65 7468 6f64 2c64 6566 6175 6c74  x,method,default
+0001e340: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+0001e350: 6966 2069 6478 5f74 7970 6520 3d3d 2027  if idx_type == '
+0001e360: 6c69 7374 273a 0a20 2020 2020 2020 2020  list':.         
+0001e370: 2020 2020 2020 2072 743d 5b5d 0a20 2020         rt=[].   
+0001e380: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0001e390: 2069 2069 6e20 6e69 6478 3a0a 2020 2020   i in nidx:.    
+0001e3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e3b0: 7274 2e61 7070 656e 6428 5f77 6562 5f64  rt.append(_web_d
+0001e3c0: 6174 6128 6f62 6a2c 692c 6d65 7468 6f64  ata(obj,i,method
+0001e3d0: 2c64 6566 6175 6c74 2929 0a20 2020 2020  ,default)).     
+0001e3e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001e3f0: 6e20 4f75 7446 6f72 6d61 7428 7274 2c6f  n OutFormat(rt,o
+0001e400: 7574 3d6f 7574 2c64 6566 6175 6c74 3d64  ut=out,default=d
+0001e410: 6566 6175 6c74 2c6f 7267 3d6f 626a 2c70  efault,org=obj,p
+0001e420: 6565 6c3d 7065 656c 2c73 7472 6970 3d73  eel=peel,strip=s
+0001e430: 7472 6970 290a 2020 2020 656c 6966 206f  trip).    elif o
+0001e440: 626a 5f74 7970 6520 696e 2028 2749 6d6d  bj_type in ('Imm
+0001e450: 7574 6162 6c65 4d75 6c74 6944 6963 7427  utableMultiDict'
+0001e460: 293a 2023 2046 6c61 736b 2057 6562 2044  ): # Flask Web D
+0001e470: 6174 610a 2020 2020 2020 2020 746d 703d  ata.        tmp=
+0001e480: 7b7d 0a20 2020 2020 2020 2069 6620 6f62  {}.        if ob
+0001e490: 6a3a 0a20 2020 2020 2020 2020 2020 2066  j:.            f
+0001e4a0: 6f72 2069 6920 696e 206f 626a 3a0a 2020  or ii in obj:.  
+0001e4b0: 2020 2020 2020 2020 2020 2020 2020 746d                tm
+0001e4c0: 705b 6969 5d3d 6f62 6a5b 6969 5d0a 2020  p[ii]=obj[ii].  
+0001e4d0: 2020 2020 2020 7265 7475 726e 2047 6574        return Get
+0001e4e0: 2874 6d70 2c69 6478 2c64 6566 6175 6c74  (tmp,idx,default
+0001e4f0: 2c65 7272 2920 0a20 2020 2065 6c69 6620  ,err) .    elif 
+0001e500: 6f62 6a5f 7479 7065 2069 6e20 2827 6b44  obj_type in ('kD
+0001e510: 6963 7427 2c27 6b4c 6973 7427 2c27 4449  ict','kList','DI
+0001e520: 4354 2729 3a20 0a20 2020 2020 2020 2072  CT'): .        r
+0001e530: 6574 7572 6e20 4765 7428 6f62 6a2e 4765  eturn Get(obj.Ge
+0001e540: 7428 292c 6964 782c 6465 6661 756c 742c  t(),idx,default,
+0001e550: 6572 7229 200a 2020 2020 7265 7475 726e  err) .    return
+0001e560: 204f 7574 466f 726d 6174 285b 5d2c 6f75   OutFormat([],ou
+0001e570: 743d 6f75 742c 6465 6661 756c 743d 6465  t=out,default=de
+0001e580: 6661 756c 742c 6f72 673d 6f62 6a2c 7065  fault,org=obj,pe
+0001e590: 656c 3d70 6565 6c2c 7374 7269 703d 7374  el=peel,strip=st
+0001e5a0: 7269 7029 0a0a 0a64 6566 2054 7279 436f  rip)...def TryCo
+0001e5b0: 6465 2863 6f64 652c 6465 6661 756c 743d  de(code,default=
+0001e5c0: 4661 6c73 652c 5f72 6574 7572 6e5f 3d54  False,_return_=T
+0001e5d0: 7275 6529 3a0a 2020 2020 2727 270a 2020  rue):.    '''.  
+0001e5e0: 2020 5275 6e20 7374 7269 6e67 2063 6f64    Run string cod
+0001e5f0: 650a 2020 2020 6465 6661 756c 7420 3a46  e.    default :F
+0001e600: 616c 7365 0a20 2020 205f 7265 7475 726e  alse.    _return
+0001e610: 5f3a 2054 7275 653a 2072 6574 7572 6e20  _: True: return 
+0001e620: 6f75 7470 7574 2c20 4661 6c73 653a 2070  output, False: p
+0001e630: 7269 6e74 206f 6e20 7363 7265 656e 0a20  rint on screen. 
+0001e640: 2020 2027 2727 0a20 2020 2069 6620 5479     '''.    if Ty
+0001e650: 7065 2863 6f64 652c 7374 7229 3a0a 2020  pe(code,str):.  
+0001e660: 2020 2020 2020 6572 723d 4e6f 6e65 0a20        err=None. 
+0001e670: 2020 2020 2020 2072 743d 4e6f 6e65 0a20         rt=None. 
+0001e680: 2020 2020 2020 2069 6620 5f72 6574 7572         if _retur
+0001e690: 6e5f 3a0a 2020 2020 2020 2020 2020 2020  n_:.            
+0001e6a0: 2320 6372 6561 7465 2066 696c 652d 6c69  # create file-li
+0001e6b0: 6b65 2073 7472 696e 6720 746f 2063 6170  ke string to cap
+0001e6c0: 7475 7265 206f 7574 7075 740a 2020 2020  ture output.    
+0001e6d0: 2020 2020 2020 2020 636f 6465 4f75 7420          codeOut 
+0001e6e0: 3d20 5374 7269 6e67 494f 2829 0a20 2020  = StringIO().   
+0001e6f0: 2020 2020 2020 2020 2063 6f64 6545 7272           codeErr
+0001e700: 203d 2053 7472 696e 6749 4f28 290a 2020   = StringIO().  
+0001e710: 2020 2020 2020 2020 2020 7379 732e 7374            sys.st
+0001e720: 646f 7574 2e66 6c75 7368 2829 0a20 2020  dout.flush().   
+0001e730: 2020 2020 2020 2020 2073 7973 2e73 7464           sys.std
+0001e740: 6572 722e 666c 7573 6828 290a 2020 2020  err.flush().    
+0001e750: 2020 2020 2020 2020 7379 732e 7374 646f          sys.stdo
+0001e760: 7574 3d63 6f64 654f 7574 2023 2053 7461  ut=codeOut # Sta
+0001e770: 6e64 6172 6420 4f75 7420 6672 6f6d 2061  ndard Out from a
+0001e780: 7070 6c69 6361 7469 6f6e 0a20 2020 2020  pplication.     
+0001e790: 2020 2020 2020 2073 7973 2e73 7464 6572         sys.stder
+0001e7a0: 723d 636f 6465 4572 7220 2320 5374 616e  r=codeErr # Stan
+0001e7b0: 6461 7264 2045 7272 6f72 2066 726f 6d20  dard Error from 
+0001e7c0: 6170 706c 6963 6174 696f 6e0a 2020 2020  application.    
+0001e7d0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0001e7e0: 2020 2020 2065 7865 6328 636f 6465 290a       exec(code).
+0001e7f0: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+0001e800: 2020 2020 2020 2020 2020 2020 2343 6f64              #Cod
+0001e810: 6520 4572 726f 7220 6d65 7373 6167 650a  e Error message.
+0001e820: 2020 2020 2020 2020 2020 2020 6572 723d              err=
+0001e830: 4578 6365 7074 4d65 7373 6167 6528 290a  ExceptMessage().
+0001e840: 2020 2020 2020 2020 6669 6e61 6c6c 793a          finally:
+0001e850: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001e860: 5f72 6574 7572 6e5f 3a0a 2020 2020 2020  _return_:.      
+0001e870: 2020 2020 2020 2020 2020 7379 732e 7374            sys.st
+0001e880: 646f 7574 2e66 6c75 7368 2829 0a20 2020  dout.flush().   
+0001e890: 2020 2020 2020 2020 2020 2020 2073 7973               sys
+0001e8a0: 2e73 7464 6572 722e 666c 7573 6828 290a  .stderr.flush().
+0001e8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e8c0: 2372 6563 6f76 6572 2f72 6573 746f 7265  #recover/restore
+0001e8d0: 2073 7464 6f75 7420 616e 6420 7374 6465   stdout and stde
+0001e8e0: 7272 0a20 2020 2020 2020 2020 2020 2020  rr.             
+0001e8f0: 2020 2073 7973 2e73 7464 6f75 743d 7379     sys.stdout=sy
+0001e900: 732e 5f5f 7374 646f 7574 5f5f 0a20 2020  s.__stdout__.   
+0001e910: 2020 2020 2020 2020 2020 2020 2073 7973               sys
+0001e920: 2e73 7464 6572 723d 7379 732e 5f5f 7374  .stderr=sys.__st
+0001e930: 6465 7272 5f5f 0a20 2020 2020 2020 2020  derr__.         
+0001e940: 2020 2020 2020 2023 4765 7420 7661 6c75         #Get valu
+0001e950: 6520 0a20 2020 2020 2020 2020 2020 2020  e .             
+0001e960: 2020 2072 743d 636f 6465 4f75 742e 6765     rt=codeOut.ge
+0001e970: 7476 616c 7565 2829 0a20 2020 2020 2020  tvalue().       
+0001e980: 2020 2020 2020 2020 2065 723d 636f 6465           er=code
+0001e990: 4572 722e 6765 7476 616c 7565 2829 0a20  Err.getvalue(). 
+0001e9a0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001e9b0: 436c 6f73 6520 494f 0a20 2020 2020 2020  Close IO.       
+0001e9c0: 2020 2020 2020 2020 2063 6f64 654f 7574           codeOut
+0001e9d0: 2e63 6c6f 7365 2829 0a20 2020 2020 2020  .close().       
+0001e9e0: 2020 2020 2020 2020 2063 6f64 6545 7272           codeErr
+0001e9f0: 2e63 6c6f 7365 2829 0a20 2020 2020 2020  .close().       
+0001ea00: 2020 2020 2069 6620 6572 723a 2023 436f       if err: #Co
+0001ea10: 6465 2045 7272 6f72 0a20 2020 2020 2020  de Error.       
+0001ea20: 2020 2020 2020 2020 2069 6620 5f72 6574           if _ret
+0001ea30: 7572 6e5f 3a0a 2020 2020 2020 2020 2020  urn_:.          
+0001ea40: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001ea50: 2046 616c 7365 2c72 742c 6572 720a 2020   False,rt,err.  
+0001ea60: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0001ea70: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0001ea80: 2020 2020 2020 2020 5374 6445 7272 2865          StdErr(e
+0001ea90: 7272 290a 2020 2020 2020 2020 2020 2020  rr).            
+0001eaa0: 6966 205f 7265 7475 726e 5f3a 0a20 2020  if _return_:.   
+0001eab0: 2020 2020 2020 2020 2020 2020 2023 2053               # S
+0001eac0: 7461 6e64 6172 6420 4f75 7420 616e 6420  tandard Out and 
+0001ead0: 4572 726f 720a 2020 2020 2020 2020 2020  Error.          
+0001eae0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+0001eaf0: 652c 7274 2c65 720a 2020 2020 6966 205f  e,rt,er.    if _
+0001eb00: 7265 7475 726e 5f3a 0a20 2020 2020 2020  return_:.       
+0001eb10: 2072 6574 7572 6e20 4661 6c73 652c 7274   return False,rt
+0001eb20: 2c27 4e6f 7420 5374 7269 6e67 2063 6f64  ,'Not String cod
+0001eb30: 652e 2072 6571 7569 7265 6420 2a53 5452  e. required *STR
+0001eb40: 494e 472a 2043 6f64 652e 2720 2023 4e6f  ING* Code.'  #No
+0001eb50: 7420 6120 7374 7269 6e67 2063 6f64 650a  t a string code.
+0001eb60: 0a64 6566 2045 7863 6570 744d 6573 7361  .def ExceptMessa
+0001eb70: 6765 286d 7367 3d27 272c 6465 6661 756c  ge(msg='',defaul
+0001eb80: 743d 4e6f 6e65 293a 0a20 2020 2027 2727  t=None):.    '''
+0001eb90: 0a20 2020 2054 7279 3a0a 2020 2020 2020  .    Try:.      
+0001eba0: 2041 4141 0a20 2020 2045 7863 6570 743a   AAA.    Except:
+0001ebb0: 0a20 2020 2020 2020 6572 723d 4578 6365  .       err=Exce
+0001ebc0: 7074 4d65 7373 6167 6528 2920 3d3e 2049  ptMessage() => I
+0001ebd0: 6620 6578 6365 7074 696e 6720 7468 656e  f excepting then
+0001ebe0: 2074 616b 656e 2065 7272 6f72 206f 7220   taken error or 
+0001ebf0: 7472 6163 6562 6163 6b20 636f 6465 2061  traceback code a
+0001ec00: 6e64 2072 6574 7572 6e20 6974 0a20 2020  nd return it.   
+0001ec10: 2027 2727 0a20 2020 2065 3d73 7973 2e65   '''.    e=sys.e
+0001ec20: 7863 5f69 6e66 6f28 295b 305d 0a20 2020  xc_info()[0].   
+0001ec30: 2065 723d 7472 6163 6562 6163 6b2e 666f   er=traceback.fo
+0001ec40: 726d 6174 5f65 7863 2829 0a20 2020 2069  rmat_exc().    i
+0001ec50: 6620 6520 6f72 2065 7220 213d 2027 4e6f  f e or er != 'No
+0001ec60: 6e65 5479 7065 3a20 4e6f 6e65 5c6e 273a  neType: None\n':
+0001ec70: 0a20 2020 2020 2020 2069 6620 6d73 673a  .        if msg:
+0001ec80: 0a20 2020 2020 2020 2020 2020 206d 7367  .            msg
+0001ec90: 3d27 7b7d 5c6e 5c6e 7b7d 5c6e 5c6e 7b7d  ='{}\n\n{}\n\n{}
+0001eca0: 272e 666f 726d 6174 286d 7367 2c65 2c65  '.format(msg,e,e
+0001ecb0: 7229 0a20 2020 2020 2020 2065 6c73 653a  r).        else:
+0001ecc0: 0a20 2020 2020 2020 2020 2020 206d 7367  .            msg
+0001ecd0: 3d27 5c6e 5c6e 7b7d 5c6e 5c6e 7b7d 272e  ='\n\n{}\n\n{}'.
+0001ece0: 666f 726d 6174 2865 2c65 7229 0a20 2020  format(e,er).   
+0001ecf0: 2020 2020 2072 6574 7572 6e20 6d73 670a       return msg.
+0001ed00: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+0001ed10: 6c74 0a0a 6465 6620 4970 5634 2869 703d  lt..def IpV4(ip=
+0001ed20: 4e6f 6e65 2c6f 7574 3d27 7374 7227 2c64  None,out='str',d
+0001ed30: 6566 6175 6c74 3d46 616c 7365 2c70 6f72  efault=False,por
+0001ed40: 743d 4e6f 6e65 2c62 6d63 3d46 616c 7365  t=None,bmc=False
+0001ed50: 2c75 7365 643d 4661 6c73 652c 706f 6f6c  ,used=False,pool
+0001ed60: 3d4e 6f6e 652c 7375 7070 6f72 745f 686f  =None,support_ho
+0001ed70: 7374 6e61 6d65 3d46 616c 7365 2c69 666e  stname=False,ifn
+0001ed80: 616d 653d 4661 6c73 6529 3a0a 2020 2020  ame=False):.    
+0001ed90: 2727 270a 2020 2020 6368 6563 6b2f 636f  '''.    check/co
+0001eda0: 6e76 6572 7420 4950 0a20 2020 2069 7020  nvert IP.    ip 
+0001edb0: 3a20 696e 742c 2073 7472 2c20 646f 6d61  : int, str, doma
+0001edc0: 696e 6e61 6d65 2c20 6574 6865 726e 6574  inname, ethernet
+0001edd0: 2064 6576 206e 616d 652c 204e 6f6e 650a   dev name, None.
+0001ede0: 2020 2020 6f75 743a 0a20 2020 2020 2073      out:.      s
+0001edf0: 7472 203a 2064 6566 6175 6c74 203a 2063  tr : default : c
+0001ee00: 6f6e 7665 7274 2074 6f20 7878 782e 7878  onvert to xxx.xx
+0001ee10: 782e 7878 782e 7878 7820 666f 726d 6174  x.xxx.xxx format
+0001ee20: 0a20 2020 2020 2069 6e74 203a 2063 6f6e  .      int : con
+0001ee30: 7665 7274 2074 6f20 696e 7420 666f 726d  vert to int form
+0001ee40: 6174 0a20 2020 2020 2068 6578 203a 2063  at.      hex : c
+0001ee50: 6f6e 7665 7274 2074 6f20 6865 7820 666f  onvert to hex fo
+0001ee60: 726d 6174 0a20 2020 2070 6f72 743a 2069  rmat.    port: i
+0001ee70: 6620 796f 7520 7761 6e74 2063 6865 636b  f you want check
+0001ee80: 2074 6865 2049 5020 7769 7468 2070 6f72   the IP with por
+0001ee90: 7420 7468 656e 2074 7970 650a 2020 2020  t then type.    
+0001eea0: 626d 6320 3a20 6465 6661 756c 7420 4661  bmc : default Fa
+0001eeb0: 6c73 652c 2054 7275 653a 2063 6865 636b  lse, True: check
+0001eec0: 2042 4d43 2070 6f72 7420 2836 3233 2c36   BMC port (623,6
+0001eed0: 3634 2c34 3433 290a 2020 2020 7265 7475  64,443).    retu
+0001eee0: 726e 203a 2049 502c 2069 6620 6661 696c  rn : IP, if fail
+0001eef0: 2074 6865 6e20 7265 7475 726e 2064 6566   then return def
+0001ef00: 6175 6c74 2076 616c 7565 0a20 2020 2075  ault value.    u
+0001ef10: 7365 643a 0a20 2020 2020 202a 2072 6571  sed:.      * req
+0001ef20: 7569 7265 6420 706f 7274 206f 7074 696f  uired port optio
+0001ef30: 6e2c 2062 7574 2063 6865 636b 2077 6974  n, but check wit
+0001ef40: 6820 7369 6e67 6c65 2070 6f72 740a 2020  h single port.  
+0001ef50: 2020 2020 4661 6c73 653a 2064 6566 6175      False: defau
+0001ef60: 6c74 2028 6e6f 7420 6368 6563 6b29 0a20  lt (not check). 
+0001ef70: 2020 2020 2054 7275 653a 2043 6865 636b       True: Check
+0001ef80: 2049 5020 616c 7265 6164 7920 7573 6564   IP already used
+0001ef90: 2074 6865 2070 6f72 7428 7265 7475 726e   the port(return
+0001efa0: 2054 7275 6529 206f 7220 7374 696c 6c20   True) or still 
+0001efb0: 6176 6169 6c61 626c 6528 7265 7475 726e  available(return
+0001efc0: 2046 616c 7365 290a 2020 2020 706f 6f6c   False).    pool
+0001efd0: 3a0a 2020 2020 2020 5475 706c 653a 2069  :.      Tuple: i
+0001efe0: 6620 6769 7665 2049 5020 506f 6f6c 2873  f give IP Pool(s
+0001eff0: 7461 7274 2c65 6e64 2920 7468 656e 2063  tart,end) then c
+0001f000: 6865 636b 2074 6865 2049 5020 6973 2069  heck the IP is i
+0001f010: 6e20 7468 6520 504f 4f4c 2072 616e 6765  n the POOL range
+0001f020: 206f 7220 6e6f 742e 0a20 2020 2020 204c   or not..      L
+0001f030: 6973 7420 3a20 4950 2069 7320 696e 2074  ist : IP is in t
+0001f040: 6865 2050 6f6f 6c20 6c69 7374 0a20 2020  he Pool list.   
+0001f050: 2069 666e 616d 653a 0a20 2020 2020 2054   ifname:.      T
+0001f060: 7275 653a 2069 7020 7769 6c6c 206e 6574  rue: ip will net
+0001f070: 776f 726b 2064 6576 6963 6520 6e61 6d65  work device name
+0001f080: 2074 6865 6e20 6669 6e64 2069 7020 6164   then find ip ad
+0001f090: 6472 6573 730a 2020 2020 2727 270a 2020  dress.    '''.  
+0001f0a0: 2020 6966 2069 666e 616d 6520 6973 2054    if ifname is T
+0001f0b0: 7275 653a 0a20 2020 2020 2020 2069 6620  rue:.        if 
+0001f0c0: 6973 696e 7374 616e 6365 2869 702c 7374  isinstance(ip,st
+0001f0d0: 7229 2061 6e64 2069 703a 0a20 2020 2020  r) and ip:.     
+0001f0e0: 2020 2020 2020 2069 6620 6e6f 7420 6f73         if not os
+0001f0f0: 2e70 6174 682e 6973 6469 7228 272f 7379  .path.isdir('/sy
+0001f100: 732f 636c 6173 732f 6e65 742f 7b7d 272e  s/class/net/{}'.
+0001f110: 666f 726d 6174 2869 7029 293a 0a20 2020  format(ip)):.   
+0001f120: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001f130: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
+0001f140: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+0001f150: 2020 2020 2020 2020 2020 2020 2073 203d               s =
+0001f160: 2073 6f63 6b65 742e 736f 636b 6574 2873   socket.socket(s
+0001f170: 6f63 6b65 742e 4146 5f49 4e45 542c 2073  ocket.AF_INET, s
+0001f180: 6f63 6b65 742e 534f 434b 5f44 4752 414d  ocket.SOCK_DGRAM
+0001f190: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001f1a0: 2020 7265 7475 726e 2073 6f63 6b65 742e    return socket.
+0001f1b0: 696e 6574 5f6e 746f 6128 6663 6e74 6c2e  inet_ntoa(fcntl.
+0001f1c0: 696f 6374 6c28 0a20 2020 2020 2020 2020  ioctl(.         
+0001f1d0: 2020 2020 2020 2020 2020 2073 2e66 696c             s.fil
+0001f1e0: 656e 6f28 292c 0a20 2020 2020 2020 2020  eno(),.         
+0001f1f0: 2020 2020 2020 2020 2020 2030 7838 3931             0x891
+0001f200: 352c 2020 2320 5349 4f43 4749 4641 4444  5,  # SIOCGIFADD
+0001f210: 520a 2020 2020 2020 2020 2020 2020 2020  R.              
+0001f220: 2020 2020 2020 7374 7275 6374 2e70 6163        struct.pac
+0001f230: 6b28 2732 3536 7327 2c20 6970 5b3a 3135  k('256s', ip[:15
+0001f240: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+0001f250: 2020 2029 5b32 303a 3234 5d29 0a20 2020     )[20:24]).   
+0001f260: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+0001f270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f280: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+0001f290: 2020 2020 2020 2020 2020 6465 765f 696e            dev_in
+0001f2a0: 666f 3d6f 732e 706f 7065 6e28 2769 7020  fo=os.popen('ip 
+0001f2b0: 6164 6472 2073 686f 7720 7b7d 272e 666f  addr show {}'.fo
+0001f2c0: 726d 6174 2869 7029 290a 2020 2020 2020  rmat(ip)).      
+0001f2d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001f2e0: 2064 6576 5f69 6e66 6f3a 0a20 2020 2020   dev_info:.     
+0001f2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f300: 2020 2066 6f75 6e64 5f69 703d 6465 765f     found_ip=dev_
+0001f310: 696e 666f 2e72 6561 6428 292e 7370 6c69  info.read().spli
+0001f320: 7428 2269 6e65 7420 2229 5b31 5d2e 7370  t("inet ")[1].sp
+0001f330: 6c69 7428 222f 2229 5b30 5d0a 2020 2020  lit("/")[0].    
+0001f340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f350: 2020 2020 6465 765f 696e 666f 2e63 6c6f      dev_info.clo
+0001f360: 7365 2829 0a20 2020 2020 2020 2020 2020  se().           
+0001f370: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001f380: 7572 6e20 666f 756e 645f 6970 0a20 2020  urn found_ip.   
+0001f390: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+0001f3a0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+0001f3b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001f3c0: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+0001f3d0: 7265 7475 726e 2073 6f63 6b65 742e 6765  return socket.ge
+0001f3e0: 7468 6f73 7462 796e 616d 6528 736f 636b  thostbyname(sock
+0001f3f0: 6574 2e67 6574 686f 7374 6e61 6d65 2829  et.gethostname()
+0001f400: 290a 0a20 2020 2069 6620 4973 4e6f 6e65  )..    if IsNone
+0001f410: 2869 7029 3a20 7265 7475 726e 2064 6566  (ip): return def
+0001f420: 6175 6c74 2020 2020 0a0a 2020 2020 6465  ault    ..    de
+0001f430: 6620 4973 4f70 656e 506f 7274 2869 702c  f IsOpenPort(ip,
+0001f440: 706f 7274 293a 0a20 2020 2020 2020 2027  port):.        '
+0001f450: 2727 0a20 2020 2020 2020 2049 7420 636f  ''.        It co
+0001f460: 6e6e 6563 7469 6f6e 6162 6c65 2070 6f72  nnectionable por
+0001f470: 7428 3f29 206c 696b 6520 6173 2073 7368  t(?) like as ssh
+0001f480: 2c20 6674 702c 2074 656c 6e65 742c 2077  , ftp, telnet, w
+0001f490: 6562 2c20 2e2e 2e0a 2020 2020 2020 2020  eb, ....        
+0001f4a0: 2727 270a 2020 2020 2020 2020 7463 705f  '''.        tcp_
+0001f4b0: 736b 203d 2073 6f63 6b65 742e 736f 636b  sk = socket.sock
+0001f4c0: 6574 2873 6f63 6b65 742e 4146 5f49 4e45  et(socket.AF_INE
+0001f4d0: 542c 2073 6f63 6b65 742e 534f 434b 5f53  T, socket.SOCK_S
+0001f4e0: 5452 4541 4d29 0a20 2020 2020 2020 2074  TREAM).        t
+0001f4f0: 6370 5f73 6b2e 7365 7473 6f63 6b6f 7074  cp_sk.setsockopt
+0001f500: 2873 6f63 6b65 742e 534f 4c5f 534f 434b  (socket.SOL_SOCK
+0001f510: 4554 2c20 736f 636b 6574 2e53 4f5f 5245  ET, socket.SO_RE
+0001f520: 5553 4541 4444 522c 2031 290a 2020 2020  USEADDR, 1).    
+0001f530: 2020 2020 7463 705f 736b 2e73 6574 7469      tcp_sk.setti
+0001f540: 6d65 6f75 7428 3129 0a20 2020 2020 2020  meout(1).       
+0001f550: 2072 743d 5b5d 0a20 2020 2020 2020 2066   rt=[].        f
+0001f560: 6f72 2070 7420 696e 2070 6f72 743a 0a20  or pt in port:. 
+0001f570: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+0001f580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f590: 7463 705f 736b 2e63 6f6e 6e65 6374 2828  tcp_sk.connect((
+0001f5a0: 6970 2c70 7429 290a 2020 2020 2020 2020  ip,pt)).        
+0001f5b0: 2020 2020 2020 2020 7463 705f 736b 2e63          tcp_sk.c
+0001f5c0: 6c6f 7365 2829 0a20 2020 2020 2020 2020  lose().         
+0001f5d0: 2020 2020 2020 2072 742e 6170 7065 6e64         rt.append
+0001f5e0: 2870 7429 0a20 2020 2020 2020 2020 2020  (pt).           
+0001f5f0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+0001f600: 2020 2020 2020 2020 2070 6173 730a 2020           pass.  
+0001f610: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
+0001f620: 2020 2020 6465 6620 4973 5573 6564 506f      def IsUsedPo
+0001f630: 7274 2869 702c 706f 7274 293a 0a20 2020  rt(ip,port):.   
+0001f640: 2020 2020 2027 2727 0a20 2020 2020 2020       '''.       
+0001f650: 2054 6865 2049 5020 616c 7265 6164 7920   The IP already 
+0001f660: 7573 6564 2074 6865 2070 6f72 742c 2069  used the port, i
+0001f670: 7420 6a75 7374 2063 6865 636b 7570 2061  t just checkup a
+0001f680: 7661 696c 6162 6c65 2070 6f72 7420 6f72  vailable port or
+0001f690: 2061 6c72 6561 6420 7573 6564 0a20 2020   alread used.   
+0001f6a0: 2020 2020 2027 2727 0a20 2020 2020 2020       '''.       
+0001f6b0: 2069 6620 4973 4e6f 6e65 2869 702c 6368   if IsNone(ip,ch
+0001f6c0: 6b5f 7661 6c3d 5b4e 6f6e 652c 2727 2c27  k_val=[None,'','
+0001f6d0: 6c6f 6361 6c68 6f73 7427 2c27 6c6f 6361  localhost','loca
+0001f6e0: 6c27 5d29 3a0a 2020 2020 2020 2020 2020  l']):.          
+0001f6f0: 2020 6970 3d27 3132 372e 302e 302e 3127    ip='127.0.0.1'
+0001f700: 0a20 2020 2020 2020 2073 6f63 3d73 6f63  .        soc=soc
+0001f710: 6b65 742e 736f 636b 6574 2873 6f63 6b65  ket.socket(socke
+0001f720: 742e 4146 5f49 4e45 542c 2073 6f63 6b65  t.AF_INET, socke
+0001f730: 742e 534f 434b 5f53 5452 4541 4d29 0a20  t.SOCK_STREAM). 
+0001f740: 2020 2020 2020 2072 743d 5b5d 0a20 2020         rt=[].   
+0001f750: 2020 2020 2066 6f72 2070 7420 696e 2070       for pt in p
+0001f760: 6f72 743a 0a20 2020 2020 2020 2020 2020  ort:.           
+0001f770: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+0001f780: 2020 2020 2020 6c6f 6361 7469 6f6e 3d28        location=(
+0001f790: 6970 2c70 7429 0a20 2020 2020 2020 2020  ip,pt).         
+0001f7a0: 2020 2020 2020 2072 743d 736f 632e 636f         rt=soc.co
+0001f7b0: 6e6e 6563 745f 6578 286c 6f63 6174 696f  nnect_ex(locatio
+0001f7c0: 6e29 0a20 2020 2020 2020 2020 2020 2020  n).             
+0001f7d0: 2020 2073 6f63 2e63 6c6f 7365 2829 0a20     soc.close(). 
+0001f7e0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001f7f0: 7274 3d3d 3020 7468 656e 2061 6c72 6561  rt==0 then alrea
+0001f800: 6479 2075 7365 640a 2020 2020 2020 2020  dy used.        
+0001f810: 2020 2020 2020 2020 6966 2072 7420 3d3d          if rt ==
+0001f820: 2030 3a20 7274 2e61 7070 656e 6428 7074   0: rt.append(pt
+0001f830: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
+0001f840: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
+0001f850: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
+0001f860: 2020 2072 6574 7572 6e20 7274 0a20 2020     return rt.   
+0001f870: 2069 6620 706f 7274 203d 3d20 2762 6d63   if port == 'bmc
+0001f880: 273a 0a20 2020 2020 2020 2062 6d63 3d54  ':.        bmc=T
+0001f890: 7275 650a 2020 2020 2020 2020 706f 7274  rue.        port
+0001f8a0: 3d4e 6f6e 650a 2020 2020 6966 2062 6d63  =None.    if bmc
+0001f8b0: 3a20 2320 5570 6461 7465 2042 4d43 2050  : # Update BMC P
+0001f8c0: 6f72 740a 2020 2020 2020 2020 6465 6661  ort.        defa
+0001f8d0: 756c 745f 626d 635f 706f 7274 3d5b 3632  ult_bmc_port=[62
+0001f8e0: 332c 3636 342c 3434 335d 0a20 2020 2020  3,664,443].     
+0001f8f0: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
+0001f900: 2870 6f72 7429 3a0a 2020 2020 2020 2020  (port):.        
+0001f910: 2020 2020 706f 7274 3d49 6e74 2870 6f72      port=Int(por
+0001f920: 742c 6465 6661 756c 743d 4661 6c73 6529  t,default=False)
+0001f930: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001f940: 6973 696e 7374 616e 6365 2870 6f72 742c  isinstance(port,
+0001f950: 286c 6973 742c 7475 706c 6529 293a 0a20  (list,tuple)):. 
+0001f960: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001f970: 6f72 2069 2069 6e20 706f 7274 3a0a 2020  or i in port:.  
+0001f980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f990: 2020 6966 2069 206e 6f74 2069 6e20 6465    if i not in de
+0001f9a0: 6661 756c 745f 626d 635f 706f 7274 3a20  fault_bmc_port: 
+0001f9b0: 6465 6661 756c 745f 626d 635f 706f 7274  default_bmc_port
+0001f9c0: 2e61 7070 656e 6428 6929 0a20 2020 2020  .append(i).     
+0001f9d0: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+0001f9e0: 7374 616e 6365 2870 6f72 742c 696e 7429  stance(port,int)
+0001f9f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001fa00: 2020 6966 2070 6f72 7420 6e6f 7420 696e    if port not in
+0001fa10: 2064 6566 6175 6c74 5f62 6d63 5f70 6f72   default_bmc_por
+0001fa20: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+0001fa30: 2020 2020 2020 2064 6566 6175 6c74 5f62         default_b
+0001fa40: 6d63 5f70 6f72 742e 6170 7065 6e64 2870  mc_port.append(p
+0001fa50: 6f72 7429 0a20 2020 2020 2020 2070 6f72  ort).        por
+0001fa60: 743d 7475 706c 6528 6465 6661 756c 745f  t=tuple(default_
+0001fa70: 626d 635f 706f 7274 290a 2020 2020 6966  bmc_port).    if
+0001fa80: 2070 6f72 743a 0a20 2020 2020 2020 2070   port:.        p
+0001fa90: 6f72 743d 496e 7428 706f 7274 2c64 6566  ort=Int(port,def
+0001faa0: 6175 6c74 3d46 616c 7365 290a 2020 2020  ault=False).    
+0001fab0: 2020 2020 6966 2070 6f72 7420 6973 2046      if port is F
+0001fac0: 616c 7365 3a20 7265 7475 726e 2064 6566  alse: return def
+0001fad0: 6175 6c74 0a20 2020 2020 2020 2069 6620  ault.        if 
+0001fae0: 5479 7065 2870 6f72 742c 696e 7429 3a20  Type(port,int): 
+0001faf0: 706f 7274 3d5b 706f 7274 5d0a 2020 2020  port=[port].    
+0001fb00: 6970 5f69 6e74 3d4e 6f6e 650a 2020 2020  ip_int=None.    
+0001fb10: 6966 2069 7369 6e73 7461 6e63 6528 6970  if isinstance(ip
+0001fb20: 2c73 7472 293a 0a20 2020 2020 2020 2069  ,str):.        i
+0001fb30: 7073 7472 3d69 702e 7374 7269 7028 290a  pstr=ip.strip().
+0001fb40: 2020 2020 2020 2020 6966 2027 3078 2720          if '0x' 
+0001fb50: 696e 2069 7073 7472 3a0a 2020 2020 2020  in ipstr:.      
+0001fb60: 2020 2020 2020 6970 5f69 6e74 3d69 6e74        ip_int=int
+0001fb70: 2869 7073 7472 2c31 3629 0a20 2020 2020  (ipstr,16).     
+0001fb80: 2020 2065 6c69 6620 6970 7374 722e 6973     elif ipstr.is
+0001fb90: 6469 6769 7428 293a 0a20 2020 2020 2020  digit():.       
+0001fba0: 2020 2020 2069 705f 696e 743d 696e 7428       ip_int=int(
+0001fbb0: 6970 7374 7229 0a20 2020 2020 2020 2065  ipstr).        e
+0001fbc0: 6c69 6620 272e 2720 696e 2069 7073 7472  lif '.' in ipstr
+0001fbd0: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
+0001fbe0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+0001fbf0: 2020 2069 705f 696e 743d 7374 7275 6374     ip_int=struct
+0001fc00: 2e75 6e70 6163 6b28 2221 4922 2c20 736f  .unpack("!I", so
+0001fc10: 636b 6574 2e69 6e65 745f 6174 6f6e 2869  cket.inet_aton(i
+0001fc20: 7073 7472 2929 5b30 5d20 2320 636f 6e76  pstr))[0] # conv
+0001fc30: 6572 7420 496e 7420 4950 0a20 2020 2020  ert Int IP.     
+0001fc40: 2020 2020 2020 2020 2020 2023 7374 7275             #stru
+0001fc50: 6374 2e75 6e70 6163 6b28 2221 4c22 2c20  ct.unpack("!L", 
+0001fc60: 736f 636b 6574 2e69 6e65 745f 6174 6f6e  socket.inet_aton
+0001fc70: 2869 7029 295b 305d 0a20 2020 2020 2020  (ip))[0].       
+0001fc80: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+0001fc90: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001fca0: 7375 7070 6f72 745f 686f 7374 6e61 6d65  support_hostname
+0001fcb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001fcc0: 2020 2020 2020 7472 793a 2023 2068 6f73        try: # hos
+0001fcd0: 746e 616d 6520 6162 632e 6465 6620 6361  tname abc.def ca
+0001fce0: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
+0001fcf0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001fd00: 6e20 4970 5634 2873 6f63 6b65 742e 6765  n IpV4(socket.ge
+0001fd10: 7468 6f73 7462 796e 616d 6528 6970 7374  thostbyname(ipst
+0001fd20: 7229 2c6f 7574 3d6f 7574 2c64 6566 6175  r),out=out,defau
+0001fd30: 6c74 3d64 6566 6175 6c74 2c70 6f72 743d  lt=default,port=
+0001fd40: 706f 7274 2c62 6d63 3d62 6d63 2c75 7365  port,bmc=bmc,use
+0001fd50: 643d 7573 6564 2c70 6f6f 6c3d 706f 6f6c  d=used,pool=pool
+0001fd60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001fd70: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
+0001fd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd90: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+0001fda0: 6175 6c74 0a20 2020 2020 2020 2065 6c69  ault.        eli
+0001fdb0: 6620 7375 7070 6f72 745f 686f 7374 6e61  f support_hostna
+0001fdc0: 6d65 3a20 2320 686f 7374 6e61 6d65 2061  me: # hostname a
+0001fdd0: 6263 2063 6173 650a 2020 2020 2020 2020  bc case.        
+0001fde0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0001fdf0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001fe00: 4970 5634 2873 6f63 6b65 742e 6765 7468  IpV4(socket.geth
+0001fe10: 6f73 7462 796e 616d 6528 6970 7374 7229  ostbyname(ipstr)
+0001fe20: 2c6f 7574 3d6f 7574 2c64 6566 6175 6c74  ,out=out,default
+0001fe30: 3d64 6566 6175 6c74 2c70 6f72 743d 706f  =default,port=po
+0001fe40: 7274 2c62 6d63 3d62 6d63 2c75 7365 643d  rt,bmc=bmc,used=
+0001fe50: 7573 6564 2c70 6f6f 6c3d 706f 6f6c 290a  used,pool=pool).
+0001fe60: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+0001fe70: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
+0001fe80: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+0001fe90: 6c74 0a20 2020 2065 6c69 6620 6973 696e  lt.    elif isin
+0001fea0: 7374 616e 6365 2869 702c 696e 7429 2061  stance(ip,int) a
+0001feb0: 6e64 206e 6f74 2069 7369 6e73 7461 6e63  nd not isinstanc
+0001fec0: 6528 6970 2c62 6f6f 6c29 3a0a 2020 2020  e(ip,bool):.    
+0001fed0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0001fee0: 2020 2020 2073 6f63 6b65 742e 696e 6574       socket.inet
+0001fef0: 5f6e 746f 6128 7374 7275 6374 2e70 6163  _ntoa(struct.pac
+0001ff00: 6b28 2221 4922 2c20 6970 2929 2023 2063  k("!I", ip)) # c
+0001ff10: 6865 636b 2069 6e74 2069 7320 4950 206f  heck int is IP o
+0001ff20: 7220 6e6f 740a 2020 2020 2020 2020 2020  r not.          
+0001ff30: 2020 6970 5f69 6e74 3d69 700a 2020 2020    ip_int=ip.    
+0001ff40: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+0001ff50: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+0001ff60: 6566 6175 6c74 0a20 2020 2065 6c69 6620  efault.    elif 
+0001ff70: 6973 696e 7374 616e 6365 2869 702c 7479  isinstance(ip,ty
+0001ff80: 7065 2868 6578 2929 3a0a 2020 2020 2020  pe(hex)):.      
+0001ff90: 2020 6970 5f69 6e74 3d69 6e74 2869 702c    ip_int=int(ip,
+0001ffa0: 3136 290a 0a20 2020 2069 6620 6e6f 7420  16)..    if not 
+0001ffb0: 4973 4e6f 6e65 2869 705f 696e 7429 3a0a  IsNone(ip_int):.
+0001ffc0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+0001ffd0: 2020 2020 2020 2020 2069 6620 6f75 7420           if out 
+0001ffe0: 696e 205b 2769 6e74 272c 696e 745d 3a0a  in ['int',int]:.
+0001fff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020000: 7265 7475 726e 2069 705f 696e 740a 2020  return ip_int.  
+00020010: 2020 2020 2020 2020 2020 656c 6966 206f            elif o
+00020020: 7574 2069 6e20 5b27 6865 7827 2c68 6578  ut in ['hex',hex
 00020030: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-00020040: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00020050: 6e20 4970 5634 2870 6f6f 6c5b 305d 2c6f  n IpV4(pool[0],o
-00020060: 7574 3d69 6e74 2920 3c3d 2069 705f 696e  ut=int) <= ip_in
-00020070: 7420 3c3d 2049 7056 3428 706f 6f6c 5b31  t <= IpV4(pool[1
-00020080: 5d2c 6f75 743d 696e 7429 0a20 2020 2020  ],out=int).     
-00020090: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000200a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000200b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000200c0: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
-000200d0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-000200e0: 6e73 7461 6e63 6528 706f 6f6c 2c6c 6973  nstance(pool,lis
-000200f0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00020100: 2020 2020 706f 6f6c 3d5b 4970 5634 2869      pool=[IpV4(i
-00020110: 2c6f 7574 3d69 6e74 2920 666f 7220 6920  ,out=int) for i 
-00020120: 696e 2070 6f6f 6c5d 0a20 2020 2020 2020  in pool].       
-00020130: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00020140: 6970 5f69 6e74 2069 6e20 706f 6f6c 0a20  ip_int in pool. 
-00020150: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00020160: 2023 6465 6661 756c 7420 746f 2073 7472   #default to str
+00020040: 2020 2072 6574 7572 6e20 6865 7828 6970     return hex(ip
+00020050: 5f69 6e74 290a 2020 2020 2020 2020 2020  _int).          
+00020060: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00020070: 6528 706f 6f6c 2c74 7570 6c65 293a 0a20  e(pool,tuple):. 
+00020080: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00020090: 6620 6c65 6e28 706f 6f6c 2920 3d3d 2031  f len(pool) == 1
+000200a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000200b0: 2020 2020 2020 7265 7475 726e 2049 7056        return IpV
+000200c0: 3428 706f 6f6c 5b30 5d2c 6f75 743d 696e  4(pool[0],out=in
+000200d0: 7429 203c 3d20 6970 5f69 6e74 0a20 2020  t) <= ip_int.   
+000200e0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+000200f0: 6620 6c65 6e28 706f 6f6c 2920 3d3d 2032  f len(pool) == 2
+00020100: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00020110: 2020 2020 2020 6966 206e 6f74 2070 6f6f        if not poo
+00020120: 6c5b 305d 2061 6e64 2070 6f6f 6c5b 315d  l[0] and pool[1]
+00020130: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00020140: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00020150: 2069 705f 696e 7420 3c3d 2049 7056 3428   ip_int <= IpV4(
+00020160: 706f 6f6c 5b31 5d2c 6f75 743d 696e 7429  pool[1],out=int)
 00020170: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020180: 2069 705f 7374 723d 736f 636b 6574 2e69   ip_str=socket.i
-00020190: 6e65 745f 6e74 6f61 2873 7472 7563 742e  net_ntoa(struct.
-000201a0: 7061 636b 2822 2149 222c 2069 705f 696e  pack("!I", ip_in
-000201b0: 7429 290a 2020 2020 2020 2020 2020 2020  t)).            
-000201c0: 2020 2020 6966 2070 6f72 743a 2023 2049      if port: # I
-000201d0: 6620 6269 6e67 2050 6f72 7420 7468 656e  f bing Port then
-000201e0: 2063 6865 636b 2074 6865 2070 6f72 740a   check the port.
-000201f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020200: 2020 2020 6966 2075 7365 643a 0a20 2020      if used:.   
-00020210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020220: 2020 2020 2072 743d 4973 5573 6564 506f       rt=IsUsedPo
-00020230: 7274 2869 705f 7374 722c 706f 7274 290a  rt(ip_str,port).
-00020240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020250: 2020 2020 2020 2020 6966 2072 743a 2072          if rt: r
-00020260: 6574 7572 6e20 7274 0a20 2020 2020 2020  eturn rt.       
+00020180: 2020 2020 2065 6c69 6620 6e6f 7420 706f       elif not po
+00020190: 6f6c 5b31 5d20 616e 6420 706f 6f6c 5b30  ol[1] and pool[0
+000201a0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000201b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000201c0: 6e20 4970 5634 2870 6f6f 6c5b 305d 2c6f  n IpV4(pool[0],o
+000201d0: 7574 3d69 6e74 2920 3c3d 2069 705f 696e  ut=int) <= ip_in
+000201e0: 7420 0a20 2020 2020 2020 2020 2020 2020  t .             
+000201f0: 2020 2020 2020 2065 6c69 6620 706f 6f6c         elif pool
+00020200: 5b30 5d20 616e 6420 706f 6f6c 5b31 5d3a  [0] and pool[1]:
+00020210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020220: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00020230: 4970 5634 2870 6f6f 6c5b 305d 2c6f 7574  IpV4(pool[0],out
+00020240: 3d69 6e74 2920 3c3d 2069 705f 696e 7420  =int) <= ip_int 
+00020250: 3c3d 2049 7056 3428 706f 6f6c 5b31 5d2c  <= IpV4(pool[1],
+00020260: 6f75 743d 696e 7429 0a20 2020 2020 2020  out=int).       
 00020270: 2020 2020 2020 2020 2020 2020 2065 6c73               els
 00020280: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00020290: 2020 2020 2020 2020 2020 2072 743d 4973             rt=Is
-000202a0: 4f70 656e 506f 7274 2869 705f 7374 722c  OpenPort(ip_str,
-000202b0: 706f 7274 290a 2020 2020 2020 2020 2020  port).          
-000202c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000202d0: 2072 743a 2072 6574 7572 6e20 7274 0a20   rt: return rt. 
-000202e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000202f0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00020300: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00020310: 6970 5f73 7472 0a20 2020 2020 2020 2065  ip_str.        e
-00020320: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-00020330: 2020 2070 6173 730a 2020 2020 7265 7475     pass.    retu
-00020340: 726e 2064 6566 6175 6c74 0a0a 6465 6620  rn default..def 
-00020350: 7069 6e67 2868 6f73 742c 2a2a 6f70 7473  ping(host,**opts
-00020360: 293a 0a20 2020 2049 434d 505f 4543 484f  ):.    ICMP_ECHO
-00020370: 5f52 4551 5545 5354 203d 2038 2023 2053  _REQUEST = 8 # S
-00020380: 6565 6d73 2074 6f20 6265 2074 6865 2073  eems to be the s
-00020390: 616d 6520 6f6e 2053 6f6c 6172 6973 2e20  ame on Solaris. 
-000203a0: 4672 6f6d 202f 7573 722f 696e 636c 7564  From /usr/includ
-000203b0: 652f 6c69 6e75 782f 6963 6d70 2e68 3b0a  e/linux/icmp.h;.
-000203c0: 2020 2020 4943 4d50 5f43 4f44 4520 3d20      ICMP_CODE = 
-000203d0: 736f 636b 6574 2e67 6574 7072 6f74 6f62  socket.getprotob
-000203e0: 796e 616d 6528 2769 636d 7027 290a 2020  yname('icmp').  
-000203f0: 2020 4552 524f 525f 4445 5343 5220 3d20    ERROR_DESCR = 
-00020400: 7b0a 2020 2020 2020 2020 313a 2027 202d  {.        1: ' -
-00020410: 204e 6f74 6520 7468 6174 2049 434d 5020   Note that ICMP 
-00020420: 6d65 7373 6167 6573 2063 616e 206f 6e6c  messages can onl
-00020430: 7920 6265 2027 0a20 2020 2020 2020 2020  y be '.         
-00020440: 2020 2773 656e 7420 6672 6f6d 2070 726f    'sent from pro
-00020450: 6365 7373 6573 2072 756e 6e69 6e67 2061  cesses running a
-00020460: 7320 726f 6f74 2e27 2c0a 2020 2020 2020  s root.',.      
-00020470: 2020 3130 3031 333a 2027 202d 204e 6f74    10013: ' - Not
-00020480: 6520 7468 6174 2049 434d 5020 6d65 7373  e that ICMP mess
-00020490: 6167 6573 2063 616e 206f 6e6c 7920 6265  ages can only be
-000204a0: 2073 656e 7420 6279 270a 2020 2020 2020   sent by'.      
-000204b0: 2020 2020 2020 2020 2027 2075 7365 7273           ' users
-000204c0: 206f 7220 7072 6f63 6573 7365 7320 7769   or processes wi
-000204d0: 7468 2061 646d 696e 6973 7472 6174 6f72  th administrator
-000204e0: 2072 6967 6874 732e 270a 2020 2020 2020   rights.'.      
-000204f0: 2020 7d0a 2020 2020 6465 6620 6368 6563    }.    def chec
-00020500: 6b73 756d 286d 7367 293a 0a20 2020 2020  ksum(msg):.     
-00020510: 2020 2073 756d 203d 2030 0a20 2020 2020     sum = 0.     
-00020520: 2020 2073 697a 6520 3d20 286c 656e 286d     size = (len(m
-00020530: 7367 2920 2f2f 2032 2920 2a20 320a 2020  sg) // 2) * 2.  
-00020540: 2020 2020 2020 666f 7220 6320 696e 2072        for c in r
-00020550: 616e 6765 2830 2c73 697a 652c 2032 293a  ange(0,size, 2):
-00020560: 0a20 2020 2020 2020 2020 2020 2073 756d  .            sum
-00020570: 203d 2028 7375 6d20 2b20 6f72 6428 6d73   = (sum + ord(ms
-00020580: 675b 6320 2b20 315d 292a 3235 362b 6f72  g[c + 1])*256+or
-00020590: 6428 6d73 675b 635d 2929 2026 2030 7866  d(msg[c])) & 0xf
-000205a0: 6666 6666 6666 660a 2020 2020 2020 2020  fffffff.        
-000205b0: 6966 2073 697a 6520 3c20 6c65 6e28 6d73  if size < len(ms
-000205c0: 6729 3a0a 2020 2020 2020 2020 2020 2020  g):.            
-000205d0: 7375 6d20 3d20 2873 756d 2b6f 7264 286d  sum = (sum+ord(m
-000205e0: 7367 5b6c 656e 286d 7367 2920 2d20 315d  sg[len(msg) - 1]
-000205f0: 2929 2026 2030 7866 6666 6666 6666 660a  )) & 0xffffffff.
-00020600: 2020 2020 2020 2020 7261 203d 207e 2828          ra = ~((
-00020610: 7375 6d20 3e3e 2031 3629 202b 2028 7375  sum >> 16) + (su
-00020620: 6d20 2620 3078 6666 6666 2920 2b20 2873  m & 0xffff) + (s
-00020630: 756d 203e 3e20 3136 2929 2026 2030 7866  um >> 16)) & 0xf
-00020640: 6666 660a 2020 2020 2020 2020 7261 203d  fff.        ra =
-00020650: 2072 6120 3e3e 2038 207c 2028 7261 203c   ra >> 8 | (ra <
-00020660: 3c20 3820 2620 3078 6666 3030 290a 2020  < 8 & 0xff00).  
-00020670: 2020 2020 2020 7265 7475 726e 2072 610a        return ra.
-00020680: 0a20 2020 2064 6566 206d 6b5f 7061 636b  .    def mk_pack
-00020690: 6574 2873 697a 6529 3a0a 2020 2020 2020  et(size):.      
-000206a0: 2020 2222 224d 616b 6520 6120 6e65 7720    """Make a new 
-000206b0: 6563 686f 2072 6571 7565 7374 2070 6163  echo request pac
-000206c0: 6b65 7420 6163 636f 7264 696e 6720 746f  ket according to
-000206d0: 2073 697a 6522 2222 0a20 2020 2020 2020   size""".       
-000206e0: 2023 2048 6561 6465 7220 6973 2074 7970   # Header is typ
-000206f0: 6520 2838 292c 2063 6f64 6520 2838 292c  e (8), code (8),
-00020700: 2063 6865 636b 7375 6d20 2831 3629 2c20   checksum (16), 
-00020710: 6964 2028 3136 292c 2073 6571 7565 6e63  id (16), sequenc
-00020720: 6520 2831 3629 0a20 2020 2020 2020 2068  e (16).        h
-00020730: 6561 6465 7220 3d20 7374 7275 6374 2e70  eader = struct.p
-00020740: 6163 6b28 2762 6248 4868 272c 2049 434d  ack('bbHHh', ICM
-00020750: 505f 4543 484f 5f52 4551 5545 5354 2c20  P_ECHO_REQUEST, 
-00020760: 302c 2030 2c20 7369 7a65 2c20 3129 0a20  0, 0, size, 1). 
-00020770: 2020 2020 2020 2023 6461 7461 203d 2073         #data = s
-00020780: 7472 7563 742e 6361 6c63 7369 7a65 2827  truct.calcsize('
-00020790: 6262 4848 6827 2920 2a20 2751 270a 2020  bbHHh') * 'Q'.  
-000207a0: 2020 2020 2020 6461 7461 203d 2073 697a        data = siz
-000207b0: 6520 2a20 2751 270a 2020 2020 2020 2020  e * 'Q'.        
-000207c0: 6d79 5f63 6865 636b 7375 6d20 3d20 6368  my_checksum = ch
-000207d0: 6563 6b73 756d 2853 7472 2868 6561 6465  ecksum(Str(heade
-000207e0: 7229 202b 2064 6174 6129 0a20 2020 2020  r) + data).     
-000207f0: 2020 2068 6561 6465 7220 3d20 7374 7275     header = stru
-00020800: 6374 2e70 6163 6b28 2762 6248 4868 272c  ct.pack('bbHHh',
-00020810: 2049 434d 505f 4543 484f 5f52 4551 5545   ICMP_ECHO_REQUE
-00020820: 5354 2c20 302c 0a20 2020 2020 2020 2020  ST, 0,.         
-00020830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020840: 2020 2020 736f 636b 6574 2e68 746f 6e73      socket.htons
-00020850: 286d 795f 6368 6563 6b73 756d 292c 2073  (my_checksum), s
-00020860: 697a 652c 2031 290a 2020 2020 2020 2020  ize, 1).        
-00020870: 7265 7475 726e 2068 6561 6465 7220 2b20  return header + 
-00020880: 4279 7465 7328 6461 7461 290a 0a20 2020  Bytes(data)..   
-00020890: 2064 6566 2072 6563 6569 7665 286d 795f   def receive(my_
-000208a0: 736f 636b 6574 2c20 7373 697a 652c 2073  socket, ssize, s
-000208b0: 7469 6d65 2c20 7469 6d65 6f75 7429 3a0a  time, timeout):.
-000208c0: 2020 2020 2020 2020 7768 696c 6520 5472          while Tr
-000208d0: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-000208e0: 6966 2074 696d 656f 7574 203c 3d20 303a  if timeout <= 0:
-000208f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020900: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
-00020910: 2020 2020 7265 6164 7920 3d20 7365 6c65      ready = sele
-00020920: 6374 2e73 656c 6563 7428 5b6d 795f 736f  ct.select([my_so
-00020930: 636b 6574 5d2c 205b 5d2c 205b 5d2c 2074  cket], [], [], t
-00020940: 696d 656f 7574 290a 2020 2020 2020 2020  imeout).        
-00020950: 2020 2020 6966 2072 6561 6479 5b30 5d20      if ready[0] 
-00020960: 3d3d 205b 5d3a 2023 2054 696d 656f 7574  == []: # Timeout
-00020970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020980: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
-00020990: 2020 2020 7265 6365 6976 6564 5f74 696d      received_tim
-000209a0: 6520 3d20 7469 6d65 2e74 696d 6528 290a  e = time.time().
-000209b0: 2020 2020 2020 2020 2020 2020 7061 636b              pack
-000209c0: 6574 2c20 6164 6472 203d 206d 795f 736f  et, addr = my_so
-000209d0: 636b 6574 2e72 6563 7666 726f 6d28 3130  cket.recvfrom(10
-000209e0: 3234 290a 2020 2020 2020 2020 2020 2020  24).            
-000209f0: 7479 7065 2c20 636f 6465 2c20 6368 6563  type, code, chec
-00020a00: 6b73 756d 2c20 6773 697a 652c 2073 6571  ksum, gsize, seq
-00020a10: 203d 2073 7472 7563 742e 756e 7061 636b   = struct.unpack
-00020a20: 2827 6262 4848 6827 2c20 7061 636b 6574  ('bbHHh', packet
-00020a30: 5b32 303a 3238 5d29 2023 2047 6574 2048  [20:28]) # Get H
-00020a40: 6561 6465 720a 2020 2020 2020 2020 2020  eader.          
-00020a50: 2020 6966 2067 7369 7a65 203d 3d20 7373    if gsize == ss
-00020a60: 697a 653a 0a20 2020 2020 2020 2020 2020  ize:.           
-00020a70: 2020 2020 2072 6574 7572 6e20 7265 6365       return rece
-00020a80: 6976 6564 5f74 696d 6520 2d20 7374 696d  ived_time - stim
-00020a90: 650a 2020 2020 2020 2020 2020 2020 7469  e.            ti
-00020aa0: 6d65 6f75 7420 2d3d 2072 6563 6569 7665  meout -= receive
-00020ab0: 645f 7469 6d65 202d 2073 7469 6d65 0a0a  d_time - stime..
-00020ac0: 2020 2020 6465 6620 7069 6e67 5f66 756e      def ping_fun
-00020ad0: 6328 6970 2c74 696d 656f 7574 3d31 2c73  c(ip,timeout=1,s
-00020ae0: 697a 653d 3634 293a 0a20 2020 2020 2020  ize=64):.       
-00020af0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00020b00: 2020 6d79 5f73 6f63 6b65 7420 3d20 736f    my_socket = so
-00020b10: 636b 6574 2e73 6f63 6b65 7428 736f 636b  cket.socket(sock
-00020b20: 6574 2e41 465f 494e 4554 2c20 736f 636b  et.AF_INET, sock
-00020b30: 6574 2e53 4f43 4b5f 5241 572c 2049 434d  et.SOCK_RAW, ICM
-00020b40: 505f 434f 4445 290a 2020 2020 2020 2020  P_CODE).        
-00020b50: 6578 6365 7074 2073 6f63 6b65 742e 6572  except socket.er
-00020b60: 726f 7220 6173 2065 3a0a 2020 2020 2020  ror as e:.      
-00020b70: 2020 2020 2020 6966 2065 2e65 7272 6e6f        if e.errno
-00020b80: 2069 6e20 4552 524f 525f 4445 5343 523a   in ERROR_DESCR:
-00020b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020ba0: 2072 6169 7365 2073 6f63 6b65 742e 6572   raise socket.er
-00020bb0: 726f 7228 2727 2e6a 6f69 6e28 2865 2e61  ror(''.join((e.a
-00020bc0: 7267 735b 315d 2c20 4552 524f 525f 4445  rgs[1], ERROR_DE
-00020bd0: 5343 525b 652e 6572 726e 6f5d 2929 290a  SCR[e.errno]))).
-00020be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020bf0: 2372 6169 7365 2073 6f63 6b65 742e 6572  #raise socket.er
-00020c00: 726f 7228 4a6f 696e 2828 652e 6172 6773  ror(Join((e.args
-00020c10: 5b31 5d2c 2045 5252 4f52 5f44 4553 4352  [1], ERROR_DESCR
-00020c20: 5b65 2e65 7272 6e6f 5d29 2c73 796d 626f  [e.errno]),symbo
-00020c30: 6c3d 2727 2929 0a20 2020 2020 2020 2020  l='')).         
-00020c40: 2020 2072 6169 7365 0a20 2020 2020 2020     raise.       
-00020c50: 2069 6620 7369 7a65 2069 6e20 5b27 726e   if size in ['rn
-00020c60: 6427 2c27 7261 6e64 6f6d 275d 3a0a 2020  d','random']:.  
-00020c70: 2020 2020 2020 2020 2020 2320 4d61 7869            # Maxi
-00020c80: 6d75 6d20 7369 7a65 2066 6f72 2061 6e20  mum size for an 
-00020c90: 756e 7369 676e 6564 2073 686f 7274 2069  unsigned short i
-00020ca0: 6e74 2063 206f 626a 6563 7428 3635 3533  nt c object(6553
-00020cb0: 3529 0a20 2020 2020 2020 2020 2020 2073  5).            s
-00020cc0: 697a 6520 3d20 696e 7428 2869 6428 7469  ize = int((id(ti
-00020cd0: 6d65 6f75 7429 202a 2072 616e 646f 6d2e  meout) * random.
-00020ce0: 7261 6e64 6f6d 2829 2920 2520 3635 3533  random()) % 6553
-00020cf0: 3529 0a20 2020 2020 2020 2070 6163 6b65  5).        packe
-00020d00: 7420 3d20 6d6b 5f70 6163 6b65 7428 7369  t = mk_packet(si
-00020d10: 7a65 290a 2020 2020 2020 2020 7768 696c  ze).        whil
-00020d20: 6520 7061 636b 6574 3a0a 2020 2020 2020  e packet:.      
-00020d30: 2020 2020 2020 7365 6e74 203d 206d 795f        sent = my_
-00020d40: 736f 636b 6574 2e73 656e 6474 6f28 7061  socket.sendto(pa
-00020d50: 636b 6574 2c20 2869 702c 2031 2929 2023  cket, (ip, 1)) #
-00020d60: 2049 434d 5020 6861 7665 206e 6f20 706f   ICMP have no po
-00020d70: 7274 2c20 536f 206a 7573 7420 7075 7420  rt, So just put 
-00020d80: 6475 6d6d 7920 706f 7274 2031 0a20 2020  dummy port 1.   
-00020d90: 2020 2020 2020 2020 2070 6163 6b65 7420           packet 
-00020da0: 3d20 7061 636b 6574 5b73 656e 743a 5d0a  = packet[sent:].
-00020db0: 2020 2020 2020 2020 6465 6c61 7920 3d20          delay = 
-00020dc0: 7265 6365 6976 6528 6d79 5f73 6f63 6b65  receive(my_socke
-00020dd0: 742c 2073 697a 652c 2054 494d 4528 292e  t, size, TIME().
-00020de0: 5469 6d65 2829 2c20 7469 6d65 6f75 7429  Time(), timeout)
-00020df0: 0a20 2020 2020 2020 206d 795f 736f 636b  .        my_sock
-00020e00: 6574 2e63 6c6f 7365 2829 0a20 2020 2020  et.close().     
-00020e10: 2020 2069 6620 6465 6c61 793a 0a20 2020     if delay:.   
-00020e20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00020e30: 6465 6c61 792c 7369 7a65 0a0a 2020 2020  delay,size..    
-00020e40: 6465 6620 5f70 696e 675f 2869 702c 7469  def _ping_(ip,ti
-00020e50: 6d65 6f75 743d 312c 7369 7a65 3d36 342c  meout=1,size=64,
-00020e60: 6c6f 675f 666f 726d 6174 3d27 7069 6e67  log_format='ping
-00020e70: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-00020e80: 7069 6e67 5f63 6d64 3d66 696e 645f 6578  ping_cmd=find_ex
-00020e90: 6563 7574 6162 6c65 2827 7069 6e67 2729  ecutable('ping')
-00020ea0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00020eb0: 7069 6e67 5f63 6d64 3a0a 2020 2020 2020  ping_cmd:.      
-00020ec0: 2020 2020 2020 2020 2020 7069 6e67 5f73            ping_s
-00020ed0: 3d73 697a 652d 3820 6966 2073 697a 6520  =size-8 if size 
-00020ee0: 3e3d 2038 2065 6c73 6520 300a 2020 2020  >= 8 else 0.    
-00020ef0: 2020 2020 2020 2020 2020 2020 7263 3d72              rc=r
-00020f00: 7368 656c 6c28 2270 696e 6720 2d73 207b  shell("ping -s {
-00020f10: 7d20 2d63 2031 207b 7d22 2e66 6f72 6d61  } -c 1 {}".forma
-00020f20: 7428 7069 6e67 5f73 2c68 6f73 7429 290a  t(ping_s,host)).
-00020f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020f40: 6465 6c61 793d 5b5d 0a20 2020 2020 2020  delay=[].       
-00020f50: 2020 2020 2020 2020 2069 6620 7263 5b30           if rc[0
-00020f60: 5d20 3d3d 2030 3a0a 2020 2020 2020 2020  ] == 0:.        
-00020f70: 2020 2020 2020 2020 2020 2020 6465 6c61              dela
-00020f80: 793d 5b5d 0a20 2020 2020 2020 2020 2020  y=[].           
-00020f90: 2020 2020 2020 2020 2074 743d 7263 5b31           tt=rc[1
-00020fa0: 5d2e 7370 6c69 7428 275c 6e27 295b 315d  ].split('\n')[1]
-00020fb0: 2e73 706c 6974 2829 0a20 2020 2020 2020  .split().       
-00020fc0: 2020 2020 2020 2020 2020 2020 2064 656c               del
-00020fd0: 6179 3d5b 666c 6f61 7428 7474 5b36 5d2e  ay=[float(tt[6].
-00020fe0: 7370 6c69 7428 273d 2729 5b31 5d29 2f31  split('=')[1])/1
-00020ff0: 3030 302c 7474 5b30 5d5d 0a20 2020 2020  000,tt[0]].     
-00021000: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00021010: 2020 2020 2020 2020 2020 2020 6465 6c61              dela
-00021020: 793d 7069 6e67 5f66 756e 6328 6970 2c74  y=ping_func(ip,t
-00021030: 696d 656f 7574 2c73 697a 6529 0a20 2020  imeout,size).   
-00021040: 2020 2020 2020 2020 2069 6620 6c6f 675f           if log_
-00021050: 666f 726d 6174 203d 3d20 2770 696e 6727  format == 'ping'
-00021060: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00021070: 2020 6966 2064 656c 6179 3a0a 2020 2020    if delay:.    
-00021080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021090: 7265 7475 726e 2030 2c69 702c 7369 7a65  return 0,ip,size
-000210a0: 2c74 696d 656f 7574 2c64 656c 6179 5b31  ,timeout,delay[1
-000210b0: 5d2c 726f 756e 6428 6465 6c61 795b 305d  ],round(delay[0]
-000210c0: 2a31 3030 302e 302c 3429 0a20 2020 2020  *1000.0,4).     
-000210d0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000210e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000210f0: 2020 2020 2072 6574 7572 6e20 312c 6970       return 1,ip
-00021100: 2c73 697a 652c 7469 6d65 6f75 742c 4e6f  ,size,timeout,No
-00021110: 6e65 2c4e 6f6e 650a 2020 2020 2020 2020  ne,None.        
-00021120: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00021130: 2020 2020 2020 2020 2020 6966 2064 656c            if del
-00021140: 6179 3a0a 2020 2020 2020 2020 2020 2020  ay:.            
-00021150: 2020 2020 2020 2020 7265 7475 726e 2030          return 0
-00021160: 2c27 2e27 2c73 697a 652c 7469 6d65 6f75  ,'.',size,timeou
-00021170: 742c 4e6f 6e65 2c4e 6f6e 650a 2020 2020  t,None,None.    
-00021180: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00021190: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000211a0: 2020 2020 2020 7265 7475 726e 2031 2c27        return 1,'
-000211b0: 7827 2c73 697a 652c 7469 6d65 6f75 742c  x',size,timeout,
-000211c0: 4e6f 6e65 2c4e 6f6e 650a 0a20 2020 2027  None,None..    '
-000211d0: 2727 0a20 2020 2073 616d 6520 6173 2070  ''.    same as p
-000211e0: 696e 6720 636f 6d6d 616e 640a 2020 2020  ing command.    
-000211f0: 5472 7565 203a 2070 696e 6769 6e67 0a20  True : pinging. 
-00021200: 2020 2046 616c 7365 3a20 6361 6e20 6e6f     False: can no
-00021210: 7420 7069 6e67 0a20 2020 2030 2020 2020  t ping.    0    
-00021220: 3a20 4361 6e63 656c 6564 2070 696e 670a  : Canceled ping.
-00021230: 2020 2020 2727 270a 2020 2020 636f 756e      '''.    coun
-00021240: 743d 496e 7428 6f70 7473 2e67 6574 2827  t=Int(opts.get('
-00021250: 636f 756e 7427 292c 3029 0a20 2020 2069  count'),0).    i
-00021260: 6e74 6572 7661 6c3d 496e 7428 6f70 7473  nterval=Int(opts
-00021270: 2e67 6574 2827 696e 7465 7276 616c 2729  .get('interval')
-00021280: 2c31 290a 2020 2020 6b65 6570 5f67 6f6f  ,1).    keep_goo
-00021290: 643d 496e 7428 6f70 7473 2e67 6574 2827  d=Int(opts.get('
-000212a0: 6b65 6570 5f67 6f6f 6427 2c6f 7074 732e  keep_good',opts.
-000212b0: 6765 7428 276b 6565 705f 7069 6e67 272c  get('keep_ping',
-000212c0: 6f70 7473 2e67 6574 2827 6b65 6570 272c  opts.get('keep',
-000212d0: 6f70 7473 2e67 6574 2827 676f 6f64 272c  opts.get('good',
-000212e0: 6f70 7473 2e67 6574 2827 7069 6e67 696e  opts.get('pingin
-000212f0: 6727 2929 2929 292c 3029 0a20 2020 206b  g'))))),0).    k
-00021300: 6565 705f 6261 643d 496e 7428 6f70 7473  eep_bad=Int(opts
-00021310: 2e67 6574 2827 6b65 6570 5f62 6164 272c  .get('keep_bad',
-00021320: 6f70 7473 2e67 6574 2827 6261 6427 2929  opts.get('bad'))
-00021330: 2c30 290a 2020 2020 7469 6d65 6f75 743d  ,0).    timeout=
-00021340: 496e 7428 6f70 7473 2e67 6574 2827 7469  Int(opts.get('ti
-00021350: 6d65 6f75 7427 2c6f 7074 732e 6765 7428  meout',opts.get(
-00021360: 2774 696d 656f 7574 5f73 6563 2729 292c  'timeout_sec')),
-00021370: 3029 0a20 2020 206c 6f73 745f 6d6f 6e3d  0).    lost_mon=
-00021380: 6f70 7473 2e67 6574 2827 6c6f 7374 5f6d  opts.get('lost_m
-00021390: 6f6e 272c 4661 6c73 6529 0a20 2020 206c  on',False).    l
-000213a0: 6f67 3d6f 7074 732e 6765 7428 276c 6f67  og=opts.get('log
-000213b0: 272c 4e6f 6e65 290a 2020 2020 6c6f 675f  ',None).    log_
-000213c0: 666f 726d 6174 3d6f 7074 732e 6765 7428  format=opts.get(
-000213d0: 276c 6f67 5f66 6f72 6d61 7427 2c27 2e27  'log_format','.'
-000213e0: 290a 2020 2020 616c 6976 655f 706f 7274  ).    alive_port
-000213f0: 3d6f 7074 732e 6765 7428 2761 6c69 7665  =opts.get('alive
-00021400: 5f70 6f72 7427 290a 2020 2020 656e 645f  _port').    end_
-00021410: 6e65 776c 696e 653d 6f70 7473 2e67 6574  newline=opts.get
-00021420: 2827 656e 645f 6e65 776c 696e 6527 2c6f  ('end_newline',o
-00021430: 7074 732e 6765 7428 276e 6577 6c69 6e65  pts.get('newline
-00021440: 272c 6f70 7473 2e67 6574 2827 656e 6427  ',opts.get('end'
-00021450: 2c27 5c6e 2729 2929 0a20 2020 2063 616e  ,'\n'))).    can
-00021460: 6365 6c5f 6675 6e63 3d6f 7074 732e 6765  cel_func=opts.ge
-00021470: 7428 2763 616e 6365 6c5f 6675 6e63 272c  t('cancel_func',
-00021480: 6f70 7473 2e67 6574 2827 7374 6f70 5f66  opts.get('stop_f
-00021490: 756e 6327 2c6f 7074 732e 6765 7428 2763  unc',opts.get('c
-000214a0: 616e 6365 6c27 2c6f 7074 732e 6765 7428  ancel',opts.get(
-000214b0: 2773 746f 7027 2c4e 6f6e 6529 2929 290a  'stop',None)))).
-000214c0: 2020 2020 6966 2061 6c69 7665 5f70 6f72      if alive_por
-000214d0: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
-000214e0: 6e20 5472 7565 2069 6620 4970 5634 2868  n True if IpV4(h
-000214f0: 6f73 742c 706f 7274 3d61 6c69 7665 5f70  ost,port=alive_p
-00021500: 6f72 742c 7375 7070 6f72 745f 686f 7374  ort,support_host
-00021510: 6e61 6d65 3d6f 7074 732e 6765 7428 2773  name=opts.get('s
-00021520: 7570 706f 7274 5f68 6f73 746e 616d 6527  upport_hostname'
-00021530: 2c54 7275 6529 2920 656c 7365 2046 616c  ,True)) else Fal
-00021540: 7365 0a20 2020 2067 6f6f 643d 4661 6c73  se.    good=Fals
-00021550: 650a 2020 2020 5469 6d65 3d54 494d 4528  e.    Time=TIME(
-00021560: 290a 2020 2020 6754 696d 653d 5449 4d45  ).    gTime=TIME
-00021570: 2829 0a20 2020 2062 5469 6d65 3d54 494d  ().    bTime=TIM
-00021580: 4528 290a 2020 2020 6473 7069 3d27 6427  E().    dspi='d'
-00021590: 2069 6620 6c6f 675f 666f 726d 6174 203d   if log_format =
-000215a0: 3d27 6427 2065 6c73 6520 2773 2720 6966  ='d' else 's' if
-000215b0: 206c 6f67 5f66 6f72 6d61 7420 6e6f 7420   log_format not 
-000215c0: 696e 205b 276e 272c 2769 275d 2065 6c73  in ['n','i'] els
-000215d0: 6520 2769 270a 2020 2020 6c6f 6361 6c5f  e 'i'.    local_
-000215e0: 7072 696e 7465 643d 4661 6c73 650a 2020  printed=False.  
-000215f0: 2020 693d 300a 2020 2020 7768 696c 6520    i=0.    while 
-00021600: 5472 7565 3a0a 2020 2020 2020 2069 6620  True:.       if 
-00021610: 4973 4272 6561 6b28 6361 6e63 656c 5f66  IsBreak(cancel_f
-00021620: 756e 6329 3a0a 2020 2020 2020 2020 2020  unc):.          
-00021630: 7072 696e 7466 2827 2d20 7069 6e67 287b  printf('- ping({
-00021640: 7d29 202d 2043 616e 6365 6c65 642f 5374  }) - Canceled/St
-00021650: 6f70 7065 6420 7069 6e67 2062 7920 6361  opped ping by ca
-00021660: 6e63 656c 2073 6967 6e61 6c27 2e66 6f72  ncel signal'.for
-00021670: 6d61 7428 686f 7374 292c 6669 7273 745f  mat(host),first_
-00021680: 6e65 776c 696e 653d 5472 7565 2c6c 6f67  newline=True,log
-00021690: 3d6c 6f67 2c64 7370 3d64 7370 6929 0a20  =log,dsp=dspi). 
-000216a0: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-000216b0: 2020 2020 2020 7263 3d5f 7069 6e67 5f28        rc=_ping_(
-000216c0: 686f 7374 2c74 696d 656f 7574 3d31 2c73  host,timeout=1,s
-000216d0: 697a 653d 3634 2c6c 6f67 5f66 6f72 6d61  ize=64,log_forma
-000216e0: 743d 6c6f 675f 666f 726d 6174 290a 2020  t=log_format).  
-000216f0: 2020 2020 2069 6620 7263 5b30 5d20 3d3d       if rc[0] ==
-00021700: 2030 3a0a 2020 2020 2020 2020 2020 676f   0:.          go
-00021710: 6f64 3d54 7275 650a 2020 2020 2020 2020  od=True.        
-00021720: 2020 6966 206e 6f74 2063 6f75 6e74 3a0a    if not count:.
-00021730: 2020 2020 2020 2020 2020 2020 2020 6254                bT
-00021740: 696d 652e 5265 7365 7428 290a 2020 2020  ime.Reset().    
-00021750: 2020 2020 2020 2020 2020 6966 206b 6565            if kee
-00021760: 705f 676f 6f64 3a0a 2020 2020 2020 2020  p_good:.        
-00021770: 2020 2020 2020 2020 2020 6966 2067 5469            if gTi
-00021780: 6d65 2e4f 7574 286b 6565 705f 676f 6f64  me.Out(keep_good
-00021790: 293a 2062 7265 616b 0a20 2020 2020 2020  ): break.       
-000217a0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000217b0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-000217c0: 7265 616b 0a20 2020 2020 2020 2020 2069  reak.          i
-000217d0: 6620 6c6f 675f 666f 726d 6174 203d 3d20  f log_format == 
-000217e0: 2770 696e 6727 3a0a 2020 2020 2020 2020  'ping':.        
-000217f0: 2020 2020 2020 7072 696e 7466 2827 7b7d        printf('{}
-00021800: 2062 7974 6573 2066 726f 6d20 7b7d 3a20   bytes from {}: 
-00021810: 6963 6d70 5f73 6571 3d7b 7d20 7474 6c3d  icmp_seq={} ttl=
-00021820: 7b7d 2074 696d 653d 7b7d 206d 7327 2e66  {} time={} ms'.f
-00021830: 6f72 6d61 7428 7263 5b34 5d2c 7263 5b31  ormat(rc[4],rc[1
-00021840: 5d2c 692c 7263 5b32 5d2c 7263 5b35 5d29  ],i,rc[2],rc[5])
-00021850: 2c6c 6f67 3d6c 6f67 2c64 7370 3d64 7370  ,log=log,dsp=dsp
-00021860: 6929 0a20 2020 2020 2020 2020 2065 6c69  i).          eli
-00021870: 6620 6473 7069 2069 6e20 5b27 6427 2c27  f dspi in ['d','
-00021880: 7327 5d3a 0a20 2020 2020 2020 2020 2020  s']:.           
-00021890: 2020 2070 7269 6e74 6628 272e 272c 6469     printf('.',di
-000218a0: 7265 6374 3d54 7275 652c 6c6f 673d 6c6f  rect=True,log=lo
-000218b0: 672c 6c6f 675f 6c65 7665 6c3d 312c 6473  g,log_level=1,ds
-000218c0: 703d 6473 7069 2c73 6372 5f64 6267 3d46  p=dspi,scr_dbg=F
-000218d0: 616c 7365 290a 2020 2020 2020 2020 2020  alse).          
-000218e0: 2020 2020 6c6f 6361 6c5f 7072 696e 7465      local_printe
-000218f0: 643d 5472 7565 0a20 2020 2020 2020 656c  d=True.       el
-00021900: 7365 3a0a 2020 2020 2020 2020 2020 676f  se:.          go
-00021910: 6f64 3d46 616c 7365 0a20 2020 2020 2020  od=False.       
-00021920: 2020 2069 6620 6e6f 7420 636f 756e 743a     if not count:
-00021930: 0a20 2020 2020 2020 2020 2020 2020 2067  .              g
-00021940: 5469 6d65 2e52 6573 6574 2829 0a20 2020  Time.Reset().   
-00021950: 2020 2020 2020 2020 2020 2069 6620 6b65             if ke
-00021960: 6570 5f62 6164 3a0a 2020 2020 2020 2020  ep_bad:.        
-00021970: 2020 2020 2020 2020 2020 6966 2062 5469            if bTi
-00021980: 6d65 2e4f 7574 286b 6565 705f 6261 6429  me.Out(keep_bad)
-00021990: 3a20 6272 6561 6b0a 2020 2020 2020 2020  : break.        
-000219a0: 2020 6966 206c 6f67 5f66 6f72 6d61 7420    if log_format 
-000219b0: 3d3d 2027 7069 6e67 273a 0a20 2020 2020  == 'ping':.     
-000219c0: 2020 2020 2020 2020 2070 7269 6e74 6628           printf(
-000219d0: 277b 7d20 6963 6d70 5f73 6571 3d7b 7d20  '{} icmp_seq={} 
-000219e0: 7469 6d65 6f75 7420 287b 7d20 7365 636f  timeout ({} seco
-000219f0: 6e64 2927 2e66 6f72 6d61 7428 7263 5b31  nd)'.format(rc[1
-00021a00: 5d2c 692c 7263 5b33 5d29 2c6c 6f67 3d6c  ],i,rc[3]),log=l
-00021a10: 6f67 2c64 7370 3d64 7370 6929 0a20 2020  og,dsp=dspi).   
-00021a20: 2020 2020 2020 2065 6c69 6620 6473 7069         elif dspi
-00021a30: 2069 6e20 5b27 6427 2c27 7327 5d3a 0a20   in ['d','s']:. 
-00021a40: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00021a50: 6e74 6628 2778 272c 6469 7265 6374 3d54  ntf('x',direct=T
-00021a60: 7275 652c 6c6f 675f 6c65 7665 6c3d 312c  rue,log_level=1,
-00021a70: 6c6f 673d 6c6f 672c 2064 7370 3d64 7370  log=log, dsp=dsp
-00021a80: 692c 7363 725f 6462 673d 4661 6c73 6529  i,scr_dbg=False)
-00021a90: 0a20 2020 2020 2020 2020 2020 2020 206c  .              l
-00021aa0: 6f63 616c 5f70 7269 6e74 6564 3d54 7275  ocal_printed=Tru
-00021ab0: 650a 2020 2020 2020 2069 6620 636f 756e  e.       if coun
-00021ac0: 743a 0a20 2020 2020 2020 2020 2020 636f  t:.           co
-00021ad0: 756e 742d 3d31 0a20 2020 2020 2020 2020  unt-=1.         
-00021ae0: 2020 6966 2063 6f75 6e74 203c 2031 3a20    if count < 1: 
-00021af0: 6272 6561 6b0a 2020 2020 2020 2069 6620  break.       if 
-00021b00: 5469 6d65 2e4f 7574 2874 696d 656f 7574  Time.Out(timeout
-00021b10: 293a 2062 7265 616b 0a20 2020 2020 2020  ): break.       
-00021b20: 7469 6d65 2e73 6c65 6570 2869 6e74 6572  time.sleep(inter
-00021b30: 7661 6c29 0a20 2020 2020 2020 692b 3d31  val).       i+=1
-00021b40: 0a20 2020 2069 6620 656e 645f 6e65 776c  .    if end_newl
-00021b50: 696e 653a 0a20 2020 2020 2020 2069 6620  ine:.        if 
-00021b60: 6c6f 6361 6c5f 7072 696e 7465 643a 2070  local_printed: p
-00021b70: 7269 6e74 6628 2727 2c6c 6f67 3d6c 6f67  rintf('',log=log
-00021b80: 2c20 6e6f 5f69 6e74 726f 3d54 7275 652c  , no_intro=True,
-00021b90: 2064 7370 3d64 7370 692c 6361 6c6c 6572   dsp=dspi,caller
-00021ba0: 5f70 6172 656e 743d 312c 6967 6e6f 7265  _parent=1,ignore
-00021bb0: 5f65 6d70 7479 3d46 616c 7365 290a 2020  _empty=False).  
-00021bc0: 2020 7265 7475 726e 2067 6f6f 640a 0a63    return good..c
-00021bd0: 6c61 7373 2050 4147 453a 0a20 2020 2027  lass PAGE:.    '
-00021be0: 2727 0a20 2020 2057 6562 2073 6974 6520  ''.    Web site 
-00021bf0: 7061 6765 2061 6e64 2055 524c 2064 6573  page and URL des
-00021c00: 6967 6e0a 2020 2020 2727 270a 2020 2020  ign.    '''.    
-00021c10: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-00021c20: 662c 7265 7175 6573 743d 4e6f 6e65 2c64  f,request=None,d
-00021c30: 6174 613d 4e6f 6e65 2c62 6173 653d 2727  ata=None,base=''
-00021c40: 2c6f 7468 6572 733d 4e6f 6e65 2c70 7261  ,others=None,pra
-00021c50: 6e67 653d 3235 293a 0a20 2020 2020 2020  nge=25):.       
-00021c60: 2069 6620 7265 7175 6573 743a 0a20 2020   if request:.   
-00021c70: 2020 2020 2020 2020 2073 656c 662e 7265           self.re
-00021c80: 7175 6573 7473 3d72 6571 7565 7374 0a20  quests=request. 
-00021c90: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00021ca0: 2020 2020 2020 2020 2049 6d70 6f72 7428           Import(
-00021cb0: 2769 6d70 6f72 7420 7265 7175 6573 7473  'import requests
-00021cc0: 2729 0a20 2020 2020 2020 2020 2020 2073  ').            s
-00021cd0: 656c 662e 7265 7175 6573 7473 3d72 6571  elf.requests=req
-00021ce0: 7565 7374 730a 2020 2020 2020 2020 7365  uests.        se
-00021cf0: 6c66 2e70 7261 6e67 653d 7072 616e 6765  lf.prange=prange
-00021d00: 0a20 2020 2020 2020 2073 656c 662e 7061  .        self.pa
-00021d10: 7261 6d65 7465 7273 3d64 6963 7428 7365  rameters=dict(se
-00021d20: 6c66 2e72 6571 7565 7374 732e 6172 6773  lf.requests.args
-00021d30: 290a 2020 2020 2020 2020 7061 6765 3d73  ).        page=s
-00021d40: 656c 662e 7265 7175 6573 7473 2e61 7267  elf.requests.arg
-00021d50: 732e 6765 7428 2770 6167 6527 2c30 290a  s.get('page',0).
-00021d60: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00021d70: 7265 7175 6573 7473 2e6d 6574 686f 643d  requests.method=
-00021d80: 3d27 504f 5354 273a 0a20 2020 2020 2020  ='POST':.       
-00021d90: 2020 2020 2070 6172 616d 6574 6572 733d       parameters=
-00021da0: 6469 6374 2873 656c 662e 7265 7175 6573  dict(self.reques
-00021db0: 7473 2e66 6f72 6d29 0a20 2020 2020 2020  ts.form).       
-00021dc0: 2020 2020 2073 656c 662e 7061 7261 6d65       self.parame
-00021dd0: 7465 7273 2e75 7064 6174 6528 7061 7261  ters.update(para
-00021de0: 6d65 7465 7273 290a 2020 2020 2020 2020  meters).        
-00021df0: 2020 2020 6966 2027 7061 6765 2720 696e      if 'page' in
-00021e00: 2073 656c 662e 7061 7261 6d65 7465 7273   self.parameters
-00021e10: 3a20 7061 6765 3d73 656c 662e 7061 7261  : page=self.para
-00021e20: 6d65 7465 7273 2e67 6574 2827 7061 6765  meters.get('page
-00021e30: 2729 0a20 2020 2020 2020 2074 7279 3a0a  ').        try:.
-00021e40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00021e50: 2e70 6167 653d 696e 7428 7061 6765 290a  .page=int(page).
-00021e60: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-00021e70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00021e80: 2e70 6167 653d 300a 2020 2020 2020 2020  .page=0.        
-00021e90: 7365 6c66 2e74 6f74 616c 3d30 0a20 2020  self.total=0.   
-00021ea0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00021eb0: 6365 2864 6174 612c 286c 6973 742c 6469  ce(data,(list,di
-00021ec0: 6374 2c74 7570 6c65 2929 3a0a 2020 2020  ct,tuple)):.    
-00021ed0: 2020 2020 2020 2020 7365 6c66 2e74 6f74          self.tot
-00021ee0: 616c 3d6c 656e 2864 6174 6129 0a20 2020  al=len(data).   
-00021ef0: 2020 2020 2073 656c 662e 746f 7461 6c5f       self.total_
-00021f00: 7061 6765 3d73 656c 662e 746f 7461 6c2f  page=self.total/
-00021f10: 2f73 656c 662e 7072 616e 6765 0a20 2020  /self.prange.   
-00021f20: 2020 2020 2073 656c 662e 6261 7365 3d62       self.base=b
-00021f30: 6173 650a 2020 2020 2020 2020 7365 6c66  ase.        self
-00021f40: 2e6f 7468 6572 733d 6f74 6865 7273 0a20  .others=others. 
-00021f50: 2020 2020 2020 2073 656c 662e 7374 6172         self.star
-00021f60: 743d 7365 6c66 2e70 6167 652a 7365 6c66  t=self.page*self
-00021f70: 2e70 7261 6e67 650a 2020 2020 2020 2020  .prange.        
-00021f80: 7365 6c66 2e65 6e64 3d73 656c 662e 7374  self.end=self.st
-00021f90: 6172 742b 7365 6c66 2e70 7261 6e67 650a  art+self.prange.
-00021fa0: 2020 2020 6465 6620 7572 6c28 7365 6c66      def url(self
-00021fb0: 2c62 6173 653d 4e6f 6e65 2c69 676e 6f72  ,base=None,ignor
-00021fc0: 653d 4e6f 6e65 2c2a 2a6f 7074 7329 3a0a  e=None,**opts):.
-00021fd0: 2020 2020 2020 2020 6172 6773 3d27 270a          args=''.
-00021fe0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00021ff0: 2073 656c 662e 7061 7261 6d65 7465 7273   self.parameters
-00022000: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00022010: 2069 7369 6e73 7461 6e63 6528 6967 6e6f   isinstance(igno
-00022020: 7265 2c6c 6973 7429 2061 6e64 2069 2069  re,list) and i i
-00022030: 6e20 6967 6e6f 7265 3a20 636f 6e74 696e  n ignore: contin
-00022040: 7565 0a20 2020 2020 2020 2020 2020 2069  ue.            i
-00022050: 6620 6920 696e 206f 7074 733a 0a20 2020  f i in opts:.   
-00022060: 2020 2020 2020 2020 2020 2020 206f 6f3d               oo=
-00022070: 6f70 7473 2e70 6f70 2869 290a 2020 2020  opts.pop(i).    
-00022080: 2020 2020 2020 2020 2020 2020 6172 6773              args
-00022090: 3d61 7267 732b 277b 7d7b 7d3d 7b7d 272e  =args+'{}{}={}'.
-000220a0: 666f 726d 6174 2827 2627 2069 6620 6172  format('&' if ar
-000220b0: 6773 2065 6c73 6520 2727 2c69 2c6f 6f29  gs else '',i,oo)
-000220c0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-000220d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000220e0: 2020 2061 7267 733d 6172 6773 2b27 7b7d     args=args+'{}
-000220f0: 7b7d 3d7b 7d27 2e66 6f72 6d61 7428 2726  {}={}'.format('&
-00022100: 2720 6966 2061 7267 7320 656c 7365 2027  ' if args else '
-00022110: 272c 692c 7365 6c66 2e70 6172 616d 6574  ',i,self.paramet
-00022120: 6572 735b 695d 290a 2020 2020 2020 2020  ers[i]).        
-00022130: 666f 7220 6920 696e 206f 7074 733a 0a20  for i in opts:. 
-00022140: 2020 2020 2020 2020 2020 2061 7267 733d             args=
-00022150: 6172 6773 2b27 7b7d 7b7d 3d7b 7d27 2e66  args+'{}{}={}'.f
-00022160: 6f72 6d61 7428 2726 2720 6966 2061 7267  ormat('&' if arg
-00022170: 7320 656c 7365 2027 272c 692c 6f70 7473  s else '',i,opts
-00022180: 5b69 5d29 0a20 2020 2020 2020 2069 6620  [i]).        if 
-00022190: 6973 696e 7374 616e 6365 2862 6173 652c  isinstance(base,
-000221a0: 7374 7229 2061 6e64 2062 6173 653a 0a20  str) and base:. 
-000221b0: 2020 2020 2020 2020 2020 2069 6620 6261             if ba
-000221c0: 7365 5b2d 315d 203d 3d20 273f 273a 0a20  se[-1] == '?':. 
-000221d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000221e0: 6574 7572 6e20 6261 7365 2b20 6172 6773  eturn base+ args
-000221f0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00022200: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00022210: 2020 2072 6574 7572 6e20 6261 7365 2b27     return base+'
-00022220: 3f27 202b 2061 7267 730a 2020 2020 2020  ?' + args.      
-00022230: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00022240: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00022250: 6261 7365 2b27 3f27 202b 2061 7267 730a  base+'?' + args.
-00022260: 2020 2020 6465 6620 6765 7428 7365 6c66      def get(self
-00022270: 2c6e 616d 653d 4e6f 6e65 293a 0a20 2020  ,name=None):.   
-00022280: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00022290: 6365 2873 656c 662e 7061 7261 6d65 7465  ce(self.paramete
-000222a0: 7273 2c64 6963 7429 3a0a 2020 2020 2020  rs,dict):.      
-000222b0: 2020 2020 2020 6966 206e 616d 6520 616e        if name an
-000222c0: 6420 6e61 6d65 2069 6e20 7365 6c66 2e70  d name in self.p
-000222d0: 6172 616d 6574 6572 733a 0a20 2020 2020  arameters:.     
-000222e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000222f0: 6e20 7365 6c66 2e70 6172 616d 6574 6572  n self.parameter
-00022300: 735b 6e61 6d65 5d0a 2020 2020 2020 2020  s[name].        
-00022310: 6966 206e 616d 6520 616e 6420 6e61 6d65  if name and name
-00022320: 2069 6e20 7365 6c66 2e5f 5f64 6963 745f   in self.__dict_
-00022330: 5f3a 0a20 2020 2020 2020 2020 2020 2072  _:.            r
-00022340: 6574 7572 6e20 7365 6c66 2e5f 5f64 6963  eturn self.__dic
-00022350: 745f 5f5b 6e61 6d65 5d0a 2020 2020 2020  t__[name].      
-00022360: 2020 7365 6c66 2e70 6172 616d 6574 6572    self.parameter
-00022370: 730a 2020 2020 6465 6620 7061 6765 7328  s.    def pages(
-00022380: 7365 6c66 293a 0a20 2020 2020 2020 2068  self):.        h
-00022390: 746d 6c5f 7061 6765 3d27 270a 2020 2020  tml_page=''.    
-000223a0: 2020 2020 6966 2073 656c 662e 7061 6765      if self.page
-000223b0: 203e 2030 203a 0a20 2020 2020 2020 2020   > 0 :.         
-000223c0: 2020 206e 6578 745f 7061 6765 3d73 656c     next_page=sel
-000223d0: 662e 7061 6765 2d31 0a20 2020 2020 2020  f.page-1.       
-000223e0: 2020 2020 206f 6f3d 7365 6c66 2e75 726c       oo=self.url
-000223f0: 2869 676e 6f72 653d 5b27 7061 6765 275d  (ignore=['page']
-00022400: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00022410: 206f 6f3a 206f 6f3d 6f6f 2b27 2627 0a20   oo: oo=oo+'&'. 
-00022420: 2020 2020 2020 2020 2020 2068 746d 6c5f             html_
-00022430: 7061 6765 3d27 2727 7b30 7d0a 2020 2020  page='''{0}.    
-00022440: 2020 2020 2020 2020 3c61 2068 7265 663d          <a href=
-00022450: 227b 317d 223e 207c 3c20 3c2f 613e 0a20  "{1}"> |< </a>. 
-00022460: 2020 2020 2020 2020 2020 203c 6120 6872             <a hr
-00022470: 6566 3d22 7b32 7d70 6167 653d 7b33 7d22  ef="{2}page={3}"
-00022480: 3e20 3c3c 203c 2f61 3e27 2727 2e66 6f72  > << </a>'''.for
-00022490: 6d61 7428 6874 6d6c 5f70 6167 652c 7365  mat(html_page,se
-000224a0: 6c66 2e75 726c 2870 6167 653d 3029 2c6f  lf.url(page=0),o
-000224b0: 6f2c 6e65 7874 5f70 6167 6529 0a20 2020  o,next_page).   
-000224c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000224d0: 2020 2020 2020 2068 746d 6c5f 7061 6765         html_page
-000224e0: 3d27 2727 7b30 7d20 7c3c 203c 3c20 2727  ='''{0} |< << ''
-000224f0: 272e 666f 726d 6174 2868 746d 6c5f 7061  '.format(html_pa
-00022500: 6765 290a 2020 2020 2020 2020 6874 6d6c  ge).        html
-00022510: 5f70 6167 653d 2727 277b 7d5b 7b7d 5d27  _page='''{}[{}]'
-00022520: 2727 2e66 6f72 6d61 7428 6874 6d6c 5f70  ''.format(html_p
-00022530: 6167 652c 7365 6c66 2e70 6167 6529 0a20  age,self.page). 
-00022540: 2020 2020 2020 2069 6620 7365 6c66 2e70         if self.p
-00022550: 6167 6520 3c20 7365 6c66 2e74 6f74 616c  age < self.total
-00022560: 5f70 6167 653a 0a20 2020 2020 2020 2020  _page:.         
-00022570: 2020 206e 6578 745f 7061 6765 3d73 656c     next_page=sel
-00022580: 662e 7061 6765 2b31 0a20 2020 2020 2020  f.page+1.       
-00022590: 2020 2020 206f 6f3d 7365 6c66 2e75 726c       oo=self.url
-000225a0: 2869 676e 6f72 653d 5b27 7061 6765 275d  (ignore=['page']
-000225b0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-000225c0: 206f 6f20 3a20 6f6f 3d6f 6f2b 2726 270a   oo : oo=oo+'&'.
-000225d0: 2020 2020 2020 2020 2020 2020 6874 6d6c              html
-000225e0: 5f70 6167 653d 2727 277b 307d 0a20 2020  _page='''{0}.   
-000225f0: 2020 2020 2020 2020 203c 6120 6872 6566           <a href
-00022600: 3d22 7b31 7d70 6167 653d 7b32 7d22 3e20  ="{1}page={2}"> 
-00022610: 3e3e 203c 2f61 3e0a 2020 2020 2020 2020  >> </a>.        
-00022620: 2020 2020 3c61 2068 7265 663d 227b 317d      <a href="{1}
-00022630: 7061 6765 3d7b 337d 223e 203e 7c20 3c2f  page={3}"> >| </
-00022640: 613e 0a20 2020 2020 2020 2020 2020 2727  a>.           ''
-00022650: 272e 666f 726d 6174 2868 746d 6c5f 7061  '.format(html_pa
-00022660: 6765 2c6f 6f2c 6e65 7874 5f70 6167 652c  ge,oo,next_page,
-00022670: 7365 6c66 2e74 6f74 616c 5f70 6167 6529  self.total_page)
-00022680: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00022690: 2020 2020 2020 2020 2020 2068 746d 6c5f             html_
-000226a0: 7061 6765 3d27 2727 7b30 7d0a 2020 2020  page='''{0}.    
-000226b0: 2020 2020 2020 2020 203e 3e20 203e 7c0a           >>  >|.
-000226c0: 2020 2020 2020 2020 2020 2027 2727 2e66             '''.f
-000226d0: 6f72 6d61 7428 6874 6d6c 5f70 6167 6529  ormat(html_page)
-000226e0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000226f0: 6874 6d6c 5f70 6167 650a 0a63 6c61 7373  html_page..class
-00022700: 2057 4542 3a0a 2020 2020 2727 270a 2020   WEB:.    '''.  
-00022710: 2020 4765 7449 503a 2067 6574 2073 6572    GetIP: get ser
-00022720: 7665 7220 6f72 2063 6c69 656e 7420 4950  ver or client IP
-00022730: 0a20 2020 2052 6571 7565 7374 3a20 7265  .    Request: re
-00022740: 7175 6573 7428 290a 2020 2020 7374 7232  quest().    str2
-00022750: 7572 6c3a 2063 6f6e 7665 7274 2073 7472  url: convert str
-00022760: 696e 6720 746f 2055 524c 2066 6f72 6d61  ing to URL forma
-00022770: 740a 2020 2020 666f 726d 3264 6963 743a  t.    form2dict:
-00022780: 2063 6f6e 7665 7274 2066 6f72 6d20 6461   convert form da
-00022790: 7461 2074 6f20 6469 6374 696f 6e61 7279  ta to dictionary
-000227a0: 2066 6f72 6d61 740a 2020 2020 2727 270a   format.    '''.
-000227b0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-000227c0: 2873 656c 662c 7265 7175 6573 743d 4e6f  (self,request=No
-000227d0: 6e65 293a 0a20 2020 2020 2020 2069 6620  ne):.        if 
-000227e0: 7265 7175 6573 743a 0a20 2020 2020 2020  request:.       
-000227f0: 2020 2020 2073 656c 662e 7265 7175 6573       self.reques
-00022800: 7473 3d72 6571 7565 7374 0a20 2020 2020  ts=request.     
-00022810: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00022820: 2020 2020 2049 6d70 6f72 7428 2769 6d70       Import('imp
-00022830: 6f72 7420 7265 7175 6573 7473 2729 0a20  ort requests'). 
-00022840: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00022850: 7265 7175 6573 7473 3d72 6571 7565 7374  requests=request
-00022860: 730a 0a20 2020 2064 6566 2053 6573 7369  s..    def Sessi
-00022870: 6f6e 2873 656c 6629 3a0a 2020 2020 2020  on(self):.      
-00022880: 2020 7265 7475 726e 2073 656c 662e 7265    return self.re
-00022890: 7175 6573 7473 2e73 6573 7369 6f6e 2e5f  quests.session._
-000228a0: 6765 745f 6f72 5f63 7265 6174 655f 7365  get_or_create_se
-000228b0: 7373 696f 6e5f 6b65 7928 290a 0a20 2020  ssion_key()..   
-000228c0: 2064 6566 2047 6574 4950 2873 656c 662c   def GetIP(self,
-000228d0: 6d6f 6465 3d27 7365 7276 6572 2729 3a0a  mode='server'):.
-000228e0: 2020 2020 2020 2020 2727 2720 0a20 2020          ''' .   
-000228f0: 2020 2020 206d 6f64 653a 0a20 2020 2020       mode:.     
-00022900: 2020 2020 2073 6572 7665 7220 3a20 6765       server : ge
-00022910: 7420 7365 7276 6572 2049 5020 2864 6566  t server IP (def
-00022920: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
-00022930: 636c 6965 6e74 203a 2067 6574 2063 6c69  client : get cli
-00022940: 656e 7420 4950 0a20 2020 2020 2020 2027  ent IP.        '
-00022950: 2727 0a20 2020 2020 2020 2069 6620 6d6f  ''.        if mo
-00022960: 6465 203d 3d20 2773 6572 7665 7227 3a0a  de == 'server':.
-00022970: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00022980: 726e 2073 656c 662e 7265 7175 6573 7473  rn self.requests
-00022990: 2e67 6574 5f68 6f73 7428 292e 7370 6c69  .get_host().spli
-000229a0: 7428 273a 2729 0a20 2020 2020 2020 2065  t(':').        e
-000229b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000229c0: 2078 5f66 6f72 7761 7264 6564 5f66 6f72   x_forwarded_for
-000229d0: 203d 2073 656c 662e 7265 7175 6573 7473   = self.requests
-000229e0: 2e4d 4554 412e 6765 7428 2748 5454 505f  .META.get('HTTP_
-000229f0: 585f 464f 5257 4152 4445 445f 464f 5227  X_FORWARDED_FOR'
-00022a00: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00022a10: 2078 5f66 6f72 7761 7264 6564 5f66 6f72   x_forwarded_for
-00022a20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00022a30: 2020 7265 7475 726e 2078 5f66 6f72 7761    return x_forwa
-00022a40: 7264 6564 5f66 6f72 2e73 706c 6974 2827  rded_for.split('
-00022a50: 2c27 295b 305d 0a20 2020 2020 2020 2020  ,')[0].         
-00022a60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00022a70: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00022a80: 7365 6c66 2e72 6571 7565 7374 732e 4d45  self.requests.ME
-00022a90: 5441 2e67 6574 2827 5245 4d4f 5445 5f41  TA.get('REMOTE_A
-00022aa0: 4444 5227 290a 0a20 2020 2064 6566 204d  DDR')..    def M
-00022ab0: 6574 686f 6428 7365 6c66 2c6d 6574 686f  ethod(self,metho
-00022ac0: 645f 6e61 6d65 3d4e 6f6e 652c 6d6f 6465  d_name=None,mode
-00022ad0: 3d27 6c6f 7765 7227 293a 0a20 2020 2020  ='lower'):.     
-00022ae0: 2020 206d 6574 686f 645f 6e3d 7365 6c66     method_n=self
-00022af0: 2e72 6571 7565 7374 732e 6d65 7468 6f64  .requests.method
-00022b00: 0a20 2020 2020 2020 2069 6620 6d65 7468  .        if meth
-00022b10: 6f64 5f6e 616d 653a 0a20 2020 2020 2020  od_name:.       
-00022b20: 2020 2020 2072 6574 7572 6e20 6d65 7468       return meth
-00022b30: 6f64 5f6e 616d 652e 6c6f 7765 7228 2920  od_name.lower() 
-00022b40: 3d3d 206d 6574 686f 645f 6e2e 6c6f 7765  == method_n.lowe
-00022b50: 7228 290a 2020 2020 2020 2020 656c 7365  r().        else
-00022b60: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00022b70: 206d 6f64 6520 3d3d 2027 7570 7065 7227   mode == 'upper'
-00022b80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00022b90: 2020 7265 7475 726e 206d 6574 686f 645f    return method_
-00022ba0: 6e2e 7570 7065 7228 290a 2020 2020 2020  n.upper().      
-00022bb0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00022bc0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00022bd0: 726e 206d 6574 686f 645f 6e2e 6c6f 7765  rn method_n.lowe
-00022be0: 7228 290a 0a20 2020 2064 6566 2052 6571  r()..    def Req
-00022bf0: 7565 7374 2873 656c 662c 686f 7374 5f75  uest(self,host_u
-00022c00: 726c 2c2a 2a6f 7074 7329 3a0a 2020 2020  rl,**opts):.    
-00022c10: 2020 2020 2727 270a 2020 2020 2020 2020      '''.        
-00022c20: 7573 6572 2026 2070 6173 7377 6f72 643a  user & password:
-00022c30: 2073 7472 696e 6720 666f 726d 6174 0a20   string format. 
-00022c40: 2020 2020 2020 2061 7574 683a 2074 7570         auth: tup
-00022c50: 6c65 2066 6f72 6d61 740a 2020 2020 2020  le format.      
-00022c60: 2020 6461 7461 3a20 6469 6374 696f 6e61    data: dictiona
-00022c70: 7279 2066 6f72 6d61 740a 2020 2020 2020  ry format.      
-00022c80: 2020 6a73 6f6e 3a20 6469 6374 696f 6e61    json: dictiona
-00022c90: 7279 202f 204a 534f 4e20 666f 726d 6174  ry / JSON format
-00022ca0: 0a20 2020 2020 2020 2066 696c 6573 3a20  .        files: 
-00022cb0: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
-00022cc0: 740a 2020 2020 2020 2020 2020 2065 7829  t.           ex)
-00022cd0: 2066 696c 6573 203d 207b 2027 3c66 696c   files = { '<fil
-00022ce0: 6520 7061 7261 6d65 7465 7220 6e61 6d65  e parameter name
-00022cf0: 3e27 3a20 283c 6669 6c65 6e61 6d65 3e2c  >': (<filename>,
-00022d00: 206f 7065 6e28 3c66 696c 656e 616d 653e   open(<filename>
-00022d10: 2c27 7262 2729 297d 0a20 2020 2020 2020  ,'rb'))}.       
-00022d20: 2068 6561 6465 7273 3a20 7374 7269 6e67   headers: string
-00022d30: 206f 7220 6469 6374 696f 6e61 7279 2066   or dictionary f
-00022d40: 6f72 6d61 740a 2020 2020 2020 2020 2020  ormat.          
-00022d50: 202d 2073 7472 696e 6720 6578 616d 706c   - string exampl
-00022d60: 650a 2020 2020 2020 2020 2020 2020 2068  e.             h
-00022d70: 6561 6465 7273 3d27 6a73 6f6e 270a 2020  eaders='json'.  
-00022d80: 2020 2020 2020 2020 2020 2072 6571 7569             requi
-00022d90: 7265 6420 6461 7461 206f 7220 6a73 6f6e  red data or json
-00022da0: 200a 2020 2020 2020 2020 2020 202d 2064   .           - d
-00022db0: 6963 7469 6f6e 6172 7920 6578 616d 706c  ictionary exampl
-00022dc0: 650a 2020 2020 2020 2020 2020 2020 2068  e.             h
-00022dd0: 6561 6465 7273 203d 207b 2022 436f 6e74  eaders = { "Cont
-00022de0: 656e 742d 5479 7065 223a 2022 6170 706c  ent-Type": "appl
-00022df0: 6963 6174 696f 6e2f 6a73 6f6e 227d 0a20  ication/json"}. 
-00022e00: 2020 2020 2020 2064 6267 203a 2054 7275         dbg : Tru
-00022e10: 653a 2073 686f 7720 6465 6275 6769 6e67  e: show debuging
-00022e20: 206c 6f67 2864 6566 6175 6c74 292c 2046   log(default), F
-00022e30: 616c 7365 2069 676e 6f72 6520 6465 6275  alse ignore debu
-00022e40: 6767 696e 6720 6c6f 670a 2020 2020 2020  gging log.      
-00022e50: 2020 7069 6e67 3a20 5472 7565 3a20 4368    ping: True: Ch
-00022e60: 6563 6b20 6465 7374 2049 5020 7769 7468  eck dest IP with
-00022e70: 2070 696e 672c 2046 616c 7365 3a20 6e6f   ping, False: no
-00022e80: 7420 6368 6563 6b20 6465 7374 2049 5020  t check dest IP 
-00022e90: 2864 6566 6175 6c74 290a 2020 2020 2020  (default).      
-00022ea0: 2020 6d61 785f 7472 793a 2064 6566 6175    max_try: defau
-00022eb0: 6c74 2033 2c20 7265 7472 7920 6d61 7820  lt 3, retry max 
-00022ec0: 6e75 6d62 6572 2077 6865 6e20 6661 696c  number when fail
-00022ed0: 6564 0a20 2020 2020 2020 206d 6f64 653a  ed.        mode:
-00022ee0: 2064 6566 6175 6c74 2067 6574 2c20 2867   default get, (g
-00022ef0: 6574 2c70 6f73 742c 7061 7463 6829 0a20  et,post,patch). 
-00022f00: 2020 2020 2020 2069 703a 2064 6573 7420         ip: dest 
-00022f10: 4950 0a20 2020 2020 2020 2070 6f72 743a  IP.        port:
-00022f20: 2064 6566 6175 6c74 2038 3020 6f72 2034   default 80 or 4
-00022f30: 3433 2c20 6172 7263 6f72 6469 6e67 2074  43, arrcording t
-00022f40: 6f20 6874 7470 206f 7220 6874 7470 732c  o http or https,
-00022f50: 2069 6620 796f 7520 7761 6e74 2073 7065   if you want spe
-00022f60: 6369 616c 2070 6f72 7420 7468 656e 2074  cial port then t
-00022f70: 7970 650a 2020 2020 2020 2020 626d 633a  ype.        bmc:
-00022f80: 2064 6566 6175 6c74 2046 616c 7365 2c20   default False, 
-00022f90: 5472 7565 2074 6865 6e20 6175 746f 6d61  True then automa
-00022fa0: 7469 6361 6c6c 2063 6865 636b 2042 4d43  ticall check BMC
-00022fb0: 2070 6f72 740a 2020 2020 2020 2020 7469   port.        ti
-00022fc0: 6d65 6f75 743a 2072 6571 7565 7374 2074  meout: request t
-00022fd0: 696d 656f 7574 2028 7365 636f 6e64 7329  imeout (seconds)
-00022fe0: 2c20 6465 6661 756c 7420 4e6f 6e65 0a20  , default None. 
-00022ff0: 2020 2020 2020 2027 2727 0a20 2020 2020         '''.     
-00023000: 2020 2023 2072 656d 6f76 6520 5353 4c20     # remove SSL 
-00023010: 7761 7269 6e67 2065 7272 6f72 206d 6573  waring error mes
-00023020: 7361 6765 2028 7465 7374 290a 2020 2020  sage (test).    
-00023030: 2020 2020 7365 6c66 2e72 6571 7565 7374      self.request
-00023040: 732e 7061 636b 6167 6573 2e75 726c 6c69  s.packages.urlli
-00023050: 6233 2e64 6973 6162 6c65 5f77 6172 6e69  b3.disable_warni
-00023060: 6e67 7328 290a 0a20 2020 2020 2020 2069  ngs()..        i
-00023070: 703d 6f70 7473 2e67 6574 2827 6970 272c  p=opts.get('ip',
-00023080: 4e6f 6e65 290a 2020 2020 2020 2020 706f  None).        po
-00023090: 7274 3d6f 7074 732e 6765 7428 2770 6f72  rt=opts.get('por
-000230a0: 7427 2c4e 6f6e 6529 0a20 2020 2020 2020  t',None).       
-000230b0: 2062 6d63 3d6f 7074 732e 6765 7428 2762   bmc=opts.get('b
-000230c0: 6d63 272c 4661 6c73 6529 0a20 2020 2020  mc',False).     
-000230d0: 2020 206d 6f64 653d 6f70 7473 2e67 6574     mode=opts.get
-000230e0: 2827 6d6f 6465 272c 6f70 7473 2e67 6574  ('mode',opts.get
-000230f0: 2827 6d65 7468 6f64 272c 2767 6574 2729  ('method','get')
-00023100: 290a 2020 2020 2020 2020 6d61 785f 7472  ).        max_tr
-00023110: 793d 6f70 7473 2e67 6574 2827 6d61 785f  y=opts.get('max_
-00023120: 7472 7927 2c6f 7074 732e 6765 7428 2772  try',opts.get('r
-00023130: 6574 7279 272c 6f70 7473 2e67 6574 2827  etry',opts.get('
-00023140: 6c6f 6f70 272c 6f70 7473 2e67 6574 2827  loop',opts.get('
-00023150: 7472 7927 2c33 2929 2929 2023 2052 6574  try',3)))) # Ret
-00023160: 7279 206d 6178 206e 756d 6265 720a 2020  ry max number.  
-00023170: 2020 2020 2020 6175 7468 3d6f 7074 732e        auth=opts.
-00023180: 6765 7428 2761 7574 6827 2c4e 6f6e 6529  get('auth',None)
-00023190: 0a20 2020 2020 2020 2075 7365 723d 6f70  .        user=op
-000231a0: 7473 2e67 6574 2827 7573 6572 272c 4e6f  ts.get('user',No
-000231b0: 6e65 290a 2020 2020 2020 2020 7061 7373  ne).        pass
-000231c0: 7764 3d6f 7074 732e 6765 7428 2770 6173  wd=opts.get('pas
-000231d0: 7377 6427 2c4e 6f6e 6529 0a20 2020 2020  swd',None).     
-000231e0: 2020 2064 6174 613d 6f70 7473 2e67 6574     data=opts.get
-000231f0: 2827 6461 7461 272c 4e6f 6e65 2920 2320  ('data',None) # 
-00023200: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
-00023210: 740a 2020 2020 2020 2020 6a73 6f6e 5f64  t.        json_d
-00023220: 6174 613d 6f70 7473 2e67 6574 2827 6a73  ata=opts.get('js
-00023230: 6f6e 272c 4e6f 6e65 2920 2320 6469 6374  on',None) # dict
-00023240: 696f 6e61 7279 2066 6f72 6d61 740a 2020  ionary format.  
-00023250: 2020 2020 2020 6669 6c65 733d 6f70 7473        files=opts
-00023260: 2e67 6574 2827 6669 6c65 7327 2c4e 6f6e  .get('files',Non
-00023270: 6529 2023 2064 6963 7469 6f6e 6172 7920  e) # dictionary 
-00023280: 666f 726d 6174 0a20 2020 2020 2020 2072  format.        r
-00023290: 6571 7565 7374 5f75 726c 3d6f 7074 732e  equest_url=opts.
-000232a0: 6765 7428 2772 6571 7565 7374 5f75 726c  get('request_url
-000232b0: 272c 4e6f 6e65 290a 2020 2020 2020 2020  ',None).        
-000232c0: 6462 673d 6f70 7473 2e67 6574 2827 6462  dbg=opts.get('db
-000232d0: 6727 2c54 7275 6529 2020 2320 7368 6f77  g',True)  # show
-000232e0: 2064 6562 7567 6769 6e67 206c 6f67 0a20   debugging log. 
-000232f0: 2020 2020 2020 2070 696e 673d 6f70 7473         ping=opts
-00023300: 2e67 6574 2827 7069 6e67 272c 4661 6c73  .get('ping',Fals
-00023310: 6529 2023 2063 6865 636b 2070 696e 6720  e) # check ping 
-00023320: 746f 2049 500a 2020 2020 2020 2020 7469  to IP.        ti
-00023330: 6d65 6f75 743d 6f70 7473 2e67 6574 2827  meout=opts.get('
-00023340: 7469 6d65 6f75 7427 2c4e 6f6e 6529 2023  timeout',None) #
-00023350: 2072 6571 7565 7374 2074 696d 656f 7574   request timeout
-00023360: 0a20 2020 2020 2020 2072 6571 5f64 6174  .        req_dat
-00023370: 613d 7b7d 0a20 2020 2020 2020 2063 686b  a={}.        chk
-00023380: 5f64 6573 743d 4e6f 6e65 0a20 2020 2020  _dest=None.     
-00023390: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-000233a0: 2874 696d 656f 7574 2c69 6e74 293a 2072  (timeout,int): r
-000233b0: 6571 5f64 6174 615b 2774 696d 656f 7574  eq_data['timeout
-000233c0: 275d 3d74 696d 656f 7574 0a20 2020 2020  ']=timeout.     
-000233d0: 2020 2069 6620 6f70 7473 2e67 6574 2827     if opts.get('
-000233e0: 6874 7470 7327 293a 2072 6571 5f64 6174  https'): req_dat
-000233f0: 615b 2776 6572 6966 7927 5d3d 4661 6c73  a['verify']=Fals
-00023400: 650a 2020 2020 2020 2020 6966 2054 7970  e.        if Typ
-00023410: 6528 6175 7468 2c27 7475 706c 6527 2c64  e(auth,'tuple',d
-00023420: 6174 613d 5472 7565 293a 0a20 2020 2020  ata=True):.     
-00023430: 2020 2020 2020 2072 6571 5f64 6174 615b         req_data[
-00023440: 2761 7574 6827 5d3d 6f70 7473 2e67 6574  'auth']=opts.get
-00023450: 2827 6175 7468 2729 0a20 2020 2020 2020  ('auth').       
-00023460: 2065 6c69 6620 5479 7065 2875 7365 722c   elif Type(user,
-00023470: 2773 7472 272c 6461 7461 3d54 7275 6529  'str',data=True)
-00023480: 2061 6e64 2054 7970 6528 7061 7373 7764   and Type(passwd
-00023490: 2c27 7374 7227 2c64 6174 613d 5472 7565  ,'str',data=True
-000234a0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-000234b0: 6571 5f64 6174 615b 2761 7574 6827 5d3d  eq_data['auth']=
-000234c0: 2875 7365 722c 7061 7373 7764 290a 2020  (user,passwd).  
-000234d0: 2020 2020 2020 6966 2054 7970 6528 6461        if Type(da
-000234e0: 7461 2c27 6469 6374 272c 6461 7461 3d54  ta,'dict',data=T
-000234f0: 7275 6529 3a20 7265 715f 6461 7461 5b27  rue): req_data['
-00023500: 6461 7461 275d 3d6f 7074 732e 6765 7428  data']=opts.get(
-00023510: 2764 6174 6127 290a 2020 2020 2020 2020  'data').        
-00023520: 6966 2054 7970 6528 6a73 6f6e 5f64 6174  if Type(json_dat
-00023530: 612c 2764 6963 7427 2c64 6174 613d 5472  a,'dict',data=Tr
-00023540: 7565 293a 2072 6571 5f64 6174 615b 276a  ue): req_data['j
-00023550: 736f 6e27 5d3d 6a73 6f6e 5f64 6174 610a  son']=json_data.
-00023560: 2020 2020 2020 2020 2020 2020 0a20 2020              .   
-00023570: 2020 2020 2069 6620 5479 7065 2866 696c       if Type(fil
-00023580: 6573 2c27 6469 6374 272c 6461 7461 3d54  es,'dict',data=T
-00023590: 7275 6529 3a20 7265 715f 6461 7461 5b27  rue): req_data['
-000235a0: 6669 6c65 7327 5d3d 6f70 7473 2e67 6574  files']=opts.get
-000235b0: 2827 6669 6c65 7327 290a 2020 2020 2020  ('files').      
-000235c0: 2020 6865 6164 6572 733d 6f70 7473 2e67    headers=opts.g
-000235d0: 6574 2827 6865 6164 6572 7327 2920 2320  et('headers') # 
-000235e0: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
-000235f0: 740a 2020 2020 2020 2020 6966 2054 7970  t.        if Typ
-00023600: 6528 6865 6164 6572 732c 2773 7472 272c  e(headers,'str',
-00023610: 6461 7461 3d54 7275 6529 3a0a 2020 2020  data=True):.    
-00023620: 2020 2020 2020 2020 6966 2068 6561 6465          if heade
-00023630: 7273 203d 3d20 276a 736f 6e27 3a0a 2020  rs == 'json':.  
-00023640: 2020 2020 2020 2020 2020 2020 2020 6865                he
-00023650: 6164 6572 733d 7b20 2243 6f6e 7465 6e74  aders={ "Content
-00023660: 2d54 7970 6522 3a20 2261 7070 6c69 6361  -Type": "applica
-00023670: 7469 6f6e 2f6a 736f 6e22 7d0a 2020 2020  tion/json"}.    
-00023680: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-00023690: 6174 613a 0a20 2020 2020 2020 2020 2020  ata:.           
-000236a0: 2020 2020 2020 2020 2064 6174 613d 6a73           data=js
-000236b0: 6f6e 2e64 756d 7073 2864 6174 6129 0a20  on.dumps(data). 
-000236c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000236d0: 2020 2072 6571 5f64 6174 615b 2764 6174     req_data['dat
-000236e0: 6127 5d3d 6461 7461 0a20 2020 2020 2020  a']=data.       
-000236f0: 2020 2020 2020 2020 2065 6c69 6620 6a73           elif js
-00023700: 6f6e 5f64 6174 613a 0a20 2020 2020 2020  on_data:.       
-00023710: 2020 2020 2020 2020 2020 2020 2064 6174               dat
-00023720: 613d 6a73 6f6e 2e64 756d 7073 286a 736f  a=json.dumps(jso
-00023730: 6e5f 6461 7461 290a 2020 2020 2020 2020  n_data).        
-00023740: 2020 2020 2020 2020 2020 2020 6966 2027              if '
-00023750: 6a73 6f6e 2720 696e 2072 6571 5f64 6174  json' in req_dat
-00023760: 613a 2072 6571 5f64 6174 612e 706f 7028  a: req_data.pop(
-00023770: 276a 736f 6e27 290a 2020 2020 2020 2020  'json').        
-00023780: 2020 2020 2020 2020 2020 2020 7265 715f              req_
-00023790: 6461 7461 5b27 6461 7461 275d 3d64 6174  data['data']=dat
-000237a0: 610a 2020 2020 2020 2020 656c 6966 2054  a.        elif T
-000237b0: 7970 6528 6865 6164 6572 732c 2764 6963  ype(headers,'dic
-000237c0: 7427 2c64 6174 613d 5472 7565 293a 0a20  t',data=True):. 
-000237d0: 2020 2020 2020 2020 2020 2072 6571 5f64             req_d
-000237e0: 6174 615b 2768 6561 6465 7273 275d 3d68  ata['headers']=h
-000237f0: 6561 6465 7273 0a20 2020 2020 2020 2069  eaders.        i
-00023800: 6620 6e6f 7420 4973 4e6f 6e65 2869 7029  f not IsNone(ip)
-00023810: 3a0a 2020 2020 2020 2020 2020 2020 6970  :.            ip
-00023820: 3d49 7056 3428 6970 2c6f 7574 3d73 7472  =IpV4(ip,out=str
-00023830: 290a 2020 2020 2020 2020 2020 2020 6368  ).            ch
-00023840: 6b5f 6465 7374 3d27 7b7d 272e 666f 726d  k_dest='{}'.form
-00023850: 6174 2869 7029 0a20 2020 2020 2020 2020  at(ip).         
-00023860: 2020 2069 6620 7265 715f 6461 7461 2e67     if req_data.g
-00023870: 6574 2827 7665 7269 6679 272c 5472 7565  et('verify',True
-00023880: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00023890: 2020 2068 6f73 745f 7572 6c3d 2768 7474     host_url='htt
-000238a0: 703a 2f2f 7b7d 272e 666f 726d 6174 2869  p://{}'.format(i
-000238b0: 7029 0a20 2020 2020 2020 2020 2020 2065  p).            e
-000238c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000238d0: 2020 2020 2068 6f73 745f 7572 6c3d 2768       host_url='h
-000238e0: 7474 7073 3a2f 2f7b 7d27 2e66 6f72 6d61  ttps://{}'.forma
-000238f0: 7428 6970 290a 2020 2020 2020 2020 2020  t(ip).          
-00023900: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
-00023910: 706f 7274 293a 2068 6f73 745f 7572 6c3d  port): host_url=
-00023920: 277b 7d3a 7b7d 272e 666f 726d 6174 2868  '{}:{}'.format(h
-00023930: 6f73 745f 7572 6c2c 706f 7274 290a 2020  ost_url,port).  
-00023940: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00023950: 2049 734e 6f6e 6528 7265 7175 6573 745f   IsNone(request_
-00023960: 7572 6c29 3a20 686f 7374 5f75 726c 3d27  url): host_url='
-00023970: 7b7d 2f7b 7d27 2e66 6f72 6d61 7428 686f  {}/{}'.format(ho
-00023980: 7374 5f75 726c 2c72 6571 7565 7374 5f75  st_url,request_u
-00023990: 726c 290a 2020 2020 2020 2020 656c 6966  rl).        elif
-000239a0: 2054 7970 6528 686f 7374 5f75 726c 2c27   Type(host_url,'
-000239b0: 7374 7227 2c64 6174 613d 5472 7565 2920  str',data=True) 
-000239c0: 616e 6420 686f 7374 5f75 726c 2e73 7461  and host_url.sta
-000239d0: 7274 7377 6974 6828 2768 7474 7027 293a  rtswith('http'):
-000239e0: 0a20 2020 2020 2020 2020 2020 2063 686b  .            chk
-000239f0: 5f64 6573 743d 7265 2e63 6f6d 7069 6c65  _dest=re.compile
-00023a00: 2827 2868 7474 707c 6874 7470 7329 3a2f  ('(http|https):/
-00023a10: 2f28 5b61 2d7a 412d 5a30 2d39 2e5d 2a29  /([a-zA-Z0-9.]*)
-00023a20: 5b3a 2f5d 2729 2e66 696e 6461 6c6c 2868  [:/]').findall(h
-00023a30: 6f73 745f 7572 6c29 0a20 2020 2020 2020  ost_url).       
-00023a40: 2020 2020 2069 6620 6c65 6e28 6368 6b5f       if len(chk_
-00023a50: 6465 7374 293d 3d30 3a0a 2020 2020 2020  dest)==0:.      
-00023a60: 2020 2020 2020 2020 2020 6368 6b5f 6465            chk_de
-00023a70: 7374 3d72 652e 636f 6d70 696c 6528 2728  st=re.compile('(
-00023a80: 6874 7470 7c68 7474 7073 293a 2f2f 285b  http|https)://([
-00023a90: 612d 7a41 2d5a 302d 392e 5d2a 2927 292e  a-zA-Z0-9.]*)').
-00023aa0: 6669 6e64 616c 6c28 686f 7374 5f75 726c  findall(host_url
-00023ab0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00023ac0: 206c 656e 2863 686b 5f64 6573 7429 3a0a   len(chk_dest):.
-00023ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023ae0: 6368 6b5f 6465 7374 3d63 686b 5f64 6573  chk_dest=chk_des
-00023af0: 745b 305d 5b31 5d0a 2020 2020 2020 2020  t[0][1].        
-00023b00: 2020 2020 2020 2020 6966 2068 6f73 745f          if host_
-00023b10: 7572 6c2e 6669 6e64 2827 6874 7470 733a  url.find('https:
-00023b20: 2f2f 2729 203d 3d20 303a 0a20 2020 2020  //') == 0:.     
-00023b30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00023b40: 6571 5f64 6174 615b 2776 6572 6966 7927  eq_data['verify'
-00023b50: 5d3d 4661 6c73 650a 2020 2020 2020 2020  ]=False.        
-00023b60: 6966 2049 734e 6f6e 6528 6368 6b5f 6465  if IsNone(chk_de
-00023b70: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
-00023b80: 2072 6574 7572 6e20 4661 6c73 652c 2768   return False,'h
-00023b90: 6f73 745f 7572 6c20 6f72 2069 7020 6e6f  ost_url or ip no
-00023ba0: 7420 666f 756e 6427 0a20 2020 2020 2020  t found'.       
-00023bb0: 2069 6620 626d 633a 0a20 2020 2020 2020   if bmc:.       
-00023bc0: 2020 2020 2069 6620 4970 5634 2863 686b       if IpV4(chk
-00023bd0: 5f64 6573 742c 626d 633d 5472 7565 2920  _dest,bmc=True) 
-00023be0: 6973 2046 616c 7365 3a0a 2020 2020 2020  is False:.      
-00023bf0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00023c00: 2046 616c 7365 2c27 5468 6520 4950 287b   False,'The IP({
-00023c10: 7d29 2069 7320 6e6f 7420 424d 4320 4950  }) is not BMC IP
-00023c20: 272e 666f 726d 6174 2863 686b 5f64 6573  '.format(chk_des
-00023c30: 7429 0a20 2020 2020 2020 2069 6620 7069  t).        if pi
-00023c40: 6e67 2061 6e64 2063 686b 5f64 6573 743a  ng and chk_dest:
-00023c50: 0a20 2020 2020 2020 2020 2020 2070 696e  .            pin
-00023c60: 675f 7263 3d70 696e 6728 6368 6b5f 6465  g_rc=ping(chk_de
-00023c70: 7374 2c74 696d 656f 7574 5f73 6563 3d33  st,timeout_sec=3
-00023c80: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00023c90: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-00023ca0: 7069 6e67 5f72 632c 626f 6f6c 2920 616e  ping_rc,bool) an
-00023cb0: 6420 7069 6e67 5f72 633d 3d30 3a0a 2020  d ping_rc==0:.  
-00023cc0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00023cd0: 7475 726e 2030 2c27 4361 6e63 656c 6564  turn 0,'Canceled
-00023ce0: 270a 2020 2020 2020 2020 2020 2020 656c  '.            el
-00023cf0: 6966 206e 6f74 2070 696e 675f 7263 3a0a  if not ping_rc:.
-00023d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023d10: 7265 7475 726e 2046 616c 7365 2c27 4361  return False,'Ca
-00023d20: 6e20 6e6f 7420 6163 6365 7373 2074 6f20  n not access to 
-00023d30: 6465 7374 696e 6174 696f 6e28 7b7d 2927  destination({})'
-00023d40: 2e66 6f72 6d61 7428 6368 6b5f 6465 7374  .format(chk_dest
-00023d50: 290a 2020 2020 2020 2020 7373 203d 2073  ).        ss = s
-00023d60: 656c 662e 7265 7175 6573 7473 2e53 6573  elf.requests.Ses
-00023d70: 7369 6f6e 2829 0a20 2020 2020 2020 2065  sion().        e
-00023d80: 7272 5f6d 7367 3d27 270a 2020 2020 2020  rr_msg=''.      
-00023d90: 2020 666f 7220 6a20 696e 2072 616e 6765    for j in range
-00023da0: 2830 2c6d 6178 5f74 7279 293a 0a20 2020  (0,max_try):.   
-00023db0: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
-00023dc0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00023dd0: 2049 7353 616d 6528 6d6f 6465 2c27 706f   IsSame(mode,'po
-00023de0: 7374 2729 3a0a 2020 2020 2020 2020 2020  st'):.          
-00023df0: 2020 2020 2020 2020 2020 7220 3d73 732e            r =ss.
-00023e00: 706f 7374 2868 6f73 745f 7572 6c2c 2a2a  post(host_url,**
-00023e10: 7265 715f 6461 7461 290a 2020 2020 2020  req_data).      
-00023e20: 2020 2020 2020 2020 2020 656c 6966 2049            elif I
-00023e30: 7353 616d 6528 6d6f 6465 2c27 7061 7463  sSame(mode,'patc
-00023e40: 6827 293a 0a20 2020 2020 2020 2020 2020  h'):.           
-00023e50: 2020 2020 2020 2020 2072 203d 7373 2e70           r =ss.p
-00023e60: 6174 6368 2868 6f73 745f 7572 6c2c 2a2a  atch(host_url,**
-00023e70: 7265 715f 6461 7461 290a 2020 2020 2020  req_data).      
-00023e80: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00023e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023ea0: 2020 2020 7220 3d73 732e 6765 7428 686f      r =ss.get(ho
-00023eb0: 7374 5f75 726c 2c2a 2a72 6571 5f64 6174  st_url,**req_dat
-00023ec0: 6129 0a20 2020 2020 2020 2020 2020 2020  a).             
-00023ed0: 2020 2072 6574 7572 6e20 5472 7565 2c72     return True,r
-00023ee0: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-00023ef0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-00023f00: 2020 2020 2070 6173 730a 2020 2020 2020       pass.      
-00023f10: 2020 2020 2020 2365 7863 6570 7420 7265        #except re
-00023f20: 7175 6573 7473 2e65 7863 6570 7469 6f6e  quests.exception
-00023f30: 732e 5265 7175 6573 7445 7863 6570 7469  s.RequestExcepti
-00023f40: 6f6e 2061 7320 653a 0a20 2020 2020 2020  on as e:.       
-00023f50: 2020 2020 2065 7272 5f6d 7367 3d27 5365       err_msg='Se
-00023f60: 7276 6572 287b 7d29 2068 6173 206e 6f20  rver({}) has no 
-00023f70: 7265 7370 6f6e 7365 272e 666f 726d 6174  response'.format
-00023f80: 2863 686b 5f64 6573 7429 0a20 2020 2020  (chk_dest).     
-00023f90: 2020 2020 2020 2069 6620 6462 673a 2053         if dbg: S
-00023fa0: 7464 4572 7228 225c 6e53 6572 7665 7228  tdErr("\nServer(
-00023fb0: 7b7d 2920 6861 7320 6e6f 2072 6573 706f  {}) has no respo
-00023fc0: 6e73 6520 2877 6169 7420 7b7d 2f7b 7d20  nse (wait {}/{} 
-00023fd0: 2831 3073 2929 222e 666f 726d 6174 2863  (10s))".format(c
-00023fe0: 686b 5f64 6573 742c 6a2c 6d61 785f 7472  hk_dest,j,max_tr
-00023ff0: 7929 290a 2020 2020 2020 2020 2020 2020  y)).            
-00024000: 7469 6d65 2e73 6c65 6570 2831 3029 0a20  time.sleep(10). 
-00024010: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-00024020: 6c73 652c 2754 696d 654f 7574 3a20 7b7d  lse,'TimeOut: {}
-00024030: 272e 666f 726d 6174 2865 7272 5f6d 7367  '.format(err_msg
-00024040: 2920 6966 2065 7272 5f6d 7367 2065 6c73  ) if err_msg els
-00024050: 6520 2754 696d 654f 7574 270a 0a20 2020  e 'TimeOut'..   
-00024060: 2064 6566 2073 7472 3275 726c 2873 656c   def str2url(sel
-00024070: 662c 7374 7269 6e67 293a 0a20 2020 2020  f,string):.     
-00024080: 2020 2069 6620 4973 4e6f 6e65 2873 7472     if IsNone(str
-00024090: 696e 6729 3a20 7265 7475 726e 2027 270a  ing): return ''.
-000240a0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-000240b0: 7461 6e63 6528 7374 7269 6e67 2c73 7472  tance(string,str
-000240c0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-000240d0: 6574 7572 6e20 7374 7269 6e67 2e72 6570  eturn string.rep
-000240e0: 6c61 6365 2827 2b27 2c27 2532 4227 292e  lace('+','%2B').
-000240f0: 7265 706c 6163 6528 273f 272c 2725 3346  replace('?','%3F
-00024100: 2729 2e72 6570 6c61 6365 2827 2f27 2c27  ').replace('/','
-00024110: 2532 4627 292e 7265 706c 6163 6528 273a  %2F').replace(':
-00024120: 272c 2725 3341 2729 2e72 6570 6c61 6365  ','%3A').replace
-00024130: 2827 3d27 2c27 2533 4427 292e 7265 706c  ('=','%3D').repl
-00024140: 6163 6528 2720 272c 272b 2729 0a20 2020  ace(' ','+').   
-00024150: 2020 2020 2072 6574 7572 6e20 7374 7269       return stri
-00024160: 6e67 0a0a 2020 2020 6465 6620 666f 726d  ng..    def form
-00024170: 3264 6963 7428 7365 6c66 2c73 7263 3d4e  2dict(self,src=N
-00024180: 6f6e 6529 3a0a 2020 2020 2020 2020 6966  one):.        if
-00024190: 2049 734e 6f6e 6528 7372 6329 3a20 7372   IsNone(src): sr
-000241a0: 633d 7365 6c66 2e72 6571 7565 7374 732e  c=self.requests.
-000241b0: 666f 726d 0a20 2020 2020 2020 2072 6574  form.        ret
-000241c0: 7572 6e20 4469 6374 2873 7263 290a 0a20  urn Dict(src).. 
-000241d0: 2020 2064 6566 2068 6967 686c 6967 6874     def highlight
-000241e0: 2873 656c 662c 7374 7269 6e67 732c 6669  (self,strings,fi
-000241f0: 6e64 2c63 6f6c 6f72 3d27 2366 6666 6634  nd,color='#ffff4
-00024200: 3227 293a 0a20 2020 2020 2020 2069 6620  2'):.        if 
-00024210: 6973 696e 7374 616e 6365 2873 7472 696e  isinstance(strin
-00024220: 6773 2c73 7472 293a 0a20 2020 2020 2020  gs,str):.       
-00024230: 2020 2020 2066 663d 7265 2e63 6f6d 7069       ff=re.compi
-00024240: 6c65 2866 696e 642c 7265 2e49 290a 2020  le(find,re.I).  
-00024250: 2020 2020 2020 2020 2020 616c 6c5f 6666            all_ff
-00024260: 3d66 662e 6669 6e64 616c 6c28 7374 7269  =ff.findall(stri
-00024270: 6e67 7329 0a20 2020 2020 2020 2020 2020  ngs).           
-00024280: 2069 6620 6c65 6e28 616c 6c5f 6666 2920   if len(all_ff) 
-00024290: 3e30 3a0a 2020 2020 2020 2020 2020 2020  >0:.            
-000242a0: 2020 2020 666f 7220 6d6d 2069 6e20 616c      for mm in al
-000242b0: 6c5f 6666 3a0a 2020 2020 2020 2020 2020  l_ff:.          
-000242c0: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-000242d0: 733d 7374 7269 6e67 732e 7265 706c 6163  s=strings.replac
-000242e0: 6528 6d6d 2c27 2727 3c66 6f6e 7420 7374  e(mm,'''<font st
-000242f0: 796c 653d 2262 6163 6b67 726f 756e 642d  yle="background-
-00024300: 636f 6c6f 723a 7b31 7d22 3e7b 307d 3c2f  color:{1}">{0}</
-00024310: 666f 6e74 3e27 2727 2e66 6f72 6d61 7428  font>'''.format(
-00024320: 6d6d 2c63 6f6c 6f72 2929 0a20 2020 2020  mm,color)).     
-00024330: 2020 2072 6574 7572 6e20 7374 7269 6e67     return string
-00024340: 730a 0a0a 636c 6173 7320 5449 4d45 3a0a  s...class TIME:.
-00024350: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00024360: 2873 656c 662c 7372 633d 4e6f 6e65 2c74  (self,src=None,t
-00024370: 696d 657a 6f6e 653d 4e6f 6e65 293a 0a20  imezone=None):. 
-00024380: 2020 2020 2020 2073 656c 662e 7469 6d65         self.time
-00024390: 7a6f 6e65 3d74 696d 657a 6f6e 650a 2020  zone=timezone.  
-000243a0: 2020 2020 2020 7365 6c66 2e69 6e69 745f        self.init_
-000243b0: 7469 6d65 3d73 656c 662e 4e6f 7728 7469  time=self.Now(ti
-000243c0: 6d65 7a6f 6e65 3d74 696d 657a 6f6e 6529  mezone=timezone)
-000243d0: 0a20 2020 2020 2020 2073 656c 662e 6c69  .        self.li
-000243e0: 6665 5f74 696d 653d 7365 6c66 2e69 6e69  fe_time=self.ini
-000243f0: 745f 7469 6d65 0a20 2020 2020 2020 2073  t_time.        s
-00024400: 656c 662e 696e 6974 5f73 6563 3d69 6e74  elf.init_sec=int
-00024410: 2873 656c 662e 696e 6974 5f74 696d 652e  (self.init_time.
-00024420: 7374 7266 7469 6d65 2827 2573 2729 290a  strftime('%s')).
-00024430: 2020 2020 2020 2020 7365 6c66 2e73 7263          self.src
-00024440: 3d73 7263 0a0a 2020 2020 6465 6620 5370  =src..    def Sp
-00024450: 656e 6428 7365 6c66 2c6c 6966 655f 7469  end(self,life_ti
-00024460: 6d65 3d54 7275 652c 756e 6974 3d4e 6f6e  me=True,unit=Non
-00024470: 652c 696e 7465 6765 723d 5472 7565 293a  e,integer=True):
-00024480: 0a20 2020 2020 2020 2069 6620 6c69 6665  .        if life
-00024490: 5f74 696d 653a 0a20 2020 2020 2020 2020  _time:.         
-000244a0: 2020 2072 743d 696e 7428 7365 6c66 2e4e     rt=int(self.N
-000244b0: 6f77 2829 2e73 7472 6674 696d 6528 2725  ow().strftime('%
-000244c0: 7327 2929 202d 2069 6e74 2873 656c 662e  s')) - int(self.
-000244d0: 6c69 6665 5f74 696d 652e 7374 7266 7469  life_time.strfti
-000244e0: 6d65 2827 2573 2729 290a 2020 2020 2020  me('%s')).      
-000244f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00024500: 2020 2020 7274 3d69 6e74 2873 656c 662e      rt=int(self.
-00024510: 4e6f 7728 292e 7374 7266 7469 6d65 2827  Now().strftime('
-00024520: 2573 2729 2920 2d20 7365 6c66 2e69 6e69  %s')) - self.ini
-00024530: 745f 7365 630a 2020 2020 2020 2020 2320  t_sec.        # 
-00024540: 436f 6e76 6572 7420 696e 7465 6765 7220  Convert integer 
-00024550: 7661 6c75 6520 746f 2068 756d 616e 2072  value to human r
-00024560: 6561 6461 626c 6520 7469 6d65 0a20 2020  eadable time.   
-00024570: 2020 2020 2023 2075 6e69 743a 204e 6f6e       # unit: Non
-00024580: 6520 2c20 696e 7465 6765 723a 206f 7574  e , integer: out
-00024590: 7075 7420 3a20 7365 636f 6e64 7320 2869  put : seconds (i
-000245a0: 6e74 290a 2020 2020 2020 2020 2320 556e  nt).        # Un
-000245b0: 6974 3a20 4e6f 6e65 202c 206e 6f74 2069  it: None , not i
-000245c0: 6e74 6567 6572 3a20 6f75 7470 7574 203a  nteger: output :
-000245d0: 2048 756d 616e 2072 6561 6461 626c 6520   Human readable 
-000245e0: 7061 7373 6564 2074 696d 6520 7374 7269  passed time stri
-000245f0: 6e67 2028 6175 746f 6d61 7469 6361 6c6c  ng (automaticall
-00024600: 7920 6361 6c63 756c 6174 6529 0a20 2020  y calculate).   
-00024610: 2020 2020 2023 2055 6e69 743a 2075 6e69       # Unit: uni
-00024620: 7420 2c20 696e 7465 6765 723a 206f 7574  t , integer: out
-00024630: 7075 7420 3a20 7468 6520 756e 6974 2773  put : the unit's
-00024640: 206e 756d 6265 7220 2869 6e74 290a 2020   number (int).  
-00024650: 2020 2020 2020 2320 556e 6974 3a20 756e        # Unit: un
-00024660: 6974 202c 206e 6f74 2069 6e74 6567 6572  it , not integer
-00024670: 3a20 6f75 7470 7574 203a 2048 756d 616e  : output : Human
-00024680: 2072 6561 6461 626c 6520 7061 7373 6564   readable passed
-00024690: 2074 696d 6520 7374 7269 6e67 2028 6d61   time string (ma
-000246a0: 7820 6973 2064 6566 696e 6564 2075 6e69  x is defined uni
-000246b0: 7429 0a20 2020 2020 2020 2072 6574 7572  t).        retur
-000246c0: 6e20 4875 6d61 6e5f 556e 6974 2872 742c  n Human_Unit(rt,
-000246d0: 756e 6974 3d27 5327 2c77 616e 745f 756e  unit='S',want_un
-000246e0: 6974 3d75 6e69 742c 696e 745f 6f75 743d  it=unit,int_out=
-000246f0: 696e 7465 6765 7229 0a0a 2020 2020 6465  integer)..    de
-00024700: 6620 5265 7365 7428 7365 6c66 2c74 696d  f Reset(self,tim
-00024710: 657a 6f6e 653d 4e6f 6e65 293a 0a20 2020  ezone=None):.   
-00024720: 2020 2020 2073 656c 662e 696e 6974 5f74       self.init_t
-00024730: 696d 653d 7365 6c66 2e4e 6f77 2874 696d  ime=self.Now(tim
-00024740: 657a 6f6e 653d 7469 6d65 7a6f 6e65 290a  ezone=timezone).
-00024750: 2020 2020 2020 2020 7365 6c66 2e69 6e69          self.ini
-00024760: 745f 7365 633d 696e 7428 7365 6c66 2e69  t_sec=int(self.i
-00024770: 6e69 745f 7469 6d65 2e73 7472 6674 696d  nit_time.strftim
-00024780: 6528 2725 7327 2929 0a0a 2020 2020 6465  e('%s'))..    de
-00024790: 6620 536c 6565 7028 7365 6c66 2c74 7279  f Sleep(self,try
-000247a0: 5f77 6169 743d 4e6f 6e65 2c64 6566 6175  _wait=None,defau
-000247b0: 6c74 3d31 293a 0a20 2020 2020 2020 2069  lt=1):.        i
-000247c0: 6620 6973 696e 7374 616e 6365 2874 7279  f isinstance(try
-000247d0: 5f77 6169 742c 2869 6e74 2c73 7472 2929  _wait,(int,str))
-000247e0: 3a20 7472 795f 7761 6974 3d28 7472 795f  : try_wait=(try_
-000247f0: 7761 6974 2c29 0a20 2020 2020 2020 2069  wait,).        i
-00024800: 6620 6973 696e 7374 616e 6365 2874 7279  f isinstance(try
-00024810: 5f77 6169 742c 286c 6973 742c 7475 706c  _wait,(list,tupl
-00024820: 6529 2920 616e 6420 6c65 6e28 7472 795f  e)) and len(try_
-00024830: 7761 6974 293a 0a20 2020 2020 2020 2020  wait):.         
-00024840: 2020 2069 6620 6c65 6e28 7472 795f 7761     if len(try_wa
-00024850: 6974 2920 3d3d 2032 3a0a 2020 2020 2020  it) == 2:.      
-00024860: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-00024870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024880: 2020 2074 696d 652e 736c 6565 7028 7261     time.sleep(ra
-00024890: 6e64 6f6d 2e72 616e 6469 6e74 2869 6e74  ndom.randint(int
-000248a0: 2874 7279 5f77 6169 745b 305d 292c 696e  (try_wait[0]),in
-000248b0: 7428 7472 795f 7761 6974 5b31 5d29 2929  t(try_wait[1])))
-000248c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000248d0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-000248e0: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-000248f0: 730a 2020 2020 2020 2020 2020 2020 656c  s.            el
-00024900: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00024910: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00024920: 2020 2020 2020 2020 2020 2020 2074 696d               tim
-00024930: 652e 736c 6565 7028 696e 7428 7472 795f  e.sleep(int(try_
-00024940: 7761 6974 5b30 5d29 290a 2020 2020 2020  wait[0])).      
-00024950: 2020 2020 2020 2020 2020 6578 6365 7074            except
-00024960: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00024970: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
-00024980: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00024990: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
-000249a0: 6465 6661 756c 7429 0a20 2020 2064 6566  default).    def
-000249b0: 2052 616e 6428 7365 6c66 2c74 7279 5f77   Rand(self,try_w
-000249c0: 6169 743d 4e6f 6e65 2c64 6566 6175 6c74  ait=None,default
-000249d0: 3d31 293a 0a20 2020 2020 2020 2069 6620  =1):.        if 
-000249e0: 6973 696e 7374 616e 6365 2874 7279 5f77  isinstance(try_w
-000249f0: 6169 742c 2869 6e74 2c73 7472 2929 3a20  ait,(int,str)): 
-00024a00: 7472 795f 7761 6974 3d28 7472 795f 7761  try_wait=(try_wa
-00024a10: 6974 2c29 0a20 2020 2020 2020 2069 6620  it,).        if 
-00024a20: 6973 696e 7374 616e 6365 2874 7279 5f77  isinstance(try_w
-00024a30: 6169 742c 286c 6973 742c 7475 706c 6529  ait,(list,tuple)
-00024a40: 2920 616e 6420 6c65 6e28 7472 795f 7761  ) and len(try_wa
-00024a50: 6974 293a 0a20 2020 2020 2020 2020 2020  it):.           
-00024a60: 2069 6620 6c65 6e28 7472 795f 7761 6974   if len(try_wait
-00024a70: 2920 3d3d 2032 3a0a 2020 2020 2020 2020  ) == 2:.        
-00024a80: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-00024a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024aa0: 2072 6574 7572 6e20 7261 6e64 6f6d 2e72   return random.r
-00024ab0: 616e 6469 6e74 2869 6e74 2874 7279 5f77  andint(int(try_w
-00024ac0: 6169 745b 305d 292c 696e 7428 7472 795f  ait[0]),int(try_
-00024ad0: 7761 6974 5b31 5d29 290a 2020 2020 2020  wait[1])).      
-00024ae0: 2020 2020 2020 2020 2020 6578 6365 7074            except
-00024af0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00024b00: 2020 2020 2020 7061 7373 0a20 2020 2020        pass.     
-00024b10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00024b20: 2020 2020 2020 2020 2020 2020 2074 7279               try
-00024b30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00024b40: 2020 2020 2020 7265 7475 726e 2069 6e74        return int
-00024b50: 2874 7279 5f77 6169 745b 305d 290a 2020  (try_wait[0]).  
-00024b60: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00024b70: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-00024b80: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
-00024b90: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-00024ba0: 6661 756c 740a 0a20 2020 2064 6566 2049  fault..    def I
-00024bb0: 6e74 2873 656c 662c 7469 6d65 7a6f 6e65  nt(self,timezone
-00024bc0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-00024bd0: 7265 7475 726e 2073 656c 662e 4e6f 7728  return self.Now(
-00024be0: 696e 742c 7469 6d65 7a6f 6e65 3d74 696d  int,timezone=tim
-00024bf0: 657a 6f6e 6529 0a0a 2020 2020 6465 6620  ezone)..    def 
-00024c00: 4e6f 7728 7365 6c66 2c6d 6f64 653d 4e6f  Now(self,mode=No
-00024c10: 6e65 2c74 696d 657a 6f6e 653d 4e6f 6e65  ne,timezone=None
-00024c20: 2c74 696d 6564 6174 613d 4e6f 6e65 293a  ,timedata=None):
-00024c30: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00024c40: 7374 616e 6365 2874 696d 6564 6174 612c  stance(timedata,
-00024c50: 7365 6c66 2e44 6174 6574 696d 6528 2929  self.Datetime())
-00024c60: 3a0a 2020 2020 2020 2020 2020 2020 7469  :.            ti
-00024c70: 6d65 6461 7461 3d73 656c 662e 696e 6974  medata=self.init
-00024c80: 5f74 696d 650a 2020 2020 2020 2020 656c  _time.        el
-00024c90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00024ca0: 6966 2074 696d 657a 6f6e 6520 6973 204e  if timezone is N
-00024cb0: 6f6e 653a 2074 696d 657a 6f6e 653d 7365  one: timezone=se
-00024cc0: 6c66 2e74 696d 657a 6f6e 650a 2020 2020  lf.timezone.    
-00024cd0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00024ce0: 7461 6e63 6528 7469 6d65 7a6f 6e65 2c73  tance(timezone,s
-00024cf0: 7472 2920 616e 6420 7469 6d65 7a6f 6e65  tr) and timezone
-00024d00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00024d10: 2020 496d 706f 7274 2827 696d 706f 7274    Import('import
-00024d20: 2070 7974 7a27 290a 2020 2020 2020 2020   pytz').        
-00024d30: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-00024d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024d50: 2074 696d 657a 6f6e 653d 7079 747a 2e74   timezone=pytz.t
-00024d60: 696d 657a 6f6e 6528 7469 6d65 7a6f 6e65  imezone(timezone
-00024d70: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00024d80: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-00024d90: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00024da0: 696e 7466 2827 556e 6b6e 6f77 6e20 6375  intf('Unknown cu
-00024db0: 7272 656e 7420 7469 6d65 7a6f 6e65 2028  rrent timezone (
-00024dc0: 7b7d 2927 2e66 6f72 6d61 7428 7469 6d65  {})'.format(time
-00024dd0: 7a6f 6e65 292c 6d6f 6465 3d27 6527 290a  zone),mode='e').
-00024de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024df0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-00024e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024e10: 2074 696d 6564 6174 613d 7365 6c66 2e44   timedata=self.D
-00024e20: 6174 6574 696d 6528 292e 6e6f 7728 7469  atetime().now(ti
-00024e30: 6d65 7a6f 6e65 290a 2020 2020 2020 2020  mezone).        
-00024e40: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00024e50: 2020 2020 2020 2020 2020 7469 6d65 6461            timeda
-00024e60: 7461 3d73 656c 662e 4461 7465 7469 6d65  ta=self.Datetime
-00024e70: 2829 2e6e 6f77 2829 0a20 2020 2020 2020  ().now().       
-00024e80: 2069 6620 6d6f 6465 2069 6e20 5b69 6e74   if mode in [int
-00024e90: 2c27 696e 7427 2c27 494e 5427 2c27 7365  ,'int','INT','se
-00024ea0: 6327 5d3a 0a20 2020 2020 2020 2020 2020  c']:.           
-00024eb0: 2072 6574 7572 6e20 696e 7428 7469 6d65   return int(time
-00024ec0: 6461 7461 2e73 7472 6674 696d 6528 2725  data.strftime('%
-00024ed0: 7327 2929 0a20 2020 2020 2020 2065 6c73  s')).        els
-00024ee0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00024ef0: 6574 7572 6e20 7469 6d65 6461 7461 0a0a  eturn timedata..
-00024f00: 2020 2020 6465 6620 4f75 7428 7365 6c66      def Out(self
-00024f10: 2c74 696d 656f 7574 5f73 6563 2c64 6566  ,timeout_sec,def
-00024f20: 6175 6c74 3d28 3234 2a33 3630 3029 293a  ault=(24*3600)):
-00024f30: 0a20 2020 2020 2020 2074 696d 656f 7574  .        timeout
-00024f40: 5f73 6563 3d49 6e74 2874 696d 656f 7574  _sec=Int(timeout
-00024f50: 5f73 6563 2c64 6566 6175 6c74 290a 2020  _sec,default).  
-00024f60: 2020 2020 2020 6966 2074 696d 656f 7574        if timeout
-00024f70: 5f73 6563 203d 3d20 303a 0a20 2020 2020  _sec == 0:.     
-00024f80: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-00024f90: 6c73 650a 2020 2020 2020 2020 6966 2073  lse.        if s
-00024fa0: 656c 662e 496e 7428 2920 2d20 7365 6c66  elf.Int() - self
-00024fb0: 2e69 6e69 745f 7365 6320 3e20 2074 696d  .init_sec >  tim
-00024fc0: 656f 7574 5f73 6563 3a0a 2020 2020 2020  eout_sec:.      
-00024fd0: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00024fe0: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
-00024ff0: 2046 616c 7365 0a20 2020 2064 6566 2046   False.    def F
-00025000: 6f72 6d61 7428 7365 6c66 2c74 666f 726d  ormat(self,tform
-00025010: 6174 3d27 2573 272c 7265 6164 5f66 6f72  at='%s',read_for
-00025020: 6d61 743d 2725 5327 2c74 696d 653d 275f  mat='%S',time='_
-00025030: 235f 2729 3a0a 2020 2020 2020 2020 6966  #_'):.        if
-00025040: 2049 734e 6f6e 6528 7469 6d65 2c63 686b   IsNone(time,chk
-00025050: 5f76 616c 3d5b 275f 235f 275d 2c63 686b  _val=['_#_'],chk
-00025060: 5f6f 6e6c 793d 5472 7565 293a 2074 696d  _only=True): tim
-00025070: 653d 7365 6c66 2e73 7263 0a20 2020 2020  e=self.src.     
-00025080: 2020 2069 6620 4973 4e6f 6e65 2874 696d     if IsNone(tim
-00025090: 652c 6368 6b5f 7661 6c3d 5b4e 6f6e 652c  e,chk_val=[None,
-000250a0: 2727 2c30 2c27 3027 5d29 3a0a 2020 2020  '',0,'0']):.    
-000250b0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-000250c0: 656c 662e 4e6f 7728 292e 7374 7266 7469  elf.Now().strfti
-000250d0: 6d65 2874 666f 726d 6174 290a 2020 2020  me(tformat).    
-000250e0: 2020 2020 656c 6966 2072 6561 645f 666f      elif read_fo
-000250f0: 726d 6174 203d 3d20 2725 5327 3a0a 2020  rmat == '%S':.  
-00025100: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00025110: 6e73 7461 6e63 6528 7469 6d65 2c69 6e74  nstance(time,int
-00025120: 2920 6f72 2028 6973 696e 7374 616e 6365  ) or (isinstance
-00025130: 2874 696d 652c 7374 7229 2061 6e64 2074  (time,str) and t
-00025140: 696d 652e 6973 6469 6769 7428 2929 3a0a  ime.isdigit()):.
-00025150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025160: 7265 7475 726e 2073 656c 662e 4461 7465  return self.Date
-00025170: 7469 6d65 2829 2e66 726f 6d74 696d 6573  time().fromtimes
-00025180: 7461 6d70 2869 6e74 2874 696d 6529 292e  tamp(int(time)).
-00025190: 7374 7266 7469 6d65 2874 666f 726d 6174  strftime(tformat
-000251a0: 290a 2020 2020 2020 2020 656c 6966 2069  ).        elif i
-000251b0: 7369 6e73 7461 6e63 6528 7469 6d65 2c73  sinstance(time,s
-000251c0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-000251d0: 2072 6574 7572 6e20 7365 6c66 2e44 6174   return self.Dat
-000251e0: 6574 696d 6528 292e 7374 7270 7469 6d65  etime().strptime
-000251f0: 2874 696d 652c 7265 6164 5f66 6f72 6d61  (time,read_forma
-00025200: 7429 2e73 7472 6674 696d 6528 7466 6f72  t).strftime(tfor
-00025210: 6d61 7429 0a20 2020 2020 2020 2065 6c69  mat).        eli
-00025220: 6620 6973 696e 7374 616e 6365 2874 696d  f isinstance(tim
-00025230: 652c 7365 6c66 2e44 6174 6574 696d 6528  e,self.Datetime(
-00025240: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00025250: 7265 7475 726e 2074 696d 652e 7374 7266  return time.strf
-00025260: 7469 6d65 2874 666f 726d 6174 290a 0a20  time(tformat).. 
-00025270: 2020 2064 6566 2049 6e69 7428 7365 6c66     def Init(self
-00025280: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00025290: 6e20 7365 6c66 2e69 6e69 745f 7365 630a  n self.init_sec.
-000252a0: 0a20 2020 2064 6566 2054 696d 6528 7365  .    def Time(se
-000252b0: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
-000252c0: 7572 6e20 7469 6d65 2e74 696d 6528 290a  urn time.time().
-000252d0: 0a20 2020 2064 6566 2044 6174 6574 696d  .    def Datetim
-000252e0: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-000252f0: 2072 6574 7572 6e20 6461 7465 7469 6d65   return datetime
-00025300: 2e64 6174 6574 696d 650a 0a20 2020 2064  .datetime..    d
-00025310: 6566 2050 7269 6e74 2873 656c 662c 7469  ef Print(self,ti
-00025320: 6d65 6461 7461 3d4e 6f6e 652c 7469 6d65  medata=None,time
-00025330: 5f66 6f72 6d61 743d 2725 592d 256d 2d25  _format='%Y-%m-%
-00025340: 6420 2548 3a25 4d3a 2553 2729 3a0a 2020  d %H:%M:%S'):.  
-00025350: 2020 2020 2020 6966 206e 6f74 2074 696d        if not tim
-00025360: 6564 6174 613a 2074 696d 6564 6174 613d  edata: timedata=
-00025370: 7365 6c66 2e69 6e69 745f 7469 6d65 0a20  self.init_time. 
-00025380: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00025390: 616e 6365 2874 696d 6564 6174 612c 7365  ance(timedata,se
-000253a0: 6c66 2e44 6174 6574 696d 6528 2929 3a0a  lf.Datetime()):.
-000253b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000253c0: 726e 2074 696d 6564 6174 612e 7374 7266  rn timedata.strf
-000253d0: 7469 6d65 2827 2559 2d25 6d2d 2564 2025  time('%Y-%m-%d %
-000253e0: 483a 254d 3a25 5327 290a 2020 2020 2020  H:%M:%S').      
-000253f0: 2020 7265 7475 726e 2027 270a 0a20 2020    return ''..   
-00025400: 2064 6566 2052 6561 6453 7472 2873 656c   def ReadStr(sel
-00025410: 662c 7469 6d65 6461 7461 2c74 696d 655f  f,timedata,time_
-00025420: 666f 726d 6174 3d27 2559 2d25 6d2d 2564  format='%Y-%m-%d
-00025430: 2025 483a 254d 3a25 5327 293a 0a20 2020   %H:%M:%S'):.   
-00025440: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00025450: 6365 2874 696d 6564 6174 612c 7374 7229  ce(timedata,str)
-00025460: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00025470: 7475 726e 2073 656c 662e 4461 7465 7469  turn self.Dateti
-00025480: 6d65 2829 2e73 7472 7074 696d 6528 7469  me().strptime(ti
-00025490: 6d65 6461 7461 2c74 696d 655f 666f 726d  medata,time_form
-000254a0: 6174 290a 2020 2020 2020 2020 7265 7475  at).        retu
-000254b0: 726e 2027 270a 0a20 2020 2064 6566 2054  rn ''..    def T
-000254c0: 696d 655a 6f6e 6528 7365 6c66 2c73 6574  imeZone(self,set
-000254d0: 7a6f 6e65 3d4e 6f6e 652c 7761 6e74 3d4e  zone=None,want=N
-000254e0: 6f6e 652c 7469 6d65 6461 7461 3d4e 6f6e  one,timedata=Non
-000254f0: 6529 3a0a 2020 2020 2020 2020 2727 2773  e):.        '''s
-00025500: 6574 2074 696d 657a 6f6e 6520 6174 2074  et timezone at t
-00025510: 696d 6564 6174 6120 6f72 2063 6f6e 7665  imedata or conve
-00025520: 7274 2074 6f20 7761 6e74 2074 696d 657a  rt to want timez
-00025530: 6f6e 6527 2727 0a20 2020 2020 2020 2069  one'''.        i
-00025540: 6620 6e6f 7420 7469 6d65 6461 7461 3a20  f not timedata: 
-00025550: 7469 6d65 6461 7461 3d73 656c 662e 696e  timedata=self.in
-00025560: 6974 5f74 696d 650a 2020 2020 2020 2020  it_time.        
-00025570: 6966 2069 7369 6e73 7461 6e63 6528 7469  if isinstance(ti
-00025580: 6d65 6461 7461 2c73 656c 662e 4461 7465  medata,self.Date
-00025590: 7469 6d65 2829 293a 0a20 2020 2020 2020  time()):.       
-000255a0: 2020 2020 2049 6d70 6f72 7428 2769 6d70       Import('imp
-000255b0: 6f72 7420 7079 747a 2729 0a20 2020 2020  ort pytz').     
-000255c0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-000255d0: 616e 6365 2873 6574 7a6f 6e65 2c73 7472  ance(setzone,str
-000255e0: 2920 616e 6420 7365 747a 6f6e 653a 0a20  ) and setzone:. 
-000255f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00025600: 6620 7365 747a 6f6e 6520 696e 205b 276c  f setzone in ['l
-00025610: 6f63 616c 272c 276c 6f63 616c 7469 6d65  ocal','localtime
-00025620: 272c 276c 6f63 616c 7a6f 6e65 272c 276c  ','localzone','l
-00025630: 6f63 616c 7469 6d65 7a6f 6e65 275d 3a0a  ocaltimezone']:.
-00025640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025650: 2020 2020 7365 747a 6f6e 653d 4e6f 6e65      setzone=None
-00025660: 2023 2073 6574 2074 6f20 6c6f 6361 6c20   # set to local 
-00025670: 7469 6d65 7a6f 6e65 0a20 2020 2020 2020  timezone.       
-00025680: 2020 2020 2020 2020 2065 6c69 6620 7365           elif se
-00025690: 747a 6f6e 6520 696e 205b 2775 7463 272c  tzone in ['utc',
-000256a0: 2755 5443 275d 3a0a 2020 2020 2020 2020  'UTC']:.        
-000256b0: 2020 2020 2020 2020 2020 2020 7365 747a              setz
-000256c0: 6f6e 653d 7079 747a 2e75 7463 2020 2320  one=pytz.utc  # 
-000256d0: 7365 7420 746f 2055 5443 2074 696d 657a  set to UTC timez
-000256e0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-000256f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00025700: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-00025710: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00025720: 2020 2020 2020 2020 2020 2073 6574 7a6f             setzo
-00025730: 6e65 3d70 7974 7a2e 7469 6d65 7a6f 6e65  ne=pytz.timezone
-00025740: 2873 6574 7a6f 6e65 2920 2320 7365 7420  (setzone) # set 
-00025750: 746f 2073 6574 7a6f 6e65 0a20 2020 2020  to setzone.     
-00025760: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00025770: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-00025780: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00025790: 7269 6e74 6628 2755 6e6b 6e6f 776e 2063  rintf('Unknown c
-000257a0: 7572 7265 6e74 2074 696d 657a 6f6e 6520  urrent timezone 
-000257b0: 287b 7d29 272e 666f 726d 6174 2873 6574  ({})'.format(set
-000257c0: 7a6f 6e65 292c 6d6f 6465 3d27 6527 290a  zone),mode='e').
-000257d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000257e0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-000257f0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-00025800: 2069 6620 7365 747a 6f6e 6520 213d 2074   if setzone != t
-00025810: 696d 6564 6174 612e 747a 696e 666f 3a20  imedata.tzinfo: 
-00025820: 2320 6966 2064 6966 6665 7265 6e74 2074  # if different t
-00025830: 696d 657a 6f6e 6520 6265 7477 6565 6e20  imezone between 
-00025840: 736f 7572 6365 2074 696d 6520 616e 6420  source time and 
-00025850: 7365 747a 6f6e 650a 2020 2020 2020 2020  setzone.        
-00025860: 2020 2020 2020 2020 7469 6d65 6461 7461          timedata
-00025870: 3d74 696d 6564 6174 612e 7265 706c 6163  =timedata.replac
-00025880: 6528 747a 696e 666f 3d73 6574 7a6f 6e65  e(tzinfo=setzone
-00025890: 2920 2320 7365 7420 746f 2073 6574 7a6f  ) # set to setzo
-000258a0: 6e65 0a20 2020 2020 2020 2020 2020 2069  ne.            i
-000258b0: 6620 6973 696e 7374 616e 6365 2877 616e  f isinstance(wan
-000258c0: 742c 7374 7229 2061 6e64 2077 616e 743a  t,str) and want:
-000258d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000258e0: 2069 6620 7761 6e74 2069 6e20 5b27 6c6f   if want in ['lo
-000258f0: 6361 6c27 2c27 6c6f 6361 6c74 696d 6527  cal','localtime'
-00025900: 2c27 6c6f 6361 6c7a 6f6e 6527 2c27 6c6f  ,'localzone','lo
-00025910: 6361 6c74 696d 657a 6f6e 6527 5d3a 0a20  caltimezone']:. 
-00025920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025930: 2020 2077 616e 743d 4e6f 6e65 2023 2063     want=None # c
-00025940: 6f6e 7665 7274 2074 6f20 6c6f 6361 6c20  onvert to local 
-00025950: 7469 6d65 7a6f 6e65 0a20 2020 2020 2020  timezone.       
-00025960: 2020 2020 2020 2020 2065 6c69 6620 7761           elif wa
-00025970: 6e74 2069 6e20 5b27 7574 6327 2c27 5554  nt in ['utc','UT
-00025980: 4327 5d3a 0a20 2020 2020 2020 2020 2020  C']:.           
-00025990: 2020 2020 2020 2020 2077 616e 743d 7079           want=py
-000259a0: 747a 2e75 7463 2023 2063 6f6e 7665 7274  tz.utc # convert
-000259b0: 2020 746f 2075 7463 2074 696d 657a 6f6e    to utc timezon
-000259c0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000259d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000259e0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-000259f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025a00: 2020 2020 2020 2020 2077 616e 743d 7079           want=py
-00025a10: 747a 2e74 696d 657a 6f6e 6528 7761 6e74  tz.timezone(want
-00025a20: 2920 2320 636f 6e76 6572 7420 746f 2077  ) # convert to w
-00025a30: 616e 7420 7469 6d65 7a6f 6e65 0a20 2020  ant timezone.   
-00025a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025a50: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00025a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025a70: 2070 7269 6e74 6628 2755 6e6b 6e6f 776e   printf('Unknown
-00025a80: 2063 7572 7265 6e74 2074 696d 657a 6f6e   current timezon
-00025a90: 6520 287b 7d29 272e 666f 726d 6174 2877  e ({})'.format(w
-00025aa0: 616e 7429 2c6d 6f64 653d 2765 2729 0a20  ant),mode='e'). 
-00025ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025ac0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-00025ad0: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
-00025ae0: 2020 2020 6966 2073 6574 7a6f 6e65 2021      if setzone !
-00025af0: 3d20 7761 6e74 3a20 2320 6966 2064 6966  = want: # if dif
-00025b00: 6665 7265 6e74 2074 696d 657a 6f6e 6520  ferent timezone 
-00025b10: 6265 7477 6565 6e20 736f 7572 6365 2074  between source t
-00025b20: 696d 6520 616e 6420 7761 6e74 207a 6f6e  ime and want zon
-00025b30: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00025b40: 2020 2020 2020 6c6f 6361 6c74 696d 653d        localtime=
-00025b50: 7469 6d65 6461 7461 2e61 7374 696d 657a  timedata.astimez
-00025b60: 6f6e 6528 747a 3d77 616e 7429 0a20 2020  one(tz=want).   
-00025b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025b80: 2072 6574 7572 6e20 6c6f 6361 6c74 696d   return localtim
-00025b90: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
-00025ba0: 7475 726e 2074 696d 6564 6174 610a 2020  turn timedata.  
-00025bb0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-00025bc0: 7365 0a0a 2020 2020 6465 6620 5469 6d65  se..    def Time
-00025bd0: 5a6f 6e65 4e61 6d65 2873 656c 662c 7469  ZoneName(self,ti
-00025be0: 6d65 6461 7461 3d4e 6f6e 6529 3a0a 2020  medata=None):.  
-00025bf0: 2020 2020 2020 6966 206e 6f74 2074 696d        if not tim
-00025c00: 6564 6174 613a 2074 696d 6564 6174 613d  edata: timedata=
-00025c10: 7365 6c66 2e69 6e69 745f 7469 6d65 0a20  self.init_time. 
-00025c20: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00025c30: 616e 6365 2874 696d 6564 6174 612c 7365  ance(timedata,se
-00025c40: 6c66 2e44 6174 6574 696d 6528 2929 3a0a  lf.Datetime()):.
-00025c50: 2020 2020 2020 2020 2020 2020 747a 6e61              tzna
-00025c60: 6d65 3d74 696d 6564 6174 612e 747a 6e61  me=timedata.tzna
-00025c70: 6d65 2829 0a20 2020 2020 2020 2020 2020  me().           
-00025c80: 2072 6574 7572 6e20 747a 6e61 6d65 2069   return tzname i
-00025c90: 6620 747a 6e61 6d65 2065 6c73 6520 7469  f tzname else ti
-00025ca0: 6d65 6461 7461 2e61 7374 696d 657a 6f6e  medata.astimezon
-00025cb0: 6528 292e 747a 6e61 6d65 2829 0a0a 2020  e().tzname()..  
-00025cc0: 2020 6465 6620 5574 6332 4c6f 6361 6c28    def Utc2Local(
-00025cd0: 7365 6c66 2c74 696d 655f 666f 726d 6174  self,time_format
-00025ce0: 3d27 2559 2d25 6d2d 2564 2025 483a 254d  ='%Y-%m-%d %H:%M
-00025cf0: 3a25 5327 2c6d 6f64 653d 2773 7472 272c  :%S',mode='str',
-00025d00: 7469 6d65 6461 7461 3d4e 6f6e 6529 3a0a  timedata=None):.
-00025d10: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00025d20: 7461 6e63 6528 7469 6d65 6461 7461 2c73  tance(timedata,s
-00025d30: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00025d40: 2074 696d 6564 6174 613d 7365 6c66 2e52   timedata=self.R
-00025d50: 6561 6453 7472 2874 696d 6564 6174 612c  eadStr(timedata,
-00025d60: 7469 6d65 5f66 6f72 6d61 743d 7469 6d65  time_format=time
-00025d70: 5f66 6f72 6d61 7429 0a20 2020 2020 2020  _format).       
-00025d80: 2065 6c69 6620 7469 6d65 6461 7461 2069   elif timedata i
-00025d90: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-00025da0: 2020 2020 7469 6d65 6461 7461 3d73 656c      timedata=sel
-00025db0: 662e 696e 6974 5f74 696d 650a 2020 2020  f.init_time.    
-00025dc0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00025dd0: 6528 7469 6d65 6461 7461 2c73 656c 662e  e(timedata,self.
-00025de0: 4461 7465 7469 6d65 2829 293a 0a20 2020  Datetime()):.   
-00025df0: 2020 2020 2020 2020 2074 696d 6564 6174           timedat
-00025e00: 613d 7365 6c66 2e54 696d 655a 6f6e 6528  a=self.TimeZone(
-00025e10: 7365 747a 6f6e 653d 2755 5443 272c 7761  setzone='UTC',wa
-00025e20: 6e74 3d27 6c6f 6361 6c27 2c74 696d 6564  nt='local',timed
-00025e30: 6174 613d 7469 6d65 6461 7461 290a 2020  ata=timedata).  
-00025e40: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00025e50: 2073 656c 662e 5072 696e 7428 7469 6d65   self.Print(time
-00025e60: 6461 7461 3d74 696d 6564 6174 6129 2069  data=timedata) i
-00025e70: 6620 6d6f 6465 3d3d 2773 7472 2720 656c  f mode=='str' el
-00025e80: 7365 2074 696d 6564 6174 610a 2020 2020  se timedata.    
-00025e90: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-00025ea0: 0a0a 6465 6620 7273 6865 6c6c 2863 6d64  ..def rshell(cmd
-00025eb0: 2c64 6267 3d46 616c 7365 2c74 696d 656f  ,dbg=False,timeo
-00025ec0: 7574 3d30 2c61 6e73 693d 4661 6c73 652c  ut=0,ansi=False,
-00025ed0: 696e 7465 7261 6374 6976 653d 4661 6c73  interactive=Fals
-00025ee0: 652c 6578 6563 7574 6162 6c65 3d27 2f62  e,executable='/b
-00025ef0: 696e 2f62 6173 6827 2c70 6174 683d 4e6f  in/bash',path=No
-00025f00: 6e65 2c70 726f 6772 6573 733d 4661 6c73  ne,progress=Fals
-00025f10: 652c 7072 6f67 7265 7373 5f70 7265 5f6e  e,progress_pre_n
-00025f20: 6577 5f6c 696e 653d 4661 6c73 652c 7072  ew_line=False,pr
-00025f30: 6f67 7265 7373 5f70 6f73 745f 6e65 775f  ogress_post_new_
-00025f40: 6c69 6e65 3d54 7275 652c 6c6f 673d 4e6f  line=True,log=No
-00025f50: 6e65 2c65 6e76 3d7b 7d2c 6675 6c6c 5f70  ne,env={},full_p
-00025f60: 6174 683d 4e6f 6e65 2c72 656d 6f76 655f  ath=None,remove_
-00025f70: 7061 7468 3d4e 6f6e 652c 7265 6d6f 7665  path=None,remove
-00025f80: 5f61 6c6c 5f70 6174 683d 4e6f 6e65 2c64  _all_path=None,d
-00025f90: 6566 6175 6c74 5f74 696d 656f 7574 3d33  efault_timeout=3
-00025fa0: 3630 302c 656e 765f 6f75 743d 4661 6c73  600,env_out=Fals
-00025fb0: 652c 6364 3d46 616c 7365 2c6b 6565 705f  e,cd=False,keep_
-00025fc0: 6377 643d 4661 6c73 652c 6465 636f 6465  cwd=False,decode
-00025fd0: 3d4e 6f6e 6529 3a0a 2020 2020 2727 270a  =None):.    '''.
-00025fe0: 2020 2020 496e 7465 7261 6374 6976 6520      Interactive 
-00025ff0: 7368 656c 6c0a 2020 2020 7061 7468 3a20  shell.    path: 
-00026000: 6170 7065 6e64 2074 6865 2070 6174 6820  append the path 
-00026010: 746f 2065 7869 7374 696e 6720 7379 7374  to existing syst
-00026020: 656d 2070 6174 680a 2020 2020 6675 6c6c  em path.    full
-00026030: 5f70 6174 683a 2065 7863 6861 6e67 6520  _path: exchange 
-00026040: 7468 6520 6675 6c6c 5f70 6174 6820 746f  the full_path to
-00026050: 2073 7973 7465 6d20 7061 7468 0a20 2020   system path.   
-00026060: 2072 656d 6f76 655f 7061 7468 3a20 7265   remove_path: re
-00026070: 6d6f 7665 2066 726f 6e74 2072 656d 6f76  move front remov
-00026080: 655f 7061 7468 2061 7420 6675 6c6c 5f70  e_path at full_p
-00026090: 6174 680a 2020 2020 7265 6d6f 7665 5f61  ath.    remove_a
-000260a0: 6c6c 5f70 6174 683a 2072 656d 6f76 6520  ll_path: remove 
-000260b0: 7265 6d6f 7665 5f61 6c6c 5f70 6174 6820  remove_all_path 
-000260c0: 696e 2066 756c 6c5f 7061 7468 0a20 2020  in full_path.   
-000260d0: 2064 6563 6f64 653a 2063 6861 7261 6374   decode: charact
-000260e0: 6572 2064 6563 6f64 696e 6720 2864 6566  er decoding (def
-000260f0: 6175 6c74 203a 2049 534f 2d38 3835 392d  ault : ISO-8859-
-00026100: 3129 2c20 6974 2063 6861 6e67 6564 2074  1), it changed t
-00026110: 6f20 5374 7228 2920 6465 6661 756c 740a  o Str() default.
-00026120: 2020 2020 2727 270a 2020 2020 2320 4f53      '''.    # OS
-00026130: 2065 6e76 6972 6f6e 6d65 6e74 730a 2020   environments.  
-00026140: 2020 6f73 5f65 6e76 3d64 6963 7428 6f73    os_env=dict(os
-00026150: 2e65 6e76 6972 6f6e 290a 2020 2020 6966  .environ).    if
-00026160: 2065 6e76 2061 6e64 2069 7369 6e73 7461   env and isinsta
-00026170: 6e63 6528 656e 762c 6469 6374 293a 0a20  nce(env,dict):. 
-00026180: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
-00026190: 2065 6e76 3a0a 2020 2020 2020 2020 2020   env:.          
-000261a0: 2020 6966 2069 6920 696e 206f 735f 656e    if ii in os_en
-000261b0: 763a 0a20 2020 2020 2020 2020 2020 2020  v:.             
-000261c0: 2020 206f 735f 656e 765b 6969 5d3d 656e     os_env[ii]=en
-000261d0: 765b 6969 5d0a 0a20 2020 2064 6566 2063  v[ii]..    def c
-000261e0: 6d64 5f66 6f72 6d28 636d 6429 3a0a 2020  md_form(cmd):.  
-000261f0: 2020 2020 2020 636d 645f 613d 636d 642e        cmd_a=cmd.
-00026200: 7370 6c69 7428 290a 2020 2020 2020 2020  split().        
-00026210: 636d 645f 6669 6c65 3d63 6d64 5f61 5b30  cmd_file=cmd_a[0
-00026220: 5d0a 2020 2020 2020 2020 6966 2063 6d64  ].        if cmd
-00026230: 5f66 696c 655b 305d 2021 3d20 272f 2720  _file[0] != '/' 
-00026240: 616e 6420 636d 645f 6669 6c65 203d 3d20  and cmd_file == 
-00026250: 6f73 2e70 6174 682e 6261 7365 6e61 6d65  os.path.basename
-00026260: 2863 6d64 5f66 696c 6529 2061 6e64 206f  (cmd_file) and o
-00026270: 732e 7061 7468 2e69 7366 696c 6528 636d  s.path.isfile(cm
-00026280: 645f 6669 6c65 293a 0a20 2020 2020 2020  d_file):.       
-00026290: 2020 2020 2072 6574 7572 6e20 272e 2f27       return './'
-000262a0: 2b63 6d64 0a20 2020 2020 2020 2072 6574  +cmd.        ret
-000262b0: 7572 6e20 636d 640a 0a20 2020 2064 6566  urn cmd..    def
-000262c0: 2070 7072 6f67 2873 746f 702c 7072 6f67   pprog(stop,prog
-000262d0: 7265 7373 5f70 7265 5f6e 6577 5f6c 696e  ress_pre_new_lin
-000262e0: 653d 4661 6c73 652c 7072 6f67 7265 7373  e=False,progress
-000262f0: 5f70 6f73 745f 6e65 775f 6c69 6e65 3d54  _post_new_line=T
-00026300: 7275 652c 6c6f 673d 4e6f 6e65 2c70 726f  rue,log=None,pro
-00026310: 6772 6573 735f 696e 7465 7276 616c 3d35  gress_interval=5
-00026320: 293a 0a20 2020 2020 2020 2066 6f72 2069  ):.        for i
-00026330: 2069 6e20 7261 6e67 6528 302c 7072 6f67   in range(0,prog
-00026340: 7265 7373 5f69 6e74 6572 7661 6c2a 3130  ress_interval*10
-00026350: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
-00026360: 696d 652e 736c 6565 7028 302e 3129 0a20  ime.sleep(0.1). 
-00026370: 2020 2020 2020 2020 2020 2069 6620 7374             if st
-00026380: 6f70 2829 3a0a 2020 2020 2020 2020 2020  op():.          
-00026390: 2020 2020 2020 7265 7475 726e 0a20 2020        return.   
-000263a0: 2020 2020 206c 6f63 616c 5f70 7269 6e74       local_print
-000263b0: 6564 3d46 616c 7365 0a23 2020 2020 2020  ed=False.#      
-000263c0: 2020 6966 2070 726f 6772 6573 735f 7072    if progress_pr
-000263d0: 655f 6e65 775f 6c69 6e65 3a0a 2320 2020  e_new_line:.#   
-000263e0: 2020 2020 2020 2020 2070 7269 6e74 6628           printf(
-000263f0: 2727 2c69 676e 6f72 655f 656d 7074 793d  '',ignore_empty=
-00026400: 4661 6c73 652c 7374 6172 745f 6e65 776c  False,start_newl
-00026410: 696e 653d 5472 7565 2c6c 6f67 3d6c 6f67  ine=True,log=log
-00026420: 2c65 6e64 3d27 272c 6c6f 675f 6c65 7665  ,end='',log_leve
-00026430: 6c3d 3129 0a20 2020 2020 2020 2069 3d30  l=1).        i=0
-00026440: 0a20 2020 2020 2020 2077 6869 6c65 2054  .        while T
-00026450: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
-00026460: 2069 6620 7374 6f70 2829 3a20 6272 6561   if stop(): brea
-00026470: 6b0a 2020 2020 2020 2020 2020 2020 6966  k.            if
-00026480: 2069 203e 2070 726f 6772 6573 735f 696e   i > progress_in
-00026490: 7465 7276 616c 2a31 303a 0a20 2020 2020  terval*10:.     
-000264a0: 2020 2020 2020 2020 2020 2069 3d30 0a20             i=0. 
-000264b0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000264c0: 7269 6e74 6628 273e 272c 6469 7265 6374  rintf('>',direct
-000264d0: 3d54 7275 652c 6c6f 673d 6c6f 672c 6c6f  =True,log=log,lo
-000264e0: 675f 6c65 7665 6c3d 3129 0a20 2020 2020  g_level=1).     
-000264f0: 2020 2020 2020 2020 2020 206c 6f63 616c             local
-00026500: 5f70 7269 6e74 6564 3d54 7275 650a 2020  _printed=True.  
-00026510: 2020 2020 2020 2020 2020 692b 3d31 0a20            i+=1. 
-00026520: 2020 2020 2020 2020 2020 2074 696d 652e             time.
-00026530: 736c 6565 7028 302e 3129 0a20 2020 2020  sleep(0.1).     
-00026540: 2020 2069 6620 7072 6f67 7265 7373 5f70     if progress_p
-00026550: 6f73 745f 6e65 775f 6c69 6e65 2061 6e64  ost_new_line and
-00026560: 206c 6f63 616c 5f70 7269 6e74 6564 3a0a   local_printed:.
-00026570: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00026580: 7466 2827 272c 6967 6e6f 7265 5f65 6d70  tf('',ignore_emp
-00026590: 7479 3d46 616c 7365 2c63 616c 6c65 725f  ty=False,caller_
-000265a0: 7061 7265 6e74 3d31 2c6e 6f5f 696e 7472  parent=1,no_intr
-000265b0: 6f3d 5472 7565 2c6c 6f67 3d6c 6f67 2c6c  o=True,log=log,l
-000265c0: 6f67 5f6c 6576 656c 3d31 290a 2020 2020  og_level=1).    
-000265d0: 7374 6172 745f 7469 6d65 3d54 494d 4528  start_time=TIME(
-000265e0: 290a 2020 2020 6966 206e 6f74 2054 7970  ).    if not Typ
-000265f0: 6528 636d 642c 2773 7472 272c 6461 7461  e(cmd,'str',data
-00026600: 3d54 7275 6529 3a0a 2020 2020 2020 2020  =True):.        
-00026610: 7265 7475 726e 202d 312c 2777 726f 6e67  return -1,'wrong
-00026620: 2063 6f6d 6d61 6e64 2069 6e66 6f72 6d61   command informa
-00026630: 7469 6f6e 203a 7b30 7d27 2e66 6f72 6d61  tion :{0}'.forma
-00026640: 7428 636d 6429 2c27 272c 7374 6172 745f  t(cmd),'',start_
-00026650: 7469 6d65 2e49 6e69 7428 292c 7374 6172  time.Init(),star
-00026660: 745f 7469 6d65 2e49 6e69 7428 292c 7374  t_time.Init(),st
-00026670: 6172 745f 7469 6d65 2e4e 6f77 2869 6e74  art_time.Now(int
-00026680: 292c 636d 642c 7061 7468 0a0a 2020 2020  ),cmd,path..    
-00026690: 616e 7369 5f65 7363 6170 6520 3d20 7265  ansi_escape = re
-000266a0: 2e63 6f6d 7069 6c65 2872 275c 7831 425c  .compile(r'\x1B\
-000266b0: 5b5b 302d 3f5d 2a5b 202d 2f5d 2a5b 402d  [[0-?]*[ -/]*[@-
-000266c0: 7e5d 2729 0a20 2020 2050 6f70 656e 3d73  ~]').    Popen=s
-000266d0: 7562 7072 6f63 6573 732e 506f 7065 6e0a  ubprocess.Popen.
-000266e0: 2020 2020 5049 5045 3d73 7562 7072 6f63      PIPE=subproc
-000266f0: 6573 732e 5049 5045 0a20 2020 2053 5444  ess.PIPE.    STD
-00026700: 4f55 543d 7375 6270 726f 6365 7373 2e50  OUT=subprocess.P
-00026710: 4950 450a 2020 2020 6f75 742c 6572 723d  IPE.    out,err=
-00026720: 2727 2c27 270a 2020 2020 6578 655f 6e61  '',''.    exe_na
-00026730: 6d65 3d6f 732e 7061 7468 2e62 6173 656e  me=os.path.basen
-00026740: 616d 6528 6578 6563 7574 6162 6c65 2920  ame(executable) 
-00026750: 6966 2065 7865 6375 7461 626c 6520 656c  if executable el
-00026760: 7365 206f 732e 7061 7468 2e62 6173 656e  se os.path.basen
-00026770: 616d 6528 6f73 5f65 6e76 2e67 6574 2827  ame(os_env.get('
-00026780: 5348 454c 4c27 2c27 6261 7368 2729 290a  SHELL','bash')).
-00026790: 2020 2020 6966 2064 6267 3a0a 2020 2020      if dbg:.    
-000267a0: 2020 2020 6966 2065 7865 635f 6e61 6d65      if exec_name
-000267b0: 2069 6e20 5b27 6261 7368 272c 2773 6827   in ['bash','sh'
-000267c0: 5d3a 0a20 2020 2020 2020 2020 2020 2063  ]:.            c
-000267d0: 6d64 3d27 7365 7420 2d78 5c6e 2720 2b20  md='set -x\n' + 
-000267e0: 636d 640a 2020 2020 6966 2069 7369 6e73  cmd.    if isins
-000267f0: 7461 6e63 6528 7265 6d6f 7665 5f70 6174  tance(remove_pat
-00026800: 682c 7374 7229 2061 6e64 206c 656e 2872  h,str) and len(r
-00026810: 656d 6f76 655f 7061 7468 2920 3e20 3020  emove_path) > 0 
-00026820: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
-00026830: 2066 756c 6c5f 7061 7468 3a20 6675 6c6c   full_path: full
-00026840: 5f70 6174 683d 6f73 2e65 6e76 6972 6f6e  _path=os.environ
-00026850: 5b27 5041 5448 275d 0a20 2020 2020 2020  ['PATH'].       
-00026860: 2066 756c 6c5f 7061 7468 5f61 3d66 756c   full_path_a=ful
-00026870: 6c5f 7061 7468 2e73 706c 6974 2827 3a27  l_path.split(':'
-00026880: 290a 2020 2020 2020 2020 666f 7220 6969  ).        for ii
-00026890: 2069 6e20 7265 6d6f 7665 5f70 6174 682e   in remove_path.
-000268a0: 7370 6c69 7428 273a 2729 3a0a 2020 2020  split(':'):.    
-000268b0: 2020 2020 2020 2020 6966 2069 6920 696e          if ii in
-000268c0: 2066 756c 6c5f 7061 7468 5f61 3a0a 2020   full_path_a:.  
-000268d0: 2020 2020 2020 2020 2020 2020 2020 6675                fu
-000268e0: 6c6c 5f70 6174 685f 612e 7265 6d6f 7665  ll_path_a.remove
-000268f0: 2869 6929 0a20 2020 2020 2020 2066 756c  (ii).        ful
-00026900: 6c5f 7061 7468 3d27 3a27 2e6a 6f69 6e28  l_path=':'.join(
-00026910: 6675 6c6c 5f70 6174 685f 6129 0a20 2020  full_path_a).   
-00026920: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-00026930: 2872 656d 6f76 655f 616c 6c5f 7061 7468  (remove_all_path
-00026940: 2c73 7472 2920 616e 6420 6c65 6e28 7265  ,str) and len(re
-00026950: 6d6f 7665 5f61 6c6c 5f70 6174 6829 203e  move_all_path) >
-00026960: 2030 203a 0a20 2020 2020 2020 2069 6620   0 :.        if 
-00026970: 6e6f 7420 6675 6c6c 5f70 6174 683a 2066  not full_path: f
-00026980: 756c 6c5f 7061 7468 3d6f 732e 656e 7669  ull_path=os.envi
-00026990: 726f 6e5b 2750 4154 4827 5d0a 2020 2020  ron['PATH'].    
-000269a0: 2020 2020 6675 6c6c 5f70 6174 685f 613d      full_path_a=
-000269b0: 6675 6c6c 5f70 6174 682e 7370 6c69 7428  full_path.split(
-000269c0: 273a 2729 0a20 2020 2020 2020 2066 6f72  ':').        for
-000269d0: 2069 6920 696e 2072 656d 6f76 655f 616c   ii in remove_al
-000269e0: 6c5f 7061 7468 2e73 706c 6974 2827 3a27  l_path.split(':'
-000269f0: 293a 0a20 2020 2020 2020 2020 2020 2066  ):.            f
-00026a00: 756c 6c5f 7061 7468 5f61 3d5b 6920 666f  ull_path_a=[i fo
-00026a10: 7220 6920 696e 2066 756c 6c5f 7061 7468  r i in full_path
-00026a20: 5f61 2069 6620 6920 213d 2069 695d 0a20  _a if i != ii]. 
-00026a30: 2020 2020 2020 2066 756c 6c5f 7061 7468         full_path
-00026a40: 3d27 3a27 2e6a 6f69 6e28 6675 6c6c 5f70  =':'.join(full_p
-00026a50: 6174 685f 290a 2020 2020 6966 2065 7865  ath_).    if exe
-00026a60: 6375 7461 626c 653a 0a20 2020 2020 2020  cutable:.       
-00026a70: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
-00026a80: 6973 6669 6c65 2865 7865 6375 7461 626c  isfile(executabl
-00026a90: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00026aa0: 6578 6563 7574 6162 6c65 3d66 696e 645f  executable=find_
-00026ab0: 6578 6563 7574 6162 6c65 2865 7865 5f6e  executable(exe_n
-00026ac0: 616d 6529 0a20 2020 2023 2323 2323 2323  ame).    #######
-00026ad0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00026ae0: 2323 2323 2323 2323 2323 0a20 2020 2023  ##########.    #
-00026af0: 2052 756e 2043 6f6d 6d61 6e64 0a20 2020   Run Command.   
-00026b00: 2023 2323 2323 2323 2323 2323 2323 2323   ###############
-00026b10: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00026b20: 2323 0a20 2020 2069 6620 6675 6c6c 5f70  ##.    if full_p
-00026b30: 6174 683a 0a20 2020 2020 2020 2069 6620  ath:.        if 
-00026b40: 6578 655f 6e61 6d65 2069 6e20 5b27 6373  exe_name in ['cs
-00026b50: 6827 2c27 7463 7368 275d 3a0a 2020 2020  h','tcsh']:.    
-00026b60: 2020 2020 2020 2020 7020 3d20 506f 7065          p = Pope
-00026b70: 6e28 2727 2773 6574 656e 7620 5041 5448  n('''setenv PATH
-00026b80: 2022 2573 223b 2025 7327 2727 2528 6675   "%s"; %s'''%(fu
-00026b90: 6c6c 5f70 6174 682c 636d 6429 202c 2073  ll_path,cmd) , s
-00026ba0: 6865 6c6c 3d54 7275 652c 2073 7464 6f75  hell=True, stdou
-00026bb0: 743d 5049 5045 2c20 7374 6465 7272 3d53  t=PIPE, stderr=S
-00026bc0: 5444 4f55 542c 6578 6563 7574 6162 6c65  TDOUT,executable
-00026bd0: 3d65 7865 6375 7461 626c 652c 2065 6e76  =executable, env
-00026be0: 3d6f 735f 656e 7629 0a20 2020 2020 2020  =os_env).       
-00026bf0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00026c00: 2020 2070 203d 2050 6f70 656e 2827 2727     p = Popen('''
-00026c10: 6578 706f 7274 2050 4154 483d 2573 3b20  export PATH=%s; 
-00026c20: 2573 2727 2725 2866 756c 6c5f 7061 7468  %s'''%(full_path
-00026c30: 2c63 6d64 2920 2c20 7368 656c 6c3d 5472  ,cmd) , shell=Tr
-00026c40: 7565 2c20 7374 646f 7574 3d50 4950 452c  ue, stdout=PIPE,
-00026c50: 2073 7464 6572 723d 5354 444f 5554 2c65   stderr=STDOUT,e
-00026c60: 7865 6375 7461 626c 653d 6578 6563 7574  xecutable=execut
-00026c70: 6162 6c65 2c20 656e 763d 6f73 5f65 6e76  able, env=os_env
-00026c80: 290a 2020 2020 656c 6966 2069 7369 6e73  ).    elif isins
-00026c90: 7461 6e63 6528 7061 7468 2c73 7472 2920  tance(path,str) 
-00026ca0: 616e 6420 6c65 6e28 7061 7468 2920 3e20  and len(path) > 
-00026cb0: 303a 0a20 2020 2020 2020 2069 6620 6364  0:.        if cd
-00026cc0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00026cd0: 206f 732e 7061 7468 2e69 7364 6972 2870   os.path.isdir(p
-00026ce0: 6174 6829 3a0a 2020 2020 2020 2020 2020  ath):.          
-00026cf0: 2020 2020 2020 2370 203d 2050 6f70 656e        #p = Popen
-00026d00: 2863 6d64 5f66 6f72 6d28 636d 6429 202c  (cmd_form(cmd) ,
-00026d10: 2073 6865 6c6c 3d54 7275 652c 2073 7464   shell=True, std
-00026d20: 6f75 743d 5049 5045 2c20 7374 6465 7272  out=PIPE, stderr
-00026d30: 3d53 5444 4f55 542c 6578 6563 7574 6162  =STDOUT,executab
-00026d40: 6c65 3d65 7865 6375 7461 626c 652c 2065  le=executable, e
-00026d50: 6e76 3d6f 735f 656e 762c 2063 7764 3d70  nv=os_env, cwd=p
-00026d60: 6174 6829 0a20 2020 2020 2020 2020 2020  ath).           
-00026d70: 2020 2020 2070 7764 3d6f 732e 6765 7463       pwd=os.getc
-00026d80: 7764 2829 0a20 2020 2020 2020 2020 2020  wd().           
-00026d90: 2020 2020 206f 732e 6368 6469 7228 7061       os.chdir(pa
-00026da0: 7468 2920 2320 666f 7220 636d 645f 666f  th) # for cmd_fo
-00026db0: 726d 2829 0a20 2020 2020 2020 2020 2020  rm().           
-00026dc0: 2020 2020 2070 203d 2050 6f70 656e 2863       p = Popen(c
-00026dd0: 6d64 5f66 6f72 6d28 636d 6429 202c 2073  md_form(cmd) , s
-00026de0: 6865 6c6c 3d54 7275 652c 2073 7464 6f75  hell=True, stdou
-00026df0: 743d 5049 5045 2c20 7374 6465 7272 3d53  t=PIPE, stderr=S
-00026e00: 5444 4f55 542c 6578 6563 7574 6162 6c65  TDOUT,executable
-00026e10: 3d65 7865 6375 7461 626c 652c 2065 6e76  =executable, env
-00026e20: 3d6f 735f 656e 7629 0a20 2020 2020 2020  =os_env).       
-00026e30: 2020 2020 2020 2020 2069 6620 6b65 6570           if keep
-00026e40: 5f63 7764 3a0a 2020 2020 2020 2020 2020  _cwd:.          
-00026e50: 2020 2020 2020 2020 2020 6f73 2e63 6864            os.chd
-00026e60: 6972 2870 7764 290a 2020 2020 2020 2020  ir(pwd).        
-00026e70: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00026e80: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00026e90: 2031 2c20 277b 7d20 6e6f 7420 666f 756e   1, '{} not foun
-00026ea0: 6427 2e66 6f72 6d61 7428 7061 7468 292c  d'.format(path),
-00026eb0: 2027 7b7d 206e 6f74 2066 6f75 6e64 272e   '{} not found'.
-00026ec0: 666f 726d 6174 2870 6174 6829 2c73 7461  format(path),sta
-00026ed0: 7274 5f74 696d 652e 496e 6974 2829 2c73  rt_time.Init(),s
-00026ee0: 7461 7274 5f74 696d 652e 4e6f 7728 696e  tart_time.Now(in
-00026ef0: 7429 2c63 6d64 2c70 6174 680a 2020 2020  t),cmd,path.    
-00026f00: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00026f10: 2020 2020 2020 6966 2065 7865 5f6e 616d        if exe_nam
-00026f20: 6520 696e 205b 2763 7368 272c 2774 6373  e in ['csh','tcs
-00026f30: 6827 5d3a 0a20 2020 2020 2020 2020 2020  h']:.           
-00026f40: 2020 2020 2070 203d 2050 6f70 656e 2827       p = Popen('
-00026f50: 2727 7365 7465 6e76 2050 4154 4820 2225  ''setenv PATH "%
-00026f60: 733a 247b 5041 5448 7d22 3b20 2573 2727  s:${PATH}"; %s''
-00026f70: 2725 2870 6174 682c 636d 6429 202c 2073  '%(path,cmd) , s
-00026f80: 6865 6c6c 3d54 7275 652c 2073 7464 6f75  hell=True, stdou
-00026f90: 743d 5049 5045 2c20 7374 6465 7272 3d53  t=PIPE, stderr=S
-00026fa0: 5444 4f55 542c 6578 6563 7574 6162 6c65  TDOUT,executable
-00026fb0: 3d65 7865 6375 7461 626c 652c 2065 6e76  =executable, env
-00026fc0: 3d6f 735f 656e 7629 0a20 2020 2020 2020  =os_env).       
-00026fd0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00026fe0: 2020 2020 2020 2020 2020 2070 203d 2050             p = P
-00026ff0: 6f70 656e 2827 2727 6578 706f 7274 2050  open('''export P
-00027000: 4154 483d 2573 3a24 7b50 4154 487d 3b20  ATH=%s:${PATH}; 
-00027010: 2573 2727 2725 2870 6174 682c 636d 6429  %s'''%(path,cmd)
-00027020: 202c 2073 6865 6c6c 3d54 7275 652c 2073   , shell=True, s
-00027030: 7464 6f75 743d 5049 5045 2c20 7374 6465  tdout=PIPE, stde
-00027040: 7272 3d53 5444 4f55 542c 6578 6563 7574  rr=STDOUT,execut
-00027050: 6162 6c65 3d65 7865 6375 7461 626c 652c  able=executable,
-00027060: 2065 6e76 3d6f 735f 656e 7629 0a20 2020   env=os_env).   
-00027070: 2065 6c73 653a 0a20 2020 2020 2020 2070   else:.        p
-00027080: 203d 2050 6f70 656e 2863 6d64 5f66 6f72   = Popen(cmd_for
-00027090: 6d28 636d 6429 202c 2073 6865 6c6c 3d54  m(cmd) , shell=T
-000270a0: 7275 652c 2073 7464 6f75 743d 5049 5045  rue, stdout=PIPE
-000270b0: 2c20 7374 6465 7272 3d53 5444 4f55 542c  , stderr=STDOUT,
-000270c0: 6578 6563 7574 6162 6c65 3d65 7865 6375  executable=execu
-000270d0: 7461 626c 652c 2065 6e76 3d6f 735f 656e  table, env=os_en
-000270e0: 7629 0a0a 2020 2020 2323 2323 2323 2323  v)..    ########
-000270f0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00027100: 2323 2323 2323 2323 230a 2020 2020 234e  #########.    #N
-00027110: 6565 6420 6572 726f 7220 6c6f 6720 6f75  eed error log ou
-00027120: 7420 6672 6f6d 2074 6872 6561 6420 746f  t from thread to
-00027130: 206f 7574 7075 740a 2020 2020 2323 2323   output.    ####
-00027140: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00027150: 2323 2323 2323 2323 2323 2323 230a 2020  #############.  
-00027160: 2020 6465 6620 7772 6974 655f 6572 7228    def write_err(
-00027170: 7029 3a0a 2020 2020 2020 2077 6869 6c65  p):.       while
-00027180: 2054 7275 653a 0a20 2020 2020 2020 2020   True:.         
-00027190: 2020 6565 3d70 2e73 7464 6572 722e 7265    ee=p.stderr.re
-000271a0: 6164 2831 290a 2020 2020 2020 2020 2020  ad(1).          
-000271b0: 2069 6620 6e6f 7420 6565 3a20 6272 6561   if not ee: brea
-000271c0: 6b0a 2020 2020 2020 2020 2020 2069 6620  k.           if 
-000271d0: 6973 696e 7374 616e 6365 2865 652c 6279  isinstance(ee,by
-000271e0: 7465 7329 3a0a 2020 2020 2020 2020 2020  tes):.          
-000271f0: 2020 2020 7379 732e 7374 6465 7272 2e62      sys.stderr.b
-00027200: 7566 6665 722e 7772 6974 6528 6565 2920  uffer.write(ee) 
-00027210: 2320 7772 6974 6520 6279 7465 7320 6461  # write bytes da
-00027220: 7461 2074 6f20 7374 646f 7574 0a20 2020  ta to stdout.   
-00027230: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00027240: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
-00027250: 7374 6465 7272 2e77 7269 7465 2865 6529  stderr.write(ee)
-00027260: 2023 2077 7269 7465 2062 7974 6573 2064   # write bytes d
-00027270: 6174 6120 746f 2073 7464 6f75 740a 2020  ata to stdout.  
-00027280: 2020 2020 2020 2020 2073 7973 2e73 7464           sys.std
-00027290: 6572 722e 666c 7573 6828 290a 0a20 2020  err.flush()..   
-000272a0: 2069 6620 696e 7465 7261 6374 6976 653a   if interactive:
-000272b0: 0a20 2020 2020 2020 2323 2323 2323 2323  .       ########
-000272c0: 2323 2320 5354 4420 4572 726f 720a 2020  ### STD Error.  
-000272d0: 2020 2020 2065 7272 203d 2054 6872 6561       err = Threa
-000272e0: 6428 7461 7267 6574 3d77 7269 7465 5f65  d(target=write_e
-000272f0: 7272 2c20 6172 6773 3d28 702c 2929 0a20  rr, args=(p,)). 
-00027300: 2020 2020 2020 6572 722e 7374 6172 7428        err.start(
-00027310: 290a 2020 2020 2020 2023 2323 2323 2323  ).       #######
-00027320: 2323 2323 2053 5444 204f 7574 0a20 2020  #### STD Out.   
-00027330: 2020 2020 7768 696c 6520 5472 7565 3a0a      while True:.
-00027340: 2020 2020 2020 2020 2020 643d 702e 7374            d=p.st
-00027350: 646f 7574 2e72 6561 6428 3129 0a20 2020  dout.read(1).   
-00027360: 2020 2020 2020 2069 6620 6e6f 7420 643a         if not d:
-00027370: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
-00027380: 2069 6620 6973 696e 7374 616e 6365 2864   if isinstance(d
-00027390: 2c62 7974 6573 293a 0a20 2020 2020 2020  ,bytes):.       
-000273a0: 2020 2020 2020 2073 7973 2e73 7464 6f75         sys.stdou
-000273b0: 742e 6275 6666 6572 2e77 7269 7465 2864  t.buffer.write(d
-000273c0: 2920 2320 7772 6974 6520 6279 7465 7320  ) # write bytes 
-000273d0: 6461 7461 2074 6f20 7374 646f 7574 0a20  data to stdout. 
-000273e0: 2020 2020 2020 2020 2020 2020 2023 6f75               #ou
-000273f0: 742b 3d64 2e64 6563 6f64 6528 2775 7466  t+=d.decode('utf
-00027400: 2d38 2729 2e72 6570 6c61 6365 2827 5c72  -8').replace('\r
-00027410: 272c 2727 290a 2020 2020 2020 2020 2020  ','').          
-00027420: 2020 2020 6f75 742b 3d53 7472 2864 292e      out+=Str(d).
-00027430: 7265 706c 6163 6528 275c 7227 2c27 2729  replace('\r','')
-00027440: 0a20 2020 2020 2020 2020 2065 6c73 653a  .          else:
-00027450: 0a20 2020 2020 2020 2020 2020 2020 2073  .              s
-00027460: 7973 2e73 7464 6f75 742e 7772 6974 6528  ys.stdout.write(
-00027470: 6429 2023 2077 7269 7465 2073 7472 2064  d) # write str d
-00027480: 6174 6120 746f 2073 7464 6f75 740a 2020  ata to stdout.  
-00027490: 2020 2020 2020 2020 2020 2020 6f75 742b              out+
-000274a0: 3d64 2e72 6570 6c61 6365 2827 5c72 272c  =d.replace('\r',
-000274b0: 2727 290a 2020 2020 2020 2020 2020 7379  '').          sy
-000274c0: 732e 7374 646f 7574 2e66 6c75 7368 2829  s.stdout.flush()
-000274d0: 0a20 2020 2020 2020 702e 7374 646f 7574  .       p.stdout
-000274e0: 2e63 6c6f 7365 2829 0a0a 2020 2020 2020  .close()..      
-000274f0: 2023 2323 2323 2323 2323 2323 204f 4c44   ########### OLD
-00027500: 2053 5444 2045 7272 6f72 2c20 6966 2073   STD Error, if s
-00027510: 7461 7274 696e 6720 6672 6f6d 2065 7272  tarting from err
-00027520: 6f72 206c 6f67 2074 6865 6e20 6361 6e27  or log then can'
-00027530: 7420 7365 650a 2020 2020 2020 2023 6572  t see.       #er
-00027540: 723d 702e 7374 6465 7272 2e72 6561 6428  r=p.stderr.read(
-00027550: 290a 2020 2020 2020 2023 6966 2065 7272  ).       #if err
-00027560: 3a0a 2020 2020 2020 2023 2020 2069 6620  :.       #   if 
-00027570: 6973 696e 7374 616e 6365 2865 7272 2c62  isinstance(err,b
-00027580: 7974 6573 293a 0a20 2020 2020 2020 2320  ytes):.       # 
-00027590: 2020 2020 2020 7379 732e 7374 6465 7272        sys.stderr
-000275a0: 2e62 7566 6665 722e 7772 6974 6528 6572  .buffer.write(er
-000275b0: 7229 0a20 2020 2020 2020 2320 2020 656c  r).       #   el
-000275c0: 7365 3a0a 2020 2020 2020 2023 2020 2020  se:.       #    
-000275d0: 2020 2073 7973 2e73 7464 6572 722e 7772     sys.stderr.wr
-000275e0: 6974 6528 6572 7229 0a20 2020 2020 2020  ite(err).       
-000275f0: 2320 2020 7379 732e 7374 6465 7272 2e66  #   sys.stderr.f
-00027600: 6c75 7368 2829 0a20 2020 2020 2020 2370  lush().       #p
-00027610: 2e73 7464 6572 722e 636c 6f73 6528 290a  .stderr.close().
-00027620: 2020 2020 2020 2070 2e77 6169 7428 290a         p.wait().
-00027630: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00027640: 2069 6620 7072 6f67 7265 7373 3a0a 2020   if progress:.  
-00027650: 2020 2020 2020 2020 2073 746f 705f 7468           stop_th
-00027660: 7265 6164 733d 4661 6c73 650a 2020 2020  reads=False.    
-00027670: 2020 2020 2020 2070 7074 683d 5468 7265         ppth=Thre
-00027680: 6164 2874 6172 6765 743d 7070 726f 672c  ad(target=pprog,
-00027690: 6172 6773 3d28 6c61 6d62 6461 3a73 746f  args=(lambda:sto
-000276a0: 705f 7468 7265 6164 732c 7072 6f67 7265  p_threads,progre
-000276b0: 7373 5f70 7265 5f6e 6577 5f6c 696e 652c  ss_pre_new_line,
-000276c0: 7072 6f67 7265 7373 5f70 6f73 745f 6e65  progress_post_ne
-000276d0: 775f 6c69 6e65 2c6c 6f67 2c29 290a 2020  w_line,log,)).  
-000276e0: 2020 2020 2020 2020 2070 7074 682e 7374           ppth.st
-000276f0: 6172 7428 290a 0a20 2020 2020 2020 7469  art()..       ti
-00027700: 6d65 6f75 743d 496e 7428 7469 6d65 6f75  meout=Int(timeou
-00027710: 742c 6465 6661 756c 745f 7469 6d65 6f75  t,default_timeou
-00027720: 7429 0a20 2020 2020 2020 6966 2074 696d  t).       if tim
-00027730: 656f 7574 203e 2030 3a0a 2020 2020 2020  eout > 0:.      
-00027740: 2020 2020 6966 2050 7956 6572 2833 293a      if PyVer(3):
-00027750: 0a20 2020 2020 2020 2020 2020 2020 7472  .             tr
-00027760: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00027770: 2020 206f 7574 2c20 6572 7220 3d20 702e     out, err = p.
-00027780: 636f 6d6d 756e 6963 6174 6528 7469 6d65  communicate(time
-00027790: 6f75 743d 7469 6d65 6f75 7429 0a20 2020  out=timeout).   
-000277a0: 2020 2020 2020 2020 2020 6578 6365 7074            except
-000277b0: 2073 7562 7072 6f63 6573 732e 5469 6d65   subprocess.Time
-000277c0: 6f75 7445 7870 6972 6564 3a0a 2020 2020  outExpired:.    
-000277d0: 2020 2020 2020 2020 2020 2020 702e 6b69              p.ki
-000277e0: 6c6c 2829 0a20 2020 2020 2020 2020 2020  ll().           
-000277f0: 2020 2020 2070 2e72 6574 7572 6e63 6f64       p.returncod
-00027800: 653d 3939 390a 2020 2020 2020 2020 2020  e=999.          
-00027810: 2020 2020 2020 6572 723d 2745 7272 6f72        err='Error
-00027820: 3a20 4b69 6c6c 2070 726f 6365 7373 2061  : Kill process a
-00027830: 6674 6572 2054 696d 656f 7574 207b 307d  fter Timeout {0}
-00027840: 272e 666f 726d 6174 2874 696d 656f 7574  '.format(timeout
-00027850: 290a 2020 2020 2020 2020 2020 656c 7365  ).          else
-00027860: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00027870: 6f74 696d 656f 7574 3d27 7b7d 272e 666f  otimeout='{}'.fo
-00027880: 726d 6174 2874 696d 656f 7574 290a 2020  rmat(timeout).  
-00027890: 2020 2020 2020 2020 2020 2020 7768 696c              whil
-000278a0: 6520 702e 706f 6c6c 2829 2069 7320 4e6f  e p.poll() is No
-000278b0: 6e65 2061 6e64 2074 696d 656f 7574 203e  ne and timeout >
-000278c0: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-000278d0: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
-000278e0: 2830 2e31 290a 2020 2020 2020 2020 2020  (0.1).          
-000278f0: 2020 2020 2020 2020 7469 6d65 6f75 7420          timeout 
-00027900: 3d20 7469 6d65 6f75 7420 2d20 302e 310a  = timeout - 0.1.
-00027910: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00027920: 2070 2e70 6f6c 6c28 2920 6973 204e 6f6e   p.poll() is Non
-00027930: 6520 616e 6420 7469 6d65 6f75 7420 3c20  e and timeout < 
-00027940: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-00027950: 2020 2020 2070 2e6b 696c 6c28 290a 2020       p.kill().  
-00027960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027970: 702e 7265 7475 726e 636f 6465 3d39 3939  p.returncode=999
-00027980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027990: 2020 2065 7272 3d27 4572 726f 723a 204b     err='Error: K
-000279a0: 696c 6c20 7072 6f63 6573 7320 6166 7465  ill process afte
-000279b0: 7220 5469 6d65 6f75 7420 7b30 7d27 2e66  r Timeout {0}'.f
-000279c0: 6f72 6d61 7428 6f74 696d 656f 7574 290a  ormat(otimeout).
-000279d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000279e0: 206c 656e 286f 7574 2920 3d3d 2030 2061   len(out) == 0 a
-000279f0: 6e64 206c 656e 2865 7272 2920 3d3d 2030  nd len(err) == 0
-00027a00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00027a10: 2020 2020 6f75 742c 2065 7272 203d 2070      out, err = p
-00027a20: 2e63 6f6d 6d75 6e69 6361 7465 2829 0a20  .communicate(). 
-00027a30: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00027a40: 2020 2020 2020 6f75 742c 2065 7272 203d        out, err =
-00027a50: 2070 2e63 6f6d 6d75 6e69 6361 7465 2829   p.communicate()
-00027a60: 0a20 2020 2020 2020 6966 2070 726f 6772  .       if progr
-00027a70: 6573 733a 0a20 2020 2020 2020 2020 2073  ess:.          s
-00027a80: 746f 705f 7468 7265 6164 733d 5472 7565  top_threads=True
-00027a90: 0a20 2020 2020 2020 2020 2070 7074 682e  .          ppth.
-00027aa0: 6a6f 696e 2829 0a20 2020 2023 6966 2050  join().    #if P
-00027ab0: 7956 6572 2833 293a 0a20 2020 2023 2020  yVer(3):.    #  
-00027ac0: 2020 6966 2054 7970 6528 6f75 742c 2762    if Type(out,'b
-00027ad0: 7974 6573 2729 3a20 6f75 743d 6f75 742e  ytes'): out=out.
-00027ae0: 6465 636f 6465 2822 4953 4f2d 3838 3539  decode("ISO-8859
-00027af0: 2d31 2229 2e72 7374 7269 7028 290a 2020  -1").rstrip().  
-00027b00: 2020 2320 2020 2069 6620 5479 7065 2865    #    if Type(e
-00027b10: 7272 2c27 6279 7465 7327 293a 2065 7272  rr,'bytes'): err
-00027b20: 3d65 7272 2e64 6563 6f64 6528 2249 534f  =err.decode("ISO
-00027b30: 2d38 3835 392d 3122 292e 7273 7472 6970  -8859-1").rstrip
-00027b40: 2829 0a20 2020 206f 7574 3d53 7472 286f  ().    out=Str(o
-00027b50: 7574 2c65 6e63 6f64 653d 6465 636f 6465  ut,encode=decode
-00027b60: 292e 7273 7472 6970 2829 0a20 2020 2065  ).rstrip().    e
-00027b70: 7272 3d53 7472 2865 7272 2c65 6e63 6f64  rr=Str(err,encod
-00027b80: 653d 6465 636f 6465 292e 7273 7472 6970  e=decode).rstrip
-00027b90: 2829 0a20 2020 2069 6620 616e 7369 3a0a  ().    if ansi:.
-00027ba0: 2020 2020 2020 2020 6f75 743d 616e 7369          out=ansi
-00027bb0: 5f65 7363 6170 652e 7375 6228 2727 2c6f  _escape.sub('',o
-00027bc0: 7574 290a 2020 2020 2020 2020 6572 723d  ut).        err=
-00027bd0: 616e 7369 5f65 7363 6170 652e 7375 6228  ansi_escape.sub(
-00027be0: 2727 2c65 7272 290a 2020 2020 6966 2065  '',err).    if e
-00027bf0: 6e76 5f6f 7574 3a0a 2020 2020 2020 2020  nv_out:.        
-00027c00: 7265 7475 726e 2070 2e72 6574 7572 6e63  return p.returnc
-00027c10: 6f64 652c 206f 7574 2c20 6572 722c 7374  ode, out, err,st
-00027c20: 6172 745f 7469 6d65 2e49 6e69 7428 292c  art_time.Init(),
-00027c30: 7374 6172 745f 7469 6d65 2e4e 6f77 2869  start_time.Now(i
-00027c40: 6e74 292c 636d 642c 7061 7468 2c6f 735f  nt),cmd,path,os_
-00027c50: 656e 760a 2020 2020 7265 7475 726e 2070  env.    return p
-00027c60: 2e72 6574 7572 6e63 6f64 652c 206f 7574  .returncode, out
-00027c70: 2c20 6572 722c 7374 6172 745f 7469 6d65  , err,start_time
-00027c80: 2e49 6e69 7428 292c 7374 6172 745f 7469  .Init(),start_ti
-00027c90: 6d65 2e4e 6f77 2869 6e74 292c 636d 642c  me.Now(int),cmd,
-00027ca0: 7061 7468 0a0a 6465 6620 4973 4361 6e63  path..def IsCanc
-00027cb0: 656c 2866 756e 632c 2a2a 6f70 7473 293a  el(func,**opts):
-00027cc0: 0a20 2020 2072 6574 7572 6e20 4973 5472  .    return IsTr
-00027cd0: 7565 2866 756e 632c 7265 7175 6972 656d  ue(func,requirem
-00027ce0: 656e 7473 3d5b 2763 616e 6365 6c27 2c27  ents=['cancel','
-00027cf0: 6361 6e63 656c 696e 6727 2c27 5245 5644  canceling','REVD
-00027d00: 272c 2773 746f 7027 2c27 6272 6561 6b27  ','stop','break'
-00027d10: 5d2c 2a2a 6f70 7473 290a 0a64 6566 2049  ],**opts)..def I
-00027d20: 7342 7265 616b 2866 756e 632c 2a2a 6f70  sBreak(func,**op
-00027d30: 7473 293a 0a20 2020 2072 6574 7572 6e20  ts):.    return 
-00027d40: 4973 5472 7565 2866 756e 632c 7265 7175  IsTrue(func,requ
-00027d50: 6972 656d 656e 7473 3d5b 2763 616e 6365  irements=['cance
-00027d60: 6c27 2c27 6361 6e63 656c 696e 6727 2c27  l','canceling','
-00027d70: 5245 5644 272c 2773 746f 7027 2c27 6272  REVD','stop','br
-00027d80: 6561 6b27 5d2c 2a2a 6f70 7473 290a 0a64  eak'],**opts)..d
-00027d90: 6566 2046 6978 4170 6f73 7472 6f70 6865  ef FixApostrophe
-00027da0: 2873 7472 696e 6729 3a0a 2020 2020 6966  (string):.    if
-00027db0: 2069 7369 6e73 7461 6e63 6528 7374 7269   isinstance(stri
-00027dc0: 6e67 2c73 7472 293a 0a20 2020 2020 2020  ng,str):.       
-00027dd0: 2069 6620 2227 2220 696e 2073 7472 696e   if "'" in strin
-00027de0: 673a 0a20 2020 2020 2020 2020 2020 2072  g:.            r
-00027df0: 6574 7572 6e20 2727 2722 7b7d 2227 2727  eturn '''"{}"'''
-00027e00: 2e66 6f72 6d61 7428 7374 7269 6e67 290a  .format(string).
-00027e10: 2020 2020 2020 2020 7265 7475 726e 2022          return "
-00027e20: 2222 277b 7d27 2222 222e 666f 726d 6174  ""'{}'""".format
-00027e30: 2873 7472 696e 6729 0a20 2020 2072 6574  (string).    ret
-00027e40: 7572 6e20 7374 7269 6e67 0a0a 6465 6620  urn string..def 
-00027e50: 7370 7269 6e74 6628 7374 7269 6e67 2c2a  sprintf(string,*
-00027e60: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
-00027e70: 2020 2727 270a 2020 2020 2222 2269 706d    '''.    """ipm
-00027e80: 6974 6f6f 6c20 2d48 2025 2869 706d 695f  itool -H %(ipmi_
-00027e90: 6970 2973 202d 5520 2528 6970 6d69 5f75  ip)s -U %(ipmi_u
-00027ea0: 7365 7229 7320 2d50 2027 2528 6970 6d69  ser)s -P '%(ipmi
-00027eb0: 5f70 6173 7329 7327 2022 2222 2528 2a2a  _pass)s' """%(**
-00027ec0: 6f70 7473 290a 2020 2020 2222 227b 6170  opts).    """{ap
-00027ed0: 707d 202d 4820 7b69 706d 695f 6970 7d20  p} -H {ipmi_ip} 
-00027ee0: 2d55 207b 6970 6d69 5f75 7365 727d 202d  -U {ipmi_user} -
-00027ef0: 5020 277b 6970 6d69 5f70 6173 737d 2720  P '{ipmi_pass}' 
-00027f00: 2222 222e 666f 726d 6174 282a 2a6f 7074  """.format(**opt
-00027f10: 7329 0a20 2020 2022 2222 7b7d 202d 4820  s).    """{} -H 
-00027f20: 7b7d 202d 5520 7b7d 202d 5020 277b 7d27  {} -U {} -P '{}'
-00027f30: 2022 2222 2e66 6f72 6d61 7428 2a69 6e70   """.format(*inp
-00027f40: 7329 0a20 2020 2022 2222 7b30 7d20 2d48  s).    """{0} -H
-00027f50: 207b 317d 202d 5520 7b32 7d20 2d50 2027   {1} -U {2} -P '
-00027f60: 7b33 7d27 2022 2222 2e66 6f72 6d61 7428  {3}' """.format(
-00027f70: 2a69 6e70 7329 0a20 2020 205f 6572 725f  *inps).    _err_
-00027f80: 203a 2054 7275 653a 206d 6973 7369 6e67   : True: missing
-00027f90: 2070 6172 616d 6574 6572 2074 6865 6e20   parameter then 
-00027fa0: 7265 7475 726e 2046 616c 7365 2c20 4661  return False, Fa
-00027fb0: 6c73 6528 6465 6661 756c 7429 3a20 636f  lse(default): co
-00027fc0: 6e76 6572 7420 6a75 7374 2070 6f73 7369  nvert just possi
-00027fd0: 626c 6520 7468 696e 6773 2c20 6f74 6865  ble things, othe
-00027fe0: 7273 206a 7573 7420 6b65 6570 2072 6574  rs just keep ret
-00027ff0: 7572 6e20 6f72 6967 696e 616c 2066 6f72  urn original for
-00028000: 6d0a 2020 2020 6170 6f73 7472 6f70 6865  m.    apostrophe
-00028010: 203a 2054 7275 653a 2061 7574 6f6d 6174   : True: automat
-00028020: 6963 616c 6c79 2063 6861 6e67 6520 616e  ically change an
-00028030: 6420 6164 6420 7768 656e 2069 6e70 7574  d add when input
-00028040: 2076 616c 7565 2068 6176 696e 6720 6170   value having ap
-00028050: 6f73 7472 6f70 6865 0a20 2020 2020 2020  ostrophe.       
-00028060: 2020 2020 2020 2020 2020 4e6f 6e65 203a            None :
-00028070: 2061 7574 6f6d 6174 6963 616c 6c79 2063   automatically c
-00028080: 6861 6e67 6520 6170 6f73 7472 6f70 6865  hange apostrophe
-00028090: 2077 6865 6e20 696e 7075 7420 7661 6c75   when input valu
-000280a0: 6520 6861 7669 6e67 2073 616d 6520 6170  e having same ap
-000280b0: 6f73 7472 6f70 6865 2c20 6275 7420 6e6f  ostrophe, but no
-000280c0: 7420 6175 746f 6d61 7469 6361 6c6c 7920  t automatically 
-000280d0: 6164 6469 6e67 2061 706f 7374 726f 7068  adding apostroph
-000280e0: 6520 7768 656e 2066 6f72 6d61 7420 7374  e when format st
-000280f0: 7269 6e67 2068 6176 696e 6720 6e6f 2061  ring having no a
-00028100: 706f 7374 726f 7068 6528 6465 6661 756c  postrophe(defaul
-00028110: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-00028120: 2020 2020 4661 6c73 653a 2064 6f20 6e6f      False: do no
-00028130: 7420 6368 616e 6765 2061 6e79 2070 6172  t change any par
-00028140: 616d 6574 6572 0a20 2020 2027 2727 0a20  ameter.    '''. 
-00028150: 2020 2064 6566 205f 7265 706c 6163 655f     def _replace_
-00028160: 666f 726d 6174 5f74 6f5f 7661 6c75 655f  format_to_value_
-00028170: 2869 2c74 6d70 2c73 7472 696e 672c 7661  (i,tmp,string,va
-00028180: 6c2c 6170 6f73 7472 6f70 6865 3d54 7275  l,apostrophe=Tru
-00028190: 6529 3a0a 2020 2020 2020 2020 6d69 7373  e):.        miss
-000281a0: 696e 673d 5b5d 0a20 2020 2020 2020 2073  ing=[].        s
-000281b0: 7472 696e 675f 613d 7374 7269 6e67 2e73  tring_a=string.s
-000281c0: 706c 6974 2829 0a20 2020 2020 2020 206f  plit().        o
-000281d0: 6964 783d 300a 2020 2020 2020 2020 7475  idx=0.        tu
-000281e0: 706c 655f 7661 6c3d 6973 696e 7374 616e  ple_val=isinstan
-000281f0: 6365 2876 616c 2c28 7475 706c 652c 6c69  ce(val,(tuple,li
-00028200: 7374 2929 0a20 2020 2020 2020 2066 6f72  st)).        for
-00028210: 2069 6920 696e 2074 6d70 3a0a 2020 2020   ii in tmp:.    
-00028220: 2020 2020 2020 2020 6966 2074 7570 6c65          if tuple
-00028230: 5f76 616c 3a20 6969 3d69 6e74 2869 6929  _val: ii=int(ii)
-00028240: 0a20 2020 2020 2020 2020 2020 2069 6478  .            idx
-00028250: 3d4e 6f6e 650a 2020 2020 2020 2020 2020  =None.          
-00028260: 2020 2369 6e70 7574 206c 6f63 6174 696f    #input locatio
-00028270: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-00028280: 2020 2020 2069 6620 6920 3c20 323a 0a20       if i < 2:. 
-00028290: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000282a0: 206c 6973 742c 7475 706c 652c 7061 7261   list,tuple,para
-000282b0: 6d65 7465 720a 2020 2020 2020 2020 2020  meter.          
-000282c0: 2020 2020 2020 2370 7269 6e74 2827 7b7d        #print('{}
-000282d0: 272e 666f 726d 6174 2831 2929 0a20 2020  '.format(1)).   
-000282e0: 2020 2020 2020 2020 2020 2020 2023 7072               #pr
-000282f0: 696e 7428 277b 307d 272e 666f 726d 6174  int('{0}'.format
-00028300: 2831 2929 0a20 2020 2020 2020 2020 2020  (1)).           
-00028310: 2020 2020 2023 7072 696e 7428 277b 617d       #print('{a}
-00028320: 272e 666f 726d 6174 282a 2a7b 2761 273a  '.format(**{'a':
-00028330: 317d 2929 0a20 2020 2020 2020 2020 2020  1})).           
-00028340: 2020 2020 2023 7072 696e 7428 277b 617d       #print('{a}
-00028350: 272e 666f 726d 6174 2861 3d31 2929 0a20  '.format(a=1)). 
-00028360: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00028370: 6620 2727 277b 2573 7d27 2727 2528 6969  f '''{%s}'''%(ii
-00028380: 2920 696e 2073 7472 696e 675f 613a 0a20  ) in string_a:. 
-00028390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000283a0: 2020 2069 6478 3d73 7472 696e 675f 612e     idx=string_a.
-000283b0: 696e 6465 7828 2727 277b 2573 7d27 2727  index('''{%s}'''
-000283c0: 2528 6969 2929 0a20 2020 2020 2020 2020  %(ii)).         
-000283d0: 2020 2020 2020 2065 6c69 6620 2222 2227         elif """'
-000283e0: 7b25 737d 2722 2222 2528 6969 2920 696e  {%s}'"""%(ii) in
-000283f0: 2073 7472 696e 675f 613a 0a20 2020 2020   string_a:.     
-00028400: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00028410: 6478 3d73 7472 696e 675f 612e 696e 6465  dx=string_a.inde
-00028420: 7828 2222 2227 7b25 737d 2722 2222 2528  x("""'{%s}'"""%(
-00028430: 6969 2929 0a20 2020 2020 2020 2020 2020  ii)).           
-00028440: 2020 2020 2065 6c69 6620 2727 2722 7b25       elif '''"{%
-00028450: 737d 2227 2727 2528 6969 2920 696e 2073  s}"'''%(ii) in s
-00028460: 7472 696e 675f 613a 0a20 2020 2020 2020  tring_a:.       
-00028470: 2020 2020 2020 2020 2020 2020 2069 6478               idx
-00028480: 3d73 7472 696e 675f 612e 696e 6465 7828  =string_a.index(
-00028490: 2727 2722 7b25 737d 2227 2727 2528 6969  '''"{%s}"'''%(ii
-000284a0: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
-000284b0: 6c69 6620 6920 3d3d 2032 3a0a 2020 2020  lif i == 2:.    
-000284c0: 2020 2020 2020 2020 2020 2020 2320 6469              # di
-000284d0: 6374 696f 6e61 7279 2069 6e70 7574 200a  ctionary input .
-000284e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000284f0: 2320 7072 696e 7428 2725 2861 2973 2725  # print('%(a)s'%
-00028500: 287b 2761 273a 2761 277d 2929 0a20 2020  ({'a':'a'})).   
-00028510: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00028520: 2727 2725 287b 7d29 7327 2727 2e66 6f72  '''%({})s'''.for
-00028530: 6d61 7428 6969 2920 696e 2073 7472 696e  mat(ii) in strin
-00028540: 675f 613a 0a20 2020 2020 2020 2020 2020  g_a:.           
-00028550: 2020 2020 2020 2020 2069 6478 3d73 7472           idx=str
-00028560: 696e 675f 612e 696e 6465 7828 2727 2725  ing_a.index('''%
-00028570: 287b 7d29 7327 2727 2e66 6f72 6d61 7428  ({})s'''.format(
-00028580: 6969 2929 0a20 2020 2020 2020 2020 2020  ii)).           
-00028590: 2020 2020 2065 6c69 6620 2222 2227 2528       elif """'%(
-000285a0: 7b7d 2973 2722 2222 2e66 6f72 6d61 7428  {})s'""".format(
-000285b0: 6969 2920 696e 2073 7472 696e 675f 613a  ii) in string_a:
-000285c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000285d0: 2020 2020 2069 6478 3d73 7472 696e 675f       idx=string_
-000285e0: 612e 696e 6465 7828 2222 2227 2528 7b7d  a.index("""'%({}
-000285f0: 2973 2722 2222 2e66 6f72 6d61 7428 6969  )s'""".format(ii
-00028600: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00028610: 2020 2065 6c69 6620 2727 2722 2528 7b7d     elif '''"%({}
-00028620: 2973 2227 2727 2e66 6f72 6d61 7428 6969  )s"'''.format(ii
-00028630: 2920 696e 2073 7472 696e 675f 613a 0a20  ) in string_a:. 
-00028640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028650: 2020 2069 6478 3d73 7472 696e 675f 612e     idx=string_a.
-00028660: 696e 6465 7828 2727 2722 2528 7b7d 2973  index('''"%({})s
-00028670: 2227 2727 2e66 6f72 6d61 7428 6969 2929  "'''.format(ii))
-00028680: 0a20 2020 2020 2020 2020 2020 2023 466f  .            #Fo
-00028690: 756e 6420 666f 726d 6174 206c 6f63 6174  und format locat
-000286a0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-000286b0: 6966 2069 7369 6e73 7461 6e63 6528 6964  if isinstance(id
-000286c0: 782c 696e 7429 3a0a 2020 2020 2020 2020  x,int):.        
-000286d0: 2020 2020 2020 2020 2320 6966 2069 6e70          # if inp
-000286e0: 7574 2064 6174 6120 6973 2073 7472 696e  ut data is strin
-000286f0: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
-00028700: 2020 6966 2028 7475 706c 655f 7661 6c20    if (tuple_val 
-00028710: 616e 6420 6c65 6e28 7661 6c29 203e 2069  and len(val) > i
-00028720: 6929 206f 7220 286e 6f74 2074 7570 6c65  i) or (not tuple
-00028730: 5f76 616c 2061 6e64 2069 6920 696e 2076  _val and ii in v
-00028740: 616c 293a 0a20 2020 2020 2020 2020 2020  al):.           
-00028750: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00028760: 7374 616e 6365 2876 616c 5b69 695d 2c73  stance(val[ii],s
-00028770: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00028780: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00028790: 2873 7472 696e 675f 615b 6964 785d 5b30  (string_a[idx][0
-000287a0: 5d20 3d3d 2022 2722 2061 6e64 2073 7472  ] == "'" and str
-000287b0: 696e 675f 615b 6964 785d 5b2d 315d 203d  ing_a[idx][-1] =
-000287c0: 3d20 2227 2229 205c 0a20 2020 2020 2020  = "'") \.       
-000287d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000287e0: 2020 2020 6f72 2028 7374 7269 6e67 5f61      or (string_a
-000287f0: 5b69 6478 5d5b 305d 203d 3d20 2722 2720  [idx][0] == '"' 
-00028800: 616e 6420 7374 7269 6e67 5f61 5b69 6478  and string_a[idx
-00028810: 5d5b 2d31 5d20 3d3d 2027 2227 293a 0a20  ][-1] == '"'):. 
-00028820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028830: 2020 2020 2020 2020 2020 2069 6620 6170             if ap
-00028840: 6f73 7472 6f70 6865 205c 0a20 2020 2020  ostrophe \.     
-00028850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028860: 2020 2020 2020 2020 2020 616e 6420 2828            and ((
-00028870: 7661 6c5b 6969 5d5b 305d 203d 3d20 2227  val[ii][0] == "'
-00028880: 2220 616e 6420 7661 6c5b 6969 5d5b 2d31  " and val[ii][-1
-00028890: 5d20 3d3d 2022 2722 295c 0a20 2020 2020  ] == "'")\.     
-000288a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000288b0: 2020 2020 2020 2020 2020 6f72 2028 7661            or (va
-000288c0: 6c5b 6969 5d5b 305d 203d 3d20 2722 2720  l[ii][0] == '"' 
-000288d0: 616e 6420 7661 6c5b 6969 5d5b 2d31 5d20  and val[ii][-1] 
-000288e0: 3d3d 2027 2227 2929 3a0a 2020 2020 2020  == '"')):.      
-000288f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028900: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-00028910: 5f61 5b69 6478 5d3d 7661 6c5b 6969 5d0a  _a[idx]=val[ii].
-00028920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028930: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00028940: 2061 706f 7374 726f 7068 6520 6973 206e   apostrophe is n
-00028950: 6f74 2046 616c 7365 3a0a 2020 2020 2020  ot False:.      
-00028960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028970: 2020 2020 2020 2020 2020 6966 2073 7472            if str
-00028980: 696e 675f 615b 6964 785d 5b30 5d20 3d3d  ing_a[idx][0] ==
-00028990: 2022 2722 2061 6e64 2022 2722 2069 6e20   "'" and "'" in 
-000289a0: 7661 6c5b 6969 5d3a 0a20 2020 2020 2020  val[ii]:.       
-000289b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000289c0: 2020 2020 2020 2020 2020 2020 2073 7472               str
-000289d0: 696e 675f 615b 6964 785d 3d27 2727 2227  ing_a[idx]='''"'
-000289e0: 2727 2b76 616c 5b69 695d 2b27 2727 2227  ''+val[ii]+'''"'
-000289f0: 2727 0a20 2020 2020 2020 2020 2020 2020  ''.             
-00028a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028a10: 2020 2065 6c69 6620 7374 7269 6e67 5f61     elif string_a
-00028a20: 5b69 6478 5d5b 305d 203d 3d20 2722 2720  [idx][0] == '"' 
-00028a30: 616e 6420 2722 2720 696e 2076 616c 5b69  and '"' in val[i
-00028a40: 695d 3a0a 2020 2020 2020 2020 2020 2020  i]:.            
-00028a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028a60: 2020 2020 2020 2020 7374 7269 6e67 5f61          string_a
-00028a70: 5b69 6478 5d3d 2222 2227 2222 222b 7661  [idx]="""'"""+va
-00028a80: 6c5b 6969 5d2b 2222 2227 2222 220a 2020  l[ii]+"""'""".  
-00028a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028aa0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00028ab0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00028ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028ad0: 2020 2020 2020 2020 7374 7269 6e67 5f61          string_a
-00028ae0: 5b69 6478 5d3d 7374 7269 6e67 5f61 5b69  [idx]=string_a[i
-00028af0: 6478 5d2e 666f 726d 6174 282a 2a76 616c  dx].format(**val
-00028b00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00028b10: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00028b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028b30: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-00028b40: 706f 7374 726f 7068 653a 0a20 2020 2020  postrophe:.     
-00028b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028b60: 2020 2020 2020 2020 2020 2069 6620 2227             if "'
-00028b70: 2220 696e 2076 616c 5b69 695d 3a0a 2020  " in val[ii]:.  
-00028b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028ba0: 2020 7374 7269 6e67 5f61 5b69 6478 5d3d    string_a[idx]=
-00028bb0: 2727 2722 2727 272b 7661 6c5b 6969 5d2b  '''"'''+val[ii]+
-00028bc0: 2727 2722 2727 270a 2020 2020 2020 2020  '''"'''.        
-00028bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028be0: 2020 2020 2020 2020 656c 6966 2027 2227          elif '"'
-00028bf0: 2069 6e20 7661 6c5b 6969 5d3a 200a 2020   in val[ii]: .  
+00020290: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000202a0: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
+000202b0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+000202c0: 7461 6e63 6528 706f 6f6c 2c6c 6973 7429  tance(pool,list)
+000202d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000202e0: 2020 706f 6f6c 3d5b 4970 5634 2869 2c6f    pool=[IpV4(i,o
+000202f0: 7574 3d69 6e74 2920 666f 7220 6920 696e  ut=int) for i in
+00020300: 2070 6f6f 6c5d 0a20 2020 2020 2020 2020   pool].         
+00020310: 2020 2020 2020 2072 6574 7572 6e20 6970         return ip
+00020320: 5f69 6e74 2069 6e20 706f 6f6c 0a20 2020  _int in pool.   
+00020330: 2020 2020 2020 2020 2065 6c73 653a 2023           else: #
+00020340: 6465 6661 756c 7420 746f 2073 7472 0a20  default to str. 
+00020350: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00020360: 705f 7374 723d 736f 636b 6574 2e69 6e65  p_str=socket.ine
+00020370: 745f 6e74 6f61 2873 7472 7563 742e 7061  t_ntoa(struct.pa
+00020380: 636b 2822 2149 222c 2069 705f 696e 7429  ck("!I", ip_int)
+00020390: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000203a0: 2020 6966 2070 6f72 743a 2023 2049 6620    if port: # If 
+000203b0: 6269 6e67 2050 6f72 7420 7468 656e 2063  bing Port then c
+000203c0: 6865 636b 2074 6865 2070 6f72 740a 2020  heck the port.  
+000203d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000203e0: 2020 6966 2075 7365 643a 0a20 2020 2020    if used:.     
+000203f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020400: 2020 2072 743d 4973 5573 6564 506f 7274     rt=IsUsedPort
+00020410: 2869 705f 7374 722c 706f 7274 290a 2020  (ip_str,port).  
+00020420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020430: 2020 2020 2020 6966 2072 743a 2072 6574        if rt: ret
+00020440: 7572 6e20 7274 0a20 2020 2020 2020 2020  urn rt.         
+00020450: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00020460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020470: 2020 2020 2020 2020 2072 743d 4973 4f70           rt=IsOp
+00020480: 656e 506f 7274 2869 705f 7374 722c 706f  enPort(ip_str,po
+00020490: 7274 290a 2020 2020 2020 2020 2020 2020  rt).            
+000204a0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+000204b0: 743a 2072 6574 7572 6e20 7274 0a20 2020  t: return rt.   
+000204c0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+000204d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000204e0: 2020 2020 2020 2072 6574 7572 6e20 6970         return ip
+000204f0: 5f73 7472 0a20 2020 2020 2020 2065 7863  _str.        exc
+00020500: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+00020510: 2070 6173 730a 2020 2020 7265 7475 726e   pass.    return
+00020520: 2064 6566 6175 6c74 0a0a 6465 6620 7069   default..def pi
+00020530: 6e67 2868 6f73 742c 2a2a 6f70 7473 293a  ng(host,**opts):
+00020540: 0a20 2020 2049 434d 505f 4543 484f 5f52  .    ICMP_ECHO_R
+00020550: 4551 5545 5354 203d 2038 2023 2053 6565  EQUEST = 8 # See
+00020560: 6d73 2074 6f20 6265 2074 6865 2073 616d  ms to be the sam
+00020570: 6520 6f6e 2053 6f6c 6172 6973 2e20 4672  e on Solaris. Fr
+00020580: 6f6d 202f 7573 722f 696e 636c 7564 652f  om /usr/include/
+00020590: 6c69 6e75 782f 6963 6d70 2e68 3b0a 2020  linux/icmp.h;.  
+000205a0: 2020 4943 4d50 5f43 4f44 4520 3d20 736f    ICMP_CODE = so
+000205b0: 636b 6574 2e67 6574 7072 6f74 6f62 796e  cket.getprotobyn
+000205c0: 616d 6528 2769 636d 7027 290a 2020 2020  ame('icmp').    
+000205d0: 4552 524f 525f 4445 5343 5220 3d20 7b0a  ERROR_DESCR = {.
+000205e0: 2020 2020 2020 2020 313a 2027 202d 204e          1: ' - N
+000205f0: 6f74 6520 7468 6174 2049 434d 5020 6d65  ote that ICMP me
+00020600: 7373 6167 6573 2063 616e 206f 6e6c 7920  ssages can only 
+00020610: 6265 2027 0a20 2020 2020 2020 2020 2020  be '.           
+00020620: 2773 656e 7420 6672 6f6d 2070 726f 6365  'sent from proce
+00020630: 7373 6573 2072 756e 6e69 6e67 2061 7320  sses running as 
+00020640: 726f 6f74 2e27 2c0a 2020 2020 2020 2020  root.',.        
+00020650: 3130 3031 333a 2027 202d 204e 6f74 6520  10013: ' - Note 
+00020660: 7468 6174 2049 434d 5020 6d65 7373 6167  that ICMP messag
+00020670: 6573 2063 616e 206f 6e6c 7920 6265 2073  es can only be s
+00020680: 656e 7420 6279 270a 2020 2020 2020 2020  ent by'.        
+00020690: 2020 2020 2020 2027 2075 7365 7273 206f         ' users o
+000206a0: 7220 7072 6f63 6573 7365 7320 7769 7468  r processes with
+000206b0: 2061 646d 696e 6973 7472 6174 6f72 2072   administrator r
+000206c0: 6967 6874 732e 270a 2020 2020 2020 2020  ights.'.        
+000206d0: 7d0a 2020 2020 6465 6620 6368 6563 6b73  }.    def checks
+000206e0: 756d 286d 7367 293a 0a20 2020 2020 2020  um(msg):.       
+000206f0: 2073 756d 203d 2030 0a20 2020 2020 2020   sum = 0.       
+00020700: 2073 697a 6520 3d20 286c 656e 286d 7367   size = (len(msg
+00020710: 2920 2f2f 2032 2920 2a20 320a 2020 2020  ) // 2) * 2.    
+00020720: 2020 2020 666f 7220 6320 696e 2072 616e      for c in ran
+00020730: 6765 2830 2c73 697a 652c 2032 293a 0a20  ge(0,size, 2):. 
+00020740: 2020 2020 2020 2020 2020 2073 756d 203d             sum =
+00020750: 2028 7375 6d20 2b20 6f72 6428 6d73 675b   (sum + ord(msg[
+00020760: 6320 2b20 315d 292a 3235 362b 6f72 6428  c + 1])*256+ord(
+00020770: 6d73 675b 635d 2929 2026 2030 7866 6666  msg[c])) & 0xfff
+00020780: 6666 6666 660a 2020 2020 2020 2020 6966  fffff.        if
+00020790: 2073 697a 6520 3c20 6c65 6e28 6d73 6729   size < len(msg)
+000207a0: 3a0a 2020 2020 2020 2020 2020 2020 7375  :.            su
+000207b0: 6d20 3d20 2873 756d 2b6f 7264 286d 7367  m = (sum+ord(msg
+000207c0: 5b6c 656e 286d 7367 2920 2d20 315d 2929  [len(msg) - 1]))
+000207d0: 2026 2030 7866 6666 6666 6666 660a 2020   & 0xffffffff.  
+000207e0: 2020 2020 2020 7261 203d 207e 2828 7375        ra = ~((su
+000207f0: 6d20 3e3e 2031 3629 202b 2028 7375 6d20  m >> 16) + (sum 
+00020800: 2620 3078 6666 6666 2920 2b20 2873 756d  & 0xffff) + (sum
+00020810: 203e 3e20 3136 2929 2026 2030 7866 6666   >> 16)) & 0xfff
+00020820: 660a 2020 2020 2020 2020 7261 203d 2072  f.        ra = r
+00020830: 6120 3e3e 2038 207c 2028 7261 203c 3c20  a >> 8 | (ra << 
+00020840: 3820 2620 3078 6666 3030 290a 2020 2020  8 & 0xff00).    
+00020850: 2020 2020 7265 7475 726e 2072 610a 0a20      return ra.. 
+00020860: 2020 2064 6566 206d 6b5f 7061 636b 6574     def mk_packet
+00020870: 2873 697a 6529 3a0a 2020 2020 2020 2020  (size):.        
+00020880: 2222 224d 616b 6520 6120 6e65 7720 6563  """Make a new ec
+00020890: 686f 2072 6571 7565 7374 2070 6163 6b65  ho request packe
+000208a0: 7420 6163 636f 7264 696e 6720 746f 2073  t according to s
+000208b0: 697a 6522 2222 0a20 2020 2020 2020 2023  ize""".        #
+000208c0: 2048 6561 6465 7220 6973 2074 7970 6520   Header is type 
+000208d0: 2838 292c 2063 6f64 6520 2838 292c 2063  (8), code (8), c
+000208e0: 6865 636b 7375 6d20 2831 3629 2c20 6964  hecksum (16), id
+000208f0: 2028 3136 292c 2073 6571 7565 6e63 6520   (16), sequence 
+00020900: 2831 3629 0a20 2020 2020 2020 2068 6561  (16).        hea
+00020910: 6465 7220 3d20 7374 7275 6374 2e70 6163  der = struct.pac
+00020920: 6b28 2762 6248 4868 272c 2049 434d 505f  k('bbHHh', ICMP_
+00020930: 4543 484f 5f52 4551 5545 5354 2c20 302c  ECHO_REQUEST, 0,
+00020940: 2030 2c20 7369 7a65 2c20 3129 0a20 2020   0, size, 1).   
+00020950: 2020 2020 2023 6461 7461 203d 2073 7472       #data = str
+00020960: 7563 742e 6361 6c63 7369 7a65 2827 6262  uct.calcsize('bb
+00020970: 4848 6827 2920 2a20 2751 270a 2020 2020  HHh') * 'Q'.    
+00020980: 2020 2020 6461 7461 203d 2073 697a 6520      data = size 
+00020990: 2a20 2751 270a 2020 2020 2020 2020 6d79  * 'Q'.        my
+000209a0: 5f63 6865 636b 7375 6d20 3d20 6368 6563  _checksum = chec
+000209b0: 6b73 756d 2853 7472 2868 6561 6465 7229  ksum(Str(header)
+000209c0: 202b 2064 6174 6129 0a20 2020 2020 2020   + data).       
+000209d0: 2068 6561 6465 7220 3d20 7374 7275 6374   header = struct
+000209e0: 2e70 6163 6b28 2762 6248 4868 272c 2049  .pack('bbHHh', I
+000209f0: 434d 505f 4543 484f 5f52 4551 5545 5354  CMP_ECHO_REQUEST
+00020a00: 2c20 302c 0a20 2020 2020 2020 2020 2020  , 0,.           
+00020a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020a20: 2020 736f 636b 6574 2e68 746f 6e73 286d    socket.htons(m
+00020a30: 795f 6368 6563 6b73 756d 292c 2073 697a  y_checksum), siz
+00020a40: 652c 2031 290a 2020 2020 2020 2020 7265  e, 1).        re
+00020a50: 7475 726e 2068 6561 6465 7220 2b20 4279  turn header + By
+00020a60: 7465 7328 6461 7461 290a 0a20 2020 2064  tes(data)..    d
+00020a70: 6566 2072 6563 6569 7665 286d 795f 736f  ef receive(my_so
+00020a80: 636b 6574 2c20 7373 697a 652c 2073 7469  cket, ssize, sti
+00020a90: 6d65 2c20 7469 6d65 6f75 7429 3a0a 2020  me, timeout):.  
+00020aa0: 2020 2020 2020 7768 696c 6520 5472 7565        while True
+00020ab0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00020ac0: 2074 696d 656f 7574 203c 3d20 303a 0a20   timeout <= 0:. 
+00020ad0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00020ae0: 6574 7572 6e0a 2020 2020 2020 2020 2020  eturn.          
+00020af0: 2020 7265 6164 7920 3d20 7365 6c65 6374    ready = select
+00020b00: 2e73 656c 6563 7428 5b6d 795f 736f 636b  .select([my_sock
+00020b10: 6574 5d2c 205b 5d2c 205b 5d2c 2074 696d  et], [], [], tim
+00020b20: 656f 7574 290a 2020 2020 2020 2020 2020  eout).          
+00020b30: 2020 6966 2072 6561 6479 5b30 5d20 3d3d    if ready[0] ==
+00020b40: 205b 5d3a 2023 2054 696d 656f 7574 0a20   []: # Timeout. 
+00020b50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00020b60: 6574 7572 6e0a 2020 2020 2020 2020 2020  eturn.          
+00020b70: 2020 7265 6365 6976 6564 5f74 696d 6520    received_time 
+00020b80: 3d20 7469 6d65 2e74 696d 6528 290a 2020  = time.time().  
+00020b90: 2020 2020 2020 2020 2020 7061 636b 6574            packet
+00020ba0: 2c20 6164 6472 203d 206d 795f 736f 636b  , addr = my_sock
+00020bb0: 6574 2e72 6563 7666 726f 6d28 3130 3234  et.recvfrom(1024
+00020bc0: 290a 2020 2020 2020 2020 2020 2020 7479  ).            ty
+00020bd0: 7065 2c20 636f 6465 2c20 6368 6563 6b73  pe, code, checks
+00020be0: 756d 2c20 6773 697a 652c 2073 6571 203d  um, gsize, seq =
+00020bf0: 2073 7472 7563 742e 756e 7061 636b 2827   struct.unpack('
+00020c00: 6262 4848 6827 2c20 7061 636b 6574 5b32  bbHHh', packet[2
+00020c10: 303a 3238 5d29 2023 2047 6574 2048 6561  0:28]) # Get Hea
+00020c20: 6465 720a 2020 2020 2020 2020 2020 2020  der.            
+00020c30: 6966 2067 7369 7a65 203d 3d20 7373 697a  if gsize == ssiz
+00020c40: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00020c50: 2020 2072 6574 7572 6e20 7265 6365 6976     return receiv
+00020c60: 6564 5f74 696d 6520 2d20 7374 696d 650a  ed_time - stime.
+00020c70: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00020c80: 6f75 7420 2d3d 2072 6563 6569 7665 645f  out -= received_
+00020c90: 7469 6d65 202d 2073 7469 6d65 0a0a 2020  time - stime..  
+00020ca0: 2020 6465 6620 7069 6e67 5f66 756e 6328    def ping_func(
+00020cb0: 6970 2c74 696d 656f 7574 3d31 2c73 697a  ip,timeout=1,siz
+00020cc0: 653d 3634 293a 0a20 2020 2020 2020 2074  e=64):.        t
+00020cd0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00020ce0: 6d79 5f73 6f63 6b65 7420 3d20 736f 636b  my_socket = sock
+00020cf0: 6574 2e73 6f63 6b65 7428 736f 636b 6574  et.socket(socket
+00020d00: 2e41 465f 494e 4554 2c20 736f 636b 6574  .AF_INET, socket
+00020d10: 2e53 4f43 4b5f 5241 572c 2049 434d 505f  .SOCK_RAW, ICMP_
+00020d20: 434f 4445 290a 2020 2020 2020 2020 6578  CODE).        ex
+00020d30: 6365 7074 2073 6f63 6b65 742e 6572 726f  cept socket.erro
+00020d40: 7220 6173 2065 3a0a 2020 2020 2020 2020  r as e:.        
+00020d50: 2020 2020 6966 2065 2e65 7272 6e6f 2069      if e.errno i
+00020d60: 6e20 4552 524f 525f 4445 5343 523a 0a20  n ERROR_DESCR:. 
+00020d70: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00020d80: 6169 7365 2073 6f63 6b65 742e 6572 726f  aise socket.erro
+00020d90: 7228 2727 2e6a 6f69 6e28 2865 2e61 7267  r(''.join((e.arg
+00020da0: 735b 315d 2c20 4552 524f 525f 4445 5343  s[1], ERROR_DESC
+00020db0: 525b 652e 6572 726e 6f5d 2929 290a 2020  R[e.errno]))).  
+00020dc0: 2020 2020 2020 2020 2020 2020 2020 2372                #r
+00020dd0: 6169 7365 2073 6f63 6b65 742e 6572 726f  aise socket.erro
+00020de0: 7228 4a6f 696e 2828 652e 6172 6773 5b31  r(Join((e.args[1
+00020df0: 5d2c 2045 5252 4f52 5f44 4553 4352 5b65  ], ERROR_DESCR[e
+00020e00: 2e65 7272 6e6f 5d29 2c73 796d 626f 6c3d  .errno]),symbol=
+00020e10: 2727 2929 0a20 2020 2020 2020 2020 2020  '')).           
+00020e20: 2072 6169 7365 0a20 2020 2020 2020 2069   raise.        i
+00020e30: 6620 7369 7a65 2069 6e20 5b27 726e 6427  f size in ['rnd'
+00020e40: 2c27 7261 6e64 6f6d 275d 3a0a 2020 2020  ,'random']:.    
+00020e50: 2020 2020 2020 2020 2320 4d61 7869 6d75          # Maximu
+00020e60: 6d20 7369 7a65 2066 6f72 2061 6e20 756e  m size for an un
+00020e70: 7369 676e 6564 2073 686f 7274 2069 6e74  signed short int
+00020e80: 2063 206f 626a 6563 7428 3635 3533 3529   c object(65535)
+00020e90: 0a20 2020 2020 2020 2020 2020 2073 697a  .            siz
+00020ea0: 6520 3d20 696e 7428 2869 6428 7469 6d65  e = int((id(time
+00020eb0: 6f75 7429 202a 2072 616e 646f 6d2e 7261  out) * random.ra
+00020ec0: 6e64 6f6d 2829 2920 2520 3635 3533 3529  ndom()) % 65535)
+00020ed0: 0a20 2020 2020 2020 2070 6163 6b65 7420  .        packet 
+00020ee0: 3d20 6d6b 5f70 6163 6b65 7428 7369 7a65  = mk_packet(size
+00020ef0: 290a 2020 2020 2020 2020 7768 696c 6520  ).        while 
+00020f00: 7061 636b 6574 3a0a 2020 2020 2020 2020  packet:.        
+00020f10: 2020 2020 7365 6e74 203d 206d 795f 736f      sent = my_so
+00020f20: 636b 6574 2e73 656e 6474 6f28 7061 636b  cket.sendto(pack
+00020f30: 6574 2c20 2869 702c 2031 2929 2023 2049  et, (ip, 1)) # I
+00020f40: 434d 5020 6861 7665 206e 6f20 706f 7274  CMP have no port
+00020f50: 2c20 536f 206a 7573 7420 7075 7420 6475  , So just put du
+00020f60: 6d6d 7920 706f 7274 2031 0a20 2020 2020  mmy port 1.     
+00020f70: 2020 2020 2020 2070 6163 6b65 7420 3d20         packet = 
+00020f80: 7061 636b 6574 5b73 656e 743a 5d0a 2020  packet[sent:].  
+00020f90: 2020 2020 2020 6465 6c61 7920 3d20 7265        delay = re
+00020fa0: 6365 6976 6528 6d79 5f73 6f63 6b65 742c  ceive(my_socket,
+00020fb0: 2073 697a 652c 2054 494d 4528 292e 5469   size, TIME().Ti
+00020fc0: 6d65 2829 2c20 7469 6d65 6f75 7429 0a20  me(), timeout). 
+00020fd0: 2020 2020 2020 206d 795f 736f 636b 6574         my_socket
+00020fe0: 2e63 6c6f 7365 2829 0a20 2020 2020 2020  .close().       
+00020ff0: 2069 6620 6465 6c61 793a 0a20 2020 2020   if delay:.     
+00021000: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00021010: 6c61 792c 7369 7a65 0a0a 2020 2020 6465  lay,size..    de
+00021020: 6620 5f70 696e 675f 2869 702c 7469 6d65  f _ping_(ip,time
+00021030: 6f75 743d 312c 7369 7a65 3d36 342c 6c6f  out=1,size=64,lo
+00021040: 675f 666f 726d 6174 3d27 7069 6e67 2729  g_format='ping')
+00021050: 3a0a 2020 2020 2020 2020 2020 2020 7069  :.            pi
+00021060: 6e67 5f63 6d64 3d66 696e 645f 6578 6563  ng_cmd=find_exec
+00021070: 7574 6162 6c65 2827 7069 6e67 2729 0a20  utable('ping'). 
+00021080: 2020 2020 2020 2020 2020 2069 6620 7069             if pi
+00021090: 6e67 5f63 6d64 3a0a 2020 2020 2020 2020  ng_cmd:.        
+000210a0: 2020 2020 2020 2020 7069 6e67 5f73 3d73          ping_s=s
+000210b0: 697a 652d 3820 6966 2073 697a 6520 3e3d  ize-8 if size >=
+000210c0: 2038 2065 6c73 6520 300a 2020 2020 2020   8 else 0.      
+000210d0: 2020 2020 2020 2020 2020 7263 3d72 7368            rc=rsh
+000210e0: 656c 6c28 2270 696e 6720 2d73 207b 7d20  ell("ping -s {} 
+000210f0: 2d63 2031 207b 7d22 2e66 6f72 6d61 7428  -c 1 {}".format(
+00021100: 7069 6e67 5f73 2c68 6f73 7429 290a 2020  ping_s,host)).  
+00021110: 2020 2020 2020 2020 2020 2020 2020 6465                de
+00021120: 6c61 793d 5b5d 0a20 2020 2020 2020 2020  lay=[].         
+00021130: 2020 2020 2020 2069 6620 7263 5b30 5d20         if rc[0] 
+00021140: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
+00021150: 2020 2020 2020 2020 2020 6465 6c61 793d            delay=
+00021160: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
+00021170: 2020 2020 2020 2074 743d 7263 5b31 5d2e         tt=rc[1].
+00021180: 7370 6c69 7428 275c 6e27 295b 315d 2e73  split('\n')[1].s
+00021190: 706c 6974 2829 0a20 2020 2020 2020 2020  plit().         
+000211a0: 2020 2020 2020 2020 2020 2064 656c 6179             delay
+000211b0: 3d5b 666c 6f61 7428 7474 5b36 5d2e 7370  =[float(tt[6].sp
+000211c0: 6c69 7428 273d 2729 5b31 5d29 2f31 3030  lit('=')[1])/100
+000211d0: 302c 7474 5b30 5d5d 0a20 2020 2020 2020  0,tt[0]].       
+000211e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000211f0: 2020 2020 2020 2020 2020 6465 6c61 793d            delay=
+00021200: 7069 6e67 5f66 756e 6328 6970 2c74 696d  ping_func(ip,tim
+00021210: 656f 7574 2c73 697a 6529 0a20 2020 2020  eout,size).     
+00021220: 2020 2020 2020 2069 6620 6c6f 675f 666f         if log_fo
+00021230: 726d 6174 203d 3d20 2770 696e 6727 3a0a  rmat == 'ping':.
+00021240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021250: 6966 2064 656c 6179 3a0a 2020 2020 2020  if delay:.      
+00021260: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00021270: 7475 726e 2030 2c69 702c 7369 7a65 2c74  turn 0,ip,size,t
+00021280: 696d 656f 7574 2c64 656c 6179 5b31 5d2c  imeout,delay[1],
+00021290: 726f 756e 6428 6465 6c61 795b 305d 2a31  round(delay[0]*1
+000212a0: 3030 302e 302c 3429 0a20 2020 2020 2020  000.0,4).       
+000212b0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000212c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000212d0: 2020 2072 6574 7572 6e20 312c 6970 2c73     return 1,ip,s
+000212e0: 697a 652c 7469 6d65 6f75 742c 4e6f 6e65  ize,timeout,None
+000212f0: 2c4e 6f6e 650a 2020 2020 2020 2020 2020  ,None.          
+00021300: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00021310: 2020 2020 2020 2020 6966 2064 656c 6179          if delay
+00021320: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00021330: 2020 2020 2020 7265 7475 726e 2030 2c27        return 0,'
+00021340: 2e27 2c73 697a 652c 7469 6d65 6f75 742c  .',size,timeout,
+00021350: 4e6f 6e65 2c4e 6f6e 650a 2020 2020 2020  None,None.      
+00021360: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00021370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021380: 2020 2020 7265 7475 726e 2031 2c27 7827      return 1,'x'
+00021390: 2c73 697a 652c 7469 6d65 6f75 742c 4e6f  ,size,timeout,No
+000213a0: 6e65 2c4e 6f6e 650a 0a20 2020 2027 2727  ne,None..    '''
+000213b0: 0a20 2020 2073 616d 6520 6173 2070 696e  .    same as pin
+000213c0: 6720 636f 6d6d 616e 640a 2020 2020 5472  g command.    Tr
+000213d0: 7565 203a 2070 696e 6769 6e67 0a20 2020  ue : pinging.   
+000213e0: 2046 616c 7365 3a20 6361 6e20 6e6f 7420   False: can not 
+000213f0: 7069 6e67 0a20 2020 2030 2020 2020 3a20  ping.    0    : 
+00021400: 4361 6e63 656c 6564 2070 696e 670a 2020  Canceled ping.  
+00021410: 2020 2727 270a 2020 2020 636f 756e 743d    '''.    count=
+00021420: 496e 7428 6f70 7473 2e67 6574 2827 636f  Int(opts.get('co
+00021430: 756e 7427 292c 3029 0a20 2020 2069 6e74  unt'),0).    int
+00021440: 6572 7661 6c3d 496e 7428 6f70 7473 2e67  erval=Int(opts.g
+00021450: 6574 2827 696e 7465 7276 616c 2729 2c31  et('interval'),1
+00021460: 290a 2020 2020 6b65 6570 5f67 6f6f 643d  ).    keep_good=
+00021470: 496e 7428 6f70 7473 2e67 6574 2827 6b65  Int(opts.get('ke
+00021480: 6570 5f67 6f6f 6427 2c6f 7074 732e 6765  ep_good',opts.ge
+00021490: 7428 276b 6565 705f 7069 6e67 272c 6f70  t('keep_ping',op
+000214a0: 7473 2e67 6574 2827 6b65 6570 272c 6f70  ts.get('keep',op
+000214b0: 7473 2e67 6574 2827 676f 6f64 272c 6f70  ts.get('good',op
+000214c0: 7473 2e67 6574 2827 7069 6e67 696e 6727  ts.get('pinging'
+000214d0: 2929 2929 292c 3029 0a20 2020 206b 6565  ))))),0).    kee
+000214e0: 705f 6261 643d 496e 7428 6f70 7473 2e67  p_bad=Int(opts.g
+000214f0: 6574 2827 6b65 6570 5f62 6164 272c 6f70  et('keep_bad',op
+00021500: 7473 2e67 6574 2827 6261 6427 2929 2c30  ts.get('bad')),0
+00021510: 290a 2020 2020 7469 6d65 6f75 743d 496e  ).    timeout=In
+00021520: 7428 6f70 7473 2e67 6574 2827 7469 6d65  t(opts.get('time
+00021530: 6f75 7427 2c6f 7074 732e 6765 7428 2774  out',opts.get('t
+00021540: 696d 656f 7574 5f73 6563 2729 292c 3029  imeout_sec')),0)
+00021550: 0a20 2020 206c 6f73 745f 6d6f 6e3d 6f70  .    lost_mon=op
+00021560: 7473 2e67 6574 2827 6c6f 7374 5f6d 6f6e  ts.get('lost_mon
+00021570: 272c 4661 6c73 6529 0a20 2020 206c 6f67  ',False).    log
+00021580: 3d6f 7074 732e 6765 7428 276c 6f67 272c  =opts.get('log',
+00021590: 4e6f 6e65 290a 2020 2020 6c6f 675f 666f  None).    log_fo
+000215a0: 726d 6174 3d6f 7074 732e 6765 7428 276c  rmat=opts.get('l
+000215b0: 6f67 5f66 6f72 6d61 7427 2c27 2e27 290a  og_format','.').
+000215c0: 2020 2020 616c 6976 655f 706f 7274 3d6f      alive_port=o
+000215d0: 7074 732e 6765 7428 2761 6c69 7665 5f70  pts.get('alive_p
+000215e0: 6f72 7427 290a 2020 2020 7375 7070 6f72  ort').    suppor
+000215f0: 745f 686f 7374 6e61 6d65 3d6f 7074 732e  t_hostname=opts.
+00021600: 6765 7428 2773 7570 706f 7274 5f68 6f73  get('support_hos
+00021610: 746e 616d 6527 2c54 7275 6529 0a20 2020  tname',True).   
+00021620: 2065 6e64 5f6e 6577 6c69 6e65 3d6f 7074   end_newline=opt
+00021630: 732e 6765 7428 2765 6e64 5f6e 6577 6c69  s.get('end_newli
+00021640: 6e65 272c 6f70 7473 2e67 6574 2827 6e65  ne',opts.get('ne
+00021650: 776c 696e 6527 2c6f 7074 732e 6765 7428  wline',opts.get(
+00021660: 2765 6e64 272c 275c 6e27 2929 290a 2020  'end','\n'))).  
+00021670: 2020 6361 6e63 656c 5f66 756e 633d 6f70    cancel_func=op
+00021680: 7473 2e67 6574 2827 6361 6e63 656c 5f66  ts.get('cancel_f
+00021690: 756e 6327 2c6f 7074 732e 6765 7428 2773  unc',opts.get('s
+000216a0: 746f 705f 6675 6e63 272c 6f70 7473 2e67  top_func',opts.g
+000216b0: 6574 2827 6361 6e63 656c 272c 6f70 7473  et('cancel',opts
+000216c0: 2e67 6574 2827 7374 6f70 272c 4e6f 6e65  .get('stop',None
+000216d0: 2929 2929 0a20 2020 2069 6620 616c 6976  )))).    if aliv
+000216e0: 655f 706f 7274 3a0a 2020 2020 2020 2020  e_port:.        
+000216f0: 7265 7475 726e 2054 7275 6520 6966 2049  return True if I
+00021700: 7056 3428 686f 7374 2c70 6f72 743d 616c  pV4(host,port=al
+00021710: 6976 655f 706f 7274 2c73 7570 706f 7274  ive_port,support
+00021720: 5f68 6f73 746e 616d 653d 7375 7070 6f72  _hostname=suppor
+00021730: 745f 686f 7374 6e61 6d65 2920 656c 7365  t_hostname) else
+00021740: 2046 616c 7365 0a20 2020 2067 6f6f 643d   False.    good=
+00021750: 4661 6c73 650a 2020 2020 5469 6d65 3d54  False.    Time=T
+00021760: 494d 4528 290a 2020 2020 6754 696d 653d  IME().    gTime=
+00021770: 5449 4d45 2829 0a20 2020 2062 5469 6d65  TIME().    bTime
+00021780: 3d54 494d 4528 290a 2020 2020 6473 7069  =TIME().    dspi
+00021790: 3d27 6427 2069 6620 6c6f 675f 666f 726d  ='d' if log_form
+000217a0: 6174 203d 3d27 6427 2065 6c73 6520 2773  at =='d' else 's
+000217b0: 2720 6966 206c 6f67 5f66 6f72 6d61 7420  ' if log_format 
+000217c0: 6e6f 7420 696e 205b 276e 272c 2769 275d  not in ['n','i']
+000217d0: 2065 6c73 6520 2769 270a 2020 2020 6c6f   else 'i'.    lo
+000217e0: 6361 6c5f 7072 696e 7465 643d 4661 6c73  cal_printed=Fals
+000217f0: 650a 2020 2020 693d 300a 2020 2020 7768  e.    i=0.    wh
+00021800: 696c 6520 5472 7565 3a0a 2020 2020 2020  ile True:.      
+00021810: 2069 6620 4973 4272 6561 6b28 6361 6e63   if IsBreak(canc
+00021820: 656c 5f66 756e 6329 3a0a 2020 2020 2020  el_func):.      
+00021830: 2020 2020 7072 696e 7466 2827 2d20 7069      printf('- pi
+00021840: 6e67 287b 7d29 202d 2043 616e 6365 6c65  ng({}) - Cancele
+00021850: 642f 5374 6f70 7065 6420 7069 6e67 2062  d/Stopped ping b
+00021860: 7920 6361 6e63 656c 2073 6967 6e61 6c27  y cancel signal'
+00021870: 2e66 6f72 6d61 7428 686f 7374 292c 6669  .format(host),fi
+00021880: 7273 745f 6e65 776c 696e 653d 5472 7565  rst_newline=True
+00021890: 2c6c 6f67 3d6c 6f67 2c64 7370 3d64 7370  ,log=log,dsp=dsp
+000218a0: 6929 0a20 2020 2020 2020 2020 2062 7265  i).          bre
+000218b0: 616b 0a20 2020 2020 2020 7263 3d5f 7069  ak.       rc=_pi
+000218c0: 6e67 5f28 686f 7374 2c74 696d 656f 7574  ng_(host,timeout
+000218d0: 3d31 2c73 697a 653d 3634 2c6c 6f67 5f66  =1,size=64,log_f
+000218e0: 6f72 6d61 743d 6c6f 675f 666f 726d 6174  ormat=log_format
+000218f0: 290a 2020 2020 2020 2069 6620 7263 5b30  ).       if rc[0
+00021900: 5d20 3d3d 2030 3a0a 2020 2020 2020 2020  ] == 0:.        
+00021910: 2020 676f 6f64 3d54 7275 650a 2020 2020    good=True.    
+00021920: 2020 2020 2020 6966 206e 6f74 2063 6f75        if not cou
+00021930: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
+00021940: 2020 6254 696d 652e 5265 7365 7428 290a    bTime.Reset().
+00021950: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00021960: 206b 6565 705f 676f 6f64 3a0a 2020 2020   keep_good:.    
+00021970: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00021980: 2067 5469 6d65 2e4f 7574 286b 6565 705f   gTime.Out(keep_
+00021990: 676f 6f64 293a 2062 7265 616b 0a20 2020  good): break.   
+000219a0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000219b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000219c0: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
+000219d0: 2020 2069 6620 6c6f 675f 666f 726d 6174     if log_format
+000219e0: 203d 3d20 2770 696e 6727 3a0a 2020 2020   == 'ping':.    
+000219f0: 2020 2020 2020 2020 2020 7072 696e 7466            printf
+00021a00: 2827 7b7d 2062 7974 6573 2066 726f 6d20  ('{} bytes from 
+00021a10: 7b7d 3a20 6963 6d70 5f73 6571 3d7b 7d20  {}: icmp_seq={} 
+00021a20: 7474 6c3d 7b7d 2074 696d 653d 7b7d 206d  ttl={} time={} m
+00021a30: 7327 2e66 6f72 6d61 7428 7263 5b34 5d2c  s'.format(rc[4],
+00021a40: 7263 5b31 5d2c 692c 7263 5b32 5d2c 7263  rc[1],i,rc[2],rc
+00021a50: 5b35 5d29 2c6c 6f67 3d6c 6f67 2c64 7370  [5]),log=log,dsp
+00021a60: 3d64 7370 6929 0a20 2020 2020 2020 2020  =dspi).         
+00021a70: 2065 6c69 6620 6473 7069 2069 6e20 5b27   elif dspi in ['
+00021a80: 6427 2c27 7327 5d3a 0a20 2020 2020 2020  d','s']:.       
+00021a90: 2020 2020 2020 2070 7269 6e74 6628 272e         printf('.
+00021aa0: 272c 6469 7265 6374 3d54 7275 652c 6c6f  ',direct=True,lo
+00021ab0: 673d 6c6f 672c 6c6f 675f 6c65 7665 6c3d  g=log,log_level=
+00021ac0: 312c 6473 703d 6473 7069 2c73 6372 5f64  1,dsp=dspi,scr_d
+00021ad0: 6267 3d46 616c 7365 290a 2020 2020 2020  bg=False).      
+00021ae0: 2020 2020 2020 2020 6c6f 6361 6c5f 7072          local_pr
+00021af0: 696e 7465 643d 5472 7565 0a20 2020 2020  inted=True.     
+00021b00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00021b10: 2020 676f 6f64 3d46 616c 7365 0a20 2020    good=False.   
+00021b20: 2020 2020 2020 2069 6620 6e6f 7420 636f         if not co
+00021b30: 756e 743a 0a20 2020 2020 2020 2020 2020  unt:.           
+00021b40: 2020 2067 5469 6d65 2e52 6573 6574 2829     gTime.Reset()
+00021b50: 0a20 2020 2020 2020 2020 2020 2020 2069  .              i
+00021b60: 6620 6b65 6570 5f62 6164 3a0a 2020 2020  f keep_bad:.    
+00021b70: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00021b80: 2062 5469 6d65 2e4f 7574 286b 6565 705f   bTime.Out(keep_
+00021b90: 6261 6429 3a20 6272 6561 6b0a 2020 2020  bad): break.    
+00021ba0: 2020 2020 2020 6966 206c 6f67 5f66 6f72        if log_for
+00021bb0: 6d61 7420 3d3d 2027 7069 6e67 273a 0a20  mat == 'ping':. 
+00021bc0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00021bd0: 6e74 6628 277b 7d20 6963 6d70 5f73 6571  ntf('{} icmp_seq
+00021be0: 3d7b 7d20 7469 6d65 6f75 7420 287b 7d20  ={} timeout ({} 
+00021bf0: 7365 636f 6e64 2927 2e66 6f72 6d61 7428  second)'.format(
+00021c00: 7263 5b31 5d2c 692c 7263 5b33 5d29 2c6c  rc[1],i,rc[3]),l
+00021c10: 6f67 3d6c 6f67 2c64 7370 3d64 7370 6929  og=log,dsp=dspi)
+00021c20: 0a20 2020 2020 2020 2020 2065 6c69 6620  .          elif 
+00021c30: 6473 7069 2069 6e20 5b27 6427 2c27 7327  dspi in ['d','s'
+00021c40: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00021c50: 2070 7269 6e74 6628 2778 272c 6469 7265   printf('x',dire
+00021c60: 6374 3d54 7275 652c 6c6f 675f 6c65 7665  ct=True,log_leve
+00021c70: 6c3d 312c 6c6f 673d 6c6f 672c 2064 7370  l=1,log=log, dsp
+00021c80: 3d64 7370 692c 7363 725f 6462 673d 4661  =dspi,scr_dbg=Fa
+00021c90: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
+00021ca0: 2020 206c 6f63 616c 5f70 7269 6e74 6564     local_printed
+00021cb0: 3d54 7275 650a 2020 2020 2020 2069 6620  =True.       if 
+00021cc0: 636f 756e 743a 0a20 2020 2020 2020 2020  count:.         
+00021cd0: 2020 636f 756e 742d 3d31 0a20 2020 2020    count-=1.     
+00021ce0: 2020 2020 2020 6966 2063 6f75 6e74 203c        if count <
+00021cf0: 2031 3a20 6272 6561 6b0a 2020 2020 2020   1: break.      
+00021d00: 2069 6620 5469 6d65 2e4f 7574 2874 696d   if Time.Out(tim
+00021d10: 656f 7574 293a 2062 7265 616b 0a20 2020  eout): break.   
+00021d20: 2020 2020 7469 6d65 2e73 6c65 6570 2869      time.sleep(i
+00021d30: 6e74 6572 7661 6c29 0a20 2020 2020 2020  nterval).       
+00021d40: 692b 3d31 0a20 2020 2069 6620 656e 645f  i+=1.    if end_
+00021d50: 6e65 776c 696e 653a 0a20 2020 2020 2020  newline:.       
+00021d60: 2069 6620 6c6f 6361 6c5f 7072 696e 7465   if local_printe
+00021d70: 643a 2070 7269 6e74 6628 2727 2c6c 6f67  d: printf('',log
+00021d80: 3d6c 6f67 2c20 6e6f 5f69 6e74 726f 3d54  =log, no_intro=T
+00021d90: 7275 652c 2064 7370 3d64 7370 692c 6361  rue, dsp=dspi,ca
+00021da0: 6c6c 6572 5f70 6172 656e 743d 312c 6967  ller_parent=1,ig
+00021db0: 6e6f 7265 5f65 6d70 7479 3d46 616c 7365  nore_empty=False
+00021dc0: 290a 2020 2020 7265 7475 726e 2067 6f6f  ).    return goo
+00021dd0: 640a 0a63 6c61 7373 2050 4147 453a 0a20  d..class PAGE:. 
+00021de0: 2020 2027 2727 0a20 2020 2057 6562 2073     '''.    Web s
+00021df0: 6974 6520 7061 6765 2061 6e64 2055 524c  ite page and URL
+00021e00: 2064 6573 6967 6e0a 2020 2020 2727 270a   design.    '''.
+00021e10: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00021e20: 2873 656c 662c 7265 7175 6573 743d 4e6f  (self,request=No
+00021e30: 6e65 2c64 6174 613d 4e6f 6e65 2c62 6173  ne,data=None,bas
+00021e40: 653d 2727 2c6f 7468 6572 733d 4e6f 6e65  e='',others=None
+00021e50: 2c70 7261 6e67 653d 3235 293a 0a20 2020  ,prange=25):.   
+00021e60: 2020 2020 2069 6620 7265 7175 6573 743a       if request:
+00021e70: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00021e80: 662e 7265 7175 6573 7473 3d72 6571 7565  f.requests=reque
+00021e90: 7374 0a20 2020 2020 2020 2065 6c73 653a  st.        else:
+00021ea0: 0a20 2020 2020 2020 2020 2020 2049 6d70  .            Imp
+00021eb0: 6f72 7428 2769 6d70 6f72 7420 7265 7175  ort('import requ
+00021ec0: 6573 7473 2729 0a20 2020 2020 2020 2020  ests').         
+00021ed0: 2020 2073 656c 662e 7265 7175 6573 7473     self.requests
+00021ee0: 3d72 6571 7565 7374 730a 2020 2020 2020  =requests.      
+00021ef0: 2020 7365 6c66 2e70 7261 6e67 653d 7072    self.prange=pr
+00021f00: 616e 6765 0a20 2020 2020 2020 2073 656c  ange.        sel
+00021f10: 662e 7061 7261 6d65 7465 7273 3d64 6963  f.parameters=dic
+00021f20: 7428 7365 6c66 2e72 6571 7565 7374 732e  t(self.requests.
+00021f30: 6172 6773 290a 2020 2020 2020 2020 7061  args).        pa
+00021f40: 6765 3d73 656c 662e 7265 7175 6573 7473  ge=self.requests
+00021f50: 2e61 7267 732e 6765 7428 2770 6167 6527  .args.get('page'
+00021f60: 2c30 290a 2020 2020 2020 2020 6966 2073  ,0).        if s
+00021f70: 656c 662e 7265 7175 6573 7473 2e6d 6574  elf.requests.met
+00021f80: 686f 643d 3d27 504f 5354 273a 0a20 2020  hod=='POST':.   
+00021f90: 2020 2020 2020 2020 2070 6172 616d 6574           paramet
+00021fa0: 6572 733d 6469 6374 2873 656c 662e 7265  ers=dict(self.re
+00021fb0: 7175 6573 7473 2e66 6f72 6d29 0a20 2020  quests.form).   
+00021fc0: 2020 2020 2020 2020 2073 656c 662e 7061           self.pa
+00021fd0: 7261 6d65 7465 7273 2e75 7064 6174 6528  rameters.update(
+00021fe0: 7061 7261 6d65 7465 7273 290a 2020 2020  parameters).    
+00021ff0: 2020 2020 2020 2020 6966 2027 7061 6765          if 'page
+00022000: 2720 696e 2073 656c 662e 7061 7261 6d65  ' in self.parame
+00022010: 7465 7273 3a20 7061 6765 3d73 656c 662e  ters: page=self.
+00022020: 7061 7261 6d65 7465 7273 2e67 6574 2827  parameters.get('
+00022030: 7061 6765 2729 0a20 2020 2020 2020 2074  page').        t
+00022040: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00022050: 7365 6c66 2e70 6167 653d 696e 7428 7061  self.page=int(pa
+00022060: 6765 290a 2020 2020 2020 2020 6578 6365  ge).        exce
+00022070: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
+00022080: 7365 6c66 2e70 6167 653d 300a 2020 2020  self.page=0.    
+00022090: 2020 2020 7365 6c66 2e74 6f74 616c 3d30      self.total=0
+000220a0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+000220b0: 7374 616e 6365 2864 6174 612c 286c 6973  stance(data,(lis
+000220c0: 742c 6469 6374 2c74 7570 6c65 2929 3a0a  t,dict,tuple)):.
+000220d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000220e0: 2e74 6f74 616c 3d6c 656e 2864 6174 6129  .total=len(data)
+000220f0: 0a20 2020 2020 2020 2073 656c 662e 746f  .        self.to
+00022100: 7461 6c5f 7061 6765 3d73 656c 662e 746f  tal_page=self.to
+00022110: 7461 6c2f 2f73 656c 662e 7072 616e 6765  tal//self.prange
+00022120: 0a20 2020 2020 2020 2073 656c 662e 6261  .        self.ba
+00022130: 7365 3d62 6173 650a 2020 2020 2020 2020  se=base.        
+00022140: 7365 6c66 2e6f 7468 6572 733d 6f74 6865  self.others=othe
+00022150: 7273 0a20 2020 2020 2020 2073 656c 662e  rs.        self.
+00022160: 7374 6172 743d 7365 6c66 2e70 6167 652a  start=self.page*
+00022170: 7365 6c66 2e70 7261 6e67 650a 2020 2020  self.prange.    
+00022180: 2020 2020 7365 6c66 2e65 6e64 3d73 656c      self.end=sel
+00022190: 662e 7374 6172 742b 7365 6c66 2e70 7261  f.start+self.pra
+000221a0: 6e67 650a 2020 2020 6465 6620 7572 6c28  nge.    def url(
+000221b0: 7365 6c66 2c62 6173 653d 4e6f 6e65 2c69  self,base=None,i
+000221c0: 676e 6f72 653d 4e6f 6e65 2c2a 2a6f 7074  gnore=None,**opt
+000221d0: 7329 3a0a 2020 2020 2020 2020 6172 6773  s):.        args
+000221e0: 3d27 270a 2020 2020 2020 2020 666f 7220  =''.        for 
+000221f0: 6920 696e 2073 656c 662e 7061 7261 6d65  i in self.parame
+00022200: 7465 7273 3a0a 2020 2020 2020 2020 2020  ters:.          
+00022210: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00022220: 6967 6e6f 7265 2c6c 6973 7429 2061 6e64  ignore,list) and
+00022230: 2069 2069 6e20 6967 6e6f 7265 3a20 636f   i in ignore: co
+00022240: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+00022250: 2020 2069 6620 6920 696e 206f 7074 733a     if i in opts:
+00022260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022270: 206f 6f3d 6f70 7473 2e70 6f70 2869 290a   oo=opts.pop(i).
+00022280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022290: 6172 6773 3d61 7267 732b 277b 7d7b 7d3d  args=args+'{}{}=
+000222a0: 7b7d 272e 666f 726d 6174 2827 2627 2069  {}'.format('&' i
+000222b0: 6620 6172 6773 2065 6c73 6520 2727 2c69  f args else '',i
+000222c0: 2c6f 6f29 0a20 2020 2020 2020 2020 2020  ,oo).           
+000222d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000222e0: 2020 2020 2020 2061 7267 733d 6172 6773         args=args
+000222f0: 2b27 7b7d 7b7d 3d7b 7d27 2e66 6f72 6d61  +'{}{}={}'.forma
+00022300: 7428 2726 2720 6966 2061 7267 7320 656c  t('&' if args el
+00022310: 7365 2027 272c 692c 7365 6c66 2e70 6172  se '',i,self.par
+00022320: 616d 6574 6572 735b 695d 290a 2020 2020  ameters[i]).    
+00022330: 2020 2020 666f 7220 6920 696e 206f 7074      for i in opt
+00022340: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
+00022350: 7267 733d 6172 6773 2b27 7b7d 7b7d 3d7b  rgs=args+'{}{}={
+00022360: 7d27 2e66 6f72 6d61 7428 2726 2720 6966  }'.format('&' if
+00022370: 2061 7267 7320 656c 7365 2027 272c 692c   args else '',i,
+00022380: 6f70 7473 5b69 5d29 0a20 2020 2020 2020  opts[i]).       
+00022390: 2069 6620 6973 696e 7374 616e 6365 2862   if isinstance(b
+000223a0: 6173 652c 7374 7229 2061 6e64 2062 6173  ase,str) and bas
+000223b0: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+000223c0: 6620 6261 7365 5b2d 315d 203d 3d20 273f  f base[-1] == '?
+000223d0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+000223e0: 2020 2072 6574 7572 6e20 6261 7365 2b20     return base+ 
+000223f0: 6172 6773 0a20 2020 2020 2020 2020 2020  args.           
+00022400: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00022410: 2020 2020 2020 2072 6574 7572 6e20 6261         return ba
+00022420: 7365 2b27 3f27 202b 2061 7267 730a 2020  se+'?' + args.  
+00022430: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00022440: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00022450: 656c 662e 6261 7365 2b27 3f27 202b 2061  elf.base+'?' + a
+00022460: 7267 730a 2020 2020 6465 6620 6765 7428  rgs.    def get(
+00022470: 7365 6c66 2c6e 616d 653d 4e6f 6e65 293a  self,name=None):
+00022480: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00022490: 7374 616e 6365 2873 656c 662e 7061 7261  stance(self.para
+000224a0: 6d65 7465 7273 2c64 6963 7429 3a0a 2020  meters,dict):.  
+000224b0: 2020 2020 2020 2020 2020 6966 206e 616d            if nam
+000224c0: 6520 616e 6420 6e61 6d65 2069 6e20 7365  e and name in se
+000224d0: 6c66 2e70 6172 616d 6574 6572 733a 0a20  lf.parameters:. 
+000224e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000224f0: 6574 7572 6e20 7365 6c66 2e70 6172 616d  eturn self.param
+00022500: 6574 6572 735b 6e61 6d65 5d0a 2020 2020  eters[name].    
+00022510: 2020 2020 6966 206e 616d 6520 616e 6420      if name and 
+00022520: 6e61 6d65 2069 6e20 7365 6c66 2e5f 5f64  name in self.__d
+00022530: 6963 745f 5f3a 0a20 2020 2020 2020 2020  ict__:.         
+00022540: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
+00022550: 5f64 6963 745f 5f5b 6e61 6d65 5d0a 2020  _dict__[name].  
+00022560: 2020 2020 2020 7365 6c66 2e70 6172 616d        self.param
+00022570: 6574 6572 730a 2020 2020 6465 6620 7061  eters.    def pa
+00022580: 6765 7328 7365 6c66 293a 0a20 2020 2020  ges(self):.     
+00022590: 2020 2068 746d 6c5f 7061 6765 3d27 270a     html_page=''.
+000225a0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+000225b0: 7061 6765 203e 2030 203a 0a20 2020 2020  page > 0 :.     
+000225c0: 2020 2020 2020 206e 6578 745f 7061 6765         next_page
+000225d0: 3d73 656c 662e 7061 6765 2d31 0a20 2020  =self.page-1.   
+000225e0: 2020 2020 2020 2020 206f 6f3d 7365 6c66           oo=self
+000225f0: 2e75 726c 2869 676e 6f72 653d 5b27 7061  .url(ignore=['pa
+00022600: 6765 275d 290a 2020 2020 2020 2020 2020  ge']).          
+00022610: 2020 6966 206f 6f3a 206f 6f3d 6f6f 2b27    if oo: oo=oo+'
+00022620: 2627 0a20 2020 2020 2020 2020 2020 2068  &'.            h
+00022630: 746d 6c5f 7061 6765 3d27 2727 7b30 7d0a  tml_page='''{0}.
+00022640: 2020 2020 2020 2020 2020 2020 3c61 2068              <a h
+00022650: 7265 663d 227b 317d 223e 207c 3c20 3c2f  ref="{1}"> |< </
+00022660: 613e 0a20 2020 2020 2020 2020 2020 203c  a>.            <
+00022670: 6120 6872 6566 3d22 7b32 7d70 6167 653d  a href="{2}page=
+00022680: 7b33 7d22 3e20 3c3c 203c 2f61 3e27 2727  {3}"> << </a>'''
+00022690: 2e66 6f72 6d61 7428 6874 6d6c 5f70 6167  .format(html_pag
+000226a0: 652c 7365 6c66 2e75 726c 2870 6167 653d  e,self.url(page=
+000226b0: 3029 2c6f 6f2c 6e65 7874 5f70 6167 6529  0),oo,next_page)
+000226c0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+000226d0: 2020 2020 2020 2020 2020 2068 746d 6c5f             html_
+000226e0: 7061 6765 3d27 2727 7b30 7d20 7c3c 203c  page='''{0} |< <
+000226f0: 3c20 2727 272e 666f 726d 6174 2868 746d  < '''.format(htm
+00022700: 6c5f 7061 6765 290a 2020 2020 2020 2020  l_page).        
+00022710: 6874 6d6c 5f70 6167 653d 2727 277b 7d5b  html_page='''{}[
+00022720: 7b7d 5d27 2727 2e66 6f72 6d61 7428 6874  {}]'''.format(ht
+00022730: 6d6c 5f70 6167 652c 7365 6c66 2e70 6167  ml_page,self.pag
+00022740: 6529 0a20 2020 2020 2020 2069 6620 7365  e).        if se
+00022750: 6c66 2e70 6167 6520 3c20 7365 6c66 2e74  lf.page < self.t
+00022760: 6f74 616c 5f70 6167 653a 0a20 2020 2020  otal_page:.     
+00022770: 2020 2020 2020 206e 6578 745f 7061 6765         next_page
+00022780: 3d73 656c 662e 7061 6765 2b31 0a20 2020  =self.page+1.   
+00022790: 2020 2020 2020 2020 206f 6f3d 7365 6c66           oo=self
+000227a0: 2e75 726c 2869 676e 6f72 653d 5b27 7061  .url(ignore=['pa
+000227b0: 6765 275d 290a 2020 2020 2020 2020 2020  ge']).          
+000227c0: 2020 6966 206f 6f20 3a20 6f6f 3d6f 6f2b    if oo : oo=oo+
+000227d0: 2726 270a 2020 2020 2020 2020 2020 2020  '&'.            
+000227e0: 6874 6d6c 5f70 6167 653d 2727 277b 307d  html_page='''{0}
+000227f0: 0a20 2020 2020 2020 2020 2020 203c 6120  .            <a 
+00022800: 6872 6566 3d22 7b31 7d70 6167 653d 7b32  href="{1}page={2
+00022810: 7d22 3e20 3e3e 203c 2f61 3e0a 2020 2020  }"> >> </a>.    
+00022820: 2020 2020 2020 2020 3c61 2068 7265 663d          <a href=
+00022830: 227b 317d 7061 6765 3d7b 337d 223e 203e  "{1}page={3}"> >
+00022840: 7c20 3c2f 613e 0a20 2020 2020 2020 2020  | </a>.         
+00022850: 2020 2727 272e 666f 726d 6174 2868 746d    '''.format(htm
+00022860: 6c5f 7061 6765 2c6f 6f2c 6e65 7874 5f70  l_page,oo,next_p
+00022870: 6167 652c 7365 6c66 2e74 6f74 616c 5f70  age,self.total_p
+00022880: 6167 6529 0a20 2020 2020 2020 2065 6c73  age).        els
+00022890: 653a 0a20 2020 2020 2020 2020 2020 2068  e:.            h
+000228a0: 746d 6c5f 7061 6765 3d27 2727 7b30 7d0a  tml_page='''{0}.
+000228b0: 2020 2020 2020 2020 2020 2020 203e 3e20               >> 
+000228c0: 203e 7c0a 2020 2020 2020 2020 2020 2027   >|.           '
+000228d0: 2727 2e66 6f72 6d61 7428 6874 6d6c 5f70  ''.format(html_p
+000228e0: 6167 6529 0a20 2020 2020 2020 2072 6574  age).        ret
+000228f0: 7572 6e20 6874 6d6c 5f70 6167 650a 0a63  urn html_page..c
+00022900: 6c61 7373 2057 4542 3a0a 2020 2020 2727  lass WEB:.    ''
+00022910: 270a 2020 2020 4765 7449 503a 2067 6574  '.    GetIP: get
+00022920: 2073 6572 7665 7220 6f72 2063 6c69 656e   server or clien
+00022930: 7420 4950 0a20 2020 2052 6571 7565 7374  t IP.    Request
+00022940: 3a20 7265 7175 6573 7428 290a 2020 2020  : request().    
+00022950: 7374 7232 7572 6c3a 2063 6f6e 7665 7274  str2url: convert
+00022960: 2073 7472 696e 6720 746f 2055 524c 2066   string to URL f
+00022970: 6f72 6d61 740a 2020 2020 666f 726d 3264  ormat.    form2d
+00022980: 6963 743a 2063 6f6e 7665 7274 2066 6f72  ict: convert for
+00022990: 6d20 6461 7461 2074 6f20 6469 6374 696f  m data to dictio
+000229a0: 6e61 7279 2066 6f72 6d61 740a 2020 2020  nary format.    
+000229b0: 2727 270a 2020 2020 6465 6620 5f5f 696e  '''.    def __in
+000229c0: 6974 5f5f 2873 656c 662c 7265 7175 6573  it__(self,reques
+000229d0: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
+000229e0: 2069 6620 7265 7175 6573 743a 0a20 2020   if request:.   
+000229f0: 2020 2020 2020 2020 2073 656c 662e 7265           self.re
+00022a00: 7175 6573 7473 3d72 6571 7565 7374 0a20  quests=request. 
+00022a10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00022a20: 2020 2020 2020 2020 2049 6d70 6f72 7428           Import(
+00022a30: 2769 6d70 6f72 7420 7265 7175 6573 7473  'import requests
+00022a40: 2729 0a20 2020 2020 2020 2020 2020 2073  ').            s
+00022a50: 656c 662e 7265 7175 6573 7473 3d72 6571  elf.requests=req
+00022a60: 7565 7374 730a 0a20 2020 2064 6566 2053  uests..    def S
+00022a70: 6573 7369 6f6e 2873 656c 6629 3a0a 2020  ession(self):.  
+00022a80: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00022a90: 662e 7265 7175 6573 7473 2e73 6573 7369  f.requests.sessi
+00022aa0: 6f6e 2e5f 6765 745f 6f72 5f63 7265 6174  on._get_or_creat
+00022ab0: 655f 7365 7373 696f 6e5f 6b65 7928 290a  e_session_key().
+00022ac0: 0a20 2020 2064 6566 2047 6574 4950 2873  .    def GetIP(s
+00022ad0: 656c 662c 6d6f 6465 3d27 7365 7276 6572  elf,mode='server
+00022ae0: 2729 3a0a 2020 2020 2020 2020 2727 2720  '):.        ''' 
+00022af0: 0a20 2020 2020 2020 206d 6f64 653a 0a20  .        mode:. 
+00022b00: 2020 2020 2020 2020 2073 6572 7665 7220           server 
+00022b10: 3a20 6765 7420 7365 7276 6572 2049 5020  : get server IP 
+00022b20: 2864 6566 6175 6c74 290a 2020 2020 2020  (default).      
+00022b30: 2020 2020 636c 6965 6e74 203a 2067 6574      client : get
+00022b40: 2063 6c69 656e 7420 4950 0a20 2020 2020   client IP.     
+00022b50: 2020 2027 2727 0a20 2020 2020 2020 2069     '''.        i
+00022b60: 6620 6d6f 6465 203d 3d20 2773 6572 7665  f mode == 'serve
+00022b70: 7227 3a0a 2020 2020 2020 2020 2020 2020  r':.            
+00022b80: 7265 7475 726e 2073 656c 662e 7265 7175  return self.requ
+00022b90: 6573 7473 2e67 6574 5f68 6f73 7428 292e  ests.get_host().
+00022ba0: 7370 6c69 7428 273a 2729 0a20 2020 2020  split(':').     
+00022bb0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00022bc0: 2020 2020 2078 5f66 6f72 7761 7264 6564       x_forwarded
+00022bd0: 5f66 6f72 203d 2073 656c 662e 7265 7175  _for = self.requ
+00022be0: 6573 7473 2e4d 4554 412e 6765 7428 2748  ests.META.get('H
+00022bf0: 5454 505f 585f 464f 5257 4152 4445 445f  TTP_X_FORWARDED_
+00022c00: 464f 5227 290a 2020 2020 2020 2020 2020  FOR').          
+00022c10: 2020 6966 2078 5f66 6f72 7761 7264 6564    if x_forwarded
+00022c20: 5f66 6f72 3a0a 2020 2020 2020 2020 2020  _for:.          
+00022c30: 2020 2020 2020 7265 7475 726e 2078 5f66        return x_f
+00022c40: 6f72 7761 7264 6564 5f66 6f72 2e73 706c  orwarded_for.spl
+00022c50: 6974 2827 2c27 295b 305d 0a20 2020 2020  it(',')[0].     
+00022c60: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00022c70: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00022c80: 7572 6e20 7365 6c66 2e72 6571 7565 7374  urn self.request
+00022c90: 732e 4d45 5441 2e67 6574 2827 5245 4d4f  s.META.get('REMO
+00022ca0: 5445 5f41 4444 5227 290a 0a20 2020 2064  TE_ADDR')..    d
+00022cb0: 6566 204d 6574 686f 6428 7365 6c66 2c6d  ef Method(self,m
+00022cc0: 6574 686f 645f 6e61 6d65 3d4e 6f6e 652c  ethod_name=None,
+00022cd0: 6d6f 6465 3d27 6c6f 7765 7227 293a 0a20  mode='lower'):. 
+00022ce0: 2020 2020 2020 206d 6574 686f 645f 6e3d         method_n=
+00022cf0: 7365 6c66 2e72 6571 7565 7374 732e 6d65  self.requests.me
+00022d00: 7468 6f64 0a20 2020 2020 2020 2069 6620  thod.        if 
+00022d10: 6d65 7468 6f64 5f6e 616d 653a 0a20 2020  method_name:.   
+00022d20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00022d30: 6d65 7468 6f64 5f6e 616d 652e 6c6f 7765  method_name.lowe
+00022d40: 7228 2920 3d3d 206d 6574 686f 645f 6e2e  r() == method_n.
+00022d50: 6c6f 7765 7228 290a 2020 2020 2020 2020  lower().        
+00022d60: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00022d70: 2020 6966 206d 6f64 6520 3d3d 2027 7570    if mode == 'up
+00022d80: 7065 7227 3a0a 2020 2020 2020 2020 2020  per':.          
+00022d90: 2020 2020 2020 7265 7475 726e 206d 6574        return met
+00022da0: 686f 645f 6e2e 7570 7065 7228 290a 2020  hod_n.upper().  
+00022db0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00022dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022dd0: 7265 7475 726e 206d 6574 686f 645f 6e2e  return method_n.
+00022de0: 6c6f 7765 7228 290a 0a20 2020 2064 6566  lower()..    def
+00022df0: 2052 6571 7565 7374 2873 656c 662c 686f   Request(self,ho
+00022e00: 7374 5f75 726c 2c2a 2a6f 7074 7329 3a0a  st_url,**opts):.
+00022e10: 2020 2020 2020 2020 2727 270a 2020 2020          '''.    
+00022e20: 2020 2020 7573 6572 2026 2070 6173 7377      user & passw
+00022e30: 6f72 643a 2073 7472 696e 6720 666f 726d  ord: string form
+00022e40: 6174 0a20 2020 2020 2020 2061 7574 683a  at.        auth:
+00022e50: 2074 7570 6c65 2066 6f72 6d61 740a 2020   tuple format.  
+00022e60: 2020 2020 2020 6461 7461 3a20 6469 6374        data: dict
+00022e70: 696f 6e61 7279 2066 6f72 6d61 740a 2020  ionary format.  
+00022e80: 2020 2020 2020 6a73 6f6e 3a20 6469 6374        json: dict
+00022e90: 696f 6e61 7279 202f 204a 534f 4e20 666f  ionary / JSON fo
+00022ea0: 726d 6174 0a20 2020 2020 2020 2066 696c  rmat.        fil
+00022eb0: 6573 3a20 6469 6374 696f 6e61 7279 2066  es: dictionary f
+00022ec0: 6f72 6d61 740a 2020 2020 2020 2020 2020  ormat.          
+00022ed0: 2065 7829 2066 696c 6573 203d 207b 2027   ex) files = { '
+00022ee0: 3c66 696c 6520 7061 7261 6d65 7465 7220  <file parameter 
+00022ef0: 6e61 6d65 3e27 3a20 283c 6669 6c65 6e61  name>': (<filena
+00022f00: 6d65 3e2c 206f 7065 6e28 3c66 696c 656e  me>, open(<filen
+00022f10: 616d 653e 2c27 7262 2729 297d 0a20 2020  ame>,'rb'))}.   
+00022f20: 2020 2020 2068 6561 6465 7273 3a20 7374       headers: st
+00022f30: 7269 6e67 206f 7220 6469 6374 696f 6e61  ring or dictiona
+00022f40: 7279 2066 6f72 6d61 740a 2020 2020 2020  ry format.      
+00022f50: 2020 2020 202d 2073 7472 696e 6720 6578       - string ex
+00022f60: 616d 706c 650a 2020 2020 2020 2020 2020  ample.          
+00022f70: 2020 2068 6561 6465 7273 3d27 6a73 6f6e     headers='json
+00022f80: 270a 2020 2020 2020 2020 2020 2020 2072  '.             r
+00022f90: 6571 7569 7265 6420 6461 7461 206f 7220  equired data or 
+00022fa0: 6a73 6f6e 200a 2020 2020 2020 2020 2020  json .          
+00022fb0: 202d 2064 6963 7469 6f6e 6172 7920 6578   - dictionary ex
+00022fc0: 616d 706c 650a 2020 2020 2020 2020 2020  ample.          
+00022fd0: 2020 2068 6561 6465 7273 203d 207b 2022     headers = { "
+00022fe0: 436f 6e74 656e 742d 5479 7065 223a 2022  Content-Type": "
+00022ff0: 6170 706c 6963 6174 696f 6e2f 6a73 6f6e  application/json
+00023000: 227d 0a20 2020 2020 2020 2064 6267 203a  "}.        dbg :
+00023010: 2054 7275 653a 2073 686f 7720 6465 6275   True: show debu
+00023020: 6769 6e67 206c 6f67 2864 6566 6175 6c74  ging log(default
+00023030: 292c 2046 616c 7365 2069 676e 6f72 6520  ), False ignore 
+00023040: 6465 6275 6767 696e 6720 6c6f 670a 2020  debugging log.  
+00023050: 2020 2020 2020 7069 6e67 3a20 5472 7565        ping: True
+00023060: 3a20 4368 6563 6b20 6465 7374 2049 5020  : Check dest IP 
+00023070: 7769 7468 2070 696e 672c 2046 616c 7365  with ping, False
+00023080: 3a20 6e6f 7420 6368 6563 6b20 6465 7374  : not check dest
+00023090: 2049 5020 2864 6566 6175 6c74 290a 2020   IP (default).  
+000230a0: 2020 2020 2020 6d61 785f 7472 793a 2064        max_try: d
+000230b0: 6566 6175 6c74 2033 2c20 7265 7472 7920  efault 3, retry 
+000230c0: 6d61 7820 6e75 6d62 6572 2077 6865 6e20  max number when 
+000230d0: 6661 696c 6564 0a20 2020 2020 2020 206d  failed.        m
+000230e0: 6f64 653a 2064 6566 6175 6c74 2067 6574  ode: default get
+000230f0: 2c20 2867 6574 2c70 6f73 742c 7061 7463  , (get,post,patc
+00023100: 6829 0a20 2020 2020 2020 2069 703a 2064  h).        ip: d
+00023110: 6573 7420 4950 0a20 2020 2020 2020 2070  est IP.        p
+00023120: 6f72 743a 2064 6566 6175 6c74 2038 3020  ort: default 80 
+00023130: 6f72 2034 3433 2c20 6172 7263 6f72 6469  or 443, arrcordi
+00023140: 6e67 2074 6f20 6874 7470 206f 7220 6874  ng to http or ht
+00023150: 7470 732c 2069 6620 796f 7520 7761 6e74  tps, if you want
+00023160: 2073 7065 6369 616c 2070 6f72 7420 7468   special port th
+00023170: 656e 2074 7970 650a 2020 2020 2020 2020  en type.        
+00023180: 626d 633a 2064 6566 6175 6c74 2046 616c  bmc: default Fal
+00023190: 7365 2c20 5472 7565 2074 6865 6e20 6175  se, True then au
+000231a0: 746f 6d61 7469 6361 6c6c 2063 6865 636b  tomaticall check
+000231b0: 2042 4d43 2070 6f72 740a 2020 2020 2020   BMC port.      
+000231c0: 2020 7469 6d65 6f75 743a 2072 6571 7565    timeout: reque
+000231d0: 7374 2074 696d 656f 7574 2028 7365 636f  st timeout (seco
+000231e0: 6e64 7329 2c20 6465 6661 756c 7420 4e6f  nds), default No
+000231f0: 6e65 0a20 2020 2020 2020 2027 2727 0a20  ne.        '''. 
+00023200: 2020 2020 2020 2023 2072 656d 6f76 6520         # remove 
+00023210: 5353 4c20 7761 7269 6e67 2065 7272 6f72  SSL waring error
+00023220: 206d 6573 7361 6765 2028 7465 7374 290a   message (test).
+00023230: 2020 2020 2020 2020 7365 6c66 2e72 6571          self.req
+00023240: 7565 7374 732e 7061 636b 6167 6573 2e75  uests.packages.u
+00023250: 726c 6c69 6233 2e64 6973 6162 6c65 5f77  rllib3.disable_w
+00023260: 6172 6e69 6e67 7328 290a 0a20 2020 2020  arnings()..     
+00023270: 2020 2069 703d 6f70 7473 2e67 6574 2827     ip=opts.get('
+00023280: 6970 272c 4e6f 6e65 290a 2020 2020 2020  ip',None).      
+00023290: 2020 706f 7274 3d6f 7074 732e 6765 7428    port=opts.get(
+000232a0: 2770 6f72 7427 2c4e 6f6e 6529 0a20 2020  'port',None).   
+000232b0: 2020 2020 2062 6d63 3d6f 7074 732e 6765       bmc=opts.ge
+000232c0: 7428 2762 6d63 272c 4661 6c73 6529 0a20  t('bmc',False). 
+000232d0: 2020 2020 2020 206d 6f64 653d 6f70 7473         mode=opts
+000232e0: 2e67 6574 2827 6d6f 6465 272c 6f70 7473  .get('mode',opts
+000232f0: 2e67 6574 2827 6d65 7468 6f64 272c 2767  .get('method','g
+00023300: 6574 2729 290a 2020 2020 2020 2020 6d61  et')).        ma
+00023310: 785f 7472 793d 6f70 7473 2e67 6574 2827  x_try=opts.get('
+00023320: 6d61 785f 7472 7927 2c6f 7074 732e 6765  max_try',opts.ge
+00023330: 7428 2772 6574 7279 272c 6f70 7473 2e67  t('retry',opts.g
+00023340: 6574 2827 6c6f 6f70 272c 6f70 7473 2e67  et('loop',opts.g
+00023350: 6574 2827 7472 7927 2c33 2929 2929 2023  et('try',3)))) #
+00023360: 2052 6574 7279 206d 6178 206e 756d 6265   Retry max numbe
+00023370: 720a 2020 2020 2020 2020 6175 7468 3d6f  r.        auth=o
+00023380: 7074 732e 6765 7428 2761 7574 6827 2c4e  pts.get('auth',N
+00023390: 6f6e 6529 0a20 2020 2020 2020 2075 7365  one).        use
+000233a0: 723d 6f70 7473 2e67 6574 2827 7573 6572  r=opts.get('user
+000233b0: 272c 4e6f 6e65 290a 2020 2020 2020 2020  ',None).        
+000233c0: 7061 7373 7764 3d6f 7074 732e 6765 7428  passwd=opts.get(
+000233d0: 2770 6173 7377 6427 2c4e 6f6e 6529 0a20  'passwd',None). 
+000233e0: 2020 2020 2020 2064 6174 613d 6f70 7473         data=opts
+000233f0: 2e67 6574 2827 6461 7461 272c 4e6f 6e65  .get('data',None
+00023400: 2920 2320 6469 6374 696f 6e61 7279 2066  ) # dictionary f
+00023410: 6f72 6d61 740a 2020 2020 2020 2020 6a73  ormat.        js
+00023420: 6f6e 5f64 6174 613d 6f70 7473 2e67 6574  on_data=opts.get
+00023430: 2827 6a73 6f6e 272c 4e6f 6e65 2920 2320  ('json',None) # 
+00023440: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
+00023450: 740a 2020 2020 2020 2020 6669 6c65 733d  t.        files=
+00023460: 6f70 7473 2e67 6574 2827 6669 6c65 7327  opts.get('files'
+00023470: 2c4e 6f6e 6529 2023 2064 6963 7469 6f6e  ,None) # diction
+00023480: 6172 7920 666f 726d 6174 0a20 2020 2020  ary format.     
+00023490: 2020 2072 6571 7565 7374 5f75 726c 3d6f     request_url=o
+000234a0: 7074 732e 6765 7428 2772 6571 7565 7374  pts.get('request
+000234b0: 5f75 726c 272c 4e6f 6e65 290a 2020 2020  _url',None).    
+000234c0: 2020 2020 6462 673d 6f70 7473 2e67 6574      dbg=opts.get
+000234d0: 2827 6462 6727 2c54 7275 6529 2020 2320  ('dbg',True)  # 
+000234e0: 7368 6f77 2064 6562 7567 6769 6e67 206c  show debugging l
+000234f0: 6f67 0a20 2020 2020 2020 2070 696e 673d  og.        ping=
+00023500: 6f70 7473 2e67 6574 2827 7069 6e67 272c  opts.get('ping',
+00023510: 4661 6c73 6529 2023 2063 6865 636b 2070  False) # check p
+00023520: 696e 6720 746f 2049 500a 2020 2020 2020  ing to IP.      
+00023530: 2020 7469 6d65 6f75 743d 6f70 7473 2e67    timeout=opts.g
+00023540: 6574 2827 7469 6d65 6f75 7427 2c4e 6f6e  et('timeout',Non
+00023550: 6529 2023 2072 6571 7565 7374 2074 696d  e) # request tim
+00023560: 656f 7574 0a20 2020 2020 2020 2072 6571  eout.        req
+00023570: 5f64 6174 613d 7b7d 0a20 2020 2020 2020  _data={}.       
+00023580: 2063 686b 5f64 6573 743d 4e6f 6e65 0a20   chk_dest=None. 
+00023590: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000235a0: 616e 6365 2874 696d 656f 7574 2c69 6e74  ance(timeout,int
+000235b0: 293a 2072 6571 5f64 6174 615b 2774 696d  ): req_data['tim
+000235c0: 656f 7574 275d 3d74 696d 656f 7574 0a20  eout']=timeout. 
+000235d0: 2020 2020 2020 2069 6620 6f70 7473 2e67         if opts.g
+000235e0: 6574 2827 6874 7470 7327 293a 2072 6571  et('https'): req
+000235f0: 5f64 6174 615b 2776 6572 6966 7927 5d3d  _data['verify']=
+00023600: 4661 6c73 650a 2020 2020 2020 2020 6966  False.        if
+00023610: 2054 7970 6528 6175 7468 2c27 7475 706c   Type(auth,'tupl
+00023620: 6527 2c64 6174 613d 5472 7565 293a 0a20  e',data=True):. 
+00023630: 2020 2020 2020 2020 2020 2072 6571 5f64             req_d
+00023640: 6174 615b 2761 7574 6827 5d3d 6f70 7473  ata['auth']=opts
+00023650: 2e67 6574 2827 6175 7468 2729 0a20 2020  .get('auth').   
+00023660: 2020 2020 2065 6c69 6620 5479 7065 2875       elif Type(u
+00023670: 7365 722c 2773 7472 272c 6461 7461 3d54  ser,'str',data=T
+00023680: 7275 6529 2061 6e64 2054 7970 6528 7061  rue) and Type(pa
+00023690: 7373 7764 2c27 7374 7227 2c64 6174 613d  sswd,'str',data=
+000236a0: 5472 7565 293a 0a20 2020 2020 2020 2020  True):.         
+000236b0: 2020 2072 6571 5f64 6174 615b 2761 7574     req_data['aut
+000236c0: 6827 5d3d 2875 7365 722c 7061 7373 7764  h']=(user,passwd
+000236d0: 290a 2020 2020 2020 2020 6966 2054 7970  ).        if Typ
+000236e0: 6528 6461 7461 2c27 6469 6374 272c 6461  e(data,'dict',da
+000236f0: 7461 3d54 7275 6529 3a20 7265 715f 6461  ta=True): req_da
+00023700: 7461 5b27 6461 7461 275d 3d6f 7074 732e  ta['data']=opts.
+00023710: 6765 7428 2764 6174 6127 290a 2020 2020  get('data').    
+00023720: 2020 2020 6966 2054 7970 6528 6a73 6f6e      if Type(json
+00023730: 5f64 6174 612c 2764 6963 7427 2c64 6174  _data,'dict',dat
+00023740: 613d 5472 7565 293a 2072 6571 5f64 6174  a=True): req_dat
+00023750: 615b 276a 736f 6e27 5d3d 6a73 6f6e 5f64  a['json']=json_d
+00023760: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
+00023770: 0a20 2020 2020 2020 2069 6620 5479 7065  .        if Type
+00023780: 2866 696c 6573 2c27 6469 6374 272c 6461  (files,'dict',da
+00023790: 7461 3d54 7275 6529 3a20 7265 715f 6461  ta=True): req_da
+000237a0: 7461 5b27 6669 6c65 7327 5d3d 6f70 7473  ta['files']=opts
+000237b0: 2e67 6574 2827 6669 6c65 7327 290a 2020  .get('files').  
+000237c0: 2020 2020 2020 6865 6164 6572 733d 6f70        headers=op
+000237d0: 7473 2e67 6574 2827 6865 6164 6572 7327  ts.get('headers'
+000237e0: 2920 2320 6469 6374 696f 6e61 7279 2066  ) # dictionary f
+000237f0: 6f72 6d61 740a 2020 2020 2020 2020 6966  ormat.        if
+00023800: 2054 7970 6528 6865 6164 6572 732c 2773   Type(headers,'s
+00023810: 7472 272c 6461 7461 3d54 7275 6529 3a0a  tr',data=True):.
+00023820: 2020 2020 2020 2020 2020 2020 6966 2068              if h
+00023830: 6561 6465 7273 203d 3d20 276a 736f 6e27  eaders == 'json'
+00023840: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00023850: 2020 6865 6164 6572 733d 7b20 2243 6f6e    headers={ "Con
+00023860: 7465 6e74 2d54 7970 6522 3a20 2261 7070  tent-Type": "app
+00023870: 6c69 6361 7469 6f6e 2f6a 736f 6e22 7d0a  lication/json"}.
+00023880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023890: 6966 2064 6174 613a 0a20 2020 2020 2020  if data:.       
+000238a0: 2020 2020 2020 2020 2020 2020 2064 6174               dat
+000238b0: 613d 6a73 6f6e 2e64 756d 7073 2864 6174  a=json.dumps(dat
+000238c0: 6129 0a20 2020 2020 2020 2020 2020 2020  a).             
+000238d0: 2020 2020 2020 2072 6571 5f64 6174 615b         req_data[
+000238e0: 2764 6174 6127 5d3d 6461 7461 0a20 2020  'data']=data.   
+000238f0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00023900: 6620 6a73 6f6e 5f64 6174 613a 0a20 2020  f json_data:.   
+00023910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023920: 2064 6174 613d 6a73 6f6e 2e64 756d 7073   data=json.dumps
+00023930: 286a 736f 6e5f 6461 7461 290a 2020 2020  (json_data).    
+00023940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023950: 6966 2027 6a73 6f6e 2720 696e 2072 6571  if 'json' in req
+00023960: 5f64 6174 613a 2072 6571 5f64 6174 612e  _data: req_data.
+00023970: 706f 7028 276a 736f 6e27 290a 2020 2020  pop('json').    
+00023980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023990: 7265 715f 6461 7461 5b27 6461 7461 275d  req_data['data']
+000239a0: 3d64 6174 610a 2020 2020 2020 2020 656c  =data.        el
+000239b0: 6966 2054 7970 6528 6865 6164 6572 732c  if Type(headers,
+000239c0: 2764 6963 7427 2c64 6174 613d 5472 7565  'dict',data=True
+000239d0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+000239e0: 6571 5f64 6174 615b 2768 6561 6465 7273  eq_data['headers
+000239f0: 275d 3d68 6561 6465 7273 0a20 2020 2020  ']=headers.     
+00023a00: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
+00023a10: 2869 7029 3a0a 2020 2020 2020 2020 2020  (ip):.          
+00023a20: 2020 6970 3d49 7056 3428 6970 2c6f 7574    ip=IpV4(ip,out
+00023a30: 3d73 7472 2c73 7570 706f 7274 5f68 6f73  =str,support_hos
+00023a40: 746e 616d 653d 5472 7565 290a 2020 2020  tname=True).    
+00023a50: 2020 2020 2020 2020 6368 6b5f 6465 7374          chk_dest
+00023a60: 3d27 7b7d 272e 666f 726d 6174 2869 7029  ='{}'.format(ip)
+00023a70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00023a80: 7265 715f 6461 7461 2e67 6574 2827 7665  req_data.get('ve
+00023a90: 7269 6679 272c 5472 7565 293a 0a20 2020  rify',True):.   
+00023aa0: 2020 2020 2020 2020 2020 2020 2068 6f73               hos
+00023ab0: 745f 7572 6c3d 2768 7474 703a 2f2f 7b7d  t_url='http://{}
+00023ac0: 272e 666f 726d 6174 2869 7029 0a20 2020  '.format(ip).   
+00023ad0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00023ae0: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+00023af0: 6f73 745f 7572 6c3d 2768 7474 7073 3a2f  ost_url='https:/
+00023b00: 2f7b 7d27 2e66 6f72 6d61 7428 6970 290a  /{}'.format(ip).
+00023b10: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00023b20: 6f74 2049 734e 6f6e 6528 706f 7274 293a  ot IsNone(port):
+00023b30: 2068 6f73 745f 7572 6c3d 277b 7d3a 7b7d   host_url='{}:{}
+00023b40: 272e 666f 726d 6174 2868 6f73 745f 7572  '.format(host_ur
+00023b50: 6c2c 706f 7274 290a 2020 2020 2020 2020  l,port).        
+00023b60: 2020 2020 6966 206e 6f74 2049 734e 6f6e      if not IsNon
+00023b70: 6528 7265 7175 6573 745f 7572 6c29 3a20  e(request_url): 
+00023b80: 686f 7374 5f75 726c 3d27 7b7d 2f7b 7d27  host_url='{}/{}'
+00023b90: 2e66 6f72 6d61 7428 686f 7374 5f75 726c  .format(host_url
+00023ba0: 2c72 6571 7565 7374 5f75 726c 290a 2020  ,request_url).  
+00023bb0: 2020 2020 2020 656c 6966 2054 7970 6528        elif Type(
+00023bc0: 686f 7374 5f75 726c 2c27 7374 7227 2c64  host_url,'str',d
+00023bd0: 6174 613d 5472 7565 2920 616e 6420 686f  ata=True) and ho
+00023be0: 7374 5f75 726c 2e73 7461 7274 7377 6974  st_url.startswit
+00023bf0: 6828 2768 7474 7027 293a 0a20 2020 2020  h('http'):.     
+00023c00: 2020 2020 2020 2063 686b 5f64 6573 743d         chk_dest=
+00023c10: 7265 2e63 6f6d 7069 6c65 2827 2868 7474  re.compile('(htt
+00023c20: 707c 6874 7470 7329 3a2f 2f28 5b61 2d7a  p|https)://([a-z
+00023c30: 412d 5a30 2d39 2e5d 2a29 5b3a 2f5d 2729  A-Z0-9.]*)[:/]')
+00023c40: 2e66 696e 6461 6c6c 2868 6f73 745f 7572  .findall(host_ur
+00023c50: 6c29 0a20 2020 2020 2020 2020 2020 2069  l).            i
+00023c60: 6620 6c65 6e28 6368 6b5f 6465 7374 293d  f len(chk_dest)=
+00023c70: 3d30 3a0a 2020 2020 2020 2020 2020 2020  =0:.            
+00023c80: 2020 2020 6368 6b5f 6465 7374 3d72 652e      chk_dest=re.
+00023c90: 636f 6d70 696c 6528 2728 6874 7470 7c68  compile('(http|h
+00023ca0: 7474 7073 293a 2f2f 285b 612d 7a41 2d5a  ttps)://([a-zA-Z
+00023cb0: 302d 392e 5d2a 2927 292e 6669 6e64 616c  0-9.]*)').findal
+00023cc0: 6c28 686f 7374 5f75 726c 290a 2020 2020  l(host_url).    
+00023cd0: 2020 2020 2020 2020 6966 206c 656e 2863          if len(c
+00023ce0: 686b 5f64 6573 7429 3a0a 2020 2020 2020  hk_dest):.      
+00023cf0: 2020 2020 2020 2020 2020 6368 6b5f 6465            chk_de
+00023d00: 7374 3d63 686b 5f64 6573 745b 305d 5b31  st=chk_dest[0][1
+00023d10: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00023d20: 2020 6966 2068 6f73 745f 7572 6c2e 6669    if host_url.fi
+00023d30: 6e64 2827 6874 7470 733a 2f2f 2729 203d  nd('https://') =
+00023d40: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+00023d50: 2020 2020 2020 2020 2072 6571 5f64 6174           req_dat
+00023d60: 615b 2776 6572 6966 7927 5d3d 4661 6c73  a['verify']=Fals
+00023d70: 650a 2020 2020 2020 2020 6966 2049 734e  e.        if IsN
+00023d80: 6f6e 6528 6368 6b5f 6465 7374 293a 0a20  one(chk_dest):. 
+00023d90: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00023da0: 6e20 4661 6c73 652c 2768 6f73 745f 7572  n False,'host_ur
+00023db0: 6c20 6f72 2069 7020 6e6f 7420 666f 756e  l or ip not foun
+00023dc0: 6427 0a20 2020 2020 2020 2069 6620 626d  d'.        if bm
+00023dd0: 633a 0a20 2020 2020 2020 2020 2020 2069  c:.            i
+00023de0: 6620 4970 5634 2863 686b 5f64 6573 742c  f IpV4(chk_dest,
+00023df0: 626d 633d 5472 7565 2c73 7570 706f 7274  bmc=True,support
+00023e00: 5f68 6f73 746e 616d 653d 5472 7565 2920  _hostname=True) 
+00023e10: 6973 2046 616c 7365 3a0a 2020 2020 2020  is False:.      
+00023e20: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00023e30: 2046 616c 7365 2c27 5468 6520 4950 287b   False,'The IP({
+00023e40: 7d29 2069 7320 6e6f 7420 424d 4320 4950  }) is not BMC IP
+00023e50: 272e 666f 726d 6174 2863 686b 5f64 6573  '.format(chk_des
+00023e60: 7429 0a20 2020 2020 2020 2069 6620 7069  t).        if pi
+00023e70: 6e67 2061 6e64 2063 686b 5f64 6573 743a  ng and chk_dest:
+00023e80: 0a20 2020 2020 2020 2020 2020 2070 696e  .            pin
+00023e90: 675f 7263 3d70 696e 6728 6368 6b5f 6465  g_rc=ping(chk_de
+00023ea0: 7374 2c74 696d 656f 7574 5f73 6563 3d33  st,timeout_sec=3
+00023eb0: 2c73 7570 706f 7274 5f68 6f73 746e 616d  ,support_hostnam
+00023ec0: 653d 5472 7565 290a 2020 2020 2020 2020  e=True).        
+00023ed0: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+00023ee0: 7461 6e63 6528 7069 6e67 5f72 632c 626f  tance(ping_rc,bo
+00023ef0: 6f6c 2920 616e 6420 7069 6e67 5f72 633d  ol) and ping_rc=
+00023f00: 3d30 3a0a 2020 2020 2020 2020 2020 2020  =0:.            
+00023f10: 2020 2020 7265 7475 726e 2030 2c27 4361      return 0,'Ca
+00023f20: 6e63 656c 6564 270a 2020 2020 2020 2020  nceled'.        
+00023f30: 2020 2020 656c 6966 206e 6f74 2070 696e      elif not pin
+00023f40: 675f 7263 3a0a 2020 2020 2020 2020 2020  g_rc:.          
+00023f50: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+00023f60: 7365 2c27 4361 6e20 6e6f 7420 6163 6365  se,'Can not acce
+00023f70: 7373 2074 6f20 6465 7374 696e 6174 696f  ss to destinatio
+00023f80: 6e28 7b7d 2927 2e66 6f72 6d61 7428 6368  n({})'.format(ch
+00023f90: 6b5f 6465 7374 290a 2020 2020 2020 2020  k_dest).        
+00023fa0: 7373 203d 2073 656c 662e 7265 7175 6573  ss = self.reques
+00023fb0: 7473 2e53 6573 7369 6f6e 2829 0a20 2020  ts.Session().   
+00023fc0: 2020 2020 2065 7272 5f6d 7367 3d27 270a       err_msg=''.
+00023fd0: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
+00023fe0: 2072 616e 6765 2830 2c6d 6178 5f74 7279   range(0,max_try
+00023ff0: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
+00024000: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00024010: 2020 2020 6966 2049 7353 616d 6528 6d6f      if IsSame(mo
+00024020: 6465 2c27 706f 7374 2729 3a0a 2020 2020  de,'post'):.    
+00024030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024040: 7220 3d73 732e 706f 7374 2868 6f73 745f  r =ss.post(host_
+00024050: 7572 6c2c 2a2a 7265 715f 6461 7461 290a  url,**req_data).
+00024060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024070: 656c 6966 2049 7353 616d 6528 6d6f 6465  elif IsSame(mode
+00024080: 2c27 7061 7463 6827 293a 0a20 2020 2020  ,'patch'):.     
+00024090: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000240a0: 203d 7373 2e70 6174 6368 2868 6f73 745f   =ss.patch(host_
+000240b0: 7572 6c2c 2a2a 7265 715f 6461 7461 290a  url,**req_data).
+000240c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000240d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000240e0: 2020 2020 2020 2020 2020 7220 3d73 732e            r =ss.
+000240f0: 6765 7428 686f 7374 5f75 726c 2c2a 2a72  get(host_url,**r
+00024100: 6571 5f64 6174 6129 0a20 2020 2020 2020  eq_data).       
+00024110: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00024120: 5472 7565 2c72 0a20 2020 2020 2020 2020  True,r.         
+00024130: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+00024140: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
+00024150: 2020 2020 2020 2020 2020 2020 2365 7863              #exc
+00024160: 6570 7420 7265 7175 6573 7473 2e65 7863  ept requests.exc
+00024170: 6570 7469 6f6e 732e 5265 7175 6573 7445  eptions.RequestE
+00024180: 7863 6570 7469 6f6e 2061 7320 653a 0a20  xception as e:. 
+00024190: 2020 2020 2020 2020 2020 2065 7272 5f6d             err_m
+000241a0: 7367 3d27 5365 7276 6572 287b 7d29 2068  sg='Server({}) h
+000241b0: 6173 206e 6f20 7265 7370 6f6e 7365 272e  as no response'.
+000241c0: 666f 726d 6174 2863 686b 5f64 6573 7429  format(chk_dest)
+000241d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000241e0: 6462 673a 2053 7464 4572 7228 225c 6e53  dbg: StdErr("\nS
+000241f0: 6572 7665 7228 7b7d 2920 6861 7320 6e6f  erver({}) has no
+00024200: 2072 6573 706f 6e73 6520 2877 6169 7420   response (wait 
+00024210: 7b7d 2f7b 7d20 2831 3073 2929 222e 666f  {}/{} (10s))".fo
+00024220: 726d 6174 2863 686b 5f64 6573 742c 6a2c  rmat(chk_dest,j,
+00024230: 6d61 785f 7472 7929 290a 2020 2020 2020  max_try)).      
+00024240: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
+00024250: 2831 3029 0a20 2020 2020 2020 2072 6574  (10).        ret
+00024260: 7572 6e20 4661 6c73 652c 2754 696d 654f  urn False,'TimeO
+00024270: 7574 3a20 7b7d 272e 666f 726d 6174 2865  ut: {}'.format(e
+00024280: 7272 5f6d 7367 2920 6966 2065 7272 5f6d  rr_msg) if err_m
+00024290: 7367 2065 6c73 6520 2754 696d 654f 7574  sg else 'TimeOut
+000242a0: 270a 0a20 2020 2064 6566 2073 7472 3275  '..    def str2u
+000242b0: 726c 2873 656c 662c 7374 7269 6e67 293a  rl(self,string):
+000242c0: 0a20 2020 2020 2020 2069 6620 4973 4e6f  .        if IsNo
+000242d0: 6e65 2873 7472 696e 6729 3a20 7265 7475  ne(string): retu
+000242e0: 726e 2027 270a 2020 2020 2020 2020 6966  rn ''.        if
+000242f0: 2069 7369 6e73 7461 6e63 6528 7374 7269   isinstance(stri
+00024300: 6e67 2c73 7472 293a 0a20 2020 2020 2020  ng,str):.       
+00024310: 2020 2020 2072 6574 7572 6e20 7374 7269       return stri
+00024320: 6e67 2e72 6570 6c61 6365 2827 2b27 2c27  ng.replace('+','
+00024330: 2532 4227 292e 7265 706c 6163 6528 273f  %2B').replace('?
+00024340: 272c 2725 3346 2729 2e72 6570 6c61 6365  ','%3F').replace
+00024350: 2827 2f27 2c27 2532 4627 292e 7265 706c  ('/','%2F').repl
+00024360: 6163 6528 273a 272c 2725 3341 2729 2e72  ace(':','%3A').r
+00024370: 6570 6c61 6365 2827 3d27 2c27 2533 4427  eplace('=','%3D'
+00024380: 292e 7265 706c 6163 6528 2720 272c 272b  ).replace(' ','+
+00024390: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
+000243a0: 6e20 7374 7269 6e67 0a0a 2020 2020 6465  n string..    de
+000243b0: 6620 666f 726d 3264 6963 7428 7365 6c66  f form2dict(self
+000243c0: 2c73 7263 3d4e 6f6e 6529 3a0a 2020 2020  ,src=None):.    
+000243d0: 2020 2020 6966 2049 734e 6f6e 6528 7372      if IsNone(sr
+000243e0: 6329 3a20 7372 633d 7365 6c66 2e72 6571  c): src=self.req
+000243f0: 7565 7374 732e 666f 726d 0a20 2020 2020  uests.form.     
+00024400: 2020 2072 6574 7572 6e20 4469 6374 2873     return Dict(s
+00024410: 7263 290a 0a20 2020 2064 6566 2068 6967  rc)..    def hig
+00024420: 686c 6967 6874 2873 656c 662c 7374 7269  hlight(self,stri
+00024430: 6e67 732c 6669 6e64 2c63 6f6c 6f72 3d27  ngs,find,color='
+00024440: 2366 6666 6634 3227 293a 0a20 2020 2020  #ffff42'):.     
+00024450: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00024460: 2873 7472 696e 6773 2c73 7472 293a 0a20  (strings,str):. 
+00024470: 2020 2020 2020 2020 2020 2066 663d 7265             ff=re
+00024480: 2e63 6f6d 7069 6c65 2866 696e 642c 7265  .compile(find,re
+00024490: 2e49 290a 2020 2020 2020 2020 2020 2020  .I).            
+000244a0: 616c 6c5f 6666 3d66 662e 6669 6e64 616c  all_ff=ff.findal
+000244b0: 6c28 7374 7269 6e67 7329 0a20 2020 2020  l(strings).     
+000244c0: 2020 2020 2020 2069 6620 6c65 6e28 616c         if len(al
+000244d0: 6c5f 6666 2920 3e30 3a0a 2020 2020 2020  l_ff) >0:.      
+000244e0: 2020 2020 2020 2020 2020 666f 7220 6d6d            for mm
+000244f0: 2069 6e20 616c 6c5f 6666 3a0a 2020 2020   in all_ff:.    
+00024500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024510: 7374 7269 6e67 733d 7374 7269 6e67 732e  strings=strings.
+00024520: 7265 706c 6163 6528 6d6d 2c27 2727 3c66  replace(mm,'''<f
+00024530: 6f6e 7420 7374 796c 653d 2262 6163 6b67  ont style="backg
+00024540: 726f 756e 642d 636f 6c6f 723a 7b31 7d22  round-color:{1}"
+00024550: 3e7b 307d 3c2f 666f 6e74 3e27 2727 2e66  >{0}</font>'''.f
+00024560: 6f72 6d61 7428 6d6d 2c63 6f6c 6f72 2929  ormat(mm,color))
+00024570: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00024580: 7374 7269 6e67 730a 0a0a 636c 6173 7320  strings...class 
+00024590: 5449 4d45 3a0a 2020 2020 6465 6620 5f5f  TIME:.    def __
+000245a0: 696e 6974 5f5f 2873 656c 662c 7372 633d  init__(self,src=
+000245b0: 4e6f 6e65 2c74 696d 657a 6f6e 653d 4e6f  None,timezone=No
+000245c0: 6e65 293a 0a20 2020 2020 2020 2073 656c  ne):.        sel
+000245d0: 662e 7469 6d65 7a6f 6e65 3d74 696d 657a  f.timezone=timez
+000245e0: 6f6e 650a 2020 2020 2020 2020 7365 6c66  one.        self
+000245f0: 2e69 6e69 745f 7469 6d65 3d73 656c 662e  .init_time=self.
+00024600: 4e6f 7728 7469 6d65 7a6f 6e65 3d74 696d  Now(timezone=tim
+00024610: 657a 6f6e 6529 0a20 2020 2020 2020 2073  ezone).        s
+00024620: 656c 662e 6c69 6665 5f74 696d 653d 7365  elf.life_time=se
+00024630: 6c66 2e69 6e69 745f 7469 6d65 0a20 2020  lf.init_time.   
+00024640: 2020 2020 2073 656c 662e 696e 6974 5f73       self.init_s
+00024650: 6563 3d69 6e74 2873 656c 662e 696e 6974  ec=int(self.init
+00024660: 5f74 696d 652e 7374 7266 7469 6d65 2827  _time.strftime('
+00024670: 2573 2729 290a 2020 2020 2020 2020 7365  %s')).        se
+00024680: 6c66 2e73 7263 3d73 7263 0a0a 2020 2020  lf.src=src..    
+00024690: 6465 6620 5370 656e 6428 7365 6c66 2c6c  def Spend(self,l
+000246a0: 6966 655f 7469 6d65 3d54 7275 652c 756e  ife_time=True,un
+000246b0: 6974 3d4e 6f6e 652c 696e 7465 6765 723d  it=None,integer=
+000246c0: 5472 7565 293a 0a20 2020 2020 2020 2069  True):.        i
+000246d0: 6620 6c69 6665 5f74 696d 653a 0a20 2020  f life_time:.   
+000246e0: 2020 2020 2020 2020 2072 743d 696e 7428           rt=int(
+000246f0: 7365 6c66 2e4e 6f77 2829 2e73 7472 6674  self.Now().strft
+00024700: 696d 6528 2725 7327 2929 202d 2069 6e74  ime('%s')) - int
+00024710: 2873 656c 662e 6c69 6665 5f74 696d 652e  (self.life_time.
+00024720: 7374 7266 7469 6d65 2827 2573 2729 290a  strftime('%s')).
+00024730: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00024740: 2020 2020 2020 2020 2020 7274 3d69 6e74            rt=int
+00024750: 2873 656c 662e 4e6f 7728 292e 7374 7266  (self.Now().strf
+00024760: 7469 6d65 2827 2573 2729 2920 2d20 7365  time('%s')) - se
+00024770: 6c66 2e69 6e69 745f 7365 630a 2020 2020  lf.init_sec.    
+00024780: 2020 2020 2320 436f 6e76 6572 7420 696e      # Convert in
+00024790: 7465 6765 7220 7661 6c75 6520 746f 2068  teger value to h
+000247a0: 756d 616e 2072 6561 6461 626c 6520 7469  uman readable ti
+000247b0: 6d65 0a20 2020 2020 2020 2023 2075 6e69  me.        # uni
+000247c0: 743a 204e 6f6e 6520 2c20 696e 7465 6765  t: None , intege
+000247d0: 723a 206f 7574 7075 7420 3a20 7365 636f  r: output : seco
+000247e0: 6e64 7320 2869 6e74 290a 2020 2020 2020  nds (int).      
+000247f0: 2020 2320 556e 6974 3a20 4e6f 6e65 202c    # Unit: None ,
+00024800: 206e 6f74 2069 6e74 6567 6572 3a20 6f75   not integer: ou
+00024810: 7470 7574 203a 2048 756d 616e 2072 6561  tput : Human rea
+00024820: 6461 626c 6520 7061 7373 6564 2074 696d  dable passed tim
+00024830: 6520 7374 7269 6e67 2028 6175 746f 6d61  e string (automa
+00024840: 7469 6361 6c6c 7920 6361 6c63 756c 6174  tically calculat
+00024850: 6529 0a20 2020 2020 2020 2023 2055 6e69  e).        # Uni
+00024860: 743a 2075 6e69 7420 2c20 696e 7465 6765  t: unit , intege
+00024870: 723a 206f 7574 7075 7420 3a20 7468 6520  r: output : the 
+00024880: 756e 6974 2773 206e 756d 6265 7220 2869  unit's number (i
+00024890: 6e74 290a 2020 2020 2020 2020 2320 556e  nt).        # Un
+000248a0: 6974 3a20 756e 6974 202c 206e 6f74 2069  it: unit , not i
+000248b0: 6e74 6567 6572 3a20 6f75 7470 7574 203a  nteger: output :
+000248c0: 2048 756d 616e 2072 6561 6461 626c 6520   Human readable 
+000248d0: 7061 7373 6564 2074 696d 6520 7374 7269  passed time stri
+000248e0: 6e67 2028 6d61 7820 6973 2064 6566 696e  ng (max is defin
+000248f0: 6564 2075 6e69 7429 0a20 2020 2020 2020  ed unit).       
+00024900: 2072 6574 7572 6e20 4875 6d61 6e5f 556e   return Human_Un
+00024910: 6974 2872 742c 756e 6974 3d27 5327 2c77  it(rt,unit='S',w
+00024920: 616e 745f 756e 6974 3d75 6e69 742c 696e  ant_unit=unit,in
+00024930: 745f 6f75 743d 696e 7465 6765 7229 0a0a  t_out=integer)..
+00024940: 2020 2020 6465 6620 5265 7365 7428 7365      def Reset(se
+00024950: 6c66 2c74 696d 657a 6f6e 653d 4e6f 6e65  lf,timezone=None
+00024960: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+00024970: 696e 6974 5f74 696d 653d 7365 6c66 2e4e  init_time=self.N
+00024980: 6f77 2874 696d 657a 6f6e 653d 7469 6d65  ow(timezone=time
+00024990: 7a6f 6e65 290a 2020 2020 2020 2020 7365  zone).        se
+000249a0: 6c66 2e69 6e69 745f 7365 633d 696e 7428  lf.init_sec=int(
+000249b0: 7365 6c66 2e69 6e69 745f 7469 6d65 2e73  self.init_time.s
+000249c0: 7472 6674 696d 6528 2725 7327 2929 0a0a  trftime('%s'))..
+000249d0: 2020 2020 6465 6620 536c 6565 7028 7365      def Sleep(se
+000249e0: 6c66 2c74 7279 5f77 6169 743d 4e6f 6e65  lf,try_wait=None
+000249f0: 2c64 6566 6175 6c74 3d31 293a 0a20 2020  ,default=1):.   
+00024a00: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00024a10: 6365 2874 7279 5f77 6169 742c 2869 6e74  ce(try_wait,(int
+00024a20: 2c73 7472 2929 3a20 7472 795f 7761 6974  ,str)): try_wait
+00024a30: 3d28 7472 795f 7761 6974 2c29 0a20 2020  =(try_wait,).   
+00024a40: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00024a50: 6365 2874 7279 5f77 6169 742c 286c 6973  ce(try_wait,(lis
+00024a60: 742c 7475 706c 6529 2920 616e 6420 6c65  t,tuple)) and le
+00024a70: 6e28 7472 795f 7761 6974 293a 0a20 2020  n(try_wait):.   
+00024a80: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+00024a90: 7472 795f 7761 6974 2920 3d3d 2032 3a0a  try_wait) == 2:.
+00024aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024ab0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00024ac0: 2020 2020 2020 2020 2074 696d 652e 736c           time.sl
+00024ad0: 6565 7028 7261 6e64 6f6d 2e72 616e 6469  eep(random.randi
+00024ae0: 6e74 2869 6e74 2874 7279 5f77 6169 745b  nt(int(try_wait[
+00024af0: 305d 292c 696e 7428 7472 795f 7761 6974  0]),int(try_wait
+00024b00: 5b31 5d29 2929 0a20 2020 2020 2020 2020  [1]))).         
+00024b10: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
+00024b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024b30: 2020 2070 6173 730a 2020 2020 2020 2020     pass.        
+00024b40: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00024b50: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00024b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024b70: 2020 2074 696d 652e 736c 6565 7028 696e     time.sleep(in
+00024b80: 7428 7472 795f 7761 6974 5b30 5d29 290a  t(try_wait[0])).
+00024b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024ba0: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+00024bb0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+00024bc0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00024bd0: 2020 2020 2020 2020 2020 2074 696d 652e             time.
+00024be0: 736c 6565 7028 6465 6661 756c 7429 0a20  sleep(default). 
+00024bf0: 2020 2064 6566 2052 616e 6428 7365 6c66     def Rand(self
+00024c00: 2c74 7279 5f77 6169 743d 4e6f 6e65 2c64  ,try_wait=None,d
+00024c10: 6566 6175 6c74 3d31 293a 0a20 2020 2020  efault=1):.     
+00024c20: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00024c30: 2874 7279 5f77 6169 742c 2869 6e74 2c73  (try_wait,(int,s
+00024c40: 7472 2929 3a20 7472 795f 7761 6974 3d28  tr)): try_wait=(
+00024c50: 7472 795f 7761 6974 2c29 0a20 2020 2020  try_wait,).     
+00024c60: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00024c70: 2874 7279 5f77 6169 742c 286c 6973 742c  (try_wait,(list,
+00024c80: 7475 706c 6529 2920 616e 6420 6c65 6e28  tuple)) and len(
+00024c90: 7472 795f 7761 6974 293a 0a20 2020 2020  try_wait):.     
+00024ca0: 2020 2020 2020 2069 6620 6c65 6e28 7472         if len(tr
+00024cb0: 795f 7761 6974 2920 3d3d 2032 3a0a 2020  y_wait) == 2:.  
+00024cc0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00024cd0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00024ce0: 2020 2020 2020 2072 6574 7572 6e20 7261         return ra
+00024cf0: 6e64 6f6d 2e72 616e 6469 6e74 2869 6e74  ndom.randint(int
+00024d00: 2874 7279 5f77 6169 745b 305d 292c 696e  (try_wait[0]),in
+00024d10: 7428 7472 795f 7761 6974 5b31 5d29 290a  t(try_wait[1])).
+00024d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024d30: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+00024d40: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+00024d50: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00024d60: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00024d70: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+00024d80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00024d90: 726e 2069 6e74 2874 7279 5f77 6169 745b  rn int(try_wait[
+00024da0: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
+00024db0: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+00024dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024dd0: 7061 7373 0a20 2020 2020 2020 2072 6574  pass.        ret
+00024de0: 7572 6e20 6465 6661 756c 740a 0a20 2020  urn default..   
+00024df0: 2064 6566 2049 6e74 2873 656c 662c 7469   def Int(self,ti
+00024e00: 6d65 7a6f 6e65 3d4e 6f6e 6529 3a0a 2020  mezone=None):.  
+00024e10: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00024e20: 662e 4e6f 7728 696e 742c 7469 6d65 7a6f  f.Now(int,timezo
+00024e30: 6e65 3d74 696d 657a 6f6e 6529 0a0a 2020  ne=timezone)..  
+00024e40: 2020 6465 6620 4e6f 7728 7365 6c66 2c6d    def Now(self,m
+00024e50: 6f64 653d 4e6f 6e65 2c74 696d 657a 6f6e  ode=None,timezon
+00024e60: 653d 4e6f 6e65 2c74 696d 6564 6174 613d  e=None,timedata=
+00024e70: 4e6f 6e65 293a 0a20 2020 2020 2020 2069  None):.        i
+00024e80: 6620 6973 696e 7374 616e 6365 2874 696d  f isinstance(tim
+00024e90: 6564 6174 612c 7365 6c66 2e44 6174 6574  edata,self.Datet
+00024ea0: 696d 6528 2929 3a0a 2020 2020 2020 2020  ime()):.        
+00024eb0: 2020 2020 7469 6d65 6461 7461 3d73 656c      timedata=sel
+00024ec0: 662e 696e 6974 5f74 696d 650a 2020 2020  f.init_time.    
+00024ed0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00024ee0: 2020 2020 2020 6966 2074 696d 657a 6f6e        if timezon
+00024ef0: 6520 6973 204e 6f6e 653a 2074 696d 657a  e is None: timez
+00024f00: 6f6e 653d 7365 6c66 2e74 696d 657a 6f6e  one=self.timezon
+00024f10: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00024f20: 2069 7369 6e73 7461 6e63 6528 7469 6d65   isinstance(time
+00024f30: 7a6f 6e65 2c73 7472 2920 616e 6420 7469  zone,str) and ti
+00024f40: 6d65 7a6f 6e65 3a0a 2020 2020 2020 2020  mezone:.        
+00024f50: 2020 2020 2020 2020 496d 706f 7274 2827          Import('
+00024f60: 696d 706f 7274 2070 7974 7a27 290a 2020  import pytz').  
+00024f70: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00024f80: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00024f90: 2020 2020 2020 2074 696d 657a 6f6e 653d         timezone=
+00024fa0: 7079 747a 2e74 696d 657a 6f6e 6528 7469  pytz.timezone(ti
+00024fb0: 6d65 7a6f 6e65 290a 2020 2020 2020 2020  mezone).        
+00024fc0: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+00024fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024fe0: 2020 2020 7072 696e 7466 2827 556e 6b6e      printf('Unkn
+00024ff0: 6f77 6e20 6375 7272 656e 7420 7469 6d65  own current time
+00025000: 7a6f 6e65 2028 7b7d 2927 2e66 6f72 6d61  zone ({})'.forma
+00025010: 7428 7469 6d65 7a6f 6e65 292c 6d6f 6465  t(timezone),mode
+00025020: 3d27 6527 290a 2020 2020 2020 2020 2020  ='e').          
+00025030: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00025040: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
+00025050: 2020 2020 2020 2074 696d 6564 6174 613d         timedata=
+00025060: 7365 6c66 2e44 6174 6574 696d 6528 292e  self.Datetime().
+00025070: 6e6f 7728 7469 6d65 7a6f 6e65 290a 2020  now(timezone).  
+00025080: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00025090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000250a0: 7469 6d65 6461 7461 3d73 656c 662e 4461  timedata=self.Da
+000250b0: 7465 7469 6d65 2829 2e6e 6f77 2829 0a20  tetime().now(). 
+000250c0: 2020 2020 2020 2069 6620 6d6f 6465 2069         if mode i
+000250d0: 6e20 5b69 6e74 2c27 696e 7427 2c27 494e  n [int,'int','IN
+000250e0: 5427 2c27 7365 6327 5d3a 0a20 2020 2020  T','sec']:.     
+000250f0: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
+00025100: 7428 7469 6d65 6461 7461 2e73 7472 6674  t(timedata.strft
+00025110: 696d 6528 2725 7327 2929 0a20 2020 2020  ime('%s')).     
+00025120: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00025130: 2020 2020 2072 6574 7572 6e20 7469 6d65       return time
+00025140: 6461 7461 0a0a 2020 2020 6465 6620 4f75  data..    def Ou
+00025150: 7428 7365 6c66 2c74 696d 656f 7574 5f73  t(self,timeout_s
+00025160: 6563 2c64 6566 6175 6c74 3d28 3234 2a33  ec,default=(24*3
+00025170: 3630 3029 293a 0a20 2020 2020 2020 2074  600)):.        t
+00025180: 696d 656f 7574 5f73 6563 3d49 6e74 2874  imeout_sec=Int(t
+00025190: 696d 656f 7574 5f73 6563 2c64 6566 6175  imeout_sec,defau
+000251a0: 6c74 290a 2020 2020 2020 2020 6966 2074  lt).        if t
+000251b0: 696d 656f 7574 5f73 6563 203d 3d20 303a  imeout_sec == 0:
+000251c0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000251d0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+000251e0: 2020 6966 2073 656c 662e 496e 7428 2920    if self.Int() 
+000251f0: 2d20 7365 6c66 2e69 6e69 745f 7365 6320  - self.init_sec 
+00025200: 3e20 2074 696d 656f 7574 5f73 6563 3a0a  >  timeout_sec:.
+00025210: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00025220: 726e 2054 7275 650a 2020 2020 2020 2020  rn True.        
+00025230: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
+00025240: 2064 6566 2046 6f72 6d61 7428 7365 6c66   def Format(self
+00025250: 2c74 666f 726d 6174 3d27 2573 272c 7265  ,tformat='%s',re
+00025260: 6164 5f66 6f72 6d61 743d 2725 5327 2c74  ad_format='%S',t
+00025270: 696d 653d 275f 235f 2729 3a0a 2020 2020  ime='_#_'):.    
+00025280: 2020 2020 6966 2049 734e 6f6e 6528 7469      if IsNone(ti
+00025290: 6d65 2c63 686b 5f76 616c 3d5b 275f 235f  me,chk_val=['_#_
+000252a0: 275d 2c63 686b 5f6f 6e6c 793d 5472 7565  '],chk_only=True
+000252b0: 293a 2074 696d 653d 7365 6c66 2e73 7263  ): time=self.src
+000252c0: 0a20 2020 2020 2020 2069 6620 4973 4e6f  .        if IsNo
+000252d0: 6e65 2874 696d 652c 6368 6b5f 7661 6c3d  ne(time,chk_val=
+000252e0: 5b4e 6f6e 652c 2727 2c30 2c27 3027 5d29  [None,'',0,'0'])
+000252f0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00025300: 7475 726e 2073 656c 662e 4e6f 7728 292e  turn self.Now().
+00025310: 7374 7266 7469 6d65 2874 666f 726d 6174  strftime(tformat
+00025320: 290a 2020 2020 2020 2020 656c 6966 2072  ).        elif r
+00025330: 6561 645f 666f 726d 6174 203d 3d20 2725  ead_format == '%
+00025340: 5327 3a0a 2020 2020 2020 2020 2020 2020  S':.            
+00025350: 6966 2069 7369 6e73 7461 6e63 6528 7469  if isinstance(ti
+00025360: 6d65 2c69 6e74 2920 6f72 2028 6973 696e  me,int) or (isin
+00025370: 7374 616e 6365 2874 696d 652c 7374 7229  stance(time,str)
+00025380: 2061 6e64 2074 696d 652e 6973 6469 6769   and time.isdigi
+00025390: 7428 2929 3a0a 2020 2020 2020 2020 2020  t()):.          
+000253a0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000253b0: 662e 4461 7465 7469 6d65 2829 2e66 726f  f.Datetime().fro
+000253c0: 6d74 696d 6573 7461 6d70 2869 6e74 2874  mtimestamp(int(t
+000253d0: 696d 6529 292e 7374 7266 7469 6d65 2874  ime)).strftime(t
+000253e0: 666f 726d 6174 290a 2020 2020 2020 2020  format).        
+000253f0: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00025400: 7469 6d65 2c73 7472 293a 0a20 2020 2020  time,str):.     
+00025410: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00025420: 6c66 2e44 6174 6574 696d 6528 292e 7374  lf.Datetime().st
+00025430: 7270 7469 6d65 2874 696d 652c 7265 6164  rptime(time,read
+00025440: 5f66 6f72 6d61 7429 2e73 7472 6674 696d  _format).strftim
+00025450: 6528 7466 6f72 6d61 7429 0a20 2020 2020  e(tformat).     
+00025460: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+00025470: 6365 2874 696d 652c 7365 6c66 2e44 6174  ce(time,self.Dat
+00025480: 6574 696d 6528 2929 3a0a 2020 2020 2020  etime()):.      
+00025490: 2020 2020 2020 7265 7475 726e 2074 696d        return tim
+000254a0: 652e 7374 7266 7469 6d65 2874 666f 726d  e.strftime(tform
+000254b0: 6174 290a 0a20 2020 2064 6566 2049 6e69  at)..    def Ini
+000254c0: 7428 7365 6c66 293a 0a20 2020 2020 2020  t(self):.       
+000254d0: 2072 6574 7572 6e20 7365 6c66 2e69 6e69   return self.ini
+000254e0: 745f 7365 630a 0a20 2020 2064 6566 2054  t_sec..    def T
+000254f0: 696d 6528 7365 6c66 293a 0a20 2020 2020  ime(self):.     
+00025500: 2020 2072 6574 7572 6e20 7469 6d65 2e74     return time.t
+00025510: 696d 6528 290a 0a20 2020 2064 6566 2044  ime()..    def D
+00025520: 6174 6574 696d 6528 7365 6c66 293a 0a20  atetime(self):. 
+00025530: 2020 2020 2020 2072 6574 7572 6e20 6461         return da
+00025540: 7465 7469 6d65 2e64 6174 6574 696d 650a  tetime.datetime.
+00025550: 0a20 2020 2064 6566 2050 7269 6e74 2873  .    def Print(s
+00025560: 656c 662c 7469 6d65 6461 7461 3d4e 6f6e  elf,timedata=Non
+00025570: 652c 7469 6d65 5f66 6f72 6d61 743d 2725  e,time_format='%
+00025580: 592d 256d 2d25 6420 2548 3a25 4d3a 2553  Y-%m-%d %H:%M:%S
+00025590: 2729 3a0a 2020 2020 2020 2020 6966 206e  '):.        if n
+000255a0: 6f74 2074 696d 6564 6174 613a 2074 696d  ot timedata: tim
+000255b0: 6564 6174 613d 7365 6c66 2e69 6e69 745f  edata=self.init_
+000255c0: 7469 6d65 0a20 2020 2020 2020 2069 6620  time.        if 
+000255d0: 6973 696e 7374 616e 6365 2874 696d 6564  isinstance(timed
+000255e0: 6174 612c 7365 6c66 2e44 6174 6574 696d  ata,self.Datetim
+000255f0: 6528 2929 3a0a 2020 2020 2020 2020 2020  e()):.          
+00025600: 2020 7265 7475 726e 2074 696d 6564 6174    return timedat
+00025610: 612e 7374 7266 7469 6d65 2827 2559 2d25  a.strftime('%Y-%
+00025620: 6d2d 2564 2025 483a 254d 3a25 5327 290a  m-%d %H:%M:%S').
+00025630: 2020 2020 2020 2020 7265 7475 726e 2027          return '
+00025640: 270a 0a20 2020 2064 6566 2052 6561 6453  '..    def ReadS
+00025650: 7472 2873 656c 662c 7469 6d65 6461 7461  tr(self,timedata
+00025660: 2c74 696d 655f 666f 726d 6174 3d27 2559  ,time_format='%Y
+00025670: 2d25 6d2d 2564 2025 483a 254d 3a25 5327  -%m-%d %H:%M:%S'
+00025680: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
+00025690: 696e 7374 616e 6365 2874 696d 6564 6174  instance(timedat
+000256a0: 612c 7374 7229 3a0a 2020 2020 2020 2020  a,str):.        
+000256b0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000256c0: 4461 7465 7469 6d65 2829 2e73 7472 7074  Datetime().strpt
+000256d0: 696d 6528 7469 6d65 6461 7461 2c74 696d  ime(timedata,tim
+000256e0: 655f 666f 726d 6174 290a 2020 2020 2020  e_format).      
+000256f0: 2020 7265 7475 726e 2027 270a 0a20 2020    return ''..   
+00025700: 2064 6566 2054 696d 655a 6f6e 6528 7365   def TimeZone(se
+00025710: 6c66 2c73 6574 7a6f 6e65 3d4e 6f6e 652c  lf,setzone=None,
+00025720: 7761 6e74 3d4e 6f6e 652c 7469 6d65 6461  want=None,timeda
+00025730: 7461 3d4e 6f6e 6529 3a0a 2020 2020 2020  ta=None):.      
+00025740: 2020 2727 2773 6574 2074 696d 657a 6f6e    '''set timezon
+00025750: 6520 6174 2074 696d 6564 6174 6120 6f72  e at timedata or
+00025760: 2063 6f6e 7665 7274 2074 6f20 7761 6e74   convert to want
+00025770: 2074 696d 657a 6f6e 6527 2727 0a20 2020   timezone'''.   
+00025780: 2020 2020 2069 6620 6e6f 7420 7469 6d65       if not time
+00025790: 6461 7461 3a20 7469 6d65 6461 7461 3d73  data: timedata=s
+000257a0: 656c 662e 696e 6974 5f74 696d 650a 2020  elf.init_time.  
+000257b0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000257c0: 6e63 6528 7469 6d65 6461 7461 2c73 656c  nce(timedata,sel
+000257d0: 662e 4461 7465 7469 6d65 2829 293a 0a20  f.Datetime()):. 
+000257e0: 2020 2020 2020 2020 2020 2049 6d70 6f72             Impor
+000257f0: 7428 2769 6d70 6f72 7420 7079 747a 2729  t('import pytz')
+00025800: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00025810: 6973 696e 7374 616e 6365 2873 6574 7a6f  isinstance(setzo
+00025820: 6e65 2c73 7472 2920 616e 6420 7365 747a  ne,str) and setz
+00025830: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00025840: 2020 2020 2069 6620 7365 747a 6f6e 6520       if setzone 
+00025850: 696e 205b 276c 6f63 616c 272c 276c 6f63  in ['local','loc
+00025860: 616c 7469 6d65 272c 276c 6f63 616c 7a6f  altime','localzo
+00025870: 6e65 272c 276c 6f63 616c 7469 6d65 7a6f  ne','localtimezo
+00025880: 6e65 275d 3a0a 2020 2020 2020 2020 2020  ne']:.          
+00025890: 2020 2020 2020 2020 2020 7365 747a 6f6e            setzon
+000258a0: 653d 4e6f 6e65 2023 2073 6574 2074 6f20  e=None # set to 
+000258b0: 6c6f 6361 6c20 7469 6d65 7a6f 6e65 0a20  local timezone. 
+000258c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000258d0: 6c69 6620 7365 747a 6f6e 6520 696e 205b  lif setzone in [
+000258e0: 2775 7463 272c 2755 5443 275d 3a0a 2020  'utc','UTC']:.  
+000258f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025900: 2020 7365 747a 6f6e 653d 7079 747a 2e75    setzone=pytz.u
+00025910: 7463 2020 2320 7365 7420 746f 2055 5443  tc  # set to UTC
+00025920: 2074 696d 657a 6f6e 650a 2020 2020 2020   timezone.      
+00025930: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00025940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025950: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00025960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025970: 2073 6574 7a6f 6e65 3d70 7974 7a2e 7469   setzone=pytz.ti
+00025980: 6d65 7a6f 6e65 2873 6574 7a6f 6e65 2920  mezone(setzone) 
+00025990: 2320 7365 7420 746f 2073 6574 7a6f 6e65  # set to setzone
+000259a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000259b0: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+000259c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000259d0: 2020 2020 2070 7269 6e74 6628 2755 6e6b       printf('Unk
+000259e0: 6e6f 776e 2063 7572 7265 6e74 2074 696d  nown current tim
+000259f0: 657a 6f6e 6520 287b 7d29 272e 666f 726d  ezone ({})'.form
+00025a00: 6174 2873 6574 7a6f 6e65 292c 6d6f 6465  at(setzone),mode
+00025a10: 3d27 6527 290a 2020 2020 2020 2020 2020  ='e').          
+00025a20: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00025a30: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
+00025a40: 2020 2020 2020 2069 6620 7365 747a 6f6e         if setzon
+00025a50: 6520 213d 2074 696d 6564 6174 612e 747a  e != timedata.tz
+00025a60: 696e 666f 3a20 2320 6966 2064 6966 6665  info: # if diffe
+00025a70: 7265 6e74 2074 696d 657a 6f6e 6520 6265  rent timezone be
+00025a80: 7477 6565 6e20 736f 7572 6365 2074 696d  tween source tim
+00025a90: 6520 616e 6420 7365 747a 6f6e 650a 2020  e and setzone.  
+00025aa0: 2020 2020 2020 2020 2020 2020 2020 7469                ti
+00025ab0: 6d65 6461 7461 3d74 696d 6564 6174 612e  medata=timedata.
+00025ac0: 7265 706c 6163 6528 747a 696e 666f 3d73  replace(tzinfo=s
+00025ad0: 6574 7a6f 6e65 2920 2320 7365 7420 746f  etzone) # set to
+00025ae0: 2073 6574 7a6f 6e65 0a20 2020 2020 2020   setzone.       
+00025af0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00025b00: 6365 2877 616e 742c 7374 7229 2061 6e64  ce(want,str) and
+00025b10: 2077 616e 743a 0a20 2020 2020 2020 2020   want:.         
+00025b20: 2020 2020 2020 2069 6620 7761 6e74 2069         if want i
+00025b30: 6e20 5b27 6c6f 6361 6c27 2c27 6c6f 6361  n ['local','loca
+00025b40: 6c74 696d 6527 2c27 6c6f 6361 6c7a 6f6e  ltime','localzon
+00025b50: 6527 2c27 6c6f 6361 6c74 696d 657a 6f6e  e','localtimezon
+00025b60: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
+00025b70: 2020 2020 2020 2020 2077 616e 743d 4e6f           want=No
+00025b80: 6e65 2023 2063 6f6e 7665 7274 2074 6f20  ne # convert to 
+00025b90: 6c6f 6361 6c20 7469 6d65 7a6f 6e65 0a20  local timezone. 
+00025ba0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00025bb0: 6c69 6620 7761 6e74 2069 6e20 5b27 7574  lif want in ['ut
+00025bc0: 6327 2c27 5554 4327 5d3a 0a20 2020 2020  c','UTC']:.     
+00025bd0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00025be0: 616e 743d 7079 747a 2e75 7463 2023 2063  ant=pytz.utc # c
+00025bf0: 6f6e 7665 7274 2020 746f 2075 7463 2074  onvert  to utc t
+00025c00: 696d 657a 6f6e 650a 2020 2020 2020 2020  imezone.        
+00025c10: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00025c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025c30: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+00025c40: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00025c50: 616e 743d 7079 747a 2e74 696d 657a 6f6e  ant=pytz.timezon
+00025c60: 6528 7761 6e74 2920 2320 636f 6e76 6572  e(want) # conver
+00025c70: 7420 746f 2077 616e 7420 7469 6d65 7a6f  t to want timezo
+00025c80: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+00025c90: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
+00025ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025cb0: 2020 2020 2020 2070 7269 6e74 6628 2755         printf('U
+00025cc0: 6e6b 6e6f 776e 2063 7572 7265 6e74 2074  nknown current t
+00025cd0: 696d 657a 6f6e 6520 287b 7d29 272e 666f  imezone ({})'.fo
+00025ce0: 726d 6174 2877 616e 7429 2c6d 6f64 653d  rmat(want),mode=
+00025cf0: 2765 2729 0a20 2020 2020 2020 2020 2020  'e').           
+00025d00: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00025d10: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+00025d20: 2020 2020 2020 2020 2020 6966 2073 6574            if set
+00025d30: 7a6f 6e65 2021 3d20 7761 6e74 3a20 2320  zone != want: # 
+00025d40: 6966 2064 6966 6665 7265 6e74 2074 696d  if different tim
+00025d50: 657a 6f6e 6520 6265 7477 6565 6e20 736f  ezone between so
+00025d60: 7572 6365 2074 696d 6520 616e 6420 7761  urce time and wa
+00025d70: 6e74 207a 6f6e 650a 2020 2020 2020 2020  nt zone.        
+00025d80: 2020 2020 2020 2020 2020 2020 6c6f 6361              loca
+00025d90: 6c74 696d 653d 7469 6d65 6461 7461 2e61  ltime=timedata.a
+00025da0: 7374 696d 657a 6f6e 6528 747a 3d77 616e  stimezone(tz=wan
+00025db0: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+00025dc0: 2020 2020 2020 2072 6574 7572 6e20 6c6f         return lo
+00025dd0: 6361 6c74 696d 650a 2020 2020 2020 2020  caltime.        
+00025de0: 2020 2020 7265 7475 726e 2074 696d 6564      return timed
+00025df0: 6174 610a 2020 2020 2020 2020 7265 7475  ata.        retu
+00025e00: 726e 2046 616c 7365 0a0a 2020 2020 6465  rn False..    de
+00025e10: 6620 5469 6d65 5a6f 6e65 4e61 6d65 2873  f TimeZoneName(s
+00025e20: 656c 662c 7469 6d65 6461 7461 3d4e 6f6e  elf,timedata=Non
+00025e30: 6529 3a0a 2020 2020 2020 2020 6966 206e  e):.        if n
+00025e40: 6f74 2074 696d 6564 6174 613a 2074 696d  ot timedata: tim
+00025e50: 6564 6174 613d 7365 6c66 2e69 6e69 745f  edata=self.init_
+00025e60: 7469 6d65 0a20 2020 2020 2020 2069 6620  time.        if 
+00025e70: 6973 696e 7374 616e 6365 2874 696d 6564  isinstance(timed
+00025e80: 6174 612c 7365 6c66 2e44 6174 6574 696d  ata,self.Datetim
+00025e90: 6528 2929 3a0a 2020 2020 2020 2020 2020  e()):.          
+00025ea0: 2020 747a 6e61 6d65 3d74 696d 6564 6174    tzname=timedat
+00025eb0: 612e 747a 6e61 6d65 2829 0a20 2020 2020  a.tzname().     
+00025ec0: 2020 2020 2020 2072 6574 7572 6e20 747a         return tz
+00025ed0: 6e61 6d65 2069 6620 747a 6e61 6d65 2065  name if tzname e
+00025ee0: 6c73 6520 7469 6d65 6461 7461 2e61 7374  lse timedata.ast
+00025ef0: 696d 657a 6f6e 6528 292e 747a 6e61 6d65  imezone().tzname
+00025f00: 2829 0a0a 2020 2020 6465 6620 5574 6332  ()..    def Utc2
+00025f10: 4c6f 6361 6c28 7365 6c66 2c74 696d 655f  Local(self,time_
+00025f20: 666f 726d 6174 3d27 2559 2d25 6d2d 2564  format='%Y-%m-%d
+00025f30: 2025 483a 254d 3a25 5327 2c6d 6f64 653d   %H:%M:%S',mode=
+00025f40: 2773 7472 272c 7469 6d65 6461 7461 3d4e  'str',timedata=N
+00025f50: 6f6e 6529 3a0a 2020 2020 2020 2020 6966  one):.        if
+00025f60: 2069 7369 6e73 7461 6e63 6528 7469 6d65   isinstance(time
+00025f70: 6461 7461 2c73 7472 293a 0a20 2020 2020  data,str):.     
+00025f80: 2020 2020 2020 2074 696d 6564 6174 613d         timedata=
+00025f90: 7365 6c66 2e52 6561 6453 7472 2874 696d  self.ReadStr(tim
+00025fa0: 6564 6174 612c 7469 6d65 5f66 6f72 6d61  edata,time_forma
+00025fb0: 743d 7469 6d65 5f66 6f72 6d61 7429 0a20  t=time_format). 
+00025fc0: 2020 2020 2020 2065 6c69 6620 7469 6d65         elif time
+00025fd0: 6461 7461 2069 7320 4e6f 6e65 3a0a 2020  data is None:.  
+00025fe0: 2020 2020 2020 2020 2020 7469 6d65 6461            timeda
+00025ff0: 7461 3d73 656c 662e 696e 6974 5f74 696d  ta=self.init_tim
+00026000: 650a 2020 2020 2020 2020 6966 2069 7369  e.        if isi
+00026010: 6e73 7461 6e63 6528 7469 6d65 6461 7461  nstance(timedata
+00026020: 2c73 656c 662e 4461 7465 7469 6d65 2829  ,self.Datetime()
+00026030: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
+00026040: 696d 6564 6174 613d 7365 6c66 2e54 696d  imedata=self.Tim
+00026050: 655a 6f6e 6528 7365 747a 6f6e 653d 2755  eZone(setzone='U
+00026060: 5443 272c 7761 6e74 3d27 6c6f 6361 6c27  TC',want='local'
+00026070: 2c74 696d 6564 6174 613d 7469 6d65 6461  ,timedata=timeda
+00026080: 7461 290a 2020 2020 2020 2020 2020 2020  ta).            
+00026090: 7265 7475 726e 2073 656c 662e 5072 696e  return self.Prin
+000260a0: 7428 7469 6d65 6461 7461 3d74 696d 6564  t(timedata=timed
+000260b0: 6174 6129 2069 6620 6d6f 6465 3d3d 2773  ata) if mode=='s
+000260c0: 7472 2720 656c 7365 2074 696d 6564 6174  tr' else timedat
+000260d0: 610a 2020 2020 2020 2020 7265 7475 726e  a.        return
+000260e0: 2046 616c 7365 0a0a 6465 6620 7273 6865   False..def rshe
+000260f0: 6c6c 2863 6d64 2c64 6267 3d46 616c 7365  ll(cmd,dbg=False
+00026100: 2c74 696d 656f 7574 3d30 2c61 6e73 693d  ,timeout=0,ansi=
+00026110: 4661 6c73 652c 696e 7465 7261 6374 6976  False,interactiv
+00026120: 653d 4661 6c73 652c 6578 6563 7574 6162  e=False,executab
+00026130: 6c65 3d27 2f62 696e 2f62 6173 6827 2c70  le='/bin/bash',p
+00026140: 6174 683d 4e6f 6e65 2c70 726f 6772 6573  ath=None,progres
+00026150: 733d 4661 6c73 652c 7072 6f67 7265 7373  s=False,progress
+00026160: 5f70 7265 5f6e 6577 5f6c 696e 653d 4661  _pre_new_line=Fa
+00026170: 6c73 652c 7072 6f67 7265 7373 5f70 6f73  lse,progress_pos
+00026180: 745f 6e65 775f 6c69 6e65 3d54 7275 652c  t_new_line=True,
+00026190: 6c6f 673d 4e6f 6e65 2c65 6e76 3d7b 7d2c  log=None,env={},
+000261a0: 6675 6c6c 5f70 6174 683d 4e6f 6e65 2c72  full_path=None,r
+000261b0: 656d 6f76 655f 7061 7468 3d4e 6f6e 652c  emove_path=None,
+000261c0: 7265 6d6f 7665 5f61 6c6c 5f70 6174 683d  remove_all_path=
+000261d0: 4e6f 6e65 2c64 6566 6175 6c74 5f74 696d  None,default_tim
+000261e0: 656f 7574 3d33 3630 302c 656e 765f 6f75  eout=3600,env_ou
+000261f0: 743d 4661 6c73 652c 6364 3d46 616c 7365  t=False,cd=False
+00026200: 2c6b 6565 705f 6377 643d 4661 6c73 652c  ,keep_cwd=False,
+00026210: 6465 636f 6465 3d4e 6f6e 6529 3a0a 2020  decode=None):.  
+00026220: 2020 2727 270a 2020 2020 496e 7465 7261    '''.    Intera
+00026230: 6374 6976 6520 7368 656c 6c0a 2020 2020  ctive shell.    
+00026240: 7061 7468 3a20 6170 7065 6e64 2074 6865  path: append the
+00026250: 2070 6174 6820 746f 2065 7869 7374 696e   path to existin
+00026260: 6720 7379 7374 656d 2070 6174 680a 2020  g system path.  
+00026270: 2020 6675 6c6c 5f70 6174 683a 2065 7863    full_path: exc
+00026280: 6861 6e67 6520 7468 6520 6675 6c6c 5f70  hange the full_p
+00026290: 6174 6820 746f 2073 7973 7465 6d20 7061  ath to system pa
+000262a0: 7468 0a20 2020 2072 656d 6f76 655f 7061  th.    remove_pa
+000262b0: 7468 3a20 7265 6d6f 7665 2066 726f 6e74  th: remove front
+000262c0: 2072 656d 6f76 655f 7061 7468 2061 7420   remove_path at 
+000262d0: 6675 6c6c 5f70 6174 680a 2020 2020 7265  full_path.    re
+000262e0: 6d6f 7665 5f61 6c6c 5f70 6174 683a 2072  move_all_path: r
+000262f0: 656d 6f76 6520 7265 6d6f 7665 5f61 6c6c  emove remove_all
+00026300: 5f70 6174 6820 696e 2066 756c 6c5f 7061  _path in full_pa
+00026310: 7468 0a20 2020 2064 6563 6f64 653a 2063  th.    decode: c
+00026320: 6861 7261 6374 6572 2064 6563 6f64 696e  haracter decodin
+00026330: 6720 2864 6566 6175 6c74 203a 2049 534f  g (default : ISO
+00026340: 2d38 3835 392d 3129 2c20 6974 2063 6861  -8859-1), it cha
+00026350: 6e67 6564 2074 6f20 5374 7228 2920 6465  nged to Str() de
+00026360: 6661 756c 740a 2020 2020 2727 270a 2020  fault.    '''.  
+00026370: 2020 2320 4f53 2065 6e76 6972 6f6e 6d65    # OS environme
+00026380: 6e74 730a 2020 2020 6f73 5f65 6e76 3d64  nts.    os_env=d
+00026390: 6963 7428 6f73 2e65 6e76 6972 6f6e 290a  ict(os.environ).
+000263a0: 2020 2020 6966 2065 6e76 2061 6e64 2069      if env and i
+000263b0: 7369 6e73 7461 6e63 6528 656e 762c 6469  sinstance(env,di
+000263c0: 6374 293a 0a20 2020 2020 2020 2066 6f72  ct):.        for
+000263d0: 2069 6920 696e 2065 6e76 3a0a 2020 2020   ii in env:.    
+000263e0: 2020 2020 2020 2020 6966 2069 6920 696e          if ii in
+000263f0: 206f 735f 656e 763a 0a20 2020 2020 2020   os_env:.       
+00026400: 2020 2020 2020 2020 206f 735f 656e 765b           os_env[
+00026410: 6969 5d3d 656e 765b 6969 5d0a 0a20 2020  ii]=env[ii]..   
+00026420: 2064 6566 2063 6d64 5f66 6f72 6d28 636d   def cmd_form(cm
+00026430: 6429 3a0a 2020 2020 2020 2020 636d 645f  d):.        cmd_
+00026440: 613d 636d 642e 7370 6c69 7428 290a 2020  a=cmd.split().  
+00026450: 2020 2020 2020 636d 645f 6669 6c65 3d63        cmd_file=c
+00026460: 6d64 5f61 5b30 5d0a 2020 2020 2020 2020  md_a[0].        
+00026470: 6966 2063 6d64 5f66 696c 655b 305d 2021  if cmd_file[0] !
+00026480: 3d20 272f 2720 616e 6420 636d 645f 6669  = '/' and cmd_fi
+00026490: 6c65 203d 3d20 6f73 2e70 6174 682e 6261  le == os.path.ba
+000264a0: 7365 6e61 6d65 2863 6d64 5f66 696c 6529  sename(cmd_file)
+000264b0: 2061 6e64 206f 732e 7061 7468 2e69 7366   and os.path.isf
+000264c0: 696c 6528 636d 645f 6669 6c65 293a 0a20  ile(cmd_file):. 
+000264d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000264e0: 6e20 272e 2f27 2b63 6d64 0a20 2020 2020  n './'+cmd.     
+000264f0: 2020 2072 6574 7572 6e20 636d 640a 0a20     return cmd.. 
+00026500: 2020 2064 6566 2070 7072 6f67 2873 746f     def pprog(sto
+00026510: 702c 7072 6f67 7265 7373 5f70 7265 5f6e  p,progress_pre_n
+00026520: 6577 5f6c 696e 653d 4661 6c73 652c 7072  ew_line=False,pr
+00026530: 6f67 7265 7373 5f70 6f73 745f 6e65 775f  ogress_post_new_
+00026540: 6c69 6e65 3d54 7275 652c 6c6f 673d 4e6f  line=True,log=No
+00026550: 6e65 2c70 726f 6772 6573 735f 696e 7465  ne,progress_inte
+00026560: 7276 616c 3d35 293a 0a20 2020 2020 2020  rval=5):.       
+00026570: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00026580: 302c 7072 6f67 7265 7373 5f69 6e74 6572  0,progress_inter
+00026590: 7661 6c2a 3130 293a 0a20 2020 2020 2020  val*10):.       
+000265a0: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
+000265b0: 302e 3129 0a20 2020 2020 2020 2020 2020  0.1).           
+000265c0: 2069 6620 7374 6f70 2829 3a0a 2020 2020   if stop():.    
+000265d0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000265e0: 726e 0a20 2020 2020 2020 206c 6f63 616c  rn.        local
+000265f0: 5f70 7269 6e74 6564 3d46 616c 7365 0a23  _printed=False.#
+00026600: 2020 2020 2020 2020 6966 2070 726f 6772          if progr
+00026610: 6573 735f 7072 655f 6e65 775f 6c69 6e65  ess_pre_new_line
+00026620: 3a0a 2320 2020 2020 2020 2020 2020 2070  :.#            p
+00026630: 7269 6e74 6628 2727 2c69 676e 6f72 655f  rintf('',ignore_
+00026640: 656d 7074 793d 4661 6c73 652c 7374 6172  empty=False,star
+00026650: 745f 6e65 776c 696e 653d 5472 7565 2c6c  t_newline=True,l
+00026660: 6f67 3d6c 6f67 2c65 6e64 3d27 272c 6c6f  og=log,end='',lo
+00026670: 675f 6c65 7665 6c3d 3129 0a20 2020 2020  g_level=1).     
+00026680: 2020 2069 3d30 0a20 2020 2020 2020 2077     i=0.        w
+00026690: 6869 6c65 2054 7275 653a 0a20 2020 2020  hile True:.     
+000266a0: 2020 2020 2020 2069 6620 7374 6f70 2829         if stop()
+000266b0: 3a20 6272 6561 6b0a 2020 2020 2020 2020  : break.        
+000266c0: 2020 2020 6966 2069 203e 2070 726f 6772      if i > progr
+000266d0: 6573 735f 696e 7465 7276 616c 2a31 303a  ess_interval*10:
+000266e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000266f0: 2069 3d30 0a20 2020 2020 2020 2020 2020   i=0.           
+00026700: 2020 2020 2070 7269 6e74 6628 273e 272c       printf('>',
+00026710: 6469 7265 6374 3d54 7275 652c 6c6f 673d  direct=True,log=
+00026720: 6c6f 672c 6c6f 675f 6c65 7665 6c3d 3129  log,log_level=1)
+00026730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026740: 206c 6f63 616c 5f70 7269 6e74 6564 3d54   local_printed=T
+00026750: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+00026760: 692b 3d31 0a20 2020 2020 2020 2020 2020  i+=1.           
+00026770: 2074 696d 652e 736c 6565 7028 302e 3129   time.sleep(0.1)
+00026780: 0a20 2020 2020 2020 2069 6620 7072 6f67  .        if prog
+00026790: 7265 7373 5f70 6f73 745f 6e65 775f 6c69  ress_post_new_li
+000267a0: 6e65 2061 6e64 206c 6f63 616c 5f70 7269  ne and local_pri
+000267b0: 6e74 6564 3a0a 2020 2020 2020 2020 2020  nted:.          
+000267c0: 2020 7072 696e 7466 2827 272c 6967 6e6f    printf('',igno
+000267d0: 7265 5f65 6d70 7479 3d46 616c 7365 2c63  re_empty=False,c
+000267e0: 616c 6c65 725f 7061 7265 6e74 3d31 2c6e  aller_parent=1,n
+000267f0: 6f5f 696e 7472 6f3d 5472 7565 2c6c 6f67  o_intro=True,log
+00026800: 3d6c 6f67 2c6c 6f67 5f6c 6576 656c 3d31  =log,log_level=1
+00026810: 290a 2020 2020 7374 6172 745f 7469 6d65  ).    start_time
+00026820: 3d54 494d 4528 290a 2020 2020 6966 206e  =TIME().    if n
+00026830: 6f74 2054 7970 6528 636d 642c 2773 7472  ot Type(cmd,'str
+00026840: 272c 6461 7461 3d54 7275 6529 3a0a 2020  ',data=True):.  
+00026850: 2020 2020 2020 7265 7475 726e 202d 312c        return -1,
+00026860: 2777 726f 6e67 2063 6f6d 6d61 6e64 2069  'wrong command i
+00026870: 6e66 6f72 6d61 7469 6f6e 203a 7b30 7d27  nformation :{0}'
+00026880: 2e66 6f72 6d61 7428 636d 6429 2c27 272c  .format(cmd),'',
+00026890: 7374 6172 745f 7469 6d65 2e49 6e69 7428  start_time.Init(
+000268a0: 292c 7374 6172 745f 7469 6d65 2e49 6e69  ),start_time.Ini
+000268b0: 7428 292c 7374 6172 745f 7469 6d65 2e4e  t(),start_time.N
+000268c0: 6f77 2869 6e74 292c 636d 642c 7061 7468  ow(int),cmd,path
+000268d0: 0a0a 2020 2020 616e 7369 5f65 7363 6170  ..    ansi_escap
+000268e0: 6520 3d20 7265 2e63 6f6d 7069 6c65 2872  e = re.compile(r
+000268f0: 275c 7831 425c 5b5b 302d 3f5d 2a5b 202d  '\x1B\[[0-?]*[ -
+00026900: 2f5d 2a5b 402d 7e5d 2729 0a20 2020 2050  /]*[@-~]').    P
+00026910: 6f70 656e 3d73 7562 7072 6f63 6573 732e  open=subprocess.
+00026920: 506f 7065 6e0a 2020 2020 5049 5045 3d73  Popen.    PIPE=s
+00026930: 7562 7072 6f63 6573 732e 5049 5045 0a20  ubprocess.PIPE. 
+00026940: 2020 2053 5444 4f55 543d 7375 6270 726f     STDOUT=subpro
+00026950: 6365 7373 2e50 4950 450a 2020 2020 6f75  cess.PIPE.    ou
+00026960: 742c 6572 723d 2727 2c27 270a 2020 2020  t,err='',''.    
+00026970: 6578 655f 6e61 6d65 3d6f 732e 7061 7468  exe_name=os.path
+00026980: 2e62 6173 656e 616d 6528 6578 6563 7574  .basename(execut
+00026990: 6162 6c65 2920 6966 2065 7865 6375 7461  able) if executa
+000269a0: 626c 6520 656c 7365 206f 732e 7061 7468  ble else os.path
+000269b0: 2e62 6173 656e 616d 6528 6f73 5f65 6e76  .basename(os_env
+000269c0: 2e67 6574 2827 5348 454c 4c27 2c27 6261  .get('SHELL','ba
+000269d0: 7368 2729 290a 2020 2020 6966 2064 6267  sh')).    if dbg
+000269e0: 3a0a 2020 2020 2020 2020 6966 2065 7865  :.        if exe
+000269f0: 635f 6e61 6d65 2069 6e20 5b27 6261 7368  c_name in ['bash
+00026a00: 272c 2773 6827 5d3a 0a20 2020 2020 2020  ','sh']:.       
+00026a10: 2020 2020 2063 6d64 3d27 7365 7420 2d78       cmd='set -x
+00026a20: 5c6e 2720 2b20 636d 640a 2020 2020 6966  \n' + cmd.    if
+00026a30: 2069 7369 6e73 7461 6e63 6528 7265 6d6f   isinstance(remo
+00026a40: 7665 5f70 6174 682c 7374 7229 2061 6e64  ve_path,str) and
+00026a50: 206c 656e 2872 656d 6f76 655f 7061 7468   len(remove_path
+00026a60: 2920 3e20 3020 3a0a 2020 2020 2020 2020  ) > 0 :.        
+00026a70: 6966 206e 6f74 2066 756c 6c5f 7061 7468  if not full_path
+00026a80: 3a20 6675 6c6c 5f70 6174 683d 6f73 2e65  : full_path=os.e
+00026a90: 6e76 6972 6f6e 5b27 5041 5448 275d 0a20  nviron['PATH']. 
+00026aa0: 2020 2020 2020 2066 756c 6c5f 7061 7468         full_path
+00026ab0: 5f61 3d66 756c 6c5f 7061 7468 2e73 706c  _a=full_path.spl
+00026ac0: 6974 2827 3a27 290a 2020 2020 2020 2020  it(':').        
+00026ad0: 666f 7220 6969 2069 6e20 7265 6d6f 7665  for ii in remove
+00026ae0: 5f70 6174 682e 7370 6c69 7428 273a 2729  _path.split(':')
+00026af0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00026b00: 2069 6920 696e 2066 756c 6c5f 7061 7468   ii in full_path
+00026b10: 5f61 3a0a 2020 2020 2020 2020 2020 2020  _a:.            
+00026b20: 2020 2020 6675 6c6c 5f70 6174 685f 612e      full_path_a.
+00026b30: 7265 6d6f 7665 2869 6929 0a20 2020 2020  remove(ii).     
+00026b40: 2020 2066 756c 6c5f 7061 7468 3d27 3a27     full_path=':'
+00026b50: 2e6a 6f69 6e28 6675 6c6c 5f70 6174 685f  .join(full_path_
+00026b60: 6129 0a20 2020 2065 6c69 6620 6973 696e  a).    elif isin
+00026b70: 7374 616e 6365 2872 656d 6f76 655f 616c  stance(remove_al
+00026b80: 6c5f 7061 7468 2c73 7472 2920 616e 6420  l_path,str) and 
+00026b90: 6c65 6e28 7265 6d6f 7665 5f61 6c6c 5f70  len(remove_all_p
+00026ba0: 6174 6829 203e 2030 203a 0a20 2020 2020  ath) > 0 :.     
+00026bb0: 2020 2069 6620 6e6f 7420 6675 6c6c 5f70     if not full_p
+00026bc0: 6174 683a 2066 756c 6c5f 7061 7468 3d6f  ath: full_path=o
+00026bd0: 732e 656e 7669 726f 6e5b 2750 4154 4827  s.environ['PATH'
+00026be0: 5d0a 2020 2020 2020 2020 6675 6c6c 5f70  ].        full_p
+00026bf0: 6174 685f 613d 6675 6c6c 5f70 6174 682e  ath_a=full_path.
+00026c00: 7370 6c69 7428 273a 2729 0a20 2020 2020  split(':').     
+00026c10: 2020 2066 6f72 2069 6920 696e 2072 656d     for ii in rem
+00026c20: 6f76 655f 616c 6c5f 7061 7468 2e73 706c  ove_all_path.spl
+00026c30: 6974 2827 3a27 293a 0a20 2020 2020 2020  it(':'):.       
+00026c40: 2020 2020 2066 756c 6c5f 7061 7468 5f61       full_path_a
+00026c50: 3d5b 6920 666f 7220 6920 696e 2066 756c  =[i for i in ful
+00026c60: 6c5f 7061 7468 5f61 2069 6620 6920 213d  l_path_a if i !=
+00026c70: 2069 695d 0a20 2020 2020 2020 2066 756c   ii].        ful
+00026c80: 6c5f 7061 7468 3d27 3a27 2e6a 6f69 6e28  l_path=':'.join(
+00026c90: 6675 6c6c 5f70 6174 685f 290a 2020 2020  full_path_).    
+00026ca0: 6966 2065 7865 6375 7461 626c 653a 0a20  if executable:. 
+00026cb0: 2020 2020 2020 2069 6620 6e6f 7420 6f73         if not os
+00026cc0: 2e70 6174 682e 6973 6669 6c65 2865 7865  .path.isfile(exe
+00026cd0: 6375 7461 626c 6529 3a0a 2020 2020 2020  cutable):.      
+00026ce0: 2020 2020 2020 6578 6563 7574 6162 6c65        executable
+00026cf0: 3d66 696e 645f 6578 6563 7574 6162 6c65  =find_executable
+00026d00: 2865 7865 5f6e 616d 6529 0a20 2020 2023  (exe_name).    #
+00026d10: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00026d20: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00026d30: 0a20 2020 2023 2052 756e 2043 6f6d 6d61  .    # Run Comma
+00026d40: 6e64 0a20 2020 2023 2323 2323 2323 2323  nd.    #########
+00026d50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00026d60: 2323 2323 2323 2323 0a20 2020 2069 6620  ########.    if 
+00026d70: 6675 6c6c 5f70 6174 683a 0a20 2020 2020  full_path:.     
+00026d80: 2020 2069 6620 6578 655f 6e61 6d65 2069     if exe_name i
+00026d90: 6e20 5b27 6373 6827 2c27 7463 7368 275d  n ['csh','tcsh']
+00026da0: 3a0a 2020 2020 2020 2020 2020 2020 7020  :.            p 
+00026db0: 3d20 506f 7065 6e28 2727 2773 6574 656e  = Popen('''seten
+00026dc0: 7620 5041 5448 2022 2573 223b 2025 7327  v PATH "%s"; %s'
+00026dd0: 2727 2528 6675 6c6c 5f70 6174 682c 636d  ''%(full_path,cm
+00026de0: 6429 202c 2073 6865 6c6c 3d54 7275 652c  d) , shell=True,
+00026df0: 2073 7464 6f75 743d 5049 5045 2c20 7374   stdout=PIPE, st
+00026e00: 6465 7272 3d53 5444 4f55 542c 6578 6563  derr=STDOUT,exec
+00026e10: 7574 6162 6c65 3d65 7865 6375 7461 626c  utable=executabl
+00026e20: 652c 2065 6e76 3d6f 735f 656e 7629 0a20  e, env=os_env). 
+00026e30: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00026e40: 2020 2020 2020 2020 2070 203d 2050 6f70           p = Pop
+00026e50: 656e 2827 2727 6578 706f 7274 2050 4154  en('''export PAT
+00026e60: 483d 2573 3b20 2573 2727 2725 2866 756c  H=%s; %s'''%(ful
+00026e70: 6c5f 7061 7468 2c63 6d64 2920 2c20 7368  l_path,cmd) , sh
+00026e80: 656c 6c3d 5472 7565 2c20 7374 646f 7574  ell=True, stdout
+00026e90: 3d50 4950 452c 2073 7464 6572 723d 5354  =PIPE, stderr=ST
+00026ea0: 444f 5554 2c65 7865 6375 7461 626c 653d  DOUT,executable=
+00026eb0: 6578 6563 7574 6162 6c65 2c20 656e 763d  executable, env=
+00026ec0: 6f73 5f65 6e76 290a 2020 2020 656c 6966  os_env).    elif
+00026ed0: 2069 7369 6e73 7461 6e63 6528 7061 7468   isinstance(path
+00026ee0: 2c73 7472 2920 616e 6420 6c65 6e28 7061  ,str) and len(pa
+00026ef0: 7468 2920 3e20 303a 0a20 2020 2020 2020  th) > 0:.       
+00026f00: 2069 6620 6364 3a0a 2020 2020 2020 2020   if cd:.        
+00026f10: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
+00026f20: 7364 6972 2870 6174 6829 3a0a 2020 2020  sdir(path):.    
+00026f30: 2020 2020 2020 2020 2020 2020 2370 203d              #p =
+00026f40: 2050 6f70 656e 2863 6d64 5f66 6f72 6d28   Popen(cmd_form(
+00026f50: 636d 6429 202c 2073 6865 6c6c 3d54 7275  cmd) , shell=Tru
+00026f60: 652c 2073 7464 6f75 743d 5049 5045 2c20  e, stdout=PIPE, 
+00026f70: 7374 6465 7272 3d53 5444 4f55 542c 6578  stderr=STDOUT,ex
+00026f80: 6563 7574 6162 6c65 3d65 7865 6375 7461  ecutable=executa
+00026f90: 626c 652c 2065 6e76 3d6f 735f 656e 762c  ble, env=os_env,
+00026fa0: 2063 7764 3d70 6174 6829 0a20 2020 2020   cwd=path).     
+00026fb0: 2020 2020 2020 2020 2020 2070 7764 3d6f             pwd=o
+00026fc0: 732e 6765 7463 7764 2829 0a20 2020 2020  s.getcwd().     
+00026fd0: 2020 2020 2020 2020 2020 206f 732e 6368             os.ch
+00026fe0: 6469 7228 7061 7468 2920 2320 666f 7220  dir(path) # for 
+00026ff0: 636d 645f 666f 726d 2829 0a20 2020 2020  cmd_form().     
+00027000: 2020 2020 2020 2020 2020 2070 203d 2050             p = P
+00027010: 6f70 656e 2863 6d64 5f66 6f72 6d28 636d  open(cmd_form(cm
+00027020: 6429 202c 2073 6865 6c6c 3d54 7275 652c  d) , shell=True,
+00027030: 2073 7464 6f75 743d 5049 5045 2c20 7374   stdout=PIPE, st
+00027040: 6465 7272 3d53 5444 4f55 542c 6578 6563  derr=STDOUT,exec
+00027050: 7574 6162 6c65 3d65 7865 6375 7461 626c  utable=executabl
+00027060: 652c 2065 6e76 3d6f 735f 656e 7629 0a20  e, env=os_env). 
+00027070: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00027080: 6620 6b65 6570 5f63 7764 3a0a 2020 2020  f keep_cwd:.    
+00027090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000270a0: 6f73 2e63 6864 6972 2870 7764 290a 2020  os.chdir(pwd).  
+000270b0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000270c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000270d0: 7265 7475 726e 2031 2c20 277b 7d20 6e6f  return 1, '{} no
+000270e0: 7420 666f 756e 6427 2e66 6f72 6d61 7428  t found'.format(
+000270f0: 7061 7468 292c 2027 7b7d 206e 6f74 2066  path), '{} not f
+00027100: 6f75 6e64 272e 666f 726d 6174 2870 6174  ound'.format(pat
+00027110: 6829 2c73 7461 7274 5f74 696d 652e 496e  h),start_time.In
+00027120: 6974 2829 2c73 7461 7274 5f74 696d 652e  it(),start_time.
+00027130: 4e6f 7728 696e 7429 2c63 6d64 2c70 6174  Now(int),cmd,pat
+00027140: 680a 2020 2020 2020 2020 656c 7365 3a0a  h.        else:.
+00027150: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00027160: 7865 5f6e 616d 6520 696e 205b 2763 7368  xe_name in ['csh
+00027170: 272c 2774 6373 6827 5d3a 0a20 2020 2020  ','tcsh']:.     
+00027180: 2020 2020 2020 2020 2020 2070 203d 2050             p = P
+00027190: 6f70 656e 2827 2727 7365 7465 6e76 2050  open('''setenv P
+000271a0: 4154 4820 2225 733a 247b 5041 5448 7d22  ATH "%s:${PATH}"
+000271b0: 3b20 2573 2727 2725 2870 6174 682c 636d  ; %s'''%(path,cm
+000271c0: 6429 202c 2073 6865 6c6c 3d54 7275 652c  d) , shell=True,
+000271d0: 2073 7464 6f75 743d 5049 5045 2c20 7374   stdout=PIPE, st
+000271e0: 6465 7272 3d53 5444 4f55 542c 6578 6563  derr=STDOUT,exec
+000271f0: 7574 6162 6c65 3d65 7865 6375 7461 626c  utable=executabl
+00027200: 652c 2065 6e76 3d6f 735f 656e 7629 0a20  e, env=os_env). 
+00027210: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00027220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00027230: 2070 203d 2050 6f70 656e 2827 2727 6578   p = Popen('''ex
+00027240: 706f 7274 2050 4154 483d 2573 3a24 7b50  port PATH=%s:${P
+00027250: 4154 487d 3b20 2573 2727 2725 2870 6174  ATH}; %s'''%(pat
+00027260: 682c 636d 6429 202c 2073 6865 6c6c 3d54  h,cmd) , shell=T
+00027270: 7275 652c 2073 7464 6f75 743d 5049 5045  rue, stdout=PIPE
+00027280: 2c20 7374 6465 7272 3d53 5444 4f55 542c  , stderr=STDOUT,
+00027290: 6578 6563 7574 6162 6c65 3d65 7865 6375  executable=execu
+000272a0: 7461 626c 652c 2065 6e76 3d6f 735f 656e  table, env=os_en
+000272b0: 7629 0a20 2020 2065 6c73 653a 0a20 2020  v).    else:.   
+000272c0: 2020 2020 2070 203d 2050 6f70 656e 2863       p = Popen(c
+000272d0: 6d64 5f66 6f72 6d28 636d 6429 202c 2073  md_form(cmd) , s
+000272e0: 6865 6c6c 3d54 7275 652c 2073 7464 6f75  hell=True, stdou
+000272f0: 743d 5049 5045 2c20 7374 6465 7272 3d53  t=PIPE, stderr=S
+00027300: 5444 4f55 542c 6578 6563 7574 6162 6c65  TDOUT,executable
+00027310: 3d65 7865 6375 7461 626c 652c 2065 6e76  =executable, env
+00027320: 3d6f 735f 656e 7629 0a0a 2020 2020 2323  =os_env)..    ##
+00027330: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00027340: 2323 2323 2323 2323 2323 2323 2323 230a  ###############.
+00027350: 2020 2020 234e 6565 6420 6572 726f 7220      #Need error 
+00027360: 6c6f 6720 6f75 7420 6672 6f6d 2074 6872  log out from thr
+00027370: 6561 6420 746f 206f 7574 7075 740a 2020  ead to output.  
+00027380: 2020 2323 2323 2323 2323 2323 2323 2323    ##############
+00027390: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+000273a0: 2323 230a 2020 2020 6465 6620 7772 6974  ###.    def writ
+000273b0: 655f 6572 7228 7029 3a0a 2020 2020 2020  e_err(p):.      
+000273c0: 2077 6869 6c65 2054 7275 653a 0a20 2020   while True:.   
+000273d0: 2020 2020 2020 2020 6565 3d70 2e73 7464          ee=p.std
+000273e0: 6572 722e 7265 6164 2831 290a 2020 2020  err.read(1).    
+000273f0: 2020 2020 2020 2069 6620 6e6f 7420 6565         if not ee
+00027400: 3a20 6272 6561 6b0a 2020 2020 2020 2020  : break.        
+00027410: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00027420: 2865 652c 6279 7465 7329 3a0a 2020 2020  (ee,bytes):.    
+00027430: 2020 2020 2020 2020 2020 7379 732e 7374            sys.st
+00027440: 6465 7272 2e62 7566 6665 722e 7772 6974  derr.buffer.writ
+00027450: 6528 6565 2920 2320 7772 6974 6520 6279  e(ee) # write by
+00027460: 7465 7320 6461 7461 2074 6f20 7374 646f  tes data to stdo
+00027470: 7574 0a20 2020 2020 2020 2020 2020 656c  ut.           el
+00027480: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00027490: 2020 7379 732e 7374 6465 7272 2e77 7269    sys.stderr.wri
+000274a0: 7465 2865 6529 2023 2077 7269 7465 2062  te(ee) # write b
+000274b0: 7974 6573 2064 6174 6120 746f 2073 7464  ytes data to std
+000274c0: 6f75 740a 2020 2020 2020 2020 2020 2073  out.           s
+000274d0: 7973 2e73 7464 6572 722e 666c 7573 6828  ys.stderr.flush(
+000274e0: 290a 0a20 2020 2069 6620 696e 7465 7261  )..    if intera
+000274f0: 6374 6976 653a 0a20 2020 2020 2020 2323  ctive:.       ##
+00027500: 2323 2323 2323 2323 2320 5354 4420 4572  ######### STD Er
+00027510: 726f 720a 2020 2020 2020 2065 7272 203d  ror.       err =
+00027520: 2054 6872 6561 6428 7461 7267 6574 3d77   Thread(target=w
+00027530: 7269 7465 5f65 7272 2c20 6172 6773 3d28  rite_err, args=(
+00027540: 702c 2929 0a20 2020 2020 2020 6572 722e  p,)).       err.
+00027550: 7374 6172 7428 290a 2020 2020 2020 2023  start().       #
+00027560: 2323 2323 2323 2323 2323 2053 5444 204f  ########## STD O
+00027570: 7574 0a20 2020 2020 2020 7768 696c 6520  ut.       while 
+00027580: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
+00027590: 643d 702e 7374 646f 7574 2e72 6561 6428  d=p.stdout.read(
+000275a0: 3129 0a20 2020 2020 2020 2020 2069 6620  1).          if 
+000275b0: 6e6f 7420 643a 2062 7265 616b 0a20 2020  not d: break.   
+000275c0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000275d0: 616e 6365 2864 2c62 7974 6573 293a 0a20  ance(d,bytes):. 
+000275e0: 2020 2020 2020 2020 2020 2020 2073 7973               sys
+000275f0: 2e73 7464 6f75 742e 6275 6666 6572 2e77  .stdout.buffer.w
+00027600: 7269 7465 2864 2920 2320 7772 6974 6520  rite(d) # write 
+00027610: 6279 7465 7320 6461 7461 2074 6f20 7374  bytes data to st
+00027620: 646f 7574 0a20 2020 2020 2020 2020 2020  dout.           
+00027630: 2020 2023 6f75 742b 3d64 2e64 6563 6f64     #out+=d.decod
+00027640: 6528 2775 7466 2d38 2729 2e72 6570 6c61  e('utf-8').repla
+00027650: 6365 2827 5c72 272c 2727 290a 2020 2020  ce('\r','').    
+00027660: 2020 2020 2020 2020 2020 6f75 742b 3d53            out+=S
+00027670: 7472 2864 292e 7265 706c 6163 6528 275c  tr(d).replace('\
+00027680: 7227 2c27 2729 0a20 2020 2020 2020 2020  r','').         
+00027690: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000276a0: 2020 2020 2073 7973 2e73 7464 6f75 742e       sys.stdout.
+000276b0: 7772 6974 6528 6429 2023 2077 7269 7465  write(d) # write
+000276c0: 2073 7472 2064 6174 6120 746f 2073 7464   str data to std
+000276d0: 6f75 740a 2020 2020 2020 2020 2020 2020  out.            
+000276e0: 2020 6f75 742b 3d64 2e72 6570 6c61 6365    out+=d.replace
+000276f0: 2827 5c72 272c 2727 290a 2020 2020 2020  ('\r','').      
+00027700: 2020 2020 7379 732e 7374 646f 7574 2e66      sys.stdout.f
+00027710: 6c75 7368 2829 0a20 2020 2020 2020 702e  lush().       p.
+00027720: 7374 646f 7574 2e63 6c6f 7365 2829 0a0a  stdout.close()..
+00027730: 2020 2020 2020 2023 2323 2323 2323 2323         #########
+00027740: 2323 204f 4c44 2053 5444 2045 7272 6f72  ## OLD STD Error
+00027750: 2c20 6966 2073 7461 7274 696e 6720 6672  , if starting fr
+00027760: 6f6d 2065 7272 6f72 206c 6f67 2074 6865  om error log the
+00027770: 6e20 6361 6e27 7420 7365 650a 2020 2020  n can't see.    
+00027780: 2020 2023 6572 723d 702e 7374 6465 7272     #err=p.stderr
+00027790: 2e72 6561 6428 290a 2020 2020 2020 2023  .read().       #
+000277a0: 6966 2065 7272 3a0a 2020 2020 2020 2023  if err:.       #
+000277b0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000277c0: 2865 7272 2c62 7974 6573 293a 0a20 2020  (err,bytes):.   
+000277d0: 2020 2020 2320 2020 2020 2020 7379 732e      #       sys.
+000277e0: 7374 6465 7272 2e62 7566 6665 722e 7772  stderr.buffer.wr
+000277f0: 6974 6528 6572 7229 0a20 2020 2020 2020  ite(err).       
+00027800: 2320 2020 656c 7365 3a0a 2020 2020 2020  #   else:.      
+00027810: 2023 2020 2020 2020 2073 7973 2e73 7464   #       sys.std
+00027820: 6572 722e 7772 6974 6528 6572 7229 0a20  err.write(err). 
+00027830: 2020 2020 2020 2320 2020 7379 732e 7374        #   sys.st
+00027840: 6465 7272 2e66 6c75 7368 2829 0a20 2020  derr.flush().   
+00027850: 2020 2020 2370 2e73 7464 6572 722e 636c      #p.stderr.cl
+00027860: 6f73 6528 290a 2020 2020 2020 2070 2e77  ose().       p.w
+00027870: 6169 7428 290a 2020 2020 656c 7365 3a0a  ait().    else:.
+00027880: 2020 2020 2020 2069 6620 7072 6f67 7265         if progre
+00027890: 7373 3a0a 2020 2020 2020 2020 2020 2073  ss:.           s
+000278a0: 746f 705f 7468 7265 6164 733d 4661 6c73  top_threads=Fals
+000278b0: 650a 2020 2020 2020 2020 2020 2070 7074  e.           ppt
+000278c0: 683d 5468 7265 6164 2874 6172 6765 743d  h=Thread(target=
+000278d0: 7070 726f 672c 6172 6773 3d28 6c61 6d62  pprog,args=(lamb
+000278e0: 6461 3a73 746f 705f 7468 7265 6164 732c  da:stop_threads,
+000278f0: 7072 6f67 7265 7373 5f70 7265 5f6e 6577  progress_pre_new
+00027900: 5f6c 696e 652c 7072 6f67 7265 7373 5f70  _line,progress_p
+00027910: 6f73 745f 6e65 775f 6c69 6e65 2c6c 6f67  ost_new_line,log
+00027920: 2c29 290a 2020 2020 2020 2020 2020 2070  ,)).           p
+00027930: 7074 682e 7374 6172 7428 290a 0a20 2020  pth.start()..   
+00027940: 2020 2020 7469 6d65 6f75 743d 496e 7428      timeout=Int(
+00027950: 7469 6d65 6f75 742c 6465 6661 756c 745f  timeout,default_
+00027960: 7469 6d65 6f75 7429 0a20 2020 2020 2020  timeout).       
+00027970: 6966 2074 696d 656f 7574 203e 2030 3a0a  if timeout > 0:.
+00027980: 2020 2020 2020 2020 2020 6966 2050 7956            if PyV
+00027990: 6572 2833 293a 0a20 2020 2020 2020 2020  er(3):.         
+000279a0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+000279b0: 2020 2020 2020 2020 206f 7574 2c20 6572           out, er
+000279c0: 7220 3d20 702e 636f 6d6d 756e 6963 6174  r = p.communicat
+000279d0: 6528 7469 6d65 6f75 743d 7469 6d65 6f75  e(timeout=timeou
+000279e0: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+000279f0: 6578 6365 7074 2073 7562 7072 6f63 6573  except subproces
+00027a00: 732e 5469 6d65 6f75 7445 7870 6972 6564  s.TimeoutExpired
+00027a10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00027a20: 2020 702e 6b69 6c6c 2829 0a20 2020 2020    p.kill().     
+00027a30: 2020 2020 2020 2020 2020 2070 2e72 6574             p.ret
+00027a40: 7572 6e63 6f64 653d 3939 390a 2020 2020  urncode=999.    
+00027a50: 2020 2020 2020 2020 2020 2020 6572 723d              err=
+00027a60: 2745 7272 6f72 3a20 4b69 6c6c 2070 726f  'Error: Kill pro
+00027a70: 6365 7373 2061 6674 6572 2054 696d 656f  cess after Timeo
+00027a80: 7574 207b 307d 272e 666f 726d 6174 2874  ut {0}'.format(t
+00027a90: 696d 656f 7574 290a 2020 2020 2020 2020  imeout).        
+00027aa0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00027ab0: 2020 2020 2020 6f74 696d 656f 7574 3d27        otimeout='
+00027ac0: 7b7d 272e 666f 726d 6174 2874 696d 656f  {}'.format(timeo
+00027ad0: 7574 290a 2020 2020 2020 2020 2020 2020  ut).            
+00027ae0: 2020 7768 696c 6520 702e 706f 6c6c 2829    while p.poll()
+00027af0: 2069 7320 4e6f 6e65 2061 6e64 2074 696d   is None and tim
+00027b00: 656f 7574 203e 2030 3a0a 2020 2020 2020  eout > 0:.      
+00027b10: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00027b20: 2e73 6c65 6570 2830 2e31 290a 2020 2020  .sleep(0.1).    
+00027b30: 2020 2020 2020 2020 2020 2020 2020 7469                ti
+00027b40: 6d65 6f75 7420 3d20 7469 6d65 6f75 7420  meout = timeout 
+00027b50: 2d20 302e 310a 2020 2020 2020 2020 2020  - 0.1.          
+00027b60: 2020 2020 6966 2070 2e70 6f6c 6c28 2920      if p.poll() 
+00027b70: 6973 204e 6f6e 6520 616e 6420 7469 6d65  is None and time
+00027b80: 6f75 7420 3c20 303a 0a20 2020 2020 2020  out < 0:.       
+00027b90: 2020 2020 2020 2020 2020 2070 2e6b 696c             p.kil
+00027ba0: 6c28 290a 2020 2020 2020 2020 2020 2020  l().            
+00027bb0: 2020 2020 2020 702e 7265 7475 726e 636f        p.returnco
+00027bc0: 6465 3d39 3939 0a20 2020 2020 2020 2020  de=999.         
+00027bd0: 2020 2020 2020 2020 2065 7272 3d27 4572           err='Er
+00027be0: 726f 723a 204b 696c 6c20 7072 6f63 6573  ror: Kill proces
+00027bf0: 7320 6166 7465 7220 5469 6d65 6f75 7420  s after Timeout 
+00027c00: 7b30 7d27 2e66 6f72 6d61 7428 6f74 696d  {0}'.format(otim
+00027c10: 656f 7574 290a 2020 2020 2020 2020 2020  eout).          
+00027c20: 2020 2020 6966 206c 656e 286f 7574 2920      if len(out) 
+00027c30: 3d3d 2030 2061 6e64 206c 656e 2865 7272  == 0 and len(err
+00027c40: 2920 3d3d 2030 3a0a 2020 2020 2020 2020  ) == 0:.        
+00027c50: 2020 2020 2020 2020 2020 6f75 742c 2065            out, e
+00027c60: 7272 203d 2070 2e63 6f6d 6d75 6e69 6361  rr = p.communica
+00027c70: 7465 2829 0a20 2020 2020 2020 656c 7365  te().       else
+00027c80: 3a0a 2020 2020 2020 2020 2020 6f75 742c  :.          out,
+00027c90: 2065 7272 203d 2070 2e63 6f6d 6d75 6e69   err = p.communi
+00027ca0: 6361 7465 2829 0a20 2020 2020 2020 6966  cate().       if
+00027cb0: 2070 726f 6772 6573 733a 0a20 2020 2020   progress:.     
+00027cc0: 2020 2020 2073 746f 705f 7468 7265 6164       stop_thread
+00027cd0: 733d 5472 7565 0a20 2020 2020 2020 2020  s=True.         
+00027ce0: 2070 7074 682e 6a6f 696e 2829 0a20 2020   ppth.join().   
+00027cf0: 2023 6966 2050 7956 6572 2833 293a 0a20   #if PyVer(3):. 
+00027d00: 2020 2023 2020 2020 6966 2054 7970 6528     #    if Type(
+00027d10: 6f75 742c 2762 7974 6573 2729 3a20 6f75  out,'bytes'): ou
+00027d20: 743d 6f75 742e 6465 636f 6465 2822 4953  t=out.decode("IS
+00027d30: 4f2d 3838 3539 2d31 2229 2e72 7374 7269  O-8859-1").rstri
+00027d40: 7028 290a 2020 2020 2320 2020 2069 6620  p().    #    if 
+00027d50: 5479 7065 2865 7272 2c27 6279 7465 7327  Type(err,'bytes'
+00027d60: 293a 2065 7272 3d65 7272 2e64 6563 6f64  ): err=err.decod
+00027d70: 6528 2249 534f 2d38 3835 392d 3122 292e  e("ISO-8859-1").
+00027d80: 7273 7472 6970 2829 0a20 2020 206f 7574  rstrip().    out
+00027d90: 3d53 7472 286f 7574 2c65 6e63 6f64 653d  =Str(out,encode=
+00027da0: 6465 636f 6465 292e 7273 7472 6970 2829  decode).rstrip()
+00027db0: 0a20 2020 2065 7272 3d53 7472 2865 7272  .    err=Str(err
+00027dc0: 2c65 6e63 6f64 653d 6465 636f 6465 292e  ,encode=decode).
+00027dd0: 7273 7472 6970 2829 0a20 2020 2069 6620  rstrip().    if 
+00027de0: 616e 7369 3a0a 2020 2020 2020 2020 6f75  ansi:.        ou
+00027df0: 743d 616e 7369 5f65 7363 6170 652e 7375  t=ansi_escape.su
+00027e00: 6228 2727 2c6f 7574 290a 2020 2020 2020  b('',out).      
+00027e10: 2020 6572 723d 616e 7369 5f65 7363 6170    err=ansi_escap
+00027e20: 652e 7375 6228 2727 2c65 7272 290a 2020  e.sub('',err).  
+00027e30: 2020 6966 2065 6e76 5f6f 7574 3a0a 2020    if env_out:.  
+00027e40: 2020 2020 2020 7265 7475 726e 2070 2e72        return p.r
+00027e50: 6574 7572 6e63 6f64 652c 206f 7574 2c20  eturncode, out, 
+00027e60: 6572 722c 7374 6172 745f 7469 6d65 2e49  err,start_time.I
+00027e70: 6e69 7428 292c 7374 6172 745f 7469 6d65  nit(),start_time
+00027e80: 2e4e 6f77 2869 6e74 292c 636d 642c 7061  .Now(int),cmd,pa
+00027e90: 7468 2c6f 735f 656e 760a 2020 2020 7265  th,os_env.    re
+00027ea0: 7475 726e 2070 2e72 6574 7572 6e63 6f64  turn p.returncod
+00027eb0: 652c 206f 7574 2c20 6572 722c 7374 6172  e, out, err,star
+00027ec0: 745f 7469 6d65 2e49 6e69 7428 292c 7374  t_time.Init(),st
+00027ed0: 6172 745f 7469 6d65 2e4e 6f77 2869 6e74  art_time.Now(int
+00027ee0: 292c 636d 642c 7061 7468 0a0a 6465 6620  ),cmd,path..def 
+00027ef0: 4973 4361 6e63 656c 2866 756e 632c 2a2a  IsCancel(func,**
+00027f00: 6f70 7473 293a 0a20 2020 2072 6574 7572  opts):.    retur
+00027f10: 6e20 4973 5472 7565 2866 756e 632c 7265  n IsTrue(func,re
+00027f20: 7175 6972 656d 656e 7473 3d5b 2763 616e  quirements=['can
+00027f30: 6365 6c27 2c27 6361 6e63 656c 696e 6727  cel','canceling'
+00027f40: 2c27 5245 5644 272c 2773 746f 7027 2c27  ,'REVD','stop','
+00027f50: 6272 6561 6b27 5d2c 2a2a 6f70 7473 290a  break'],**opts).
+00027f60: 0a64 6566 2049 7342 7265 616b 2866 756e  .def IsBreak(fun
+00027f70: 632c 2a2a 6f70 7473 293a 0a20 2020 2072  c,**opts):.    r
+00027f80: 6574 7572 6e20 4973 5472 7565 2866 756e  eturn IsTrue(fun
+00027f90: 632c 7265 7175 6972 656d 656e 7473 3d5b  c,requirements=[
+00027fa0: 2763 616e 6365 6c27 2c27 6361 6e63 656c  'cancel','cancel
+00027fb0: 696e 6727 2c27 5245 5644 272c 2773 746f  ing','REVD','sto
+00027fc0: 7027 2c27 6272 6561 6b27 5d2c 2a2a 6f70  p','break'],**op
+00027fd0: 7473 290a 0a64 6566 2046 6978 4170 6f73  ts)..def FixApos
+00027fe0: 7472 6f70 6865 2873 7472 696e 6729 3a0a  trophe(string):.
+00027ff0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00028000: 6528 7374 7269 6e67 2c73 7472 293a 0a20  e(string,str):. 
+00028010: 2020 2020 2020 2069 6620 2227 2220 696e         if "'" in
+00028020: 2073 7472 696e 673a 0a20 2020 2020 2020   string:.       
+00028030: 2020 2020 2072 6574 7572 6e20 2727 2722       return '''"
+00028040: 7b7d 2227 2727 2e66 6f72 6d61 7428 7374  {}"'''.format(st
+00028050: 7269 6e67 290a 2020 2020 2020 2020 7265  ring).        re
+00028060: 7475 726e 2022 2222 277b 7d27 2222 222e  turn """'{}'""".
+00028070: 666f 726d 6174 2873 7472 696e 6729 0a20  format(string). 
+00028080: 2020 2072 6574 7572 6e20 7374 7269 6e67     return string
+00028090: 0a0a 6465 6620 7370 7269 6e74 6628 7374  ..def sprintf(st
+000280a0: 7269 6e67 2c2a 696e 7073 2c2a 2a6f 7074  ring,*inps,**opt
+000280b0: 7329 3a0a 2020 2020 2727 270a 2020 2020  s):.    '''.    
+000280c0: 2222 2269 706d 6974 6f6f 6c20 2d48 2025  """ipmitool -H %
+000280d0: 2869 706d 695f 6970 2973 202d 5520 2528  (ipmi_ip)s -U %(
+000280e0: 6970 6d69 5f75 7365 7229 7320 2d50 2027  ipmi_user)s -P '
+000280f0: 2528 6970 6d69 5f70 6173 7329 7327 2022  %(ipmi_pass)s' "
+00028100: 2222 2528 2a2a 6f70 7473 290a 2020 2020  ""%(**opts).    
+00028110: 2222 227b 6170 707d 202d 4820 7b69 706d  """{app} -H {ipm
+00028120: 695f 6970 7d20 2d55 207b 6970 6d69 5f75  i_ip} -U {ipmi_u
+00028130: 7365 727d 202d 5020 277b 6970 6d69 5f70  ser} -P '{ipmi_p
+00028140: 6173 737d 2720 2222 222e 666f 726d 6174  ass}' """.format
+00028150: 282a 2a6f 7074 7329 0a20 2020 2022 2222  (**opts).    """
+00028160: 7b7d 202d 4820 7b7d 202d 5520 7b7d 202d  {} -H {} -U {} -
+00028170: 5020 277b 7d27 2022 2222 2e66 6f72 6d61  P '{}' """.forma
+00028180: 7428 2a69 6e70 7329 0a20 2020 2022 2222  t(*inps).    """
+00028190: 7b30 7d20 2d48 207b 317d 202d 5520 7b32  {0} -H {1} -U {2
+000281a0: 7d20 2d50 2027 7b33 7d27 2022 2222 2e66  } -P '{3}' """.f
+000281b0: 6f72 6d61 7428 2a69 6e70 7329 0a20 2020  ormat(*inps).   
+000281c0: 205f 6572 725f 203a 2054 7275 653a 206d   _err_ : True: m
+000281d0: 6973 7369 6e67 2070 6172 616d 6574 6572  issing parameter
+000281e0: 2074 6865 6e20 7265 7475 726e 2046 616c   then return Fal
+000281f0: 7365 2c20 4661 6c73 6528 6465 6661 756c  se, False(defaul
+00028200: 7429 3a20 636f 6e76 6572 7420 6a75 7374  t): convert just
+00028210: 2070 6f73 7369 626c 6520 7468 696e 6773   possible things
+00028220: 2c20 6f74 6865 7273 206a 7573 7420 6b65  , others just ke
+00028230: 6570 2072 6574 7572 6e20 6f72 6967 696e  ep return origin
+00028240: 616c 2066 6f72 6d0a 2020 2020 6170 6f73  al form.    apos
+00028250: 7472 6f70 6865 203a 2054 7275 653a 2061  trophe : True: a
+00028260: 7574 6f6d 6174 6963 616c 6c79 2063 6861  utomatically cha
+00028270: 6e67 6520 616e 6420 6164 6420 7768 656e  nge and add when
+00028280: 2069 6e70 7574 2076 616c 7565 2068 6176   input value hav
+00028290: 696e 6720 6170 6f73 7472 6f70 6865 0a20  ing apostrophe. 
+000282a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000282b0: 4e6f 6e65 203a 2061 7574 6f6d 6174 6963  None : automatic
+000282c0: 616c 6c79 2063 6861 6e67 6520 6170 6f73  ally change apos
+000282d0: 7472 6f70 6865 2077 6865 6e20 696e 7075  trophe when inpu
+000282e0: 7420 7661 6c75 6520 6861 7669 6e67 2073  t value having s
+000282f0: 616d 6520 6170 6f73 7472 6f70 6865 2c20  ame apostrophe, 
+00028300: 6275 7420 6e6f 7420 6175 746f 6d61 7469  but not automati
+00028310: 6361 6c6c 7920 6164 6469 6e67 2061 706f  cally adding apo
+00028320: 7374 726f 7068 6520 7768 656e 2066 6f72  strophe when for
+00028330: 6d61 7420 7374 7269 6e67 2068 6176 696e  mat string havin
+00028340: 6720 6e6f 2061 706f 7374 726f 7068 6528  g no apostrophe(
+00028350: 6465 6661 756c 7429 0a20 2020 2020 2020  default).       
+00028360: 2020 2020 2020 2020 2020 4661 6c73 653a            False:
+00028370: 2064 6f20 6e6f 7420 6368 616e 6765 2061   do not change a
+00028380: 6e79 2070 6172 616d 6574 6572 0a20 2020  ny parameter.   
+00028390: 2027 2727 0a20 2020 2064 6566 205f 7265   '''.    def _re
+000283a0: 706c 6163 655f 666f 726d 6174 5f74 6f5f  place_format_to_
+000283b0: 7661 6c75 655f 2869 2c74 6d70 2c73 7472  value_(i,tmp,str
+000283c0: 696e 672c 7661 6c2c 6170 6f73 7472 6f70  ing,val,apostrop
+000283d0: 6865 3d54 7275 6529 3a0a 2020 2020 2020  he=True):.      
+000283e0: 2020 6d69 7373 696e 673d 5b5d 0a20 2020    missing=[].   
+000283f0: 2020 2020 2073 7472 696e 675f 613d 7374       string_a=st
+00028400: 7269 6e67 2e73 706c 6974 2829 0a20 2020  ring.split().   
+00028410: 2020 2020 206f 6964 783d 300a 2020 2020       oidx=0.    
+00028420: 2020 2020 7475 706c 655f 7661 6c3d 6973      tuple_val=is
+00028430: 696e 7374 616e 6365 2876 616c 2c28 7475  instance(val,(tu
+00028440: 706c 652c 6c69 7374 2929 0a20 2020 2020  ple,list)).     
+00028450: 2020 2066 6f72 2069 6920 696e 2074 6d70     for ii in tmp
+00028460: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00028470: 2074 7570 6c65 5f76 616c 3a20 6969 3d69   tuple_val: ii=i
+00028480: 6e74 2869 6929 0a20 2020 2020 2020 2020  nt(ii).         
+00028490: 2020 2069 6478 3d4e 6f6e 650a 2020 2020     idx=None.    
+000284a0: 2020 2020 2020 2020 2369 6e70 7574 206c          #input l
+000284b0: 6f63 6174 696f 6e20 666f 726d 6174 0a20  ocation format. 
+000284c0: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
+000284d0: 3c20 323a 0a20 2020 2020 2020 2020 2020  < 2:.           
+000284e0: 2020 2020 2023 206c 6973 742c 7475 706c       # list,tupl
+000284f0: 652c 7061 7261 6d65 7465 720a 2020 2020  e,parameter.    
+00028500: 2020 2020 2020 2020 2020 2020 2370 7269              #pri
+00028510: 6e74 2827 7b7d 272e 666f 726d 6174 2831  nt('{}'.format(1
+00028520: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00028530: 2020 2023 7072 696e 7428 277b 307d 272e     #print('{0}'.
+00028540: 666f 726d 6174 2831 2929 0a20 2020 2020  format(1)).     
+00028550: 2020 2020 2020 2020 2020 2023 7072 696e             #prin
+00028560: 7428 277b 617d 272e 666f 726d 6174 282a  t('{a}'.format(*
+00028570: 2a7b 2761 273a 317d 2929 0a20 2020 2020  *{'a':1})).     
+00028580: 2020 2020 2020 2020 2020 2023 7072 696e             #prin
+00028590: 7428 277b 617d 272e 666f 726d 6174 2861  t('{a}'.format(a
+000285a0: 3d31 2929 0a20 2020 2020 2020 2020 2020  =1)).           
+000285b0: 2020 2020 2069 6620 2727 277b 2573 7d27       if '''{%s}'
+000285c0: 2727 2528 6969 2920 696e 2073 7472 696e  ''%(ii) in strin
+000285d0: 675f 613a 0a20 2020 2020 2020 2020 2020  g_a:.           
+000285e0: 2020 2020 2020 2020 2069 6478 3d73 7472           idx=str
+000285f0: 696e 675f 612e 696e 6465 7828 2727 277b  ing_a.index('''{
+00028600: 2573 7d27 2727 2528 6969 2929 0a20 2020  %s}'''%(ii)).   
+00028610: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00028620: 6620 2222 2227 7b25 737d 2722 2222 2528  f """'{%s}'"""%(
+00028630: 6969 2920 696e 2073 7472 696e 675f 613a  ii) in string_a:
+00028640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028650: 2020 2020 2069 6478 3d73 7472 696e 675f       idx=string_
+00028660: 612e 696e 6465 7828 2222 2227 7b25 737d  a.index("""'{%s}
+00028670: 2722 2222 2528 6969 2929 0a20 2020 2020  '"""%(ii)).     
+00028680: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00028690: 2727 2722 7b25 737d 2227 2727 2528 6969  '''"{%s}"'''%(ii
+000286a0: 2920 696e 2073 7472 696e 675f 613a 0a20  ) in string_a:. 
+000286b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000286c0: 2020 2069 6478 3d73 7472 696e 675f 612e     idx=string_a.
+000286d0: 696e 6465 7828 2727 2722 7b25 737d 2227  index('''"{%s}"'
+000286e0: 2727 2528 6969 2929 0a20 2020 2020 2020  ''%(ii)).       
+000286f0: 2020 2020 2065 6c69 6620 6920 3d3d 2032       elif i == 2
+00028700: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00028710: 2020 2320 6469 6374 696f 6e61 7279 2069    # dictionary i
+00028720: 6e70 7574 200a 2020 2020 2020 2020 2020  nput .          
+00028730: 2020 2020 2020 2320 7072 696e 7428 2725        # print('%
+00028740: 2861 2973 2725 287b 2761 273a 2761 277d  (a)s'%({'a':'a'}
+00028750: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00028760: 2020 2069 6620 2727 2725 287b 7d29 7327     if '''%({})s'
+00028770: 2727 2e66 6f72 6d61 7428 6969 2920 696e  ''.format(ii) in
+00028780: 2073 7472 696e 675f 613a 0a20 2020 2020   string_a:.     
+00028790: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000287a0: 6478 3d73 7472 696e 675f 612e 696e 6465  dx=string_a.inde
+000287b0: 7828 2727 2725 287b 7d29 7327 2727 2e66  x('''%({})s'''.f
+000287c0: 6f72 6d61 7428 6969 2929 0a20 2020 2020  ormat(ii)).     
+000287d0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+000287e0: 2222 2227 2528 7b7d 2973 2722 2222 2e66  """'%({})s'""".f
+000287f0: 6f72 6d61 7428 6969 2920 696e 2073 7472  ormat(ii) in str
+00028800: 696e 675f 613a 0a20 2020 2020 2020 2020  ing_a:.         
+00028810: 2020 2020 2020 2020 2020 2069 6478 3d73             idx=s
+00028820: 7472 696e 675f 612e 696e 6465 7828 2222  tring_a.index(""
+00028830: 2227 2528 7b7d 2973 2722 2222 2e66 6f72  "'%({})s'""".for
+00028840: 6d61 7428 6969 2929 0a20 2020 2020 2020  mat(ii)).       
+00028850: 2020 2020 2020 2020 2065 6c69 6620 2727           elif ''
+00028860: 2722 2528 7b7d 2973 2227 2727 2e66 6f72  '"%({})s"'''.for
+00028870: 6d61 7428 6969 2920 696e 2073 7472 696e  mat(ii) in strin
+00028880: 675f 613a 0a20 2020 2020 2020 2020 2020  g_a:.           
+00028890: 2020 2020 2020 2020 2069 6478 3d73 7472           idx=str
+000288a0: 696e 675f 612e 696e 6465 7828 2727 2722  ing_a.index('''"
+000288b0: 2528 7b7d 2973 2227 2727 2e66 6f72 6d61  %({})s"'''.forma
+000288c0: 7428 6969 2929 0a20 2020 2020 2020 2020  t(ii)).         
+000288d0: 2020 2023 466f 756e 6420 666f 726d 6174     #Found format
+000288e0: 206c 6f63 6174 696f 6e0a 2020 2020 2020   location.      
+000288f0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00028900: 6e63 6528 6964 782c 696e 7429 3a0a 2020  nce(idx,int):.  
+00028910: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00028920: 6966 2069 6e70 7574 2064 6174 6120 6973  if input data is
+00028930: 2073 7472 696e 670a 2020 2020 2020 2020   string.        
+00028940: 2020 2020 2020 2020 6966 2028 7475 706c          if (tupl
+00028950: 655f 7661 6c20 616e 6420 6c65 6e28 7661  e_val and len(va
+00028960: 6c29 203e 2069 6929 206f 7220 286e 6f74  l) > ii) or (not
+00028970: 2074 7570 6c65 5f76 616c 2061 6e64 2069   tuple_val and i
+00028980: 6920 696e 2076 616c 293a 0a20 2020 2020  i in val):.     
+00028990: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000289a0: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
+000289b0: 5b69 695d 2c73 7472 293a 0a20 2020 2020  [ii],str):.     
+000289c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000289d0: 2020 2069 6620 2873 7472 696e 675f 615b     if (string_a[
+000289e0: 6964 785d 5b30 5d20 3d3d 2022 2722 2061  idx][0] == "'" a
+000289f0: 6e64 2073 7472 696e 675f 615b 6964 785d  nd string_a[idx]
+00028a00: 5b2d 315d 203d 3d20 2227 2229 205c 0a20  [-1] == "'") \. 
+00028a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028a20: 2020 2020 2020 2020 2020 6f72 2028 7374            or (st
+00028a30: 7269 6e67 5f61 5b69 6478 5d5b 305d 203d  ring_a[idx][0] =
+00028a40: 3d20 2722 2720 616e 6420 7374 7269 6e67  = '"' and string
+00028a50: 5f61 5b69 6478 5d5b 2d31 5d20 3d3d 2027  _a[idx][-1] == '
+00028a60: 2227 293a 0a20 2020 2020 2020 2020 2020  "'):.           
+00028a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028a80: 2069 6620 6170 6f73 7472 6f70 6865 205c   if apostrophe \
+00028a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ab0: 616e 6420 2828 7661 6c5b 6969 5d5b 305d  and ((val[ii][0]
+00028ac0: 203d 3d20 2227 2220 616e 6420 7661 6c5b   == "'" and val[
+00028ad0: 6969 5d5b 2d31 5d20 3d3d 2022 2722 295c  ii][-1] == "'")\
+00028ae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00028af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028b00: 6f72 2028 7661 6c5b 6969 5d5b 305d 203d  or (val[ii][0] =
+00028b10: 3d20 2722 2720 616e 6420 7661 6c5b 6969  = '"' and val[ii
+00028b20: 5d5b 2d31 5d20 3d3d 2027 2227 2929 3a0a  ][-1] == '"')):.
+00028b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028b50: 7374 7269 6e67 5f61 5b69 6478 5d3d 7661  string_a[idx]=va
+00028b60: 6c5b 6969 5d0a 2020 2020 2020 2020 2020  l[ii].          
+00028b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028b80: 2020 656c 6966 2061 706f 7374 726f 7068    elif apostroph
+00028b90: 6520 6973 206e 6f74 2046 616c 7365 3a0a  e is not False:.
+00028ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028bc0: 6966 2073 7472 696e 675f 615b 6964 785d  if string_a[idx]
+00028bd0: 5b30 5d20 3d3d 2022 2722 2061 6e64 2022  [0] == "'" and "
+00028be0: 2722 2069 6e20 7661 6c5b 6969 5d3a 0a20  '" in val[ii]:. 
+00028bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00028c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c20: 2020 7374 7269 6e67 5f61 5b69 6478 5d3d    string_a[idx]=
-00028c30: 2222 2227 2222 222b 7661 6c5b 6969 5d2b  """'"""+val[ii]+
-00028c40: 2222 2227 2222 220a 2020 2020 2020 2020  """'""".        
-00028c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00028c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c80: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-00028c90: 5f61 5b69 6478 5d3d 7661 6c5b 6969 5d0a  _a[idx]=val[ii].
-00028ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028cb0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00028cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028cd0: 2020 6966 2074 7570 6c65 5f76 616c 3a0a    if tuple_val:.
+00028c10: 2020 2073 7472 696e 675f 615b 6964 785d     string_a[idx]
+00028c20: 3d27 2727 2227 2727 2b76 616c 5b69 695d  ='''"'''+val[ii]
+00028c30: 2b27 2727 2227 2727 0a20 2020 2020 2020  +'''"'''.       
+00028c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028c50: 2020 2020 2020 2020 2065 6c69 6620 7374           elif st
+00028c60: 7269 6e67 5f61 5b69 6478 5d5b 305d 203d  ring_a[idx][0] =
+00028c70: 3d20 2722 2720 616e 6420 2722 2720 696e  = '"' and '"' in
+00028c80: 2076 616c 5b69 695d 3a0a 2020 2020 2020   val[ii]:.      
+00028c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ca0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+00028cb0: 7269 6e67 5f61 5b69 6478 5d3d 2222 2227  ring_a[idx]="""'
+00028cc0: 2222 222b 7661 6c5b 6969 5d2b 2222 2227  """+val[ii]+"""'
+00028cd0: 2222 220a 2020 2020 2020 2020 2020 2020  """.            
 00028ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028cf0: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00028d00: 6e67 5f61 5b69 6478 5d3d 7374 7269 6e67  ng_a[idx]=string
-00028d10: 5f61 5b69 6478 5d2e 666f 726d 6174 282a  _a[idx].format(*
-00028d20: 7661 6c29 0a20 2020 2020 2020 2020 2020  val).           
-00028d30: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00028d40: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00028d50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00028d60: 7472 696e 675f 615b 6964 785d 3d73 7472  tring_a[idx]=str
-00028d70: 696e 675f 615b 6964 785d 2e66 6f72 6d61  ing_a[idx].forma
-00028d80: 7428 2a2a 7661 6c29 0a20 2020 2020 2020  t(**val).       
-00028d90: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00028cf0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00028d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028d10: 2020 2020 2020 2020 2020 2020 2020 7374                st
+00028d20: 7269 6e67 5f61 5b69 6478 5d3d 7374 7269  ring_a[idx]=stri
+00028d30: 6e67 5f61 5b69 6478 5d2e 666f 726d 6174  ng_a[idx].format
+00028d40: 282a 2a76 616c 290a 2020 2020 2020 2020  (**val).        
+00028d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028d60: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00028d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028d80: 2020 6966 2061 706f 7374 726f 7068 653a    if apostrophe:
+00028d90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00028da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028db0: 2020 206d 6973 7369 6e67 2e61 7070 656e     missing.appen
-00028dc0: 6428 6969 290a 2020 2020 2020 2020 2020  d(ii).          
-00028dd0: 2020 2020 2020 2320 6966 206e 6f74 2073        # if not s
-00028de0: 7472 696e 6720 696e 7075 7420 6461 7461  tring input data
-00028df0: 2074 6865 6e20 736b 6970 2068 6572 650a   then skip here.
-00028e00: 2020 2020 2020 2020 7265 7475 726e 204a          return J
-00028e10: 6f69 6e28 7374 7269 6e67 5f61 2c73 796d  oin(string_a,sym
-00028e20: 626f 6c3d 2720 2729 2c6d 6973 7369 6e67  bol=' '),missing
-00028e30: 0a0a 2020 2020 6966 206e 6f74 2069 7369  ..    if not isi
-00028e40: 6e73 7461 6e63 6528 7374 7269 6e67 2c73  nstance(string,s
-00028e50: 7472 293a 2072 6574 7572 6e20 4661 6c73  tr): return Fals
-00028e60: 652c 7374 7269 6e67 0a20 2020 2066 6661  e,string.    ffa
-00028e70: 6c6c 3d5b 7265 2e63 6f6d 7069 6c65 2827  ll=[re.compile('
-00028e80: 5c7b 285c 642a 295c 7d27 292e 6669 6e64  \{(\d*)\}').find
-00028e90: 616c 6c28 7374 7269 6e67 292c 7265 2e63  all(string),re.c
-00028ea0: 6f6d 7069 6c65 2827 5c7b 285c 772a 295c  ompile('\{(\w*)\
-00028eb0: 7d27 292e 6669 6e64 616c 6c28 7374 7269  }').findall(stri
-00028ec0: 6e67 292c 7265 2e63 6f6d 7069 6c65 2827  ng),re.compile('
-00028ed0: 5c25 5c28 285c 772a 295c 2973 2729 2e66  \%\((\w*)\)s').f
-00028ee0: 696e 6461 6c6c 2873 7472 696e 6729 2c72  indall(string),r
-00028ef0: 652e 636f 6d70 696c 6528 275c 7b5c 7d27  e.compile('\{\}'
-00028f00: 292e 6669 6e64 616c 6c28 7374 7269 6e67  ).findall(string
-00028f10: 292c 7265 2e63 6f6d 7069 6c65 2827 5c25  ),re.compile('\%
-00028f20: 5b2d 302d 392e 5d2a 5b73 7c63 7c64 7c66  [-0-9.]*[s|c|d|f
-00028f30: 5d27 292e 6669 6e64 616c 6c28 7374 7269  ]').findall(stri
-00028f40: 6e67 295d 0a20 2020 2069 3d30 0a20 2020  ng)].    i=0.   
-00028f50: 2061 706f 7374 726f 7068 653d 6f70 7473   apostrophe=opts
-00028f60: 2e70 6f70 2827 6170 6f73 7472 6f70 6865  .pop('apostrophe
-00028f70: 2729 2069 6620 2761 706f 7374 726f 7068  ') if 'apostroph
-00028f80: 6527 2069 6e20 6f70 7473 2065 6c73 6520  e' in opts else 
-00028f90: 4e6f 6e65 0a20 2020 2065 7272 6f72 3d6f  None.    error=o
-00028fa0: 7074 732e 706f 7028 275f 6572 725f 2729  pts.pop('_err_')
-00028fb0: 2069 6620 275f 6572 725f 2720 696e 206f   if '_err_' in o
-00028fc0: 7074 7320 656c 7365 2046 616c 7365 0a20  pts else False. 
-00028fd0: 2020 2066 6f72 2074 6d70 2069 6e20 6666     for tmp in ff
-00028fe0: 616c 6c3a 0a20 2020 2020 2020 2069 6620  all:.        if 
-00028ff0: 6920 696e 205b 302c 315d 3a20 746d 703d  i in [0,1]: tmp=
-00029000: 5b20 6a20 2066 6f72 206a 2069 6e20 746d  [ j  for j in tm
-00029010: 7020 6966 206c 656e 286a 2920 5d0a 2020  p if len(j) ].  
-00029020: 2020 2020 2020 6966 2074 6d70 3a0a 2020        if tmp:.  
-00029030: 2020 2020 2020 2020 2020 6966 2069 203d            if i =
-00029040: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
-00029050: 2020 2020 206d 783d 300a 2020 2020 2020       mx=0.      
-00029060: 2020 2020 2020 2020 2020 666f 7220 7a20            for z 
-00029070: 696e 2074 6d70 3a0a 2020 2020 2020 2020  in tmp:.        
-00029080: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00029090: 6e74 287a 2920 3e20 6d78 3a20 6d78 3d69  nt(z) > mx: mx=i
-000290a0: 6e74 287a 290a 2020 2020 2020 2020 2020  nt(z).          
-000290b0: 2020 2020 2020 6966 206c 656e 2869 6e70        if len(inp
-000290c0: 7329 203e 206d 783a 0a20 2020 2020 2020  s) > mx:.       
-000290d0: 2020 2020 2020 2020 2020 2020 2073 7472               str
-000290e0: 696e 672c 6d3d 5f72 6570 6c61 6365 5f66  ing,m=_replace_f
-000290f0: 6f72 6d61 745f 746f 5f76 616c 7565 5f28  ormat_to_value_(
-00029100: 692c 746d 702c 7374 7269 6e67 2c69 6e70  i,tmp,string,inp
-00029110: 732c 6170 6f73 7472 6f70 6865 290a 2020  s,apostrophe).  
-00029120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029130: 2020 6966 2065 7272 6f72 2061 6e64 206d    if error and m
-00029140: 203a 2072 6574 7572 6e20 4661 6c73 652c   : return False,
-00029150: 276d 6973 7369 6e67 2070 6172 616d 6574  'missing paramet
-00029160: 6572 7320 7b7d 272e 666f 726d 6174 286d  ers {}'.format(m
-00029170: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00029180: 2020 656c 6966 206c 656e 286f 7074 7329    elif len(opts)
-00029190: 203e 206d 783a 0a20 2020 2020 2020 2020   > mx:.         
-000291a0: 2020 2020 2020 2020 2020 2073 7472 696e             strin
-000291b0: 672c 6d3d 5f72 6570 6c61 6365 5f66 6f72  g,m=_replace_for
-000291c0: 6d61 745f 746f 5f76 616c 7565 5f28 692c  mat_to_value_(i,
-000291d0: 746d 702c 7374 7269 6e67 2c6c 6973 7428  tmp,string,list(
-000291e0: 6f70 7473 2e76 616c 7565 7328 2929 2c61  opts.values()),a
-000291f0: 706f 7374 726f 7068 6529 0a20 2020 2020  postrophe).     
-00029200: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00029210: 6620 6572 726f 7220 616e 6420 6d20 3a20  f error and m : 
-00029220: 7265 7475 726e 2046 616c 7365 2c27 6d69  return False,'mi
-00029230: 7373 696e 6720 7061 7261 6d65 7465 7273  ssing parameters
-00029240: 207b 7d27 2e66 6f72 6d61 7428 6d29 0a20   {}'.format(m). 
-00029250: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00029260: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00029270: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00029280: 4661 6c73 652c 2222 224e 6565 6420 6d6f  False,"""Need mo
-00029290: 7265 2069 6e70 7574 2028 7475 706c 652f  re input (tuple/
-000292a0: 6c69 7374 2920 7061 7261 6d65 7465 7273  list) parameters
-000292b0: 2872 6571 7569 7265 207b 7d29 2222 222e  (require {})""".
-000292c0: 666f 726d 6174 286d 7829 0a20 2020 2020  format(mx).     
-000292d0: 2020 2020 2020 2065 6c69 6620 303c 2069         elif 0< i
-000292e0: 203c 2032 3a0a 2020 2020 2020 2020 2020   < 2:.          
-000292f0: 2020 2020 2020 7374 7269 6e67 2c6d 3d5f        string,m=_
-00029300: 7265 706c 6163 655f 666f 726d 6174 5f74  replace_format_t
-00029310: 6f5f 7661 6c75 655f 2869 2c74 6d70 2c73  o_value_(i,tmp,s
-00029320: 7472 696e 672c 6f70 7473 2c61 706f 7374  tring,opts,apost
-00029330: 726f 7068 6529 0a20 2020 2020 2020 2020  rophe).         
-00029340: 2020 2020 2020 2069 6620 6572 726f 7220         if error 
-00029350: 616e 6420 6d20 3a20 7265 7475 726e 2046  and m : return F
-00029360: 616c 7365 2c27 6d69 7373 696e 6720 7061  alse,'missing pa
-00029370: 7261 6d65 7465 7273 207b 7d27 2e66 6f72  rameters {}'.for
-00029380: 6d61 7428 6d29 0a20 2020 2020 2020 2020  mat(m).         
-00029390: 2020 2065 6c69 6620 6920 3d3d 2032 3a0a     elif i == 2:.
-000293a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000293b0: 666f 7220 7474 2069 6e20 696e 7073 3a0a  for tt in inps:.
-000293c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000293d0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000293e0: 6528 7474 2c64 6963 7429 3a0a 2020 2020  e(tt,dict):.    
-000293f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029400: 2020 2020 6f70 7473 2e75 7064 6174 6528      opts.update(
-00029410: 7474 290a 2020 2020 2020 2020 2020 2020  tt).            
-00029420: 2020 2020 7374 7269 6e67 2c6d 3d5f 7265      string,m=_re
-00029430: 706c 6163 655f 666f 726d 6174 5f74 6f5f  place_format_to_
-00029440: 7661 6c75 655f 2869 2c74 6d70 2c73 7472  value_(i,tmp,str
-00029450: 696e 672c 6f70 7473 2c61 706f 7374 726f  ing,opts,apostro
-00029460: 7068 6529 0a20 2020 2020 2020 2020 2020  phe).           
-00029470: 2020 2020 2069 6620 6572 726f 7220 616e       if error an
-00029480: 6420 6d20 3a20 7265 7475 726e 2046 616c  d m : return Fal
-00029490: 7365 2c27 6d69 7373 696e 6720 7061 7261  se,'missing para
-000294a0: 6d65 7465 7273 207b 7d27 2e66 6f72 6d61  meters {}'.forma
-000294b0: 7428 6d29 0a20 2020 2020 2020 2020 2020  t(m).           
-000294c0: 2065 6c69 6620 6920 3d3d 2033 3a0a 2020   elif i == 3:.  
-000294d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000294e0: 2069 6e70 733a 0a20 2020 2020 2020 2020   inps:.         
-000294f0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-00029500: 6e28 746d 7029 203d 3d20 6c65 6e28 696e  n(tmp) == len(in
-00029510: 7073 293a 0a20 2020 2020 2020 2020 2020  ps):.           
-00029520: 2020 2020 2020 2020 2020 2020 2073 7472               str
-00029530: 696e 673d 7374 7269 6e67 2e66 6f72 6d61  ing=string.forma
-00029540: 7428 2a69 6e70 7329 0a20 2020 2020 2020  t(*inps).       
-00029550: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00029560: 6620 6572 726f 723a 0a20 2020 2020 2020  f error:.       
-00029570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029580: 2072 6574 7572 6e20 4661 6c73 652c 2222   return False,""
-00029590: 224d 6973 6d61 7463 6865 6420 696e 7075  "Mismatched inpu
-000295a0: 7420 2874 7570 6c65 2f6c 6973 7429 206e  t (tuple/list) n
-000295b0: 756d 6265 7220 2872 6571 7569 7265 3a7b  umber (require:{
-000295c0: 7d2c 2069 6e70 7574 3a7b 7d29 2222 222e  }, input:{})""".
-000295d0: 666f 726d 6174 286c 656e 2874 6d70 292c  format(len(tmp),
-000295e0: 6c65 6e28 696e 7073 2929 0a20 2020 2020  len(inps)).     
-000295f0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00029600: 6f70 7473 3a0a 2020 2020 2020 2020 2020  opts:.          
-00029610: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-00029620: 2874 6d70 2920 3d3d 206c 656e 286f 7074  (tmp) == len(opt
-00029630: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
-00029640: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00029650: 6e67 3d73 7472 696e 672e 666f 726d 6174  ng=string.format
-00029660: 282a 6f70 7473 2e76 616c 7565 7328 2929  (*opts.values())
-00029670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00029680: 2020 2020 2065 6c69 6620 6572 726f 723a       elif error:
-00029690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000296a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000296b0: 4661 6c73 652c 2222 224d 6973 6d61 7463  False,"""Mismatc
-000296c0: 6865 6420 696e 7075 7420 2874 7570 6c65  hed input (tuple
-000296d0: 2f6c 6973 7429 206e 756d 6265 7220 2872  /list) number (r
-000296e0: 6571 7569 7265 3a7b 7d2c 2069 6e70 7574  equire:{}, input
-000296f0: 3a7b 7d29 2222 222e 666f 726d 6174 286c  :{})""".format(l
-00029700: 656e 2874 6d70 292c 6c65 6e28 6f70 7473  en(tmp),len(opts
-00029710: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
-00029720: 6c69 6620 6920 3e3d 2034 3a0a 2020 2020  lif i >= 4:.    
-00029730: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00029740: 6e70 733a 0a20 2020 2020 2020 2020 2020  nps:.           
-00029750: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-00029760: 746d 7029 203d 3d20 6c65 6e28 696e 7073  tmp) == len(inps
-00029770: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00029780: 2020 2020 2020 2020 2020 2073 7472 696e             strin
-00029790: 673d 7374 7269 6e67 2528 696e 7073 290a  g=string%(inps).
-000297a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000297b0: 2020 2020 656c 6966 2065 7272 6f72 3a0a      elif error:.
-000297c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000297d0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-000297e0: 616c 7365 2c22 2222 4d69 736d 6174 6368  alse,"""Mismatch
-000297f0: 6564 2069 6e70 7574 2028 7475 706c 652f  ed input (tuple/
-00029800: 6c69 7374 2920 6e75 6d62 6572 2028 7265  list) number (re
-00029810: 7175 6972 653a 7b7d 2c20 696e 7075 743a  quire:{}, input:
-00029820: 7b7d 2922 2222 2e66 6f72 6d61 7428 6c65  {})""".format(le
-00029830: 6e28 746d 7029 2c6c 656e 2869 6e70 7329  n(tmp),len(inps)
-00029840: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00029850: 2020 656c 6966 206f 7074 733a 0a20 2020    elif opts:.   
-00029860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029870: 2069 6620 6c65 6e28 746d 7029 203d 3d20   if len(tmp) == 
-00029880: 6c65 6e28 6f70 7473 293a 0a20 2020 2020  len(opts):.     
-00029890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000298a0: 2020 2073 7472 696e 673d 7374 7269 6e67     string=string
-000298b0: 2528 6f70 7473 2e76 616c 7565 7328 2929  %(opts.values())
-000298c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000298d0: 2020 2020 2065 6c69 6620 6572 726f 723a       elif error:
-000298e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000298f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00029900: 4661 6c73 652c 2222 224d 6973 6d61 7463  False,"""Mismatc
-00029910: 6865 6420 696e 7075 7420 2874 7570 6c65  hed input (tuple
-00029920: 2f6c 6973 7429 206e 756d 6265 7220 2872  /list) number (r
-00029930: 6571 7569 7265 3a7b 7d2c 2069 6e70 7574  equire:{}, input
-00029940: 3a7b 7d29 2222 222e 666f 726d 6174 286c  :{})""".format(l
-00029950: 656e 2874 6d70 292c 6c65 6e28 6f70 7473  en(tmp),len(opts
-00029960: 2929 0a20 2020 2020 2020 2069 2b3d 310a  )).        i+=1.
-00029970: 2020 2020 6966 2069 6e70 733a 0a20 2020      if inps:.   
-00029980: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00029990: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-000299a0: 652c 7374 7269 6e67 2e66 6f72 6d61 7428  e,string.format(
-000299b0: 2a69 6e70 7329 0a20 2020 2020 2020 2065  *inps).        e
-000299c0: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-000299d0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-000299e0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-000299f0: 7275 652c 7374 7269 6e67 2528 696e 7073  rue,string%(inps
-00029a00: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
-00029a10: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-00029a20: 2020 2020 2020 7061 7373 0a20 2020 2069        pass.    i
-00029a30: 6620 6f70 7473 3a0a 2020 2020 2020 2020  f opts:.        
-00029a40: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-00029a50: 2072 6574 7572 6e20 5472 7565 2c73 7472   return True,str
-00029a60: 696e 672e 666f 726d 6174 282a 2a6f 7074  ing.format(**opt
-00029a70: 7329 0a20 2020 2020 2020 2065 7863 6570  s).        excep
-00029a80: 743a 0a20 2020 2020 2020 2020 2020 2074  t:.            t
-00029a90: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00029aa0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
-00029ab0: 7374 7269 6e67 2528 6f70 7473 290a 2020  string%(opts).  
-00029ac0: 2020 2020 2020 2020 2020 6578 6365 7074            except
-00029ad0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00029ae0: 2020 7061 7373 0a20 2020 2072 6574 7572    pass.    retur
-00029af0: 6e20 5472 7565 2c73 7472 696e 670a 0a64  n True,string..d
-00029b00: 6566 2053 6f72 7428 7372 632c 7265 7665  ef Sort(src,reve
-00029b10: 7273 653d 4661 6c73 652c 6675 6e63 3d4e  rse=False,func=N
-00029b20: 6f6e 652c 6f72 6465 723d 4e6f 6e65 2c66  one,order=None,f
-00029b30: 6965 6c64 3d4e 6f6e 652c 6261 7365 3d27  ield=None,base='
-00029b40: 6b65 7927 2c73 796d 3d4e 6f6e 6529 3a0a  key',sym=None):.
-00029b50: 2020 2020 2727 270a 2020 2020 536f 7274      '''.    Sort
-00029b60: 696e 6720 6461 7461 0a20 2020 2073 7570  ing data.    sup
-00029b70: 706f 7274 206c 6973 742c 7475 706c 652c  port list,tuple,
-00029b80: 6469 6374 2066 6f72 6d61 740a 2020 2020  dict format.    
-00029b90: 7265 7665 7273 6520 3a20 7265 7665 7273  reverse : revers
-00029ba0: 6520 736f 7274 0a20 2020 2066 756e 6320  e sort.    func 
-00029bb0: 2020 203a 2073 6f72 7469 6e67 206b 6579     : sorting key
-00029bc0: 2066 756e 6374 696f 6e20 2864 6566 6175   function (defau
-00029bd0: 6c74 204e 6f6e 6529 0a20 2020 206f 7264  lt None).    ord
-00029be0: 6572 2020 203a 2073 6f72 7469 6e67 206f  er   : sorting o
-00029bf0: 7264 6572 206d 6574 686f 640a 2020 2020  rder method.    
-00029c00: 2020 2020 4e6f 6e65 3a20 6465 6661 756c      None: defaul
-00029c10: 7420 7769 7468 2073 6f72 7428 2920 6675  t with sort() fu
-00029c20: 6e63 7469 6f6e 0a20 2020 2020 2020 2069  nction.        i
-00029c30: 6e74 203a 2073 6f72 7420 7769 7468 2069  nt : sort with i
-00029c40: 6e74 6567 6572 0a20 2020 2020 2020 2073  nteger.        s
-00029c50: 7472 203a 2073 6f72 7420 7769 7468 2061  tr : sort with a
-00029c60: 7363 6969 2063 6f64 650a 2020 2020 2020  scii code.      
-00029c70: 2020 6c65 6e20 3a20 736f 7274 2077 6974    len : sort wit
-00029c80: 6820 6461 7461 206c 656e 6774 680a 2020  h data length.  
-00029c90: 2020 6669 656c 6420 2020 0a20 2020 2020    field   .     
-00029ca0: 2020 204e 6f6e 6520 3a20 6465 6661 756c     None : defaul
-00029cb0: 740a 2020 2020 2020 2020 3c69 6e74 3e3a  t.        <int>:
-00029cc0: 2073 6f72 7420 7769 7468 206c 6973 7427   sort with list'
-00029cd0: 7320 696e 6465 7820 6e75 6d62 6572 0a20  s index number. 
-00029ce0: 2020 2062 6173 650a 2020 2020 2020 2020     base.        
-00029cf0: 6b65 7920 203a 2064 6566 6175 6c74 2c20  key  : default, 
-00029d00: 736f 7274 2077 6974 6820 6b65 7920 6f66  sort with key of
-00029d10: 2064 6963 7420 0a20 2020 2020 2020 2076   dict .        v
-00029d20: 616c 7565 3a20 536f 7274 2077 6974 6820  alue: Sort with 
-00029d30: 7661 6c75 6520 6f66 2064 6963 740a 2020  value of dict.  
-00029d40: 2020 7379 6d20 2020 2020 203a 204e 6f6e    sym      : Non
-00029d50: 6520 2864 6566 6175 6c74 290a 2020 2020  e (default).    
-00029d60: 2020 2020 3c73 796d 626f 6c3e 203a 2069      <symbol> : i
-00029d70: 6620 7372 6320 6973 2073 7472 696e 6720  f src is string 
-00029d80: 7468 656e 2073 706c 6974 2077 6974 6820  then split with 
-00029d90: 7468 6520 7379 6d0a 2020 2020 2727 270a  the sym.    '''.
-00029da0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00029db0: 6528 7372 632c 7374 7229 2061 6e64 206e  e(src,str) and n
-00029dc0: 6f74 2049 734e 6f6e 6528 7379 6d29 3a20  ot IsNone(sym): 
-00029dd0: 7372 633d 7372 632e 7370 6c69 7428 7379  src=src.split(sy
-00029de0: 6d29 0a20 2020 2069 6620 6973 696e 7374  m).    if isinst
-00029df0: 616e 6365 2873 7263 2c64 6963 7429 2061  ance(src,dict) a
-00029e00: 6e64 2062 6173 6520 696e 205b 2764 6174  nd base in ['dat
-00029e10: 6127 2c27 7661 6c75 6527 5d3a 0a20 2020  a','value']:.   
-00029e20: 2020 2020 2066 6965 6c64 3d31 0a20 2020       field=1.   
-00029e30: 2064 6566 205f 636c 656e 5f28 6529 3a0a   def _clen_(e):.
-00029e40: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-00029e50: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00029e60: 7374 616e 6365 2866 6965 6c64 2c69 6e74  stance(field,int
-00029e70: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00029e80: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00029e90: 2865 2c28 6c69 7374 2c74 7570 6c65 2929  (e,(list,tuple))
-00029ea0: 2061 6e64 206c 656e 2865 2920 3e20 6669   and len(e) > fi
-00029eb0: 656c 643a 0a20 2020 2020 2020 2020 2020  eld:.           
-00029ec0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00029ed0: 6c65 6e28 277b 7d27 2e66 6f72 6d61 7428  len('{}'.format(
-00029ee0: 5374 7228 655b 6669 656c 645d 2929 290a  Str(e[field]))).
-00029ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029f00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00029f10: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00029f20: 2039 3939 3939 3939 0a20 2020 2020 2020   9999999.       
-00029f30: 2020 2020 2072 6574 7572 6e20 6c65 6e28       return len(
-00029f40: 277b 7d27 2e66 6f72 6d61 7428 5374 7228  '{}'.format(Str(
-00029f50: 6529 2929 0a20 2020 2020 2020 2065 7863  e))).        exc
-00029f60: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-00029f70: 2072 6574 7572 6e20 650a 2020 2020 6465   return e.    de
-00029f80: 6620 5f63 696e 745f 2865 293a 0a20 2020  f _cint_(e):.   
-00029f90: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00029fa0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00029fb0: 6e63 6528 6669 656c 642c 696e 7429 3a0a  nce(field,int):.
-00029fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029fd0: 6966 2069 7369 6e73 7461 6e63 6528 652c  if isinstance(e,
-00029fe0: 286c 6973 742c 7475 706c 6529 2920 616e  (list,tuple)) an
-00029ff0: 6420 6c65 6e28 6529 203e 2066 6965 6c64  d len(e) > field
-0002a000: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002a010: 2020 2020 2020 7265 7475 726e 2069 6e74        return int
-0002a020: 2865 5b66 6965 6c64 5d29 0a20 2020 2020  (e[field]).     
-0002a030: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0002a040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002a050: 2020 2020 2072 6574 7572 6e20 3939 3939       return 9999
-0002a060: 3939 390a 2020 2020 2020 2020 2020 2020  999.            
-0002a070: 7265 7475 726e 2069 6e74 2865 290a 2020  return int(e).  
-0002a080: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
-0002a090: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0002a0a0: 2065 0a20 2020 2064 6566 205f 6373 7472   e.    def _cstr
-0002a0b0: 5f28 6529 3a0a 2020 2020 2020 2020 6966  _(e):.        if
-0002a0c0: 2069 7369 6e73 7461 6e63 6528 6669 656c   isinstance(fiel
-0002a0d0: 642c 696e 7429 3a0a 2020 2020 2020 2020  d,int):.        
-0002a0e0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0002a0f0: 6528 652c 286c 6973 742c 7475 706c 6529  e(e,(list,tuple)
-0002a100: 2920 616e 6420 6c65 6e28 6529 203e 2066  ) and len(e) > f
-0002a110: 6965 6c64 3a0a 2020 2020 2020 2020 2020  ield:.          
-0002a120: 2020 2020 2020 7265 7475 726e 2027 2727        return '''
-0002a130: 7b7d 2727 272e 666f 726d 6174 2865 5b66  {}'''.format(e[f
-0002a140: 6965 6c64 5d29 0a20 2020 2020 2020 2020  ield]).         
-0002a150: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002a160: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0002a170: 277a 7a7a 7a7a 7a7a 7a7a 270a 2020 2020  'zzzzzzzzz'.    
-0002a180: 2020 2020 7265 7475 726e 2027 2727 7b7d      return '''{}
-0002a190: 2727 272e 666f 726d 6174 2865 290a 2020  '''.format(e).  
-0002a1a0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0002a1b0: 7372 632c 286c 6973 742c 7475 706c 6529  src,(list,tuple)
-0002a1c0: 293a 0a20 2020 2020 2020 2073 7263 3d6c  ):.        src=l
-0002a1d0: 6973 7428 7372 6329 0a20 2020 2020 2020  ist(src).       
-0002a1e0: 2069 6620 6f72 6465 7220 696e 205b 696e   if order in [in
-0002a1f0: 742c 2769 6e74 272c 2764 6967 6974 272c  t,'int','digit',
-0002a200: 276e 756d 6265 7227 5d3a 0a20 2020 2020  'number']:.     
-0002a210: 2020 2020 2020 2073 7263 2e73 6f72 7428         src.sort(
-0002a220: 7265 7665 7273 653d 7265 7665 7273 652c  reverse=reverse,
-0002a230: 6b65 793d 5f63 696e 745f 290a 2020 2020  key=_cint_).    
-0002a240: 2020 2020 656c 6966 206f 7264 6572 2069      elif order i
-0002a250: 6e20 5b27 6c65 6e27 2c27 6c65 6e67 7468  n ['len','length
-0002a260: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-0002a270: 7372 632e 736f 7274 2872 6576 6572 7365  src.sort(reverse
-0002a280: 3d72 6576 6572 7365 2c6b 6579 3d5f 636c  =reverse,key=_cl
-0002a290: 656e 5f29 0a20 2020 2020 2020 2065 6c69  en_).        eli
-0002a2a0: 6620 6f72 6465 7220 696e 205b 7374 722c  f order in [str,
-0002a2b0: 2773 7472 275d 3a0a 2020 2020 2020 2020  'str']:.        
-0002a2c0: 2020 2020 7372 632e 736f 7274 2872 6576      src.sort(rev
-0002a2d0: 6572 7365 3d72 6576 6572 7365 2c6b 6579  erse=reverse,key
-0002a2e0: 3d5f 6373 7472 5f29 0a20 2020 2020 2020  =_cstr_).       
-0002a2f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0002a300: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0002a310: 2866 6965 6c64 2c69 6e74 293a 0a20 2020  (field,int):.   
-0002a320: 2020 2020 2020 2020 2020 2020 2073 7263               src
-0002a330: 2e73 6f72 7428 7265 7665 7273 653d 7265  .sort(reverse=re
-0002a340: 7665 7273 652c 6b65 793d 5f63 696e 745f  verse,key=_cint_
-0002a350: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0002a360: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002a370: 2020 2020 7372 632e 736f 7274 2872 6576      src.sort(rev
-0002a380: 6572 7365 3d72 6576 6572 7365 2c6b 6579  erse=reverse,key
-0002a390: 3d66 756e 6329 0a20 2020 2020 2020 2072  =func).        r
-0002a3a0: 6574 7572 6e20 7372 630a 2020 2020 656c  eturn src.    el
-0002a3b0: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
-0002a3c0: 632c 6469 6374 293a 0a20 2020 2020 2020  c,dict):.       
-0002a3d0: 206c 7374 3d6c 6973 7428 7372 632e 6974   lst=list(src.it
-0002a3e0: 656d 7328 2929 0a20 2020 2020 2020 2069  ems()).        i
-0002a3f0: 6620 6261 7365 203d 3d20 276b 6579 273a  f base == 'key':
-0002a400: 0a20 2020 2020 2020 2020 2020 2066 6965  .            fie
-0002a410: 6c64 3d30 0a20 2020 2020 2020 2020 2020  ld=0.           
-0002a420: 2069 6620 6f72 6465 7220 696e 205b 696e   if order in [in
-0002a430: 742c 2769 6e74 272c 2764 6967 6974 272c  t,'int','digit',
-0002a440: 276e 756d 6265 7227 5d3a 0a20 2020 2020  'number']:.     
-0002a450: 2020 2020 2020 2020 2020 206c 7374 2e73             lst.s
-0002a460: 6f72 7428 7265 7665 7273 653d 7265 7665  ort(reverse=reve
-0002a470: 7273 652c 6b65 793d 5f63 696e 745f 290a  rse,key=_cint_).
-0002a480: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0002a490: 206f 7264 6572 2069 6e20 5b27 6c65 6e27   order in ['len'
-0002a4a0: 2c27 6c65 6e67 7468 275d 3a0a 2020 2020  ,'length']:.    
-0002a4b0: 2020 2020 2020 2020 2020 2020 6c73 742e              lst.
-0002a4c0: 736f 7274 2872 6576 6572 7365 3d72 6576  sort(reverse=rev
-0002a4d0: 6572 7365 2c6b 6579 3d5f 636c 656e 5f29  erse,key=_clen_)
-0002a4e0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0002a4f0: 6620 6f72 6465 7220 696e 205b 7374 722c  f order in [str,
-0002a500: 2773 7472 275d 3a0a 2020 2020 2020 2020  'str']:.        
-0002a510: 2020 2020 2020 2020 6c73 742e 736f 7274          lst.sort
-0002a520: 2872 6576 6572 7365 3d72 6576 6572 7365  (reverse=reverse
-0002a530: 2c6b 6579 3d5f 6373 7472 5f29 0a20 2020  ,key=_cstr_).   
-0002a540: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0002a550: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0002a560: 7374 2e73 6f72 7428 7265 7665 7273 653d  st.sort(reverse=
-0002a570: 7265 7665 7273 652c 6675 6e63 3d66 756e  reverse,func=fun
-0002a580: 6329 0a20 2020 2020 2020 2065 6c73 653a  c).        else:
-0002a590: 2023 2076 616c 7565 202f 2064 6174 6120   # value / data 
-0002a5a0: 6361 7365 0a20 2020 2020 2020 2020 2020  case.           
-0002a5b0: 2066 6965 6c64 3d31 0a20 2020 2020 2020   field=1.       
-0002a5c0: 2020 2020 2069 6620 6f72 6465 7220 696e       if order in
-0002a5d0: 205b 696e 742c 2769 6e74 272c 2764 6967   [int,'int','dig
-0002a5e0: 6974 272c 276e 756d 6265 7227 5d3a 0a20  it','number']:. 
-0002a5f0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0002a600: 7374 2e73 6f72 7428 7265 7665 7273 653d  st.sort(reverse=
-0002a610: 7265 7665 7273 652c 6b65 793d 5f63 696e  reverse,key=_cin
-0002a620: 745f 290a 2020 2020 2020 2020 2020 2020  t_).            
-0002a630: 656c 6966 206f 7264 6572 2069 6e20 5b27  elif order in ['
-0002a640: 6c65 6e27 2c27 6c65 6e67 7468 275d 3a0a  len','length']:.
-0002a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002a660: 7265 7475 726e 206c 7374 2e73 6f72 7428  return lst.sort(
-0002a670: 7265 7665 7273 653d 7265 7665 7273 652c  reverse=reverse,
-0002a680: 6b65 793d 5f63 6c65 6e5f 290a 2020 2020  key=_clen_).    
-0002a690: 2020 2020 2020 2020 656c 6966 206f 7264          elif ord
-0002a6a0: 6572 2069 6e20 5b73 7472 2c27 7374 7227  er in [str,'str'
-0002a6b0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-0002a6c0: 2020 206c 7374 2e73 6f72 7428 7265 7665     lst.sort(reve
-0002a6d0: 7273 653d 7265 7665 7273 652c 6b65 793d  rse=reverse,key=
-0002a6e0: 5f63 7374 725f 290a 2020 2020 2020 2020  _cstr_).        
-0002a6f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002a700: 2020 2020 2020 2020 2020 6c73 742e 736f            lst.so
-0002a710: 7274 2872 6576 6572 7365 3d72 6576 6572  rt(reverse=rever
-0002a720: 7365 2c66 756e 633d 6675 6e63 290a 2020  se,func=func).  
-0002a730: 2020 2020 2020 7265 7475 726e 206c 7374        return lst
-0002a740: 0a20 2020 2020 2020 2023 7265 7475 726e  .        #return
-0002a750: 205b 695b 305d 2066 6f72 2069 2069 6e20   [i[0] for i in 
-0002a760: 6c73 745d 0a0a 6465 6620 5665 7273 696f  lst]..def Versio
-0002a770: 6e53 6f72 7428 6461 7461 2c73 796d 3d27  nSort(data,sym='
-0002a780: 2c27 2c72 6576 3d46 616c 7365 293a 0a20  ,',rev=False):. 
-0002a790: 2020 2064 6566 2044 6963 744b 6579 7354     def DictKeysT
-0002a7a0: 6f4c 6973 7428 6461 7461 2c76 6572 3d27  oList(data,ver='
-0002a7b0: 272c 6f75 743d 5b5d 293a 0a20 2020 2020  ',out=[]):.     
-0002a7c0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0002a7d0: 2864 6174 612c 6469 6374 293a 0a20 2020  (data,dict):.   
-0002a7e0: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
-0002a7f0: 6e20 6461 7461 3a0a 2020 2020 2020 2020  n data:.        
-0002a800: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-0002a810: 7369 6e73 7461 6e63 6528 6461 7461 5b69  sinstance(data[i
-0002a820: 5d2c 6469 6374 2920 6f72 2064 6174 615b  ],dict) or data[
-0002a830: 695d 2069 6e20 5b27 272c 4e6f 6e65 2c7b  i] in ['',None,{
-0002a840: 7d5d 3a0a 2020 2020 2020 2020 2020 2020  }]:.            
-0002a850: 2020 2020 2020 2020 236f 7574 2e61 7070          #out.app
-0002a860: 656e 6428 7665 722b 272e 7b7d 272e 666f  end(ver+'.{}'.fo
-0002a870: 726d 6174 2869 2929 2023 5573 6520 6b65  rmat(i)) #Use ke
-0002a880: 7920 2863 6861 6e67 6564 2066 6f72 6d61  y (changed forma
-0002a890: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-0002a8a0: 2020 2020 2020 206f 7574 2e61 7070 656e         out.appen
-0002a8b0: 6428 6461 7461 5b69 5d29 2023 2055 7365  d(data[i]) # Use
-0002a8c0: 206f 7269 6769 6e61 6c20 4461 7461 0a20   original Data. 
-0002a8d0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0002a8e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002a8f0: 2020 2020 2020 2020 2044 6963 744b 6579           DictKey
-0002a900: 7354 6f4c 6973 7428 6461 7461 5b69 5d2c  sToList(data[i],
-0002a910: 7665 722b 272e 7b7d 272e 666f 726d 6174  ver+'.{}'.format
-0002a920: 2869 2920 6966 2076 6572 2065 6c73 6520  (i) if ver else 
-0002a930: 277b 7d27 2e66 6f72 6d61 7428 6929 2c6f  '{}'.format(i),o
-0002a940: 7574 3d6f 7574 290a 2020 2020 2020 2020  ut=out).        
-0002a950: 7265 7475 726e 2076 6572 0a20 2020 2069  return ver.    i
-0002a960: 6620 6973 696e 7374 616e 6365 2864 6174  f isinstance(dat
-0002a970: 612c 7374 7229 3a20 6461 7461 3d64 6174  a,str): data=dat
-0002a980: 612e 7370 6c69 7428 7379 6d29 0a20 2020  a.split(sym).   
-0002a990: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-0002a9a0: 6365 2864 6174 612c 286c 6973 742c 7475  ce(data,(list,tu
-0002a9b0: 706c 6529 293a 2072 6574 7572 6e20 4661  ple)): return Fa
-0002a9c0: 6c73 650a 2020 2020 6461 7461 3d6c 6973  lse.    data=lis
-0002a9d0: 7428 6461 7461 290a 2020 2020 6966 206c  t(data).    if l
-0002a9e0: 656e 2864 6174 6129 203c 2032 3a20 7265  en(data) < 2: re
-0002a9f0: 7475 726e 2064 6174 610a 2020 2020 736f  turn data.    so
-0002aa00: 7274 5f64 6174 613d 7b7d 0a20 2020 206f  rt_data={}.    o
-0002aa10: 7574 3d5b 5d0a 2020 2020 2363 6f6e 7665  ut=[].    #conve
-0002aa20: 7274 206c 6973 7420 746f 2064 6963 7420  rt list to dict 
-0002aa30: 666f 726d 6174 0a20 2020 2066 6f72 2069  format.    for i
-0002aa40: 2069 6e20 6461 7461 3a0a 2020 2020 2020   in data:.      
-0002aa50: 2020 6966 206e 6f74 2069 3a20 636f 6e74    if not i: cont
-0002aa60: 696e 7565 0a20 2020 2020 2020 2074 743d  inue.        tt=
-0002aa70: 736f 7274 5f64 6174 610a 2020 2020 2020  sort_data.      
-0002aa80: 2020 6a5f 613d 5370 6c69 7428 692c 272e    j_a=Split(i,'.
-0002aa90: 7c2d 7c3a 7c5f 2729 0a20 2020 2020 2020  |-|:|_').       
-0002aaa0: 206a 5f6d 3d6c 656e 286a 5f61 292d 310a   j_m=len(j_a)-1.
-0002aab0: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
-0002aac0: 2072 616e 6765 2830 2c6a 5f6d 2b31 293a   range(0,j_m+1):
-0002aad0: 0a20 2020 2020 2020 2020 2020 206a 5f61  .            j_a
-0002aae0: 5b6a 5d3d 496e 7428 6a5f 615b 6a5d 290a  [j]=Int(j_a[j]).
-0002aaf0: 2020 2020 2020 2020 2020 2020 6966 206a              if j
-0002ab00: 203d 3d20 6a5f 6d3a 0a20 2020 2020 2020   == j_m:.       
-0002ab10: 2020 2020 2020 2020 2074 745b 6a5f 615b           tt[j_a[
-0002ab20: 6a5d 5d3d 690a 2020 2020 2020 2020 2020  j]]=i.          
-0002ab30: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0002ab40: 2020 2020 2020 2020 6966 206a 5f61 5b6a          if j_a[j
-0002ab50: 5d20 6e6f 7420 696e 2074 743a 2074 745b  ] not in tt: tt[
-0002ab60: 6a5f 615b 6a5d 5d3d 7b7d 0a20 2020 2020  j_a[j]]={}.     
-0002ab70: 2020 2020 2020 2020 2020 2074 743d 7474             tt=tt
-0002ab80: 5b6a 5f61 5b6a 5d5d 0a0a 2020 2020 2364  [j_a[j]]..    #d
-0002ab90: 6963 7420 6461 7461 2074 6f20 6175 746f  ict data to auto
-0002aba0: 2073 6f72 7469 6e67 2028 6c69 6b65 2061   sorting (like a
-0002abb0: 7320 7079 7468 6f6e 322e 7820 7374 796c  s python2.x styl
-0002abc0: 6520 736f 7274 696e 6729 0a20 2020 206e  e sorting).    n
-0002abd0: 6577 5f64 6174 615f 7374 723d 7070 7269  ew_data_str=ppri
-0002abe0: 6e74 2e70 666f 726d 6174 2873 6f72 745f  nt.pformat(sort_
-0002abf0: 6461 7461 290a 2020 2020 6e65 775f 6461  data).    new_da
-0002ac00: 7461 3d61 7374 2e6c 6974 6572 616c 5f65  ta=ast.literal_e
-0002ac10: 7661 6c28 6e65 775f 6461 7461 5f73 7472  val(new_data_str
-0002ac20: 290a 2020 2020 2347 6574 2073 6f72 7465  ).    #Get sorte
-0002ac30: 6420 6461 7461 2066 726f 6d20 6469 6374  d data from dict
-0002ac40: 2073 6f72 7469 6e67 0a20 2020 2044 6963   sorting.    Dic
-0002ac50: 744b 6579 7354 6f4c 6973 7428 6e65 775f  tKeysToList(new_
-0002ac60: 6461 7461 2c6f 7574 3d6f 7574 290a 2020  data,out=out).  
-0002ac70: 2020 6966 2072 6576 3a20 6f75 742e 7265    if rev: out.re
-0002ac80: 7665 7273 6528 2920 2372 6576 6572 7365  verse() #reverse
-0002ac90: 2064 6174 610a 2020 2020 7265 7475 726e   data.    return
-0002aca0: 206f 7574 0a0a 6465 6620 4d61 6356 3428   out..def MacV4(
-0002acb0: 7372 632c 2a2a 6f70 7473 293a 0a20 2020  src,**opts):.   
-0002acc0: 2027 2727 0a20 2020 2043 6865 636b 204d   '''.    Check M
-0002acd0: 6163 2061 6464 7265 7373 2066 6f72 6d61  ac address forma
-0002ace0: 7420 616e 6420 636f 6e76 6572 740a 2020  t and convert.  
-0002acf0: 2020 4865 7820 746f 2049 6e74 0a20 2020    Hex to Int.   
-0002ad00: 2048 6578 2074 6f20 4d61 6320 7374 7269   Hex to Mac stri
-0002ad10: 6e67 0a20 2020 204d 6163 2073 7472 696e  ng.    Mac strin
-0002ad20: 6720 746f 2049 6e74 0a20 2020 2073 796d  g to Int.    sym
-0002ad30: 626f 6c20 3a20 6465 6661 756c 7420 273a  bol : default ':
-0002ad40: 2720 6d61 6320 6164 6472 6573 7320 7370  ' mac address sp
-0002ad50: 6c69 7465 7220 7379 6d62 6f6c 0a20 2020  liter symbol.   
-0002ad60: 206f 7574 203a 0a20 2020 2020 2073 7472   out :.      str
-0002ad70: 203a 2064 6566 6175 6c74 203a 2058 583a   : default : XX:
-0002ad80: 5858 3a58 583a 5858 3a58 5820 666f 726d  XX:XX:XX:XX form
-0002ad90: 6174 0a20 2020 2020 2069 6e74 203a 2069  at.      int : i
-0002ada0: 6e74 6567 6572 2066 6f72 6d61 740a 2020  nteger format.  
-0002adb0: 2020 6465 6661 756c 7420 3a20 4661 6c73    default : Fals
-0002adc0: 650a 2020 2020 6361 7365 203a 200a 2020  e.    case : .  
-0002add0: 2020 2020 7570 7065 7220 3a20 7570 7065      upper : uppe
-0002ade0: 7220 6361 7365 206f 7574 7075 740a 2020  r case output.  
-0002adf0: 2020 2020 6c6f 7765 7220 3a20 6c6f 7765      lower : lowe
-0002ae00: 7220 6361 7365 206f 7574 7075 740a 2020  r case output.  
-0002ae10: 2020 6966 6e61 6d65 203a 0a20 2020 2020    ifname :.     
-0002ae20: 2054 7275 6520 3a20 7372 6320 6973 204e   True : src is N
-0002ae30: 6574 776f 726b 2069 6e74 6572 6661 6365  etwork interface
-0002ae40: 204e 616d 650a 2020 2020 2727 270a 2020   Name.    '''.  
-0002ae50: 2020 7379 6d62 6f6c 3d6f 7074 732e 6765    symbol=opts.ge
-0002ae60: 7428 2773 796d 626f 6c27 2c6f 7074 732e  t('symbol',opts.
-0002ae70: 6765 7428 2773 796d 272c 273a 2729 290a  get('sym',':')).
-0002ae80: 2020 2020 6465 6661 756c 743d 6f70 7473      default=opts
-0002ae90: 2e67 6574 2827 6465 6661 756c 7427 2c46  .get('default',F
-0002aea0: 616c 7365 290a 2020 2020 6f75 743d 6f70  alse).    out=op
-0002aeb0: 7473 2e67 6574 2827 6f75 7427 2c27 7374  ts.get('out','st
-0002aec0: 7227 290a 2020 2020 6361 7365 3d6f 7074  r').    case=opt
-0002aed0: 732e 6765 7428 2763 6173 6527 2c27 6c6f  s.get('case','lo
-0002aee0: 7765 7227 290a 2020 2020 2320 4672 6f6d  wer').    # From
-0002aef0: 2069 666e 616d 6520 286e 6574 776f 726b   ifname (network
-0002af00: 2064 6576 6963 6520 6e61 6d65 290a 2020   device name).  
-0002af10: 2020 6966 6e61 6d65 3d6f 7074 732e 6765    ifname=opts.ge
-0002af20: 7428 2769 666e 616d 6527 2c46 616c 7365  t('ifname',False
-0002af30: 290a 2020 2020 6966 2069 666e 616d 6520  ).    if ifname 
-0002af40: 6973 2054 7275 6520 616e 6420 6973 696e  is True and isin
-0002af50: 7374 616e 6365 2873 7263 2c73 7472 293a  stance(src,str):
-0002af60: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
-0002af70: 2020 2020 2020 2020 2020 7320 3d20 736f            s = so
-0002af80: 636b 6574 2e73 6f63 6b65 7428 736f 636b  cket.socket(sock
-0002af90: 6574 2e41 465f 494e 4554 2c20 736f 636b  et.AF_INET, sock
-0002afa0: 6574 2e53 4f43 4b5f 4447 5241 4d29 0a20  et.SOCK_DGRAM). 
-0002afb0: 2020 2020 2020 2020 2020 2069 6620 5079             if Py
-0002afc0: 5665 7228 3329 3a0a 2020 2020 2020 2020  Ver(3):.        
-0002afd0: 2020 2020 2020 2020 696e 666f 203d 2066          info = f
-0002afe0: 636e 746c 2e69 6f63 746c 2873 2e66 696c  cntl.ioctl(s.fil
-0002aff0: 656e 6f28 292c 2030 7838 3932 372c 2020  eno(), 0x8927,  
-0002b000: 7374 7275 6374 2e70 6163 6b28 2732 3536  struct.pack('256
-0002b010: 7327 2c20 4279 7465 7328 7372 635b 3a31  s', Bytes(src[:1
-0002b020: 355d 2c65 6e63 6f64 653d 2775 7466 2d38  5],encode='utf-8
-0002b030: 2729 2929 0a20 2020 2020 2020 2020 2020  '))).           
-0002b040: 2020 2020 2072 6574 7572 6e20 273a 272e       return ':'.
-0002b050: 6a6f 696e 285b 2725 3032 7827 2025 2063  join(['%02x' % c
-0002b060: 6861 7220 666f 7220 6368 6172 2069 6e20  har for char in 
-0002b070: 696e 666f 5b31 383a 3234 5d5d 290a 2020  info[18:24]]).  
-0002b080: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0002b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b0a0: 696e 666f 203d 2066 636e 746c 2e69 6f63  info = fcntl.ioc
-0002b0b0: 746c 2873 2e66 696c 656e 6f28 292c 2030  tl(s.fileno(), 0
-0002b0c0: 7838 3932 372c 2020 7374 7275 6374 2e70  x8927,  struct.p
-0002b0d0: 6163 6b28 2732 3536 7327 2c20 7372 635b  ack('256s', src[
-0002b0e0: 3a31 355d 2929 0a20 2020 2020 2020 2020  :15])).         
-0002b0f0: 2020 2020 2020 2072 6574 7572 6e20 273a         return ':
-0002b100: 272e 6a6f 696e 285b 2725 3032 7827 2025  '.join(['%02x' %
-0002b110: 206f 7264 2863 6861 7229 2066 6f72 2063   ord(char) for c
-0002b120: 6861 7220 696e 2069 6e66 6f5b 3138 3a32  har in info[18:2
-0002b130: 345d 5d29 0a20 2020 2020 2020 2065 7863  4]]).        exc
-0002b140: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-0002b150: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-0002b160: 0a20 2020 2064 6566 2069 6e74 3273 7472  .    def int2str
-0002b170: 2873 7263 2c73 796d 293a 0a20 2020 2020  (src,sym):.     
-0002b180: 2020 2072 6574 7572 6e20 273a 272e 6a6f     return ':'.jo
-0002b190: 696e 285b 277b 7d7b 7d27 2e66 6f72 6d61  in(['{}{}'.forma
-0002b1a0: 7428 612c 2062 2920 666f 7220 612c 2062  t(a, b) for a, b
-0002b1b0: 2069 6e20 7a69 7028 2a5b 6974 6572 2827   in zip(*[iter('
-0002b1c0: 7b3a 3031 3278 7d27 2e66 6f72 6d61 7428  {:012x}'.format(
-0002b1d0: 7372 6329 295d 2a32 295d 290a 2020 2020  src))]*2)]).    
-0002b1e0: 6465 6620 7374 7232 696e 7428 7372 6329  def str2int(src)
-0002b1f0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0002b200: 2069 6e74 2873 7263 2e6c 6f77 6572 2829   int(src.lower()
-0002b210: 2e72 6570 6c61 6365 2827 2d27 2c27 2729  .replace('-','')
-0002b220: 2e72 6570 6c61 6365 2827 3a27 2c27 2729  .replace(':','')
-0002b230: 2c20 3136 290a 2020 2020 6966 2054 7970  , 16).    if Typ
-0002b240: 6528 7372 632c 2762 7974 6573 2729 3a20  e(src,'bytes'): 
-0002b250: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
-0002b260: 7372 6329 203d 3d20 363a 2023 2066 6f72  src) == 6: # for
-0002b270: 6d61 7420 6227 5c78 3030 5c78 6465 345c  mat b'\x00\xde4\
-0002b280: 7865 662e 5c78 6634 270a 2020 2020 2020  xef.\xf4'.      
-0002b290: 2020 2020 2020 7372 633d 636f 6465 6373        src=codecs
-0002b2a0: 2e65 6e63 6f64 6528 7372 632c 2768 6578  .encode(src,'hex
-0002b2b0: 2729 2020 2320 666f 726d 6174 2062 2730  ')  # format b'0
-0002b2c0: 3064 6533 3465 6632 6566 3427 0a20 2020  0de34ef2ef4'.   
-0002b2d0: 2020 2020 2073 7263 3d53 7472 2873 7263       src=Str(src
-0002b2e0: 290a 2020 2020 6966 2069 7369 6e73 7461  ).    if isinsta
-0002b2f0: 6e63 6528 7372 632c 7374 7229 3a0a 2020  nce(src,str):.  
-0002b300: 2020 2020 2020 7372 633d 7372 632e 7374        src=src.st
-0002b310: 7269 7028 290a 2020 2020 2020 2020 2320  rip().        # 
-0002b320: 6d61 6b65 2073 7572 6520 7468 6520 666f  make sure the fo
-0002b330: 726d 6174 0a20 2020 2020 2020 2069 6620  rmat.        if 
-0002b340: 3132 203c 3d20 6c65 6e28 7372 6329 203c  12 <= len(src) <
-0002b350: 3d20 3137 3a0a 2020 2020 2020 2020 2020  = 17:.          
-0002b360: 2020 666f 7220 6920 696e 205b 273a 272c    for i in [':',
-0002b370: 272d 275d 3a0a 2020 2020 2020 2020 2020  '-']:.          
-0002b380: 2020 2020 2020 7372 633d 7372 632e 7265        src=src.re
-0002b390: 706c 6163 6528 692c 2727 290a 2020 2020  place(i,'').    
-0002b3a0: 2020 2020 2020 2020 7372 633d 4a6f 696e          src=Join
-0002b3b0: 285b 7372 635b 693a 692b 325d 2066 6f72  ([src[i:i+2] for
-0002b3c0: 2069 2069 6e20 7261 6e67 6528 302c 3132   i in range(0,12
-0002b3d0: 2c32 295d 2c73 796d 626f 6c3d 273a 2729  ,2)],symbol=':')
-0002b3e0: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
-0002b3f0: 2074 6865 206e 6f72 6d61 6c20 6d61 6320   the normal mac 
-0002b400: 666f 726d 6174 0a20 2020 2020 2020 206f  format.        o
-0002b410: 6374 6574 7320 3d20 7372 632e 7370 6c69  ctets = src.spli
-0002b420: 7428 273a 2729 0a20 2020 2020 2020 2069  t(':').        i
-0002b430: 6620 6c65 6e28 6f63 7465 7473 2920 213d  f len(octets) !=
-0002b440: 2036 3a20 7265 7475 726e 2064 6566 6175   6: return defau
-0002b450: 6c74 0a20 2020 2020 2020 2066 6f72 2069  lt.        for i
-0002b460: 2069 6e20 6f63 7465 7473 3a0a 2020 2020   in octets:.    
-0002b470: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-0002b480: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0002b490: 656e 2869 2920 213d 2032 206f 7220 696e  en(i) != 2 or in
-0002b4a0: 7428 692c 2031 3629 203e 2032 3535 3a0a  t(i, 16) > 255:.
-0002b4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b4c0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-0002b4d0: 740a 2020 2020 2020 2020 2020 2020 6578  t.            ex
-0002b4e0: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-0002b4f0: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-0002b500: 756c 740a 2020 2020 2020 2020 6966 206f  ult.        if o
-0002b510: 7574 2069 6e20 5b69 6e74 2c27 696e 7427  ut in [int,'int'
-0002b520: 2c27 6e75 6d62 6572 275d 3a20 7265 7475  ,'number']: retu
-0002b530: 726e 2073 7472 3269 6e74 2873 7263 290a  rn str2int(src).
-0002b540: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-0002b550: 6c20 213d 2027 3a27 3a20 7372 633d 7372  l != ':': src=sr
-0002b560: 632e 7265 706c 6163 6528 273a 272c 7379  c.replace(':',sy
-0002b570: 6d62 6f6c 290a 2020 2020 2020 2020 6966  mbol).        if
-0002b580: 2063 6173 6520 3d3d 2027 7570 7065 7227   case == 'upper'
-0002b590: 3a20 7265 7475 726e 2073 7263 2e75 7070  : return src.upp
-0002b5a0: 6572 2829 0a20 2020 2020 2020 2072 6574  er().        ret
-0002b5b0: 7572 6e20 7372 632e 6c6f 7765 7228 290a  urn src.lower().
-0002b5c0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-0002b5d0: 6e63 6528 7372 632c 696e 7429 2061 6e64  nce(src,int) and
-0002b5e0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-0002b5f0: 7372 632c 626f 6f6c 293a 0a20 2020 2020  src,bool):.     
-0002b600: 2020 2069 6620 6f75 7420 696e 205b 696e     if out in [in
-0002b610: 742c 2769 6e74 272c 276e 756d 6265 7227  t,'int','number'
-0002b620: 5d3a 2072 6574 7572 6e20 7372 630a 2020  ]: return src.  
-0002b630: 2020 2020 2020 7372 633d 696e 7432 7374        src=int2st
-0002b640: 7228 7372 632c 7379 6d62 6f6c 290a 2020  r(src,symbol).  
-0002b650: 2020 2020 2020 6966 2063 6173 6520 3d3d        if case ==
-0002b660: 2027 7570 7065 7227 3a20 7265 7475 726e   'upper': return
-0002b670: 2073 7263 2e75 7070 6572 2829 0a20 2020   src.upper().   
-0002b680: 2020 2020 2072 6574 7572 6e20 7372 632e       return src.
-0002b690: 6c6f 7765 7228 290a 2020 2020 7265 7475  lower().    retu
-0002b6a0: 726e 2064 6566 6175 6c74 0a0a 6465 6620  rn default..def 
-0002b6b0: 4765 7449 666e 616d 6528 6d61 6329 3a0a  GetIfname(mac):.
-0002b6c0: 2020 2020 6e65 745f 6469 723d 272f 7379      net_dir='/sy
-0002b6d0: 732f 636c 6173 732f 6e65 7427 0a20 2020  s/class/net'.   
-0002b6e0: 2069 6620 6f73 2e70 6174 682e 6973 6469   if os.path.isdi
-0002b6f0: 7228 6e65 745f 6469 7229 3a0a 2020 2020  r(net_dir):.    
-0002b700: 2020 2020 6469 7270 6174 682c 6469 726e      dirpath,dirn
-0002b710: 616d 6573 2c66 696c 656e 616d 6573 203d  ames,filenames =
-0002b720: 206c 6973 7428 6f73 2e77 616c 6b28 6e65   list(os.walk(ne
-0002b730: 745f 6469 7229 295b 305d 0a20 2020 2020  t_dir))[0].     
-0002b740: 2020 2066 6f72 2064 6576 2069 6e20 6469     for dev in di
-0002b750: 726e 616d 6573 3a0a 2020 2020 2020 2020  rnames:.        
-0002b760: 2020 2020 666d 6163 3d63 6174 2827 7b7d      fmac=cat('{}
-0002b770: 2f7b 7d2f 6164 6472 6573 7327 2e66 6f72  /{}/address'.for
-0002b780: 6d61 7428 6469 7270 6174 682c 6465 7629  mat(dirpath,dev)
-0002b790: 2c6e 6f5f 656e 645f 6e65 776c 696e 653d  ,no_end_newline=
-0002b7a0: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
-0002b7b0: 2020 6966 2074 7970 6528 666d 6163 2920    if type(fmac) 
-0002b7c0: 6973 2073 7472 2061 6e64 2066 6d61 632e  is str and fmac.
-0002b7d0: 7374 7269 7028 292e 6c6f 7765 7228 2920  strip().lower() 
-0002b7e0: 3d3d 206d 6163 2e6c 6f77 6572 2829 3a0a  == mac.lower():.
-0002b7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b800: 7265 7475 726e 2064 6576 0a0a 6465 6620  return dev..def 
-0002b810: 5061 7468 282a 696e 702c 2a2a 6f70 7473  Path(*inp,**opts
-0002b820: 293a 0a20 2020 2027 2727 0a20 2020 2047  ):.    '''.    G
-0002b830: 6574 2050 6174 6820 6f66 2069 6e70 7574  et Path of input
-0002b840: 0a20 2020 2069 6e70 7574 7329 0a20 2020  .    inputs).   
-0002b850: 2020 2020 7e20 2020 2020 2020 3a20 686f      ~       : ho
-0002b860: 6d65 2070 6174 680a 2020 2020 2020 207e  me path.       ~
-0002b870: 3c75 7365 723e 203a 2075 7365 7227 7320  <user> : user's 
-0002b880: 686f 6d65 2070 6174 680a 2020 2020 2020  home path.      
-0002b890: 204e 6f6e 6520 2020 203a 2063 7572 7265   None    : curre
-0002b8a0: 6e74 2070 6174 680a 2020 2020 2020 205f  nt path.       _
-0002b8b0: 5f66 696c 655f 5f3a 2063 7572 7265 6e74  _file__: current
-0002b8c0: 2070 7974 686f 6e20 7363 7269 7074 2066   python script f
-0002b8d0: 696c 6520 7061 7468 0a20 2020 2020 2020  ile path.       
-0002b8e0: 5f5f 6d6f 645f 5f20 3a20 5468 6973 2070  __mod__ : This p
-0002b8f0: 7974 686f 6e20 7363 7269 7074 2066 696c  ython script fil
-0002b900: 6520 7061 7468 0a20 2020 2020 2020 6669  e path.       fi
-0002b910: 6c65 2020 2020 3a20 7468 6520 6669 6c65  le    : the file
-0002b920: 2773 2070 6174 680a 2020 2020 2020 205b  's path.       [
-0002b930: 6c69 7374 5d20 203a 2063 6f6e 7665 7274  list]  : convert
-0002b940: 2074 6f20 7061 7468 2072 756c 6520 0a20   to path rule . 
-0002b950: 2020 2020 2020 6f62 6a20 2020 2020 3a20        obj     : 
-0002b960: 7375 7070 6f72 7420 6675 6e63 7469 6f6e  support function
-0002b970: 2c20 6d6f 6475 6c65 2c20 636c 6173 732c  , module, class,
-0002b980: 2069 6e73 7461 6e63 650a 0a20 2020 2072   instance..    r
-0002b990: 656d 6f76 655f 646f 7420 3a20 0a20 2020  emove_dot : .   
-0002b9a0: 2020 2054 7275 6520 3a20 2864 6566 6175     True : (defau
-0002b9b0: 6c74 2920 2f61 2f62 2f2e 2f2e 2e2f 6320  lt) /a/b/./../c 
-0002b9c0: 3d3e 202f 612f 630a 2020 2020 2020 4661  => /a/c.      Fa
-0002b9d0: 6c73 653a 202f 612f 622f 2e2f 2e2e 2f63  lse: /a/b/./../c
-0002b9e0: 203d 3e20 2f61 2f62 2f2e 2f2e 2e2f 630a   => /a/b/./../c.
-0002b9f0: 2020 2020 6572 726f 7220 3a20 0a20 2020      error : .   
-0002ba00: 2020 2046 616c 7365 3a20 6465 6661 756c     False: defaul
-0002ba10: 742c 2069 6620 7061 7468 2069 7373 7565  t, if path issue
-0002ba20: 2074 6865 6e20 7265 7475 726e 2065 7272   then return err
-0002ba30: 6f72 0a20 2020 2020 2054 7275 6520 3a20  or.      True : 
-0002ba40: 6966 2070 6174 6820 6973 7375 6520 7468  if path issue th
-0002ba50: 656e 2069 676e 6f72 650a 2020 2020 6f75  en ignore.    ou
-0002ba60: 7420 3a0a 2020 2020 2073 7472 203a 2064  t :.     str : d
-0002ba70: 6566 6175 6c74 3a20 7265 7475 726e 2070  efault: return p
-0002ba80: 6174 6820 7374 7269 6e67 0a20 2020 2020  ath string.     
-0002ba90: 6c69 7374 3a20 7265 7475 726e 206c 6973  list: return lis
-0002baa0: 7420 666f 726d 6174 0a20 2020 2020 2020  t format.       
-0002bab0: 2d20 666f 7263 655f 726f 6f74 203a 2064  - force_root : d
-0002bac0: 6566 6175 6c74 2046 616c 7365 2c20 5472  efault False, Tr
-0002bad0: 7565 3a20 5b27 272c 2761 272c 2762 275d  ue: ['','a','b']
-0002bae0: 206f 7220 5b27 6127 2c27 6227 5d20 3d3e   or ['a','b'] =>
-0002baf0: 2027 2f61 2f62 270a 0a20 2020 2020 272f   '/a/b'..     '/
-0002bb00: 612f 622f 6327 203d 3e20 5b27 272c 2761  a/b/c' => ['','a
-0002bb10: 272c 2762 272c 2763 275d 2028 6f75 743d  ','b','c'] (out=
-0002bb20: 6c69 7374 290a 2020 2020 2027 612f 622f  list).     'a/b/
-0002bb30: 6327 2020 3d3e 205b 2761 272c 2762 272c  c'  => ['a','b',
-0002bb40: 2763 275d 2020 2020 286f 7574 3d6c 6973  'c']    (out=lis
-0002bb50: 7429 0a20 2020 2020 5b27 272c 2761 272c  t).     ['','a',
-0002bb60: 2762 272c 2763 275d 2020 3d3e 2027 2f61  'b','c']  => '/a
-0002bb70: 2f62 2f63 2728 6f75 743d 7374 7229 0a20  /b/c'(out=str). 
-0002bb80: 2020 2020 5b27 6127 2c27 6227 2c27 6327      ['a','b','c'
-0002bb90: 5d20 2020 2020 3d3e 2027 612f 622f 6327  ]     => 'a/b/c'
-0002bba0: 2028 6f75 743d 7374 7229 0a20 2020 2027   (out=str).    '
-0002bbb0: 2727 0a20 2020 2073 796d 3d6f 7074 732e  ''.    sym=opts.
-0002bbc0: 6765 7428 2773 796d 272c 272f 2729 0a20  get('sym','/'). 
-0002bbd0: 2020 206f 7574 3d6f 7074 732e 6765 7428     out=opts.get(
-0002bbe0: 276f 7574 272c 2773 7472 2729 0a20 2020  'out','str').   
-0002bbf0: 2065 7869 7374 3d6f 7074 732e 6765 7428   exist=opts.get(
-0002bc00: 2765 7869 7374 272c 4661 6c73 6529 0a20  'exist',False). 
-0002bc10: 2020 2064 6566 6175 6c74 3d6f 7074 732e     default=opts.
-0002bc20: 6765 7428 2764 6566 6175 6c74 272c 4661  get('default',Fa
-0002bc30: 6c73 6529 0a20 2020 2072 656d 6f76 655f  lse).    remove_
-0002bc40: 646f 743d 6f70 7473 2e67 6574 2827 7265  dot=opts.get('re
-0002bc50: 6d6f 7665 5f64 6f74 272c 5472 7565 290a  move_dot',True).
-0002bc60: 2020 2020 6572 723d 6f70 7473 2e67 6574      err=opts.get
-0002bc70: 2827 6572 7227 2c6f 7074 732e 6765 7428  ('err',opts.get(
-0002bc80: 2765 7272 6f72 272c 4661 6c73 6529 290a  'error',False)).
-0002bc90: 2020 2020 6465 6661 756c 743d 6f70 7473      default=opts
-0002bca0: 2e67 6574 2827 6465 6661 756c 7427 2c46  .get('default',F
-0002bcb0: 616c 7365 290a 2020 2020 6261 7365 5f64  alse).    base_d
-0002bcc0: 6972 3d4e 6f6e 650a 2020 2020 6966 206e  ir=None.    if n
-0002bcd0: 6f74 2069 6e70 3a0a 2020 2020 2020 2020  ot inp:.        
-0002bce0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-0002bcf0: 2062 6173 655f 6469 723d 6f73 2e65 6e76   base_dir=os.env
-0002bd00: 6972 6f6e 5b27 5057 4427 5d0a 2020 2020  iron['PWD'].    
-0002bd10: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
-0002bd20: 2020 2020 2020 2020 6261 7365 5f64 6972          base_dir
-0002bd30: 3d6f 732e 7061 7468 2e64 6972 6e61 6d65  =os.path.dirname
-0002bd40: 286f 732e 7061 7468 2e72 6561 6c70 6174  (os.path.realpat
-0002bd50: 6828 2869 6e73 7065 6374 2e73 7461 636b  h((inspect.stack
-0002bd60: 2829 5b2d 315d 295b 315d 2929 0a20 2020  ()[-1])[1])).   
-0002bd70: 2065 6c69 6620 696e 703a 0a20 2020 2020   elif inp:.     
-0002bd80: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0002bd90: 2869 6e70 5b30 5d2c 7374 7229 3a0a 2020  (inp[0],str):.  
-0002bda0: 2020 2020 2020 2020 2020 6966 206f 732e            if os.
-0002bdb0: 7061 7468 2e69 7366 696c 6528 696e 705b  path.isfile(inp[
-0002bdc0: 305d 293a 0a20 2020 2020 2020 2020 2020  0]):.           
-0002bdd0: 2020 2020 2062 6173 655f 6469 723d 6f73       base_dir=os
-0002bde0: 2e70 6174 682e 6469 726e 616d 6528 6f73  .path.dirname(os
-0002bdf0: 2e70 6174 682e 6162 7370 6174 6828 696e  .path.abspath(in
-0002be00: 705b 305d 2929 0a20 2020 2020 2020 2020  p[0])).         
-0002be10: 2020 2065 6c69 6620 696e 705b 305d 203d     elif inp[0] =
-0002be20: 3d20 275f 5f6d 6f64 5f5f 273a 0a20 2020  = '__mod__':.   
-0002be30: 2020 2020 2020 2020 2020 2020 2023 5468               #Th
-0002be40: 6973 206d 6f64 756c 6520 7061 7468 0a20  is module path. 
-0002be50: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0002be60: 6173 655f 6469 723d 6f73 2e70 6174 682e  ase_dir=os.path.
-0002be70: 6469 726e 616d 6528 6f73 2e70 6174 682e  dirname(os.path.
-0002be80: 6162 7370 6174 6828 5f5f 6669 6c65 5f5f  abspath(__file__
-0002be90: 2929 2023 204e 6f74 2069 6e70 7574 2074  )) # Not input t
-0002bea0: 6865 6e20 6765 7420 6375 7272 656e 7420  hen get current 
-0002beb0: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
-0002bec0: 2065 6c69 6620 696e 705b 305d 203d 3d20   elif inp[0] == 
-0002bed0: 275f 5f66 696c 655f 5f27 3a0a 2020 2020  '__file__':.    
-0002bee0: 2020 2020 2020 2020 2020 2020 2347 6574              #Get
-0002bef0: 2043 616c 6c65 7220 6675 6e63 7469 6f6e   Caller function
-0002bf00: 2773 2046 696c 656e 616d 650a 2020 2020  's Filename.    
-0002bf10: 2020 2020 2020 2020 2020 2020 6d79 5f66              my_f
-0002bf20: 696c 653d 696e 7370 6563 742e 6765 7466  ile=inspect.getf
-0002bf30: 696c 6528 4675 6e63 7469 6f6e 4e61 6d65  ile(FunctionName
-0002bf40: 2870 6172 656e 743d 312c 6f62 6a3d 5472  (parent=1,obj=Tr
-0002bf50: 7565 295b 315d 2920 0a20 2020 2020 2020  ue)[1]) .       
-0002bf60: 2020 2020 2020 2020 2062 6173 655f 6469           base_di
-0002bf70: 723d 6f73 2e70 6174 682e 6469 726e 616d  r=os.path.dirnam
-0002bf80: 6528 6f73 2e70 6174 682e 6162 7370 6174  e(os.path.abspat
-0002bf90: 6828 6d79 5f66 696c 6529 2920 2320 4765  h(my_file)) # Ge
-0002bfa0: 7420 6669 6c65 6e61 6d65 2070 6174 680a  t filename path.
-0002bfb0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002bfc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002bfd0: 2020 6261 7365 5f64 6972 3d69 6e70 5b30    base_dir=inp[0
-0002bfe0: 5d0a 2020 2020 2020 2020 656c 6966 2054  ].        elif T
-0002bff0: 7970 6528 696e 705b 305d 2c28 2766 756e  ype(inp[0],('fun
-0002c000: 6374 696f 6e27 2c27 6d6f 6475 6c65 272c  ction','module',
-0002c010: 2763 6c61 7373 6f62 6a27 2c27 696e 7374  'classobj','inst
-0002c020: 616e 6365 2729 293a 0a20 2020 2020 2020  ance')):.       
-0002c030: 2020 2020 206d 795f 6669 6c65 3d69 6e73       my_file=ins
-0002c040: 7065 6374 2e67 6574 6669 6c65 2869 6e70  pect.getfile(inp
-0002c050: 5b30 5d29 2023 2047 6574 206f 626a 2773  [0]) # Get obj's
-0002c060: 2066 696c 656e 616d 650a 2020 2020 2020   filename.      
-0002c070: 2020 2020 2020 6261 7365 5f64 6972 3d6f        base_dir=o
-0002c080: 732e 7061 7468 2e64 6972 6e61 6d65 286f  s.path.dirname(o
-0002c090: 732e 7061 7468 2e61 6273 7061 7468 286d  s.path.abspath(m
-0002c0a0: 795f 6669 6c65 2929 2020 0a20 2020 2066  y_file))  .    f
-0002c0b0: 756c 6c5f 7061 7468 3d5b 5d0a 2020 2020  ull_path=[].    
-0002c0c0: 6966 2069 7369 6e73 7461 6e63 6528 6261  if isinstance(ba
-0002c0d0: 7365 5f64 6972 2c73 7472 293a 0a20 2020  se_dir,str):.   
-0002c0e0: 2020 2020 2066 756c 6c5f 7061 7468 3d62       full_path=b
-0002c0f0: 6173 655f 6469 722e 7370 6c69 7428 7379  ase_dir.split(sy
-0002c100: 6d29 0a20 2020 2065 6c69 6620 6973 696e  m).    elif isin
-0002c110: 7374 616e 6365 2869 6e70 5b30 5d2c 286c  stance(inp[0],(l
-0002c120: 6973 742c 7475 706c 6529 293a 0a20 2020  ist,tuple)):.   
-0002c130: 2020 2020 2066 756c 6c5f 7061 7468 3d6c       full_path=l
-0002c140: 6973 7428 696e 705b 305d 290a 2020 2020  ist(inp[0]).    
-0002c150: 6966 2066 756c 6c5f 7061 7468 3a0a 2020  if full_path:.  
-0002c160: 2020 2020 2020 6966 2066 756c 6c5f 7061        if full_pa
-0002c170: 7468 5b30 5d20 3d3d 2027 7e27 206f 7220  th[0] == '~' or 
-0002c180: 2866 756c 6c5f 7061 7468 5b30 5d20 616e  (full_path[0] an
-0002c190: 6420 6675 6c6c 5f70 6174 685b 305d 5b30  d full_path[0][0
-0002c1a0: 5d20 3d3d 2027 7e27 293a 2020 2020 2020  ] == '~'):      
-0002c1b0: 2320 7e20 6f72 207e 3c75 7365 723e 2073  # ~ or ~<user> s
-0002c1c0: 7479 6c65 0a20 2020 2020 2020 2020 2020  tyle.           
-0002c1d0: 2023 6675 6c6c 5f70 6174 683d 6f73 2e65   #full_path=os.e
-0002c1e0: 6e76 6972 6f6e 5b27 484f 4d45 275d 2e73  nviron['HOME'].s
-0002c1f0: 706c 6974 2873 796d 292b 6675 6c6c 5f70  plit(sym)+full_p
-0002c200: 6174 685b 313a 5d0a 2020 2020 2020 2020  ath[1:].        
-0002c210: 2020 2020 6675 6c6c 5f70 6174 683d 6f73      full_path=os
-0002c220: 2e70 6174 682e 6578 7061 6e64 7573 6572  .path.expanduser
-0002c230: 2866 756c 6c5f 7061 7468 5b30 5d29 2e73  (full_path[0]).s
-0002c240: 706c 6974 2873 796d 292b 6675 6c6c 5f70  plit(sym)+full_p
-0002c250: 6174 685b 313a 5d0a 2320 2020 2020 2020  ath[1:].#       
-0002c260: 2065 6c69 6620 6675 6c6c 5f70 6174 685b   elif full_path[
-0002c270: 305d 2061 6e64 2066 756c 6c5f 7061 7468  0] and full_path
-0002c280: 5b30 5d5b 305d 203d 3d20 277e 273a 2023  [0][0] == '~': #
-0002c290: 207e 3c75 7365 723e 2073 7479 6c65 0a23   ~<user> style.#
-0002c2a0: 2020 2020 2020 2020 2020 2020 6675 6c6c              full
-0002c2b0: 5f70 6174 683d 6f73 2e70 6174 682e 6578  _path=os.path.ex
-0002c2c0: 7061 6e64 7573 6572 2866 756c 6c5f 7061  panduser(full_pa
-0002c2d0: 7468 5b30 5d29 2e73 706c 6974 2873 796d  th[0]).split(sym
-0002c2e0: 292b 6675 6c6c 5f70 6174 685b 313a 5d0a  )+full_path[1:].
-0002c2f0: 2020 2020 6966 2072 656d 6f76 655f 646f      if remove_do
-0002c300: 743a 0a20 2020 2020 2020 206e 6670 3d5b  t:.        nfp=[
-0002c310: 5d0a 2020 2020 2020 2020 666f 7220 6920  ].        for i 
-0002c320: 696e 2066 756c 6c5f 7061 7468 3a0a 2020  in full_path:.  
-0002c330: 2020 2020 2020 2020 2020 6966 2069 203d            if i =
-0002c340: 3d20 272e 2e27 3a20 2372 656d 6f76 6520  = '..': #remove 
-0002c350: 272e 2e27 0a20 2020 2020 2020 2020 2020  '..'.           
-0002c360: 2020 2020 2069 6620 6e66 703a 0a20 2020       if nfp:.   
-0002c370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c380: 2023 6b65 6570 2072 6f6f 7420 7061 7468   #keep root path
-0002c390: 2028 272f 2729 0a20 2020 2020 2020 2020   ('/').         
-0002c3a0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-0002c3b0: 6e28 6e66 7029 3d3d 313a 0a20 2020 2020  n(nfp)==1:.     
-0002c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c3d0: 2020 2069 6620 6e66 705b 305d 3a0a 2020     if nfp[0]:.  
-0002c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c3f0: 2020 2020 2020 2020 2020 6465 6c20 6e66            del nf
-0002c400: 705b 2d31 5d0a 2020 2020 2020 2020 2020  p[-1].          
-0002c410: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0002c420: 6966 2065 7272 3a0a 2020 2020 2020 2020  if err:.        
-0002c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c440: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-0002c450: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
-0002c460: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0002c470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c480: 2020 2020 2064 656c 206e 6670 5b2d 315d       del nfp[-1]
-0002c490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c4a0: 2065 6c69 6620 6572 723a 0a20 2020 2020   elif err:.     
-0002c4b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0002c4c0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-0002c4d0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0002c4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c4f0: 6966 2069 2021 3d20 272e 273a 2023 7265  if i != '.': #re
-0002c500: 6d6f 7665 2027 2e27 0a20 2020 2020 2020  move '.'.       
-0002c510: 2020 2020 2020 2020 2020 2020 206e 6670               nfp
-0002c520: 2e61 7070 656e 6428 6929 0a20 2020 2020  .append(i).     
-0002c530: 2020 2066 756c 6c5f 7061 7468 3d6e 6670     full_path=nfp
-0002c540: 0a20 2020 2066 6f72 2069 6920 696e 2069  .    for ii in i
-0002c550: 6e70 5b31 3a5d 3a20 2320 6164 6420 6578  np[1:]: # add ex
-0002c560: 7472 6120 696e 7075 740a 2020 2020 2020  tra input.      
-0002c570: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0002c580: 6969 2c73 7472 293a 0a20 2020 2020 2020  ii,str):.       
-0002c590: 2020 2020 2066 6f72 207a 7a20 696e 2069       for zz in i
-0002c5a0: 692e 7370 6c69 7428 7379 6d29 3a0a 2020  i.split(sym):.  
-0002c5b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002c5c0: 2072 656d 6f76 655f 646f 743a 0a20 2020   remove_dot:.   
-0002c5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c5e0: 2069 6620 7a7a 203d 3d20 272e 2720 6f72   if zz == '.' or
-0002c5f0: 206e 6f74 2054 7970 6528 7a7a 2c27 7374   not Type(zz,'st
-0002c600: 7227 2c64 6174 613d 5472 7565 293a 2063  r',data=True): c
-0002c610: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-0002c620: 2020 2020 2020 2020 2020 2020 6966 207a              if z
-0002c630: 7a20 3d3d 2027 2e2e 273a 0a20 2020 2020  z == '..':.     
-0002c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c650: 2020 2069 6620 6675 6c6c 5f70 6174 683a     if full_path:
-0002c660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c670: 2020 2020 2020 2020 2020 2020 2023 6b65               #ke
-0002c680: 6570 2072 6f6f 7420 7061 7468 2028 272f  ep root path ('/
-0002c690: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-0002c6a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002c6b0: 6620 6c65 6e28 6675 6c6c 5f70 6174 6829  f len(full_path)
-0002c6c0: 3d3d 313a 0a20 2020 2020 2020 2020 2020  ==1:.           
-0002c6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c6e0: 2020 2020 2069 6620 6675 6c6c 5f70 6174       if full_pat
-0002c6f0: 685b 305d 3a0a 2020 2020 2020 2020 2020  h[0]:.          
-0002c700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c710: 2020 2020 2020 2020 2020 6465 6c20 6675            del fu
-0002c720: 6c6c 5f70 6174 685b 2d31 5d0a 2020 2020  ll_path[-1].    
-0002c730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c740: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0002c750: 2065 7272 3a0a 2020 2020 2020 2020 2020   err:.          
-0002c760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c770: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0002c780: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
-0002c790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0002c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7c0: 2020 2020 2020 2020 2020 2064 656c 2066             del f
-0002c7d0: 756c 6c5f 7061 7468 5b2d 315d 0a20 2020  ull_path[-1].   
-0002c7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c7f0: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-0002c800: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0002c810: 2020 2020 2020 2020 2020 656c 6966 2065            elif e
-0002c820: 7272 3a0a 2020 2020 2020 2020 2020 2020  rr:.            
-0002c830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002c840: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-0002c850: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0002c860: 756c 6c5f 7061 7468 2e61 7070 656e 6428  ull_path.append(
-0002c870: 7a7a 290a 2020 2020 6966 206f 7574 2069  zz).    if out i
-0002c880: 6e20 5b73 7472 2c27 7374 7227 5d3a 0a20  n [str,'str']:. 
-0002c890: 2020 2020 2020 2069 6620 6e6f 7420 6675         if not fu
-0002c8a0: 6c6c 5f70 6174 683a 2072 6574 7572 6e20  ll_path: return 
-0002c8b0: 2727 0a20 2020 2020 2020 2072 743d 4a6f  ''.        rt=Jo
-0002c8c0: 696e 2866 756c 6c5f 7061 7468 2c73 796d  in(full_path,sym
-0002c8d0: 626f 6c3d 7379 6d29 0a20 2020 2020 2020  bol=sym).       
-0002c8e0: 2069 6620 6f70 7473 2e67 6574 2827 666f   if opts.get('fo
-0002c8f0: 7263 655f 726f 6f74 272c 6f70 7473 2e67  rce_root',opts.g
-0002c900: 6574 2827 726f 6f74 272c 4661 6c73 6529  et('root',False)
-0002c910: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-0002c920: 6620 7274 5b30 5d20 213d 2027 2f27 3a20  f rt[0] != '/': 
-0002c930: 7265 7475 726e 2027 2f27 2b72 740a 2020  return '/'+rt.  
-0002c940: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
-0002c950: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002c960: 2020 7265 7475 726e 2066 756c 6c5f 7061    return full_pa
-0002c970: 7468 0a0a 6465 6620 4d65 7267 6553 7472  th..def MergeStr
-0002c980: 2861 2c62 2c5f 7479 7065 3d4e 6f6e 6529  (a,b,_type=None)
-0002c990: 3a0a 2020 2020 6966 2061 2069 7320 4e6f  :.    if a is No
-0002c9a0: 6e65 2061 6e64 2062 2069 7320 4e6f 6e65  ne and b is None
-0002c9b0: 3a0a 2020 2020 2020 2020 6966 205f 7479  :.        if _ty
-0002c9c0: 7065 203d 3d20 2762 7974 6573 273a 0a20  pe == 'bytes':. 
-0002c9d0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0002c9e0: 6e20 6227 270a 2020 2020 2020 2020 656c  n b''.        el
-0002c9f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002ca00: 7265 7475 726e 2027 270a 2020 2020 6966  return ''.    if
-0002ca10: 205f 7479 7065 2069 7320 4e6f 6e65 3a0a   _type is None:.
-0002ca20: 2020 2020 2020 2020 6966 2061 2069 7320          if a is 
-0002ca30: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0002ca40: 2020 7265 7475 726e 2062 0a20 2020 2020    return b.     
-0002ca50: 2020 2065 6c69 6620 6220 6973 204e 6f6e     elif b is Non
-0002ca60: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0002ca70: 6574 7572 6e20 610a 2020 2020 2020 2020  eturn a.        
-0002ca80: 656c 6966 2054 7970 6528 6129 203d 3d20  elif Type(a) == 
-0002ca90: 5479 7065 2862 293a 0a20 2020 2020 2020  Type(b):.       
-0002caa0: 2020 2020 2072 6574 7572 6e20 6120 2b20       return a + 
-0002cab0: 620a 2020 2020 2020 2020 656c 6966 2054  b.        elif T
-0002cac0: 7970 6528 6129 203d 3d20 2762 7974 6573  ype(a) == 'bytes
-0002cad0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
-0002cae0: 6574 7572 6e20 2061 2b42 7974 6573 2862  eturn  a+Bytes(b
-0002caf0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-0002cb00: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0002cb10: 726e 2020 612b 5374 7228 6229 0a20 2020  rn  a+Str(b).   
-0002cb20: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
-0002cb30: 6620 5f74 7970 6520 696e 205b 7374 722c  f _type in [str,
-0002cb40: 2773 7472 275d 3a0a 2020 2020 2020 2020  'str']:.        
-0002cb50: 2020 2020 6966 2061 2069 7320 4e6f 6e65      if a is None
-0002cb60: 3a20 7265 7475 726e 2053 7472 2862 290a  : return Str(b).
-0002cb70: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0002cb80: 2062 2069 7320 4e6f 6e65 3a20 7265 7475   b is None: retu
-0002cb90: 726e 2053 7472 2861 290a 2020 2020 2020  rn Str(a).      
-0002cba0: 2020 2020 2020 7265 7475 726e 2053 7472        return Str
-0002cbb0: 2861 292b 5374 7228 6229 0a20 2020 2020  (a)+Str(b).     
-0002cbc0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0002cbd0: 2020 2020 2069 6620 6120 6973 204e 6f6e       if a is Non
-0002cbe0: 653a 2072 6574 7572 6e20 4279 7465 7328  e: return Bytes(
-0002cbf0: 6229 0a20 2020 2020 2020 2020 2020 2065  b).            e
-0002cc00: 6c69 6620 6220 6973 204e 6f6e 653a 2072  lif b is None: r
-0002cc10: 6574 7572 6e20 4279 7465 7328 6129 0a20  eturn Bytes(a). 
-0002cc20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0002cc30: 6e20 4279 7465 7328 6129 2b42 7974 6573  n Bytes(a)+Bytes
-0002cc40: 2862 290a 0a64 6566 2043 7574 2873 7263  (b)..def Cut(src
-0002cc50: 2c68 6561 645f 6c65 6e3d 4e6f 6e65 2c62  ,head_len=None,b
-0002cc60: 6f64 795f 6c65 6e3d 4e6f 6e65 2c6e 6577  ody_len=None,new
-0002cc70: 5f6c 696e 653d 275c 6e27 2c6f 7574 3d73  _line='\n',out=s
-0002cc80: 7472 2c66 726f 6e74 5f73 7061 6365 3d4e  tr,front_space=N
-0002cc90: 6f6e 652c 6e65 776c 696e 655f 6865 6164  one,newline_head
-0002cca0: 3d46 616c 7365 293a 0a20 2020 2027 2727  =False):.    '''
-0002ccb0: 0a20 2020 2043 7574 2073 7472 696e 6720  .    Cut string 
-0002ccc0: 7769 7468 206c 656e 6774 680a 2020 2020  with length.    
-0002ccd0: 6865 6164 5f6c 656e 203a 2069 6e74 203a  head_len : int :
-0002cce0: 2066 6972 7374 206c 696e 6520 6c65 6e67   first line leng
-0002ccf0: 7468 2028 6465 6661 756c 7420 4e6f 6e65  th (default None
-0002cd00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002cd10: 2069 6620 626f 6479 5f6c 656e 2069 7320   if body_len is 
-0002cd20: 4e6f 6e65 2074 6865 6e20 6576 6572 7974  None then everyt
-0002cd30: 6869 6e67 2063 7574 2073 616d 6520 6c65  hing cut same le
-0002cd40: 6e67 7468 2077 6974 6820 6865 6164 5f6c  ngth with head_l
-0002cd50: 656e 0a20 2020 2062 6f64 795f 6c65 6e20  en.    body_len 
-0002cd60: 3a20 696e 7420 3a20 6c69 6e65 206c 656e  : int : line len
-0002cd70: 6774 6820 6166 7465 7220 6865 6164 5f6c  gth after head_l
-0002cd80: 656e 2028 6465 6661 756c 7420 4e6f 6e65  en (default None
-0002cd90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002cda0: 2077 6974 686f 7574 2068 6561 645f 6c65   without head_le
-0002cdb0: 6e28 4e6f 6e65 2920 7468 656e 2073 7761  n(None) then swa
-0002cdc0: 7020 6265 7477 6565 6e20 6865 6164 5f6c  p between head_l
-0002cdd0: 656e 2061 6e64 2062 6f64 795f 6c65 6e0a  en and body_len.
-0002cde0: 2020 2020 6e65 775f 6c69 6e65 203a 2064      new_line : d
-0002cdf0: 6566 6175 6c74 206c 696e 7578 206e 6577  efault linux new
-0002ce00: 206c 696e 650a 2020 2020 6672 6f6e 745f   line.    front_
-0002ce10: 7370 6163 653a 200a 2020 2020 2020 2020  space: .        
-0002ce20: 5472 7565 203a 2066 696c 6c20 6f75 7420  True : fill out 
-0002ce30: 7370 6163 6520 746f 2067 6170 2062 6574  space to gap bet
-0002ce40: 7765 656e 2068 6561 645f 6c65 6e20 2061  ween head_len  a
-0002ce50: 6e64 2062 6f64 795f 6c65 6e20 2873 616d  nd body_len (sam
-0002ce60: 6520 6173 2030 290a 2020 2020 2020 2020  e as 0).        
-0002ce70: 4661 6c73 652f 4e6f 6e65 203a 204e 6f20  False/None : No 
-0002ce80: 7370 6163 650a 2020 2020 2020 2020 2320  space.        # 
-0002ce90: 2020 203a 2066 696c 6c20 6f75 7420 7370     : fill out sp
-0002cea0: 6163 6520 6f66 2023 2061 7420 6672 6f6e  ace of # at fron
-0002ceb0: 7420 6f66 2061 6c6c 2073 7472 696e 6773  t of all strings
-0002cec0: 2028 6865 6164 2061 6e64 2062 6f64 7929   (head and body)
-0002ced0: 0a20 2020 2020 2020 2027 2020 2720 3a20  .        '  ' : 
-0002cee0: 7361 6d65 2061 7320 6e75 6d62 6572 2823  same as number(#
-0002cef0: 290a 2020 2020 6e65 776c 696e 655f 6865  ).    newline_he
-0002cf00: 6164 3a0a 2020 2020 2020 2020 5472 7565  ad:.        True
-0002cf10: 203a 2065 6163 6820 6669 7273 7420 6c69   : each first li
-0002cf20: 6e65 2068 6173 2068 6561 6420 636f 6e64  ne has head cond
-0002cf30: 6974 696f 6e0a 2020 2020 2020 2020 4661  ition.        Fa
-0002cf40: 6c73 653a 2066 6972 7374 206c 696e 6520  lse: first line 
-0002cf50: 6861 7320 6865 6164 2063 6f6e 6469 7469  has head conditi
-0002cf60: 6f6e 206f 6620 656e 7469 7265 2073 6f75  on of entire sou
-0002cf70: 7263 6520 2873 7263 290a 2020 2020 6f75  rce (src).    ou
-0002cf80: 743d 0a20 2020 2020 2020 2073 7472 2020  t=.        str  
-0002cf90: 3a20 6f75 7470 7574 2074 6f20 7374 7269  : output to stri
-0002cfa0: 6e67 2077 6974 6820 6e65 775f 6c69 6e65  ng with new_line
-0002cfb0: 2028 6465 6661 756c 7429 0a20 2020 2020   (default).     
-0002cfc0: 2020 206c 6973 7420 3a20 6f75 7470 7574     list : output
-0002cfd0: 2074 6f20 6c69 7374 2069 6e73 7465 6164   to list instead
-0002cfe0: 206e 6577 5f6c 696e 650a 2020 2020 2727   new_line.    ''
-0002cff0: 270a 2020 2020 6966 206e 6f74 2054 7970  '.    if not Typ
-0002d000: 6528 7372 632c 2827 7374 7227 2c27 6279  e(src,('str','by
-0002d010: 7465 7327 2929 3a20 7265 7475 726e 2046  tes')): return F
-0002d020: 616c 7365 0a20 2020 2073 6f75 7263 653d  alse.    source=
-0002d030: 5370 6c69 7428 7372 632c 6e65 775f 6c69  Split(src,new_li
-0002d040: 6e65 290a 2020 2020 2320 7377 6170 2068  ne).    # swap h
-0002d050: 6561 645f 6c65 6e20 616e 6420 626f 6479  ead_len and body
-0002d060: 5f6c 656e 2077 6865 6e20 6865 6164 5f6c  _len when head_l
-0002d070: 656e 2069 7320 4e6f 6e65 0a20 2020 2069  en is None.    i
-0002d080: 6620 4973 4e6f 6e65 2868 6561 645f 6c65  f IsNone(head_le
-0002d090: 6e29 2061 6e64 2069 7369 6e73 7461 6e63  n) and isinstanc
-0002d0a0: 6528 626f 6479 5f6c 656e 2c69 6e74 293a  e(body_len,int):
-0002d0b0: 0a20 2020 2020 2020 2068 6561 645f 6c65  .        head_le
-0002d0c0: 6e3d 626f 6479 5f6c 656e 0a20 2020 2020  n=body_len.     
-0002d0d0: 2020 2062 6f64 795f 6c65 6e3d 4e6f 6e65     body_len=None
-0002d0e0: 0a0a 2020 2020 6966 206e 6f74 2069 7369  ..    if not isi
-0002d0f0: 6e73 7461 6e63 6528 6865 6164 5f6c 656e  nstance(head_len
-0002d100: 2c69 6e74 2920 6f72 2068 6561 645f 6c65  ,int) or head_le
-0002d110: 6e20 3e3d 206c 656e 2873 7263 293a 0a20  n >= len(src):. 
-0002d120: 2020 2020 2020 6966 2073 7263 2061 6e64        if src and
-0002d130: 206f 7574 2069 6e20 5b27 7374 7227 2c73   out in ['str',s
-0002d140: 7472 2c27 7374 7269 6e67 275d 3a20 7265  tr,'string']: re
-0002d150: 7475 726e 2073 7263 0a20 2020 2020 2020  turn src.       
-0002d160: 7265 7475 726e 2073 6f75 7263 6520 2320  return source # 
-0002d170: 7370 6c69 7420 7769 7468 206e 6577 206c  split with new l
-0002d180: 696e 650a 0a20 2020 2072 743d 5b5d 0a20  ine..    rt=[]. 
-0002d190: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0002d1a0: 2866 726f 6e74 5f73 7061 6365 2c62 6f6f  (front_space,boo
-0002d1b0: 6c29 3a0a 2020 2020 2020 2020 6672 6f6e  l):.        fron
-0002d1c0: 745f 7370 6163 653d 3020 6966 2066 726f  t_space=0 if fro
-0002d1d0: 6e74 5f73 7061 6365 2069 7320 5472 7565  nt_space is True
-0002d1e0: 2065 6c73 6520 4e6f 6e65 0a20 2020 2065   else None.    e
-0002d1f0: 6c69 6620 6973 696e 7374 616e 6365 2866  lif isinstance(f
-0002d200: 726f 6e74 5f73 7061 6365 2c69 6e74 293a  ront_space,int):
-0002d210: 0a20 2020 2020 2020 2066 726f 6e74 5f73  .        front_s
-0002d220: 7061 6365 3d53 7061 6365 2866 726f 6e74  pace=Space(front
-0002d230: 5f73 7061 6365 290a 2020 2020 6966 206e  _space).    if n
-0002d240: 6f74 2069 7369 6e73 7461 6e63 6528 6672  ot isinstance(fr
-0002d250: 6f6e 745f 7370 6163 652c 7374 7229 2061  ont_space,str) a
-0002d260: 6e64 2066 726f 6e74 5f73 7061 6365 2069  nd front_space i
-0002d270: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0002d280: 2020 2020 6672 6f6e 745f 7370 6163 653d      front_space=
-0002d290: 4e6f 6e65 0a20 2020 2066 726f 6e74 5f73  None.    front_s
-0002d2a0: 7061 6365 5f68 6561 643d 6672 6f6e 745f  pace_head=front_
-0002d2b0: 7370 6163 650a 2020 2020 6672 6f6e 745f  space.    front_
-0002d2c0: 7370 6163 655f 626f 6479 3d66 726f 6e74  space_body=front
-0002d2d0: 5f73 7061 6365 0a20 2020 2069 6620 6672  _space.    if fr
-0002d2e0: 6f6e 745f 7370 6163 6520 6973 206e 6f74  ont_space is not
-0002d2f0: 204e 6f6e 653a 0a20 2020 2020 2020 2069   None:.        i
-0002d300: 6620 6865 6164 5f6c 656e 2061 6e64 2062  f head_len and b
-0002d310: 6f64 795f 6c65 6e3a 0a20 2020 2020 2020  ody_len:.       
-0002d320: 2020 2020 2069 6620 6865 6164 5f6c 656e       if head_len
-0002d330: 203e 2062 6f64 795f 6c65 6e3a 0a20 2020   > body_len:.   
-0002d340: 2020 2020 2020 2020 2020 2020 2066 726f               fro
-0002d350: 6e74 5f73 7061 6365 5f62 6f64 793d 5370  nt_space_body=Sp
-0002d360: 6163 6528 6c65 6e28 6672 6f6e 745f 7370  ace(len(front_sp
-0002d370: 6163 6529 2b28 6865 6164 5f6c 656e 2d62  ace)+(head_len-b
-0002d380: 6f64 795f 6c65 6e29 290a 2020 2020 2020  ody_len)).      
-0002d390: 2020 2020 2020 656c 6966 2068 6561 645f        elif head_
-0002d3a0: 6c65 6e20 3c20 626f 6479 5f6c 656e 3a0a  len < body_len:.
-0002d3b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d3c0: 6672 6f6e 745f 7370 6163 655f 6865 6164  front_space_head
-0002d3d0: 3d53 7061 6365 286c 656e 2866 726f 6e74  =Space(len(front
-0002d3e0: 5f73 7061 6365 292b 2862 6f64 795f 6c65  _space)+(body_le
-0002d3f0: 6e2d 6865 6164 5f6c 656e 2929 0a20 2020  n-head_len)).   
-0002d400: 205f 7479 7065 3d74 7970 6528 7372 6329   _type=type(src)
-0002d410: 0a20 2020 2066 6f72 2073 7263 5f69 6478  .    for src_idx
-0002d420: 2069 6e20 7261 6e67 6528 302c 6c65 6e28   in range(0,len(
-0002d430: 736f 7572 6365 2929 3a0a 2020 2020 2020  source)):.      
-0002d440: 2020 7374 725f 6c65 6e3d 6c65 6e28 736f    str_len=len(so
-0002d450: 7572 6365 5b73 7263 5f69 6478 5d29 0a20  urce[src_idx]). 
-0002d460: 2020 2020 2020 2069 6620 6865 6164 5f6c         if head_l
-0002d470: 656e 203d 3d20 303a 2068 6561 645f 6c65  en == 0: head_le
-0002d480: 6e3d 7374 725f 6c65 6e0a 2020 2020 2020  n=str_len.      
-0002d490: 2020 6966 2049 734e 6f6e 6528 626f 6479    if IsNone(body
-0002d4a0: 5f6c 656e 293a 0a20 2020 2020 2020 2020  _len):.         
-0002d4b0: 2020 2072 743d 7274 2b5b 4d65 7267 6553     rt=rt+[MergeS
-0002d4c0: 7472 2866 726f 6e74 5f73 7061 6365 2c73  tr(front_space,s
-0002d4d0: 6f75 7263 655b 7372 635f 6964 785d 5b69  ource[src_idx][i
-0002d4e0: 3a69 202b 2068 6561 645f 6c65 6e5d 2c5f  :i + head_len],_
-0002d4f0: 7479 7065 3d5f 7479 7065 2920 666f 7220  type=_type) for 
-0002d500: 6920 696e 2072 616e 6765 2830 2c20 7374  i in range(0, st
-0002d510: 725f 6c65 6e2c 2068 6561 645f 6c65 6e29  r_len, head_len)
-0002d520: 5d0a 2020 2020 2020 2020 656c 7365 3a0a  ].        else:.
-0002d530: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0002d540: 7263 5f69 6478 203d 3d20 3020 6f72 206e  rc_idx == 0 or n
-0002d550: 6577 6c69 6e65 5f68 6561 6420 6973 2054  ewline_head is T
-0002d560: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
-0002d570: 2020 2020 2072 742e 6170 7065 6e64 284d       rt.append(M
-0002d580: 6572 6765 5374 7228 6672 6f6e 745f 7370  ergeStr(front_sp
-0002d590: 6163 655f 6865 6164 2c73 6f75 7263 655b  ace_head,source[
-0002d5a0: 7372 635f 6964 785d 5b30 3a68 6561 645f  src_idx][0:head_
-0002d5b0: 6c65 6e5d 2c5f 7479 7065 3d5f 7479 7065  len],_type=_type
-0002d5c0: 2929 2023 2054 616b 6520 6865 6164 0a20  )) # Take head. 
-0002d5d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002d5e0: 6620 7374 725f 6c65 6e20 3e20 6865 6164  f str_len > head
+00028db0: 2069 6620 2227 2220 696e 2076 616c 5b69   if "'" in val[i
+00028dc0: 695d 3a0a 2020 2020 2020 2020 2020 2020  i]:.            
+00028dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028de0: 2020 2020 2020 2020 7374 7269 6e67 5f61          string_a
+00028df0: 5b69 6478 5d3d 2727 2722 2727 272b 7661  [idx]='''"'''+va
+00028e00: 6c5b 6969 5d2b 2727 2722 2727 270a 2020  l[ii]+'''"'''.  
+00028e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028e20: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00028e30: 6966 2027 2227 2069 6e20 7661 6c5b 6969  if '"' in val[ii
+00028e40: 5d3a 200a 2020 2020 2020 2020 2020 2020  ]: .            
+00028e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028e60: 2020 2020 2020 2020 7374 7269 6e67 5f61          string_a
+00028e70: 5b69 6478 5d3d 2222 2227 2222 222b 7661  [idx]="""'"""+va
+00028e80: 6c5b 6969 5d2b 2222 2227 2222 220a 2020  l[ii]+"""'""".  
+00028e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ea0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00028eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028ed0: 7374 7269 6e67 5f61 5b69 6478 5d3d 7661  string_a[idx]=va
+00028ee0: 6c5b 6969 5d0a 2020 2020 2020 2020 2020  l[ii].          
+00028ef0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00028f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f10: 2020 2020 2020 2020 6966 2074 7570 6c65          if tuple
+00028f20: 5f76 616c 3a0a 2020 2020 2020 2020 2020  _val:.          
+00028f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f40: 2020 7374 7269 6e67 5f61 5b69 6478 5d3d    string_a[idx]=
+00028f50: 7374 7269 6e67 5f61 5b69 6478 5d2e 666f  string_a[idx].fo
+00028f60: 726d 6174 282a 7661 6c29 0a20 2020 2020  rmat(*val).     
+00028f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028f80: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00028f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00028fa0: 2020 2020 2073 7472 696e 675f 615b 6964       string_a[id
+00028fb0: 785d 3d73 7472 696e 675f 615b 6964 785d  x]=string_a[idx]
+00028fc0: 2e66 6f72 6d61 7428 2a2a 7661 6c29 0a20  .format(**val). 
+00028fd0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00028fe0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00028ff0: 2020 2020 2020 2020 206d 6973 7369 6e67           missing
+00029000: 2e61 7070 656e 6428 6969 290a 2020 2020  .append(ii).    
+00029010: 2020 2020 2020 2020 2020 2020 2320 6966              # if
+00029020: 206e 6f74 2073 7472 696e 6720 696e 7075   not string inpu
+00029030: 7420 6461 7461 2074 6865 6e20 736b 6970  t data then skip
+00029040: 2068 6572 650a 2020 2020 2020 2020 7265   here.        re
+00029050: 7475 726e 204a 6f69 6e28 7374 7269 6e67  turn Join(string
+00029060: 5f61 2c73 796d 626f 6c3d 2720 2729 2c6d  _a,symbol=' '),m
+00029070: 6973 7369 6e67 0a0a 2020 2020 6966 206e  issing..    if n
+00029080: 6f74 2069 7369 6e73 7461 6e63 6528 7374  ot isinstance(st
+00029090: 7269 6e67 2c73 7472 293a 2072 6574 7572  ring,str): retur
+000290a0: 6e20 4661 6c73 652c 7374 7269 6e67 0a20  n False,string. 
+000290b0: 2020 2066 6661 6c6c 3d5b 7265 2e63 6f6d     ffall=[re.com
+000290c0: 7069 6c65 2827 5c7b 285c 642a 295c 7d27  pile('\{(\d*)\}'
+000290d0: 292e 6669 6e64 616c 6c28 7374 7269 6e67  ).findall(string
+000290e0: 292c 7265 2e63 6f6d 7069 6c65 2827 5c7b  ),re.compile('\{
+000290f0: 285c 772a 295c 7d27 292e 6669 6e64 616c  (\w*)\}').findal
+00029100: 6c28 7374 7269 6e67 292c 7265 2e63 6f6d  l(string),re.com
+00029110: 7069 6c65 2827 5c25 5c28 285c 772a 295c  pile('\%\((\w*)\
+00029120: 2973 2729 2e66 696e 6461 6c6c 2873 7472  )s').findall(str
+00029130: 696e 6729 2c72 652e 636f 6d70 696c 6528  ing),re.compile(
+00029140: 275c 7b5c 7d27 292e 6669 6e64 616c 6c28  '\{\}').findall(
+00029150: 7374 7269 6e67 292c 7265 2e63 6f6d 7069  string),re.compi
+00029160: 6c65 2827 5c25 5b2d 302d 392e 5d2a 5b73  le('\%[-0-9.]*[s
+00029170: 7c63 7c64 7c66 5d27 292e 6669 6e64 616c  |c|d|f]').findal
+00029180: 6c28 7374 7269 6e67 295d 0a20 2020 2069  l(string)].    i
+00029190: 3d30 0a20 2020 2061 706f 7374 726f 7068  =0.    apostroph
+000291a0: 653d 6f70 7473 2e70 6f70 2827 6170 6f73  e=opts.pop('apos
+000291b0: 7472 6f70 6865 2729 2069 6620 2761 706f  trophe') if 'apo
+000291c0: 7374 726f 7068 6527 2069 6e20 6f70 7473  strophe' in opts
+000291d0: 2065 6c73 6520 4e6f 6e65 0a20 2020 2065   else None.    e
+000291e0: 7272 6f72 3d6f 7074 732e 706f 7028 275f  rror=opts.pop('_
+000291f0: 6572 725f 2729 2069 6620 275f 6572 725f  err_') if '_err_
+00029200: 2720 696e 206f 7074 7320 656c 7365 2046  ' in opts else F
+00029210: 616c 7365 0a20 2020 2066 6f72 2074 6d70  alse.    for tmp
+00029220: 2069 6e20 6666 616c 6c3a 0a20 2020 2020   in ffall:.     
+00029230: 2020 2069 6620 6920 696e 205b 302c 315d     if i in [0,1]
+00029240: 3a20 746d 703d 5b20 6a20 2066 6f72 206a  : tmp=[ j  for j
+00029250: 2069 6e20 746d 7020 6966 206c 656e 286a   in tmp if len(j
+00029260: 2920 5d0a 2020 2020 2020 2020 6966 2074  ) ].        if t
+00029270: 6d70 3a0a 2020 2020 2020 2020 2020 2020  mp:.            
+00029280: 6966 2069 203d 3d20 303a 0a20 2020 2020  if i == 0:.     
+00029290: 2020 2020 2020 2020 2020 206d 783d 300a             mx=0.
+000292a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000292b0: 666f 7220 7a20 696e 2074 6d70 3a0a 2020  for z in tmp:.  
+000292c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000292d0: 2020 6966 2069 6e74 287a 2920 3e20 6d78    if int(z) > mx
+000292e0: 3a20 6d78 3d69 6e74 287a 290a 2020 2020  : mx=int(z).    
+000292f0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00029300: 656e 2869 6e70 7329 203e 206d 783a 0a20  en(inps) > mx:. 
+00029310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029320: 2020 2073 7472 696e 672c 6d3d 5f72 6570     string,m=_rep
+00029330: 6c61 6365 5f66 6f72 6d61 745f 746f 5f76  lace_format_to_v
+00029340: 616c 7565 5f28 692c 746d 702c 7374 7269  alue_(i,tmp,stri
+00029350: 6e67 2c69 6e70 732c 6170 6f73 7472 6f70  ng,inps,apostrop
+00029360: 6865 290a 2020 2020 2020 2020 2020 2020  he).            
+00029370: 2020 2020 2020 2020 6966 2065 7272 6f72          if error
+00029380: 2061 6e64 206d 203a 2072 6574 7572 6e20   and m : return 
+00029390: 4661 6c73 652c 276d 6973 7369 6e67 2070  False,'missing p
+000293a0: 6172 616d 6574 6572 7320 7b7d 272e 666f  arameters {}'.fo
+000293b0: 726d 6174 286d 290a 2020 2020 2020 2020  rmat(m).        
+000293c0: 2020 2020 2020 2020 656c 6966 206c 656e          elif len
+000293d0: 286f 7074 7329 203e 206d 783a 0a20 2020  (opts) > mx:.   
+000293e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000293f0: 2073 7472 696e 672c 6d3d 5f72 6570 6c61   string,m=_repla
+00029400: 6365 5f66 6f72 6d61 745f 746f 5f76 616c  ce_format_to_val
+00029410: 7565 5f28 692c 746d 702c 7374 7269 6e67  ue_(i,tmp,string
+00029420: 2c6c 6973 7428 6f70 7473 2e76 616c 7565  ,list(opts.value
+00029430: 7328 2929 2c61 706f 7374 726f 7068 6529  s()),apostrophe)
+00029440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00029450: 2020 2020 2069 6620 6572 726f 7220 616e       if error an
+00029460: 6420 6d20 3a20 7265 7475 726e 2046 616c  d m : return Fal
+00029470: 7365 2c27 6d69 7373 696e 6720 7061 7261  se,'missing para
+00029480: 6d65 7465 7273 207b 7d27 2e66 6f72 6d61  meters {}'.forma
+00029490: 7428 6d29 0a20 2020 2020 2020 2020 2020  t(m).           
+000294a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000294b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000294c0: 6574 7572 6e20 4661 6c73 652c 2222 224e  eturn False,"""N
+000294d0: 6565 6420 6d6f 7265 2069 6e70 7574 2028  eed more input (
+000294e0: 7475 706c 652f 6c69 7374 2920 7061 7261  tuple/list) para
+000294f0: 6d65 7465 7273 2872 6571 7569 7265 207b  meters(require {
+00029500: 7d29 2222 222e 666f 726d 6174 286d 7829  })""".format(mx)
+00029510: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00029520: 6620 303c 2069 203c 2032 3a0a 2020 2020  f 0< i < 2:.    
+00029530: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+00029540: 6e67 2c6d 3d5f 7265 706c 6163 655f 666f  ng,m=_replace_fo
+00029550: 726d 6174 5f74 6f5f 7661 6c75 655f 2869  rmat_to_value_(i
+00029560: 2c74 6d70 2c73 7472 696e 672c 6f70 7473  ,tmp,string,opts
+00029570: 2c61 706f 7374 726f 7068 6529 0a20 2020  ,apostrophe).   
+00029580: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00029590: 6572 726f 7220 616e 6420 6d20 3a20 7265  error and m : re
+000295a0: 7475 726e 2046 616c 7365 2c27 6d69 7373  turn False,'miss
+000295b0: 696e 6720 7061 7261 6d65 7465 7273 207b  ing parameters {
+000295c0: 7d27 2e66 6f72 6d61 7428 6d29 0a20 2020  }'.format(m).   
+000295d0: 2020 2020 2020 2020 2065 6c69 6620 6920           elif i 
+000295e0: 3d3d 2032 3a0a 2020 2020 2020 2020 2020  == 2:.          
+000295f0: 2020 2020 2020 666f 7220 7474 2069 6e20        for tt in 
+00029600: 696e 7073 3a0a 2020 2020 2020 2020 2020  inps:.          
+00029610: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00029620: 6e73 7461 6e63 6528 7474 2c64 6963 7429  nstance(tt,dict)
+00029630: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00029640: 2020 2020 2020 2020 2020 6f70 7473 2e75            opts.u
+00029650: 7064 6174 6528 7474 290a 2020 2020 2020  pdate(tt).      
+00029660: 2020 2020 2020 2020 2020 7374 7269 6e67            string
+00029670: 2c6d 3d5f 7265 706c 6163 655f 666f 726d  ,m=_replace_form
+00029680: 6174 5f74 6f5f 7661 6c75 655f 2869 2c74  at_to_value_(i,t
+00029690: 6d70 2c73 7472 696e 672c 6f70 7473 2c61  mp,string,opts,a
+000296a0: 706f 7374 726f 7068 6529 0a20 2020 2020  postrophe).     
+000296b0: 2020 2020 2020 2020 2020 2069 6620 6572             if er
+000296c0: 726f 7220 616e 6420 6d20 3a20 7265 7475  ror and m : retu
+000296d0: 726e 2046 616c 7365 2c27 6d69 7373 696e  rn False,'missin
+000296e0: 6720 7061 7261 6d65 7465 7273 207b 7d27  g parameters {}'
+000296f0: 2e66 6f72 6d61 7428 6d29 0a20 2020 2020  .format(m).     
+00029700: 2020 2020 2020 2065 6c69 6620 6920 3d3d         elif i ==
+00029710: 2033 3a0a 2020 2020 2020 2020 2020 2020   3:.            
+00029720: 2020 2020 6966 2069 6e70 733a 0a20 2020      if inps:.   
+00029730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029740: 2069 6620 6c65 6e28 746d 7029 203d 3d20   if len(tmp) == 
+00029750: 6c65 6e28 696e 7073 293a 0a20 2020 2020  len(inps):.     
+00029760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029770: 2020 2073 7472 696e 673d 7374 7269 6e67     string=string
+00029780: 2e66 6f72 6d61 7428 2a69 6e70 7329 0a20  .format(*inps). 
+00029790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000297a0: 2020 2065 6c69 6620 6572 726f 723a 0a20     elif error:. 
+000297b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000297c0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+000297d0: 6c73 652c 2222 224d 6973 6d61 7463 6865  lse,"""Mismatche
+000297e0: 6420 696e 7075 7420 2874 7570 6c65 2f6c  d input (tuple/l
+000297f0: 6973 7429 206e 756d 6265 7220 2872 6571  ist) number (req
+00029800: 7569 7265 3a7b 7d2c 2069 6e70 7574 3a7b  uire:{}, input:{
+00029810: 7d29 2222 222e 666f 726d 6174 286c 656e  })""".format(len
+00029820: 2874 6d70 292c 6c65 6e28 696e 7073 2929  (tmp),len(inps))
+00029830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00029840: 2065 6c69 6620 6f70 7473 3a0a 2020 2020   elif opts:.    
+00029850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029860: 6966 206c 656e 2874 6d70 2920 3d3d 206c  if len(tmp) == l
+00029870: 656e 286f 7074 7329 3a0a 2020 2020 2020  en(opts):.      
+00029880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00029890: 2020 7374 7269 6e67 3d73 7472 696e 672e    string=string.
+000298a0: 666f 726d 6174 282a 6f70 7473 2e76 616c  format(*opts.val
+000298b0: 7565 7328 2929 0a20 2020 2020 2020 2020  ues()).         
+000298c0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+000298d0: 6572 726f 723a 0a20 2020 2020 2020 2020  error:.         
+000298e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000298f0: 6574 7572 6e20 4661 6c73 652c 2222 224d  eturn False,"""M
+00029900: 6973 6d61 7463 6865 6420 696e 7075 7420  ismatched input 
+00029910: 2874 7570 6c65 2f6c 6973 7429 206e 756d  (tuple/list) num
+00029920: 6265 7220 2872 6571 7569 7265 3a7b 7d2c  ber (require:{},
+00029930: 2069 6e70 7574 3a7b 7d29 2222 222e 666f   input:{})""".fo
+00029940: 726d 6174 286c 656e 2874 6d70 292c 6c65  rmat(len(tmp),le
+00029950: 6e28 6f70 7473 2929 0a20 2020 2020 2020  n(opts)).       
+00029960: 2020 2020 2065 6c69 6620 6920 3e3d 2034       elif i >= 4
+00029970: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00029980: 2020 6966 2069 6e70 733a 0a20 2020 2020    if inps:.     
+00029990: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000299a0: 6620 6c65 6e28 746d 7029 203d 3d20 6c65  f len(tmp) == le
+000299b0: 6e28 696e 7073 293a 0a20 2020 2020 2020  n(inps):.       
+000299c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000299d0: 2073 7472 696e 673d 7374 7269 6e67 2528   string=string%(
+000299e0: 696e 7073 290a 2020 2020 2020 2020 2020  inps).          
+000299f0: 2020 2020 2020 2020 2020 656c 6966 2065            elif e
+00029a00: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
+00029a10: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00029a20: 7475 726e 2046 616c 7365 2c22 2222 4d69  turn False,"""Mi
+00029a30: 736d 6174 6368 6564 2069 6e70 7574 2028  smatched input (
+00029a40: 7475 706c 652f 6c69 7374 2920 6e75 6d62  tuple/list) numb
+00029a50: 6572 2028 7265 7175 6972 653a 7b7d 2c20  er (require:{}, 
+00029a60: 696e 7075 743a 7b7d 2922 2222 2e66 6f72  input:{})""".for
+00029a70: 6d61 7428 6c65 6e28 746d 7029 2c6c 656e  mat(len(tmp),len
+00029a80: 2869 6e70 7329 290a 2020 2020 2020 2020  (inps)).        
+00029a90: 2020 2020 2020 2020 656c 6966 206f 7074          elif opt
+00029aa0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00029ab0: 2020 2020 2020 2069 6620 6c65 6e28 746d         if len(tm
+00029ac0: 7029 203d 3d20 6c65 6e28 6f70 7473 293a  p) == len(opts):
+00029ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00029ae0: 2020 2020 2020 2020 2073 7472 696e 673d           string=
+00029af0: 7374 7269 6e67 2528 6f70 7473 2e76 616c  string%(opts.val
+00029b00: 7565 7328 2929 0a20 2020 2020 2020 2020  ues()).         
+00029b10: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00029b20: 6572 726f 723a 0a20 2020 2020 2020 2020  error:.         
+00029b30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00029b40: 6574 7572 6e20 4661 6c73 652c 2222 224d  eturn False,"""M
+00029b50: 6973 6d61 7463 6865 6420 696e 7075 7420  ismatched input 
+00029b60: 2874 7570 6c65 2f6c 6973 7429 206e 756d  (tuple/list) num
+00029b70: 6265 7220 2872 6571 7569 7265 3a7b 7d2c  ber (require:{},
+00029b80: 2069 6e70 7574 3a7b 7d29 2222 222e 666f   input:{})""".fo
+00029b90: 726d 6174 286c 656e 2874 6d70 292c 6c65  rmat(len(tmp),le
+00029ba0: 6e28 6f70 7473 2929 0a20 2020 2020 2020  n(opts)).       
+00029bb0: 2069 2b3d 310a 2020 2020 6966 2069 6e70   i+=1.    if inp
+00029bc0: 733a 0a20 2020 2020 2020 2074 7279 3a0a  s:.        try:.
+00029bd0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00029be0: 726e 2054 7275 652c 7374 7269 6e67 2e66  rn True,string.f
+00029bf0: 6f72 6d61 7428 2a69 6e70 7329 0a20 2020  ormat(*inps).   
+00029c00: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+00029c10: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+00029c20: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00029c30: 7475 726e 2054 7275 652c 7374 7269 6e67  turn True,string
+00029c40: 2528 696e 7073 290a 2020 2020 2020 2020  %(inps).        
+00029c50: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+00029c60: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+00029c70: 0a20 2020 2069 6620 6f70 7473 3a0a 2020  .    if opts:.  
+00029c80: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+00029c90: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
+00029ca0: 7565 2c73 7472 696e 672e 666f 726d 6174  ue,string.format
+00029cb0: 282a 2a6f 7074 7329 0a20 2020 2020 2020  (**opts).       
+00029cc0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+00029cd0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00029ce0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00029cf0: 2054 7275 652c 7374 7269 6e67 2528 6f70   True,string%(op
+00029d00: 7473 290a 2020 2020 2020 2020 2020 2020  ts).            
+00029d10: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+00029d20: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
+00029d30: 2072 6574 7572 6e20 5472 7565 2c73 7472   return True,str
+00029d40: 696e 670a 0a64 6566 2053 6f72 7428 7372  ing..def Sort(sr
+00029d50: 632c 7265 7665 7273 653d 4661 6c73 652c  c,reverse=False,
+00029d60: 6675 6e63 3d4e 6f6e 652c 6f72 6465 723d  func=None,order=
+00029d70: 4e6f 6e65 2c66 6965 6c64 3d4e 6f6e 652c  None,field=None,
+00029d80: 6261 7365 3d27 6b65 7927 2c73 796d 3d4e  base='key',sym=N
+00029d90: 6f6e 6529 3a0a 2020 2020 2727 270a 2020  one):.    '''.  
+00029da0: 2020 536f 7274 696e 6720 6461 7461 0a20    Sorting data. 
+00029db0: 2020 2073 7570 706f 7274 206c 6973 742c     support list,
+00029dc0: 7475 706c 652c 6469 6374 2066 6f72 6d61  tuple,dict forma
+00029dd0: 740a 2020 2020 7265 7665 7273 6520 3a20  t.    reverse : 
+00029de0: 7265 7665 7273 6520 736f 7274 0a20 2020  reverse sort.   
+00029df0: 2066 756e 6320 2020 203a 2073 6f72 7469   func    : sorti
+00029e00: 6e67 206b 6579 2066 756e 6374 696f 6e20  ng key function 
+00029e10: 2864 6566 6175 6c74 204e 6f6e 6529 0a20  (default None). 
+00029e20: 2020 206f 7264 6572 2020 203a 2073 6f72     order   : sor
+00029e30: 7469 6e67 206f 7264 6572 206d 6574 686f  ting order metho
+00029e40: 640a 2020 2020 2020 2020 4e6f 6e65 3a20  d.        None: 
+00029e50: 6465 6661 756c 7420 7769 7468 2073 6f72  default with sor
+00029e60: 7428 2920 6675 6e63 7469 6f6e 0a20 2020  t() function.   
+00029e70: 2020 2020 2069 6e74 203a 2073 6f72 7420       int : sort 
+00029e80: 7769 7468 2069 6e74 6567 6572 0a20 2020  with integer.   
+00029e90: 2020 2020 2073 7472 203a 2073 6f72 7420       str : sort 
+00029ea0: 7769 7468 2061 7363 6969 2063 6f64 650a  with ascii code.
+00029eb0: 2020 2020 2020 2020 6c65 6e20 3a20 736f          len : so
+00029ec0: 7274 2077 6974 6820 6461 7461 206c 656e  rt with data len
+00029ed0: 6774 680a 2020 2020 6669 656c 6420 2020  gth.    field   
+00029ee0: 0a20 2020 2020 2020 204e 6f6e 6520 3a20  .        None : 
+00029ef0: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+00029f00: 3c69 6e74 3e3a 2073 6f72 7420 7769 7468  <int>: sort with
+00029f10: 206c 6973 7427 7320 696e 6465 7820 6e75   list's index nu
+00029f20: 6d62 6572 0a20 2020 2062 6173 650a 2020  mber.    base.  
+00029f30: 2020 2020 2020 6b65 7920 203a 2064 6566        key  : def
+00029f40: 6175 6c74 2c20 736f 7274 2077 6974 6820  ault, sort with 
+00029f50: 6b65 7920 6f66 2064 6963 7420 0a20 2020  key of dict .   
+00029f60: 2020 2020 2076 616c 7565 3a20 536f 7274       value: Sort
+00029f70: 2077 6974 6820 7661 6c75 6520 6f66 2064   with value of d
+00029f80: 6963 740a 2020 2020 7379 6d20 2020 2020  ict.    sym     
+00029f90: 203a 204e 6f6e 6520 2864 6566 6175 6c74   : None (default
+00029fa0: 290a 2020 2020 2020 2020 3c73 796d 626f  ).        <symbo
+00029fb0: 6c3e 203a 2069 6620 7372 6320 6973 2073  l> : if src is s
+00029fc0: 7472 696e 6720 7468 656e 2073 706c 6974  tring then split
+00029fd0: 2077 6974 6820 7468 6520 7379 6d0a 2020   with the sym.  
+00029fe0: 2020 2727 270a 2020 2020 6966 2069 7369    '''.    if isi
+00029ff0: 6e73 7461 6e63 6528 7372 632c 7374 7229  nstance(src,str)
+0002a000: 2061 6e64 206e 6f74 2049 734e 6f6e 6528   and not IsNone(
+0002a010: 7379 6d29 3a20 7372 633d 7372 632e 7370  sym): src=src.sp
+0002a020: 6c69 7428 7379 6d29 0a20 2020 2069 6620  lit(sym).    if 
+0002a030: 6973 696e 7374 616e 6365 2873 7263 2c64  isinstance(src,d
+0002a040: 6963 7429 2061 6e64 2062 6173 6520 696e  ict) and base in
+0002a050: 205b 2764 6174 6127 2c27 7661 6c75 6527   ['data','value'
+0002a060: 5d3a 0a20 2020 2020 2020 2066 6965 6c64  ]:.        field
+0002a070: 3d31 0a20 2020 2064 6566 205f 636c 656e  =1.    def _clen
+0002a080: 5f28 6529 3a0a 2020 2020 2020 2020 7472  _(e):.        tr
+0002a090: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
+0002a0a0: 6620 6973 696e 7374 616e 6365 2866 6965  f isinstance(fie
+0002a0b0: 6c64 2c69 6e74 293a 0a20 2020 2020 2020  ld,int):.       
+0002a0c0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0002a0d0: 7374 616e 6365 2865 2c28 6c69 7374 2c74  stance(e,(list,t
+0002a0e0: 7570 6c65 2929 2061 6e64 206c 656e 2865  uple)) and len(e
+0002a0f0: 2920 3e20 6669 656c 643a 0a20 2020 2020  ) > field:.     
+0002a100: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0002a110: 6574 7572 6e20 6c65 6e28 277b 7d27 2e66  eturn len('{}'.f
+0002a120: 6f72 6d61 7428 5374 7228 655b 6669 656c  ormat(Str(e[fiel
+0002a130: 645d 2929 290a 2020 2020 2020 2020 2020  d]))).          
+0002a140: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0002a150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a160: 7265 7475 726e 2039 3939 3939 3939 0a20  return 9999999. 
+0002a170: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002a180: 6e20 6c65 6e28 277b 7d27 2e66 6f72 6d61  n len('{}'.forma
+0002a190: 7428 5374 7228 6529 2929 0a20 2020 2020  t(Str(e))).     
+0002a1a0: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+0002a1b0: 2020 2020 2020 2072 6574 7572 6e20 650a         return e.
+0002a1c0: 2020 2020 6465 6620 5f63 696e 745f 2865      def _cint_(e
+0002a1d0: 293a 0a20 2020 2020 2020 2074 7279 3a0a  ):.        try:.
+0002a1e0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0002a1f0: 7369 6e73 7461 6e63 6528 6669 656c 642c  sinstance(field,
+0002a200: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+0002a210: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0002a220: 6e63 6528 652c 286c 6973 742c 7475 706c  nce(e,(list,tupl
+0002a230: 6529 2920 616e 6420 6c65 6e28 6529 203e  e)) and len(e) >
+0002a240: 2066 6965 6c64 3a0a 2020 2020 2020 2020   field:.        
+0002a250: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0002a260: 726e 2069 6e74 2865 5b66 6965 6c64 5d29  rn int(e[field])
+0002a270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a280: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0002a290: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002a2a0: 6e20 3939 3939 3939 390a 2020 2020 2020  n 9999999.      
+0002a2b0: 2020 2020 2020 7265 7475 726e 2069 6e74        return int
+0002a2c0: 2865 290a 2020 2020 2020 2020 6578 6365  (e).        exce
+0002a2d0: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
+0002a2e0: 7265 7475 726e 2065 0a20 2020 2064 6566  return e.    def
+0002a2f0: 205f 6373 7472 5f28 6529 3a0a 2020 2020   _cstr_(e):.    
+0002a300: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0002a310: 6528 6669 656c 642c 696e 7429 3a0a 2020  e(field,int):.  
+0002a320: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+0002a330: 6e73 7461 6e63 6528 652c 286c 6973 742c  nstance(e,(list,
+0002a340: 7475 706c 6529 2920 616e 6420 6c65 6e28  tuple)) and len(
+0002a350: 6529 203e 2066 6965 6c64 3a0a 2020 2020  e) > field:.    
+0002a360: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0002a370: 726e 2027 2727 7b7d 2727 272e 666f 726d  rn '''{}'''.form
+0002a380: 6174 2865 5b66 6965 6c64 5d29 0a20 2020  at(e[field]).   
+0002a390: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0002a3a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0002a3b0: 6574 7572 6e20 277a 7a7a 7a7a 7a7a 7a7a  eturn 'zzzzzzzzz
+0002a3c0: 270a 2020 2020 2020 2020 7265 7475 726e  '.        return
+0002a3d0: 2027 2727 7b7d 2727 272e 666f 726d 6174   '''{}'''.format
+0002a3e0: 2865 290a 2020 2020 6966 2069 7369 6e73  (e).    if isins
+0002a3f0: 7461 6e63 6528 7372 632c 286c 6973 742c  tance(src,(list,
+0002a400: 7475 706c 6529 293a 0a20 2020 2020 2020  tuple)):.       
+0002a410: 2073 7263 3d6c 6973 7428 7372 6329 0a20   src=list(src). 
+0002a420: 2020 2020 2020 2069 6620 6f72 6465 7220         if order 
+0002a430: 696e 205b 696e 742c 2769 6e74 272c 2764  in [int,'int','d
+0002a440: 6967 6974 272c 276e 756d 6265 7227 5d3a  igit','number']:
+0002a450: 0a20 2020 2020 2020 2020 2020 2073 7263  .            src
+0002a460: 2e73 6f72 7428 7265 7665 7273 653d 7265  .sort(reverse=re
+0002a470: 7665 7273 652c 6b65 793d 5f63 696e 745f  verse,key=_cint_
+0002a480: 290a 2020 2020 2020 2020 656c 6966 206f  ).        elif o
+0002a490: 7264 6572 2069 6e20 5b27 6c65 6e27 2c27  rder in ['len','
+0002a4a0: 6c65 6e67 7468 275d 3a0a 2020 2020 2020  length']:.      
+0002a4b0: 2020 2020 2020 7372 632e 736f 7274 2872        src.sort(r
+0002a4c0: 6576 6572 7365 3d72 6576 6572 7365 2c6b  everse=reverse,k
+0002a4d0: 6579 3d5f 636c 656e 5f29 0a20 2020 2020  ey=_clen_).     
+0002a4e0: 2020 2065 6c69 6620 6f72 6465 7220 696e     elif order in
+0002a4f0: 205b 7374 722c 2773 7472 275d 3a0a 2020   [str,'str']:.  
+0002a500: 2020 2020 2020 2020 2020 7372 632e 736f            src.so
+0002a510: 7274 2872 6576 6572 7365 3d72 6576 6572  rt(reverse=rever
+0002a520: 7365 2c6b 6579 3d5f 6373 7472 5f29 0a20  se,key=_cstr_). 
+0002a530: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0002a540: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0002a550: 7374 616e 6365 2866 6965 6c64 2c69 6e74  stance(field,int
+0002a560: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0002a570: 2020 2073 7263 2e73 6f72 7428 7265 7665     src.sort(reve
+0002a580: 7273 653d 7265 7665 7273 652c 6b65 793d  rse=reverse,key=
+0002a590: 5f63 696e 745f 290a 2020 2020 2020 2020  _cint_).        
+0002a5a0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0002a5b0: 2020 2020 2020 2020 2020 7372 632e 736f            src.so
+0002a5c0: 7274 2872 6576 6572 7365 3d72 6576 6572  rt(reverse=rever
+0002a5d0: 7365 2c6b 6579 3d66 756e 6329 0a20 2020  se,key=func).   
+0002a5e0: 2020 2020 2072 6574 7572 6e20 7372 630a       return src.
+0002a5f0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0002a600: 6e63 6528 7372 632c 6469 6374 293a 0a20  nce(src,dict):. 
+0002a610: 2020 2020 2020 206c 7374 3d6c 6973 7428         lst=list(
+0002a620: 7372 632e 6974 656d 7328 2929 0a20 2020  src.items()).   
+0002a630: 2020 2020 2069 6620 6261 7365 203d 3d20       if base == 
+0002a640: 276b 6579 273a 0a20 2020 2020 2020 2020  'key':.         
+0002a650: 2020 2066 6965 6c64 3d30 0a20 2020 2020     field=0.     
+0002a660: 2020 2020 2020 2069 6620 6f72 6465 7220         if order 
+0002a670: 696e 205b 696e 742c 2769 6e74 272c 2764  in [int,'int','d
+0002a680: 6967 6974 272c 276e 756d 6265 7227 5d3a  igit','number']:
+0002a690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002a6a0: 206c 7374 2e73 6f72 7428 7265 7665 7273   lst.sort(revers
+0002a6b0: 653d 7265 7665 7273 652c 6b65 793d 5f63  e=reverse,key=_c
+0002a6c0: 696e 745f 290a 2020 2020 2020 2020 2020  int_).          
+0002a6d0: 2020 656c 6966 206f 7264 6572 2069 6e20    elif order in 
+0002a6e0: 5b27 6c65 6e27 2c27 6c65 6e67 7468 275d  ['len','length']
+0002a6f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002a700: 2020 6c73 742e 736f 7274 2872 6576 6572    lst.sort(rever
+0002a710: 7365 3d72 6576 6572 7365 2c6b 6579 3d5f  se=reverse,key=_
+0002a720: 636c 656e 5f29 0a20 2020 2020 2020 2020  clen_).         
+0002a730: 2020 2065 6c69 6620 6f72 6465 7220 696e     elif order in
+0002a740: 205b 7374 722c 2773 7472 275d 3a0a 2020   [str,'str']:.  
+0002a750: 2020 2020 2020 2020 2020 2020 2020 6c73                ls
+0002a760: 742e 736f 7274 2872 6576 6572 7365 3d72  t.sort(reverse=r
+0002a770: 6576 6572 7365 2c6b 6579 3d5f 6373 7472  everse,key=_cstr
+0002a780: 5f29 0a20 2020 2020 2020 2020 2020 2065  _).            e
+0002a790: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002a7a0: 2020 2020 206c 7374 2e73 6f72 7428 7265       lst.sort(re
+0002a7b0: 7665 7273 653d 7265 7665 7273 652c 6675  verse=reverse,fu
+0002a7c0: 6e63 3d66 756e 6329 0a20 2020 2020 2020  nc=func).       
+0002a7d0: 2065 6c73 653a 2023 2076 616c 7565 202f   else: # value /
+0002a7e0: 2064 6174 6120 6361 7365 0a20 2020 2020   data case.     
+0002a7f0: 2020 2020 2020 2066 6965 6c64 3d31 0a20         field=1. 
+0002a800: 2020 2020 2020 2020 2020 2069 6620 6f72             if or
+0002a810: 6465 7220 696e 205b 696e 742c 2769 6e74  der in [int,'int
+0002a820: 272c 2764 6967 6974 272c 276e 756d 6265  ','digit','numbe
+0002a830: 7227 5d3a 0a20 2020 2020 2020 2020 2020  r']:.           
+0002a840: 2020 2020 206c 7374 2e73 6f72 7428 7265       lst.sort(re
+0002a850: 7665 7273 653d 7265 7665 7273 652c 6b65  verse=reverse,ke
+0002a860: 793d 5f63 696e 745f 290a 2020 2020 2020  y=_cint_).      
+0002a870: 2020 2020 2020 656c 6966 206f 7264 6572        elif order
+0002a880: 2069 6e20 5b27 6c65 6e27 2c27 6c65 6e67   in ['len','leng
+0002a890: 7468 275d 3a0a 2020 2020 2020 2020 2020  th']:.          
+0002a8a0: 2020 2020 2020 7265 7475 726e 206c 7374        return lst
+0002a8b0: 2e73 6f72 7428 7265 7665 7273 653d 7265  .sort(reverse=re
+0002a8c0: 7665 7273 652c 6b65 793d 5f63 6c65 6e5f  verse,key=_clen_
+0002a8d0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+0002a8e0: 6966 206f 7264 6572 2069 6e20 5b73 7472  if order in [str
+0002a8f0: 2c27 7374 7227 5d3a 0a20 2020 2020 2020  ,'str']:.       
+0002a900: 2020 2020 2020 2020 206c 7374 2e73 6f72           lst.sor
+0002a910: 7428 7265 7665 7273 653d 7265 7665 7273  t(reverse=revers
+0002a920: 652c 6b65 793d 5f63 7374 725f 290a 2020  e,key=_cstr_).  
+0002a930: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0002a940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002a950: 6c73 742e 736f 7274 2872 6576 6572 7365  lst.sort(reverse
+0002a960: 3d72 6576 6572 7365 2c66 756e 633d 6675  =reverse,func=fu
+0002a970: 6e63 290a 2020 2020 2020 2020 7265 7475  nc).        retu
+0002a980: 726e 206c 7374 0a20 2020 2020 2020 2023  rn lst.        #
+0002a990: 7265 7475 726e 205b 695b 305d 2066 6f72  return [i[0] for
+0002a9a0: 2069 2069 6e20 6c73 745d 0a0a 6465 6620   i in lst]..def 
+0002a9b0: 5665 7273 696f 6e53 6f72 7428 6461 7461  VersionSort(data
+0002a9c0: 2c73 796d 3d27 2c27 2c72 6576 3d46 616c  ,sym=',',rev=Fal
+0002a9d0: 7365 293a 0a20 2020 2064 6566 2044 6963  se):.    def Dic
+0002a9e0: 744b 6579 7354 6f4c 6973 7428 6461 7461  tKeysToList(data
+0002a9f0: 2c76 6572 3d27 272c 6f75 743d 5b5d 293a  ,ver='',out=[]):
+0002aa00: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+0002aa10: 7374 616e 6365 2864 6174 612c 6469 6374  stance(data,dict
+0002aa20: 293a 0a20 2020 2020 2020 2020 2020 2066  ):.            f
+0002aa30: 6f72 2069 2069 6e20 6461 7461 3a0a 2020  or i in data:.  
+0002aa40: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002aa50: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+0002aa60: 6461 7461 5b69 5d2c 6469 6374 2920 6f72  data[i],dict) or
+0002aa70: 2064 6174 615b 695d 2069 6e20 5b27 272c   data[i] in ['',
+0002aa80: 4e6f 6e65 2c7b 7d5d 3a0a 2020 2020 2020  None,{}]:.      
+0002aa90: 2020 2020 2020 2020 2020 2020 2020 236f                #o
+0002aaa0: 7574 2e61 7070 656e 6428 7665 722b 272e  ut.append(ver+'.
+0002aab0: 7b7d 272e 666f 726d 6174 2869 2929 2023  {}'.format(i)) #
+0002aac0: 5573 6520 6b65 7920 2863 6861 6e67 6564  Use key (changed
+0002aad0: 2066 6f72 6d61 7429 0a20 2020 2020 2020   format).       
+0002aae0: 2020 2020 2020 2020 2020 2020 206f 7574               out
+0002aaf0: 2e61 7070 656e 6428 6461 7461 5b69 5d29  .append(data[i])
+0002ab00: 2023 2055 7365 206f 7269 6769 6e61 6c20   # Use original 
+0002ab10: 4461 7461 0a20 2020 2020 2020 2020 2020  Data.           
+0002ab20: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002ab30: 2020 2020 2020 2020 2020 2020 2020 2044                 D
+0002ab40: 6963 744b 6579 7354 6f4c 6973 7428 6461  ictKeysToList(da
+0002ab50: 7461 5b69 5d2c 7665 722b 272e 7b7d 272e  ta[i],ver+'.{}'.
+0002ab60: 666f 726d 6174 2869 2920 6966 2076 6572  format(i) if ver
+0002ab70: 2065 6c73 6520 277b 7d27 2e66 6f72 6d61   else '{}'.forma
+0002ab80: 7428 6929 2c6f 7574 3d6f 7574 290a 2020  t(i),out=out).  
+0002ab90: 2020 2020 2020 7265 7475 726e 2076 6572        return ver
+0002aba0: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
+0002abb0: 6365 2864 6174 612c 7374 7229 3a20 6461  ce(data,str): da
+0002abc0: 7461 3d64 6174 612e 7370 6c69 7428 7379  ta=data.split(sy
+0002abd0: 6d29 0a20 2020 2069 6620 6e6f 7420 6973  m).    if not is
+0002abe0: 696e 7374 616e 6365 2864 6174 612c 286c  instance(data,(l
+0002abf0: 6973 742c 7475 706c 6529 293a 2072 6574  ist,tuple)): ret
+0002ac00: 7572 6e20 4661 6c73 650a 2020 2020 6461  urn False.    da
+0002ac10: 7461 3d6c 6973 7428 6461 7461 290a 2020  ta=list(data).  
+0002ac20: 2020 6966 206c 656e 2864 6174 6129 203c    if len(data) <
+0002ac30: 2032 3a20 7265 7475 726e 2064 6174 610a   2: return data.
+0002ac40: 2020 2020 736f 7274 5f64 6174 613d 7b7d      sort_data={}
+0002ac50: 0a20 2020 206f 7574 3d5b 5d0a 2020 2020  .    out=[].    
+0002ac60: 2363 6f6e 7665 7274 206c 6973 7420 746f  #convert list to
+0002ac70: 2064 6963 7420 666f 726d 6174 0a20 2020   dict format.   
+0002ac80: 2066 6f72 2069 2069 6e20 6461 7461 3a0a   for i in data:.
+0002ac90: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+0002aca0: 3a20 636f 6e74 696e 7565 0a20 2020 2020  : continue.     
+0002acb0: 2020 2074 743d 736f 7274 5f64 6174 610a     tt=sort_data.
+0002acc0: 2020 2020 2020 2020 6a5f 613d 5370 6c69          j_a=Spli
+0002acd0: 7428 692c 272e 7c2d 7c3a 7c5f 2729 0a20  t(i,'.|-|:|_'). 
+0002ace0: 2020 2020 2020 206a 5f6d 3d6c 656e 286a         j_m=len(j
+0002acf0: 5f61 292d 310a 2020 2020 2020 2020 666f  _a)-1.        fo
+0002ad00: 7220 6a20 696e 2072 616e 6765 2830 2c6a  r j in range(0,j
+0002ad10: 5f6d 2b31 293a 0a20 2020 2020 2020 2020  _m+1):.         
+0002ad20: 2020 206a 5f61 5b6a 5d3d 496e 7428 6a5f     j_a[j]=Int(j_
+0002ad30: 615b 6a5d 290a 2020 2020 2020 2020 2020  a[j]).          
+0002ad40: 2020 6966 206a 203d 3d20 6a5f 6d3a 0a20    if j == j_m:. 
+0002ad50: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0002ad60: 745b 6a5f 615b 6a5d 5d3d 690a 2020 2020  t[j_a[j]]=i.    
+0002ad70: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0002ad80: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002ad90: 206a 5f61 5b6a 5d20 6e6f 7420 696e 2074   j_a[j] not in t
+0002ada0: 743a 2074 745b 6a5f 615b 6a5d 5d3d 7b7d  t: tt[j_a[j]]={}
+0002adb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002adc0: 2074 743d 7474 5b6a 5f61 5b6a 5d5d 0a0a   tt=tt[j_a[j]]..
+0002add0: 2020 2020 2364 6963 7420 6461 7461 2074      #dict data t
+0002ade0: 6f20 6175 746f 2073 6f72 7469 6e67 2028  o auto sorting (
+0002adf0: 6c69 6b65 2061 7320 7079 7468 6f6e 322e  like as python2.
+0002ae00: 7820 7374 796c 6520 736f 7274 696e 6729  x style sorting)
+0002ae10: 0a20 2020 206e 6577 5f64 6174 615f 7374  .    new_data_st
+0002ae20: 723d 7070 7269 6e74 2e70 666f 726d 6174  r=pprint.pformat
+0002ae30: 2873 6f72 745f 6461 7461 290a 2020 2020  (sort_data).    
+0002ae40: 6e65 775f 6461 7461 3d61 7374 2e6c 6974  new_data=ast.lit
+0002ae50: 6572 616c 5f65 7661 6c28 6e65 775f 6461  eral_eval(new_da
+0002ae60: 7461 5f73 7472 290a 2020 2020 2347 6574  ta_str).    #Get
+0002ae70: 2073 6f72 7465 6420 6461 7461 2066 726f   sorted data fro
+0002ae80: 6d20 6469 6374 2073 6f72 7469 6e67 0a20  m dict sorting. 
+0002ae90: 2020 2044 6963 744b 6579 7354 6f4c 6973     DictKeysToLis
+0002aea0: 7428 6e65 775f 6461 7461 2c6f 7574 3d6f  t(new_data,out=o
+0002aeb0: 7574 290a 2020 2020 6966 2072 6576 3a20  ut).    if rev: 
+0002aec0: 6f75 742e 7265 7665 7273 6528 2920 2372  out.reverse() #r
+0002aed0: 6576 6572 7365 2064 6174 610a 2020 2020  everse data.    
+0002aee0: 7265 7475 726e 206f 7574 0a0a 6465 6620  return out..def 
+0002aef0: 4d61 6356 3428 7372 632c 2a2a 6f70 7473  MacV4(src,**opts
+0002af00: 293a 0a20 2020 2027 2727 0a20 2020 2043  ):.    '''.    C
+0002af10: 6865 636b 204d 6163 2061 6464 7265 7373  heck Mac address
+0002af20: 2066 6f72 6d61 7420 616e 6420 636f 6e76   format and conv
+0002af30: 6572 740a 2020 2020 4865 7820 746f 2049  ert.    Hex to I
+0002af40: 6e74 0a20 2020 2048 6578 2074 6f20 4d61  nt.    Hex to Ma
+0002af50: 6320 7374 7269 6e67 0a20 2020 204d 6163  c string.    Mac
+0002af60: 2073 7472 696e 6720 746f 2049 6e74 0a20   string to Int. 
+0002af70: 2020 2073 796d 626f 6c20 3a20 6465 6661     symbol : defa
+0002af80: 756c 7420 273a 2720 6d61 6320 6164 6472  ult ':' mac addr
+0002af90: 6573 7320 7370 6c69 7465 7220 7379 6d62  ess spliter symb
+0002afa0: 6f6c 0a20 2020 206f 7574 203a 0a20 2020  ol.    out :.   
+0002afb0: 2020 2073 7472 203a 2064 6566 6175 6c74     str : default
+0002afc0: 203a 2058 583a 5858 3a58 583a 5858 3a58   : XX:XX:XX:XX:X
+0002afd0: 5820 666f 726d 6174 0a20 2020 2020 2069  X format.      i
+0002afe0: 6e74 203a 2069 6e74 6567 6572 2066 6f72  nt : integer for
+0002aff0: 6d61 740a 2020 2020 6465 6661 756c 7420  mat.    default 
+0002b000: 3a20 4661 6c73 650a 2020 2020 6361 7365  : False.    case
+0002b010: 203a 200a 2020 2020 2020 7570 7065 7220   : .      upper 
+0002b020: 3a20 7570 7065 7220 6361 7365 206f 7574  : upper case out
+0002b030: 7075 740a 2020 2020 2020 6c6f 7765 7220  put.      lower 
+0002b040: 3a20 6c6f 7765 7220 6361 7365 206f 7574  : lower case out
+0002b050: 7075 740a 2020 2020 6966 6e61 6d65 203a  put.    ifname :
+0002b060: 0a20 2020 2020 2054 7275 6520 3a20 7372  .      True : sr
+0002b070: 6320 6973 204e 6574 776f 726b 2069 6e74  c is Network int
+0002b080: 6572 6661 6365 204e 616d 650a 2020 2020  erface Name.    
+0002b090: 2727 270a 2020 2020 7379 6d62 6f6c 3d6f  '''.    symbol=o
+0002b0a0: 7074 732e 6765 7428 2773 796d 626f 6c27  pts.get('symbol'
+0002b0b0: 2c6f 7074 732e 6765 7428 2773 796d 272c  ,opts.get('sym',
+0002b0c0: 273a 2729 290a 2020 2020 6465 6661 756c  ':')).    defaul
+0002b0d0: 743d 6f70 7473 2e67 6574 2827 6465 6661  t=opts.get('defa
+0002b0e0: 756c 7427 2c46 616c 7365 290a 2020 2020  ult',False).    
+0002b0f0: 6f75 743d 6f70 7473 2e67 6574 2827 6f75  out=opts.get('ou
+0002b100: 7427 2c27 7374 7227 290a 2020 2020 6361  t','str').    ca
+0002b110: 7365 3d6f 7074 732e 6765 7428 2763 6173  se=opts.get('cas
+0002b120: 6527 2c27 6c6f 7765 7227 290a 2020 2020  e','lower').    
+0002b130: 2320 4672 6f6d 2069 666e 616d 6520 286e  # From ifname (n
+0002b140: 6574 776f 726b 2064 6576 6963 6520 6e61  etwork device na
+0002b150: 6d65 290a 2020 2020 6966 6e61 6d65 3d6f  me).    ifname=o
+0002b160: 7074 732e 6765 7428 2769 666e 616d 6527  pts.get('ifname'
+0002b170: 2c46 616c 7365 290a 2020 2020 6966 2069  ,False).    if i
+0002b180: 666e 616d 6520 6973 2054 7275 6520 616e  fname is True an
+0002b190: 6420 6973 696e 7374 616e 6365 2873 7263  d isinstance(src
+0002b1a0: 2c73 7472 293a 0a20 2020 2020 2020 2074  ,str):.        t
+0002b1b0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+0002b1c0: 7320 3d20 736f 636b 6574 2e73 6f63 6b65  s = socket.socke
+0002b1d0: 7428 736f 636b 6574 2e41 465f 494e 4554  t(socket.AF_INET
+0002b1e0: 2c20 736f 636b 6574 2e53 4f43 4b5f 4447  , socket.SOCK_DG
+0002b1f0: 5241 4d29 0a20 2020 2020 2020 2020 2020  RAM).           
+0002b200: 2069 6620 5079 5665 7228 3329 3a0a 2020   if PyVer(3):.  
+0002b210: 2020 2020 2020 2020 2020 2020 2020 696e                in
+0002b220: 666f 203d 2066 636e 746c 2e69 6f63 746c  fo = fcntl.ioctl
+0002b230: 2873 2e66 696c 656e 6f28 292c 2030 7838  (s.fileno(), 0x8
+0002b240: 3932 372c 2020 7374 7275 6374 2e70 6163  927,  struct.pac
+0002b250: 6b28 2732 3536 7327 2c20 4279 7465 7328  k('256s', Bytes(
+0002b260: 7372 635b 3a31 355d 2c65 6e63 6f64 653d  src[:15],encode=
+0002b270: 2775 7466 2d38 2729 2929 0a20 2020 2020  'utf-8'))).     
+0002b280: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002b290: 6e20 273a 272e 6a6f 696e 285b 2725 3032  n ':'.join(['%02
+0002b2a0: 7827 2025 2063 6861 7220 666f 7220 6368  x' % char for ch
+0002b2b0: 6172 2069 6e20 696e 666f 5b31 383a 3234  ar in info[18:24
+0002b2c0: 5d5d 290a 2020 2020 2020 2020 2020 2020  ]]).            
+0002b2d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0002b2e0: 2020 2020 2020 696e 666f 203d 2066 636e        info = fcn
+0002b2f0: 746c 2e69 6f63 746c 2873 2e66 696c 656e  tl.ioctl(s.filen
+0002b300: 6f28 292c 2030 7838 3932 372c 2020 7374  o(), 0x8927,  st
+0002b310: 7275 6374 2e70 6163 6b28 2732 3536 7327  ruct.pack('256s'
+0002b320: 2c20 7372 635b 3a31 355d 2929 0a20 2020  , src[:15])).   
+0002b330: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0002b340: 7572 6e20 273a 272e 6a6f 696e 285b 2725  urn ':'.join(['%
+0002b350: 3032 7827 2025 206f 7264 2863 6861 7229  02x' % ord(char)
+0002b360: 2066 6f72 2063 6861 7220 696e 2069 6e66   for char in inf
+0002b370: 6f5b 3138 3a32 345d 5d29 0a20 2020 2020  o[18:24]]).     
+0002b380: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+0002b390: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+0002b3a0: 6661 756c 740a 0a20 2020 2064 6566 2069  fault..    def i
+0002b3b0: 6e74 3273 7472 2873 7263 2c73 796d 293a  nt2str(src,sym):
+0002b3c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0002b3d0: 273a 272e 6a6f 696e 285b 277b 7d7b 7d27  ':'.join(['{}{}'
+0002b3e0: 2e66 6f72 6d61 7428 612c 2062 2920 666f  .format(a, b) fo
+0002b3f0: 7220 612c 2062 2069 6e20 7a69 7028 2a5b  r a, b in zip(*[
+0002b400: 6974 6572 2827 7b3a 3031 3278 7d27 2e66  iter('{:012x}'.f
+0002b410: 6f72 6d61 7428 7372 6329 295d 2a32 295d  ormat(src))]*2)]
+0002b420: 290a 2020 2020 6465 6620 7374 7232 696e  ).    def str2in
+0002b430: 7428 7372 6329 3a0a 2020 2020 2020 2020  t(src):.        
+0002b440: 7265 7475 726e 2069 6e74 2873 7263 2e6c  return int(src.l
+0002b450: 6f77 6572 2829 2e72 6570 6c61 6365 2827  ower().replace('
+0002b460: 2d27 2c27 2729 2e72 6570 6c61 6365 2827  -','').replace('
+0002b470: 3a27 2c27 2729 2c20 3136 290a 2020 2020  :',''), 16).    
+0002b480: 6966 2054 7970 6528 7372 632c 2762 7974  if Type(src,'byt
+0002b490: 6573 2729 3a20 0a20 2020 2020 2020 2069  es'): .        i
+0002b4a0: 6620 6c65 6e28 7372 6329 203d 3d20 363a  f len(src) == 6:
+0002b4b0: 2023 2066 6f72 6d61 7420 6227 5c78 3030   # format b'\x00
+0002b4c0: 5c78 6465 345c 7865 662e 5c78 6634 270a  \xde4\xef.\xf4'.
+0002b4d0: 2020 2020 2020 2020 2020 2020 7372 633d              src=
+0002b4e0: 636f 6465 6373 2e65 6e63 6f64 6528 7372  codecs.encode(sr
+0002b4f0: 632c 2768 6578 2729 2020 2320 666f 726d  c,'hex')  # form
+0002b500: 6174 2062 2730 3064 6533 3465 6632 6566  at b'00de34ef2ef
+0002b510: 3427 0a20 2020 2020 2020 2073 7263 3d53  4'.        src=S
+0002b520: 7472 2873 7263 290a 2020 2020 6966 2069  tr(src).    if i
+0002b530: 7369 6e73 7461 6e63 6528 7372 632c 7374  sinstance(src,st
+0002b540: 7229 3a0a 2020 2020 2020 2020 7372 633d  r):.        src=
+0002b550: 7372 632e 7374 7269 7028 290a 2020 2020  src.strip().    
+0002b560: 2020 2020 2320 6d61 6b65 2073 7572 6520      # make sure 
+0002b570: 7468 6520 666f 726d 6174 0a20 2020 2020  the format.     
+0002b580: 2020 2069 6620 3132 203c 3d20 6c65 6e28     if 12 <= len(
+0002b590: 7372 6329 203c 3d20 3137 3a0a 2020 2020  src) <= 17:.    
+0002b5a0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+0002b5b0: 205b 273a 272c 272d 275d 3a0a 2020 2020   [':','-']:.    
+0002b5c0: 2020 2020 2020 2020 2020 2020 7372 633d              src=
+0002b5d0: 7372 632e 7265 706c 6163 6528 692c 2727  src.replace(i,''
+0002b5e0: 290a 2020 2020 2020 2020 2020 2020 7372  ).            sr
+0002b5f0: 633d 4a6f 696e 285b 7372 635b 693a 692b  c=Join([src[i:i+
+0002b600: 325d 2066 6f72 2069 2069 6e20 7261 6e67  2] for i in rang
+0002b610: 6528 302c 3132 2c32 295d 2c73 796d 626f  e(0,12,2)],symbo
+0002b620: 6c3d 273a 2729 0a20 2020 2020 2020 2023  l=':').        #
+0002b630: 2043 6865 636b 2074 6865 206e 6f72 6d61   Check the norma
+0002b640: 6c20 6d61 6320 666f 726d 6174 0a20 2020  l mac format.   
+0002b650: 2020 2020 206f 6374 6574 7320 3d20 7372       octets = sr
+0002b660: 632e 7370 6c69 7428 273a 2729 0a20 2020  c.split(':').   
+0002b670: 2020 2020 2069 6620 6c65 6e28 6f63 7465       if len(octe
+0002b680: 7473 2920 213d 2036 3a20 7265 7475 726e  ts) != 6: return
+0002b690: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
+0002b6a0: 2066 6f72 2069 2069 6e20 6f63 7465 7473   for i in octets
+0002b6b0: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
+0002b6c0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+0002b6d0: 2020 6966 206c 656e 2869 2920 213d 2032    if len(i) != 2
+0002b6e0: 206f 7220 696e 7428 692c 2031 3629 203e   or int(i, 16) >
+0002b6f0: 2032 3535 3a0a 2020 2020 2020 2020 2020   255:.          
+0002b700: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0002b710: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+0002b720: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+0002b730: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002b740: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
+0002b750: 2020 6966 206f 7574 2069 6e20 5b69 6e74    if out in [int
+0002b760: 2c27 696e 7427 2c27 6e75 6d62 6572 275d  ,'int','number']
+0002b770: 3a20 7265 7475 726e 2073 7472 3269 6e74  : return str2int
+0002b780: 2873 7263 290a 2020 2020 2020 2020 6966  (src).        if
+0002b790: 2073 796d 626f 6c20 213d 2027 3a27 3a20   symbol != ':': 
+0002b7a0: 7372 633d 7372 632e 7265 706c 6163 6528  src=src.replace(
+0002b7b0: 273a 272c 7379 6d62 6f6c 290a 2020 2020  ':',symbol).    
+0002b7c0: 2020 2020 6966 2063 6173 6520 3d3d 2027      if case == '
+0002b7d0: 7570 7065 7227 3a20 7265 7475 726e 2073  upper': return s
+0002b7e0: 7263 2e75 7070 6572 2829 0a20 2020 2020  rc.upper().     
+0002b7f0: 2020 2072 6574 7572 6e20 7372 632e 6c6f     return src.lo
+0002b800: 7765 7228 290a 2020 2020 656c 6966 2069  wer().    elif i
+0002b810: 7369 6e73 7461 6e63 6528 7372 632c 696e  sinstance(src,in
+0002b820: 7429 2061 6e64 206e 6f74 2069 7369 6e73  t) and not isins
+0002b830: 7461 6e63 6528 7372 632c 626f 6f6c 293a  tance(src,bool):
+0002b840: 0a20 2020 2020 2020 2069 6620 6f75 7420  .        if out 
+0002b850: 696e 205b 696e 742c 2769 6e74 272c 276e  in [int,'int','n
+0002b860: 756d 6265 7227 5d3a 2072 6574 7572 6e20  umber']: return 
+0002b870: 7372 630a 2020 2020 2020 2020 7372 633d  src.        src=
+0002b880: 696e 7432 7374 7228 7372 632c 7379 6d62  int2str(src,symb
+0002b890: 6f6c 290a 2020 2020 2020 2020 6966 2063  ol).        if c
+0002b8a0: 6173 6520 3d3d 2027 7570 7065 7227 3a20  ase == 'upper': 
+0002b8b0: 7265 7475 726e 2073 7263 2e75 7070 6572  return src.upper
+0002b8c0: 2829 0a20 2020 2020 2020 2072 6574 7572  ().        retur
+0002b8d0: 6e20 7372 632e 6c6f 7765 7228 290a 2020  n src.lower().  
+0002b8e0: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
+0002b8f0: 0a0a 6465 6620 4765 7449 666e 616d 6528  ..def GetIfname(
+0002b900: 6d61 6329 3a0a 2020 2020 6e65 745f 6469  mac):.    net_di
+0002b910: 723d 272f 7379 732f 636c 6173 732f 6e65  r='/sys/class/ne
+0002b920: 7427 0a20 2020 2069 6620 6f73 2e70 6174  t'.    if os.pat
+0002b930: 682e 6973 6469 7228 6e65 745f 6469 7229  h.isdir(net_dir)
+0002b940: 3a0a 2020 2020 2020 2020 6469 7270 6174  :.        dirpat
+0002b950: 682c 6469 726e 616d 6573 2c66 696c 656e  h,dirnames,filen
+0002b960: 616d 6573 203d 206c 6973 7428 6f73 2e77  ames = list(os.w
+0002b970: 616c 6b28 6e65 745f 6469 7229 295b 305d  alk(net_dir))[0]
+0002b980: 0a20 2020 2020 2020 2066 6f72 2064 6576  .        for dev
+0002b990: 2069 6e20 6469 726e 616d 6573 3a0a 2020   in dirnames:.  
+0002b9a0: 2020 2020 2020 2020 2020 666d 6163 3d63            fmac=c
+0002b9b0: 6174 2827 7b7d 2f7b 7d2f 6164 6472 6573  at('{}/{}/addres
+0002b9c0: 7327 2e66 6f72 6d61 7428 6469 7270 6174  s'.format(dirpat
+0002b9d0: 682c 6465 7629 2c6e 6f5f 656e 645f 6e65  h,dev),no_end_ne
+0002b9e0: 776c 696e 653d 5472 7565 290a 2020 2020  wline=True).    
+0002b9f0: 2020 2020 2020 2020 6966 2074 7970 6528          if type(
+0002ba00: 666d 6163 2920 6973 2073 7472 2061 6e64  fmac) is str and
+0002ba10: 2066 6d61 632e 7374 7269 7028 292e 6c6f   fmac.strip().lo
+0002ba20: 7765 7228 2920 3d3d 206d 6163 2e6c 6f77  wer() == mac.low
+0002ba30: 6572 2829 3a0a 2020 2020 2020 2020 2020  er():.          
+0002ba40: 2020 2020 2020 7265 7475 726e 2064 6576        return dev
+0002ba50: 0a0a 6465 6620 5061 7468 282a 696e 702c  ..def Path(*inp,
+0002ba60: 2a2a 6f70 7473 293a 0a20 2020 2027 2727  **opts):.    '''
+0002ba70: 0a20 2020 2047 6574 2050 6174 6820 6f66  .    Get Path of
+0002ba80: 2069 6e70 7574 0a20 2020 2069 6e70 7574   input.    input
+0002ba90: 7329 0a20 2020 2020 2020 7e20 2020 2020  s).       ~     
+0002baa0: 2020 3a20 686f 6d65 2070 6174 680a 2020    : home path.  
+0002bab0: 2020 2020 207e 3c75 7365 723e 203a 2075       ~<user> : u
+0002bac0: 7365 7227 7320 686f 6d65 2070 6174 680a  ser's home path.
+0002bad0: 2020 2020 2020 204e 6f6e 6520 2020 203a         None    :
+0002bae0: 2063 7572 7265 6e74 2070 6174 680a 2020   current path.  
+0002baf0: 2020 2020 205f 5f66 696c 655f 5f3a 2063       __file__: c
+0002bb00: 7572 7265 6e74 2070 7974 686f 6e20 7363  urrent python sc
+0002bb10: 7269 7074 2066 696c 6520 7061 7468 0a20  ript file path. 
+0002bb20: 2020 2020 2020 5f5f 6d6f 645f 5f20 3a20        __mod__ : 
+0002bb30: 5468 6973 2070 7974 686f 6e20 7363 7269  This python scri
+0002bb40: 7074 2066 696c 6520 7061 7468 0a20 2020  pt file path.   
+0002bb50: 2020 2020 6669 6c65 2020 2020 3a20 7468      file    : th
+0002bb60: 6520 6669 6c65 2773 2070 6174 680a 2020  e file's path.  
+0002bb70: 2020 2020 205b 6c69 7374 5d20 203a 2063       [list]  : c
+0002bb80: 6f6e 7665 7274 2074 6f20 7061 7468 2072  onvert to path r
+0002bb90: 756c 6520 0a20 2020 2020 2020 6f62 6a20  ule .       obj 
+0002bba0: 2020 2020 3a20 7375 7070 6f72 7420 6675      : support fu
+0002bbb0: 6e63 7469 6f6e 2c20 6d6f 6475 6c65 2c20  nction, module, 
+0002bbc0: 636c 6173 732c 2069 6e73 7461 6e63 650a  class, instance.
+0002bbd0: 0a20 2020 2072 656d 6f76 655f 646f 7420  .    remove_dot 
+0002bbe0: 3a20 0a20 2020 2020 2054 7275 6520 3a20  : .      True : 
+0002bbf0: 2864 6566 6175 6c74 2920 2f61 2f62 2f2e  (default) /a/b/.
+0002bc00: 2f2e 2e2f 6320 3d3e 202f 612f 630a 2020  /../c => /a/c.  
+0002bc10: 2020 2020 4661 6c73 653a 202f 612f 622f      False: /a/b/
+0002bc20: 2e2f 2e2e 2f63 203d 3e20 2f61 2f62 2f2e  ./../c => /a/b/.
+0002bc30: 2f2e 2e2f 630a 2020 2020 6572 726f 7220  /../c.    error 
+0002bc40: 3a20 0a20 2020 2020 2046 616c 7365 3a20  : .      False: 
+0002bc50: 6465 6661 756c 742c 2069 6620 7061 7468  default, if path
+0002bc60: 2069 7373 7565 2074 6865 6e20 7265 7475   issue then retu
+0002bc70: 726e 2065 7272 6f72 0a20 2020 2020 2054  rn error.      T
+0002bc80: 7275 6520 3a20 6966 2070 6174 6820 6973  rue : if path is
+0002bc90: 7375 6520 7468 656e 2069 676e 6f72 650a  sue then ignore.
+0002bca0: 2020 2020 6f75 7420 3a0a 2020 2020 2073      out :.     s
+0002bcb0: 7472 203a 2064 6566 6175 6c74 3a20 7265  tr : default: re
+0002bcc0: 7475 726e 2070 6174 6820 7374 7269 6e67  turn path string
+0002bcd0: 0a20 2020 2020 6c69 7374 3a20 7265 7475  .     list: retu
+0002bce0: 726e 206c 6973 7420 666f 726d 6174 0a20  rn list format. 
+0002bcf0: 2020 2020 2020 2d20 666f 7263 655f 726f        - force_ro
+0002bd00: 6f74 203a 2064 6566 6175 6c74 2046 616c  ot : default Fal
+0002bd10: 7365 2c20 5472 7565 3a20 5b27 272c 2761  se, True: ['','a
+0002bd20: 272c 2762 275d 206f 7220 5b27 6127 2c27  ','b'] or ['a','
+0002bd30: 6227 5d20 3d3e 2027 2f61 2f62 270a 0a20  b'] => '/a/b'.. 
+0002bd40: 2020 2020 272f 612f 622f 6327 203d 3e20      '/a/b/c' => 
+0002bd50: 5b27 272c 2761 272c 2762 272c 2763 275d  ['','a','b','c']
+0002bd60: 2028 6f75 743d 6c69 7374 290a 2020 2020   (out=list).    
+0002bd70: 2027 612f 622f 6327 2020 3d3e 205b 2761   'a/b/c'  => ['a
+0002bd80: 272c 2762 272c 2763 275d 2020 2020 286f  ','b','c']    (o
+0002bd90: 7574 3d6c 6973 7429 0a20 2020 2020 5b27  ut=list).     ['
+0002bda0: 272c 2761 272c 2762 272c 2763 275d 2020  ','a','b','c']  
+0002bdb0: 3d3e 2027 2f61 2f62 2f63 2728 6f75 743d  => '/a/b/c'(out=
+0002bdc0: 7374 7229 0a20 2020 2020 5b27 6127 2c27  str).     ['a','
+0002bdd0: 6227 2c27 6327 5d20 2020 2020 3d3e 2027  b','c']     => '
+0002bde0: 612f 622f 6327 2028 6f75 743d 7374 7229  a/b/c' (out=str)
+0002bdf0: 0a20 2020 2027 2727 0a20 2020 2073 796d  .    '''.    sym
+0002be00: 3d6f 7074 732e 6765 7428 2773 796d 272c  =opts.get('sym',
+0002be10: 272f 2729 0a20 2020 206f 7574 3d6f 7074  '/').    out=opt
+0002be20: 732e 6765 7428 276f 7574 272c 2773 7472  s.get('out','str
+0002be30: 2729 0a20 2020 2065 7869 7374 3d6f 7074  ').    exist=opt
+0002be40: 732e 6765 7428 2765 7869 7374 272c 4661  s.get('exist',Fa
+0002be50: 6c73 6529 0a20 2020 2064 6566 6175 6c74  lse).    default
+0002be60: 3d6f 7074 732e 6765 7428 2764 6566 6175  =opts.get('defau
+0002be70: 6c74 272c 4661 6c73 6529 0a20 2020 2072  lt',False).    r
+0002be80: 656d 6f76 655f 646f 743d 6f70 7473 2e67  emove_dot=opts.g
+0002be90: 6574 2827 7265 6d6f 7665 5f64 6f74 272c  et('remove_dot',
+0002bea0: 5472 7565 290a 2020 2020 6572 723d 6f70  True).    err=op
+0002beb0: 7473 2e67 6574 2827 6572 7227 2c6f 7074  ts.get('err',opt
+0002bec0: 732e 6765 7428 2765 7272 6f72 272c 4661  s.get('error',Fa
+0002bed0: 6c73 6529 290a 2020 2020 6465 6661 756c  lse)).    defaul
+0002bee0: 743d 6f70 7473 2e67 6574 2827 6465 6661  t=opts.get('defa
+0002bef0: 756c 7427 2c46 616c 7365 290a 2020 2020  ult',False).    
+0002bf00: 6261 7365 5f64 6972 3d4e 6f6e 650a 2020  base_dir=None.  
+0002bf10: 2020 6966 206e 6f74 2069 6e70 3a0a 2020    if not inp:.  
+0002bf20: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+0002bf30: 2020 2020 2020 2062 6173 655f 6469 723d         base_dir=
+0002bf40: 6f73 2e65 6e76 6972 6f6e 5b27 5057 4427  os.environ['PWD'
+0002bf50: 5d0a 2020 2020 2020 2020 6578 6365 7074  ].        except
+0002bf60: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
+0002bf70: 7365 5f64 6972 3d6f 732e 7061 7468 2e64  se_dir=os.path.d
+0002bf80: 6972 6e61 6d65 286f 732e 7061 7468 2e72  irname(os.path.r
+0002bf90: 6561 6c70 6174 6828 2869 6e73 7065 6374  ealpath((inspect
+0002bfa0: 2e73 7461 636b 2829 5b2d 315d 295b 315d  .stack()[-1])[1]
+0002bfb0: 2929 0a20 2020 2065 6c69 6620 696e 703a  )).    elif inp:
+0002bfc0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+0002bfd0: 7374 616e 6365 2869 6e70 5b30 5d2c 7374  stance(inp[0],st
+0002bfe0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+0002bff0: 6966 206f 732e 7061 7468 2e69 7366 696c  if os.path.isfil
+0002c000: 6528 696e 705b 305d 293a 0a20 2020 2020  e(inp[0]):.     
+0002c010: 2020 2020 2020 2020 2020 2062 6173 655f             base_
+0002c020: 6469 723d 6f73 2e70 6174 682e 6469 726e  dir=os.path.dirn
+0002c030: 616d 6528 6f73 2e70 6174 682e 6162 7370  ame(os.path.absp
+0002c040: 6174 6828 696e 705b 305d 2929 0a20 2020  ath(inp[0])).   
+0002c050: 2020 2020 2020 2020 2065 6c69 6620 696e           elif in
+0002c060: 705b 305d 203d 3d20 275f 5f6d 6f64 5f5f  p[0] == '__mod__
+0002c070: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+0002c080: 2020 2023 5468 6973 206d 6f64 756c 6520     #This module 
+0002c090: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
+0002c0a0: 2020 2020 2062 6173 655f 6469 723d 6f73       base_dir=os
+0002c0b0: 2e70 6174 682e 6469 726e 616d 6528 6f73  .path.dirname(os
+0002c0c0: 2e70 6174 682e 6162 7370 6174 6828 5f5f  .path.abspath(__
+0002c0d0: 6669 6c65 5f5f 2929 2023 204e 6f74 2069  file__)) # Not i
+0002c0e0: 6e70 7574 2074 6865 6e20 6765 7420 6375  nput then get cu
+0002c0f0: 7272 656e 7420 7061 7468 0a20 2020 2020  rrent path.     
+0002c100: 2020 2020 2020 2065 6c69 6620 696e 705b         elif inp[
+0002c110: 305d 203d 3d20 275f 5f66 696c 655f 5f27  0] == '__file__'
+0002c120: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0002c130: 2020 2347 6574 2043 616c 6c65 7220 6675    #Get Caller fu
+0002c140: 6e63 7469 6f6e 2773 2046 696c 656e 616d  nction's Filenam
+0002c150: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0002c160: 2020 6d79 5f66 696c 653d 696e 7370 6563    my_file=inspec
+0002c170: 742e 6765 7466 696c 6528 4675 6e63 7469  t.getfile(Functi
+0002c180: 6f6e 4e61 6d65 2870 6172 656e 743d 312c  onName(parent=1,
+0002c190: 6f62 6a3d 5472 7565 295b 315d 2920 0a20  obj=True)[1]) . 
+0002c1a0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0002c1b0: 6173 655f 6469 723d 6f73 2e70 6174 682e  ase_dir=os.path.
+0002c1c0: 6469 726e 616d 6528 6f73 2e70 6174 682e  dirname(os.path.
+0002c1d0: 6162 7370 6174 6828 6d79 5f66 696c 6529  abspath(my_file)
+0002c1e0: 2920 2320 4765 7420 6669 6c65 6e61 6d65  ) # Get filename
+0002c1f0: 2070 6174 680a 2020 2020 2020 2020 2020   path.          
+0002c200: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002c210: 2020 2020 2020 2020 6261 7365 5f64 6972          base_dir
+0002c220: 3d69 6e70 5b30 5d0a 2020 2020 2020 2020  =inp[0].        
+0002c230: 656c 6966 2054 7970 6528 696e 705b 305d  elif Type(inp[0]
+0002c240: 2c28 2766 756e 6374 696f 6e27 2c27 6d6f  ,('function','mo
+0002c250: 6475 6c65 272c 2763 6c61 7373 6f62 6a27  dule','classobj'
+0002c260: 2c27 696e 7374 616e 6365 2729 293a 0a20  ,'instance')):. 
+0002c270: 2020 2020 2020 2020 2020 206d 795f 6669             my_fi
+0002c280: 6c65 3d69 6e73 7065 6374 2e67 6574 6669  le=inspect.getfi
+0002c290: 6c65 2869 6e70 5b30 5d29 2023 2047 6574  le(inp[0]) # Get
+0002c2a0: 206f 626a 2773 2066 696c 656e 616d 650a   obj's filename.
+0002c2b0: 2020 2020 2020 2020 2020 2020 6261 7365              base
+0002c2c0: 5f64 6972 3d6f 732e 7061 7468 2e64 6972  _dir=os.path.dir
+0002c2d0: 6e61 6d65 286f 732e 7061 7468 2e61 6273  name(os.path.abs
+0002c2e0: 7061 7468 286d 795f 6669 6c65 2929 2020  path(my_file))  
+0002c2f0: 0a20 2020 2066 756c 6c5f 7061 7468 3d5b  .    full_path=[
+0002c300: 5d0a 2020 2020 6966 2069 7369 6e73 7461  ].    if isinsta
+0002c310: 6e63 6528 6261 7365 5f64 6972 2c73 7472  nce(base_dir,str
+0002c320: 293a 0a20 2020 2020 2020 2066 756c 6c5f  ):.        full_
+0002c330: 7061 7468 3d62 6173 655f 6469 722e 7370  path=base_dir.sp
+0002c340: 6c69 7428 7379 6d29 0a20 2020 2065 6c69  lit(sym).    eli
+0002c350: 6620 6973 696e 7374 616e 6365 2869 6e70  f isinstance(inp
+0002c360: 5b30 5d2c 286c 6973 742c 7475 706c 6529  [0],(list,tuple)
+0002c370: 293a 0a20 2020 2020 2020 2066 756c 6c5f  ):.        full_
+0002c380: 7061 7468 3d6c 6973 7428 696e 705b 305d  path=list(inp[0]
+0002c390: 290a 2020 2020 6966 2066 756c 6c5f 7061  ).    if full_pa
+0002c3a0: 7468 3a0a 2020 2020 2020 2020 6966 2066  th:.        if f
+0002c3b0: 756c 6c5f 7061 7468 5b30 5d20 3d3d 2027  ull_path[0] == '
+0002c3c0: 7e27 206f 7220 2866 756c 6c5f 7061 7468  ~' or (full_path
+0002c3d0: 5b30 5d20 616e 6420 6675 6c6c 5f70 6174  [0] and full_pat
+0002c3e0: 685b 305d 5b30 5d20 3d3d 2027 7e27 293a  h[0][0] == '~'):
+0002c3f0: 2020 2020 2020 2320 7e20 6f72 207e 3c75        # ~ or ~<u
+0002c400: 7365 723e 2073 7479 6c65 0a20 2020 2020  ser> style.     
+0002c410: 2020 2020 2020 2023 6675 6c6c 5f70 6174         #full_pat
+0002c420: 683d 6f73 2e65 6e76 6972 6f6e 5b27 484f  h=os.environ['HO
+0002c430: 4d45 275d 2e73 706c 6974 2873 796d 292b  ME'].split(sym)+
+0002c440: 6675 6c6c 5f70 6174 685b 313a 5d0a 2020  full_path[1:].  
+0002c450: 2020 2020 2020 2020 2020 6675 6c6c 5f70            full_p
+0002c460: 6174 683d 6f73 2e70 6174 682e 6578 7061  ath=os.path.expa
+0002c470: 6e64 7573 6572 2866 756c 6c5f 7061 7468  nduser(full_path
+0002c480: 5b30 5d29 2e73 706c 6974 2873 796d 292b  [0]).split(sym)+
+0002c490: 6675 6c6c 5f70 6174 685b 313a 5d0a 2320  full_path[1:].# 
+0002c4a0: 2020 2020 2020 2065 6c69 6620 6675 6c6c         elif full
+0002c4b0: 5f70 6174 685b 305d 2061 6e64 2066 756c  _path[0] and ful
+0002c4c0: 6c5f 7061 7468 5b30 5d5b 305d 203d 3d20  l_path[0][0] == 
+0002c4d0: 277e 273a 2023 207e 3c75 7365 723e 2073  '~': # ~<user> s
+0002c4e0: 7479 6c65 0a23 2020 2020 2020 2020 2020  tyle.#          
+0002c4f0: 2020 6675 6c6c 5f70 6174 683d 6f73 2e70    full_path=os.p
+0002c500: 6174 682e 6578 7061 6e64 7573 6572 2866  ath.expanduser(f
+0002c510: 756c 6c5f 7061 7468 5b30 5d29 2e73 706c  ull_path[0]).spl
+0002c520: 6974 2873 796d 292b 6675 6c6c 5f70 6174  it(sym)+full_pat
+0002c530: 685b 313a 5d0a 2020 2020 6966 2072 656d  h[1:].    if rem
+0002c540: 6f76 655f 646f 743a 0a20 2020 2020 2020  ove_dot:.       
+0002c550: 206e 6670 3d5b 5d0a 2020 2020 2020 2020   nfp=[].        
+0002c560: 666f 7220 6920 696e 2066 756c 6c5f 7061  for i in full_pa
+0002c570: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
+0002c580: 6966 2069 203d 3d20 272e 2e27 3a20 2372  if i == '..': #r
+0002c590: 656d 6f76 6520 272e 2e27 0a20 2020 2020  emove '..'.     
+0002c5a0: 2020 2020 2020 2020 2020 2069 6620 6e66             if nf
+0002c5b0: 703a 0a20 2020 2020 2020 2020 2020 2020  p:.             
+0002c5c0: 2020 2020 2020 2023 6b65 6570 2072 6f6f         #keep roo
+0002c5d0: 7420 7061 7468 2028 272f 2729 0a20 2020  t path ('/').   
+0002c5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c5f0: 2069 6620 6c65 6e28 6e66 7029 3d3d 313a   if len(nfp)==1:
+0002c600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c610: 2020 2020 2020 2020 2069 6620 6e66 705b           if nfp[
+0002c620: 305d 3a0a 2020 2020 2020 2020 2020 2020  0]:.            
+0002c630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c640: 6465 6c20 6e66 705b 2d31 5d0a 2020 2020  del nfp[-1].    
+0002c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c660: 2020 2020 656c 6966 2065 7272 3a0a 2020      elif err:.  
+0002c670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c680: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0002c690: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
+0002c6a0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0002c6b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0002c6c0: 2020 2020 2020 2020 2020 2064 656c 206e             del n
+0002c6d0: 6670 5b2d 315d 0a20 2020 2020 2020 2020  fp[-1].         
+0002c6e0: 2020 2020 2020 2065 6c69 6620 6572 723a         elif err:
+0002c6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c700: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
+0002c710: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
+0002c720: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0002c730: 2020 2020 2020 6966 2069 2021 3d20 272e        if i != '.
+0002c740: 273a 2023 7265 6d6f 7665 2027 2e27 0a20  ': #remove '.'. 
+0002c750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c760: 2020 206e 6670 2e61 7070 656e 6428 6929     nfp.append(i)
+0002c770: 0a20 2020 2020 2020 2066 756c 6c5f 7061  .        full_pa
+0002c780: 7468 3d6e 6670 0a20 2020 2066 6f72 2069  th=nfp.    for i
+0002c790: 6920 696e 2069 6e70 5b31 3a5d 3a20 2320  i in inp[1:]: # 
+0002c7a0: 6164 6420 6578 7472 6120 696e 7075 740a  add extra input.
+0002c7b0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0002c7c0: 7461 6e63 6528 6969 2c73 7472 293a 0a20  tance(ii,str):. 
+0002c7d0: 2020 2020 2020 2020 2020 2066 6f72 207a             for z
+0002c7e0: 7a20 696e 2069 692e 7370 6c69 7428 7379  z in ii.split(sy
+0002c7f0: 6d29 3a0a 2020 2020 2020 2020 2020 2020  m):.            
+0002c800: 2020 2020 6966 2072 656d 6f76 655f 646f      if remove_do
+0002c810: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+0002c820: 2020 2020 2020 2069 6620 7a7a 203d 3d20         if zz == 
+0002c830: 272e 2720 6f72 206e 6f74 2054 7970 6528  '.' or not Type(
+0002c840: 7a7a 2c27 7374 7227 2c64 6174 613d 5472  zz,'str',data=Tr
+0002c850: 7565 293a 2063 6f6e 7469 6e75 650a 2020  ue): continue.  
+0002c860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c870: 2020 6966 207a 7a20 3d3d 2027 2e2e 273a    if zz == '..':
+0002c880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002c890: 2020 2020 2020 2020 2069 6620 6675 6c6c           if full
+0002c8a0: 5f70 6174 683a 0a20 2020 2020 2020 2020  _path:.         
+0002c8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c8c0: 2020 2023 6b65 6570 2072 6f6f 7420 7061     #keep root pa
+0002c8d0: 7468 2028 272f 2729 0a20 2020 2020 2020  th ('/').       
+0002c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c8f0: 2020 2020 2069 6620 6c65 6e28 6675 6c6c       if len(full
+0002c900: 5f70 6174 6829 3d3d 313a 0a20 2020 2020  _path)==1:.     
+0002c910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c920: 2020 2020 2020 2020 2020 2069 6620 6675             if fu
+0002c930: 6c6c 5f70 6174 685b 305d 3a0a 2020 2020  ll_path[0]:.    
+0002c940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c960: 6465 6c20 6675 6c6c 5f70 6174 685b 2d31  del full_path[-1
+0002c970: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+0002c980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c990: 2020 656c 6966 2065 7272 3a0a 2020 2020    elif err:.    
+0002c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c9c0: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+0002c9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002c9e0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0002c9f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca10: 2064 656c 2066 756c 6c5f 7061 7468 5b2d   del full_path[-
+0002ca20: 315d 0a20 2020 2020 2020 2020 2020 2020  1].             
+0002ca30: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002ca40: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+0002ca50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca60: 656c 6966 2065 7272 3a0a 2020 2020 2020  elif err:.      
+0002ca70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002ca80: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+0002ca90: 6175 6c74 0a20 2020 2020 2020 2020 2020  ault.           
+0002caa0: 2020 2020 2066 756c 6c5f 7061 7468 2e61       full_path.a
+0002cab0: 7070 656e 6428 7a7a 290a 2020 2020 6966  ppend(zz).    if
+0002cac0: 206f 7574 2069 6e20 5b73 7472 2c27 7374   out in [str,'st
+0002cad0: 7227 5d3a 0a20 2020 2020 2020 2069 6620  r']:.        if 
+0002cae0: 6e6f 7420 6675 6c6c 5f70 6174 683a 2072  not full_path: r
+0002caf0: 6574 7572 6e20 2727 0a20 2020 2020 2020  eturn ''.       
+0002cb00: 2072 743d 4a6f 696e 2866 756c 6c5f 7061   rt=Join(full_pa
+0002cb10: 7468 2c73 796d 626f 6c3d 7379 6d29 0a20  th,symbol=sym). 
+0002cb20: 2020 2020 2020 2069 6620 6f70 7473 2e67         if opts.g
+0002cb30: 6574 2827 666f 7263 655f 726f 6f74 272c  et('force_root',
+0002cb40: 6f70 7473 2e67 6574 2827 726f 6f74 272c  opts.get('root',
+0002cb50: 4661 6c73 6529 293a 0a20 2020 2020 2020  False)):.       
+0002cb60: 2020 2020 2069 6620 7274 5b30 5d20 213d       if rt[0] !=
+0002cb70: 2027 2f27 3a20 7265 7475 726e 2027 2f27   '/': return '/'
+0002cb80: 2b72 740a 2020 2020 2020 2020 7265 7475  +rt.        retu
+0002cb90: 726e 2072 740a 2020 2020 656c 7365 3a0a  rn rt.    else:.
+0002cba0: 2020 2020 2020 2020 7265 7475 726e 2066          return f
+0002cbb0: 756c 6c5f 7061 7468 0a0a 6465 6620 4d65  ull_path..def Me
+0002cbc0: 7267 6553 7472 2861 2c62 2c5f 7479 7065  rgeStr(a,b,_type
+0002cbd0: 3d4e 6f6e 6529 3a0a 2020 2020 6966 2061  =None):.    if a
+0002cbe0: 2069 7320 4e6f 6e65 2061 6e64 2062 2069   is None and b i
+0002cbf0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0002cc00: 6966 205f 7479 7065 203d 3d20 2762 7974  if _type == 'byt
+0002cc10: 6573 273a 0a20 2020 2020 2020 2020 2020  es':.           
+0002cc20: 2072 6574 7572 6e20 6227 270a 2020 2020   return b''.    
+0002cc30: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0002cc40: 2020 2020 2020 7265 7475 726e 2027 270a        return ''.
+0002cc50: 2020 2020 6966 205f 7479 7065 2069 7320      if _type is 
+0002cc60: 4e6f 6e65 3a0a 2020 2020 2020 2020 6966  None:.        if
+0002cc70: 2061 2069 7320 4e6f 6e65 3a0a 2020 2020   a is None:.    
+0002cc80: 2020 2020 2020 2020 7265 7475 726e 2062          return b
+0002cc90: 0a20 2020 2020 2020 2065 6c69 6620 6220  .        elif b 
+0002cca0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0002ccb0: 2020 2020 2072 6574 7572 6e20 610a 2020       return a.  
+0002ccc0: 2020 2020 2020 656c 6966 2054 7970 6528        elif Type(
+0002ccd0: 6129 203d 3d20 5479 7065 2862 293a 0a20  a) == Type(b):. 
+0002cce0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0002ccf0: 6e20 6120 2b20 620a 2020 2020 2020 2020  n a + b.        
+0002cd00: 656c 6966 2054 7970 6528 6129 203d 3d20  elif Type(a) == 
+0002cd10: 2762 7974 6573 273a 0a20 2020 2020 2020  'bytes':.       
+0002cd20: 2020 2020 2072 6574 7572 6e20 2061 2b42       return  a+B
+0002cd30: 7974 6573 2862 290a 2020 2020 2020 2020  ytes(b).        
+0002cd40: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0002cd50: 2020 7265 7475 726e 2020 612b 5374 7228    return  a+Str(
+0002cd60: 6229 0a20 2020 2065 6c73 653a 0a20 2020  b).    else:.   
+0002cd70: 2020 2020 2069 6620 5f74 7970 6520 696e       if _type in
+0002cd80: 205b 7374 722c 2773 7472 275d 3a0a 2020   [str,'str']:.  
+0002cd90: 2020 2020 2020 2020 2020 6966 2061 2069            if a i
+0002cda0: 7320 4e6f 6e65 3a20 7265 7475 726e 2053  s None: return S
+0002cdb0: 7472 2862 290a 2020 2020 2020 2020 2020  tr(b).          
+0002cdc0: 2020 656c 6966 2062 2069 7320 4e6f 6e65    elif b is None
+0002cdd0: 3a20 7265 7475 726e 2053 7472 2861 290a  : return Str(a).
+0002cde0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0002cdf0: 726e 2053 7472 2861 292b 5374 7228 6229  rn Str(a)+Str(b)
+0002ce00: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+0002ce10: 2020 2020 2020 2020 2020 2069 6620 6120             if a 
+0002ce20: 6973 204e 6f6e 653a 2072 6574 7572 6e20  is None: return 
+0002ce30: 4279 7465 7328 6229 0a20 2020 2020 2020  Bytes(b).       
+0002ce40: 2020 2020 2065 6c69 6620 6220 6973 204e       elif b is N
+0002ce50: 6f6e 653a 2072 6574 7572 6e20 4279 7465  one: return Byte
+0002ce60: 7328 6129 0a20 2020 2020 2020 2020 2020  s(a).           
+0002ce70: 2072 6574 7572 6e20 4279 7465 7328 6129   return Bytes(a)
+0002ce80: 2b42 7974 6573 2862 290a 0a64 6566 2043  +Bytes(b)..def C
+0002ce90: 7574 2873 7263 2c68 6561 645f 6c65 6e3d  ut(src,head_len=
+0002cea0: 4e6f 6e65 2c62 6f64 795f 6c65 6e3d 4e6f  None,body_len=No
+0002ceb0: 6e65 2c6e 6577 5f6c 696e 653d 275c 6e27  ne,new_line='\n'
+0002cec0: 2c6f 7574 3d73 7472 2c66 726f 6e74 5f73  ,out=str,front_s
+0002ced0: 7061 6365 3d4e 6f6e 652c 6e65 776c 696e  pace=None,newlin
+0002cee0: 655f 6865 6164 3d46 616c 7365 293a 0a20  e_head=False):. 
+0002cef0: 2020 2027 2727 0a20 2020 2043 7574 2073     '''.    Cut s
+0002cf00: 7472 696e 6720 7769 7468 206c 656e 6774  tring with lengt
+0002cf10: 680a 2020 2020 6865 6164 5f6c 656e 203a  h.    head_len :
+0002cf20: 2069 6e74 203a 2066 6972 7374 206c 696e   int : first lin
+0002cf30: 6520 6c65 6e67 7468 2028 6465 6661 756c  e length (defaul
+0002cf40: 7420 4e6f 6e65 290a 2020 2020 2020 2020  t None).        
+0002cf50: 2020 2020 2020 2069 6620 626f 6479 5f6c         if body_l
+0002cf60: 656e 2069 7320 4e6f 6e65 2074 6865 6e20  en is None then 
+0002cf70: 6576 6572 7974 6869 6e67 2063 7574 2073  everything cut s
+0002cf80: 616d 6520 6c65 6e67 7468 2077 6974 6820  ame length with 
+0002cf90: 6865 6164 5f6c 656e 0a20 2020 2062 6f64  head_len.    bod
+0002cfa0: 795f 6c65 6e20 3a20 696e 7420 3a20 6c69  y_len : int : li
+0002cfb0: 6e65 206c 656e 6774 6820 6166 7465 7220  ne length after 
+0002cfc0: 6865 6164 5f6c 656e 2028 6465 6661 756c  head_len (defaul
+0002cfd0: 7420 4e6f 6e65 290a 2020 2020 2020 2020  t None).        
+0002cfe0: 2020 2020 2020 2077 6974 686f 7574 2068         without h
+0002cff0: 6561 645f 6c65 6e28 4e6f 6e65 2920 7468  ead_len(None) th
+0002d000: 656e 2073 7761 7020 6265 7477 6565 6e20  en swap between 
+0002d010: 6865 6164 5f6c 656e 2061 6e64 2062 6f64  head_len and bod
+0002d020: 795f 6c65 6e0a 2020 2020 6e65 775f 6c69  y_len.    new_li
+0002d030: 6e65 203a 2064 6566 6175 6c74 206c 696e  ne : default lin
+0002d040: 7578 206e 6577 206c 696e 650a 2020 2020  ux new line.    
+0002d050: 6672 6f6e 745f 7370 6163 653a 200a 2020  front_space: .  
+0002d060: 2020 2020 2020 5472 7565 203a 2066 696c        True : fil
+0002d070: 6c20 6f75 7420 7370 6163 6520 746f 2067  l out space to g
+0002d080: 6170 2062 6574 7765 656e 2068 6561 645f  ap between head_
+0002d090: 6c65 6e20 2061 6e64 2062 6f64 795f 6c65  len  and body_le
+0002d0a0: 6e20 2873 616d 6520 6173 2030 290a 2020  n (same as 0).  
+0002d0b0: 2020 2020 2020 4661 6c73 652f 4e6f 6e65        False/None
+0002d0c0: 203a 204e 6f20 7370 6163 650a 2020 2020   : No space.    
+0002d0d0: 2020 2020 2320 2020 203a 2066 696c 6c20      #    : fill 
+0002d0e0: 6f75 7420 7370 6163 6520 6f66 2023 2061  out space of # a
+0002d0f0: 7420 6672 6f6e 7420 6f66 2061 6c6c 2073  t front of all s
+0002d100: 7472 696e 6773 2028 6865 6164 2061 6e64  trings (head and
+0002d110: 2062 6f64 7929 0a20 2020 2020 2020 2027   body).        '
+0002d120: 2020 2720 3a20 7361 6d65 2061 7320 6e75    ' : same as nu
+0002d130: 6d62 6572 2823 290a 2020 2020 6e65 776c  mber(#).    newl
+0002d140: 696e 655f 6865 6164 3a0a 2020 2020 2020  ine_head:.      
+0002d150: 2020 5472 7565 203a 2065 6163 6820 6669    True : each fi
+0002d160: 7273 7420 6c69 6e65 2068 6173 2068 6561  rst line has hea
+0002d170: 6420 636f 6e64 6974 696f 6e0a 2020 2020  d condition.    
+0002d180: 2020 2020 4661 6c73 653a 2066 6972 7374      False: first
+0002d190: 206c 696e 6520 6861 7320 6865 6164 2063   line has head c
+0002d1a0: 6f6e 6469 7469 6f6e 206f 6620 656e 7469  ondition of enti
+0002d1b0: 7265 2073 6f75 7263 6520 2873 7263 290a  re source (src).
+0002d1c0: 2020 2020 6f75 743d 0a20 2020 2020 2020      out=.       
+0002d1d0: 2073 7472 2020 3a20 6f75 7470 7574 2074   str  : output t
+0002d1e0: 6f20 7374 7269 6e67 2077 6974 6820 6e65  o string with ne
+0002d1f0: 775f 6c69 6e65 2028 6465 6661 756c 7429  w_line (default)
+0002d200: 0a20 2020 2020 2020 206c 6973 7420 3a20  .        list : 
+0002d210: 6f75 7470 7574 2074 6f20 6c69 7374 2069  output to list i
+0002d220: 6e73 7465 6164 206e 6577 5f6c 696e 650a  nstead new_line.
+0002d230: 2020 2020 2727 270a 2020 2020 6966 206e      '''.    if n
+0002d240: 6f74 2054 7970 6528 7372 632c 2827 7374  ot Type(src,('st
+0002d250: 7227 2c27 6279 7465 7327 2929 3a20 7265  r','bytes')): re
+0002d260: 7475 726e 2046 616c 7365 0a20 2020 2073  turn False.    s
+0002d270: 6f75 7263 653d 5370 6c69 7428 7372 632c  ource=Split(src,
+0002d280: 6e65 775f 6c69 6e65 290a 2020 2020 2320  new_line).    # 
+0002d290: 7377 6170 2068 6561 645f 6c65 6e20 616e  swap head_len an
+0002d2a0: 6420 626f 6479 5f6c 656e 2077 6865 6e20  d body_len when 
+0002d2b0: 6865 6164 5f6c 656e 2069 7320 4e6f 6e65  head_len is None
+0002d2c0: 0a20 2020 2069 6620 4973 4e6f 6e65 2868  .    if IsNone(h
+0002d2d0: 6561 645f 6c65 6e29 2061 6e64 2069 7369  ead_len) and isi
+0002d2e0: 6e73 7461 6e63 6528 626f 6479 5f6c 656e  nstance(body_len
+0002d2f0: 2c69 6e74 293a 0a20 2020 2020 2020 2068  ,int):.        h
+0002d300: 6561 645f 6c65 6e3d 626f 6479 5f6c 656e  ead_len=body_len
+0002d310: 0a20 2020 2020 2020 2062 6f64 795f 6c65  .        body_le
+0002d320: 6e3d 4e6f 6e65 0a0a 2020 2020 6966 206e  n=None..    if n
+0002d330: 6f74 2069 7369 6e73 7461 6e63 6528 6865  ot isinstance(he
+0002d340: 6164 5f6c 656e 2c69 6e74 2920 6f72 2068  ad_len,int) or h
+0002d350: 6561 645f 6c65 6e20 3e3d 206c 656e 2873  ead_len >= len(s
+0002d360: 7263 293a 0a20 2020 2020 2020 6966 2073  rc):.       if s
+0002d370: 7263 2061 6e64 206f 7574 2069 6e20 5b27  rc and out in ['
+0002d380: 7374 7227 2c73 7472 2c27 7374 7269 6e67  str',str,'string
+0002d390: 275d 3a20 7265 7475 726e 2073 7263 0a20  ']: return src. 
+0002d3a0: 2020 2020 2020 7265 7475 726e 2073 6f75        return sou
+0002d3b0: 7263 6520 2320 7370 6c69 7420 7769 7468  rce # split with
+0002d3c0: 206e 6577 206c 696e 650a 0a20 2020 2072   new line..    r
+0002d3d0: 743d 5b5d 0a20 2020 2069 6620 6973 696e  t=[].    if isin
+0002d3e0: 7374 616e 6365 2866 726f 6e74 5f73 7061  stance(front_spa
+0002d3f0: 6365 2c62 6f6f 6c29 3a0a 2020 2020 2020  ce,bool):.      
+0002d400: 2020 6672 6f6e 745f 7370 6163 653d 3020    front_space=0 
+0002d410: 6966 2066 726f 6e74 5f73 7061 6365 2069  if front_space i
+0002d420: 7320 5472 7565 2065 6c73 6520 4e6f 6e65  s True else None
+0002d430: 0a20 2020 2065 6c69 6620 6973 696e 7374  .    elif isinst
+0002d440: 616e 6365 2866 726f 6e74 5f73 7061 6365  ance(front_space
+0002d450: 2c69 6e74 293a 0a20 2020 2020 2020 2066  ,int):.        f
+0002d460: 726f 6e74 5f73 7061 6365 3d53 7061 6365  ront_space=Space
+0002d470: 2866 726f 6e74 5f73 7061 6365 290a 2020  (front_space).  
+0002d480: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+0002d490: 6e63 6528 6672 6f6e 745f 7370 6163 652c  nce(front_space,
+0002d4a0: 7374 7229 2061 6e64 2066 726f 6e74 5f73  str) and front_s
+0002d4b0: 7061 6365 2069 7320 6e6f 7420 4e6f 6e65  pace is not None
+0002d4c0: 3a0a 2020 2020 2020 2020 6672 6f6e 745f  :.        front_
+0002d4d0: 7370 6163 653d 4e6f 6e65 0a20 2020 2066  space=None.    f
+0002d4e0: 726f 6e74 5f73 7061 6365 5f68 6561 643d  ront_space_head=
+0002d4f0: 6672 6f6e 745f 7370 6163 650a 2020 2020  front_space.    
+0002d500: 6672 6f6e 745f 7370 6163 655f 626f 6479  front_space_body
+0002d510: 3d66 726f 6e74 5f73 7061 6365 0a20 2020  =front_space.   
+0002d520: 2069 6620 6672 6f6e 745f 7370 6163 6520   if front_space 
+0002d530: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0002d540: 2020 2020 2069 6620 6865 6164 5f6c 656e       if head_len
+0002d550: 2061 6e64 2062 6f64 795f 6c65 6e3a 0a20   and body_len:. 
+0002d560: 2020 2020 2020 2020 2020 2069 6620 6865             if he
+0002d570: 6164 5f6c 656e 203e 2062 6f64 795f 6c65  ad_len > body_le
+0002d580: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
+0002d590: 2020 2066 726f 6e74 5f73 7061 6365 5f62     front_space_b
+0002d5a0: 6f64 793d 5370 6163 6528 6c65 6e28 6672  ody=Space(len(fr
+0002d5b0: 6f6e 745f 7370 6163 6529 2b28 6865 6164  ont_space)+(head
+0002d5c0: 5f6c 656e 2d62 6f64 795f 6c65 6e29 290a  _len-body_len)).
+0002d5d0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0002d5e0: 2068 6561 645f 6c65 6e20 3c20 626f 6479   head_len < body
 0002d5f0: 5f6c 656e 3a0a 2020 2020 2020 2020 2020  _len:.          
-0002d600: 2020 2020 2020 2020 2020 7274 3d72 742b            rt=rt+
-0002d610: 5b4d 6572 6765 5374 7228 6672 6f6e 745f  [MergeStr(front_
-0002d620: 7370 6163 655f 626f 6479 2c73 6f75 7263  space_body,sourc
-0002d630: 655b 7372 635f 6964 785d 5b68 6561 645f  e[src_idx][head_
-0002d640: 6c65 6e3a 5d5b 693a 6920 2b20 626f 6479  len:][i:i + body
-0002d650: 5f6c 656e 5d2c 5f74 7970 653d 5f74 7970  _len],_type=_typ
-0002d660: 6529 2066 6f72 2069 2069 6e20 7261 6e67  e) for i in rang
-0002d670: 6528 302c 2073 7472 5f6c 656e 2d68 6561  e(0, str_len-hea
-0002d680: 645f 6c65 6e2c 2062 6f64 795f 6c65 6e29  d_len, body_len)
-0002d690: 5d0a 2020 2020 2020 2020 2020 2020 656c  ].            el
-0002d6a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0002d6b0: 2020 2020 7274 3d72 742b 5b4d 6572 6765      rt=rt+[Merge
-0002d6c0: 5374 7228 6672 6f6e 745f 7370 6163 655f  Str(front_space_
-0002d6d0: 626f 6479 2c73 6f75 7263 655b 7372 635f  body,source[src_
-0002d6e0: 6964 785d 5b69 3a69 202b 2062 6f64 795f  idx][i:i + body_
-0002d6f0: 6c65 6e5d 2c5f 7479 7065 3d5f 7479 7065  len],_type=_type
-0002d700: 2920 666f 7220 6920 696e 2072 616e 6765  ) for i in range
-0002d710: 2830 2c20 7374 725f 6c65 6e2c 2062 6f64  (0, str_len, bod
-0002d720: 795f 6c65 6e29 5d0a 2020 2020 6966 206f  y_len)].    if o
-0002d730: 7574 2069 6e20 5b27 7374 7227 2c73 7472  ut in ['str',str
-0002d740: 2c27 7374 7269 6e67 275d 3a0a 2020 2020  ,'string']:.    
-0002d750: 2020 2020 6966 2072 743a 2072 6574 7572      if rt: retur
-0002d760: 6e20 4a6f 696e 2872 742c 7379 6d62 6f6c  n Join(rt,symbol
-0002d770: 3d6e 6577 5f6c 696e 6529 0a20 2020 2020  =new_line).     
-0002d780: 2020 2072 6574 7572 6e20 2727 0a20 2020     return ''.   
-0002d790: 2072 6574 7572 6e20 7274 0a0a 6465 6620   return rt..def 
-0002d7a0: 5370 6163 6528 6e75 6d3d 342c 6669 6c6c  Space(num=4,fill
-0002d7b0: 3d4e 6f6e 652c 6d6f 6465 3d27 7370 6163  =None,mode='spac
-0002d7c0: 6527 2c74 6170 3d27 2729 3a0a 2020 2020  e',tap=''):.    
-0002d7d0: 2727 270a 2020 2020 6d61 6b65 2061 2063  '''.    make a c
-0002d7e0: 6861 7261 6374 6f72 2873 7061 6365 2c20  haractor(space, 
-0002d7f0: 7461 7029 2067 726f 7570 0a20 2020 206e  tap) group.    n
-0002d800: 756d 3a20 6465 6661 756c 7420 342c 2068  um: default 4, h
-0002d810: 6f77 206d 616e 7920 6669 6c6c 206f 7574  ow many fill out
-0002d820: 203c 6669 6c6c 3e0a 2020 2020 6d6f 6465   <fill>.    mode
-0002d830: 3a0a 2020 2020 2020 7370 6163 6520 3a20  :.      space : 
-0002d840: 6465 6661 756c 743a 2027 2027 0a20 2020  default: ' '.   
-0002d850: 2020 2074 6170 2020 203a 205c 5c74 0a20     tap   : \\t. 
-0002d860: 2020 2066 696c 6c3a 0a20 2020 2020 204e     fill:.      N
-0002d870: 6f6e 6520 3a20 6465 6661 756c 743a 2066  one : default: f
-0002d880: 6f6c 6c6f 7769 6e67 206d 6f64 6520 696e  ollowing mode in
-0002d890: 666f 726d 6174 696f 6e0a 2020 2020 2020  formation.      
-0002d8a0: 3c73 7065 6369 616c 2063 6861 7261 6374  <special charact
-0002d8b0: 6f72 3e20 3a20 6669 6c6c 206f 7574 2074  or> : fill out t
-0002d8c0: 6865 2063 6861 7261 6374 6f72 0a20 2020  he charactor.   
-0002d8d0: 2074 6170 3a0a 2020 2020 2020 2727 2020   tap:.      ''  
-0002d8e0: 203a 2064 6566 6175 6c74 0a20 2020 2020   : default.     
-0002d8f0: 203c 7370 6369 616c 2069 6e69 7461 6c20   <spcial inital 
-0002d900: 6368 7261 6374 6f72 3e3a 2070 7265 2d66  chractor>: pre-f
-0002d910: 696c 6c6f 7574 2077 6974 6820 7468 6973  illout with this
-0002d920: 2063 6872 6163 746f 720a 2020 2020 2727   chractor.    ''
-0002d930: 270a 2020 2020 6d6f 6465 3d6d 6f64 652e  '.    mode=mode.
-0002d940: 6c6f 7765 7228 290a 2020 2020 6966 206d  lower().    if m
-0002d950: 6f64 6520 3d3d 2774 6170 273a 0a20 2020  ode =='tap':.   
-0002d960: 2020 2020 2066 696c 6c3d 275c 7427 0a20       fill='\t'. 
-0002d970: 2020 2065 6c69 6620 6d6f 6465 203d 3d20     elif mode == 
-0002d980: 2773 7061 6365 2720 6f72 2066 696c 6c20  'space' or fill 
-0002d990: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-0002d9a0: 2066 696c 6c3d 2720 270a 2020 2020 666f   fill=' '.    fo
-0002d9b0: 7220 6920 696e 2072 616e 6765 2830 2c6e  r i in range(0,n
-0002d9c0: 756d 293a 0a20 2020 2020 2020 2074 6170  um):.        tap
-0002d9d0: 3d74 6170 2b66 696c 6c0a 2020 2020 7265  =tap+fill.    re
-0002d9e0: 7475 726e 2074 6170 0a0a 6465 6620 5772  turn tap..def Wr
-0002d9f0: 6170 5374 7269 6e67 2873 7472 696e 672c  apString(string,
-0002da00: 6673 7061 6365 3d30 2c6e 7370 6163 653d  fspace=0,nspace=
-0002da10: 302c 6e65 775f 6c69 6e65 3d27 5c6e 272c  0,new_line='\n',
-0002da20: 666c 656e 6774 683d 302c 6e6c 656e 6774  flength=0,nlengt
-0002da30: 683d 302c 6e74 6170 3d30 2c4e 464c 543d  h=0,ntap=0,NFLT=
-0002da40: 4661 6c73 652c 6d6f 6465 3d27 7370 6163  False,mode='spac
-0002da50: 6527 2c64 6566 6175 6c74 3d27 272c 6f75  e',default='',ou
-0002da60: 743d 2773 7472 272c 6967 6e6f 7265 5f65  t='str',ignore_e
-0002da70: 6d70 7479 5f65 6e64 6c69 6e65 3d54 7275  mpty_endline=Tru
-0002da80: 6529 3a0a 2020 2020 2373 7472 696e 6720  e):.    #string 
-0002da90: 3a20 7072 696e 7469 6e67 2064 6174 610a  : printing data.
-0002daa0: 2020 2020 2366 7370 6163 6520 3a20 7072      #fspace : pr
-0002dab0: 6520 7370 6163 6528 7370 6163 6520 6265  e space(space be
-0002dac0: 666f 7265 2073 7472 696e 672c 2062 6566  fore string, bef
-0002dad0: 6f72 6520 6669 7273 7420 6c69 6e65 290a  ore first line).
-0002dae0: 2020 2020 236e 7370 6163 6520 3a20 7370      #nspace : sp
-0002daf0: 6163 6520 666f 7220 626f 6479 2061 7265  ace for body are
-0002db00: 610a 2020 2020 236e 6577 5f6c 696e 653a  a.    #new_line:
-0002db10: 206e 6577 5f6c 696e 6520 7379 6d62 6f6c   new_line symbol
-0002db20: 0a20 2020 2023 666c 656e 6774 6820 3a20  .    #flength : 
-0002db30: 6669 7273 7420 6c69 6e65 2028 2068 6561  first line ( hea
-0002db40: 6420 6c69 6e65 2029 2070 7269 6e74 2d73  d line ) print-s
-0002db50: 7472 696e 6720 6c65 6e67 7468 0a20 2020  tring length.   
-0002db60: 2023 6e6c 656e 6774 6820 3a20 626f 6479   #nlength : body
-0002db70: 2061 7265 6120 7072 696e 742d 7374 7269   area print-stri
-0002db80: 6e67 206c 656e 6774 680a 2020 2020 236d  ng length.    #m
-0002db90: 6f64 6520 2020 203a 2073 7061 6365 3a20  ode    : space: 
-0002dba0: 7768 6974 6520 7370 6163 6520 746f 2073  white space to s
-0002dbb0: 7061 6365 2061 7265 610a 2020 2020 236f  pace area.    #o
-0002dbc0: 7574 2020 2020 203a 206f 7574 7075 7420  ut     : output 
-0002dbd0: 746f 2073 7472 696e 6720 6f72 206c 6973  to string or lis
-0002dbe0: 740a 2020 2020 236e 7461 7020 2020 203a  t.    #ntap    :
-0002dbf0: 206e 6f74 2075 7365 6420 2872 656d 6f76   not used (remov
-0002dc00: 6564 2070 6172 616d 6574 6572 290a 2020  ed parameter).  
-0002dc10: 2020 234e 464c 5420 2020 203a 2073 616d    #NFLT    : sam
-0002dc20: 6520 6173 2066 7370 6163 653d 300a 2020  e as fspace=0.  
-0002dc30: 2020 2369 676e 6f72 655f 656d 7074 795f    #ignore_empty_
-0002dc40: 656e 646c 696e 653a 2054 7275 653a 2069  endline: True: i
-0002dc50: 6620 656e 646c 696e 6520 6861 7665 206e  f endline have n
-0002dc60: 6f20 6461 7461 2074 6865 6e20 6967 6e6f  o data then igno
-0002dc70: 7265 206d 616b 696e 6720 7370 6163 6520  re making space 
-0002dc80: 666f 7220 7772 6170 2e20 2046 616c 7365  for wrap.  False
-0002dc90: 3a20 6d61 6b69 6e67 2073 7061 6365 2074  : making space t
-0002dca0: 6f20 7772 6170 2066 6f72 206e 6578 7420  o wrap for next 
-0002dcb0: 6174 7461 6368 696e 6720 7374 7269 6e67  attaching string
-0002dcc0: 0a20 2020 2069 6620 4973 4e6f 6e65 2873  .    if IsNone(s
-0002dcd0: 7472 696e 6729 3a20 7265 7475 726e 2064  tring): return d
-0002dce0: 6566 6175 6c74 0a20 2020 2069 6620 6e6f  efault.    if no
-0002dcf0: 7420 5479 7065 2873 7472 696e 672c 2773  t Type(string,'s
-0002dd00: 7472 2729 3a73 7472 696e 673d 2727 277b  tr'):string='''{
-0002dd10: 7d27 2727 2e66 6f72 6d61 7428 7374 7269  }'''.format(stri
-0002dd20: 6e67 290a 2020 2020 7263 5f73 7472 3d5b  ng).    rc_str=[
-0002dd30: 5d0a 2020 2020 7374 7269 6e67 5f61 3d73  ].    string_a=s
-0002dd40: 7472 696e 672e 7370 6c69 7428 6e65 775f  tring.split(new_
-0002dd50: 6c69 6e65 290a 2020 2020 2346 6972 7374  line).    #First
-0002dd60: 206c 696e 6520 6465 7369 676e 0a20 2020   line design.   
-0002dd70: 2069 6620 4e46 4c54 3a20 6673 7061 6365   if NFLT: fspace
-0002dd80: 3d30 0a20 2020 2072 635f 7374 722e 6170  =0.    rc_str.ap
-0002dd90: 7065 6e64 2853 7061 6365 2866 7370 6163  pend(Space(fspac
-0002dda0: 652c 6d6f 6465 3d6d 6f64 6529 2b4a 6f69  e,mode=mode)+Joi
-0002ddb0: 6e28 4375 7428 7374 7269 6e67 5f61 5b30  n(Cut(string_a[0
-0002ddc0: 5d2c 6865 6164 5f6c 656e 3d66 6c65 6e67  ],head_len=fleng
-0002ddd0: 7468 2c62 6f64 795f 6c65 6e3d 6e6c 656e  th,body_len=nlen
-0002dde0: 6774 682c 6e65 775f 6c69 6e65 3d6e 6577  gth,new_line=new
-0002ddf0: 5f6c 696e 652c 6f75 743d 6c69 7374 292c  _line,out=list),
-0002de00: 275c 6e27 2c61 7070 656e 645f 6672 6f6e  '\n',append_fron
-0002de10: 743d 5370 6163 6528 6e73 7061 6365 2c6d  t=Space(nspace,m
-0002de20: 6f64 653d 6d6f 6465 2929 290a 2020 2020  ode=mode))).    
-0002de30: 2342 6f64 7920 6c69 6e65 2064 6573 6967  #Body line desig
-0002de40: 6e0a 2020 2020 2366 6f72 2069 6920 696e  n.    #for ii in
-0002de50: 2073 7472 696e 675f 615b 313a 5d3a 0a20   string_a[1:]:. 
-0002de60: 2020 206d 783d 6c65 6e28 7374 7269 6e67     mx=len(string
-0002de70: 5f61 292d 310a 2020 2020 666f 7220 6969  _a)-1.    for ii
-0002de80: 2069 6e20 7261 6e67 6528 312c 6d78 2b31   in range(1,mx+1
-0002de90: 293a 0a20 2020 2020 2020 2069 6620 6967  ):.        if ig
-0002dea0: 6e6f 7265 5f65 6d70 7479 5f65 6e64 6c69  nore_empty_endli
-0002deb0: 6e65 2069 7320 5472 7565 2061 6e64 2069  ne is True and i
-0002dec0: 6920 3d3d 206d 7820 616e 6420 6e6f 7420  i == mx and not 
-0002ded0: 7374 7269 6e67 5f61 5b69 695d 3a20 6272  string_a[ii]: br
-0002dee0: 6561 6b0a 2020 2020 2020 2020 7263 5f73  eak.        rc_s
-0002def0: 7472 2e61 7070 656e 6428 5370 6163 6528  tr.append(Space(
-0002df00: 6e73 7061 6365 2c6d 6f64 653d 6d6f 6465  nspace,mode=mode
-0002df10: 292b 4a6f 696e 2843 7574 2873 7472 696e  )+Join(Cut(strin
-0002df20: 675f 615b 6969 5d2c 6865 6164 5f6c 656e  g_a[ii],head_len
-0002df30: 3d6e 6c65 6e67 7468 2c6e 6577 5f6c 696e  =nlength,new_lin
-0002df40: 653d 6e65 775f 6c69 6e65 2c6f 7574 3d6c  e=new_line,out=l
-0002df50: 6973 7429 2c27 5c6e 272c 6170 7065 6e64  ist),'\n',append
-0002df60: 5f66 726f 6e74 3d53 7061 6365 286e 7370  _front=Space(nsp
-0002df70: 6163 652c 6d6f 6465 3d6d 6f64 6529 2929  ace,mode=mode)))
-0002df80: 0a20 2020 2023 7265 7475 726e 206e 6577  .    #return new
-0002df90: 5f6c 696e 652e 6a6f 696e 2872 635f 7374  _line.join(rc_st
-0002dfa0: 7229 0a20 2020 2069 6620 6f75 7420 696e  r).    if out in
-0002dfb0: 205b 6c69 7374 2c27 6c69 7374 275d 3a20   [list,'list']: 
-0002dfc0: 7265 7475 726e 2072 635f 7374 720a 2020  return rc_str.  
-0002dfd0: 2020 656c 6966 206f 7574 2069 6e20 5b74    elif out in [t
-0002dfe0: 7570 6c65 2c27 7475 706c 6527 5d3a 2072  uple,'tuple']: r
-0002dff0: 6574 7572 6e20 7475 706c 6528 7263 5f73  eturn tuple(rc_s
-0002e000: 7472 290a 2020 2020 7265 7475 726e 204a  tr).    return J
-0002e010: 6f69 6e28 7263 5f73 7472 2c6e 6577 5f6c  oin(rc_str,new_l
-0002e020: 696e 6529 0a0a 6465 6620 4765 744b 6579  ine)..def GetKey
-0002e030: 2873 7263 2c66 696e 643d 4e6f 6e65 2c64  (src,find=None,d
-0002e040: 6566 6175 6c74 3d4e 6f6e 652c 6d6f 6465  efault=None,mode
-0002e050: 3d27 6669 7273 7427 2c72 6f6f 743d 4e6f  ='first',root=No
-0002e060: 6e65 293a 0a20 2020 2027 2727 0a20 2020  ne):.    '''.   
-0002e070: 2047 6574 206b 6579 2066 726f 6d20 6469   Get key from di
-0002e080: 6374 2c6c 6973 742c 7475 706c 652c 7374  ct,list,tuple,st
-0002e090: 720a 2020 2020 6669 6e64 203a 2069 6620  r.    find : if 
-0002e0a0: 6d61 7463 6865 6420 7661 6c75 6520 7468  matched value th
-0002e0b0: 656e 2072 6574 7572 6e20 7468 6520 6b65  en return the ke
-0002e0c0: 792f 696e 6465 7820 6f66 2074 6865 2064  y/index of the d
-0002e0d0: 6174 610a 2020 2020 6d6f 6465 203a 0a20  ata.    mode :. 
-0002e0e0: 2020 2020 2066 6972 7374 203a 2064 6566       first : def
-0002e0f0: 6175 6c74 3a20 7265 7475 726e 2066 6972  ault: return fir
-0002e100: 7374 2066 696e 640a 2020 2020 2020 616c  st find.      al
-0002e110: 6c20 2020 3a20 7265 7475 726e 2066 6f75  l   : return fou
-0002e120: 6e64 2061 6c6c 0a20 2020 2064 6566 6175  nd all.    defau
-0002e130: 6c74 203a 2072 6574 7572 6e20 7768 656e  lt : return when
-0002e140: 206e 6f74 2066 6f75 6e64 0a20 2020 2027   not found.    '
-0002e150: 2727 0a20 2020 2072 743d 5b5d 0a20 2020  ''.    rt=[].   
-0002e160: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-0002e170: 7263 2c64 6963 7429 3a0a 2020 2020 2020  rc,dict):.      
-0002e180: 2020 6966 2049 734e 6f6e 6528 6669 6e64    if IsNone(find
-0002e190: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-0002e1a0: 6574 7572 6e20 6c69 7374 2873 7263 2e6b  eturn list(src.k
-0002e1b0: 6579 7328 2929 0a20 2020 2020 2020 2065  eys()).        e
-0002e1c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002e1d0: 2066 6f72 206b 6579 2c76 616c 2069 6e20   for key,val in 
-0002e1e0: 7372 632e 6974 656d 7328 293a 0a20 2020  src.items():.   
-0002e1f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002e200: 6973 696e 7374 616e 6365 2876 616c 2c64  isinstance(val,d
-0002e210: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
-0002e220: 2020 2020 2020 2020 2020 613d 4765 744b            a=GetK
-0002e230: 6579 2876 616c 2c66 696e 642c 6465 6661  ey(val,find,defa
-0002e240: 756c 742c 6d6f 6465 2c6b 6579 290a 2020  ult,mode,key).  
-0002e250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e260: 2020 6966 2061 3a0a 2020 2020 2020 2020    if a:.        
-0002e270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e280: 6966 2069 7369 6e73 7461 6e63 6528 612c  if isinstance(a,
-0002e290: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
-0002e2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e2b0: 2020 6966 2072 6f6f 7420 6973 204e 6f6e    if root is Non
-0002e2c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0002e2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e2e0: 2020 2072 6574 7572 6e20 272f 7b7d 2f7b     return '/{}/{
-0002e2f0: 7d27 2e66 6f72 6d61 7428 6b65 792c 6129  }'.format(key,a)
-0002e300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e310: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0002e320: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0002e330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e340: 2020 2072 6574 7572 6e20 277b 7d2f 7b7d     return '{}/{}
-0002e350: 272e 666f 726d 6174 286b 6579 2c61 290a  '.format(key,a).
-0002e360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e370: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-0002e380: 6e73 7461 6e63 6528 612c 6c69 7374 293a  nstance(a,list):
-0002e390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002e3a0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-0002e3b0: 2069 2069 6e20 613a 0a20 2020 2020 2020   i in a:.       
-0002e3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e3d0: 2020 2020 2020 2020 2069 6620 726f 6f74           if root
-0002e3e0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0002e3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e400: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-0002e410: 2e61 7070 656e 6428 272f 7b7d 2f7b 7d27  .append('/{}/{}'
-0002e420: 2e66 6f72 6d61 7428 6b65 792c 6929 290a  .format(key,i)).
-0002e430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e450: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0002d600: 2020 2020 2020 6672 6f6e 745f 7370 6163        front_spac
+0002d610: 655f 6865 6164 3d53 7061 6365 286c 656e  e_head=Space(len
+0002d620: 2866 726f 6e74 5f73 7061 6365 292b 2862  (front_space)+(b
+0002d630: 6f64 795f 6c65 6e2d 6865 6164 5f6c 656e  ody_len-head_len
+0002d640: 2929 0a20 2020 205f 7479 7065 3d74 7970  )).    _type=typ
+0002d650: 6528 7372 6329 0a20 2020 2066 6f72 2073  e(src).    for s
+0002d660: 7263 5f69 6478 2069 6e20 7261 6e67 6528  rc_idx in range(
+0002d670: 302c 6c65 6e28 736f 7572 6365 2929 3a0a  0,len(source)):.
+0002d680: 2020 2020 2020 2020 7374 725f 6c65 6e3d          str_len=
+0002d690: 6c65 6e28 736f 7572 6365 5b73 7263 5f69  len(source[src_i
+0002d6a0: 6478 5d29 0a20 2020 2020 2020 2069 6620  dx]).        if 
+0002d6b0: 6865 6164 5f6c 656e 203d 3d20 303a 2068  head_len == 0: h
+0002d6c0: 6561 645f 6c65 6e3d 7374 725f 6c65 6e0a  ead_len=str_len.
+0002d6d0: 2020 2020 2020 2020 6966 2049 734e 6f6e          if IsNon
+0002d6e0: 6528 626f 6479 5f6c 656e 293a 0a20 2020  e(body_len):.   
+0002d6f0: 2020 2020 2020 2020 2072 743d 7274 2b5b           rt=rt+[
+0002d700: 4d65 7267 6553 7472 2866 726f 6e74 5f73  MergeStr(front_s
+0002d710: 7061 6365 2c73 6f75 7263 655b 7372 635f  pace,source[src_
+0002d720: 6964 785d 5b69 3a69 202b 2068 6561 645f  idx][i:i + head_
+0002d730: 6c65 6e5d 2c5f 7479 7065 3d5f 7479 7065  len],_type=_type
+0002d740: 2920 666f 7220 6920 696e 2072 616e 6765  ) for i in range
+0002d750: 2830 2c20 7374 725f 6c65 6e2c 2068 6561  (0, str_len, hea
+0002d760: 645f 6c65 6e29 5d0a 2020 2020 2020 2020  d_len)].        
+0002d770: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0002d780: 2020 6966 2073 7263 5f69 6478 203d 3d20    if src_idx == 
+0002d790: 3020 6f72 206e 6577 6c69 6e65 5f68 6561  0 or newline_hea
+0002d7a0: 6420 6973 2054 7275 653a 0a20 2020 2020  d is True:.     
+0002d7b0: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+0002d7c0: 7065 6e64 284d 6572 6765 5374 7228 6672  pend(MergeStr(fr
+0002d7d0: 6f6e 745f 7370 6163 655f 6865 6164 2c73  ont_space_head,s
+0002d7e0: 6f75 7263 655b 7372 635f 6964 785d 5b30  ource[src_idx][0
+0002d7f0: 3a68 6561 645f 6c65 6e5d 2c5f 7479 7065  :head_len],_type
+0002d800: 3d5f 7479 7065 2929 2023 2054 616b 6520  =_type)) # Take 
+0002d810: 6865 6164 0a20 2020 2020 2020 2020 2020  head.           
+0002d820: 2020 2020 2069 6620 7374 725f 6c65 6e20       if str_len 
+0002d830: 3e20 6865 6164 5f6c 656e 3a0a 2020 2020  > head_len:.    
+0002d840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d850: 7274 3d72 742b 5b4d 6572 6765 5374 7228  rt=rt+[MergeStr(
+0002d860: 6672 6f6e 745f 7370 6163 655f 626f 6479  front_space_body
+0002d870: 2c73 6f75 7263 655b 7372 635f 6964 785d  ,source[src_idx]
+0002d880: 5b68 6561 645f 6c65 6e3a 5d5b 693a 6920  [head_len:][i:i 
+0002d890: 2b20 626f 6479 5f6c 656e 5d2c 5f74 7970  + body_len],_typ
+0002d8a0: 653d 5f74 7970 6529 2066 6f72 2069 2069  e=_type) for i i
+0002d8b0: 6e20 7261 6e67 6528 302c 2073 7472 5f6c  n range(0, str_l
+0002d8c0: 656e 2d68 6561 645f 6c65 6e2c 2062 6f64  en-head_len, bod
+0002d8d0: 795f 6c65 6e29 5d0a 2020 2020 2020 2020  y_len)].        
+0002d8e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0002d8f0: 2020 2020 2020 2020 2020 7274 3d72 742b            rt=rt+
+0002d900: 5b4d 6572 6765 5374 7228 6672 6f6e 745f  [MergeStr(front_
+0002d910: 7370 6163 655f 626f 6479 2c73 6f75 7263  space_body,sourc
+0002d920: 655b 7372 635f 6964 785d 5b69 3a69 202b  e[src_idx][i:i +
+0002d930: 2062 6f64 795f 6c65 6e5d 2c5f 7479 7065   body_len],_type
+0002d940: 3d5f 7479 7065 2920 666f 7220 6920 696e  =_type) for i in
+0002d950: 2072 616e 6765 2830 2c20 7374 725f 6c65   range(0, str_le
+0002d960: 6e2c 2062 6f64 795f 6c65 6e29 5d0a 2020  n, body_len)].  
+0002d970: 2020 6966 206f 7574 2069 6e20 5b27 7374    if out in ['st
+0002d980: 7227 2c73 7472 2c27 7374 7269 6e67 275d  r',str,'string']
+0002d990: 3a0a 2020 2020 2020 2020 6966 2072 743a  :.        if rt:
+0002d9a0: 2072 6574 7572 6e20 4a6f 696e 2872 742c   return Join(rt,
+0002d9b0: 7379 6d62 6f6c 3d6e 6577 5f6c 696e 6529  symbol=new_line)
+0002d9c0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0002d9d0: 2727 0a20 2020 2072 6574 7572 6e20 7274  ''.    return rt
+0002d9e0: 0a0a 6465 6620 5370 6163 6528 6e75 6d3d  ..def Space(num=
+0002d9f0: 342c 6669 6c6c 3d4e 6f6e 652c 6d6f 6465  4,fill=None,mode
+0002da00: 3d27 7370 6163 6527 2c74 6170 3d27 2729  ='space',tap='')
+0002da10: 3a0a 2020 2020 2727 270a 2020 2020 6d61  :.    '''.    ma
+0002da20: 6b65 2061 2063 6861 7261 6374 6f72 2873  ke a charactor(s
+0002da30: 7061 6365 2c20 7461 7029 2067 726f 7570  pace, tap) group
+0002da40: 0a20 2020 206e 756d 3a20 6465 6661 756c  .    num: defaul
+0002da50: 7420 342c 2068 6f77 206d 616e 7920 6669  t 4, how many fi
+0002da60: 6c6c 206f 7574 203c 6669 6c6c 3e0a 2020  ll out <fill>.  
+0002da70: 2020 6d6f 6465 3a0a 2020 2020 2020 7370    mode:.      sp
+0002da80: 6163 6520 3a20 6465 6661 756c 743a 2027  ace : default: '
+0002da90: 2027 0a20 2020 2020 2074 6170 2020 203a   '.      tap   :
+0002daa0: 205c 5c74 0a20 2020 2066 696c 6c3a 0a20   \\t.    fill:. 
+0002dab0: 2020 2020 204e 6f6e 6520 3a20 6465 6661       None : defa
+0002dac0: 756c 743a 2066 6f6c 6c6f 7769 6e67 206d  ult: following m
+0002dad0: 6f64 6520 696e 666f 726d 6174 696f 6e0a  ode information.
+0002dae0: 2020 2020 2020 3c73 7065 6369 616c 2063        <special c
+0002daf0: 6861 7261 6374 6f72 3e20 3a20 6669 6c6c  haractor> : fill
+0002db00: 206f 7574 2074 6865 2063 6861 7261 6374   out the charact
+0002db10: 6f72 0a20 2020 2074 6170 3a0a 2020 2020  or.    tap:.    
+0002db20: 2020 2727 2020 203a 2064 6566 6175 6c74    ''   : default
+0002db30: 0a20 2020 2020 203c 7370 6369 616c 2069  .      <spcial i
+0002db40: 6e69 7461 6c20 6368 7261 6374 6f72 3e3a  nital chractor>:
+0002db50: 2070 7265 2d66 696c 6c6f 7574 2077 6974   pre-fillout wit
+0002db60: 6820 7468 6973 2063 6872 6163 746f 720a  h this chractor.
+0002db70: 2020 2020 2727 270a 2020 2020 6d6f 6465      '''.    mode
+0002db80: 3d6d 6f64 652e 6c6f 7765 7228 290a 2020  =mode.lower().  
+0002db90: 2020 6966 206d 6f64 6520 3d3d 2774 6170    if mode =='tap
+0002dba0: 273a 0a20 2020 2020 2020 2066 696c 6c3d  ':.        fill=
+0002dbb0: 275c 7427 0a20 2020 2065 6c69 6620 6d6f  '\t'.    elif mo
+0002dbc0: 6465 203d 3d20 2773 7061 6365 2720 6f72  de == 'space' or
+0002dbd0: 2066 696c 6c20 6973 204e 6f6e 653a 0a20   fill is None:. 
+0002dbe0: 2020 2020 2020 2066 696c 6c3d 2720 270a         fill=' '.
+0002dbf0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+0002dc00: 6765 2830 2c6e 756d 293a 0a20 2020 2020  ge(0,num):.     
+0002dc10: 2020 2074 6170 3d74 6170 2b66 696c 6c0a     tap=tap+fill.
+0002dc20: 2020 2020 7265 7475 726e 2074 6170 0a0a      return tap..
+0002dc30: 6465 6620 5772 6170 5374 7269 6e67 2873  def WrapString(s
+0002dc40: 7472 696e 672c 6673 7061 6365 3d30 2c6e  tring,fspace=0,n
+0002dc50: 7370 6163 653d 302c 6e65 775f 6c69 6e65  space=0,new_line
+0002dc60: 3d27 5c6e 272c 666c 656e 6774 683d 302c  ='\n',flength=0,
+0002dc70: 6e6c 656e 6774 683d 302c 6e74 6170 3d30  nlength=0,ntap=0
+0002dc80: 2c4e 464c 543d 4661 6c73 652c 6d6f 6465  ,NFLT=False,mode
+0002dc90: 3d27 7370 6163 6527 2c64 6566 6175 6c74  ='space',default
+0002dca0: 3d27 272c 6f75 743d 2773 7472 272c 6967  ='',out='str',ig
+0002dcb0: 6e6f 7265 5f65 6d70 7479 5f65 6e64 6c69  nore_empty_endli
+0002dcc0: 6e65 3d54 7275 6529 3a0a 2020 2020 2373  ne=True):.    #s
+0002dcd0: 7472 696e 6720 3a20 7072 696e 7469 6e67  tring : printing
+0002dce0: 2064 6174 610a 2020 2020 2366 7370 6163   data.    #fspac
+0002dcf0: 6520 3a20 7072 6520 7370 6163 6528 7370  e : pre space(sp
+0002dd00: 6163 6520 6265 666f 7265 2073 7472 696e  ace before strin
+0002dd10: 672c 2062 6566 6f72 6520 6669 7273 7420  g, before first 
+0002dd20: 6c69 6e65 290a 2020 2020 236e 7370 6163  line).    #nspac
+0002dd30: 6520 3a20 7370 6163 6520 666f 7220 626f  e : space for bo
+0002dd40: 6479 2061 7265 610a 2020 2020 236e 6577  dy area.    #new
+0002dd50: 5f6c 696e 653a 206e 6577 5f6c 696e 6520  _line: new_line 
+0002dd60: 7379 6d62 6f6c 0a20 2020 2023 666c 656e  symbol.    #flen
+0002dd70: 6774 6820 3a20 6669 7273 7420 6c69 6e65  gth : first line
+0002dd80: 2028 2068 6561 6420 6c69 6e65 2029 2070   ( head line ) p
+0002dd90: 7269 6e74 2d73 7472 696e 6720 6c65 6e67  rint-string leng
+0002dda0: 7468 0a20 2020 2023 6e6c 656e 6774 6820  th.    #nlength 
+0002ddb0: 3a20 626f 6479 2061 7265 6120 7072 696e  : body area prin
+0002ddc0: 742d 7374 7269 6e67 206c 656e 6774 680a  t-string length.
+0002ddd0: 2020 2020 236d 6f64 6520 2020 203a 2073      #mode    : s
+0002dde0: 7061 6365 3a20 7768 6974 6520 7370 6163  pace: white spac
+0002ddf0: 6520 746f 2073 7061 6365 2061 7265 610a  e to space area.
+0002de00: 2020 2020 236f 7574 2020 2020 203a 206f      #out     : o
+0002de10: 7574 7075 7420 746f 2073 7472 696e 6720  utput to string 
+0002de20: 6f72 206c 6973 740a 2020 2020 236e 7461  or list.    #nta
+0002de30: 7020 2020 203a 206e 6f74 2075 7365 6420  p    : not used 
+0002de40: 2872 656d 6f76 6564 2070 6172 616d 6574  (removed paramet
+0002de50: 6572 290a 2020 2020 234e 464c 5420 2020  er).    #NFLT   
+0002de60: 203a 2073 616d 6520 6173 2066 7370 6163   : same as fspac
+0002de70: 653d 300a 2020 2020 2369 676e 6f72 655f  e=0.    #ignore_
+0002de80: 656d 7074 795f 656e 646c 696e 653a 2054  empty_endline: T
+0002de90: 7275 653a 2069 6620 656e 646c 696e 6520  rue: if endline 
+0002dea0: 6861 7665 206e 6f20 6461 7461 2074 6865  have no data the
+0002deb0: 6e20 6967 6e6f 7265 206d 616b 696e 6720  n ignore making 
+0002dec0: 7370 6163 6520 666f 7220 7772 6170 2e20  space for wrap. 
+0002ded0: 2046 616c 7365 3a20 6d61 6b69 6e67 2073   False: making s
+0002dee0: 7061 6365 2074 6f20 7772 6170 2066 6f72  pace to wrap for
+0002def0: 206e 6578 7420 6174 7461 6368 696e 6720   next attaching 
+0002df00: 7374 7269 6e67 0a20 2020 2069 6620 4973  string.    if Is
+0002df10: 4e6f 6e65 2873 7472 696e 6729 3a20 7265  None(string): re
+0002df20: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
+0002df30: 2069 6620 6e6f 7420 5479 7065 2873 7472   if not Type(str
+0002df40: 696e 672c 2773 7472 2729 3a73 7472 696e  ing,'str'):strin
+0002df50: 673d 2727 277b 7d27 2727 2e66 6f72 6d61  g='''{}'''.forma
+0002df60: 7428 7374 7269 6e67 290a 2020 2020 7263  t(string).    rc
+0002df70: 5f73 7472 3d5b 5d0a 2020 2020 7374 7269  _str=[].    stri
+0002df80: 6e67 5f61 3d73 7472 696e 672e 7370 6c69  ng_a=string.spli
+0002df90: 7428 6e65 775f 6c69 6e65 290a 2020 2020  t(new_line).    
+0002dfa0: 2346 6972 7374 206c 696e 6520 6465 7369  #First line desi
+0002dfb0: 676e 0a20 2020 2069 6620 4e46 4c54 3a20  gn.    if NFLT: 
+0002dfc0: 6673 7061 6365 3d30 0a20 2020 2072 635f  fspace=0.    rc_
+0002dfd0: 7374 722e 6170 7065 6e64 2853 7061 6365  str.append(Space
+0002dfe0: 2866 7370 6163 652c 6d6f 6465 3d6d 6f64  (fspace,mode=mod
+0002dff0: 6529 2b4a 6f69 6e28 4375 7428 7374 7269  e)+Join(Cut(stri
+0002e000: 6e67 5f61 5b30 5d2c 6865 6164 5f6c 656e  ng_a[0],head_len
+0002e010: 3d66 6c65 6e67 7468 2c62 6f64 795f 6c65  =flength,body_le
+0002e020: 6e3d 6e6c 656e 6774 682c 6e65 775f 6c69  n=nlength,new_li
+0002e030: 6e65 3d6e 6577 5f6c 696e 652c 6f75 743d  ne=new_line,out=
+0002e040: 6c69 7374 292c 275c 6e27 2c61 7070 656e  list),'\n',appen
+0002e050: 645f 6672 6f6e 743d 5370 6163 6528 6e73  d_front=Space(ns
+0002e060: 7061 6365 2c6d 6f64 653d 6d6f 6465 2929  pace,mode=mode))
+0002e070: 290a 2020 2020 2342 6f64 7920 6c69 6e65  ).    #Body line
+0002e080: 2064 6573 6967 6e0a 2020 2020 2366 6f72   design.    #for
+0002e090: 2069 6920 696e 2073 7472 696e 675f 615b   ii in string_a[
+0002e0a0: 313a 5d3a 0a20 2020 206d 783d 6c65 6e28  1:]:.    mx=len(
+0002e0b0: 7374 7269 6e67 5f61 292d 310a 2020 2020  string_a)-1.    
+0002e0c0: 666f 7220 6969 2069 6e20 7261 6e67 6528  for ii in range(
+0002e0d0: 312c 6d78 2b31 293a 0a20 2020 2020 2020  1,mx+1):.       
+0002e0e0: 2069 6620 6967 6e6f 7265 5f65 6d70 7479   if ignore_empty
+0002e0f0: 5f65 6e64 6c69 6e65 2069 7320 5472 7565  _endline is True
+0002e100: 2061 6e64 2069 6920 3d3d 206d 7820 616e   and ii == mx an
+0002e110: 6420 6e6f 7420 7374 7269 6e67 5f61 5b69  d not string_a[i
+0002e120: 695d 3a20 6272 6561 6b0a 2020 2020 2020  i]: break.      
+0002e130: 2020 7263 5f73 7472 2e61 7070 656e 6428    rc_str.append(
+0002e140: 5370 6163 6528 6e73 7061 6365 2c6d 6f64  Space(nspace,mod
+0002e150: 653d 6d6f 6465 292b 4a6f 696e 2843 7574  e=mode)+Join(Cut
+0002e160: 2873 7472 696e 675f 615b 6969 5d2c 6865  (string_a[ii],he
+0002e170: 6164 5f6c 656e 3d6e 6c65 6e67 7468 2c6e  ad_len=nlength,n
+0002e180: 6577 5f6c 696e 653d 6e65 775f 6c69 6e65  ew_line=new_line
+0002e190: 2c6f 7574 3d6c 6973 7429 2c27 5c6e 272c  ,out=list),'\n',
+0002e1a0: 6170 7065 6e64 5f66 726f 6e74 3d53 7061  append_front=Spa
+0002e1b0: 6365 286e 7370 6163 652c 6d6f 6465 3d6d  ce(nspace,mode=m
+0002e1c0: 6f64 6529 2929 0a20 2020 2023 7265 7475  ode))).    #retu
+0002e1d0: 726e 206e 6577 5f6c 696e 652e 6a6f 696e  rn new_line.join
+0002e1e0: 2872 635f 7374 7229 0a20 2020 2069 6620  (rc_str).    if 
+0002e1f0: 6f75 7420 696e 205b 6c69 7374 2c27 6c69  out in [list,'li
+0002e200: 7374 275d 3a20 7265 7475 726e 2072 635f  st']: return rc_
+0002e210: 7374 720a 2020 2020 656c 6966 206f 7574  str.    elif out
+0002e220: 2069 6e20 5b74 7570 6c65 2c27 7475 706c   in [tuple,'tupl
+0002e230: 6527 5d3a 2072 6574 7572 6e20 7475 706c  e']: return tupl
+0002e240: 6528 7263 5f73 7472 290a 2020 2020 7265  e(rc_str).    re
+0002e250: 7475 726e 204a 6f69 6e28 7263 5f73 7472  turn Join(rc_str
+0002e260: 2c6e 6577 5f6c 696e 6529 0a0a 6465 6620  ,new_line)..def 
+0002e270: 4765 744b 6579 2873 7263 2c66 696e 643d  GetKey(src,find=
+0002e280: 4e6f 6e65 2c64 6566 6175 6c74 3d4e 6f6e  None,default=Non
+0002e290: 652c 6d6f 6465 3d27 6669 7273 7427 2c72  e,mode='first',r
+0002e2a0: 6f6f 743d 4e6f 6e65 293a 0a20 2020 2027  oot=None):.    '
+0002e2b0: 2727 0a20 2020 2047 6574 206b 6579 2066  ''.    Get key f
+0002e2c0: 726f 6d20 6469 6374 2c6c 6973 742c 7475  rom dict,list,tu
+0002e2d0: 706c 652c 7374 720a 2020 2020 6669 6e64  ple,str.    find
+0002e2e0: 203a 2069 6620 6d61 7463 6865 6420 7661   : if matched va
+0002e2f0: 6c75 6520 7468 656e 2072 6574 7572 6e20  lue then return 
+0002e300: 7468 6520 6b65 792f 696e 6465 7820 6f66  the key/index of
+0002e310: 2074 6865 2064 6174 610a 2020 2020 6d6f   the data.    mo
+0002e320: 6465 203a 0a20 2020 2020 2066 6972 7374  de :.      first
+0002e330: 203a 2064 6566 6175 6c74 3a20 7265 7475   : default: retu
+0002e340: 726e 2066 6972 7374 2066 696e 640a 2020  rn first find.  
+0002e350: 2020 2020 616c 6c20 2020 3a20 7265 7475      all   : retu
+0002e360: 726e 2066 6f75 6e64 2061 6c6c 0a20 2020  rn found all.   
+0002e370: 2064 6566 6175 6c74 203a 2072 6574 7572   default : retur
+0002e380: 6e20 7768 656e 206e 6f74 2066 6f75 6e64  n when not found
+0002e390: 0a20 2020 2027 2727 0a20 2020 2072 743d  .    '''.    rt=
+0002e3a0: 5b5d 0a20 2020 2069 6620 6973 696e 7374  [].    if isinst
+0002e3b0: 616e 6365 2873 7263 2c64 6963 7429 3a0a  ance(src,dict):.
+0002e3c0: 2020 2020 2020 2020 6966 2049 734e 6f6e          if IsNon
+0002e3d0: 6528 6669 6e64 293a 0a20 2020 2020 2020  e(find):.       
+0002e3e0: 2020 2020 2072 6574 7572 6e20 6c69 7374       return list
+0002e3f0: 2873 7263 2e6b 6579 7328 2929 0a20 2020  (src.keys()).   
+0002e400: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002e410: 2020 2020 2020 2066 6f72 206b 6579 2c76         for key,v
+0002e420: 616c 2069 6e20 7372 632e 6974 656d 7328  al in src.items(
+0002e430: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0002e440: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0002e450: 2876 616c 2c64 6963 7429 3a0a 2020 2020  (val,dict):.    
 0002e460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e470: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
-0002e480: 656e 6428 277b 7d2f 7b7d 272e 666f 726d  end('{}/{}'.form
-0002e490: 6174 286b 6579 2c69 2929 0a20 2020 2020  at(key,i)).     
-0002e4a0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0002e4b0: 7661 6c20 3d3d 2066 696e 643a 0a20 2020  val == find:.   
-0002e4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e4d0: 2069 6620 6d6f 6465 203d 3d20 2766 6972   if mode == 'fir
-0002e4e0: 7374 273a 2072 6574 7572 6e20 6b65 790a  st': return key.
-0002e4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002e500: 2020 2020 7274 2e61 7070 656e 6428 6b65      rt.append(ke
-0002e510: 7929 0a20 2020 2020 2020 2020 2020 2069  y).            i
-0002e520: 6620 7274 3a20 7265 7475 726e 2072 740a  f rt: return rt.
-0002e530: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-0002e540: 6e63 6528 7372 632c 286c 6973 742c 7475  nce(src,(list,tu
-0002e550: 706c 652c 7374 7229 293a 0a20 2020 2020  ple,str)):.     
-0002e560: 2020 2069 6620 4973 4e6f 6e65 2866 696e     if IsNone(fin
-0002e570: 6429 3a0a 2020 2020 2020 2020 2020 2020  d):.            
-0002e580: 7265 7475 726e 206c 656e 2873 7263 290a  return len(src).
-0002e590: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002e5a0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-0002e5b0: 696e 2072 616e 6765 2830 2c6c 656e 2873  in range(0,len(s
-0002e5c0: 7263 2929 3a0a 2020 2020 2020 2020 2020  rc)):.          
-0002e5d0: 2020 2020 2020 6966 2066 696e 6420 3d3d        if find ==
-0002e5e0: 2073 7263 5b69 5d3a 0a20 2020 2020 2020   src[i]:.       
-0002e5f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0002e600: 6d6f 6465 203d 3d20 2766 6972 7374 273a  mode == 'first':
-0002e610: 2072 6574 7572 6e20 690a 2020 2020 2020   return i.      
-0002e620: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-0002e630: 2e61 7070 656e 6428 6929 0a20 2020 2020  .append(i).     
-0002e640: 2020 2069 6620 7274 3a20 7265 7475 726e     if rt: return
-0002e650: 2072 740a 2020 2020 7265 7475 726e 2064   rt.    return d
-0002e660: 6566 6175 6c74 0a0a 6465 6620 726d 282a  efault..def rm(*
-0002e670: 6172 6773 2c2a 2a6f 7074 7329 3a0a 2020  args,**opts):.  
-0002e680: 2020 2727 270a 2020 2020 6465 6c65 7465    '''.    delete
-0002e690: 206c 6f63 616c 2066 696c 6520 7769 7468   local file with
-0002e6a0: 206f 7074 696f 6e20 6c69 6b65 2061 7320   option like as 
-0002e6b0: 434c 490a 2020 2020 2020 205b 3c6f 7074  CLI.       [<opt
-0002e6c0: 3e5d 203c 6669 6c65 733e 2f3c 6469 7265  >] <files>/<dire
-0002e6d0: 6374 6f72 793e 0a20 2020 2020 2020 2d66  ctory>.       -f
-0002e6e0: 2020 2020 3a20 646f 6e27 7420 6173 6b20      : don't ask 
-0002e6f0: 6465 6c65 7465 0a20 2020 2020 2020 2d72  delete.       -r
-0002e700: 2020 2020 3a20 3c64 6972 6563 746f 7279      : <directory
-0002e710: 3e20 6f72 2072 6563 7572 7269 6e67 2064  > or recurring d
-0002e720: 656c 6574 650a 2020 2020 6465 6c65 7465  elete.    delete
-0002e730: 206c 6f63 616c 2066 696c 6520 7769 7468   local file with
-0002e740: 206f 7074 696f 6e20 6c69 6b65 2061 7320   option like as 
-0002e750: 4675 6e63 7469 6f6e 0a20 2020 2020 2020  Function.       
-0002e760: 3c66 696c 6573 3e2f 3c64 6972 6563 746f  <files>/<directo
-0002e770: 7279 3e2c 2e2e 2e0a 2020 2020 2020 2066  ry>,....       f
-0002e780: 6f72 6365 3d54 7275 6520 2020 203a 2064  orce=True    : d
-0002e790: 6f6e 2774 2061 736b 2064 656c 6574 652c  on't ask delete,
-0002e7a0: 2064 6566 6175 6c74 2046 616c 7365 0a20   default False. 
-0002e7b0: 2020 2020 2020 7265 6375 7272 696e 673d        recurring=
-0002e7c0: 5472 7565 3a20 3c64 6972 6563 746f 7279  True: <directory
-0002e7d0: 3e20 6f72 2072 6563 7572 7269 6e67 2064  > or recurring d
-0002e7e0: 656c 6574 650a 2020 2020 6465 6c65 7465  elete.    delete
-0002e7f0: 206c 6973 742f 7475 706c 650a 2020 2020   list/tuple.    
-0002e800: 2020 203c 6c69 7374 2c74 7570 6c65 3e2c     <list,tuple>,
-0002e810: 3c64 656c 2069 7465 6d73 3e2c 2e2e 2e0a  <del items>,....
-0002e820: 2020 2020 2020 206f 7074 696f 6e29 0a20         option). 
-0002e830: 2020 2020 2020 2020 6461 7461 0a20 2020          data.   
-0002e840: 2020 2020 2020 2020 5472 7565 203a 2064          True : d
-0002e850: 656c 6574 6520 6461 7461 206c 696b 6520  elete data like 
-0002e860: 6173 203c 6465 6c20 6974 656d 733e 0a20  as <del items>. 
-0002e870: 2020 2020 2020 2020 2020 4661 6c73 653a            False:
-0002e880: 2028 6465 6661 756c 7429 2064 656c 6574   (default) delet
-0002e890: 6520 696e 6465 7820 283c 6465 6c20 6974  e index (<del it
-0002e8a0: 656d 733e 2061 7265 2069 6e74 290a 2020  ems> are int).  
-0002e8b0: 2020 6465 6c65 7465 2064 6963 740a 2020    delete dict.  
-0002e8c0: 2020 2020 203c 6469 6374 3e2c 3c64 656c       <dict>,<del
-0002e8d0: 2069 7465 6d73 3e2c 2e2e 2e0a 2020 2020   items>,....    
-0002e8e0: 2020 206f 7074 696f 6e29 0a20 2020 2020     option).     
-0002e8f0: 2020 2020 6461 7461 0a20 2020 2020 2020      data.       
-0002e900: 2020 2020 5472 7565 203a 2064 656c 6574      True : delet
-0002e910: 6520 6461 7461 206c 696b 6520 6173 203c  e data like as <
-0002e920: 6465 6c20 6974 656d 733e 0a20 2020 2020  del items>.     
-0002e930: 2020 2020 2020 4661 6c73 653a 2028 6465        False: (de
-0002e940: 6661 756c 7429 2064 656c 6574 6520 6b65  fault) delete ke
-0002e950: 7920 6c69 6b65 2061 7320 3c64 656c 2069  y like as <del i
-0002e960: 7465 6d73 3e0a 2020 2020 2020 2020 2072  tems>.         r
-0002e970: 6563 7572 7269 6e67 200a 2020 2020 2020  ecurring .      
-0002e980: 2020 2020 2046 616c 7365 3a20 7365 6172       False: sear
-0002e990: 6368 696e 6720 6461 7461 2069 6e20 6669  ching data in fi
-0002e9a0: 7273 7420 6c65 7665 6c0a 2020 2020 2020  rst level.      
-0002e9b0: 2020 2020 2054 7275 6520 3a20 6b65 6570       True : keep
-0002e9c0: 2073 6561 7263 6869 6e67 2069 6e73 6964   searching insid
-0002e9d0: 6520 6469 6374 696f 6e61 7279 200a 2020  e dictionary .  
-0002e9e0: 2020 2727 270a 2020 2020 6966 206c 656e    '''.    if len
-0002e9f0: 2861 7267 7329 203c 3d20 303a 2072 6574  (args) <= 0: ret
-0002ea00: 7572 6e20 6f70 7473 2e67 6574 2827 6465  urn opts.get('de
-0002ea10: 6661 756c 7427 290a 2020 2020 234c 6973  fault').    #Lis
-0002ea20: 742f 5475 706c 650a 2020 2020 6966 2054  t/Tuple.    if T
-0002ea30: 7970 6528 6172 6773 5b30 5d2c 2827 4c49  ype(args[0],('LI
-0002ea40: 5354 272c 276c 6973 7427 2c27 7475 706c  ST','list','tupl
-0002ea50: 6527 2929 3a0a 2020 2020 2020 2020 7274  e')):.        rt
-0002ea60: 3d6c 6973 7428 6172 6773 5b30 5d29 0a20  =list(args[0]). 
-0002ea70: 2020 2020 2020 204c 4953 5428 7274 292e         LIST(rt).
-0002ea80: 4465 6c65 7465 282a 6172 6773 5b31 3a5d  Delete(*args[1:]
-0002ea90: 2c66 696e 643d 2764 6174 6127 2069 6620  ,find='data' if 
-0002eaa0: 6f70 7473 2e67 6574 2827 7661 6c75 6527  opts.get('value'
-0002eab0: 2c6f 7074 732e 6765 7428 2764 6174 6127  ,opts.get('data'
-0002eac0: 2c46 616c 7365 2929 2065 6c73 6520 2769  ,False)) else 'i
-0002ead0: 6e64 6578 2729 0a20 2020 2020 2020 2072  ndex').        r
-0002eae0: 6574 7572 6e20 7274 0a20 2020 2020 2020  eturn rt.       
-0002eaf0: 2023 6465 6c5f 6461 7461 3d6f 7074 732e   #del_data=opts.
-0002eb00: 6765 7428 2776 616c 7565 272c 6f70 7473  get('value',opts
-0002eb10: 2e67 6574 2827 6461 7461 272c 4661 6c73  .get('data',Fals
-0002eb20: 6529 290a 2020 2020 2020 2020 2369 6620  e)).        #if 
-0002eb30: 6465 6c5f 6461 7461 3a0a 2020 2020 2020  del_data:.      
-0002eb40: 2020 2320 2020 2066 6f72 2069 2069 6e20    #    for i in 
-0002eb50: 6172 6773 5b31 3a5d 3a0a 2020 2020 2020  args[1:]:.      
-0002eb60: 2020 2320 2020 2020 2020 2069 6620 6920    #        if i 
-0002eb70: 696e 2072 743a 2072 742e 7265 6d6f 7665  in rt: rt.remove
-0002eb80: 2869 290a 2020 2020 2020 2020 2320 2020  (i).        #   
-0002eb90: 2069 6620 5479 7065 2861 7267 735b 305d   if Type(args[0]
-0002eba0: 2c27 7475 706c 6527 293a 2072 6574 7572  ,'tuple'): retur
-0002ebb0: 6e20 7475 706c 6528 7274 290a 2020 2020  n tuple(rt).    
-0002ebc0: 2020 2020 2320 2020 2072 6574 7572 6e20      #    return 
-0002ebd0: 7274 0a20 2020 2020 2020 2023 656c 7365  rt.        #else
-0002ebe0: 3a0a 2020 2020 2020 2020 2320 2020 2074  :.        #    t
-0002ebf0: 6d70 3d5b 5d0a 2020 2020 2020 2020 2320  mp=[].        # 
-0002ec00: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-0002ec10: 6528 302c 6c65 6e28 7274 2929 3a0a 2020  e(0,len(rt)):.  
-0002ec20: 2020 2020 2020 2320 2020 2020 2020 2069        #        i
-0002ec30: 6620 6920 696e 2061 7267 735b 313a 5d3a  f i in args[1:]:
-0002ec40: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-0002ec50: 2020 2320 2020 2020 2020 2074 6d70 2e61    #        tmp.a
-0002ec60: 7070 656e 6428 7274 5b69 5d29 0a20 2020  ppend(rt[i]).   
-0002ec70: 2020 2020 2023 2020 2020 6966 2054 7970       #    if Typ
-0002ec80: 6528 6172 6773 5b30 5d2c 2774 7570 6c65  e(args[0],'tuple
-0002ec90: 2729 3a20 7265 7475 726e 2074 7570 6c65  '): return tuple
-0002eca0: 2874 6d70 290a 2020 2020 2020 2020 2320  (tmp).        # 
-0002ecb0: 2020 2072 6574 7572 6e20 746d 700a 2020     return tmp.  
-0002ecc0: 2020 2344 6963 740a 2020 2020 656c 6966    #Dict.    elif
-0002ecd0: 2054 7970 6528 6172 6773 5b30 5d2c 6469   Type(args[0],di
-0002ece0: 6374 293a 0a20 2020 2020 2020 2072 743d  ct):.        rt=
-0002ecf0: 6172 6773 5b30 5d0a 2020 2020 2020 2020  args[0].        
-0002ed00: 6465 6c5f 6461 7461 3d6f 7074 732e 6765  del_data=opts.ge
-0002ed10: 7428 2776 616c 7565 272c 6f70 7473 2e67  t('value',opts.g
-0002ed20: 6574 2827 6461 7461 272c 4661 6c73 6529  et('data',False)
-0002ed30: 290a 2020 2020 2020 2020 2320 4465 6c20  ).        # Del 
-0002ed40: 4461 7461 0a20 2020 2020 2020 2069 6620  Data.        if 
-0002ed50: 6465 6c5f 6461 7461 3a20 0a20 2020 2020  del_data: .     
-0002ed60: 2020 2020 2020 2074 6d70 3d5b 5d0a 2020         tmp=[].  
-0002ed70: 2020 2020 2020 2020 2020 7274 5f69 7465            rt_ite
-0002ed80: 6d73 3d6c 6973 7428 7274 2e69 7465 6d73  ms=list(rt.items
-0002ed90: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
-0002eda0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-0002edb0: 2c6c 656e 2872 745f 6974 656d 7329 293a  ,len(rt_items)):
-0002edc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002edd0: 2023 5265 6375 7272 696e 6720 6368 6563   #Recurring chec
-0002ede0: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
-0002edf0: 2020 6966 206f 7074 732e 6765 7428 2772    if opts.get('r
-0002ee00: 6563 7572 7269 6e67 272c 4661 6c73 6529  ecurring',False)
-0002ee10: 2061 6e64 2054 7970 6528 7274 5f69 7465   and Type(rt_ite
-0002ee20: 6d73 5b69 5d5b 315d 2c64 6963 7429 3a0a  ms[i][1],dict):.
-0002ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ee40: 2020 2020 613d 6c69 7374 2872 745f 6974      a=list(rt_it
-0002ee50: 656d 735b 695d 290a 2020 2020 2020 2020  ems[i]).        
-0002ee60: 2020 2020 2020 2020 2020 2020 615b 315d              a[1]
-0002ee70: 3d72 6d28 7274 5f69 7465 6d73 5b69 5d5b  =rm(rt_items[i][
-0002ee80: 315d 2c2a 6172 6773 5b31 3a5d 2c64 6174  1],*args[1:],dat
-0002ee90: 613d 6465 6c5f 6461 7461 290a 2020 2020  a=del_data).    
-0002eea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002eeb0: 746d 702e 6170 7065 6e64 2874 7570 6c65  tmp.append(tuple
-0002eec0: 2861 2929 0a20 2020 2020 2020 2020 2020  (a)).           
-0002eed0: 2020 2020 2065 6c69 6620 7274 5f69 7465       elif rt_ite
-0002eee0: 6d73 5b69 5d5b 315d 206e 6f74 2069 6e20  ms[i][1] not in 
-0002eef0: 6172 6773 5b31 3a5d 3a0a 2020 2020 2020  args[1:]:.      
-0002ef00: 2020 2020 2020 2020 2020 2020 2020 746d                tm
-0002ef10: 702e 6170 7065 6e64 2872 745f 6974 656d  p.append(rt_item
-0002ef20: 735b 695d 290a 2020 2020 2020 2020 2020  s[i]).          
-0002ef30: 2020 7265 7475 726e 2064 6963 7428 746d    return dict(tm
-0002ef40: 7029 0a20 2020 2020 2020 2023 2044 656c  p).        # Del
-0002ef50: 206b 6579 0a20 2020 2020 2020 2065 6c73   key.        els
-0002ef60: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
-0002ef70: 2052 6563 7572 7269 6e67 2063 6865 636b   Recurring check
-0002ef80: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
-0002ef90: 6966 206f 7074 732e 6765 7428 2772 6563  if opts.get('rec
-0002efa0: 7572 7269 6e67 272c 4661 6c73 6529 3a0a  urring',False):.
-0002efb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002efc0: 746d 703d 5b5d 0a20 2020 2020 2020 2020  tmp=[].         
-0002efd0: 2020 2020 2020 2072 745f 6974 656d 733d         rt_items=
-0002efe0: 6c69 7374 2872 742e 6974 656d 7328 2929  list(rt.items())
-0002eff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f000: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-0002f010: 302c 6c65 6e28 7274 5f69 7465 6d73 2929  0,len(rt_items))
-0002f020: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002f030: 2020 2020 2020 6966 2072 745f 6974 656d        if rt_item
-0002f040: 735b 695d 5b30 5d20 6e6f 7420 696e 2061  s[i][0] not in a
-0002f050: 7267 735b 313a 5d3a 0a20 2020 2020 2020  rgs[1:]:.       
-0002f060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f070: 2069 6620 5479 7065 2872 745f 6974 656d   if Type(rt_item
-0002f080: 735b 695d 5b31 5d2c 6469 6374 293a 0a20  s[i][1],dict):. 
-0002f090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f0a0: 2020 2020 2020 2020 2020 2061 3d6c 6973             a=lis
-0002f0b0: 7428 7274 5f69 7465 6d73 5b69 5d29 0a20  t(rt_items[i]). 
-0002f0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f0d0: 2020 2020 2020 2020 2020 2061 5b31 5d3d             a[1]=
-0002f0e0: 726d 2872 745f 6974 656d 735b 695d 5b31  rm(rt_items[i][1
-0002f0f0: 5d2c 2a61 7267 735b 313a 5d2c 6461 7461  ],*args[1:],data
-0002f100: 3d64 656c 5f64 6174 6129 0a20 2020 2020  =del_data).     
-0002f110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f120: 2020 2020 2020 2074 6d70 2e61 7070 656e         tmp.appen
-0002f130: 6428 7475 706c 6528 6129 290a 2020 2020  d(tuple(a)).    
+0002e470: 613d 4765 744b 6579 2876 616c 2c66 696e  a=GetKey(val,fin
+0002e480: 642c 6465 6661 756c 742c 6d6f 6465 2c6b  d,default,mode,k
+0002e490: 6579 290a 2020 2020 2020 2020 2020 2020  ey).            
+0002e4a0: 2020 2020 2020 2020 6966 2061 3a0a 2020          if a:.  
+0002e4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e4c0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0002e4d0: 6e63 6528 612c 7374 7229 3a0a 2020 2020  nce(a,str):.    
+0002e4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e4f0: 2020 2020 2020 2020 6966 2072 6f6f 7420          if root 
+0002e500: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0002e510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e520: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0002e530: 272f 7b7d 2f7b 7d27 2e66 6f72 6d61 7428  '/{}/{}'.format(
+0002e540: 6b65 792c 6129 0a20 2020 2020 2020 2020  key,a).         
+0002e550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e560: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002e570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e580: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0002e590: 277b 7d2f 7b7d 272e 666f 726d 6174 286b  '{}/{}'.format(k
+0002e5a0: 6579 2c61 290a 2020 2020 2020 2020 2020  ey,a).          
+0002e5b0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0002e5c0: 6966 2069 7369 6e73 7461 6e63 6528 612c  if isinstance(a,
+0002e5d0: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
+0002e5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e5f0: 2020 2066 6f72 2069 2069 6e20 613a 0a20     for i in a:. 
+0002e600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e610: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0002e620: 6620 726f 6f74 2069 7320 4e6f 6e65 3a0a  f root is None:.
+0002e630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e650: 2020 2020 7274 2e61 7070 656e 6428 272f      rt.append('/
+0002e660: 7b7d 2f7b 7d27 2e66 6f72 6d61 7428 6b65  {}/{}'.format(ke
+0002e670: 792c 6929 290a 2020 2020 2020 2020 2020  y,i)).          
+0002e680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e690: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0002e6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e6c0: 7274 2e61 7070 656e 6428 277b 7d2f 7b7d  rt.append('{}/{}
+0002e6d0: 272e 666f 726d 6174 286b 6579 2c69 2929  '.format(key,i))
+0002e6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e6f0: 2065 6c69 6620 7661 6c20 3d3d 2066 696e   elif val == fin
+0002e700: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
+0002e710: 2020 2020 2020 2069 6620 6d6f 6465 203d         if mode =
+0002e720: 3d20 2766 6972 7374 273a 2072 6574 7572  = 'first': retur
+0002e730: 6e20 6b65 790a 2020 2020 2020 2020 2020  n key.          
+0002e740: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
+0002e750: 656e 6428 6b65 7929 0a20 2020 2020 2020  end(key).       
+0002e760: 2020 2020 2069 6620 7274 3a20 7265 7475       if rt: retu
+0002e770: 726e 2072 740a 2020 2020 656c 6966 2069  rn rt.    elif i
+0002e780: 7369 6e73 7461 6e63 6528 7372 632c 286c  sinstance(src,(l
+0002e790: 6973 742c 7475 706c 652c 7374 7229 293a  ist,tuple,str)):
+0002e7a0: 0a20 2020 2020 2020 2069 6620 4973 4e6f  .        if IsNo
+0002e7b0: 6e65 2866 696e 6429 3a0a 2020 2020 2020  ne(find):.      
+0002e7c0: 2020 2020 2020 7265 7475 726e 206c 656e        return len
+0002e7d0: 2873 7263 290a 2020 2020 2020 2020 656c  (src).        el
+0002e7e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002e7f0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
+0002e800: 2c6c 656e 2873 7263 2929 3a0a 2020 2020  ,len(src)):.    
+0002e810: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+0002e820: 696e 6420 3d3d 2073 7263 5b69 5d3a 0a20  ind == src[i]:. 
+0002e830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e840: 2020 2069 6620 6d6f 6465 203d 3d20 2766     if mode == 'f
+0002e850: 6972 7374 273a 2072 6574 7572 6e20 690a  irst': return i.
+0002e860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e870: 2020 2020 7274 2e61 7070 656e 6428 6929      rt.append(i)
+0002e880: 0a20 2020 2020 2020 2069 6620 7274 3a20  .        if rt: 
+0002e890: 7265 7475 726e 2072 740a 2020 2020 7265  return rt.    re
+0002e8a0: 7475 726e 2064 6566 6175 6c74 0a0a 6465  turn default..de
+0002e8b0: 6620 726d 282a 6172 6773 2c2a 2a6f 7074  f rm(*args,**opt
+0002e8c0: 7329 3a0a 2020 2020 2727 270a 2020 2020  s):.    '''.    
+0002e8d0: 6465 6c65 7465 206c 6f63 616c 2066 696c  delete local fil
+0002e8e0: 6520 7769 7468 206f 7074 696f 6e20 6c69  e with option li
+0002e8f0: 6b65 2061 7320 434c 490a 2020 2020 2020  ke as CLI.      
+0002e900: 205b 3c6f 7074 3e5d 203c 6669 6c65 733e   [<opt>] <files>
+0002e910: 2f3c 6469 7265 6374 6f72 793e 0a20 2020  /<directory>.   
+0002e920: 2020 2020 2d66 2020 2020 3a20 646f 6e27      -f    : don'
+0002e930: 7420 6173 6b20 6465 6c65 7465 0a20 2020  t ask delete.   
+0002e940: 2020 2020 2d72 2020 2020 3a20 3c64 6972      -r    : <dir
+0002e950: 6563 746f 7279 3e20 6f72 2072 6563 7572  ectory> or recur
+0002e960: 7269 6e67 2064 656c 6574 650a 2020 2020  ring delete.    
+0002e970: 6465 6c65 7465 206c 6f63 616c 2066 696c  delete local fil
+0002e980: 6520 7769 7468 206f 7074 696f 6e20 6c69  e with option li
+0002e990: 6b65 2061 7320 4675 6e63 7469 6f6e 0a20  ke as Function. 
+0002e9a0: 2020 2020 2020 3c66 696c 6573 3e2f 3c64        <files>/<d
+0002e9b0: 6972 6563 746f 7279 3e2c 2e2e 2e0a 2020  irectory>,....  
+0002e9c0: 2020 2020 2066 6f72 6365 3d54 7275 6520       force=True 
+0002e9d0: 2020 203a 2064 6f6e 2774 2061 736b 2064     : don't ask d
+0002e9e0: 656c 6574 652c 2064 6566 6175 6c74 2046  elete, default F
+0002e9f0: 616c 7365 0a20 2020 2020 2020 7265 6375  alse.       recu
+0002ea00: 7272 696e 673d 5472 7565 3a20 3c64 6972  rring=True: <dir
+0002ea10: 6563 746f 7279 3e20 6f72 2072 6563 7572  ectory> or recur
+0002ea20: 7269 6e67 2064 656c 6574 650a 2020 2020  ring delete.    
+0002ea30: 6465 6c65 7465 206c 6973 742f 7475 706c  delete list/tupl
+0002ea40: 650a 2020 2020 2020 203c 6c69 7374 2c74  e.       <list,t
+0002ea50: 7570 6c65 3e2c 3c64 656c 2069 7465 6d73  uple>,<del items
+0002ea60: 3e2c 2e2e 2e0a 2020 2020 2020 206f 7074  >,....       opt
+0002ea70: 696f 6e29 0a20 2020 2020 2020 2020 6461  ion).         da
+0002ea80: 7461 0a20 2020 2020 2020 2020 2020 5472  ta.           Tr
+0002ea90: 7565 203a 2064 656c 6574 6520 6461 7461  ue : delete data
+0002eaa0: 206c 696b 6520 6173 203c 6465 6c20 6974   like as <del it
+0002eab0: 656d 733e 0a20 2020 2020 2020 2020 2020  ems>.           
+0002eac0: 4661 6c73 653a 2028 6465 6661 756c 7429  False: (default)
+0002ead0: 2064 656c 6574 6520 696e 6465 7820 283c   delete index (<
+0002eae0: 6465 6c20 6974 656d 733e 2061 7265 2069  del items> are i
+0002eaf0: 6e74 290a 2020 2020 6465 6c65 7465 2064  nt).    delete d
+0002eb00: 6963 740a 2020 2020 2020 203c 6469 6374  ict.       <dict
+0002eb10: 3e2c 3c64 656c 2069 7465 6d73 3e2c 2e2e  >,<del items>,..
+0002eb20: 2e0a 2020 2020 2020 206f 7074 696f 6e29  ..       option)
+0002eb30: 0a20 2020 2020 2020 2020 6461 7461 0a20  .         data. 
+0002eb40: 2020 2020 2020 2020 2020 5472 7565 203a            True :
+0002eb50: 2064 656c 6574 6520 6461 7461 206c 696b   delete data lik
+0002eb60: 6520 6173 203c 6465 6c20 6974 656d 733e  e as <del items>
+0002eb70: 0a20 2020 2020 2020 2020 2020 4661 6c73  .           Fals
+0002eb80: 653a 2028 6465 6661 756c 7429 2064 656c  e: (default) del
+0002eb90: 6574 6520 6b65 7920 6c69 6b65 2061 7320  ete key like as 
+0002eba0: 3c64 656c 2069 7465 6d73 3e0a 2020 2020  <del items>.    
+0002ebb0: 2020 2020 2072 6563 7572 7269 6e67 200a       recurring .
+0002ebc0: 2020 2020 2020 2020 2020 2046 616c 7365             False
+0002ebd0: 3a20 7365 6172 6368 696e 6720 6461 7461  : searching data
+0002ebe0: 2069 6e20 6669 7273 7420 6c65 7665 6c0a   in first level.
+0002ebf0: 2020 2020 2020 2020 2020 2054 7275 6520             True 
+0002ec00: 3a20 6b65 6570 2073 6561 7263 6869 6e67  : keep searching
+0002ec10: 2069 6e73 6964 6520 6469 6374 696f 6e61   inside dictiona
+0002ec20: 7279 200a 2020 2020 2727 270a 2020 2020  ry .    '''.    
+0002ec30: 6966 206c 656e 2861 7267 7329 203c 3d20  if len(args) <= 
+0002ec40: 303a 2072 6574 7572 6e20 6f70 7473 2e67  0: return opts.g
+0002ec50: 6574 2827 6465 6661 756c 7427 290a 2020  et('default').  
+0002ec60: 2020 234c 6973 742f 5475 706c 650a 2020    #List/Tuple.  
+0002ec70: 2020 6966 2054 7970 6528 6172 6773 5b30    if Type(args[0
+0002ec80: 5d2c 2827 4c49 5354 272c 276c 6973 7427  ],('LIST','list'
+0002ec90: 2c27 7475 706c 6527 2929 3a0a 2020 2020  ,'tuple')):.    
+0002eca0: 2020 2020 7274 3d6c 6973 7428 6172 6773      rt=list(args
+0002ecb0: 5b30 5d29 0a20 2020 2020 2020 204c 4953  [0]).        LIS
+0002ecc0: 5428 7274 292e 4465 6c65 7465 282a 6172  T(rt).Delete(*ar
+0002ecd0: 6773 5b31 3a5d 2c66 696e 643d 2764 6174  gs[1:],find='dat
+0002ece0: 6127 2069 6620 6f70 7473 2e67 6574 2827  a' if opts.get('
+0002ecf0: 7661 6c75 6527 2c6f 7074 732e 6765 7428  value',opts.get(
+0002ed00: 2764 6174 6127 2c46 616c 7365 2929 2065  'data',False)) e
+0002ed10: 6c73 6520 2769 6e64 6578 2729 0a20 2020  lse 'index').   
+0002ed20: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
+0002ed30: 2020 2020 2020 2023 6465 6c5f 6461 7461         #del_data
+0002ed40: 3d6f 7074 732e 6765 7428 2776 616c 7565  =opts.get('value
+0002ed50: 272c 6f70 7473 2e67 6574 2827 6461 7461  ',opts.get('data
+0002ed60: 272c 4661 6c73 6529 290a 2020 2020 2020  ',False)).      
+0002ed70: 2020 2369 6620 6465 6c5f 6461 7461 3a0a    #if del_data:.
+0002ed80: 2020 2020 2020 2020 2320 2020 2066 6f72          #    for
+0002ed90: 2069 2069 6e20 6172 6773 5b31 3a5d 3a0a   i in args[1:]:.
+0002eda0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002edb0: 2069 6620 6920 696e 2072 743a 2072 742e   if i in rt: rt.
+0002edc0: 7265 6d6f 7665 2869 290a 2020 2020 2020  remove(i).      
+0002edd0: 2020 2320 2020 2069 6620 5479 7065 2861    #    if Type(a
+0002ede0: 7267 735b 305d 2c27 7475 706c 6527 293a  rgs[0],'tuple'):
+0002edf0: 2072 6574 7572 6e20 7475 706c 6528 7274   return tuple(rt
+0002ee00: 290a 2020 2020 2020 2020 2320 2020 2072  ).        #    r
+0002ee10: 6574 7572 6e20 7274 0a20 2020 2020 2020  eturn rt.       
+0002ee20: 2023 656c 7365 3a0a 2020 2020 2020 2020   #else:.        
+0002ee30: 2320 2020 2074 6d70 3d5b 5d0a 2020 2020  #    tmp=[].    
+0002ee40: 2020 2020 2320 2020 2066 6f72 2069 2069      #    for i i
+0002ee50: 6e20 7261 6e67 6528 302c 6c65 6e28 7274  n range(0,len(rt
+0002ee60: 2929 3a0a 2020 2020 2020 2020 2320 2020  )):.        #   
+0002ee70: 2020 2020 2069 6620 6920 696e 2061 7267       if i in arg
+0002ee80: 735b 313a 5d3a 2063 6f6e 7469 6e75 650a  s[1:]: continue.
+0002ee90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0002eea0: 2074 6d70 2e61 7070 656e 6428 7274 5b69   tmp.append(rt[i
+0002eeb0: 5d29 0a20 2020 2020 2020 2023 2020 2020  ]).        #    
+0002eec0: 6966 2054 7970 6528 6172 6773 5b30 5d2c  if Type(args[0],
+0002eed0: 2774 7570 6c65 2729 3a20 7265 7475 726e  'tuple'): return
+0002eee0: 2074 7570 6c65 2874 6d70 290a 2020 2020   tuple(tmp).    
+0002eef0: 2020 2020 2320 2020 2072 6574 7572 6e20      #    return 
+0002ef00: 746d 700a 2020 2020 2344 6963 740a 2020  tmp.    #Dict.  
+0002ef10: 2020 656c 6966 2054 7970 6528 6172 6773    elif Type(args
+0002ef20: 5b30 5d2c 6469 6374 293a 0a20 2020 2020  [0],dict):.     
+0002ef30: 2020 2072 743d 6172 6773 5b30 5d0a 2020     rt=args[0].  
+0002ef40: 2020 2020 2020 6465 6c5f 6461 7461 3d6f        del_data=o
+0002ef50: 7074 732e 6765 7428 2776 616c 7565 272c  pts.get('value',
+0002ef60: 6f70 7473 2e67 6574 2827 6461 7461 272c  opts.get('data',
+0002ef70: 4661 6c73 6529 290a 2020 2020 2020 2020  False)).        
+0002ef80: 2320 4465 6c20 4461 7461 0a20 2020 2020  # Del Data.     
+0002ef90: 2020 2069 6620 6465 6c5f 6461 7461 3a20     if del_data: 
+0002efa0: 0a20 2020 2020 2020 2020 2020 2074 6d70  .            tmp
+0002efb0: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
+0002efc0: 7274 5f69 7465 6d73 3d6c 6973 7428 7274  rt_items=list(rt
+0002efd0: 2e69 7465 6d73 2829 290a 2020 2020 2020  .items()).      
+0002efe0: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
+0002eff0: 616e 6765 2830 2c6c 656e 2872 745f 6974  ange(0,len(rt_it
+0002f000: 656d 7329 293a 0a20 2020 2020 2020 2020  ems)):.         
+0002f010: 2020 2020 2020 2023 5265 6375 7272 696e         #Recurrin
+0002f020: 6720 6368 6563 6b0a 2020 2020 2020 2020  g check.        
+0002f030: 2020 2020 2020 2020 6966 206f 7074 732e          if opts.
+0002f040: 6765 7428 2772 6563 7572 7269 6e67 272c  get('recurring',
+0002f050: 4661 6c73 6529 2061 6e64 2054 7970 6528  False) and Type(
+0002f060: 7274 5f69 7465 6d73 5b69 5d5b 315d 2c64  rt_items[i][1],d
+0002f070: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
+0002f080: 2020 2020 2020 2020 2020 613d 6c69 7374            a=list
+0002f090: 2872 745f 6974 656d 735b 695d 290a 2020  (rt_items[i]).  
+0002f0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f0b0: 2020 615b 315d 3d72 6d28 7274 5f69 7465    a[1]=rm(rt_ite
+0002f0c0: 6d73 5b69 5d5b 315d 2c2a 6172 6773 5b31  ms[i][1],*args[1
+0002f0d0: 3a5d 2c64 6174 613d 6465 6c5f 6461 7461  :],data=del_data
+0002f0e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002f0f0: 2020 2020 2020 746d 702e 6170 7065 6e64        tmp.append
+0002f100: 2874 7570 6c65 2861 2929 0a20 2020 2020  (tuple(a)).     
+0002f110: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0002f120: 7274 5f69 7465 6d73 5b69 5d5b 315d 206e  rt_items[i][1] n
+0002f130: 6f74 2069 6e20 6172 6773 5b31 3a5d 3a0a  ot in args[1:]:.
 0002f140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f150: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0002f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f170: 2020 2020 2020 746d 702e 6170 7065 6e64        tmp.append
-0002f180: 2872 745f 6974 656d 735b 695d 290a 2020  (rt_items[i]).  
-0002f190: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0002f1a0: 7475 726e 2064 6963 7428 746d 7029 0a20  turn dict(tmp). 
-0002f1b0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0002f1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002f1d0: 2066 6f72 2069 2069 6e20 6172 6773 5b31   for i in args[1
-0002f1e0: 3a5d 3a0a 2020 2020 2020 2020 2020 2020  :]:.            
-0002f1f0: 2020 2020 2020 2020 2350 6174 6820 6b65          #Path ke
-0002f200: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
-0002f210: 2020 2020 2020 6966 2027 2f27 2069 6e20        if '/' in 
-0002f220: 6920 616e 6420 695b 305d 203d 3d20 272f  i and i[0] == '/
-0002f230: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-0002f240: 2020 2020 2020 2020 2020 2069 5f61 3d69             i_a=i
-0002f250: 2e73 706c 6974 2827 2f27 290a 2020 2020  .split('/').    
-0002f260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f270: 2020 2020 746d 703d 7274 0a20 2020 2020      tmp=rt.     
-0002f280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f290: 2020 2062 726b 3d46 616c 7365 0a20 2020     brk=False.   
+0002f150: 2020 2020 746d 702e 6170 7065 6e64 2872      tmp.append(r
+0002f160: 745f 6974 656d 735b 695d 290a 2020 2020  t_items[i]).    
+0002f170: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+0002f180: 6963 7428 746d 7029 0a20 2020 2020 2020  ict(tmp).       
+0002f190: 2023 2044 656c 206b 6579 0a20 2020 2020   # Del key.     
+0002f1a0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0002f1b0: 2020 2020 2023 2052 6563 7572 7269 6e67       # Recurring
+0002f1c0: 2063 6865 636b 696e 670a 2020 2020 2020   checking.      
+0002f1d0: 2020 2020 2020 6966 206f 7074 732e 6765        if opts.ge
+0002f1e0: 7428 2772 6563 7572 7269 6e67 272c 4661  t('recurring',Fa
+0002f1f0: 6c73 6529 3a0a 2020 2020 2020 2020 2020  lse):.          
+0002f200: 2020 2020 2020 746d 703d 5b5d 0a20 2020        tmp=[].   
+0002f210: 2020 2020 2020 2020 2020 2020 2072 745f               rt_
+0002f220: 6974 656d 733d 6c69 7374 2872 742e 6974  items=list(rt.it
+0002f230: 656d 7328 2929 0a20 2020 2020 2020 2020  ems()).         
+0002f240: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0002f250: 7261 6e67 6528 302c 6c65 6e28 7274 5f69  range(0,len(rt_i
+0002f260: 7465 6d73 2929 3a0a 2020 2020 2020 2020  tems)):.        
+0002f270: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+0002f280: 745f 6974 656d 735b 695d 5b30 5d20 6e6f  t_items[i][0] no
+0002f290: 7420 696e 2061 7267 735b 313a 5d3a 0a20  t in args[1:]:. 
 0002f2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f2b0: 2020 2020 2066 6f72 207a 2069 6e20 695f       for z in i_
-0002f2c0: 615b 313a 2d31 5d3a 0a20 2020 2020 2020  a[1:-1]:.       
-0002f2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f2e0: 2020 2020 2069 6620 7a20 696e 2074 6d70       if z in tmp
-0002f2f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002f300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f310: 2020 746d 703d 746d 705b 7a5d 0a20 2020    tmp=tmp[z].   
-0002f320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f330: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0002f340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f350: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0002f360: 726b 3d54 7275 650a 2020 2020 2020 2020  rk=True.        
-0002f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f380: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
-0002f390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f3a0: 2020 2020 2020 6966 206e 6f74 2062 726b        if not brk
-0002f3b0: 2061 6e64 2069 5f61 5b2d 315d 2069 6e20   and i_a[-1] in 
-0002f3c0: 746d 703a 2074 6d70 2e70 6f70 2869 5f61  tmp: tmp.pop(i_a
-0002f3d0: 5b2d 315d 290a 2020 2020 2020 2020 2020  [-1]).          
-0002f3e0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0002f3f0: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
-0002f400: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0002f410: 6920 696e 2072 743a 0a20 2020 2020 2020  i in rt:.       
-0002f420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f430: 2072 742e 706f 7028 6929 0a20 2020 2020   rt.pop(i).     
-0002f440: 2020 2072 6574 7572 6e20 7274 0a20 2020     return rt.   
-0002f450: 2065 6c73 653a 0a20 2020 2020 2020 2023   else:.        #
-0002f460: 4669 6c65 2f44 6972 6563 746f 7279 0a20  File/Directory. 
-0002f470: 2020 2020 2020 2073 7562 5f64 6972 3d6f         sub_dir=o
-0002f480: 7074 732e 6765 7428 2772 6563 7572 7269  pts.get('recurri
-0002f490: 6e67 272c 4661 6c73 6529 0a20 2020 2020  ng',False).     
-0002f4a0: 2020 2066 6f72 6365 3d6f 7074 732e 6765     force=opts.ge
-0002f4b0: 7428 2766 6f72 6365 272c 4661 6c73 6529  t('force',False)
-0002f4c0: 0a20 2020 2020 2020 2069 6620 6669 6e64  .        if find
-0002f4d0: 5f65 7865 6375 7461 626c 6528 2772 6d27  _executable('rm'
-0002f4e0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-0002f4f0: 7562 5f6f 7074 3d27 270a 2020 2020 2020  ub_opt=''.      
-0002f500: 2020 2020 2020 6966 2073 7562 5f64 6972        if sub_dir
-0002f510: 3a20 7375 625f 6f70 743d 272d 7227 0a20  : sub_opt='-r'. 
-0002f520: 2020 2020 2020 2020 2020 2069 6620 666f             if fo
-0002f530: 7263 653a 0a20 2020 2020 2020 2020 2020  rce:.           
-0002f540: 2020 2020 2069 6620 7375 625f 6f70 743a       if sub_opt:
-0002f550: 2073 7562 5f6f 7074 3d73 7562 5f6f 7074   sub_opt=sub_opt
-0002f560: 2b27 6627 0a20 2020 2020 2020 2020 2020  +'f'.           
-0002f570: 2020 2020 2065 6c73 653a 2073 7562 5f6f       else: sub_o
-0002f580: 7074 3d27 2d66 270a 2020 2020 2020 2020  pt='-f'.        
-0002f590: 2020 2020 7273 6865 6c6c 2827 726d 202d      rshell('rm -
-0002f5a0: 6920 7b7d 272e 666f 726d 6174 2873 7562  i {}'.format(sub
-0002f5b0: 5f6f 7074 292b 4a6f 696e 2861 7267 732c  _opt)+Join(args,
-0002f5c0: 2720 2729 2c69 6e74 6572 6163 7469 7665  ' '),interactive
-0002f5d0: 3d54 7275 6529 0a20 2020 2020 2020 2065  =True).        e
-0002f5e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002f5f0: 2066 6f72 2061 7267 2069 6e20 6172 6773   for arg in args
-0002f600: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002f610: 2020 6966 2061 7267 5b30 5d20 3d3d 2027    if arg[0] == '
-0002f620: 2d27 3a0a 2020 2020 2020 2020 2020 2020  -':.            
-0002f630: 2020 2020 2020 2069 6620 2772 2720 696e         if 'r' in
-0002f640: 2061 7267 3a0a 2020 2020 2020 2020 2020   arg:.          
-0002f650: 2020 2020 2020 2020 2020 2020 7375 625f              sub_
-0002f660: 6469 723d 5472 7565 0a20 2020 2020 2020  dir=True.       
-0002f670: 2020 2020 2020 2020 2020 2020 6966 2027              if '
-0002f680: 6627 2069 6e20 6172 673a 0a20 2020 2020  f' in arg:.     
-0002f690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f6a0: 2066 6f72 6365 3d54 7275 650a 2020 2020   force=True.    
-0002f6b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0002f6c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002f6d0: 2020 2020 2020 6966 206f 732e 6973 6669        if os.isfi
-0002f6e0: 6c65 2861 7267 293a 0a20 2020 2020 2020  le(arg):.       
-0002f6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f700: 2069 6620 6e6f 7420 666f 7263 653a 0a20   if not force:. 
-0002f710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f720: 2020 2020 2020 2020 2020 2079 6e3d 636c             yn=cl
-0002f730: 695f 696e 7075 7428 2744 656c 6574 6520  i_input('Delete 
-0002f740: 7b7d 2028 592f 4e29 3f27 290a 2020 2020  {} (Y/N)?').    
-0002f750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f760: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-0002f770: 7369 6e73 7461 6e63 6528 796e 2c73 7472  sinstance(yn,str
-0002f780: 2920 6f72 2079 6e2e 6c6f 7765 7228 2920  ) or yn.lower() 
-0002f790: 6e6f 7420 696e 205b 2779 272c 2779 6573  not in ['y','yes
-0002f7a0: 275d 3a20 636f 6e74 696e 7565 0a20 2020  ']: continue.   
-0002f7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f7c0: 2020 2020 2023 6f73 2e72 656d 6f76 6528       #os.remove(
-0002f7d0: 6172 6729 0a20 2020 2020 2020 2020 2020  arg).           
-0002f7e0: 2020 2020 2020 2020 2020 2020 206f 732e               os.
-0002f7f0: 756e 6c69 6e6b 2861 7267 290a 2020 2020  unlink(arg).    
-0002f800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f810: 656c 6966 206f 732e 6973 6469 7228 6172  elif os.isdir(ar
-0002f820: 6729 3a0a 2020 2020 2020 2020 2020 2020  g):.            
-0002f830: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0002f840: 7562 5f64 6972 3a0a 2020 2020 2020 2020  ub_dir:.        
-0002f850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f860: 2020 2020 6966 206e 6f74 2066 6f72 6365      if not force
-0002f870: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002f880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f890: 2020 796e 3d63 6c69 5f69 6e70 7574 2827    yn=cli_input('
-0002f8a0: 4465 6c65 7465 207b 7d20 2859 2f4e 293f  Delete {} (Y/N)?
-0002f8b0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-0002f8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f8d0: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-0002f8e0: 616e 6365 2879 6e2c 7374 7229 206f 7220  ance(yn,str) or 
-0002f8f0: 796e 2e6c 6f77 6572 2829 206e 6f74 2069  yn.lower() not i
-0002f900: 6e20 5b27 7927 2c27 7965 7327 5d3a 2063  n ['y','yes']: c
-0002f910: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-0002f920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f930: 2020 2020 7368 7574 696c 2e72 6d74 7265      shutil.rmtre
-0002f940: 6528 6172 6729 0a20 2020 2020 2020 2020  e(arg).         
-0002f950: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0002f960: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0002f970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f980: 2070 7269 6e74 2827 2727 6361 6e27 7420   print('''can't 
-0002f990: 6465 6c65 7465 2064 6972 6563 746f 7279  delete directory
-0002f9a0: 3a7b 7d27 2727 2e66 6f72 6d61 7428 6172  :{}'''.format(ar
-0002f9b0: 6729 290a 2020 2020 2020 2020 2020 2020  g)).            
-0002f9c0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002f9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002f9e0: 2020 2020 2020 7072 696e 7428 2727 2763        print('''c
-0002f9f0: 616e 2774 2064 656c 6574 6520 7b7d 2727  an't delete {}''
-0002fa00: 272e 666f 726d 6174 2861 7267 2929 0a20  '.format(arg)). 
-0002fa10: 2020 2072 6574 7572 6e20 6f70 7473 2e67     return opts.g
-0002fa20: 6574 2827 6465 6661 756c 7427 290a 0a23  et('default')..#
-0002fa30: 4e65 7720 434c 4153 530a 2363 6c61 7373  New CLASS.#class
-0002fa40: 204e 414d 4528 293a 0a23 2020 2020 6465   NAME():.#    de
-0002fa50: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-0002fa60: 2e2e 2e29 3a20 2349 6e69 7469 616c 697a  ...): #Initializ
-0002fa70: 6520 6461 7461 0a23 2020 2020 2020 2020  e data.#        
-0002fa80: 7365 6c66 2e64 6174 613d 2e2e 2e2e 0a23  self.data=.....#
-0002fa90: 2020 2020 6465 6620 5f5f 6e65 775f 5f28      def __new__(
-0002faa0: 636c 732c 2a69 6e70 7329 3a20 3f3f 3f0a  cls,*inps): ???.
-0002fab0: 2320 2020 2020 2020 202e 2e2e 2e0a 2320  #        .....# 
-0002fac0: 2020 2064 6566 205f 5f72 6570 725f 5f28     def __repr__(
-0002fad0: 7365 6c66 293a 2023 2072 6570 6c79 2073  self): # reply s
-0002fae0: 656c 662e 6461 7461 2062 6163 6b20 746f  elf.data back to
-0002faf0: 2074 6865 2043 6c61 7373 2773 206f 7574   the Class's out
-0002fb00: 7075 7420 613d 3c4e 414d 453e 285b 2761  put a=<NAME>(['a
-0002fb10: 275d 292c 2072 6574 7572 6e20 7468 6520  ']), return the 
-0002fb20: 6461 7461 2074 6f20 610a 2320 2020 2020  data to a.#     
-0002fb30: 2020 2072 6574 7572 6e20 7265 7072 2873     return repr(s
-0002fb40: 656c 662e 6461 7461 290a 2320 2020 2064  elf.data).#    d
-0002fb50: 6566 203c 6e65 7720 6675 6e63 3e28 7365  ef <new func>(se
-0002fb60: 6c66 2c78 7878 293a 0a23 2020 2020 2020  lf,xxx):.#      
-0002fb70: 2020 6461 7461 3d73 656c 6620 2320 6765    data=self # ge
-0002fb80: 7420 6f72 6967 696e 616c 2064 6174 6120  t original data 
-0002fb90: 746f 2064 6174 6120 7661 7269 6162 6c65  to data variable
-0002fba0: 0a23 2020 2020 2020 2020 7375 7065 7228  .#        super(
-0002fbb0: 292e 3c6f 7269 6769 6e61 6c20 6675 6e63  ).<original func
-0002fbc0: 206e 616d 653e 2878 7878 7829 2023 2075   name>(xxxx) # u
-0002fbd0: 7369 6e67 206f 7269 6769 6e61 6c20 6675  sing original fu
-0002fbe0: 6e63 7469 6f6e 0a0a 636c 6173 7320 4c49  nction..class LI
-0002fbf0: 5354 286c 6973 7429 3a0a 2020 2020 6465  ST(list):.    de
-0002fc00: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-0002fc10: 2a69 6e70 732c 6d65 7267 653d 4661 6c73  *inps,merge=Fals
-0002fc20: 652c 756e 6971 3d46 616c 7365 293a 0a20  e,uniq=False):. 
-0002fc30: 2020 2020 2020 2069 6620 6c65 6e28 696e         if len(in
-0002fc40: 7073 2920 3d3d 2031 2061 6e64 2069 7369  ps) == 1 and isi
-0002fc50: 6e73 7461 6e63 6528 696e 7073 5b30 5d2c  nstance(inps[0],
-0002fc60: 286c 6973 742c 7475 706c 6529 293a 0a20  (list,tuple)):. 
-0002fc70: 2020 2020 2020 2020 2020 2073 7570 6572             super
-0002fc80: 2829 2e5f 5f69 6e69 745f 5f28 6920 666f  ().__init__(i fo
-0002fc90: 7220 6920 696e 2069 6e70 735b 305d 290a  r i in inps[0]).
-0002fca0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0002fcb0: 2020 2020 2020 2020 2020 6966 206d 6572            if mer
-0002fcc0: 6765 3a0a 2020 2020 2020 2020 2020 2020  ge:.            
-0002fcd0: 2020 2020 666f 7220 6920 696e 2069 6e70      for i in inp
-0002fce0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-0002fcf0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0002fd00: 616e 6365 2869 2c28 7479 7065 2873 656c  ance(i,(type(sel
-0002fd10: 6629 2c6c 6973 7429 293a 0a20 2020 2020  f),list)):.     
-0002fd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fd30: 2020 2073 7570 6572 2829 2e65 7874 656e     super().exten
-0002fd40: 6428 6929 0a20 2020 2020 2020 2020 2020  d(i).           
-0002fd50: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0002fd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002fd70: 2020 2020 2020 2073 7570 6572 2829 2e61         super().a
-0002fd80: 7070 656e 6428 6929 0a20 2020 2020 2020  ppend(i).       
-0002fd90: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0002fda0: 2020 2020 2020 2020 2020 2073 7570 6572             super
-0002fdb0: 2829 2e5f 5f69 6e69 745f 5f28 6920 666f  ().__init__(i fo
-0002fdc0: 7220 6920 696e 2069 6e70 7329 0a20 2020  r i in inps).   
-0002fdd0: 2020 2020 2069 6620 756e 6971 3a0a 2020       if uniq:.  
-0002fde0: 2020 2020 2020 2020 2020 7365 6c66 2e55            self.U
-0002fdf0: 6e69 7128 290a 0a20 2020 2064 6566 2041  niq()..    def A
-0002fe00: 7070 656e 6428 7365 6c66 2c2a 696e 7073  ppend(self,*inps
-0002fe10: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2020  ,**opts):.      
-0002fe20: 2020 756e 6971 3d6f 7074 732e 6765 7428    uniq=opts.get(
-0002fe30: 2775 6e69 7127 2c46 616c 7365 290a 2020  'uniq',False).  
-0002fe40: 2020 2020 2020 7379 6d62 6f6c 3d6f 7074        symbol=opt
-0002fe50: 732e 6765 7428 2773 796d 626f 6c27 2c27  s.get('symbol','
-0002fe60: 3a77 6869 7465 5f73 7061 6365 3a27 290a  :white_space:').
-0002fe70: 2020 2020 2020 2020 7061 7468 3d6f 7074          path=opt
-0002fe80: 732e 6765 7428 2770 6174 6827 2c46 616c  s.get('path',Fal
-0002fe90: 7365 290a 2020 2020 2020 2020 6465 6661  se).        defa
-0002fea0: 756c 743d 6f70 7473 2e67 6574 2827 6465  ult=opts.get('de
-0002feb0: 6661 756c 7427 2c46 616c 7365 290a 2020  fault',False).  
-0002fec0: 2020 2020 2020 666f 7220 7070 2069 6e20        for pp in 
-0002fed0: 696e 7073 3a0a 2020 2020 2020 2020 2020  inps:.          
-0002fee0: 2020 6966 2054 7970 6528 7070 2c28 2762    if Type(pp,('b
-0002fef0: 7974 6573 272c 2773 7472 2729 293a 0a20  ytes','str')):. 
-0002ff00: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0002ff10: 6620 7379 6d62 6f6c 203d 3d20 273a 7768  f symbol == ':wh
-0002ff20: 6974 655f 7370 6163 653a 273a 0a20 2020  ite_space:':.   
-0002ff30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ff40: 2070 703d 7070 2e73 7472 6970 2829 0a20   pp=pp.strip(). 
-0002ff50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ff60: 2020 2073 796d 626f 6c3d 2720 270a 2020     symbol=' '.  
-0002ff70: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0002ff80: 2070 6174 683a 2073 796d 626f 6c3d 272f   path: symbol='/
-0002ff90: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-0002ffa0: 2020 666f 7220 7270 2069 6e20 5370 6c69    for rp in Spli
-0002ffb0: 7428 7070 2c73 796d 626f 6c29 3a0a 2020  t(pp,symbol):.  
-0002ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ffd0: 2020 6966 2072 7020 3d3d 2064 6566 6175    if rp == defau
-0002ffe0: 6c74 3a20 636f 6e74 696e 7565 0a20 2020  lt: continue.   
-0002fff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030000: 2069 6620 756e 6971 2061 6e64 2072 7020   if uniq and rp 
-00030010: 696e 2073 656c 663a 2063 6f6e 7469 6e75  in self: continu
-00030020: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00030030: 2020 2020 2020 6966 2070 6174 683a 0a20        if path:. 
-00030040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030050: 2020 2020 2020 2069 6620 7270 203d 3d20         if rp == 
-00030060: 272e 273a 2063 6f6e 7469 6e75 650a 2020  '.': continue.  
-00030070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030080: 2020 2020 2020 6966 2072 7020 3d3d 2027        if rp == '
-00030090: 2e2e 2720 616e 6420 6c65 6e28 7365 6c66  ..' and len(self
-000300a0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000300b0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-000300c0: 656c 2073 656c 665b 2d31 5d0a 2020 2020  el self[-1].    
-000300d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000300e0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-000300f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030100: 2020 2020 2073 656c 662e 6170 7065 6e64       self.append
-00030110: 2872 7029 0a20 2020 2020 2020 2020 2020  (rp).           
-00030120: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00030130: 2020 2020 2020 2069 6620 756e 6971 2061         if uniq a
-00030140: 6e64 2070 7020 696e 2073 656c 663a 2063  nd pp in self: c
-00030150: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-00030160: 2020 2020 2020 2020 7365 6c66 2e61 7070          self.app
-00030170: 656e 6428 7070 290a 2020 2020 2020 2020  end(pp).        
-00030180: 7265 7475 726e 2073 656c 660a 0a20 2020  return self..   
-00030190: 2064 6566 2055 6e69 7128 7365 6c66 2c2a   def Uniq(self,*
-000301a0: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
-000301b0: 2020 2020 2020 7379 6d62 6f6c 3d6f 7074        symbol=opt
-000301c0: 732e 6765 7428 2773 796d 626f 6c27 2c6f  s.get('symbol',o
-000301d0: 7074 732e 6765 7428 2773 706c 6974 272c  pts.get('split',
-000301e0: 6f70 7473 2e67 6574 2827 7370 6c69 745f  opts.get('split_
-000301f0: 7379 6d62 6f6c 2729 2929 0a20 2020 2020  symbol'))).     
-00030200: 2020 2070 6174 683d 6f70 7473 2e67 6574     path=opts.get
-00030210: 2827 7061 7468 272c 4661 6c73 6529 0a20  ('path',False). 
-00030220: 2020 2020 2020 2069 6620 7061 7468 3a20         if path: 
-00030230: 7379 6d62 6f6c 3d27 2f27 0a20 2020 2020  symbol='/'.     
-00030240: 2020 2064 6566 6175 6c74 3d6f 7074 732e     default=opts.
-00030250: 6765 7428 2764 6566 6175 6c74 272c 4661  get('default',Fa
-00030260: 6c73 6529 0a20 2020 2020 2020 2072 743d  lse).        rt=
-00030270: 5b5d 0a20 2020 2020 2020 2066 6f72 2070  [].        for p
-00030280: 7020 696e 2073 656c 6620 2b20 6c69 7374  p in self + list
-00030290: 2869 6e70 7329 3a0a 2020 2020 2020 2020  (inps):.        
-000302a0: 2020 2020 6966 2054 7970 6528 7070 2c28      if Type(pp,(
-000302b0: 2762 7974 6573 272c 2773 7472 2729 293a  'bytes','str')):
-000302c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000302d0: 2069 6620 7379 6d62 6f6c 206f 7220 7061   if symbol or pa
-000302e0: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
-000302f0: 2020 2020 2020 2020 666f 7220 7270 2069          for rp i
-00030300: 6e20 5370 6c69 7428 5374 7269 7028 7070  n Split(Strip(pp
-00030310: 2920 6966 2073 796d 626f 6c20 3d3d 2027  ) if symbol == '
-00030320: 3a77 6869 7465 5f73 7061 6365 3a27 2065  :white_space:' e
-00030330: 6c73 6520 7070 2c27 2027 2069 6620 7379  lse pp,' ' if sy
-00030340: 6d62 6f6c 3d3d 273a 7768 6974 655f 7370  mbol==':white_sp
-00030350: 6163 653a 2720 656c 7365 2073 796d 626f  ace:' else symbo
-00030360: 6c29 3a0a 2020 2020 2020 2020 2020 2020  l):.            
-00030370: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-00030380: 7020 6e6f 7420 696e 2072 7420 616e 6420  p not in rt and 
-00030390: 7270 2021 3d20 6465 6661 756c 743a 0a20  rp != default:. 
-000303a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000303b0: 2020 2020 2020 2020 2020 2069 6620 7061             if pa
-000303c0: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
-000303d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000303e0: 2020 2020 6966 2072 7020 3d3d 2027 2e27      if rp == '.'
-000303f0: 3a20 636f 6e74 696e 7565 0a20 2020 2020  : continue.     
-00030400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030410: 2020 2020 2020 2020 2020 2069 6620 7270             if rp
-00030420: 203d 3d20 272e 2e27 2061 6e64 206c 656e   == '..' and len
-00030430: 2872 7429 3a0a 2020 2020 2020 2020 2020  (rt):.          
-00030440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030450: 2020 2020 2020 2020 2020 6465 6c20 7274            del rt
-00030460: 5b2d 315d 0a20 2020 2020 2020 2020 2020  [-1].           
-00030470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030480: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-00030490: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000304a0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-000304b0: 2e61 7070 656e 6428 7270 290a 2020 2020  .append(rp).    
-000304c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000304d0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-000304e0: 2020 2020 2069 6620 7070 206e 6f74 2069       if pp not i
-000304f0: 6e20 7274 3a20 7274 2e61 7070 656e 6428  n rt: rt.append(
-00030500: 7070 290a 2020 2020 2020 2020 7375 7065  pp).        supe
-00030510: 7228 292e 5f5f 696e 6974 5f5f 2869 2066  r().__init__(i f
-00030520: 6f72 2069 2069 6e20 7274 290a 2020 2020  or i in rt).    
-00030530: 2020 2020 7265 7475 726e 2073 656c 660a      return self.
-00030540: 0a20 2020 2064 6566 2044 656c 6574 6528  .    def Delete(
-00030550: 7365 6c66 2c2a 696e 7073 2c2a 2a6f 7074  self,*inps,**opt
-00030560: 7329 3a0a 2020 2020 2020 2020 6669 6e64  s):.        find
-00030570: 3d6f 7074 732e 6765 7428 2766 696e 6427  =opts.get('find'
-00030580: 2c27 696e 6465 7827 290a 2020 2020 2020  ,'index').      
-00030590: 2020 616c 6c5f 6461 7461 3d6f 7074 732e    all_data=opts.
-000305a0: 6765 7428 2761 6c6c 272c 6f70 7473 2e67  get('all',opts.g
-000305b0: 6574 2827 616c 6c5f 6461 7461 272c 6f70  et('all_data',op
-000305c0: 7473 2e67 6574 2827 6465 6c5f 616c 6c27  ts.get('del_all'
-000305d0: 2929 290a 2020 2020 2020 2020 6465 6661  ))).        defa
-000305e0: 756c 743d 6f70 7473 2e67 6574 2827 6465  ult=opts.get('de
-000305f0: 6661 756c 7427 2c46 616c 7365 290a 2020  fault',False).  
-00030600: 2020 2020 2020 6966 2066 696e 6420 696e        if find in
-00030610: 205b 2769 6e64 6578 272c 2769 6427 5d3a   ['index','id']:
-00030620: 2023 2066 6f72 206b 6565 7020 6f72 6967   # for keep orig
-00030630: 696e 616c 2069 6e64 6578 0a20 2020 2020  inal index.     
-00030640: 2020 2020 2020 2074 6d70 3d5b 5d0a 2020         tmp=[].  
-00030650: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-00030660: 696e 2072 616e 6765 2830 2c6c 656e 2873  in range(0,len(s
-00030670: 656c 6629 293a 0a20 2020 2020 2020 2020  elf)):.         
-00030680: 2020 2020 2020 2069 6620 6920 696e 2069         if i in i
-00030690: 6e70 733a 2063 6f6e 7469 6e75 650a 2020  nps: continue.  
-000306a0: 2020 2020 2020 2020 2020 2020 2020 746d                tm
-000306b0: 702e 6170 7065 6e64 2873 656c 665b 695d  p.append(self[i]
-000306c0: 290a 2020 2020 2020 2020 2020 2020 7375  ).            su
-000306d0: 7065 7228 292e 5f5f 696e 6974 5f5f 2869  per().__init__(i
-000306e0: 2066 6f72 2069 2069 6e20 746d 7029 0a20   for i in tmp). 
-000306f0: 2020 2020 2020 2065 6c73 653a 2023 2044         else: # D
-00030700: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
-00030710: 666f 7220 6920 696e 2069 6e70 733a 0a20  for i in inps:. 
-00030720: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00030730: 6620 616c 6c5f 6461 7461 3a0a 2020 2020  f all_data:.    
-00030740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030750: 7768 696c 6520 6920 696e 2073 656c 663a  while i in self:
-00030760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030770: 2020 2020 2020 2020 2073 7570 6572 2829           super()
-00030780: 2e72 656d 6f76 6528 6929 0a20 2020 2020  .remove(i).     
-00030790: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000307a0: 6920 696e 2073 656c 663a 0a20 2020 2020  i in self:.     
-000307b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000307c0: 7570 6572 2829 2e72 656d 6f76 6528 6929  uper().remove(i)
-000307d0: 0a0a 2020 2020 6465 6620 4765 7428 7365  ..    def Get(se
-000307e0: 6c66 2c2a 696e 7073 2c2a 2a6f 7074 7329  lf,*inps,**opts)
-000307f0: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
-00030800: 2069 6e70 733a 2072 6574 7572 6e20 7365   inps: return se
-00030810: 6c66 0a20 2020 2020 2020 2066 696e 643d  lf.        find=
-00030820: 6f70 7473 2e67 6574 2827 6669 6e64 272c  opts.get('find',
-00030830: 2764 6174 6127 290a 2020 2020 2020 2020  'data').        
-00030840: 6465 6661 756c 743d 6f70 7473 2e67 6574  default=opts.get
-00030850: 2827 6465 6661 756c 7427 2c4e 6f6e 6529  ('default',None)
-00030860: 0a20 2020 2020 2020 206f 7574 3d6f 7074  .        out=opt
-00030870: 732e 6765 7428 276f 7574 272c 6c69 7374  s.get('out',list
-00030880: 290a 2020 2020 2020 2020 6572 723d 6f70  ).        err=op
-00030890: 7473 2e67 6574 2827 6572 7227 2c46 616c  ts.get('err',Fal
-000308a0: 7365 290a 2020 2020 2020 2020 6966 206c  se).        if l
-000308b0: 656e 2873 656c 6629 203d 3d20 3020 616e  en(self) == 0 an
-000308c0: 6420 6572 723a 0a20 2020 2020 2020 2020  d err:.         
-000308d0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-000308e0: 740a 2020 2020 2020 2020 7274 3d5b 5d0a  t.        rt=[].
-000308f0: 2020 2020 2020 2020 6966 2066 696e 6420          if find 
-00030900: 696e 205b 2769 6e64 6578 272c 2769 6478  in ['index','idx
-00030910: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00030920: 7274 3d73 656c 662e 496e 6465 7828 2a69  rt=self.Index(*i
-00030930: 6e70 732c 6465 6661 756c 743d 6465 6661  nps,default=defa
-00030940: 756c 742c 6f75 743d 6f75 7429 0a20 2020  ult,out=out).   
-00030950: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00030960: 2020 2020 2020 2072 743d 4c69 7374 282a         rt=List(*
-00030970: 7365 6c66 2c69 6478 3d69 6e70 732c 6d6f  self,idx=inps,mo
-00030980: 6465 3d27 6572 7227 2069 6620 6572 7220  de='err' if err 
-00030990: 656c 7365 2027 6175 746f 272c 6465 6661  else 'auto',defa
-000309a0: 756c 743d 6465 6661 756c 7429 0a20 2020  ult=default).   
-000309b0: 2020 2020 2069 6620 7274 3a0a 2020 2020       if rt:.    
-000309c0: 2020 2020 2020 2020 6966 206f 7574 2069          if out i
-000309d0: 6e20 5b74 7570 6c65 2c27 7475 706c 6527  n [tuple,'tuple'
-000309e0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-000309f0: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
-00030a00: 7274 290a 2020 2020 2020 2020 2020 2020  rt).            
-00030a10: 656c 6966 2049 734e 6f6e 6528 6f75 742c  elif IsNone(out,
-00030a20: 6368 6b5f 7661 6c3d 5b4e 6f6e 652c 2727  chk_val=[None,''
-00030a30: 2c27 7261 7727 5d29 3a0a 2020 2020 2020  ,'raw']):.      
-00030a40: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-00030a50: 2872 7429 203d 3d20 313a 2072 6574 7572  (rt) == 1: retur
-00030a60: 6e20 7274 5b30 5d0a 2020 2020 2020 2020  n rt[0].        
-00030a70: 2020 2020 7265 7475 726e 2072 740a 2020      return rt.  
-00030a80: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-00030a90: 6175 6c74 0a0a 2020 2020 6465 6620 496e  ault..    def In
-00030aa0: 6465 7828 7365 6c66 2c2a 696e 7073 2c2a  dex(self,*inps,*
-00030ab0: 2a6f 7074 7329 3a0a 2020 2020 2020 2020  *opts):.        
-00030ac0: 6d69 7865 643d 6f70 7473 2e67 6574 2827  mixed=opts.get('
-00030ad0: 616e 7927 2c6f 7074 732e 6765 7428 276d  any',opts.get('m
-00030ae0: 6978 6564 272c 6f70 7473 2e67 6574 2827  ixed',opts.get('
-00030af0: 4f52 272c 5472 7565 2929 290a 2020 2020  OR',True))).    
-00030b00: 2020 2020 616c 6c5f 6461 7461 3d6f 7074      all_data=opt
-00030b10: 732e 6765 7428 2761 6c6c 272c 6f70 7473  s.get('all',opts
-00030b20: 2e67 6574 2827 414c 4c27 2c6f 7074 732e  .get('ALL',opts.
-00030b30: 6765 7428 2765 7665 7279 7468 696e 6727  get('everything'
-00030b40: 2929 290a 2020 2020 2020 2020 6f75 743d  ))).        out=
-00030b50: 6f70 7473 2e67 6574 2827 6f75 7427 290a  opts.get('out').
-00030b60: 2020 2020 2020 2020 7065 656c 3d6f 7074          peel=opt
-00030b70: 732e 6765 7428 2770 6565 6c27 2c54 7275  s.get('peel',Tru
-00030b80: 6529 0a20 2020 2020 2020 2064 6566 6175  e).        defau
-00030b90: 6c74 3d6f 7074 732e 6765 7428 2764 6566  lt=opts.get('def
-00030ba0: 6175 6c74 272c 4661 6c73 6529 0a20 2020  ault',False).   
-00030bb0: 2020 2020 2072 743d 5b5d 0a20 2020 2020       rt=[].     
-00030bc0: 2020 2066 6f72 2069 2069 6e20 696e 7073     for i in inps
-00030bd0: 3a0a 2020 2020 2020 2020 2020 2020 7474  :.            tt
-00030be0: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
-00030bf0: 666f 7220 7a20 696e 2072 616e 6765 2830  for z in range(0
-00030c00: 2c6c 656e 2873 656c 6629 293a 0a20 2020  ,len(self)):.   
-00030c10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00030c20: 5479 7065 2869 2c28 2773 7472 272c 2762  Type(i,('str','b
-00030c30: 7974 6573 2729 293a 0a20 2020 2020 2020  ytes')):.       
-00030c40: 2020 2020 2020 2020 2020 2020 206a 3d69               j=i
-00030c50: 2e72 6570 6c61 6365 2827 2a27 2c27 2e2b  .replace('*','.+
-00030c60: 2729 2e72 6570 6c61 6365 2827 3f27 2c27  ').replace('?','
-00030c70: 2e27 290a 2020 2020 2020 2020 2020 2020  .').            
-00030c80: 2020 2020 2020 2020 6d6d 3d72 652e 636f          mm=re.co
-00030c90: 6d70 696c 6528 6a29 0a20 2020 2020 2020  mpile(j).       
-00030ca0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00030cb0: 626f 6f6c 2872 652e 6d61 7463 6828 6d6d  bool(re.match(mm
-00030cc0: 2c73 656c 665b 7a5d 2929 3a0a 2020 2020  ,self[z])):.    
-00030cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030ce0: 2020 2020 7474 2e61 7070 656e 6428 7a29      tt.append(z)
-00030cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030d00: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00030d10: 616c 6c5f 6461 7461 3a20 6272 6561 6b0a  all_data: break.
-00030d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030d30: 656c 6966 2073 656c 665b 7a5d 203d 3d20  elif self[z] == 
-00030d40: 693a 0a20 2020 2020 2020 2020 2020 2020  i:.             
-00030d50: 2020 2020 2020 2074 742e 6170 7065 6e64         tt.append
-00030d60: 287a 290a 2020 2020 2020 2020 2020 2020  (z).            
-00030d70: 2020 2020 2020 2020 6966 206e 6f74 2061          if not a
-00030d80: 6c6c 5f64 6174 613a 2062 7265 616b 0a20  ll_data: break. 
-00030d90: 2020 2020 2020 2020 2020 2069 6620 6d69             if mi
-00030da0: 7865 643a 0a20 2020 2020 2020 2020 2020  xed:.           
-00030db0: 2020 2020 2072 743d 7274 2b74 740a 2020       rt=rt+tt.  
-00030dc0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00030dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030de0: 7274 2e61 7070 656e 6428 7475 706c 6528  rt.append(tuple(
-00030df0: 7474 2929 0a20 2020 2020 2020 2072 6574  tt)).        ret
-00030e00: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
-00030e10: 2c6f 7574 3d6f 7574 2c70 6565 6c3d 7065  ,out=out,peel=pe
-00030e20: 656c 2c6f 7267 3d73 656c 662c 6465 6661  el,org=self,defa
-00030e30: 756c 743d 6465 6661 756c 7429 0a0a 2020  ult=default)..  
-00030e40: 2020 6465 6620 496e 7365 7274 2873 656c    def Insert(sel
-00030e50: 662c 2a69 6e70 732c 2a2a 6f70 7473 293a  f,*inps,**opts):
-00030e60: 0a20 2020 2020 2020 2061 743d 6f70 7473  .        at=opts
-00030e70: 2e67 6574 2827 6174 272c 2d31 290a 2020  .get('at',-1).  
-00030e80: 2020 2020 2020 6465 6661 756c 743d 6f70        default=op
-00030e90: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
-00030ea0: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
-00030eb0: 6572 723d 6f70 7473 2e67 6574 2827 6572  err=opts.get('er
-00030ec0: 7227 2c46 616c 7365 290a 2020 2020 2020  r',False).      
-00030ed0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00030ee0: 6174 2c73 7472 293a 0a20 2020 2020 2020  at,str):.       
-00030ef0: 2020 2020 2069 6620 6174 2069 6e20 5b27       if at in ['
-00030f00: 7374 6172 7427 2c27 6669 7273 7427 5d3a  start','first']:
-00030f10: 2072 6f6f 743d 6c69 7374 2869 6e70 7329   root=list(inps)
-00030f20: 2b73 656c 660a 2020 2020 2020 2020 2020  +self.          
-00030f30: 2020 656c 6966 2061 7420 696e 205b 2765    elif at in ['e
-00030f40: 6e64 272c 276c 6173 7427 5d3a 2072 6f6f  nd','last']: roo
-00030f50: 743d 7365 6c66 2b6c 6973 7428 696e 7073  t=self+list(inps
-00030f60: 290a 2020 2020 2020 2020 656c 6966 206c  ).        elif l
-00030f70: 656e 2873 656c 6629 203d 3d20 303a 0a20  en(self) == 0:. 
-00030f80: 2020 2020 2020 2020 2020 2072 6f6f 743d             root=
-00030f90: 6c69 7374 2869 6e70 7329 0a20 2020 2020  list(inps).     
-00030fa0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-00030fb0: 6365 2861 742c 696e 7429 3a0a 2020 2020  ce(at,int):.    
-00030fc0: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
-00030fd0: 656c 6629 203e 3d20 6162 7328 6174 293a  elf) >= abs(at):
-00030fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00030ff0: 2069 6620 6174 203d 3d20 2d31 206f 7220   if at == -1 or 
-00031000: 6c65 6e28 7365 6c66 2920 3d3d 2061 743a  len(self) == at:
-00031010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031020: 2020 2020 2072 6f6f 743d 7365 6c66 2b6c       root=self+l
-00031030: 6973 7428 696e 7073 290a 2020 2020 2020  ist(inps).      
-00031040: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00031050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031060: 2020 2020 6966 2061 7420 3c20 2d31 3a20      if at < -1: 
-00031070: 6174 3d61 742b 310a 2020 2020 2020 2020  at=at+1.        
-00031080: 2020 2020 2020 2020 2020 2020 726f 6f74              root
-00031090: 3d73 656c 665b 3a61 745d 2b6c 6973 7428  =self[:at]+list(
-000310a0: 696e 7073 292b 7365 6c66 5b61 743a 5d0a  inps)+self[at:].
-000310b0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-000310c0: 206c 656e 2873 656c 6629 203c 2061 6273   len(self) < abs
-000310d0: 2861 7429 3a0a 2020 2020 2020 2020 2020  (at):.          
-000310e0: 2020 2020 2020 6966 2061 7420 3e20 303a        if at > 0:
-000310f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00031100: 2020 2020 2072 6f6f 743d 7365 6c66 2b6c       root=self+l
-00031110: 6973 7428 696e 7073 290a 2020 2020 2020  ist(inps).      
-00031120: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00031130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031140: 2020 2020 726f 6f74 3d6c 6973 7428 696e      root=list(in
-00031150: 7073 292b 7365 6c66 0a20 2020 2020 2020  ps)+self.       
-00031160: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00031170: 2020 2069 6620 6572 723a 0a20 2020 2020     if err:.     
-00031180: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00031190: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
-000311a0: 2020 2020 2020 726f 6f74 3d73 656c 662b        root=self+
-000311b0: 6c69 7374 2869 6e70 7329 0a20 2020 2020  list(inps).     
-000311c0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
-000311d0: 745f 5f28 6920 666f 7220 6920 696e 2072  t__(i for i in r
-000311e0: 6f6f 7429 0a0a 2020 2020 6465 6620 5570  oot)..    def Up
-000311f0: 6461 7465 2873 656c 662c 2a69 6e70 732c  date(self,*inps,
-00031200: 2a2a 6f70 7473 293a 0a20 2020 2020 2020  **opts):.       
-00031210: 2061 743d 6f70 7473 2e67 6574 2827 6174   at=opts.get('at
-00031220: 272c 3029 0a20 2020 2020 2020 2065 7272  ',0).        err
-00031230: 3d6f 7074 732e 6765 7428 2765 7272 272c  =opts.get('err',
-00031240: 4661 6c73 6529 0a20 2020 2020 2020 2064  False).        d
-00031250: 6566 6175 6c74 3d6f 7074 732e 6765 7428  efault=opts.get(
-00031260: 2764 6566 6175 6c74 272c 4661 6c73 6529  'default',False)
-00031270: 0a20 2020 2020 2020 206e 3d6c 656e 2873  .        n=len(s
-00031280: 656c 6629 0a20 2020 2020 2020 2069 6620  elf).        if 
-00031290: 6e20 3d3d 2030 3a0a 2020 2020 2020 2020  n == 0:.        
-000312a0: 2020 2020 6966 2065 7272 2069 7320 5472      if err is Tr
-000312b0: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-000312c0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-000312d0: 6c74 0a20 2020 2020 2020 2020 2020 2065  lt.            e
-000312e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000312f0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-00031300: 6e69 745f 5f28 6920 666f 7220 6920 696e  nit__(i for i in
-00031310: 2069 6e70 7329 0a20 2020 2020 2020 2065   inps).        e
-00031320: 6c69 6620 6973 696e 7374 616e 6365 2861  lif isinstance(a
-00031330: 742c 696e 7429 2061 6e64 206e 203e 2061  t,int) and n > a
-00031340: 743a 0a20 2020 2020 2020 2020 2020 2066  t:.            f
-00031350: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
-00031360: 6c65 6e28 696e 7073 2929 3a0a 2020 2020  len(inps)):.    
-00031370: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00031380: 203e 2061 742b 693a 0a20 2020 2020 2020   > at+i:.       
-00031390: 2020 2020 2020 2020 2020 2020 2073 7570               sup
-000313a0: 6572 2829 2e69 6e73 6572 7428 6174 2b69  er().insert(at+i
-000313b0: 2c69 6e70 735b 695d 290a 2020 2020 2020  ,inps[i]).      
-000313c0: 2020 2020 2020 2020 2020 656c 6966 2065            elif e
-000313d0: 7272 2069 7320 5472 7565 3a0a 2020 2020  rr is True:.    
-000313e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000313f0: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-00031400: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00031410: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00031420: 2020 2020 2020 2020 2073 7570 6572 2829           super()
-00031430: 2e5f 5f69 6e69 745f 5f28 6920 666f 7220  .__init__(i for 
-00031440: 6920 696e 2073 656c 662b 6c69 7374 2869  i in self+list(i
-00031450: 6e70 7329 5b69 3a5d 290a 2020 2020 2020  nps)[i:]).      
-00031460: 2020 2020 2020 2020 2020 2020 2020 6272                br
-00031470: 6561 6b0a 2020 2020 2020 2020 656c 6966  eak.        elif
-00031480: 2069 7369 6e73 7461 6e63 6528 6174 2c28   isinstance(at,(
-00031490: 7475 706c 652c 6c69 7374 2929 3a0a 2020  tuple,list)):.  
-000314a0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-000314b0: 2869 6e70 7329 203d 3d20 6c65 6e28 6174  (inps) == len(at
-000314c0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000314d0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-000314e0: 6528 302c 6c65 6e28 6174 2929 3a0a 2020  e(0,len(at)):.  
-000314f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031500: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00031510: 6174 5b69 5d2c 696e 7429 2061 6e64 206e  at[i],int) and n
-00031520: 203e 2061 745b 695d 3a0a 2020 2020 2020   > at[i]:.      
-00031530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031540: 2020 7375 7065 7228 292e 696e 7365 7274    super().insert
-00031550: 2861 745b 695d 2c69 6e70 735b 695d 290a  (at[i],inps[i]).
-00031560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031570: 2020 2020 656c 6966 2065 7272 2069 7320      elif err is 
-00031580: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
-00031590: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000315a0: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-000315b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000315c0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000315d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000315e0: 7570 6572 2829 2e61 7070 656e 6428 696e  uper().append(in
-000315f0: 7073 5b69 5d29 0a0a 2020 2020 6465 6620  ps[i])..    def 
-00031600: 4669 6e64 2873 656c 662c 2a69 6e70 732c  Find(self,*inps,
-00031610: 2a2a 6f70 7473 293a 0a20 2020 2020 2020  **opts):.       
-00031620: 2066 696e 643d 6f70 7473 2e67 6574 2827   find=opts.get('
-00031630: 6669 6e64 272c 2769 6e64 6578 2729 0a20  find','index'). 
-00031640: 2020 2020 2020 2064 6566 6175 6c74 3d6f         default=o
-00031650: 7074 732e 6765 7428 2764 6566 6175 6c74  pts.get('default
-00031660: 272c 5b5d 290a 2020 2020 2020 2020 7274  ',[]).        rt
-00031670: 3d5b 5d0a 2020 2020 2020 2020 666f 7220  =[].        for 
-00031680: 6920 696e 2072 616e 6765 2830 2c6c 656e  i in range(0,len
-00031690: 2873 656c 6629 293a 0a20 2020 2020 2020  (self)):.       
-000316a0: 2020 2020 2066 6f72 206a 2069 6e20 696e       for j in in
-000316b0: 7073 3a0a 2020 2020 2020 2020 2020 2020  ps:.            
-000316c0: 2020 2020 6a3d 6a2e 7265 706c 6163 6528      j=j.replace(
-000316d0: 272a 272c 272e 2b27 292e 7265 706c 6163  '*','.+').replac
-000316e0: 6528 273f 272c 272e 2729 0a20 2020 2020  e('?','.').     
-000316f0: 2020 2020 2020 2020 2020 206d 6d3d 7265             mm=re
-00031700: 2e63 6f6d 7069 6c65 286a 290a 2020 2020  .compile(j).    
-00031710: 2020 2020 2020 2020 2020 2020 6966 2062              if b
-00031720: 6f6f 6c28 7265 2e6d 6174 6368 286d 6d2c  ool(re.match(mm,
-00031730: 7365 6c66 5b69 5d29 293a 0a20 2020 2020  self[i])):.     
-00031740: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00031750: 6620 6669 6e64 2069 6e20 5b27 696e 6465  f find in ['inde
-00031760: 7827 2c27 6964 7827 5d3a 0a20 2020 2020  x','idx']:.     
+0002f2b0: 2020 2020 2020 2069 6620 5479 7065 2872         if Type(r
+0002f2c0: 745f 6974 656d 735b 695d 5b31 5d2c 6469  t_items[i][1],di
+0002f2d0: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
+0002f2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f2f0: 2061 3d6c 6973 7428 7274 5f69 7465 6d73   a=list(rt_items
+0002f300: 5b69 5d29 0a20 2020 2020 2020 2020 2020  [i]).           
+0002f310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f320: 2061 5b31 5d3d 726d 2872 745f 6974 656d   a[1]=rm(rt_item
+0002f330: 735b 695d 5b31 5d2c 2a61 7267 735b 313a  s[i][1],*args[1:
+0002f340: 5d2c 6461 7461 3d64 656c 5f64 6174 6129  ],data=del_data)
+0002f350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f360: 2020 2020 2020 2020 2020 2020 2074 6d70               tmp
+0002f370: 2e61 7070 656e 6428 7475 706c 6528 6129  .append(tuple(a)
+0002f380: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002f390: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0002f3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f3b0: 2020 2020 2020 2020 2020 2020 746d 702e              tmp.
+0002f3c0: 6170 7065 6e64 2872 745f 6974 656d 735b  append(rt_items[
+0002f3d0: 695d 290a 2020 2020 2020 2020 2020 2020  i]).            
+0002f3e0: 2020 2020 7265 7475 726e 2064 6963 7428      return dict(
+0002f3f0: 746d 7029 0a20 2020 2020 2020 2020 2020  tmp).           
+0002f400: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0002f410: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0002f420: 6172 6773 5b31 3a5d 3a0a 2020 2020 2020  args[1:]:.      
+0002f430: 2020 2020 2020 2020 2020 2020 2020 2350                #P
+0002f440: 6174 6820 6b65 790a 2020 2020 2020 2020  ath key.        
+0002f450: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+0002f460: 2f27 2069 6e20 6920 616e 6420 695b 305d  /' in i and i[0]
+0002f470: 203d 3d20 272f 273a 0a20 2020 2020 2020   == '/':.       
+0002f480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f490: 2069 5f61 3d69 2e73 706c 6974 2827 2f27   i_a=i.split('/'
+0002f4a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002f4b0: 2020 2020 2020 2020 2020 746d 703d 7274            tmp=rt
+0002f4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f4d0: 2020 2020 2020 2020 2062 726b 3d46 616c           brk=Fal
+0002f4e0: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
+0002f4f0: 2020 2020 2020 2020 2020 2066 6f72 207a             for z
+0002f500: 2069 6e20 695f 615b 313a 2d31 5d3a 0a20   in i_a[1:-1]:. 
+0002f510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f520: 2020 2020 2020 2020 2020 2069 6620 7a20             if z 
+0002f530: 696e 2074 6d70 3a0a 2020 2020 2020 2020  in tmp:.        
+0002f540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f550: 2020 2020 2020 2020 746d 703d 746d 705b          tmp=tmp[
+0002f560: 7a5d 0a20 2020 2020 2020 2020 2020 2020  z].             
+0002f570: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002f580: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002f590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f5a0: 2020 2020 2062 726b 3d54 7275 650a 2020       brk=True.  
+0002f5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f5c0: 2020 2020 2020 2020 2020 2020 2020 6272                br
+0002f5d0: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
+0002f5e0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0002f5f0: 6f74 2062 726b 2061 6e64 2069 5f61 5b2d  ot brk and i_a[-
+0002f600: 315d 2069 6e20 746d 703a 2074 6d70 2e70  1] in tmp: tmp.p
+0002f610: 6f70 2869 5f61 5b2d 315d 290a 2020 2020  op(i_a[-1]).    
+0002f620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f630: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
+0002f640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f650: 2065 6c69 6620 6920 696e 2072 743a 0a20   elif i in rt:. 
+0002f660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f670: 2020 2020 2020 2072 742e 706f 7028 6929         rt.pop(i)
+0002f680: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0002f690: 7274 0a20 2020 2065 6c73 653a 0a20 2020  rt.    else:.   
+0002f6a0: 2020 2020 2023 4669 6c65 2f44 6972 6563       #File/Direc
+0002f6b0: 746f 7279 0a20 2020 2020 2020 2073 7562  tory.        sub
+0002f6c0: 5f64 6972 3d6f 7074 732e 6765 7428 2772  _dir=opts.get('r
+0002f6d0: 6563 7572 7269 6e67 272c 4661 6c73 6529  ecurring',False)
+0002f6e0: 0a20 2020 2020 2020 2066 6f72 6365 3d6f  .        force=o
+0002f6f0: 7074 732e 6765 7428 2766 6f72 6365 272c  pts.get('force',
+0002f700: 4661 6c73 6529 0a20 2020 2020 2020 2069  False).        i
+0002f710: 6620 6669 6e64 5f65 7865 6375 7461 626c  f find_executabl
+0002f720: 6528 2772 6d27 293a 0a20 2020 2020 2020  e('rm'):.       
+0002f730: 2020 2020 2073 7562 5f6f 7074 3d27 270a       sub_opt=''.
+0002f740: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0002f750: 7562 5f64 6972 3a20 7375 625f 6f70 743d  ub_dir: sub_opt=
+0002f760: 272d 7227 0a20 2020 2020 2020 2020 2020  '-r'.           
+0002f770: 2069 6620 666f 7263 653a 0a20 2020 2020   if force:.     
+0002f780: 2020 2020 2020 2020 2020 2069 6620 7375             if su
+0002f790: 625f 6f70 743a 2073 7562 5f6f 7074 3d73  b_opt: sub_opt=s
+0002f7a0: 7562 5f6f 7074 2b27 6627 0a20 2020 2020  ub_opt+'f'.     
+0002f7b0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0002f7c0: 2073 7562 5f6f 7074 3d27 2d66 270a 2020   sub_opt='-f'.  
+0002f7d0: 2020 2020 2020 2020 2020 7273 6865 6c6c            rshell
+0002f7e0: 2827 726d 202d 6920 7b7d 272e 666f 726d  ('rm -i {}'.form
+0002f7f0: 6174 2873 7562 5f6f 7074 292b 4a6f 696e  at(sub_opt)+Join
+0002f800: 2861 7267 732c 2720 2729 2c69 6e74 6572  (args,' '),inter
+0002f810: 6163 7469 7665 3d54 7275 6529 0a20 2020  active=True).   
+0002f820: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002f830: 2020 2020 2020 2066 6f72 2061 7267 2069         for arg i
+0002f840: 6e20 6172 6773 3a0a 2020 2020 2020 2020  n args:.        
+0002f850: 2020 2020 2020 2020 6966 2061 7267 5b30          if arg[0
+0002f860: 5d20 3d3d 2027 2d27 3a0a 2020 2020 2020  ] == '-':.      
+0002f870: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002f880: 2772 2720 696e 2061 7267 3a0a 2020 2020  'r' in arg:.    
+0002f890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f8a0: 2020 7375 625f 6469 723d 5472 7565 0a20    sub_dir=True. 
+0002f8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f8c0: 2020 6966 2027 6627 2069 6e20 6172 673a    if 'f' in arg:
+0002f8d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002f8e0: 2020 2020 2020 2066 6f72 6365 3d54 7275         force=Tru
+0002f8f0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+0002f900: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0002f910: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+0002f920: 732e 6973 6669 6c65 2861 7267 293a 0a20  s.isfile(arg):. 
+0002f930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f940: 2020 2020 2020 2069 6620 6e6f 7420 666f         if not fo
+0002f950: 7263 653a 0a20 2020 2020 2020 2020 2020  rce:.           
+0002f960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f970: 2079 6e3d 636c 695f 696e 7075 7428 2744   yn=cli_input('D
+0002f980: 656c 6574 6520 7b7d 2028 592f 4e29 3f27  elete {} (Y/N)?'
+0002f990: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002f9a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0002f9b0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+0002f9c0: 796e 2c73 7472 2920 6f72 2079 6e2e 6c6f  yn,str) or yn.lo
+0002f9d0: 7765 7228 2920 6e6f 7420 696e 205b 2779  wer() not in ['y
+0002f9e0: 272c 2779 6573 275d 3a20 636f 6e74 696e  ','yes']: contin
+0002f9f0: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+0002fa00: 2020 2020 2020 2020 2020 2023 6f73 2e72             #os.r
+0002fa10: 656d 6f76 6528 6172 6729 0a20 2020 2020  emove(arg).     
+0002fa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fa30: 2020 206f 732e 756e 6c69 6e6b 2861 7267     os.unlink(arg
+0002fa40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002fa50: 2020 2020 2020 656c 6966 206f 732e 6973        elif os.is
+0002fa60: 6469 7228 6172 6729 3a0a 2020 2020 2020  dir(arg):.      
+0002fa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fa80: 2020 6966 2073 7562 5f64 6972 3a0a 2020    if sub_dir:.  
+0002fa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002faa0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+0002fab0: 2066 6f72 6365 3a0a 2020 2020 2020 2020   force:.        
+0002fac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fad0: 2020 2020 2020 2020 796e 3d63 6c69 5f69          yn=cli_i
+0002fae0: 6e70 7574 2827 4465 6c65 7465 207b 7d20  nput('Delete {} 
+0002faf0: 2859 2f4e 293f 2729 0a20 2020 2020 2020  (Y/N)?').       
+0002fb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb10: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+0002fb20: 6973 696e 7374 616e 6365 2879 6e2c 7374  isinstance(yn,st
+0002fb30: 7229 206f 7220 796e 2e6c 6f77 6572 2829  r) or yn.lower()
+0002fb40: 206e 6f74 2069 6e20 5b27 7927 2c27 7965   not in ['y','ye
+0002fb50: 7327 5d3a 2063 6f6e 7469 6e75 650a 2020  s']: continue.  
+0002fb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fb70: 2020 2020 2020 2020 2020 7368 7574 696c            shutil
+0002fb80: 2e72 6d74 7265 6528 6172 6729 0a20 2020  .rmtree(arg).   
+0002fb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fba0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0002fbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002fbc0: 2020 2020 2020 2070 7269 6e74 2827 2727         print('''
+0002fbd0: 6361 6e27 7420 6465 6c65 7465 2064 6972  can't delete dir
+0002fbe0: 6563 746f 7279 3a7b 7d27 2727 2e66 6f72  ectory:{}'''.for
+0002fbf0: 6d61 7428 6172 6729 290a 2020 2020 2020  mat(arg)).      
+0002fc00: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0002fc10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002fc20: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0002fc30: 7428 2727 2763 616e 2774 2064 656c 6574  t('''can't delet
+0002fc40: 6520 7b7d 2727 272e 666f 726d 6174 2861  e {}'''.format(a
+0002fc50: 7267 2929 0a20 2020 2072 6574 7572 6e20  rg)).    return 
+0002fc60: 6f70 7473 2e67 6574 2827 6465 6661 756c  opts.get('defaul
+0002fc70: 7427 290a 0a23 4e65 7720 434c 4153 530a  t')..#New CLASS.
+0002fc80: 2363 6c61 7373 204e 414d 4528 293a 0a23  #class NAME():.#
+0002fc90: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+0002fca0: 2873 656c 662c 2e2e 2e29 3a20 2349 6e69  (self,...): #Ini
+0002fcb0: 7469 616c 697a 6520 6461 7461 0a23 2020  tialize data.#  
+0002fcc0: 2020 2020 2020 7365 6c66 2e64 6174 613d        self.data=
+0002fcd0: 2e2e 2e2e 0a23 2020 2020 6465 6620 5f5f  .....#    def __
+0002fce0: 6e65 775f 5f28 636c 732c 2a69 6e70 7329  new__(cls,*inps)
+0002fcf0: 3a20 3f3f 3f0a 2320 2020 2020 2020 202e  : ???.#        .
+0002fd00: 2e2e 2e0a 2320 2020 2064 6566 205f 5f72  ....#    def __r
+0002fd10: 6570 725f 5f28 7365 6c66 293a 2023 2072  epr__(self): # r
+0002fd20: 6570 6c79 2073 656c 662e 6461 7461 2062  eply self.data b
+0002fd30: 6163 6b20 746f 2074 6865 2043 6c61 7373  ack to the Class
+0002fd40: 2773 206f 7574 7075 7420 613d 3c4e 414d  's output a=<NAM
+0002fd50: 453e 285b 2761 275d 292c 2072 6574 7572  E>(['a']), retur
+0002fd60: 6e20 7468 6520 6461 7461 2074 6f20 610a  n the data to a.
+0002fd70: 2320 2020 2020 2020 2072 6574 7572 6e20  #        return 
+0002fd80: 7265 7072 2873 656c 662e 6461 7461 290a  repr(self.data).
+0002fd90: 2320 2020 2064 6566 203c 6e65 7720 6675  #    def <new fu
+0002fda0: 6e63 3e28 7365 6c66 2c78 7878 293a 0a23  nc>(self,xxx):.#
+0002fdb0: 2020 2020 2020 2020 6461 7461 3d73 656c          data=sel
+0002fdc0: 6620 2320 6765 7420 6f72 6967 696e 616c  f # get original
+0002fdd0: 2064 6174 6120 746f 2064 6174 6120 7661   data to data va
+0002fde0: 7269 6162 6c65 0a23 2020 2020 2020 2020  riable.#        
+0002fdf0: 7375 7065 7228 292e 3c6f 7269 6769 6e61  super().<origina
+0002fe00: 6c20 6675 6e63 206e 616d 653e 2878 7878  l func name>(xxx
+0002fe10: 7829 2023 2075 7369 6e67 206f 7269 6769  x) # using origi
+0002fe20: 6e61 6c20 6675 6e63 7469 6f6e 0a0a 636c  nal function..cl
+0002fe30: 6173 7320 4c49 5354 286c 6973 7429 3a0a  ass LIST(list):.
+0002fe40: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+0002fe50: 2873 656c 662c 2a69 6e70 732c 6d65 7267  (self,*inps,merg
+0002fe60: 653d 4661 6c73 652c 756e 6971 3d46 616c  e=False,uniq=Fal
+0002fe70: 7365 293a 0a20 2020 2020 2020 2069 6620  se):.        if 
+0002fe80: 6c65 6e28 696e 7073 2920 3d3d 2031 2061  len(inps) == 1 a
+0002fe90: 6e64 2069 7369 6e73 7461 6e63 6528 696e  nd isinstance(in
+0002fea0: 7073 5b30 5d2c 286c 6973 742c 7475 706c  ps[0],(list,tupl
+0002feb0: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
+0002fec0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+0002fed0: 5f28 6920 666f 7220 6920 696e 2069 6e70  _(i for i in inp
+0002fee0: 735b 305d 290a 2020 2020 2020 2020 656c  s[0]).        el
+0002fef0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0002ff00: 6966 206d 6572 6765 3a0a 2020 2020 2020  if merge:.      
+0002ff10: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+0002ff20: 696e 2069 6e70 733a 0a20 2020 2020 2020  in inps:.       
+0002ff30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0002ff40: 6973 696e 7374 616e 6365 2869 2c28 7479  isinstance(i,(ty
+0002ff50: 7065 2873 656c 6629 2c6c 6973 7429 293a  pe(self),list)):
+0002ff60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ff70: 2020 2020 2020 2020 2073 7570 6572 2829           super()
+0002ff80: 2e65 7874 656e 6428 6929 0a20 2020 2020  .extend(i).     
+0002ff90: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0002ffa0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0002ffb0: 2020 2020 2020 2020 2020 2020 2073 7570               sup
+0002ffc0: 6572 2829 2e61 7070 656e 6428 6929 0a20  er().append(i). 
+0002ffd0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0002ffe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002fff0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+00030000: 5f28 6920 666f 7220 6920 696e 2069 6e70  _(i for i in inp
+00030010: 7329 0a20 2020 2020 2020 2069 6620 756e  s).        if un
+00030020: 6971 3a0a 2020 2020 2020 2020 2020 2020  iq:.            
+00030030: 7365 6c66 2e55 6e69 7128 290a 0a20 2020  self.Uniq()..   
+00030040: 2064 6566 2041 7070 656e 6428 7365 6c66   def Append(self
+00030050: 2c2a 696e 7073 2c2a 2a6f 7074 7329 3a0a  ,*inps,**opts):.
+00030060: 2020 2020 2020 2020 756e 6971 3d6f 7074          uniq=opt
+00030070: 732e 6765 7428 2775 6e69 7127 2c46 616c  s.get('uniq',Fal
+00030080: 7365 290a 2020 2020 2020 2020 7379 6d62  se).        symb
+00030090: 6f6c 3d6f 7074 732e 6765 7428 2773 796d  ol=opts.get('sym
+000300a0: 626f 6c27 2c27 3a77 6869 7465 5f73 7061  bol',':white_spa
+000300b0: 6365 3a27 290a 2020 2020 2020 2020 7061  ce:').        pa
+000300c0: 7468 3d6f 7074 732e 6765 7428 2770 6174  th=opts.get('pat
+000300d0: 6827 2c46 616c 7365 290a 2020 2020 2020  h',False).      
+000300e0: 2020 6465 6661 756c 743d 6f70 7473 2e67    default=opts.g
+000300f0: 6574 2827 6465 6661 756c 7427 2c46 616c  et('default',Fal
+00030100: 7365 290a 2020 2020 2020 2020 666f 7220  se).        for 
+00030110: 7070 2069 6e20 696e 7073 3a0a 2020 2020  pp in inps:.    
+00030120: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
+00030130: 7070 2c28 2762 7974 6573 272c 2773 7472  pp,('bytes','str
+00030140: 2729 293a 0a20 2020 2020 2020 2020 2020  ')):.           
+00030150: 2020 2020 2069 6620 7379 6d62 6f6c 203d       if symbol =
+00030160: 3d20 273a 7768 6974 655f 7370 6163 653a  = ':white_space:
+00030170: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00030180: 2020 2020 2020 2070 703d 7070 2e73 7472         pp=pp.str
+00030190: 6970 2829 0a20 2020 2020 2020 2020 2020  ip().           
+000301a0: 2020 2020 2020 2020 2073 796d 626f 6c3d           symbol=
+000301b0: 2720 270a 2020 2020 2020 2020 2020 2020  ' '.            
+000301c0: 2020 2020 6966 2070 6174 683a 2073 796d      if path: sym
+000301d0: 626f 6c3d 272f 270a 2020 2020 2020 2020  bol='/'.        
+000301e0: 2020 2020 2020 2020 666f 7220 7270 2069          for rp i
+000301f0: 6e20 5370 6c69 7428 7070 2c73 796d 626f  n Split(pp,symbo
+00030200: 6c29 3a0a 2020 2020 2020 2020 2020 2020  l):.            
+00030210: 2020 2020 2020 2020 6966 2072 7020 3d3d          if rp ==
+00030220: 2064 6566 6175 6c74 3a20 636f 6e74 696e   default: contin
+00030230: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+00030240: 2020 2020 2020 2069 6620 756e 6971 2061         if uniq a
+00030250: 6e64 2072 7020 696e 2073 656c 663a 2063  nd rp in self: c
+00030260: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+00030270: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+00030280: 6174 683a 0a20 2020 2020 2020 2020 2020  ath:.           
+00030290: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000302a0: 7270 203d 3d20 272e 273a 2063 6f6e 7469  rp == '.': conti
+000302b0: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
+000302c0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+000302d0: 7020 3d3d 2027 2e2e 2720 616e 6420 6c65  p == '..' and le
+000302e0: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
+000302f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030300: 2020 2020 2064 656c 2073 656c 665b 2d31       del self[-1
+00030310: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00030320: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00030330: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+00030340: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00030350: 6170 7065 6e64 2872 7029 0a20 2020 2020  append(rp).     
+00030360: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00030370: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00030380: 756e 6971 2061 6e64 2070 7020 696e 2073  uniq and pp in s
+00030390: 656c 663a 2063 6f6e 7469 6e75 650a 2020  elf: continue.  
+000303a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000303b0: 6c66 2e61 7070 656e 6428 7070 290a 2020  lf.append(pp).  
+000303c0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000303d0: 660a 0a20 2020 2064 6566 2055 6e69 7128  f..    def Uniq(
+000303e0: 7365 6c66 2c2a 696e 7073 2c2a 2a6f 7074  self,*inps,**opt
+000303f0: 7329 3a0a 2020 2020 2020 2020 7379 6d62  s):.        symb
+00030400: 6f6c 3d6f 7074 732e 6765 7428 2773 796d  ol=opts.get('sym
+00030410: 626f 6c27 2c6f 7074 732e 6765 7428 2773  bol',opts.get('s
+00030420: 706c 6974 272c 6f70 7473 2e67 6574 2827  plit',opts.get('
+00030430: 7370 6c69 745f 7379 6d62 6f6c 2729 2929  split_symbol')))
+00030440: 0a20 2020 2020 2020 2070 6174 683d 6f70  .        path=op
+00030450: 7473 2e67 6574 2827 7061 7468 272c 4661  ts.get('path',Fa
+00030460: 6c73 6529 0a20 2020 2020 2020 2069 6620  lse).        if 
+00030470: 7061 7468 3a20 7379 6d62 6f6c 3d27 2f27  path: symbol='/'
+00030480: 0a20 2020 2020 2020 2064 6566 6175 6c74  .        default
+00030490: 3d6f 7074 732e 6765 7428 2764 6566 6175  =opts.get('defau
+000304a0: 6c74 272c 4661 6c73 6529 0a20 2020 2020  lt',False).     
+000304b0: 2020 2072 743d 5b5d 0a20 2020 2020 2020     rt=[].       
+000304c0: 2066 6f72 2070 7020 696e 2073 656c 6620   for pp in self 
+000304d0: 2b20 6c69 7374 2869 6e70 7329 3a0a 2020  + list(inps):.  
+000304e0: 2020 2020 2020 2020 2020 6966 2054 7970            if Typ
+000304f0: 6528 7070 2c28 2762 7974 6573 272c 2773  e(pp,('bytes','s
+00030500: 7472 2729 293a 0a20 2020 2020 2020 2020  tr')):.         
+00030510: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
+00030520: 206f 7220 7061 7468 3a0a 2020 2020 2020   or path:.      
+00030530: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00030540: 7220 7270 2069 6e20 5370 6c69 7428 5374  r rp in Split(St
+00030550: 7269 7028 7070 2920 6966 2073 796d 626f  rip(pp) if symbo
+00030560: 6c20 3d3d 2027 3a77 6869 7465 5f73 7061  l == ':white_spa
+00030570: 6365 3a27 2065 6c73 6520 7070 2c27 2027  ce:' else pp,' '
+00030580: 2069 6620 7379 6d62 6f6c 3d3d 273a 7768   if symbol==':wh
+00030590: 6974 655f 7370 6163 653a 2720 656c 7365  ite_space:' else
+000305a0: 2073 796d 626f 6c29 3a0a 2020 2020 2020   symbol):.      
+000305b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000305c0: 2020 6966 2072 7020 6e6f 7420 696e 2072    if rp not in r
+000305d0: 7420 616e 6420 7270 2021 3d20 6465 6661  t and rp != defa
+000305e0: 756c 743a 0a20 2020 2020 2020 2020 2020  ult:.           
+000305f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030600: 2069 6620 7061 7468 3a0a 2020 2020 2020   if path:.      
+00030610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030620: 2020 2020 2020 2020 2020 6966 2072 7020            if rp 
+00030630: 3d3d 2027 2e27 3a20 636f 6e74 696e 7565  == '.': continue
+00030640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030660: 2069 6620 7270 203d 3d20 272e 2e27 2061   if rp == '..' a
+00030670: 6e64 206c 656e 2872 7429 3a0a 2020 2020  nd len(rt):.    
+00030680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000306a0: 6465 6c20 7274 5b2d 315d 0a20 2020 2020  del rt[-1].     
+000306b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000306c0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000306d0: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+000306e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000306f0: 2020 2020 7274 2e61 7070 656e 6428 7270      rt.append(rp
+00030700: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00030710: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+00030720: 2020 2020 2020 2020 2020 2069 6620 7070             if pp
+00030730: 206e 6f74 2069 6e20 7274 3a20 7274 2e61   not in rt: rt.a
+00030740: 7070 656e 6428 7070 290a 2020 2020 2020  ppend(pp).      
+00030750: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
+00030760: 5f5f 2869 2066 6f72 2069 2069 6e20 7274  __(i for i in rt
+00030770: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00030780: 2073 656c 660a 0a20 2020 2064 6566 2044   self..    def D
+00030790: 656c 6574 6528 7365 6c66 2c2a 696e 7073  elete(self,*inps
+000307a0: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2020  ,**opts):.      
+000307b0: 2020 6669 6e64 3d6f 7074 732e 6765 7428    find=opts.get(
+000307c0: 2766 696e 6427 2c27 696e 6465 7827 290a  'find','index').
+000307d0: 2020 2020 2020 2020 616c 6c5f 6461 7461          all_data
+000307e0: 3d6f 7074 732e 6765 7428 2761 6c6c 272c  =opts.get('all',
+000307f0: 6f70 7473 2e67 6574 2827 616c 6c5f 6461  opts.get('all_da
+00030800: 7461 272c 6f70 7473 2e67 6574 2827 6465  ta',opts.get('de
+00030810: 6c5f 616c 6c27 2929 290a 2020 2020 2020  l_all'))).      
+00030820: 2020 6465 6661 756c 743d 6f70 7473 2e67    default=opts.g
+00030830: 6574 2827 6465 6661 756c 7427 2c46 616c  et('default',Fal
+00030840: 7365 290a 2020 2020 2020 2020 6966 2066  se).        if f
+00030850: 696e 6420 696e 205b 2769 6e64 6578 272c  ind in ['index',
+00030860: 2769 6427 5d3a 2023 2066 6f72 206b 6565  'id']: # for kee
+00030870: 7020 6f72 6967 696e 616c 2069 6e64 6578  p original index
+00030880: 0a20 2020 2020 2020 2020 2020 2074 6d70  .            tmp
+00030890: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
+000308a0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
+000308b0: 2c6c 656e 2873 656c 6629 293a 0a20 2020  ,len(self)):.   
+000308c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000308d0: 6920 696e 2069 6e70 733a 2063 6f6e 7469  i in inps: conti
+000308e0: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
+000308f0: 2020 2020 746d 702e 6170 7065 6e64 2873      tmp.append(s
+00030900: 656c 665b 695d 290a 2020 2020 2020 2020  elf[i]).        
+00030910: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
+00030920: 6974 5f5f 2869 2066 6f72 2069 2069 6e20  it__(i for i in 
+00030930: 746d 7029 0a20 2020 2020 2020 2065 6c73  tmp).        els
+00030940: 653a 2023 2044 6174 610a 2020 2020 2020  e: # Data.      
+00030950: 2020 2020 2020 666f 7220 6920 696e 2069        for i in i
+00030960: 6e70 733a 0a20 2020 2020 2020 2020 2020  nps:.           
+00030970: 2020 2020 2069 6620 616c 6c5f 6461 7461       if all_data
+00030980: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00030990: 2020 2020 2020 7768 696c 6520 6920 696e        while i in
+000309a0: 2073 656c 663a 0a20 2020 2020 2020 2020   self:.         
+000309b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000309c0: 7570 6572 2829 2e72 656d 6f76 6528 6929  uper().remove(i)
+000309d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000309e0: 2065 6c69 6620 6920 696e 2073 656c 663a   elif i in self:
+000309f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00030a00: 2020 2020 2073 7570 6572 2829 2e72 656d       super().rem
+00030a10: 6f76 6528 6929 0a0a 2020 2020 6465 6620  ove(i)..    def 
+00030a20: 4765 7428 7365 6c66 2c2a 696e 7073 2c2a  Get(self,*inps,*
+00030a30: 2a6f 7074 7329 3a0a 2020 2020 2020 2020  *opts):.        
+00030a40: 6966 206e 6f74 2069 6e70 733a 2072 6574  if not inps: ret
+00030a50: 7572 6e20 7365 6c66 0a20 2020 2020 2020  urn self.       
+00030a60: 2066 696e 643d 6f70 7473 2e67 6574 2827   find=opts.get('
+00030a70: 6669 6e64 272c 2764 6174 6127 290a 2020  find','data').  
+00030a80: 2020 2020 2020 6465 6661 756c 743d 6f70        default=op
+00030a90: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
+00030aa0: 2c4e 6f6e 6529 0a20 2020 2020 2020 206f  ,None).        o
+00030ab0: 7574 3d6f 7074 732e 6765 7428 276f 7574  ut=opts.get('out
+00030ac0: 272c 6c69 7374 290a 2020 2020 2020 2020  ',list).        
+00030ad0: 6572 723d 6f70 7473 2e67 6574 2827 6572  err=opts.get('er
+00030ae0: 7227 2c46 616c 7365 290a 2020 2020 2020  r',False).      
+00030af0: 2020 6966 206c 656e 2873 656c 6629 203d    if len(self) =
+00030b00: 3d20 3020 616e 6420 6572 723a 0a20 2020  = 0 and err:.   
+00030b10: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00030b20: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+00030b30: 7274 3d5b 5d0a 2020 2020 2020 2020 6966  rt=[].        if
+00030b40: 2066 696e 6420 696e 205b 2769 6e64 6578   find in ['index
+00030b50: 272c 2769 6478 275d 3a0a 2020 2020 2020  ','idx']:.      
+00030b60: 2020 2020 2020 7274 3d73 656c 662e 496e        rt=self.In
+00030b70: 6465 7828 2a69 6e70 732c 6465 6661 756c  dex(*inps,defaul
+00030b80: 743d 6465 6661 756c 742c 6f75 743d 6f75  t=default,out=ou
+00030b90: 7429 0a20 2020 2020 2020 2065 6c73 653a  t).        else:
+00030ba0: 0a20 2020 2020 2020 2020 2020 2072 743d  .            rt=
+00030bb0: 4c69 7374 282a 7365 6c66 2c69 6478 3d69  List(*self,idx=i
+00030bc0: 6e70 732c 6d6f 6465 3d27 6572 7227 2069  nps,mode='err' i
+00030bd0: 6620 6572 7220 656c 7365 2027 6175 746f  f err else 'auto
+00030be0: 272c 6465 6661 756c 743d 6465 6661 756c  ',default=defaul
+00030bf0: 7429 0a20 2020 2020 2020 2069 6620 7274  t).        if rt
+00030c00: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00030c10: 206f 7574 2069 6e20 5b74 7570 6c65 2c27   out in [tuple,'
+00030c20: 7475 706c 6527 5d3a 0a20 2020 2020 2020  tuple']:.       
+00030c30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00030c40: 7475 706c 6528 7274 290a 2020 2020 2020  tuple(rt).      
+00030c50: 2020 2020 2020 656c 6966 2049 734e 6f6e        elif IsNon
+00030c60: 6528 6f75 742c 6368 6b5f 7661 6c3d 5b4e  e(out,chk_val=[N
+00030c70: 6f6e 652c 2727 2c27 7261 7727 5d29 3a0a  one,'','raw']):.
+00030c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030c90: 6966 206c 656e 2872 7429 203d 3d20 313a  if len(rt) == 1:
+00030ca0: 2072 6574 7572 6e20 7274 5b30 5d0a 2020   return rt[0].  
+00030cb0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00030cc0: 2072 740a 2020 2020 2020 2020 7265 7475   rt.        retu
+00030cd0: 726e 2064 6566 6175 6c74 0a0a 2020 2020  rn default..    
+00030ce0: 6465 6620 496e 6465 7828 7365 6c66 2c2a  def Index(self,*
+00030cf0: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
+00030d00: 2020 2020 2020 6d69 7865 643d 6f70 7473        mixed=opts
+00030d10: 2e67 6574 2827 616e 7927 2c6f 7074 732e  .get('any',opts.
+00030d20: 6765 7428 276d 6978 6564 272c 6f70 7473  get('mixed',opts
+00030d30: 2e67 6574 2827 4f52 272c 5472 7565 2929  .get('OR',True))
+00030d40: 290a 2020 2020 2020 2020 616c 6c5f 6461  ).        all_da
+00030d50: 7461 3d6f 7074 732e 6765 7428 2761 6c6c  ta=opts.get('all
+00030d60: 272c 6f70 7473 2e67 6574 2827 414c 4c27  ',opts.get('ALL'
+00030d70: 2c6f 7074 732e 6765 7428 2765 7665 7279  ,opts.get('every
+00030d80: 7468 696e 6727 2929 290a 2020 2020 2020  thing'))).      
+00030d90: 2020 6f75 743d 6f70 7473 2e67 6574 2827    out=opts.get('
+00030da0: 6f75 7427 290a 2020 2020 2020 2020 7065  out').        pe
+00030db0: 656c 3d6f 7074 732e 6765 7428 2770 6565  el=opts.get('pee
+00030dc0: 6c27 2c54 7275 6529 0a20 2020 2020 2020  l',True).       
+00030dd0: 2064 6566 6175 6c74 3d6f 7074 732e 6765   default=opts.ge
+00030de0: 7428 2764 6566 6175 6c74 272c 4661 6c73  t('default',Fals
+00030df0: 6529 0a20 2020 2020 2020 2072 743d 5b5d  e).        rt=[]
+00030e00: 0a20 2020 2020 2020 2066 6f72 2069 2069  .        for i i
+00030e10: 6e20 696e 7073 3a0a 2020 2020 2020 2020  n inps:.        
+00030e20: 2020 2020 7474 3d5b 5d0a 2020 2020 2020      tt=[].      
+00030e30: 2020 2020 2020 666f 7220 7a20 696e 2072        for z in r
+00030e40: 616e 6765 2830 2c6c 656e 2873 656c 6629  ange(0,len(self)
+00030e50: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00030e60: 2020 2069 6620 5479 7065 2869 2c28 2773     if Type(i,('s
+00030e70: 7472 272c 2762 7974 6573 2729 293a 0a20  tr','bytes')):. 
+00030e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030e90: 2020 206a 3d69 2e72 6570 6c61 6365 2827     j=i.replace('
+00030ea0: 2a27 2c27 2e2b 2729 2e72 6570 6c61 6365  *','.+').replace
+00030eb0: 2827 3f27 2c27 2e27 290a 2020 2020 2020  ('?','.').      
+00030ec0: 2020 2020 2020 2020 2020 2020 2020 6d6d                mm
+00030ed0: 3d72 652e 636f 6d70 696c 6528 6a29 0a20  =re.compile(j). 
+00030ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00030ef0: 2020 2069 6620 626f 6f6c 2872 652e 6d61     if bool(re.ma
+00030f00: 7463 6828 6d6d 2c73 656c 665b 7a5d 2929  tch(mm,self[z]))
+00030f10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00030f20: 2020 2020 2020 2020 2020 7474 2e61 7070            tt.app
+00030f30: 656e 6428 7a29 0a20 2020 2020 2020 2020  end(z).         
+00030f40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00030f50: 6620 6e6f 7420 616c 6c5f 6461 7461 3a20  f not all_data: 
+00030f60: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
+00030f70: 2020 2020 2020 656c 6966 2073 656c 665b        elif self[
+00030f80: 7a5d 203d 3d20 693a 0a20 2020 2020 2020  z] == i:.       
+00030f90: 2020 2020 2020 2020 2020 2020 2074 742e               tt.
+00030fa0: 6170 7065 6e64 287a 290a 2020 2020 2020  append(z).      
+00030fb0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00030fc0: 206e 6f74 2061 6c6c 5f64 6174 613a 2062   not all_data: b
+00030fd0: 7265 616b 0a20 2020 2020 2020 2020 2020  reak.           
+00030fe0: 2069 6620 6d69 7865 643a 0a20 2020 2020   if mixed:.     
+00030ff0: 2020 2020 2020 2020 2020 2072 743d 7274             rt=rt
+00031000: 2b74 740a 2020 2020 2020 2020 2020 2020  +tt.            
+00031010: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00031020: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
+00031030: 7475 706c 6528 7474 2929 0a20 2020 2020  tuple(tt)).     
+00031040: 2020 2072 6574 7572 6e20 4f75 7446 6f72     return OutFor
+00031050: 6d61 7428 7274 2c6f 7574 3d6f 7574 2c70  mat(rt,out=out,p
+00031060: 6565 6c3d 7065 656c 2c6f 7267 3d73 656c  eel=peel,org=sel
+00031070: 662c 6465 6661 756c 743d 6465 6661 756c  f,default=defaul
+00031080: 7429 0a0a 2020 2020 6465 6620 496e 7365  t)..    def Inse
+00031090: 7274 2873 656c 662c 2a69 6e70 732c 2a2a  rt(self,*inps,**
+000310a0: 6f70 7473 293a 0a20 2020 2020 2020 2061  opts):.        a
+000310b0: 743d 6f70 7473 2e67 6574 2827 6174 272c  t=opts.get('at',
+000310c0: 2d31 290a 2020 2020 2020 2020 6465 6661  -1).        defa
+000310d0: 756c 743d 6f70 7473 2e67 6574 2827 6465  ult=opts.get('de
+000310e0: 6661 756c 7427 2c46 616c 7365 290a 2020  fault',False).  
+000310f0: 2020 2020 2020 6572 723d 6f70 7473 2e67        err=opts.g
+00031100: 6574 2827 6572 7227 2c46 616c 7365 290a  et('err',False).
+00031110: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00031120: 7461 6e63 6528 6174 2c73 7472 293a 0a20  tance(at,str):. 
+00031130: 2020 2020 2020 2020 2020 2069 6620 6174             if at
+00031140: 2069 6e20 5b27 7374 6172 7427 2c27 6669   in ['start','fi
+00031150: 7273 7427 5d3a 2072 6f6f 743d 6c69 7374  rst']: root=list
+00031160: 2869 6e70 7329 2b73 656c 660a 2020 2020  (inps)+self.    
+00031170: 2020 2020 2020 2020 656c 6966 2061 7420          elif at 
+00031180: 696e 205b 2765 6e64 272c 276c 6173 7427  in ['end','last'
+00031190: 5d3a 2072 6f6f 743d 7365 6c66 2b6c 6973  ]: root=self+lis
+000311a0: 7428 696e 7073 290a 2020 2020 2020 2020  t(inps).        
+000311b0: 656c 6966 206c 656e 2873 656c 6629 203d  elif len(self) =
+000311c0: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+000311d0: 2072 6f6f 743d 6c69 7374 2869 6e70 7329   root=list(inps)
+000311e0: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
+000311f0: 696e 7374 616e 6365 2861 742c 696e 7429  instance(at,int)
+00031200: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00031210: 206c 656e 2873 656c 6629 203e 3d20 6162   len(self) >= ab
+00031220: 7328 6174 293a 0a20 2020 2020 2020 2020  s(at):.         
+00031230: 2020 2020 2020 2069 6620 6174 203d 3d20         if at == 
+00031240: 2d31 206f 7220 6c65 6e28 7365 6c66 2920  -1 or len(self) 
+00031250: 3d3d 2061 743a 0a20 2020 2020 2020 2020  == at:.         
+00031260: 2020 2020 2020 2020 2020 2072 6f6f 743d             root=
+00031270: 7365 6c66 2b6c 6973 7428 696e 7073 290a  self+list(inps).
+00031280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031290: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000312a0: 2020 2020 2020 2020 2020 6966 2061 7420            if at 
+000312b0: 3c20 2d31 3a20 6174 3d61 742b 310a 2020  < -1: at=at+1.  
+000312c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000312d0: 2020 726f 6f74 3d73 656c 665b 3a61 745d    root=self[:at]
+000312e0: 2b6c 6973 7428 696e 7073 292b 7365 6c66  +list(inps)+self
+000312f0: 5b61 743a 5d0a 2020 2020 2020 2020 2020  [at:].          
+00031300: 2020 656c 6966 206c 656e 2873 656c 6629    elif len(self)
+00031310: 203c 2061 6273 2861 7429 3a0a 2020 2020   < abs(at):.    
+00031320: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00031330: 7420 3e20 303a 0a20 2020 2020 2020 2020  t > 0:.         
+00031340: 2020 2020 2020 2020 2020 2072 6f6f 743d             root=
+00031350: 7365 6c66 2b6c 6973 7428 696e 7073 290a  self+list(inps).
+00031360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031370: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00031380: 2020 2020 2020 2020 2020 726f 6f74 3d6c            root=l
+00031390: 6973 7428 696e 7073 292b 7365 6c66 0a20  ist(inps)+self. 
+000313a0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000313b0: 2020 2020 2020 2020 2069 6620 6572 723a           if err:
+000313c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000313d0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+000313e0: 2020 2020 2020 2020 2020 2020 726f 6f74              root
+000313f0: 3d73 656c 662b 6c69 7374 2869 6e70 7329  =self+list(inps)
+00031400: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
+00031410: 2e5f 5f69 6e69 745f 5f28 6920 666f 7220  .__init__(i for 
+00031420: 6920 696e 2072 6f6f 7429 0a0a 2020 2020  i in root)..    
+00031430: 6465 6620 5570 6461 7465 2873 656c 662c  def Update(self,
+00031440: 2a69 6e70 732c 2a2a 6f70 7473 293a 0a20  *inps,**opts):. 
+00031450: 2020 2020 2020 2061 743d 6f70 7473 2e67         at=opts.g
+00031460: 6574 2827 6174 272c 3029 0a20 2020 2020  et('at',0).     
+00031470: 2020 2065 7272 3d6f 7074 732e 6765 7428     err=opts.get(
+00031480: 2765 7272 272c 4661 6c73 6529 0a20 2020  'err',False).   
+00031490: 2020 2020 2064 6566 6175 6c74 3d6f 7074       default=opt
+000314a0: 732e 6765 7428 2764 6566 6175 6c74 272c  s.get('default',
+000314b0: 4661 6c73 6529 0a20 2020 2020 2020 206e  False).        n
+000314c0: 3d6c 656e 2873 656c 6629 0a20 2020 2020  =len(self).     
+000314d0: 2020 2069 6620 6e20 3d3d 2030 3a0a 2020     if n == 0:.  
+000314e0: 2020 2020 2020 2020 2020 6966 2065 7272            if err
+000314f0: 2069 7320 5472 7565 3a0a 2020 2020 2020   is True:.      
+00031500: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00031510: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
+00031520: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00031530: 2020 2020 2020 2020 2020 2073 7570 6572             super
+00031540: 2829 2e5f 5f69 6e69 745f 5f28 6920 666f  ().__init__(i fo
+00031550: 7220 6920 696e 2069 6e70 7329 0a20 2020  r i in inps).   
+00031560: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
+00031570: 616e 6365 2861 742c 696e 7429 2061 6e64  ance(at,int) and
+00031580: 206e 203e 2061 743a 0a20 2020 2020 2020   n > at:.       
+00031590: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
+000315a0: 6e67 6528 302c 6c65 6e28 696e 7073 2929  nge(0,len(inps))
+000315b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000315c0: 2020 6966 206e 203e 2061 742b 693a 0a20    if n > at+i:. 
+000315d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000315e0: 2020 2073 7570 6572 2829 2e69 6e73 6572     super().inser
+000315f0: 7428 6174 2b69 2c69 6e70 735b 695d 290a  t(at+i,inps[i]).
+00031600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031610: 656c 6966 2065 7272 2069 7320 5472 7565  elif err is True
+00031620: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00031630: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+00031640: 6175 6c74 0a20 2020 2020 2020 2020 2020  ault.           
+00031650: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00031660: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00031670: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
+00031680: 6920 666f 7220 6920 696e 2073 656c 662b  i for i in self+
+00031690: 6c69 7374 2869 6e70 7329 5b69 3a5d 290a  list(inps)[i:]).
+000316a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000316b0: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+000316c0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+000316d0: 6528 6174 2c28 7475 706c 652c 6c69 7374  e(at,(tuple,list
+000316e0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+000316f0: 6966 206c 656e 2869 6e70 7329 203d 3d20  if len(inps) == 
+00031700: 6c65 6e28 6174 293a 0a20 2020 2020 2020  len(at):.       
+00031710: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00031720: 6e20 7261 6e67 6528 302c 6c65 6e28 6174  n range(0,len(at
+00031730: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00031740: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00031750: 7461 6e63 6528 6174 5b69 5d2c 696e 7429  tance(at[i],int)
+00031760: 2061 6e64 206e 203e 2061 745b 695d 3a0a   and n > at[i]:.
 00031770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031780: 2020 2072 742e 6170 7065 6e64 2869 290a     rt.append(i).
-00031790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000317a0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000317b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000317c0: 2020 7274 2e61 7070 656e 6428 7365 6c66    rt.append(self
-000317d0: 5b69 5d29 0a20 2020 2020 2020 2069 6620  [i]).        if 
-000317e0: 6c65 6e28 7274 293a 0a20 2020 2020 2020  len(rt):.       
-000317f0: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
-00031800: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-00031810: 6661 756c 740a 0a20 2020 2064 6566 204d  fault..    def M
-00031820: 6f76 6532 6669 7273 7428 7365 6c66 2c66  ove2first(self,f
-00031830: 696e 6429 3a0a 2020 2020 2020 2020 6966  ind):.        if
-00031840: 2054 7970 6528 6669 6e64 2c28 274c 4953   Type(find,('LIS
-00031850: 5427 2c27 6c69 7374 272c 2774 7570 6c65  T','list','tuple
-00031860: 2729 293a 0a20 2020 2020 2020 2020 2020  ')):.           
-00031870: 2073 656c 662e 4465 6c65 7465 282a 6669   self.Delete(*fi
-00031880: 6e64 2c66 696e 643d 2764 6174 6127 290a  nd,find='data').
-00031890: 2020 2020 2020 2020 2020 2020 7375 7065              supe
-000318a0: 7228 292e 5f5f 696e 6974 5f5f 2869 2066  r().__init__(i f
-000318b0: 6f72 2069 2069 6e20 6c69 7374 2866 696e  or i in list(fin
-000318c0: 6429 2b73 656c 6629 0a20 2020 2020 2020  d)+self).       
-000318d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000318e0: 2020 2073 656c 662e 4465 6c65 7465 282a     self.Delete(*
-000318f0: 2866 696e 642c 292c 6669 6e64 3d27 6461  (find,),find='da
-00031900: 7461 2729 0a20 2020 2020 2020 2020 2020  ta').           
-00031910: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-00031920: 5f28 6920 666f 7220 6920 696e 205b 6669  _(i for i in [fi
-00031930: 6e64 5d2b 7365 6c66 290a 2020 2020 2020  nd]+self).      
-00031940: 2020 7265 7475 726e 2073 656c 660a 0a20    return self.. 
-00031950: 2020 2064 6566 204d 6f76 6532 656e 6428     def Move2end(
-00031960: 7365 6c66 2c66 696e 6429 3a0a 2020 2020  self,find):.    
-00031970: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00031980: 6528 6669 6e64 2c28 6c69 7374 2c74 7570  e(find,(list,tup
-00031990: 6c65 2929 3a0a 2020 2020 2020 2020 2020  le)):.          
-000319a0: 2020 7365 6c66 2e44 656c 6574 6528 2a66    self.Delete(*f
-000319b0: 696e 642c 6669 6e64 3d27 6461 7461 2729  ind,find='data')
-000319c0: 0a20 2020 2020 2020 2020 2020 2073 7570  .            sup
-000319d0: 6572 2829 2e5f 5f69 6e69 745f 5f28 6920  er().__init__(i 
-000319e0: 666f 7220 6920 696e 2073 656c 662b 6c69  for i in self+li
-000319f0: 7374 2866 696e 6429 290a 2020 2020 2020  st(find)).      
-00031a00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00031a10: 2020 2020 7365 6c66 2e44 656c 6574 6528      self.Delete(
-00031a20: 2a28 6669 6e64 2c29 2c66 696e 643d 2764  *(find,),find='d
-00031a30: 6174 6127 290a 2020 2020 2020 2020 2020  ata').          
-00031a40: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-00031a50: 5f5f 2869 2066 6f72 2069 2069 6e20 7365  __(i for i in se
-00031a60: 6c66 2b5b 6669 6e64 5d29 0a20 2020 2020  lf+[find]).     
-00031a70: 2020 2072 6574 7572 6e20 7365 6c66 0a0a     return self..
-00031a80: 2020 2020 6465 6620 536f 7274 2873 656c      def Sort(sel
-00031a90: 662c 7265 7665 7273 653d 4661 6c73 652c  f,reverse=False,
-00031aa0: 6675 6e63 3d4e 6f6e 652c 6f72 6465 723d  func=None,order=
-00031ab0: 4e6f 6e65 2c66 6965 6c64 3d4e 6f6e 652c  None,field=None,
-00031ac0: 6261 7365 3d27 6b65 7927 2c73 796d 3d4e  base='key',sym=N
-00031ad0: 6f6e 6529 3a0a 2020 2020 2020 2020 7472  one):.        tr
-00031ae0: 793a 0a20 2020 2020 2020 2020 2020 2073  y:.            s
-00031af0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-00031b00: 6920 666f 7220 6920 696e 2053 6f72 7428  i for i in Sort(
-00031b10: 7365 6c66 2c72 6576 6572 7365 3d72 6576  self,reverse=rev
-00031b20: 6572 7365 2c66 756e 633d 6675 6e63 2c6f  erse,func=func,o
-00031b30: 7264 6572 3d6f 7264 6572 2c66 6965 6c64  rder=order,field
-00031b40: 3d66 6965 6c64 2c62 6173 653d 6261 7365  =field,base=base
-00031b50: 2c73 796d 3d73 796d 2929 0a20 2020 2020  ,sym=sym)).     
-00031b60: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00031b70: 6c66 0a20 2020 2020 2020 2065 7863 6570  lf.        excep
-00031b80: 743a 0a20 2020 2020 2020 2020 2020 2070  t:.            p
-00031b90: 7269 6e74 2827 4e6f 7420 7375 7070 6f72  rint('Not suppor
-00031ba0: 7420 6d69 7865 6420 7374 7269 6e67 2061  t mixed string a
-00031bb0: 6e64 2069 6e74 2729 0a0a 6465 6620 4974  nd int')..def It
-00031bc0: 6572 6162 6c65 2869 6e70 2c64 6566 6175  erable(inp,defau
-00031bd0: 6c74 3d5b 5d29 3a0a 2020 2020 6966 2069  lt=[]):.    if i
-00031be0: 7369 6e73 7461 6e63 6528 696e 702c 286c  sinstance(inp,(l
-00031bf0: 6973 742c 7475 706c 652c 6469 6374 2929  ist,tuple,dict))
-00031c00: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00031c10: 2069 6e70 0a20 2020 2072 6574 7572 6e20   inp.    return 
-00031c20: 6465 6661 756c 740a 0a64 6566 204c 6973  default..def Lis
-00031c30: 7428 2a69 6e70 732c 2a2a 6f70 7473 293a  t(*inps,**opts):
-00031c40: 0a20 2020 2027 2727 0a20 2020 2074 7570  .    '''.    tup
-00031c50: 6c65 326c 6973 743a 200a 2020 2020 2020  le2list: .      
-00031c60: 2020 5472 7565 203a 2063 6f6e 7665 7274    True : convert
-00031c70: 2074 7570 6c65 2064 6174 6120 746f 206c   tuple data to l
-00031c80: 6973 7420 6461 7461 0a20 2020 2020 2020  ist data.       
-00031c90: 2046 616c 7365 3a20 6170 7065 6e64 2074   False: append t
-00031ca0: 7570 6c65 2069 6e74 6f20 6c69 7374 0a20  uple into list. 
-00031cb0: 2020 203c 6469 6374 2069 6e70 7574 3e0a     <dict input>.
-00031cc0: 2020 2020 2069 7465 6d73 203a 203c 6469       items : <di
-00031cd0: 6374 3e2e 6974 656d 7328 290a 2020 2020  ct>.items().    
-00031ce0: 2064 6174 6120 203a 203c 6469 6374 3e2e   data  : <dict>.
-00031cf0: 7661 6c75 6528 290a 2020 2020 2070 6174  value().     pat
-00031d00: 6820 203a 2063 6f6e 7665 7274 203c 6469  h  : convert <di
-00031d10: 6374 3e20 746f 2070 6174 6820 6c69 6b65  ct> to path like
-00031d20: 206c 6973 7420 285b 2827 2f61 2f62 272c   list ([('/a/b',
-00031d30: 3129 2c28 272f 612f 6327 2c32 292c 2e2e  1),('/a/c',2),..
-00031d40: 2e5d 290a 2020 2020 2028 6465 6661 756c  .]).     (defaul
-00031d50: 7429 3a20 3c64 6963 743e 2e6b 6579 7328  t): <dict>.keys(
-00031d60: 290a 2020 2020 3c6f 7074 696f 6e3e 0a20  ).    <option>. 
-00031d70: 2020 2020 6967 6e6f 7265 733d 5b5d 2020      ignores=[]  
-00031d80: 203a 2069 676e 6f72 6520 6772 6f75 7028   : ignore group(
-00031d90: 6465 6661 756c 743a 206d 6164 6520 746f  default: made to
-00031da0: 206c 6973 742c 2061 6c6c 290a 2020 2020   list, all).    
-00031db0: 2069 6478 3d3c 696e 743e 2020 2020 3a20   idx=<int>    : 
-00031dc0: 6765 7420 3c69 6478 3e20 6461 7461 0a20  get <idx> data. 
-00031dd0: 2020 2020 6465 6c3d 3c69 6e74 3e20 2020      del=<int>   
-00031de0: 203a 2064 656c 6574 6520 3c69 6478 3e0a   : delete <idx>.
-00031df0: 2020 2020 2066 6972 7374 3d3c 6461 7461       first=<data
-00031e00: 3e20 3a20 6d6f 7665 203c 6461 7461 3e20  > : move <data> 
-00031e10: 746f 2066 6972 7374 0a20 2020 2020 656e  to first.     en
-00031e20: 643d 3c64 6174 613e 2020 203a 206d 6f76  d=<data>   : mov
-00031e30: 6520 3c64 6174 613e 2074 6f20 656e 640a  e <data> to end.
-00031e40: 2020 2020 2066 696e 643d 3c64 6174 613e       find=<data>
-00031e50: 2020 3a20 6765 7420 496e 6465 7820 6c69    : get Index li
-00031e60: 7374 0a20 2020 2020 756e 6971 3d46 616c  st.     uniq=Fal
-00031e70: 7365 2020 203a 204d 616b 6520 746f 2055  se   : Make to U
-00031e80: 6e69 7120 6461 7461 0a20 2020 2020 7374  niq data.     st
-00031e90: 7269 703d 4661 6c73 6520 203a 2072 656d  rip=False  : rem
-00031ea0: 6f76 6520 7768 6974 6520 7370 6163 650a  ove white space.
-00031eb0: 2020 2020 2064 6566 6175 6c74 2020 2020       default    
-00031ec0: 2020 3a20 4661 6c73 650a 2020 2020 206d    : False.     m
-00031ed0: 6f64 6520 0a20 2020 2020 2020 2061 7574  ode .        aut
-00031ee0: 6f20 2020 2020 203a 2061 7574 6f20 6669  o      : auto fi
-00031ef0: 7869 6e67 2069 6e64 6578 0a20 2020 2020  xing index.     
-00031f00: 2020 2065 7272 2020 2020 2020 203a 206e     err       : n
-00031f10: 6f74 2066 6f75 6e64 2074 6865 6e20 7265  ot found then re
-00031f20: 7475 726e 2064 6566 6175 6c74 2846 616c  turn default(Fal
-00031f30: 7365 290a 2020 2020 2020 2020 6967 6e6f  se).        igno
-00031f40: 7265 2020 2020 3a20 6e6f 7420 666f 756e  re    : not foun
-00031f50: 6420 7468 656e 2069 676e 6f72 6520 7468  d then ignore th
-00031f60: 6520 6461 7461 0a20 2020 2027 2727 0a20  e data.    '''. 
-00031f70: 2020 2064 6566 2044 4428 7329 3a0a 2020     def DD(s):.  
-00031f80: 2020 2020 2020 7274 3d5b 5d0a 2020 2020        rt=[].    
-00031f90: 2020 2020 666f 7220 6920 696e 2073 3a0a      for i in s:.
-00031fa0: 2020 2020 2020 2020 2020 2020 6966 2054              if T
-00031fb0: 7970 6528 735b 695d 2c64 6963 7429 3a0a  ype(s[i],dict):.
-00031fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00031fd0: 666f 7220 7a20 696e 2044 4428 735b 695d  for z in DD(s[i]
-00031fe0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00031ff0: 2020 2020 2020 2072 742e 6170 7065 6e64         rt.append
-00032000: 2828 692b 272f 272b 7a5b 305d 2c7a 5b31  ((i+'/'+z[0],z[1
-00032010: 5d29 290a 2020 2020 2020 2020 2020 2020  ])).            
-00032020: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00032030: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
-00032040: 2869 2c73 5b69 5d29 290a 2020 2020 2020  (i,s[i])).      
-00032050: 2020 7265 7475 726e 2072 740a 0a20 2020    return rt..   
-00032060: 2074 7570 6c65 326c 6973 743d 6f70 7473   tuple2list=opts
-00032070: 2e67 6574 2827 7475 706c 6532 6c69 7374  .get('tuple2list
-00032080: 272c 5472 7565 290a 2020 2020 6d6f 6465  ',True).    mode
-00032090: 3d6f 7074 732e 6765 7428 276d 6f64 6527  =opts.get('mode'
-000320a0: 2c27 6175 746f 2729 0a20 2020 2069 676e  ,'auto').    ign
-000320b0: 6f72 6573 3d6f 7074 732e 6765 7428 2769  ores=opts.get('i
-000320c0: 676e 6f72 6573 2729 0a20 2020 2069 6620  gnores').    if 
-000320d0: 6973 696e 7374 616e 6365 2869 676e 6f72  isinstance(ignor
-000320e0: 6573 2c73 7472 293a 0a20 2020 2020 2020  es,str):.       
-000320f0: 2069 676e 6f72 6573 3d74 7570 6c65 2869   ignores=tuple(i
-00032100: 676e 6f72 6573 2e73 706c 6974 2827 2c27  gnores.split(','
-00032110: 2929 0a20 2020 2069 6620 6973 696e 7374  )).    if isinst
-00032120: 616e 6365 2869 676e 6f72 6573 2c28 6c69  ance(ignores,(li
-00032130: 7374 2c74 7570 6c65 2929 3a0a 2020 2020  st,tuple)):.    
-00032140: 2020 2020 6967 6e6f 7265 733d 7475 706c      ignores=tupl
-00032150: 6528 6967 6e6f 7265 7329 0a20 2020 2072  e(ignores).    r
-00032160: 743d 5b5d 0a20 2020 2069 6620 6c65 6e28  t=[].    if len(
-00032170: 696e 7073 2920 3d3d 2030 203a 2072 6574  inps) == 0 : ret
-00032180: 7572 6e20 7274 0a20 2020 2069 6620 5479  urn rt.    if Ty
-00032190: 7065 2869 6e70 735b 305d 2c28 276c 6973  pe(inps[0],('lis
-000321a0: 7427 2c27 4c49 5354 2729 293a 0a20 2020  t','LIST')):.   
-000321b0: 2020 2020 2072 743d 696e 7073 5b30 5d0a       rt=inps[0].
-000321c0: 2020 2020 656c 6966 2054 7970 6528 696e      elif Type(in
-000321d0: 7073 5b30 5d2c 7475 706c 6529 3a0a 2020  ps[0],tuple):.  
-000321e0: 2020 2020 2020 6966 2074 7570 6c65 326c        if tuple2l
-000321f0: 6973 743a 0a20 2020 2020 2020 2020 2020  ist:.           
-00032200: 2072 743d 6c69 7374 2869 6e70 735b 305d   rt=list(inps[0]
-00032210: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-00032220: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
-00032230: 7070 656e 6428 696e 7073 5b30 5d29 0a20  ppend(inps[0]). 
-00032240: 2020 2065 6c69 6620 5479 7065 2869 6e70     elif Type(inp
-00032250: 735b 305d 2c64 6963 7429 3a0a 2020 2020  s[0],dict):.    
-00032260: 2020 2020 6966 206f 7074 732e 6765 7428      if opts.get(
-00032270: 2764 6174 6127 293a 0a20 2020 2020 2020  'data'):.       
-00032280: 2020 2020 2072 743d 6c69 7374 2869 6e70       rt=list(inp
-00032290: 735b 305d 2e76 616c 7565 7328 2929 0a20  s[0].values()). 
-000322a0: 2020 2020 2020 2065 6c69 6620 6f70 7473         elif opts
-000322b0: 2e67 6574 2827 616c 6c27 2c6f 7074 732e  .get('all',opts.
-000322c0: 6765 7428 2777 686f 6c65 272c 6f70 7473  get('whole',opts
-000322d0: 2e67 6574 2827 6974 656d 7327 2929 293a  .get('items'))):
-000322e0: 0a20 2020 2020 2020 2020 2020 2072 743d  .            rt=
-000322f0: 6c69 7374 2869 6e70 735b 305d 2e69 7465  list(inps[0].ite
-00032300: 6d73 2829 290a 2020 2020 2020 2020 656c  ms()).        el
-00032310: 6966 206f 7074 732e 6765 7428 2770 6174  if opts.get('pat
-00032320: 6827 293a 0a20 2020 2020 2020 2020 2020  h'):.           
-00032330: 2074 6d70 3d5b 5d0a 2020 2020 2020 2020   tmp=[].        
-00032340: 2020 2020 666f 7220 6b20 696e 2069 6e70      for k in inp
-00032350: 735b 305d 3a0a 2020 2020 2020 2020 2020  s[0]:.          
-00032360: 2020 2020 2020 6966 2054 7970 6528 696e        if Type(in
-00032370: 7073 5b30 5d5b 6b5d 2c64 6963 7429 3a0a  ps[0][k],dict):.
-00032380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032390: 2020 2020 666f 7220 6420 696e 2044 4428      for d in DD(
-000323a0: 696e 7073 5b30 5d5b 6b5d 293a 0a20 2020  inps[0][k]):.   
-000323b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000323c0: 2020 2020 2074 6d70 2e61 7070 656e 6428       tmp.append(
-000323d0: 2827 2f27 2b6b 2b27 2f27 2b64 5b30 5d2c  ('/'+k+'/'+d[0],
-000323e0: 645b 315d 2929 0a20 2020 2020 2020 2020  d[1])).         
-000323f0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00032400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032410: 2074 6d70 2e61 7070 656e 6428 2827 2f27   tmp.append(('/'
-00032420: 2b6b 2c69 6e70 735b 305d 5b6b 5d29 290a  +k,inps[0][k])).
-00032430: 2020 2020 2020 2020 2020 2020 7274 3d72              rt=r
-00032440: 742b 746d 700a 2020 2020 2020 2020 656c  t+tmp.        el
-00032450: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00032460: 7274 3d6c 6973 7428 696e 7073 5b30 5d29  rt=list(inps[0])
-00032470: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00032480: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00032490: 2869 676e 6f72 6573 2c74 7570 6c65 2920  (ignores,tuple) 
-000324a0: 616e 6420 2854 7970 6528 696e 7073 5b30  and (Type(inps[0
-000324b0: 5d2c 6967 6e6f 7265 7329 206f 7220 4973  ],ignores) or Is
-000324c0: 496e 2869 6e70 735b 305d 2c69 676e 6f72  In(inps[0],ignor
-000324d0: 6573 2929 3a0a 2020 2020 2020 2020 2020  es)):.          
-000324e0: 2020 7061 7373 0a20 2020 2020 2020 2065    pass.        e
-000324f0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00032500: 2072 743d 5b69 6e70 735b 305d 5d0a 2020   rt=[inps[0]].  
-00032510: 2020 666f 7220 6920 696e 2069 6e70 735b    for i in inps[
-00032520: 313a 5d3a 0a20 2020 2020 2020 2069 6620  1:]:.        if 
-00032530: 5479 7065 2869 2c6c 6973 7429 3a0a 2020  Type(i,list):.  
-00032540: 2020 2020 2020 2020 2020 7274 3d72 742b            rt=rt+
-00032550: 690a 2020 2020 2020 2020 656c 7365 3a0a  i.        else:.
-00032560: 2020 2020 2020 2020 2020 2020 6966 2054              if T
-00032570: 7970 6528 692c 7475 706c 6529 3a0a 2020  ype(i,tuple):.  
-00032580: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00032590: 2074 7570 6c65 326c 6973 743a 0a20 2020   tuple2list:.   
-000325a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000325b0: 2072 743d 7274 2b6c 6973 7428 6929 0a20   rt=rt+list(i). 
-000325c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000325d0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-000325e0: 2020 2020 2020 2020 656c 6966 2054 7970          elif Typ
-000325f0: 6528 692c 6469 6374 293a 0a20 2020 2020  e(i,dict):.     
-00032600: 2020 2020 2020 2020 2020 2072 743d 7274             rt=rt
-00032610: 2b4c 6973 7428 7274 2c69 2c2a 2a6f 7074  +List(rt,i,**opt
-00032620: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
-00032630: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-00032640: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00032650: 7461 6e63 6528 6967 6e6f 7265 732c 7475  tance(ignores,tu
-00032660: 706c 6529 2061 6e64 2028 5479 7065 2869  ple) and (Type(i
-00032670: 2c69 676e 6f72 6573 2920 6f72 2049 7349  ,ignores) or IsI
-00032680: 6e28 692c 6967 6e6f 7265 7329 293a 0a20  n(i,ignores)):. 
-00032690: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000326a0: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-000326b0: 2020 2020 7274 2e61 7070 656e 6428 6929      rt.append(i)
-000326c0: 0a20 2020 2069 6620 6f70 7473 2e67 6574  .    if opts.get
-000326d0: 2827 7374 7269 7027 293a 0a20 2020 2020  ('strip'):.     
-000326e0: 2020 2072 743d 5b69 2e73 7472 6970 2829     rt=[i.strip()
-000326f0: 2069 6620 6973 696e 7374 616e 6365 2869   if isinstance(i
-00032700: 2c28 7374 722c 6279 7465 7329 2920 656c  ,(str,bytes)) el
-00032710: 7365 2069 2066 6f72 2069 2069 6e20 7274  se i for i in rt
-00032720: 5d0a 2020 2020 6966 206f 7074 732e 6765  ].    if opts.ge
-00032730: 7428 2775 6e69 7127 293a 0a20 2020 2020  t('uniq'):.     
-00032740: 2020 2072 6574 7572 6e20 556e 6971 2872     return Uniq(r
-00032750: 7429 0a20 2020 2069 6478 3d6f 7074 732e  t).    idx=opts.
-00032760: 6765 7428 2769 6478 2729 0a20 2020 2069  get('idx').    i
-00032770: 6620 6e6f 7420 4973 4e6f 6e65 2869 6478  f not IsNone(idx
-00032780: 293a 0a20 2020 2020 2020 206f 6b2c 6964  ):.        ok,id
-00032790: 783d 496e 6465 7846 6f72 6d28 6964 782c  x=IndexForm(idx,
-000327a0: 6964 785f 6f6e 6c79 3d54 7275 652c 7379  idx_only=True,sy
-000327b0: 6d62 6f6c 3d27 2c27 290a 2020 2020 2020  mbol=',').      
-000327c0: 2020 6966 206f 6b20 6973 2046 616c 7365    if ok is False
-000327d0: 3a20 7265 7475 726e 206f 7074 732e 6765  : return opts.ge
-000327e0: 7428 2764 6566 6175 6c74 272c 4661 6c73  t('default',Fals
-000327f0: 6529 0a20 2020 2020 2020 2069 6620 6973  e).        if is
-00032800: 696e 7374 616e 6365 2869 6478 2c74 7570  instance(idx,tup
-00032810: 6c65 2920 616e 6420 6c65 6e28 6964 7829  le) and len(idx)
-00032820: 203d 3d20 323a 0a20 2020 2020 2020 2020   == 2:.         
-00032830: 2020 2069 6478 3d72 616e 6765 2869 6478     idx=range(idx
-00032840: 5b30 5d2c 6964 785b 315d 2b31 290a 2020  [0],idx[1]+1).  
-00032850: 2020 2020 2020 6966 206e 6f74 2054 7970        if not Typ
-00032860: 6528 6964 782c 286c 6973 742c 7475 706c  e(idx,(list,tupl
-00032870: 652c 2772 616e 6765 2729 293a 2069 6478  e,'range')): idx
-00032880: 3d5b 6964 785d 0a20 2020 2020 2020 2074  =[idx].        t
-00032890: 743d 5b5d 0a20 2020 2020 2020 2066 6f72  t=[].        for
-000328a0: 2069 2069 6e20 6964 783a 0a20 2020 2020   i in idx:.     
-000328b0: 2020 2020 2020 2069 6620 6d6f 6465 203d         if mode =
-000328c0: 3d20 2761 7574 6f27 3a0a 2020 2020 2020  = 'auto':.      
-000328d0: 2020 2020 2020 2020 2020 693d 4669 7849            i=FixI
-000328e0: 6e64 6578 2872 742c 692c 6465 6661 756c  ndex(rt,i,defaul
-000328f0: 743d 4661 6c73 652c 6572 723d 4661 6c73  t=False,err=Fals
-00032900: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
-00032910: 6c69 6620 6d6f 6465 2069 6e20 5b27 6572  lif mode in ['er
-00032920: 7227 2c27 6967 6e6f 7265 275d 3a0a 2020  r','ignore']:.  
-00032930: 2020 2020 2020 2020 2020 2020 2020 693d                i=
-00032940: 4669 7849 6e64 6578 2872 742c 692c 6465  FixIndex(rt,i,de
-00032950: 6661 756c 743d 4661 6c73 652c 6572 723d  fault=False,err=
-00032960: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
-00032970: 2020 6966 2069 2069 7320 4661 6c73 653a    if i is False:
-00032980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032990: 2069 6620 6d6f 6465 203d 3d20 2765 7272   if mode == 'err
-000329a0: 273a 2072 6574 7572 6e20 6f70 7473 2e67  ': return opts.g
-000329b0: 6574 2827 6465 6661 756c 7427 2c46 616c  et('default',Fal
-000329c0: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
-000329d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000329e0: 2020 2020 2020 7474 2e61 7070 656e 6428        tt.append(
-000329f0: 7274 5b69 5d29 0a20 2020 2020 2020 2072  rt[i]).        r
-00032a00: 6574 7572 6e20 7474 0a20 2020 2069 6620  eturn tt.    if 
-00032a10: 6e6f 7420 4973 4e6f 6e65 286f 7074 732e  not IsNone(opts.
-00032a20: 6765 7428 2772 6d27 2929 3a0a 2020 2020  get('rm')):.    
-00032a30: 2020 2020 7265 7475 726e 2072 6d28 7274      return rm(rt
-00032a40: 2c2a 6f70 7473 2e67 6574 2827 726d 2729  ,*opts.get('rm')
-00032a50: 2069 6620 5479 7065 286f 7074 732e 6765   if Type(opts.ge
-00032a60: 7428 2772 6d27 292c 286c 6973 742c 7475  t('rm'),(list,tu
-00032a70: 706c 6529 2920 656c 7365 206f 7074 732e  ple)) else opts.
-00032a80: 6765 7428 2772 6d27 2929 0a20 2020 2066  get('rm')).    f
-00032a90: 6972 7374 3d6f 7074 732e 6765 7428 2766  irst=opts.get('f
-00032aa0: 6972 7374 2729 0a20 2020 2069 6620 6e6f  irst').    if no
-00032ab0: 7420 4973 4e6f 6e65 2866 6972 7374 2920  t IsNone(first) 
-00032ac0: 616e 6420 6669 7273 7420 696e 2072 743a  and first in rt:
-00032ad0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00032ae0: 5b66 6972 7374 5d2b 5b69 2066 6f72 2069  [first]+[i for i
-00032af0: 2069 6e20 7274 2069 6620 6920 213d 2066   in rt if i != f
-00032b00: 6972 7374 5d0a 2020 2020 656e 643d 6f70  irst].    end=op
-00032b10: 7473 2e67 6574 2827 656e 6427 290a 2020  ts.get('end').  
-00032b20: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
-00032b30: 656e 6429 2061 6e64 2065 6e64 2069 6e20  end) and end in 
-00032b40: 7274 3a0a 2020 2020 2020 2020 7265 7475  rt:.        retu
-00032b50: 726e 205b 6920 666f 7220 6920 696e 2072  rn [i for i in r
-00032b60: 7420 6966 2069 2021 3d20 656e 645d 2b5b  t if i != end]+[
-00032b70: 656e 645d 0a20 2020 2066 696e 643d 6f70  end].    find=op
-00032b80: 7473 2e67 6574 2827 6669 6e64 2729 0a20  ts.get('find'). 
-00032b90: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
-00032ba0: 2866 696e 6429 3a0a 2020 2020 2020 2020  (find):.        
-00032bb0: 6966 206e 6f74 2054 7970 6528 6669 6e64  if not Type(find
-00032bc0: 2c28 6c69 7374 2c74 7570 6c65 2929 3a20  ,(list,tuple)): 
-00032bd0: 6669 6e64 3d5b 6669 6e64 5d0a 2020 2020  find=[find].    
-00032be0: 2020 2020 7474 3d5b 5d0a 2020 2020 2020      tt=[].      
-00032bf0: 2020 666f 7220 6920 696e 2066 696e 643a    for i in find:
-00032c00: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00032c10: 207a 2069 6e20 7261 6e67 6528 302c 6c65   z in range(0,le
-00032c20: 6e28 7274 2929 3a0a 2020 2020 2020 2020  n(rt)):.        
-00032c30: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
-00032c40: 692c 2827 7374 7227 2c27 6279 7465 7327  i,('str','bytes'
-00032c50: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00032c60: 2020 2020 2020 2020 6a3d 692e 7265 706c          j=i.repl
-00032c70: 6163 6528 272a 272c 272e 2b27 292e 7265  ace('*','.+').re
-00032c80: 706c 6163 6528 273f 272c 272e 2729 0a20  place('?','.'). 
-00032c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032ca0: 2020 206d 6d3d 7265 2e63 6f6d 7069 6c65     mm=re.compile
-00032cb0: 286a 290a 2020 2020 2020 2020 2020 2020  (j).            
-00032cc0: 2020 2020 2020 2020 6966 2062 6f6f 6c28          if bool(
-00032cd0: 7265 2e6d 6174 6368 286d 6d2c 7274 5b7a  re.match(mm,rt[z
-00032ce0: 5d29 293a 0a20 2020 2020 2020 2020 2020  ])):.           
-00032cf0: 2020 2020 2020 2020 2020 2020 2074 742e               tt.
-00032d00: 6170 7065 6e64 287a 290a 2020 2020 2020  append(z).      
-00032d10: 2020 2020 2020 2020 2020 656c 6966 2072            elif r
-00032d20: 745b 7a5d 203d 3d20 693a 2074 742e 6170  t[z] == i: tt.ap
-00032d30: 7065 6e64 287a 290a 2020 2020 2020 2020  pend(z).        
-00032d40: 7265 7475 726e 2074 740a 2020 2020 7265  return tt.    re
-00032d50: 7475 726e 2072 740a 0a64 6566 2052 6570  turn rt..def Rep
-00032d60: 6c61 6365 2873 7263 2c72 6570 6c61 6365  lace(src,replace
-00032d70: 5f77 6861 742c 7265 706c 6163 655f 746f  _what,replace_to
-00032d80: 2c64 6566 6175 6c74 3d4e 6f6e 652c 6e65  ,default=None,ne
-00032d90: 776c 696e 653d 275c 6e27 293a 0a20 2020  wline='\n'):.   
-00032da0: 2027 2727 0a20 2020 2072 6570 6c61 6365   '''.    replace
-00032db0: 2073 7472 696e 6720 2873 7263 2c20 6672   string (src, fr
-00032dc0: 6f6d 2c20 746f 290a 2020 2020 6966 206e  om, to).    if n
-00032dd0: 6f74 2073 7472 696e 6720 7468 656e 2072  ot string then r
-00032de0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-00032df0: 2020 6465 6661 756c 743a 2072 6574 7572    default: retur
-00032e00: 6e20 6465 6669 6e65 6420 7661 6c75 6520  n defined value 
-00032e10: 7768 656e 206e 6f74 2073 7472 696e 670a  when not string.
-00032e20: 2020 2020 2020 276f 7267 273a 2072 6574        'org': ret
-00032e30: 7572 6e20 7372 630a 2020 2020 2020 2e2e  urn src.      ..
-00032e40: 2e20 203a 2072 6574 7572 6e20 6465 6669  .  : return defi
-00032e50: 6e65 6420 6465 6661 756c 740a 2020 2020  ned default.    
-00032e60: 2727 270a 2020 2020 6465 6620 5f53 5f28  '''.    def _S_(
-00032e70: 7372 632c 7029 3a0a 2020 2020 2020 2020  src,p):.        
-00032e80: 6966 2069 7369 6e73 7461 6e63 6528 702c  if isinstance(p,
-00032e90: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
-00032ea0: 2020 2074 3d5b 5d0a 2020 2020 2020 2020     t=[].        
-00032eb0: 2020 2020 6d3d 6c65 6e28 7029 2d31 0a20      m=len(p)-1. 
-00032ec0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-00032ed0: 2069 6e20 7261 6e67 6528 302c 6d2b 3129   in range(0,m+1)
-00032ee0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00032ef0: 2020 6966 2069 203d 3d20 303a 0a20 2020    if i == 0:.   
-00032f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032f10: 2074 2e61 7070 656e 6428 7372 635b 3a70   t.append(src[:p
-00032f20: 5b69 5d5b 305d 5d29 0a20 2020 2020 2020  [i][0]]).       
-00032f30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00032f40: 693d 3d6d 3a0a 2020 2020 2020 2020 2020  i==m:.          
-00032f50: 2020 2020 2020 2020 2020 2020 2020 742e                t.
-00032f60: 6170 7065 6e64 2873 7263 5b70 5b69 5d5b  append(src[p[i][
-00032f70: 315d 3a5d 290a 2020 2020 2020 2020 2020  1]:]).          
-00032f80: 2020 2020 2020 656c 6966 2069 203c 206d        elif i < m
-00032f90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00032fa0: 2020 2020 2020 742e 6170 7065 6e64 2873        t.append(s
-00032fb0: 7263 5b70 5b69 2d31 5d5b 315d 3a70 5b69  rc[p[i-1][1]:p[i
-00032fc0: 5d5b 305d 5d29 0a20 2020 2020 2020 2020  ][0]]).         
-00032fd0: 2020 2020 2020 2065 6c69 6620 6920 3d3d         elif i ==
-00032fe0: 206d 3a0a 2020 2020 2020 2020 2020 2020   m:.            
-00032ff0: 2020 2020 2020 2020 742e 6170 7065 6e64          t.append
-00033000: 2873 7263 5b70 5b69 2d31 5d5b 315d 3a70  (src[p[i-1][1]:p
-00033010: 5b69 5d5b 305d 5d29 0a20 2020 2020 2020  [i][0]]).       
-00033020: 2020 2020 2020 2020 2020 2020 2074 2e61               t.a
-00033030: 7070 656e 6428 7372 635b 705b 695d 5b31  ppend(src[p[i][1
-00033040: 5d3a 5d29 0a20 2020 2020 2020 2020 2020  ]:]).           
-00033050: 2072 6574 7572 6e20 740a 0a20 2020 2069   return t..    i
-00033060: 6620 6e6f 7420 5479 7065 2873 7263 2c28  f not Type(src,(
-00033070: 2773 7472 272c 2762 7974 6573 2729 293a  'str','bytes')):
-00033080: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00033090: 4465 6661 756c 7428 7372 632c 6465 6661  Default(src,defa
-000330a0: 756c 7429 0a20 2020 2069 6620 5479 7065  ult).    if Type
-000330b0: 2873 7263 2c27 6279 7465 7327 293a 0a20  (src,'bytes'):. 
-000330c0: 2020 2020 2020 2072 6570 6c61 6365 5f77         replace_w
-000330d0: 6861 743d 4279 7465 7328 7265 706c 6163  hat=Bytes(replac
-000330e0: 655f 7768 6174 290a 2020 2020 2020 2020  e_what).        
-000330f0: 7265 706c 6163 655f 746f 3d42 7974 6573  replace_to=Bytes
-00033100: 2872 6570 6c61 6365 5f74 6f29 0a20 2020  (replace_to).   
-00033110: 2020 2020 206e 6577 6c69 6e65 3d42 7974       newline=Byt
-00033120: 6573 286e 6577 6c69 6e65 290a 2020 2020  es(newline).    
-00033130: 656c 7365 3a0a 2020 2020 2020 2020 7265  else:.        re
-00033140: 706c 6163 655f 7768 6174 3d53 7472 2872  place_what=Str(r
-00033150: 6570 6c61 6365 5f77 6861 7429 0a20 2020  eplace_what).   
-00033160: 2020 2020 2072 6570 6c61 6365 5f74 6f3d       replace_to=
-00033170: 5374 7228 7265 706c 6163 655f 746f 290a  Str(replace_to).
-00033180: 2020 2020 2020 2020 6e65 776c 696e 653d          newline=
-00033190: 5374 7228 6e65 776c 696e 6529 0a20 2020  Str(newline).   
-000331a0: 2074 6d70 3d5b 5d0a 2020 2020 666f 7220   tmp=[].    for 
-000331b0: 6969 2069 6e20 7372 632e 7370 6c69 7428  ii in src.split(
-000331c0: 6e65 776c 696e 6529 3a0a 2020 2020 2020  newline):.      
-000331d0: 2020 7474 3d5f 535f 2869 692c 466f 756e    tt=_S_(ii,Foun
-000331e0: 6428 6969 2c72 6570 6c61 6365 5f77 6861  d(ii,replace_wha
-000331f0: 742c 6c6f 6361 7469 6f6e 3d54 7275 6529  t,location=True)
-00033200: 290a 2020 2020 2020 2020 746d 702e 6170  ).        tmp.ap
-00033210: 7065 6e64 284a 6f69 6e28 7474 2c72 6570  pend(Join(tt,rep
-00033220: 6c61 6365 5f74 6f29 2069 6620 7474 2065  lace_to) if tt e
-00033230: 6c73 6520 6969 290a 2020 2020 7265 7475  lse ii).    retu
-00033240: 726e 204a 6f69 6e28 746d 702c 6e65 776c  rn Join(tmp,newl
-00033250: 696e 6529 0a0a 6465 6620 6b72 6328 7274  ine)..def krc(rt
-00033260: 3d4e 6f6e 652c 6368 6b3d 275f 272c 7274  =None,chk='_',rt
-00033270: 643d 4e6f 6e65 2c64 6566 6175 6c74 3d46  d=None,default=F
-00033280: 616c 7365 2c6d 6f64 653d 4e6f 6e65 2c65  alse,mode=None,e
-00033290: 7874 3d27 7368 656c 6c27 293a 0a20 2020  xt='shell'):.   
-000332a0: 2067 6c6f 6261 6c20 6b72 635f 6465 6669   global krc_defi
-000332b0: 6e65 0a20 2020 206e 7274 643d 436f 7079  ne.    nrtd=Copy
-000332c0: 286b 7263 5f64 6566 696e 652c 6465 6570  (krc_define,deep
-000332d0: 3d54 7275 6529 2069 6620 7274 6420 6973  =True) if rtd is
-000332e0: 204e 6f6e 6520 656c 7365 2043 6f70 7928   None else Copy(
-000332f0: 7274 642c 6465 6570 3d54 7275 6529 0a20  rtd,deep=True). 
-00033300: 2020 2069 6620 6578 7420 3d3d 2027 7368     if ext == 'sh
-00033310: 656c 6c27 3a20 2320 7079 7468 6f6e 0a20  ell': # python. 
-00033320: 2020 2020 2020 2069 6620 6e6f 7420 4973         if not Is
-00033330: 496e 2830 2c6e 7274 645b 2747 4f4f 4427  In(0,nrtd['GOOD'
-00033340: 5d29 3a20 6e72 7464 5b27 474f 4f44 275d  ]): nrtd['GOOD']
-00033350: 2e61 7070 656e 6428 3029 0a20 2020 2020  .append(0).     
-00033360: 2020 2069 6620 6e6f 7420 4973 496e 2831     if not IsIn(1
-00033370: 2c6e 7274 645b 2745 5252 4f27 5d29 3a20  ,nrtd['ERRO']): 
-00033380: 6e72 7464 5b27 4552 524f 275d 3d6e 7274  nrtd['ERRO']=nrt
-00033390: 645b 2745 5252 4f27 5d2b 5b31 2c31 3236  d['ERRO']+[1,126
-000333a0: 2c31 3238 2c31 3330 2c32 3535 5d0a 2020  ,128,130,255].  
-000333b0: 2020 2020 2020 6966 206e 6f74 2049 7349        if not IsI
-000333c0: 6e28 3132 372c 6e72 7464 5b27 4e46 4e44  n(127,nrtd['NFND
-000333d0: 275d 293a 206e 7274 645b 274e 464e 4427  ']): nrtd['NFND'
-000333e0: 5d2e 6170 7065 6e64 2831 3237 290a 2020  ].append(127).  
-000333f0: 2020 656c 6966 2065 7874 203d 3d20 2770    elif ext == 'p
-00033400: 7974 686f 6e27 3a20 2320 7079 7468 6f6e  ython': # python
-00033410: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00033420: 4973 496e 2831 2c6e 7274 645b 2747 4f4f  IsIn(1,nrtd['GOO
-00033430: 4427 5d29 3a20 6e72 7464 5b27 474f 4f44  D']): nrtd['GOOD
-00033440: 275d 2e61 7070 656e 6428 3129 2320 5079  '].append(1)# Py
-00033450: 7468 6f6e 2773 2054 7275 6520 6c65 7665  thon's True leve
-00033460: 6c0a 2020 2020 2020 2020 6966 206e 6f74  l.        if not
-00033470: 2049 7349 6e28 302c 6e72 7464 5b27 4641   IsIn(0,nrtd['FA
-00033480: 494c 275d 293a 206e 7274 645b 2746 4149  IL']): nrtd['FAI
-00033490: 4c27 5d2e 6170 7065 6e64 2830 2923 2050  L'].append(0)# P
-000334a0: 7974 686f 6e27 7320 4661 6c73 6520 6c65  ython's False le
-000334b0: 7665 6c0a 2020 2020 2727 270a 2020 2020  vel.    '''.    
-000334c0: 5368 656c 6c20 6578 6974 2063 6f64 653a  Shell exit code:
-000334d0: 0a20 2020 2020 2031 2020 202d 2043 6174  .      1   - Cat
-000334e0: 6368 616c 6c20 666f 7220 6765 6e65 7261  chall for genera
-000334f0: 6c20 6572 726f 7273 0a20 2020 2020 2032  l errors.      2
-00033500: 2020 202d 204d 6973 7573 6520 6f66 2073     - Misuse of s
-00033510: 6865 6c6c 2062 7569 6c74 696e 7320 2861  hell builtins (a
-00033520: 6363 6f72 6469 6e67 2074 6f20 4261 7368  ccording to Bash
-00033530: 2064 6f63 756d 656e 7461 7469 6f6e 290a   documentation).
-00033540: 2020 2020 3132 3620 2020 2d20 436f 6d6d      126   - Comm
-00033550: 616e 6420 696e 766f 6b65 6420 6361 6e6e  and invoked cann
-00033560: 6f74 2065 7865 6375 7465 0a20 2020 2031  ot execute.    1
-00033570: 3237 2020 202d 20e2 809c 636f 6d6d 616e  27   - ...comman
-00033580: 6420 6e6f 7420 666f 756e 64e2 809d 0a20  d not found.... 
-00033590: 2020 2031 3238 2020 202d 2049 6e76 616c     128   - Inval
-000335a0: 6964 2061 7267 756d 656e 7420 746f 2065  id argument to e
-000335b0: 7869 740a 2020 2020 3132 382b 6e20 2d20  xit.    128+n - 
-000335c0: 4661 7461 6c20 6572 726f 7220 7369 676e  Fatal error sign
-000335d0: 616c 20e2 809c 6ee2 809d 0a20 2020 2031  al ...n....    1
-000335e0: 3330 2020 202d 2053 6372 6970 7420 7465  30   - Script te
-000335f0: 726d 696e 6174 6564 2062 7920 436f 6e74  rminated by Cont
-00033600: 726f 6c2d 430a 2020 2020 3235 355c 2a20  rol-C.    255\* 
-00033610: 2d20 4578 6974 2073 7461 7475 7320 6f75  - Exit status ou
-00033620: 7420 6f66 2072 616e 6765 0a20 2020 2027  t of range.    '
-00033630: 2727 0a20 2020 2069 6620 6d6f 6465 203d  ''.    if mode =
-00033640: 3d20 2767 6574 273a 0a20 2020 2020 2020  = 'get':.       
-00033650: 2072 6574 7572 6e20 6e72 7464 0a20 2020   return nrtd.   
-00033660: 2065 6c69 6620 6d6f 6465 203d 3d20 276b   elif mode == 'k
-00033670: 6579 7327 3a0a 2020 2020 2020 2020 6966  eys':.        if
-00033680: 2069 7369 6e73 7461 6e63 6528 6e72 7464   isinstance(nrtd
-00033690: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
-000336a0: 2020 2020 7265 7475 726e 206e 7274 642e      return nrtd.
-000336b0: 6b65 7973 2829 0a20 2020 2064 6566 2074  keys().    def t
-000336c0: 7261 6e73 2869 7274 293a 0a20 2020 2020  rans(irt):.     
-000336d0: 2020 2074 7970 655f 6972 743d 7479 7065     type_irt=type
-000336e0: 2869 7274 290a 2020 2020 2020 2020 666f  (irt).        fo
-000336f0: 7220 6969 2069 6e20 6e72 7464 3a0a 2020  r ii in nrtd:.  
-00033700: 2020 2020 2020 2020 2020 666f 7220 6a6a            for jj
-00033710: 2069 6e20 6e72 7464 5b69 695d 3a0a 2020   in nrtd[ii]:.  
-00033720: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00033730: 2074 7970 6528 6a6a 2920 3d3d 2074 7970   type(jj) == typ
-00033740: 655f 6972 7420 616e 6420 2828 7479 7065  e_irt and ((type
-00033750: 5f69 7274 2069 7320 7374 7220 616e 6420  _irt is str and 
-00033760: 6a6a 2e6c 6f77 6572 2829 203d 3d20 6972  jj.lower() == ir
-00033770: 742e 6c6f 7765 7228 2929 206f 7220 6a6a  t.lower()) or jj
-00033780: 203d 3d20 6972 7429 3a0a 2020 2020 2020   == irt):.      
-00033790: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000337a0: 7475 726e 2069 690a 2020 2020 2020 2020  turn ii.        
-000337b0: 7265 7475 726e 2027 554e 4b4e 270a 2020  return 'UNKN'.  
-000337c0: 2020 7274 633d 4765 7428 7274 2c27 307c    rtc=Get(rt,'0|
-000337d0: 7263 272c 6572 723d 5472 7565 2c64 6566  rc',err=True,def
-000337e0: 6175 6c74 3d27 6f72 6727 2c74 7970 653d  ault='org',type=
-000337f0: 2862 6f6f 6c2c 696e 742c 6c69 7374 2c74  (bool,int,list,t
-00033800: 7570 6c65 2c64 6963 7429 290a 2020 2020  uple,dict)).    
-00033810: 6e72 7463 3d74 7261 6e73 2850 6565 6c28  nrtc=trans(Peel(
-00033820: 7274 632c 6572 723d 4661 6c73 652c 6465  rtc,err=False,de
-00033830: 6661 756c 743d 2775 6e6b 6e6f 776e 2729  fault='unknown')
-00033840: 2920 2349 6620 4765 7428 2920 676f 7420  ) #If Get() got 
-00033850: 6d75 6c74 6920 6461 7461 2074 6865 6e20  multi data then 
-00033860: 7573 6520 6669 7273 7420 6461 7461 0a20  use first data. 
-00033870: 2020 2069 6620 6368 6b20 213d 2027 5f27     if chk != '_'
-00033880: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
-00033890: 2069 7369 6e73 7461 6e63 6528 6368 6b2c   isinstance(chk,
-000338a0: 6c69 7374 293a 2063 686b 3d5b 6368 6b5d  list): chk=[chk]
-000338b0: 0a20 2020 2020 2020 2066 6f72 2063 6320  .        for cc 
-000338c0: 696e 2063 686b 3a0a 2020 2020 2020 2020  in chk:.        
-000338d0: 2020 2020 6966 2074 7261 6e73 2863 6329      if trans(cc)
-000338e0: 203d 3d20 6e72 7463 3a0a 2020 2020 2020   == nrtc:.      
-000338f0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00033900: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-00033910: 2020 6966 206e 7274 6320 3d3d 2027 554e    if nrtc == 'UN
-00033920: 4b4e 2720 616e 6420 6465 6661 756c 7420  KN' and default 
-00033930: 3d3d 2027 6f72 6727 3a0a 2020 2020 2020  == 'org':.      
-00033940: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00033950: 2072 7463 0a20 2020 2020 2020 2072 6574   rtc.        ret
-00033960: 7572 6e20 4465 6661 756c 7428 7274 2c64  urn Default(rt,d
-00033970: 6566 6175 6c74 290a 2020 2020 7265 7475  efault).    retu
-00033980: 726e 206e 7274 630a 0a64 6566 204f 7574  rn nrtc..def Out
-00033990: 466f 726d 6174 2864 6174 612c 6f75 743d  Format(data,out=
-000339a0: 4e6f 6e65 2c73 7472 6970 3d46 616c 7365  None,strip=False
-000339b0: 2c70 6565 6c3d 4e6f 6e65 2c6f 7267 3d4e  ,peel=None,org=N
-000339c0: 6f6e 652c 6465 6661 756c 743d 4e6f 6e65  one,default=None
-000339d0: 293a 0a20 2020 2027 2727 0a20 2020 204f  ):.    '''.    O
-000339e0: 7574 7075 7420 466f 726d 6174 206d 616b  utput Format mak
-000339f0: 6572 0a20 2020 203c 6f70 7469 6f6e 3e0a  er.    <option>.
-00033a00: 2020 2020 2020 6f75 740a 2020 2020 2020        out.      
-00033a10: 2020 4e6f 6e65 3a20 4e6f 7420 636f 6e76    None: Not conv
-00033a20: 6572 740a 2020 2020 2020 2020 7374 722c  ert.        str,
-00033a30: 696e 742c 6c69 7374 2c64 6963 7420 3a20  int,list,dict : 
-00033a40: 636f 6e76 6572 7420 6461 7461 2074 6f20  convert data to 
-00033a50: 7761 6e74 2066 6f72 6d61 740a 2020 2020  want format.    
-00033a60: 2020 2020 7261 7720 3a20 5065 656c 6564      raw : Peeled
-00033a70: 2064 6174 6120 7768 656e 2073 696e 676c   data when singl
-00033a80: 6520 6461 7461 285b 2761 275d 2c28 2761  e data(['a'],('a
-00033a90: 2729 2c7b 2761 273a 2761 6263 277d 2920  '),{'a':'abc'}) 
-00033aa0: 6f74 6865 7273 2074 6865 6e20 7265 7475  others then retu
-00033ab0: 726e 206f 7269 676e 616c 0a20 2020 2020  rn orignal.     
-00033ac0: 2070 6565 6c0a 2020 2020 2020 2020 4e6f   peel.        No
-00033ad0: 6e65 203a 2061 7574 6f6d 6174 6963 616c  ne : automatical
-00033ae0: 6c79 2077 6f72 6b69 6e67 2061 6363 6f72  ly working accor
-00033af0: 6469 6e67 2074 6f20 6f75 740a 2020 2020  ding to out.    
-00033b00: 2020 2020 5472 7565 203a 2050 6565 6c69      True : Peeli
-00033b10: 6e67 2064 6174 610a 2020 2020 2020 2020  ng data.        
-00033b20: 4661 6c73 653a 204e 6f74 2050 6565 6c69  False: Not Peeli
-00033b30: 6e67 0a20 2020 2020 2073 7472 6970 200a  ng.      strip .
-00033b40: 2020 2020 2020 2020 4661 6c73 653a 206e          False: n
-00033b50: 6f74 2072 656d 6f76 6520 7768 6974 6520  ot remove white 
-00033b60: 7370 6163 650a 2020 2020 2020 2020 5472  space.        Tr
-00033b70: 7565 203a 2072 656d 6f76 6520 7768 6974  ue : remove whit
-00033b80: 6520 7370 6163 650a 2020 2020 2727 270a  e space.    '''.
-00033b90: 2020 2020 6f75 745f 6461 7461 3d4e 6f6e      out_data=Non
-00033ba0: 650a 2020 2020 6966 2049 7349 6e28 6461  e.    if IsIn(da
-00033bb0: 7461 2c5b 5b5d 2c7b 7d5d 2920 616e 6420  ta,[[],{}]) and 
-00033bc0: 4973 496e 2864 6566 6175 6c74 2c5b 276f  IsIn(default,['o
-00033bd0: 7267 272c 276f 7269 6769 6e61 6c27 5d29  rg','original'])
-00033be0: 3a0a 2020 2020 2020 2020 2349 6620 6e6f  :.        #If no
-00033bf0: 2064 6174 6120 616e 6420 6465 6661 756c   data and defaul
-00033c00: 7420 6973 206f 7269 6769 6e61 6c20 7468  t is original th
-00033c10: 656e 2063 6f6e 7665 7274 206f 7269 6769  en convert origi
-00033c20: 6e61 6c20 746f 206f 7574 0a20 2020 2020  nal to out.     
-00033c30: 2020 2064 6174 613d 6f72 670a 2020 2020     data=org.    
-00033c40: 6966 2049 7349 6e28 6f75 742c 5b74 7570  if IsIn(out,[tup
-00033c50: 6c65 2c27 7475 706c 6527 2c6c 6973 742c  le,'tuple',list,
-00033c60: 276c 6973 7427 5d29 3a0a 2020 2020 2020  'list']):.      
-00033c70: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-00033c80: 6e63 6528 6461 7461 2c28 7475 706c 652c  nce(data,(tuple,
-00033c90: 6c69 7374 2929 3a0a 2020 2020 2020 2020  list)):.        
-00033ca0: 2020 2020 6f75 745f 6461 7461 3d5b 6461      out_data=[da
-00033cb0: 7461 5d0a 2020 2020 2020 2020 656c 7365  ta].        else
-00033cc0: 3a0a 2020 2020 2020 2020 2020 2020 6f75  :.            ou
-00033cd0: 745f 6461 7461 3d6c 6973 7428 6461 7461  t_data=list(data
-00033ce0: 290a 2020 2020 2020 2020 6966 206f 7574  ).        if out
-00033cf0: 2069 6e20 5b74 7570 6c65 2c27 7475 706c   in [tuple,'tupl
-00033d00: 6527 5d3a 0a20 2020 2020 2020 2020 2020  e']:.           
-00033d10: 2069 6620 6f75 745f 6461 7461 3a0a 2020   if out_data:.  
-00033d20: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00033d30: 7475 726e 2074 7570 6c65 286f 7574 5f64  turn tuple(out_d
-00033d40: 6174 6129 0a20 2020 2020 2020 2020 2020  ata).           
-00033d50: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-00033d60: 2864 6566 6175 6c74 2c74 7570 6c65 293a  (default,tuple):
-00033d70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00033d80: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-00033d90: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00033da0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00033db0: 2020 7265 7475 726e 2028 4465 6661 756c    return (Defaul
-00033dc0: 7428 6f72 672c 6465 6661 756c 7429 290a  t(org,default)).
-00033dd0: 2020 2020 2020 2020 6966 206f 7574 5f64          if out_d
-00033de0: 6174 613a 0a20 2020 2020 2020 2020 2020  ata:.           
-00033df0: 2072 6574 7572 6e20 6f75 745f 6461 7461   return out_data
-00033e00: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
-00033e10: 696e 7374 616e 6365 2864 6566 6175 6c74  instance(default
-00033e20: 2c6c 6973 7429 3a0a 2020 2020 2020 2020  ,list):.        
-00033e30: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-00033e40: 6c74 0a20 2020 2020 2020 2065 6c73 653a  lt.        else:
-00033e50: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00033e60: 7572 6e20 5b44 6566 6175 6c74 286f 7267  urn [Default(org
-00033e70: 2c64 6566 6175 6c74 295d 0a20 2020 2065  ,default)].    e
-00033e80: 6c69 6620 4973 496e 286f 7574 2c5b 6469  lif IsIn(out,[di
-00033e90: 6374 2c27 6469 6374 275d 293a 0a20 2020  ct,'dict']):.   
-00033ea0: 2020 2020 2069 6620 6461 7461 3a0a 2020       if data:.  
-00033eb0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00033ec0: 2044 6963 7428 6461 7461 290a 2020 2020   Dict(data).    
-00033ed0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-00033ee0: 6e63 6528 6465 6661 756c 742c 6469 6374  nce(default,dict
-00033ef0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00033f00: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-00033f10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00033f20: 2020 2020 2020 2020 7265 7475 726e 2044          return D
-00033f30: 6566 6175 6c74 286f 7267 2c64 6566 6175  efault(org,defau
-00033f40: 6c74 290a 2020 2020 656c 6966 2049 7349  lt).    elif IsI
-00033f50: 6e28 6f75 742c 5b27 7374 7227 2c73 7472  n(out,['str',str
-00033f60: 2c27 7374 7269 6e67 272c 2774 6578 7427  ,'string','text'
-00033f70: 5d29 3a0a 2020 2020 2020 2020 6f75 745f  ]):.        out_
-00033f80: 6461 7461 3d57 6869 7465 5374 7269 7028  data=WhiteStrip(
-00033f90: 5065 656c 2853 7472 2864 6174 6129 2c70  Peel(Str(data),p
-00033fa0: 6565 6c29 2c73 7472 6970 290a 2020 2020  eel),strip).    
-00033fb0: 656c 6966 2049 7349 6e28 6f75 742c 5b27  elif IsIn(out,['
-00033fc0: 696e 7427 2c69 6e74 2c27 696e 7465 6765  int',int,'intege
-00033fd0: 7227 2c27 6e75 6d62 6572 272c 276e 756d  r','number','num
-00033fe0: 6572 6963 275d 293a 0a20 2020 2020 2020  eric']):.       
-00033ff0: 206f 7574 5f64 6174 613d 496e 7428 5768   out_data=Int(Wh
-00034000: 6974 6553 7472 6970 2850 6565 6c28 6461  iteStrip(Peel(da
-00034010: 7461 2c70 6565 6c29 2c73 7472 6970 2929  ta,peel),strip))
-00034020: 0a20 2020 2069 6620 6f75 745f 6461 7461  .    if out_data
-00034030: 2069 7320 4661 6c73 653a 2023 6966 2073   is False: #if s
-00034040: 7472 206f 7220 696e 7420 676f 7420 4661  tr or int got Fa
-00034050: 6c73 6520 7468 656e 200a 2020 2020 2020  lse then .      
-00034060: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
-00034070: 286f 7267 2c64 6566 6175 6c74 290a 2020  (org,default).  
-00034080: 2020 6966 2049 734e 6f6e 6528 7065 656c    if IsNone(peel
-00034090: 293a 2070 6565 6c3d 5472 7565 0a20 2020  ): peel=True.   
-000340a0: 206f 7574 5f64 6174 613d 5768 6974 6553   out_data=WhiteS
-000340b0: 7472 6970 2850 6565 6c28 6461 7461 2c70  trip(Peel(data,p
-000340c0: 6565 6c29 2c73 7472 6970 290a 2020 2020  eel),strip).    
-000340d0: 6966 206f 7574 5f64 6174 613a 2072 6574  if out_data: ret
-000340e0: 7572 6e20 6f75 745f 6461 7461 0a20 2020  urn out_data.   
-000340f0: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
-00034100: 6f72 672c 6465 6661 756c 7429 0a0a 6465  org,default)..de
-00034110: 6620 4665 6564 4675 6e63 286f 626a 2c2a  f FeedFunc(obj,*
-00034120: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
-00034130: 2020 2727 270a 2020 2020 4175 746f 6d61    '''.    Automa
-00034140: 7469 6361 6c6c 7920 4665 6564 206d 6174  tically Feed mat
-00034150: 6368 6564 2076 6172 6961 626c 6573 2074  ched variables t
-00034160: 6f20 6675 6e63 7469 6f6e 0a20 2020 2046  o function.    F
-00034170: 6565 6446 756e 6328 3c66 756e 633e 2c3c  eedFunc(<func>,<
-00034180: 6675 6e63 7469 6f6e 2773 2061 7267 756d  function's argum
-00034190: 656e 7473 3e2c 3c66 756e 6374 696f 6e27  ents>,<function'
-000341a0: 7320 7661 7269 6162 6c65 733e 290a 2020  s variables>).  
-000341b0: 2020 6966 2073 6f6d 6574 6869 6e67 2077    if something w
-000341c0: 726f 6e67 2074 6865 6e20 7265 7475 726e  rong then return
-000341d0: 2046 616c 7365 0a20 2020 2069 6620 636f   False.    if co
-000341e0: 7272 6563 7420 7468 656e 2072 6574 7572  rrect then retur
-000341f0: 6e20 6f75 7470 7574 206f 6620 7261 6e20  n output of ran 
-00034200: 7468 6520 4675 6e63 7469 6f6e 2077 6974  the Function wit
-00034210: 6820 696e 7075 7473 0a20 2020 2027 2727  h inputs.    '''
-00034220: 0a20 2020 2069 6620 5479 7065 286f 626a  .    if Type(obj
-00034230: 2c27 7374 7227 2920 616e 6420 6e6f 7420  ,'str') and not 
-00034240: 696e 7370 6563 742e 6973 636c 6173 7328  inspect.isclass(
-00034250: 6f62 6a29 3a20 2320 666f 7220 7374 7220  obj): # for str 
-00034260: 636c 6173 730a 2020 2020 2020 2020 6d79  class.        my
-00034270: 6d6f 643d 4d79 4d6f 6475 6c65 2864 6566  mod=MyModule(def
-00034280: 6175 6c74 3d46 616c 7365 2c70 6172 656e  ault=False,paren
-00034290: 743d 3129 0a20 2020 2020 2020 2069 6620  t=1).        if 
-000342a0: 6d79 6d6f 6420 6973 2046 616c 7365 3a0a  mymod is False:.
-000342b0: 2020 2020 2020 2020 2020 2020 6d79 6d6f              mymo
-000342c0: 643d 4d79 4d6f 6475 6c65 2864 6566 6175  d=MyModule(defau
-000342d0: 6c74 3d46 616c 7365 2c70 6172 656e 743d  lt=False,parent=
-000342e0: 3029 0a20 2020 2020 2020 2069 6620 6d79  0).        if my
-000342f0: 6d6f 6420 6973 2046 616c 7365 3a0a 2020  mod is False:.  
-00034300: 2020 2020 2020 2020 2020 6d79 6d6f 643d            mymod=
-00034310: 4d79 4d6f 6475 6c65 2864 6566 6175 6c74  MyModule(default
-00034320: 3d46 616c 7365 2c70 6172 656e 743d 2d31  =False,parent=-1
-00034330: 290a 2020 2020 2020 2020 6966 2054 7970  ).        if Typ
-00034340: 6528 6d79 6d6f 642c 276d 6f64 756c 6527  e(mymod,'module'
-00034350: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
-00034360: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00034370: 2020 2020 6f62 6a3d 6765 7461 7474 7228      obj=getattr(
-00034380: 6d79 6d6f 642c 6f62 6a2c 4e6f 6e65 290a  mymod,obj,None).
-00034390: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-000343a0: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-000343b0: 2020 2020 5374 6445 7272 2827 4675 6e63      StdErr('Func
-000343c0: 7469 6f6e 206e 616d 6520 227b 7d22 206e  tion name "{}" n
-000343d0: 6f74 2066 6f75 6e64 2069 6e20 7468 6520  ot found in the 
-000343e0: 6d6f 6475 6c65 5c6e 272e 666f 726d 6174  module\n'.format
-000343f0: 286f 626a 2929 0a20 2020 2020 2020 2020  (obj)).         
-00034400: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-00034410: 6c73 650a 2020 2020 6966 2054 7970 6528  lse.    if Type(
-00034420: 6f62 6a2c 2827 6675 6e63 7469 6f6e 272c  obj,('function',
-00034430: 276d 6574 686f 6427 2c27 6275 696c 7469  'method','builti
-00034440: 6e5f 6675 6e63 7469 6f6e 5f6f 725f 6d65  n_function_or_me
-00034450: 7468 6f64 272c 2774 7970 6527 2c27 696e  thod','type','in
-00034460: 7427 2c27 7374 7227 2c27 6c69 7374 272c  t','str','list',
-00034470: 2764 6963 7427 2929 3a0a 2020 2020 2020  'dict')):.      
-00034480: 2020 6663 6172 6773 3d46 756e 6374 696f    fcargs=Functio
-00034490: 6e41 7267 7328 6f62 6a2c 6d6f 6465 3d27  nArgs(obj,mode='
-000344a0: 6465 7461 696c 272c 6465 6661 756c 743d  detail',default=
-000344b0: 7b7d 290a 2020 2020 2020 2020 6e69 6e70  {}).        ninp
-000344c0: 733d 5b5d 0a20 2020 2020 2020 206e 6f70  s=[].        nop
-000344d0: 7473 3d7b 7d0a 2020 2020 2020 2020 2353  ts={}.        #S
-000344e0: 7065 6369 616c 2063 6173 6520 696e 742c  pecial case int,
-000344f0: 7374 722c 6c69 7374 2c64 6963 740a 2020  str,list,dict.  
-00034500: 2020 2020 2020 6966 2054 7970 6528 6f62        if Type(ob
-00034510: 6a2c 2028 2769 6e74 272c 2773 7472 272c  j, ('int','str',
-00034520: 276c 6973 7427 2c27 6469 6374 2729 293a  'list','dict')):
-00034530: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00034540: 696e 7073 3a20 6e69 6e70 732e 6170 7065  inps: ninps.appe
-00034550: 6e64 2869 6e70 735b 305d 290a 2020 2020  nd(inps[0]).    
-00034560: 2020 2020 2020 2020 6966 2027 6261 7365          if 'base
-00034570: 2720 696e 206f 7074 733a 2023 696e 7428  ' in opts: #int(
-00034580: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00034590: 2020 6e6f 7074 735b 2762 6173 6527 5d3d    nopts['base']=
-000345a0: 6f70 7473 5b27 6261 7365 275d 0a20 2020  opts['base'].   
-000345b0: 2020 2020 2020 2020 2069 6620 2765 6e63           if 'enc
-000345c0: 6f64 696e 6727 2069 6e20 6f70 7473 3a20  oding' in opts: 
-000345d0: 2320 7374 7228 290a 2020 2020 2020 2020  # str().        
-000345e0: 2020 2020 2020 2020 6e6f 7074 735b 2765          nopts['e
-000345f0: 6e63 6f64 696e 6727 5d3d 6f70 7473 5b27  ncoding']=opts['
-00034600: 656e 636f 6469 6e67 275d 0a20 2020 2020  encoding'].     
-00034610: 2020 2020 2020 2065 6c69 6620 5479 7065         elif Type
-00034620: 286f 626a 2c27 7374 7227 2920 616e 6420  (obj,'str') and 
-00034630: 6e69 6e70 7320 616e 6420 5479 7065 286e  ninps and Type(n
-00034640: 696e 7073 5b30 5d2c 2762 7974 6573 2729  inps[0],'bytes')
-00034650: 2061 6e64 2027 656e 636f 6469 6e67 2720   and 'encoding' 
-00034660: 6e6f 7420 696e 206f 7074 733a 2023 2073  not in opts: # s
-00034670: 7472 2829 0a20 2020 2020 2020 2020 2020  tr().           
-00034680: 2020 2020 206e 6f70 7473 5b27 656e 636f       nopts['enco
-00034690: 6469 6e67 275d 3d27 6173 6369 6927 0a20  ding']='ascii'. 
-000346a0: 2020 2020 2020 2069 6478 3d30 0a20 2020         idx=0.   
-000346b0: 2020 2020 2069 6620 2761 7267 7327 2069       if 'args' i
-000346c0: 6e20 6663 6172 6773 3a0a 2020 2020 2020  n fcargs:.      
-000346d0: 2020 2020 2020 666f 7220 6920 696e 2066        for i in f
-000346e0: 6361 7267 735b 2761 7267 7327 5d3a 0a20  cargs['args']:. 
-000346f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00034700: 6620 6c65 6e28 696e 7073 2920 3e20 6964  f len(inps) > id
-00034710: 783a 0a20 2020 2020 2020 2020 2020 2020  x:.             
-00034720: 2020 2020 2020 206e 696e 7073 2e61 7070         ninps.app
-00034730: 656e 6428 696e 7073 5b69 6478 5d29 0a20  end(inps[idx]). 
-00034740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034750: 2020 2069 6478 2b3d 310a 2020 2020 2020     idx+=1.      
-00034760: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00034770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034780: 2020 2020 6966 2069 2069 6e20 6f70 7473      if i in opts
-00034790: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000347a0: 2020 2020 2020 2020 2020 6e69 6e70 732e            ninps.
-000347b0: 6170 7065 6e64 286f 7074 732e 706f 7028  append(opts.pop(
-000347c0: 6929 290a 2020 2020 2020 2020 2020 2020  i)).            
-000347d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000347e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000347f0: 2020 2020 2020 5374 6445 7272 2827 696e        StdErr('in
-00034800: 7075 7420 7061 7261 6d65 7465 7220 227b  put parameter "{
-00034810: 7d22 206e 6f74 2066 6f75 6e64 5c6e 272e  }" not found\n'.
-00034820: 666f 726d 6174 2869 2929 0a20 2020 2020  format(i)).     
-00034830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034840: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
-00034850: 2020 2020 2020 2020 6966 2027 7661 7261          if 'vara
-00034860: 7267 7327 2069 6e20 6663 6172 6773 3a0a  rgs' in fcargs:.
-00034870: 2020 2020 2020 2020 2020 2020 6e69 6e70              ninp
-00034880: 733d 6e69 6e70 732b 6c69 7374 2869 6e70  s=ninps+list(inp
-00034890: 735b 6964 783a 5d29 0a20 2020 2020 2020  s[idx:]).       
-000348a0: 2069 6620 2764 6566 6175 6c74 7327 2069   if 'defaults' i
-000348b0: 6e20 6663 6172 6773 3a0a 2020 2020 2020  n fcargs:.      
-000348c0: 2020 2020 2020 666f 7220 6920 696e 2066        for i in f
-000348d0: 6361 7267 735b 2764 6566 6175 6c74 7327  cargs['defaults'
-000348e0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-000348f0: 2020 2069 6620 6920 696e 206f 7074 733a     if i in opts:
-00034900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00034910: 2020 2020 206e 6f70 7473 5b69 5d3d 6f70       nopts[i]=op
-00034920: 7473 2e70 6f70 2869 2920 236d 616b 6520  ts.pop(i) #make 
-00034930: 7769 7468 2069 6e70 7574 2076 616c 7565  with input value
-00034940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00034950: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00034960: 2020 2020 2020 2020 2020 206e 6f70 7473             nopts
-00034970: 5b69 5d3d 6663 6172 6773 5b27 6465 6661  [i]=fcargs['defa
-00034980: 756c 7473 275d 5b69 5d20 2320 6d61 6b65  ults'][i] # make
-00034990: 2077 6974 6820 6465 6661 756c 7420 7661   with default va
-000349a0: 6c75 650a 2020 2020 2020 2020 6966 2027  lue.        if '
-000349b0: 6b65 7977 6f72 6473 2720 696e 2066 6361  keywords' in fca
-000349c0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-000349d0: 206e 6f70 7473 2e75 7064 6174 6528 6f70   nopts.update(op
-000349e0: 7473 290a 2020 2020 2020 2020 2352 756e  ts).        #Run
-000349f0: 2066 756e 6374 696f 6e20 7769 7468 2066   function with f
-00034a00: 6f75 6e64 2061 7267 756d 656e 7473 0a20  ound arguments. 
-00034a10: 2020 2020 2020 2069 6620 6e69 6e70 7320         if ninps 
-00034a20: 616e 6420 6e6f 7074 733a 0a20 2020 2020  and nopts:.     
-00034a30: 2020 2020 2020 2069 6620 5479 7065 286f         if Type(o
-00034a40: 626a 2c28 2769 6e74 272c 2773 7472 2729  bj,('int','str')
-00034a50: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00034a60: 2020 2072 6574 7572 6e20 6f62 6a28 6e69     return obj(ni
-00034a70: 6e70 735b 305d 2c2a 2a6e 6f70 7473 290a  nps[0],**nopts).
-00034a80: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00034a90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00034aa0: 2020 7265 7475 726e 206f 626a 282a 6e69    return obj(*ni
-00034ab0: 6e70 732c 2a2a 6e6f 7074 7329 0a20 2020  nps,**nopts).   
-00034ac0: 2020 2020 2065 6c69 6620 6e69 6e70 733a       elif ninps:
-00034ad0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00034ae0: 5479 7065 286f 626a 2c28 2769 6e74 272c  Type(obj,('int',
-00034af0: 2773 7472 272c 276c 6973 7427 2c27 6469  'str','list','di
-00034b00: 6374 2729 293a 0a20 2020 2020 2020 2020  ct')):.         
-00034b10: 2020 2020 2020 2072 6574 7572 6e20 6f62         return ob
-00034b20: 6a28 6e69 6e70 735b 305d 290a 2020 2020  j(ninps[0]).    
-00034b30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00034b40: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00034b50: 7475 726e 206f 626a 282a 6e69 6e70 7329  turn obj(*ninps)
-00034b60: 0a20 2020 2020 2020 2065 6c69 6620 6e6f  .        elif no
-00034b70: 7074 733a 0a20 2020 2020 2020 2020 2020  pts:.           
-00034b80: 2072 6574 7572 6e20 6f62 6a28 2a2a 6e6f   return obj(**no
-00034b90: 7074 7329 0a20 2020 2020 2020 2065 6c73  pts).        els
-00034ba0: 653a 0a20 2020 2020 2020 2020 2020 2074  e:.            t
-00034bb0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00034bc0: 2020 2020 7265 7475 726e 206f 626a 2829      return obj()
-00034bd0: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-00034be0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-00034bf0: 2020 2020 2065 3d45 7863 6570 744d 6573       e=ExceptMes
-00034c00: 7361 6765 2829 0a20 2020 2020 2020 2020  sage().         
-00034c10: 2020 2020 2020 2053 7464 4572 7228 6529         StdErr(e)
-00034c20: 0a20 2020 2072 6574 7572 6e20 4661 6c73  .    return Fals
-00034c30: 650a 0a64 6566 2070 7269 6e74 6628 2a6d  e..def printf(*m
-00034c40: 7367 2c2a 2a6f 7074 7329 3a0a 2020 2020  sg,**opts):.    
-00034c50: 2727 270a 2020 2020 5369 6d69 6c61 7220  '''.    Similar 
-00034c60: 6173 2070 7269 6e74 2829 0a20 2020 2064  as print().    d
-00034c70: 6174 653d 5472 7565 2f46 616c 7365 2020  ate=True/False  
-00034c80: 2020 2020 2020 2020 2020 2020 3a20 2854              : (T
-00034c90: 7275 6529 2070 7269 6e74 2064 6174 6520  rue) print date 
-00034ca0: 696e 6974 6961 6c20 6c69 6e65 0a20 2020  initial line.   
-00034cb0: 2064 6174 655f 666f 726d 6174 2020 2020   date_format    
-00034cc0: 2020 2020 2020 2020 2020 2020 2020 3a20                : 
-00034cd0: 6966 2064 6566 696e 6564 2064 6174 655f  if defined date_
-00034ce0: 666f 726d 6174 2074 6865 6e20 7072 696e  format then prin
-00034cf0: 7420 6461 7465 2077 6974 6820 6461 7465  t date with date
-00034d00: 5f66 6f72 6d61 740a 2020 2020 6469 7265  _format.    dire
-00034d10: 6374 3d46 616c 7365 2f54 7275 6520 2020  ct=False/True   
-00034d20: 2020 2020 2020 2020 203a 2028 5472 7565           : (True
-00034d30: 2920 7072 696e 7420 7769 7468 6f75 7420  ) print without 
-00034d40: 6e65 776c 696e 6520 616e 6420 616e 7920  newline and any 
-00034d50: 696e 7472 6f20 696e 666f 726d 6174 696f  intro informatio
-00034d60: 6e0a 2020 2020 6c6f 6766 696c 653d 2020  n.    logfile=  
-00034d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034d80: 2020 203a 2073 6176 6569 6e67 206c 6f67     : saveing log
-00034d90: 2074 6f20 6c6f 6766 696c 650a 2020 2020   to logfile.    
-00034da0: 6361 6c6c 6572 5f64 6574 6169 6c3d 4661  caller_detail=Fa
-00034db0: 6c73 652f 5472 7565 2020 2020 203a 2070  lse/True     : p
-00034dc0: 7269 6e74 2063 616c 6c65 7220 696e 666f  rint caller info
-00034dd0: 726d 6174 696f 6e0a 2020 2020 2020 2054  rmation.       T
-00034de0: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
-00034df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034e00: 2020 2020 2020 2d20 6c69 6e65 206e 756d        - line num
-00034e10: 6265 722c 2066 696c 656e 616d 652c 2061  ber, filename, a
-00034e20: 7267 732c 206f 7074 696f 6e61 6c20 6361  rgs, optional ca
-00034e30: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
-00034e40: 6d65 0a20 2020 2020 2020 4661 6c73 653a  me.       False:
-00034e50: 2028 6465 7461 696c 2073 656c 6563 7469   (detail selecti
-00034e60: 6f6e 290a 2020 2020 2020 2020 2020 6361  on).          ca
-00034e70: 6c6c 6572 5f61 7267 733d 4661 6c73 652f  ller_args=False/
-00034e80: 5472 7565 203a 2028 4661 6c73 6529 2070  True : (False) p
-00034e90: 7269 6e74 2061 7267 7320 6f66 2066 756e  rint args of fun
-00034ea0: 6374 696f 6e0a 2020 2020 2020 2020 2020  ction.          
-00034eb0: 6361 6c6c 6572 5f66 696c 656e 616d 653d  caller_filename=
-00034ec0: 4661 6c73 652f 5472 7565 203a 2028 4661  False/True : (Fa
-00034ed0: 6c73 6529 2070 7269 6e74 2066 696c 656e  lse) print filen
-00034ee0: 616d 650a 2020 2020 2020 2020 2020 6361  ame.          ca
-00034ef0: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
-00034f00: 6d65 3d46 616c 7365 2f54 7275 6520 3a20  me=False/True : 
-00034f10: 2846 616c 7365 2920 7072 696e 7420 6675  (False) print fu
-00034f20: 6c6c 2070 6174 6820 6669 6c65 6e61 6d65  ll path filename
-00034f30: 0a20 2020 2020 2020 2020 2063 616c 6c65  .          calle
-00034f40: 725f 6c69 6e65 5f6e 756d 6265 723d 4661  r_line_number=Fa
-00034f50: 6c73 652f 5472 7565 203a 2028 4661 6c73  lse/True : (Fals
-00034f60: 6529 2070 7269 6e74 206c 696e 6520 6e75  e) print line nu
-00034f70: 6d62 6572 200a 2020 2020 6361 6c6c 6572  mber .    caller
-00034f80: 5f74 7265 653d 4661 6c73 652f 5472 7565  _tree=False/True
-00034f90: 2020 2020 2020 203a 2070 7269 6e74 2074         : print t
-00034fa0: 7265 6520 6f66 2063 616c 6c65 7220 6869  ree of caller hi
-00034fb0: 7374 6f72 790a 2020 2020 2020 2054 7275  story.       Tru
-00034fc0: 653a 0a20 2020 2020 2020 2020 202d 2074  e:.          - t
-00034fd0: 7265 6520 616e 6420 6869 7374 6f72 790a  ree and history.
-00034fe0: 2020 2020 2020 2046 616c 7365 3a0a 2020         False:.  
-00034ff0: 2020 2020 2020 2020 6361 6c6c 6572 5f68          caller_h
-00035000: 6973 746f 7279 3d46 616c 7365 2f54 7275  istory=False/Tru
-00035010: 6520 3a20 7265 7475 726e 2068 6973 746f  e : return histo
-00035020: 7279 2077 6974 686f 7574 2074 7265 650a  ry without tree.
-00035030: 2020 2020 7379 736c 6f67 643d 2020 2020      syslogd=    
-00035040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035050: 203a 206c 6f67 6769 6e67 2074 6f20 7379   : logging to sy
-00035060: 736c 6f67 6420 6461 656d 6f6e 0a20 2020  slogd daemon.   
-00035070: 2065 6e64 5f6e 6577 6c69 6e65 3d54 7275   end_newline=Tru
-00035080: 652f 4661 6c73 6520 2020 2020 2020 3a20  e/False       : 
-00035090: 6d61 726b 206e 6577 206c 696e 6520 6174  mark new line at
-000350a0: 2065 6e64 206f 6620 7468 6520 6c69 6e65   end of the line
-000350b0: 0a20 2020 2073 7461 7274 5f6e 6577 6c69  .    start_newli
-000350c0: 6e65 3d46 616c 7365 2f54 7275 6520 2020  ne=False/True   
-000350d0: 2020 3a20 6d61 726b 206e 6577 206c 696e    : mark new lin
-000350e0: 6520 6174 2073 7461 7274 206f 6620 7468  e at start of th
-000350f0: 6520 6c69 6e65 0a20 2020 2069 6e74 726f  e line.    intro
-00035100: 3d3c 7374 723e 2020 2020 2020 2020 2020  =<str>          
-00035110: 2020 2020 2020 2020 3a20 6c6f 6720 696e          : log in
-00035120: 7472 6f20 7374 7269 6e67 2062 6566 6f72  tro string befor
-00035130: 6520 6c6f 6720 6461 7461 0a20 2020 206e  e log data.    n
-00035140: 6f5f 696e 7472 6f20 2020 2020 2020 2020  o_intro         
-00035150: 2020 2020 2020 2020 2020 2020 3a20 5472              : Tr
-00035160: 7565 3a20 7465 6d70 6f72 6172 7920 7265  ue: temporary re
-00035170: 6d6f 7665 2069 6e74 726f 202c 2046 616c  move intro , Fal
-00035180: 7365 2864 6566 6175 6c74 293a 2049 6e74  se(default): Int
-00035190: 726f 2077 6865 6e20 6578 6973 7420 696e  ro when exist in
-000351a0: 7472 6f2c 204e 6f6e 653a 2073 7061 6365  tro, None: space
-000351b0: 2069 6e73 7465 6164 2069 6e74 726f 2073   instead intro s
-000351c0: 7472 696e 670a 2020 2020 6c6f 675f 6c65  tring.    log_le
-000351d0: 7665 6c3d 3c69 6e74 3e20 2020 2020 2020  vel=<int>       
-000351e0: 2020 2020 2020 203a 206d 616b 6520 6c6f         : make lo
-000351f0: 672d 6c65 7665 6c0a 2020 2020 2020 2020  g-level.        
-00035200: 7072 696e 7466 5f6c 6f67 5f62 6173 653d  printf_log_base=
-00035210: 360a 2020 2020 2020 2020 7072 696e 7466  6.        printf
-00035220: 2827 6161 6161 6127 2c6c 6f67 5f6c 6576  ('aaaaa',log_lev
-00035230: 656c 3d33 2920 2d3e 2074 6869 7320 7769  el=3) -> this wi
-00035240: 6c6c 2070 7269 6e74 0a20 2020 2020 2020  ll print.       
-00035250: 2070 7269 6e74 6628 2762 6262 6262 272c   printf('bbbbb',
-00035260: 6c6f 675f 6c65 7665 6c3d 3829 202d 3e20  log_level=8) -> 
-00035270: 7468 6973 206e 6f74 2070 7269 6e74 2e20  this not print. 
-00035280: 6275 7420 6966 2063 6861 6e67 6520 7072  but if change pr
-00035290: 696e 7466 5f6c 6f67 5f62 6173 6520 746f  intf_log_base to
-000352a0: 2039 2074 6865 6e20 6974 2077 696c 6c20   9 then it will 
-000352b0: 7072 696e 740a 2020 2020 6c6f 673d 3c66  print.    log=<f
-000352c0: 756e 633e 2020 2020 2020 2020 2020 2020  unc>            
-000352d0: 2020 2020 2020 203a 2070 7574 206c 6f67         : put log
-000352e0: 6769 6e67 2064 6174 6120 746f 206c 6f67  ging data to log
-000352f0: 2066 756e 6374 696f 6e0a 2020 2020 6473   function.    ds
-00035300: 703d 2020 2020 2020 2020 2020 2020 2020  p=              
-00035310: 2020 2020 2020 2020 2020 203a 2044 6973             : Dis
-00035320: 706c 6179 2066 6f72 6d61 740a 2020 2020  play format.    
-00035330: 2020 2020 6120 203a 2061 7574 6f0a 2020      a  : auto.  
-00035340: 2020 2020 2020 7320 203a 2073 6372 6565        s  : scree
-00035350: 6e0a 2020 2020 2020 2020 6620 203a 2073  n.        f  : s
-00035360: 6176 6520 746f 2066 696c 650a 2020 2020  ave to file.    
-00035370: 2020 2020 6420 203a 2073 6176 6520 746f      d  : save to
-00035380: 2064 6562 7567 2066 696c 650a 2020 2020   debug file.    
-00035390: 2020 2020 6520 203a 206c 6f67 2074 6f20      e  : log to 
-000353a0: 7374 616e 6461 7264 2065 7272 6f72 200a  standard error .
-000353b0: 2020 2020 2020 2020 6320 203a 2063 6f6e          c  : con
-000353c0: 736f 6c65 0a20 2020 2020 2020 2069 2020  sole.        i  
-000353d0: 3a20 6967 6e6f 7265 2070 7269 6e74 0a20  : ignore print. 
-000353e0: 2020 2020 2020 2072 2020 3a20 7265 7475         r  : retu
-000353f0: 726e 0a20 2020 2020 2020 2020 2020 7274  rn.           rt
-00035400: 3d70 7269 6e74 6628 2778 7878 7827 2c64  =printf('xxxx',d
-00035410: 7370 3d27 7227 290a 2020 2020 2020 2020  sp='r').        
-00035420: 2020 2070 7269 6e74 2872 7429 0a20 2020     print(rt).   
-00035430: 2027 2727 0a20 2020 2067 6c6f 6261 6c20   '''.    global 
-00035440: 7072 696e 7466 5f63 616c 6c65 725f 6465  printf_caller_de
-00035450: 7461 696c 0a20 2020 2067 6c6f 6261 6c20  tail.    global 
-00035460: 7072 696e 7466 5f63 616c 6c65 725f 7472  printf_caller_tr
-00035470: 6565 0a20 2020 2067 6c6f 6261 6c20 7072  ee.    global pr
-00035480: 696e 7466 5f6c 6f67 5f62 6173 650a 2020  intf_log_base.  
-00035490: 2020 676c 6f62 616c 2070 7269 6e74 665f    global printf_
-000354a0: 6361 6c6c 6572 5f6e 616d 650a 2020 2020  caller_name.    
-000354b0: 676c 6f62 616c 2070 7269 6e74 665f 6e65  global printf_ne
-000354c0: 776c 696e 655f 696e 666f 0a20 2020 2067  wline_info.    g
-000354d0: 6c6f 6261 6c20 7072 696e 7466 5f69 676e  lobal printf_ign
-000354e0: 6f72 655f 656d 7074 790a 2020 2020 676c  ore_empty.    gl
-000354f0: 6f62 616c 2070 7269 6e74 665f 6462 675f  obal printf_dbg_
-00035500: 656d 7074 790a 2020 2020 676c 6f62 616c  empty.    global
-00035510: 2070 7269 6e74 665f 7363 725f 6462 670a   printf_scr_dbg.
-00035520: 2020 2020 6469 7265 6374 3d6f 7074 732e      direct=opts.
-00035530: 6765 7428 2764 6972 6563 7427 2c46 616c  get('direct',Fal
-00035540: 7365 290a 2020 2020 6473 703d 6f70 7473  se).    dsp=opts
-00035550: 2e67 6574 2827 6473 7027 2c6f 7074 732e  .get('dsp',opts.
-00035560: 6765 7428 276d 6f64 6527 2c27 6127 2929  get('mode','a'))
-00035570: 0a20 2020 2069 6620 6e6f 7420 6473 703a  .    if not dsp:
-00035580: 2064 7370 3d27 6127 0a20 2020 2069 6620   dsp='a'.    if 
-00035590: 6473 7020 3d3d 2027 6927 3a20 7265 7475  dsp == 'i': retu
-000355a0: 726e 2023 2069 676e 6f72 6520 7072 696e  rn # ignore prin
-000355b0: 740a 2020 2020 6c6f 673d 6f70 7473 2e67  t.    log=opts.g
-000355c0: 6574 2827 6c6f 6727 2c4e 6f6e 6529 0a20  et('log',None). 
-000355d0: 2020 206c 6f67 5f6c 6576 656c 3d6f 7074     log_level=opt
-000355e0: 732e 6765 7428 276c 6f67 5f6c 6576 656c  s.get('log_level
-000355f0: 272c 4e6f 6e65 290a 2020 2020 7061 7265  ',None).    pare
-00035600: 6e74 5f6e 3d6f 7074 732e 6765 7428 2763  nt_n=opts.get('c
-00035610: 616c 6c65 725f 7061 7265 6e74 272c 3129  aller_parent',1)
-00035620: 0a20 2020 2063 616c 6c65 725f 6465 7461  .    caller_deta
-00035630: 696c 3d6f 7074 732e 6765 7428 2763 616c  il=opts.get('cal
-00035640: 6c65 7227 2c6f 7074 732e 6765 7428 2763  ler',opts.get('c
-00035650: 616c 6c65 725f 6465 7461 696c 272c 7072  aller_detail',pr
-00035660: 696e 7466 5f63 616c 6c65 725f 6465 7461  intf_caller_deta
-00035670: 696c 2929 0a20 2020 2063 616c 6c65 725f  il)).    caller_
-00035680: 7472 6565 3d6f 7074 732e 6765 7428 2763  tree=opts.get('c
-00035690: 616c 6c65 725f 7472 6565 272c 7072 696e  aller_tree',prin
-000356a0: 7466 5f63 616c 6c65 725f 7472 6565 290a  tf_caller_tree).
-000356b0: 2020 2020 6361 6c6c 6572 5f68 6973 746f      caller_histo
-000356c0: 7279 3d6f 7074 732e 6765 7428 2763 616c  ry=opts.get('cal
-000356d0: 6c65 725f 6869 7374 6f72 7927 2c46 616c  ler_history',Fal
-000356e0: 7365 290a 2020 2020 6361 6c6c 6572 5f69  se).    caller_i
-000356f0: 676e 6f72 653d 6f70 7473 2e67 6574 2827  gnore=opts.get('
-00035700: 6361 6c6c 6572 5f69 676e 6f72 6527 2c6f  caller_ignore',o
-00035710: 7074 732e 6765 7428 2763 616c 6c65 725f  pts.get('caller_
-00035720: 7570 7065 7227 2c5b 5d29 290a 2020 2020  upper',[])).    
-00035730: 6361 6c6c 6572 5f66 756c 6c5f 6669 6c65  caller_full_file
-00035740: 6e61 6d65 3d6f 7074 732e 6765 7428 2763  name=opts.get('c
-00035750: 616c 6c65 725f 6675 6c6c 5f66 696c 656e  aller_full_filen
-00035760: 616d 6527 2c46 616c 7365 290a 2020 2020  ame',False).    
-00035770: 6361 6c6c 6572 5f66 696c 656e 616d 653d  caller_filename=
-00035780: 6f70 7473 2e67 6574 2827 6361 6c6c 6572  opts.get('caller
-00035790: 5f66 696c 656e 616d 6527 2c46 616c 7365  _filename',False
-000357a0: 290a 2020 2020 6361 6c6c 6572 5f6c 696e  ).    caller_lin
-000357b0: 655f 6e75 6d62 6572 3d6f 7074 732e 6765  e_number=opts.ge
-000357c0: 7428 2763 616c 6c65 725f 6c69 6e65 5f6e  t('caller_line_n
-000357d0: 756d 6265 7227 2c46 616c 7365 290a 2020  umber',False).  
-000357e0: 2020 6361 6c6c 6572 5f61 7267 733d 6f70    caller_args=op
-000357f0: 7473 2e67 6574 2827 6361 6c6c 6572 5f61  ts.get('caller_a
-00035800: 7267 7327 2c46 616c 7365 290a 2020 2020  rgs',False).    
-00035810: 6361 6c6c 6572 5f6e 616d 653d 6f70 7473  caller_name=opts
-00035820: 2e67 6574 2827 6361 6c6c 6572 5f6e 616d  .get('caller_nam
-00035830: 6527 2c70 7269 6e74 665f 6361 6c6c 6572  e',printf_caller
-00035840: 5f6e 616d 6529 0a20 2020 2073 7973 6c6f  _name).    syslo
-00035850: 6764 3d6f 7074 732e 6765 7428 2773 7973  gd=opts.get('sys
-00035860: 6c6f 6764 272c 4e6f 6e65 290a 2020 2020  logd',None).    
-00035870: 7363 725f 6462 673d 6f70 7473 2e67 6574  scr_dbg=opts.get
-00035880: 2827 7363 725f 6462 6727 2c70 7269 6e74  ('scr_dbg',print
-00035890: 665f 7363 725f 6462 6729 0a20 2020 2073  f_scr_dbg).    s
-000358a0: 6372 5f64 6267 5f63 6f6e 6469 7469 6f6e  cr_dbg_condition
-000358b0: 3d6f 7074 732e 6765 7428 2773 6372 5f64  =opts.get('scr_d
-000358c0: 6267 5f63 6f6e 6469 7469 6f6e 2729 0a20  bg_condition'). 
-000358d0: 2020 206e 6f5f 696e 7472 6f3d 6f70 7473     no_intro=opts
-000358e0: 2e67 6574 2827 6e6f 5f69 6e74 726f 272c  .get('no_intro',
-000358f0: 4661 6c73 6529 0a20 2020 2069 676e 6f72  False).    ignor
-00035900: 655f 656d 7074 793d 6f70 7473 2e67 6574  e_empty=opts.get
-00035910: 2827 6967 6e6f 7265 5f65 6d70 7479 272c  ('ignore_empty',
-00035920: 7072 696e 7466 5f69 676e 6f72 655f 656d  printf_ignore_em
-00035930: 7074 7929 0a20 2020 2064 6267 5f65 6d70  pty).    dbg_emp
-00035940: 7479 3d6f 7074 732e 6765 7428 2764 6267  ty=opts.get('dbg
-00035950: 5f65 6d70 7479 272c 7072 696e 7466 5f64  _empty',printf_d
-00035960: 6267 5f65 6d70 7479 290a 2020 2020 6d73  bg_empty).    ms
-00035970: 675f 7370 6c69 743d 6f70 7473 2e67 6574  g_split=opts.get
-00035980: 2827 6d73 675f 7370 6c69 7427 2c27 2027  ('msg_split',' '
-00035990: 290a 2020 2020 6d73 673d 6c69 7374 286d  ).    msg=list(m
-000359a0: 7367 290a 2020 2020 6966 206e 6f5f 696e  sg).    if no_in
-000359b0: 7472 6f20 6973 2054 7275 6520 6f72 2064  tro is True or d
-000359c0: 6972 6563 743a 0a20 2020 2020 2020 2064  irect:.        d
-000359d0: 6174 655f 666f 726d 6174 3d4e 6f6e 650a  ate_format=None.
-000359e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000359f0: 2020 6461 7465 5f66 6f72 6d61 743d 6f70    date_format=op
-00035a00: 7473 2e67 6574 2827 6461 7465 5f66 6f72  ts.get('date_for
-00035a10: 6d61 7427 2c27 256d 2f25 642f 2559 2025  mat','%m/%d/%Y %
-00035a20: 483a 254d 3a25 5327 2069 6620 6f70 7473  H:%M:%S' if opts
-00035a30: 2e67 6574 2827 6461 7465 2729 2065 6c73  .get('date') els
-00035a40: 6520 4e6f 6e65 290a 2020 2020 2320 656e  e None).    # en
-00035a50: 6420 6e65 776c 696e 6520 6465 7369 676e  d newline design
-00035a60: 0a20 2020 206e 6577 5f6c 696e 653d 2727  .    new_line=''
-00035a70: 2069 6620 6469 7265 6374 2065 6c73 6520   if direct else 
-00035a80: 6f70 7473 2e67 6574 2827 6e65 775f 6c69  opts.get('new_li
-00035a90: 6e65 272c 6f70 7473 2e67 6574 2827 6e65  ne',opts.get('ne
-00035aa0: 776c 696e 6527 2c6f 7074 732e 6765 7428  wline',opts.get(
-00035ab0: 2765 6e64 272c 6f70 7473 2e67 6574 2827  'end',opts.get('
-00035ac0: 656e 645f 6e65 776c 696e 6527 2c6f 7074  end_newline',opt
-00035ad0: 732e 6765 7428 2770 6f73 745f 6e65 776c  s.get('post_newl
-00035ae0: 696e 6527 2c27 5c6e 2729 2929 2929 0a20  ine','\n'))))). 
-00035af0: 2020 2069 6620 6e65 775f 6c69 6e65 206e     if new_line n
-00035b00: 6f74 2069 6e20 5b27 272c 275c 6e27 5d3a  ot in ['','\n']:
-00035b10: 6e65 775f 6c69 6e65 3d27 5c6e 2720 6966  new_line='\n' if
-00035b20: 206e 6577 5f6c 696e 6520 616e 6420 6e6f   new_line and no
-00035b30: 7420 6469 7265 6374 2065 6c73 6520 2727  t direct else ''
-00035b40: 0a20 2020 2023 2073 7461 7274 206e 6577  .    # start new
-00035b50: 6c69 6e65 2064 6573 6967 6e0a 2020 2020  line design.    
-00035b60: 6e6f 5f73 7461 7274 5f6e 6577 6c69 6e65  no_start_newline
-00035b70: 3d6f 7074 732e 6765 7428 276e 6f5f 7374  =opts.get('no_st
-00035b80: 6172 745f 6e65 776c 696e 6527 290a 2020  art_newline').  
-00035b90: 2020 7374 6172 745f 6e65 776c 696e 653d    start_newline=
-00035ba0: 2727 2069 6620 6e6f 5f73 7461 7274 5f6e  '' if no_start_n
-00035bb0: 6577 6c69 6e65 2069 7320 5472 7565 2065  ewline is True e
-00035bc0: 6c73 6520 6f70 7473 2e67 6574 2827 7374  lse opts.get('st
-00035bd0: 6172 745f 6e65 776c 696e 6527 2c6f 7074  art_newline',opt
-00035be0: 732e 6765 7428 2773 7461 7274 272c 6f70  s.get('start',op
-00035bf0: 7473 2e67 6574 2827 7072 655f 6e65 776c  ts.get('pre_newl
-00035c00: 696e 6527 2929 290a 2020 2020 6966 206e  ine'))).    if n
-00035c10: 6f5f 7374 6172 745f 6e65 776c 696e 653a  o_start_newline:
-00035c20: 0a20 2020 2020 2020 2073 7461 7274 5f6e  .        start_n
-00035c30: 6577 6c69 6e65 3d27 270a 2020 2020 656c  ewline=''.    el
-00035c40: 7365 3a0a 2020 2020 2020 2020 6966 2073  se:.        if s
-00035c50: 7461 7274 5f6e 6577 6c69 6e65 2069 7320  tart_newline is 
-00035c60: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
-00035c70: 2020 7374 6172 745f 6e65 776c 696e 653d    start_newline=
-00035c80: 275c 6e27 0a20 2020 2020 2020 2065 6c69  '\n'.        eli
-00035c90: 6620 4973 496e 2873 7461 7274 5f6e 6577  f IsIn(start_new
-00035ca0: 6c69 6e65 2c5b 2741 272c 2741 7574 6f27  line,['A','Auto'
-00035cb0: 5d29 3a0a 2020 2020 2020 2020 2020 2020  ]):.            
-00035cc0: 7374 6172 745f 6e65 776c 696e 653d 2761  start_newline='a
-00035cd0: 7574 6f27 0a20 2020 2020 2020 2065 6c73  uto'.        els
-00035ce0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-00035cf0: 7461 7274 5f6e 6577 6c69 6e65 3d27 270a  tart_newline=''.
-00035d00: 0a20 2020 2069 6620 6e6f 5f69 6e74 726f  .    if no_intro
-00035d10: 2069 7320 5472 7565 3a20 2320 6966 206e   is True: # if n
-00035d20: 6f5f 696e 7472 6f20 7468 656e 2069 676e  o_intro then ign
-00035d30: 6f72 6520 7374 6172 745f 6e65 776c 696e  ore start_newlin
-00035d40: 6520 6d61 726b 0a20 2020 2020 2020 2073  e mark.        s
-00035d50: 7461 7274 5f6e 6577 6c69 6e65 3d27 270a  tart_newline=''.
-00035d60: 0a20 2020 2069 6e74 726f 3d6f 7074 732e  .    intro=opts.
-00035d70: 6765 7428 2769 6e74 726f 272c 4e6f 6e65  get('intro',None
-00035d80: 290a 2020 2020 6c6f 6766 696c 653d 6f70  ).    logfile=op
-00035d90: 7473 2e67 6574 2827 6c6f 6766 696c 6527  ts.get('logfile'
-00035da0: 2c6f 7074 732e 6765 7428 276c 6f67 5f66  ,opts.get('log_f
-00035db0: 696c 6527 2c5b 5d29 290a 2020 2020 6967  ile',[])).    ig
-00035dc0: 6e6f 7265 5f6d 7973 656c 663d 6f70 7473  nore_myself=opts
-00035dd0: 2e67 6574 2827 6967 6e6f 7265 5f6d 7973  .get('ignore_mys
-00035de0: 656c 6627 2c54 7275 6529 0a20 2020 2064  elf',True).    d
-00035df0: 6566 206d 7367 5f6d 616b 6572 282a 6d73  ef msg_maker(*ms
-00035e00: 672c 6d73 675f 7370 6c69 743d 2720 272c  g,msg_split=' ',
-00035e10: 696e 7472 6f5f 6c65 6e3d 302c 696e 7472  intro_len=0,intr
-00035e20: 6f5f 6d73 673d 2727 293a 0a20 2020 2020  o_msg=''):.     
-00035e30: 2020 2023 204d 616b 6520 696e 7075 7420     # Make input 
-00035e40: 6461 7461 2074 6f20 6120 7374 7269 6e67  data to a string
-00035e50: 206d 7367 200a 2020 2020 2020 2020 6d73   msg .        ms
-00035e60: 675f 7374 723d 2727 0a20 2020 2020 2020  g_str=''.       
-00035e70: 2054 543d 3020 2023 2046 6f72 2027 5c6e   TT=0  # For '\n
-00035e80: 2720 6f72 2027 5c6e 5c6e 2720 2e2e 2e0a  ' or '\n\n' ....
-00035e90: 2020 2020 2020 2020 666f 7220 6969 2069          for ii i
-00035ea0: 6e20 6d73 673a 0a20 2020 2020 2020 2020  n msg:.         
-00035eb0: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00035ec0: 616e 6365 2869 692c 7374 7229 3a0a 2020  ance(ii,str):.  
-00035ed0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00035ee0: 2069 6e74 726f 5f6c 656e 3a0a 2020 2020   intro_len:.    
-00035ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035f00: 613d 436f 6c6f 7253 7472 2857 7261 7053  a=ColorStr(WrapS
-00035f10: 7472 696e 6728 5374 7228 7070 7269 6e74  tring(Str(pprint
-00035f20: 2e70 666f 726d 6174 2869 6929 2c64 6566  .pformat(ii),def
-00035f30: 6175 6c74 3d27 6f72 6727 292c 6673 7061  ault='org'),fspa
-00035f40: 6365 3d30 2069 6620 6e6f 7420 6d73 675f  ce=0 if not msg_
-00035f50: 7374 7220 6f72 206d 7367 5f73 706c 6974  str or msg_split
-00035f60: 2021 3d20 275c 6e27 206f 7220 5454 2065   != '\n' or TT e
-00035f70: 6c73 6520 696e 7472 6f5f 6c65 6e2c 206e  lse intro_len, n
-00035f80: 7370 6163 653d 696e 7472 6f5f 6c65 6e2c  space=intro_len,
-00035f90: 6d6f 6465 3d27 7370 6163 6527 292c 2a2a  mode='space'),**
-00035fa0: 6f70 7473 290a 2020 2020 2020 2020 2020  opts).          
-00035fb0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00035fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035fd0: 613d 436f 6c6f 7253 7472 2853 7472 2870  a=ColorStr(Str(p
-00035fe0: 7072 696e 742e 7066 6f72 6d61 7428 6969  print.pformat(ii
-00035ff0: 292c 6465 6661 756c 743d 276f 7267 2729  ),default='org')
-00036000: 2c2a 2a6f 7074 7329 0a20 2020 2020 2020  ,**opts).       
-00036010: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00036020: 2020 2020 2020 2020 2020 2069 6620 275c             if '\
-00036030: 6e27 2069 6e20 6969 2061 6e64 206e 6f74  n' in ii and not
-00036040: 2069 692e 7265 706c 6163 6528 275c 6e27   ii.replace('\n'
-00036050: 2c27 2729 3a20 2363 6f6e 7665 7274 205c  ,''): #convert \
-00036060: 6e20 6f72 205c 6e5c 6e20 2e2e 2e2e 2074  n or \n\n .... t
-00036070: 6f20 7772 6170 7069 6e67 2066 6f72 6d61  o wrapping forma
-00036080: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
-00036090: 2020 2020 2020 5454 2b3d 310a 2020 2020        TT+=1.    
-000360a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000360b0: 6969 3d69 692b 2754 270a 2020 2020 2020  ii=ii+'T'.      
-000360c0: 2020 2020 2020 2020 2020 6966 2069 6e74            if int
-000360d0: 726f 5f6c 656e 3a0a 2020 2020 2020 2020  ro_len:.        
-000360e0: 2020 2020 2020 2020 2020 2020 613d 436f              a=Co
-000360f0: 6c6f 7253 7472 2857 7261 7053 7472 696e  lorStr(WrapStrin
-00036100: 6728 5374 7228 6969 2c64 6566 6175 6c74  g(Str(ii,default
-00036110: 3d27 6f72 6727 292c 6673 7061 6365 3d30  ='org'),fspace=0
-00036120: 2069 6620 6e6f 7420 6d73 675f 7374 7220   if not msg_str 
-00036130: 6f72 206d 7367 5f73 706c 6974 2021 3d20  or msg_split != 
-00036140: 275c 6e27 206f 7220 5454 2065 6c73 6520  '\n' or TT else 
-00036150: 696e 7472 6f5f 6c65 6e2c 206e 7370 6163  intro_len, nspac
-00036160: 653d 696e 7472 6f5f 6c65 6e2c 6d6f 6465  e=intro_len,mode
-00036170: 3d27 7370 6163 6527 292c 2a2a 6f70 7473  ='space'),**opts
-00036180: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00036190: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000361a0: 2020 2020 2020 2020 2020 2020 613d 436f              a=Co
-000361b0: 6c6f 7253 7472 2853 7472 2869 692c 6465  lorStr(Str(ii,de
-000361c0: 6661 756c 743d 276f 7267 2729 2c2a 2a6f  fault='org'),**o
-000361d0: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
-000361e0: 2020 2020 2023 5265 636f 7665 7220 6164       #Recover ad
-000361f0: 6465 6420 5420 666f 7220 7772 6170 7069  ded T for wrappi
-00036200: 6e67 2066 6f72 6d61 7420 746f 206f 7269  ng format to ori
-00036210: 6769 6e61 6c0a 2020 2020 2020 2020 2020  ginal.          
-00036220: 2020 2020 2020 6966 2054 5420 616e 6420        if TT and 
-00036230: 275c 6e27 2069 6e20 6969 2061 6e64 2069  '\n' in ii and i
-00036240: 692e 7265 706c 6163 6528 275c 6e27 2c27  i.replace('\n','
-00036250: 2729 203d 3d20 2754 273a 2061 3d61 5b3a  ') == 'T': a=a[:
-00036260: 2d31 5d0a 2020 2020 2020 2020 2020 2020  -1].            
-00036270: 6966 206d 7367 5f73 7472 3a0a 2020 2020  if msg_str:.    
-00036280: 2020 2020 2020 2020 2020 2020 6966 2054              if T
-00036290: 543a 0a20 2020 2020 2020 2020 2020 2020  T:.             
-000362a0: 2020 2020 2020 2023 6966 206d 6573 7361         #if messa
-000362b0: 6765 2073 706c 6974 6572 2065 7869 7374  ge spliter exist
-000362c0: 2061 6e64 2066 6978 2074 6f20 6669 7273   and fix to firs
-000362d0: 7420 6368 6172 6163 7465 720a 2020 2020  t character.    
-000362e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000362f0: 6966 2054 5420 3d3d 2031 2061 6e64 206e  if TT == 1 and n
-00036300: 6f74 2069 692e 7265 706c 6163 6528 275c  ot ii.replace('\
-00036310: 6e27 2c27 2729 3a0a 2020 2020 2020 2020  n',''):.        
+00031780: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+00031790: 696e 7365 7274 2861 745b 695d 2c69 6e70  insert(at[i],inp
+000317a0: 735b 695d 290a 2020 2020 2020 2020 2020  s[i]).          
+000317b0: 2020 2020 2020 2020 2020 656c 6966 2065            elif e
+000317c0: 7272 2069 7320 5472 7565 3a0a 2020 2020  rr is True:.    
+000317d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000317e0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+000317f0: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
+00031800: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00031810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031820: 2020 2020 2073 7570 6572 2829 2e61 7070       super().app
+00031830: 656e 6428 696e 7073 5b69 5d29 0a0a 2020  end(inps[i])..  
+00031840: 2020 6465 6620 4669 6e64 2873 656c 662c    def Find(self,
+00031850: 2a69 6e70 732c 2a2a 6f70 7473 293a 0a20  *inps,**opts):. 
+00031860: 2020 2020 2020 2066 696e 643d 6f70 7473         find=opts
+00031870: 2e67 6574 2827 6669 6e64 272c 2769 6e64  .get('find','ind
+00031880: 6578 2729 0a20 2020 2020 2020 2064 6566  ex').        def
+00031890: 6175 6c74 3d6f 7074 732e 6765 7428 2764  ault=opts.get('d
+000318a0: 6566 6175 6c74 272c 5b5d 290a 2020 2020  efault',[]).    
+000318b0: 2020 2020 7274 3d5b 5d0a 2020 2020 2020      rt=[].      
+000318c0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+000318d0: 2830 2c6c 656e 2873 656c 6629 293a 0a20  (0,len(self)):. 
+000318e0: 2020 2020 2020 2020 2020 2066 6f72 206a             for j
+000318f0: 2069 6e20 696e 7073 3a0a 2020 2020 2020   in inps:.      
+00031900: 2020 2020 2020 2020 2020 6a3d 6a2e 7265            j=j.re
+00031910: 706c 6163 6528 272a 272c 272e 2b27 292e  place('*','.+').
+00031920: 7265 706c 6163 6528 273f 272c 272e 2729  replace('?','.')
+00031930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031940: 206d 6d3d 7265 2e63 6f6d 7069 6c65 286a   mm=re.compile(j
+00031950: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00031960: 2020 6966 2062 6f6f 6c28 7265 2e6d 6174    if bool(re.mat
+00031970: 6368 286d 6d2c 7365 6c66 5b69 5d29 293a  ch(mm,self[i])):
+00031980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031990: 2020 2020 2069 6620 6669 6e64 2069 6e20       if find in 
+000319a0: 5b27 696e 6465 7827 2c27 6964 7827 5d3a  ['index','idx']:
+000319b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000319c0: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
+000319d0: 6e64 2869 290a 2020 2020 2020 2020 2020  nd(i).          
+000319e0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000319f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031a00: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
+00031a10: 6428 7365 6c66 5b69 5d29 0a20 2020 2020  d(self[i]).     
+00031a20: 2020 2069 6620 6c65 6e28 7274 293a 0a20     if len(rt):. 
+00031a30: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00031a40: 6e20 7274 0a20 2020 2020 2020 2072 6574  n rt.        ret
+00031a50: 7572 6e20 6465 6661 756c 740a 0a20 2020  urn default..   
+00031a60: 2064 6566 204d 6f76 6532 6669 7273 7428   def Move2first(
+00031a70: 7365 6c66 2c66 696e 6429 3a0a 2020 2020  self,find):.    
+00031a80: 2020 2020 6966 2054 7970 6528 6669 6e64      if Type(find
+00031a90: 2c28 274c 4953 5427 2c27 6c69 7374 272c  ,('LIST','list',
+00031aa0: 2774 7570 6c65 2729 293a 0a20 2020 2020  'tuple')):.     
+00031ab0: 2020 2020 2020 2073 656c 662e 4465 6c65         self.Dele
+00031ac0: 7465 282a 6669 6e64 2c66 696e 643d 2764  te(*find,find='d
+00031ad0: 6174 6127 290a 2020 2020 2020 2020 2020  ata').          
+00031ae0: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
+00031af0: 5f5f 2869 2066 6f72 2069 2069 6e20 6c69  __(i for i in li
+00031b00: 7374 2866 696e 6429 2b73 656c 6629 0a20  st(find)+self). 
+00031b10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00031b20: 2020 2020 2020 2020 2073 656c 662e 4465           self.De
+00031b30: 6c65 7465 282a 2866 696e 642c 292c 6669  lete(*(find,),fi
+00031b40: 6e64 3d27 6461 7461 2729 0a20 2020 2020  nd='data').     
+00031b50: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
+00031b60: 5f69 6e69 745f 5f28 6920 666f 7220 6920  _init__(i for i 
+00031b70: 696e 205b 6669 6e64 5d2b 7365 6c66 290a  in [find]+self).
+00031b80: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00031b90: 656c 660a 0a20 2020 2064 6566 204d 6f76  elf..    def Mov
+00031ba0: 6532 656e 6428 7365 6c66 2c66 696e 6429  e2end(self,find)
+00031bb0: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
+00031bc0: 6e73 7461 6e63 6528 6669 6e64 2c28 6c69  nstance(find,(li
+00031bd0: 7374 2c74 7570 6c65 2929 3a0a 2020 2020  st,tuple)):.    
+00031be0: 2020 2020 2020 2020 7365 6c66 2e44 656c          self.Del
+00031bf0: 6574 6528 2a66 696e 642c 6669 6e64 3d27  ete(*find,find='
+00031c00: 6461 7461 2729 0a20 2020 2020 2020 2020  data').         
+00031c10: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+00031c20: 745f 5f28 6920 666f 7220 6920 696e 2073  t__(i for i in s
+00031c30: 656c 662b 6c69 7374 2866 696e 6429 290a  elf+list(find)).
+00031c40: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00031c50: 2020 2020 2020 2020 2020 7365 6c66 2e44            self.D
+00031c60: 656c 6574 6528 2a28 6669 6e64 2c29 2c66  elete(*(find,),f
+00031c70: 696e 643d 2764 6174 6127 290a 2020 2020  ind='data').    
+00031c80: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+00031c90: 5f5f 696e 6974 5f5f 2869 2066 6f72 2069  __init__(i for i
+00031ca0: 2069 6e20 7365 6c66 2b5b 6669 6e64 5d29   in self+[find])
+00031cb0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00031cc0: 7365 6c66 0a0a 2020 2020 6465 6620 536f  self..    def So
+00031cd0: 7274 2873 656c 662c 7265 7665 7273 653d  rt(self,reverse=
+00031ce0: 4661 6c73 652c 6675 6e63 3d4e 6f6e 652c  False,func=None,
+00031cf0: 6f72 6465 723d 4e6f 6e65 2c66 6965 6c64  order=None,field
+00031d00: 3d4e 6f6e 652c 6261 7365 3d27 6b65 7927  =None,base='key'
+00031d10: 2c73 796d 3d4e 6f6e 6529 3a0a 2020 2020  ,sym=None):.    
+00031d20: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00031d30: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
+00031d40: 6e69 745f 5f28 6920 666f 7220 6920 696e  nit__(i for i in
+00031d50: 2053 6f72 7428 7365 6c66 2c72 6576 6572   Sort(self,rever
+00031d60: 7365 3d72 6576 6572 7365 2c66 756e 633d  se=reverse,func=
+00031d70: 6675 6e63 2c6f 7264 6572 3d6f 7264 6572  func,order=order
+00031d80: 2c66 6965 6c64 3d66 6965 6c64 2c62 6173  ,field=field,bas
+00031d90: 653d 6261 7365 2c73 796d 3d73 796d 2929  e=base,sym=sym))
+00031da0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00031db0: 7572 6e20 7365 6c66 0a20 2020 2020 2020  urn self.       
+00031dc0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+00031dd0: 2020 2020 2070 7269 6e74 2827 4e6f 7420       print('Not 
+00031de0: 7375 7070 6f72 7420 6d69 7865 6420 7374  support mixed st
+00031df0: 7269 6e67 2061 6e64 2069 6e74 2729 0a0a  ring and int')..
+00031e00: 6465 6620 4974 6572 6162 6c65 2869 6e70  def Iterable(inp
+00031e10: 2c64 6566 6175 6c74 3d5b 5d29 3a0a 2020  ,default=[]):.  
+00031e20: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00031e30: 696e 702c 286c 6973 742c 7475 706c 652c  inp,(list,tuple,
+00031e40: 6469 6374 2929 3a0a 2020 2020 2020 2020  dict)):.        
+00031e50: 7265 7475 726e 2069 6e70 0a20 2020 2072  return inp.    r
+00031e60: 6574 7572 6e20 6465 6661 756c 740a 0a64  eturn default..d
+00031e70: 6566 204c 6973 7428 2a69 6e70 732c 2a2a  ef List(*inps,**
+00031e80: 6f70 7473 293a 0a20 2020 2027 2727 0a20  opts):.    '''. 
+00031e90: 2020 2074 7570 6c65 326c 6973 743a 200a     tuple2list: .
+00031ea0: 2020 2020 2020 2020 5472 7565 203a 2063          True : c
+00031eb0: 6f6e 7665 7274 2074 7570 6c65 2064 6174  onvert tuple dat
+00031ec0: 6120 746f 206c 6973 7420 6461 7461 0a20  a to list data. 
+00031ed0: 2020 2020 2020 2046 616c 7365 3a20 6170         False: ap
+00031ee0: 7065 6e64 2074 7570 6c65 2069 6e74 6f20  pend tuple into 
+00031ef0: 6c69 7374 0a20 2020 203c 6469 6374 2069  list.    <dict i
+00031f00: 6e70 7574 3e0a 2020 2020 2069 7465 6d73  nput>.     items
+00031f10: 203a 203c 6469 6374 3e2e 6974 656d 7328   : <dict>.items(
+00031f20: 290a 2020 2020 2064 6174 6120 203a 203c  ).     data  : <
+00031f30: 6469 6374 3e2e 7661 6c75 6528 290a 2020  dict>.value().  
+00031f40: 2020 2070 6174 6820 203a 2063 6f6e 7665     path  : conve
+00031f50: 7274 203c 6469 6374 3e20 746f 2070 6174  rt <dict> to pat
+00031f60: 6820 6c69 6b65 206c 6973 7420 285b 2827  h like list ([('
+00031f70: 2f61 2f62 272c 3129 2c28 272f 612f 6327  /a/b',1),('/a/c'
+00031f80: 2c32 292c 2e2e 2e5d 290a 2020 2020 2028  ,2),...]).     (
+00031f90: 6465 6661 756c 7429 3a20 3c64 6963 743e  default): <dict>
+00031fa0: 2e6b 6579 7328 290a 2020 2020 3c6f 7074  .keys().    <opt
+00031fb0: 696f 6e3e 0a20 2020 2020 6967 6e6f 7265  ion>.     ignore
+00031fc0: 733d 5b5d 2020 203a 2069 676e 6f72 6520  s=[]   : ignore 
+00031fd0: 6772 6f75 7028 6465 6661 756c 743a 206d  group(default: m
+00031fe0: 6164 6520 746f 206c 6973 742c 2061 6c6c  ade to list, all
+00031ff0: 290a 2020 2020 2069 6478 3d3c 696e 743e  ).     idx=<int>
+00032000: 2020 2020 3a20 6765 7420 3c69 6478 3e20      : get <idx> 
+00032010: 6461 7461 0a20 2020 2020 6465 6c3d 3c69  data.     del=<i
+00032020: 6e74 3e20 2020 203a 2064 656c 6574 6520  nt>    : delete 
+00032030: 3c69 6478 3e0a 2020 2020 2066 6972 7374  <idx>.     first
+00032040: 3d3c 6461 7461 3e20 3a20 6d6f 7665 203c  =<data> : move <
+00032050: 6461 7461 3e20 746f 2066 6972 7374 0a20  data> to first. 
+00032060: 2020 2020 656e 643d 3c64 6174 613e 2020      end=<data>  
+00032070: 203a 206d 6f76 6520 3c64 6174 613e 2074   : move <data> t
+00032080: 6f20 656e 640a 2020 2020 2066 696e 643d  o end.     find=
+00032090: 3c64 6174 613e 2020 3a20 6765 7420 496e  <data>  : get In
+000320a0: 6465 7820 6c69 7374 0a20 2020 2020 756e  dex list.     un
+000320b0: 6971 3d46 616c 7365 2020 203a 204d 616b  iq=False   : Mak
+000320c0: 6520 746f 2055 6e69 7120 6461 7461 0a20  e to Uniq data. 
+000320d0: 2020 2020 7374 7269 703d 4661 6c73 6520      strip=False 
+000320e0: 203a 2072 656d 6f76 6520 7768 6974 6520   : remove white 
+000320f0: 7370 6163 650a 2020 2020 2064 6566 6175  space.     defau
+00032100: 6c74 2020 2020 2020 3a20 4661 6c73 650a  lt      : False.
+00032110: 2020 2020 206d 6f64 6520 0a20 2020 2020       mode .     
+00032120: 2020 2061 7574 6f20 2020 2020 203a 2061     auto      : a
+00032130: 7574 6f20 6669 7869 6e67 2069 6e64 6578  uto fixing index
+00032140: 0a20 2020 2020 2020 2065 7272 2020 2020  .        err    
+00032150: 2020 203a 206e 6f74 2066 6f75 6e64 2074     : not found t
+00032160: 6865 6e20 7265 7475 726e 2064 6566 6175  hen return defau
+00032170: 6c74 2846 616c 7365 290a 2020 2020 2020  lt(False).      
+00032180: 2020 6967 6e6f 7265 2020 2020 3a20 6e6f    ignore    : no
+00032190: 7420 666f 756e 6420 7468 656e 2069 676e  t found then ign
+000321a0: 6f72 6520 7468 6520 6461 7461 0a20 2020  ore the data.   
+000321b0: 2027 2727 0a20 2020 2064 6566 2044 4428   '''.    def DD(
+000321c0: 7329 3a0a 2020 2020 2020 2020 7274 3d5b  s):.        rt=[
+000321d0: 5d0a 2020 2020 2020 2020 666f 7220 6920  ].        for i 
+000321e0: 696e 2073 3a0a 2020 2020 2020 2020 2020  in s:.          
+000321f0: 2020 6966 2054 7970 6528 735b 695d 2c64    if Type(s[i],d
+00032200: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
+00032210: 2020 2020 2020 666f 7220 7a20 696e 2044        for z in D
+00032220: 4428 735b 695d 293a 0a20 2020 2020 2020  D(s[i]):.       
+00032230: 2020 2020 2020 2020 2020 2020 2072 742e               rt.
+00032240: 6170 7065 6e64 2828 692b 272f 272b 7a5b  append((i+'/'+z[
+00032250: 305d 2c7a 5b31 5d29 290a 2020 2020 2020  0],z[1])).      
+00032260: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00032270: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
+00032280: 7070 656e 6428 2869 2c73 5b69 5d29 290a  ppend((i,s[i])).
+00032290: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+000322a0: 740a 0a20 2020 2074 7570 6c65 326c 6973  t..    tuple2lis
+000322b0: 743d 6f70 7473 2e67 6574 2827 7475 706c  t=opts.get('tupl
+000322c0: 6532 6c69 7374 272c 5472 7565 290a 2020  e2list',True).  
+000322d0: 2020 6d6f 6465 3d6f 7074 732e 6765 7428    mode=opts.get(
+000322e0: 276d 6f64 6527 2c27 6175 746f 2729 0a20  'mode','auto'). 
+000322f0: 2020 2069 676e 6f72 6573 3d6f 7074 732e     ignores=opts.
+00032300: 6765 7428 2769 676e 6f72 6573 2729 0a20  get('ignores'). 
+00032310: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00032320: 2869 676e 6f72 6573 2c73 7472 293a 0a20  (ignores,str):. 
+00032330: 2020 2020 2020 2069 676e 6f72 6573 3d74         ignores=t
+00032340: 7570 6c65 2869 676e 6f72 6573 2e73 706c  uple(ignores.spl
+00032350: 6974 2827 2c27 2929 0a20 2020 2069 6620  it(',')).    if 
+00032360: 6973 696e 7374 616e 6365 2869 676e 6f72  isinstance(ignor
+00032370: 6573 2c28 6c69 7374 2c74 7570 6c65 2929  es,(list,tuple))
+00032380: 3a0a 2020 2020 2020 2020 6967 6e6f 7265  :.        ignore
+00032390: 733d 7475 706c 6528 6967 6e6f 7265 7329  s=tuple(ignores)
+000323a0: 0a20 2020 2072 743d 5b5d 0a20 2020 2069  .    rt=[].    i
+000323b0: 6620 6c65 6e28 696e 7073 2920 3d3d 2030  f len(inps) == 0
+000323c0: 203a 2072 6574 7572 6e20 7274 0a20 2020   : return rt.   
+000323d0: 2069 6620 5479 7065 2869 6e70 735b 305d   if Type(inps[0]
+000323e0: 2c28 276c 6973 7427 2c27 4c49 5354 2729  ,('list','LIST')
+000323f0: 293a 0a20 2020 2020 2020 2072 743d 696e  ):.        rt=in
+00032400: 7073 5b30 5d0a 2020 2020 656c 6966 2054  ps[0].    elif T
+00032410: 7970 6528 696e 7073 5b30 5d2c 7475 706c  ype(inps[0],tupl
+00032420: 6529 3a0a 2020 2020 2020 2020 6966 2074  e):.        if t
+00032430: 7570 6c65 326c 6973 743a 0a20 2020 2020  uple2list:.     
+00032440: 2020 2020 2020 2072 743d 6c69 7374 2869         rt=list(i
+00032450: 6e70 735b 305d 290a 2020 2020 2020 2020  nps[0]).        
+00032460: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00032470: 2020 7274 2e61 7070 656e 6428 696e 7073    rt.append(inps
+00032480: 5b30 5d29 0a20 2020 2065 6c69 6620 5479  [0]).    elif Ty
+00032490: 7065 2869 6e70 735b 305d 2c64 6963 7429  pe(inps[0],dict)
+000324a0: 3a0a 2020 2020 2020 2020 6966 206f 7074  :.        if opt
+000324b0: 732e 6765 7428 2764 6174 6127 293a 0a20  s.get('data'):. 
+000324c0: 2020 2020 2020 2020 2020 2072 743d 6c69             rt=li
+000324d0: 7374 2869 6e70 735b 305d 2e76 616c 7565  st(inps[0].value
+000324e0: 7328 2929 0a20 2020 2020 2020 2065 6c69  s()).        eli
+000324f0: 6620 6f70 7473 2e67 6574 2827 616c 6c27  f opts.get('all'
+00032500: 2c6f 7074 732e 6765 7428 2777 686f 6c65  ,opts.get('whole
+00032510: 272c 6f70 7473 2e67 6574 2827 6974 656d  ',opts.get('item
+00032520: 7327 2929 293a 0a20 2020 2020 2020 2020  s'))):.         
+00032530: 2020 2072 743d 6c69 7374 2869 6e70 735b     rt=list(inps[
+00032540: 305d 2e69 7465 6d73 2829 290a 2020 2020  0].items()).    
+00032550: 2020 2020 656c 6966 206f 7074 732e 6765      elif opts.ge
+00032560: 7428 2770 6174 6827 293a 0a20 2020 2020  t('path'):.     
+00032570: 2020 2020 2020 2074 6d70 3d5b 5d0a 2020         tmp=[].  
+00032580: 2020 2020 2020 2020 2020 666f 7220 6b20            for k 
+00032590: 696e 2069 6e70 735b 305d 3a0a 2020 2020  in inps[0]:.    
+000325a0: 2020 2020 2020 2020 2020 2020 6966 2054              if T
+000325b0: 7970 6528 696e 7073 5b30 5d5b 6b5d 2c64  ype(inps[0][k],d
+000325c0: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
+000325d0: 2020 2020 2020 2020 2020 666f 7220 6420            for d 
+000325e0: 696e 2044 4428 696e 7073 5b30 5d5b 6b5d  in DD(inps[0][k]
+000325f0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00032600: 2020 2020 2020 2020 2020 2074 6d70 2e61             tmp.a
+00032610: 7070 656e 6428 2827 2f27 2b6b 2b27 2f27  ppend(('/'+k+'/'
+00032620: 2b64 5b30 5d2c 645b 315d 2929 0a20 2020  +d[0],d[1])).   
+00032630: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00032640: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00032650: 2020 2020 2020 2074 6d70 2e61 7070 656e         tmp.appen
+00032660: 6428 2827 2f27 2b6b 2c69 6e70 735b 305d  d(('/'+k,inps[0]
+00032670: 5b6b 5d29 290a 2020 2020 2020 2020 2020  [k])).          
+00032680: 2020 7274 3d72 742b 746d 700a 2020 2020    rt=rt+tmp.    
+00032690: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000326a0: 2020 2020 2020 7274 3d6c 6973 7428 696e        rt=list(in
+000326b0: 7073 5b30 5d29 0a20 2020 2065 6c73 653a  ps[0]).    else:
+000326c0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+000326d0: 7374 616e 6365 2869 676e 6f72 6573 2c74  stance(ignores,t
+000326e0: 7570 6c65 2920 616e 6420 2854 7970 6528  uple) and (Type(
+000326f0: 696e 7073 5b30 5d2c 6967 6e6f 7265 7329  inps[0],ignores)
+00032700: 206f 7220 4973 496e 2869 6e70 735b 305d   or IsIn(inps[0]
+00032710: 2c69 676e 6f72 6573 2929 3a0a 2020 2020  ,ignores)):.    
+00032720: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
+00032730: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00032740: 2020 2020 2020 2072 743d 5b69 6e70 735b         rt=[inps[
+00032750: 305d 5d0a 2020 2020 666f 7220 6920 696e  0]].    for i in
+00032760: 2069 6e70 735b 313a 5d3a 0a20 2020 2020   inps[1:]:.     
+00032770: 2020 2069 6620 5479 7065 2869 2c6c 6973     if Type(i,lis
+00032780: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00032790: 7274 3d72 742b 690a 2020 2020 2020 2020  rt=rt+i.        
+000327a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000327b0: 2020 6966 2054 7970 6528 692c 7475 706c    if Type(i,tupl
+000327c0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+000327d0: 2020 2020 6966 2074 7570 6c65 326c 6973      if tuple2lis
+000327e0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+000327f0: 2020 2020 2020 2072 743d 7274 2b6c 6973         rt=rt+lis
+00032800: 7428 6929 0a20 2020 2020 2020 2020 2020  t(i).           
+00032810: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00032820: 650a 2020 2020 2020 2020 2020 2020 656c  e.            el
+00032830: 6966 2054 7970 6528 692c 6469 6374 293a  if Type(i,dict):
+00032840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032850: 2072 743d 7274 2b4c 6973 7428 7274 2c69   rt=rt+List(rt,i
+00032860: 2c2a 2a6f 7074 7329 0a20 2020 2020 2020  ,**opts).       
+00032870: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00032880: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00032890: 2069 7369 6e73 7461 6e63 6528 6967 6e6f   isinstance(igno
+000328a0: 7265 732c 7475 706c 6529 2061 6e64 2028  res,tuple) and (
+000328b0: 5479 7065 2869 2c69 676e 6f72 6573 2920  Type(i,ignores) 
+000328c0: 6f72 2049 7349 6e28 692c 6967 6e6f 7265  or IsIn(i,ignore
+000328d0: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
+000328e0: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
+000328f0: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
+00032900: 656e 6428 6929 0a20 2020 2069 6620 6f70  end(i).    if op
+00032910: 7473 2e67 6574 2827 7374 7269 7027 293a  ts.get('strip'):
+00032920: 0a20 2020 2020 2020 2072 743d 5b69 2e73  .        rt=[i.s
+00032930: 7472 6970 2829 2069 6620 6973 696e 7374  trip() if isinst
+00032940: 616e 6365 2869 2c28 7374 722c 6279 7465  ance(i,(str,byte
+00032950: 7329 2920 656c 7365 2069 2066 6f72 2069  s)) else i for i
+00032960: 2069 6e20 7274 5d0a 2020 2020 6966 206f   in rt].    if o
+00032970: 7074 732e 6765 7428 2775 6e69 7127 293a  pts.get('uniq'):
+00032980: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00032990: 556e 6971 2872 7429 0a20 2020 2069 6478  Uniq(rt).    idx
+000329a0: 3d6f 7074 732e 6765 7428 2769 6478 2729  =opts.get('idx')
+000329b0: 0a20 2020 2069 6620 6e6f 7420 4973 4e6f  .    if not IsNo
+000329c0: 6e65 2869 6478 293a 0a20 2020 2020 2020  ne(idx):.       
+000329d0: 206f 6b2c 6964 783d 496e 6465 7846 6f72   ok,idx=IndexFor
+000329e0: 6d28 6964 782c 6964 785f 6f6e 6c79 3d54  m(idx,idx_only=T
+000329f0: 7275 652c 7379 6d62 6f6c 3d27 2c27 290a  rue,symbol=',').
+00032a00: 2020 2020 2020 2020 6966 206f 6b20 6973          if ok is
+00032a10: 2046 616c 7365 3a20 7265 7475 726e 206f   False: return o
+00032a20: 7074 732e 6765 7428 2764 6566 6175 6c74  pts.get('default
+00032a30: 272c 4661 6c73 6529 0a20 2020 2020 2020  ',False).       
+00032a40: 2069 6620 6973 696e 7374 616e 6365 2869   if isinstance(i
+00032a50: 6478 2c74 7570 6c65 2920 616e 6420 6c65  dx,tuple) and le
+00032a60: 6e28 6964 7829 203d 3d20 323a 0a20 2020  n(idx) == 2:.   
+00032a70: 2020 2020 2020 2020 2069 6478 3d72 616e           idx=ran
+00032a80: 6765 2869 6478 5b30 5d2c 6964 785b 315d  ge(idx[0],idx[1]
+00032a90: 2b31 290a 2020 2020 2020 2020 6966 206e  +1).        if n
+00032aa0: 6f74 2054 7970 6528 6964 782c 286c 6973  ot Type(idx,(lis
+00032ab0: 742c 7475 706c 652c 2772 616e 6765 2729  t,tuple,'range')
+00032ac0: 293a 2069 6478 3d5b 6964 785d 0a20 2020  ): idx=[idx].   
+00032ad0: 2020 2020 2074 743d 5b5d 0a20 2020 2020       tt=[].     
+00032ae0: 2020 2066 6f72 2069 2069 6e20 6964 783a     for i in idx:
+00032af0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00032b00: 6d6f 6465 203d 3d20 2761 7574 6f27 3a0a  mode == 'auto':.
+00032b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032b20: 693d 4669 7849 6e64 6578 2872 742c 692c  i=FixIndex(rt,i,
+00032b30: 6465 6661 756c 743d 4661 6c73 652c 6572  default=False,er
+00032b40: 723d 4661 6c73 6529 0a20 2020 2020 2020  r=False).       
+00032b50: 2020 2020 2065 6c69 6620 6d6f 6465 2069       elif mode i
+00032b60: 6e20 5b27 6572 7227 2c27 6967 6e6f 7265  n ['err','ignore
+00032b70: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00032b80: 2020 2020 693d 4669 7849 6e64 6578 2872      i=FixIndex(r
+00032b90: 742c 692c 6465 6661 756c 743d 4661 6c73  t,i,default=Fals
+00032ba0: 652c 6572 723d 5472 7565 290a 2020 2020  e,err=True).    
+00032bb0: 2020 2020 2020 2020 6966 2069 2069 7320          if i is 
+00032bc0: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
+00032bd0: 2020 2020 2020 2069 6620 6d6f 6465 203d         if mode =
+00032be0: 3d20 2765 7272 273a 2072 6574 7572 6e20  = 'err': return 
+00032bf0: 6f70 7473 2e67 6574 2827 6465 6661 756c  opts.get('defaul
+00032c00: 7427 2c46 616c 7365 290a 2020 2020 2020  t',False).      
+00032c10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00032c20: 2020 2020 2020 2020 2020 2020 7474 2e61              tt.a
+00032c30: 7070 656e 6428 7274 5b69 5d29 0a20 2020  ppend(rt[i]).   
+00032c40: 2020 2020 2072 6574 7572 6e20 7474 0a20       return tt. 
+00032c50: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
+00032c60: 286f 7074 732e 6765 7428 2772 6d27 2929  (opts.get('rm'))
+00032c70: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00032c80: 2072 6d28 7274 2c2a 6f70 7473 2e67 6574   rm(rt,*opts.get
+00032c90: 2827 726d 2729 2069 6620 5479 7065 286f  ('rm') if Type(o
+00032ca0: 7074 732e 6765 7428 2772 6d27 292c 286c  pts.get('rm'),(l
+00032cb0: 6973 742c 7475 706c 6529 2920 656c 7365  ist,tuple)) else
+00032cc0: 206f 7074 732e 6765 7428 2772 6d27 2929   opts.get('rm'))
+00032cd0: 0a20 2020 2066 6972 7374 3d6f 7074 732e  .    first=opts.
+00032ce0: 6765 7428 2766 6972 7374 2729 0a20 2020  get('first').   
+00032cf0: 2069 6620 6e6f 7420 4973 4e6f 6e65 2866   if not IsNone(f
+00032d00: 6972 7374 2920 616e 6420 6669 7273 7420  irst) and first 
+00032d10: 696e 2072 743a 0a20 2020 2020 2020 2072  in rt:.        r
+00032d20: 6574 7572 6e20 5b66 6972 7374 5d2b 5b69  eturn [first]+[i
+00032d30: 2066 6f72 2069 2069 6e20 7274 2069 6620   for i in rt if 
+00032d40: 6920 213d 2066 6972 7374 5d0a 2020 2020  i != first].    
+00032d50: 656e 643d 6f70 7473 2e67 6574 2827 656e  end=opts.get('en
+00032d60: 6427 290a 2020 2020 6966 206e 6f74 2049  d').    if not I
+00032d70: 734e 6f6e 6528 656e 6429 2061 6e64 2065  sNone(end) and e
+00032d80: 6e64 2069 6e20 7274 3a0a 2020 2020 2020  nd in rt:.      
+00032d90: 2020 7265 7475 726e 205b 6920 666f 7220    return [i for 
+00032da0: 6920 696e 2072 7420 6966 2069 2021 3d20  i in rt if i != 
+00032db0: 656e 645d 2b5b 656e 645d 0a20 2020 2066  end]+[end].    f
+00032dc0: 696e 643d 6f70 7473 2e67 6574 2827 6669  ind=opts.get('fi
+00032dd0: 6e64 2729 0a20 2020 2069 6620 6e6f 7420  nd').    if not 
+00032de0: 4973 4e6f 6e65 2866 696e 6429 3a0a 2020  IsNone(find):.  
+00032df0: 2020 2020 2020 6966 206e 6f74 2054 7970        if not Typ
+00032e00: 6528 6669 6e64 2c28 6c69 7374 2c74 7570  e(find,(list,tup
+00032e10: 6c65 2929 3a20 6669 6e64 3d5b 6669 6e64  le)): find=[find
+00032e20: 5d0a 2020 2020 2020 2020 7474 3d5b 5d0a  ].        tt=[].
+00032e30: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+00032e40: 2066 696e 643a 0a20 2020 2020 2020 2020   find:.         
+00032e50: 2020 2066 6f72 207a 2069 6e20 7261 6e67     for z in rang
+00032e60: 6528 302c 6c65 6e28 7274 2929 3a0a 2020  e(0,len(rt)):.  
+00032e70: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00032e80: 2054 7970 6528 692c 2827 7374 7227 2c27   Type(i,('str','
+00032e90: 6279 7465 7327 2929 3a0a 2020 2020 2020  bytes')):.      
+00032ea0: 2020 2020 2020 2020 2020 2020 2020 6a3d                j=
+00032eb0: 692e 7265 706c 6163 6528 272a 272c 272e  i.replace('*','.
+00032ec0: 2b27 292e 7265 706c 6163 6528 273f 272c  +').replace('?',
+00032ed0: 272e 2729 0a20 2020 2020 2020 2020 2020  '.').           
+00032ee0: 2020 2020 2020 2020 206d 6d3d 7265 2e63           mm=re.c
+00032ef0: 6f6d 7069 6c65 286a 290a 2020 2020 2020  ompile(j).      
+00032f00: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00032f10: 2062 6f6f 6c28 7265 2e6d 6174 6368 286d   bool(re.match(m
+00032f20: 6d2c 7274 5b7a 5d29 293a 0a20 2020 2020  m,rt[z])):.     
+00032f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032f40: 2020 2074 742e 6170 7065 6e64 287a 290a     tt.append(z).
+00032f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032f60: 656c 6966 2072 745b 7a5d 203d 3d20 693a  elif rt[z] == i:
+00032f70: 2074 742e 6170 7065 6e64 287a 290a 2020   tt.append(z).  
+00032f80: 2020 2020 2020 7265 7475 726e 2074 740a        return tt.
+00032f90: 2020 2020 7265 7475 726e 2072 740a 0a64      return rt..d
+00032fa0: 6566 2052 6570 6c61 6365 2873 7263 2c72  ef Replace(src,r
+00032fb0: 6570 6c61 6365 5f77 6861 742c 7265 706c  eplace_what,repl
+00032fc0: 6163 655f 746f 2c64 6566 6175 6c74 3d4e  ace_to,default=N
+00032fd0: 6f6e 652c 6e65 776c 696e 653d 275c 6e27  one,newline='\n'
+00032fe0: 293a 0a20 2020 2027 2727 0a20 2020 2072  ):.    '''.    r
+00032ff0: 6570 6c61 6365 2073 7472 696e 6720 2873  eplace string (s
+00033000: 7263 2c20 6672 6f6d 2c20 746f 290a 2020  rc, from, to).  
+00033010: 2020 6966 206e 6f74 2073 7472 696e 6720    if not string 
+00033020: 7468 656e 2072 6574 7572 6e20 6465 6661  then return defa
+00033030: 756c 740a 2020 2020 6465 6661 756c 743a  ult.    default:
+00033040: 2072 6574 7572 6e20 6465 6669 6e65 6420   return defined 
+00033050: 7661 6c75 6520 7768 656e 206e 6f74 2073  value when not s
+00033060: 7472 696e 670a 2020 2020 2020 276f 7267  tring.      'org
+00033070: 273a 2072 6574 7572 6e20 7372 630a 2020  ': return src.  
+00033080: 2020 2020 2e2e 2e20 203a 2072 6574 7572      ...  : retur
+00033090: 6e20 6465 6669 6e65 6420 6465 6661 756c  n defined defaul
+000330a0: 740a 2020 2020 2727 270a 2020 2020 6465  t.    '''.    de
+000330b0: 6620 5f53 5f28 7372 632c 7029 3a0a 2020  f _S_(src,p):.  
+000330c0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000330d0: 6e63 6528 702c 6c69 7374 293a 0a20 2020  nce(p,list):.   
+000330e0: 2020 2020 2020 2020 2074 3d5b 5d0a 2020           t=[].  
+000330f0: 2020 2020 2020 2020 2020 6d3d 6c65 6e28            m=len(
+00033100: 7029 2d31 0a20 2020 2020 2020 2020 2020  p)-1.           
+00033110: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00033120: 302c 6d2b 3129 3a0a 2020 2020 2020 2020  0,m+1):.        
+00033130: 2020 2020 2020 2020 6966 2069 203d 3d20          if i == 
+00033140: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00033150: 2020 2020 2020 2074 2e61 7070 656e 6428         t.append(
+00033160: 7372 635b 3a70 5b69 5d5b 305d 5d29 0a20  src[:p[i][0]]). 
+00033170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033180: 2020 2069 6620 693d 3d6d 3a0a 2020 2020     if i==m:.    
+00033190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000331a0: 2020 2020 742e 6170 7065 6e64 2873 7263      t.append(src
+000331b0: 5b70 5b69 5d5b 315d 3a5d 290a 2020 2020  [p[i][1]:]).    
+000331c0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000331d0: 2069 203c 206d 3a0a 2020 2020 2020 2020   i < m:.        
+000331e0: 2020 2020 2020 2020 2020 2020 742e 6170              t.ap
+000331f0: 7065 6e64 2873 7263 5b70 5b69 2d31 5d5b  pend(src[p[i-1][
+00033200: 315d 3a70 5b69 5d5b 305d 5d29 0a20 2020  1]:p[i][0]]).   
+00033210: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00033220: 6620 6920 3d3d 206d 3a0a 2020 2020 2020  f i == m:.      
+00033230: 2020 2020 2020 2020 2020 2020 2020 742e                t.
+00033240: 6170 7065 6e64 2873 7263 5b70 5b69 2d31  append(src[p[i-1
+00033250: 5d5b 315d 3a70 5b69 5d5b 305d 5d29 0a20  ][1]:p[i][0]]). 
+00033260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033270: 2020 2074 2e61 7070 656e 6428 7372 635b     t.append(src[
+00033280: 705b 695d 5b31 5d3a 5d29 0a20 2020 2020  p[i][1]:]).     
+00033290: 2020 2020 2020 2072 6574 7572 6e20 740a         return t.
+000332a0: 0a20 2020 2069 6620 6e6f 7420 5479 7065  .    if not Type
+000332b0: 2873 7263 2c28 2773 7472 272c 2762 7974  (src,('str','byt
+000332c0: 6573 2729 293a 0a20 2020 2020 2020 2072  es')):.        r
+000332d0: 6574 7572 6e20 4465 6661 756c 7428 7372  eturn Default(sr
+000332e0: 632c 6465 6661 756c 7429 0a20 2020 2069  c,default).    i
+000332f0: 6620 5479 7065 2873 7263 2c27 6279 7465  f Type(src,'byte
+00033300: 7327 293a 0a20 2020 2020 2020 2072 6570  s'):.        rep
+00033310: 6c61 6365 5f77 6861 743d 4279 7465 7328  lace_what=Bytes(
+00033320: 7265 706c 6163 655f 7768 6174 290a 2020  replace_what).  
+00033330: 2020 2020 2020 7265 706c 6163 655f 746f        replace_to
+00033340: 3d42 7974 6573 2872 6570 6c61 6365 5f74  =Bytes(replace_t
+00033350: 6f29 0a20 2020 2020 2020 206e 6577 6c69  o).        newli
+00033360: 6e65 3d42 7974 6573 286e 6577 6c69 6e65  ne=Bytes(newline
+00033370: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+00033380: 2020 2020 7265 706c 6163 655f 7768 6174      replace_what
+00033390: 3d53 7472 2872 6570 6c61 6365 5f77 6861  =Str(replace_wha
+000333a0: 7429 0a20 2020 2020 2020 2072 6570 6c61  t).        repla
+000333b0: 6365 5f74 6f3d 5374 7228 7265 706c 6163  ce_to=Str(replac
+000333c0: 655f 746f 290a 2020 2020 2020 2020 6e65  e_to).        ne
+000333d0: 776c 696e 653d 5374 7228 6e65 776c 696e  wline=Str(newlin
+000333e0: 6529 0a20 2020 2074 6d70 3d5b 5d0a 2020  e).    tmp=[].  
+000333f0: 2020 666f 7220 6969 2069 6e20 7372 632e    for ii in src.
+00033400: 7370 6c69 7428 6e65 776c 696e 6529 3a0a  split(newline):.
+00033410: 2020 2020 2020 2020 7474 3d5f 535f 2869          tt=_S_(i
+00033420: 692c 466f 756e 6428 6969 2c72 6570 6c61  i,Found(ii,repla
+00033430: 6365 5f77 6861 742c 6c6f 6361 7469 6f6e  ce_what,location
+00033440: 3d54 7275 6529 290a 2020 2020 2020 2020  =True)).        
+00033450: 746d 702e 6170 7065 6e64 284a 6f69 6e28  tmp.append(Join(
+00033460: 7474 2c72 6570 6c61 6365 5f74 6f29 2069  tt,replace_to) i
+00033470: 6620 7474 2065 6c73 6520 6969 290a 2020  f tt else ii).  
+00033480: 2020 7265 7475 726e 204a 6f69 6e28 746d    return Join(tm
+00033490: 702c 6e65 776c 696e 6529 0a0a 6465 6620  p,newline)..def 
+000334a0: 6b72 6328 7274 3d4e 6f6e 652c 6368 6b3d  krc(rt=None,chk=
+000334b0: 275f 272c 7274 643d 4e6f 6e65 2c64 6566  '_',rtd=None,def
+000334c0: 6175 6c74 3d46 616c 7365 2c6d 6f64 653d  ault=False,mode=
+000334d0: 4e6f 6e65 2c65 7874 3d27 7368 656c 6c27  None,ext='shell'
+000334e0: 293a 0a20 2020 2067 6c6f 6261 6c20 6b72  ):.    global kr
+000334f0: 635f 6465 6669 6e65 0a20 2020 206e 7274  c_define.    nrt
+00033500: 643d 436f 7079 286b 7263 5f64 6566 696e  d=Copy(krc_defin
+00033510: 652c 6465 6570 3d54 7275 6529 2069 6620  e,deep=True) if 
+00033520: 7274 6420 6973 204e 6f6e 6520 656c 7365  rtd is None else
+00033530: 2043 6f70 7928 7274 642c 6465 6570 3d54   Copy(rtd,deep=T
+00033540: 7275 6529 0a20 2020 2069 6620 6578 7420  rue).    if ext 
+00033550: 3d3d 2027 7368 656c 6c27 3a20 2320 7079  == 'shell': # py
+00033560: 7468 6f6e 0a20 2020 2020 2020 2069 6620  thon.        if 
+00033570: 6e6f 7420 4973 496e 2830 2c6e 7274 645b  not IsIn(0,nrtd[
+00033580: 2747 4f4f 4427 5d29 3a20 6e72 7464 5b27  'GOOD']): nrtd['
+00033590: 474f 4f44 275d 2e61 7070 656e 6428 3029  GOOD'].append(0)
+000335a0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+000335b0: 4973 496e 2831 2c6e 7274 645b 2745 5252  IsIn(1,nrtd['ERR
+000335c0: 4f27 5d29 3a20 6e72 7464 5b27 4552 524f  O']): nrtd['ERRO
+000335d0: 275d 3d6e 7274 645b 2745 5252 4f27 5d2b  ']=nrtd['ERRO']+
+000335e0: 5b31 2c31 3236 2c31 3238 2c31 3330 2c32  [1,126,128,130,2
+000335f0: 3535 5d0a 2020 2020 2020 2020 6966 206e  55].        if n
+00033600: 6f74 2049 7349 6e28 3132 372c 6e72 7464  ot IsIn(127,nrtd
+00033610: 5b27 4e46 4e44 275d 293a 206e 7274 645b  ['NFND']): nrtd[
+00033620: 274e 464e 4427 5d2e 6170 7065 6e64 2831  'NFND'].append(1
+00033630: 3237 290a 2020 2020 656c 6966 2065 7874  27).    elif ext
+00033640: 203d 3d20 2770 7974 686f 6e27 3a20 2320   == 'python': # 
+00033650: 7079 7468 6f6e 0a20 2020 2020 2020 2069  python.        i
+00033660: 6620 6e6f 7420 4973 496e 2831 2c6e 7274  f not IsIn(1,nrt
+00033670: 645b 2747 4f4f 4427 5d29 3a20 6e72 7464  d['GOOD']): nrtd
+00033680: 5b27 474f 4f44 275d 2e61 7070 656e 6428  ['GOOD'].append(
+00033690: 3129 2320 5079 7468 6f6e 2773 2054 7275  1)# Python's Tru
+000336a0: 6520 6c65 7665 6c0a 2020 2020 2020 2020  e level.        
+000336b0: 6966 206e 6f74 2049 7349 6e28 302c 6e72  if not IsIn(0,nr
+000336c0: 7464 5b27 4641 494c 275d 293a 206e 7274  td['FAIL']): nrt
+000336d0: 645b 2746 4149 4c27 5d2e 6170 7065 6e64  d['FAIL'].append
+000336e0: 2830 2923 2050 7974 686f 6e27 7320 4661  (0)# Python's Fa
+000336f0: 6c73 6520 6c65 7665 6c0a 2020 2020 2727  lse level.    ''
+00033700: 270a 2020 2020 5368 656c 6c20 6578 6974  '.    Shell exit
+00033710: 2063 6f64 653a 0a20 2020 2020 2031 2020   code:.      1  
+00033720: 202d 2043 6174 6368 616c 6c20 666f 7220   - Catchall for 
+00033730: 6765 6e65 7261 6c20 6572 726f 7273 0a20  general errors. 
+00033740: 2020 2020 2032 2020 202d 204d 6973 7573       2   - Misus
+00033750: 6520 6f66 2073 6865 6c6c 2062 7569 6c74  e of shell built
+00033760: 696e 7320 2861 6363 6f72 6469 6e67 2074  ins (according t
+00033770: 6f20 4261 7368 2064 6f63 756d 656e 7461  o Bash documenta
+00033780: 7469 6f6e 290a 2020 2020 3132 3620 2020  tion).    126   
+00033790: 2d20 436f 6d6d 616e 6420 696e 766f 6b65  - Command invoke
+000337a0: 6420 6361 6e6e 6f74 2065 7865 6375 7465  d cannot execute
+000337b0: 0a20 2020 2031 3237 2020 202d 20e2 809c  .    127   - ...
+000337c0: 636f 6d6d 616e 6420 6e6f 7420 666f 756e  command not foun
+000337d0: 64e2 809d 0a20 2020 2031 3238 2020 202d  d....    128   -
+000337e0: 2049 6e76 616c 6964 2061 7267 756d 656e   Invalid argumen
+000337f0: 7420 746f 2065 7869 740a 2020 2020 3132  t to exit.    12
+00033800: 382b 6e20 2d20 4661 7461 6c20 6572 726f  8+n - Fatal erro
+00033810: 7220 7369 676e 616c 20e2 809c 6ee2 809d  r signal ...n...
+00033820: 0a20 2020 2031 3330 2020 202d 2053 6372  .    130   - Scr
+00033830: 6970 7420 7465 726d 696e 6174 6564 2062  ipt terminated b
+00033840: 7920 436f 6e74 726f 6c2d 430a 2020 2020  y Control-C.    
+00033850: 3235 355c 2a20 2d20 4578 6974 2073 7461  255\* - Exit sta
+00033860: 7475 7320 6f75 7420 6f66 2072 616e 6765  tus out of range
+00033870: 0a20 2020 2027 2727 0a20 2020 2069 6620  .    '''.    if 
+00033880: 6d6f 6465 203d 3d20 2767 6574 273a 0a20  mode == 'get':. 
+00033890: 2020 2020 2020 2072 6574 7572 6e20 6e72         return nr
+000338a0: 7464 0a20 2020 2065 6c69 6620 6d6f 6465  td.    elif mode
+000338b0: 203d 3d20 276b 6579 7327 3a0a 2020 2020   == 'keys':.    
+000338c0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+000338d0: 6528 6e72 7464 2c64 6963 7429 3a0a 2020  e(nrtd,dict):.  
+000338e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000338f0: 206e 7274 642e 6b65 7973 2829 0a20 2020   nrtd.keys().   
+00033900: 2064 6566 2074 7261 6e73 2869 7274 293a   def trans(irt):
+00033910: 0a20 2020 2020 2020 2074 7970 655f 6972  .        type_ir
+00033920: 743d 7479 7065 2869 7274 290a 2020 2020  t=type(irt).    
+00033930: 2020 2020 666f 7220 6969 2069 6e20 6e72      for ii in nr
+00033940: 7464 3a0a 2020 2020 2020 2020 2020 2020  td:.            
+00033950: 666f 7220 6a6a 2069 6e20 6e72 7464 5b69  for jj in nrtd[i
+00033960: 695d 3a0a 2020 2020 2020 2020 2020 2020  i]:.            
+00033970: 2020 2020 6966 2074 7970 6528 6a6a 2920      if type(jj) 
+00033980: 3d3d 2074 7970 655f 6972 7420 616e 6420  == type_irt and 
+00033990: 2828 7479 7065 5f69 7274 2069 7320 7374  ((type_irt is st
+000339a0: 7220 616e 6420 6a6a 2e6c 6f77 6572 2829  r and jj.lower()
+000339b0: 203d 3d20 6972 742e 6c6f 7765 7228 2929   == irt.lower())
+000339c0: 206f 7220 6a6a 203d 3d20 6972 7429 3a0a   or jj == irt):.
+000339d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000339e0: 2020 2020 7265 7475 726e 2069 690a 2020      return ii.  
+000339f0: 2020 2020 2020 7265 7475 726e 2027 554e        return 'UN
+00033a00: 4b4e 270a 2020 2020 7274 633d 4765 7428  KN'.    rtc=Get(
+00033a10: 7274 2c27 307c 7263 272c 6572 723d 5472  rt,'0|rc',err=Tr
+00033a20: 7565 2c64 6566 6175 6c74 3d27 6f72 6727  ue,default='org'
+00033a30: 2c74 7970 653d 2862 6f6f 6c2c 696e 742c  ,type=(bool,int,
+00033a40: 6c69 7374 2c74 7570 6c65 2c64 6963 7429  list,tuple,dict)
+00033a50: 290a 2020 2020 6e72 7463 3d74 7261 6e73  ).    nrtc=trans
+00033a60: 2850 6565 6c28 7274 632c 6572 723d 4661  (Peel(rtc,err=Fa
+00033a70: 6c73 652c 6465 6661 756c 743d 2775 6e6b  lse,default='unk
+00033a80: 6e6f 776e 2729 2920 2349 6620 4765 7428  nown')) #If Get(
+00033a90: 2920 676f 7420 6d75 6c74 6920 6461 7461  ) got multi data
+00033aa0: 2074 6865 6e20 7573 6520 6669 7273 7420   then use first 
+00033ab0: 6461 7461 0a20 2020 2069 6620 6368 6b20  data.    if chk 
+00033ac0: 213d 2027 5f27 3a0a 2020 2020 2020 2020  != '_':.        
+00033ad0: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+00033ae0: 6528 6368 6b2c 6c69 7374 293a 2063 686b  e(chk,list): chk
+00033af0: 3d5b 6368 6b5d 0a20 2020 2020 2020 2066  =[chk].        f
+00033b00: 6f72 2063 6320 696e 2063 686b 3a0a 2020  or cc in chk:.  
+00033b10: 2020 2020 2020 2020 2020 6966 2074 7261            if tra
+00033b20: 6e73 2863 6329 203d 3d20 6e72 7463 3a0a  ns(cc) == nrtc:.
+00033b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033b40: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+00033b50: 2020 2020 2020 2020 6966 206e 7274 6320          if nrtc 
+00033b60: 3d3d 2027 554e 4b4e 2720 616e 6420 6465  == 'UNKN' and de
+00033b70: 6661 756c 7420 3d3d 2027 6f72 6727 3a0a  fault == 'org':.
+00033b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033b90: 7265 7475 726e 2072 7463 0a20 2020 2020  return rtc.     
+00033ba0: 2020 2072 6574 7572 6e20 4465 6661 756c     return Defaul
+00033bb0: 7428 7274 2c64 6566 6175 6c74 290a 2020  t(rt,default).  
+00033bc0: 2020 7265 7475 726e 206e 7274 630a 0a64    return nrtc..d
+00033bd0: 6566 204f 7574 466f 726d 6174 2864 6174  ef OutFormat(dat
+00033be0: 612c 6f75 743d 4e6f 6e65 2c73 7472 6970  a,out=None,strip
+00033bf0: 3d46 616c 7365 2c70 6565 6c3d 4e6f 6e65  =False,peel=None
+00033c00: 2c6f 7267 3d4e 6f6e 652c 6465 6661 756c  ,org=None,defaul
+00033c10: 743d 4e6f 6e65 293a 0a20 2020 2027 2727  t=None):.    '''
+00033c20: 0a20 2020 204f 7574 7075 7420 466f 726d  .    Output Form
+00033c30: 6174 206d 616b 6572 0a20 2020 203c 6f70  at maker.    <op
+00033c40: 7469 6f6e 3e0a 2020 2020 2020 6f75 740a  tion>.      out.
+00033c50: 2020 2020 2020 2020 4e6f 6e65 3a20 4e6f          None: No
+00033c60: 7420 636f 6e76 6572 740a 2020 2020 2020  t convert.      
+00033c70: 2020 7374 722c 696e 742c 6c69 7374 2c64    str,int,list,d
+00033c80: 6963 7420 3a20 636f 6e76 6572 7420 6461  ict : convert da
+00033c90: 7461 2074 6f20 7761 6e74 2066 6f72 6d61  ta to want forma
+00033ca0: 740a 2020 2020 2020 2020 7261 7720 3a20  t.        raw : 
+00033cb0: 5065 656c 6564 2064 6174 6120 7768 656e  Peeled data when
+00033cc0: 2073 696e 676c 6520 6461 7461 285b 2761   single data(['a
+00033cd0: 275d 2c28 2761 2729 2c7b 2761 273a 2761  '],('a'),{'a':'a
+00033ce0: 6263 277d 2920 6f74 6865 7273 2074 6865  bc'}) others the
+00033cf0: 6e20 7265 7475 726e 206f 7269 676e 616c  n return orignal
+00033d00: 0a20 2020 2020 2070 6565 6c0a 2020 2020  .      peel.    
+00033d10: 2020 2020 4e6f 6e65 203a 2061 7574 6f6d      None : autom
+00033d20: 6174 6963 616c 6c79 2077 6f72 6b69 6e67  atically working
+00033d30: 2061 6363 6f72 6469 6e67 2074 6f20 6f75   according to ou
+00033d40: 740a 2020 2020 2020 2020 5472 7565 203a  t.        True :
+00033d50: 2050 6565 6c69 6e67 2064 6174 610a 2020   Peeling data.  
+00033d60: 2020 2020 2020 4661 6c73 653a 204e 6f74        False: Not
+00033d70: 2050 6565 6c69 6e67 0a20 2020 2020 2073   Peeling.      s
+00033d80: 7472 6970 200a 2020 2020 2020 2020 4661  trip .        Fa
+00033d90: 6c73 653a 206e 6f74 2072 656d 6f76 6520  lse: not remove 
+00033da0: 7768 6974 6520 7370 6163 650a 2020 2020  white space.    
+00033db0: 2020 2020 5472 7565 203a 2072 656d 6f76      True : remov
+00033dc0: 6520 7768 6974 6520 7370 6163 650a 2020  e white space.  
+00033dd0: 2020 2727 270a 2020 2020 6f75 745f 6461    '''.    out_da
+00033de0: 7461 3d4e 6f6e 650a 2020 2020 6966 2049  ta=None.    if I
+00033df0: 7349 6e28 6461 7461 2c5b 5b5d 2c7b 7d5d  sIn(data,[[],{}]
+00033e00: 2920 616e 6420 4973 496e 2864 6566 6175  ) and IsIn(defau
+00033e10: 6c74 2c5b 276f 7267 272c 276f 7269 6769  lt,['org','origi
+00033e20: 6e61 6c27 5d29 3a0a 2020 2020 2020 2020  nal']):.        
+00033e30: 2349 6620 6e6f 2064 6174 6120 616e 6420  #If no data and 
+00033e40: 6465 6661 756c 7420 6973 206f 7269 6769  default is origi
+00033e50: 6e61 6c20 7468 656e 2063 6f6e 7665 7274  nal then convert
+00033e60: 206f 7269 6769 6e61 6c20 746f 206f 7574   original to out
+00033e70: 0a20 2020 2020 2020 2064 6174 613d 6f72  .        data=or
+00033e80: 670a 2020 2020 6966 2049 7349 6e28 6f75  g.    if IsIn(ou
+00033e90: 742c 5b74 7570 6c65 2c27 7475 706c 6527  t,[tuple,'tuple'
+00033ea0: 2c6c 6973 742c 276c 6973 7427 5d29 3a0a  ,list,'list']):.
+00033eb0: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+00033ec0: 7369 6e73 7461 6e63 6528 6461 7461 2c28  sinstance(data,(
+00033ed0: 7475 706c 652c 6c69 7374 2929 3a0a 2020  tuple,list)):.  
+00033ee0: 2020 2020 2020 2020 2020 6f75 745f 6461            out_da
+00033ef0: 7461 3d5b 6461 7461 5d0a 2020 2020 2020  ta=[data].      
+00033f00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00033f10: 2020 2020 6f75 745f 6461 7461 3d6c 6973      out_data=lis
+00033f20: 7428 6461 7461 290a 2020 2020 2020 2020  t(data).        
+00033f30: 6966 206f 7574 2069 6e20 5b74 7570 6c65  if out in [tuple
+00033f40: 2c27 7475 706c 6527 5d3a 0a20 2020 2020  ,'tuple']:.     
+00033f50: 2020 2020 2020 2069 6620 6f75 745f 6461         if out_da
+00033f60: 7461 3a0a 2020 2020 2020 2020 2020 2020  ta:.            
+00033f70: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
+00033f80: 286f 7574 5f64 6174 6129 0a20 2020 2020  (out_data).     
+00033f90: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+00033fa0: 7374 616e 6365 2864 6566 6175 6c74 2c74  stance(default,t
+00033fb0: 7570 6c65 293a 0a20 2020 2020 2020 2020  uple):.         
+00033fc0: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00033fd0: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
+00033fe0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00033ff0: 2020 2020 2020 2020 7265 7475 726e 2028          return (
+00034000: 4465 6661 756c 7428 6f72 672c 6465 6661  Default(org,defa
+00034010: 756c 7429 290a 2020 2020 2020 2020 6966  ult)).        if
+00034020: 206f 7574 5f64 6174 613a 0a20 2020 2020   out_data:.     
+00034030: 2020 2020 2020 2072 6574 7572 6e20 6f75         return ou
+00034040: 745f 6461 7461 0a20 2020 2020 2020 2065  t_data.        e
+00034050: 6c69 6620 6973 696e 7374 616e 6365 2864  lif isinstance(d
+00034060: 6566 6175 6c74 2c6c 6973 7429 3a0a 2020  efault,list):.  
+00034070: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00034080: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
+00034090: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000340a0: 2020 2072 6574 7572 6e20 5b44 6566 6175     return [Defau
+000340b0: 6c74 286f 7267 2c64 6566 6175 6c74 295d  lt(org,default)]
+000340c0: 0a20 2020 2065 6c69 6620 4973 496e 286f  .    elif IsIn(o
+000340d0: 7574 2c5b 6469 6374 2c27 6469 6374 275d  ut,[dict,'dict']
+000340e0: 293a 0a20 2020 2020 2020 2069 6620 6461  ):.        if da
+000340f0: 7461 3a0a 2020 2020 2020 2020 2020 2020  ta:.            
+00034100: 7265 7475 726e 2044 6963 7428 6461 7461  return Dict(data
+00034110: 290a 2020 2020 2020 2020 656c 6966 2069  ).        elif i
+00034120: 7369 6e73 7461 6e63 6528 6465 6661 756c  sinstance(defaul
+00034130: 742c 6469 6374 293a 0a20 2020 2020 2020  t,dict):.       
+00034140: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
+00034150: 756c 740a 2020 2020 2020 2020 656c 7365  ult.        else
+00034160: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00034170: 7475 726e 2044 6566 6175 6c74 286f 7267  turn Default(org
+00034180: 2c64 6566 6175 6c74 290a 2020 2020 656c  ,default).    el
+00034190: 6966 2049 7349 6e28 6f75 742c 5b27 7374  if IsIn(out,['st
+000341a0: 7227 2c73 7472 2c27 7374 7269 6e67 272c  r',str,'string',
+000341b0: 2774 6578 7427 5d29 3a0a 2020 2020 2020  'text']):.      
+000341c0: 2020 6f75 745f 6461 7461 3d57 6869 7465    out_data=White
+000341d0: 5374 7269 7028 5065 656c 2853 7472 2864  Strip(Peel(Str(d
+000341e0: 6174 6129 2c70 6565 6c29 2c73 7472 6970  ata),peel),strip
+000341f0: 290a 2020 2020 656c 6966 2049 7349 6e28  ).    elif IsIn(
+00034200: 6f75 742c 5b27 696e 7427 2c69 6e74 2c27  out,['int',int,'
+00034210: 696e 7465 6765 7227 2c27 6e75 6d62 6572  integer','number
+00034220: 272c 276e 756d 6572 6963 275d 293a 0a20  ','numeric']):. 
+00034230: 2020 2020 2020 206f 7574 5f64 6174 613d         out_data=
+00034240: 496e 7428 5768 6974 6553 7472 6970 2850  Int(WhiteStrip(P
+00034250: 6565 6c28 6461 7461 2c70 6565 6c29 2c73  eel(data,peel),s
+00034260: 7472 6970 2929 0a20 2020 2069 6620 6f75  trip)).    if ou
+00034270: 745f 6461 7461 2069 7320 4661 6c73 653a  t_data is False:
+00034280: 2023 6966 2073 7472 206f 7220 696e 7420   #if str or int 
+00034290: 676f 7420 4661 6c73 6520 7468 656e 200a  got False then .
+000342a0: 2020 2020 2020 2020 7265 7475 726e 2044          return D
+000342b0: 6566 6175 6c74 286f 7267 2c64 6566 6175  efault(org,defau
+000342c0: 6c74 290a 2020 2020 6966 2049 734e 6f6e  lt).    if IsNon
+000342d0: 6528 7065 656c 293a 2070 6565 6c3d 5472  e(peel): peel=Tr
+000342e0: 7565 0a20 2020 206f 7574 5f64 6174 613d  ue.    out_data=
+000342f0: 5768 6974 6553 7472 6970 2850 6565 6c28  WhiteStrip(Peel(
+00034300: 6461 7461 2c70 6565 6c29 2c73 7472 6970  data,peel),strip
+00034310: 290a 2020 2020 6966 206f 7574 5f64 6174  ).    if out_dat
+00034320: 613a 2072 6574 7572 6e20 6f75 745f 6461  a: return out_da
+00034330: 7461 0a20 2020 2072 6574 7572 6e20 4465  ta.    return De
+00034340: 6661 756c 7428 6f72 672c 6465 6661 756c  fault(org,defaul
+00034350: 7429 0a0a 6465 6620 4665 6564 4675 6e63  t)..def FeedFunc
+00034360: 286f 626a 2c2a 696e 7073 2c2a 2a6f 7074  (obj,*inps,**opt
+00034370: 7329 3a0a 2020 2020 2727 270a 2020 2020  s):.    '''.    
+00034380: 4175 746f 6d61 7469 6361 6c6c 7920 4665  Automatically Fe
+00034390: 6564 206d 6174 6368 6564 2076 6172 6961  ed matched varia
+000343a0: 626c 6573 2074 6f20 6675 6e63 7469 6f6e  bles to function
+000343b0: 0a20 2020 2046 6565 6446 756e 6328 3c66  .    FeedFunc(<f
+000343c0: 756e 633e 2c3c 6675 6e63 7469 6f6e 2773  unc>,<function's
+000343d0: 2061 7267 756d 656e 7473 3e2c 3c66 756e   arguments>,<fun
+000343e0: 6374 696f 6e27 7320 7661 7269 6162 6c65  ction's variable
+000343f0: 733e 290a 2020 2020 6966 2073 6f6d 6574  s>).    if somet
+00034400: 6869 6e67 2077 726f 6e67 2074 6865 6e20  hing wrong then 
+00034410: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
+00034420: 2069 6620 636f 7272 6563 7420 7468 656e   if correct then
+00034430: 2072 6574 7572 6e20 6f75 7470 7574 206f   return output o
+00034440: 6620 7261 6e20 7468 6520 4675 6e63 7469  f ran the Functi
+00034450: 6f6e 2077 6974 6820 696e 7075 7473 0a20  on with inputs. 
+00034460: 2020 2027 2727 0a20 2020 2069 6620 5479     '''.    if Ty
+00034470: 7065 286f 626a 2c27 7374 7227 2920 616e  pe(obj,'str') an
+00034480: 6420 6e6f 7420 696e 7370 6563 742e 6973  d not inspect.is
+00034490: 636c 6173 7328 6f62 6a29 3a20 2320 666f  class(obj): # fo
+000344a0: 7220 7374 7220 636c 6173 730a 2020 2020  r str class.    
+000344b0: 2020 2020 6d79 6d6f 643d 4d79 4d6f 6475      mymod=MyModu
+000344c0: 6c65 2864 6566 6175 6c74 3d46 616c 7365  le(default=False
+000344d0: 2c70 6172 656e 743d 3129 0a20 2020 2020  ,parent=1).     
+000344e0: 2020 2069 6620 6d79 6d6f 6420 6973 2046     if mymod is F
+000344f0: 616c 7365 3a0a 2020 2020 2020 2020 2020  alse:.          
+00034500: 2020 6d79 6d6f 643d 4d79 4d6f 6475 6c65    mymod=MyModule
+00034510: 2864 6566 6175 6c74 3d46 616c 7365 2c70  (default=False,p
+00034520: 6172 656e 743d 3029 0a20 2020 2020 2020  arent=0).       
+00034530: 2069 6620 6d79 6d6f 6420 6973 2046 616c   if mymod is Fal
+00034540: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00034550: 6d79 6d6f 643d 4d79 4d6f 6475 6c65 2864  mymod=MyModule(d
+00034560: 6566 6175 6c74 3d46 616c 7365 2c70 6172  efault=False,par
+00034570: 656e 743d 2d31 290a 2020 2020 2020 2020  ent=-1).        
+00034580: 6966 2054 7970 6528 6d79 6d6f 642c 276d  if Type(mymod,'m
+00034590: 6f64 756c 6527 293a 0a20 2020 2020 2020  odule'):.       
+000345a0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+000345b0: 2020 2020 2020 2020 2020 6f62 6a3d 6765            obj=ge
+000345c0: 7461 7474 7228 6d79 6d6f 642c 6f62 6a2c  tattr(mymod,obj,
+000345d0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
+000345e0: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+000345f0: 2020 2020 2020 2020 2020 5374 6445 7272            StdErr
+00034600: 2827 4675 6e63 7469 6f6e 206e 616d 6520  ('Function name 
+00034610: 227b 7d22 206e 6f74 2066 6f75 6e64 2069  "{}" not found i
+00034620: 6e20 7468 6520 6d6f 6475 6c65 5c6e 272e  n the module\n'.
+00034630: 666f 726d 6174 286f 626a 2929 0a20 2020  format(obj)).   
+00034640: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00034650: 7572 6e20 4661 6c73 650a 2020 2020 6966  urn False.    if
+00034660: 2054 7970 6528 6f62 6a2c 2827 6675 6e63   Type(obj,('func
+00034670: 7469 6f6e 272c 276d 6574 686f 6427 2c27  tion','method','
+00034680: 6275 696c 7469 6e5f 6675 6e63 7469 6f6e  builtin_function
+00034690: 5f6f 725f 6d65 7468 6f64 272c 2774 7970  _or_method','typ
+000346a0: 6527 2c27 696e 7427 2c27 7374 7227 2c27  e','int','str','
+000346b0: 6c69 7374 272c 2764 6963 7427 2929 3a0a  list','dict')):.
+000346c0: 2020 2020 2020 2020 6663 6172 6773 3d46          fcargs=F
+000346d0: 756e 6374 696f 6e41 7267 7328 6f62 6a2c  unctionArgs(obj,
+000346e0: 6d6f 6465 3d27 6465 7461 696c 272c 6465  mode='detail',de
+000346f0: 6661 756c 743d 7b7d 290a 2020 2020 2020  fault={}).      
+00034700: 2020 6e69 6e70 733d 5b5d 0a20 2020 2020    ninps=[].     
+00034710: 2020 206e 6f70 7473 3d7b 7d0a 2020 2020     nopts={}.    
+00034720: 2020 2020 2353 7065 6369 616c 2063 6173      #Special cas
+00034730: 6520 696e 742c 7374 722c 6c69 7374 2c64  e int,str,list,d
+00034740: 6963 740a 2020 2020 2020 2020 6966 2054  ict.        if T
+00034750: 7970 6528 6f62 6a2c 2028 2769 6e74 272c  ype(obj, ('int',
+00034760: 2773 7472 272c 276c 6973 7427 2c27 6469  'str','list','di
+00034770: 6374 2729 293a 0a20 2020 2020 2020 2020  ct')):.         
+00034780: 2020 2069 6620 696e 7073 3a20 6e69 6e70     if inps: ninp
+00034790: 732e 6170 7065 6e64 2869 6e70 735b 305d  s.append(inps[0]
+000347a0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000347b0: 2027 6261 7365 2720 696e 206f 7074 733a   'base' in opts:
+000347c0: 2023 696e 7428 290a 2020 2020 2020 2020   #int().        
+000347d0: 2020 2020 2020 2020 6e6f 7074 735b 2762          nopts['b
+000347e0: 6173 6527 5d3d 6f70 7473 5b27 6261 7365  ase']=opts['base
+000347f0: 275d 0a20 2020 2020 2020 2020 2020 2069  '].            i
+00034800: 6620 2765 6e63 6f64 696e 6727 2069 6e20  f 'encoding' in 
+00034810: 6f70 7473 3a20 2320 7374 7228 290a 2020  opts: # str().  
+00034820: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
+00034830: 7074 735b 2765 6e63 6f64 696e 6727 5d3d  pts['encoding']=
+00034840: 6f70 7473 5b27 656e 636f 6469 6e67 275d  opts['encoding']
+00034850: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00034860: 6620 5479 7065 286f 626a 2c27 7374 7227  f Type(obj,'str'
+00034870: 2920 616e 6420 6e69 6e70 7320 616e 6420  ) and ninps and 
+00034880: 5479 7065 286e 696e 7073 5b30 5d2c 2762  Type(ninps[0],'b
+00034890: 7974 6573 2729 2061 6e64 2027 656e 636f  ytes') and 'enco
+000348a0: 6469 6e67 2720 6e6f 7420 696e 206f 7074  ding' not in opt
+000348b0: 733a 2023 2073 7472 2829 0a20 2020 2020  s: # str().     
+000348c0: 2020 2020 2020 2020 2020 206e 6f70 7473             nopts
+000348d0: 5b27 656e 636f 6469 6e67 275d 3d27 6173  ['encoding']='as
+000348e0: 6369 6927 0a20 2020 2020 2020 2069 6478  cii'.        idx
+000348f0: 3d30 0a20 2020 2020 2020 2069 6620 2761  =0.        if 'a
+00034900: 7267 7327 2069 6e20 6663 6172 6773 3a0a  rgs' in fcargs:.
+00034910: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00034920: 6920 696e 2066 6361 7267 735b 2761 7267  i in fcargs['arg
+00034930: 7327 5d3a 0a20 2020 2020 2020 2020 2020  s']:.           
+00034940: 2020 2020 2069 6620 6c65 6e28 696e 7073       if len(inps
+00034950: 2920 3e20 6964 783a 0a20 2020 2020 2020  ) > idx:.       
+00034960: 2020 2020 2020 2020 2020 2020 206e 696e               nin
+00034970: 7073 2e61 7070 656e 6428 696e 7073 5b69  ps.append(inps[i
+00034980: 6478 5d29 0a20 2020 2020 2020 2020 2020  dx]).           
+00034990: 2020 2020 2020 2020 2069 6478 2b3d 310a           idx+=1.
+000349a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000349b0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000349c0: 2020 2020 2020 2020 2020 6966 2069 2069            if i i
+000349d0: 6e20 6f70 7473 3a0a 2020 2020 2020 2020  n opts:.        
+000349e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000349f0: 6e69 6e70 732e 6170 7065 6e64 286f 7074  ninps.append(opt
+00034a00: 732e 706f 7028 6929 290a 2020 2020 2020  s.pop(i)).      
+00034a10: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00034a20: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00034a30: 2020 2020 2020 2020 2020 2020 5374 6445              StdE
+00034a40: 7272 2827 696e 7075 7420 7061 7261 6d65  rr('input parame
+00034a50: 7465 7220 227b 7d22 206e 6f74 2066 6f75  ter "{}" not fou
+00034a60: 6e64 5c6e 272e 666f 726d 6174 2869 2929  nd\n'.format(i))
+00034a70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034a80: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00034a90: 4661 6c73 650a 2020 2020 2020 2020 6966  False.        if
+00034aa0: 2027 7661 7261 7267 7327 2069 6e20 6663   'varargs' in fc
+00034ab0: 6172 6773 3a0a 2020 2020 2020 2020 2020  args:.          
+00034ac0: 2020 6e69 6e70 733d 6e69 6e70 732b 6c69    ninps=ninps+li
+00034ad0: 7374 2869 6e70 735b 6964 783a 5d29 0a20  st(inps[idx:]). 
+00034ae0: 2020 2020 2020 2069 6620 2764 6566 6175         if 'defau
+00034af0: 6c74 7327 2069 6e20 6663 6172 6773 3a0a  lts' in fcargs:.
+00034b00: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00034b10: 6920 696e 2066 6361 7267 735b 2764 6566  i in fcargs['def
+00034b20: 6175 6c74 7327 5d3a 0a20 2020 2020 2020  aults']:.       
+00034b30: 2020 2020 2020 2020 2069 6620 6920 696e           if i in
+00034b40: 206f 7074 733a 0a20 2020 2020 2020 2020   opts:.         
+00034b50: 2020 2020 2020 2020 2020 206e 6f70 7473             nopts
+00034b60: 5b69 5d3d 6f70 7473 2e70 6f70 2869 2920  [i]=opts.pop(i) 
+00034b70: 236d 616b 6520 7769 7468 2069 6e70 7574  #make with input
+00034b80: 2076 616c 7565 0a20 2020 2020 2020 2020   value.         
+00034b90: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00034ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034bb0: 206e 6f70 7473 5b69 5d3d 6663 6172 6773   nopts[i]=fcargs
+00034bc0: 5b27 6465 6661 756c 7473 275d 5b69 5d20  ['defaults'][i] 
+00034bd0: 2320 6d61 6b65 2077 6974 6820 6465 6661  # make with defa
+00034be0: 756c 7420 7661 6c75 650a 2020 2020 2020  ult value.      
+00034bf0: 2020 6966 2027 6b65 7977 6f72 6473 2720    if 'keywords' 
+00034c00: 696e 2066 6361 7267 733a 0a20 2020 2020  in fcargs:.     
+00034c10: 2020 2020 2020 206e 6f70 7473 2e75 7064         nopts.upd
+00034c20: 6174 6528 6f70 7473 290a 2020 2020 2020  ate(opts).      
+00034c30: 2020 2352 756e 2066 756e 6374 696f 6e20    #Run function 
+00034c40: 7769 7468 2066 6f75 6e64 2061 7267 756d  with found argum
+00034c50: 656e 7473 0a20 2020 2020 2020 2069 6620  ents.        if 
+00034c60: 6e69 6e70 7320 616e 6420 6e6f 7074 733a  ninps and nopts:
+00034c70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00034c80: 5479 7065 286f 626a 2c28 2769 6e74 272c  Type(obj,('int',
+00034c90: 2773 7472 2729 293a 0a20 2020 2020 2020  'str')):.       
+00034ca0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00034cb0: 6f62 6a28 6e69 6e70 735b 305d 2c2a 2a6e  obj(ninps[0],**n
+00034cc0: 6f70 7473 290a 2020 2020 2020 2020 2020  opts).          
+00034cd0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00034ce0: 2020 2020 2020 2020 7265 7475 726e 206f          return o
+00034cf0: 626a 282a 6e69 6e70 732c 2a2a 6e6f 7074  bj(*ninps,**nopt
+00034d00: 7329 0a20 2020 2020 2020 2065 6c69 6620  s).        elif 
+00034d10: 6e69 6e70 733a 0a20 2020 2020 2020 2020  ninps:.         
+00034d20: 2020 2069 6620 5479 7065 286f 626a 2c28     if Type(obj,(
+00034d30: 2769 6e74 272c 2773 7472 272c 276c 6973  'int','str','lis
+00034d40: 7427 2c27 6469 6374 2729 293a 0a20 2020  t','dict')):.   
+00034d50: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00034d60: 7572 6e20 6f62 6a28 6e69 6e70 735b 305d  urn obj(ninps[0]
+00034d70: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+00034d80: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00034d90: 2020 2020 7265 7475 726e 206f 626a 282a      return obj(*
+00034da0: 6e69 6e70 7329 0a20 2020 2020 2020 2065  ninps).        e
+00034db0: 6c69 6620 6e6f 7074 733a 0a20 2020 2020  lif nopts:.     
+00034dc0: 2020 2020 2020 2072 6574 7572 6e20 6f62         return ob
+00034dd0: 6a28 2a2a 6e6f 7074 7329 0a20 2020 2020  j(**nopts).     
+00034de0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00034df0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00034e00: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00034e10: 206f 626a 2829 0a20 2020 2020 2020 2020   obj().         
+00034e20: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+00034e30: 2020 2020 2020 2020 2020 2065 3d45 7863             e=Exc
+00034e40: 6570 744d 6573 7361 6765 2829 0a20 2020  eptMessage().   
+00034e50: 2020 2020 2020 2020 2020 2020 2053 7464               Std
+00034e60: 4572 7228 6529 0a20 2020 2072 6574 7572  Err(e).    retur
+00034e70: 6e20 4661 6c73 650a 0a64 6566 2070 7269  n False..def pri
+00034e80: 6e74 6628 2a6d 7367 2c2a 2a6f 7074 7329  ntf(*msg,**opts)
+00034e90: 3a0a 2020 2020 2727 270a 2020 2020 5369  :.    '''.    Si
+00034ea0: 6d69 6c61 7220 6173 2070 7269 6e74 2829  milar as print()
+00034eb0: 0a20 2020 2064 6174 653d 5472 7565 2f46  .    date=True/F
+00034ec0: 616c 7365 2020 2020 2020 2020 2020 2020  alse            
+00034ed0: 2020 3a20 2854 7275 6529 2070 7269 6e74    : (True) print
+00034ee0: 2064 6174 6520 696e 6974 6961 6c20 6c69   date initial li
+00034ef0: 6e65 0a20 2020 2064 6174 655f 666f 726d  ne.    date_form
+00034f00: 6174 2020 2020 2020 2020 2020 2020 2020  at              
+00034f10: 2020 2020 3a20 6966 2064 6566 696e 6564      : if defined
+00034f20: 2064 6174 655f 666f 726d 6174 2074 6865   date_format the
+00034f30: 6e20 7072 696e 7420 6461 7465 2077 6974  n print date wit
+00034f40: 6820 6461 7465 5f66 6f72 6d61 740a 2020  h date_format.  
+00034f50: 2020 6469 7265 6374 3d46 616c 7365 2f54    direct=False/T
+00034f60: 7275 6520 2020 2020 2020 2020 2020 203a  rue            :
+00034f70: 2028 5472 7565 2920 7072 696e 7420 7769   (True) print wi
+00034f80: 7468 6f75 7420 6e65 776c 696e 6520 616e  thout newline an
+00034f90: 6420 616e 7920 696e 7472 6f20 696e 666f  d any intro info
+00034fa0: 726d 6174 696f 6e0a 2020 2020 6c6f 6766  rmation.    logf
+00034fb0: 696c 653d 2020 2020 2020 2020 2020 2020  ile=            
+00034fc0: 2020 2020 2020 2020 203a 2073 6176 6569           : savei
+00034fd0: 6e67 206c 6f67 2074 6f20 6c6f 6766 696c  ng log to logfil
+00034fe0: 650a 2020 2020 6361 6c6c 6572 5f64 6574  e.    caller_det
+00034ff0: 6169 6c3d 4661 6c73 652f 5472 7565 2020  ail=False/True  
+00035000: 2020 203a 2070 7269 6e74 2063 616c 6c65     : print calle
+00035010: 7220 696e 666f 726d 6174 696f 6e0a 2020  r information.  
+00035020: 2020 2020 2054 7275 653a 0a20 2020 2020       True:.     
+00035030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035040: 2020 2020 2020 2020 2020 2020 2d20 6c69              - li
+00035050: 6e65 206e 756d 6265 722c 2066 696c 656e  ne number, filen
+00035060: 616d 652c 2061 7267 732c 206f 7074 696f  ame, args, optio
+00035070: 6e61 6c20 6361 6c6c 6572 5f66 756c 6c5f  nal caller_full_
+00035080: 6669 6c65 6e61 6d65 0a20 2020 2020 2020  filename.       
+00035090: 4661 6c73 653a 2028 6465 7461 696c 2073  False: (detail s
+000350a0: 656c 6563 7469 6f6e 290a 2020 2020 2020  election).      
+000350b0: 2020 2020 6361 6c6c 6572 5f61 7267 733d      caller_args=
+000350c0: 4661 6c73 652f 5472 7565 203a 2028 4661  False/True : (Fa
+000350d0: 6c73 6529 2070 7269 6e74 2061 7267 7320  lse) print args 
+000350e0: 6f66 2066 756e 6374 696f 6e0a 2020 2020  of function.    
+000350f0: 2020 2020 2020 6361 6c6c 6572 5f66 696c        caller_fil
+00035100: 656e 616d 653d 4661 6c73 652f 5472 7565  ename=False/True
+00035110: 203a 2028 4661 6c73 6529 2070 7269 6e74   : (False) print
+00035120: 2066 696c 656e 616d 650a 2020 2020 2020   filename.      
+00035130: 2020 2020 6361 6c6c 6572 5f66 756c 6c5f      caller_full_
+00035140: 6669 6c65 6e61 6d65 3d46 616c 7365 2f54  filename=False/T
+00035150: 7275 6520 3a20 2846 616c 7365 2920 7072  rue : (False) pr
+00035160: 696e 7420 6675 6c6c 2070 6174 6820 6669  int full path fi
+00035170: 6c65 6e61 6d65 0a20 2020 2020 2020 2020  lename.         
+00035180: 2063 616c 6c65 725f 6c69 6e65 5f6e 756d   caller_line_num
+00035190: 6265 723d 4661 6c73 652f 5472 7565 203a  ber=False/True :
+000351a0: 2028 4661 6c73 6529 2070 7269 6e74 206c   (False) print l
+000351b0: 696e 6520 6e75 6d62 6572 200a 2020 2020  ine number .    
+000351c0: 6361 6c6c 6572 5f74 7265 653d 4661 6c73  caller_tree=Fals
+000351d0: 652f 5472 7565 2020 2020 2020 203a 2070  e/True       : p
+000351e0: 7269 6e74 2074 7265 6520 6f66 2063 616c  rint tree of cal
+000351f0: 6c65 7220 6869 7374 6f72 790a 2020 2020  ler history.    
+00035200: 2020 2054 7275 653a 0a20 2020 2020 2020     True:.       
+00035210: 2020 202d 2074 7265 6520 616e 6420 6869     - tree and hi
+00035220: 7374 6f72 790a 2020 2020 2020 2046 616c  story.       Fal
+00035230: 7365 3a0a 2020 2020 2020 2020 2020 6361  se:.          ca
+00035240: 6c6c 6572 5f68 6973 746f 7279 3d46 616c  ller_history=Fal
+00035250: 7365 2f54 7275 6520 3a20 7265 7475 726e  se/True : return
+00035260: 2068 6973 746f 7279 2077 6974 686f 7574   history without
+00035270: 2074 7265 650a 2020 2020 7379 736c 6f67   tree.    syslog
+00035280: 643d 2020 2020 2020 2020 2020 2020 2020  d=              
+00035290: 2020 2020 2020 203a 206c 6f67 6769 6e67         : logging
+000352a0: 2074 6f20 7379 736c 6f67 6420 6461 656d   to syslogd daem
+000352b0: 6f6e 0a20 2020 2065 6e64 5f6e 6577 6c69  on.    end_newli
+000352c0: 6e65 3d54 7275 652f 4661 6c73 6520 2020  ne=True/False   
+000352d0: 2020 2020 3a20 6d61 726b 206e 6577 206c      : mark new l
+000352e0: 696e 6520 6174 2065 6e64 206f 6620 7468  ine at end of th
+000352f0: 6520 6c69 6e65 0a20 2020 2073 7461 7274  e line.    start
+00035300: 5f6e 6577 6c69 6e65 3d46 616c 7365 2f54  _newline=False/T
+00035310: 7275 6520 2020 2020 3a20 6d61 726b 206e  rue     : mark n
+00035320: 6577 206c 696e 6520 6174 2073 7461 7274  ew line at start
+00035330: 206f 6620 7468 6520 6c69 6e65 0a20 2020   of the line.   
+00035340: 2069 6e74 726f 3d3c 7374 723e 2020 2020   intro=<str>    
+00035350: 2020 2020 2020 2020 2020 2020 2020 3a20                : 
+00035360: 6c6f 6720 696e 7472 6f20 7374 7269 6e67  log intro string
+00035370: 2062 6566 6f72 6520 6c6f 6720 6461 7461   before log data
+00035380: 0a20 2020 206e 6f5f 696e 7472 6f20 2020  .    no_intro   
+00035390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000353a0: 2020 3a20 5472 7565 3a20 7465 6d70 6f72    : True: tempor
+000353b0: 6172 7920 7265 6d6f 7665 2069 6e74 726f  ary remove intro
+000353c0: 202c 2046 616c 7365 2864 6566 6175 6c74   , False(default
+000353d0: 293a 2049 6e74 726f 2077 6865 6e20 6578  ): Intro when ex
+000353e0: 6973 7420 696e 7472 6f2c 204e 6f6e 653a  ist intro, None:
+000353f0: 2073 7061 6365 2069 6e73 7465 6164 2069   space instead i
+00035400: 6e74 726f 2073 7472 696e 670a 2020 2020  ntro string.    
+00035410: 6c6f 675f 6c65 7665 6c3d 3c69 6e74 3e20  log_level=<int> 
+00035420: 2020 2020 2020 2020 2020 2020 203a 206d               : m
+00035430: 616b 6520 6c6f 672d 6c65 7665 6c0a 2020  ake log-level.  
+00035440: 2020 2020 2020 7072 696e 7466 5f6c 6f67        printf_log
+00035450: 5f62 6173 653d 360a 2020 2020 2020 2020  _base=6.        
+00035460: 7072 696e 7466 2827 6161 6161 6127 2c6c  printf('aaaaa',l
+00035470: 6f67 5f6c 6576 656c 3d33 2920 2d3e 2074  og_level=3) -> t
+00035480: 6869 7320 7769 6c6c 2070 7269 6e74 0a20  his will print. 
+00035490: 2020 2020 2020 2070 7269 6e74 6628 2762         printf('b
+000354a0: 6262 6262 272c 6c6f 675f 6c65 7665 6c3d  bbbb',log_level=
+000354b0: 3829 202d 3e20 7468 6973 206e 6f74 2070  8) -> this not p
+000354c0: 7269 6e74 2e20 6275 7420 6966 2063 6861  rint. but if cha
+000354d0: 6e67 6520 7072 696e 7466 5f6c 6f67 5f62  nge printf_log_b
+000354e0: 6173 6520 746f 2039 2074 6865 6e20 6974  ase to 9 then it
+000354f0: 2077 696c 6c20 7072 696e 740a 2020 2020   will print.    
+00035500: 6c6f 673d 3c66 756e 633e 2020 2020 2020  log=<func>      
+00035510: 2020 2020 2020 2020 2020 2020 203a 2070               : p
+00035520: 7574 206c 6f67 6769 6e67 2064 6174 6120  ut logging data 
+00035530: 746f 206c 6f67 2066 756e 6374 696f 6e0a  to log function.
+00035540: 2020 2020 6473 703d 2020 2020 2020 2020      dsp=        
+00035550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00035560: 203a 2044 6973 706c 6179 2066 6f72 6d61   : Display forma
+00035570: 740a 2020 2020 2020 2020 6120 203a 2061  t.        a  : a
+00035580: 7574 6f0a 2020 2020 2020 2020 7320 203a  uto.        s  :
+00035590: 2073 6372 6565 6e0a 2020 2020 2020 2020   screen.        
+000355a0: 6620 203a 2073 6176 6520 746f 2066 696c  f  : save to fil
+000355b0: 650a 2020 2020 2020 2020 6420 203a 2073  e.        d  : s
+000355c0: 6176 6520 746f 2064 6562 7567 2066 696c  ave to debug fil
+000355d0: 650a 2020 2020 2020 2020 6520 203a 206c  e.        e  : l
+000355e0: 6f67 2074 6f20 7374 616e 6461 7264 2065  og to standard e
+000355f0: 7272 6f72 200a 2020 2020 2020 2020 6320  rror .        c 
+00035600: 203a 2063 6f6e 736f 6c65 0a20 2020 2020   : console.     
+00035610: 2020 2069 2020 3a20 6967 6e6f 7265 2070     i  : ignore p
+00035620: 7269 6e74 0a20 2020 2020 2020 2072 2020  rint.        r  
+00035630: 3a20 7265 7475 726e 0a20 2020 2020 2020  : return.       
+00035640: 2020 2020 7274 3d70 7269 6e74 6628 2778      rt=printf('x
+00035650: 7878 7827 2c64 7370 3d27 7227 290a 2020  xxx',dsp='r').  
+00035660: 2020 2020 2020 2020 2070 7269 6e74 2872           print(r
+00035670: 7429 0a20 2020 2027 2727 0a20 2020 2067  t).    '''.    g
+00035680: 6c6f 6261 6c20 7072 696e 7466 5f63 616c  lobal printf_cal
+00035690: 6c65 725f 6465 7461 696c 0a20 2020 2067  ler_detail.    g
+000356a0: 6c6f 6261 6c20 7072 696e 7466 5f63 616c  lobal printf_cal
+000356b0: 6c65 725f 7472 6565 0a20 2020 2067 6c6f  ler_tree.    glo
+000356c0: 6261 6c20 7072 696e 7466 5f6c 6f67 5f62  bal printf_log_b
+000356d0: 6173 650a 2020 2020 676c 6f62 616c 2070  ase.    global p
+000356e0: 7269 6e74 665f 6361 6c6c 6572 5f6e 616d  rintf_caller_nam
+000356f0: 650a 2020 2020 676c 6f62 616c 2070 7269  e.    global pri
+00035700: 6e74 665f 6e65 776c 696e 655f 696e 666f  ntf_newline_info
+00035710: 0a20 2020 2067 6c6f 6261 6c20 7072 696e  .    global prin
+00035720: 7466 5f69 676e 6f72 655f 656d 7074 790a  tf_ignore_empty.
+00035730: 2020 2020 676c 6f62 616c 2070 7269 6e74      global print
+00035740: 665f 6462 675f 656d 7074 790a 2020 2020  f_dbg_empty.    
+00035750: 676c 6f62 616c 2070 7269 6e74 665f 7363  global printf_sc
+00035760: 725f 6462 670a 2020 2020 6469 7265 6374  r_dbg.    direct
+00035770: 3d6f 7074 732e 6765 7428 2764 6972 6563  =opts.get('direc
+00035780: 7427 2c46 616c 7365 290a 2020 2020 6473  t',False).    ds
+00035790: 703d 6f70 7473 2e67 6574 2827 6473 7027  p=opts.get('dsp'
+000357a0: 2c6f 7074 732e 6765 7428 276d 6f64 6527  ,opts.get('mode'
+000357b0: 2c27 6127 2929 0a20 2020 2069 6620 6e6f  ,'a')).    if no
+000357c0: 7420 6473 703a 2064 7370 3d27 6127 0a20  t dsp: dsp='a'. 
+000357d0: 2020 2069 6620 6473 7020 3d3d 2027 6927     if dsp == 'i'
+000357e0: 3a20 7265 7475 726e 2023 2069 676e 6f72  : return # ignor
+000357f0: 6520 7072 696e 740a 2020 2020 6c6f 673d  e print.    log=
+00035800: 6f70 7473 2e67 6574 2827 6c6f 6727 2c4e  opts.get('log',N
+00035810: 6f6e 6529 0a20 2020 206c 6f67 5f6c 6576  one).    log_lev
+00035820: 656c 3d6f 7074 732e 6765 7428 276c 6f67  el=opts.get('log
+00035830: 5f6c 6576 656c 272c 4e6f 6e65 290a 2020  _level',None).  
+00035840: 2020 7061 7265 6e74 5f6e 3d6f 7074 732e    parent_n=opts.
+00035850: 6765 7428 2763 616c 6c65 725f 7061 7265  get('caller_pare
+00035860: 6e74 272c 3129 0a20 2020 2063 616c 6c65  nt',1).    calle
+00035870: 725f 6465 7461 696c 3d6f 7074 732e 6765  r_detail=opts.ge
+00035880: 7428 2763 616c 6c65 7227 2c6f 7074 732e  t('caller',opts.
+00035890: 6765 7428 2763 616c 6c65 725f 6465 7461  get('caller_deta
+000358a0: 696c 272c 7072 696e 7466 5f63 616c 6c65  il',printf_calle
+000358b0: 725f 6465 7461 696c 2929 0a20 2020 2063  r_detail)).    c
+000358c0: 616c 6c65 725f 7472 6565 3d6f 7074 732e  aller_tree=opts.
+000358d0: 6765 7428 2763 616c 6c65 725f 7472 6565  get('caller_tree
+000358e0: 272c 7072 696e 7466 5f63 616c 6c65 725f  ',printf_caller_
+000358f0: 7472 6565 290a 2020 2020 6361 6c6c 6572  tree).    caller
+00035900: 5f68 6973 746f 7279 3d6f 7074 732e 6765  _history=opts.ge
+00035910: 7428 2763 616c 6c65 725f 6869 7374 6f72  t('caller_histor
+00035920: 7927 2c46 616c 7365 290a 2020 2020 6361  y',False).    ca
+00035930: 6c6c 6572 5f69 676e 6f72 653d 6f70 7473  ller_ignore=opts
+00035940: 2e67 6574 2827 6361 6c6c 6572 5f69 676e  .get('caller_ign
+00035950: 6f72 6527 2c6f 7074 732e 6765 7428 2763  ore',opts.get('c
+00035960: 616c 6c65 725f 7570 7065 7227 2c5b 5d29  aller_upper',[])
+00035970: 290a 2020 2020 6361 6c6c 6572 5f66 756c  ).    caller_ful
+00035980: 6c5f 6669 6c65 6e61 6d65 3d6f 7074 732e  l_filename=opts.
+00035990: 6765 7428 2763 616c 6c65 725f 6675 6c6c  get('caller_full
+000359a0: 5f66 696c 656e 616d 6527 2c46 616c 7365  _filename',False
+000359b0: 290a 2020 2020 6361 6c6c 6572 5f66 696c  ).    caller_fil
+000359c0: 656e 616d 653d 6f70 7473 2e67 6574 2827  ename=opts.get('
+000359d0: 6361 6c6c 6572 5f66 696c 656e 616d 6527  caller_filename'
+000359e0: 2c46 616c 7365 290a 2020 2020 6361 6c6c  ,False).    call
+000359f0: 6572 5f6c 696e 655f 6e75 6d62 6572 3d6f  er_line_number=o
+00035a00: 7074 732e 6765 7428 2763 616c 6c65 725f  pts.get('caller_
+00035a10: 6c69 6e65 5f6e 756d 6265 7227 2c46 616c  line_number',Fal
+00035a20: 7365 290a 2020 2020 6361 6c6c 6572 5f61  se).    caller_a
+00035a30: 7267 733d 6f70 7473 2e67 6574 2827 6361  rgs=opts.get('ca
+00035a40: 6c6c 6572 5f61 7267 7327 2c46 616c 7365  ller_args',False
+00035a50: 290a 2020 2020 6361 6c6c 6572 5f6e 616d  ).    caller_nam
+00035a60: 653d 6f70 7473 2e67 6574 2827 6361 6c6c  e=opts.get('call
+00035a70: 6572 5f6e 616d 6527 2c70 7269 6e74 665f  er_name',printf_
+00035a80: 6361 6c6c 6572 5f6e 616d 6529 0a20 2020  caller_name).   
+00035a90: 2073 7973 6c6f 6764 3d6f 7074 732e 6765   syslogd=opts.ge
+00035aa0: 7428 2773 7973 6c6f 6764 272c 4e6f 6e65  t('syslogd',None
+00035ab0: 290a 2020 2020 7363 725f 6462 673d 6f70  ).    scr_dbg=op
+00035ac0: 7473 2e67 6574 2827 7363 725f 6462 6727  ts.get('scr_dbg'
+00035ad0: 2c70 7269 6e74 665f 7363 725f 6462 6729  ,printf_scr_dbg)
+00035ae0: 0a20 2020 2073 6372 5f64 6267 5f63 6f6e  .    scr_dbg_con
+00035af0: 6469 7469 6f6e 3d6f 7074 732e 6765 7428  dition=opts.get(
+00035b00: 2773 6372 5f64 6267 5f63 6f6e 6469 7469  'scr_dbg_conditi
+00035b10: 6f6e 2729 0a20 2020 206e 6f5f 696e 7472  on').    no_intr
+00035b20: 6f3d 6f70 7473 2e67 6574 2827 6e6f 5f69  o=opts.get('no_i
+00035b30: 6e74 726f 272c 4661 6c73 6529 0a20 2020  ntro',False).   
+00035b40: 2069 676e 6f72 655f 656d 7074 793d 6f70   ignore_empty=op
+00035b50: 7473 2e67 6574 2827 6967 6e6f 7265 5f65  ts.get('ignore_e
+00035b60: 6d70 7479 272c 7072 696e 7466 5f69 676e  mpty',printf_ign
+00035b70: 6f72 655f 656d 7074 7929 0a20 2020 2064  ore_empty).    d
+00035b80: 6267 5f65 6d70 7479 3d6f 7074 732e 6765  bg_empty=opts.ge
+00035b90: 7428 2764 6267 5f65 6d70 7479 272c 7072  t('dbg_empty',pr
+00035ba0: 696e 7466 5f64 6267 5f65 6d70 7479 290a  intf_dbg_empty).
+00035bb0: 2020 2020 6d73 675f 7370 6c69 743d 6f70      msg_split=op
+00035bc0: 7473 2e67 6574 2827 6d73 675f 7370 6c69  ts.get('msg_spli
+00035bd0: 7427 2c27 2027 290a 2020 2020 6d73 673d  t',' ').    msg=
+00035be0: 6c69 7374 286d 7367 290a 2020 2020 6966  list(msg).    if
+00035bf0: 206e 6f5f 696e 7472 6f20 6973 2054 7275   no_intro is Tru
+00035c00: 6520 6f72 2064 6972 6563 743a 0a20 2020  e or direct:.   
+00035c10: 2020 2020 2064 6174 655f 666f 726d 6174       date_format
+00035c20: 3d4e 6f6e 650a 2020 2020 656c 7365 3a0a  =None.    else:.
+00035c30: 2020 2020 2020 2020 6461 7465 5f66 6f72          date_for
+00035c40: 6d61 743d 6f70 7473 2e67 6574 2827 6461  mat=opts.get('da
+00035c50: 7465 5f66 6f72 6d61 7427 2c27 256d 2f25  te_format','%m/%
+00035c60: 642f 2559 2025 483a 254d 3a25 5327 2069  d/%Y %H:%M:%S' i
+00035c70: 6620 6f70 7473 2e67 6574 2827 6461 7465  f opts.get('date
+00035c80: 2729 2065 6c73 6520 4e6f 6e65 290a 2020  ') else None).  
+00035c90: 2020 2320 656e 6420 6e65 776c 696e 6520    # end newline 
+00035ca0: 6465 7369 676e 0a20 2020 206e 6577 5f6c  design.    new_l
+00035cb0: 696e 653d 2727 2069 6620 6469 7265 6374  ine='' if direct
+00035cc0: 2065 6c73 6520 6f70 7473 2e67 6574 2827   else opts.get('
+00035cd0: 6e65 775f 6c69 6e65 272c 6f70 7473 2e67  new_line',opts.g
+00035ce0: 6574 2827 6e65 776c 696e 6527 2c6f 7074  et('newline',opt
+00035cf0: 732e 6765 7428 2765 6e64 272c 6f70 7473  s.get('end',opts
+00035d00: 2e67 6574 2827 656e 645f 6e65 776c 696e  .get('end_newlin
+00035d10: 6527 2c6f 7074 732e 6765 7428 2770 6f73  e',opts.get('pos
+00035d20: 745f 6e65 776c 696e 6527 2c27 5c6e 2729  t_newline','\n')
+00035d30: 2929 2929 0a20 2020 2069 6620 6e65 775f  )))).    if new_
+00035d40: 6c69 6e65 206e 6f74 2069 6e20 5b27 272c  line not in ['',
+00035d50: 275c 6e27 5d3a 6e65 775f 6c69 6e65 3d27  '\n']:new_line='
+00035d60: 5c6e 2720 6966 206e 6577 5f6c 696e 6520  \n' if new_line 
+00035d70: 616e 6420 6e6f 7420 6469 7265 6374 2065  and not direct e
+00035d80: 6c73 6520 2727 0a20 2020 2023 2073 7461  lse ''.    # sta
+00035d90: 7274 206e 6577 6c69 6e65 2064 6573 6967  rt newline desig
+00035da0: 6e0a 2020 2020 6e6f 5f73 7461 7274 5f6e  n.    no_start_n
+00035db0: 6577 6c69 6e65 3d6f 7074 732e 6765 7428  ewline=opts.get(
+00035dc0: 276e 6f5f 7374 6172 745f 6e65 776c 696e  'no_start_newlin
+00035dd0: 6527 290a 2020 2020 7374 6172 745f 6e65  e').    start_ne
+00035de0: 776c 696e 653d 2727 2069 6620 6e6f 5f73  wline='' if no_s
+00035df0: 7461 7274 5f6e 6577 6c69 6e65 2069 7320  tart_newline is 
+00035e00: 5472 7565 2065 6c73 6520 6f70 7473 2e67  True else opts.g
+00035e10: 6574 2827 7374 6172 745f 6e65 776c 696e  et('start_newlin
+00035e20: 6527 2c6f 7074 732e 6765 7428 2773 7461  e',opts.get('sta
+00035e30: 7274 272c 6f70 7473 2e67 6574 2827 7072  rt',opts.get('pr
+00035e40: 655f 6e65 776c 696e 6527 2929 290a 2020  e_newline'))).  
+00035e50: 2020 6966 206e 6f5f 7374 6172 745f 6e65    if no_start_ne
+00035e60: 776c 696e 653a 0a20 2020 2020 2020 2073  wline:.        s
+00035e70: 7461 7274 5f6e 6577 6c69 6e65 3d27 270a  tart_newline=''.
+00035e80: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00035e90: 2020 6966 2073 7461 7274 5f6e 6577 6c69    if start_newli
+00035ea0: 6e65 2069 7320 5472 7565 3a0a 2020 2020  ne is True:.    
+00035eb0: 2020 2020 2020 2020 7374 6172 745f 6e65          start_ne
+00035ec0: 776c 696e 653d 275c 6e27 0a20 2020 2020  wline='\n'.     
+00035ed0: 2020 2065 6c69 6620 4973 496e 2873 7461     elif IsIn(sta
+00035ee0: 7274 5f6e 6577 6c69 6e65 2c5b 2741 272c  rt_newline,['A',
+00035ef0: 2741 7574 6f27 5d29 3a0a 2020 2020 2020  'Auto']):.      
+00035f00: 2020 2020 2020 7374 6172 745f 6e65 776c        start_newl
+00035f10: 696e 653d 2761 7574 6f27 0a20 2020 2020  ine='auto'.     
+00035f20: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00035f30: 2020 2020 2073 7461 7274 5f6e 6577 6c69       start_newli
+00035f40: 6e65 3d27 270a 0a20 2020 2069 6620 6e6f  ne=''..    if no
+00035f50: 5f69 6e74 726f 2069 7320 5472 7565 3a20  _intro is True: 
+00035f60: 2320 6966 206e 6f5f 696e 7472 6f20 7468  # if no_intro th
+00035f70: 656e 2069 676e 6f72 6520 7374 6172 745f  en ignore start_
+00035f80: 6e65 776c 696e 6520 6d61 726b 0a20 2020  newline mark.   
+00035f90: 2020 2020 2073 7461 7274 5f6e 6577 6c69       start_newli
+00035fa0: 6e65 3d27 270a 0a20 2020 2069 6e74 726f  ne=''..    intro
+00035fb0: 3d6f 7074 732e 6765 7428 2769 6e74 726f  =opts.get('intro
+00035fc0: 272c 4e6f 6e65 290a 2020 2020 6c6f 6766  ',None).    logf
+00035fd0: 696c 653d 6f70 7473 2e67 6574 2827 6c6f  ile=opts.get('lo
+00035fe0: 6766 696c 6527 2c6f 7074 732e 6765 7428  gfile',opts.get(
+00035ff0: 276c 6f67 5f66 696c 6527 2c5b 5d29 290a  'log_file',[])).
+00036000: 2020 2020 6967 6e6f 7265 5f6d 7973 656c      ignore_mysel
+00036010: 663d 6f70 7473 2e67 6574 2827 6967 6e6f  f=opts.get('igno
+00036020: 7265 5f6d 7973 656c 6627 2c54 7275 6529  re_myself',True)
+00036030: 0a20 2020 2064 6566 206d 7367 5f6d 616b  .    def msg_mak
+00036040: 6572 282a 6d73 672c 6d73 675f 7370 6c69  er(*msg,msg_spli
+00036050: 743d 2720 272c 696e 7472 6f5f 6c65 6e3d  t=' ',intro_len=
+00036060: 302c 696e 7472 6f5f 6d73 673d 2727 293a  0,intro_msg=''):
+00036070: 0a20 2020 2020 2020 2023 204d 616b 6520  .        # Make 
+00036080: 696e 7075 7420 6461 7461 2074 6f20 6120  input data to a 
+00036090: 7374 7269 6e67 206d 7367 200a 2020 2020  string msg .    
+000360a0: 2020 2020 6d73 675f 7374 723d 2727 0a20      msg_str=''. 
+000360b0: 2020 2020 2020 2054 543d 3020 2023 2046         TT=0  # F
+000360c0: 6f72 2027 5c6e 2720 6f72 2027 5c6e 5c6e  or '\n' or '\n\n
+000360d0: 2720 2e2e 2e0a 2020 2020 2020 2020 666f  ' ....        fo
+000360e0: 7220 6969 2069 6e20 6d73 673a 0a20 2020  r ii in msg:.   
+000360f0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00036100: 6973 696e 7374 616e 6365 2869 692c 7374  isinstance(ii,st
+00036110: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+00036120: 2020 2020 6966 2069 6e74 726f 5f6c 656e      if intro_len
+00036130: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00036140: 2020 2020 2020 613d 436f 6c6f 7253 7472        a=ColorStr
+00036150: 2857 7261 7053 7472 696e 6728 5374 7228  (WrapString(Str(
+00036160: 7070 7269 6e74 2e70 666f 726d 6174 2869  pprint.pformat(i
+00036170: 6929 2c64 6566 6175 6c74 3d27 6f72 6727  i),default='org'
+00036180: 292c 6673 7061 6365 3d30 2069 6620 6e6f  ),fspace=0 if no
+00036190: 7420 6d73 675f 7374 7220 6f72 206d 7367  t msg_str or msg
+000361a0: 5f73 706c 6974 2021 3d20 275c 6e27 206f  _split != '\n' o
+000361b0: 7220 5454 2065 6c73 6520 696e 7472 6f5f  r TT else intro_
+000361c0: 6c65 6e2c 206e 7370 6163 653d 696e 7472  len, nspace=intr
+000361d0: 6f5f 6c65 6e2c 6d6f 6465 3d27 7370 6163  o_len,mode='spac
+000361e0: 6527 292c 2a2a 6f70 7473 290a 2020 2020  e'),**opts).    
+000361f0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00036200: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00036210: 2020 2020 2020 613d 436f 6c6f 7253 7472        a=ColorStr
+00036220: 2853 7472 2870 7072 696e 742e 7066 6f72  (Str(pprint.pfor
+00036230: 6d61 7428 6969 292c 6465 6661 756c 743d  mat(ii),default=
+00036240: 276f 7267 2729 2c2a 2a6f 7074 7329 0a20  'org'),**opts). 
+00036250: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00036260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00036270: 2069 6620 275c 6e27 2069 6e20 6969 2061   if '\n' in ii a
+00036280: 6e64 206e 6f74 2069 692e 7265 706c 6163  nd not ii.replac
+00036290: 6528 275c 6e27 2c27 2729 3a20 2363 6f6e  e('\n',''): #con
+000362a0: 7665 7274 205c 6e20 6f72 205c 6e5c 6e20  vert \n or \n\n 
+000362b0: 2e2e 2e2e 2074 6f20 7772 6170 7069 6e67  .... to wrapping
+000362c0: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
+000362d0: 2020 2020 2020 2020 2020 2020 5454 2b3d              TT+=
+000362e0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+000362f0: 2020 2020 2020 6969 3d69 692b 2754 270a        ii=ii+'T'.
+00036300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036310: 6966 2069 6e74 726f 5f6c 656e 3a0a 2020  if intro_len:.  
 00036320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036330: 6d73 675f 7374 723d 6d73 675f 7374 7220  msg_str=msg_str 
-00036340: 2b20 6d73 675f 7370 6c69 7420 2b20 610a  + msg_split + a.
-00036350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036360: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00036370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036380: 2020 6d73 675f 7374 723d 6d73 675f 7374    msg_str=msg_st
-00036390: 7220 2b20 610a 2020 2020 2020 2020 2020  r + a.          
-000363a0: 2020 2020 2020 2020 2020 6966 2069 692e            if ii.
-000363b0: 7265 706c 6163 6528 275c 6e27 2c27 2729  replace('\n','')
-000363c0: 3a20 5454 3d30 2023 2072 656d 6f76 6520  : TT=0 # remove 
-000363d0: 7370 6563 6961 6c20 666f 726d 6174 2074  special format t
-000363e0: 6167 0a20 2020 2020 2020 2020 2020 2020  ag.             
-000363f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00036400: 2020 2020 2020 2020 2020 2020 206d 7367               msg
-00036410: 5f73 7472 3d6d 7367 5f73 7472 202b 206d  _str=msg_str + m
-00036420: 7367 5f73 706c 6974 202b 2061 0a20 2020  sg_split + a.   
-00036430: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00036440: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00036450: 6620 696e 7472 6f5f 6d73 673a 0a20 2020  f intro_msg:.   
-00036460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036470: 206d 7367 5f73 7472 3d69 6e74 726f 5f6d   msg_str=intro_m
-00036480: 7367 202b 2061 200a 2020 2020 2020 2020  sg + a .        
-00036490: 2020 2020 2020 2020 656c 6966 2069 6e74          elif int
-000364a0: 726f 5f6c 656e 3a0a 2020 2020 2020 2020  ro_len:.        
-000364b0: 2020 2020 2020 2020 2020 2020 6d73 675f              msg_
-000364c0: 7374 723d 2053 7061 6365 286e 756d 3d69  str= Space(num=i
-000364d0: 6e74 726f 5f6c 656e 2920 2b20 610a 2020  ntro_len) + a.  
-000364e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000364f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00036500: 2020 2020 2020 2020 6d73 675f 7374 723d          msg_str=
-00036510: 6120 0a20 2020 2020 2020 2020 2020 2023  a .            #
-00036520: 2069 6620 656e 6420 6f66 2074 6865 206c   if end of the l
-00036530: 696e 6520 6861 7320 6578 7472 6120 275c  ine has extra '\
-00036540: 6e27 2074 6865 6e20 7265 636f 7665 7220  n' then recover 
-00036550: 7468 6520 6c6f 7374 6564 2027 5c6e 2720  the losted '\n' 
-00036560: 6279 2057 7261 7053 7472 696e 6728 290a  by WrapString().
-00036570: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00036580: 7369 6e73 7461 6e63 6528 6969 2c73 7472  sinstance(ii,str
-00036590: 2920 616e 6420 6c65 6e28 6969 2920 3e20  ) and len(ii) > 
-000365a0: 3120 616e 6420 6969 5b2d 315d 203d 3d20  1 and ii[-1] == 
-000365b0: 275c 6e27 3a0a 2020 2020 2020 2020 2020  '\n':.          
-000365c0: 2020 2020 2020 6d73 675f 7374 723d 6d73        msg_str=ms
-000365d0: 675f 7374 7220 2b20 6969 5b2d 315d 0a20  g_str + ii[-1]. 
-000365e0: 2020 2020 2020 2072 6574 7572 6e20 6d73         return ms
-000365f0: 675f 7374 720a 0a20 2020 2023 4765 7420  g_str..    #Get 
-00036600: 4c6f 6766 696c 6520 696e 666f 726d 6174  Logfile informat
-00036610: 696f 6e20 666f 7220 4f4c 4420 7665 7273  ion for OLD vers
-00036620: 696f 6e20 616e 6420 7265 6d6f 7665 2074  ion and remove t
-00036630: 6865 204c 6f67 6669 6c65 2069 6e66 6f72  he Logfile infor
-00036640: 6d61 7469 6f6e 2069 6e20 7468 6520 6d65  mation in the me
-00036650: 7373 6167 6573 0a20 2020 2069 6620 6973  ssages.    if is
-00036660: 696e 7374 616e 6365 286c 6f67 6669 6c65  instance(logfile
-00036670: 2c73 7472 293a 0a20 2020 2020 2020 206c  ,str):.        l
-00036680: 6f67 6669 6c65 3d6c 6f67 6669 6c65 2e73  ogfile=logfile.s
-00036690: 706c 6974 2827 2c27 290a 2020 2020 656c  plit(',').    el
-000366a0: 6966 2069 7369 6e73 7461 6e63 6528 6c6f  if isinstance(lo
-000366b0: 6766 696c 652c 7475 706c 6529 3a0a 2020  gfile,tuple):.  
-000366c0: 2020 2020 2020 6c6f 6766 696c 653d 6c69        logfile=li
-000366d0: 7374 2874 7570 6c65 290a 2020 2020 6966  st(tuple).    if
-000366e0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-000366f0: 6c6f 6766 696c 652c 6c69 7374 293a 0a20  logfile,list):. 
-00036700: 2020 2020 2020 206c 6f67 6669 6c65 3d5b         logfile=[
-00036710: 5d0a 2020 2020 666f 7220 6969 2069 6e20  ].    for ii in 
-00036720: 6d73 673a 0a20 2020 2020 2020 2069 6620  msg:.        if 
-00036730: 6973 696e 7374 616e 6365 2869 692c 7374  isinstance(ii,st
-00036740: 7229 2061 6e64 2027 3a27 2069 6e20 6969  r) and ':' in ii
-00036750: 3a0a 2020 2020 2020 2020 2020 2020 6c6f  :.            lo
-00036760: 6766 696c 655f 6c69 7374 3d69 692e 7370  gfile_list=ii.sp
-00036770: 6c69 7428 273a 2729 0a20 2020 2020 2020  lit(':').       
-00036780: 2020 2020 2069 6620 6c6f 6766 696c 655f       if logfile_
-00036790: 6c69 7374 5b30 5d20 696e 205b 276c 6f67  list[0] in ['log
-000367a0: 5f66 696c 6527 2c27 6c6f 6766 696c 6527  _file','logfile'
-000367b0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-000367c0: 2020 2069 6620 6c65 6e28 6c6f 6766 696c     if len(logfil
-000367d0: 655f 6c69 7374 2920 3e20 323a 0a20 2020  e_list) > 2:.   
-000367e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000367f0: 2066 6f72 206a 6a20 696e 206c 6f67 6669   for jj in logfi
-00036800: 6c65 5f6c 6973 745b 313a 5d3a 0a20 2020  le_list[1:]:.   
-00036810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036820: 2020 2020 206c 6f67 6669 6c65 2e61 7070       logfile.app
-00036830: 656e 6428 6a6a 290a 2020 2020 2020 2020  end(jj).        
-00036840: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00036850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036860: 2020 6c6f 6766 696c 653d 6c6f 6766 696c    logfile=logfil
-00036870: 652b 6c6f 6766 696c 655f 6c69 7374 5b31  e+logfile_list[1
-00036880: 5d2e 7370 6c69 7428 272c 2729 0a20 2020  ].split(',').   
-00036890: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000368a0: 6973 696e 7374 616e 6365 286d 7367 2c74  isinstance(msg,t
-000368b0: 7570 6c65 293a 0a20 2020 2020 2020 2020  uple):.         
-000368c0: 2020 2020 2020 2020 2020 206d 7367 3d6c             msg=l
-000368d0: 6973 7428 6d73 6729 0a20 2020 2020 2020  ist(msg).       
-000368e0: 2020 2020 2020 2020 2020 2020 206d 7367               msg
-000368f0: 2e72 656d 6f76 6528 6969 290a 2020 2020  .remove(ii).    
-00036900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036910: 6d73 673d 7475 706c 6528 6d73 6729 0a20  msg=tuple(msg). 
-00036920: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00036930: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00036940: 2020 2020 2020 2020 206d 7367 2e72 656d           msg.rem
-00036950: 6f76 6528 6969 290a 2020 2020 0a20 2020  ove(ii).    .   
-00036960: 2023 2073 6176 6520 6d73 6728 7265 6d6f   # save msg(remo
-00036970: 7665 6420 6c6f 675f 6669 6c65 2069 6e66  ved log_file inf
-00036980: 6f72 6d61 7469 6f6e 2920 746f 2073 7973  ormation) to sys
-00036990: 6c6f 6764 200a 2020 2020 6966 2073 7973  logd .    if sys
-000369a0: 6c6f 6764 3a0a 2020 2020 2020 2020 2320  logd:.        # 
-000369b0: 4d61 6b65 2061 206d 6573 7361 6765 2074  Make a message t
-000369c0: 6f20 7369 6e67 6c65 206c 696e 650a 2020  o single line.  
-000369d0: 2020 2020 2020 746d 705f 7374 723d 6d73        tmp_str=ms
-000369e0: 675f 6d61 6b65 7228 2a6d 7367 2c6d 7367  g_maker(*msg,msg
-000369f0: 5f73 706c 6974 3d6d 7367 5f73 706c 6974  _split=msg_split
-00036a00: 290a 2020 2020 2020 2020 6966 2073 7973  ).        if sys
-00036a10: 6c6f 6764 2069 6e20 5b27 494e 464f 272c  logd in ['INFO',
-00036a20: 2769 6e66 6f27 5d3a 0a20 2020 2020 2020  'info']:.       
-00036a30: 2020 2020 2073 7973 6c6f 672e 7379 736c       syslog.sysl
-00036a40: 6f67 2873 7973 6c6f 672e 4c4f 475f 494e  og(syslog.LOG_IN
-00036a50: 464f 2c74 6d70 5f73 7472 290a 2020 2020  FO,tmp_str).    
-00036a60: 2020 2020 656c 6966 2073 7973 6c6f 6764      elif syslogd
-00036a70: 2069 6e20 5b27 4b45 524e 272c 276b 6572   in ['KERN','ker
-00036a80: 6e27 5d3a 0a20 2020 2020 2020 2020 2020  n']:.           
-00036a90: 2073 7973 6c6f 672e 7379 736c 6f67 2873   syslog.syslog(s
-00036aa0: 7973 6c6f 672e 4c4f 475f 4b45 524e 2c74  yslog.LOG_KERN,t
-00036ab0: 6d70 5f73 7472 290a 2020 2020 2020 2020  mp_str).        
-00036ac0: 656c 6966 2073 7973 6c6f 6764 2069 6e20  elif syslogd in 
-00036ad0: 5b27 4552 5227 2c27 6572 7227 5d3a 0a20  ['ERR','err']:. 
-00036ae0: 2020 2020 2020 2020 2020 2073 7973 6c6f             syslo
-00036af0: 672e 7379 736c 6f67 2873 7973 6c6f 672e  g.syslog(syslog.
-00036b00: 4c4f 475f 4552 522c 746d 705f 7374 7229  LOG_ERR,tmp_str)
-00036b10: 0a20 2020 2020 2020 2065 6c69 6620 7379  .        elif sy
-00036b20: 736c 6f67 6420 696e 205b 2743 5249 5427  slogd in ['CRIT'
-00036b30: 2c27 6372 6974 275d 3a0a 2020 2020 2020  ,'crit']:.      
-00036b40: 2020 2020 2020 7379 736c 6f67 2e73 7973        syslog.sys
-00036b50: 6c6f 6728 7379 736c 6f67 2e4c 4f47 5f43  log(syslog.LOG_C
-00036b60: 5249 542c 746d 705f 7374 7229 0a20 2020  RIT,tmp_str).   
-00036b70: 2020 2020 2065 6c69 6620 7379 736c 6f67       elif syslog
-00036b80: 6420 696e 205b 2757 4152 4e27 2c27 7761  d in ['WARN','wa
-00036b90: 726e 275d 3a0a 2020 2020 2020 2020 2020  rn']:.          
-00036ba0: 2020 7379 736c 6f67 2e73 7973 6c6f 6728    syslog.syslog(
-00036bb0: 7379 736c 6f67 2e4c 4f47 5f57 4152 4e49  syslog.LOG_WARNI
-00036bc0: 4e47 2c74 6d70 5f73 7472 290a 2020 2020  NG,tmp_str).    
-00036bd0: 2020 2020 656c 6966 2073 7973 6c6f 6764      elif syslogd
-00036be0: 2069 6e20 5b27 4442 4727 2c27 4445 4255   in ['DBG','DEBU
-00036bf0: 4727 2c27 6462 6727 2c27 6465 6275 6727  G','dbg','debug'
-00036c00: 5d3a 0a20 2020 2020 2020 2020 2020 2073  ]:.            s
-00036c10: 7973 6c6f 672e 7379 736c 6f67 2873 7973  yslog.syslog(sys
-00036c20: 6c6f 672e 4c4f 475f 4445 4255 472c 746d  log.LOG_DEBUG,tm
-00036c30: 705f 7374 7229 0a20 2020 2020 2020 2065  p_str).        e
-00036c40: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00036c50: 2073 7973 6c6f 672e 7379 736c 6f67 2874   syslog.syslog(t
-00036c60: 6d70 5f73 7472 290a 0a20 2020 2023 5768  mp_str)..    #Wh
-00036c70: 656e 2068 6176 696e 6720 4c6f 6720 6675  en having Log fu
-00036c80: 6e63 7469 6f6e 2074 6865 6e20 6769 7665  nction then give
-00036c90: 2074 6865 2064 6174 6120 746f 206c 6f67   the data to log
-00036ca0: 2066 756e 6374 696f 6e0a 2020 2020 6c6f   function.    lo
-00036cb0: 675f 703d 4661 6c73 650a 2020 2020 6966  g_p=False.    if
-00036cc0: 2049 7346 756e 6374 696f 6e28 6c6f 6729   IsFunction(log)
-00036cd0: 3a20 2320 4c6f 6720 6675 6e63 7469 6f6e  : # Log function
-00036ce0: 2820 6465 6275 6720 6d6f 6465 206c 6f67  ( debug mode log
-00036cf0: 2066 756e 6374 696f 6e20 746f 6f20 290a   function too ).
-00036d00: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-00036d10: 2020 2020 2020 2020 2069 6620 2827 6427           if ('d'
-00036d20: 2069 6e20 6473 7020 6f72 2027 6627 2069   in dsp or 'f' i
-00036d30: 6e20 6473 7029 2061 6e64 206c 6f67 6669  n dsp) and logfi
-00036d40: 6c65 3a0a 2020 2020 2020 2020 2020 2020  le:.            
-00036d50: 2020 2020 6966 2027 6361 6c6c 6572 5f70      if 'caller_p
-00036d60: 6172 656e 7427 2069 6e20 6f70 7473 3a0a  arent' in opts:.
-00036d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036d80: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00036d90: 6528 6f70 7473 5b27 6361 6c6c 6572 5f70  e(opts['caller_p
-00036da0: 6172 656e 7427 5d2c 696e 7429 3a0a 2020  arent'],int):.  
-00036db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036dc0: 2020 2020 2020 6f70 7473 5b27 6361 6c6c        opts['call
-00036dd0: 6572 5f70 6172 656e 7427 5d3d 6f70 7473  er_parent']=opts
-00036de0: 5b27 6361 6c6c 6572 5f70 6172 656e 7427  ['caller_parent'
-00036df0: 5d2b 310a 2020 2020 2020 2020 2020 2020  ]+1.            
-00036e00: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00036e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036e20: 2020 2020 2020 6f70 7473 5b27 6361 6c6c        opts['call
-00036e30: 6572 5f70 6172 656e 7427 5d3d 320a 2020  er_parent']=2.  
-00036e40: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00036e50: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00036e60: 2020 2020 2020 2020 6f70 7473 5b27 6361          opts['ca
-00036e70: 6c6c 6572 5f70 6172 656e 7427 5d3d 320a  ller_parent']=2.
-00036e80: 2020 2020 2020 2020 2020 2020 4665 6564              Feed
-00036e90: 4675 6e63 286c 6f67 2c2a 6d73 672c 2a2a  Func(log,*msg,**
-00036ea0: 6f70 7473 290a 2020 2020 2020 2020 2020  opts).          
-00036eb0: 2020 2320 4966 206c 6f67 2066 756e 6374    # If log funct
-00036ec0: 696f 6e20 7461 6b65 206f 7665 7220 7468  ion take over th
-00036ed0: 6520 6c6f 6720 7468 656e 206e 6f20 6d6f  e log then no mo
-00036ee0: 7265 2070 7269 6e74 2074 6f20 6f74 6865  re print to othe
-00036ef0: 7273 0a20 2020 2020 2020 2020 2020 2072  rs.            r
-00036f00: 6574 7572 6e0a 2020 2020 2020 2020 6578  eturn.        ex
-00036f10: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-00036f20: 2020 7061 7373 0a0a 2020 2020 2320 4d61    pass..    # Ma
-00036f30: 6b65 2061 2049 6e74 726f 0a20 2020 2069  ke a Intro.    i
-00036f40: 6e74 726f 5f6c 656e 3d30 0a20 2020 2069  ntro_len=0.    i
-00036f50: 6e74 726f 5f6d 7367 3d27 270a 2020 2020  ntro_msg=''.    
-00036f60: 6966 206e 6f74 2064 6972 6563 7420 616e  if not direct an
-00036f70: 6420 6e6f 7420 6e6f 5f69 6e74 726f 3a0a  d not no_intro:.
-00036f80: 2020 2020 2020 2020 696e 7472 6f5f 6d73          intro_ms
-00036f90: 673d 277b 307d 2027 2e66 6f72 6d61 7428  g='{0} '.format(
-00036fa0: 5449 4d45 2829 2e4e 6f77 2829 2e73 7472  TIME().Now().str
-00036fb0: 6674 696d 6528 6461 7465 5f66 6f72 6d61  ftime(date_forma
-00036fc0: 7429 2920 6966 2064 6174 655f 666f 726d  t)) if date_form
-00036fd0: 6174 2061 6e64 206e 6f74 2073 7973 6c6f  at and not syslo
-00036fe0: 6764 2065 6c73 6520 2727 0a20 2020 2020  gd else ''.     
-00036ff0: 2020 2069 6e74 726f 5f6c 656e 3d6c 656e     intro_len=len
-00037000: 2869 6e74 726f 5f6d 7367 290a 2020 2020  (intro_msg).    
-00037010: 2020 2020 6966 2063 616c 6c65 725f 6465      if caller_de
-00037020: 7461 696c 206f 7220 6361 6c6c 6572 5f74  tail or caller_t
-00037030: 7265 6520 6f72 2063 616c 6c65 725f 6869  ree or caller_hi
-00037040: 7374 6f72 7920 6f72 2063 616c 6c65 725f  story or caller_
-00037050: 6967 6e6f 7265 3a0a 2020 2020 2020 2020  ignore:.        
-00037060: 2020 2020 6966 2069 676e 6f72 655f 6d79      if ignore_my
-00037070: 7365 6c66 3a0a 2020 2020 2020 2020 2020  self:.          
-00037080: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-00037090: 6e73 7461 6e63 6528 6361 6c6c 6572 5f69  nstance(caller_i
-000370a0: 676e 6f72 652c 6c69 7374 293a 2063 616c  gnore,list): cal
-000370b0: 6c65 725f 6967 6e6f 7265 3d5b 5d0a 2020  ler_ignore=[].  
-000370c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000370d0: 2027 4665 6564 4675 6e63 2720 6e6f 7420   'FeedFunc' not 
-000370e0: 696e 2063 616c 6c65 725f 6967 6e6f 7265  in caller_ignore
-000370f0: 3a20 6361 6c6c 6572 5f69 676e 6f72 652e  : caller_ignore.
-00037100: 6170 7065 6e64 2827 4665 6564 4675 6e63  append('FeedFunc
-00037110: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00037120: 2020 2069 6620 2770 7269 6e74 6627 206e     if 'printf' n
-00037130: 6f74 2069 6e20 6361 6c6c 6572 5f69 676e  ot in caller_ign
-00037140: 6f72 653a 2063 616c 6c65 725f 6967 6e6f  ore: caller_igno
-00037150: 7265 2e61 7070 656e 6428 2770 7269 6e74  re.append('print
-00037160: 6627 290a 2020 2020 2020 2020 6966 2063  f').        if c
-00037170: 616c 6c65 725f 6967 6e6f 7265 2061 6e64  aller_ignore and
-00037180: 2069 7369 6e73 7461 6e63 6528 6361 6c6c   isinstance(call
-00037190: 6572 5f69 676e 6f72 652c 6c69 7374 293a  er_ignore,list):
-000371a0: 0a20 2020 2020 2020 2020 2020 2061 7267  .            arg
-000371b0: 3d7b 2770 6172 656e 7427 3a70 6172 656e  ={'parent':paren
-000371c0: 745f 6e2c 2761 7267 7327 3a46 616c 7365  t_n,'args':False
-000371d0: 2c27 6869 7374 6f72 7927 3a54 7275 652c  ,'history':True,
-000371e0: 2774 7265 6527 3a46 616c 7365 7d0a 2020  'tree':False}.  
-000371f0: 2020 2020 2020 2020 2020 6361 6c6c 5f6e            call_n
-00037200: 616d 653d 4675 6e63 7469 6f6e 4e61 6d65  ame=FunctionName
-00037210: 282a 2a61 7267 290a 2020 2020 2020 2020  (**arg).        
-00037220: 2020 2020 6e65 775f 703d 300a 2020 2020      new_p=0.    
-00037230: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00037240: 2072 616e 6765 286c 656e 2863 616c 6c5f   range(len(call_
-00037250: 6e61 6d65 292d 312c 302c 2d31 293a 0a20  name)-1,0,-1):. 
-00037260: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00037270: 6620 6361 6c6c 5f6e 616d 655b 695d 5b30  f call_name[i][0
-00037280: 5d20 696e 2063 616c 6c65 725f 6967 6e6f  ] in caller_igno
-00037290: 7265 3a0a 2020 2020 2020 2020 2020 2020  re:.            
-000372a0: 2020 2020 2020 2020 6e65 775f 702b 3d31          new_p+=1
-000372b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000372c0: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
-000372d0: 2020 2020 2020 2020 2020 2020 2020 6272                br
-000372e0: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
-000372f0: 6966 2069 7369 6e73 7461 6e63 6528 7061  if isinstance(pa
-00037300: 7265 6e74 5f6e 2c73 7472 293a 0a20 2020  rent_n,str):.   
-00037310: 2020 2020 2020 2020 2020 2020 2070 6172               par
-00037320: 656e 745f 6e5f 613d 7061 7265 6e74 5f6e  ent_n_a=parent_n
-00037330: 2e73 706c 6974 2827 2d27 290a 2020 2020  .split('-').    
-00037340: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-00037350: 6172 656e 745f 6e5f 615b 305d 3a0a 2020  arent_n_a[0]:.  
-00037360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037370: 2020 7061 7265 6e74 5f6e 5f61 5b30 5d3d    parent_n_a[0]=
-00037380: 277b 7d27 2e66 6f72 6d61 7428 696e 7428  '{}'.format(int(
-00037390: 7061 7265 6e74 5f6e 5f61 5b30 5d29 2b6e  parent_n_a[0])+n
-000373a0: 6577 5f70 290a 2020 2020 2020 2020 2020  ew_p).          
-000373b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000373c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000373d0: 7061 7265 6e74 5f6e 5f61 5b30 5d3d 277b  parent_n_a[0]='{
-000373e0: 7d27 2e66 6f72 6d61 7428 6e65 775f 7029  }'.format(new_p)
-000373f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00037400: 2069 6620 6c65 6e28 7061 7265 6e74 5f6e   if len(parent_n
-00037410: 5f61 2920 3d3d 2032 2061 6e64 2070 6172  _a) == 2 and par
-00037420: 656e 745f 6e5f 615b 315d 3a0a 2020 2020  ent_n_a[1]:.    
-00037430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037440: 7061 7265 6e74 5f6e 5f61 5b31 5d3d 277b  parent_n_a[1]='{
-00037450: 7d27 2e66 6f72 6d61 7428 696e 7428 7061  }'.format(int(pa
-00037460: 7265 6e74 5f6e 5f61 5b31 5d29 2b6e 6577  rent_n_a[1])+new
-00037470: 5f70 290a 2020 2020 2020 2020 2020 2020  _p).            
-00037480: 2020 2020 7061 7265 6e74 5f6e 3d27 2d27      parent_n='-'
-00037490: 2e6a 6f69 6e28 7061 7265 6e74 5f6e 5f61  .join(parent_n_a
-000374a0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-000374b0: 6966 2069 7369 6e73 7461 6e63 6528 7061  if isinstance(pa
-000374c0: 7265 6e74 5f6e 2c69 6e74 293a 0a20 2020  rent_n,int):.   
-000374d0: 2020 2020 2020 2020 2020 2020 2070 6172               par
-000374e0: 656e 745f 6e3d 7061 7265 6e74 5f6e 2b6e  ent_n=parent_n+n
-000374f0: 6577 5f70 0a20 2020 2020 2020 2069 6620  ew_p.        if 
-00037500: 6361 6c6c 6572 5f6e 616d 6520 6f72 2063  caller_name or c
-00037510: 616c 6c65 725f 6967 6e6f 7265 3a0a 2020  aller_ignore:.  
-00037520: 2020 2020 2020 2020 2020 6172 673d 7b27            arg={'
-00037530: 7061 7265 6e74 273a 7061 7265 6e74 5f6e  parent':parent_n
-00037540: 7d0a 2020 2020 2020 2020 2020 2020 6966  }.            if
-00037550: 2063 616c 6c65 725f 6465 7461 696c 3a0a   caller_detail:.
-00037560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037570: 6172 672e 7570 6461 7465 287b 276c 696e  arg.update({'lin
-00037580: 655f 6e75 6d62 6572 273a 5472 7565 2c27  e_number':True,'
-00037590: 6675 6c6c 5f66 696c 656e 616d 6527 3a63  full_filename':c
-000375a0: 616c 6c65 725f 6675 6c6c 5f66 696c 656e  aller_full_filen
-000375b0: 616d 652c 2766 696c 656e 616d 6527 3a54  ame,'filename':T
-000375c0: 7275 652c 2761 7267 7327 3a54 7275 657d  rue,'args':True}
-000375d0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-000375e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000375f0: 2020 2020 6172 675b 276c 696e 655f 6e75      arg['line_nu
-00037600: 6d62 6572 275d 3d63 616c 6c65 725f 6c69  mber']=caller_li
-00037610: 6e65 5f6e 756d 6265 720a 2020 2020 2020  ne_number.      
-00037620: 2020 2020 2020 2020 2020 6172 675b 2766            arg['f
-00037630: 756c 6c5f 6669 6c65 6e61 6d65 275d 3d63  ull_filename']=c
-00037640: 616c 6c65 725f 6675 6c6c 5f66 696c 656e  aller_full_filen
-00037650: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
-00037660: 2020 2020 6172 675b 2761 7267 7327 5d3d      arg['args']=
-00037670: 6361 6c6c 6572 5f61 7267 730a 2020 2020  caller_args.    
-00037680: 2020 2020 2020 2020 2020 2020 6172 675b              arg[
-00037690: 2766 696c 656e 616d 6527 5d3d 6361 6c6c  'filename']=call
-000376a0: 6572 5f66 696c 656e 616d 650a 2020 2020  er_filename.    
-000376b0: 2020 2020 2020 2020 6966 2063 616c 6c65          if calle
-000376c0: 725f 7472 6565 3a0a 2020 2020 2020 2020  r_tree:.        
-000376d0: 2020 2020 2020 2020 6172 672e 7570 6461          arg.upda
-000376e0: 7465 287b 2768 6973 746f 7279 273a 5472  te({'history':Tr
-000376f0: 7565 2c27 7472 6565 273a 5472 7565 7d29  ue,'tree':True})
-00037700: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00037710: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00037720: 2020 2061 7267 5b27 6869 7374 6f72 7927     arg['history'
-00037730: 5d3d 6361 6c6c 6572 5f68 6973 746f 7279  ]=caller_history
-00037740: 0a20 2020 2020 2020 2020 2020 2063 616c  .            cal
-00037750: 6c5f 6e61 6d65 3d46 756e 6374 696f 6e4e  l_name=FunctionN
-00037760: 616d 6528 2a2a 6172 6729 0a20 2020 2020  ame(**arg).     
-00037770: 2020 2020 2020 2069 6620 6361 6c6c 5f6e         if call_n
-00037780: 616d 653a 0a20 2020 2020 2020 2020 2020  ame:.           
-00037790: 2020 2020 2023 2069 6620 6c69 6e65 5f6e       # if line_n
-000377a0: 756d 6265 7220 616e 6420 6669 6c65 6e61  umber and filena
-000377b0: 6d65 2074 6865 6e20 7072 696e 7420 6c6f  me then print lo
-000377c0: 6767 696e 6720 6174 206e 6578 7420 6c69  gging at next li
-000377d0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-000377e0: 2020 2023 2069 6620 6461 7465 5f66 6f72     # if date_for
-000377f0: 6d61 7420 7468 656e 206c 6f67 6769 6e67  mat then logging
-00037800: 2773 2069 6e74 726f 206c 656e 6774 6820  's intro length 
-00037810: 7769 6c6c 2062 6520 6461 7465 2066 6f72  will be date for
-00037820: 6d61 740a 2020 2020 2020 2020 2020 2020  mat.            
-00037830: 2020 2020 2320 6966 206e 6f74 2064 6174      # if not dat
-00037840: 655f 666f 726d 6174 2074 6865 6e20 6c6f  e_format then lo
-00037850: 6767 696e 2773 2069 6e74 726f 206c 656e  ggin's intro len
-00037860: 6774 6820 7769 6c6c 2062 6520 7374 6570  gth will be step
-00037870: 7069 6e67 206c 656e 6774 680a 2020 2020  ping length.    
-00037880: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00037890: 7369 6e73 7461 6e63 6528 6361 6c6c 5f6e  sinstance(call_n
-000378a0: 616d 652c 7374 7229 3a20 6361 6c6c 5f6e  ame,str): call_n
-000378b0: 616d 653d 5b63 616c 6c5f 6e61 6d65 5d0a  ame=[call_name].
-000378c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000378d0: 6966 2063 616c 6c65 725f 7472 6565 206f  if caller_tree o
-000378e0: 7220 6361 6c6c 6572 5f68 6973 746f 7279  r caller_history
-000378f0: 3a20 6361 6c6c 5f6e 616d 653d 6361 6c6c  : call_name=call
-00037900: 5f6e 616d 652b 5b27 275d 2069 6620 6461  _name+[''] if da
-00037910: 7465 5f66 6f72 6d61 7420 656c 7365 2063  te_format else c
-00037920: 616c 6c5f 6e61 6d65 2b5b 2720 275d 0a20  all_name+[' ']. 
-00037930: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00037940: 6e74 726f 5f6d 7367 3d69 6e74 726f 5f6d  ntro_msg=intro_m
-00037950: 7367 2b57 7261 7053 7472 696e 6728 4a6f  sg+WrapString(Jo
-00037960: 696e 2863 616c 6c5f 6e61 6d65 2c27 5c6e  in(call_name,'\n
-00037970: 2729 2c66 7370 6163 653d 302c 206e 7370  '),fspace=0, nsp
-00037980: 6163 653d 6c65 6e28 696e 7472 6f5f 6d73  ace=len(intro_ms
-00037990: 6729 2c6d 6f64 653d 2773 7061 6365 272c  g),mode='space',
-000379a0: 6967 6e6f 7265 5f65 6d70 7479 5f65 6e64  ignore_empty_end
-000379b0: 6c69 6e65 3d46 616c 7365 2920 2b20 273a  line=False) + ':
-000379c0: 2027 0a20 2020 2020 2020 2020 2020 2020   '.             
-000379d0: 2020 2069 6e74 726f 5f6c 656e 3d69 6e74     intro_len=int
-000379e0: 726f 5f6c 656e 2b6c 656e 2863 616c 6c5f  ro_len+len(call_
-000379f0: 6e61 6d65 5b2d 315d 292b 320a 2020 2020  name[-1])+2.    
-00037a00: 2020 2020 6966 2054 7970 6528 696e 7472      if Type(intr
-00037a10: 6f2c 2773 7472 2729 2061 6e64 2069 6e74  o,'str') and int
-00037a20: 726f 3a0a 2020 2020 2020 2020 2020 2020  ro:.            
-00037a30: 696e 7472 6f5f 6d73 673d 696e 7472 6f5f  intro_msg=intro_
-00037a40: 6d73 672b 696e 7472 6f2b 273a 2027 0a20  msg+intro+': '. 
-00037a50: 2020 2020 2020 2020 2020 2069 6e74 726f             intro
-00037a60: 5f6c 656e 3d69 6e74 726f 5f6c 656e 2b6c  _len=intro_len+l
-00037a70: 656e 2869 6e74 726f 292b 320a 0a20 2020  en(intro)+2..   
-00037a80: 2023 204d 616b 6520 696e 7075 7420 6461   # Make input da
-00037a90: 7461 2074 6f20 6120 7374 7269 6e67 206d  ta to a string m
-00037aa0: 7367 200a 2020 2020 6966 2073 7461 7274  sg .    if start
-00037ab0: 5f6e 6577 6c69 6e65 3a0a 2020 2020 2020  _newline:.      
-00037ac0: 2020 6966 206c 656e 286d 7367 2920 616e    if len(msg) an
-00037ad0: 6420 6973 696e 7374 616e 6365 286d 7367  d isinstance(msg
-00037ae0: 5b30 5d2c 7374 7229 2061 6e64 206c 656e  [0],str) and len
-00037af0: 286d 7367 5b30 5d29 2061 6e64 206d 7367  (msg[0]) and msg
-00037b00: 5b30 5d5b 305d 203d 3d20 275c 6e27 3a20  [0][0] == '\n': 
-00037b10: 6d73 675b 305d 3d6d 7367 5b30 5d5b 313a  msg[0]=msg[0][1:
-00037b20: 5d0a 2020 2020 2020 2020 6966 2073 7461  ].        if sta
-00037b30: 7274 5f6e 6577 6c69 6e65 203d 3d20 2761  rt_newline == 'a
-00037b40: 7574 6f27 3a0a 2020 2020 2020 2020 2020  uto':.          
-00037b50: 2020 6966 2070 7269 6e74 665f 6e65 776c    if printf_newl
-00037b60: 696e 655f 696e 666f 2e47 6574 2864 7370  ine_info.Get(dsp
-00037b70: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00037b80: 2020 2073 7461 7274 5f6e 6577 6c69 6e65     start_newline
-00037b90: 3d27 5c6e 270a 2020 2020 2020 2020 2020  ='\n'.          
-00037ba0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00037bb0: 2020 2020 2020 2020 7374 6172 745f 6e65          start_ne
-00037bc0: 776c 696e 653d 2727 0a20 2020 206d 7367  wline=''.    msg
-00037bd0: 5f73 7472 3d6d 7367 5f6d 616b 6572 282a  _str=msg_maker(*
-00037be0: 6d73 672c 6d73 675f 7370 6c69 743d 6d73  msg,msg_split=ms
-00037bf0: 675f 7370 6c69 742c 696e 7472 6f5f 6c65  g_split,intro_le
-00037c00: 6e3d 696e 7472 6f5f 6c65 6e2c 696e 7472  n=intro_len,intr
-00037c10: 6f5f 6d73 673d 2727 2069 6620 6e6f 5f69  o_msg='' if no_i
-00037c20: 6e74 726f 2069 7320 4e6f 6e65 2065 6c73  ntro is None els
-00037c30: 6520 696e 7472 6f5f 6d73 6729 0a23 2044  e intro_msg).# D
-00037c40: 4f6e 2774 206e 6565 6420 6265 6c6f 7720  On't need below 
-00037c50: 636f 6465 0a23 2020 2020 6966 206e 6577  code.#    if new
-00037c60: 5f6c 696e 653a 0a23 2020 2020 2020 2020  _line:.#        
-00037c70: 6966 206d 7367 5f73 7472 2061 6e64 206d  if msg_str and m
-00037c80: 7367 5f73 7472 5b2d 315d 203d 3d20 275c  sg_str[-1] == '\
-00037c90: 6e27 3a20 6d73 675f 7374 723d 6d73 675f  n': msg_str=msg_
-00037ca0: 7374 725b 3a2d 315d 0a0a 2020 2020 2323  str[:-1]..    ##
-00037cb0: 2069 6620 656e 6420 6f66 206c 696e 6520   if end of line 
-00037cc0: 6861 7665 206e 6f20 6e65 776c 696e 652c  have no newline,
-00037cd0: 2062 7574 2069 7420 6861 7320 696e 7472   but it has intr
-00037ce0: 6f20 7468 656e 2061 6464 696e 6720 7374  o then adding st
-00037cf0: 6172 745f 6e65 776c 696e 650a 2020 2020  art_newline.    
-00037d00: 2369 6620 696e 7472 6f5f 6d73 6720 616e  #if intro_msg an
-00037d10: 6420 6e6f 7420 6e6f 5f73 7461 7274 5f6e  d not no_start_n
-00037d20: 6577 6c69 6e65 3a0a 2020 2020 2320 2020  ewline:.    #   
-00037d30: 2069 6620 7072 696e 7466 5f6e 6577 6c69   if printf_newli
-00037d40: 6e65 5f69 6e66 6f2e 4765 7428 6473 7029  ne_info.Get(dsp)
-00037d50: 3a20 0a20 2020 2023 2020 2020 2020 2020  : .    #        
-00037d60: 7374 6172 745f 6e65 776c 696e 653d 275c  start_newline='\
-00037d70: 6e27 0a0a 2020 2020 2344 4247 204d 4f44  n'..    #DBG MOD
-00037d80: 4520 666f 7220 7072 696e 7469 6e67 0a20  E for printing. 
-00037d90: 2020 2073 6372 5f64 6267 5f70 7269 6e74     scr_dbg_print
-00037da0: 3d46 616c 7365 0a20 2020 2069 6620 7363  =False.    if sc
-00037db0: 725f 6462 6720 6973 2054 7275 653a 0a20  r_dbg is True:. 
-00037dc0: 2020 2020 2020 2069 6620 7363 725f 6462         if scr_db
-00037dd0: 675f 636f 6e64 6974 696f 6e20 6973 204e  g_condition is N
-00037de0: 6f6e 6520 6f72 206d 7367 5f73 7472 203d  one or msg_str =
-00037df0: 3d20 7363 725f 6462 675f 636f 6e64 6974  = scr_dbg_condit
-00037e00: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
-00037e10: 2073 6372 5f64 6267 5f70 7269 6e74 3d54   scr_dbg_print=T
-00037e20: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-00037e30: 6172 673d 7b27 7061 7265 6e74 273a 2731  arg={'parent':'1
-00037e40: 2d39 272c 276c 696e 655f 6e75 6d62 6572  -9','line_number
-00037e50: 273a 5472 7565 2c27 6669 6c65 6e61 6d65  ':True,'filename
-00037e60: 273a 5472 7565 2c27 6172 6773 273a 4661  ':True,'args':Fa
-00037e70: 6c73 652c 2768 6973 746f 7279 273a 5472  lse,'history':Tr
-00037e80: 7565 2c27 7472 6565 273a 5472 7565 7d0a  ue,'tree':True}.
-00037e90: 2020 2020 2020 2020 2020 2020 6361 6c6c              call
-00037ea0: 5f6e 616d 653d 4675 6e63 7469 6f6e 4e61  _name=FunctionNa
-00037eb0: 6d65 282a 2a61 7267 290a 2020 2020 2020  me(**arg).      
-00037ec0: 2020 2020 2020 7072 696e 7428 272d 2d2d        print('---
-00037ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 4655 4e43 5449  ----------FUNCTI
-00037ee0: 4f4e 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ON--------------
-00037ef0: 2d2d 2d2d 2d2d 2729 0a20 2020 2020 2020  ------').       
-00037f00: 2020 2020 2070 7269 6e74 284a 6f69 6e28       print(Join(
-00037f10: 6361 6c6c 5f6e 616d 652c 275c 6e27 2929  call_name,'\n'))
-00037f20: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00037f30: 6e74 2827 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  nt('------------
-00037f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d27 290a  -------------').
-00037f60: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00037f70: 7428 276c 6f67 2020 2020 2020 2020 2020  t('log          
-00037f80: 2020 2020 2020 2020 203a 7b7d 2028 6675           :{} (fu
-00037f90: 6e63 7469 6f6e 3a7b 7d3a 7b7d 2927 2e66  nction:{}:{})'.f
-00037fa0: 6f72 6d61 7428 6c6f 672c 4973 4675 6e63  ormat(log,IsFunc
-00037fb0: 7469 6f6e 286c 6f67 292c 6f70 7473 2929  tion(log),opts))
-00037fc0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00037fd0: 6e74 2827 6c6f 6766 696c 6520 2020 2020  nt('logfile     
-00037fe0: 2020 2020 2020 2020 2020 3a7b 7d27 2e66            :{}'.f
-00037ff0: 6f72 6d61 7428 6c6f 6766 696c 6529 290a  ormat(logfile)).
-00038000: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00038010: 7428 276e 6577 6c69 6e65 2069 6e66 6f20  t('newline info 
-00038020: 2020 2020 2020 2020 203a 7b7d 272e 666f           :{}'.fo
-00038030: 726d 6174 2870 7269 6e74 665f 6e65 776c  rmat(printf_newl
-00038040: 696e 655f 696e 666f 2e64 6174 6129 290a  ine_info.data)).
-00038050: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00038060: 7428 2766 6f72 6365 206e 6f20 7374 6172  t('force no star
-00038070: 7420 6e65 776c 696e 653a 7b7d 272e 666f  t newline:{}'.fo
-00038080: 726d 6174 286e 6f5f 7374 6172 745f 6e65  rmat(no_start_ne
-00038090: 776c 696e 6529 290a 2020 2020 2020 2020  wline)).        
-000380a0: 2020 2020 7072 696e 7428 276e 6577 6c69      print('newli
-000380b0: 6e65 2020 2020 2020 2020 2020 2020 2020  ne              
-000380c0: 203a 2864 6972 6563 743a 7b7d 2c73 7461   :(direct:{},sta
-000380d0: 7274 3a7b 7d2c 656e 643a 7b7d 2927 2e66  rt:{},end:{})'.f
-000380e0: 6f72 6d61 7428 6469 7265 6374 2c54 7275  ormat(direct,Tru
-000380f0: 6520 6966 2073 7461 7274 5f6e 6577 6c69  e if start_newli
-00038100: 6e65 2065 6c73 6520 4661 6c73 652c 5472  ne else False,Tr
-00038110: 7565 2069 6620 6e65 775f 6c69 6e65 2065  ue if new_line e
-00038120: 6c73 6520 4661 6c73 6529 290a 2020 2020  lse False)).    
-00038130: 2020 2020 2020 2020 7072 696e 7428 2769          print('i
-00038140: 676e 6f72 655f 656d 7074 7920 2020 2020  gnore_empty     
-00038150: 2020 2020 203a 7b7d 272e 666f 726d 6174       :{}'.format
-00038160: 2869 676e 6f72 655f 656d 7074 7929 290a  (ignore_empty)).
-00038170: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00038180: 7428 276d 6573 7361 6765 2020 2020 2020  t('message      
-00038190: 2020 2020 2020 2020 203a 5b7b 7d5d 272e           :[{}]'.
-000381a0: 666f 726d 6174 286d 7367 2929 0a20 2020  format(msg)).   
-000381b0: 2020 2020 2020 2020 2070 7269 6e74 2827           print('
-000381c0: 696e 7472 6f20 2020 2020 2020 2020 2020  intro           
-000381d0: 2020 2020 2020 3a5b 7b7d 5d27 2e66 6f72        :[{}]'.for
-000381e0: 6d61 7428 696e 7472 6f5f 6d73 6729 290a  mat(intro_msg)).
-000381f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00038200: 7428 276c 6f67 206c 6576 656c 2020 2020  t('log level    
-00038210: 2020 2020 2020 2020 203a 7b7d 203c 207b           :{} < {
-00038220: 7d20 2870 7269 6e74 3a7b 7d29 272e 666f  } (print:{})'.fo
-00038230: 726d 6174 2870 7269 6e74 665f 6c6f 675f  rmat(printf_log_
-00038240: 6261 7365 2c6c 6f67 5f6c 6576 656c 2c20  base,log_level, 
-00038250: 7072 696e 7466 5f6c 6f67 5f62 6173 6520  printf_log_base 
-00038260: 3c20 6c6f 675f 6c65 7665 6c20 6966 2049  < log_level if I
-00038270: 7349 6e74 2870 7269 6e74 665f 6c6f 675f  sInt(printf_log_
-00038280: 6261 7365 2920 616e 6420 4973 496e 7428  base) and IsInt(
-00038290: 6c6f 675f 6c65 7665 6c29 2065 6c73 6520  log_level) else 
-000382a0: 5472 7565 2929 0a20 2020 2020 2020 2020  True)).         
-000382b0: 2020 2070 7269 6e74 2827 6265 666f 7265     print('before
-000382c0: 206d 6f64 6520 7072 696e 7420 2020 2020   mode print     
-000382d0: 3a5b 7b7d 5d27 2e66 6f72 6d61 7428 7374  :[{}]'.format(st
-000382e0: 6172 745f 6e65 776c 696e 652b 6d73 675f  art_newline+msg_
-000382f0: 7374 722b 6e65 775f 6c69 6e65 2929 0a0a  str+new_line))..
-00038300: 2020 2020 2320 5361 7665 2074 6f20 6669      # Save to fi
-00038310: 6c65 206f 7220 7072 696e 7420 746f 2073  le or print to s
-00038320: 6372 6565 6e20 6669 6c74 6572 2077 6974  creen filter wit
-00038330: 6820 6c6f 675f 6c65 7665 6c20 616e 6420  h log_level and 
-00038340: 616c 7265 6164 7920 6c6f 6767 696e 6720  already logging 
-00038350: 7769 7468 206c 6f67 2066 756e 6374 696f  with log functio
-00038360: 6e20 6f72 206e 6f74 2e0a 2020 2020 6966  n or not..    if
-00038370: 2027 6427 2069 6e20 6473 7020 616e 6420   'd' in dsp and 
-00038380: 4973 496e 7428 7072 696e 7466 5f6c 6f67  IsInt(printf_log
-00038390: 5f62 6173 6529 2061 6e64 2049 7349 6e74  _base) and IsInt
-000383a0: 286c 6f67 5f6c 6576 656c 293a 0a20 2020  (log_level):.   
-000383b0: 2020 2020 2069 6620 7072 696e 7466 5f6c       if printf_l
-000383c0: 6f67 5f62 6173 6520 3c20 6c6f 675f 6c65  og_base < log_le
-000383d0: 7665 6c3a 0a20 2020 2020 2020 2020 2020  vel:.           
-000383e0: 2072 6574 7572 6e0a 2020 2020 2320 6966   return.    # if
-000383f0: 206a 7573 7420 7768 6974 6573 7061 6365   just whitespace
-00038400: 2074 6865 6e20 6e6f 7420 6e65 776c 696e   then not newlin
-00038410: 652c 2073 6f6d 6574 6869 6e67 2065 6c73  e, something els
-00038420: 6520 7769 7468 2064 6174 6120 7468 656e  e with data then
-00038430: 2077 6861 7420 6576 6572 0a20 2020 2023   what ever.    #
-00038440: 2053 6176 6520 6d73 6720 746f 206c 6f67   Save msg to log
-00038450: 6669 6c65 2077 6865 6e20 6465 6669 6e65  file when define
-00038460: 6420 6c6f 6766 696c 650a 2020 2020 6966  d logfile.    if
-00038470: 206c 6f67 6669 6c65 3a20 2320 616c 6c20   logfile: # all 
-00038480: 6d6f 6465 2063 616e 2028 6576 656e 2069  mode can (even i
-00038490: 6620 642c 2066 2c20 6929 206a 7573 7420  f d, f, i) just 
-000384a0: 6c6f 6769 6e67 2074 6f20 6669 6c65 2e0a  loging to file..
-000384b0: 2020 2020 2020 2020 666f 7220 6969 2069          for ii i
-000384c0: 6e20 6c6f 6766 696c 653a 0a20 2020 2020  n logfile:.     
-000384d0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-000384e0: 616e 6365 2869 692c 7374 7229 2061 6e64  ance(ii,str) and
-000384f0: 2069 693a 0a20 2020 2020 2020 2020 2020   ii:.           
-00038500: 2020 2020 2069 695f 643d 6f73 2e70 6174       ii_d=os.pat
-00038510: 682e 6469 726e 616d 6528 6969 290a 2020  h.dirname(ii).  
-00038520: 2020 2020 2020 2020 2020 2020 2020 6969                ii
-00038530: 5f64 3d69 695f 6420 6966 2069 695f 6420  _d=ii_d if ii_d 
-00038540: 656c 7365 2027 2e27 2023 2049 6620 6a75  else '.' # If ju
-00038550: 7374 2066 696c 656e 616d 6520 7468 656e  st filename then
-00038560: 2064 6972 6563 746f 7279 2074 6f20 2e28   directory to .(
-00038570: 6375 7272 656e 7420 6469 7265 6374 6f72  current director
-00038580: 7929 0a20 2020 2020 2020 2020 2020 2020  y).             
-00038590: 2020 2069 6620 6969 2061 6e64 206f 732e     if ii and os.
-000385a0: 7061 7468 2e69 7364 6972 2869 695f 6429  path.isdir(ii_d)
-000385b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000385c0: 2020 2020 2020 6966 206e 6f74 206d 7367        if not msg
-000385d0: 5f73 7472 3a0a 2020 2020 2020 2020 2020  _str:.          
-000385e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000385f0: 2064 6267 5f65 6d70 7479 2061 6e64 206e   dbg_empty and n
-00038600: 6f74 2069 676e 6f72 655f 656d 7074 793a  ot ignore_empty:
-00038610: 2020 2023 2049 676e 6f72 6520 656d 7074     # Ignore empt
-00038620: 7920 6461 7461 206f 6e20 7363 7265 656e  y data on screen
-00038630: 2077 2f6f 2064 6562 7567 6769 6e67 200a   w/o debugging .
-00038640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038650: 2020 2020 2020 2020 2020 2020 7061 7265              pare
-00038660: 6e74 5f6e 3d6f 7074 732e 6765 7428 2763  nt_n=opts.get('c
-00038670: 616c 6c65 725f 7061 7265 6e74 2729 2069  aller_parent') i
-00038680: 6620 6973 696e 7374 616e 6365 286f 7074  f isinstance(opt
-00038690: 732e 6765 7428 2763 616c 6c65 725f 7061  s.get('caller_pa
-000386a0: 7265 6e74 2729 2c69 6e74 2920 656c 7365  rent'),int) else
-000386b0: 2031 0a20 2020 2020 2020 2020 2020 2020   1.             
-000386c0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-000386d0: 7267 3d7b 2770 6172 656e 7427 3a70 6172  rg={'parent':par
-000386e0: 656e 745f 6e2c 276c 696e 655f 6e75 6d62  ent_n,'line_numb
-000386f0: 6572 273a 5472 7565 2c27 6669 6c65 6e61  er':True,'filena
-00038700: 6d65 273a 5472 7565 2c27 6172 6773 273a  me':True,'args':
-00038710: 4661 6c73 652c 2768 6973 746f 7279 273a  False,'history':
-00038720: 4661 6c73 652c 2774 7265 6527 3a46 616c  False,'tree':Fal
-00038730: 7365 7d0a 2020 2020 2020 2020 2020 2020  se}.            
-00038740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038750: 6361 6c6c 5f6e 616d 653d 4675 6e63 7469  call_name=Functi
-00038760: 6f6e 4e61 6d65 282a 2a61 7267 290a 2020  onName(**arg).  
-00038770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038780: 2020 2020 2020 2020 2020 6d73 675f 7374            msg_st
-00038790: 723d 696e 7472 6f5f 6d73 6720 2b20 436f  r=intro_msg + Co
-000387a0: 6c6f 7253 7472 2857 7261 7053 7472 696e  lorStr(WrapStrin
-000387b0: 6728 275b 2a2a 2045 6d70 7479 2d44 6174  g('[** Empty-Dat
-000387c0: 6120 2a2a 5d20 287b 7d29 272e 666f 726d  a **] ({})'.form
-000387d0: 6174 2863 616c 6c5f 6e61 6d65 292c 6673  at(call_name),fs
-000387e0: 7061 6365 3d69 6e74 726f 5f6c 656e 2c20  pace=intro_len, 
-000387f0: 6e73 7061 6365 3d69 6e74 726f 5f6c 656e  nspace=intro_len
-00038800: 2c6d 6f64 653d 2773 7061 6365 2729 2c2a  ,mode='space'),*
-00038810: 2a6f 7074 7329 0a20 2020 2020 2020 2020  *opts).         
-00038820: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00038830: 7420 6d73 675f 7374 723a 2072 6574 7572  t msg_str: retur
-00038840: 6e0a 0a20 2020 2020 2020 2020 2020 2020  n..             
-00038850: 2020 2020 2020 2023 2069 6620 656e 6420         # if end 
-00038860: 6f66 206c 696e 6520 6861 7665 206e 6f20  of line have no 
-00038870: 6e65 776c 696e 652c 2062 7574 2069 7420  newline, but it 
-00038880: 6861 7320 696e 7472 6f20 7468 656e 2061  has intro then a
-00038890: 6464 696e 6720 7374 6172 745f 6e65 776c  dding start_newl
-000388a0: 696e 650a 2020 2020 2020 2020 2020 2020  ine.            
-000388b0: 2020 2020 2020 2020 6966 2069 6e74 726f          if intro
-000388c0: 5f6d 7367 2061 6e64 206e 6f74 206e 6f5f  _msg and not no_
-000388d0: 7374 6172 745f 6e65 776c 696e 653a 0a20  start_newline:. 
-000388e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000388f0: 2020 2020 2020 2069 6620 7072 696e 7466         if printf
-00038900: 5f6e 6577 6c69 6e65 5f69 6e66 6f2e 4765  _newline_info.Ge
-00038910: 7428 4279 7465 7328 6969 2929 3a20 0a20  t(Bytes(ii)): . 
-00038920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038930: 2020 2020 2020 2020 2020 2073 7461 7274             start
-00038940: 5f6e 6577 6c69 6e65 3d27 5c6e 270a 2020  _newline='\n'.  
-00038950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038960: 2020 6966 2073 6372 5f64 6267 5f70 7269    if scr_dbg_pri
-00038970: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
-00038980: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00038990: 7428 276d 6f64 6520 2020 2020 2020 2020  t('mode         
-000389a0: 2020 2020 2020 2020 203a 7b7d 2028 6265           :{} (be
-000389b0: 666f 7265 206e 6f20 6e65 776c 696e 653a  fore no newline:
-000389c0: 7b7d 2927 2e66 6f72 6d61 7428 6969 2c54  {})'.format(ii,T
-000389d0: 7275 6520 6966 2070 7269 6e74 665f 6e65  rue if printf_ne
-000389e0: 776c 696e 655f 696e 666f 2e47 6574 2842  wline_info.Get(B
-000389f0: 7974 6573 2869 6929 2920 656c 7365 2046  ytes(ii)) else F
-00038a00: 616c 7365 2929 0a20 2020 2020 2020 2020  alse)).         
-00038a10: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00038a20: 7269 6e74 2827 7570 6461 7465 6420 7374  rint('updated st
-00038a30: 6172 7420 6e65 776c 696e 6520 3a7b 7d27  art newline :{}'
-00038a40: 2e66 6f72 6d61 7428 5472 7565 2069 6620  .format(True if 
-00038a50: 7374 6172 745f 6e65 776c 696e 6520 656c  start_newline el
-00038a60: 7365 2046 616c 7365 2929 0a20 2020 2020  se False)).     
-00038a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038a80: 2020 2070 7269 6e74 2827 7072 696e 7420     print('print 
-00038a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038aa0: 3a5b 7b7d 5d27 2e66 6f72 6d61 7428 7374  :[{}]'.format(st
-00038ab0: 6172 745f 6e65 776c 696e 652b 6d73 675f  art_newline+msg_
-00038ac0: 7374 722b 6e65 775f 6c69 6e65 2929 0a20  str+new_line)). 
-00038ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038ae0: 2020 2020 2020 2070 7269 6e74 2827 2d2d         print('--
-00038af0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038b00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038b10: 2d2d 2d2d 2d2d 2d27 290a 2020 2020 2020  -------').      
-00038b20: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
-00038b30: 675f 703d 5472 7565 2020 2320 7772 6974  g_p=True  # writ
-00038b40: 696e 6720 746f 206c 6f67 5f66 696c 650a  ing to log_file.
-00038b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038b60: 2020 2020 7769 7468 206f 7065 6e28 6969      with open(ii
-00038b70: 2c27 612b 2729 2061 7320 663a 0a20 2020  ,'a+') as f:.   
-00038b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038b90: 2020 2020 2066 2e77 7269 7465 2873 7461       f.write(sta
-00038ba0: 7274 5f6e 6577 6c69 6e65 2b6d 7367 5f73  rt_newline+msg_s
-00038bb0: 7472 2b6e 6577 5f6c 696e 6529 0a20 2020  tr+new_line).   
+00036330: 2020 613d 436f 6c6f 7253 7472 2857 7261    a=ColorStr(Wra
+00036340: 7053 7472 696e 6728 5374 7228 6969 2c64  pString(Str(ii,d
+00036350: 6566 6175 6c74 3d27 6f72 6727 292c 6673  efault='org'),fs
+00036360: 7061 6365 3d30 2069 6620 6e6f 7420 6d73  pace=0 if not ms
+00036370: 675f 7374 7220 6f72 206d 7367 5f73 706c  g_str or msg_spl
+00036380: 6974 2021 3d20 275c 6e27 206f 7220 5454  it != '\n' or TT
+00036390: 2065 6c73 6520 696e 7472 6f5f 6c65 6e2c   else intro_len,
+000363a0: 206e 7370 6163 653d 696e 7472 6f5f 6c65   nspace=intro_le
+000363b0: 6e2c 6d6f 6465 3d27 7370 6163 6527 292c  n,mode='space'),
+000363c0: 2a2a 6f70 7473 290a 2020 2020 2020 2020  **opts).        
+000363d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000363e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000363f0: 2020 613d 436f 6c6f 7253 7472 2853 7472    a=ColorStr(Str
+00036400: 2869 692c 6465 6661 756c 743d 276f 7267  (ii,default='org
+00036410: 2729 2c2a 2a6f 7074 7329 0a20 2020 2020  '),**opts).     
+00036420: 2020 2020 2020 2020 2020 2023 5265 636f             #Reco
+00036430: 7665 7220 6164 6465 6420 5420 666f 7220  ver added T for 
+00036440: 7772 6170 7069 6e67 2066 6f72 6d61 7420  wrapping format 
+00036450: 746f 206f 7269 6769 6e61 6c0a 2020 2020  to original.    
+00036460: 2020 2020 2020 2020 2020 2020 6966 2054              if T
+00036470: 5420 616e 6420 275c 6e27 2069 6e20 6969  T and '\n' in ii
+00036480: 2061 6e64 2069 692e 7265 706c 6163 6528   and ii.replace(
+00036490: 275c 6e27 2c27 2729 203d 3d20 2754 273a  '\n','') == 'T':
+000364a0: 2061 3d61 5b3a 2d31 5d0a 2020 2020 2020   a=a[:-1].      
+000364b0: 2020 2020 2020 6966 206d 7367 5f73 7472        if msg_str
+000364c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000364d0: 2020 6966 2054 543a 0a20 2020 2020 2020    if TT:.       
+000364e0: 2020 2020 2020 2020 2020 2020 2023 6966               #if
+000364f0: 206d 6573 7361 6765 2073 706c 6974 6572   message spliter
+00036500: 2065 7869 7374 2061 6e64 2066 6978 2074   exist and fix t
+00036510: 6f20 6669 7273 7420 6368 6172 6163 7465  o first characte
+00036520: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
+00036530: 2020 2020 2020 6966 2054 5420 3d3d 2031        if TT == 1
+00036540: 2061 6e64 206e 6f74 2069 692e 7265 706c   and not ii.repl
+00036550: 6163 6528 275c 6e27 2c27 2729 3a0a 2020  ace('\n',''):.  
+00036560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036570: 2020 2020 2020 6d73 675f 7374 723d 6d73        msg_str=ms
+00036580: 675f 7374 7220 2b20 6d73 675f 7370 6c69  g_str + msg_spli
+00036590: 7420 2b20 610a 2020 2020 2020 2020 2020  t + a.          
+000365a0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000365b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000365c0: 2020 2020 2020 2020 6d73 675f 7374 723d          msg_str=
+000365d0: 6d73 675f 7374 7220 2b20 610a 2020 2020  msg_str + a.    
+000365e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000365f0: 6966 2069 692e 7265 706c 6163 6528 275c  if ii.replace('\
+00036600: 6e27 2c27 2729 3a20 5454 3d30 2023 2072  n',''): TT=0 # r
+00036610: 656d 6f76 6520 7370 6563 6961 6c20 666f  emove special fo
+00036620: 726d 6174 2074 6167 0a20 2020 2020 2020  rmat tag.       
+00036630: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00036640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036650: 2020 206d 7367 5f73 7472 3d6d 7367 5f73     msg_str=msg_s
+00036660: 7472 202b 206d 7367 5f73 706c 6974 202b  tr + msg_split +
+00036670: 2061 0a20 2020 2020 2020 2020 2020 2065   a.            e
+00036680: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00036690: 2020 2020 2069 6620 696e 7472 6f5f 6d73       if intro_ms
+000366a0: 673a 0a20 2020 2020 2020 2020 2020 2020  g:.             
+000366b0: 2020 2020 2020 206d 7367 5f73 7472 3d69         msg_str=i
+000366c0: 6e74 726f 5f6d 7367 202b 2061 200a 2020  ntro_msg + a .  
+000366d0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000366e0: 6966 2069 6e74 726f 5f6c 656e 3a0a 2020  if intro_len:.  
+000366f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036700: 2020 6d73 675f 7374 723d 2053 7061 6365    msg_str= Space
+00036710: 286e 756d 3d69 6e74 726f 5f6c 656e 2920  (num=intro_len) 
+00036720: 2b20 610a 2020 2020 2020 2020 2020 2020  + a.            
+00036730: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00036740: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
+00036750: 675f 7374 723d 6120 0a20 2020 2020 2020  g_str=a .       
+00036760: 2020 2020 2023 2069 6620 656e 6420 6f66       # if end of
+00036770: 2074 6865 206c 696e 6520 6861 7320 6578   the line has ex
+00036780: 7472 6120 275c 6e27 2074 6865 6e20 7265  tra '\n' then re
+00036790: 636f 7665 7220 7468 6520 6c6f 7374 6564  cover the losted
+000367a0: 2027 5c6e 2720 6279 2057 7261 7053 7472   '\n' by WrapStr
+000367b0: 696e 6728 290a 2020 2020 2020 2020 2020  ing().          
+000367c0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+000367d0: 6969 2c73 7472 2920 616e 6420 6c65 6e28  ii,str) and len(
+000367e0: 6969 2920 3e20 3120 616e 6420 6969 5b2d  ii) > 1 and ii[-
+000367f0: 315d 203d 3d20 275c 6e27 3a0a 2020 2020  1] == '\n':.    
+00036800: 2020 2020 2020 2020 2020 2020 6d73 675f              msg_
+00036810: 7374 723d 6d73 675f 7374 7220 2b20 6969  str=msg_str + ii
+00036820: 5b2d 315d 0a20 2020 2020 2020 2072 6574  [-1].        ret
+00036830: 7572 6e20 6d73 675f 7374 720a 0a20 2020  urn msg_str..   
+00036840: 2023 4765 7420 4c6f 6766 696c 6520 696e   #Get Logfile in
+00036850: 666f 726d 6174 696f 6e20 666f 7220 4f4c  formation for OL
+00036860: 4420 7665 7273 696f 6e20 616e 6420 7265  D version and re
+00036870: 6d6f 7665 2074 6865 204c 6f67 6669 6c65  move the Logfile
+00036880: 2069 6e66 6f72 6d61 7469 6f6e 2069 6e20   information in 
+00036890: 7468 6520 6d65 7373 6167 6573 0a20 2020  the messages.   
+000368a0: 2069 6620 6973 696e 7374 616e 6365 286c   if isinstance(l
+000368b0: 6f67 6669 6c65 2c73 7472 293a 0a20 2020  ogfile,str):.   
+000368c0: 2020 2020 206c 6f67 6669 6c65 3d6c 6f67       logfile=log
+000368d0: 6669 6c65 2e73 706c 6974 2827 2c27 290a  file.split(',').
+000368e0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+000368f0: 6e63 6528 6c6f 6766 696c 652c 7475 706c  nce(logfile,tupl
+00036900: 6529 3a0a 2020 2020 2020 2020 6c6f 6766  e):.        logf
+00036910: 696c 653d 6c69 7374 2874 7570 6c65 290a  ile=list(tuple).
+00036920: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+00036930: 7461 6e63 6528 6c6f 6766 696c 652c 6c69  tance(logfile,li
+00036940: 7374 293a 0a20 2020 2020 2020 206c 6f67  st):.        log
+00036950: 6669 6c65 3d5b 5d0a 2020 2020 666f 7220  file=[].    for 
+00036960: 6969 2069 6e20 6d73 673a 0a20 2020 2020  ii in msg:.     
+00036970: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00036980: 2869 692c 7374 7229 2061 6e64 2027 3a27  (ii,str) and ':'
+00036990: 2069 6e20 6969 3a0a 2020 2020 2020 2020   in ii:.        
+000369a0: 2020 2020 6c6f 6766 696c 655f 6c69 7374      logfile_list
+000369b0: 3d69 692e 7370 6c69 7428 273a 2729 0a20  =ii.split(':'). 
+000369c0: 2020 2020 2020 2020 2020 2069 6620 6c6f             if lo
+000369d0: 6766 696c 655f 6c69 7374 5b30 5d20 696e  gfile_list[0] in
+000369e0: 205b 276c 6f67 5f66 696c 6527 2c27 6c6f   ['log_file','lo
+000369f0: 6766 696c 6527 5d3a 0a20 2020 2020 2020  gfile']:.       
+00036a00: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+00036a10: 6c6f 6766 696c 655f 6c69 7374 2920 3e20  logfile_list) > 
+00036a20: 323a 0a20 2020 2020 2020 2020 2020 2020  2:.             
+00036a30: 2020 2020 2020 2066 6f72 206a 6a20 696e         for jj in
+00036a40: 206c 6f67 6669 6c65 5f6c 6973 745b 313a   logfile_list[1:
+00036a50: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00036a60: 2020 2020 2020 2020 2020 206c 6f67 6669             logfi
+00036a70: 6c65 2e61 7070 656e 6428 6a6a 290a 2020  le.append(jj).  
+00036a80: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00036a90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00036aa0: 2020 2020 2020 2020 6c6f 6766 696c 653d          logfile=
+00036ab0: 6c6f 6766 696c 652b 6c6f 6766 696c 655f  logfile+logfile_
+00036ac0: 6c69 7374 5b31 5d2e 7370 6c69 7428 272c  list[1].split(',
+00036ad0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+00036ae0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00036af0: 286d 7367 2c74 7570 6c65 293a 0a20 2020  (msg,tuple):.   
+00036b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036b10: 206d 7367 3d6c 6973 7428 6d73 6729 0a20   msg=list(msg). 
+00036b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036b30: 2020 206d 7367 2e72 656d 6f76 6528 6969     msg.remove(ii
+00036b40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00036b50: 2020 2020 2020 6d73 673d 7475 706c 6528        msg=tuple(
+00036b60: 6d73 6729 0a20 2020 2020 2020 2020 2020  msg).           
+00036b70: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00036b80: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00036b90: 7367 2e72 656d 6f76 6528 6969 290a 2020  sg.remove(ii).  
+00036ba0: 2020 0a20 2020 2023 2073 6176 6520 6d73    .    # save ms
+00036bb0: 6728 7265 6d6f 7665 6420 6c6f 675f 6669  g(removed log_fi
+00036bc0: 6c65 2069 6e66 6f72 6d61 7469 6f6e 2920  le information) 
+00036bd0: 746f 2073 7973 6c6f 6764 200a 2020 2020  to syslogd .    
+00036be0: 6966 2073 7973 6c6f 6764 3a0a 2020 2020  if syslogd:.    
+00036bf0: 2020 2020 2320 4d61 6b65 2061 206d 6573      # Make a mes
+00036c00: 7361 6765 2074 6f20 7369 6e67 6c65 206c  sage to single l
+00036c10: 696e 650a 2020 2020 2020 2020 746d 705f  ine.        tmp_
+00036c20: 7374 723d 6d73 675f 6d61 6b65 7228 2a6d  str=msg_maker(*m
+00036c30: 7367 2c6d 7367 5f73 706c 6974 3d6d 7367  sg,msg_split=msg
+00036c40: 5f73 706c 6974 290a 2020 2020 2020 2020  _split).        
+00036c50: 6966 2073 7973 6c6f 6764 2069 6e20 5b27  if syslogd in ['
+00036c60: 494e 464f 272c 2769 6e66 6f27 5d3a 0a20  INFO','info']:. 
+00036c70: 2020 2020 2020 2020 2020 2073 7973 6c6f             syslo
+00036c80: 672e 7379 736c 6f67 2873 7973 6c6f 672e  g.syslog(syslog.
+00036c90: 4c4f 475f 494e 464f 2c74 6d70 5f73 7472  LOG_INFO,tmp_str
+00036ca0: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
+00036cb0: 7973 6c6f 6764 2069 6e20 5b27 4b45 524e  yslogd in ['KERN
+00036cc0: 272c 276b 6572 6e27 5d3a 0a20 2020 2020  ','kern']:.     
+00036cd0: 2020 2020 2020 2073 7973 6c6f 672e 7379         syslog.sy
+00036ce0: 736c 6f67 2873 7973 6c6f 672e 4c4f 475f  slog(syslog.LOG_
+00036cf0: 4b45 524e 2c74 6d70 5f73 7472 290a 2020  KERN,tmp_str).  
+00036d00: 2020 2020 2020 656c 6966 2073 7973 6c6f        elif syslo
+00036d10: 6764 2069 6e20 5b27 4552 5227 2c27 6572  gd in ['ERR','er
+00036d20: 7227 5d3a 0a20 2020 2020 2020 2020 2020  r']:.           
+00036d30: 2073 7973 6c6f 672e 7379 736c 6f67 2873   syslog.syslog(s
+00036d40: 7973 6c6f 672e 4c4f 475f 4552 522c 746d  yslog.LOG_ERR,tm
+00036d50: 705f 7374 7229 0a20 2020 2020 2020 2065  p_str).        e
+00036d60: 6c69 6620 7379 736c 6f67 6420 696e 205b  lif syslogd in [
+00036d70: 2743 5249 5427 2c27 6372 6974 275d 3a0a  'CRIT','crit']:.
+00036d80: 2020 2020 2020 2020 2020 2020 7379 736c              sysl
+00036d90: 6f67 2e73 7973 6c6f 6728 7379 736c 6f67  og.syslog(syslog
+00036da0: 2e4c 4f47 5f43 5249 542c 746d 705f 7374  .LOG_CRIT,tmp_st
+00036db0: 7229 0a20 2020 2020 2020 2065 6c69 6620  r).        elif 
+00036dc0: 7379 736c 6f67 6420 696e 205b 2757 4152  syslogd in ['WAR
+00036dd0: 4e27 2c27 7761 726e 275d 3a0a 2020 2020  N','warn']:.    
+00036de0: 2020 2020 2020 2020 7379 736c 6f67 2e73          syslog.s
+00036df0: 7973 6c6f 6728 7379 736c 6f67 2e4c 4f47  yslog(syslog.LOG
+00036e00: 5f57 4152 4e49 4e47 2c74 6d70 5f73 7472  _WARNING,tmp_str
+00036e10: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
+00036e20: 7973 6c6f 6764 2069 6e20 5b27 4442 4727  yslogd in ['DBG'
+00036e30: 2c27 4445 4255 4727 2c27 6462 6727 2c27  ,'DEBUG','dbg','
+00036e40: 6465 6275 6727 5d3a 0a20 2020 2020 2020  debug']:.       
+00036e50: 2020 2020 2073 7973 6c6f 672e 7379 736c       syslog.sysl
+00036e60: 6f67 2873 7973 6c6f 672e 4c4f 475f 4445  og(syslog.LOG_DE
+00036e70: 4255 472c 746d 705f 7374 7229 0a20 2020  BUG,tmp_str).   
+00036e80: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00036e90: 2020 2020 2020 2073 7973 6c6f 672e 7379         syslog.sy
+00036ea0: 736c 6f67 2874 6d70 5f73 7472 290a 0a20  slog(tmp_str).. 
+00036eb0: 2020 2023 5768 656e 2068 6176 696e 6720     #When having 
+00036ec0: 4c6f 6720 6675 6e63 7469 6f6e 2074 6865  Log function the
+00036ed0: 6e20 6769 7665 2074 6865 2064 6174 6120  n give the data 
+00036ee0: 746f 206c 6f67 2066 756e 6374 696f 6e0a  to log function.
+00036ef0: 2020 2020 6c6f 675f 703d 4661 6c73 650a      log_p=False.
+00036f00: 2020 2020 6966 2049 7346 756e 6374 696f      if IsFunctio
+00036f10: 6e28 6c6f 6729 3a20 2320 4c6f 6720 6675  n(log): # Log fu
+00036f20: 6e63 7469 6f6e 2820 6465 6275 6720 6d6f  nction( debug mo
+00036f30: 6465 206c 6f67 2066 756e 6374 696f 6e20  de log function 
+00036f40: 746f 6f20 290a 2020 2020 2020 2020 7472  too ).        tr
+00036f50: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
+00036f60: 6620 2827 6427 2069 6e20 6473 7020 6f72  f ('d' in dsp or
+00036f70: 2027 6627 2069 6e20 6473 7029 2061 6e64   'f' in dsp) and
+00036f80: 206c 6f67 6669 6c65 3a0a 2020 2020 2020   logfile:.      
+00036f90: 2020 2020 2020 2020 2020 6966 2027 6361            if 'ca
+00036fa0: 6c6c 6572 5f70 6172 656e 7427 2069 6e20  ller_parent' in 
+00036fb0: 6f70 7473 3a0a 2020 2020 2020 2020 2020  opts:.          
+00036fc0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00036fd0: 6e73 7461 6e63 6528 6f70 7473 5b27 6361  nstance(opts['ca
+00036fe0: 6c6c 6572 5f70 6172 656e 7427 5d2c 696e  ller_parent'],in
+00036ff0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00037000: 2020 2020 2020 2020 2020 2020 6f70 7473              opts
+00037010: 5b27 6361 6c6c 6572 5f70 6172 656e 7427  ['caller_parent'
+00037020: 5d3d 6f70 7473 5b27 6361 6c6c 6572 5f70  ]=opts['caller_p
+00037030: 6172 656e 7427 5d2b 310a 2020 2020 2020  arent']+1.      
+00037040: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00037050: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00037060: 2020 2020 2020 2020 2020 2020 6f70 7473              opts
+00037070: 5b27 6361 6c6c 6572 5f70 6172 656e 7427  ['caller_parent'
+00037080: 5d3d 320a 2020 2020 2020 2020 2020 2020  ]=2.            
+00037090: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000370a0: 2020 2020 2020 2020 2020 2020 2020 6f70                op
+000370b0: 7473 5b27 6361 6c6c 6572 5f70 6172 656e  ts['caller_paren
+000370c0: 7427 5d3d 320a 2020 2020 2020 2020 2020  t']=2.          
+000370d0: 2020 4665 6564 4675 6e63 286c 6f67 2c2a    FeedFunc(log,*
+000370e0: 6d73 672c 2a2a 6f70 7473 290a 2020 2020  msg,**opts).    
+000370f0: 2020 2020 2020 2020 2320 4966 206c 6f67          # If log
+00037100: 2066 756e 6374 696f 6e20 7461 6b65 206f   function take o
+00037110: 7665 7220 7468 6520 6c6f 6720 7468 656e  ver the log then
+00037120: 206e 6f20 6d6f 7265 2070 7269 6e74 2074   no more print t
+00037130: 6f20 6f74 6865 7273 0a20 2020 2020 2020  o others.       
+00037140: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
+00037150: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+00037160: 2020 2020 2020 2020 7061 7373 0a0a 2020          pass..  
+00037170: 2020 2320 4d61 6b65 2061 2049 6e74 726f    # Make a Intro
+00037180: 0a20 2020 2069 6e74 726f 5f6c 656e 3d30  .    intro_len=0
+00037190: 0a20 2020 2069 6e74 726f 5f6d 7367 3d27  .    intro_msg='
+000371a0: 270a 2020 2020 6966 206e 6f74 2064 6972  '.    if not dir
+000371b0: 6563 7420 616e 6420 6e6f 7420 6e6f 5f69  ect and not no_i
+000371c0: 6e74 726f 3a0a 2020 2020 2020 2020 696e  ntro:.        in
+000371d0: 7472 6f5f 6d73 673d 277b 307d 2027 2e66  tro_msg='{0} '.f
+000371e0: 6f72 6d61 7428 5449 4d45 2829 2e4e 6f77  ormat(TIME().Now
+000371f0: 2829 2e73 7472 6674 696d 6528 6461 7465  ().strftime(date
+00037200: 5f66 6f72 6d61 7429 2920 6966 2064 6174  _format)) if dat
+00037210: 655f 666f 726d 6174 2061 6e64 206e 6f74  e_format and not
+00037220: 2073 7973 6c6f 6764 2065 6c73 6520 2727   syslogd else ''
+00037230: 0a20 2020 2020 2020 2069 6e74 726f 5f6c  .        intro_l
+00037240: 656e 3d6c 656e 2869 6e74 726f 5f6d 7367  en=len(intro_msg
+00037250: 290a 2020 2020 2020 2020 6966 2063 616c  ).        if cal
+00037260: 6c65 725f 6465 7461 696c 206f 7220 6361  ler_detail or ca
+00037270: 6c6c 6572 5f74 7265 6520 6f72 2063 616c  ller_tree or cal
+00037280: 6c65 725f 6869 7374 6f72 7920 6f72 2063  ler_history or c
+00037290: 616c 6c65 725f 6967 6e6f 7265 3a0a 2020  aller_ignore:.  
+000372a0: 2020 2020 2020 2020 2020 6966 2069 676e            if ign
+000372b0: 6f72 655f 6d79 7365 6c66 3a0a 2020 2020  ore_myself:.    
+000372c0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+000372d0: 6f74 2069 7369 6e73 7461 6e63 6528 6361  ot isinstance(ca
+000372e0: 6c6c 6572 5f69 676e 6f72 652c 6c69 7374  ller_ignore,list
+000372f0: 293a 2063 616c 6c65 725f 6967 6e6f 7265  ): caller_ignore
+00037300: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
+00037310: 2020 2020 6966 2027 4665 6564 4675 6e63      if 'FeedFunc
+00037320: 2720 6e6f 7420 696e 2063 616c 6c65 725f  ' not in caller_
+00037330: 6967 6e6f 7265 3a20 6361 6c6c 6572 5f69  ignore: caller_i
+00037340: 676e 6f72 652e 6170 7065 6e64 2827 4665  gnore.append('Fe
+00037350: 6564 4675 6e63 2729 0a20 2020 2020 2020  edFunc').       
+00037360: 2020 2020 2020 2020 2069 6620 2770 7269           if 'pri
+00037370: 6e74 6627 206e 6f74 2069 6e20 6361 6c6c  ntf' not in call
+00037380: 6572 5f69 676e 6f72 653a 2063 616c 6c65  er_ignore: calle
+00037390: 725f 6967 6e6f 7265 2e61 7070 656e 6428  r_ignore.append(
+000373a0: 2770 7269 6e74 6627 290a 2020 2020 2020  'printf').      
+000373b0: 2020 6966 2063 616c 6c65 725f 6967 6e6f    if caller_igno
+000373c0: 7265 2061 6e64 2069 7369 6e73 7461 6e63  re and isinstanc
+000373d0: 6528 6361 6c6c 6572 5f69 676e 6f72 652c  e(caller_ignore,
+000373e0: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
+000373f0: 2020 2061 7267 3d7b 2770 6172 656e 7427     arg={'parent'
+00037400: 3a70 6172 656e 745f 6e2c 2761 7267 7327  :parent_n,'args'
+00037410: 3a46 616c 7365 2c27 6869 7374 6f72 7927  :False,'history'
+00037420: 3a54 7275 652c 2774 7265 6527 3a46 616c  :True,'tree':Fal
+00037430: 7365 7d0a 2020 2020 2020 2020 2020 2020  se}.            
+00037440: 6361 6c6c 5f6e 616d 653d 4675 6e63 7469  call_name=Functi
+00037450: 6f6e 4e61 6d65 282a 2a61 7267 290a 2020  onName(**arg).  
+00037460: 2020 2020 2020 2020 2020 6e65 775f 703d            new_p=
+00037470: 300a 2020 2020 2020 2020 2020 2020 666f  0.            fo
+00037480: 7220 6920 696e 2072 616e 6765 286c 656e  r i in range(len
+00037490: 2863 616c 6c5f 6e61 6d65 292d 312c 302c  (call_name)-1,0,
+000374a0: 2d31 293a 0a20 2020 2020 2020 2020 2020  -1):.           
+000374b0: 2020 2020 2069 6620 6361 6c6c 5f6e 616d       if call_nam
+000374c0: 655b 695d 5b30 5d20 696e 2063 616c 6c65  e[i][0] in calle
+000374d0: 725f 6967 6e6f 7265 3a0a 2020 2020 2020  r_ignore:.      
+000374e0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+000374f0: 775f 702b 3d31 0a20 2020 2020 2020 2020  w_p+=1.         
+00037500: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
+00037510: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
+00037520: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+00037530: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00037540: 6e63 6528 7061 7265 6e74 5f6e 2c73 7472  nce(parent_n,str
+00037550: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00037560: 2020 2070 6172 656e 745f 6e5f 613d 7061     parent_n_a=pa
+00037570: 7265 6e74 5f6e 2e73 706c 6974 2827 2d27  rent_n.split('-'
+00037580: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00037590: 2020 6966 2070 6172 656e 745f 6e5f 615b    if parent_n_a[
+000375a0: 305d 3a0a 2020 2020 2020 2020 2020 2020  0]:.            
+000375b0: 2020 2020 2020 2020 7061 7265 6e74 5f6e          parent_n
+000375c0: 5f61 5b30 5d3d 277b 7d27 2e66 6f72 6d61  _a[0]='{}'.forma
+000375d0: 7428 696e 7428 7061 7265 6e74 5f6e 5f61  t(int(parent_n_a
+000375e0: 5b30 5d29 2b6e 6577 5f70 290a 2020 2020  [0])+new_p).    
+000375f0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00037600: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00037610: 2020 2020 2020 7061 7265 6e74 5f6e 5f61        parent_n_a
+00037620: 5b30 5d3d 277b 7d27 2e66 6f72 6d61 7428  [0]='{}'.format(
+00037630: 6e65 775f 7029 0a20 2020 2020 2020 2020  new_p).         
+00037640: 2020 2020 2020 2069 6620 6c65 6e28 7061         if len(pa
+00037650: 7265 6e74 5f6e 5f61 2920 3d3d 2032 2061  rent_n_a) == 2 a
+00037660: 6e64 2070 6172 656e 745f 6e5f 615b 315d  nd parent_n_a[1]
+00037670: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00037680: 2020 2020 2020 7061 7265 6e74 5f6e 5f61        parent_n_a
+00037690: 5b31 5d3d 277b 7d27 2e66 6f72 6d61 7428  [1]='{}'.format(
+000376a0: 696e 7428 7061 7265 6e74 5f6e 5f61 5b31  int(parent_n_a[1
+000376b0: 5d29 2b6e 6577 5f70 290a 2020 2020 2020  ])+new_p).      
+000376c0: 2020 2020 2020 2020 2020 7061 7265 6e74            parent
+000376d0: 5f6e 3d27 2d27 2e6a 6f69 6e28 7061 7265  _n='-'.join(pare
+000376e0: 6e74 5f6e 5f61 290a 2020 2020 2020 2020  nt_n_a).        
+000376f0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+00037700: 6e63 6528 7061 7265 6e74 5f6e 2c69 6e74  nce(parent_n,int
+00037710: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00037720: 2020 2070 6172 656e 745f 6e3d 7061 7265     parent_n=pare
+00037730: 6e74 5f6e 2b6e 6577 5f70 0a20 2020 2020  nt_n+new_p.     
+00037740: 2020 2069 6620 6361 6c6c 6572 5f6e 616d     if caller_nam
+00037750: 6520 6f72 2063 616c 6c65 725f 6967 6e6f  e or caller_igno
+00037760: 7265 3a0a 2020 2020 2020 2020 2020 2020  re:.            
+00037770: 6172 673d 7b27 7061 7265 6e74 273a 7061  arg={'parent':pa
+00037780: 7265 6e74 5f6e 7d0a 2020 2020 2020 2020  rent_n}.        
+00037790: 2020 2020 6966 2063 616c 6c65 725f 6465      if caller_de
+000377a0: 7461 696c 3a0a 2020 2020 2020 2020 2020  tail:.          
+000377b0: 2020 2020 2020 6172 672e 7570 6461 7465        arg.update
+000377c0: 287b 276c 696e 655f 6e75 6d62 6572 273a  ({'line_number':
+000377d0: 5472 7565 2c27 6675 6c6c 5f66 696c 656e  True,'full_filen
+000377e0: 616d 6527 3a63 616c 6c65 725f 6675 6c6c  ame':caller_full
+000377f0: 5f66 696c 656e 616d 652c 2766 696c 656e  _filename,'filen
+00037800: 616d 6527 3a54 7275 652c 2761 7267 7327  ame':True,'args'
+00037810: 3a54 7275 657d 290a 2020 2020 2020 2020  :True}).        
+00037820: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00037830: 2020 2020 2020 2020 2020 6172 675b 276c            arg['l
+00037840: 696e 655f 6e75 6d62 6572 275d 3d63 616c  ine_number']=cal
+00037850: 6c65 725f 6c69 6e65 5f6e 756d 6265 720a  ler_line_number.
+00037860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037870: 6172 675b 2766 756c 6c5f 6669 6c65 6e61  arg['full_filena
+00037880: 6d65 275d 3d63 616c 6c65 725f 6675 6c6c  me']=caller_full
+00037890: 5f66 696c 656e 616d 650a 2020 2020 2020  _filename.      
+000378a0: 2020 2020 2020 2020 2020 6172 675b 2761            arg['a
+000378b0: 7267 7327 5d3d 6361 6c6c 6572 5f61 7267  rgs']=caller_arg
+000378c0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+000378d0: 2020 6172 675b 2766 696c 656e 616d 6527    arg['filename'
+000378e0: 5d3d 6361 6c6c 6572 5f66 696c 656e 616d  ]=caller_filenam
+000378f0: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00037900: 2063 616c 6c65 725f 7472 6565 3a0a 2020   caller_tree:.  
+00037910: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+00037920: 672e 7570 6461 7465 287b 2768 6973 746f  g.update({'histo
+00037930: 7279 273a 5472 7565 2c27 7472 6565 273a  ry':True,'tree':
+00037940: 5472 7565 7d29 0a20 2020 2020 2020 2020  True}).         
+00037950: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00037960: 2020 2020 2020 2020 2061 7267 5b27 6869           arg['hi
+00037970: 7374 6f72 7927 5d3d 6361 6c6c 6572 5f68  story']=caller_h
+00037980: 6973 746f 7279 0a20 2020 2020 2020 2020  istory.         
+00037990: 2020 2063 616c 6c5f 6e61 6d65 3d46 756e     call_name=Fun
+000379a0: 6374 696f 6e4e 616d 6528 2a2a 6172 6729  ctionName(**arg)
+000379b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000379c0: 6361 6c6c 5f6e 616d 653a 0a20 2020 2020  call_name:.     
+000379d0: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
+000379e0: 6c69 6e65 5f6e 756d 6265 7220 616e 6420  line_number and 
+000379f0: 6669 6c65 6e61 6d65 2074 6865 6e20 7072  filename then pr
+00037a00: 696e 7420 6c6f 6767 696e 6720 6174 206e  int logging at n
+00037a10: 6578 7420 6c69 6e65 0a20 2020 2020 2020  ext line.       
+00037a20: 2020 2020 2020 2020 2023 2069 6620 6461           # if da
+00037a30: 7465 5f66 6f72 6d61 7420 7468 656e 206c  te_format then l
+00037a40: 6f67 6769 6e67 2773 2069 6e74 726f 206c  ogging's intro l
+00037a50: 656e 6774 6820 7769 6c6c 2062 6520 6461  ength will be da
+00037a60: 7465 2066 6f72 6d61 740a 2020 2020 2020  te format.      
+00037a70: 2020 2020 2020 2020 2020 2320 6966 206e            # if n
+00037a80: 6f74 2064 6174 655f 666f 726d 6174 2074  ot date_format t
+00037a90: 6865 6e20 6c6f 6767 696e 2773 2069 6e74  hen loggin's int
+00037aa0: 726f 206c 656e 6774 6820 7769 6c6c 2062  ro length will b
+00037ab0: 6520 7374 6570 7069 6e67 206c 656e 6774  e stepping lengt
+00037ac0: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
+00037ad0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00037ae0: 6361 6c6c 5f6e 616d 652c 7374 7229 3a20  call_name,str): 
+00037af0: 6361 6c6c 5f6e 616d 653d 5b63 616c 6c5f  call_name=[call_
+00037b00: 6e61 6d65 5d0a 2020 2020 2020 2020 2020  name].          
+00037b10: 2020 2020 2020 6966 2063 616c 6c65 725f        if caller_
+00037b20: 7472 6565 206f 7220 6361 6c6c 6572 5f68  tree or caller_h
+00037b30: 6973 746f 7279 3a20 6361 6c6c 5f6e 616d  istory: call_nam
+00037b40: 653d 6361 6c6c 5f6e 616d 652b 5b27 275d  e=call_name+['']
+00037b50: 2069 6620 6461 7465 5f66 6f72 6d61 7420   if date_format 
+00037b60: 656c 7365 2063 616c 6c5f 6e61 6d65 2b5b  else call_name+[
+00037b70: 2720 275d 0a20 2020 2020 2020 2020 2020  ' '].           
+00037b80: 2020 2020 2069 6e74 726f 5f6d 7367 3d69       intro_msg=i
+00037b90: 6e74 726f 5f6d 7367 2b57 7261 7053 7472  ntro_msg+WrapStr
+00037ba0: 696e 6728 4a6f 696e 2863 616c 6c5f 6e61  ing(Join(call_na
+00037bb0: 6d65 2c27 5c6e 2729 2c66 7370 6163 653d  me,'\n'),fspace=
+00037bc0: 302c 206e 7370 6163 653d 6c65 6e28 696e  0, nspace=len(in
+00037bd0: 7472 6f5f 6d73 6729 2c6d 6f64 653d 2773  tro_msg),mode='s
+00037be0: 7061 6365 272c 6967 6e6f 7265 5f65 6d70  pace',ignore_emp
+00037bf0: 7479 5f65 6e64 6c69 6e65 3d46 616c 7365  ty_endline=False
+00037c00: 2920 2b20 273a 2027 0a20 2020 2020 2020  ) + ': '.       
+00037c10: 2020 2020 2020 2020 2069 6e74 726f 5f6c           intro_l
+00037c20: 656e 3d69 6e74 726f 5f6c 656e 2b6c 656e  en=intro_len+len
+00037c30: 2863 616c 6c5f 6e61 6d65 5b2d 315d 292b  (call_name[-1])+
+00037c40: 320a 2020 2020 2020 2020 6966 2054 7970  2.        if Typ
+00037c50: 6528 696e 7472 6f2c 2773 7472 2729 2061  e(intro,'str') a
+00037c60: 6e64 2069 6e74 726f 3a0a 2020 2020 2020  nd intro:.      
+00037c70: 2020 2020 2020 696e 7472 6f5f 6d73 673d        intro_msg=
+00037c80: 696e 7472 6f5f 6d73 672b 696e 7472 6f2b  intro_msg+intro+
+00037c90: 273a 2027 0a20 2020 2020 2020 2020 2020  ': '.           
+00037ca0: 2069 6e74 726f 5f6c 656e 3d69 6e74 726f   intro_len=intro
+00037cb0: 5f6c 656e 2b6c 656e 2869 6e74 726f 292b  _len+len(intro)+
+00037cc0: 320a 0a20 2020 2023 204d 616b 6520 696e  2..    # Make in
+00037cd0: 7075 7420 6461 7461 2074 6f20 6120 7374  put data to a st
+00037ce0: 7269 6e67 206d 7367 200a 2020 2020 6966  ring msg .    if
+00037cf0: 2073 7461 7274 5f6e 6577 6c69 6e65 3a0a   start_newline:.
+00037d00: 2020 2020 2020 2020 6966 206c 656e 286d          if len(m
+00037d10: 7367 2920 616e 6420 6973 696e 7374 616e  sg) and isinstan
+00037d20: 6365 286d 7367 5b30 5d2c 7374 7229 2061  ce(msg[0],str) a
+00037d30: 6e64 206c 656e 286d 7367 5b30 5d29 2061  nd len(msg[0]) a
+00037d40: 6e64 206d 7367 5b30 5d5b 305d 203d 3d20  nd msg[0][0] == 
+00037d50: 275c 6e27 3a20 6d73 675b 305d 3d6d 7367  '\n': msg[0]=msg
+00037d60: 5b30 5d5b 313a 5d0a 2020 2020 2020 2020  [0][1:].        
+00037d70: 6966 2073 7461 7274 5f6e 6577 6c69 6e65  if start_newline
+00037d80: 203d 3d20 2761 7574 6f27 3a0a 2020 2020   == 'auto':.    
+00037d90: 2020 2020 2020 2020 6966 2070 7269 6e74          if print
+00037da0: 665f 6e65 776c 696e 655f 696e 666f 2e47  f_newline_info.G
+00037db0: 6574 2864 7370 293a 0a20 2020 2020 2020  et(dsp):.       
+00037dc0: 2020 2020 2020 2020 2073 7461 7274 5f6e           start_n
+00037dd0: 6577 6c69 6e65 3d27 5c6e 270a 2020 2020  ewline='\n'.    
+00037de0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00037df0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+00037e00: 6172 745f 6e65 776c 696e 653d 2727 0a20  art_newline=''. 
+00037e10: 2020 206d 7367 5f73 7472 3d6d 7367 5f6d     msg_str=msg_m
+00037e20: 616b 6572 282a 6d73 672c 6d73 675f 7370  aker(*msg,msg_sp
+00037e30: 6c69 743d 6d73 675f 7370 6c69 742c 696e  lit=msg_split,in
+00037e40: 7472 6f5f 6c65 6e3d 696e 7472 6f5f 6c65  tro_len=intro_le
+00037e50: 6e2c 696e 7472 6f5f 6d73 673d 2727 2069  n,intro_msg='' i
+00037e60: 6620 6e6f 5f69 6e74 726f 2069 7320 4e6f  f no_intro is No
+00037e70: 6e65 2065 6c73 6520 696e 7472 6f5f 6d73  ne else intro_ms
+00037e80: 6729 0a23 2044 4f6e 2774 206e 6565 6420  g).# DOn't need 
+00037e90: 6265 6c6f 7720 636f 6465 0a23 2020 2020  below code.#    
+00037ea0: 6966 206e 6577 5f6c 696e 653a 0a23 2020  if new_line:.#  
+00037eb0: 2020 2020 2020 6966 206d 7367 5f73 7472        if msg_str
+00037ec0: 2061 6e64 206d 7367 5f73 7472 5b2d 315d   and msg_str[-1]
+00037ed0: 203d 3d20 275c 6e27 3a20 6d73 675f 7374   == '\n': msg_st
+00037ee0: 723d 6d73 675f 7374 725b 3a2d 315d 0a0a  r=msg_str[:-1]..
+00037ef0: 2020 2020 2323 2069 6620 656e 6420 6f66      ## if end of
+00037f00: 206c 696e 6520 6861 7665 206e 6f20 6e65   line have no ne
+00037f10: 776c 696e 652c 2062 7574 2069 7420 6861  wline, but it ha
+00037f20: 7320 696e 7472 6f20 7468 656e 2061 6464  s intro then add
+00037f30: 696e 6720 7374 6172 745f 6e65 776c 696e  ing start_newlin
+00037f40: 650a 2020 2020 2369 6620 696e 7472 6f5f  e.    #if intro_
+00037f50: 6d73 6720 616e 6420 6e6f 7420 6e6f 5f73  msg and not no_s
+00037f60: 7461 7274 5f6e 6577 6c69 6e65 3a0a 2020  tart_newline:.  
+00037f70: 2020 2320 2020 2069 6620 7072 696e 7466    #    if printf
+00037f80: 5f6e 6577 6c69 6e65 5f69 6e66 6f2e 4765  _newline_info.Ge
+00037f90: 7428 6473 7029 3a20 0a20 2020 2023 2020  t(dsp): .    #  
+00037fa0: 2020 2020 2020 7374 6172 745f 6e65 776c        start_newl
+00037fb0: 696e 653d 275c 6e27 0a0a 2020 2020 2344  ine='\n'..    #D
+00037fc0: 4247 204d 4f44 4520 666f 7220 7072 696e  BG MODE for prin
+00037fd0: 7469 6e67 0a20 2020 2073 6372 5f64 6267  ting.    scr_dbg
+00037fe0: 5f70 7269 6e74 3d46 616c 7365 0a20 2020  _print=False.   
+00037ff0: 2069 6620 7363 725f 6462 6720 6973 2054   if scr_dbg is T
+00038000: 7275 653a 0a20 2020 2020 2020 2069 6620  rue:.        if 
+00038010: 7363 725f 6462 675f 636f 6e64 6974 696f  scr_dbg_conditio
+00038020: 6e20 6973 204e 6f6e 6520 6f72 206d 7367  n is None or msg
+00038030: 5f73 7472 203d 3d20 7363 725f 6462 675f  _str == scr_dbg_
+00038040: 636f 6e64 6974 696f 6e3a 0a20 2020 2020  condition:.     
+00038050: 2020 2020 2020 2073 6372 5f64 6267 5f70         scr_dbg_p
+00038060: 7269 6e74 3d54 7275 650a 2020 2020 2020  rint=True.      
+00038070: 2020 2020 2020 6172 673d 7b27 7061 7265        arg={'pare
+00038080: 6e74 273a 2731 2d39 272c 276c 696e 655f  nt':'1-9','line_
+00038090: 6e75 6d62 6572 273a 5472 7565 2c27 6669  number':True,'fi
+000380a0: 6c65 6e61 6d65 273a 5472 7565 2c27 6172  lename':True,'ar
+000380b0: 6773 273a 4661 6c73 652c 2768 6973 746f  gs':False,'histo
+000380c0: 7279 273a 5472 7565 2c27 7472 6565 273a  ry':True,'tree':
+000380d0: 5472 7565 7d0a 2020 2020 2020 2020 2020  True}.          
+000380e0: 2020 6361 6c6c 5f6e 616d 653d 4675 6e63    call_name=Func
+000380f0: 7469 6f6e 4e61 6d65 282a 2a61 7267 290a  tionName(**arg).
+00038100: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00038110: 7428 272d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  t('-------------
+00038120: 4655 4e43 5449 4f4e 2d2d 2d2d 2d2d 2d2d  FUNCTION--------
+00038130: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2729 0a20  ------------'). 
+00038140: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00038150: 284a 6f69 6e28 6361 6c6c 5f6e 616d 652c  (Join(call_name,
+00038160: 275c 6e27 2929 0a20 2020 2020 2020 2020  '\n')).         
+00038170: 2020 2070 7269 6e74 2827 2d2d 2d2d 2d2d     print('------
+00038180: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038190: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000381a0: 2d2d 2d27 290a 2020 2020 2020 2020 2020  ---').          
+000381b0: 2020 7072 696e 7428 276c 6f67 2020 2020    print('log    
+000381c0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+000381d0: 7b7d 2028 6675 6e63 7469 6f6e 3a7b 7d3a  {} (function:{}:
+000381e0: 7b7d 2927 2e66 6f72 6d61 7428 6c6f 672c  {})'.format(log,
+000381f0: 4973 4675 6e63 7469 6f6e 286c 6f67 292c  IsFunction(log),
+00038200: 6f70 7473 2929 0a20 2020 2020 2020 2020  opts)).         
+00038210: 2020 2070 7269 6e74 2827 6c6f 6766 696c     print('logfil
+00038220: 6520 2020 2020 2020 2020 2020 2020 2020  e               
+00038230: 3a7b 7d27 2e66 6f72 6d61 7428 6c6f 6766  :{}'.format(logf
+00038240: 696c 6529 290a 2020 2020 2020 2020 2020  ile)).          
+00038250: 2020 7072 696e 7428 276e 6577 6c69 6e65    print('newline
+00038260: 2069 6e66 6f20 2020 2020 2020 2020 203a   info          :
+00038270: 7b7d 272e 666f 726d 6174 2870 7269 6e74  {}'.format(print
+00038280: 665f 6e65 776c 696e 655f 696e 666f 2e64  f_newline_info.d
+00038290: 6174 6129 290a 2020 2020 2020 2020 2020  ata)).          
+000382a0: 2020 7072 696e 7428 2766 6f72 6365 206e    print('force n
+000382b0: 6f20 7374 6172 7420 6e65 776c 696e 653a  o start newline:
+000382c0: 7b7d 272e 666f 726d 6174 286e 6f5f 7374  {}'.format(no_st
+000382d0: 6172 745f 6e65 776c 696e 6529 290a 2020  art_newline)).  
+000382e0: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+000382f0: 276e 6577 6c69 6e65 2020 2020 2020 2020  'newline        
+00038300: 2020 2020 2020 203a 2864 6972 6563 743a         :(direct:
+00038310: 7b7d 2c73 7461 7274 3a7b 7d2c 656e 643a  {},start:{},end:
+00038320: 7b7d 2927 2e66 6f72 6d61 7428 6469 7265  {})'.format(dire
+00038330: 6374 2c54 7275 6520 6966 2073 7461 7274  ct,True if start
+00038340: 5f6e 6577 6c69 6e65 2065 6c73 6520 4661  _newline else Fa
+00038350: 6c73 652c 5472 7565 2069 6620 6e65 775f  lse,True if new_
+00038360: 6c69 6e65 2065 6c73 6520 4661 6c73 6529  line else False)
+00038370: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
+00038380: 696e 7428 2769 676e 6f72 655f 656d 7074  int('ignore_empt
+00038390: 7920 2020 2020 2020 2020 203a 7b7d 272e  y          :{}'.
+000383a0: 666f 726d 6174 2869 676e 6f72 655f 656d  format(ignore_em
+000383b0: 7074 7929 290a 2020 2020 2020 2020 2020  pty)).          
+000383c0: 2020 7072 696e 7428 276d 6573 7361 6765    print('message
+000383d0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+000383e0: 5b7b 7d5d 272e 666f 726d 6174 286d 7367  [{}]'.format(msg
+000383f0: 2929 0a20 2020 2020 2020 2020 2020 2070  )).            p
+00038400: 7269 6e74 2827 696e 7472 6f20 2020 2020  rint('intro     
+00038410: 2020 2020 2020 2020 2020 2020 3a5b 7b7d              :[{}
+00038420: 5d27 2e66 6f72 6d61 7428 696e 7472 6f5f  ]'.format(intro_
+00038430: 6d73 6729 290a 2020 2020 2020 2020 2020  msg)).          
+00038440: 2020 7072 696e 7428 276c 6f67 206c 6576    print('log lev
+00038450: 656c 2020 2020 2020 2020 2020 2020 203a  el             :
+00038460: 7b7d 203c 207b 7d20 2870 7269 6e74 3a7b  {} < {} (print:{
+00038470: 7d29 272e 666f 726d 6174 2870 7269 6e74  })'.format(print
+00038480: 665f 6c6f 675f 6261 7365 2c6c 6f67 5f6c  f_log_base,log_l
+00038490: 6576 656c 2c20 7072 696e 7466 5f6c 6f67  evel, printf_log
+000384a0: 5f62 6173 6520 3c20 6c6f 675f 6c65 7665  _base < log_leve
+000384b0: 6c20 6966 2049 7349 6e74 2870 7269 6e74  l if IsInt(print
+000384c0: 665f 6c6f 675f 6261 7365 2920 616e 6420  f_log_base) and 
+000384d0: 4973 496e 7428 6c6f 675f 6c65 7665 6c29  IsInt(log_level)
+000384e0: 2065 6c73 6520 5472 7565 2929 0a20 2020   else True)).   
+000384f0: 2020 2020 2020 2020 2070 7269 6e74 2827           print('
+00038500: 6265 666f 7265 206d 6f64 6520 7072 696e  before mode prin
+00038510: 7420 2020 2020 3a5b 7b7d 5d27 2e66 6f72  t     :[{}]'.for
+00038520: 6d61 7428 7374 6172 745f 6e65 776c 696e  mat(start_newlin
+00038530: 652b 6d73 675f 7374 722b 6e65 775f 6c69  e+msg_str+new_li
+00038540: 6e65 2929 0a0a 2020 2020 2320 5361 7665  ne))..    # Save
+00038550: 2074 6f20 6669 6c65 206f 7220 7072 696e   to file or prin
+00038560: 7420 746f 2073 6372 6565 6e20 6669 6c74  t to screen filt
+00038570: 6572 2077 6974 6820 6c6f 675f 6c65 7665  er with log_leve
+00038580: 6c20 616e 6420 616c 7265 6164 7920 6c6f  l and already lo
+00038590: 6767 696e 6720 7769 7468 206c 6f67 2066  gging with log f
+000385a0: 756e 6374 696f 6e20 6f72 206e 6f74 2e0a  unction or not..
+000385b0: 2020 2020 6966 2027 6427 2069 6e20 6473      if 'd' in ds
+000385c0: 7020 616e 6420 4973 496e 7428 7072 696e  p and IsInt(prin
+000385d0: 7466 5f6c 6f67 5f62 6173 6529 2061 6e64  tf_log_base) and
+000385e0: 2049 7349 6e74 286c 6f67 5f6c 6576 656c   IsInt(log_level
+000385f0: 293a 0a20 2020 2020 2020 2069 6620 7072  ):.        if pr
+00038600: 696e 7466 5f6c 6f67 5f62 6173 6520 3c20  intf_log_base < 
+00038610: 6c6f 675f 6c65 7665 6c3a 0a20 2020 2020  log_level:.     
+00038620: 2020 2020 2020 2072 6574 7572 6e0a 2020         return.  
+00038630: 2020 2320 6966 206a 7573 7420 7768 6974    # if just whit
+00038640: 6573 7061 6365 2074 6865 6e20 6e6f 7420  espace then not 
+00038650: 6e65 776c 696e 652c 2073 6f6d 6574 6869  newline, somethi
+00038660: 6e67 2065 6c73 6520 7769 7468 2064 6174  ng else with dat
+00038670: 6120 7468 656e 2077 6861 7420 6576 6572  a then what ever
+00038680: 0a20 2020 2023 2053 6176 6520 6d73 6720  .    # Save msg 
+00038690: 746f 206c 6f67 6669 6c65 2077 6865 6e20  to logfile when 
+000386a0: 6465 6669 6e65 6420 6c6f 6766 696c 650a  defined logfile.
+000386b0: 2020 2020 6966 206c 6f67 6669 6c65 3a20      if logfile: 
+000386c0: 2320 616c 6c20 6d6f 6465 2063 616e 2028  # all mode can (
+000386d0: 6576 656e 2069 6620 642c 2066 2c20 6929  even if d, f, i)
+000386e0: 206a 7573 7420 6c6f 6769 6e67 2074 6f20   just loging to 
+000386f0: 6669 6c65 2e0a 2020 2020 2020 2020 666f  file..        fo
+00038700: 7220 6969 2069 6e20 6c6f 6766 696c 653a  r ii in logfile:
+00038710: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00038720: 6973 696e 7374 616e 6365 2869 692c 7374  isinstance(ii,st
+00038730: 7229 2061 6e64 2069 693a 0a20 2020 2020  r) and ii:.     
+00038740: 2020 2020 2020 2020 2020 2069 695f 643d             ii_d=
+00038750: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
+00038760: 6969 290a 2020 2020 2020 2020 2020 2020  ii).            
+00038770: 2020 2020 6969 5f64 3d69 695f 6420 6966      ii_d=ii_d if
+00038780: 2069 695f 6420 656c 7365 2027 2e27 2023   ii_d else '.' #
+00038790: 2049 6620 6a75 7374 2066 696c 656e 616d   If just filenam
+000387a0: 6520 7468 656e 2064 6972 6563 746f 7279  e then directory
+000387b0: 2074 6f20 2e28 6375 7272 656e 7420 6469   to .(current di
+000387c0: 7265 6374 6f72 7929 0a20 2020 2020 2020  rectory).       
+000387d0: 2020 2020 2020 2020 2069 6620 6969 2061           if ii a
+000387e0: 6e64 206f 732e 7061 7468 2e69 7364 6972  nd os.path.isdir
+000387f0: 2869 695f 6429 3a0a 2020 2020 2020 2020  (ii_d):.        
+00038800: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00038810: 6f74 206d 7367 5f73 7472 3a0a 2020 2020  ot msg_str:.    
+00038820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038830: 2020 2020 6966 2064 6267 5f65 6d70 7479      if dbg_empty
+00038840: 2061 6e64 206e 6f74 2069 676e 6f72 655f   and not ignore_
+00038850: 656d 7074 793a 2020 2023 2049 676e 6f72  empty:   # Ignor
+00038860: 6520 656d 7074 7920 6461 7461 206f 6e20  e empty data on 
+00038870: 7363 7265 656e 2077 2f6f 2064 6562 7567  screen w/o debug
+00038880: 6769 6e67 200a 2020 2020 2020 2020 2020  ging .          
+00038890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000388a0: 2020 7061 7265 6e74 5f6e 3d6f 7074 732e    parent_n=opts.
+000388b0: 6765 7428 2763 616c 6c65 725f 7061 7265  get('caller_pare
+000388c0: 6e74 2729 2069 6620 6973 696e 7374 616e  nt') if isinstan
+000388d0: 6365 286f 7074 732e 6765 7428 2763 616c  ce(opts.get('cal
+000388e0: 6c65 725f 7061 7265 6e74 2729 2c69 6e74  ler_parent'),int
+000388f0: 2920 656c 7365 2031 0a20 2020 2020 2020  ) else 1.       
+00038900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038910: 2020 2020 2061 7267 3d7b 2770 6172 656e       arg={'paren
+00038920: 7427 3a70 6172 656e 745f 6e2c 276c 696e  t':parent_n,'lin
+00038930: 655f 6e75 6d62 6572 273a 5472 7565 2c27  e_number':True,'
+00038940: 6669 6c65 6e61 6d65 273a 5472 7565 2c27  filename':True,'
+00038950: 6172 6773 273a 4661 6c73 652c 2768 6973  args':False,'his
+00038960: 746f 7279 273a 4661 6c73 652c 2774 7265  tory':False,'tre
+00038970: 6527 3a46 616c 7365 7d0a 2020 2020 2020  e':False}.      
+00038980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038990: 2020 2020 2020 6361 6c6c 5f6e 616d 653d        call_name=
+000389a0: 4675 6e63 7469 6f6e 4e61 6d65 282a 2a61  FunctionName(**a
+000389b0: 7267 290a 2020 2020 2020 2020 2020 2020  rg).            
+000389c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000389d0: 6d73 675f 7374 723d 696e 7472 6f5f 6d73  msg_str=intro_ms
+000389e0: 6720 2b20 436f 6c6f 7253 7472 2857 7261  g + ColorStr(Wra
+000389f0: 7053 7472 696e 6728 275b 2a2a 2045 6d70  pString('[** Emp
+00038a00: 7479 2d44 6174 6120 2a2a 5d20 287b 7d29  ty-Data **] ({})
+00038a10: 272e 666f 726d 6174 2863 616c 6c5f 6e61  '.format(call_na
+00038a20: 6d65 292c 6673 7061 6365 3d69 6e74 726f  me),fspace=intro
+00038a30: 5f6c 656e 2c20 6e73 7061 6365 3d69 6e74  _len, nspace=int
+00038a40: 726f 5f6c 656e 2c6d 6f64 653d 2773 7061  ro_len,mode='spa
+00038a50: 6365 2729 2c2a 2a6f 7074 7329 0a20 2020  ce'),**opts).   
+00038a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038a70: 2069 6620 6e6f 7420 6d73 675f 7374 723a   if not msg_str:
+00038a80: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
+00038a90: 2020 2020 2020 2020 2020 2020 2023 2069               # i
+00038aa0: 6620 656e 6420 6f66 206c 696e 6520 6861  f end of line ha
+00038ab0: 7665 206e 6f20 6e65 776c 696e 652c 2062  ve no newline, b
+00038ac0: 7574 2069 7420 6861 7320 696e 7472 6f20  ut it has intro 
+00038ad0: 7468 656e 2061 6464 696e 6720 7374 6172  then adding star
+00038ae0: 745f 6e65 776c 696e 650a 2020 2020 2020  t_newline.      
+00038af0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00038b00: 2069 6e74 726f 5f6d 7367 2061 6e64 206e   intro_msg and n
+00038b10: 6f74 206e 6f5f 7374 6172 745f 6e65 776c  ot no_start_newl
+00038b20: 696e 653a 0a20 2020 2020 2020 2020 2020  ine:.           
+00038b30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00038b40: 7072 696e 7466 5f6e 6577 6c69 6e65 5f69  printf_newline_i
+00038b50: 6e66 6f2e 4765 7428 4279 7465 7328 6969  nfo.Get(Bytes(ii
+00038b60: 2929 3a20 0a20 2020 2020 2020 2020 2020  )): .           
+00038b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038b80: 2073 7461 7274 5f6e 6577 6c69 6e65 3d27   start_newline='
+00038b90: 5c6e 270a 2020 2020 2020 2020 2020 2020  \n'.            
+00038ba0: 2020 2020 2020 2020 6966 2073 6372 5f64          if scr_d
+00038bb0: 6267 5f70 7269 6e74 3a0a 2020 2020 2020  bg_print:.      
 00038bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038bd0: 2069 6620 6e65 775f 6c69 6e65 3a0a 2020   if new_line:.  
-00038be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038bf0: 2020 2020 2020 7072 696e 7466 5f6e 6577        printf_new
-00038c00: 6c69 6e65 5f69 6e66 6f2e 4465 6c28 4279  line_info.Del(By
-00038c10: 7465 7328 6969 2929 0a20 2020 2020 2020  tes(ii)).       
-00038c20: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00038c30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00038c40: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00038c50: 665f 6e65 776c 696e 655f 696e 666f 2e50  f_newline_info.P
-00038c60: 7574 2842 7974 6573 2869 6929 2c54 7275  ut(Bytes(ii),Tru
-00038c70: 6529 0a20 2020 2069 6620 6967 6e6f 7265  e).    if ignore
-00038c80: 5f65 6d70 7479 2069 7320 5472 7565 2061  _empty is True a
-00038c90: 6e64 206e 6f74 206d 7367 5f73 7472 3a20  nd not msg_str: 
-00038ca0: 7265 7475 726e 2023 2049 676e 6f72 6520  return # Ignore 
-00038cb0: 656d 7074 7920 6461 7461 206f 6e20 7363  empty data on sc
-00038cc0: 7265 656e 0a20 2020 2023 2070 7269 6e74  reen.    # print
-00038cd0: 206d 7367 2074 6f20 7363 7265 656e 2077   msg to screen w
-00038ce0: 6865 6e20 6469 6420 6e6f 7420 646f 6e65  hen did not done
-00038cf0: 2077 6974 6820 6c6f 6766 696c 6520 6f72   with logfile or
-00038d00: 206c 6f67 2066 756e 6374 696f 6e0a 2020   log function.  
-00038d10: 2020 6966 2027 6527 2069 6e20 6473 703a    if 'e' in dsp:
-00038d20: 0a20 2020 2020 2020 2023 2069 6620 656e  .        # if en
-00038d30: 6420 6f66 206c 696e 6520 6861 7665 206e  d of line have n
-00038d40: 6f20 6e65 776c 696e 652c 2062 7574 2069  o newline, but i
-00038d50: 7420 6861 7320 696e 7472 6f20 7468 656e  t has intro then
-00038d60: 2061 6464 696e 6720 7374 6172 745f 6e65   adding start_ne
-00038d70: 776c 696e 650a 2020 2020 2020 2020 6966  wline.        if
-00038d80: 2069 6e74 726f 5f6d 7367 2061 6e64 206e   intro_msg and n
-00038d90: 6f74 206e 6f5f 7374 6172 745f 6e65 776c  ot no_start_newl
-00038da0: 696e 653a 0a20 2020 2020 2020 2020 2020  ine:.           
-00038db0: 2069 6620 7072 696e 7466 5f6e 6577 6c69   if printf_newli
-00038dc0: 6e65 5f69 6e66 6f2e 4765 7428 2765 2729  ne_info.Get('e')
-00038dd0: 3a20 0a20 2020 2020 2020 2020 2020 2020  : .             
-00038de0: 2020 2073 7461 7274 5f6e 6577 6c69 6e65     start_newline
-00038df0: 3d27 5c6e 270a 2020 2020 2020 2020 6966  ='\n'.        if
-00038e00: 2073 6372 5f64 6267 5f70 7269 6e74 3a0a   scr_dbg_print:.
-00038e10: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00038e20: 7428 276d 6f64 6520 2020 2020 2020 2020  t('mode         
-00038e30: 2020 2020 2020 2020 203a 7b7d 2028 6265           :{} (be
-00038e40: 666f 7265 206e 6f20 6e65 776c 696e 653a  fore no newline:
-00038e50: 7b7d 2927 2e66 6f72 6d61 7428 2765 272c  {})'.format('e',
-00038e60: 5472 7565 2069 6620 7072 696e 7466 5f6e  True if printf_n
-00038e70: 6577 6c69 6e65 5f69 6e66 6f2e 4765 7428  ewline_info.Get(
-00038e80: 2765 2729 2065 6c73 6520 4661 6c73 6529  'e') else False)
-00038e90: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
-00038ea0: 696e 7428 2775 7064 6174 6564 2073 7461  int('updated sta
-00038eb0: 7274 206e 6577 6c69 6e65 203a 7b7d 272e  rt newline :{}'.
-00038ec0: 666f 726d 6174 2854 7275 6520 6966 2073  format(True if s
-00038ed0: 7461 7274 5f6e 6577 6c69 6e65 2065 6c73  tart_newline els
-00038ee0: 6520 4661 6c73 6529 290a 2020 2020 2020  e False)).      
-00038ef0: 2020 2020 2020 7072 696e 7428 2770 7269        print('pri
-00038f00: 6e74 2020 2020 2020 2020 2020 2020 2020  nt              
-00038f10: 2020 203a 5b7b 7d5d 272e 666f 726d 6174     :[{}]'.format
-00038f20: 2873 7461 7274 5f6e 6577 6c69 6e65 2b6d  (start_newline+m
-00038f30: 7367 5f73 7472 2b6e 6577 5f6c 696e 6529  sg_str+new_line)
-00038f40: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
-00038f50: 696e 7428 272d 2d2d 2d2d 2d2d 2d2d 2d2d  int('-----------
-00038f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038f70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2729  --------------')
-00038f80: 0a20 2020 2020 2020 2053 7464 4572 7228  .        StdErr(
-00038f90: 7374 6172 745f 6e65 776c 696e 652b 6d73  start_newline+ms
-00038fa0: 675f 7374 722b 6e65 775f 6c69 6e65 290a  g_str+new_line).
-00038fb0: 2020 2020 2020 2020 7072 696e 7466 5f6e          printf_n
-00038fc0: 6577 6c69 6e65 5f69 6e66 6f2e 5075 7428  ewline_info.Put(
-00038fd0: 2765 272c 4661 6c73 6520 6966 206e 6577  'e',False if new
-00038fe0: 5f6c 696e 6520 656c 7365 2054 7275 6529  _line else True)
-00038ff0: 0a20 2020 2065 6c69 6620 2763 2720 696e  .    elif 'c' in
-00039000: 2064 7370 3a20 2344 6973 706c 6179 2074   dsp: #Display t
-00039010: 6f20 636f 6e73 6f6c 6520 2869 7420 616c  o console (it al
-00039020: 736f 2077 6f72 6b20 7769 7468 2052 6f62  so work with Rob
-00039030: 6f74 2046 7261 6d65 776f 726b 290a 2020  ot Framework).  
-00039040: 2020 2020 2020 7072 696e 7428 7374 6172        print(star
-00039050: 745f 6e65 776c 696e 652b 6d73 675f 7374  t_newline+msg_st
-00039060: 722b 6e65 775f 6c69 6e65 2c65 6e64 3d27  r+new_line,end='
-00039070: 272c 6669 6c65 3d73 7973 2e5f 5f73 7464  ',file=sys.__std
-00039080: 6f75 745f 5f29 0a20 2020 2065 6c69 6620  out__).    elif 
-00039090: 2773 2720 696e 2064 7370 206f 7220 2761  's' in dsp or 'a
-000390a0: 2720 696e 2064 7370 3a20 2320 5072 696e  ' in dsp: # Prin
-000390b0: 7420 6f75 7420 6f6e 2073 6372 6565 6e0a  t out on screen.
-000390c0: 2020 2020 2020 2020 6966 2069 6e74 726f          if intro
-000390d0: 5f6d 7367 2061 6e64 206e 6f74 206e 6f5f  _msg and not no_
-000390e0: 7374 6172 745f 6e65 776c 696e 653a 0a20  start_newline:. 
-000390f0: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
-00039100: 696e 7466 5f6e 6577 6c69 6e65 5f69 6e66  intf_newline_inf
-00039110: 6f2e 4765 7428 2761 2720 6966 2027 6127  o.Get('a' if 'a'
-00039120: 2069 6e20 6473 7020 656c 7365 2027 7327   in dsp else 's'
-00039130: 293a 200a 2020 2020 2020 2020 2020 2020  ): .            
-00039140: 2020 2020 7374 6172 745f 6e65 776c 696e      start_newlin
-00039150: 653d 275c 6e27 0a20 2020 2020 2020 2069  e='\n'.        i
-00039160: 6620 7363 725f 6462 675f 7072 696e 743a  f scr_dbg_print:
-00039170: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00039180: 6e74 2827 6d6f 6465 2020 2020 2020 2020  nt('mode        
-00039190: 2020 2020 2020 2020 2020 3a7b 7d20 2862            :{} (b
-000391a0: 6566 6f72 6520 6e6f 206e 6577 6c69 6e65  efore no newline
-000391b0: 3a7b 7d29 272e 666f 726d 6174 2827 6127  :{})'.format('a'
-000391c0: 2c54 7275 6520 6966 2070 7269 6e74 665f  ,True if printf_
-000391d0: 6e65 776c 696e 655f 696e 666f 2e47 6574  newline_info.Get
-000391e0: 2827 6127 2069 6620 2761 2720 696e 2064  ('a' if 'a' in d
-000391f0: 7370 2065 6c73 6520 2773 2729 2065 6c73  sp else 's') els
-00039200: 6520 4661 6c73 6529 290a 2020 2020 2020  e False)).      
-00039210: 2020 2020 2020 7072 696e 7428 2775 7064        print('upd
-00039220: 6174 6564 2073 7461 7274 206e 6577 6c69  ated start newli
-00039230: 6e65 203a 7b7d 272e 666f 726d 6174 2854  ne :{}'.format(T
-00039240: 7275 6520 6966 2073 7461 7274 5f6e 6577  rue if start_new
-00039250: 6c69 6e65 2065 6c73 6520 4661 6c73 6529  line else False)
-00039260: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
-00039270: 696e 7428 2770 7269 6e74 2020 2020 2020  int('print      
-00039280: 2020 2020 2020 2020 2020 203a 5b7b 7d5d             :[{}]
-00039290: 272e 666f 726d 6174 2873 7461 7274 5f6e  '.format(start_n
-000392a0: 6577 6c69 6e65 2b6d 7367 5f73 7472 2b6e  ewline+msg_str+n
-000392b0: 6577 5f6c 696e 6529 290a 2020 2020 2020  ew_line)).      
-000392c0: 2020 2020 2020 7072 696e 7428 272d 2d2d        print('---
-000392d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000392e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000392f0: 2d2d 2d2d 2d2d 2729 0a20 2020 2020 2020  ------').       
-00039300: 2023 2069 6620 656e 6420 6f66 206c 696e   # if end of lin
-00039310: 6520 6861 7665 206e 6f20 6e65 776c 696e  e have no newlin
-00039320: 652c 2062 7574 2069 7420 6861 7320 696e  e, but it has in
-00039330: 7472 6f20 7468 656e 2061 6464 696e 6720  tro then adding 
-00039340: 7374 6172 745f 6e65 776c 696e 650a 2020  start_newline.  
-00039350: 2020 2020 2020 5374 644f 7574 2873 7461        StdOut(sta
-00039360: 7274 5f6e 6577 6c69 6e65 2b6d 7367 5f73  rt_newline+msg_s
-00039370: 7472 2b6e 6577 5f6c 696e 6529 0a20 2020  tr+new_line).   
-00039380: 2020 2020 2070 7269 6e74 665f 6e65 776c       printf_newl
-00039390: 696e 655f 696e 666f 2e50 7574 2827 6127  ine_info.Put('a'
-000393a0: 2069 6620 2761 2720 696e 2064 7370 2065   if 'a' in dsp e
-000393b0: 6c73 6520 2773 272c 4661 6c73 6520 6966  lse 's',False if
-000393c0: 206e 6577 5f6c 696e 6520 656c 7365 2054   new_line else T
-000393d0: 7275 6529 0a20 2020 2023 2072 6574 7572  rue).    # retur
-000393e0: 6e20 6d73 6720 7768 656e 2072 6571 7569  n msg when requi
-000393f0: 7265 6420 7265 7475 726e 2077 6861 7465  red return whate
-00039400: 7665 7220 636f 6e64 6974 696f 6e0a 2020  ver condition.  
-00039410: 2020 6966 2027 7227 2069 6e20 6473 703a    if 'r' in dsp:
-00039420: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00039430: 6d73 675f 7374 720a 0a64 6566 2043 6f6c  msg_str..def Col
-00039440: 6f72 5374 7228 6d73 672c 2a2a 6f70 7473  orStr(msg,**opts
-00039450: 293a 0a20 2020 2063 6f6c 6f72 3d6f 7074  ):.    color=opt
-00039460: 732e 6765 7428 2763 6f6c 6f72 272c 4e6f  s.get('color',No
-00039470: 6e65 290a 2020 2020 636f 6c6f 725f 6462  ne).    color_db
-00039480: 3d6f 7074 732e 6765 7428 2763 6f6c 6f72  =opts.get('color
-00039490: 5f64 6227 2c7b 2762 6c75 6527 3a20 3334  _db',{'blue': 34
-000394a0: 2c20 2767 7265 7927 3a20 3330 2c20 2779  , 'grey': 30, 'y
-000394b0: 656c 6c6f 7727 3a20 3333 2c20 2767 7265  ellow': 33, 'gre
-000394c0: 656e 273a 2033 322c 2027 6379 616e 273a  en': 32, 'cyan':
-000394d0: 2033 362c 2027 6d61 6765 6e74 6127 3a20   36, 'magenta': 
-000394e0: 3335 2c20 2777 6869 7465 273a 2033 372c  35, 'white': 37,
-000394f0: 2027 7265 6427 3a20 3331 7d29 0a20 2020   'red': 31}).   
-00039500: 2062 675f 636f 6c6f 723d 6f70 7473 2e67   bg_color=opts.g
-00039510: 6574 2827 6267 5f63 6f6c 6f72 272c 4e6f  et('bg_color',No
-00039520: 6e65 290a 2020 2020 6267 5f63 6f6c 6f72  ne).    bg_color
-00039530: 5f64 623d 6f70 7473 2e67 6574 2827 6267  _db=opts.get('bg
-00039540: 5f63 6f6c 6f72 5f64 6227 2c7b 2763 7961  _color_db',{'cya
-00039550: 6e27 3a20 3436 2c20 2777 6869 7465 273a  n': 46, 'white':
-00039560: 2034 372c 2027 6772 6579 273a 2034 302c   47, 'grey': 40,
-00039570: 2027 7965 6c6c 6f77 273a 2034 332c 2027   'yellow': 43, '
-00039580: 626c 7565 273a 2034 342c 2027 6d61 6765  blue': 44, 'mage
-00039590: 6e74 6127 3a20 3435 2c20 2772 6564 273a  nta': 45, 'red':
-000395a0: 2034 312c 2027 6772 6565 6e27 3a20 3432   41, 'green': 42
-000395b0: 7d29 0a20 2020 2061 7474 723d 6f70 7473  }).    attr=opts
-000395c0: 2e67 6574 2827 6174 7472 272c 4e6f 6e65  .get('attr',None
-000395d0: 290a 2020 2020 6174 7472 5f64 623d 6f70  ).    attr_db=op
-000395e0: 7473 2e67 6574 2827 6174 7472 5f64 6227  ts.get('attr_db'
-000395f0: 2c7b 2772 6576 6572 7365 273a 2037 2c20  ,{'reverse': 7, 
-00039600: 2762 6c69 6e6b 273a 2035 2c27 636f 6e63  'blink': 5,'conc
-00039610: 6561 6c65 6427 3a20 382c 2027 756e 6465  ealed': 8, 'unde
-00039620: 726c 696e 6527 3a20 342c 2027 626f 6c64  rline': 4, 'bold
-00039630: 273a 2031 7d29 0a20 2020 2069 6620 4973  ': 1}).    if Is
-00039640: 4e6f 6e65 286f 732e 6765 7465 6e76 2827  None(os.getenv('
-00039650: 414e 5349 5f43 4f4c 4f52 535f 4449 5341  ANSI_COLORS_DISA
-00039660: 424c 4544 2729 2920 616e 6420 2863 6f6c  BLED')) and (col
-00039670: 6f72 206f 7220 6267 5f63 6f6c 6f72 206f  or or bg_color o
-00039680: 7220 6174 7472 293a 0a20 2020 2020 2020  r attr):.       
-00039690: 2072 6573 6574 3d27 2727 5c30 3333 5b30   reset='''\033[0
-000396a0: 6d27 2727 0a20 2020 2020 2020 2066 6d74  m'''.        fmt
-000396b0: 5f6d 7367 3d27 2727 5c30 3333 5b25 646d  _msg='''\033[%dm
-000396c0: 2573 2727 270a 2020 2020 2020 2020 6966  %s'''.        if
-000396d0: 2063 6f6c 6f72 2061 6e64 2063 6f6c 6f72   color and color
-000396e0: 2069 6e20 636f 6c6f 725f 6462 3a0a 2020   in color_db:.  
-000396f0: 2020 2020 2020 2020 2020 6d73 673d 666d            msg=fm
-00039700: 745f 6d73 6720 2520 2863 6f6c 6f72 5f64  t_msg % (color_d
-00039710: 625b 636f 6c6f 725d 2c6d 7367 290a 2020  b[color],msg).  
-00039720: 2020 2020 2020 6966 2062 675f 636f 6c6f        if bg_colo
-00039730: 7220 616e 6420 6267 5f63 6f6c 6f72 2069  r and bg_color i
-00039740: 6e20 6267 5f63 6f6c 6f72 5f64 623a 0a20  n bg_color_db:. 
-00039750: 2020 2020 2020 2020 2020 206d 7367 3d66             msg=f
-00039760: 6d74 5f6d 7367 2025 2028 636f 6c6f 725f  mt_msg % (color_
-00039770: 6462 5b62 675f 636f 6c6f 725d 2c6d 7367  db[bg_color],msg
-00039780: 290a 2020 2020 2020 2020 6966 2061 7474  ).        if att
-00039790: 7220 616e 6420 6174 7472 2069 6e20 6174  r and attr in at
-000397a0: 7472 5f64 623a 0a20 2020 2020 2020 2020  tr_db:.         
-000397b0: 2020 206d 7367 3d66 6d74 5f6d 7367 2025     msg=fmt_msg %
-000397c0: 2028 6174 7472 5f64 625b 6174 7472 5d2c   (attr_db[attr],
-000397d0: 6d73 6729 0a20 2020 2020 2020 2072 6574  msg).        ret
-000397e0: 7572 6e20 6d73 672b 7265 7365 7420 2353  urn msg+reset #S
-000397f0: 7570 706f 7274 2043 6f6c 6f72 0a20 2020  upport Color.   
-00039800: 2072 6574 7572 6e20 6d73 6720 234e 6f74   return msg #Not
-00039810: 2073 7570 706f 7274 2063 6f6c 6f72 0a0a   support color..
-00039820: 6465 6620 436c 6561 6e41 6e73 6928 6461  def CleanAnsi(da
-00039830: 7461 293a 0a20 2020 2061 6e73 695f 6573  ta):.    ansi_es
-00039840: 6361 7065 203d 2072 652e 636f 6d70 696c  cape = re.compil
-00039850: 6528 7227 5c78 3142 5c5b 5b30 2d3f 5d2a  e(r'\x1B\[[0-?]*
-00039860: 5b20 2d2f 5d2a 5b40 2d7e 5d27 290a 2020  [ -/]*[@-~]').  
-00039870: 2020 6966 2054 7970 6528 6461 7461 2c28    if Type(data,(
-00039880: 2773 7472 272c 2762 7974 6573 2729 293a  'str','bytes')):
-00039890: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000398a0: 616e 7369 5f65 7363 6170 652e 7375 6228  ansi_escape.sub(
-000398b0: 2727 2c53 7472 2864 6174 6129 290a 2020  '',Str(data)).  
-000398c0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-000398d0: 6528 6461 7461 2c28 6c69 7374 2c74 7570  e(data,(list,tup
-000398e0: 6c65 2929 3a0a 2020 2020 2020 2020 7265  le)):.        re
-000398f0: 7475 726e 205b 436c 6561 6e41 6e73 6928  turn [CleanAnsi(
-00039900: 6969 2920 666f 7220 6969 2069 6e20 6461  ii) for ii in da
-00039910: 7461 5d0a 2020 2020 656c 6966 2069 7369  ta].    elif isi
-00039920: 6e73 7461 6e63 6528 6461 7461 2c64 6963  nstance(data,dic
-00039930: 7429 3a0a 2020 2020 2020 2020 666f 7220  t):.        for 
-00039940: 6920 696e 2064 6174 613a 0a20 2020 2020  i in data:.     
-00039950: 2020 2020 2020 2064 6174 615b 695d 3d43         data[i]=C
-00039960: 6c65 616e 416e 7369 2864 6174 615b 695d  leanAnsi(data[i]
-00039970: 290a 2020 2020 7265 7475 726e 2064 6174  ).    return dat
-00039980: 610a 0a64 6566 2063 6c69 5f69 6e70 7574  a..def cli_input
-00039990: 286d 7367 2c2a 2a6f 7074 7329 3a0a 2020  (msg,**opts):.  
-000399a0: 2020 2727 270a 2020 2020 434c 4920 496e    '''.    CLI In
-000399b0: 7075 7420 636f 6d6d 616e 640a 2020 2020  put command.    
-000399c0: 6869 6464 656e 206f 7220 7061 7373 7764  hidden or passwd
-000399d0: 203d 2054 7275 6520 3a20 696e 7075 7420   = True : input 
-000399e0: 6173 2070 6173 7377 6f72 642c 2046 616c  as password, Fal
-000399f0: 7365 3a20 2864 6566 6175 6c74 2920 6e6f  se: (default) no
-00039a00: 726d 616c 2074 6578 7420 696e 7075 740a  rmal text input.
-00039a10: 2020 2020 2727 270a 2020 2020 6869 6464      '''.    hidd
-00039a20: 656e 3d6f 7074 732e 6765 7428 2768 6964  en=opts.get('hid
-00039a30: 6465 6e27 2c6f 7074 732e 6765 7428 2770  den',opts.get('p
-00039a40: 6173 7377 6427 2c6f 7074 732e 6765 7428  asswd',opts.get(
-00039a50: 2770 6173 7377 6f72 6427 2c46 616c 7365  'password',False
-00039a60: 2929 290a 2020 2020 6966 2068 6964 6465  ))).    if hidde
-00039a70: 6e3a 0a20 2020 2020 2020 2069 6620 7379  n:.        if sy
-00039a80: 732e 7374 6469 6e2e 6973 6174 7479 2829  s.stdin.isatty()
-00039a90: 3a0a 2020 2020 2020 2020 2020 2020 7020  :.            p 
-00039aa0: 3d20 6765 7470 6173 732e 6765 7470 6173  = getpass.getpas
-00039ab0: 7328 6d73 6729 0a20 2020 2020 2020 2065  s(msg).        e
-00039ac0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00039ad0: 2070 7269 6e74 6628 6d73 672c 656e 645f   printf(msg,end_
-00039ae0: 6c69 6e65 3d27 2729 0a20 2020 2020 2020  line='').       
-00039af0: 2020 2020 2070 203d 2073 7973 2e73 7464       p = sys.std
-00039b00: 696e 2e72 6561 646c 696e 6528 292e 7273  in.readline().rs
-00039b10: 7472 6970 2829 0a20 2020 2065 6c73 653a  trip().    else:
-00039b20: 0a20 2020 2020 2020 2069 6620 5079 5665  .        if PyVe
-00039b30: 7228 3229 3a0a 2020 2020 2020 2020 2020  r(2):.          
-00039b40: 2020 703d 7261 775f 696e 7075 7428 6d73    p=raw_input(ms
-00039b50: 6729 0a20 2020 2020 2020 2065 6c73 653a  g).        else:
-00039b60: 0a20 2020 2020 2020 2020 2020 2070 3d69  .            p=i
-00039b70: 6e70 7574 286d 7367 290a 2020 2020 7265  nput(msg).    re
-00039b80: 7475 726e 2070 0a0a 6465 6620 5479 7065  turn p..def Type
-00039b90: 4461 7461 2873 7263 2c77 616e 745f 7479  Data(src,want_ty
-00039ba0: 7065 3d4e 6f6e 652c 6465 6661 756c 743d  pe=None,default=
-00039bb0: 276f 7267 272c 7370 6c69 7465 723d 4e6f  'org',spliter=No
-00039bc0: 6e65 293a 0a20 2020 2027 2727 436f 6e76  ne):.    '''Conv
-00039bd0: 6572 7420 2869 6e70 7574 2964 6174 6120  ert (input)data 
-00039be0: 746f 2077 616e 7420 7479 7065 2028 6578  to want type (ex
-00039bf0: 3a20 7374 7220 2d3e 206c 6973 742c 2069  : str -> list, i
-00039c00: 6e74 2c20 2e2e 2e29 2c20 6361 6e20 6e6f  nt, ...), can no
-00039c10: 7420 636f 6e76 6572 7420 746f 2074 7970  t convert to typ
-00039c20: 6520 7468 656e 2072 6574 7572 6e20 4661  e then return Fa
-00039c30: 6c73 6527 2727 0a20 2020 2069 6620 5479  lse'''.    if Ty
-00039c40: 7065 2877 616e 745f 7479 7065 2c27 7374  pe(want_type,'st
-00039c50: 7227 293a 0a20 2020 2020 2020 2069 6620  r'):.        if 
-00039c60: 6973 696e 7374 616e 6365 2873 7263 2c28  isinstance(src,(
-00039c70: 6c69 7374 2c74 7570 6c65 2929 3a0a 2020  list,tuple)):.  
-00039c80: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00039c90: 2069 7369 6e73 7461 6e63 6528 7370 6c69   isinstance(spli
-00039ca0: 7465 722c 7374 7229 3a20 7370 6c69 7465  ter,str): splite
-00039cb0: 723d 2720 270a 2020 2020 2020 2020 2020  r=' '.          
-00039cc0: 2020 7265 7475 726e 204a 6f69 6e28 5374    return Join(St
-00039cd0: 7228 7372 6329 2c53 7472 2873 706c 6974  r(src),Str(split
-00039ce0: 6572 2929 0a20 2020 2020 2020 2065 6c73  er)).        els
-00039cf0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00039d00: 6574 7572 6e20 5374 7228 7372 632c 6d6f  eturn Str(src,mo
-00039d10: 6465 3d27 666f 7263 6527 290a 2020 2020  de='force').    
-00039d20: 656c 6966 2054 7970 6528 7761 6e74 5f74  elif Type(want_t
-00039d30: 7970 652c 2762 7974 6573 2729 3a0a 2020  ype,'bytes'):.  
-00039d40: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00039d50: 6e63 6528 7372 632c 286c 6973 742c 7475  nce(src,(list,tu
-00039d60: 706c 6529 293a 0a20 2020 2020 2020 2020  ple)):.         
-00039d70: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00039d80: 616e 6365 2873 706c 6974 6572 2c73 7472  ance(spliter,str
-00039d90: 293a 2073 706c 6974 6572 3d62 2720 270a  ): spliter=b' '.
-00039da0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00039db0: 726e 204a 6f69 6e28 4279 7465 7328 7372  rn Join(Bytes(sr
-00039dc0: 6329 2c42 7974 6573 2873 706c 6974 6572  c),Bytes(spliter
-00039dd0: 2929 0a20 2020 2020 2020 2065 6c73 653a  )).        else:
-00039de0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00039df0: 7572 6e20 4279 7465 7328 7372 6329 0a20  urn Bytes(src). 
-00039e00: 2020 2065 6c69 6620 5479 7065 2877 616e     elif Type(wan
-00039e10: 745f 7479 7065 2c27 696e 7427 293a 0a20  t_type,'int'):. 
-00039e20: 2020 2020 2020 2072 6574 7572 6e20 496e         return In
-00039e30: 7428 7372 632c 6572 723d 5472 7565 290a  t(src,err=True).
-00039e40: 2020 2020 656c 6966 2054 7970 6528 7761      elif Type(wa
-00039e50: 6e74 5f74 7970 652c 2827 6c69 7374 272c  nt_type,('list',
-00039e60: 2774 7570 6c65 2729 2920 616e 6420 6973  'tuple')) and is
-00039e70: 696e 7374 616e 6365 2873 7263 2c73 7472  instance(src,str
-00039e80: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
-00039e90: 2873 706c 6974 6572 2c73 7472 293a 0a20  (spliter,str):. 
-00039ea0: 2020 2020 2020 2069 6620 5479 7065 2877         if Type(w
-00039eb0: 616e 745f 7479 7065 2c27 7475 706c 6527  ant_type,'tuple'
-00039ec0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00039ed0: 6574 7572 6e20 7475 706c 6528 5370 6c69  eturn tuple(Spli
-00039ee0: 7428 7372 632c 7370 6c69 7465 7229 290a  t(src,spliter)).
-00039ef0: 2020 2020 2020 2020 7265 7475 726e 2053          return S
-00039f00: 706c 6974 2873 7263 2c73 706c 6974 6572  plit(src,spliter
-00039f10: 290a 2020 2020 656c 6966 2054 7970 6528  ).    elif Type(
-00039f20: 7761 6e74 5f74 7970 652c 2774 7570 6c65  want_type,'tuple
-00039f30: 2729 2061 6e64 2069 7369 6e73 7461 6e63  ') and isinstanc
-00039f40: 6528 7372 632c 286c 6973 742c 6469 6374  e(src,(list,dict
-00039f50: 2929 3a0a 2020 2020 2020 2020 6966 2069  )):.        if i
-00039f60: 7369 6e73 7461 6e63 6528 7372 632c 6469  sinstance(src,di
-00039f70: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
-00039f80: 2069 6620 7370 6c69 7465 7220 3d3d 2027   if spliter == '
-00039f90: 6b65 7927 3a0a 2020 2020 2020 2020 2020  key':.          
-00039fa0: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
-00039fb0: 6c65 2873 7263 2e6b 6579 7328 2929 0a20  le(src.keys()). 
-00039fc0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00039fd0: 7370 6c69 7465 7220 3d3d 2027 7661 6c75  spliter == 'valu
-00039fe0: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
-00039ff0: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
-0003a000: 2873 7263 2e76 616c 7565 7328 2929 0a20  (src.values()). 
-0003a010: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0003a020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003a030: 2072 6574 7572 6e20 7475 706c 6528 7372   return tuple(sr
-0003a040: 632e 6974 656d 7328 2929 0a20 2020 2020  c.items()).     
-0003a050: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
-0003a060: 7372 6329 0a20 2020 2065 6c69 6620 5479  src).    elif Ty
-0003a070: 7065 2877 616e 745f 7479 7065 2c27 6c69  pe(want_type,'li
-0003a080: 7374 2729 2061 6e64 2069 7369 6e73 7461  st') and isinsta
-0003a090: 6e63 6528 7372 632c 2874 7570 6c65 2c64  nce(src,(tuple,d
-0003a0a0: 6963 7429 293a 0a20 2020 2020 2020 2069  ict)):.        i
-0003a0b0: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-0003a0c0: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
-0003a0d0: 2020 2020 6966 2073 706c 6974 6572 203d      if spliter =
-0003a0e0: 3d20 276b 6579 273a 0a20 2020 2020 2020  = 'key':.       
-0003a0f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003a100: 6c69 7374 2873 7263 2e6b 6579 7328 2929  list(src.keys())
-0003a110: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0003a120: 6620 7370 6c69 7465 7220 3d3d 2027 7661  f spliter == 'va
-0003a130: 6c75 6527 3a0a 2020 2020 2020 2020 2020  lue':.          
-0003a140: 2020 2020 2020 7265 7475 726e 206c 6973        return lis
-0003a150: 7428 7372 632e 7661 6c75 6573 2829 290a  t(src.values()).
-0003a160: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0003a170: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003a180: 2020 7265 7475 726e 206c 6973 7428 7372    return list(sr
-0003a190: 632e 6974 656d 7328 2929 0a20 2020 2020  c.items()).     
-0003a1a0: 2020 2072 6574 7572 6e20 6c69 7374 2873     return list(s
-0003a1b0: 7263 290a 2020 2020 656c 6966 2054 7970  rc).    elif Typ
-0003a1c0: 6528 7372 632c 7761 6e74 5f74 7970 6529  e(src,want_type)
-0003a1d0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0003a1e0: 2073 7263 0a20 2020 2069 6620 5479 7065   src.    if Type
-0003a1f0: 2873 7263 2c28 2773 7472 272c 2762 7974  (src,('str','byt
-0003a200: 6573 2729 293a 0a20 2020 2020 2020 2072  es')):.        r
-0003a210: 6574 7572 6e20 466f 726d 4461 7461 2873  eturn FormData(s
-0003a220: 7263 2c64 6566 6175 6c74 3d27 6f72 6727  rc,default='org'
-0003a230: 290a 2020 2020 7265 7475 726e 2044 6566  ).    return Def
-0003a240: 6175 6c74 2873 7263 2c64 6566 6175 6c74  ault(src,default
-0003a250: 290a 0a64 6566 204d 6f76 6544 6174 6128  )..def MoveData(
-0003a260: 7372 632c 6461 7461 3d4e 6f6e 652c 746f  src,data=None,to
-0003a270: 3d4e 6f6e 652c 6672 6f6d 5f69 6478 3d4e  =None,from_idx=N
-0003a280: 6f6e 652c 666f 7263 653d 4661 6c73 652c  one,force=False,
-0003a290: 6465 6661 756c 743d 276f 7267 2729 3a0a  default='org'):.
-0003a2a0: 2020 2020 2727 270a 2020 2020 7375 7070      '''.    supp
-0003a2b0: 6f72 7420 7372 6320 7479 7065 2069 7320  ort src type is 
-0003a2c0: 6c69 7374 2c73 7472 2c28 7475 706c 6529  list,str,(tuple)
-0003a2d0: 0a20 2020 206d 6f76 696e 6720 666f 726d  .    moving form
-0003a2e0: 6174 203a 2064 6174 6128 6461 7461 2920  at : data(data) 
-0003a2f0: 6f72 2066 726f 6d5f 6964 7828 696e 7429  or from_idx(int)
-0003a300: 0a20 2020 2020 202d 2064 6174 6120 3a20  .      - data : 
-0003a310: 6966 2073 7263 2068 6173 206d 616e 7920  if src has many 
-0003a320: 7361 6d65 2064 6174 6120 7468 656e 206a  same data then j
-0003a330: 7573 7420 6b65 6570 2073 696e 676c 6520  ust keep single 
-0003a340: 6461 7461 2061 7420 6d6f 7665 640a 2020  data at moved.  
-0003a350: 2020 6d6f 7669 6e67 2064 6573 7420 2020    moving dest   
-0003a360: 3a20 746f 2869 6e74 290a 2020 2020 6d6f  : to(int).    mo
-0003a370: 7665 2064 6174 6120 6f72 2069 6e64 6578  ve data or index
-0003a380: 2866 726f 6d5f 6964 7829 2074 6f20 7761  (from_idx) to wa
-0003a390: 6e74 2069 6e64 6578 2874 6f29 0a20 2020  nt index(to).   
-0003a3a0: 2020 2066 6f72 6365 3d54 7275 653a 2065     force=True: e
-0003a3b0: 7665 6e20 7475 706c 6520 746f 206d 6f76  ven tuple to mov
-0003a3c0: 650a 2020 2020 6966 206e 6f74 2073 7570  e.    if not sup
-0003a3d0: 706f 7274 2074 6865 6e20 7265 7475 726e  port then return
-0003a3e0: 2064 6566 6175 6c74 0a20 2020 2064 6566   default.    def
-0003a3f0: 6175 6c74 203a 206f 7267 0a20 2020 2027  ault : org.    '
-0003a400: 2727 0a20 2020 205f 7475 706c 653d 4661  ''.    _tuple=Fa
-0003a410: 6c73 650a 2020 2020 7372 635f 7479 7065  lse.    src_type
-0003a420: 3d54 7970 654e 616d 6528 7372 6329 0a20  =TypeName(src). 
-0003a430: 2020 2069 6620 7372 635f 7479 7065 203d     if src_type =
-0003a440: 3d20 2774 7570 6c65 273a 0a20 2020 2020  = 'tuple':.     
-0003a450: 2020 2069 6620 6e6f 7420 666f 7263 653a     if not force:
-0003a460: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
-0003a470: 7372 632c 6465 6661 756c 7429 0a20 2020  src,default).   
-0003a480: 2020 2020 205f 7475 706c 653d 5472 7565       _tuple=True
-0003a490: 0a20 2020 2020 2020 2073 7263 5f74 7970  .        src_typ
-0003a4a0: 653d 276c 6973 7427 0a20 2020 2069 6620  e='list'.    if 
-0003a4b0: 7372 635f 7479 7065 2069 6e20 5b27 6c69  src_type in ['li
-0003a4c0: 7374 272c 2773 7472 275d 2061 6e64 2073  st','str'] and s
-0003a4d0: 7263 3a0a 2020 2020 2020 2020 7372 633d  rc:.        src=
-0003a4e0: 6c69 7374 2873 7263 290a 2020 2020 2020  list(src).      
-0003a4f0: 2020 6966 2074 6f20 3d3d 2027 6c61 7374    if to == 'last
-0003a500: 273a 2074 6f3d 2d31 0a20 2020 2020 2020  ': to=-1.       
-0003a510: 2065 6c69 6620 746f 203d 3d20 2766 6972   elif to == 'fir
-0003a520: 7374 273a 2074 6f3d 300a 2020 2020 2020  st': to=0.      
-0003a530: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0003a540: 6672 6f6d 5f69 6478 2c69 6e74 2920 616e  from_idx,int) an
-0003a550: 6420 6973 696e 7374 616e 6365 2874 6f2c  d isinstance(to,
-0003a560: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
-0003a570: 2020 6966 206c 656e 2873 7263 2920 3e20    if len(src) > 
-0003a580: 6162 7328 6672 6f6d 5f69 6478 293a 0a20  abs(from_idx):. 
-0003a590: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0003a5a0: 6f3d 4669 7849 6e64 6578 2873 7263 2c74  o=FixIndex(src,t
-0003a5b0: 6f29 0a20 2020 2020 2020 2020 2020 2020  o).             
-0003a5c0: 2020 2069 6620 6672 6f6d 5f69 6478 213d     if from_idx!=
-0003a5d0: 746f 3a0a 2020 2020 2020 2020 2020 2020  to:.            
-0003a5e0: 2020 2020 2020 2020 6966 2074 6f20 3d3d          if to ==
-0003a5f0: 202d 313a 0a20 2020 2020 2020 2020 2020   -1:.           
-0003a600: 2020 2020 2020 2020 2020 2020 2073 7263               src
-0003a610: 2e61 7070 656e 6428 7372 635b 6672 6f6d  .append(src[from
-0003a620: 5f69 6478 5d29 0a20 2020 2020 2020 2020  _idx]).         
-0003a630: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0003a640: 746f 203d 3d20 303a 0a20 2020 2020 2020  to == 0:.       
-0003a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a660: 2073 7263 3d5b 7372 635b 6672 6f6d 5f69   src=[src[from_i
-0003a670: 6478 5d5d 2b73 7263 0a20 2020 2020 2020  dx]]+src.       
-0003a680: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0003a690: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0003a6a0: 2020 2020 2020 2020 2020 2073 7263 3d73             src=s
-0003a6b0: 7263 5b3a 746f 5d2b 5b73 7263 5b66 726f  rc[:to]+[src[fro
-0003a6c0: 6d5f 6964 785d 5d2b 7372 635b 746f 3a5d  m_idx]]+src[to:]
-0003a6d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003a6e0: 2020 2020 2073 7263 5b74 6f5d 3d73 7263       src[to]=src
-0003a6f0: 5b66 726f 6d5f 6964 785d 0a20 2020 2020  [from_idx].     
-0003a700: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0003a710: 656c 2073 7263 5b66 726f 6d5f 6964 785d  el src[from_idx]
-0003a720: 0a20 2020 2020 2020 2065 6c69 6620 6e6f  .        elif no
-0003a730: 7420 4973 4e6f 6e65 2864 6174 6129 2061  t IsNone(data) a
-0003a740: 6e64 2069 7369 6e73 7461 6e63 6528 746f  nd isinstance(to
-0003a750: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
-0003a760: 2020 2074 6f3d 4669 7849 6e64 6578 2873     to=FixIndex(s
-0003a770: 7263 2c74 6f29 0a20 2020 2020 2020 2020  rc,to).         
-0003a780: 2020 2073 7263 3d5b 6920 666f 7220 6920     src=[i for i 
-0003a790: 696e 2073 7263 2069 6620 6921 3d64 6174  in src if i!=dat
-0003a7a0: 615d 0a20 2020 2020 2020 2020 2020 2069  a].            i
-0003a7b0: 6620 746f 203d 3d20 2d31 3a0a 2020 2020  f to == -1:.    
-0003a7c0: 2020 2020 2020 2020 2020 2020 7372 632e              src.
-0003a7d0: 6170 7065 6e64 2864 6174 6129 0a20 2020  append(data).   
-0003a7e0: 2020 2020 2020 2020 2065 6c69 6620 746f           elif to
-0003a7f0: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
-0003a800: 2020 2020 2020 2073 7263 3d5b 6461 7461         src=[data
-0003a810: 5d2b 7372 630a 2020 2020 2020 2020 2020  ]+src.          
-0003a820: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0003a830: 2020 2020 2020 2020 7372 633d 7372 635b          src=src[
-0003a840: 3a74 6f5d 2b5b 6461 7461 5d2b 7372 635b  :to]+[data]+src[
-0003a850: 746f 3a5d 0a20 2020 2020 2020 2069 6620  to:].        if 
-0003a860: 5f74 7570 6c65 3a20 7265 7475 726e 2074  _tuple: return t
-0003a870: 7570 6c65 2873 7263 290a 2020 2020 2020  uple(src).      
-0003a880: 2020 656c 6966 2073 7263 5f74 7970 6520    elif src_type 
-0003a890: 3d3d 2027 7374 7227 3a20 7265 7475 726e  == 'str': return
-0003a8a0: 204a 6f69 6e28 7372 632c 2727 290a 2020   Join(src,'').  
-0003a8b0: 2020 2020 2020 7265 7475 726e 2073 7263        return src
-0003a8c0: 0a20 2020 2072 6574 7572 6e20 4465 6661  .    return Defa
-0003a8d0: 756c 7428 7372 632c 6465 6661 756c 7429  ult(src,default)
-0003a8e0: 0a0a 6465 6620 5261 6e64 6f6d 286c 656e  ..def Random(len
-0003a8f0: 6774 683d 382c 6d6f 6465 3d4e 6f6e 652c  gth=8,mode=None,
-0003a900: 7374 7273 3d4e 6f6e 652c 2a2a 6f70 7473  strs=None,**opts
-0003a910: 293a 0a20 2020 2027 2727 0a20 2020 206d  ):.    '''.    m
-0003a920: 616b 6520 7261 6e64 6f6d 206e 756d 6265  ake random numbe
-0003a930: 722f 7374 7269 6e67 2f63 6861 7261 6374  r/string/charact
-0003a940: 6572 730a 2020 2020 6c65 6e67 7468 2020  ers.    length  
-0003a950: 203a 2072 616e 646f 6d20 7374 7269 6e67   : random string
-0003a960: 206c 656e 6774 6820 2864 6566 6175 6c74   length (default
-0003a970: 3a20 3829 0a20 2020 206d 6f64 6520 2864  : 8).    mode (d
-0003a980: 6566 6175 6c74 3a20 416c 7068 616e 756d  efault: Alphanum
-0003a990: 290a 2020 2020 202d 2061 6c70 6861 203a  ).     - alpha :
-0003a9a0: 206c 6f77 6572 2061 6c70 6861 6265 740a   lower alphabet.
-0003a9b0: 2020 2020 202d 2041 4c50 4841 203a 2075       - ALPHA : u
-0003a9c0: 7070 6572 2061 6c70 6861 6265 740a 2020  pper alphabet.  
-0003a9d0: 2020 202d 2041 6c70 6861 203a 206c 6f77     - Alpha : low
-0003a9e0: 6572 202b 2075 7070 6572 2061 6c70 6861  er + upper alpha
-0003a9f0: 6265 740a 2020 2020 202d 206e 756d 2020  bet.     - num  
-0003aa00: 203a 206e 756d 6265 720a 2020 2020 202d   : number.     -
-0003aa10: 2063 6861 7220 203a 206c 696e 7578 2063   char  : linux c
-0003aa20: 6f6e 736f 6c65 2075 7361 626c 6520 7379  onsole usable sy
-0003aa30: 6d62 6f6c 2063 6861 7261 6374 6572 730a  mbol characters.
-0003aa40: 2020 2020 202d 2073 796d 2020 203a 2061       - sym   : a
-0003aa50: 6c6c 2073 796d 626f 6c20 6368 6172 6163  ll symbol charac
-0003aa60: 7465 7273 0a20 2020 2020 2d20 636f 6d62  ters.     - comb
-0003aa70: 696e 2061 626f 7665 206d 6f64 6573 2028  in above modes (
-0003aa80: 6578 3a20 416c 7068 616e 756d 290a 2020  ex: Alphanum).  
-0003aa90: 2020 7374 7273 2020 2020 203a 2069 6620    strs     : if 
-0003aaa0: 796f 7520 7761 6e74 206d 616b 6520 6120  you want make a 
-0003aab0: 7261 6e64 6f6d 2073 7472 696e 6720 7769  random string wi
-0003aac0: 7468 2079 6f75 7220 6f77 6e20 7370 6563  th your own spec
-0003aad0: 6961 6c20 6368 6172 6163 7465 7273 0a20  ial characters. 
-0003aae0: 2020 2027 2727 0a20 2020 2061 6c70 6861     '''.    alpha
-0003aaf0: 3d27 6162 6364 6566 6768 696a 6b6c 6d6e  ='abcdefghijklmn
-0003ab00: 6f70 7172 7374 7576 7778 797a 270a 2020  opqrstuvwxyz'.  
-0003ab10: 2020 416c 7068 613d 2741 4243 4445 4647    Alpha='ABCDEFG
-0003ab20: 4849 4a4b 4c4d 4e4f 5051 5253 5455 5657  HIJKLMNOPQRSTUVW
-0003ab30: 5859 5a27 0a20 2020 206e 756d 3d27 3031  XYZ'.    num='01
-0003ab40: 3233 3435 3637 3839 270a 2020 2020 7379  23456789'.    sy
-0003ab50: 6d62 6f6c 3d27 2727 7e21 4023 2425 5e5f  mbol='''~!@#$%^_
-0003ab60: 2b2d 3d7b 7d5b 5d3a 2c2e 2727 270a 2020  +-={}[]:,.'''.  
-0003ab70: 2020 5379 6d62 6f6c 3d27 2727 602a 2829    Symbol='''`*()
-0003ab80: 267c 5c5c 273b 222f 693c 3e3f 2727 270a  &|\\';"/i<>?'''.
-0003ab90: 2020 2020 7370 6163 653d 2720 270a 2020      space=' '.  
-0003aba0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-0003abb0: 6e63 6528 7374 7273 2c73 7472 2920 6f72  nce(strs,str) or
-0003abc0: 206e 6f74 2073 7472 733a 0a20 2020 2020   not strs:.     
-0003abd0: 2020 2073 7472 733d 2727 0a20 2020 2020     strs=''.     
-0003abe0: 2020 2069 6620 6d6f 6465 2069 6e20 5b27     if mode in ['
-0003abf0: 616c 6c27 2c27 2a27 5d3a 0a20 2020 2020  all','*']:.     
-0003ac00: 2020 2020 2020 2073 7472 733d 616c 7068         strs=alph
-0003ac10: 612b 416c 7068 612b 6e75 6d2b 7379 6d62  a+Alpha+num+symb
-0003ac20: 6f6c 2b53 796d 626f 6c2b 7370 6163 650a  ol+Symbol+space.
-0003ac30: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-0003ac40: 6e73 7461 6e63 6528 6d6f 6465 2c73 7472  nstance(mode,str
-0003ac50: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-0003ac60: 6620 2761 6c70 6861 2720 696e 206d 6f64  f 'alpha' in mod
-0003ac70: 653a 2073 7472 733d 616c 7068 610a 2020  e: strs=alpha.  
-0003ac80: 2020 2020 2020 2020 2020 6966 2027 416c            if 'Al
-0003ac90: 7068 6127 2069 6e20 6d6f 6465 3a20 7374  pha' in mode: st
-0003aca0: 7273 3d61 6c70 6861 2b41 6c70 6861 0a20  rs=alpha+Alpha. 
-0003acb0: 2020 2020 2020 2020 2020 2069 6620 2741             if 'A
-0003acc0: 4c50 4841 2720 696e 206d 6f64 653a 2073  LPHA' in mode: s
-0003acd0: 7472 733d 416c 7068 610a 2020 2020 2020  trs=Alpha.      
-0003ace0: 2020 2020 2020 6966 2027 6e75 6d27 2069        if 'num' i
-0003acf0: 6e20 6d6f 6465 3a20 7374 7273 3d73 7472  n mode: strs=str
-0003ad00: 732b 6e75 6d0a 2020 2020 2020 2020 2020  s+num.          
-0003ad10: 2020 6966 2027 6368 6172 2720 696e 206d    if 'char' in m
-0003ad20: 6f64 653a 2073 7472 733d 7374 7273 2b73  ode: strs=strs+s
-0003ad30: 796d 626f 6c0a 2020 2020 2020 2020 2020  ymbol.          
-0003ad40: 2020 656c 6966 2027 7379 6d27 2069 6e20    elif 'sym' in 
-0003ad50: 6d6f 6465 3a20 7374 7273 3d73 7472 732b  mode: strs=strs+
-0003ad60: 7379 6d62 6f6c 2b53 796d 626f 6c2b 7370  symbol+Symbol+sp
-0003ad70: 6163 650a 2020 2020 6966 206e 6f74 2073  ace.    if not s
-0003ad80: 7472 733a 2073 7472 733d 616c 7068 612b  trs: strs=alpha+
-0003ad90: 416c 7068 612b 6e75 6d0a 2020 2020 7374  Alpha+num.    st
-0003ada0: 726e 3d6c 656e 2873 7472 7329 2d31 0a20  rn=len(strs)-1. 
-0003adb0: 2020 2073 7472 613d 6c69 7374 2873 7472     stra=list(str
-0003adc0: 7329 0a20 2020 206f 7574 3d5b 5d0a 2020  s).    out=[].  
-0003add0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-0003ade0: 2830 2c6c 656e 6774 6829 3a0a 2020 2020  (0,length):.    
-0003adf0: 2020 2020 7261 6e64 6f6d 2e73 6875 6666      random.shuff
-0003ae00: 6c65 2873 7472 6129 0a20 2020 2020 2020  le(stra).       
-0003ae10: 206f 7574 2e61 7070 656e 6428 7374 7261   out.append(stra
-0003ae20: 5b72 616e 646f 6d2e 7261 6e64 696e 7428  [random.randint(
-0003ae30: 302c 7374 726e 295d 290a 2020 2020 7265  0,strn)]).    re
-0003ae40: 7475 726e 2069 6e74 2827 272e 6a6f 696e  turn int(''.join
-0003ae50: 286f 7574 2929 2069 6620 6d6f 6465 203d  (out)) if mode =
-0003ae60: 3d20 276e 756d 2720 656c 7365 2027 272e  = 'num' else ''.
-0003ae70: 6a6f 696e 286f 7574 290a 0a64 6566 2049  join(out)..def I
-0003ae80: 7341 6c6c 5361 6d65 5374 7228 7372 632c  sAllSameStr(src,
-0003ae90: 6669 6e64 293a 0a20 2020 2027 2727 4368  find):.    '''Ch
-0003aea0: 6563 6b20 696e 7075 7420 7374 7269 6e67  eck input string
-0003aeb0: 2069 7320 416c 6c20 7361 6d65 2073 7472   is All same str
-0003aec0: 696e 6720 6f72 206e 6f74 2727 270a 2020  ing or not'''.  
-0003aed0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0003aee0: 7372 632c 7374 7229 2061 6e64 2069 7369  src,str) and isi
-0003aef0: 6e73 7461 6e63 6528 6669 6e64 2c73 7472  nstance(find,str
-0003af00: 293a 0a20 2020 2020 2020 2069 6620 7372  ):.        if sr
-0003af10: 632e 636f 756e 7428 6669 6e64 2920 3d3d  c.count(find) ==
-0003af20: 206c 656e 2873 7263 292f 6c65 6e28 6669   len(src)/len(fi
-0003af30: 6e64 293a 0a20 2020 2020 2020 2020 2020  nd):.           
-0003af40: 2072 6574 7572 6e20 5472 7565 0a20 2020   return True.   
-0003af50: 2072 6574 7572 6e20 4661 6c73 650a 0a64   return False..d
-0003af60: 6566 204d 6b54 656d 7028 6669 6c65 6e61  ef MkTemp(filena
-0003af70: 6d65 3d4e 6f6e 652c 7375 6666 6978 3d4e  me=None,suffix=N
-0003af80: 6f6e 652c 7370 6c69 743d 272d 272c 6f70  one,split='-',op
-0003af90: 743d 2764 7279 272c 6261 7365 5f64 6972  t='dry',base_dir
-0003afa0: 3d4e 6f6e 652c 756e 6971 3d46 616c 7365  =None,uniq=False
-0003afb0: 2c64 6566 6175 6c74 5f6c 656e 6774 683d  ,default_length=
-0003afc0: 382c 6d6f 6465 3d4e 6f6e 652c 2a2a 6f70  8,mode=None,**op
-0003afd0: 7473 293a 0a20 2020 2027 2727 0a20 2020  ts):.    '''.   
-0003afe0: 206d 616b 6520 6120 7261 6e64 6f6d 2073   make a random s
-0003aff0: 7472 696e 670a 2020 2020 6669 6c65 6e61  tring.    filena
-0003b000: 6d65 3a20 0a20 2020 2020 204e 6f6e 6520  me: .      None 
-0003b010: 203a 2067 656e 6572 6174 6520 7261 6e64   : generate rand
-0003b020: 6f6d 2073 7472 696e 670a 2020 2020 2020  om string.      
-0003b030: 6162 632d 5858 5858 582e 6c6f 6720 3a20  abc-XXXXX.log : 
-0003b040: 6162 632d 3c72 616e 646f 6d20 3520 6368  abc-<random 5 ch
-0003b050: 6172 6163 7465 7273 3e2e 6c6f 670a 2020  aracters>.log.  
-0003b060: 2020 2020 6162 632d 4e4e 4e2d 6162 6364      abc-NNN-abcd
-0003b070: 2e6c 6f67 2020 203a 2061 6263 2d3c 7261  .log   : abc-<ra
-0003b080: 6e64 6f6d 2033 206e 756d 6265 7273 3e2d  ndom 3 numbers>-
-0003b090: 6162 6364 2e6c 6f67 0a20 2020 2020 2061  abcd.log.      a
-0003b0a0: 6263 2e6c 6f67 2d58 5858 5820 203a 2061  bc.log-XXXX  : a
-0003b0b0: 6263 2e6c 6f67 2d3c 7261 6e64 6f6d 2034  bc.log-<random 4
-0003b0c0: 2063 6861 7261 6374 6572 733e 0a20 2020   characters>.   
-0003b0d0: 2073 7566 6669 7820 203a 2069 6620 796f   suffix  : if yo
-0003b0e0: 7520 6e65 6564 2061 6464 696e 6720 6669  u need adding fi
-0003b0f0: 6c65 2065 7874 616e 6428 7375 6666 6978  le extand(suffix
-0003b100: 2920 2865 783a 2073 7566 6669 783d 276c  ) (ex: suffix='l
-0003b110: 6f67 2720 3d3e 2058 5858 5858 2e6c 6f67  og' => XXXXX.log
-0003b120: 290a 2020 2020 7370 6c69 7420 2020 3a20  ).    split   : 
-0003b130: 6465 6661 756c 7420 2d2c 2073 706c 6974  default -, split
-0003b140: 2073 796d 626f 6c20 666f 7220 7468 6520   symbol for the 
-0003b150: 6669 6c65 6e61 6d65 0a20 2020 206f 7074  filename.    opt
-0003b160: 0a20 2020 2020 202d 2064 7279 203a 2064  .      - dry : d
-0003b170: 7279 2072 756e 2028 7265 7475 726e 2073  ry run (return s
-0003b180: 7472 696e 6729 2864 6566 6175 6c74 290a  tring)(default).
-0003b190: 2020 2020 2020 2d20 6669 6c65 3a20 6d61        - file: ma
-0003b1a0: 6b65 2061 2066 696c 650a 2020 2020 2020  ke a file.      
-0003b1b0: 2d20 6469 7220 3a20 6d61 6b65 2061 2064  - dir : make a d
-0003b1c0: 6972 6563 746f 7279 0a20 2020 2062 6173  irectory.    bas
-0003b1d0: 655f 6469 723a 2069 6620 796f 7520 7761  e_dir: if you wa
-0003b1e0: 6e74 2061 2073 7472 696e 6720 756e 6465  nt a string unde
-0003b1f0: 7220 6261 7365 5f64 6972 0a20 2020 2075  r base_dir.    u
-0003b200: 6e69 7120 2020 203a 2069 6620 796f 7520  niq    : if you 
-0003b210: 7761 6e74 206d 616b 6520 6120 756e 6971  want make a uniq
-0003b220: 2073 7472 696e 6720 286e 6f74 2065 7869   string (not exi
-0003b230: 7374 696e 6720 6669 6c65 6e61 6d65 2069  sting filename i
-0003b240: 6e20 7468 6520 2862 6173 655f 6469 7229  n the (base_dir)
-0003b250: 6469 7265 6374 6f72 7929 0a20 2020 2020  directory).     
-0003b260: 2073 6569 7269 616c 2069 6e63 7265 6173   seirial increas
-0003b270: 6520 6e75 6d62 6572 0a20 2020 2020 2020  e number.       
-0003b280: 2069 6620 6578 6973 7420 6162 632e 6c6f   if exist abc.lo
-0003b290: 6720 7468 656e 2061 6263 2e6c 6f67 2d30  g then abc.log-0
-0003b2a0: 3030 3030 3030 300a 2020 2020 2020 2020  0000000.        
-0003b2b0: 6966 2065 7869 7374 2061 6263 2e6c 6f67  if exist abc.log
-0003b2c0: 2c61 6263 2e6c 6f67 2d30 3030 3030 3030  ,abc.log-0000000
-0003b2d0: 3020 7468 656e 2061 6263 2e6c 6f67 2d30  0 then abc.log-0
-0003b2e0: 3030 3030 3030 310a 2020 2020 2020 6669  0000001.      fi
-0003b2f0: 6c65 6e61 6d65 3d27 6162 6327 2c73 7566  lename='abc',suf
-0003b300: 6669 783d 276c 6f67 272c 756e 6971 3d54  fix='log',uniq=T
-0003b310: 7275 650a 2020 2020 2020 2020 6966 2065  rue.        if e
-0003b320: 7869 7374 2061 6263 2e6c 6f67 2074 6865  xist abc.log the
-0003b330: 6e20 6162 632d 3030 3030 3030 3030 2e6c  n abc-00000000.l
-0003b340: 6f67 0a20 2020 2020 2020 2069 6620 6578  og.        if ex
-0003b350: 6973 7420 6162 632e 6c6f 672c 6162 632d  ist abc.log,abc-
-0003b360: 3030 3030 3030 3030 2e6c 6f67 2074 6865  00000000.log the
-0003b370: 6e20 6162 632d 3030 3030 3030 3031 2e6c  n abc-00000001.l
-0003b380: 6f67 0a20 2020 2064 6566 6175 6c74 5f6c  og.    default_l
-0003b390: 656e 6774 683a 2072 616e 646f 6d20 7374  ength: random st
-0003b3a0: 7269 6e67 206c 656e 6774 680a 2020 2020  ring length.    
-0003b3b0: 6d6f 6465 2020 2020 3a20 7261 6e64 6f6d  mode    : random
-0003b3c0: 2073 7472 696e 6720 6d6f 6465 2028 7361   string mode (sa
-0003b3d0: 6d65 2061 7320 5261 6e64 6f6d 2829 2773  me as Random()'s
-0003b3e0: 206d 6f64 6529 0a20 2020 2063 7573 746f   mode).    custo
-0003b3f0: 6d20 203a 2063 7573 746f 6d20 7261 6e64  m  : custom rand
-0003b400: 6f6d 2073 7472 696e 6720 736f 7572 6365  om string source
-0003b410: 2028 7361 6d65 2061 7320 5261 6e64 6f6d   (same as Random
-0003b420: 2829 2773 2073 7472 7320 7061 7261 6d65  ()'s strs parame
-0003b430: 7465 7229 0a20 2020 2027 2727 0a20 2020  ter).    '''.   
-0003b440: 2023 5375 7070 6f72 7420 4f4c 4420 4d6b   #Support OLD Mk
-0003b450: 5465 6d70 2829 200a 2020 2020 6966 2069  Temp() .    if i
-0003b460: 7369 6e73 7461 6e63 6528 7375 6666 6978  sinstance(suffix
-0003b470: 2c73 7472 2920 616e 6420 6973 696e 7374  ,str) and isinst
-0003b480: 616e 6365 2866 696c 656e 616d 652c 7374  ance(filename,st
-0003b490: 7229 3a0a 2020 2020 2020 2020 6966 2073  r):.        if s
-0003b4a0: 7566 6669 785b 305d 3d3d 272d 273a 0a20  uffix[0]=='-':. 
-0003b4b0: 2020 2020 2020 2020 2020 2069 6620 4973             if Is
-0003b4c0: 416c 6c53 616d 6553 7472 2873 7566 6669  AllSameStr(suffi
-0003b4d0: 785b 313a 5d2c 2758 2729 206f 7220 4973  x[1:],'X') or Is
-0003b4e0: 416c 6c53 616d 6553 7472 2873 7566 6669  AllSameStr(suffi
-0003b4f0: 785b 313a 5d2c 274e 2729 206f 7220 4973  x[1:],'N') or Is
-0003b500: 416c 6c53 616d 6553 7472 2873 7566 6669  AllSameStr(suffi
-0003b510: 785b 313a 5d2c 2778 2729 206f 7220 4973  x[1:],'x') or Is
-0003b520: 416c 6c53 616d 6553 7472 2873 7566 6669  AllSameStr(suffi
-0003b530: 785b 313a 5d2c 276e 2729 3a0a 2020 2020  x[1:],'n'):.    
-0003b540: 2020 2020 2020 2020 2020 2020 6465 6661              defa
-0003b550: 756c 745f 6c65 6e67 7468 3d6c 656e 2873  ult_length=len(s
-0003b560: 7566 6669 7829 2d31 0a20 2020 2020 2020  uffix)-1.       
-0003b570: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
-0003b580: 653d 6669 6c65 6e61 6d65 2b73 7566 6669  e=filename+suffi
-0003b590: 782e 7570 7065 7228 290a 2020 2020 2320  x.upper().    # 
-0003b5a0: 4e65 7720 6465 7369 676e 0a20 2020 2064  New design.    d
-0003b5b0: 6566 206f 7574 6669 6c65 2866 696c 656e  ef outfile(filen
-0003b5c0: 616d 652c 6f70 7429 3a0a 2020 2020 2020  ame,opt):.      
-0003b5d0: 2020 6966 206f 7074 2069 6e20 5b27 6669    if opt in ['fi
-0003b5e0: 6c65 272c 2766 275d 3a0a 2020 2020 2020  le','f']:.      
-0003b5f0: 2020 2020 206f 732e 6d6b 6e6f 6465 2866       os.mknode(f
-0003b600: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
-0003b610: 2065 6c69 6620 6f70 7420 696e 205b 2764   elif opt in ['d
-0003b620: 6972 272c 2764 272c 2764 6972 6563 746f  ir','d','directo
-0003b630: 7279 275d 3a0a 2020 2020 2020 2020 2020  ry']:.          
-0003b640: 206f 732e 6d6b 6469 7228 6669 6c65 6e61   os.mkdir(filena
-0003b650: 6d65 290a 2020 2020 2020 2020 656c 7365  me).        else
-0003b660: 3a0a 2020 2020 2020 2020 2020 2072 6574  :.           ret
-0003b670: 7572 6e20 6669 6c65 6e61 6d65 0a0a 2020  urn filename..  
-0003b680: 2020 6465 6620 6d6b 5f66 696c 656e 616d    def mk_filenam
-0003b690: 6528 6669 6c65 6e61 6d65 2c73 706c 6974  e(filename,split
-0003b6a0: 293a 0a20 2020 2020 2020 2066 696c 656e  ):.        filen
-0003b6b0: 616d 655f 613d 6669 6c65 6e61 6d65 2e73  ame_a=filename.s
-0003b6c0: 706c 6974 2873 706c 6974 290a 2020 2020  plit(split).    
-0003b6d0: 2020 2020 6669 6c65 6e61 6d65 5f6e 3d6c      filename_n=l
-0003b6e0: 656e 2866 696c 656e 616d 655f 6129 0a20  en(filename_a). 
-0003b6f0: 2020 2020 2020 2073 7373 3d4e 6f6e 650a         sss=None.
-0003b700: 2020 2020 2020 2020 666f 7220 6666 2069          for ff i
-0003b710: 6e20 7261 6e67 6528 302c 6669 6c65 6e61  n range(0,filena
-0003b720: 6d65 5f6e 293a 0a20 2020 2020 2020 2020  me_n):.         
-0003b730: 2020 2066 6f72 2073 7320 696e 205b 274e     for ss in ['N
-0003b740: 272c 2758 275d 3a0a 2020 2020 2020 2020  ','X']:.        
-0003b750: 2020 2020 2020 2020 6966 2049 7341 6c6c          if IsAll
-0003b760: 5361 6d65 5374 7228 6669 6c65 6e61 6d65  SameStr(filename
-0003b770: 5f61 5b66 665d 2c73 7329 3a0a 2020 2020  _a[ff],ss):.    
-0003b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b790: 7373 733d 7373 0a20 2020 2020 2020 2020  sss=ss.         
-0003b7a0: 2020 2020 2020 2020 2020 2069 6620 6666             if ff
-0003b7b0: 203c 2066 696c 656e 616d 655f 6e2d 313a   < filename_n-1:
-0003b7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003b7d0: 2020 2020 2020 2020 2061 613d 5261 6e64           aa=Rand
-0003b7e0: 6f6d 286c 656e 6774 683d 6c65 6e28 6669  om(length=len(fi
-0003b7f0: 6c65 6e61 6d65 5f61 5b66 665d 292c 6d6f  lename_a[ff]),mo
-0003b800: 6465 3d27 6e75 6d27 2069 6620 7373 7320  de='num' if sss 
-0003b810: 3d3d 2027 4e27 2065 6c73 6520 6d6f 6465  == 'N' else mode
-0003b820: 2c73 7472 733d 6f70 7473 2e67 6574 2827  ,strs=opts.get('
-0003b830: 6375 7374 6f6d 2729 290a 2020 2020 2020  custom')).      
-0003b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b850: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0003b860: 6161 2c69 6e74 293a 0a20 2020 2020 2020  aa,int):.       
-0003b870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b880: 2020 2020 2066 696c 656e 616d 655f 615b       filename_a[
-0003b890: 6666 5d3d 2725 307b 7d64 272e 666f 726d  ff]='%0{}d'.form
-0003b8a0: 6174 286c 656e 2866 696c 656e 616d 655f  at(len(filename_
-0003b8b0: 615b 6666 5d29 2925 6161 0a20 2020 2020  a[ff]))%aa.     
-0003b8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b8d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0003b8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b8f0: 2020 2020 2066 696c 656e 616d 655f 615b       filename_a[
-0003b900: 6666 5d3d 277b 7d27 2e66 6f72 6d61 7428  ff]='{}'.format(
-0003b910: 6161 290a 2020 2020 2020 2020 6669 6c65  aa).        file
-0003b920: 6e61 6d65 5f6c 6173 745f 7375 6666 6978  name_last_suffix
-0003b930: 3d66 696c 656e 616d 655f 615b 2d31 5d2e  =filename_a[-1].
-0003b940: 7370 6c69 7428 272e 2729 5b30 5d0a 2020  split('.')[0].  
-0003b950: 2020 2020 2020 6669 6c65 6e61 6d65 5f6c        filename_l
-0003b960: 6173 745f 6578 743d 272e 272e 6a6f 696e  ast_ext='.'.join
-0003b970: 2866 696c 656e 616d 655f 615b 2d31 5d2e  (filename_a[-1].
-0003b980: 7370 6c69 7428 272e 2729 5b31 3a5d 290a  split('.')[1:]).
-0003b990: 2020 2020 2020 2020 6966 2073 7373 2069          if sss i
-0003b9a0: 7320 4e6f 6e65 3a20 7373 733d 5b27 4e27  s None: sss=['N'
-0003b9b0: 2c27 5827 5d0a 2020 2020 2020 2020 666f  ,'X'].        fo
-0003b9c0: 7220 7373 2069 6e20 7373 733a 0a20 2020  r ss in sss:.   
-0003b9d0: 2020 2020 2020 2020 2069 6620 4973 416c           if IsAl
-0003b9e0: 6c53 616d 6553 7472 2866 696c 656e 616d  lSameStr(filenam
-0003b9f0: 655f 6c61 7374 5f73 7566 6669 782c 7373  e_last_suffix,ss
-0003ba00: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0003ba10: 2020 2061 613d 5261 6e64 6f6d 286c 656e     aa=Random(len
-0003ba20: 6774 683d 6c65 6e28 6669 6c65 6e61 6d65  gth=len(filename
-0003ba30: 5f6c 6173 745f 7375 6666 6978 292c 6d6f  _last_suffix),mo
-0003ba40: 6465 3d27 6e75 6d27 2069 6620 7373 203d  de='num' if ss =
-0003ba50: 3d20 274e 2720 656c 7365 206d 6f64 652c  = 'N' else mode,
-0003ba60: 7374 7273 3d6f 7074 732e 6765 7428 2763  strs=opts.get('c
-0003ba70: 7573 746f 6d27 2929 0a20 2020 2020 2020  ustom')).       
-0003ba80: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-0003ba90: 7374 616e 6365 2861 612c 696e 7429 3a0a  stance(aa,int):.
-0003baa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bab0: 2020 2020 6669 6c65 6e61 6d65 5f61 5b2d      filename_a[-
-0003bac0: 315d 3d27 2530 7b7d 6427 2e66 6f72 6d61  1]='%0{}d'.forma
-0003bad0: 7428 6c65 6e28 6669 6c65 6e61 6d65 5f6c  t(len(filename_l
-0003bae0: 6173 745f 7375 6666 6978 2929 2561 610a  ast_suffix))%aa.
-0003baf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bb00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003bb10: 2020 2020 2020 2020 2020 6669 6c65 6e61            filena
-0003bb20: 6d65 5f61 5b2d 315d 3d27 7b7d 272e 666f  me_a[-1]='{}'.fo
-0003bb30: 726d 6174 2861 6129 0a20 2020 2020 2020  rmat(aa).       
-0003bb40: 2020 2020 2020 2020 2069 6620 6669 6c65           if file
-0003bb50: 6e61 6d65 5f6c 6173 745f 6578 743a 0a20  name_last_ext:. 
-0003bb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bb70: 2020 2066 696c 656e 616d 655f 615b 2d31     filename_a[-1
-0003bb80: 5d3d 6669 6c65 6e61 6d65 5f61 5b2d 315d  ]=filename_a[-1]
-0003bb90: 2b27 2e7b 7d27 2e66 6f72 6d61 7428 6669  +'.{}'.format(fi
-0003bba0: 6c65 6e61 6d65 5f6c 6173 745f 6578 7429  lename_last_ext)
-0003bbb0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0003bbc0: 7370 6c69 742e 6a6f 696e 2866 696c 656e  split.join(filen
-0003bbd0: 616d 655f 6129 0a0a 2020 2020 6966 2049  ame_a)..    if I
-0003bbe0: 734e 6f6e 6528 6669 6c65 6e61 6d65 2920  sNone(filename) 
-0003bbf0: 6f72 206e 6f74 2069 7369 6e73 7461 6e63  or not isinstanc
-0003bc00: 6528 6669 6c65 6e61 6d65 2c73 7472 293a  e(filename,str):
-0003bc10: 0a20 2020 2020 2020 2072 6669 6c65 6e61  .        rfilena
-0003bc20: 6d65 3d52 616e 646f 6d28 6c65 6e67 7468  me=Random(length
-0003bc30: 3d64 6566 6175 6c74 5f6c 656e 6774 682c  =default_length,
-0003bc40: 6d6f 6465 3d27 6e75 6d27 2069 6620 7375  mode='num' if su
-0003bc50: 6666 6978 2069 6e20 5b27 6e27 2c27 4e27  ffix in ['n','N'
-0003bc60: 5d20 656c 7365 206d 6f64 652c 7374 7273  ] else mode,strs
-0003bc70: 3d6f 7074 732e 6765 7428 2763 7573 746f  =opts.get('custo
-0003bc80: 6d27 2929 0a20 2020 2020 2020 2062 6173  m')).        bas
-0003bc90: 655f 6469 723d 272e 2720 6966 206e 6f74  e_dir='.' if not
-0003bca0: 2062 6173 655f 6469 7220 656c 7365 2062   base_dir else b
-0003bcb0: 6173 655f 6469 720a 2020 2020 656c 7365  ase_dir.    else
-0003bcc0: 3a0a 2020 2020 2020 2020 6261 7365 5f64  :.        base_d
-0003bcd0: 6972 3d6f 732e 7061 7468 2e64 6972 6e61  ir=os.path.dirna
-0003bce0: 6d65 2866 696c 656e 616d 6529 0a20 2020  me(filename).   
-0003bcf0: 2020 2020 2062 6173 655f 6469 723d 272e       base_dir='.
-0003bd00: 2720 6966 206e 6f74 2062 6173 655f 6469  ' if not base_di
-0003bd10: 7220 656c 7365 2062 6173 655f 6469 720a  r else base_dir.
-0003bd20: 2020 2020 2020 2020 7266 696c 656e 616d          rfilenam
-0003bd30: 653d 6d6b 5f66 696c 656e 616d 6528 6f73  e=mk_filename(os
-0003bd40: 2e70 6174 682e 6261 7365 6e61 6d65 2866  .path.basename(f
-0003bd50: 696c 656e 616d 6529 2c73 706c 6974 290a  ilename),split).
-0003bd60: 2020 2020 6966 2075 6e69 713a 0a20 2020      if uniq:.   
-0003bd70: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0003bd80: 6365 2862 6173 655f 6469 722c 7374 7229  ce(base_dir,str)
-0003bd90: 2061 6e64 206f 732e 7061 7468 2e69 7364   and os.path.isd
-0003bda0: 6972 2862 6173 655f 6469 7229 3a0a 2020  ir(base_dir):.  
-0003bdb0: 2020 2020 2020 2020 2020 696e 633d 4661            inc=Fa
-0003bdc0: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
-0003bdd0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-0003bde0: 2c31 3030 3029 3a0a 2020 2020 2020 2020  ,1000):.        
-0003bdf0: 2020 2020 2020 2020 6966 2069 6e63 3a0a          if inc:.
-0003be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003be10: 2020 2020 6e65 775f 6669 6c65 6e61 6d65      new_filename
-0003be20: 3d72 6669 6c65 6e61 6d65 2b27 7b7d 2530  =rfilename+'{}%0
-0003be30: 7b7d 6427 2e66 6f72 6d61 7428 7370 6c69  {}d'.format(spli
-0003be40: 742c 6465 6661 756c 745f 6c65 6e67 7468  t,default_length
-0003be50: 2925 2869 2d31 290a 2020 2020 2020 2020  )%(i-1).        
-0003be60: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0003be70: 7566 6669 783a 0a20 2020 2020 2020 2020  uffix:.         
-0003be80: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-0003be90: 6577 5f66 696c 656e 616d 653d 6e65 775f  ew_filename=new_
-0003bea0: 6669 6c65 6e61 6d65 2b27 2e7b 7d27 2e66  filename+'.{}'.f
-0003beb0: 6f72 6d61 7428 7375 6666 6978 290a 2020  ormat(suffix).  
-0003bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bed0: 2020 6e65 775f 6669 6c65 3d6f 732e 7061    new_file=os.pa
-0003bee0: 7468 2e6a 6f69 6e28 6261 7365 5f64 6972  th.join(base_dir
-0003bef0: 2c6e 6577 5f66 696c 656e 616d 6529 0a20  ,new_filename). 
-0003bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bf10: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
-0003bf20: 682e 6578 6973 7473 286e 6577 5f66 696c  h.exists(new_fil
-0003bf30: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-0003bf40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0003bf50: 726e 206f 7574 6669 6c65 286e 6577 5f66  rn outfile(new_f
-0003bf60: 696c 652c 6f70 7429 0a20 2020 2020 2020  ile,opt).       
-0003bf70: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0003bf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bf90: 2020 206e 6577 5f66 696c 656e 616d 653d     new_filename=
-0003bfa0: 6d6b 5f66 696c 656e 616d 6528 7266 696c  mk_filename(rfil
-0003bfb0: 656e 616d 652c 7370 6c69 7429 0a20 2020  ename,split).   
-0003bfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bfd0: 2069 6620 6e65 775f 6669 6c65 6e61 6d65   if new_filename
-0003bfe0: 203d 3d20 7266 696c 656e 616d 653a 0a20   == rfilename:. 
-0003bff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c000: 2020 2020 2020 2069 6e63 3d54 7275 650a         inc=True.
-0003c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c020: 2020 2020 6966 2073 7566 6669 783a 0a20      if suffix:. 
-0003c030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c040: 2020 2020 2020 206e 6577 5f66 696c 656e         new_filen
-0003c050: 616d 653d 6e65 775f 6669 6c65 6e61 6d65  ame=new_filename
-0003c060: 2b27 2e7b 7d27 2e66 6f72 6d61 7428 7375  +'.{}'.format(su
-0003c070: 6666 6978 290a 2020 2020 2020 2020 2020  ffix).          
-0003c080: 2020 2020 2020 2020 2020 6e65 775f 6669            new_fi
-0003c090: 6c65 3d6f 732e 7061 7468 2e6a 6f69 6e28  le=os.path.join(
-0003c0a0: 6261 7365 5f64 6972 2c6e 6577 5f66 696c  base_dir,new_fil
-0003c0b0: 656e 616d 6529 0a20 2020 2020 2020 2020  ename).         
-0003c0c0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-0003c0d0: 7420 6f73 2e70 6174 682e 6578 6973 7473  t os.path.exists
-0003c0e0: 286e 6577 5f66 696c 6529 3a0a 2020 2020  (new_file):.    
-0003c0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c100: 2020 2020 7265 7475 726e 206f 7574 6669      return outfi
-0003c110: 6c65 286e 6577 5f66 696c 652c 6f70 7429  le(new_file,opt)
-0003c120: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-0003c130: 2020 2069 6620 6261 7365 5f64 6972 203d     if base_dir =
-0003c140: 3d20 272e 273a 0a20 2020 2020 2020 2020  = '.':.         
-0003c150: 2020 2069 6620 7375 6666 6978 3a0a 2020     if suffix:.  
-0003c160: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0003c170: 7475 726e 2072 6669 6c65 6e61 6d65 2b27  turn rfilename+'
-0003c180: 2e7b 7d27 2e66 6f72 6d61 7428 7375 6666  .{}'.format(suff
-0003c190: 6978 290a 2020 2020 2020 2020 2020 2020  ix).            
-0003c1a0: 7265 7475 726e 2072 6669 6c65 6e61 6d65  return rfilename
-0003c1b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0003c1c0: 6f75 7466 696c 6528 6f73 2e70 6174 682e  outfile(os.path.
-0003c1d0: 6a6f 696e 2862 6173 655f 6469 722c 7266  join(base_dir,rf
-0003c1e0: 696c 656e 616d 6529 2c6f 7074 290a 0a64  ilename),opt)..d
-0003c1f0: 6566 206f 7376 6572 7369 6f6e 286d 6f64  ef osversion(mod
-0003c200: 653d 2775 7070 6572 2729 3a0a 2020 2020  e='upper'):.    
-0003c210: 5f70 6c61 7466 6f72 6d3d 706c 6174 666f  _platform=platfo
-0003c220: 726d 2e73 7973 7465 6d28 290a 2020 2020  rm.system().    
-0003c230: 2336 3462 6974 3a20 706c 6174 666f 726d  #64bit: platform
-0003c240: 2e61 7263 6869 7465 6374 7572 6528 295b  .architecture()[
-0003c250: 305d 0a20 2020 206d 6f64 653d 276c 2720  0].    mode='l' 
-0003c260: 6966 2049 7353 616d 6528 6d6f 6465 2c27  if IsSame(mode,'
-0003c270: 6c6f 7765 7227 2920 656c 7365 2027 7527  lower') else 'u'
-0003c280: 0a0a 2020 2020 6f75 743d 7b0a 2020 2020  ..    out={.    
-0003c290: 2020 2027 706c 6174 666f 726d 273a 5f70     'platform':_p
-0003c2a0: 6c61 7466 6f72 6d2e 6c6f 7765 7228 2920  latform.lower() 
-0003c2b0: 6966 206d 6f64 6520 3d3d 2027 6c27 2065  if mode == 'l' e
-0003c2c0: 6c73 6520 5f70 6c61 7466 6f72 6d2e 7570  lse _platform.up
-0003c2d0: 7065 7228 292c 0a20 2020 2020 2020 276e  per(),.       'n
-0003c2e0: 616d 6527 3a4e 6f6e 652c 0a20 2020 2020  ame':None,.     
-0003c2f0: 2020 2776 6572 7369 6f6e 273a 4e6f 6e65    'version':None
-0003c300: 2c0a 2020 2020 2020 2027 6578 7427 3a4e  ,.       'ext':N
-0003c310: 6f6e 652c 0a20 2020 2020 2020 2736 3462  one,.       '64b
-0003c320: 6974 273a 7379 732e 6d61 7873 697a 6520  it':sys.maxsize 
-0003c330: 3e20 322a 2a33 322c 0a20 2020 2020 2020  > 2**32,.       
-0003c340: 2763 6f64 6527 3a4e 6f6e 650a 2020 2020  'code':None.    
-0003c350: 7d0a 2020 2020 6966 2027 4c69 6e75 7827  }.    if 'Linux'
-0003c360: 203d 3d20 5f70 6c61 7466 6f72 6d3a 0a20   == _platform:. 
-0003c370: 2020 2020 2020 2072 743d 7273 6865 6c6c         rt=rshell
-0003c380: 2827 2727 5b20 2d66 202f 6574 632f 6f73  ('''[ -f /etc/os
-0003c390: 2d72 656c 6561 7365 205d 2026 2620 2820  -release ] && ( 
-0003c3a0: 2e20 2f65 7463 2f6f 732d 7265 6c65 6173  . /etc/os-releas
-0003c3b0: 6520 3b20 6563 686f 2024 4944 2927 2727  e ; echo $ID)'''
-0003c3c0: 290a 2020 2020 2020 2020 6f75 745b 276e  ).        out['n
-0003c3d0: 616d 6527 5d3d 7274 5b31 5d2e 6c6f 7765  ame']=rt[1].lowe
-0003c3e0: 7228 2920 6966 206d 6f64 6520 3d3d 2027  r() if mode == '
-0003c3f0: 6c27 2065 6c73 6520 7274 5b31 5d2e 7570  l' else rt[1].up
-0003c400: 7065 7228 290a 2020 2020 2020 2020 6966  per().        if
-0003c410: 2049 7349 6e28 6f75 745b 276e 616d 6527   IsIn(out['name'
-0003c420: 5d2c 2827 7562 756e 7475 272c 2752 6173  ],('ubuntu','Ras
-0003c430: 7062 6961 6e27 2c27 4665 646f 7261 2729  pbian','Fedora')
-0003c440: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-0003c450: 743d 7273 6865 6c6c 2827 2727 5b20 2d66  t=rshell('''[ -f
-0003c460: 202f 6574 632f 6f73 2d72 656c 6561 7365   /etc/os-release
-0003c470: 205d 2026 2620 2820 2e20 2f65 7463 2f6f   ] && ( . /etc/o
-0003c480: 732d 7265 6c65 6173 6520 3b20 6563 686f  s-release ; echo
-0003c490: 2024 5645 5253 494f 4e29 2727 2729 0a20   $VERSION)'''). 
-0003c4a0: 2020 2020 2020 2020 2020 206f 7574 5b27             out['
-0003c4b0: 7665 7273 696f 6e27 5d3d 7274 5b31 5d2e  version']=rt[1].
-0003c4c0: 7370 6c69 7428 295b 305d 0a20 2020 2020  split()[0].     
-0003c4d0: 2020 2020 2020 206f 7574 5b27 6578 7427         out['ext'
-0003c4e0: 5d3d 2720 272e 6a6f 696e 2872 745b 315d  ]=' '.join(rt[1]
-0003c4f0: 2e73 706c 6974 2829 5b31 3a5d 290a 2020  .split()[1:]).  
-0003c500: 2020 2020 2020 2020 2020 7274 3d72 7368            rt=rsh
-0003c510: 656c 6c28 2727 275b 202d 6620 2f65 7463  ell('''[ -f /etc
-0003c520: 2f6f 732d 7265 6c65 6173 6520 5d20 2626  /os-release ] &&
-0003c530: 2028 202e 202f 6574 632f 6f73 2d72 656c   ( . /etc/os-rel
-0003c540: 6561 7365 203b 2065 6368 6f20 2456 4552  ease ; echo $VER
-0003c550: 5349 4f4e 5f43 4f44 454e 414d 4529 2727  SION_CODENAME)''
-0003c560: 2729 0a20 2020 2020 2020 2020 2020 206f  ').            o
-0003c570: 7574 5b27 636f 6465 275d 3d72 745b 315d  ut['code']=rt[1]
-0003c580: 0a20 2020 2020 2020 2065 6c73 653a 2023  .        else: #
-0003c590: 4365 6e74 6f73 2c20 526f 636b 792c 2052  Centos, Rocky, R
-0003c5a0: 6564 6861 742c 0a20 2020 2020 2020 2020  edhat,.         
-0003c5b0: 2020 2072 743d 7273 6865 6c6c 2827 2727     rt=rshell('''
-0003c5c0: 5b20 2d66 202f 6574 632f 7265 6468 6174  [ -f /etc/redhat
-0003c5d0: 2d72 656c 6561 7365 205d 2026 2620 6361  -release ] && ca
-0003c5e0: 7420 2f65 7463 2f72 6564 6861 742d 7265  t /etc/redhat-re
-0003c5f0: 6c65 6173 6527 2727 290a 2020 2020 2020  lease''').      
-0003c600: 2020 2020 2020 6966 2072 745b 305d 203d        if rt[0] =
-0003c610: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
-0003c620: 2020 2020 2066 6f72 2069 6920 696e 2072       for ii in r
-0003c630: 745b 315d 2e73 706c 6974 2829 3a0a 2020  t[1].split():.  
-0003c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c650: 2020 6966 2027 2e27 2069 6e20 6969 2061    if '.' in ii a
-0003c660: 6e64 2069 692e 7370 6c69 7428 272e 2729  nd ii.split('.')
-0003c670: 5b30 5d2e 6973 6469 6769 7428 293a 0a20  [0].isdigit():. 
-0003c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c690: 2020 2020 2020 2069 695f 613d 6969 2e73         ii_a=ii.s
-0003c6a0: 706c 6974 2827 2e27 290a 2020 2020 2020  plit('.').      
-0003c6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c6c0: 2020 6f75 745b 2776 6572 7369 6f6e 275d    out['version']
-0003c6d0: 3d27 7b7d 2e7b 7d27 2e66 6f72 6d61 7428  ='{}.{}'.format(
-0003c6e0: 6969 5f61 5b30 5d2c 6969 5f61 5b31 5d29  ii_a[0],ii_a[1])
-0003c6f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003c700: 2020 2020 2020 2020 206f 7574 5b27 6578           out['ex
-0003c710: 7427 5d3d 6969 5f61 5b2d 315d 0a20 2020  t']=ii_a[-1].   
-0003c720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c730: 2020 2020 2062 7265 616b 0a20 2020 2065       break.    e
-0003c740: 6c69 6620 2746 7265 6542 5344 2720 3d3d  lif 'FreeBSD' ==
-0003c750: 205f 706c 6174 666f 726d 3a0a 2020 2020   _platform:.    
-0003c760: 2020 2020 6f75 745b 276e 616d 6527 5d3d      out['name']=
-0003c770: 5f70 6c61 7466 6f72 6d2e 6c6f 7765 7228  _platform.lower(
-0003c780: 2920 6966 206d 6f64 6520 3d3d 2027 6c27  ) if mode == 'l'
-0003c790: 2065 6c73 6520 5f70 6c61 7466 6f72 6d2e   else _platform.
-0003c7a0: 7570 7065 7228 290a 2020 2020 2020 2020  upper().        
-0003c7b0: 6161 3d70 6c61 7466 6f72 6d2e 7665 7273  aa=platform.vers
-0003c7c0: 696f 6e28 290a 2020 2020 2020 2020 6f75  ion().        ou
-0003c7d0: 745b 2776 6572 7369 6f6e 275d 3d61 612e  t['version']=aa.
-0003c7e0: 7370 6c69 7428 295b 315d 2e73 706c 6974  split()[1].split
-0003c7f0: 2827 2d27 295b 305d 0a20 2020 2020 2020  ('-')[0].       
-0003c800: 206f 7574 5b27 6578 7427 5d3d 6161 2e73   out['ext']=aa.s
-0003c810: 706c 6974 2829 5b32 5d0a 2020 2020 656c  plit()[2].    el
-0003c820: 6966 2027 4461 7277 696e 2720 3d3d 205f  if 'Darwin' == _
-0003c830: 706c 6174 666f 726d 3a0a 2020 2020 2020  platform:.      
-0003c840: 2020 6f75 745b 276e 616d 6527 5d3d 276f    out['name']='o
-0003c850: 7378 2720 6966 206d 6f64 6520 3d3d 2027  sx' if mode == '
-0003c860: 6c27 2065 6c73 6520 274f 5358 270a 2020  l' else 'OSX'.  
-0003c870: 2020 2020 2020 6f75 745b 2776 6572 7369        out['versi
-0003c880: 6f6e 275d 3d70 6c61 7466 6f72 6d2e 6d61  on']=platform.ma
-0003c890: 635f 7665 7228 290a 2020 2020 656c 6966  c_ver().    elif
-0003c8a0: 2027 5769 6e64 6f77 7327 203d 3d20 5f70   'Windows' == _p
-0003c8b0: 6c61 7466 6f72 6d3a 0a20 2020 2020 2020  latform:.       
-0003c8c0: 206f 7574 5b27 6e61 6d65 275d 3d5f 706c   out['name']=_pl
-0003c8d0: 6174 666f 726d 2e6c 6f77 6572 2829 2069  atform.lower() i
-0003c8e0: 6620 6d6f 6465 203d 3d20 276c 2720 656c  f mode == 'l' el
-0003c8f0: 7365 205f 706c 6174 666f 726d 2e75 7070  se _platform.upp
-0003c900: 6572 2829 0a20 2020 2020 2020 206f 7574  er().        out
-0003c910: 5b27 7665 7273 696f 6e27 5d3d 706c 6174  ['version']=plat
-0003c920: 666f 726d 2e77 696e 3332 5f76 6572 2829  form.win32_ver()
-0003c930: 2829 0a20 2020 2065 6c73 653a 0a20 2020  ().    else:.   
-0003c940: 2020 2020 206f 7574 5b27 6e61 6d65 275d       out['name']
-0003c950: 3d5f 706c 6174 666f 726d 2e6c 6f77 6572  =_platform.lower
-0003c960: 2829 2069 6620 6d6f 6465 203d 3d20 276c  () if mode == 'l
-0003c970: 2720 656c 7365 205f 706c 6174 666f 726d  ' else _platform
-0003c980: 2e75 7070 6572 2829 0a20 2020 2072 6574  .upper().    ret
-0003c990: 7572 6e20 6f75 740a 0a64 6566 2053 7472  urn out..def Str
-0003c9a0: 6970 2873 7263 2c6d 6f64 653d 2761 6c6c  ip(src,mode='all
-0003c9b0: 272c 7379 6d3d 2777 6869 7465 7370 6163  ',sym='whitespac
-0003c9c0: 6527 293a 0a20 2020 2069 6620 6973 696e  e'):.    if isin
-0003c9d0: 7374 616e 6365 2873 7263 2c73 7472 293a  stance(src,str):
-0003c9e0: 0a20 2020 2020 2020 2069 6620 6d6f 6465  .        if mode
-0003c9f0: 2069 6e20 5b27 7374 6172 7427 2c27 6c65   in ['start','le
-0003ca00: 6674 272c 2762 6567 696e 275d 3a0a 2020  ft','begin']:.  
-0003ca10: 2020 2020 2020 2020 2020 6966 2073 796d            if sym
-0003ca20: 3d3d 2777 6869 7465 7370 6163 6527 3a0a  =='whitespace':.
-0003ca30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ca40: 7265 7475 726e 2073 7263 2e6c 7374 7269  return src.lstri
-0003ca50: 7028 290a 2020 2020 2020 2020 2020 2020  p().            
-0003ca60: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003ca70: 2020 2020 2020 7265 7475 726e 2073 7263        return src
-0003ca80: 2e6c 7374 7269 7028 7379 6d29 0a20 2020  .lstrip(sym).   
-0003ca90: 2020 2020 2065 6c69 6620 6d6f 6465 2069       elif mode i
-0003caa0: 6e20 5b27 656e 6427 2c27 7269 6768 7427  n ['end','right'
-0003cab0: 2c27 6c61 7374 275d 3a0a 2020 2020 2020  ,'last']:.      
-0003cac0: 2020 2020 2020 6966 2073 796d 3d3d 2777        if sym=='w
-0003cad0: 6869 7465 7370 6163 6527 3a0a 2020 2020  hitespace':.    
-0003cae0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0003caf0: 726e 2073 7263 2e72 7374 7269 7028 290a  rn src.rstrip().
-0003cb00: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0003cb10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003cb20: 2020 7265 7475 726e 2073 7263 2e72 7374    return src.rst
-0003cb30: 7269 7028 7379 6d29 0a20 2020 2020 2020  rip(sym).       
-0003cb40: 2065 6c69 6620 6d6f 6465 2069 6e20 5b27   elif mode in ['
-0003cb50: 626f 7468 272c 2765 6467 6527 2c27 6f75  both','edge','ou
-0003cb60: 7473 6964 6527 5d3a 0a20 2020 2020 2020  tside']:.       
-0003cb70: 2020 2020 2069 6620 7379 6d3d 3d27 7768       if sym=='wh
-0003cb80: 6974 6573 7061 6365 273a 0a20 2020 2020  itespace':.     
-0003cb90: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003cba0: 6e20 7372 632e 7374 7269 7028 290a 2020  n src.strip().  
-0003cbb0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0003cbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cbd0: 7265 7475 726e 2073 7263 2e73 7472 6970  return src.strip
-0003cbe0: 2873 796d 290a 2020 2020 2020 2020 656c  (sym).        el
-0003cbf0: 6966 206d 6f64 6520 696e 205b 2769 6e73  if mode in ['ins
-0003cc00: 6964 6527 5d3a 0a20 2020 2020 2020 2020  ide']:.         
-0003cc10: 2020 2066 6f72 2073 2069 6e20 7261 6e67     for s in rang
-0003cc20: 6528 302c 6c65 6e28 7372 6329 293a 0a20  e(0,len(src)):. 
-0003cc30: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0003cc40: 6620 7379 6d3d 3d27 7768 6974 6573 7061  f sym=='whitespa
-0003cc50: 6365 273a 0a20 2020 2020 2020 2020 2020  ce':.           
-0003cc60: 2020 2020 2020 2020 2069 6620 7372 635b           if src[
-0003cc70: 735d 2021 3d20 2720 273a 2062 7265 616b  s] != ' ': break
-0003cc80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003cc90: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0003cca0: 2020 2020 2020 2020 2020 2069 6620 7372             if sr
-0003ccb0: 635b 735d 2021 3d20 7379 6d3a 2062 7265  c[s] != sym: bre
-0003ccc0: 616b 0a20 2020 2020 2020 2020 2020 2066  ak.            f
-0003ccd0: 6f72 2065 2069 6e20 7261 6e67 6528 6c65  or e in range(le
-0003cce0: 6e28 7372 6329 2d31 2c30 2c2d 3129 3a0a  n(src)-1,0,-1):.
-0003ccf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cd00: 6966 2073 796d 3d3d 2777 6869 7465 7370  if sym=='whitesp
-0003cd10: 6163 6527 3a0a 2020 2020 2020 2020 2020  ace':.          
-0003cd20: 2020 2020 2020 2020 2020 6966 2073 7263            if src
-0003cd30: 5b65 5d20 213d 2027 2027 3a20 6272 6561  [e] != ' ': brea
-0003cd40: 6b0a 2020 2020 2020 2020 2020 2020 2020  k.              
+00038bd0: 2020 7072 696e 7428 276d 6f64 6520 2020    print('mode   
+00038be0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00038bf0: 7b7d 2028 6265 666f 7265 206e 6f20 6e65  {} (before no ne
+00038c00: 776c 696e 653a 7b7d 2927 2e66 6f72 6d61  wline:{})'.forma
+00038c10: 7428 6969 2c54 7275 6520 6966 2070 7269  t(ii,True if pri
+00038c20: 6e74 665f 6e65 776c 696e 655f 696e 666f  ntf_newline_info
+00038c30: 2e47 6574 2842 7974 6573 2869 6929 2920  .Get(Bytes(ii)) 
+00038c40: 656c 7365 2046 616c 7365 2929 0a20 2020  else False)).   
+00038c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038c60: 2020 2020 2070 7269 6e74 2827 7570 6461       print('upda
+00038c70: 7465 6420 7374 6172 7420 6e65 776c 696e  ted start newlin
+00038c80: 6520 3a7b 7d27 2e66 6f72 6d61 7428 5472  e :{}'.format(Tr
+00038c90: 7565 2069 6620 7374 6172 745f 6e65 776c  ue if start_newl
+00038ca0: 696e 6520 656c 7365 2046 616c 7365 2929  ine else False))
+00038cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00038cc0: 2020 2020 2020 2020 2070 7269 6e74 2827           print('
+00038cd0: 7072 696e 7420 2020 2020 2020 2020 2020  print           
+00038ce0: 2020 2020 2020 3a5b 7b7d 5d27 2e66 6f72        :[{}]'.for
+00038cf0: 6d61 7428 7374 6172 745f 6e65 776c 696e  mat(start_newlin
+00038d00: 652b 6d73 675f 7374 722b 6e65 775f 6c69  e+msg_str+new_li
+00038d10: 6e65 2929 0a20 2020 2020 2020 2020 2020  ne)).           
+00038d20: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00038d30: 6e74 2827 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  nt('------------
+00038d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038d50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d27 290a  -------------').
+00038d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038d70: 2020 2020 6c6f 675f 703d 5472 7565 2020      log_p=True  
+00038d80: 2320 7772 6974 696e 6720 746f 206c 6f67  # writing to log
+00038d90: 5f66 696c 650a 2020 2020 2020 2020 2020  _file.          
+00038da0: 2020 2020 2020 2020 2020 7769 7468 206f            with o
+00038db0: 7065 6e28 6969 2c27 612b 2729 2061 7320  pen(ii,'a+') as 
+00038dc0: 663a 0a20 2020 2020 2020 2020 2020 2020  f:.             
+00038dd0: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+00038de0: 7465 2873 7461 7274 5f6e 6577 6c69 6e65  te(start_newline
+00038df0: 2b6d 7367 5f73 7472 2b6e 6577 5f6c 696e  +msg_str+new_lin
+00038e00: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00038e10: 2020 2020 2020 2069 6620 6e65 775f 6c69         if new_li
+00038e20: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00038e30: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00038e40: 7466 5f6e 6577 6c69 6e65 5f69 6e66 6f2e  tf_newline_info.
+00038e50: 4465 6c28 4279 7465 7328 6969 2929 0a20  Del(Bytes(ii)). 
+00038e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038e70: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00038e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038e90: 2070 7269 6e74 665f 6e65 776c 696e 655f   printf_newline_
+00038ea0: 696e 666f 2e50 7574 2842 7974 6573 2869  info.Put(Bytes(i
+00038eb0: 6929 2c54 7275 6529 0a20 2020 2069 6620  i),True).    if 
+00038ec0: 6967 6e6f 7265 5f65 6d70 7479 2069 7320  ignore_empty is 
+00038ed0: 5472 7565 2061 6e64 206e 6f74 206d 7367  True and not msg
+00038ee0: 5f73 7472 3a20 7265 7475 726e 2023 2049  _str: return # I
+00038ef0: 676e 6f72 6520 656d 7074 7920 6461 7461  gnore empty data
+00038f00: 206f 6e20 7363 7265 656e 0a20 2020 2023   on screen.    #
+00038f10: 2070 7269 6e74 206d 7367 2074 6f20 7363   print msg to sc
+00038f20: 7265 656e 2077 6865 6e20 6469 6420 6e6f  reen when did no
+00038f30: 7420 646f 6e65 2077 6974 6820 6c6f 6766  t done with logf
+00038f40: 696c 6520 6f72 206c 6f67 2066 756e 6374  ile or log funct
+00038f50: 696f 6e0a 2020 2020 6966 2027 6527 2069  ion.    if 'e' i
+00038f60: 6e20 6473 703a 0a20 2020 2020 2020 2023  n dsp:.        #
+00038f70: 2069 6620 656e 6420 6f66 206c 696e 6520   if end of line 
+00038f80: 6861 7665 206e 6f20 6e65 776c 696e 652c  have no newline,
+00038f90: 2062 7574 2069 7420 6861 7320 696e 7472   but it has intr
+00038fa0: 6f20 7468 656e 2061 6464 696e 6720 7374  o then adding st
+00038fb0: 6172 745f 6e65 776c 696e 650a 2020 2020  art_newline.    
+00038fc0: 2020 2020 6966 2069 6e74 726f 5f6d 7367      if intro_msg
+00038fd0: 2061 6e64 206e 6f74 206e 6f5f 7374 6172   and not no_star
+00038fe0: 745f 6e65 776c 696e 653a 0a20 2020 2020  t_newline:.     
+00038ff0: 2020 2020 2020 2069 6620 7072 696e 7466         if printf
+00039000: 5f6e 6577 6c69 6e65 5f69 6e66 6f2e 4765  _newline_info.Ge
+00039010: 7428 2765 2729 3a20 0a20 2020 2020 2020  t('e'): .       
+00039020: 2020 2020 2020 2020 2073 7461 7274 5f6e           start_n
+00039030: 6577 6c69 6e65 3d27 5c6e 270a 2020 2020  ewline='\n'.    
+00039040: 2020 2020 6966 2073 6372 5f64 6267 5f70      if scr_dbg_p
+00039050: 7269 6e74 3a0a 2020 2020 2020 2020 2020  rint:.          
+00039060: 2020 7072 696e 7428 276d 6f64 6520 2020    print('mode   
+00039070: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00039080: 7b7d 2028 6265 666f 7265 206e 6f20 6e65  {} (before no ne
+00039090: 776c 696e 653a 7b7d 2927 2e66 6f72 6d61  wline:{})'.forma
+000390a0: 7428 2765 272c 5472 7565 2069 6620 7072  t('e',True if pr
+000390b0: 696e 7466 5f6e 6577 6c69 6e65 5f69 6e66  intf_newline_inf
+000390c0: 6f2e 4765 7428 2765 2729 2065 6c73 6520  o.Get('e') else 
+000390d0: 4661 6c73 6529 290a 2020 2020 2020 2020  False)).        
+000390e0: 2020 2020 7072 696e 7428 2775 7064 6174      print('updat
+000390f0: 6564 2073 7461 7274 206e 6577 6c69 6e65  ed start newline
+00039100: 203a 7b7d 272e 666f 726d 6174 2854 7275   :{}'.format(Tru
+00039110: 6520 6966 2073 7461 7274 5f6e 6577 6c69  e if start_newli
+00039120: 6e65 2065 6c73 6520 4661 6c73 6529 290a  ne else False)).
+00039130: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00039140: 7428 2770 7269 6e74 2020 2020 2020 2020  t('print        
+00039150: 2020 2020 2020 2020 203a 5b7b 7d5d 272e           :[{}]'.
+00039160: 666f 726d 6174 2873 7461 7274 5f6e 6577  format(start_new
+00039170: 6c69 6e65 2b6d 7367 5f73 7472 2b6e 6577  line+msg_str+new
+00039180: 5f6c 696e 6529 290a 2020 2020 2020 2020  _line)).        
+00039190: 2020 2020 7072 696e 7428 272d 2d2d 2d2d      print('-----
+000391a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000391b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000391c0: 2d2d 2d2d 2729 0a20 2020 2020 2020 2053  ----').        S
+000391d0: 7464 4572 7228 7374 6172 745f 6e65 776c  tdErr(start_newl
+000391e0: 696e 652b 6d73 675f 7374 722b 6e65 775f  ine+msg_str+new_
+000391f0: 6c69 6e65 290a 2020 2020 2020 2020 7072  line).        pr
+00039200: 696e 7466 5f6e 6577 6c69 6e65 5f69 6e66  intf_newline_inf
+00039210: 6f2e 5075 7428 2765 272c 4661 6c73 6520  o.Put('e',False 
+00039220: 6966 206e 6577 5f6c 696e 6520 656c 7365  if new_line else
+00039230: 2054 7275 6529 0a20 2020 2065 6c69 6620   True).    elif 
+00039240: 2763 2720 696e 2064 7370 3a20 2344 6973  'c' in dsp: #Dis
+00039250: 706c 6179 2074 6f20 636f 6e73 6f6c 6520  play to console 
+00039260: 2869 7420 616c 736f 2077 6f72 6b20 7769  (it also work wi
+00039270: 7468 2052 6f62 6f74 2046 7261 6d65 776f  th Robot Framewo
+00039280: 726b 290a 2020 2020 2020 2020 7072 696e  rk).        prin
+00039290: 7428 7374 6172 745f 6e65 776c 696e 652b  t(start_newline+
+000392a0: 6d73 675f 7374 722b 6e65 775f 6c69 6e65  msg_str+new_line
+000392b0: 2c65 6e64 3d27 272c 6669 6c65 3d73 7973  ,end='',file=sys
+000392c0: 2e5f 5f73 7464 6f75 745f 5f29 0a20 2020  .__stdout__).   
+000392d0: 2065 6c69 6620 2773 2720 696e 2064 7370   elif 's' in dsp
+000392e0: 206f 7220 2761 2720 696e 2064 7370 3a20   or 'a' in dsp: 
+000392f0: 2320 5072 696e 7420 6f75 7420 6f6e 2073  # Print out on s
+00039300: 6372 6565 6e0a 2020 2020 2020 2020 6966  creen.        if
+00039310: 2069 6e74 726f 5f6d 7367 2061 6e64 206e   intro_msg and n
+00039320: 6f74 206e 6f5f 7374 6172 745f 6e65 776c  ot no_start_newl
+00039330: 696e 653a 0a20 2020 2020 2020 2020 2020  ine:.           
+00039340: 2069 6620 7072 696e 7466 5f6e 6577 6c69   if printf_newli
+00039350: 6e65 5f69 6e66 6f2e 4765 7428 2761 2720  ne_info.Get('a' 
+00039360: 6966 2027 6127 2069 6e20 6473 7020 656c  if 'a' in dsp el
+00039370: 7365 2027 7327 293a 200a 2020 2020 2020  se 's'): .      
+00039380: 2020 2020 2020 2020 2020 7374 6172 745f            start_
+00039390: 6e65 776c 696e 653d 275c 6e27 0a20 2020  newline='\n'.   
+000393a0: 2020 2020 2069 6620 7363 725f 6462 675f       if scr_dbg_
+000393b0: 7072 696e 743a 0a20 2020 2020 2020 2020  print:.         
+000393c0: 2020 2070 7269 6e74 2827 6d6f 6465 2020     print('mode  
+000393d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000393e0: 3a7b 7d20 2862 6566 6f72 6520 6e6f 206e  :{} (before no n
+000393f0: 6577 6c69 6e65 3a7b 7d29 272e 666f 726d  ewline:{})'.form
+00039400: 6174 2827 6127 2c54 7275 6520 6966 2070  at('a',True if p
+00039410: 7269 6e74 665f 6e65 776c 696e 655f 696e  rintf_newline_in
+00039420: 666f 2e47 6574 2827 6127 2069 6620 2761  fo.Get('a' if 'a
+00039430: 2720 696e 2064 7370 2065 6c73 6520 2773  ' in dsp else 's
+00039440: 2729 2065 6c73 6520 4661 6c73 6529 290a  ') else False)).
+00039450: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00039460: 7428 2775 7064 6174 6564 2073 7461 7274  t('updated start
+00039470: 206e 6577 6c69 6e65 203a 7b7d 272e 666f   newline :{}'.fo
+00039480: 726d 6174 2854 7275 6520 6966 2073 7461  rmat(True if sta
+00039490: 7274 5f6e 6577 6c69 6e65 2065 6c73 6520  rt_newline else 
+000394a0: 4661 6c73 6529 290a 2020 2020 2020 2020  False)).        
+000394b0: 2020 2020 7072 696e 7428 2770 7269 6e74      print('print
+000394c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000394d0: 203a 5b7b 7d5d 272e 666f 726d 6174 2873   :[{}]'.format(s
+000394e0: 7461 7274 5f6e 6577 6c69 6e65 2b6d 7367  tart_newline+msg
+000394f0: 5f73 7472 2b6e 6577 5f6c 696e 6529 290a  _str+new_line)).
+00039500: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00039510: 7428 272d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  t('-------------
+00039520: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00039530: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2729 0a20  ------------'). 
+00039540: 2020 2020 2020 2023 2069 6620 656e 6420         # if end 
+00039550: 6f66 206c 696e 6520 6861 7665 206e 6f20  of line have no 
+00039560: 6e65 776c 696e 652c 2062 7574 2069 7420  newline, but it 
+00039570: 6861 7320 696e 7472 6f20 7468 656e 2061  has intro then a
+00039580: 6464 696e 6720 7374 6172 745f 6e65 776c  dding start_newl
+00039590: 696e 650a 2020 2020 2020 2020 5374 644f  ine.        StdO
+000395a0: 7574 2873 7461 7274 5f6e 6577 6c69 6e65  ut(start_newline
+000395b0: 2b6d 7367 5f73 7472 2b6e 6577 5f6c 696e  +msg_str+new_lin
+000395c0: 6529 0a20 2020 2020 2020 2070 7269 6e74  e).        print
+000395d0: 665f 6e65 776c 696e 655f 696e 666f 2e50  f_newline_info.P
+000395e0: 7574 2827 6127 2069 6620 2761 2720 696e  ut('a' if 'a' in
+000395f0: 2064 7370 2065 6c73 6520 2773 272c 4661   dsp else 's',Fa
+00039600: 6c73 6520 6966 206e 6577 5f6c 696e 6520  lse if new_line 
+00039610: 656c 7365 2054 7275 6529 0a20 2020 2023  else True).    #
+00039620: 2072 6574 7572 6e20 6d73 6720 7768 656e   return msg when
+00039630: 2072 6571 7569 7265 6420 7265 7475 726e   required return
+00039640: 2077 6861 7465 7665 7220 636f 6e64 6974   whatever condit
+00039650: 696f 6e0a 2020 2020 6966 2027 7227 2069  ion.    if 'r' i
+00039660: 6e20 6473 703a 0a20 2020 2020 2020 2072  n dsp:.        r
+00039670: 6574 7572 6e20 6d73 675f 7374 720a 0a64  eturn msg_str..d
+00039680: 6566 2043 6f6c 6f72 5374 7228 6d73 672c  ef ColorStr(msg,
+00039690: 2a2a 6f70 7473 293a 0a20 2020 2063 6f6c  **opts):.    col
+000396a0: 6f72 3d6f 7074 732e 6765 7428 2763 6f6c  or=opts.get('col
+000396b0: 6f72 272c 4e6f 6e65 290a 2020 2020 636f  or',None).    co
+000396c0: 6c6f 725f 6462 3d6f 7074 732e 6765 7428  lor_db=opts.get(
+000396d0: 2763 6f6c 6f72 5f64 6227 2c7b 2762 6c75  'color_db',{'blu
+000396e0: 6527 3a20 3334 2c20 2767 7265 7927 3a20  e': 34, 'grey': 
+000396f0: 3330 2c20 2779 656c 6c6f 7727 3a20 3333  30, 'yellow': 33
+00039700: 2c20 2767 7265 656e 273a 2033 322c 2027  , 'green': 32, '
+00039710: 6379 616e 273a 2033 362c 2027 6d61 6765  cyan': 36, 'mage
+00039720: 6e74 6127 3a20 3335 2c20 2777 6869 7465  nta': 35, 'white
+00039730: 273a 2033 372c 2027 7265 6427 3a20 3331  ': 37, 'red': 31
+00039740: 7d29 0a20 2020 2062 675f 636f 6c6f 723d  }).    bg_color=
+00039750: 6f70 7473 2e67 6574 2827 6267 5f63 6f6c  opts.get('bg_col
+00039760: 6f72 272c 4e6f 6e65 290a 2020 2020 6267  or',None).    bg
+00039770: 5f63 6f6c 6f72 5f64 623d 6f70 7473 2e67  _color_db=opts.g
+00039780: 6574 2827 6267 5f63 6f6c 6f72 5f64 6227  et('bg_color_db'
+00039790: 2c7b 2763 7961 6e27 3a20 3436 2c20 2777  ,{'cyan': 46, 'w
+000397a0: 6869 7465 273a 2034 372c 2027 6772 6579  hite': 47, 'grey
+000397b0: 273a 2034 302c 2027 7965 6c6c 6f77 273a  ': 40, 'yellow':
+000397c0: 2034 332c 2027 626c 7565 273a 2034 342c   43, 'blue': 44,
+000397d0: 2027 6d61 6765 6e74 6127 3a20 3435 2c20   'magenta': 45, 
+000397e0: 2772 6564 273a 2034 312c 2027 6772 6565  'red': 41, 'gree
+000397f0: 6e27 3a20 3432 7d29 0a20 2020 2061 7474  n': 42}).    att
+00039800: 723d 6f70 7473 2e67 6574 2827 6174 7472  r=opts.get('attr
+00039810: 272c 4e6f 6e65 290a 2020 2020 6174 7472  ',None).    attr
+00039820: 5f64 623d 6f70 7473 2e67 6574 2827 6174  _db=opts.get('at
+00039830: 7472 5f64 6227 2c7b 2772 6576 6572 7365  tr_db',{'reverse
+00039840: 273a 2037 2c20 2762 6c69 6e6b 273a 2035  ': 7, 'blink': 5
+00039850: 2c27 636f 6e63 6561 6c65 6427 3a20 382c  ,'concealed': 8,
+00039860: 2027 756e 6465 726c 696e 6527 3a20 342c   'underline': 4,
+00039870: 2027 626f 6c64 273a 2031 7d29 0a20 2020   'bold': 1}).   
+00039880: 2069 6620 4973 4e6f 6e65 286f 732e 6765   if IsNone(os.ge
+00039890: 7465 6e76 2827 414e 5349 5f43 4f4c 4f52  tenv('ANSI_COLOR
+000398a0: 535f 4449 5341 424c 4544 2729 2920 616e  S_DISABLED')) an
+000398b0: 6420 2863 6f6c 6f72 206f 7220 6267 5f63  d (color or bg_c
+000398c0: 6f6c 6f72 206f 7220 6174 7472 293a 0a20  olor or attr):. 
+000398d0: 2020 2020 2020 2072 6573 6574 3d27 2727         reset='''
+000398e0: 5c30 3333 5b30 6d27 2727 0a20 2020 2020  \033[0m'''.     
+000398f0: 2020 2066 6d74 5f6d 7367 3d27 2727 5c30     fmt_msg='''\0
+00039900: 3333 5b25 646d 2573 2727 270a 2020 2020  33[%dm%s'''.    
+00039910: 2020 2020 6966 2063 6f6c 6f72 2061 6e64      if color and
+00039920: 2063 6f6c 6f72 2069 6e20 636f 6c6f 725f   color in color_
+00039930: 6462 3a0a 2020 2020 2020 2020 2020 2020  db:.            
+00039940: 6d73 673d 666d 745f 6d73 6720 2520 2863  msg=fmt_msg % (c
+00039950: 6f6c 6f72 5f64 625b 636f 6c6f 725d 2c6d  olor_db[color],m
+00039960: 7367 290a 2020 2020 2020 2020 6966 2062  sg).        if b
+00039970: 675f 636f 6c6f 7220 616e 6420 6267 5f63  g_color and bg_c
+00039980: 6f6c 6f72 2069 6e20 6267 5f63 6f6c 6f72  olor in bg_color
+00039990: 5f64 623a 0a20 2020 2020 2020 2020 2020  _db:.           
+000399a0: 206d 7367 3d66 6d74 5f6d 7367 2025 2028   msg=fmt_msg % (
+000399b0: 636f 6c6f 725f 6462 5b62 675f 636f 6c6f  color_db[bg_colo
+000399c0: 725d 2c6d 7367 290a 2020 2020 2020 2020  r],msg).        
+000399d0: 6966 2061 7474 7220 616e 6420 6174 7472  if attr and attr
+000399e0: 2069 6e20 6174 7472 5f64 623a 0a20 2020   in attr_db:.   
+000399f0: 2020 2020 2020 2020 206d 7367 3d66 6d74           msg=fmt
+00039a00: 5f6d 7367 2025 2028 6174 7472 5f64 625b  _msg % (attr_db[
+00039a10: 6174 7472 5d2c 6d73 6729 0a20 2020 2020  attr],msg).     
+00039a20: 2020 2072 6574 7572 6e20 6d73 672b 7265     return msg+re
+00039a30: 7365 7420 2353 7570 706f 7274 2043 6f6c  set #Support Col
+00039a40: 6f72 0a20 2020 2072 6574 7572 6e20 6d73  or.    return ms
+00039a50: 6720 234e 6f74 2073 7570 706f 7274 2063  g #Not support c
+00039a60: 6f6c 6f72 0a0a 6465 6620 436c 6561 6e41  olor..def CleanA
+00039a70: 6e73 6928 6461 7461 293a 0a20 2020 2061  nsi(data):.    a
+00039a80: 6e73 695f 6573 6361 7065 203d 2072 652e  nsi_escape = re.
+00039a90: 636f 6d70 696c 6528 7227 5c78 3142 5c5b  compile(r'\x1B\[
+00039aa0: 5b30 2d3f 5d2a 5b20 2d2f 5d2a 5b40 2d7e  [0-?]*[ -/]*[@-~
+00039ab0: 5d27 290a 2020 2020 6966 2054 7970 6528  ]').    if Type(
+00039ac0: 6461 7461 2c28 2773 7472 272c 2762 7974  data,('str','byt
+00039ad0: 6573 2729 293a 0a20 2020 2020 2020 2072  es')):.        r
+00039ae0: 6574 7572 6e20 616e 7369 5f65 7363 6170  eturn ansi_escap
+00039af0: 652e 7375 6228 2727 2c53 7472 2864 6174  e.sub('',Str(dat
+00039b00: 6129 290a 2020 2020 656c 6966 2069 7369  a)).    elif isi
+00039b10: 6e73 7461 6e63 6528 6461 7461 2c28 6c69  nstance(data,(li
+00039b20: 7374 2c74 7570 6c65 2929 3a0a 2020 2020  st,tuple)):.    
+00039b30: 2020 2020 7265 7475 726e 205b 436c 6561      return [Clea
+00039b40: 6e41 6e73 6928 6969 2920 666f 7220 6969  nAnsi(ii) for ii
+00039b50: 2069 6e20 6461 7461 5d0a 2020 2020 656c   in data].    el
+00039b60: 6966 2069 7369 6e73 7461 6e63 6528 6461  if isinstance(da
+00039b70: 7461 2c64 6963 7429 3a0a 2020 2020 2020  ta,dict):.      
+00039b80: 2020 666f 7220 6920 696e 2064 6174 613a    for i in data:
+00039b90: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+00039ba0: 615b 695d 3d43 6c65 616e 416e 7369 2864  a[i]=CleanAnsi(d
+00039bb0: 6174 615b 695d 290a 2020 2020 7265 7475  ata[i]).    retu
+00039bc0: 726e 2064 6174 610a 0a64 6566 2063 6c69  rn data..def cli
+00039bd0: 5f69 6e70 7574 286d 7367 2c2a 2a6f 7074  _input(msg,**opt
+00039be0: 7329 3a0a 2020 2020 2727 270a 2020 2020  s):.    '''.    
+00039bf0: 434c 4920 496e 7075 7420 636f 6d6d 616e  CLI Input comman
+00039c00: 640a 2020 2020 6869 6464 656e 206f 7220  d.    hidden or 
+00039c10: 7061 7373 7764 203d 2054 7275 6520 3a20  passwd = True : 
+00039c20: 696e 7075 7420 6173 2070 6173 7377 6f72  input as passwor
+00039c30: 642c 2046 616c 7365 3a20 2864 6566 6175  d, False: (defau
+00039c40: 6c74 2920 6e6f 726d 616c 2074 6578 7420  lt) normal text 
+00039c50: 696e 7075 740a 2020 2020 2727 270a 2020  input.    '''.  
+00039c60: 2020 6869 6464 656e 3d6f 7074 732e 6765    hidden=opts.ge
+00039c70: 7428 2768 6964 6465 6e27 2c6f 7074 732e  t('hidden',opts.
+00039c80: 6765 7428 2770 6173 7377 6427 2c6f 7074  get('passwd',opt
+00039c90: 732e 6765 7428 2770 6173 7377 6f72 6427  s.get('password'
+00039ca0: 2c46 616c 7365 2929 290a 2020 2020 6966  ,False))).    if
+00039cb0: 2068 6964 6465 6e3a 0a20 2020 2020 2020   hidden:.       
+00039cc0: 2069 6620 7379 732e 7374 6469 6e2e 6973   if sys.stdin.is
+00039cd0: 6174 7479 2829 3a0a 2020 2020 2020 2020  atty():.        
+00039ce0: 2020 2020 7020 3d20 6765 7470 6173 732e      p = getpass.
+00039cf0: 6765 7470 6173 7328 6d73 6729 0a20 2020  getpass(msg).   
+00039d00: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00039d10: 2020 2020 2020 2070 7269 6e74 6628 6d73         printf(ms
+00039d20: 672c 656e 645f 6c69 6e65 3d27 2729 0a20  g,end_line=''). 
+00039d30: 2020 2020 2020 2020 2020 2070 203d 2073             p = s
+00039d40: 7973 2e73 7464 696e 2e72 6561 646c 696e  ys.stdin.readlin
+00039d50: 6528 292e 7273 7472 6970 2829 0a20 2020  e().rstrip().   
+00039d60: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
+00039d70: 6620 5079 5665 7228 3229 3a0a 2020 2020  f PyVer(2):.    
+00039d80: 2020 2020 2020 2020 703d 7261 775f 696e          p=raw_in
+00039d90: 7075 7428 6d73 6729 0a20 2020 2020 2020  put(msg).       
+00039da0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00039db0: 2020 2070 3d69 6e70 7574 286d 7367 290a     p=input(msg).
+00039dc0: 2020 2020 7265 7475 726e 2070 0a0a 6465      return p..de
+00039dd0: 6620 5479 7065 4461 7461 2873 7263 2c77  f TypeData(src,w
+00039de0: 616e 745f 7479 7065 3d4e 6f6e 652c 6465  ant_type=None,de
+00039df0: 6661 756c 743d 276f 7267 272c 7370 6c69  fault='org',spli
+00039e00: 7465 723d 4e6f 6e65 293a 0a20 2020 2027  ter=None):.    '
+00039e10: 2727 436f 6e76 6572 7420 2869 6e70 7574  ''Convert (input
+00039e20: 2964 6174 6120 746f 2077 616e 7420 7479  )data to want ty
+00039e30: 7065 2028 6578 3a20 7374 7220 2d3e 206c  pe (ex: str -> l
+00039e40: 6973 742c 2069 6e74 2c20 2e2e 2e29 2c20  ist, int, ...), 
+00039e50: 6361 6e20 6e6f 7420 636f 6e76 6572 7420  can not convert 
+00039e60: 746f 2074 7970 6520 7468 656e 2072 6574  to type then ret
+00039e70: 7572 6e20 4661 6c73 6527 2727 0a20 2020  urn False'''.   
+00039e80: 2069 6620 5479 7065 2877 616e 745f 7479   if Type(want_ty
+00039e90: 7065 2c27 7374 7227 293a 0a20 2020 2020  pe,'str'):.     
+00039ea0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00039eb0: 2873 7263 2c28 6c69 7374 2c74 7570 6c65  (src,(list,tuple
+00039ec0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00039ed0: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+00039ee0: 6528 7370 6c69 7465 722c 7374 7229 3a20  e(spliter,str): 
+00039ef0: 7370 6c69 7465 723d 2720 270a 2020 2020  spliter=' '.    
+00039f00: 2020 2020 2020 2020 7265 7475 726e 204a          return J
+00039f10: 6f69 6e28 5374 7228 7372 6329 2c53 7472  oin(Str(src),Str
+00039f20: 2873 706c 6974 6572 2929 0a20 2020 2020  (spliter)).     
+00039f30: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00039f40: 2020 2020 2072 6574 7572 6e20 5374 7228       return Str(
+00039f50: 7372 632c 6d6f 6465 3d27 666f 7263 6527  src,mode='force'
+00039f60: 290a 2020 2020 656c 6966 2054 7970 6528  ).    elif Type(
+00039f70: 7761 6e74 5f74 7970 652c 2762 7974 6573  want_type,'bytes
+00039f80: 2729 3a0a 2020 2020 2020 2020 6966 2069  '):.        if i
+00039f90: 7369 6e73 7461 6e63 6528 7372 632c 286c  sinstance(src,(l
+00039fa0: 6973 742c 7475 706c 6529 293a 0a20 2020  ist,tuple)):.   
+00039fb0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00039fc0: 6973 696e 7374 616e 6365 2873 706c 6974  isinstance(split
+00039fd0: 6572 2c73 7472 293a 2073 706c 6974 6572  er,str): spliter
+00039fe0: 3d62 2720 270a 2020 2020 2020 2020 2020  =b' '.          
+00039ff0: 2020 7265 7475 726e 204a 6f69 6e28 4279    return Join(By
+0003a000: 7465 7328 7372 6329 2c42 7974 6573 2873  tes(src),Bytes(s
+0003a010: 706c 6974 6572 2929 0a20 2020 2020 2020  pliter)).       
+0003a020: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0003a030: 2020 2072 6574 7572 6e20 4279 7465 7328     return Bytes(
+0003a040: 7372 6329 0a20 2020 2065 6c69 6620 5479  src).    elif Ty
+0003a050: 7065 2877 616e 745f 7479 7065 2c27 696e  pe(want_type,'in
+0003a060: 7427 293a 0a20 2020 2020 2020 2072 6574  t'):.        ret
+0003a070: 7572 6e20 496e 7428 7372 632c 6572 723d  urn Int(src,err=
+0003a080: 5472 7565 290a 2020 2020 656c 6966 2054  True).    elif T
+0003a090: 7970 6528 7761 6e74 5f74 7970 652c 2827  ype(want_type,('
+0003a0a0: 6c69 7374 272c 2774 7570 6c65 2729 2920  list','tuple')) 
+0003a0b0: 616e 6420 6973 696e 7374 616e 6365 2873  and isinstance(s
+0003a0c0: 7263 2c73 7472 2920 616e 6420 6973 696e  rc,str) and isin
+0003a0d0: 7374 616e 6365 2873 706c 6974 6572 2c73  stance(spliter,s
+0003a0e0: 7472 293a 0a20 2020 2020 2020 2069 6620  tr):.        if 
+0003a0f0: 5479 7065 2877 616e 745f 7479 7065 2c27  Type(want_type,'
+0003a100: 7475 706c 6527 293a 0a20 2020 2020 2020  tuple'):.       
+0003a110: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
+0003a120: 6528 5370 6c69 7428 7372 632c 7370 6c69  e(Split(src,spli
+0003a130: 7465 7229 290a 2020 2020 2020 2020 7265  ter)).        re
+0003a140: 7475 726e 2053 706c 6974 2873 7263 2c73  turn Split(src,s
+0003a150: 706c 6974 6572 290a 2020 2020 656c 6966  pliter).    elif
+0003a160: 2054 7970 6528 7761 6e74 5f74 7970 652c   Type(want_type,
+0003a170: 2774 7570 6c65 2729 2061 6e64 2069 7369  'tuple') and isi
+0003a180: 6e73 7461 6e63 6528 7372 632c 286c 6973  nstance(src,(lis
+0003a190: 742c 6469 6374 2929 3a0a 2020 2020 2020  t,dict)):.      
+0003a1a0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0003a1b0: 7372 632c 6469 6374 293a 0a20 2020 2020  src,dict):.     
+0003a1c0: 2020 2020 2020 2069 6620 7370 6c69 7465         if splite
+0003a1d0: 7220 3d3d 2027 6b65 7927 3a0a 2020 2020  r == 'key':.    
+0003a1e0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003a1f0: 726e 2074 7570 6c65 2873 7263 2e6b 6579  rn tuple(src.key
+0003a200: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
+0003a210: 2065 6c69 6620 7370 6c69 7465 7220 3d3d   elif spliter ==
+0003a220: 2027 7661 6c75 6527 3a0a 2020 2020 2020   'value':.      
+0003a230: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0003a240: 2074 7570 6c65 2873 7263 2e76 616c 7565   tuple(src.value
+0003a250: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
+0003a260: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0003a270: 2020 2020 2020 2072 6574 7572 6e20 7475         return tu
+0003a280: 706c 6528 7372 632e 6974 656d 7328 2929  ple(src.items())
+0003a290: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003a2a0: 7475 706c 6528 7372 6329 0a20 2020 2065  tuple(src).    e
+0003a2b0: 6c69 6620 5479 7065 2877 616e 745f 7479  lif Type(want_ty
+0003a2c0: 7065 2c27 6c69 7374 2729 2061 6e64 2069  pe,'list') and i
+0003a2d0: 7369 6e73 7461 6e63 6528 7372 632c 2874  sinstance(src,(t
+0003a2e0: 7570 6c65 2c64 6963 7429 293a 0a20 2020  uple,dict)):.   
+0003a2f0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0003a300: 6365 2873 7263 2c64 6963 7429 3a0a 2020  ce(src,dict):.  
+0003a310: 2020 2020 2020 2020 2020 6966 2073 706c            if spl
+0003a320: 6974 6572 203d 3d20 276b 6579 273a 0a20  iter == 'key':. 
+0003a330: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003a340: 6574 7572 6e20 6c69 7374 2873 7263 2e6b  eturn list(src.k
+0003a350: 6579 7328 2929 0a20 2020 2020 2020 2020  eys()).         
+0003a360: 2020 2065 6c69 6620 7370 6c69 7465 7220     elif spliter 
+0003a370: 3d3d 2027 7661 6c75 6527 3a0a 2020 2020  == 'value':.    
+0003a380: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003a390: 726e 206c 6973 7428 7372 632e 7661 6c75  rn list(src.valu
+0003a3a0: 6573 2829 290a 2020 2020 2020 2020 2020  es()).          
+0003a3b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0003a3c0: 2020 2020 2020 2020 7265 7475 726e 206c          return l
+0003a3d0: 6973 7428 7372 632e 6974 656d 7328 2929  ist(src.items())
+0003a3e0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003a3f0: 6c69 7374 2873 7263 290a 2020 2020 656c  list(src).    el
+0003a400: 6966 2054 7970 6528 7372 632c 7761 6e74  if Type(src,want
+0003a410: 5f74 7970 6529 3a0a 2020 2020 2020 2020  _type):.        
+0003a420: 7265 7475 726e 2073 7263 0a20 2020 2069  return src.    i
+0003a430: 6620 5479 7065 2873 7263 2c28 2773 7472  f Type(src,('str
+0003a440: 272c 2762 7974 6573 2729 293a 0a20 2020  ','bytes')):.   
+0003a450: 2020 2020 2072 6574 7572 6e20 466f 726d       return Form
+0003a460: 4461 7461 2873 7263 2c64 6566 6175 6c74  Data(src,default
+0003a470: 3d27 6f72 6727 290a 2020 2020 7265 7475  ='org').    retu
+0003a480: 726e 2044 6566 6175 6c74 2873 7263 2c64  rn Default(src,d
+0003a490: 6566 6175 6c74 290a 0a64 6566 204d 6f76  efault)..def Mov
+0003a4a0: 6544 6174 6128 7372 632c 6461 7461 3d4e  eData(src,data=N
+0003a4b0: 6f6e 652c 746f 3d4e 6f6e 652c 6672 6f6d  one,to=None,from
+0003a4c0: 5f69 6478 3d4e 6f6e 652c 666f 7263 653d  _idx=None,force=
+0003a4d0: 4661 6c73 652c 6465 6661 756c 743d 276f  False,default='o
+0003a4e0: 7267 2729 3a0a 2020 2020 2727 270a 2020  rg'):.    '''.  
+0003a4f0: 2020 7375 7070 6f72 7420 7372 6320 7479    support src ty
+0003a500: 7065 2069 7320 6c69 7374 2c73 7472 2c28  pe is list,str,(
+0003a510: 7475 706c 6529 0a20 2020 206d 6f76 696e  tuple).    movin
+0003a520: 6720 666f 726d 6174 203a 2064 6174 6128  g format : data(
+0003a530: 6461 7461 2920 6f72 2066 726f 6d5f 6964  data) or from_id
+0003a540: 7828 696e 7429 0a20 2020 2020 202d 2064  x(int).      - d
+0003a550: 6174 6120 3a20 6966 2073 7263 2068 6173  ata : if src has
+0003a560: 206d 616e 7920 7361 6d65 2064 6174 6120   many same data 
+0003a570: 7468 656e 206a 7573 7420 6b65 6570 2073  then just keep s
+0003a580: 696e 676c 6520 6461 7461 2061 7420 6d6f  ingle data at mo
+0003a590: 7665 640a 2020 2020 6d6f 7669 6e67 2064  ved.    moving d
+0003a5a0: 6573 7420 2020 3a20 746f 2869 6e74 290a  est   : to(int).
+0003a5b0: 2020 2020 6d6f 7665 2064 6174 6120 6f72      move data or
+0003a5c0: 2069 6e64 6578 2866 726f 6d5f 6964 7829   index(from_idx)
+0003a5d0: 2074 6f20 7761 6e74 2069 6e64 6578 2874   to want index(t
+0003a5e0: 6f29 0a20 2020 2020 2066 6f72 6365 3d54  o).      force=T
+0003a5f0: 7275 653a 2065 7665 6e20 7475 706c 6520  rue: even tuple 
+0003a600: 746f 206d 6f76 650a 2020 2020 6966 206e  to move.    if n
+0003a610: 6f74 2073 7570 706f 7274 2074 6865 6e20  ot support then 
+0003a620: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+0003a630: 2020 2064 6566 6175 6c74 203a 206f 7267     default : org
+0003a640: 0a20 2020 2027 2727 0a20 2020 205f 7475  .    '''.    _tu
+0003a650: 706c 653d 4661 6c73 650a 2020 2020 7372  ple=False.    sr
+0003a660: 635f 7479 7065 3d54 7970 654e 616d 6528  c_type=TypeName(
+0003a670: 7372 6329 0a20 2020 2069 6620 7372 635f  src).    if src_
+0003a680: 7479 7065 203d 3d20 2774 7570 6c65 273a  type == 'tuple':
+0003a690: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+0003a6a0: 666f 7263 653a 2072 6574 7572 6e20 4465  force: return De
+0003a6b0: 6661 756c 7428 7372 632c 6465 6661 756c  fault(src,defaul
+0003a6c0: 7429 0a20 2020 2020 2020 205f 7475 706c  t).        _tupl
+0003a6d0: 653d 5472 7565 0a20 2020 2020 2020 2073  e=True.        s
+0003a6e0: 7263 5f74 7970 653d 276c 6973 7427 0a20  rc_type='list'. 
+0003a6f0: 2020 2069 6620 7372 635f 7479 7065 2069     if src_type i
+0003a700: 6e20 5b27 6c69 7374 272c 2773 7472 275d  n ['list','str']
+0003a710: 2061 6e64 2073 7263 3a0a 2020 2020 2020   and src:.      
+0003a720: 2020 7372 633d 6c69 7374 2873 7263 290a    src=list(src).
+0003a730: 2020 2020 2020 2020 6966 2074 6f20 3d3d          if to ==
+0003a740: 2027 6c61 7374 273a 2074 6f3d 2d31 0a20   'last': to=-1. 
+0003a750: 2020 2020 2020 2065 6c69 6620 746f 203d         elif to =
+0003a760: 3d20 2766 6972 7374 273a 2074 6f3d 300a  = 'first': to=0.
+0003a770: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0003a780: 7461 6e63 6528 6672 6f6d 5f69 6478 2c69  tance(from_idx,i
+0003a790: 6e74 2920 616e 6420 6973 696e 7374 616e  nt) and isinstan
+0003a7a0: 6365 2874 6f2c 696e 7429 3a0a 2020 2020  ce(to,int):.    
+0003a7b0: 2020 2020 2020 2020 6966 206c 656e 2873          if len(s
+0003a7c0: 7263 2920 3e20 6162 7328 6672 6f6d 5f69  rc) > abs(from_i
+0003a7d0: 6478 293a 0a20 2020 2020 2020 2020 2020  dx):.           
+0003a7e0: 2020 2020 2074 6f3d 4669 7849 6e64 6578       to=FixIndex
+0003a7f0: 2873 7263 2c74 6f29 0a20 2020 2020 2020  (src,to).       
+0003a800: 2020 2020 2020 2020 2069 6620 6672 6f6d           if from
+0003a810: 5f69 6478 213d 746f 3a0a 2020 2020 2020  _idx!=to:.      
+0003a820: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0003a830: 2074 6f20 3d3d 202d 313a 0a20 2020 2020   to == -1:.     
+0003a840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003a850: 2020 2073 7263 2e61 7070 656e 6428 7372     src.append(sr
+0003a860: 635b 6672 6f6d 5f69 6478 5d29 0a20 2020  c[from_idx]).   
+0003a870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003a880: 2065 6c69 6620 746f 203d 3d20 303a 0a20   elif to == 0:. 
+0003a890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003a8a0: 2020 2020 2020 2073 7263 3d5b 7372 635b         src=[src[
+0003a8b0: 6672 6f6d 5f69 6478 5d5d 2b73 7263 0a20  from_idx]]+src. 
+0003a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003a8d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0003a8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003a8f0: 2073 7263 3d73 7263 5b3a 746f 5d2b 5b73   src=src[:to]+[s
+0003a900: 7263 5b66 726f 6d5f 6964 785d 5d2b 7372  rc[from_idx]]+sr
+0003a910: 635b 746f 3a5d 0a20 2020 2020 2020 2020  c[to:].         
+0003a920: 2020 2020 2020 2020 2020 2073 7263 5b74             src[t
+0003a930: 6f5d 3d73 7263 5b66 726f 6d5f 6964 785d  o]=src[from_idx]
+0003a940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003a950: 2020 2020 2064 656c 2073 7263 5b66 726f       del src[fro
+0003a960: 6d5f 6964 785d 0a20 2020 2020 2020 2065  m_idx].        e
+0003a970: 6c69 6620 6e6f 7420 4973 4e6f 6e65 2864  lif not IsNone(d
+0003a980: 6174 6129 2061 6e64 2069 7369 6e73 7461  ata) and isinsta
+0003a990: 6e63 6528 746f 2c69 6e74 293a 0a20 2020  nce(to,int):.   
+0003a9a0: 2020 2020 2020 2020 2074 6f3d 4669 7849           to=FixI
+0003a9b0: 6e64 6578 2873 7263 2c74 6f29 0a20 2020  ndex(src,to).   
+0003a9c0: 2020 2020 2020 2020 2073 7263 3d5b 6920           src=[i 
+0003a9d0: 666f 7220 6920 696e 2073 7263 2069 6620  for i in src if 
+0003a9e0: 6921 3d64 6174 615d 0a20 2020 2020 2020  i!=data].       
+0003a9f0: 2020 2020 2069 6620 746f 203d 3d20 2d31       if to == -1
+0003aa00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003aa10: 2020 7372 632e 6170 7065 6e64 2864 6174    src.append(dat
+0003aa20: 6129 0a20 2020 2020 2020 2020 2020 2065  a).            e
+0003aa30: 6c69 6620 746f 203d 3d20 303a 0a20 2020  lif to == 0:.   
+0003aa40: 2020 2020 2020 2020 2020 2020 2073 7263               src
+0003aa50: 3d5b 6461 7461 5d2b 7372 630a 2020 2020  =[data]+src.    
+0003aa60: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0003aa70: 2020 2020 2020 2020 2020 2020 2020 7372                sr
+0003aa80: 633d 7372 635b 3a74 6f5d 2b5b 6461 7461  c=src[:to]+[data
+0003aa90: 5d2b 7372 635b 746f 3a5d 0a20 2020 2020  ]+src[to:].     
+0003aaa0: 2020 2069 6620 5f74 7570 6c65 3a20 7265     if _tuple: re
+0003aab0: 7475 726e 2074 7570 6c65 2873 7263 290a  turn tuple(src).
+0003aac0: 2020 2020 2020 2020 656c 6966 2073 7263          elif src
+0003aad0: 5f74 7970 6520 3d3d 2027 7374 7227 3a20  _type == 'str': 
+0003aae0: 7265 7475 726e 204a 6f69 6e28 7372 632c  return Join(src,
+0003aaf0: 2727 290a 2020 2020 2020 2020 7265 7475  '').        retu
+0003ab00: 726e 2073 7263 0a20 2020 2072 6574 7572  rn src.    retur
+0003ab10: 6e20 4465 6661 756c 7428 7372 632c 6465  n Default(src,de
+0003ab20: 6661 756c 7429 0a0a 6465 6620 5261 6e64  fault)..def Rand
+0003ab30: 6f6d 286c 656e 6774 683d 382c 6d6f 6465  om(length=8,mode
+0003ab40: 3d4e 6f6e 652c 7374 7273 3d4e 6f6e 652c  =None,strs=None,
+0003ab50: 2a2a 6f70 7473 293a 0a20 2020 2027 2727  **opts):.    '''
+0003ab60: 0a20 2020 206d 616b 6520 7261 6e64 6f6d  .    make random
+0003ab70: 206e 756d 6265 722f 7374 7269 6e67 2f63   number/string/c
+0003ab80: 6861 7261 6374 6572 730a 2020 2020 6c65  haracters.    le
+0003ab90: 6e67 7468 2020 203a 2072 616e 646f 6d20  ngth   : random 
+0003aba0: 7374 7269 6e67 206c 656e 6774 6820 2864  string length (d
+0003abb0: 6566 6175 6c74 3a20 3829 0a20 2020 206d  efault: 8).    m
+0003abc0: 6f64 6520 2864 6566 6175 6c74 3a20 416c  ode (default: Al
+0003abd0: 7068 616e 756d 290a 2020 2020 202d 2061  phanum).     - a
+0003abe0: 6c70 6861 203a 206c 6f77 6572 2061 6c70  lpha : lower alp
+0003abf0: 6861 6265 740a 2020 2020 202d 2041 4c50  habet.     - ALP
+0003ac00: 4841 203a 2075 7070 6572 2061 6c70 6861  HA : upper alpha
+0003ac10: 6265 740a 2020 2020 202d 2041 6c70 6861  bet.     - Alpha
+0003ac20: 203a 206c 6f77 6572 202b 2075 7070 6572   : lower + upper
+0003ac30: 2061 6c70 6861 6265 740a 2020 2020 202d   alphabet.     -
+0003ac40: 206e 756d 2020 203a 206e 756d 6265 720a   num   : number.
+0003ac50: 2020 2020 202d 2063 6861 7220 203a 206c       - char  : l
+0003ac60: 696e 7578 2063 6f6e 736f 6c65 2075 7361  inux console usa
+0003ac70: 626c 6520 7379 6d62 6f6c 2063 6861 7261  ble symbol chara
+0003ac80: 6374 6572 730a 2020 2020 202d 2073 796d  cters.     - sym
+0003ac90: 2020 203a 2061 6c6c 2073 796d 626f 6c20     : all symbol 
+0003aca0: 6368 6172 6163 7465 7273 0a20 2020 2020  characters.     
+0003acb0: 2d20 636f 6d62 696e 2061 626f 7665 206d  - combin above m
+0003acc0: 6f64 6573 2028 6578 3a20 416c 7068 616e  odes (ex: Alphan
+0003acd0: 756d 290a 2020 2020 7374 7273 2020 2020  um).    strs    
+0003ace0: 203a 2069 6620 796f 7520 7761 6e74 206d   : if you want m
+0003acf0: 616b 6520 6120 7261 6e64 6f6d 2073 7472  ake a random str
+0003ad00: 696e 6720 7769 7468 2079 6f75 7220 6f77  ing with your ow
+0003ad10: 6e20 7370 6563 6961 6c20 6368 6172 6163  n special charac
+0003ad20: 7465 7273 0a20 2020 2027 2727 0a20 2020  ters.    '''.   
+0003ad30: 2061 6c70 6861 3d27 6162 6364 6566 6768   alpha='abcdefgh
+0003ad40: 696a 6b6c 6d6e 6f70 7172 7374 7576 7778  ijklmnopqrstuvwx
+0003ad50: 797a 270a 2020 2020 416c 7068 613d 2741  yz'.    Alpha='A
+0003ad60: 4243 4445 4647 4849 4a4b 4c4d 4e4f 5051  BCDEFGHIJKLMNOPQ
+0003ad70: 5253 5455 5657 5859 5a27 0a20 2020 206e  RSTUVWXYZ'.    n
+0003ad80: 756d 3d27 3031 3233 3435 3637 3839 270a  um='0123456789'.
+0003ad90: 2020 2020 7379 6d62 6f6c 3d27 2727 7e21      symbol='''~!
+0003ada0: 4023 2425 5e5f 2b2d 3d7b 7d5b 5d3a 2c2e  @#$%^_+-={}[]:,.
+0003adb0: 2727 270a 2020 2020 5379 6d62 6f6c 3d27  '''.    Symbol='
+0003adc0: 2727 602a 2829 267c 5c5c 273b 222f 693c  ''`*()&|\\';"/i<
+0003add0: 3e3f 2727 270a 2020 2020 7370 6163 653d  >?'''.    space=
+0003ade0: 2720 270a 2020 2020 6966 206e 6f74 2069  ' '.    if not i
+0003adf0: 7369 6e73 7461 6e63 6528 7374 7273 2c73  sinstance(strs,s
+0003ae00: 7472 2920 6f72 206e 6f74 2073 7472 733a  tr) or not strs:
+0003ae10: 0a20 2020 2020 2020 2073 7472 733d 2727  .        strs=''
+0003ae20: 0a20 2020 2020 2020 2069 6620 6d6f 6465  .        if mode
+0003ae30: 2069 6e20 5b27 616c 6c27 2c27 2a27 5d3a   in ['all','*']:
+0003ae40: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
+0003ae50: 733d 616c 7068 612b 416c 7068 612b 6e75  s=alpha+Alpha+nu
+0003ae60: 6d2b 7379 6d62 6f6c 2b53 796d 626f 6c2b  m+symbol+Symbol+
+0003ae70: 7370 6163 650a 2020 2020 2020 2020 656c  space.        el
+0003ae80: 6966 2069 7369 6e73 7461 6e63 6528 6d6f  if isinstance(mo
+0003ae90: 6465 2c73 7472 293a 0a20 2020 2020 2020  de,str):.       
+0003aea0: 2020 2020 2069 6620 2761 6c70 6861 2720       if 'alpha' 
+0003aeb0: 696e 206d 6f64 653a 2073 7472 733d 616c  in mode: strs=al
+0003aec0: 7068 610a 2020 2020 2020 2020 2020 2020  pha.            
+0003aed0: 6966 2027 416c 7068 6127 2069 6e20 6d6f  if 'Alpha' in mo
+0003aee0: 6465 3a20 7374 7273 3d61 6c70 6861 2b41  de: strs=alpha+A
+0003aef0: 6c70 6861 0a20 2020 2020 2020 2020 2020  lpha.           
+0003af00: 2069 6620 2741 4c50 4841 2720 696e 206d   if 'ALPHA' in m
+0003af10: 6f64 653a 2073 7472 733d 416c 7068 610a  ode: strs=Alpha.
+0003af20: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+0003af30: 6e75 6d27 2069 6e20 6d6f 6465 3a20 7374  num' in mode: st
+0003af40: 7273 3d73 7472 732b 6e75 6d0a 2020 2020  rs=strs+num.    
+0003af50: 2020 2020 2020 2020 6966 2027 6368 6172          if 'char
+0003af60: 2720 696e 206d 6f64 653a 2073 7472 733d  ' in mode: strs=
+0003af70: 7374 7273 2b73 796d 626f 6c0a 2020 2020  strs+symbol.    
+0003af80: 2020 2020 2020 2020 656c 6966 2027 7379          elif 'sy
+0003af90: 6d27 2069 6e20 6d6f 6465 3a20 7374 7273  m' in mode: strs
+0003afa0: 3d73 7472 732b 7379 6d62 6f6c 2b53 796d  =strs+symbol+Sym
+0003afb0: 626f 6c2b 7370 6163 650a 2020 2020 6966  bol+space.    if
+0003afc0: 206e 6f74 2073 7472 733a 2073 7472 733d   not strs: strs=
+0003afd0: 616c 7068 612b 416c 7068 612b 6e75 6d0a  alpha+Alpha+num.
+0003afe0: 2020 2020 7374 726e 3d6c 656e 2873 7472      strn=len(str
+0003aff0: 7329 2d31 0a20 2020 2073 7472 613d 6c69  s)-1.    stra=li
+0003b000: 7374 2873 7472 7329 0a20 2020 206f 7574  st(strs).    out
+0003b010: 3d5b 5d0a 2020 2020 666f 7220 6920 696e  =[].    for i in
+0003b020: 2072 616e 6765 2830 2c6c 656e 6774 6829   range(0,length)
+0003b030: 3a0a 2020 2020 2020 2020 7261 6e64 6f6d  :.        random
+0003b040: 2e73 6875 6666 6c65 2873 7472 6129 0a20  .shuffle(stra). 
+0003b050: 2020 2020 2020 206f 7574 2e61 7070 656e         out.appen
+0003b060: 6428 7374 7261 5b72 616e 646f 6d2e 7261  d(stra[random.ra
+0003b070: 6e64 696e 7428 302c 7374 726e 295d 290a  ndint(0,strn)]).
+0003b080: 2020 2020 7265 7475 726e 2069 6e74 2827      return int('
+0003b090: 272e 6a6f 696e 286f 7574 2929 2069 6620  '.join(out)) if 
+0003b0a0: 6d6f 6465 203d 3d20 276e 756d 2720 656c  mode == 'num' el
+0003b0b0: 7365 2027 272e 6a6f 696e 286f 7574 290a  se ''.join(out).
+0003b0c0: 0a64 6566 2049 7341 6c6c 5361 6d65 5374  .def IsAllSameSt
+0003b0d0: 7228 7372 632c 6669 6e64 293a 0a20 2020  r(src,find):.   
+0003b0e0: 2027 2727 4368 6563 6b20 696e 7075 7420   '''Check input 
+0003b0f0: 7374 7269 6e67 2069 7320 416c 6c20 7361  string is All sa
+0003b100: 6d65 2073 7472 696e 6720 6f72 206e 6f74  me string or not
+0003b110: 2727 270a 2020 2020 6966 2069 7369 6e73  '''.    if isins
+0003b120: 7461 6e63 6528 7372 632c 7374 7229 2061  tance(src,str) a
+0003b130: 6e64 2069 7369 6e73 7461 6e63 6528 6669  nd isinstance(fi
+0003b140: 6e64 2c73 7472 293a 0a20 2020 2020 2020  nd,str):.       
+0003b150: 2069 6620 7372 632e 636f 756e 7428 6669   if src.count(fi
+0003b160: 6e64 2920 3d3d 206c 656e 2873 7263 292f  nd) == len(src)/
+0003b170: 6c65 6e28 6669 6e64 293a 0a20 2020 2020  len(find):.     
+0003b180: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
+0003b190: 7565 0a20 2020 2072 6574 7572 6e20 4661  ue.    return Fa
+0003b1a0: 6c73 650a 0a64 6566 204d 6b54 656d 7028  lse..def MkTemp(
+0003b1b0: 6669 6c65 6e61 6d65 3d4e 6f6e 652c 7375  filename=None,su
+0003b1c0: 6666 6978 3d4e 6f6e 652c 7370 6c69 743d  ffix=None,split=
+0003b1d0: 272d 272c 6f70 743d 2764 7279 272c 6261  '-',opt='dry',ba
+0003b1e0: 7365 5f64 6972 3d4e 6f6e 652c 756e 6971  se_dir=None,uniq
+0003b1f0: 3d46 616c 7365 2c64 6566 6175 6c74 5f6c  =False,default_l
+0003b200: 656e 6774 683d 382c 6d6f 6465 3d4e 6f6e  ength=8,mode=Non
+0003b210: 652c 2a2a 6f70 7473 293a 0a20 2020 2027  e,**opts):.    '
+0003b220: 2727 0a20 2020 206d 616b 6520 6120 7261  ''.    make a ra
+0003b230: 6e64 6f6d 2073 7472 696e 670a 2020 2020  ndom string.    
+0003b240: 6669 6c65 6e61 6d65 3a20 0a20 2020 2020  filename: .     
+0003b250: 204e 6f6e 6520 203a 2067 656e 6572 6174   None  : generat
+0003b260: 6520 7261 6e64 6f6d 2073 7472 696e 670a  e random string.
+0003b270: 2020 2020 2020 6162 632d 5858 5858 582e        abc-XXXXX.
+0003b280: 6c6f 6720 3a20 6162 632d 3c72 616e 646f  log : abc-<rando
+0003b290: 6d20 3520 6368 6172 6163 7465 7273 3e2e  m 5 characters>.
+0003b2a0: 6c6f 670a 2020 2020 2020 6162 632d 4e4e  log.      abc-NN
+0003b2b0: 4e2d 6162 6364 2e6c 6f67 2020 203a 2061  N-abcd.log   : a
+0003b2c0: 6263 2d3c 7261 6e64 6f6d 2033 206e 756d  bc-<random 3 num
+0003b2d0: 6265 7273 3e2d 6162 6364 2e6c 6f67 0a20  bers>-abcd.log. 
+0003b2e0: 2020 2020 2061 6263 2e6c 6f67 2d58 5858       abc.log-XXX
+0003b2f0: 5820 203a 2061 6263 2e6c 6f67 2d3c 7261  X  : abc.log-<ra
+0003b300: 6e64 6f6d 2034 2063 6861 7261 6374 6572  ndom 4 character
+0003b310: 733e 0a20 2020 2073 7566 6669 7820 203a  s>.    suffix  :
+0003b320: 2069 6620 796f 7520 6e65 6564 2061 6464   if you need add
+0003b330: 696e 6720 6669 6c65 2065 7874 616e 6428  ing file extand(
+0003b340: 7375 6666 6978 2920 2865 783a 2073 7566  suffix) (ex: suf
+0003b350: 6669 783d 276c 6f67 2720 3d3e 2058 5858  fix='log' => XXX
+0003b360: 5858 2e6c 6f67 290a 2020 2020 7370 6c69  XX.log).    spli
+0003b370: 7420 2020 3a20 6465 6661 756c 7420 2d2c  t   : default -,
+0003b380: 2073 706c 6974 2073 796d 626f 6c20 666f   split symbol fo
+0003b390: 7220 7468 6520 6669 6c65 6e61 6d65 0a20  r the filename. 
+0003b3a0: 2020 206f 7074 0a20 2020 2020 202d 2064     opt.      - d
+0003b3b0: 7279 203a 2064 7279 2072 756e 2028 7265  ry : dry run (re
+0003b3c0: 7475 726e 2073 7472 696e 6729 2864 6566  turn string)(def
+0003b3d0: 6175 6c74 290a 2020 2020 2020 2d20 6669  ault).      - fi
+0003b3e0: 6c65 3a20 6d61 6b65 2061 2066 696c 650a  le: make a file.
+0003b3f0: 2020 2020 2020 2d20 6469 7220 3a20 6d61        - dir : ma
+0003b400: 6b65 2061 2064 6972 6563 746f 7279 0a20  ke a directory. 
+0003b410: 2020 2062 6173 655f 6469 723a 2069 6620     base_dir: if 
+0003b420: 796f 7520 7761 6e74 2061 2073 7472 696e  you want a strin
+0003b430: 6720 756e 6465 7220 6261 7365 5f64 6972  g under base_dir
+0003b440: 0a20 2020 2075 6e69 7120 2020 203a 2069  .    uniq    : i
+0003b450: 6620 796f 7520 7761 6e74 206d 616b 6520  f you want make 
+0003b460: 6120 756e 6971 2073 7472 696e 6720 286e  a uniq string (n
+0003b470: 6f74 2065 7869 7374 696e 6720 6669 6c65  ot existing file
+0003b480: 6e61 6d65 2069 6e20 7468 6520 2862 6173  name in the (bas
+0003b490: 655f 6469 7229 6469 7265 6374 6f72 7929  e_dir)directory)
+0003b4a0: 0a20 2020 2020 2073 6569 7269 616c 2069  .      seirial i
+0003b4b0: 6e63 7265 6173 6520 6e75 6d62 6572 0a20  ncrease number. 
+0003b4c0: 2020 2020 2020 2069 6620 6578 6973 7420         if exist 
+0003b4d0: 6162 632e 6c6f 6720 7468 656e 2061 6263  abc.log then abc
+0003b4e0: 2e6c 6f67 2d30 3030 3030 3030 300a 2020  .log-00000000.  
+0003b4f0: 2020 2020 2020 6966 2065 7869 7374 2061        if exist a
+0003b500: 6263 2e6c 6f67 2c61 6263 2e6c 6f67 2d30  bc.log,abc.log-0
+0003b510: 3030 3030 3030 3020 7468 656e 2061 6263  0000000 then abc
+0003b520: 2e6c 6f67 2d30 3030 3030 3030 310a 2020  .log-00000001.  
+0003b530: 2020 2020 6669 6c65 6e61 6d65 3d27 6162      filename='ab
+0003b540: 6327 2c73 7566 6669 783d 276c 6f67 272c  c',suffix='log',
+0003b550: 756e 6971 3d54 7275 650a 2020 2020 2020  uniq=True.      
+0003b560: 2020 6966 2065 7869 7374 2061 6263 2e6c    if exist abc.l
+0003b570: 6f67 2074 6865 6e20 6162 632d 3030 3030  og then abc-0000
+0003b580: 3030 3030 2e6c 6f67 0a20 2020 2020 2020  0000.log.       
+0003b590: 2069 6620 6578 6973 7420 6162 632e 6c6f   if exist abc.lo
+0003b5a0: 672c 6162 632d 3030 3030 3030 3030 2e6c  g,abc-00000000.l
+0003b5b0: 6f67 2074 6865 6e20 6162 632d 3030 3030  og then abc-0000
+0003b5c0: 3030 3031 2e6c 6f67 0a20 2020 2064 6566  0001.log.    def
+0003b5d0: 6175 6c74 5f6c 656e 6774 683a 2072 616e  ault_length: ran
+0003b5e0: 646f 6d20 7374 7269 6e67 206c 656e 6774  dom string lengt
+0003b5f0: 680a 2020 2020 6d6f 6465 2020 2020 3a20  h.    mode    : 
+0003b600: 7261 6e64 6f6d 2073 7472 696e 6720 6d6f  random string mo
+0003b610: 6465 2028 7361 6d65 2061 7320 5261 6e64  de (same as Rand
+0003b620: 6f6d 2829 2773 206d 6f64 6529 0a20 2020  om()'s mode).   
+0003b630: 2063 7573 746f 6d20 203a 2063 7573 746f   custom  : custo
+0003b640: 6d20 7261 6e64 6f6d 2073 7472 696e 6720  m random string 
+0003b650: 736f 7572 6365 2028 7361 6d65 2061 7320  source (same as 
+0003b660: 5261 6e64 6f6d 2829 2773 2073 7472 7320  Random()'s strs 
+0003b670: 7061 7261 6d65 7465 7229 0a20 2020 2027  parameter).    '
+0003b680: 2727 0a20 2020 2023 5375 7070 6f72 7420  ''.    #Support 
+0003b690: 4f4c 4420 4d6b 5465 6d70 2829 200a 2020  OLD MkTemp() .  
+0003b6a0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0003b6b0: 7375 6666 6978 2c73 7472 2920 616e 6420  suffix,str) and 
+0003b6c0: 6973 696e 7374 616e 6365 2866 696c 656e  isinstance(filen
+0003b6d0: 616d 652c 7374 7229 3a0a 2020 2020 2020  ame,str):.      
+0003b6e0: 2020 6966 2073 7566 6669 785b 305d 3d3d    if suffix[0]==
+0003b6f0: 272d 273a 0a20 2020 2020 2020 2020 2020  '-':.           
+0003b700: 2069 6620 4973 416c 6c53 616d 6553 7472   if IsAllSameStr
+0003b710: 2873 7566 6669 785b 313a 5d2c 2758 2729  (suffix[1:],'X')
+0003b720: 206f 7220 4973 416c 6c53 616d 6553 7472   or IsAllSameStr
+0003b730: 2873 7566 6669 785b 313a 5d2c 274e 2729  (suffix[1:],'N')
+0003b740: 206f 7220 4973 416c 6c53 616d 6553 7472   or IsAllSameStr
+0003b750: 2873 7566 6669 785b 313a 5d2c 2778 2729  (suffix[1:],'x')
+0003b760: 206f 7220 4973 416c 6c53 616d 6553 7472   or IsAllSameStr
+0003b770: 2873 7566 6669 785b 313a 5d2c 276e 2729  (suffix[1:],'n')
+0003b780: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003b790: 2020 6465 6661 756c 745f 6c65 6e67 7468    default_length
+0003b7a0: 3d6c 656e 2873 7566 6669 7829 2d31 0a20  =len(suffix)-1. 
+0003b7b0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0003b7c0: 696c 656e 616d 653d 6669 6c65 6e61 6d65  ilename=filename
+0003b7d0: 2b73 7566 6669 782e 7570 7065 7228 290a  +suffix.upper().
+0003b7e0: 2020 2020 2320 4e65 7720 6465 7369 676e      # New design
+0003b7f0: 0a20 2020 2064 6566 206f 7574 6669 6c65  .    def outfile
+0003b800: 2866 696c 656e 616d 652c 6f70 7429 3a0a  (filename,opt):.
+0003b810: 2020 2020 2020 2020 6966 206f 7074 2069          if opt i
+0003b820: 6e20 5b27 6669 6c65 272c 2766 275d 3a0a  n ['file','f']:.
+0003b830: 2020 2020 2020 2020 2020 206f 732e 6d6b             os.mk
+0003b840: 6e6f 6465 2866 696c 656e 616d 6529 0a20  node(filename). 
+0003b850: 2020 2020 2020 2065 6c69 6620 6f70 7420         elif opt 
+0003b860: 696e 205b 2764 6972 272c 2764 272c 2764  in ['dir','d','d
+0003b870: 6972 6563 746f 7279 275d 3a0a 2020 2020  irectory']:.    
+0003b880: 2020 2020 2020 206f 732e 6d6b 6469 7228         os.mkdir(
+0003b890: 6669 6c65 6e61 6d65 290a 2020 2020 2020  filename).      
+0003b8a0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0003b8b0: 2020 2072 6574 7572 6e20 6669 6c65 6e61     return filena
+0003b8c0: 6d65 0a0a 2020 2020 6465 6620 6d6b 5f66  me..    def mk_f
+0003b8d0: 696c 656e 616d 6528 6669 6c65 6e61 6d65  ilename(filename
+0003b8e0: 2c73 706c 6974 293a 0a20 2020 2020 2020  ,split):.       
+0003b8f0: 2066 696c 656e 616d 655f 613d 6669 6c65   filename_a=file
+0003b900: 6e61 6d65 2e73 706c 6974 2873 706c 6974  name.split(split
+0003b910: 290a 2020 2020 2020 2020 6669 6c65 6e61  ).        filena
+0003b920: 6d65 5f6e 3d6c 656e 2866 696c 656e 616d  me_n=len(filenam
+0003b930: 655f 6129 0a20 2020 2020 2020 2073 7373  e_a).        sss
+0003b940: 3d4e 6f6e 650a 2020 2020 2020 2020 666f  =None.        fo
+0003b950: 7220 6666 2069 6e20 7261 6e67 6528 302c  r ff in range(0,
+0003b960: 6669 6c65 6e61 6d65 5f6e 293a 0a20 2020  filename_n):.   
+0003b970: 2020 2020 2020 2020 2066 6f72 2073 7320           for ss 
+0003b980: 696e 205b 274e 272c 2758 275d 3a0a 2020  in ['N','X']:.  
+0003b990: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0003b9a0: 2049 7341 6c6c 5361 6d65 5374 7228 6669   IsAllSameStr(fi
+0003b9b0: 6c65 6e61 6d65 5f61 5b66 665d 2c73 7329  lename_a[ff],ss)
+0003b9c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003b9d0: 2020 2020 2020 7373 733d 7373 0a20 2020        sss=ss.   
+0003b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b9f0: 2069 6620 6666 203c 2066 696c 656e 616d   if ff < filenam
+0003ba00: 655f 6e2d 313a 0a20 2020 2020 2020 2020  e_n-1:.         
+0003ba10: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0003ba20: 613d 5261 6e64 6f6d 286c 656e 6774 683d  a=Random(length=
+0003ba30: 6c65 6e28 6669 6c65 6e61 6d65 5f61 5b66  len(filename_a[f
+0003ba40: 665d 292c 6d6f 6465 3d27 6e75 6d27 2069  f]),mode='num' i
+0003ba50: 6620 7373 7320 3d3d 2027 4e27 2065 6c73  f sss == 'N' els
+0003ba60: 6520 6d6f 6465 2c73 7472 733d 6f70 7473  e mode,strs=opts
+0003ba70: 2e67 6574 2827 6375 7374 6f6d 2729 290a  .get('custom')).
+0003ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ba90: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0003baa0: 7461 6e63 6528 6161 2c69 6e74 293a 0a20  tance(aa,int):. 
+0003bab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bac0: 2020 2020 2020 2020 2020 2066 696c 656e             filen
+0003bad0: 616d 655f 615b 6666 5d3d 2725 307b 7d64  ame_a[ff]='%0{}d
+0003bae0: 272e 666f 726d 6174 286c 656e 2866 696c  '.format(len(fil
+0003baf0: 656e 616d 655f 615b 6666 5d29 2925 6161  ename_a[ff]))%aa
+0003bb00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003bb10: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0003bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bb30: 2020 2020 2020 2020 2020 2066 696c 656e             filen
+0003bb40: 616d 655f 615b 6666 5d3d 277b 7d27 2e66  ame_a[ff]='{}'.f
+0003bb50: 6f72 6d61 7428 6161 290a 2020 2020 2020  ormat(aa).      
+0003bb60: 2020 6669 6c65 6e61 6d65 5f6c 6173 745f    filename_last_
+0003bb70: 7375 6666 6978 3d66 696c 656e 616d 655f  suffix=filename_
+0003bb80: 615b 2d31 5d2e 7370 6c69 7428 272e 2729  a[-1].split('.')
+0003bb90: 5b30 5d0a 2020 2020 2020 2020 6669 6c65  [0].        file
+0003bba0: 6e61 6d65 5f6c 6173 745f 6578 743d 272e  name_last_ext='.
+0003bbb0: 272e 6a6f 696e 2866 696c 656e 616d 655f  '.join(filename_
+0003bbc0: 615b 2d31 5d2e 7370 6c69 7428 272e 2729  a[-1].split('.')
+0003bbd0: 5b31 3a5d 290a 2020 2020 2020 2020 6966  [1:]).        if
+0003bbe0: 2073 7373 2069 7320 4e6f 6e65 3a20 7373   sss is None: ss
+0003bbf0: 733d 5b27 4e27 2c27 5827 5d0a 2020 2020  s=['N','X'].    
+0003bc00: 2020 2020 666f 7220 7373 2069 6e20 7373      for ss in ss
+0003bc10: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
+0003bc20: 6620 4973 416c 6c53 616d 6553 7472 2866  f IsAllSameStr(f
+0003bc30: 696c 656e 616d 655f 6c61 7374 5f73 7566  ilename_last_suf
+0003bc40: 6669 782c 7373 293a 0a20 2020 2020 2020  fix,ss):.       
+0003bc50: 2020 2020 2020 2020 2061 613d 5261 6e64           aa=Rand
+0003bc60: 6f6d 286c 656e 6774 683d 6c65 6e28 6669  om(length=len(fi
+0003bc70: 6c65 6e61 6d65 5f6c 6173 745f 7375 6666  lename_last_suff
+0003bc80: 6978 292c 6d6f 6465 3d27 6e75 6d27 2069  ix),mode='num' i
+0003bc90: 6620 7373 203d 3d20 274e 2720 656c 7365  f ss == 'N' else
+0003bca0: 206d 6f64 652c 7374 7273 3d6f 7074 732e   mode,strs=opts.
+0003bcb0: 6765 7428 2763 7573 746f 6d27 2929 0a20  get('custom')). 
+0003bcc0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0003bcd0: 6620 6973 696e 7374 616e 6365 2861 612c  f isinstance(aa,
+0003bce0: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+0003bcf0: 2020 2020 2020 2020 2020 6669 6c65 6e61            filena
+0003bd00: 6d65 5f61 5b2d 315d 3d27 2530 7b7d 6427  me_a[-1]='%0{}d'
+0003bd10: 2e66 6f72 6d61 7428 6c65 6e28 6669 6c65  .format(len(file
+0003bd20: 6e61 6d65 5f6c 6173 745f 7375 6666 6978  name_last_suffix
+0003bd30: 2929 2561 610a 2020 2020 2020 2020 2020  ))%aa.          
+0003bd40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0003bd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bd60: 6669 6c65 6e61 6d65 5f61 5b2d 315d 3d27  filename_a[-1]='
+0003bd70: 7b7d 272e 666f 726d 6174 2861 6129 0a20  {}'.format(aa). 
+0003bd80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0003bd90: 6620 6669 6c65 6e61 6d65 5f6c 6173 745f  f filename_last_
+0003bda0: 6578 743a 0a20 2020 2020 2020 2020 2020  ext:.           
+0003bdb0: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
+0003bdc0: 655f 615b 2d31 5d3d 6669 6c65 6e61 6d65  e_a[-1]=filename
+0003bdd0: 5f61 5b2d 315d 2b27 2e7b 7d27 2e66 6f72  _a[-1]+'.{}'.for
+0003bde0: 6d61 7428 6669 6c65 6e61 6d65 5f6c 6173  mat(filename_las
+0003bdf0: 745f 6578 7429 0a20 2020 2020 2020 2072  t_ext).        r
+0003be00: 6574 7572 6e20 7370 6c69 742e 6a6f 696e  eturn split.join
+0003be10: 2866 696c 656e 616d 655f 6129 0a0a 2020  (filename_a)..  
+0003be20: 2020 6966 2049 734e 6f6e 6528 6669 6c65    if IsNone(file
+0003be30: 6e61 6d65 2920 6f72 206e 6f74 2069 7369  name) or not isi
+0003be40: 6e73 7461 6e63 6528 6669 6c65 6e61 6d65  nstance(filename
+0003be50: 2c73 7472 293a 0a20 2020 2020 2020 2072  ,str):.        r
+0003be60: 6669 6c65 6e61 6d65 3d52 616e 646f 6d28  filename=Random(
+0003be70: 6c65 6e67 7468 3d64 6566 6175 6c74 5f6c  length=default_l
+0003be80: 656e 6774 682c 6d6f 6465 3d27 6e75 6d27  ength,mode='num'
+0003be90: 2069 6620 7375 6666 6978 2069 6e20 5b27   if suffix in ['
+0003bea0: 6e27 2c27 4e27 5d20 656c 7365 206d 6f64  n','N'] else mod
+0003beb0: 652c 7374 7273 3d6f 7074 732e 6765 7428  e,strs=opts.get(
+0003bec0: 2763 7573 746f 6d27 2929 0a20 2020 2020  'custom')).     
+0003bed0: 2020 2062 6173 655f 6469 723d 272e 2720     base_dir='.' 
+0003bee0: 6966 206e 6f74 2062 6173 655f 6469 7220  if not base_dir 
+0003bef0: 656c 7365 2062 6173 655f 6469 720a 2020  else base_dir.  
+0003bf00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0003bf10: 6261 7365 5f64 6972 3d6f 732e 7061 7468  base_dir=os.path
+0003bf20: 2e64 6972 6e61 6d65 2866 696c 656e 616d  .dirname(filenam
+0003bf30: 6529 0a20 2020 2020 2020 2062 6173 655f  e).        base_
+0003bf40: 6469 723d 272e 2720 6966 206e 6f74 2062  dir='.' if not b
+0003bf50: 6173 655f 6469 7220 656c 7365 2062 6173  ase_dir else bas
+0003bf60: 655f 6469 720a 2020 2020 2020 2020 7266  e_dir.        rf
+0003bf70: 696c 656e 616d 653d 6d6b 5f66 696c 656e  ilename=mk_filen
+0003bf80: 616d 6528 6f73 2e70 6174 682e 6261 7365  ame(os.path.base
+0003bf90: 6e61 6d65 2866 696c 656e 616d 6529 2c73  name(filename),s
+0003bfa0: 706c 6974 290a 2020 2020 6966 2075 6e69  plit).    if uni
+0003bfb0: 713a 0a20 2020 2020 2020 2069 6620 6973  q:.        if is
+0003bfc0: 696e 7374 616e 6365 2862 6173 655f 6469  instance(base_di
+0003bfd0: 722c 7374 7229 2061 6e64 206f 732e 7061  r,str) and os.pa
+0003bfe0: 7468 2e69 7364 6972 2862 6173 655f 6469  th.isdir(base_di
+0003bff0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+0003c000: 696e 633d 4661 6c73 650a 2020 2020 2020  inc=False.      
+0003c010: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
+0003c020: 616e 6765 2830 2c31 3030 3029 3a0a 2020  ange(0,1000):.  
+0003c030: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0003c040: 2069 6e63 3a0a 2020 2020 2020 2020 2020   inc:.          
+0003c050: 2020 2020 2020 2020 2020 6e65 775f 6669            new_fi
+0003c060: 6c65 6e61 6d65 3d72 6669 6c65 6e61 6d65  lename=rfilename
+0003c070: 2b27 7b7d 2530 7b7d 6427 2e66 6f72 6d61  +'{}%0{}d'.forma
+0003c080: 7428 7370 6c69 742c 6465 6661 756c 745f  t(split,default_
+0003c090: 6c65 6e67 7468 2925 2869 2d31 290a 2020  length)%(i-1).  
+0003c0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c0b0: 2020 6966 2073 7566 6669 783a 0a20 2020    if suffix:.   
+0003c0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c0d0: 2020 2020 206e 6577 5f66 696c 656e 616d       new_filenam
+0003c0e0: 653d 6e65 775f 6669 6c65 6e61 6d65 2b27  e=new_filename+'
+0003c0f0: 2e7b 7d27 2e66 6f72 6d61 7428 7375 6666  .{}'.format(suff
+0003c100: 6978 290a 2020 2020 2020 2020 2020 2020  ix).            
+0003c110: 2020 2020 2020 2020 6e65 775f 6669 6c65          new_file
+0003c120: 3d6f 732e 7061 7468 2e6a 6f69 6e28 6261  =os.path.join(ba
+0003c130: 7365 5f64 6972 2c6e 6577 5f66 696c 656e  se_dir,new_filen
+0003c140: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
+0003c150: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+0003c160: 6f73 2e70 6174 682e 6578 6973 7473 286e  os.path.exists(n
+0003c170: 6577 5f66 696c 6529 3a0a 2020 2020 2020  ew_file):.      
+0003c180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c190: 2020 7265 7475 726e 206f 7574 6669 6c65    return outfile
+0003c1a0: 286e 6577 5f66 696c 652c 6f70 7429 0a20  (new_file,opt). 
+0003c1b0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0003c1c0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003c1d0: 2020 2020 2020 2020 206e 6577 5f66 696c           new_fil
+0003c1e0: 656e 616d 653d 6d6b 5f66 696c 656e 616d  ename=mk_filenam
+0003c1f0: 6528 7266 696c 656e 616d 652c 7370 6c69  e(rfilename,spli
+0003c200: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+0003c210: 2020 2020 2020 2069 6620 6e65 775f 6669         if new_fi
+0003c220: 6c65 6e61 6d65 203d 3d20 7266 696c 656e  lename == rfilen
+0003c230: 616d 653a 0a20 2020 2020 2020 2020 2020  ame:.           
+0003c240: 2020 2020 2020 2020 2020 2020 2069 6e63               inc
+0003c250: 3d54 7275 650a 2020 2020 2020 2020 2020  =True.          
+0003c260: 2020 2020 2020 2020 2020 6966 2073 7566            if suf
+0003c270: 6669 783a 0a20 2020 2020 2020 2020 2020  fix:.           
+0003c280: 2020 2020 2020 2020 2020 2020 206e 6577               new
+0003c290: 5f66 696c 656e 616d 653d 6e65 775f 6669  _filename=new_fi
+0003c2a0: 6c65 6e61 6d65 2b27 2e7b 7d27 2e66 6f72  lename+'.{}'.for
+0003c2b0: 6d61 7428 7375 6666 6978 290a 2020 2020  mat(suffix).    
+0003c2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c2d0: 6e65 775f 6669 6c65 3d6f 732e 7061 7468  new_file=os.path
+0003c2e0: 2e6a 6f69 6e28 6261 7365 5f64 6972 2c6e  .join(base_dir,n
+0003c2f0: 6577 5f66 696c 656e 616d 6529 0a20 2020  ew_filename).   
+0003c300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c310: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
+0003c320: 6578 6973 7473 286e 6577 5f66 696c 6529  exists(new_file)
+0003c330: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003c340: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0003c350: 206f 7574 6669 6c65 286e 6577 5f66 696c   outfile(new_fil
+0003c360: 652c 6f70 7429 0a20 2020 2065 6c73 653a  e,opt).    else:
+0003c370: 0a20 2020 2020 2020 2069 6620 6261 7365  .        if base
+0003c380: 5f64 6972 203d 3d20 272e 273a 0a20 2020  _dir == '.':.   
+0003c390: 2020 2020 2020 2020 2069 6620 7375 6666           if suff
+0003c3a0: 6978 3a0a 2020 2020 2020 2020 2020 2020  ix:.            
+0003c3b0: 2020 2020 7265 7475 726e 2072 6669 6c65      return rfile
+0003c3c0: 6e61 6d65 2b27 2e7b 7d27 2e66 6f72 6d61  name+'.{}'.forma
+0003c3d0: 7428 7375 6666 6978 290a 2020 2020 2020  t(suffix).      
+0003c3e0: 2020 2020 2020 7265 7475 726e 2072 6669        return rfi
+0003c3f0: 6c65 6e61 6d65 0a20 2020 2020 2020 2072  lename.        r
+0003c400: 6574 7572 6e20 6f75 7466 696c 6528 6f73  eturn outfile(os
+0003c410: 2e70 6174 682e 6a6f 696e 2862 6173 655f  .path.join(base_
+0003c420: 6469 722c 7266 696c 656e 616d 6529 2c6f  dir,rfilename),o
+0003c430: 7074 290a 0a64 6566 206f 7376 6572 7369  pt)..def osversi
+0003c440: 6f6e 286d 6f64 653d 2775 7070 6572 2729  on(mode='upper')
+0003c450: 3a0a 2020 2020 5f70 6c61 7466 6f72 6d3d  :.    _platform=
+0003c460: 706c 6174 666f 726d 2e73 7973 7465 6d28  platform.system(
+0003c470: 290a 2020 2020 2336 3462 6974 3a20 706c  ).    #64bit: pl
+0003c480: 6174 666f 726d 2e61 7263 6869 7465 6374  atform.architect
+0003c490: 7572 6528 295b 305d 0a20 2020 206d 6f64  ure()[0].    mod
+0003c4a0: 653d 276c 2720 6966 2049 7353 616d 6528  e='l' if IsSame(
+0003c4b0: 6d6f 6465 2c27 6c6f 7765 7227 2920 656c  mode,'lower') el
+0003c4c0: 7365 2027 7527 0a0a 2020 2020 6f75 743d  se 'u'..    out=
+0003c4d0: 7b0a 2020 2020 2020 2027 706c 6174 666f  {.       'platfo
+0003c4e0: 726d 273a 5f70 6c61 7466 6f72 6d2e 6c6f  rm':_platform.lo
+0003c4f0: 7765 7228 2920 6966 206d 6f64 6520 3d3d  wer() if mode ==
+0003c500: 2027 6c27 2065 6c73 6520 5f70 6c61 7466   'l' else _platf
+0003c510: 6f72 6d2e 7570 7065 7228 292c 0a20 2020  orm.upper(),.   
+0003c520: 2020 2020 276e 616d 6527 3a4e 6f6e 652c      'name':None,
+0003c530: 0a20 2020 2020 2020 2776 6572 7369 6f6e  .       'version
+0003c540: 273a 4e6f 6e65 2c0a 2020 2020 2020 2027  ':None,.       '
+0003c550: 6578 7427 3a4e 6f6e 652c 0a20 2020 2020  ext':None,.     
+0003c560: 2020 2736 3462 6974 273a 7379 732e 6d61    '64bit':sys.ma
+0003c570: 7873 697a 6520 3e20 322a 2a33 322c 0a20  xsize > 2**32,. 
+0003c580: 2020 2020 2020 2763 6f64 6527 3a4e 6f6e        'code':Non
+0003c590: 650a 2020 2020 7d0a 2020 2020 6966 2027  e.    }.    if '
+0003c5a0: 4c69 6e75 7827 203d 3d20 5f70 6c61 7466  Linux' == _platf
+0003c5b0: 6f72 6d3a 0a20 2020 2020 2020 2072 743d  orm:.        rt=
+0003c5c0: 7273 6865 6c6c 2827 2727 5b20 2d66 202f  rshell('''[ -f /
+0003c5d0: 6574 632f 6f73 2d72 656c 6561 7365 205d  etc/os-release ]
+0003c5e0: 2026 2620 2820 2e20 2f65 7463 2f6f 732d   && ( . /etc/os-
+0003c5f0: 7265 6c65 6173 6520 3b20 6563 686f 2024  release ; echo $
+0003c600: 4944 2927 2727 290a 2020 2020 2020 2020  ID)''').        
+0003c610: 6f75 745b 276e 616d 6527 5d3d 7274 5b31  out['name']=rt[1
+0003c620: 5d2e 6c6f 7765 7228 2920 6966 206d 6f64  ].lower() if mod
+0003c630: 6520 3d3d 2027 6c27 2065 6c73 6520 7274  e == 'l' else rt
+0003c640: 5b31 5d2e 7570 7065 7228 290a 2020 2020  [1].upper().    
+0003c650: 2020 2020 6966 2049 7349 6e28 6f75 745b      if IsIn(out[
+0003c660: 276e 616d 6527 5d2c 2827 7562 756e 7475  'name'],('ubuntu
+0003c670: 272c 2752 6173 7062 6961 6e27 2c27 4665  ','Raspbian','Fe
+0003c680: 646f 7261 2729 293a 0a20 2020 2020 2020  dora')):.       
+0003c690: 2020 2020 2072 743d 7273 6865 6c6c 2827       rt=rshell('
+0003c6a0: 2727 5b20 2d66 202f 6574 632f 6f73 2d72  ''[ -f /etc/os-r
+0003c6b0: 656c 6561 7365 205d 2026 2620 2820 2e20  elease ] && ( . 
+0003c6c0: 2f65 7463 2f6f 732d 7265 6c65 6173 6520  /etc/os-release 
+0003c6d0: 3b20 6563 686f 2024 5645 5253 494f 4e29  ; echo $VERSION)
+0003c6e0: 2727 2729 0a20 2020 2020 2020 2020 2020  ''').           
+0003c6f0: 206f 7574 5b27 7665 7273 696f 6e27 5d3d   out['version']=
+0003c700: 7274 5b31 5d2e 7370 6c69 7428 295b 305d  rt[1].split()[0]
+0003c710: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
+0003c720: 5b27 6578 7427 5d3d 2720 272e 6a6f 696e  ['ext']=' '.join
+0003c730: 2872 745b 315d 2e73 706c 6974 2829 5b31  (rt[1].split()[1
+0003c740: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
+0003c750: 7274 3d72 7368 656c 6c28 2727 275b 202d  rt=rshell('''[ -
+0003c760: 6620 2f65 7463 2f6f 732d 7265 6c65 6173  f /etc/os-releas
+0003c770: 6520 5d20 2626 2028 202e 202f 6574 632f  e ] && ( . /etc/
+0003c780: 6f73 2d72 656c 6561 7365 203b 2065 6368  os-release ; ech
+0003c790: 6f20 2456 4552 5349 4f4e 5f43 4f44 454e  o $VERSION_CODEN
+0003c7a0: 414d 4529 2727 2729 0a20 2020 2020 2020  AME)''').       
+0003c7b0: 2020 2020 206f 7574 5b27 636f 6465 275d       out['code']
+0003c7c0: 3d72 745b 315d 0a20 2020 2020 2020 2065  =rt[1].        e
+0003c7d0: 6c73 653a 2023 4365 6e74 6f73 2c20 526f  lse: #Centos, Ro
+0003c7e0: 636b 792c 2052 6564 6861 742c 0a20 2020  cky, Redhat,.   
+0003c7f0: 2020 2020 2020 2020 2072 743d 7273 6865           rt=rshe
+0003c800: 6c6c 2827 2727 5b20 2d66 202f 6574 632f  ll('''[ -f /etc/
+0003c810: 7265 6468 6174 2d72 656c 6561 7365 205d  redhat-release ]
+0003c820: 2026 2620 6361 7420 2f65 7463 2f72 6564   && cat /etc/red
+0003c830: 6861 742d 7265 6c65 6173 6527 2727 290a  hat-release''').
+0003c840: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+0003c850: 745b 305d 203d 3d20 303a 0a20 2020 2020  t[0] == 0:.     
+0003c860: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+0003c870: 6920 696e 2072 745b 315d 2e73 706c 6974  i in rt[1].split
+0003c880: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+0003c890: 2020 2020 2020 2020 6966 2027 2e27 2069          if '.' i
+0003c8a0: 6e20 6969 2061 6e64 2069 692e 7370 6c69  n ii and ii.spli
+0003c8b0: 7428 272e 2729 5b30 5d2e 6973 6469 6769  t('.')[0].isdigi
+0003c8c0: 7428 293a 0a20 2020 2020 2020 2020 2020  t():.           
+0003c8d0: 2020 2020 2020 2020 2020 2020 2069 695f               ii_
+0003c8e0: 613d 6969 2e73 706c 6974 2827 2e27 290a  a=ii.split('.').
+0003c8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c900: 2020 2020 2020 2020 6f75 745b 2776 6572          out['ver
+0003c910: 7369 6f6e 275d 3d27 7b7d 2e7b 7d27 2e66  sion']='{}.{}'.f
+0003c920: 6f72 6d61 7428 6969 5f61 5b30 5d2c 6969  ormat(ii_a[0],ii
+0003c930: 5f61 5b31 5d29 0a20 2020 2020 2020 2020  _a[1]).         
+0003c940: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+0003c950: 7574 5b27 6578 7427 5d3d 6969 5f61 5b2d  ut['ext']=ii_a[-
+0003c960: 315d 0a20 2020 2020 2020 2020 2020 2020  1].             
+0003c970: 2020 2020 2020 2020 2020 2062 7265 616b             break
+0003c980: 0a20 2020 2065 6c69 6620 2746 7265 6542  .    elif 'FreeB
+0003c990: 5344 2720 3d3d 205f 706c 6174 666f 726d  SD' == _platform
+0003c9a0: 3a0a 2020 2020 2020 2020 6f75 745b 276e  :.        out['n
+0003c9b0: 616d 6527 5d3d 5f70 6c61 7466 6f72 6d2e  ame']=_platform.
+0003c9c0: 6c6f 7765 7228 2920 6966 206d 6f64 6520  lower() if mode 
+0003c9d0: 3d3d 2027 6c27 2065 6c73 6520 5f70 6c61  == 'l' else _pla
+0003c9e0: 7466 6f72 6d2e 7570 7065 7228 290a 2020  tform.upper().  
+0003c9f0: 2020 2020 2020 6161 3d70 6c61 7466 6f72        aa=platfor
+0003ca00: 6d2e 7665 7273 696f 6e28 290a 2020 2020  m.version().    
+0003ca10: 2020 2020 6f75 745b 2776 6572 7369 6f6e      out['version
+0003ca20: 275d 3d61 612e 7370 6c69 7428 295b 315d  ']=aa.split()[1]
+0003ca30: 2e73 706c 6974 2827 2d27 295b 305d 0a20  .split('-')[0]. 
+0003ca40: 2020 2020 2020 206f 7574 5b27 6578 7427         out['ext'
+0003ca50: 5d3d 6161 2e73 706c 6974 2829 5b32 5d0a  ]=aa.split()[2].
+0003ca60: 2020 2020 656c 6966 2027 4461 7277 696e      elif 'Darwin
+0003ca70: 2720 3d3d 205f 706c 6174 666f 726d 3a0a  ' == _platform:.
+0003ca80: 2020 2020 2020 2020 6f75 745b 276e 616d          out['nam
+0003ca90: 6527 5d3d 276f 7378 2720 6966 206d 6f64  e']='osx' if mod
+0003caa0: 6520 3d3d 2027 6c27 2065 6c73 6520 274f  e == 'l' else 'O
+0003cab0: 5358 270a 2020 2020 2020 2020 6f75 745b  SX'.        out[
+0003cac0: 2776 6572 7369 6f6e 275d 3d70 6c61 7466  'version']=platf
+0003cad0: 6f72 6d2e 6d61 635f 7665 7228 290a 2020  orm.mac_ver().  
+0003cae0: 2020 656c 6966 2027 5769 6e64 6f77 7327    elif 'Windows'
+0003caf0: 203d 3d20 5f70 6c61 7466 6f72 6d3a 0a20   == _platform:. 
+0003cb00: 2020 2020 2020 206f 7574 5b27 6e61 6d65         out['name
+0003cb10: 275d 3d5f 706c 6174 666f 726d 2e6c 6f77  ']=_platform.low
+0003cb20: 6572 2829 2069 6620 6d6f 6465 203d 3d20  er() if mode == 
+0003cb30: 276c 2720 656c 7365 205f 706c 6174 666f  'l' else _platfo
+0003cb40: 726d 2e75 7070 6572 2829 0a20 2020 2020  rm.upper().     
+0003cb50: 2020 206f 7574 5b27 7665 7273 696f 6e27     out['version'
+0003cb60: 5d3d 706c 6174 666f 726d 2e77 696e 3332  ]=platform.win32
+0003cb70: 5f76 6572 2829 2829 0a20 2020 2065 6c73  _ver()().    els
+0003cb80: 653a 0a20 2020 2020 2020 206f 7574 5b27  e:.        out['
+0003cb90: 6e61 6d65 275d 3d5f 706c 6174 666f 726d  name']=_platform
+0003cba0: 2e6c 6f77 6572 2829 2069 6620 6d6f 6465  .lower() if mode
+0003cbb0: 203d 3d20 276c 2720 656c 7365 205f 706c   == 'l' else _pl
+0003cbc0: 6174 666f 726d 2e75 7070 6572 2829 0a20  atform.upper(). 
+0003cbd0: 2020 2072 6574 7572 6e20 6f75 740a 0a64     return out..d
+0003cbe0: 6566 2053 7472 6970 2873 7263 2c6d 6f64  ef Strip(src,mod
+0003cbf0: 653d 2761 6c6c 272c 7379 6d3d 2777 6869  e='all',sym='whi
+0003cc00: 7465 7370 6163 6527 293a 0a20 2020 2069  tespace'):.    i
+0003cc10: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
+0003cc20: 2c73 7472 293a 0a20 2020 2020 2020 2069  ,str):.        i
+0003cc30: 6620 6d6f 6465 2069 6e20 5b27 7374 6172  f mode in ['star
+0003cc40: 7427 2c27 6c65 6674 272c 2762 6567 696e  t','left','begin
+0003cc50: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+0003cc60: 6966 2073 796d 3d3d 2777 6869 7465 7370  if sym=='whitesp
+0003cc70: 6163 6527 3a0a 2020 2020 2020 2020 2020  ace':.          
+0003cc80: 2020 2020 2020 7265 7475 726e 2073 7263        return src
+0003cc90: 2e6c 7374 7269 7028 290a 2020 2020 2020  .lstrip().      
+0003cca0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0003ccb0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003ccc0: 726e 2073 7263 2e6c 7374 7269 7028 7379  rn src.lstrip(sy
+0003ccd0: 6d29 0a20 2020 2020 2020 2065 6c69 6620  m).        elif 
+0003cce0: 6d6f 6465 2069 6e20 5b27 656e 6427 2c27  mode in ['end','
+0003ccf0: 7269 6768 7427 2c27 6c61 7374 275d 3a0a  right','last']:.
+0003cd00: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0003cd10: 796d 3d3d 2777 6869 7465 7370 6163 6527  ym=='whitespace'
+0003cd20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003cd30: 2020 7265 7475 726e 2073 7263 2e72 7374    return src.rst
+0003cd40: 7269 7028 290a 2020 2020 2020 2020 2020  rip().          
 0003cd50: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0003cd60: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0003cd70: 7263 5b65 5d20 213d 2073 796d 3a20 6272  rc[e] != sym: br
-0003cd80: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
-0003cd90: 6966 2073 796d 3d3d 2777 6869 7465 7370  if sym=='whitesp
-0003cda0: 6163 6527 3a0a 2020 2020 2020 2020 2020  ace':.          
-0003cdb0: 2020 2020 2020 7265 7475 726e 2073 7263        return src
-0003cdc0: 5b3a 735d 2b27 2027 2e6a 6f69 6e28 7372  [:s]+' '.join(sr
-0003cdd0: 635b 733a 652b 315d 2e73 706c 6974 2829  c[s:e+1].split()
-0003cde0: 292b 7372 635b 652b 313a 5d0a 2020 2020  )+src[e+1:].    
-0003cdf0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003ce00: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0003ce10: 7475 726e 2073 7263 5b3a 735d 2b73 796d  turn src[:s]+sym
-0003ce20: 2e6a 6f69 6e28 7372 635b 733a 652b 315d  .join(src[s:e+1]
-0003ce30: 2e73 706c 6974 2873 796d 2929 2b73 7263  .split(sym))+src
-0003ce40: 5b65 2b31 3a5d 0a20 2020 2020 2020 2065  [e+1:].        e
-0003ce50: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0003ce60: 2069 6620 7379 6d3d 3d27 7768 6974 6573   if sym=='whites
-0003ce70: 7061 6365 273a 0a20 2020 2020 2020 2020  pace':.         
-0003ce80: 2020 2020 2020 2072 6574 7572 6e20 2720         return ' 
-0003ce90: 272e 6a6f 696e 2873 7263 2e73 706c 6974  '.join(src.split
-0003cea0: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
-0003ceb0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003cec0: 2020 2020 2020 7265 7475 726e 2073 796d        return sym
-0003ced0: 2e6a 6f69 6e28 7372 632e 7370 6c69 7428  .join(src.split(
-0003cee0: 7379 6d29 290a 2020 2020 7265 7475 726e  sym)).    return
-0003cef0: 2073 7263 0a0a 6465 6620 506f 7028 7372   src..def Pop(sr
-0003cf00: 632c 6b65 792c 6465 6661 756c 743d 4e6f  c,key,default=No
-0003cf10: 6e65 293a 0a20 2020 2069 6620 6973 696e  ne):.    if isin
-0003cf20: 7374 616e 6365 2873 7263 2c64 6963 7429  stance(src,dict)
-0003cf30: 3a0a 2020 2020 2020 2020 6966 206b 6579  :.        if key
-0003cf40: 2069 6e20 7372 633a 0a20 2020 2020 2020   in src:.       
-0003cf50: 2020 2020 2072 6574 7572 6e20 7372 632e       return src.
-0003cf60: 706f 7028 6b65 7929 0a20 2020 2065 6c69  pop(key).    eli
-0003cf70: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-0003cf80: 2c6c 6973 7429 3a0a 2020 2020 2020 2020  ,list):.        
-0003cf90: 6966 2069 7369 6e73 7461 6e63 6528 6b65  if isinstance(ke
-0003cfa0: 792c 696e 7429 2061 6e64 206e 6f74 2069  y,int) and not i
-0003cfb0: 7369 6e73 7461 6e63 6528 6b65 792c 626f  sinstance(key,bo
-0003cfc0: 6f6c 293a 0a20 2020 2020 2020 2020 2020  ol):.           
-0003cfd0: 2069 6620 6c65 6e28 7372 6329 203e 2061   if len(src) > a
-0003cfe0: 6273 286b 6579 293a 0a20 2020 2020 2020  bs(key):.       
-0003cff0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003d000: 7372 632e 706f 7028 6b65 7929 0a20 2020  src.pop(key).   
-0003d010: 2069 6620 6e6f 7420 4973 4e6f 6e65 2864   if not IsNone(d
-0003d020: 6566 6175 6c74 293a 0a20 2020 2020 2020  efault):.       
-0003d030: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-0003d040: 0a64 6566 2049 7354 7275 6528 636f 6e64  .def IsTrue(cond
-0003d050: 6974 696f 6e2c 7265 7175 6972 656d 656e  ition,requiremen
-0003d060: 7473 3d4e 6f6e 652c 7368 656c 6c3d 4661  ts=None,shell=Fa
-0003d070: 6c73 652c 2a2a 6f70 7473 293a 0a20 2020  lse,**opts):.   
-0003d080: 2063 6f6e 6469 7469 6f6e 5f74 7970 653d   condition_type=
-0003d090: 7479 7065 2863 6f6e 6469 7469 6f6e 292e  type(condition).
-0003d0a0: 5f5f 6e61 6d65 5f5f 0a20 2020 2069 6620  __name__.    if 
-0003d0b0: 4973 4675 6e63 7469 6f6e 2863 6f6e 6469  IsFunction(condi
-0003d0c0: 7469 6f6e 2c62 7569 6c74 696e 3d46 616c  tion,builtin=Fal
-0003d0d0: 7365 293a 0a20 2020 2020 2020 206f 7074  se):.        opt
-0003d0e0: 735b 2770 6172 656e 7427 5d3d 3320 6966  s['parent']=3 if
-0003d0f0: 2027 7061 7265 6e74 2720 6e6f 7420 696e   'parent' not in
-0003d100: 206f 7074 7320 656c 7365 206f 7074 735b   opts else opts[
-0003d110: 2770 6172 656e 7427 5d2b 320a 2020 2020  'parent']+2.    
-0003d120: 2020 2020 6966 2046 6565 6446 756e 6328      if FeedFunc(
-0003d130: 636f 6e64 6974 696f 6e2c 2a2a 6f70 7473  condition,**opts
-0003d140: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-0003d150: 6574 7572 6e20 5472 7565 0a20 2020 2065  eturn True.    e
-0003d160: 6c69 6620 636f 6e64 6974 696f 6e5f 7479  lif condition_ty
-0003d170: 7065 203d 3d20 2773 7472 273a 0a20 2020  pe == 'str':.   
-0003d180: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-0003d190: 2020 2020 2020 7265 7475 726e 2065 7661        return eva
-0003d1a0: 6c28 636f 6e64 6974 696f 6e29 0a20 2020  l(condition).   
-0003d1b0: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-0003d1c0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-0003d1d0: 7374 616e 6365 2872 6571 7569 7265 6d65  stance(requireme
-0003d1e0: 6e74 732c 2874 7570 6c65 2c6c 6973 7429  nts,(tuple,list)
-0003d1f0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0003d200: 2020 2069 6620 4973 496e 2863 6f6e 6469     if IsIn(condi
-0003d210: 7469 6f6e 202c 7265 7175 6972 656d 656e  tion ,requiremen
-0003d220: 7473 293a 2072 6574 7572 6e20 5472 7565  ts): return True
-0003d230: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-0003d240: 6620 7265 7175 6972 656d 656e 7473 2069  f requirements i
-0003d250: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0003d260: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-0003d270: 6f6e 6469 7469 6f6e 203d 3d20 7265 7175  ondition == requ
-0003d280: 6972 656d 656e 7473 203a 2072 6574 7572  irements : retur
-0003d290: 6e20 5472 7565 0a20 2020 2065 6c69 6620  n True.    elif 
-0003d2a0: 636f 6e64 6974 696f 6e5f 7479 7065 203d  condition_type =
-0003d2b0: 3d20 2762 6f6f 6c27 3a0a 2020 2020 2020  = 'bool':.      
-0003d2c0: 2020 7265 7475 726e 2063 6f6e 6469 7469    return conditi
-0003d2d0: 6f6e 0a20 2020 2065 6c69 6620 636f 6e64  on.    elif cond
-0003d2e0: 6974 696f 6e5f 7479 7065 203d 3d20 2769  ition_type == 'i
-0003d2f0: 6e74 273a 0a20 2020 2020 2020 2069 6620  nt':.        if 
-0003d300: 7368 656c 6c3a 0a20 2020 2020 2020 2020  shell:.         
-0003d310: 2020 2069 6620 636f 6e64 6974 696f 6e3d     if condition=
-0003d320: 3d30 3a20 7265 7475 726e 2054 7275 650a  =0: return True.
-0003d330: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0003d340: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
-0003d350: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0003d360: 2020 2069 6620 636f 6e64 6974 696f 6e3e     if condition>
-0003d370: 303a 2072 6574 7572 6e20 5472 7565 0a20  0: return True. 
-0003d380: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003d390: 6e20 4661 6c73 650a 2020 2020 7265 7475  n False.    retu
-0003d3a0: 726e 2046 616c 7365 0a0a 6465 6620 4170  rn False..def Ap
-0003d3b0: 7065 6e64 282a 612c 7379 6d62 6f6c 3d27  pend(*a,symbol='
-0003d3c0: 272c 6174 3d2d 312c 7761 6e74 3d4e 6f6e  ',at=-1,want=Non
-0003d3d0: 6529 3a20 2320 4170 7065 6e64 2064 6174  e): # Append dat
-0003d3e0: 6120 6163 636f 7264 696e 6720 746f 2073  a according to s
-0003d3f0: 6f75 7263 6520 7479 7065 0a20 2020 2069  ource type.    i
-0003d400: 6620 613a 2020 2020 2020 2020 2020 2020  f a:            
-0003d410: 2020 2020 2020 2020 2320 6c69 7374 202b          # list +
-0003d420: 206c 6973 740a 2020 2020 2020 2020 733d   list.        s=
-0003d430: 615b 305d 2020 2020 2020 2020 2020 2020  a[0]            
-0003d440: 2020 2023 206f 7468 6572 203d 3e20 7075     # other => pu
-0003d450: 7420 746f 206c 6973 740a 2020 2020 2020  t to list.      
-0003d460: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0003d470: 732c 6279 7465 7329 3a20 733d 5374 7228  s,bytes): s=Str(
-0003d480: 7329 0a20 2020 2020 2020 2069 6620 7761  s).        if wa
-0003d490: 6e74 3a0a 2020 2020 2020 2020 2020 2020  nt:.            
-0003d4a0: 6966 2077 616e 7420 696e 205b 6c69 7374  if want in [list
-0003d4b0: 2c27 6c69 7374 275d 3a0a 2020 2020 2020  ,'list']:.      
-0003d4c0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-0003d4d0: 6e73 7461 6e63 6528 732c 7475 706c 6529  nstance(s,tuple)
-0003d4e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003d4f0: 2020 2020 2020 733d 6c69 7374 2873 290a        s=list(s).
-0003d500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d510: 656c 6966 206e 6f74 2069 7369 6e73 7461  elif not isinsta
-0003d520: 6e63 6528 732c 6c69 7374 293a 0a20 2020  nce(s,list):.   
-0003d530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d540: 2073 3d5b 735d 0a20 2020 2020 2020 2020   s=[s].         
-0003d550: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-0003d560: 7374 616e 6365 2873 2c73 7472 2920 616e  stance(s,str) an
-0003d570: 6420 7379 6d62 6f6c 3a0a 2020 2020 2020  d symbol:.      
-0003d580: 2020 2020 2020 2020 2020 2020 2020 733d                s=
-0003d590: 732e 7370 6c69 7428 7379 6d62 6f6c 290a  s.split(symbol).
-0003d5a0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0003d5b0: 2077 616e 7420 696e 205b 7374 722c 2773   want in [str,'s
-0003d5c0: 7472 275d 3a0a 2020 2020 2020 2020 2020  tr']:.          
-0003d5d0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0003d5e0: 6e63 6528 732c 286c 6973 742c 7475 706c  nce(s,(list,tupl
-0003d5f0: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
-0003d600: 2020 2020 2020 2020 2073 3d4a 6f69 6e28           s=Join(
-0003d610: 732c 7379 6d62 6f6c 3d73 796d 626f 6c29  s,symbol=symbol)
-0003d620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003d630: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0003d640: 2020 2020 2020 2020 2020 2073 3d27 7b7d             s='{}
-0003d650: 272e 666f 726d 6174 2873 290a 2020 2020  '.format(s).    
-0003d660: 2020 2020 736e 3d74 7970 6528 7329 2e5f      sn=type(s)._
-0003d670: 5f6e 616d 655f 5f0a 2020 2020 2020 2020  _name__.        
-0003d680: 666f 7220 6920 696e 2061 5b31 3a5d 3a0a  for i in a[1:]:.
-0003d690: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0003d6a0: 6e20 3d3d 2027 7374 7227 3a0a 2020 2020  n == 'str':.    
-0003d6b0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-0003d6c0: 7369 6e73 7461 6e63 6528 692c 286c 6973  sinstance(i,(lis
-0003d6d0: 742c 7475 706c 6529 293a 0a20 2020 2020  t,tuple)):.     
-0003d6e0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0003d6f0: 6f72 2078 2069 6e20 693a 0a20 2020 2020  or x in i:.     
+0003cd60: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0003cd70: 7263 2e72 7374 7269 7028 7379 6d29 0a20  rc.rstrip(sym). 
+0003cd80: 2020 2020 2020 2065 6c69 6620 6d6f 6465         elif mode
+0003cd90: 2069 6e20 5b27 626f 7468 272c 2765 6467   in ['both','edg
+0003cda0: 6527 2c27 6f75 7473 6964 6527 5d3a 0a20  e','outside']:. 
+0003cdb0: 2020 2020 2020 2020 2020 2069 6620 7379             if sy
+0003cdc0: 6d3d 3d27 7768 6974 6573 7061 6365 273a  m=='whitespace':
+0003cdd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003cde0: 2072 6574 7572 6e20 7372 632e 7374 7269   return src.stri
+0003cdf0: 7028 290a 2020 2020 2020 2020 2020 2020  p().            
+0003ce00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003ce10: 2020 2020 2020 7265 7475 726e 2073 7263        return src
+0003ce20: 2e73 7472 6970 2873 796d 290a 2020 2020  .strip(sym).    
+0003ce30: 2020 2020 656c 6966 206d 6f64 6520 696e      elif mode in
+0003ce40: 205b 2769 6e73 6964 6527 5d3a 0a20 2020   ['inside']:.   
+0003ce50: 2020 2020 2020 2020 2066 6f72 2073 2069           for s i
+0003ce60: 6e20 7261 6e67 6528 302c 6c65 6e28 7372  n range(0,len(sr
+0003ce70: 6329 293a 0a20 2020 2020 2020 2020 2020  c)):.           
+0003ce80: 2020 2020 2069 6620 7379 6d3d 3d27 7768       if sym=='wh
+0003ce90: 6974 6573 7061 6365 273a 0a20 2020 2020  itespace':.     
+0003cea0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0003ceb0: 6620 7372 635b 735d 2021 3d20 2720 273a  f src[s] != ' ':
+0003cec0: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
+0003ced0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003cee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cef0: 2069 6620 7372 635b 735d 2021 3d20 7379   if src[s] != sy
+0003cf00: 6d3a 2062 7265 616b 0a20 2020 2020 2020  m: break.       
+0003cf10: 2020 2020 2066 6f72 2065 2069 6e20 7261       for e in ra
+0003cf20: 6e67 6528 6c65 6e28 7372 6329 2d31 2c30  nge(len(src)-1,0
+0003cf30: 2c2d 3129 3a0a 2020 2020 2020 2020 2020  ,-1):.          
+0003cf40: 2020 2020 2020 6966 2073 796d 3d3d 2777        if sym=='w
+0003cf50: 6869 7465 7370 6163 6527 3a0a 2020 2020  hitespace':.    
+0003cf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cf70: 6966 2073 7263 5b65 5d20 213d 2027 2027  if src[e] != ' '
+0003cf80: 3a20 6272 6561 6b0a 2020 2020 2020 2020  : break.        
+0003cf90: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0003cfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cfb0: 2020 6966 2073 7263 5b65 5d20 213d 2073    if src[e] != s
+0003cfc0: 796d 3a20 6272 6561 6b0a 2020 2020 2020  ym: break.      
+0003cfd0: 2020 2020 2020 6966 2073 796d 3d3d 2777        if sym=='w
+0003cfe0: 6869 7465 7370 6163 6527 3a0a 2020 2020  hitespace':.    
+0003cff0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003d000: 726e 2073 7263 5b3a 735d 2b27 2027 2e6a  rn src[:s]+' '.j
+0003d010: 6f69 6e28 7372 635b 733a 652b 315d 2e73  oin(src[s:e+1].s
+0003d020: 706c 6974 2829 292b 7372 635b 652b 313a  plit())+src[e+1:
+0003d030: 5d0a 2020 2020 2020 2020 2020 2020 656c  ].            el
+0003d040: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0003d050: 2020 2020 7265 7475 726e 2073 7263 5b3a      return src[:
+0003d060: 735d 2b73 796d 2e6a 6f69 6e28 7372 635b  s]+sym.join(src[
+0003d070: 733a 652b 315d 2e73 706c 6974 2873 796d  s:e+1].split(sym
+0003d080: 2929 2b73 7263 5b65 2b31 3a5d 0a20 2020  ))+src[e+1:].   
+0003d090: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0003d0a0: 2020 2020 2020 2069 6620 7379 6d3d 3d27         if sym=='
+0003d0b0: 7768 6974 6573 7061 6365 273a 0a20 2020  whitespace':.   
+0003d0c0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0003d0d0: 7572 6e20 2720 272e 6a6f 696e 2873 7263  urn ' '.join(src
+0003d0e0: 2e73 706c 6974 2829 290a 2020 2020 2020  .split()).      
+0003d0f0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0003d100: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003d110: 726e 2073 796d 2e6a 6f69 6e28 7372 632e  rn sym.join(src.
+0003d120: 7370 6c69 7428 7379 6d29 290a 2020 2020  split(sym)).    
+0003d130: 7265 7475 726e 2073 7263 0a0a 6465 6620  return src..def 
+0003d140: 506f 7028 7372 632c 6b65 792c 6465 6661  Pop(src,key,defa
+0003d150: 756c 743d 4e6f 6e65 293a 0a20 2020 2069  ult=None):.    i
+0003d160: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
+0003d170: 2c64 6963 7429 3a0a 2020 2020 2020 2020  ,dict):.        
+0003d180: 6966 206b 6579 2069 6e20 7372 633a 0a20  if key in src:. 
+0003d190: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003d1a0: 6e20 7372 632e 706f 7028 6b65 7929 0a20  n src.pop(key). 
+0003d1b0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+0003d1c0: 6365 2873 7263 2c6c 6973 7429 3a0a 2020  ce(src,list):.  
+0003d1d0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0003d1e0: 6e63 6528 6b65 792c 696e 7429 2061 6e64  nce(key,int) and
+0003d1f0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+0003d200: 6b65 792c 626f 6f6c 293a 0a20 2020 2020  key,bool):.     
+0003d210: 2020 2020 2020 2069 6620 6c65 6e28 7372         if len(sr
+0003d220: 6329 203e 2061 6273 286b 6579 293a 0a20  c) > abs(key):. 
+0003d230: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003d240: 6574 7572 6e20 7372 632e 706f 7028 6b65  eturn src.pop(ke
+0003d250: 7929 0a20 2020 2069 6620 6e6f 7420 4973  y).    if not Is
+0003d260: 4e6f 6e65 2864 6566 6175 6c74 293a 0a20  None(default):. 
+0003d270: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+0003d280: 6661 756c 740a 0a64 6566 2049 7354 7275  fault..def IsTru
+0003d290: 6528 636f 6e64 6974 696f 6e2c 7265 7175  e(condition,requ
+0003d2a0: 6972 656d 656e 7473 3d4e 6f6e 652c 7368  irements=None,sh
+0003d2b0: 656c 6c3d 4661 6c73 652c 2a2a 6f70 7473  ell=False,**opts
+0003d2c0: 293a 0a20 2020 2063 6f6e 6469 7469 6f6e  ):.    condition
+0003d2d0: 5f74 7970 653d 7479 7065 2863 6f6e 6469  _type=type(condi
+0003d2e0: 7469 6f6e 292e 5f5f 6e61 6d65 5f5f 0a20  tion).__name__. 
+0003d2f0: 2020 2069 6620 4973 4675 6e63 7469 6f6e     if IsFunction
+0003d300: 2863 6f6e 6469 7469 6f6e 2c62 7569 6c74  (condition,built
+0003d310: 696e 3d46 616c 7365 293a 0a20 2020 2020  in=False):.     
+0003d320: 2020 206f 7074 735b 2770 6172 656e 7427     opts['parent'
+0003d330: 5d3d 3320 6966 2027 7061 7265 6e74 2720  ]=3 if 'parent' 
+0003d340: 6e6f 7420 696e 206f 7074 7320 656c 7365  not in opts else
+0003d350: 206f 7074 735b 2770 6172 656e 7427 5d2b   opts['parent']+
+0003d360: 320a 2020 2020 2020 2020 6966 2046 6565  2.        if Fee
+0003d370: 6446 756e 6328 636f 6e64 6974 696f 6e2c  dFunc(condition,
+0003d380: 2a2a 6f70 7473 293a 0a20 2020 2020 2020  **opts):.       
+0003d390: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
+0003d3a0: 0a20 2020 2065 6c69 6620 636f 6e64 6974  .    elif condit
+0003d3b0: 696f 6e5f 7479 7065 203d 3d20 2773 7472  ion_type == 'str
+0003d3c0: 273a 0a20 2020 2020 2020 2074 7279 3a0a  ':.        try:.
+0003d3d0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003d3e0: 726e 2065 7661 6c28 636f 6e64 6974 696f  rn eval(conditio
+0003d3f0: 6e29 0a20 2020 2020 2020 2065 7863 6570  n).        excep
+0003d400: 743a 0a20 2020 2020 2020 2020 2020 2069  t:.            i
+0003d410: 6620 6973 696e 7374 616e 6365 2872 6571  f isinstance(req
+0003d420: 7569 7265 6d65 6e74 732c 2874 7570 6c65  uirements,(tuple
+0003d430: 2c6c 6973 7429 293a 0a20 2020 2020 2020  ,list)):.       
+0003d440: 2020 2020 2020 2020 2069 6620 4973 496e           if IsIn
+0003d450: 2863 6f6e 6469 7469 6f6e 202c 7265 7175  (condition ,requ
+0003d460: 6972 656d 656e 7473 293a 2072 6574 7572  irements): retur
+0003d470: 6e20 5472 7565 0a20 2020 2020 2020 2020  n True.         
+0003d480: 2020 2065 6c69 6620 7265 7175 6972 656d     elif requirem
+0003d490: 656e 7473 2069 7320 6e6f 7420 4e6f 6e65  ents is not None
+0003d4a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003d4b0: 2020 6966 2063 6f6e 6469 7469 6f6e 203d    if condition =
+0003d4c0: 3d20 7265 7175 6972 656d 656e 7473 203a  = requirements :
+0003d4d0: 2072 6574 7572 6e20 5472 7565 0a20 2020   return True.   
+0003d4e0: 2065 6c69 6620 636f 6e64 6974 696f 6e5f   elif condition_
+0003d4f0: 7479 7065 203d 3d20 2762 6f6f 6c27 3a0a  type == 'bool':.
+0003d500: 2020 2020 2020 2020 7265 7475 726e 2063          return c
+0003d510: 6f6e 6469 7469 6f6e 0a20 2020 2065 6c69  ondition.    eli
+0003d520: 6620 636f 6e64 6974 696f 6e5f 7479 7065  f condition_type
+0003d530: 203d 3d20 2769 6e74 273a 0a20 2020 2020   == 'int':.     
+0003d540: 2020 2069 6620 7368 656c 6c3a 0a20 2020     if shell:.   
+0003d550: 2020 2020 2020 2020 2069 6620 636f 6e64           if cond
+0003d560: 6974 696f 6e3d 3d30 3a20 7265 7475 726e  ition==0: return
+0003d570: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
+0003d580: 2020 7265 7475 726e 2046 616c 7365 0a20    return False. 
+0003d590: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003d5a0: 2020 2020 2020 2020 2069 6620 636f 6e64           if cond
+0003d5b0: 6974 696f 6e3e 303a 2072 6574 7572 6e20  ition>0: return 
+0003d5c0: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
+0003d5d0: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
+0003d5e0: 2020 7265 7475 726e 2046 616c 7365 0a0a    return False..
+0003d5f0: 6465 6620 4170 7065 6e64 282a 612c 7379  def Append(*a,sy
+0003d600: 6d62 6f6c 3d27 272c 6174 3d2d 312c 7761  mbol='',at=-1,wa
+0003d610: 6e74 3d4e 6f6e 6529 3a20 2320 4170 7065  nt=None): # Appe
+0003d620: 6e64 2064 6174 6120 6163 636f 7264 696e  nd data accordin
+0003d630: 6720 746f 2073 6f75 7263 6520 7479 7065  g to source type
+0003d640: 0a20 2020 2069 6620 613a 2020 2020 2020  .    if a:      
+0003d650: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0003d660: 6c69 7374 202b 206c 6973 740a 2020 2020  list + list.    
+0003d670: 2020 2020 733d 615b 305d 2020 2020 2020      s=a[0]      
+0003d680: 2020 2020 2020 2020 2023 206f 7468 6572           # other
+0003d690: 203d 3e20 7075 7420 746f 206c 6973 740a   => put to list.
+0003d6a0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0003d6b0: 7461 6e63 6528 732c 6279 7465 7329 3a20  tance(s,bytes): 
+0003d6c0: 733d 5374 7228 7329 0a20 2020 2020 2020  s=Str(s).       
+0003d6d0: 2069 6620 7761 6e74 3a0a 2020 2020 2020   if want:.      
+0003d6e0: 2020 2020 2020 6966 2077 616e 7420 696e        if want in
+0003d6f0: 205b 6c69 7374 2c27 6c69 7374 275d 3a0a   [list,'list']:.
 0003d700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d710: 2020 2069 6620 6174 203d 3d20 2d31 3a0a     if at == -1:.
-0003d720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d730: 2020 2020 2020 2020 2020 2020 733d 4a6f              s=Jo
-0003d740: 696e 2873 2c27 7b7d 272e 666f 726d 6174  in(s,'{}'.format
-0003d750: 2878 292c 7379 6d62 6f6c 3d73 796d 626f  (x),symbol=symbo
-0003d760: 6c29 0a20 2020 2020 2020 2020 2020 2020  l).             
-0003d770: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0003d780: 6174 203d 3d20 303a 0a20 2020 2020 2020  at == 0:.       
-0003d790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d7a0: 2020 2020 2073 3d4a 6f69 6e28 277b 7d27       s=Join('{}'
-0003d7b0: 2e66 6f72 6d61 7428 7829 2c73 2c73 796d  .format(x),s,sym
-0003d7c0: 626f 6c3d 7379 6d62 6f6c 290a 2020 2020  bol=symbol).    
-0003d7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d7e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003d7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d800: 2020 2020 2020 6966 206c 656e 2873 2920        if len(s) 
-0003d810: 3e20 6174 3a0a 2020 2020 2020 2020 2020  > at:.          
-0003d820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d830: 2020 2020 2020 733d 4a6f 696e 284a 6f69        s=Join(Joi
-0003d840: 6e28 735b 3a61 745d 2c27 7b7d 272e 666f  n(s[:at],'{}'.fo
-0003d850: 726d 6174 2878 292c 7379 6d62 6f6c 3d73  rmat(x),symbol=s
-0003d860: 796d 626f 6c29 2c73 5b61 743a 5d2c 7379  ymbol),s[at:],sy
-0003d870: 6d62 6f6c 3d73 796d 626f 6c29 0a20 2020  mbol=symbol).   
-0003d880: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-0003d890: 6620 6973 696e 7374 616e 6365 2869 2c28  f isinstance(i,(
-0003d8a0: 696e 742c 7374 722c 6279 7465 7329 293a  int,str,bytes)):
-0003d8b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003d8c0: 2020 2020 2069 6620 6174 203d 3d20 2d31       if at == -1
-0003d8d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003d8e0: 2020 2020 2020 2020 2020 733d 4a6f 696e            s=Join
-0003d8f0: 2873 2c27 7b7d 272e 666f 726d 6174 2853  (s,'{}'.format(S
-0003d900: 7472 2869 2929 2c73 796d 626f 6c3d 7379  tr(i)),symbol=sy
-0003d910: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
-0003d920: 2020 2020 2020 2020 2020 656c 6966 2061            elif a
-0003d930: 7420 3d3d 2030 3a0a 2020 2020 2020 2020  t == 0:.        
-0003d940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d950: 733d 4a6f 696e 2827 7b7d 272e 666f 726d  s=Join('{}'.form
-0003d960: 6174 2853 7472 2869 2929 2c73 2c73 796d  at(Str(i)),s,sym
-0003d970: 626f 6c3d 7379 6d62 6f6c 290a 2020 2020  bol=symbol).    
-0003d980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d990: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003d9a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0003d9b0: 206c 656e 2873 2920 3e20 6174 3a0a 2020   len(s) > at:.  
-0003d9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d9d0: 2020 2020 2020 2020 2020 733d 4a6f 696e            s=Join
-0003d9e0: 284a 6f69 6e28 735b 3a61 745d 2c27 7b7d  (Join(s[:at],'{}
-0003d9f0: 272e 666f 726d 6174 2853 7472 2869 2929  '.format(Str(i))
-0003da00: 2c73 796d 626f 6c3d 7379 6d62 6f6c 292c  ,symbol=symbol),
-0003da10: 735b 6174 3a5d 2c73 796d 626f 6c3d 7379  s[at:],symbol=sy
-0003da20: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
-0003da30: 2020 656c 6966 2073 6e20 3d3d 2027 6c69    elif sn == 'li
-0003da40: 7374 273a 0a20 2020 2020 2020 2020 2020  st':.           
-0003da50: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0003da60: 6365 2869 2c73 7472 2920 616e 6420 7379  ce(i,str) and sy
-0003da70: 6d62 6f6c 3a0a 2020 2020 2020 2020 2020  mbol:.          
-0003da80: 2020 2020 2020 2020 2020 693d 692e 7370            i=i.sp
-0003da90: 6c69 7428 7379 6d62 6f6c 290a 2020 2020  lit(symbol).    
-0003daa0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0003dab0: 7420 3d3d 202d 3120 6f72 2061 7420 3d3d  t == -1 or at ==
-0003dac0: 206c 656e 2873 292d 313a 0a20 2020 2020   len(s)-1:.     
-0003dad0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0003dae0: 6620 6973 696e 7374 616e 6365 2869 2c6c  f isinstance(i,l
-0003daf0: 6973 7429 3a0a 2020 2020 2020 2020 2020  ist):.          
-0003db00: 2020 2020 2020 2020 2020 2020 2020 733d                s=
-0003db10: 732b 690a 2020 2020 2020 2020 2020 2020  s+i.            
-0003db20: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003db30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003db40: 2020 2020 2020 732e 6170 7065 6e64 2869        s.append(i
-0003db50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0003db60: 2020 656c 6966 2061 7420 3d3d 2030 206f    elif at == 0 o
-0003db70: 7220 6c65 6e28 7329 2b61 7420 3d3d 2030  r len(s)+at == 0
-0003db80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003db90: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0003dba0: 6e63 6528 692c 6c69 7374 293a 0a20 2020  nce(i,list):.   
-0003dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003dbc0: 2020 2020 2073 3d69 2b73 0a20 2020 2020       s=i+s.     
-0003dbd0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0003dbe0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0003dbf0: 2020 2020 2020 2020 2020 2020 2073 3d5b               s=[
-0003dc00: 695d 2b73 0a20 2020 2020 2020 2020 2020  i]+s.           
-0003dc10: 2020 2020 2065 6c69 6620 6174 203e 3020       elif at >0 
-0003dc20: 616e 6420 6174 203c 206c 656e 2873 293a  and at < len(s):
-0003dc30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003dc40: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0003dc50: 6365 2869 2c6c 6973 7429 3a0a 2020 2020  ce(i,list):.    
-0003dc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003dc70: 2020 2020 733d 735b 3a61 745d 2b69 2b73      s=s[:at]+i+s
-0003dc80: 5b61 743a 5d0a 2020 2020 2020 2020 2020  [at:].          
-0003dc90: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0003dca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003dcb0: 2020 2020 2020 2020 733d 735b 3a61 745d          s=s[:at]
-0003dcc0: 2b5b 695d 2b73 5b61 743a 5d0a 2020 2020  +[i]+s[at:].    
-0003dcd0: 2020 2020 7265 7475 726e 2073 0a20 2020      return s.   
-0003dce0: 2072 6574 7572 6e20 4661 6c73 650a 0a64   return False..d
-0003dcf0: 6566 2070 6163 6b65 745f 7265 6365 6976  ef packet_receiv
-0003dd00: 655f 616c 6c28 736f 636b 2c63 6f75 6e74  e_all(sock,count
-0003dd10: 2c70 726f 6772 6573 733d 4661 6c73 652c  ,progress=False,
-0003dd20: 7072 6f67 7265 7373 5f6d 7367 3d4e 6f6e  progress_msg=Non
-0003dd30: 652c 6c6f 673d 4e6f 6e65 2c72 6574 7279  e,log=None,retry
-0003dd40: 3d30 2c72 6574 7279 5f74 696d 656f 7574  =0,retry_timeout
-0003dd50: 3d35 2c65 7272 5f73 6372 3d46 616c 7365  =5,err_scr=False
-0003dd60: 293a 2023 2050 6163 6b65 740a 2020 2020  ): # Packet.    
-0003dd70: 6966 2074 7970 6528 736f 636b 292e 5f5f  if type(sock).__
-0003dd80: 6e61 6d65 5f5f 206e 6f74 2069 6e20 5b27  name__ not in ['
-0003dd90: 736f 636b 6574 272c 275f 736f 636b 6574  socket','_socket
-0003dda0: 6f62 6a65 6374 272c 2753 534c 536f 636b  object','SSLSock
-0003ddb0: 6574 275d 3a0a 2020 2020 2020 2020 7265  et']:.        re
-0003ddc0: 7475 726e 2046 616c 7365 2c27 4973 206e  turn False,'Is n
-0003ddd0: 6f74 206e 6574 776f 726b 2073 6f63 6b65  ot network socke
-0003dde0: 7427 0a20 2020 2062 7566 203d 2062 2727  t'.    buf = b''
-0003ddf0: 0a20 2020 2066 696c 655f 7369 7a65 5f64  .    file_size_d
-0003de00: 3d69 6e74 2827 7b30 7d27 2e66 6f72 6d61  =int('{0}'.forma
-0003de10: 7428 636f 756e 7429 290a 2020 2020 746e  t(count)).    tn
-0003de20: 3d30 0a20 2020 206e 6577 6275 663d 4e6f  =0.    newbuf=No
-0003de30: 6e65 0a20 2020 2077 6869 6c65 2063 6f75  ne.    while cou
-0003de40: 6e74 3a0a 2020 2020 2020 2020 6966 2070  nt:.        if p
-0003de50: 726f 6772 6573 733a 0a20 2020 2020 2020  rogress:.       
-0003de60: 2020 2020 2069 6620 7072 6f67 7265 7373       if progress
-0003de70: 5f6d 7367 3a0a 2020 2020 2020 2020 2020  _msg:.          
-0003de80: 2020 2020 2020 7072 696e 7466 2827 5c72        printf('\r
-0003de90: 7b7d 205b 207b 7d20 2520 5d27 2e66 6f72  {} [ {} % ]'.for
-0003dea0: 6d61 7428 7072 6f67 7265 7373 5f6d 7367  mat(progress_msg
-0003deb0: 2c69 6e74 2828 6669 6c65 5f73 697a 655f  ,int((file_size_
-0003dec0: 642d 636f 756e 7429 202f 2066 696c 655f  d-count) / file_
-0003ded0: 7369 7a65 5f64 202a 2031 3030 2929 2c6c  size_d * 100)),l
-0003dee0: 6f67 3d6c 6f67 2c64 6972 6563 743d 5472  og=log,direct=Tr
-0003def0: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
-0003df00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003df10: 2020 2020 2020 7072 696e 7466 2827 5c72        printf('\r
-0003df20: 446f 776e 6c6f 6164 696e 672e 2e2e 205b  Downloading... [
-0003df30: 207b 7d20 2520 5d27 2e66 6f72 6d61 7428   {} % ]'.format(
-0003df40: 696e 7428 2866 696c 655f 7369 7a65 5f64  int((file_size_d
-0003df50: 2d63 6f75 6e74 2920 2f20 6669 6c65 5f73  -count) / file_s
-0003df60: 697a 655f 6420 2a20 3130 3029 292c 6c6f  ize_d * 100)),lo
-0003df70: 673d 6c6f 672c 6469 7265 6374 3d54 7275  g=log,direct=Tru
-0003df80: 6529 0a20 2020 2020 2020 2074 7279 3a0a  e).        try:.
-0003df90: 2020 2020 2020 2020 2020 2020 6e65 7762              newb
-0003dfa0: 7566 203d 2073 6f63 6b2e 7265 6376 2863  uf = sock.recv(c
-0003dfb0: 6f75 6e74 290a 2020 2020 2020 2020 2020  ount).          
-0003dfc0: 2020 746e 3d30 2023 2072 6573 6574 2074    tn=0 # reset t
-0003dfd0: 7279 0a20 2020 2020 2020 2065 7863 6570  ry.        excep
-0003dfe0: 7420 736f 636b 6574 2e65 7272 6f72 2061  t socket.error a
-0003dff0: 7320 653a 0a20 2020 2020 2020 2020 2020  s e:.           
-0003e000: 2069 6620 746e 203c 2072 6574 7279 3a0a   if tn < retry:.
-0003e010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e020: 7072 696e 7466 2822 5b45 5252 4f52 5d20  printf("[ERROR] 
-0003e030: 7469 6d65 6f75 7420 7661 6c75 653a 7b7d  timeout value:{}
-0003e040: 2072 6574 7279 3a20 7b7d 2f7b 7d5c 6e7b   retry: {}/{}\n{
-0003e050: 7d22 2e66 6f72 6d61 7428 736f 636b 2e67  }".format(sock.g
-0003e060: 6574 7469 6d65 6f75 7428 292c 746e 2c72  ettimeout(),tn,r
-0003e070: 6574 7279 2c65 292c 6c6f 673d 6c6f 672c  etry,e),log=log,
-0003e080: 6473 703d 2765 2720 6966 2065 7272 5f73  dsp='e' if err_s
-0003e090: 6372 2065 6c73 6520 2764 2729 0a20 2020  cr else 'd').   
-0003e0a0: 2020 2020 2020 2020 2020 2020 2074 6e2b               tn+
-0003e0b0: 3d31 0a20 2020 2020 2020 2020 2020 2020  =1.             
-0003e0c0: 2020 2054 494d 4528 292e 536c 6565 7028     TIME().Sleep(
-0003e0d0: 3129 0a20 2020 2020 2020 2020 2020 2020  1).             
-0003e0e0: 2020 2073 6f63 6b2e 7365 7474 696d 656f     sock.settimeo
-0003e0f0: 7574 2872 6574 7279 5f74 696d 656f 7574  ut(retry_timeout
-0003e100: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0003e110: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-0003e120: 2020 2020 2020 2072 6574 7572 6e20 2765         return 'e
-0003e130: 7272 6f72 272c 650a 2020 2020 2020 2020  rror',e.        
-0003e140: 6966 206e 6f74 206e 6577 6275 663a 2072  if not newbuf: r
-0003e150: 6574 7572 6e20 5472 7565 2c4e 6f6e 6520  eturn True,None 
-0003e160: 236d 6179 6265 2073 6f6d 6574 6869 6e67  #maybe something
-0003e170: 2073 6f63 6b65 7420 6973 7375 652e 0a20   socket issue.. 
-0003e180: 2020 2020 2020 2062 7566 202b 3d20 6e65         buf += ne
-0003e190: 7762 7566 0a20 2020 2020 2020 2063 6f75  wbuf.        cou
-0003e1a0: 6e74 202d 3d20 6c65 6e28 6e65 7762 7566  nt -= len(newbuf
-0003e1b0: 290a 2020 2020 6966 2070 726f 6772 6573  ).    if progres
-0003e1c0: 733a 0a20 2020 2020 2020 2069 6620 7072  s:.        if pr
-0003e1d0: 6f67 7265 7373 5f6d 7367 3a0a 2020 2020  ogress_msg:.    
-0003e1e0: 2020 2020 2020 2020 7072 696e 7466 2827          printf('
-0003e1f0: 5c72 7b7d 205b 2031 3030 2025 205d 5c6e  \r{} [ 100 % ]\n
-0003e200: 272e 666f 726d 6174 2870 726f 6772 6573  '.format(progres
-0003e210: 735f 6d73 6729 2c6c 6f67 3d6c 6f67 2c64  s_msg),log=log,d
-0003e220: 6972 6563 743d 5472 7565 290a 2020 2020  irect=True).    
-0003e230: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003e240: 2020 2020 2020 7072 696e 7466 2827 5c72        printf('\r
-0003e250: 446f 776e 6c6f 6164 696e 672e 2e2e 205b  Downloading... [
-0003e260: 2031 3030 2025 205d 5c6e 272c 6c6f 673d   100 % ]\n',log=
-0003e270: 6c6f 672c 6469 7265 6374 3d54 7275 6529  log,direct=True)
-0003e280: 0a20 2020 2072 6574 7572 6e20 5472 7565  .    return True
-0003e290: 2c62 7566 0a0a 6465 6620 4461 7461 3242  ,buf..def Data2B
-0003e2a0: 7974 6553 7472 696e 6728 6461 7461 2c70  yteString(data,p
-0003e2b0: 726f 746f 636f 6c3d 3229 3a0a 2020 2020  rotocol=2):.    
-0003e2c0: 7472 793a 0a20 2020 2020 2020 2072 6574  try:.        ret
-0003e2d0: 7572 6e20 5472 7565 2c70 6963 6b6c 652e  urn True,pickle.
-0003e2e0: 6475 6d70 7328 6461 7461 2c70 726f 746f  dumps(data,proto
-0003e2f0: 636f 6c3d 7072 6f74 6f63 6f6c 2920 2320  col=protocol) # 
-0003e300: 636f 6d6d 6f6e 2032 2e78 2026 2033 2e78  common 2.x & 3.x
-0003e310: 2076 6572 7369 6f6e 203a 2070 726f 746f   version : proto
-0003e320: 636f 6c3d 320a 2020 2020 6578 6365 7074  col=2.    except
-0003e330: 3a0a 2020 2020 2020 2020 7472 793a 0a20  :.        try:. 
-0003e340: 2020 2020 2020 2020 2020 2023 203c 636c             # <cl
-0003e350: 6173 7320 274b 6579 4572 726f 7227 3e20  ass 'KeyError'> 
-0003e360: 7468 656e 2074 7279 2061 6761 696e 2061  then try again a
-0003e370: 6674 6572 2066 696c 7465 7220 6f75 7420  fter filter out 
-0003e380: 7079 7468 6f6e 2064 6566 6175 6c74 2065  python default e
-0003e390: 6e67 696e 650a 2020 2020 2020 2020 2020  ngine.          
-0003e3a0: 2020 2320 6d61 7962 6520 756e 6b6e 6f77    # maybe unknow
-0003e3b0: 6e20 6368 6172 6163 7465 7220 696e 2074  n character in t
-0003e3c0: 6865 2064 6174 610a 2020 2020 2020 2020  he data.        
-0003e3d0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
-0003e3e0: 7069 636b 6c65 2e64 756d 7073 2865 7661  pickle.dumps(eva
-0003e3f0: 6c28 7374 7228 6461 7461 2929 2c70 726f  l(str(data)),pro
-0003e400: 746f 636f 6c3d 7072 6f74 6f63 6f6c 2920  tocol=protocol) 
-0003e410: 2320 636f 6d6d 6f6e 2032 2e78 2026 2033  # common 2.x & 3
-0003e420: 2e78 2076 6572 7369 6f6e 203a 2070 726f  .x version : pro
-0003e430: 746f 636f 6c3d 320a 2020 2020 2020 2020  tocol=2.        
-0003e440: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
-0003e450: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-0003e460: 2c73 7973 2e65 7863 5f69 6e66 6f28 295b  ,sys.exc_info()[
-0003e470: 305d 0a0a 6465 6620 4279 7465 5374 7269  0]..def ByteStri
-0003e480: 6e67 3244 6174 6128 6461 7461 293a 0a20  ng2Data(data):. 
-0003e490: 2020 2023 2049 6620 6e6f 7420 7069 636b     # If not pick
-0003e4a0: 6c65 2064 6174 6120 7468 656e 2072 6574  le data then ret
-0003e4b0: 7572 6e20 6f72 6967 696e 616c 2064 6174  urn original dat
-0003e4c0: 612c 2074 6861 7420 6973 2072 6561 6c20  a, that is real 
-0003e4d0: 6461 7461 0a20 2020 2023 2069 6620 7069  data.    # if pi
-0003e4e0: 636b 6c65 2064 6174 6120 7468 656e 2063  ckle data then c
-0003e4f0: 6f6e 7665 7274 2074 6f20 6461 7461 0a20  onvert to data. 
-0003e500: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0003e510: 7265 7475 726e 2070 6963 6b6c 652e 6c6f  return pickle.lo
-0003e520: 6164 7328 6461 7461 290a 2020 2020 6578  ads(data).    ex
-0003e530: 6365 7074 3a0a 2020 2020 2020 2020 7265  cept:.        re
-0003e540: 7475 726e 2064 6174 610a 0a64 6566 2070  turn data..def p
-0003e550: 6163 6b65 745f 656e 6328 6461 7461 2c6b  acket_enc(data,k
-0003e560: 6579 3d27 6b67 272c 656e 633d 4661 6c73  ey='kg',enc=Fals
-0003e570: 6529 3a0a 2020 2020 6e6b 6579 3d42 7974  e):.    nkey=Byt
-0003e580: 6573 3249 6e74 286b 6579 2c65 6e63 6f64  es2Int(key,encod
-0003e590: 653d 2775 7466 2d38 272c 6465 6661 756c  e='utf-8',defaul
-0003e5a0: 743d 276f 7267 2729 0a20 2020 206f 6b2c  t='org').    ok,
-0003e5b0: 7064 6174 613d 4461 7461 3242 7974 6553  pdata=Data2ByteS
-0003e5c0: 7472 696e 6728 6461 7461 290a 2020 2020  tring(data).    
-0003e5d0: 6966 206e 6f74 206f 6b3a 2072 6574 7572  if not ok: retur
-0003e5e0: 6e20 4661 6c73 652c 7064 6174 610a 2020  n False,pdata.  
-0003e5f0: 2020 6461 7461 5f74 7970 653d 4279 7465    data_type=Byte
-0003e600: 7328 7479 7065 2864 6174 6129 2e5f 5f6e  s(type(data).__n
-0003e610: 616d 655f 5f5b 305d 290a 2020 2020 6966  ame__[0]).    if
-0003e620: 2065 6e63 2061 6e64 206b 6579 3a0a 2020   enc and key:.  
-0003e630: 2020 2020 2020 2320 656e 636f 6465 2063        # encode c
-0003e640: 6f64 6520 6865 7265 0a20 2020 2020 2020  ode here.       
-0003e650: 2023 656e 635f 7466 3d42 7974 6573 2827   #enc_tf=Bytes('
-0003e660: 7427 2920 2320 4e6f 7720 6e6f 7420 636f  t') # Now not co
-0003e670: 6465 2068 6572 652e 2053 6f2c 2065 7665  de here. So, eve
-0003e680: 7279 7468 696e 6720 746f 2027 6627 0a20  rything to 'f'. 
-0003e690: 2020 2020 2020 2023 7064 6174 613d 656e         #pdata=en
-0003e6a0: 636f 6465 286b 6579 2c70 6461 7461 290a  code(key,pdata).
-0003e6b0: 2020 2020 2020 2020 656e 635f 7466 3d42          enc_tf=B
-0003e6c0: 7974 6573 2827 6627 290a 2020 2020 656c  ytes('f').    el
-0003e6d0: 7365 3a0a 2020 2020 2020 2020 656e 635f  se:.        enc_
-0003e6e0: 7466 3d42 7974 6573 2827 6627 290a 2020  tf=Bytes('f').  
-0003e6f0: 2020 6e64 6174 613d 7374 7275 6374 2e70    ndata=struct.p
-0003e700: 6163 6b28 273e 4973 7349 272c 6c65 6e28  ack('>IssI',len(
-0003e710: 7064 6174 6129 2c64 6174 615f 7479 7065  pdata),data_type
-0003e720: 2c65 6e63 5f74 662c 6e6b 6579 292b 7064  ,enc_tf,nkey)+pd
-0003e730: 6174 610a 2020 2020 7265 7475 726e 2054  ata.    return T
-0003e740: 7275 652c 6e64 6174 610a 2020 2020 2020  rue,ndata.      
-0003e750: 2020 0a64 6566 2070 6163 6b65 745f 6865    .def packet_he
-0003e760: 6164 2873 6f63 6b2c 6b65 793d 276b 6727  ad(sock,key='kg'
-0003e770: 2c72 6574 7279 3d30 2c72 6574 7279 5f74  ,retry=0,retry_t
-0003e780: 696d 656f 7574 3d35 2c6b 6565 705f 7265  imeout=5,keep_re
-0003e790: 7472 793d 4661 6c73 652c 7469 6d65 6f75  try=False,timeou
-0003e7a0: 743d 3129 3a0a 2020 2020 2347 6574 2048  t=1):.    #Get H
-0003e7b0: 6561 6465 720a 2020 2020 236b 6565 705f  eader.    #keep_
-0003e7c0: 7265 7472 7920 3a54 7275 653a 2069 6620  retry :True: if 
-0003e7d0: 636c 6173 6564 2073 6f63 6b65 7420 6275  clased socket bu
-0003e7e0: 7420 7761 6974 0a20 2020 2070 683d 5449  t wait.    ph=TI
-0003e7f0: 4d45 2829 0a20 2020 2069 6620 2872 6574  ME().    if (ret
-0003e800: 7279 202a 2072 6574 7279 5f74 696d 656f  ry * retry_timeo
-0003e810: 7574 2920 3e20 7469 6d65 6f75 743a 0a20  ut) > timeout:. 
-0003e820: 2020 2020 2020 2074 696d 656f 7574 3d72         timeout=r
-0003e830: 6574 7279 202a 2072 6574 7279 5f74 696d  etry * retry_tim
-0003e840: 656f 7574 0a20 2020 2065 6c73 653a 0a20  eout.    else:. 
-0003e850: 2020 2020 2020 2069 6620 7265 7472 795f         if retry_
-0003e860: 7469 6d65 6f75 7420 3c3d 2030 3a20 7265  timeout <= 0: re
-0003e870: 7472 795f 7469 6d65 6f75 743d 350a 2020  try_timeout=5.  
-0003e880: 2020 2020 2020 7265 7472 793d 2874 696d        retry=(tim
-0003e890: 656f 7574 2f2f 7265 7472 795f 7469 6d65  eout//retry_time
-0003e8a0: 6f75 7429 2b31 0a20 2020 2077 6869 6c65  out)+1.    while
-0003e8b0: 2054 7275 653a 0a20 2020 2020 2020 2069   True:.        i
-0003e8c0: 6620 436c 6f73 6564 536f 636b 6574 2873  f ClosedSocket(s
-0003e8d0: 6f63 6b29 3a0a 2020 2020 2020 2020 2020  ock):.          
-0003e8e0: 2020 6966 2072 6574 7279 203c 3d20 303a    if retry <= 0:
-0003e8f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003e900: 2072 6574 7572 6e20 4661 6c73 652c 2741   return False,'A
-0003e910: 6c72 6561 6479 2063 6c6f 7365 6420 7468  lready closed th
-0003e920: 6520 736f 636b 6574 270a 2020 2020 2020  e socket'.      
-0003e930: 2020 2020 2020 7265 7472 792d 3d31 0a20        retry-=1. 
-0003e940: 2020 2020 2020 2020 2020 2074 696d 652e             time.
-0003e950: 736c 6565 7028 7265 7472 795f 7469 6d65  sleep(retry_time
-0003e960: 6f75 7429 0a20 2020 2020 2020 2020 2020  out).           
-0003e970: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-0003e980: 2020 6f6b 2c68 6561 643d 7061 636b 6574    ok,head=packet
-0003e990: 5f72 6563 6569 7665 5f61 6c6c 2873 6f63  _receive_all(soc
-0003e9a0: 6b2c 3130 2c72 6574 7279 3d72 6574 7279  k,10,retry=retry
-0003e9b0: 2c72 6574 7279 5f74 696d 656f 7574 3d72  ,retry_timeout=r
-0003e9c0: 6574 7279 5f74 696d 656f 7574 290a 2020  etry_timeout).  
-0003e9d0: 2020 2020 2020 6966 206b 7263 286f 6b2c        if krc(ok,
-0003e9e0: 6368 6b3d 5472 7565 293a 0a20 2020 2020  chk=True):.     
-0003e9f0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-0003ea00: 2020 2020 2020 2020 2020 2020 7374 5f68              st_h
-0003ea10: 6561 643d 7374 7275 6374 2e75 6e70 6163  ead=struct.unpac
-0003ea20: 6b28 273e 4973 7349 272c 4279 7465 7328  k('>IssI',Bytes(
-0003ea30: 6865 6164 2929 0a20 2020 2020 2020 2020  head)).         
-0003ea40: 2020 2020 2020 2069 6620 7374 5f68 6561         if st_hea
-0003ea50: 645b 335d 203d 3d20 4279 7465 7332 496e  d[3] == Bytes2In
-0003ea60: 7428 6b65 792c 656e 636f 6465 3d27 7574  t(key,encode='ut
-0003ea70: 662d 3827 2c64 6566 6175 6c74 3d27 6f72  f-8',default='or
-0003ea80: 6727 293a 0a20 2020 2020 2020 2020 2020  g'):.           
-0003ea90: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003eaa0: 5472 7565 2c73 745f 6865 6164 5b30 5d2c  True,st_head[0],
-0003eab0: 7374 5f68 6561 645b 315d 2c73 745f 6865  st_head[1],st_he
-0003eac0: 6164 5b32 5d0a 2020 2020 2020 2020 2020  ad[2].          
-0003ead0: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-0003eae0: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
-0003eaf0: 2020 2020 2020 2069 6620 7068 2e4f 7574         if ph.Out
-0003eb00: 2874 696d 656f 7574 293a 2062 7265 616b  (timeout): break
-0003eb10: 0a20 2020 2020 2020 2074 696d 652e 736c  .        time.sl
-0003eb20: 6565 7028 3129 0a20 2020 2072 6574 7572  eep(1).    retur
-0003eb30: 6e20 4661 6c73 652c 2746 6169 6c20 666f  n False,'Fail fo
-0003eb40: 7220 7265 6164 2068 6561 6465 7228 7b7d  r read header({}
-0003eb50: 2927 2e66 6f72 6d61 7428 6865 6164 292c  )'.format(head),
-0003eb60: 4e6f 6e65 2c4e 6f6e 650a 0a64 6566 2070  None,None..def p
-0003eb70: 6163 6b65 745f 6465 6328 6461 7461 2c65  acket_dec(data,e
-0003eb80: 6e63 2c6b 6579 3d27 6b67 2729 3a0a 2020  nc,key='kg'):.  
-0003eb90: 2020 236f 6b2c 7369 7a65 2c64 6174 615f    #ok,size,data_
-0003eba0: 7479 7065 2c65 6e63 3d70 6163 6b65 745f  type,enc=packet_
-0003ebb0: 6865 6164 2873 6f63 6b29 0a20 2020 2023  head(sock).    #
-0003ebc0: 6f6b 2c64 6174 613d 7061 636b 6574 5f72  ok,data=packet_r
-0003ebd0: 6563 6569 7665 5f61 6c6c 2873 6f63 6b2c  eceive_all(sock,
-0003ebe0: 7369 7a65 2c2e 2e2e 2e29 0a20 2020 2023  size,....).    #
-0003ebf0: 7265 616c 5f64 6174 613d 7061 636b 6574  real_data=packet
-0003ec00: 5f64 6563 2864 6174 612c 656e 6329 0a20  _dec(data,enc). 
-0003ec10: 2020 2069 6620 656e 6320 3d3d 2027 7427     if enc == 't'
-0003ec20: 3a0a 2020 2020 2020 2020 2320 6465 636f  :.        # deco
-0003ec30: 6465 2063 6f64 6520 6865 7265 0a20 2020  de code here.   
-0003ec40: 2020 2020 2023 2064 6174 613d 6465 636f       # data=deco
-0003ec50: 6465 2864 6174 6129 0a20 2020 2020 2020  de(data).       
-0003ec60: 2070 6173 730a 2020 2020 7265 7475 726e   pass.    return
-0003ec70: 2042 7974 6553 7472 696e 6732 4461 7461   ByteString2Data
-0003ec80: 2864 6174 6129 0a0a 6465 6620 436c 6f73  (data)..def Clos
-0003ec90: 6564 536f 636b 6574 2873 6f63 6b29 3a0a  edSocket(sock):.
-0003eca0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0003ecb0: 2023 2074 6869 7320 7769 6c6c 2074 7279   # this will try
-0003ecc0: 2074 6f20 7265 6164 2062 7974 6573 2077   to read bytes w
-0003ecd0: 6974 686f 7574 2062 6c6f 636b 696e 670a  ithout blocking.
-0003ece0: 2020 2020 2020 2020 2320 616e 6420 616c          # and al
-0003ecf0: 736f 2077 6974 686f 7574 2072 656d 6f76  so without remov
-0003ed00: 696e 6720 7468 656d 2066 726f 6d20 6275  ing them from bu
-0003ed10: 6666 6572 2028 7065 656b 206f 6e6c 7929  ffer (peek only)
-0003ed20: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-0003ed30: 736f 636b 2e72 6563 7628 3136 2c20 736f  sock.recv(16, so
-0003ed40: 636b 6574 2e4d 5347 5f44 4f4e 5457 4149  cket.MSG_DONTWAI
-0003ed50: 5420 7c20 736f 636b 6574 2e4d 5347 5f50  T | socket.MSG_P
-0003ed60: 4545 4b29 0a20 2020 2020 2020 2069 6620  EEK).        if 
-0003ed70: 6c65 6e28 6461 7461 2920 3d3d 2030 3a0a  len(data) == 0:.
-0003ed80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0003ed90: 726e 2054 7275 650a 2020 2020 6578 6365  rn True.    exce
-0003eda0: 7074 2042 6c6f 636b 696e 6749 4f45 7272  pt BlockingIOErr
-0003edb0: 6f72 3a0a 2020 2020 2020 2020 7265 7475  or:.        retu
-0003edc0: 726e 2046 616c 7365 2020 2320 736f 636b  rn False  # sock
-0003edd0: 6574 2069 7320 6f70 656e 2061 6e64 2072  et is open and r
-0003ede0: 6561 6469 6e67 2066 726f 6d20 6974 2077  eading from it w
-0003edf0: 6f75 6c64 2062 6c6f 636b 0a20 2020 2065  ould block.    e
-0003ee00: 7863 6570 7420 436f 6e6e 6563 7469 6f6e  xcept Connection
-0003ee10: 5265 7365 7445 7272 6f72 3a0a 2020 2020  ResetError:.    
-0003ee20: 2020 2020 7265 7475 726e 2054 7275 6520      return True 
-0003ee30: 2023 2073 6f63 6b65 7420 7761 7320 636c   # socket was cl
-0003ee40: 6f73 6564 2066 6f72 2073 6f6d 6520 6f74  osed for some ot
-0003ee50: 6865 7220 7265 6173 6f6e 0a20 2020 2065  her reason.    e
-0003ee60: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-0003ee70: 6173 2065 3a20 2375 6e65 7870 6563 7465  as e: #unexpecte
-0003ee80: 6420 6578 6365 7074 696f 6e20 7768 656e  d exception when
-0003ee90: 2063 6865 636b 696e 6720 6966 2061 2073   checking if a s
-0003eea0: 6f63 6b65 7420 6973 2063 6c6f 7365 640a  ocket is closed.
-0003eeb0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-0003eec0: 616c 7365 0a20 2020 2072 6574 7572 6e20  alse.    return 
-0003eed0: 4661 6c73 650a 0a64 6566 2052 656d 6f76  False..def Remov
-0003eee0: 654e 6577 6c69 6e65 2873 7263 2c6d 6f64  eNewline(src,mod
-0003eef0: 653d 2765 6467 6527 2c6e 6577 6c69 6e65  e='edge',newline
-0003ef00: 3d27 5c6e 272c 6279 7465 3d4e 6f6e 6529  ='\n',byte=None)
-0003ef10: 3a0a 2020 2020 6966 2069 7369 6e73 7461  :.    if isinsta
-0003ef20: 6e63 6528 6279 7465 2c62 6f6f 6c29 3a0a  nce(byte,bool):.
-0003ef30: 2020 2020 2020 2020 6966 2062 7974 653a          if byte:
-0003ef40: 0a20 2020 2020 2020 2020 2020 2073 7263  .            src
-0003ef50: 3d42 7974 6573 2873 7263 290a 2020 2020  =Bytes(src).    
-0003ef60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003ef70: 2020 2020 2020 7372 633d 5374 7228 7372        src=Str(sr
-0003ef80: 6329 0a20 2020 2073 7263 5f61 3d53 706c  c).    src_a=Spl
-0003ef90: 6974 2873 7263 2c6e 6577 6c69 6e65 2c64  it(src,newline,d
-0003efa0: 6566 6175 6c74 3d46 616c 7365 2c6c 6973  efault=False,lis
-0003efb0: 746f 6e6c 793d 4661 6c73 6529 0a20 2020  tonly=False).   
-0003efc0: 2069 6620 7372 635f 6120 6973 2046 616c   if src_a is Fal
-0003efd0: 7365 3a0a 2020 2020 2020 2020 7265 7475  se:.        retu
-0003efe0: 726e 2073 7263 0a20 2020 2069 6620 6d6f  rn src.    if mo
-0003eff0: 6465 2069 6e20 5b27 6564 6765 272c 2762  de in ['edge','b
-0003f000: 6f74 6827 5d3a 0a20 2020 2020 2020 2069  oth']:.        i
-0003f010: 6620 6e6f 7420 7372 635f 615b 305d 2e73  f not src_a[0].s
-0003f020: 7472 6970 2829 2061 6e64 206e 6f74 2073  trip() and not s
-0003f030: 7263 5f61 5b2d 315d 2e73 7472 6970 2829  rc_a[-1].strip()
-0003f040: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0003f050: 7475 726e 204a 6f69 6e28 7372 635f 615b  turn Join(src_a[
-0003f060: 313a 2d31 5d2c 7379 6d62 6f6c 3d6e 6577  1:-1],symbol=new
-0003f070: 6c69 6e65 290a 2020 2020 2020 2020 656c  line).        el
-0003f080: 6966 206e 6f74 2073 7263 5f61 5b30 5d2e  if not src_a[0].
-0003f090: 7374 7269 7028 293a 0a20 2020 2020 2020  strip():.       
-0003f0a0: 2020 2020 2072 6574 7572 6e20 4a6f 696e       return Join
-0003f0b0: 2873 7263 5f61 5b31 3a5d 2c73 796d 626f  (src_a[1:],symbo
-0003f0c0: 6c3d 6e65 776c 696e 6529 0a20 2020 2020  l=newline).     
-0003f0d0: 2020 2065 6c69 6620 6e6f 7420 7372 635f     elif not src_
-0003f0e0: 615b 2d31 5d2e 7374 7269 7028 293a 0a20  a[-1].strip():. 
-0003f0f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003f100: 6e20 4a6f 696e 2873 7263 5f61 5b3a 2d31  n Join(src_a[:-1
-0003f110: 5d2c 7379 6d62 6f6c 3d6e 6577 6c69 6e65  ],symbol=newline
-0003f120: 290a 2020 2020 656c 6966 206d 6f64 6520  ).    elif mode 
-0003f130: 696e 205b 2766 6972 7374 272c 2773 7461  in ['first','sta
-0003f140: 7274 272c 305d 3a0a 2020 2020 2020 2020  rt',0]:.        
-0003f150: 6966 206e 6f74 2073 7263 5f61 5b30 5d2e  if not src_a[0].
-0003f160: 7374 7269 7028 293a 0a20 2020 2020 2020  strip():.       
-0003f170: 2020 2020 2072 6574 7572 6e20 4a6f 696e       return Join
-0003f180: 2873 7263 5f61 5b31 3a5d 2c73 796d 626f  (src_a[1:],symbo
-0003f190: 6c3d 6e65 776c 696e 6529 0a20 2020 2065  l=newline).    e
-0003f1a0: 6c69 6620 6d6f 6465 2069 6e20 5b27 656e  lif mode in ['en
-0003f1b0: 6427 2c27 6c61 7374 272c 2d31 5d3a 0a20  d','last',-1]:. 
-0003f1c0: 2020 2020 2020 2069 6620 6e6f 7420 7372         if not sr
-0003f1d0: 635f 615b 2d31 5d2e 7374 7269 7028 293a  c_a[-1].strip():
-0003f1e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0003f1f0: 7572 6e20 4a6f 696e 2873 7263 5f61 5b3a  urn Join(src_a[:
-0003f200: 2d31 5d2c 7379 6d62 6f6c 3d6e 6577 6c69  -1],symbol=newli
-0003f210: 6e65 290a 2020 2020 656c 6966 206d 6f64  ne).    elif mod
-0003f220: 6520 696e 205b 272a 272c 2761 6c6c 272c  e in ['*','all',
-0003f230: 2765 7665 7279 7468 696e 6727 5d3a 0a20  'everything']:. 
-0003f240: 2020 2020 2020 2072 6574 7572 6e20 4a6f         return Jo
-0003f250: 696e 2873 7263 5f61 2c73 796d 626f 6c3d  in(src_a,symbol=
-0003f260: 2727 290a 2020 2020 7265 7475 726e 2073  '').    return s
-0003f270: 7263 0a0a 6465 6620 6361 7428 6669 6c65  rc..def cat(file
-0003f280: 6e61 6d65 2c2a 2a6f 7074 7329 3a0a 2020  name,**opts):.  
-0003f290: 2020 6279 7465 3d6f 7074 732e 6765 7428    byte=opts.get(
-0003f2a0: 2762 7974 6527 2c46 616c 7365 290a 2020  'byte',False).  
-0003f2b0: 2020 6e65 776c 696e 653d 6f70 7473 2e67    newline=opts.g
-0003f2c0: 6574 2827 6e65 776c 696e 6527 2c27 5c6e  et('newline','\n
-0003f2d0: 2729 0a20 2020 2072 6561 645f 6669 7273  ').    read_firs
-0003f2e0: 746c 696e 653d 6f70 7473 2e67 6574 2827  tline=opts.get('
-0003f2f0: 7265 6164 5f66 6972 7374 6c69 6e65 272c  read_firstline',
-0003f300: 6f70 7473 2e67 6574 2827 6865 6164 272c  opts.get('head',
-0003f310: 6f70 7473 2e67 6574 2827 6865 6164 5f6c  opts.get('head_l
-0003f320: 696e 6527 2c46 616c 7365 2929 290a 2020  ine',False))).  
-0003f330: 2020 6465 6661 756c 743d 6f70 7473 2e67    default=opts.g
-0003f340: 6574 2827 6465 6661 756c 7427 2c46 616c  et('default',Fal
-0003f350: 7365 290a 2020 2020 6e6f 5f65 6467 653d  se).    no_edge=
-0003f360: 6f70 7473 2e67 6574 2827 6e6f 5f65 6467  opts.get('no_edg
-0003f370: 6527 2c46 616c 7365 290a 2020 2020 6e6f  e',False).    no
-0003f380: 5f65 6e64 5f6e 6577 6c69 6e65 3d6f 7074  _end_newline=opt
-0003f390: 732e 6765 7428 276e 6f5f 656e 645f 6e65  s.get('no_end_ne
-0003f3a0: 776c 696e 6527 2c46 616c 7365 290a 2020  wline',False).  
-0003f3b0: 2020 6669 6c65 5f6f 6e6c 793d 6f70 7473    file_only=opts
-0003f3c0: 2e67 6574 2827 6669 6c65 5f6f 6e6c 7927  .get('file_only'
-0003f3d0: 2c6f 7074 732e 6765 7428 2766 696c 656f  ,opts.get('fileo
-0003f3e0: 6e6c 7927 2c54 7275 6529 290a 2020 2020  nly',True)).    
-0003f3f0: 6e6f 5f61 6c6c 5f6e 6577 6c69 6e65 3d6f  no_all_newline=o
-0003f400: 7074 732e 6765 7428 276e 6f5f 616c 6c5f  pts.get('no_all_
-0003f410: 6e65 776c 696e 6527 2c46 616c 7365 290a  newline',False).
-0003f420: 2020 2020 6e6f 5f66 6972 7374 5f6e 6577      no_first_new
-0003f430: 6c69 6e65 3d6f 7074 732e 6765 7428 276e  line=opts.get('n
-0003f440: 6f5f 6669 7273 745f 6e65 776c 696e 6527  o_first_newline'
-0003f450: 2c46 616c 7365 290a 2020 2020 6c6f 673d  ,False).    log=
-0003f460: 6f70 7473 2e67 6574 2827 6c6f 6727 290a  opts.get('log').
-0003f470: 0a20 2020 2069 6620 4973 4e6f 6e65 2866  .    if IsNone(f
-0003f480: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
-0003f490: 2020 7072 696e 7466 2827 4669 6c65 6e61    printf('Filena
-0003f4a0: 6d65 2069 7320 4e6f 6e65 272c 6c6f 673d  me is None',log=
-0003f4b0: 6c6f 672c 6d6f 6465 3d27 6427 290a 2020  log,mode='d').  
-0003f4c0: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-0003f4d0: 6175 6c74 0a20 2020 2069 6620 6f73 2e70  ault.    if os.p
-0003f4e0: 6174 682e 6973 6469 7228 6669 6c65 6e61  ath.isdir(filena
-0003f4f0: 6d65 293a 0a20 2020 2020 2020 2070 7269  me):.        pri
-0003f500: 6e74 6628 277b 7d20 6973 2061 2064 6972  ntf('{} is a dir
-0003f510: 6563 746f 7279 272e 666f 726d 6174 2866  ectory'.format(f
-0003f520: 696c 656e 616d 6529 2c6c 6f67 3d6c 6f67  ilename),log=log
-0003f530: 2c6d 6f64 653d 2764 2729 0a20 2020 2020  ,mode='d').     
-0003f540: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-0003f550: 740a 2020 2020 6966 206e 6f74 206f 732e  t.    if not os.
-0003f560: 7061 7468 2e65 7869 7374 7328 6669 6c65  path.exists(file
-0003f570: 6e61 6d65 293a 0a20 2020 2020 2020 2070  name):.        p
-0003f580: 7269 6e74 6628 277b 7d20 6e6f 7420 666f  rintf('{} not fo
-0003f590: 756e 6427 2e66 6f72 6d61 7428 6669 6c65  und'.format(file
-0003f5a0: 6e61 6d65 292c 6c6f 673d 6c6f 672c 6d6f  name),log=log,mo
-0003f5b0: 6465 3d27 6427 290a 2020 2020 2020 2020  de='d').        
-0003f5c0: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-0003f5d0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0003f5e0: 6966 2072 6561 645f 6669 7273 746c 696e  if read_firstlin
-0003f5f0: 653a 2020 2320 5265 6164 6c69 6e65 0a20  e:  # Readline. 
-0003f600: 2020 2020 2020 2020 2020 2077 6974 6820             with 
-0003f610: 6f70 656e 2866 696c 656e 616d 652c 2772  open(filename,'r
-0003f620: 6227 2920 6173 2066 3a0a 2020 2020 2020  b') as f:.      
-0003f630: 2020 2020 2020 2020 2020 6461 7461 3d66            data=f
-0003f640: 2e72 6561 646c 696e 6528 290a 2020 2020  .readline().    
-0003f650: 2020 2020 656c 6966 206e 6f74 2066 696c      elif not fil
-0003f660: 655f 6f6e 6c79 3a20 2320 5265 6164 2073  e_only: # Read s
-0003f670: 7065 6369 616c 2066 696c 650a 2020 2020  pecial file.    
-0003f680: 2020 2020 2020 2020 6461 7461 3d6f 732e          data=os.
-0003f690: 6f70 656e 2866 696c 656e 616d 652c 6f73  open(filename,os
-0003f6a0: 2e4f 5f52 444f 4e4c 5929 0a20 2020 2020  .O_RDONLY).     
-0003f6b0: 2020 2020 2020 206f 732e 636c 6f73 6528         os.close(
-0003f6c0: 6461 7461 290a 2020 2020 2020 2020 656c  data).        el
-0003f6d0: 7365 3a20 2320 5265 6164 206e 6f72 6d61  se: # Read norma
-0003f6e0: 6c20 6669 6c65 0a20 2020 2020 2020 2020  l file.         
-0003f6f0: 2020 2077 6974 6820 6f70 656e 2866 696c     with open(fil
-0003f700: 656e 616d 652c 2772 6227 2920 6173 2066  ename,'rb') as f
-0003f710: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003f720: 2020 6461 7461 3d66 2e72 6561 6428 290a    data=f.read().
-0003f730: 2020 2020 2020 2020 6966 206e 6f74 2062          if not b
-0003f740: 7974 653a 0a20 2020 2020 2020 2020 2020  yte:.           
-0003f750: 6461 7461 3d53 7472 2864 6174 6129 0a20  data=Str(data). 
-0003f760: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-0003f770: 2020 2070 7269 6e74 6628 7379 732e 6578     printf(sys.ex
-0003f780: 635f 696e 666f 2829 5b30 5d2c 6c6f 673d  c_info()[0],log=
-0003f790: 6c6f 672c 6d6f 6465 3d27 6427 290a 2020  log,mode='d').  
-0003f7a0: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-0003f7b0: 6175 6c74 0a20 2020 2072 6574 7572 6e20  ault.    return 
-0003f7c0: 5265 6d6f 7665 4e65 776c 696e 6528 6461  RemoveNewline(da
-0003f7d0: 7461 2c6d 6f64 653d 2765 6467 6527 2069  ta,mode='edge' i
-0003f7e0: 6620 6e6f 5f65 6467 6520 656c 7365 2027  f no_edge else '
-0003f7f0: 656e 6427 2069 6620 6e6f 5f65 6e64 5f6e  end' if no_end_n
-0003f800: 6577 6c69 6e65 2065 6c73 6520 2766 6972  ewline else 'fir
-0003f810: 7374 2720 6966 206e 6f5f 6669 7273 745f  st' if no_first_
-0003f820: 6e65 776c 696e 6520 656c 7365 2027 616c  newline else 'al
-0003f830: 6c27 2069 6620 6e6f 5f61 6c6c 5f6e 6577  l' if no_all_new
-0003f840: 6c69 6e65 2065 6c73 6520 4e6f 6e65 2c6e  line else None,n
-0003f850: 6577 6c69 6e65 3d6e 6577 6c69 6e65 2c62  ewline=newline,b
-0003f860: 7974 653d 6279 7465 290a 0a64 6566 2043  yte=byte)..def C
-0003f870: 6f6d 7072 6573 7328 6461 7461 2c6d 6f64  ompress(data,mod
-0003f880: 653d 2767 7a69 7027 293a 0a20 2020 2074  e='gzip'):.    t
-0003f890: 7279 3a0a 2020 2020 2020 2020 6966 2069  ry:.        if i
-0003f8a0: 7369 6e73 7461 6e63 6528 6461 7461 2c73  sinstance(data,s
-0003f8b0: 7472 2920 616e 6420 6f73 2e70 6174 682e  tr) and os.path.
-0003f8c0: 6973 6669 6c65 2864 6174 6129 3a0a 2020  isfile(data):.  
-0003f8d0: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-0003f8e0: 7065 6e28 6461 7461 2c27 7262 2729 2061  pen(data,'rb') a
-0003f8f0: 7320 663a 0a20 2020 2020 2020 2020 2020  s f:.           
-0003f900: 2020 2020 2064 6174 613d 662e 7265 6164       data=f.read
-0003f910: 2829 0a20 2020 2020 2020 2069 6620 6d6f  ().        if mo
-0003f920: 6465 203d 3d20 276c 7a34 273a 0a20 2020  de == 'lz4':.   
-0003f930: 2020 2020 2020 2020 2049 6d70 6f72 7428           Import(
-0003f940: 2766 726f 6d20 6c7a 3420 696d 706f 7274  'from lz4 import
-0003f950: 2066 7261 6d65 2729 0a20 2020 2020 2020   frame').       
-0003f960: 2020 2020 2072 6574 7572 6e20 6672 616d       return fram
-0003f970: 652e 636f 6d70 7265 7373 2864 6174 6129  e.compress(data)
-0003f980: 0a20 2020 2020 2020 2065 6c69 6620 6d6f  .        elif mo
-0003f990: 6465 203d 3d20 2762 7a32 273a 0a20 2020  de == 'bz2':.   
-0003f9a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003f9b0: 627a 322e 636f 6d70 7265 7373 2864 6174  bz2.compress(dat
-0003f9c0: 6129 0a20 2020 2020 2020 2065 6c69 6620  a).        elif 
-0003f9d0: 6d6f 6465 203d 3d20 2767 7a69 7027 3a0a  mode == 'gzip':.
-0003f9e0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0003f9f0: 726e 2067 7a69 702e 636f 6d70 7265 7373  rn gzip.compress
-0003fa00: 2864 6174 612c 636f 6d70 7265 7373 6c65  (data,compressle
-0003fa10: 7665 6c3d 3929 2023 6465 636f 6d70 7265  vel=9) #decompre
-0003fa20: 7373 2864 6174 6129 0a20 2020 2020 2020  ss(data).       
-0003fa30: 2065 6c73 653a 2023 7a6c 6962 0a20 2020   else: #zlib.   
-0003fa40: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003fa50: 7a6c 6962 2e63 6f6d 7072 6573 7328 6461  zlib.compress(da
-0003fa60: 7461 2920 2320 6465 636f 6d70 7265 7373  ta) # decompress
-0003fa70: 2864 6174 6129 0a20 2020 2065 7863 6570  (data).    excep
-0003fa80: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
-0003fa90: 6e20 4661 6c73 650a 0a64 6566 2044 6563  n False..def Dec
-0003faa0: 6f6d 7072 6573 7328 6461 7461 2c6d 6f64  ompress(data,mod
-0003fab0: 653d 2767 7a69 7027 293a 0a20 2020 2074  e='gzip'):.    t
-0003fac0: 7279 3a0a 2020 2020 2020 2020 6966 2069  ry:.        if i
-0003fad0: 7369 6e73 7461 6e63 6528 6461 7461 2c73  sinstance(data,s
-0003fae0: 7472 2920 616e 6420 6f73 2e70 6174 682e  tr) and os.path.
-0003faf0: 6973 6669 6c65 2864 6174 6129 3a0a 2020  isfile(data):.  
-0003fb00: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-0003fb10: 7065 6e28 6461 7461 2c27 7262 2729 2061  pen(data,'rb') a
-0003fb20: 7320 663a 0a20 2020 2020 2020 2020 2020  s f:.           
-0003fb30: 2020 2020 2064 6174 613d 662e 7265 6164       data=f.read
-0003fb40: 2829 0a20 2020 2020 2020 2069 6620 6d6f  ().        if mo
-0003fb50: 6465 203d 3d20 276c 7a34 273a 0a20 2020  de == 'lz4':.   
-0003fb60: 2020 2020 2020 2020 2049 6d70 6f72 7428           Import(
-0003fb70: 2766 726f 6d20 6c7a 3420 696d 706f 7274  'from lz4 import
-0003fb80: 2066 7261 6d65 2729 0a20 2020 2020 2020   frame').       
-0003fb90: 2020 2020 2072 6574 7572 6e20 6672 616d       return fram
-0003fba0: 652e 6465 636f 6d70 7265 7373 2864 6174  e.decompress(dat
-0003fbb0: 6129 0a20 2020 2020 2020 2065 6c69 6620  a).        elif 
-0003fbc0: 6d6f 6465 203d 3d20 2762 7a32 273a 0a20  mode == 'bz2':. 
-0003fbd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003fbe0: 6e20 627a 322e 425a 3244 6563 6f6d 7072  n bz2.BZ2Decompr
-0003fbf0: 6573 736f 7228 292e 6465 636f 6d70 7265  essor().decompre
+0003d710: 6966 2069 7369 6e73 7461 6e63 6528 732c  if isinstance(s,
+0003d720: 7475 706c 6529 3a0a 2020 2020 2020 2020  tuple):.        
+0003d730: 2020 2020 2020 2020 2020 2020 733d 6c69              s=li
+0003d740: 7374 2873 290a 2020 2020 2020 2020 2020  st(s).          
+0003d750: 2020 2020 2020 656c 6966 206e 6f74 2069        elif not i
+0003d760: 7369 6e73 7461 6e63 6528 732c 6c69 7374  sinstance(s,list
+0003d770: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0003d780: 2020 2020 2020 2073 3d5b 735d 0a20 2020         s=[s].   
+0003d790: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+0003d7a0: 6620 6973 696e 7374 616e 6365 2873 2c73  f isinstance(s,s
+0003d7b0: 7472 2920 616e 6420 7379 6d62 6f6c 3a0a  tr) and symbol:.
+0003d7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d7d0: 2020 2020 733d 732e 7370 6c69 7428 7379      s=s.split(sy
+0003d7e0: 6d62 6f6c 290a 2020 2020 2020 2020 2020  mbol).          
+0003d7f0: 2020 656c 6966 2077 616e 7420 696e 205b    elif want in [
+0003d800: 7374 722c 2773 7472 275d 3a0a 2020 2020  str,'str']:.    
+0003d810: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0003d820: 7369 6e73 7461 6e63 6528 732c 286c 6973  sinstance(s,(lis
+0003d830: 742c 7475 706c 6529 293a 0a20 2020 2020  t,tuple)):.     
+0003d840: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0003d850: 3d4a 6f69 6e28 732c 7379 6d62 6f6c 3d73  =Join(s,symbol=s
+0003d860: 796d 626f 6c29 0a20 2020 2020 2020 2020  ymbol).         
+0003d870: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003d880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d890: 2073 3d27 7b7d 272e 666f 726d 6174 2873   s='{}'.format(s
+0003d8a0: 290a 2020 2020 2020 2020 736e 3d74 7970  ).        sn=typ
+0003d8b0: 6528 7329 2e5f 5f6e 616d 655f 5f0a 2020  e(s).__name__.  
+0003d8c0: 2020 2020 2020 666f 7220 6920 696e 2061        for i in a
+0003d8d0: 5b31 3a5d 3a0a 2020 2020 2020 2020 2020  [1:]:.          
+0003d8e0: 2020 6966 2073 6e20 3d3d 2027 7374 7227    if sn == 'str'
+0003d8f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003d900: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0003d910: 692c 286c 6973 742c 7475 706c 6529 293a  i,(list,tuple)):
+0003d920: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d930: 2020 2020 2066 6f72 2078 2069 6e20 693a       for x in i:
+0003d940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d950: 2020 2020 2020 2020 2069 6620 6174 203d           if at =
+0003d960: 3d20 2d31 3a0a 2020 2020 2020 2020 2020  = -1:.          
+0003d970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d980: 2020 733d 4a6f 696e 2873 2c27 7b7d 272e    s=Join(s,'{}'.
+0003d990: 666f 726d 6174 2878 292c 7379 6d62 6f6c  format(x),symbol
+0003d9a0: 3d73 796d 626f 6c29 0a20 2020 2020 2020  =symbol).       
+0003d9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d9c0: 2065 6c69 6620 6174 203d 3d20 303a 0a20   elif at == 0:. 
+0003d9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d9e0: 2020 2020 2020 2020 2020 2073 3d4a 6f69             s=Joi
+0003d9f0: 6e28 277b 7d27 2e66 6f72 6d61 7428 7829  n('{}'.format(x)
+0003da00: 2c73 2c73 796d 626f 6c3d 7379 6d62 6f6c  ,s,symbol=symbol
+0003da10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0003da20: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0003da30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003da40: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+0003da50: 656e 2873 2920 3e20 6174 3a0a 2020 2020  en(s) > at:.    
+0003da60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003da70: 2020 2020 2020 2020 2020 2020 733d 4a6f              s=Jo
+0003da80: 696e 284a 6f69 6e28 735b 3a61 745d 2c27  in(Join(s[:at],'
+0003da90: 7b7d 272e 666f 726d 6174 2878 292c 7379  {}'.format(x),sy
+0003daa0: 6d62 6f6c 3d73 796d 626f 6c29 2c73 5b61  mbol=symbol),s[a
+0003dab0: 743a 5d2c 7379 6d62 6f6c 3d73 796d 626f  t:],symbol=symbo
+0003dac0: 6c29 0a20 2020 2020 2020 2020 2020 2020  l).             
+0003dad0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+0003dae0: 6365 2869 2c28 696e 742c 7374 722c 6279  ce(i,(int,str,by
+0003daf0: 7465 7329 293a 0a20 2020 2020 2020 2020  tes)):.         
+0003db00: 2020 2020 2020 2020 2020 2069 6620 6174             if at
+0003db10: 203d 3d20 2d31 3a0a 2020 2020 2020 2020   == -1:.        
+0003db20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003db30: 733d 4a6f 696e 2873 2c27 7b7d 272e 666f  s=Join(s,'{}'.fo
+0003db40: 726d 6174 2853 7472 2869 2929 2c73 796d  rmat(Str(i)),sym
+0003db50: 626f 6c3d 7379 6d62 6f6c 290a 2020 2020  bol=symbol).    
+0003db60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003db70: 656c 6966 2061 7420 3d3d 2030 3a0a 2020  elif at == 0:.  
+0003db80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003db90: 2020 2020 2020 733d 4a6f 696e 2827 7b7d        s=Join('{}
+0003dba0: 272e 666f 726d 6174 2853 7472 2869 2929  '.format(Str(i))
+0003dbb0: 2c73 2c73 796d 626f 6c3d 7379 6d62 6f6c  ,s,symbol=symbol
+0003dbc0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0003dbd0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0003dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dbf0: 2020 2020 6966 206c 656e 2873 2920 3e20      if len(s) > 
+0003dc00: 6174 3a0a 2020 2020 2020 2020 2020 2020  at:.            
+0003dc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dc20: 733d 4a6f 696e 284a 6f69 6e28 735b 3a61  s=Join(Join(s[:a
+0003dc30: 745d 2c27 7b7d 272e 666f 726d 6174 2853  t],'{}'.format(S
+0003dc40: 7472 2869 2929 2c73 796d 626f 6c3d 7379  tr(i)),symbol=sy
+0003dc50: 6d62 6f6c 292c 735b 6174 3a5d 2c73 796d  mbol),s[at:],sym
+0003dc60: 626f 6c3d 7379 6d62 6f6c 290a 2020 2020  bol=symbol).    
+0003dc70: 2020 2020 2020 2020 656c 6966 2073 6e20          elif sn 
+0003dc80: 3d3d 2027 6c69 7374 273a 0a20 2020 2020  == 'list':.     
+0003dc90: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+0003dca0: 696e 7374 616e 6365 2869 2c73 7472 2920  instance(i,str) 
+0003dcb0: 616e 6420 7379 6d62 6f6c 3a0a 2020 2020  and symbol:.    
+0003dcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dcd0: 693d 692e 7370 6c69 7428 7379 6d62 6f6c  i=i.split(symbol
+0003dce0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0003dcf0: 2020 6966 2061 7420 3d3d 202d 3120 6f72    if at == -1 or
+0003dd00: 2061 7420 3d3d 206c 656e 2873 292d 313a   at == len(s)-1:
+0003dd10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003dd20: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0003dd30: 6365 2869 2c6c 6973 7429 3a0a 2020 2020  ce(i,list):.    
+0003dd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dd50: 2020 2020 733d 732b 690a 2020 2020 2020      s=s+i.      
+0003dd60: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0003dd70: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0003dd80: 2020 2020 2020 2020 2020 2020 732e 6170              s.ap
+0003dd90: 7065 6e64 2869 290a 2020 2020 2020 2020  pend(i).        
+0003dda0: 2020 2020 2020 2020 656c 6966 2061 7420          elif at 
+0003ddb0: 3d3d 2030 206f 7220 6c65 6e28 7329 2b61  == 0 or len(s)+a
+0003ddc0: 7420 3d3d 2030 3a0a 2020 2020 2020 2020  t == 0:.        
+0003ddd0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0003dde0: 7369 6e73 7461 6e63 6528 692c 6c69 7374  sinstance(i,list
+0003ddf0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0003de00: 2020 2020 2020 2020 2020 2073 3d69 2b73             s=i+s
+0003de10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003de20: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0003de30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003de40: 2020 2073 3d5b 695d 2b73 0a20 2020 2020     s=[i]+s.     
+0003de50: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0003de60: 6174 203e 3020 616e 6420 6174 203c 206c  at >0 and at < l
+0003de70: 656e 2873 293a 0a20 2020 2020 2020 2020  en(s):.         
+0003de80: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+0003de90: 696e 7374 616e 6365 2869 2c6c 6973 7429  instance(i,list)
+0003dea0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003deb0: 2020 2020 2020 2020 2020 733d 735b 3a61            s=s[:a
+0003dec0: 745d 2b69 2b73 5b61 743a 5d0a 2020 2020  t]+i+s[at:].    
+0003ded0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003dee0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003def0: 2020 2020 2020 2020 2020 2020 2020 733d                s=
+0003df00: 735b 3a61 745d 2b5b 695d 2b73 5b61 743a  s[:at]+[i]+s[at:
+0003df10: 5d0a 2020 2020 2020 2020 7265 7475 726e  ].        return
+0003df20: 2073 0a20 2020 2072 6574 7572 6e20 4661   s.    return Fa
+0003df30: 6c73 650a 0a64 6566 2070 6163 6b65 745f  lse..def packet_
+0003df40: 7265 6365 6976 655f 616c 6c28 736f 636b  receive_all(sock
+0003df50: 2c63 6f75 6e74 2c70 726f 6772 6573 733d  ,count,progress=
+0003df60: 4661 6c73 652c 7072 6f67 7265 7373 5f6d  False,progress_m
+0003df70: 7367 3d4e 6f6e 652c 6c6f 673d 4e6f 6e65  sg=None,log=None
+0003df80: 2c72 6574 7279 3d30 2c72 6574 7279 5f74  ,retry=0,retry_t
+0003df90: 696d 656f 7574 3d35 2c65 7272 5f73 6372  imeout=5,err_scr
+0003dfa0: 3d46 616c 7365 293a 2023 2050 6163 6b65  =False): # Packe
+0003dfb0: 740a 2020 2020 6966 2074 7970 6528 736f  t.    if type(so
+0003dfc0: 636b 292e 5f5f 6e61 6d65 5f5f 206e 6f74  ck).__name__ not
+0003dfd0: 2069 6e20 5b27 736f 636b 6574 272c 275f   in ['socket','_
+0003dfe0: 736f 636b 6574 6f62 6a65 6374 272c 2753  socketobject','S
+0003dff0: 534c 536f 636b 6574 275d 3a0a 2020 2020  SLSocket']:.    
+0003e000: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+0003e010: 2c27 4973 206e 6f74 206e 6574 776f 726b  ,'Is not network
+0003e020: 2073 6f63 6b65 7427 0a20 2020 2062 7566   socket'.    buf
+0003e030: 203d 2062 2727 0a20 2020 2066 696c 655f   = b''.    file_
+0003e040: 7369 7a65 5f64 3d69 6e74 2827 7b30 7d27  size_d=int('{0}'
+0003e050: 2e66 6f72 6d61 7428 636f 756e 7429 290a  .format(count)).
+0003e060: 2020 2020 746e 3d30 0a20 2020 206e 6577      tn=0.    new
+0003e070: 6275 663d 4e6f 6e65 0a20 2020 2077 6869  buf=None.    whi
+0003e080: 6c65 2063 6f75 6e74 3a0a 2020 2020 2020  le count:.      
+0003e090: 2020 6966 2070 726f 6772 6573 733a 0a20    if progress:. 
+0003e0a0: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
+0003e0b0: 6f67 7265 7373 5f6d 7367 3a0a 2020 2020  ogress_msg:.    
+0003e0c0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0003e0d0: 7466 2827 5c72 7b7d 205b 207b 7d20 2520  tf('\r{} [ {} % 
+0003e0e0: 5d27 2e66 6f72 6d61 7428 7072 6f67 7265  ]'.format(progre
+0003e0f0: 7373 5f6d 7367 2c69 6e74 2828 6669 6c65  ss_msg,int((file
+0003e100: 5f73 697a 655f 642d 636f 756e 7429 202f  _size_d-count) /
+0003e110: 2066 696c 655f 7369 7a65 5f64 202a 2031   file_size_d * 1
+0003e120: 3030 2929 2c6c 6f67 3d6c 6f67 2c64 6972  00)),log=log,dir
+0003e130: 6563 743d 5472 7565 290a 2020 2020 2020  ect=True).      
+0003e140: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0003e150: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0003e160: 7466 2827 5c72 446f 776e 6c6f 6164 696e  tf('\rDownloadin
+0003e170: 672e 2e2e 205b 207b 7d20 2520 5d27 2e66  g... [ {} % ]'.f
+0003e180: 6f72 6d61 7428 696e 7428 2866 696c 655f  ormat(int((file_
+0003e190: 7369 7a65 5f64 2d63 6f75 6e74 2920 2f20  size_d-count) / 
+0003e1a0: 6669 6c65 5f73 697a 655f 6420 2a20 3130  file_size_d * 10
+0003e1b0: 3029 292c 6c6f 673d 6c6f 672c 6469 7265  0)),log=log,dire
+0003e1c0: 6374 3d54 7275 6529 0a20 2020 2020 2020  ct=True).       
+0003e1d0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+0003e1e0: 2020 6e65 7762 7566 203d 2073 6f63 6b2e    newbuf = sock.
+0003e1f0: 7265 6376 2863 6f75 6e74 290a 2020 2020  recv(count).    
+0003e200: 2020 2020 2020 2020 746e 3d30 2023 2072          tn=0 # r
+0003e210: 6573 6574 2074 7279 0a20 2020 2020 2020  eset try.       
+0003e220: 2065 7863 6570 7420 736f 636b 6574 2e65   except socket.e
+0003e230: 7272 6f72 2061 7320 653a 0a20 2020 2020  rror as e:.     
+0003e240: 2020 2020 2020 2069 6620 746e 203c 2072         if tn < r
+0003e250: 6574 7279 3a0a 2020 2020 2020 2020 2020  etry:.          
+0003e260: 2020 2020 2020 7072 696e 7466 2822 5b45        printf("[E
+0003e270: 5252 4f52 5d20 7469 6d65 6f75 7420 7661  RROR] timeout va
+0003e280: 6c75 653a 7b7d 2072 6574 7279 3a20 7b7d  lue:{} retry: {}
+0003e290: 2f7b 7d5c 6e7b 7d22 2e66 6f72 6d61 7428  /{}\n{}".format(
+0003e2a0: 736f 636b 2e67 6574 7469 6d65 6f75 7428  sock.gettimeout(
+0003e2b0: 292c 746e 2c72 6574 7279 2c65 292c 6c6f  ),tn,retry,e),lo
+0003e2c0: 673d 6c6f 672c 6473 703d 2765 2720 6966  g=log,dsp='e' if
+0003e2d0: 2065 7272 5f73 6372 2065 6c73 6520 2764   err_scr else 'd
+0003e2e0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+0003e2f0: 2020 2074 6e2b 3d31 0a20 2020 2020 2020     tn+=1.       
+0003e300: 2020 2020 2020 2020 2054 494d 4528 292e           TIME().
+0003e310: 536c 6565 7028 3129 0a20 2020 2020 2020  Sleep(1).       
+0003e320: 2020 2020 2020 2020 2073 6f63 6b2e 7365           sock.se
+0003e330: 7474 696d 656f 7574 2872 6574 7279 5f74  ttimeout(retry_t
+0003e340: 696d 656f 7574 290a 2020 2020 2020 2020  imeout).        
+0003e350: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
+0003e360: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0003e370: 7572 6e20 2765 7272 6f72 272c 650a 2020  urn 'error',e.  
+0003e380: 2020 2020 2020 6966 206e 6f74 206e 6577        if not new
+0003e390: 6275 663a 2072 6574 7572 6e20 5472 7565  buf: return True
+0003e3a0: 2c4e 6f6e 6520 236d 6179 6265 2073 6f6d  ,None #maybe som
+0003e3b0: 6574 6869 6e67 2073 6f63 6b65 7420 6973  ething socket is
+0003e3c0: 7375 652e 0a20 2020 2020 2020 2062 7566  sue..        buf
+0003e3d0: 202b 3d20 6e65 7762 7566 0a20 2020 2020   += newbuf.     
+0003e3e0: 2020 2063 6f75 6e74 202d 3d20 6c65 6e28     count -= len(
+0003e3f0: 6e65 7762 7566 290a 2020 2020 6966 2070  newbuf).    if p
+0003e400: 726f 6772 6573 733a 0a20 2020 2020 2020  rogress:.       
+0003e410: 2069 6620 7072 6f67 7265 7373 5f6d 7367   if progress_msg
+0003e420: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
+0003e430: 696e 7466 2827 5c72 7b7d 205b 2031 3030  intf('\r{} [ 100
+0003e440: 2025 205d 5c6e 272e 666f 726d 6174 2870   % ]\n'.format(p
+0003e450: 726f 6772 6573 735f 6d73 6729 2c6c 6f67  rogress_msg),log
+0003e460: 3d6c 6f67 2c64 6972 6563 743d 5472 7565  =log,direct=True
+0003e470: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0003e480: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0003e490: 7466 2827 5c72 446f 776e 6c6f 6164 696e  tf('\rDownloadin
+0003e4a0: 672e 2e2e 205b 2031 3030 2025 205d 5c6e  g... [ 100 % ]\n
+0003e4b0: 272c 6c6f 673d 6c6f 672c 6469 7265 6374  ',log=log,direct
+0003e4c0: 3d54 7275 6529 0a20 2020 2072 6574 7572  =True).    retur
+0003e4d0: 6e20 5472 7565 2c62 7566 0a0a 6465 6620  n True,buf..def 
+0003e4e0: 4461 7461 3242 7974 6553 7472 696e 6728  Data2ByteString(
+0003e4f0: 6461 7461 2c70 726f 746f 636f 6c3d 3229  data,protocol=2)
+0003e500: 3a0a 2020 2020 7472 793a 0a20 2020 2020  :.    try:.     
+0003e510: 2020 2072 6574 7572 6e20 5472 7565 2c70     return True,p
+0003e520: 6963 6b6c 652e 6475 6d70 7328 6461 7461  ickle.dumps(data
+0003e530: 2c70 726f 746f 636f 6c3d 7072 6f74 6f63  ,protocol=protoc
+0003e540: 6f6c 2920 2320 636f 6d6d 6f6e 2032 2e78  ol) # common 2.x
+0003e550: 2026 2033 2e78 2076 6572 7369 6f6e 203a   & 3.x version :
+0003e560: 2070 726f 746f 636f 6c3d 320a 2020 2020   protocol=2.    
+0003e570: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+0003e580: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0003e590: 2023 203c 636c 6173 7320 274b 6579 4572   # <class 'KeyEr
+0003e5a0: 726f 7227 3e20 7468 656e 2074 7279 2061  ror'> then try a
+0003e5b0: 6761 696e 2061 6674 6572 2066 696c 7465  gain after filte
+0003e5c0: 7220 6f75 7420 7079 7468 6f6e 2064 6566  r out python def
+0003e5d0: 6175 6c74 2065 6e67 696e 650a 2020 2020  ault engine.    
+0003e5e0: 2020 2020 2020 2020 2320 6d61 7962 6520          # maybe 
+0003e5f0: 756e 6b6e 6f77 6e20 6368 6172 6163 7465  unknown characte
+0003e600: 7220 696e 2074 6865 2064 6174 610a 2020  r in the data.  
+0003e610: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0003e620: 2054 7275 652c 7069 636b 6c65 2e64 756d   True,pickle.dum
+0003e630: 7073 2865 7661 6c28 7374 7228 6461 7461  ps(eval(str(data
+0003e640: 2929 2c70 726f 746f 636f 6c3d 7072 6f74  )),protocol=prot
+0003e650: 6f63 6f6c 2920 2320 636f 6d6d 6f6e 2032  ocol) # common 2
+0003e660: 2e78 2026 2033 2e78 2076 6572 7369 6f6e  .x & 3.x version
+0003e670: 203a 2070 726f 746f 636f 6c3d 320a 2020   : protocol=2.  
+0003e680: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
+0003e690: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0003e6a0: 2046 616c 7365 2c73 7973 2e65 7863 5f69   False,sys.exc_i
+0003e6b0: 6e66 6f28 295b 305d 0a0a 6465 6620 4279  nfo()[0]..def By
+0003e6c0: 7465 5374 7269 6e67 3244 6174 6128 6461  teString2Data(da
+0003e6d0: 7461 293a 0a20 2020 2023 2049 6620 6e6f  ta):.    # If no
+0003e6e0: 7420 7069 636b 6c65 2064 6174 6120 7468  t pickle data th
+0003e6f0: 656e 2072 6574 7572 6e20 6f72 6967 696e  en return origin
+0003e700: 616c 2064 6174 612c 2074 6861 7420 6973  al data, that is
+0003e710: 2072 6561 6c20 6461 7461 0a20 2020 2023   real data.    #
+0003e720: 2069 6620 7069 636b 6c65 2064 6174 6120   if pickle data 
+0003e730: 7468 656e 2063 6f6e 7665 7274 2074 6f20  then convert to 
+0003e740: 6461 7461 0a20 2020 2074 7279 3a0a 2020  data.    try:.  
+0003e750: 2020 2020 2020 7265 7475 726e 2070 6963        return pic
+0003e760: 6b6c 652e 6c6f 6164 7328 6461 7461 290a  kle.loads(data).
+0003e770: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+0003e780: 2020 2020 7265 7475 726e 2064 6174 610a      return data.
+0003e790: 0a64 6566 2070 6163 6b65 745f 656e 6328  .def packet_enc(
+0003e7a0: 6461 7461 2c6b 6579 3d27 6b67 272c 656e  data,key='kg',en
+0003e7b0: 633d 4661 6c73 6529 3a0a 2020 2020 6e6b  c=False):.    nk
+0003e7c0: 6579 3d42 7974 6573 3249 6e74 286b 6579  ey=Bytes2Int(key
+0003e7d0: 2c65 6e63 6f64 653d 2775 7466 2d38 272c  ,encode='utf-8',
+0003e7e0: 6465 6661 756c 743d 276f 7267 2729 0a20  default='org'). 
+0003e7f0: 2020 206f 6b2c 7064 6174 613d 4461 7461     ok,pdata=Data
+0003e800: 3242 7974 6553 7472 696e 6728 6461 7461  2ByteString(data
+0003e810: 290a 2020 2020 6966 206e 6f74 206f 6b3a  ).    if not ok:
+0003e820: 2072 6574 7572 6e20 4661 6c73 652c 7064   return False,pd
+0003e830: 6174 610a 2020 2020 6461 7461 5f74 7970  ata.    data_typ
+0003e840: 653d 4279 7465 7328 7479 7065 2864 6174  e=Bytes(type(dat
+0003e850: 6129 2e5f 5f6e 616d 655f 5f5b 305d 290a  a).__name__[0]).
+0003e860: 2020 2020 6966 2065 6e63 2061 6e64 206b      if enc and k
+0003e870: 6579 3a0a 2020 2020 2020 2020 2320 656e  ey:.        # en
+0003e880: 636f 6465 2063 6f64 6520 6865 7265 0a20  code code here. 
+0003e890: 2020 2020 2020 2023 656e 635f 7466 3d42         #enc_tf=B
+0003e8a0: 7974 6573 2827 7427 2920 2320 4e6f 7720  ytes('t') # Now 
+0003e8b0: 6e6f 7420 636f 6465 2068 6572 652e 2053  not code here. S
+0003e8c0: 6f2c 2065 7665 7279 7468 696e 6720 746f  o, everything to
+0003e8d0: 2027 6627 0a20 2020 2020 2020 2023 7064   'f'.        #pd
+0003e8e0: 6174 613d 656e 636f 6465 286b 6579 2c70  ata=encode(key,p
+0003e8f0: 6461 7461 290a 2020 2020 2020 2020 656e  data).        en
+0003e900: 635f 7466 3d42 7974 6573 2827 6627 290a  c_tf=Bytes('f').
+0003e910: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003e920: 2020 656e 635f 7466 3d42 7974 6573 2827    enc_tf=Bytes('
+0003e930: 6627 290a 2020 2020 6e64 6174 613d 7374  f').    ndata=st
+0003e940: 7275 6374 2e70 6163 6b28 273e 4973 7349  ruct.pack('>IssI
+0003e950: 272c 6c65 6e28 7064 6174 6129 2c64 6174  ',len(pdata),dat
+0003e960: 615f 7479 7065 2c65 6e63 5f74 662c 6e6b  a_type,enc_tf,nk
+0003e970: 6579 292b 7064 6174 610a 2020 2020 7265  ey)+pdata.    re
+0003e980: 7475 726e 2054 7275 652c 6e64 6174 610a  turn True,ndata.
+0003e990: 2020 2020 2020 2020 0a64 6566 2070 6163          .def pac
+0003e9a0: 6b65 745f 6865 6164 2873 6f63 6b2c 6b65  ket_head(sock,ke
+0003e9b0: 793d 276b 6727 2c72 6574 7279 3d30 2c72  y='kg',retry=0,r
+0003e9c0: 6574 7279 5f74 696d 656f 7574 3d35 2c6b  etry_timeout=5,k
+0003e9d0: 6565 705f 7265 7472 793d 4661 6c73 652c  eep_retry=False,
+0003e9e0: 7469 6d65 6f75 743d 3129 3a0a 2020 2020  timeout=1):.    
+0003e9f0: 2347 6574 2048 6561 6465 720a 2020 2020  #Get Header.    
+0003ea00: 236b 6565 705f 7265 7472 7920 3a54 7275  #keep_retry :Tru
+0003ea10: 653a 2069 6620 636c 6173 6564 2073 6f63  e: if clased soc
+0003ea20: 6b65 7420 6275 7420 7761 6974 0a20 2020  ket but wait.   
+0003ea30: 2070 683d 5449 4d45 2829 0a20 2020 2069   ph=TIME().    i
+0003ea40: 6620 2872 6574 7279 202a 2072 6574 7279  f (retry * retry
+0003ea50: 5f74 696d 656f 7574 2920 3e20 7469 6d65  _timeout) > time
+0003ea60: 6f75 743a 0a20 2020 2020 2020 2074 696d  out:.        tim
+0003ea70: 656f 7574 3d72 6574 7279 202a 2072 6574  eout=retry * ret
+0003ea80: 7279 5f74 696d 656f 7574 0a20 2020 2065  ry_timeout.    e
+0003ea90: 6c73 653a 0a20 2020 2020 2020 2069 6620  lse:.        if 
+0003eaa0: 7265 7472 795f 7469 6d65 6f75 7420 3c3d  retry_timeout <=
+0003eab0: 2030 3a20 7265 7472 795f 7469 6d65 6f75   0: retry_timeou
+0003eac0: 743d 350a 2020 2020 2020 2020 7265 7472  t=5.        retr
+0003ead0: 793d 2874 696d 656f 7574 2f2f 7265 7472  y=(timeout//retr
+0003eae0: 795f 7469 6d65 6f75 7429 2b31 0a20 2020  y_timeout)+1.   
+0003eaf0: 2077 6869 6c65 2054 7275 653a 0a20 2020   while True:.   
+0003eb00: 2020 2020 2069 6620 436c 6f73 6564 536f       if ClosedSo
+0003eb10: 636b 6574 2873 6f63 6b29 3a0a 2020 2020  cket(sock):.    
+0003eb20: 2020 2020 2020 2020 6966 2072 6574 7279          if retry
+0003eb30: 203c 3d20 303a 0a20 2020 2020 2020 2020   <= 0:.         
+0003eb40: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0003eb50: 6c73 652c 2741 6c72 6561 6479 2063 6c6f  lse,'Already clo
+0003eb60: 7365 6420 7468 6520 736f 636b 6574 270a  sed the socket'.
+0003eb70: 2020 2020 2020 2020 2020 2020 7265 7472              retr
+0003eb80: 792d 3d31 0a20 2020 2020 2020 2020 2020  y-=1.           
+0003eb90: 2074 696d 652e 736c 6565 7028 7265 7472   time.sleep(retr
+0003eba0: 795f 7469 6d65 6f75 7429 0a20 2020 2020  y_timeout).     
+0003ebb0: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+0003ebc0: 2020 2020 2020 2020 6f6b 2c68 6561 643d          ok,head=
+0003ebd0: 7061 636b 6574 5f72 6563 6569 7665 5f61  packet_receive_a
+0003ebe0: 6c6c 2873 6f63 6b2c 3130 2c72 6574 7279  ll(sock,10,retry
+0003ebf0: 3d72 6574 7279 2c72 6574 7279 5f74 696d  =retry,retry_tim
+0003ec00: 656f 7574 3d72 6574 7279 5f74 696d 656f  eout=retry_timeo
+0003ec10: 7574 290a 2020 2020 2020 2020 6966 206b  ut).        if k
+0003ec20: 7263 286f 6b2c 6368 6b3d 5472 7565 293a  rc(ok,chk=True):
+0003ec30: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+0003ec40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003ec50: 2020 7374 5f68 6561 643d 7374 7275 6374    st_head=struct
+0003ec60: 2e75 6e70 6163 6b28 273e 4973 7349 272c  .unpack('>IssI',
+0003ec70: 4279 7465 7328 6865 6164 2929 0a20 2020  Bytes(head)).   
+0003ec80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0003ec90: 7374 5f68 6561 645b 335d 203d 3d20 4279  st_head[3] == By
+0003eca0: 7465 7332 496e 7428 6b65 792c 656e 636f  tes2Int(key,enco
+0003ecb0: 6465 3d27 7574 662d 3827 2c64 6566 6175  de='utf-8',defau
+0003ecc0: 6c74 3d27 6f72 6727 293a 0a20 2020 2020  lt='org'):.     
+0003ecd0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003ece0: 6574 7572 6e20 5472 7565 2c73 745f 6865  eturn True,st_he
+0003ecf0: 6164 5b30 5d2c 7374 5f68 6561 645b 315d  ad[0],st_head[1]
+0003ed00: 2c73 745f 6865 6164 5b32 5d0a 2020 2020  ,st_head[2].    
+0003ed10: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+0003ed20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ed30: 7061 7373 0a20 2020 2020 2020 2069 6620  pass.        if 
+0003ed40: 7068 2e4f 7574 2874 696d 656f 7574 293a  ph.Out(timeout):
+0003ed50: 2062 7265 616b 0a20 2020 2020 2020 2074   break.        t
+0003ed60: 696d 652e 736c 6565 7028 3129 0a20 2020  ime.sleep(1).   
+0003ed70: 2072 6574 7572 6e20 4661 6c73 652c 2746   return False,'F
+0003ed80: 6169 6c20 666f 7220 7265 6164 2068 6561  ail for read hea
+0003ed90: 6465 7228 7b7d 2927 2e66 6f72 6d61 7428  der({})'.format(
+0003eda0: 6865 6164 292c 4e6f 6e65 2c4e 6f6e 650a  head),None,None.
+0003edb0: 0a64 6566 2070 6163 6b65 745f 6465 6328  .def packet_dec(
+0003edc0: 6461 7461 2c65 6e63 2c6b 6579 3d27 6b67  data,enc,key='kg
+0003edd0: 2729 3a0a 2020 2020 236f 6b2c 7369 7a65  '):.    #ok,size
+0003ede0: 2c64 6174 615f 7479 7065 2c65 6e63 3d70  ,data_type,enc=p
+0003edf0: 6163 6b65 745f 6865 6164 2873 6f63 6b29  acket_head(sock)
+0003ee00: 0a20 2020 2023 6f6b 2c64 6174 613d 7061  .    #ok,data=pa
+0003ee10: 636b 6574 5f72 6563 6569 7665 5f61 6c6c  cket_receive_all
+0003ee20: 2873 6f63 6b2c 7369 7a65 2c2e 2e2e 2e29  (sock,size,....)
+0003ee30: 0a20 2020 2023 7265 616c 5f64 6174 613d  .    #real_data=
+0003ee40: 7061 636b 6574 5f64 6563 2864 6174 612c  packet_dec(data,
+0003ee50: 656e 6329 0a20 2020 2069 6620 656e 6320  enc).    if enc 
+0003ee60: 3d3d 2027 7427 3a0a 2020 2020 2020 2020  == 't':.        
+0003ee70: 2320 6465 636f 6465 2063 6f64 6520 6865  # decode code he
+0003ee80: 7265 0a20 2020 2020 2020 2023 2064 6174  re.        # dat
+0003ee90: 613d 6465 636f 6465 2864 6174 6129 0a20  a=decode(data). 
+0003eea0: 2020 2020 2020 2070 6173 730a 2020 2020         pass.    
+0003eeb0: 7265 7475 726e 2042 7974 6553 7472 696e  return ByteStrin
+0003eec0: 6732 4461 7461 2864 6174 6129 0a0a 6465  g2Data(data)..de
+0003eed0: 6620 436c 6f73 6564 536f 636b 6574 2873  f ClosedSocket(s
+0003eee0: 6f63 6b29 3a0a 2020 2020 7472 793a 0a20  ock):.    try:. 
+0003eef0: 2020 2020 2020 2023 2074 6869 7320 7769         # this wi
+0003ef00: 6c6c 2074 7279 2074 6f20 7265 6164 2062  ll try to read b
+0003ef10: 7974 6573 2077 6974 686f 7574 2062 6c6f  ytes without blo
+0003ef20: 636b 696e 670a 2020 2020 2020 2020 2320  cking.        # 
+0003ef30: 616e 6420 616c 736f 2077 6974 686f 7574  and also without
+0003ef40: 2072 656d 6f76 696e 6720 7468 656d 2066   removing them f
+0003ef50: 726f 6d20 6275 6666 6572 2028 7065 656b  rom buffer (peek
+0003ef60: 206f 6e6c 7929 0a20 2020 2020 2020 2064   only).        d
+0003ef70: 6174 6120 3d20 736f 636b 2e72 6563 7628  ata = sock.recv(
+0003ef80: 3136 2c20 736f 636b 6574 2e4d 5347 5f44  16, socket.MSG_D
+0003ef90: 4f4e 5457 4149 5420 7c20 736f 636b 6574  ONTWAIT | socket
+0003efa0: 2e4d 5347 5f50 4545 4b29 0a20 2020 2020  .MSG_PEEK).     
+0003efb0: 2020 2069 6620 6c65 6e28 6461 7461 2920     if len(data) 
+0003efc0: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
+0003efd0: 2020 7265 7475 726e 2054 7275 650a 2020    return True.  
+0003efe0: 2020 6578 6365 7074 2042 6c6f 636b 696e    except Blockin
+0003eff0: 6749 4f45 7272 6f72 3a0a 2020 2020 2020  gIOError:.      
+0003f000: 2020 7265 7475 726e 2046 616c 7365 2020    return False  
+0003f010: 2320 736f 636b 6574 2069 7320 6f70 656e  # socket is open
+0003f020: 2061 6e64 2072 6561 6469 6e67 2066 726f   and reading fro
+0003f030: 6d20 6974 2077 6f75 6c64 2062 6c6f 636b  m it would block
+0003f040: 0a20 2020 2065 7863 6570 7420 436f 6e6e  .    except Conn
+0003f050: 6563 7469 6f6e 5265 7365 7445 7272 6f72  ectionResetError
+0003f060: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+0003f070: 2054 7275 6520 2023 2073 6f63 6b65 7420   True  # socket 
+0003f080: 7761 7320 636c 6f73 6564 2066 6f72 2073  was closed for s
+0003f090: 6f6d 6520 6f74 6865 7220 7265 6173 6f6e  ome other reason
+0003f0a0: 0a20 2020 2065 7863 6570 7420 4578 6365  .    except Exce
+0003f0b0: 7074 696f 6e20 6173 2065 3a20 2375 6e65  ption as e: #une
+0003f0c0: 7870 6563 7465 6420 6578 6365 7074 696f  xpected exceptio
+0003f0d0: 6e20 7768 656e 2063 6865 636b 696e 6720  n when checking 
+0003f0e0: 6966 2061 2073 6f63 6b65 7420 6973 2063  if a socket is c
+0003f0f0: 6c6f 7365 640a 2020 2020 2020 2020 7265  losed.        re
+0003f100: 7475 726e 2046 616c 7365 0a20 2020 2072  turn False.    r
+0003f110: 6574 7572 6e20 4661 6c73 650a 0a64 6566  eturn False..def
+0003f120: 2052 656d 6f76 654e 6577 6c69 6e65 2873   RemoveNewline(s
+0003f130: 7263 2c6d 6f64 653d 2765 6467 6527 2c6e  rc,mode='edge',n
+0003f140: 6577 6c69 6e65 3d27 5c6e 272c 6279 7465  ewline='\n',byte
+0003f150: 3d4e 6f6e 6529 3a0a 2020 2020 6966 2069  =None):.    if i
+0003f160: 7369 6e73 7461 6e63 6528 6279 7465 2c62  sinstance(byte,b
+0003f170: 6f6f 6c29 3a0a 2020 2020 2020 2020 6966  ool):.        if
+0003f180: 2062 7974 653a 0a20 2020 2020 2020 2020   byte:.         
+0003f190: 2020 2073 7263 3d42 7974 6573 2873 7263     src=Bytes(src
+0003f1a0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0003f1b0: 2020 2020 2020 2020 2020 2020 7372 633d              src=
+0003f1c0: 5374 7228 7372 6329 0a20 2020 2073 7263  Str(src).    src
+0003f1d0: 5f61 3d53 706c 6974 2873 7263 2c6e 6577  _a=Split(src,new
+0003f1e0: 6c69 6e65 2c64 6566 6175 6c74 3d46 616c  line,default=Fal
+0003f1f0: 7365 2c6c 6973 746f 6e6c 793d 4661 6c73  se,listonly=Fals
+0003f200: 6529 0a20 2020 2069 6620 7372 635f 6120  e).    if src_a 
+0003f210: 6973 2046 616c 7365 3a0a 2020 2020 2020  is False:.      
+0003f220: 2020 7265 7475 726e 2073 7263 0a20 2020    return src.   
+0003f230: 2069 6620 6d6f 6465 2069 6e20 5b27 6564   if mode in ['ed
+0003f240: 6765 272c 2762 6f74 6827 5d3a 0a20 2020  ge','both']:.   
+0003f250: 2020 2020 2069 6620 6e6f 7420 7372 635f       if not src_
+0003f260: 615b 305d 2e73 7472 6970 2829 2061 6e64  a[0].strip() and
+0003f270: 206e 6f74 2073 7263 5f61 5b2d 315d 2e73   not src_a[-1].s
+0003f280: 7472 6970 2829 3a0a 2020 2020 2020 2020  trip():.        
+0003f290: 2020 2020 7265 7475 726e 204a 6f69 6e28      return Join(
+0003f2a0: 7372 635f 615b 313a 2d31 5d2c 7379 6d62  src_a[1:-1],symb
+0003f2b0: 6f6c 3d6e 6577 6c69 6e65 290a 2020 2020  ol=newline).    
+0003f2c0: 2020 2020 656c 6966 206e 6f74 2073 7263      elif not src
+0003f2d0: 5f61 5b30 5d2e 7374 7269 7028 293a 0a20  _a[0].strip():. 
+0003f2e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003f2f0: 6e20 4a6f 696e 2873 7263 5f61 5b31 3a5d  n Join(src_a[1:]
+0003f300: 2c73 796d 626f 6c3d 6e65 776c 696e 6529  ,symbol=newline)
+0003f310: 0a20 2020 2020 2020 2065 6c69 6620 6e6f  .        elif no
+0003f320: 7420 7372 635f 615b 2d31 5d2e 7374 7269  t src_a[-1].stri
+0003f330: 7028 293a 0a20 2020 2020 2020 2020 2020  p():.           
+0003f340: 2072 6574 7572 6e20 4a6f 696e 2873 7263   return Join(src
+0003f350: 5f61 5b3a 2d31 5d2c 7379 6d62 6f6c 3d6e  _a[:-1],symbol=n
+0003f360: 6577 6c69 6e65 290a 2020 2020 656c 6966  ewline).    elif
+0003f370: 206d 6f64 6520 696e 205b 2766 6972 7374   mode in ['first
+0003f380: 272c 2773 7461 7274 272c 305d 3a0a 2020  ','start',0]:.  
+0003f390: 2020 2020 2020 6966 206e 6f74 2073 7263        if not src
+0003f3a0: 5f61 5b30 5d2e 7374 7269 7028 293a 0a20  _a[0].strip():. 
+0003f3b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003f3c0: 6e20 4a6f 696e 2873 7263 5f61 5b31 3a5d  n Join(src_a[1:]
+0003f3d0: 2c73 796d 626f 6c3d 6e65 776c 696e 6529  ,symbol=newline)
+0003f3e0: 0a20 2020 2065 6c69 6620 6d6f 6465 2069  .    elif mode i
+0003f3f0: 6e20 5b27 656e 6427 2c27 6c61 7374 272c  n ['end','last',
+0003f400: 2d31 5d3a 0a20 2020 2020 2020 2069 6620  -1]:.        if 
+0003f410: 6e6f 7420 7372 635f 615b 2d31 5d2e 7374  not src_a[-1].st
+0003f420: 7269 7028 293a 0a20 2020 2020 2020 2020  rip():.         
+0003f430: 2020 2072 6574 7572 6e20 4a6f 696e 2873     return Join(s
+0003f440: 7263 5f61 5b3a 2d31 5d2c 7379 6d62 6f6c  rc_a[:-1],symbol
+0003f450: 3d6e 6577 6c69 6e65 290a 2020 2020 656c  =newline).    el
+0003f460: 6966 206d 6f64 6520 696e 205b 272a 272c  if mode in ['*',
+0003f470: 2761 6c6c 272c 2765 7665 7279 7468 696e  'all','everythin
+0003f480: 6727 5d3a 0a20 2020 2020 2020 2072 6574  g']:.        ret
+0003f490: 7572 6e20 4a6f 696e 2873 7263 5f61 2c73  urn Join(src_a,s
+0003f4a0: 796d 626f 6c3d 2727 290a 2020 2020 7265  ymbol='').    re
+0003f4b0: 7475 726e 2073 7263 0a0a 6465 6620 6361  turn src..def ca
+0003f4c0: 7428 6669 6c65 6e61 6d65 2c2a 2a6f 7074  t(filename,**opt
+0003f4d0: 7329 3a0a 2020 2020 6279 7465 3d6f 7074  s):.    byte=opt
+0003f4e0: 732e 6765 7428 2762 7974 6527 2c46 616c  s.get('byte',Fal
+0003f4f0: 7365 290a 2020 2020 6e65 776c 696e 653d  se).    newline=
+0003f500: 6f70 7473 2e67 6574 2827 6e65 776c 696e  opts.get('newlin
+0003f510: 6527 2c27 5c6e 2729 0a20 2020 2072 6561  e','\n').    rea
+0003f520: 645f 6669 7273 746c 696e 653d 6f70 7473  d_firstline=opts
+0003f530: 2e67 6574 2827 7265 6164 5f66 6972 7374  .get('read_first
+0003f540: 6c69 6e65 272c 6f70 7473 2e67 6574 2827  line',opts.get('
+0003f550: 6865 6164 272c 6f70 7473 2e67 6574 2827  head',opts.get('
+0003f560: 6865 6164 5f6c 696e 6527 2c46 616c 7365  head_line',False
+0003f570: 2929 290a 2020 2020 6465 6661 756c 743d  ))).    default=
+0003f580: 6f70 7473 2e67 6574 2827 6465 6661 756c  opts.get('defaul
+0003f590: 7427 2c46 616c 7365 290a 2020 2020 6e6f  t',False).    no
+0003f5a0: 5f65 6467 653d 6f70 7473 2e67 6574 2827  _edge=opts.get('
+0003f5b0: 6e6f 5f65 6467 6527 2c46 616c 7365 290a  no_edge',False).
+0003f5c0: 2020 2020 6e6f 5f65 6e64 5f6e 6577 6c69      no_end_newli
+0003f5d0: 6e65 3d6f 7074 732e 6765 7428 276e 6f5f  ne=opts.get('no_
+0003f5e0: 656e 645f 6e65 776c 696e 6527 2c46 616c  end_newline',Fal
+0003f5f0: 7365 290a 2020 2020 6669 6c65 5f6f 6e6c  se).    file_onl
+0003f600: 793d 6f70 7473 2e67 6574 2827 6669 6c65  y=opts.get('file
+0003f610: 5f6f 6e6c 7927 2c6f 7074 732e 6765 7428  _only',opts.get(
+0003f620: 2766 696c 656f 6e6c 7927 2c54 7275 6529  'fileonly',True)
+0003f630: 290a 2020 2020 6e6f 5f61 6c6c 5f6e 6577  ).    no_all_new
+0003f640: 6c69 6e65 3d6f 7074 732e 6765 7428 276e  line=opts.get('n
+0003f650: 6f5f 616c 6c5f 6e65 776c 696e 6527 2c46  o_all_newline',F
+0003f660: 616c 7365 290a 2020 2020 6e6f 5f66 6972  alse).    no_fir
+0003f670: 7374 5f6e 6577 6c69 6e65 3d6f 7074 732e  st_newline=opts.
+0003f680: 6765 7428 276e 6f5f 6669 7273 745f 6e65  get('no_first_ne
+0003f690: 776c 696e 6527 2c46 616c 7365 290a 2020  wline',False).  
+0003f6a0: 2020 6c6f 673d 6f70 7473 2e67 6574 2827    log=opts.get('
+0003f6b0: 6c6f 6727 290a 0a20 2020 2069 6620 4973  log')..    if Is
+0003f6c0: 4e6f 6e65 2866 696c 656e 616d 6529 3a0a  None(filename):.
+0003f6d0: 2020 2020 2020 2020 7072 696e 7466 2827          printf('
+0003f6e0: 4669 6c65 6e61 6d65 2069 7320 4e6f 6e65  Filename is None
+0003f6f0: 272c 6c6f 673d 6c6f 672c 6d6f 6465 3d27  ',log=log,mode='
+0003f700: 6427 290a 2020 2020 2020 2020 7265 7475  d').        retu
+0003f710: 726e 2064 6566 6175 6c74 0a20 2020 2069  rn default.    i
+0003f720: 6620 6f73 2e70 6174 682e 6973 6469 7228  f os.path.isdir(
+0003f730: 6669 6c65 6e61 6d65 293a 0a20 2020 2020  filename):.     
+0003f740: 2020 2070 7269 6e74 6628 277b 7d20 6973     printf('{} is
+0003f750: 2061 2064 6972 6563 746f 7279 272e 666f   a directory'.fo
+0003f760: 726d 6174 2866 696c 656e 616d 6529 2c6c  rmat(filename),l
+0003f770: 6f67 3d6c 6f67 2c6d 6f64 653d 2764 2729  og=log,mode='d')
+0003f780: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003f790: 6465 6661 756c 740a 2020 2020 6966 206e  default.    if n
+0003f7a0: 6f74 206f 732e 7061 7468 2e65 7869 7374  ot os.path.exist
+0003f7b0: 7328 6669 6c65 6e61 6d65 293a 0a20 2020  s(filename):.   
+0003f7c0: 2020 2020 2070 7269 6e74 6628 277b 7d20       printf('{} 
+0003f7d0: 6e6f 7420 666f 756e 6427 2e66 6f72 6d61  not found'.forma
+0003f7e0: 7428 6669 6c65 6e61 6d65 292c 6c6f 673d  t(filename),log=
+0003f7f0: 6c6f 672c 6d6f 6465 3d27 6427 290a 2020  log,mode='d').  
+0003f800: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+0003f810: 6175 6c74 0a20 2020 2074 7279 3a0a 2020  ault.    try:.  
+0003f820: 2020 2020 2020 6966 2072 6561 645f 6669        if read_fi
+0003f830: 7273 746c 696e 653a 2020 2320 5265 6164  rstline:  # Read
+0003f840: 6c69 6e65 0a20 2020 2020 2020 2020 2020  line.           
+0003f850: 2077 6974 6820 6f70 656e 2866 696c 656e   with open(filen
+0003f860: 616d 652c 2772 6227 2920 6173 2066 3a0a  ame,'rb') as f:.
+0003f870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003f880: 6461 7461 3d66 2e72 6561 646c 696e 6528  data=f.readline(
+0003f890: 290a 2020 2020 2020 2020 656c 6966 206e  ).        elif n
+0003f8a0: 6f74 2066 696c 655f 6f6e 6c79 3a20 2320  ot file_only: # 
+0003f8b0: 5265 6164 2073 7065 6369 616c 2066 696c  Read special fil
+0003f8c0: 650a 2020 2020 2020 2020 2020 2020 6461  e.            da
+0003f8d0: 7461 3d6f 732e 6f70 656e 2866 696c 656e  ta=os.open(filen
+0003f8e0: 616d 652c 6f73 2e4f 5f52 444f 4e4c 5929  ame,os.O_RDONLY)
+0003f8f0: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
+0003f900: 636c 6f73 6528 6461 7461 290a 2020 2020  close(data).    
+0003f910: 2020 2020 656c 7365 3a20 2320 5265 6164      else: # Read
+0003f920: 206e 6f72 6d61 6c20 6669 6c65 0a20 2020   normal file.   
+0003f930: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
+0003f940: 656e 2866 696c 656e 616d 652c 2772 6227  en(filename,'rb'
+0003f950: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
+0003f960: 2020 2020 2020 2020 6461 7461 3d66 2e72          data=f.r
+0003f970: 6561 6428 290a 2020 2020 2020 2020 6966  ead().        if
+0003f980: 206e 6f74 2062 7974 653a 0a20 2020 2020   not byte:.     
+0003f990: 2020 2020 2020 6461 7461 3d53 7472 2864        data=Str(d
+0003f9a0: 6174 6129 0a20 2020 2065 7863 6570 743a  ata).    except:
+0003f9b0: 0a20 2020 2020 2020 2070 7269 6e74 6628  .        printf(
+0003f9c0: 7379 732e 6578 635f 696e 666f 2829 5b30  sys.exc_info()[0
+0003f9d0: 5d2c 6c6f 673d 6c6f 672c 6d6f 6465 3d27  ],log=log,mode='
+0003f9e0: 6427 290a 2020 2020 2020 2020 7265 7475  d').        retu
+0003f9f0: 726e 2064 6566 6175 6c74 0a20 2020 2072  rn default.    r
+0003fa00: 6574 7572 6e20 5265 6d6f 7665 4e65 776c  eturn RemoveNewl
+0003fa10: 696e 6528 6461 7461 2c6d 6f64 653d 2765  ine(data,mode='e
+0003fa20: 6467 6527 2069 6620 6e6f 5f65 6467 6520  dge' if no_edge 
+0003fa30: 656c 7365 2027 656e 6427 2069 6620 6e6f  else 'end' if no
+0003fa40: 5f65 6e64 5f6e 6577 6c69 6e65 2065 6c73  _end_newline els
+0003fa50: 6520 2766 6972 7374 2720 6966 206e 6f5f  e 'first' if no_
+0003fa60: 6669 7273 745f 6e65 776c 696e 6520 656c  first_newline el
+0003fa70: 7365 2027 616c 6c27 2069 6620 6e6f 5f61  se 'all' if no_a
+0003fa80: 6c6c 5f6e 6577 6c69 6e65 2065 6c73 6520  ll_newline else 
+0003fa90: 4e6f 6e65 2c6e 6577 6c69 6e65 3d6e 6577  None,newline=new
+0003faa0: 6c69 6e65 2c62 7974 653d 6279 7465 290a  line,byte=byte).
+0003fab0: 0a64 6566 2043 6f6d 7072 6573 7328 6461  .def Compress(da
+0003fac0: 7461 2c6d 6f64 653d 2767 7a69 7027 293a  ta,mode='gzip'):
+0003fad0: 0a20 2020 2074 7279 3a0a 2020 2020 2020  .    try:.      
+0003fae0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0003faf0: 6461 7461 2c73 7472 2920 616e 6420 6f73  data,str) and os
+0003fb00: 2e70 6174 682e 6973 6669 6c65 2864 6174  .path.isfile(dat
+0003fb10: 6129 3a0a 2020 2020 2020 2020 2020 2020  a):.            
+0003fb20: 7769 7468 206f 7065 6e28 6461 7461 2c27  with open(data,'
+0003fb30: 7262 2729 2061 7320 663a 0a20 2020 2020  rb') as f:.     
+0003fb40: 2020 2020 2020 2020 2020 2064 6174 613d             data=
+0003fb50: 662e 7265 6164 2829 0a20 2020 2020 2020  f.read().       
+0003fb60: 2069 6620 6d6f 6465 203d 3d20 276c 7a34   if mode == 'lz4
+0003fb70: 273a 0a20 2020 2020 2020 2020 2020 2049  ':.            I
+0003fb80: 6d70 6f72 7428 2766 726f 6d20 6c7a 3420  mport('from lz4 
+0003fb90: 696d 706f 7274 2066 7261 6d65 2729 0a20  import frame'). 
+0003fba0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003fbb0: 6e20 6672 616d 652e 636f 6d70 7265 7373  n frame.compress
+0003fbc0: 2864 6174 6129 0a20 2020 2020 2020 2065  (data).        e
+0003fbd0: 6c69 6620 6d6f 6465 203d 3d20 2762 7a32  lif mode == 'bz2
+0003fbe0: 273a 0a20 2020 2020 2020 2020 2020 2072  ':.            r
+0003fbf0: 6574 7572 6e20 627a 322e 636f 6d70 7265  eturn bz2.compre
 0003fc00: 7373 2864 6174 6129 0a20 2020 2020 2020  ss(data).       
 0003fc10: 2065 6c69 6620 6d6f 6465 203d 3d20 2767   elif mode == 'g
 0003fc20: 7a69 7027 3a0a 2020 2020 2020 2020 2020  zip':.          
-0003fc30: 2020 7265 7475 726e 2067 7a69 702e 6465    return gzip.de
-0003fc40: 636f 6d70 7265 7373 2864 6174 6129 0a20  compress(data). 
-0003fc50: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0003fc60: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0003fc70: 7a6c 6962 2e64 6563 6f6d 7072 6573 7328  zlib.decompress(
-0003fc80: 6461 7461 290a 2020 2020 6578 6365 7074  data).    except
-0003fc90: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0003fca0: 2046 616c 7365 0a0a 6465 6620 7369 7a65   False..def size
-0003fcb0: 6f66 286f 626a 293a 0a20 2020 206d 7369  of(obj):.    msi
-0003fcc0: 7a65 203d 2030 0a20 2020 2069 6473 203d  ze = 0.    ids =
-0003fcd0: 2073 6574 2829 0a20 2020 206f 626a 6563   set().    objec
-0003fce0: 7473 203d 205b 6f62 6a5d 0a20 2020 2077  ts = [obj].    w
-0003fcf0: 6869 6c65 206f 626a 6563 7473 3a0a 2020  hile objects:.  
-0003fd00: 2020 2020 2020 6e65 7720 3d20 5b5d 0a20        new = []. 
-0003fd10: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0003fd20: 6f62 6a65 6374 733a 0a20 2020 2020 2020  objects:.       
-0003fd30: 2020 2020 2069 6620 6964 2869 2920 6e6f       if id(i) no
-0003fd40: 7420 696e 2069 6473 3a0a 2020 2020 2020  t in ids:.      
-0003fd50: 2020 2020 2020 2020 2020 6964 732e 6164            ids.ad
-0003fd60: 6428 6964 2869 2929 0a20 2020 2020 2020  d(id(i)).       
-0003fd70: 2020 2020 2020 2020 206d 7369 7a65 202b           msize +
-0003fd80: 3d20 7379 732e 6765 7473 697a 656f 6628  = sys.getsizeof(
-0003fd90: 6929 0a20 2020 2020 2020 2020 2020 2020  i).             
-0003fda0: 2020 206e 6577 2e61 7070 656e 6428 6929     new.append(i)
-0003fdb0: 0a20 2020 2020 2020 206f 626a 6563 7473  .        objects
-0003fdc0: 203d 2067 632e 6765 745f 7265 6665 7265   = gc.get_refere
-0003fdd0: 6e74 7328 2a6e 6577 290a 2020 2020 7265  nts(*new).    re
-0003fde0: 7475 726e 206d 7369 7a65 0a0a 6465 6620  turn msize..def 
-0003fdf0: 6875 6d61 6e5f 6279 7465 286e 756d 2c20  human_byte(num, 
-0003fe00: 756e 6974 3d22 4b22 2c20 7775 6e69 743d  unit="K", wunit=
-0003fe10: 4e6f 6e65 2c69 6e74 5f6f 7574 3d46 616c  None,int_out=Fal
-0003fe20: 7365 293a 0a20 2020 2075 6e69 7473 203d  se):.    units =
-0003fe30: 205b 2242 222c 224b 222c 224d 222c 2247   ["B","K","M","G
-0003fe40: 222c 2254 222c 2250 225d 0a20 2020 2069  ","T","P"].    i
-0003fe50: 6620 7775 6e69 7420 6973 204e 6f6e 653a  f wunit is None:
-0003fe60: 0a20 2020 2020 2020 2075 6e69 743d 756e  .        unit=un
-0003fe70: 6974 2e75 7070 6572 2829 0a20 2020 2020  it.upper().     
-0003fe80: 2020 2069 6620 6e75 6d20 3e3d 2031 3030     if num >= 100
-0003fe90: 303a 0a20 2020 2020 2020 2020 2020 2077  0:.            w
-0003fea0: 6869 6c65 206e 756d 203e 3d20 3130 3030  hile num >= 1000
-0003feb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003fec0: 2073 7569 3d75 6e69 7473 2e69 6e64 6578   sui=units.index
-0003fed0: 2875 6e69 7429 0a20 2020 2020 2020 2020  (unit).         
-0003fee0: 2020 2020 2020 6966 206c 656e 2875 6e69        if len(uni
-0003fef0: 7473 2920 3c3d 2073 7569 2b31 3a0a 2020  ts) <= sui+1:.  
-0003ff00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003ff10: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
-0003ff20: 2020 2020 2020 6e75 6d20 2f3d 2031 3032        num /= 102
-0003ff30: 342e 300a 2020 2020 2020 2020 2020 2020  4.0.            
-0003ff40: 2020 2075 6e69 7420 3d20 756e 6974 735b     unit = units[
-0003ff50: 7375 692b 315d 0a20 2020 2020 2020 2065  sui+1].        e
-0003ff60: 6c69 6620 6e75 6d20 3c20 313a 0a20 2020  lif num < 1:.   
-0003ff70: 2020 2020 2020 2020 2077 6869 6c65 206e           while n
-0003ff80: 756d 203c 2031 3a20 2330 2e58 5858 2064  um < 1: #0.XXX d
-0003ff90: 6967 6974 730a 2020 2020 2020 2020 2020  igits.          
-0003ffa0: 2020 2020 2073 7569 3d75 6e69 7473 2e69       sui=units.i
-0003ffb0: 6e64 6578 2875 6e69 7429 0a20 2020 2020  ndex(unit).     
-0003ffc0: 2020 2020 2020 2020 2020 6966 2073 7569            if sui
-0003ffd0: 2d31 203c 2030 3a0a 2020 2020 2020 2020  -1 < 0:.        
-0003ffe0: 2020 2020 2020 2020 2020 2062 7265 616b             break
-0003fff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00040000: 6e75 6d20 2a3d 2031 3032 342e 300a 2020  num *= 1024.0.  
-00040010: 2020 2020 2020 2020 2020 2020 2075 6e69               uni
-00040020: 7420 3d20 756e 6974 735b 7375 692d 315d  t = units[sui-1]
-00040030: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00040040: 2020 2077 756e 6974 3d77 756e 6974 2e75     wunit=wunit.u
-00040050: 7070 6572 2829 0a20 2020 2020 2020 2065  pper().        e
-00040060: 7569 3d75 6e69 7473 2e69 6e64 6578 2877  ui=units.index(w
-00040070: 756e 6974 290a 2020 2020 2020 2020 6966  unit).        if
-00040080: 2073 7569 203c 2065 7569 3a0a 2020 2020   sui < eui:.    
-00040090: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-000400a0: 2072 616e 6765 2873 7569 2c65 7569 293a   range(sui,eui):
-000400b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000400c0: 206e 756d 202f 3d20 3130 3234 2e30 0a20   num /= 1024.0. 
-000400d0: 2020 2020 2020 2065 6c69 6620 7375 6920         elif sui 
-000400e0: 3e20 6575 693a 0a20 2020 2020 2020 2020  > eui:.         
-000400f0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-00040100: 6528 7375 692c 6575 692c 2d31 293a 0a20  e(sui,eui,-1):. 
-00040110: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00040120: 756d 202a 3d20 3130 3234 2e30 0a20 2020  um *= 1024.0.   
-00040130: 2020 2020 2075 6e69 743d 7775 6e69 740a       unit=wunit.
-00040140: 2020 2020 6966 2069 6e74 5f6f 7574 3a0a      if int_out:.
-00040150: 2020 2020 2020 2020 7265 7475 726e 2066          return f
-00040160: 6c6f 6174 2822 252e 3166 2225 286e 756d  loat("%.1f"%(num
-00040170: 2929 0a20 2020 2065 6c73 653a 0a20 2020  )).    else:.   
-00040180: 2020 2020 2069 6620 756e 6974 203d 3d20       if unit == 
-00040190: 2242 223a 0a20 2020 2020 2020 2020 2020  "B":.           
-000401a0: 2072 6574 7572 6e20 2225 2e31 6620 2573   return "%.1f %s
-000401b0: 2220 2520 286e 756d 2c75 6e69 7429 0a20  " % (num,unit). 
-000401c0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000401d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000401e0: 2225 2e31 6620 2573 4222 2025 2028 6e75  "%.1f %sB" % (nu
-000401f0: 6d2c 756e 6974 290a 0a64 6566 2048 756d  m,unit)..def Hum
-00040200: 616e 5f55 6e69 7428 6e75 6d2c 756e 6974  an_Unit(num,unit
-00040210: 3d27 5327 2c77 616e 745f 756e 6974 3d4e  ='S',want_unit=N
-00040220: 6f6e 652c 696e 745f 6f75 743d 4661 6c73  one,int_out=Fals
-00040230: 6529 3a0a 2020 2020 6465 6620 636f 6e76  e):.    def conv
-00040240: 6572 745f 7365 635f 746f 5f66 6f72 6d61  ert_sec_to_forma
-00040250: 7428 6e75 6d2c 7761 6e74 5f66 6f72 6d61  t(num,want_forma
-00040260: 743d 2225 5920 256d 2025 6420 2548 3a25  t="%Y %m %d %H:%
-00040270: 4d3a 2553 2229 3a0a 2020 2020 2020 2020  M:%S"):.        
-00040280: 7265 7475 726e 2064 6174 6574 696d 652e  return datetime.
-00040290: 6461 7465 7469 6d65 2e66 726f 6d74 696d  datetime.fromtim
-000402a0: 6573 7461 6d70 286e 756d 292e 7374 7266  estamp(num).strf
-000402b0: 7469 6d65 2877 616e 745f 666f 726d 6174  time(want_format
-000402c0: 290a 2020 2020 6465 6620 636f 6e76 6572  ).    def conver
-000402d0: 745f 696e 745f 7469 6d65 5f74 6f5f 7968  t_int_time_to_yh
-000402e0: 6d73 286e 756d 2c75 6e69 743d 2753 272c  ms(num,unit='S',
-000402f0: 7761 6e74 3d4e 6f6e 6529 3a0a 2020 2020  want=None):.    
-00040300: 2020 2020 633d 5b33 3135 3336 3030 302c      c=[31536000,
-00040310: 3836 3430 302c 3336 3030 2c36 302c 315d  86400,3600,60,1]
-00040320: 2023 2079 792c 6464 2c68 682c 6d6d 2c73   # yy,dd,hh,mm,s
-00040330: 730a 2020 2020 2020 2020 6375 3d5b 2759  s.        cu=['Y
-00040340: 272c 2744 272c 2748 272c 274d 272c 2753  ','D','H','M','S
-00040350: 275d 2020 2020 2023 2079 792c 6464 2c68  ']     # yy,dd,h
-00040360: 682c 6d6d 2c73 730a 2020 2020 2020 2020  h,mm,ss.        
-00040370: 6966 2069 7369 6e73 7461 6e63 6528 7761  if isinstance(wa
-00040380: 6e74 2c73 7472 2920 616e 6420 7761 6e74  nt,str) and want
-00040390: 2061 6e64 2077 616e 7420 696e 2063 753a   and want in cu:
-000403a0: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
-000403b0: 7274 5f69 3d63 752e 696e 6465 7828 7761  rt_i=cu.index(wa
-000403c0: 6e74 290a 2020 2020 2020 2020 656c 7365  nt).        else
-000403d0: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
-000403e0: 6172 745f 693d 300a 2020 2020 2020 2020  art_i=0.        
-000403f0: 6966 2069 7369 6e73 7461 6e63 6528 756e  if isinstance(un
-00040400: 6974 2c73 7472 2920 616e 6420 756e 6974  it,str) and unit
-00040410: 2061 6e64 2075 6e69 7420 696e 2063 753a   and unit in cu:
-00040420: 0a20 2020 2020 2020 2020 2020 206d 783d  .            mx=
-00040430: 6375 2e69 6e64 6578 2875 6e69 7429 0a20  cu.index(unit). 
-00040440: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00040450: 2020 2020 2020 2020 206d 783d 6c65 6e28           mx=len(
-00040460: 6329 2d31 0a20 2020 2020 2020 2069 6620  c)-1.        if 
-00040470: 6d78 203d 3d20 6c65 6e28 6329 2d31 3a20  mx == len(c)-1: 
-00040480: 2320 7365 6320 2d3e 2077 616e 740a 2020  # sec -> want.  
-00040490: 2020 2020 2020 2020 2020 6f3d 7b7d 0a20            o={}. 
-000404a0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-000404b0: 2069 6e20 7261 6e67 6528 7374 6172 745f   in range(start_
-000404c0: 692c 6d78 2b31 293a 0a20 2020 2020 2020  i,mx+1):.       
-000404d0: 2020 2020 2020 2020 2069 6620 286d 7820           if (mx 
-000404e0: 3d3d 2069 2061 6e64 206e 756d 203e 3d20  == i and num >= 
-000404f0: 635b 695d 2920 6f72 206e 756d 203e 2063  c[i]) or num > c
-00040500: 5b69 5d3a 0a20 2020 2020 2020 2020 2020  [i]:.           
-00040510: 2020 2020 2020 2020 206f 5b63 755b 695d           o[cu[i]
-00040520: 5d3d 6e75 6d2f 2f63 5b69 5d0a 2020 2020  ]=num//c[i].    
-00040530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040540: 6e75 6d3d 6e75 6d25 2863 5b69 5d2a 6f5b  num=num%(c[i]*o[
-00040550: 6375 5b69 5d5d 290a 2020 2020 2020 2020  cu[i]]).        
-00040560: 2020 2020 7265 7475 726e 206f 0a20 2020      return o.   
-00040570: 2020 2020 2065 6c73 653a 2020 2320 756e       else:  # un
-00040580: 6974 202d 3e20 7365 6320 616e 6420 6361  it -> sec and ca
-00040590: 6c63 756c 6174 6520 7365 6320 746f 2077  lculate sec to w
-000405a0: 616e 740a 2020 2020 2020 2020 2020 2020  ant.            
-000405b0: 6e75 6d20 3d20 6e75 6d20 2a20 635b 6d78  num = num * c[mx
-000405c0: 5d20 2320 636f 6e76 6572 7420 746f 2075  ] # convert to u
-000405d0: 6e69 7420 746f 2073 6563 6f6e 6473 0a20  nit to seconds. 
-000405e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000405f0: 6e20 636f 6e76 6572 745f 696e 745f 7469  n convert_int_ti
-00040600: 6d65 5f74 6f5f 7968 6d73 286e 756d 2c75  me_to_yhms(num,u
-00040610: 6e69 743d 2753 272c 7761 6e74 3d77 616e  nit='S',want=wan
-00040620: 7429 0a20 2020 2069 6620 6973 696e 7374  t).    if isinst
-00040630: 616e 6365 2875 6e69 742c 7374 7229 2061  ance(unit,str) a
-00040640: 6e64 2075 6e69 7420 616e 6420 2877 616e  nd unit and (wan
-00040650: 745f 756e 6974 2069 7320 4e6f 6e65 206f  t_unit is None o
-00040660: 7220 6973 696e 7374 616e 6365 2877 616e  r isinstance(wan
-00040670: 745f 756e 6974 2c73 7472 2929 3a0a 2020  t_unit,str)):.  
-00040680: 2020 2020 2020 6966 2075 6e69 742e 7570        if unit.up
-00040690: 7065 7228 2920 696e 205b 274d 4d27 2c27  per() in ['MM','
-000406a0: 4d49 4e27 2c27 5927 2c27 5959 272c 2759  MIN','Y','YY','Y
-000406b0: 4541 5227 2c27 4848 272c 2748 272c 2748  EAR','HH','H','H
-000406c0: 4f55 5227 2c27 5327 2c27 5345 4327 2c27  OUR','S','SEC','
-000406d0: 5353 275d 3a0a 2020 2020 2020 2020 2020  SS']:.          
-000406e0: 2020 6d6f 6465 3d27 7469 6d65 270a 2020    mode='time'.  
-000406f0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00040700: 6e73 7461 6e63 6528 7761 6e74 5f75 6e69  nstance(want_uni
-00040710: 742c 7374 7229 3a0a 2020 2020 2020 2020  t,str):.        
-00040720: 2020 2020 2020 2020 7570 5f77 616e 745f          up_want_
-00040730: 756e 6974 3d77 616e 745f 756e 6974 2e75  unit=want_unit.u
-00040740: 7070 6572 2829 0a20 2020 2020 2020 2020  pper().         
-00040750: 2020 2020 2020 2069 6620 7570 5f77 616e         if up_wan
-00040760: 745f 756e 6974 2069 6e20 5b27 484f 5552  t_unit in ['HOUR
-00040770: 272c 2748 4827 2c27 484f 5552 5327 2c27  ','HH','HOURS','
-00040780: 4827 5d3a 2077 616e 745f 756e 6974 3d27  H']: want_unit='
-00040790: 4827 0a20 2020 2020 2020 2020 2020 2020  H'.             
-000407a0: 2020 2065 6c69 6620 7570 5f77 616e 745f     elif up_want_
-000407b0: 756e 6974 2069 6e20 5b27 4d49 4e27 2c27  unit in ['MIN','
-000407c0: 4d4d 272c 274d 494e 5554 4527 2c27 4d49  MM','MINUTE','MI
-000407d0: 4e55 5445 5327 2c27 4d27 5d3a 2077 616e  NUTES','M']: wan
-000407e0: 745f 756e 6974 3d27 4d27 0a20 2020 2020  t_unit='M'.     
-000407f0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00040800: 7570 5f77 616e 745f 756e 6974 2069 6e20  up_want_unit in 
-00040810: 5b27 4441 5927 2c27 4444 272c 2744 4159  ['DAY','DD','DAY
-00040820: 5327 2c27 4427 5d3a 2077 616e 745f 756e  S','D']: want_un
-00040830: 6974 3d27 4427 0a20 2020 2020 2020 2020  it='D'.         
-00040840: 2020 2020 2020 2065 6c69 6620 7570 5f77         elif up_w
-00040850: 616e 745f 756e 6974 2069 6e20 5b27 5945  ant_unit in ['YE
-00040860: 4152 272c 2759 5927 2c27 5945 4152 5327  AR','YY','YEARS'
-00040870: 2c27 5927 5d3a 2077 616e 745f 756e 6974  ,'Y']: want_unit
-00040880: 3d27 5927 0a20 2020 2020 2020 2020 2020  ='Y'.           
-00040890: 2020 2020 2065 6c69 6620 7570 5f77 616e       elif up_wan
-000408a0: 745f 756e 6974 2069 6e20 5b27 5345 4327  t_unit in ['SEC'
-000408b0: 2c27 5353 272c 2753 4543 4f4e 4427 2c27  ,'SS','SECOND','
-000408c0: 5345 434f 4e44 5327 2c27 5327 5d3a 2077  SECONDS','S']: w
-000408d0: 616e 745f 756e 6974 3d27 5327 0a20 2020  ant_unit='S'.   
-000408e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000408f0: 2020 2020 2020 206d 6f64 653d 2762 7974         mode='byt
-00040900: 6527 0a20 2020 2020 2020 206e 756d 5f75  e'.        num_u
-00040910: 6e69 743d 756e 6974 5b30 5d2e 7570 7065  nit=unit[0].uppe
-00040920: 7228 290a 2020 2020 2020 2020 2354 494d  r().        #TIM
-00040930: 450a 2020 2020 2020 2020 6966 206e 756d  E.        if num
-00040940: 5f75 6e69 7420 3d3d 2027 5327 2061 6e64  _unit == 'S' and
-00040950: 2028 6973 696e 7374 616e 6365 2877 616e   (isinstance(wan
-00040960: 745f 756e 6974 2c73 7472 2920 616e 6420  t_unit,str) and 
-00040970: 7761 6e74 5f75 6e69 7420 616e 6420 7761  want_unit and wa
-00040980: 6e74 5f75 6e69 745b 305d 203d 3d20 2725  nt_unit[0] == '%
-00040990: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-000409a0: 6966 206c 656e 2877 616e 745f 756e 6974  if len(want_unit
-000409b0: 2920 3d3d 2031 3a0a 2020 2020 2020 2020  ) == 1:.        
-000409c0: 2020 2020 2020 2020 7265 7475 726e 2063          return c
-000409d0: 6f6e 7665 7274 5f73 6563 5f74 6f5f 666f  onvert_sec_to_fo
-000409e0: 726d 6174 286e 756d 2c77 616e 745f 666f  rmat(num,want_fo
-000409f0: 726d 6174 3d22 2559 2025 6d20 2564 2025  rmat="%Y %m %d %
-00040a00: 483a 254d 3a25 5322 290a 2020 2020 2020  H:%M:%S").      
-00040a10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00040a20: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00040a30: 726e 2063 6f6e 7665 7274 5f73 6563 5f74  rn convert_sec_t
-00040a40: 6f5f 666f 726d 6174 286e 756d 2c77 616e  o_format(num,wan
-00040a50: 745f 666f 726d 6174 3d77 616e 745f 756e  t_format=want_un
-00040a60: 6974 290a 2020 2020 2020 2020 2354 494d  it).        #TIM
-00040a70: 450a 2020 2020 2020 2020 656c 6966 2028  E.        elif (
-00040a80: 6d6f 6465 203d 3d20 2774 696d 6527 2061  mode == 'time' a
-00040a90: 6e64 2077 616e 745f 756e 6974 2069 6e20  nd want_unit in 
-00040aa0: 5b27 5927 2c27 4427 2c27 4827 2c27 4d27  ['Y','D','H','M'
-00040ab0: 2c27 5327 2c4e 6f6e 655d 2920 6f72 2028  ,'S',None]) or (
-00040ac0: 6e75 6d5f 756e 6974 2069 6e20 5b27 5927  num_unit in ['Y'
-00040ad0: 2c27 4427 2c27 4827 2c27 4d27 2c27 5327  ,'D','H','M','S'
-00040ae0: 5d20 616e 6420 7761 6e74 5f75 6e69 7420  ] and want_unit 
-00040af0: 696e 205b 2759 272c 2744 272c 2748 272c  in ['Y','D','H',
-00040b00: 274d 272c 2753 275d 293a 0a20 2020 2020  'M','S']):.     
-00040b10: 2020 2020 2020 206f 6f3d 636f 6e76 6572         oo=conver
-00040b20: 745f 696e 745f 7469 6d65 5f74 6f5f 7968  t_int_time_to_yh
-00040b30: 6d73 286e 756d 2c75 6e69 743d 6e75 6d5f  ms(num,unit=num_
-00040b40: 756e 6974 2c77 616e 743d 7761 6e74 5f75  unit,want=want_u
-00040b50: 6e69 7429 0a20 2020 2020 2020 2020 2020  nit).           
-00040b60: 2069 6620 696e 745f 6f75 743a 0a20 2020   if int_out:.   
-00040b70: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00040b80: 7761 6e74 5f75 6e69 743a 2320 616e 6420  want_unit:# and 
-00040b90: 7761 6e74 5f75 6e69 7420 696e 206f 6f3a  want_unit in oo:
-00040ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00040bb0: 2020 2020 2072 6574 7572 6e20 6f6f 2e67       return oo.g
-00040bc0: 6574 2877 616e 745f 756e 6974 2c30 290a  et(want_unit,0).
-00040bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040be0: 656c 7365 3a20 2320 6966 2077 616e 7420  else: # if want 
-00040bf0: 756e 6974 2069 7320 4e6f 6e65 2074 6865  unit is None the
-00040c00: 6e20 7265 7475 726e 206e 756d 0a20 2020  n return num.   
-00040c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040c20: 2072 6574 7572 6e20 6e75 6d0a 2020 2020   return num.    
-00040c30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00040c40: 2020 2020 2020 2020 2020 2020 2020 6f3d                o=
-00040c50: 2727 0a20 2020 2020 2020 2020 2020 2020  ''.             
-00040c60: 2020 2066 6f72 2069 2069 6e20 5b27 5927     for i in ['Y'
-00040c70: 2c27 4427 2c27 4827 2c27 4d27 2c27 5327  ,'D','H','M','S'
-00040c80: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-00040c90: 2020 2020 2020 2069 6620 6920 696e 206f         if i in o
-00040ca0: 6f3a 0a20 2020 2020 2020 2020 2020 2020  o:.             
-00040cb0: 2020 2020 2020 2020 2020 2069 6620 6f3a             if o:
-00040cc0: 206f 3d6f 2b27 207b 7d7b 7d27 2e66 6f72   o=o+' {}{}'.for
-00040cd0: 6d61 7428 6f6f 5b69 5d2c 6929 0a20 2020  mat(oo[i],i).   
-00040ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040cf0: 2020 2020 2065 6c73 653a 206f 3d27 7b7d       else: o='{}
-00040d00: 7b7d 272e 666f 726d 6174 286f 6f5b 695d  {}'.format(oo[i]
-00040d10: 2c69 290a 2020 2020 2020 2020 2020 2020  ,i).            
-00040d20: 2020 2020 7265 7475 726e 206f 0a20 2020      return o.   
-00040d30: 2020 2020 2023 4279 7465 0a20 2020 2020       #Byte.     
-00040d40: 2020 2065 6c69 6620 6e75 6d5f 756e 6974     elif num_unit
-00040d50: 2069 6e20 5b22 4222 2c22 4b22 2c22 4d22   in ["B","K","M"
-00040d60: 2c22 4722 2c22 5422 2c22 5022 5d20 616e  ,"G","T","P"] an
-00040d70: 6420 7761 6e74 5f75 6e69 7420 696e 205b  d want_unit in [
-00040d80: 2242 222c 224b 222c 224d 222c 2247 222c  "B","K","M","G",
-00040d90: 2254 222c 2250 222c 4e6f 6e65 5d3a 0a20  "T","P",None]:. 
-00040da0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00040db0: 6e20 6875 6d61 6e5f 6279 7465 286e 756d  n human_byte(num
-00040dc0: 2c20 756e 6974 3d6e 756d 5f75 6e69 742c  , unit=num_unit,
-00040dd0: 2077 756e 6974 3d77 616e 745f 756e 6974   wunit=want_unit
-00040de0: 2c20 696e 745f 6f75 743d 696e 745f 6f75  , int_out=int_ou
-00040df0: 7429 0a20 2020 2072 6574 7572 6e20 2755  t).    return 'U
-00040e00: 6e6b 6e6f 776e 2055 6e69 7428 7b7d 202d  nknown Unit({} -
-00040e10: 3e20 7b7d 2927 2e66 6f72 6d61 7428 756e  > {})'.format(un
-00040e20: 6974 2c77 616e 745f 756e 6974 290a 0a63  it,want_unit)..c
-00040e30: 6c61 7373 2046 494c 455f 573a 0a20 2020  lass FILE_W:.   
-00040e40: 2027 2727 0a20 2020 204e 6577 2064 6573   '''.    New des
-00040e50: 6967 6e20 746f 2073 696d 706c 650a 2020  ign to simple.  
-00040e60: 2020 7375 625f 6469 7220 203a 2054 7275    sub_dir  : Tru
-00040e70: 6520 2847 6574 2066 696c 6573 2069 6e20  e (Get files in 
-00040e80: 7265 6375 7269 6e67 2064 6972 6563 746f  recuring directo
-00040e90: 7279 290a 2020 2020 6461 7461 2020 2020  ry).    data    
-00040ea0: 203a 2054 7275 6520 2847 6574 2046 696c   : True (Get Fil
-00040eb0: 6520 4461 7461 290a 2020 2020 6d64 3573  e Data).    md5s
-00040ec0: 756d 2020 203a 2054 7275 6520 2847 6574  um   : True (Get
-00040ed0: 2046 696c 6527 7320 4d44 3520 5355 4d29   File's MD5 SUM)
-00040ee0: 0a20 2020 206c 696e 6b32 6669 6c65 3a20  .    link2file: 
-00040ef0: 5472 7565 2028 4d61 6b65 2061 2072 6561  True (Make a rea
-00040f00: 6c20 6669 6c65 2069 6e73 7465 6164 2073  l file instead s
-00040f10: 796d 2d6c 696e 6b20 6669 6c65 290a 2020  ym-link file).  
-00040f20: 2020 6669 6c65 2066 6f72 6d61 7420 3a20    file format : 
-00040f30: 7369 7a65 2028 3133 292b 6865 6164 287b  size (13)+head({
-00040f40: 7d29 2b64 6174 6128 5b2c 2c2c 2c2c 5d29  })+data([,,,,,])
-00040f50: 0a20 2020 2068 6561 643a 207b 696e 666f  .    head: {info
-00040f60: 7b7d 2c64 6174 615f 6964 3a78 7d0a 2020  {},data_id:x}.  
-00040f70: 2020 2727 270a 2020 2020 6465 6620 5f5f    '''.    def __
-00040f80: 696e 6974 5f5f 2873 656c 662c 2a69 6e70  init__(self,*inp
-00040f90: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2020  ,**opts):.      
-00040fa0: 2020 7365 6c66 2e72 6f6f 745f 7061 7468    self.root_path
-00040fb0: 3d6f 7074 732e 6765 7428 2772 6f6f 745f  =opts.get('root_
-00040fc0: 7061 7468 272c 4e6f 6e65 290a 2020 2020  path',None).    
-00040fd0: 2020 2020 6966 2049 734e 6f6e 6528 7365      if IsNone(se
-00040fe0: 6c66 2e72 6f6f 745f 7061 7468 293a 2073  lf.root_path): s
-00040ff0: 656c 662e 726f 6f74 5f70 6174 683d 5061  elf.root_path=Pa
-00041000: 7468 2829 0a20 2020 2020 2020 2073 656c  th().        sel
-00041010: 662e 696e 666f 3d6f 7074 732e 6765 7428  f.info=opts.get(
-00041020: 2769 6e66 6f27 2c6f 7074 732e 6765 7428  'info',opts.get(
-00041030: 2764 6174 6127 2c7b 7d29 290a 0a20 2020  'data',{}))..   
-00041040: 2064 6566 204c 6973 7428 7365 6c66 2c6e   def List(self,n
-00041050: 616d 652c 7375 625f 6469 723d 4661 6c73  ame,sub_dir=Fals
-00041060: 652c 6469 726e 616d 653d 4661 6c73 652c  e,dirname=False,
-00041070: 6465 6661 756c 743d 5b5d 293a 0a20 2020  default=[]):.   
-00041080: 2020 2020 2023 6765 7420 6469 7265 6374       #get direct
-00041090: 6f72 7920 616e 6420 6561 6368 2064 6972  ory and each dir
-000410a0: 6563 746f 7269 6573 2720 6669 6c65 206c  ectories' file l
-000410b0: 6973 740a 2020 2020 2020 2020 6966 2069  ist.        if i
-000410c0: 7369 6e73 7461 6e63 6528 6e61 6d65 2c73  sinstance(name,s
-000410d0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-000410e0: 2069 6620 6e61 6d65 5b30 5d20 3d3d 2027   if name[0] == '
-000410f0: 2f27 3a20 2023 2053 7461 7274 2066 726f  /':  # Start fro
-00041100: 6d20 726f 6f74 2070 6174 680a 2020 2020  m root path.    
-00041110: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-00041120: 732e 7061 7468 2e69 7366 696c 6528 6e61  s.path.isfile(na
-00041130: 6d65 2920 6f72 206f 732e 7061 7468 2e69  me) or os.path.i
-00041140: 736c 696e 6b28 6e61 6d65 293a 2072 6574  slink(name): ret
-00041150: 7572 6e20 6f73 2e70 6174 682e 6469 726e  urn os.path.dirn
-00041160: 616d 6528 6e61 6d65 292c 5b6f 732e 7061  ame(name),[os.pa
-00041170: 7468 2e62 6173 656e 616d 6528 6e61 6d65  th.basename(name
-00041180: 295d 0a20 2020 2020 2020 2020 2020 2020  )].             
-00041190: 2020 2069 6620 6f73 2e70 6174 682e 6973     if os.path.is
-000411a0: 6469 7228 6e61 6d65 293a 0a20 2020 2020  dir(name):.     
-000411b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000411c0: 6620 7375 625f 6469 723a 0a20 2020 2020  f sub_dir:.     
-000411d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000411e0: 2020 2072 7420 3d20 5b5d 0a20 2020 2020     rt = [].     
-000411f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041200: 2020 2070 7764 3d6f 732e 6765 7463 7764     pwd=os.getcwd
-00041210: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-00041220: 2020 2020 2020 2020 2020 206f 732e 6368             os.ch
-00041230: 6469 7228 6e61 6d65 290a 2020 2020 2020  dir(name).      
-00041240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041250: 2020 666f 7220 6261 7365 2c20 6469 7273    for base, dirs
-00041260: 2c20 6669 6c65 7320 696e 206f 732e 7761  , files in os.wa
-00041270: 6c6b 2827 2e27 293a 0a20 2020 2020 2020  lk('.'):.       
-00041280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041290: 2020 2020 2069 6620 6469 726e 616d 653a       if dirname:
-000412a0: 2072 742e 6578 7465 6e64 286f 732e 7061   rt.extend(os.pa
-000412b0: 7468 2e6a 6f69 6e28 6261 7365 5b32 3a5d  th.join(base[2:]
-000412c0: 2c20 6429 2066 6f72 2064 2069 6e20 6469  , d) for d in di
-000412d0: 7273 290a 2020 2020 2020 2020 2020 2020  rs).            
-000412e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000412f0: 7274 2e65 7874 656e 6428 6f73 2e70 6174  rt.extend(os.pat
-00041300: 682e 6a6f 696e 2862 6173 655b 323a 5d2c  h.join(base[2:],
-00041310: 2066 2920 666f 7220 6620 696e 2066 696c   f) for f in fil
-00041320: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
-00041330: 2020 2020 2020 2020 2020 2020 6f73 2e63              os.c
-00041340: 6864 6972 2870 7764 290a 2020 2020 2020  hdir(pwd).      
-00041350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041360: 2020 7265 7475 726e 2050 6174 6828 6e61    return Path(na
-00041370: 6d65 292c 7274 0a20 2020 2020 2020 2020  me),rt.         
-00041380: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00041390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000413a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000413b0: 5061 7468 286e 616d 6529 2c5b 6620 666f  Path(name),[f fo
-000413c0: 7220 6620 696e 206f 732e 6c69 7374 6469  r f in os.listdi
-000413d0: 7228 6e61 6d65 295d 0a20 2020 2020 2020  r(name)].       
-000413e0: 2020 2020 2065 6c69 6620 7365 6c66 2e72       elif self.r
-000413f0: 6f6f 745f 7061 7468 3a20 2320 7374 6172  oot_path: # star
-00041400: 7420 6672 6f6d 2064 6566 696e 6564 2072  t from defined r
-00041410: 6f6f 7420 7061 7468 0a20 2020 2020 2020  oot path.       
-00041420: 2020 2020 2020 2020 2063 686b 5f70 6174           chk_pat
-00041430: 683d 5061 7468 2873 656c 662e 726f 6f74  h=Path(self.root
-00041440: 5f70 6174 682c 6e61 6d65 290a 2020 2020  _path,name).    
-00041450: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-00041460: 732e 7061 7468 2e69 7366 696c 6528 6368  s.path.isfile(ch
-00041470: 6b5f 7061 7468 2920 6f72 206f 732e 7061  k_path) or os.pa
-00041480: 7468 2e69 736c 696e 6b28 6368 6b5f 7061  th.islink(chk_pa
-00041490: 7468 293a 2072 6574 7572 6e20 5061 7468  th): return Path
-000414a0: 2873 656c 662e 726f 6f74 5f70 6174 6829  (self.root_path)
-000414b0: 2c5b 6e61 6d65 5d0a 2020 2020 2020 2020  ,[name].        
-000414c0: 2020 2020 2020 2020 6966 206f 732e 7061          if os.pa
-000414d0: 7468 2e69 7364 6972 2863 686b 5f70 6174  th.isdir(chk_pat
-000414e0: 6829 3a0a 2020 2020 2020 2020 2020 2020  h):.            
-000414f0: 2020 2020 2020 2020 6966 2073 7562 5f64          if sub_d
-00041500: 6972 3a0a 2020 2020 2020 2020 2020 2020  ir:.            
-00041510: 2020 2020 2020 2020 2020 2020 7274 203d              rt =
-00041520: 205b 5d0a 2020 2020 2020 2020 2020 2020   [].            
-00041530: 2020 2020 2020 2020 2020 2020 7077 643d              pwd=
-00041540: 6f73 2e67 6574 6377 6428 290a 2020 2020  os.getcwd().    
-00041550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041560: 2020 2020 6f73 2e63 6864 6972 2873 656c      os.chdir(sel
-00041570: 662e 726f 6f74 5f70 6174 6829 2023 2047  f.root_path) # G
-00041580: 6f69 6e67 2074 6f20 6465 6669 6e65 6420  oing to defined 
-00041590: 726f 6f74 2070 6174 680a 2020 2020 2020  root path.      
-000415a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000415b0: 2020 2320 4765 7420 7265 6375 7269 6e67    # Get recuring
-000415c0: 2066 696c 6520 6c69 7374 206f 6620 7468   file list of th
-000415d0: 6520 6e61 6d65 2028 7768 656e 2063 7572  e name (when cur
-000415e0: 7265 6e74 2064 6972 2074 6865 6e20 272e  rent dir then '.
-000415f0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00041600: 2020 2020 2020 2020 2020 2066 6f72 2062             for b
-00041610: 6173 652c 2064 6972 732c 2066 696c 6573  ase, dirs, files
-00041620: 2069 6e20 6f73 2e77 616c 6b28 6e61 6d65   in os.walk(name
-00041630: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00041640: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00041650: 6620 6469 726e 616d 653a 2072 742e 6578  f dirname: rt.ex
-00041660: 7465 6e64 286f 732e 7061 7468 2e6a 6f69  tend(os.path.joi
-00041670: 6e28 6261 7365 5b32 3a5d 2c20 6429 2066  n(base[2:], d) f
-00041680: 6f72 2064 2069 6e20 6469 7273 290a 2020  or d in dirs).  
-00041690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000416a0: 2020 2020 2020 2020 2020 7274 2e65 7874            rt.ext
-000416b0: 656e 6428 6f73 2e70 6174 682e 6a6f 696e  end(os.path.join
-000416c0: 2862 6173 655b 323a 5d2c 2066 2920 666f  (base[2:], f) fo
-000416d0: 7220 6620 696e 2066 696c 6573 290a 2020  r f in files).  
-000416e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000416f0: 2020 2020 2020 6f73 2e63 6864 6972 2870        os.chdir(p
-00041700: 7764 2920 2320 7265 636f 7665 7220 746f  wd) # recover to
-00041710: 2074 6865 206f 7269 6769 6e61 6c20 7061   the original pa
-00041720: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
-00041730: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00041740: 6e20 5061 7468 2873 656c 662e 726f 6f74  n Path(self.root
-00041750: 5f70 6174 6829 2c72 740a 2020 2020 2020  _path),rt.      
-00041760: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00041770: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00041780: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00041790: 616d 6520 3d3d 2027 2e27 3a20 6e61 6d65  ame == '.': name
-000417a0: 3d27 270a 2020 2020 2020 2020 2020 2020  =''.            
-000417b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000417c0: 726e 2050 6174 6828 7365 6c66 2e72 6f6f  rn Path(self.roo
-000417d0: 745f 7061 7468 292c 5b6f 732e 7061 7468  t_path),[os.path
-000417e0: 2e6a 6f69 6e28 6e61 6d65 2c66 2920 666f  .join(name,f) fo
-000417f0: 7220 6620 696e 206f 732e 6c69 7374 6469  r f in os.listdi
-00041800: 7228 277b 7d2f 7b7d 272e 666f 726d 6174  r('{}/{}'.format
-00041810: 2873 656c 662e 726f 6f74 5f70 6174 682c  (self.root_path,
-00041820: 6e61 6d65 2929 5d0a 2020 2020 2020 2020  name))].        
-00041830: 7265 7475 726e 2064 6566 6175 6c74 2c5b  return default,[
-00041840: 5d0a 0a20 2020 2064 6566 2046 696c 654e  ]..    def FileN
-00041850: 616d 6528 7365 6c66 2c66 696c 656e 616d  ame(self,filenam
-00041860: 6529 3a0a 2020 2020 2020 2020 6966 2069  e):.        if i
-00041870: 7369 6e73 7461 6e63 6528 6669 6c65 6e61  sinstance(filena
-00041880: 6d65 2c73 7472 293a 0a20 2020 2020 2020  me,str):.       
-00041890: 2020 2020 2066 696c 656e 616d 655f 696e       filename_in
-000418a0: 666f 3d6f 732e 7061 7468 2e62 6173 656e  fo=os.path.basen
-000418b0: 616d 6528 6669 6c65 6e61 6d65 292e 7370  ame(filename).sp
-000418c0: 6c69 7428 272e 2729 0a20 2020 2020 2020  lit('.').       
-000418d0: 2020 2020 2069 6620 2774 6172 2720 696e       if 'tar' in
-000418e0: 2066 696c 656e 616d 655f 696e 666f 3a0a   filename_info:.
-000418f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041900: 6964 783d 6669 6c65 6e61 6d65 5f69 6e66  idx=filename_inf
-00041910: 6f2e 696e 6465 7828 2774 6172 2729 0a20  o.index('tar'). 
-00041920: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00041930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00041940: 2069 6478 3d2d 310a 2020 2020 2020 2020   idx=-1.        
-00041950: 2020 2020 7265 7475 726e 204a 6f69 6e28      return Join(
-00041960: 6669 6c65 6e61 6d65 5f69 6e66 6f5b 3a69  filename_info[:i
-00041970: 6478 5d2c 7379 6d62 6f6c 3d27 2e27 292c  dx],symbol='.'),
-00041980: 4a6f 696e 2866 696c 656e 616d 655f 696e  Join(filename_in
-00041990: 666f 5b69 6478 3a5d 2c73 796d 626f 6c3d  fo[idx:],symbol=
-000419a0: 272e 2729 0a20 2020 2020 2020 2072 6574  '.').        ret
-000419b0: 7572 6e20 4e6f 6e65 2c4e 6f6e 650a 0a20  urn None,None.. 
-000419c0: 2020 2064 6566 2046 696c 6554 7970 6528     def FileType(
-000419d0: 7365 6c66 2c66 696c 656e 616d 652c 6465  self,filename,de
-000419e0: 6661 756c 743d 4661 6c73 6529 3a0a 2020  fault=False):.  
-000419f0: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-00041a00: 6e73 7461 6e63 6528 6669 6c65 6e61 6d65  nstance(filename
-00041a10: 2c73 7472 2920 6f72 206e 6f74 206f 732e  ,str) or not os.
-00041a20: 7061 7468 2e69 7366 696c 6528 6669 6c65  path.isfile(file
-00041a30: 6e61 6d65 293a 2072 6574 7572 6e20 6465  name): return de
-00041a40: 6661 756c 740a 2020 2020 2020 2020 496d  fault.        Im
-00041a50: 706f 7274 2827 696d 706f 7274 206d 6167  port('import mag
-00041a60: 6963 2729 0a20 2020 2020 2020 2066 3d6f  ic').        f=o
-00041a70: 7065 6e28 6669 6c65 6e61 6d65 2c27 7262  pen(filename,'rb
-00041a80: 2729 0a20 2020 2020 2020 2061 613d 6d61  ').        aa=ma
-00041a90: 6769 632e 6672 6f6d 5f62 7566 6665 7228  gic.from_buffer(
-00041aa0: 662e 7265 6164 2832 3034 3829 290a 2020  f.read(2048)).  
-00041ab0: 2020 2020 2020 662e 636c 6f73 6528 290a        f.close().
-00041ac0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00041ad0: 7461 6e63 6528 6161 2c73 7472 293a 2072  tance(aa,str): r
-00041ae0: 6574 7572 6e20 6161 2e73 706c 6974 2829  eturn aa.split()
-00041af0: 5b30 5d2e 6c6f 7765 7228 290a 2020 2020  [0].lower().    
-00041b00: 2020 2020 7265 7475 726e 2027 756e 6b6e      return 'unkn
-00041b10: 6f77 6e27 0a0a 2020 2020 6465 6620 4669  own'..    def Fi
-00041b20: 6c65 496e 666f 2873 656c 662c 6669 6c65  leInfo(self,file
-00041b30: 6e61 6d65 2c72 6f6f 7473 3d4e 6f6e 652c  name,roots=None,
-00041b40: 5f74 7970 653d 4e6f 6e65 2c65 7869 7374  _type=None,exist
-00041b50: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-00041b60: 6966 2073 656c 662e 696e 666f 3a20 2320  if self.info: # 
-00041b70: 6672 6f6d 2069 6e73 6964 6520 6461 7461  from inside data
-00041b80: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00041b90: 4973 4e6f 6e65 2872 6f6f 7473 293a 2072  IsNone(roots): r
-00041ba0: 6f6f 7473 3d73 656c 662e 4669 6e64 5250  oots=self.FindRP
-00041bb0: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
-00041bc0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-00041bd0: 2866 696c 656e 616d 652c 7374 7229 206f  (filename,str) o
-00041be0: 7220 4973 4e6f 6e65 2866 696c 656e 616d  r IsNone(filenam
-00041bf0: 6529 3a20 7265 7475 726e 2046 616c 7365  e): return False
-00041c00: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00041c10: 2072 6f6f 7420 696e 2072 6f6f 7473 3a0a   root in roots:.
-00041c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041c30: 7274 3d73 656c 662e 696e 666f 2e67 6574  rt=self.info.get
-00041c40: 2872 6f6f 742c 7b7d 290a 2020 2020 2020  (root,{}).      
-00041c50: 2020 2020 2020 2020 2020 666f 7220 6969            for ii
-00041c60: 2069 6e20 6669 6c65 6e61 6d65 2e73 706c   in filename.spl
-00041c70: 6974 2827 2f27 293a 0a20 2020 2020 2020  it('/'):.       
-00041c80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00041c90: 6969 206e 6f74 2069 6e20 7274 3a20 7265  ii not in rt: re
-00041ca0: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
-00041cb0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00041cc0: 743d 7274 5b69 695d 0a20 2020 2020 2020  t=rt[ii].       
-00041cd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00041ce0: 7274 2e67 6574 2827 2069 2027 2c46 616c  rt.get(' i ',Fal
-00041cf0: 7365 290a 0a20 2020 2020 2020 2023 2066  se)..        # f
-00041d00: 726f 6d20 7265 616c 2066 696c 650a 2020  rom real file.  
-00041d10: 2020 2020 2020 7274 3d7b 7d0a 2020 2020        rt={}.    
-00041d20: 2020 2020 6966 2065 7869 7374 2069 7320      if exist is 
-00041d30: 4661 6c73 653a 2072 6574 7572 6e20 7b27  False: return {'
-00041d40: 6578 6973 7427 3a46 616c 7365 7d0a 2020  exist':False}.  
-00041d50: 2020 2020 2020 7274 5b27 6e61 6d65 275d        rt['name']
-00041d60: 2c72 745b 2765 7874 275d 3d73 656c 662e  ,rt['ext']=self.
-00041d70: 4669 6c65 4e61 6d65 2866 696c 656e 616d  FileName(filenam
-00041d80: 6529 0a20 2020 2020 2020 2069 6620 6f73  e).        if os
-00041d90: 2e70 6174 682e 6578 6973 7473 2866 696c  .path.exists(fil
-00041da0: 656e 616d 6529 3a0a 2020 2020 2020 2020  ename):.        
-00041db0: 2020 2020 7374 6174 653d 6f73 2e73 7461      state=os.sta
-00041dc0: 7428 6669 6c65 6e61 6d65 290a 2020 2020  t(filename).    
-00041dd0: 2020 2020 2020 2020 7274 5b27 6578 6973          rt['exis
-00041de0: 7427 5d3d 5472 7565 0a20 2020 2020 2020  t']=True.       
-00041df0: 2020 2020 2072 745b 2773 697a 6527 5d3d       rt['size']=
-00041e00: 7374 6174 652e 7374 5f73 697a 650a 2020  state.st_size.  
-00041e10: 2020 2020 2020 2020 2020 7274 5b27 6d6f            rt['mo
-00041e20: 6465 275d 3d6f 6374 2873 7461 7465 2e73  de']=oct(state.s
-00041e30: 745f 6d6f 6465 295b 2d34 3a5d 0a20 2020  t_mode)[-4:].   
-00041e40: 2020 2020 2020 2020 2072 745b 2761 7469           rt['ati
-00041e50: 6d65 275d 3d73 7461 7465 2e73 745f 6174  me']=state.st_at
-00041e60: 696d 650a 2020 2020 2020 2020 2020 2020  ime.            
-00041e70: 7274 5b27 6d74 696d 6527 5d3d 7374 6174  rt['mtime']=stat
-00041e80: 652e 7374 5f6d 7469 6d65 0a20 2020 2020  e.st_mtime.     
-00041e90: 2020 2020 2020 2072 745b 2763 7469 6d65         rt['ctime
-00041ea0: 275d 3d73 7461 7465 2e73 745f 6374 696d  ']=state.st_ctim
-00041eb0: 650a 2020 2020 2020 2020 2020 2020 7274  e.            rt
-00041ec0: 5b27 6769 6427 5d3d 7374 6174 652e 7374  ['gid']=state.st
-00041ed0: 5f67 6964 0a20 2020 2020 2020 2020 2020  _gid.           
-00041ee0: 2072 745b 2775 6964 275d 3d73 7461 7465   rt['uid']=state
-00041ef0: 2e73 745f 7569 640a 2020 2020 2020 2020  .st_uid.        
-00041f00: 2020 2020 6966 2049 734e 6f6e 6528 5f74      if IsNone(_t
-00041f10: 7970 6529 3a0a 2020 2020 2020 2020 2020  ype):.          
-00041f20: 2020 2020 2020 7274 5b27 7479 7065 275d        rt['type']
-00041f30: 3d5f 7479 7065 0a20 2020 2020 2020 2020  =_type.         
-00041f40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00041f50: 2020 2020 2020 2020 2069 6620 6f73 2e70           if os.p
-00041f60: 6174 682e 6973 6c69 6e6b 2866 696c 656e  ath.islink(filen
-00041f70: 616d 6529 3a0a 2020 2020 2020 2020 2020  ame):.          
-00041f80: 2020 2020 2020 2020 2020 7274 5b27 7479            rt['ty
-00041f90: 7065 275d 3d27 6c69 6e6b 270a 2020 2020  pe']='link'.    
-00041fa0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00041fb0: 206f 732e 7061 7468 2e69 7364 6972 2866   os.path.isdir(f
-00041fc0: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
-00041fd0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-00041fe0: 5b27 7479 7065 275d 3d27 6469 7227 0a20  ['type']='dir'. 
-00041ff0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00042000: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00042010: 2020 2020 2020 2020 2072 745b 2774 7970           rt['typ
-00042020: 6527 5d3d 7365 6c66 2e46 696c 6554 7970  e']=self.FileTyp
-00042030: 6528 6669 6c65 6e61 6d65 290a 2020 2020  e(filename).    
-00042040: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00042050: 2020 2020 2020 7274 5b27 6578 6973 7427        rt['exist'
-00042060: 5d3d 4661 6c73 650a 2020 2020 2020 2020  ]=False.        
-00042070: 7265 7475 726e 2072 740a 0a20 2020 2064  return rt..    d
-00042080: 6566 2043 6450 6174 6828 7365 6c66 2c62  ef CdPath(self,b
-00042090: 6173 652c 7061 7468 293a 0a20 2020 2020  ase,path):.     
-000420a0: 2020 2072 743d 6261 7365 0a20 2020 2020     rt=base.     
-000420b0: 2020 2066 6f72 2069 6920 696e 2070 6174     for ii in pat
-000420c0: 682e 7370 6c69 7428 272f 2729 3a0a 2020  h.split('/'):.  
-000420d0: 2020 2020 2020 2020 2020 6966 2069 6920            if ii 
-000420e0: 6e6f 7420 696e 2072 743a 2072 6574 7572  not in rt: retur
-000420f0: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-00042100: 2020 2020 7274 3d72 745b 6969 5d0a 2020      rt=rt[ii].  
-00042110: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
-00042120: 0a20 2020 2064 6566 204d 6b49 6e66 6f28  .    def MkInfo(
-00042130: 7365 6c66 2c72 742c 6669 6c65 6e61 6d65  self,rt,filename
-00042140: 3d4e 6f6e 652c 2a2a 6f70 7473 293a 0a20  =None,**opts):. 
-00042150: 2020 2020 2020 2069 6620 2720 6920 2720         if ' i ' 
-00042160: 6e6f 7420 696e 2072 743a 2072 745b 2720  not in rt: rt[' 
-00042170: 6920 275d 3d7b 7d0a 2020 2020 2020 2020  i ']={}.        
-00042180: 7274 5b27 2069 2027 5d3d 7365 6c66 2e46  rt[' i ']=self.F
-00042190: 696c 6549 6e66 6f28 6669 6c65 6e61 6d65  ileInfo(filename
-000421a0: 2c5f 7479 7065 3d6f 7074 732e 6765 7428  ,_type=opts.get(
-000421b0: 2774 7970 6527 292c 6578 6973 743d 6f70  'type'),exist=op
-000421c0: 7473 2e67 6574 2827 6578 6973 7427 2929  ts.get('exist'))
-000421d0: 0a20 2020 2020 2020 2069 6620 6f70 7473  .        if opts
-000421e0: 3a20 7274 5b27 2069 2027 5d2e 7570 6461  : rt[' i '].upda
-000421f0: 7465 286f 7074 7329 0a0a 2020 2020 6465  te(opts)..    de
-00042200: 6620 4765 7428 7365 6c66 2c2a 6669 6c65  f Get(self,*file
-00042210: 6e61 6d65 732c 2a2a 6f70 7473 293a 0a20  names,**opts):. 
-00042220: 2020 2020 2020 2062 6173 653d 7b7d 0a20         base={}. 
-00042230: 2020 2020 2020 2066 696c 656c 6973 743d         filelist=
-00042240: 7b7d 0a20 2020 2020 2020 2064 6566 204d  {}.        def M
-00042250: 6b50 6174 6828 6261 7365 2c70 6174 682c  kPath(base,path,
-00042260: 726f 6f74 5f70 6174 6829 3a0a 2020 2020  root_path):.    
-00042270: 2020 2020 2020 2020 7274 3d62 6173 650a          rt=base.
-00042280: 2020 2020 2020 2020 2020 2020 6368 6b5f              chk_
-00042290: 6469 723d 277b 7d27 2e66 6f72 6d61 7428  dir='{}'.format(
-000422a0: 726f 6f74 5f70 6174 6829 0a20 2020 2020  root_path).     
-000422b0: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
-000422c0: 2070 6174 682e 7370 6c69 7428 272f 2729   path.split('/')
-000422d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000422e0: 2020 6966 2069 693a 0a20 2020 2020 2020    if ii:.       
-000422f0: 2020 2020 2020 2020 2020 2020 2063 686b               chk
-00042300: 5f64 6972 3d50 6174 6828 6368 6b5f 6469  _dir=Path(chk_di
-00042310: 722c 6969 290a 2020 2020 2020 2020 2020  r,ii).          
-00042320: 2020 2020 2020 2020 2020 6966 2069 6920            if ii 
-00042330: 6e6f 7420 696e 2072 743a 0a20 2020 2020  not in rt:.     
-00042340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042350: 2020 2072 745b 6969 5d3d 7b7d 0a20 2020     rt[ii]={}.   
-00042360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042370: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
-00042380: 6973 6469 7228 6368 6b5f 6469 7229 3a20  isdir(chk_dir): 
-00042390: 7365 6c66 2e4d 6b49 6e66 6f28 7274 5b69  self.MkInfo(rt[i
-000423a0: 695d 2c63 686b 5f64 6972 2c74 7970 653d  i],chk_dir,type=
-000423b0: 2764 6972 2729 0a20 2020 2020 2020 2020  'dir').         
-000423c0: 2020 2020 2020 2020 2020 2072 743d 7274             rt=rt
-000423d0: 5b69 695d 0a20 2020 2020 2020 2020 2020  [ii].           
-000423e0: 2072 6574 7572 6e20 7274 0a0a 2020 2020   return rt..    
-000423f0: 2020 2020 6465 6620 5f47 6574 5f28 726f      def _Get_(ro
-00042400: 6f74 5f70 6174 682c 2a66 696c 656e 616d  ot_path,*filenam
-00042410: 6573 2c2a 2a6f 7074 7329 3a0a 2020 2020  es,**opts):.    
-00042420: 2020 2020 2020 2020 6461 7461 3d6f 7074          data=opt
-00042430: 732e 6765 7428 2764 6174 6127 2c46 616c  s.get('data',Fal
-00042440: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
-00042450: 6d64 3573 756d 3d6f 7074 732e 6765 7428  md5sum=opts.get(
-00042460: 276d 6435 7375 6d27 2c46 616c 7365 290a  'md5sum',False).
-00042470: 2020 2020 2020 2020 2020 2020 6c69 6e6b              link
-00042480: 3266 696c 653d 6f70 7473 2e67 6574 2827  2file=opts.get('
-00042490: 6c69 6e6b 3266 696c 6527 2c46 616c 7365  link2file',False
-000424a0: 290a 0a20 2020 2020 2020 2020 2020 2066  )..            f
-000424b0: 6f72 2066 696c 656e 616d 6520 696e 2066  or filename in f
-000424c0: 696c 656e 616d 6573 3a0a 2020 2020 2020  ilenames:.      
-000424d0: 2020 2020 2020 2020 2020 7466 696c 656e            tfilen
-000424e0: 616d 653d 5061 7468 2872 6f6f 745f 7061  ame=Path(root_pa
-000424f0: 7468 2c66 696c 656e 616d 6529 0a20 2020  th,filename).   
-00042500: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00042510: 6f73 2e70 6174 682e 6578 6973 7473 2874  os.path.exists(t
-00042520: 6669 6c65 6e61 6d65 293a 0a20 2020 2020  filename):.     
-00042530: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00042540: 743d 4d6b 5061 7468 2862 6173 652c 6669  t=MkPath(base,fi
-00042550: 6c65 6e61 6d65 2c72 6f6f 745f 7061 7468  lename,root_path
-00042560: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00042570: 2020 2020 2020 6966 206f 732e 7061 7468        if os.path
-00042580: 2e69 736c 696e 6b28 7466 696c 656e 616d  .islink(tfilenam
-00042590: 6529 3a20 2320 6974 2069 7320 6120 4c69  e): # it is a Li
-000425a0: 6e6b 2046 696c 650a 2020 2020 2020 2020  nk File.        
-000425b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000425c0: 6966 206f 732e 7061 7468 2e69 7366 696c  if os.path.isfil
-000425d0: 6528 6669 6c65 6e61 6d65 293a 2023 2069  e(filename): # i
-000425e0: 7420 6973 2061 2046 696c 650a 2020 2020  t is a File.    
-000425f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042600: 2020 2020 2020 2020 6966 206c 696e 6b32          if link2
-00042610: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
-00042620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042630: 2020 2020 2020 5f6d 6435 3d4e 6f6e 650a        _md5=None.
-00042640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042660: 6966 2064 6174 6120 6f72 206d 6435 7375  if data or md5su
-00042670: 6d3a 2023 204d 4435 5355 4d20 6f72 2044  m: # MD5SUM or D
-00042680: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
-00042690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000426a0: 2020 2020 2020 2020 6669 6c65 6461 7461          filedata
-000426b0: 3d73 656c 662e 5277 2874 6669 6c65 6e61  =self.Rw(tfilena
-000426c0: 6d65 2c6f 7574 3d27 6279 7465 2729 0a20  me,out='byte'). 
-000426d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000426e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000426f0: 2020 2069 6620 6669 6c65 6461 7461 5b30     if filedata[0
-00042700: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+0003fc30: 2020 7265 7475 726e 2067 7a69 702e 636f    return gzip.co
+0003fc40: 6d70 7265 7373 2864 6174 612c 636f 6d70  mpress(data,comp
+0003fc50: 7265 7373 6c65 7665 6c3d 3929 2023 6465  resslevel=9) #de
+0003fc60: 636f 6d70 7265 7373 2864 6174 6129 0a20  compress(data). 
+0003fc70: 2020 2020 2020 2065 6c73 653a 2023 7a6c         else: #zl
+0003fc80: 6962 0a20 2020 2020 2020 2020 2020 2072  ib.            r
+0003fc90: 6574 7572 6e20 7a6c 6962 2e63 6f6d 7072  eturn zlib.compr
+0003fca0: 6573 7328 6461 7461 2920 2320 6465 636f  ess(data) # deco
+0003fcb0: 6d70 7265 7373 2864 6174 6129 0a20 2020  mpress(data).   
+0003fcc0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+0003fcd0: 2072 6574 7572 6e20 4661 6c73 650a 0a64   return False..d
+0003fce0: 6566 2044 6563 6f6d 7072 6573 7328 6461  ef Decompress(da
+0003fcf0: 7461 2c6d 6f64 653d 2767 7a69 7027 293a  ta,mode='gzip'):
+0003fd00: 0a20 2020 2074 7279 3a0a 2020 2020 2020  .    try:.      
+0003fd10: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0003fd20: 6461 7461 2c73 7472 2920 616e 6420 6f73  data,str) and os
+0003fd30: 2e70 6174 682e 6973 6669 6c65 2864 6174  .path.isfile(dat
+0003fd40: 6129 3a0a 2020 2020 2020 2020 2020 2020  a):.            
+0003fd50: 7769 7468 206f 7065 6e28 6461 7461 2c27  with open(data,'
+0003fd60: 7262 2729 2061 7320 663a 0a20 2020 2020  rb') as f:.     
+0003fd70: 2020 2020 2020 2020 2020 2064 6174 613d             data=
+0003fd80: 662e 7265 6164 2829 0a20 2020 2020 2020  f.read().       
+0003fd90: 2069 6620 6d6f 6465 203d 3d20 276c 7a34   if mode == 'lz4
+0003fda0: 273a 0a20 2020 2020 2020 2020 2020 2049  ':.            I
+0003fdb0: 6d70 6f72 7428 2766 726f 6d20 6c7a 3420  mport('from lz4 
+0003fdc0: 696d 706f 7274 2066 7261 6d65 2729 0a20  import frame'). 
+0003fdd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003fde0: 6e20 6672 616d 652e 6465 636f 6d70 7265  n frame.decompre
+0003fdf0: 7373 2864 6174 6129 0a20 2020 2020 2020  ss(data).       
+0003fe00: 2065 6c69 6620 6d6f 6465 203d 3d20 2762   elif mode == 'b
+0003fe10: 7a32 273a 0a20 2020 2020 2020 2020 2020  z2':.           
+0003fe20: 2072 6574 7572 6e20 627a 322e 425a 3244   return bz2.BZ2D
+0003fe30: 6563 6f6d 7072 6573 736f 7228 292e 6465  ecompressor().de
+0003fe40: 636f 6d70 7265 7373 2864 6174 6129 0a20  compress(data). 
+0003fe50: 2020 2020 2020 2065 6c69 6620 6d6f 6465         elif mode
+0003fe60: 203d 3d20 2767 7a69 7027 3a0a 2020 2020   == 'gzip':.    
+0003fe70: 2020 2020 2020 2020 7265 7475 726e 2067          return g
+0003fe80: 7a69 702e 6465 636f 6d70 7265 7373 2864  zip.decompress(d
+0003fe90: 6174 6129 0a20 2020 2020 2020 2065 6c73  ata).        els
+0003fea0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+0003feb0: 6574 7572 6e20 7a6c 6962 2e64 6563 6f6d  eturn zlib.decom
+0003fec0: 7072 6573 7328 6461 7461 290a 2020 2020  press(data).    
+0003fed0: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+0003fee0: 7265 7475 726e 2046 616c 7365 0a0a 6465  return False..de
+0003fef0: 6620 7369 7a65 6f66 286f 626a 293a 0a20  f sizeof(obj):. 
+0003ff00: 2020 206d 7369 7a65 203d 2030 0a20 2020     msize = 0.   
+0003ff10: 2069 6473 203d 2073 6574 2829 0a20 2020   ids = set().   
+0003ff20: 206f 626a 6563 7473 203d 205b 6f62 6a5d   objects = [obj]
+0003ff30: 0a20 2020 2077 6869 6c65 206f 626a 6563  .    while objec
+0003ff40: 7473 3a0a 2020 2020 2020 2020 6e65 7720  ts:.        new 
+0003ff50: 3d20 5b5d 0a20 2020 2020 2020 2066 6f72  = [].        for
+0003ff60: 2069 2069 6e20 6f62 6a65 6374 733a 0a20   i in objects:. 
+0003ff70: 2020 2020 2020 2020 2020 2069 6620 6964             if id
+0003ff80: 2869 2920 6e6f 7420 696e 2069 6473 3a0a  (i) not in ids:.
+0003ff90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ffa0: 6964 732e 6164 6428 6964 2869 2929 0a20  ids.add(id(i)). 
+0003ffb0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0003ffc0: 7369 7a65 202b 3d20 7379 732e 6765 7473  size += sys.gets
+0003ffd0: 697a 656f 6628 6929 0a20 2020 2020 2020  izeof(i).       
+0003ffe0: 2020 2020 2020 2020 206e 6577 2e61 7070           new.app
+0003fff0: 656e 6428 6929 0a20 2020 2020 2020 206f  end(i).        o
+00040000: 626a 6563 7473 203d 2067 632e 6765 745f  bjects = gc.get_
+00040010: 7265 6665 7265 6e74 7328 2a6e 6577 290a  referents(*new).
+00040020: 2020 2020 7265 7475 726e 206d 7369 7a65      return msize
+00040030: 0a0a 6465 6620 6875 6d61 6e5f 6279 7465  ..def human_byte
+00040040: 286e 756d 2c20 756e 6974 3d22 4b22 2c20  (num, unit="K", 
+00040050: 7775 6e69 743d 4e6f 6e65 2c69 6e74 5f6f  wunit=None,int_o
+00040060: 7574 3d46 616c 7365 293a 0a20 2020 2075  ut=False):.    u
+00040070: 6e69 7473 203d 205b 2242 222c 224b 222c  nits = ["B","K",
+00040080: 224d 222c 2247 222c 2254 222c 2250 225d  "M","G","T","P"]
+00040090: 0a20 2020 2069 6620 7775 6e69 7420 6973  .    if wunit is
+000400a0: 204e 6f6e 653a 0a20 2020 2020 2020 2075   None:.        u
+000400b0: 6e69 743d 756e 6974 2e75 7070 6572 2829  nit=unit.upper()
+000400c0: 0a20 2020 2020 2020 2069 6620 6e75 6d20  .        if num 
+000400d0: 3e3d 2031 3030 303a 0a20 2020 2020 2020  >= 1000:.       
+000400e0: 2020 2020 2077 6869 6c65 206e 756d 203e       while num >
+000400f0: 3d20 3130 3030 3a0a 2020 2020 2020 2020  = 1000:.        
+00040100: 2020 2020 2020 2073 7569 3d75 6e69 7473         sui=units
+00040110: 2e69 6e64 6578 2875 6e69 7429 0a20 2020  .index(unit).   
+00040120: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00040130: 656e 2875 6e69 7473 2920 3c3d 2073 7569  en(units) <= sui
+00040140: 2b31 3a0a 2020 2020 2020 2020 2020 2020  +1:.            
+00040150: 2020 2020 2020 2062 7265 616b 0a20 2020         break.   
+00040160: 2020 2020 2020 2020 2020 2020 6e75 6d20              num 
+00040170: 2f3d 2031 3032 342e 300a 2020 2020 2020  /= 1024.0.      
+00040180: 2020 2020 2020 2020 2075 6e69 7420 3d20           unit = 
+00040190: 756e 6974 735b 7375 692b 315d 0a20 2020  units[sui+1].   
+000401a0: 2020 2020 2065 6c69 6620 6e75 6d20 3c20       elif num < 
+000401b0: 313a 0a20 2020 2020 2020 2020 2020 2077  1:.            w
+000401c0: 6869 6c65 206e 756d 203c 2031 3a20 2330  hile num < 1: #0
+000401d0: 2e58 5858 2064 6967 6974 730a 2020 2020  .XXX digits.    
+000401e0: 2020 2020 2020 2020 2020 2073 7569 3d75             sui=u
+000401f0: 6e69 7473 2e69 6e64 6578 2875 6e69 7429  nits.index(unit)
+00040200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00040210: 6966 2073 7569 2d31 203c 2030 3a0a 2020  if sui-1 < 0:.  
+00040220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040230: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
+00040240: 2020 2020 2020 6e75 6d20 2a3d 2031 3032        num *= 102
+00040250: 342e 300a 2020 2020 2020 2020 2020 2020  4.0.            
+00040260: 2020 2075 6e69 7420 3d20 756e 6974 735b     unit = units[
+00040270: 7375 692d 315d 0a20 2020 2065 6c73 653a  sui-1].    else:
+00040280: 0a20 2020 2020 2020 2077 756e 6974 3d77  .        wunit=w
+00040290: 756e 6974 2e75 7070 6572 2829 0a20 2020  unit.upper().   
+000402a0: 2020 2020 2065 7569 3d75 6e69 7473 2e69       eui=units.i
+000402b0: 6e64 6578 2877 756e 6974 290a 2020 2020  ndex(wunit).    
+000402c0: 2020 2020 6966 2073 7569 203c 2065 7569      if sui < eui
+000402d0: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
+000402e0: 7220 6920 696e 2072 616e 6765 2873 7569  r i in range(sui
+000402f0: 2c65 7569 293a 0a20 2020 2020 2020 2020  ,eui):.         
+00040300: 2020 2020 2020 206e 756d 202f 3d20 3130         num /= 10
+00040310: 3234 2e30 0a20 2020 2020 2020 2065 6c69  24.0.        eli
+00040320: 6620 7375 6920 3e20 6575 693a 0a20 2020  f sui > eui:.   
+00040330: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00040340: 6e20 7261 6e67 6528 7375 692c 6575 692c  n range(sui,eui,
+00040350: 2d31 293a 0a20 2020 2020 2020 2020 2020  -1):.           
+00040360: 2020 2020 206e 756d 202a 3d20 3130 3234       num *= 1024
+00040370: 2e30 0a20 2020 2020 2020 2075 6e69 743d  .0.        unit=
+00040380: 7775 6e69 740a 2020 2020 6966 2069 6e74  wunit.    if int
+00040390: 5f6f 7574 3a0a 2020 2020 2020 2020 7265  _out:.        re
+000403a0: 7475 726e 2066 6c6f 6174 2822 252e 3166  turn float("%.1f
+000403b0: 2225 286e 756d 2929 0a20 2020 2065 6c73  "%(num)).    els
+000403c0: 653a 0a20 2020 2020 2020 2069 6620 756e  e:.        if un
+000403d0: 6974 203d 3d20 2242 223a 0a20 2020 2020  it == "B":.     
+000403e0: 2020 2020 2020 2072 6574 7572 6e20 2225         return "%
+000403f0: 2e31 6620 2573 2220 2520 286e 756d 2c75  .1f %s" % (num,u
+00040400: 6e69 7429 0a20 2020 2020 2020 2065 6c73  nit).        els
+00040410: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00040420: 6574 7572 6e20 2225 2e31 6620 2573 4222  eturn "%.1f %sB"
+00040430: 2025 2028 6e75 6d2c 756e 6974 290a 0a64   % (num,unit)..d
+00040440: 6566 2048 756d 616e 5f55 6e69 7428 6e75  ef Human_Unit(nu
+00040450: 6d2c 756e 6974 3d27 5327 2c77 616e 745f  m,unit='S',want_
+00040460: 756e 6974 3d4e 6f6e 652c 696e 745f 6f75  unit=None,int_ou
+00040470: 743d 4661 6c73 6529 3a0a 2020 2020 6465  t=False):.    de
+00040480: 6620 636f 6e76 6572 745f 7365 635f 746f  f convert_sec_to
+00040490: 5f66 6f72 6d61 7428 6e75 6d2c 7761 6e74  _format(num,want
+000404a0: 5f66 6f72 6d61 743d 2225 5920 256d 2025  _format="%Y %m %
+000404b0: 6420 2548 3a25 4d3a 2553 2229 3a0a 2020  d %H:%M:%S"):.  
+000404c0: 2020 2020 2020 7265 7475 726e 2064 6174        return dat
+000404d0: 6574 696d 652e 6461 7465 7469 6d65 2e66  etime.datetime.f
+000404e0: 726f 6d74 696d 6573 7461 6d70 286e 756d  romtimestamp(num
+000404f0: 292e 7374 7266 7469 6d65 2877 616e 745f  ).strftime(want_
+00040500: 666f 726d 6174 290a 2020 2020 6465 6620  format).    def 
+00040510: 636f 6e76 6572 745f 696e 745f 7469 6d65  convert_int_time
+00040520: 5f74 6f5f 7968 6d73 286e 756d 2c75 6e69  _to_yhms(num,uni
+00040530: 743d 2753 272c 7761 6e74 3d4e 6f6e 6529  t='S',want=None)
+00040540: 3a0a 2020 2020 2020 2020 633d 5b33 3135  :.        c=[315
+00040550: 3336 3030 302c 3836 3430 302c 3336 3030  36000,86400,3600
+00040560: 2c36 302c 315d 2023 2079 792c 6464 2c68  ,60,1] # yy,dd,h
+00040570: 682c 6d6d 2c73 730a 2020 2020 2020 2020  h,mm,ss.        
+00040580: 6375 3d5b 2759 272c 2744 272c 2748 272c  cu=['Y','D','H',
+00040590: 274d 272c 2753 275d 2020 2020 2023 2079  'M','S']     # y
+000405a0: 792c 6464 2c68 682c 6d6d 2c73 730a 2020  y,dd,hh,mm,ss.  
+000405b0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000405c0: 6e63 6528 7761 6e74 2c73 7472 2920 616e  nce(want,str) an
+000405d0: 6420 7761 6e74 2061 6e64 2077 616e 7420  d want and want 
+000405e0: 696e 2063 753a 0a20 2020 2020 2020 2020  in cu:.         
+000405f0: 2020 2073 7461 7274 5f69 3d63 752e 696e     start_i=cu.in
+00040600: 6465 7828 7761 6e74 290a 2020 2020 2020  dex(want).      
+00040610: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00040620: 2020 2020 7374 6172 745f 693d 300a 2020      start_i=0.  
+00040630: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00040640: 6e63 6528 756e 6974 2c73 7472 2920 616e  nce(unit,str) an
+00040650: 6420 756e 6974 2061 6e64 2075 6e69 7420  d unit and unit 
+00040660: 696e 2063 753a 0a20 2020 2020 2020 2020  in cu:.         
+00040670: 2020 206d 783d 6375 2e69 6e64 6578 2875     mx=cu.index(u
+00040680: 6e69 7429 0a20 2020 2020 2020 2065 6c73  nit).        els
+00040690: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
+000406a0: 783d 6c65 6e28 6329 2d31 0a20 2020 2020  x=len(c)-1.     
+000406b0: 2020 2069 6620 6d78 203d 3d20 6c65 6e28     if mx == len(
+000406c0: 6329 2d31 3a20 2320 7365 6320 2d3e 2077  c)-1: # sec -> w
+000406d0: 616e 740a 2020 2020 2020 2020 2020 2020  ant.            
+000406e0: 6f3d 7b7d 0a20 2020 2020 2020 2020 2020  o={}.           
+000406f0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00040700: 7374 6172 745f 692c 6d78 2b31 293a 0a20  start_i,mx+1):. 
+00040710: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00040720: 6620 286d 7820 3d3d 2069 2061 6e64 206e  f (mx == i and n
+00040730: 756d 203e 3d20 635b 695d 2920 6f72 206e  um >= c[i]) or n
+00040740: 756d 203e 2063 5b69 5d3a 0a20 2020 2020  um > c[i]:.     
+00040750: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00040760: 5b63 755b 695d 5d3d 6e75 6d2f 2f63 5b69  [cu[i]]=num//c[i
+00040770: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00040780: 2020 2020 2020 6e75 6d3d 6e75 6d25 2863        num=num%(c
+00040790: 5b69 5d2a 6f5b 6375 5b69 5d5d 290a 2020  [i]*o[cu[i]]).  
+000407a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000407b0: 206f 0a20 2020 2020 2020 2065 6c73 653a   o.        else:
+000407c0: 2020 2320 756e 6974 202d 3e20 7365 6320    # unit -> sec 
+000407d0: 616e 6420 6361 6c63 756c 6174 6520 7365  and calculate se
+000407e0: 6320 746f 2077 616e 740a 2020 2020 2020  c to want.      
+000407f0: 2020 2020 2020 6e75 6d20 3d20 6e75 6d20        num = num 
+00040800: 2a20 635b 6d78 5d20 2320 636f 6e76 6572  * c[mx] # conver
+00040810: 7420 746f 2075 6e69 7420 746f 2073 6563  t to unit to sec
+00040820: 6f6e 6473 0a20 2020 2020 2020 2020 2020  onds.           
+00040830: 2072 6574 7572 6e20 636f 6e76 6572 745f   return convert_
+00040840: 696e 745f 7469 6d65 5f74 6f5f 7968 6d73  int_time_to_yhms
+00040850: 286e 756d 2c75 6e69 743d 2753 272c 7761  (num,unit='S',wa
+00040860: 6e74 3d77 616e 7429 0a20 2020 2069 6620  nt=want).    if 
+00040870: 6973 696e 7374 616e 6365 2875 6e69 742c  isinstance(unit,
+00040880: 7374 7229 2061 6e64 2075 6e69 7420 616e  str) and unit an
+00040890: 6420 2877 616e 745f 756e 6974 2069 7320  d (want_unit is 
+000408a0: 4e6f 6e65 206f 7220 6973 696e 7374 616e  None or isinstan
+000408b0: 6365 2877 616e 745f 756e 6974 2c73 7472  ce(want_unit,str
+000408c0: 2929 3a0a 2020 2020 2020 2020 6966 2075  )):.        if u
+000408d0: 6e69 742e 7570 7065 7228 2920 696e 205b  nit.upper() in [
+000408e0: 274d 4d27 2c27 4d49 4e27 2c27 5927 2c27  'MM','MIN','Y','
+000408f0: 5959 272c 2759 4541 5227 2c27 4848 272c  YY','YEAR','HH',
+00040900: 2748 272c 2748 4f55 5227 2c27 5327 2c27  'H','HOUR','S','
+00040910: 5345 4327 2c27 5353 275d 3a0a 2020 2020  SEC','SS']:.    
+00040920: 2020 2020 2020 2020 6d6f 6465 3d27 7469          mode='ti
+00040930: 6d65 270a 2020 2020 2020 2020 2020 2020  me'.            
+00040940: 6966 2069 7369 6e73 7461 6e63 6528 7761  if isinstance(wa
+00040950: 6e74 5f75 6e69 742c 7374 7229 3a0a 2020  nt_unit,str):.  
+00040960: 2020 2020 2020 2020 2020 2020 2020 7570                up
+00040970: 5f77 616e 745f 756e 6974 3d77 616e 745f  _want_unit=want_
+00040980: 756e 6974 2e75 7070 6572 2829 0a20 2020  unit.upper().   
+00040990: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000409a0: 7570 5f77 616e 745f 756e 6974 2069 6e20  up_want_unit in 
+000409b0: 5b27 484f 5552 272c 2748 4827 2c27 484f  ['HOUR','HH','HO
+000409c0: 5552 5327 2c27 4827 5d3a 2077 616e 745f  URS','H']: want_
+000409d0: 756e 6974 3d27 4827 0a20 2020 2020 2020  unit='H'.       
+000409e0: 2020 2020 2020 2020 2065 6c69 6620 7570           elif up
+000409f0: 5f77 616e 745f 756e 6974 2069 6e20 5b27  _want_unit in ['
+00040a00: 4d49 4e27 2c27 4d4d 272c 274d 494e 5554  MIN','MM','MINUT
+00040a10: 4527 2c27 4d49 4e55 5445 5327 2c27 4d27  E','MINUTES','M'
+00040a20: 5d3a 2077 616e 745f 756e 6974 3d27 4d27  ]: want_unit='M'
+00040a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00040a40: 2065 6c69 6620 7570 5f77 616e 745f 756e   elif up_want_un
+00040a50: 6974 2069 6e20 5b27 4441 5927 2c27 4444  it in ['DAY','DD
+00040a60: 272c 2744 4159 5327 2c27 4427 5d3a 2077  ','DAYS','D']: w
+00040a70: 616e 745f 756e 6974 3d27 4427 0a20 2020  ant_unit='D'.   
+00040a80: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00040a90: 6620 7570 5f77 616e 745f 756e 6974 2069  f up_want_unit i
+00040aa0: 6e20 5b27 5945 4152 272c 2759 5927 2c27  n ['YEAR','YY','
+00040ab0: 5945 4152 5327 2c27 5927 5d3a 2077 616e  YEARS','Y']: wan
+00040ac0: 745f 756e 6974 3d27 5927 0a20 2020 2020  t_unit='Y'.     
+00040ad0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00040ae0: 7570 5f77 616e 745f 756e 6974 2069 6e20  up_want_unit in 
+00040af0: 5b27 5345 4327 2c27 5353 272c 2753 4543  ['SEC','SS','SEC
+00040b00: 4f4e 4427 2c27 5345 434f 4e44 5327 2c27  OND','SECONDS','
+00040b10: 5327 5d3a 2077 616e 745f 756e 6974 3d27  S']: want_unit='
+00040b20: 5327 0a20 2020 2020 2020 2065 6c73 653a  S'.        else:
+00040b30: 0a20 2020 2020 2020 2020 2020 206d 6f64  .            mod
+00040b40: 653d 2762 7974 6527 0a20 2020 2020 2020  e='byte'.       
+00040b50: 206e 756d 5f75 6e69 743d 756e 6974 5b30   num_unit=unit[0
+00040b60: 5d2e 7570 7065 7228 290a 2020 2020 2020  ].upper().      
+00040b70: 2020 2354 494d 450a 2020 2020 2020 2020    #TIME.        
+00040b80: 6966 206e 756d 5f75 6e69 7420 3d3d 2027  if num_unit == '
+00040b90: 5327 2061 6e64 2028 6973 696e 7374 616e  S' and (isinstan
+00040ba0: 6365 2877 616e 745f 756e 6974 2c73 7472  ce(want_unit,str
+00040bb0: 2920 616e 6420 7761 6e74 5f75 6e69 7420  ) and want_unit 
+00040bc0: 616e 6420 7761 6e74 5f75 6e69 745b 305d  and want_unit[0]
+00040bd0: 203d 3d20 2725 2729 3a0a 2020 2020 2020   == '%'):.      
+00040be0: 2020 2020 2020 6966 206c 656e 2877 616e        if len(wan
+00040bf0: 745f 756e 6974 2920 3d3d 2031 3a0a 2020  t_unit) == 1:.  
+00040c00: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00040c10: 7475 726e 2063 6f6e 7665 7274 5f73 6563  turn convert_sec
+00040c20: 5f74 6f5f 666f 726d 6174 286e 756d 2c77  _to_format(num,w
+00040c30: 616e 745f 666f 726d 6174 3d22 2559 2025  ant_format="%Y %
+00040c40: 6d20 2564 2025 483a 254d 3a25 5322 290a  m %d %H:%M:%S").
+00040c50: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00040c60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00040c70: 2020 7265 7475 726e 2063 6f6e 7665 7274    return convert
+00040c80: 5f73 6563 5f74 6f5f 666f 726d 6174 286e  _sec_to_format(n
+00040c90: 756d 2c77 616e 745f 666f 726d 6174 3d77  um,want_format=w
+00040ca0: 616e 745f 756e 6974 290a 2020 2020 2020  ant_unit).      
+00040cb0: 2020 2354 494d 450a 2020 2020 2020 2020    #TIME.        
+00040cc0: 656c 6966 2028 6d6f 6465 203d 3d20 2774  elif (mode == 't
+00040cd0: 696d 6527 2061 6e64 2077 616e 745f 756e  ime' and want_un
+00040ce0: 6974 2069 6e20 5b27 5927 2c27 4427 2c27  it in ['Y','D','
+00040cf0: 4827 2c27 4d27 2c27 5327 2c4e 6f6e 655d  H','M','S',None]
+00040d00: 2920 6f72 2028 6e75 6d5f 756e 6974 2069  ) or (num_unit i
+00040d10: 6e20 5b27 5927 2c27 4427 2c27 4827 2c27  n ['Y','D','H','
+00040d20: 4d27 2c27 5327 5d20 616e 6420 7761 6e74  M','S'] and want
+00040d30: 5f75 6e69 7420 696e 205b 2759 272c 2744  _unit in ['Y','D
+00040d40: 272c 2748 272c 274d 272c 2753 275d 293a  ','H','M','S']):
+00040d50: 0a20 2020 2020 2020 2020 2020 206f 6f3d  .            oo=
+00040d60: 636f 6e76 6572 745f 696e 745f 7469 6d65  convert_int_time
+00040d70: 5f74 6f5f 7968 6d73 286e 756d 2c75 6e69  _to_yhms(num,uni
+00040d80: 743d 6e75 6d5f 756e 6974 2c77 616e 743d  t=num_unit,want=
+00040d90: 7761 6e74 5f75 6e69 7429 0a20 2020 2020  want_unit).     
+00040da0: 2020 2020 2020 2069 6620 696e 745f 6f75         if int_ou
+00040db0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00040dc0: 2020 2069 6620 7761 6e74 5f75 6e69 743a     if want_unit:
+00040dd0: 2320 616e 6420 7761 6e74 5f75 6e69 7420  # and want_unit 
+00040de0: 696e 206f 6f3a 0a20 2020 2020 2020 2020  in oo:.         
+00040df0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00040e00: 6e20 6f6f 2e67 6574 2877 616e 745f 756e  n oo.get(want_un
+00040e10: 6974 2c30 290a 2020 2020 2020 2020 2020  it,0).          
+00040e20: 2020 2020 2020 656c 7365 3a20 2320 6966        else: # if
+00040e30: 2077 616e 7420 756e 6974 2069 7320 4e6f   want unit is No
+00040e40: 6e65 2074 6865 6e20 7265 7475 726e 206e  ne then return n
+00040e50: 756d 0a20 2020 2020 2020 2020 2020 2020  um.             
+00040e60: 2020 2020 2020 2072 6574 7572 6e20 6e75         return nu
+00040e70: 6d0a 2020 2020 2020 2020 2020 2020 656c  m.            el
+00040e80: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00040e90: 2020 2020 6f3d 2727 0a20 2020 2020 2020      o=''.       
+00040ea0: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+00040eb0: 6e20 5b27 5927 2c27 4427 2c27 4827 2c27  n ['Y','D','H','
+00040ec0: 4d27 2c27 5327 5d3a 0a20 2020 2020 2020  M','S']:.       
+00040ed0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00040ee0: 6920 696e 206f 6f3a 0a20 2020 2020 2020  i in oo:.       
+00040ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040f00: 2069 6620 6f3a 206f 3d6f 2b27 207b 7d7b   if o: o=o+' {}{
+00040f10: 7d27 2e66 6f72 6d61 7428 6f6f 5b69 5d2c  }'.format(oo[i],
+00040f20: 6929 0a20 2020 2020 2020 2020 2020 2020  i).             
+00040f30: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00040f40: 206f 3d27 7b7d 7b7d 272e 666f 726d 6174   o='{}{}'.format
+00040f50: 286f 6f5b 695d 2c69 290a 2020 2020 2020  (oo[i],i).      
+00040f60: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00040f70: 206f 0a20 2020 2020 2020 2023 4279 7465   o.        #Byte
+00040f80: 0a20 2020 2020 2020 2065 6c69 6620 6e75  .        elif nu
+00040f90: 6d5f 756e 6974 2069 6e20 5b22 4222 2c22  m_unit in ["B","
+00040fa0: 4b22 2c22 4d22 2c22 4722 2c22 5422 2c22  K","M","G","T","
+00040fb0: 5022 5d20 616e 6420 7761 6e74 5f75 6e69  P"] and want_uni
+00040fc0: 7420 696e 205b 2242 222c 224b 222c 224d  t in ["B","K","M
+00040fd0: 222c 2247 222c 2254 222c 2250 222c 4e6f  ","G","T","P",No
+00040fe0: 6e65 5d3a 0a20 2020 2020 2020 2020 2020  ne]:.           
+00040ff0: 2072 6574 7572 6e20 6875 6d61 6e5f 6279   return human_by
+00041000: 7465 286e 756d 2c20 756e 6974 3d6e 756d  te(num, unit=num
+00041010: 5f75 6e69 742c 2077 756e 6974 3d77 616e  _unit, wunit=wan
+00041020: 745f 756e 6974 2c20 696e 745f 6f75 743d  t_unit, int_out=
+00041030: 696e 745f 6f75 7429 0a20 2020 2072 6574  int_out).    ret
+00041040: 7572 6e20 2755 6e6b 6e6f 776e 2055 6e69  urn 'Unknown Uni
+00041050: 7428 7b7d 202d 3e20 7b7d 2927 2e66 6f72  t({} -> {})'.for
+00041060: 6d61 7428 756e 6974 2c77 616e 745f 756e  mat(unit,want_un
+00041070: 6974 290a 0a63 6c61 7373 2046 494c 455f  it)..class FILE_
+00041080: 573a 0a20 2020 2027 2727 0a20 2020 204e  W:.    '''.    N
+00041090: 6577 2064 6573 6967 6e20 746f 2073 696d  ew design to sim
+000410a0: 706c 650a 2020 2020 7375 625f 6469 7220  ple.    sub_dir 
+000410b0: 203a 2054 7275 6520 2847 6574 2066 696c   : True (Get fil
+000410c0: 6573 2069 6e20 7265 6375 7269 6e67 2064  es in recuring d
+000410d0: 6972 6563 746f 7279 290a 2020 2020 6461  irectory).    da
+000410e0: 7461 2020 2020 203a 2054 7275 6520 2847  ta     : True (G
+000410f0: 6574 2046 696c 6520 4461 7461 290a 2020  et File Data).  
+00041100: 2020 6d64 3573 756d 2020 203a 2054 7275    md5sum   : Tru
+00041110: 6520 2847 6574 2046 696c 6527 7320 4d44  e (Get File's MD
+00041120: 3520 5355 4d29 0a20 2020 206c 696e 6b32  5 SUM).    link2
+00041130: 6669 6c65 3a20 5472 7565 2028 4d61 6b65  file: True (Make
+00041140: 2061 2072 6561 6c20 6669 6c65 2069 6e73   a real file ins
+00041150: 7465 6164 2073 796d 2d6c 696e 6b20 6669  tead sym-link fi
+00041160: 6c65 290a 2020 2020 6669 6c65 2066 6f72  le).    file for
+00041170: 6d61 7420 3a20 7369 7a65 2028 3133 292b  mat : size (13)+
+00041180: 6865 6164 287b 7d29 2b64 6174 6128 5b2c  head({})+data([,
+00041190: 2c2c 2c2c 5d29 0a20 2020 2068 6561 643a  ,,,,]).    head:
+000411a0: 207b 696e 666f 7b7d 2c64 6174 615f 6964   {info{},data_id
+000411b0: 3a78 7d0a 2020 2020 2727 270a 2020 2020  :x}.    '''.    
+000411c0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+000411d0: 662c 2a69 6e70 2c2a 2a6f 7074 7329 3a0a  f,*inp,**opts):.
+000411e0: 2020 2020 2020 2020 7365 6c66 2e72 6f6f          self.roo
+000411f0: 745f 7061 7468 3d6f 7074 732e 6765 7428  t_path=opts.get(
+00041200: 2772 6f6f 745f 7061 7468 272c 4e6f 6e65  'root_path',None
+00041210: 290a 2020 2020 2020 2020 6966 2049 734e  ).        if IsN
+00041220: 6f6e 6528 7365 6c66 2e72 6f6f 745f 7061  one(self.root_pa
+00041230: 7468 293a 2073 656c 662e 726f 6f74 5f70  th): self.root_p
+00041240: 6174 683d 5061 7468 2829 0a20 2020 2020  ath=Path().     
+00041250: 2020 2073 656c 662e 696e 666f 3d6f 7074     self.info=opt
+00041260: 732e 6765 7428 2769 6e66 6f27 2c6f 7074  s.get('info',opt
+00041270: 732e 6765 7428 2764 6174 6127 2c7b 7d29  s.get('data',{})
+00041280: 290a 0a20 2020 2064 6566 204c 6973 7428  )..    def List(
+00041290: 7365 6c66 2c6e 616d 652c 7375 625f 6469  self,name,sub_di
+000412a0: 723d 4661 6c73 652c 6469 726e 616d 653d  r=False,dirname=
+000412b0: 4661 6c73 652c 6465 6661 756c 743d 5b5d  False,default=[]
+000412c0: 293a 0a20 2020 2020 2020 2023 6765 7420  ):.        #get 
+000412d0: 6469 7265 6374 6f72 7920 616e 6420 6561  directory and ea
+000412e0: 6368 2064 6972 6563 746f 7269 6573 2720  ch directories' 
+000412f0: 6669 6c65 206c 6973 740a 2020 2020 2020  file list.      
+00041300: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00041310: 6e61 6d65 2c73 7472 293a 0a20 2020 2020  name,str):.     
+00041320: 2020 2020 2020 2069 6620 6e61 6d65 5b30         if name[0
+00041330: 5d20 3d3d 2027 2f27 3a20 2023 2053 7461  ] == '/':  # Sta
+00041340: 7274 2066 726f 6d20 726f 6f74 2070 6174  rt from root pat
+00041350: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
+00041360: 2020 6966 206f 732e 7061 7468 2e69 7366    if os.path.isf
+00041370: 696c 6528 6e61 6d65 2920 6f72 206f 732e  ile(name) or os.
+00041380: 7061 7468 2e69 736c 696e 6b28 6e61 6d65  path.islink(name
+00041390: 293a 2072 6574 7572 6e20 6f73 2e70 6174  ): return os.pat
+000413a0: 682e 6469 726e 616d 6528 6e61 6d65 292c  h.dirname(name),
+000413b0: 5b6f 732e 7061 7468 2e62 6173 656e 616d  [os.path.basenam
+000413c0: 6528 6e61 6d65 295d 0a20 2020 2020 2020  e(name)].       
+000413d0: 2020 2020 2020 2020 2069 6620 6f73 2e70           if os.p
+000413e0: 6174 682e 6973 6469 7228 6e61 6d65 293a  ath.isdir(name):
+000413f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00041400: 2020 2020 2069 6620 7375 625f 6469 723a       if sub_dir:
+00041410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00041420: 2020 2020 2020 2020 2072 7420 3d20 5b5d           rt = []
+00041430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00041440: 2020 2020 2020 2020 2070 7764 3d6f 732e           pwd=os.
+00041450: 6765 7463 7764 2829 0a20 2020 2020 2020  getcwd().       
+00041460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041470: 206f 732e 6368 6469 7228 6e61 6d65 290a   os.chdir(name).
+00041480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041490: 2020 2020 2020 2020 666f 7220 6261 7365          for base
+000414a0: 2c20 6469 7273 2c20 6669 6c65 7320 696e  , dirs, files in
+000414b0: 206f 732e 7761 6c6b 2827 2e27 293a 0a20   os.walk('.'):. 
+000414c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000414d0: 2020 2020 2020 2020 2020 2069 6620 6469             if di
+000414e0: 726e 616d 653a 2072 742e 6578 7465 6e64  rname: rt.extend
+000414f0: 286f 732e 7061 7468 2e6a 6f69 6e28 6261  (os.path.join(ba
+00041500: 7365 5b32 3a5d 2c20 6429 2066 6f72 2064  se[2:], d) for d
+00041510: 2069 6e20 6469 7273 290a 2020 2020 2020   in dirs).      
+00041520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041530: 2020 2020 2020 7274 2e65 7874 656e 6428        rt.extend(
+00041540: 6f73 2e70 6174 682e 6a6f 696e 2862 6173  os.path.join(bas
+00041550: 655b 323a 5d2c 2066 2920 666f 7220 6620  e[2:], f) for f 
+00041560: 696e 2066 696c 6573 290a 2020 2020 2020  in files).      
+00041570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041580: 2020 6f73 2e63 6864 6972 2870 7764 290a    os.chdir(pwd).
+00041590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000415a0: 2020 2020 2020 2020 7265 7475 726e 2050          return P
+000415b0: 6174 6828 6e61 6d65 292c 7274 0a20 2020  ath(name),rt.   
+000415c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000415d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000415e0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000415f0: 6574 7572 6e20 5061 7468 286e 616d 6529  eturn Path(name)
+00041600: 2c5b 6620 666f 7220 6620 696e 206f 732e  ,[f for f in os.
+00041610: 6c69 7374 6469 7228 6e61 6d65 295d 0a20  listdir(name)]. 
+00041620: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00041630: 7365 6c66 2e72 6f6f 745f 7061 7468 3a20  self.root_path: 
+00041640: 2320 7374 6172 7420 6672 6f6d 2064 6566  # start from def
+00041650: 696e 6564 2072 6f6f 7420 7061 7468 0a20  ined root path. 
+00041660: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00041670: 686b 5f70 6174 683d 5061 7468 2873 656c  hk_path=Path(sel
+00041680: 662e 726f 6f74 5f70 6174 682c 6e61 6d65  f.root_path,name
+00041690: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000416a0: 2020 6966 206f 732e 7061 7468 2e69 7366    if os.path.isf
+000416b0: 696c 6528 6368 6b5f 7061 7468 2920 6f72  ile(chk_path) or
+000416c0: 206f 732e 7061 7468 2e69 736c 696e 6b28   os.path.islink(
+000416d0: 6368 6b5f 7061 7468 293a 2072 6574 7572  chk_path): retur
+000416e0: 6e20 5061 7468 2873 656c 662e 726f 6f74  n Path(self.root
+000416f0: 5f70 6174 6829 2c5b 6e61 6d65 5d0a 2020  _path),[name].  
+00041700: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00041710: 206f 732e 7061 7468 2e69 7364 6972 2863   os.path.isdir(c
+00041720: 686b 5f70 6174 6829 3a0a 2020 2020 2020  hk_path):.      
+00041730: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00041740: 2073 7562 5f64 6972 3a0a 2020 2020 2020   sub_dir:.      
+00041750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041760: 2020 7274 203d 205b 5d0a 2020 2020 2020    rt = [].      
+00041770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041780: 2020 7077 643d 6f73 2e67 6574 6377 6428    pwd=os.getcwd(
+00041790: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000417a0: 2020 2020 2020 2020 2020 6f73 2e63 6864            os.chd
+000417b0: 6972 2873 656c 662e 726f 6f74 5f70 6174  ir(self.root_pat
+000417c0: 6829 2023 2047 6f69 6e67 2074 6f20 6465  h) # Going to de
+000417d0: 6669 6e65 6420 726f 6f74 2070 6174 680a  fined root path.
+000417e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000417f0: 2020 2020 2020 2020 2320 4765 7420 7265          # Get re
+00041800: 6375 7269 6e67 2066 696c 6520 6c69 7374  curing file list
+00041810: 206f 6620 7468 6520 6e61 6d65 2028 7768   of the name (wh
+00041820: 656e 2063 7572 7265 6e74 2064 6972 2074  en current dir t
+00041830: 6865 6e20 272e 2729 0a20 2020 2020 2020  hen '.').       
+00041840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041850: 2066 6f72 2062 6173 652c 2064 6972 732c   for base, dirs,
+00041860: 2066 696c 6573 2069 6e20 6f73 2e77 616c   files in os.wal
+00041870: 6b28 6e61 6d65 293a 0a20 2020 2020 2020  k(name):.       
+00041880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041890: 2020 2020 2069 6620 6469 726e 616d 653a       if dirname:
+000418a0: 2072 742e 6578 7465 6e64 286f 732e 7061   rt.extend(os.pa
+000418b0: 7468 2e6a 6f69 6e28 6261 7365 5b32 3a5d  th.join(base[2:]
+000418c0: 2c20 6429 2066 6f72 2064 2069 6e20 6469  , d) for d in di
+000418d0: 7273 290a 2020 2020 2020 2020 2020 2020  rs).            
+000418e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000418f0: 7274 2e65 7874 656e 6428 6f73 2e70 6174  rt.extend(os.pat
+00041900: 682e 6a6f 696e 2862 6173 655b 323a 5d2c  h.join(base[2:],
+00041910: 2066 2920 666f 7220 6620 696e 2066 696c   f) for f in fil
+00041920: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
+00041930: 2020 2020 2020 2020 2020 2020 6f73 2e63              os.c
+00041940: 6864 6972 2870 7764 2920 2320 7265 636f  hdir(pwd) # reco
+00041950: 7665 7220 746f 2074 6865 206f 7269 6769  ver to the origi
+00041960: 6e61 6c20 7061 7468 0a20 2020 2020 2020  nal path.       
+00041970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041980: 2072 6574 7572 6e20 5061 7468 2873 656c   return Path(sel
+00041990: 662e 726f 6f74 5f70 6174 6829 2c72 740a  f.root_path),rt.
+000419a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000419b0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000419c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000419d0: 2020 6966 206e 616d 6520 3d3d 2027 2e27    if name == '.'
+000419e0: 3a20 6e61 6d65 3d27 270a 2020 2020 2020  : name=''.      
+000419f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041a00: 2020 7265 7475 726e 2050 6174 6828 7365    return Path(se
+00041a10: 6c66 2e72 6f6f 745f 7061 7468 292c 5b6f  lf.root_path),[o
+00041a20: 732e 7061 7468 2e6a 6f69 6e28 6e61 6d65  s.path.join(name
+00041a30: 2c66 2920 666f 7220 6620 696e 206f 732e  ,f) for f in os.
+00041a40: 6c69 7374 6469 7228 277b 7d2f 7b7d 272e  listdir('{}/{}'.
+00041a50: 666f 726d 6174 2873 656c 662e 726f 6f74  format(self.root
+00041a60: 5f70 6174 682c 6e61 6d65 2929 5d0a 2020  _path,name))].  
+00041a70: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+00041a80: 6175 6c74 2c5b 5d0a 0a20 2020 2064 6566  ault,[]..    def
+00041a90: 2046 696c 654e 616d 6528 7365 6c66 2c66   FileName(self,f
+00041aa0: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
+00041ab0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00041ac0: 6669 6c65 6e61 6d65 2c73 7472 293a 0a20  filename,str):. 
+00041ad0: 2020 2020 2020 2020 2020 2066 696c 656e             filen
+00041ae0: 616d 655f 696e 666f 3d6f 732e 7061 7468  ame_info=os.path
+00041af0: 2e62 6173 656e 616d 6528 6669 6c65 6e61  .basename(filena
+00041b00: 6d65 292e 7370 6c69 7428 272e 2729 0a20  me).split('.'). 
+00041b10: 2020 2020 2020 2020 2020 2069 6620 2774             if 't
+00041b20: 6172 2720 696e 2066 696c 656e 616d 655f  ar' in filename_
+00041b30: 696e 666f 3a0a 2020 2020 2020 2020 2020  info:.          
+00041b40: 2020 2020 2020 6964 783d 6669 6c65 6e61        idx=filena
+00041b50: 6d65 5f69 6e66 6f2e 696e 6465 7828 2774  me_info.index('t
+00041b60: 6172 2729 0a20 2020 2020 2020 2020 2020  ar').           
+00041b70: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00041b80: 2020 2020 2020 2069 6478 3d2d 310a 2020         idx=-1.  
+00041b90: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00041ba0: 204a 6f69 6e28 6669 6c65 6e61 6d65 5f69   Join(filename_i
+00041bb0: 6e66 6f5b 3a69 6478 5d2c 7379 6d62 6f6c  nfo[:idx],symbol
+00041bc0: 3d27 2e27 292c 4a6f 696e 2866 696c 656e  ='.'),Join(filen
+00041bd0: 616d 655f 696e 666f 5b69 6478 3a5d 2c73  ame_info[idx:],s
+00041be0: 796d 626f 6c3d 272e 2729 0a20 2020 2020  ymbol='.').     
+00041bf0: 2020 2072 6574 7572 6e20 4e6f 6e65 2c4e     return None,N
+00041c00: 6f6e 650a 0a20 2020 2064 6566 2046 696c  one..    def Fil
+00041c10: 6554 7970 6528 7365 6c66 2c66 696c 656e  eType(self,filen
+00041c20: 616d 652c 6465 6661 756c 743d 4661 6c73  ame,default=Fals
+00041c30: 6529 3a0a 2020 2020 2020 2020 6966 206e  e):.        if n
+00041c40: 6f74 2069 7369 6e73 7461 6e63 6528 6669  ot isinstance(fi
+00041c50: 6c65 6e61 6d65 2c73 7472 2920 6f72 206e  lename,str) or n
+00041c60: 6f74 206f 732e 7061 7468 2e69 7366 696c  ot os.path.isfil
+00041c70: 6528 6669 6c65 6e61 6d65 293a 2072 6574  e(filename): ret
+00041c80: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
+00041c90: 2020 2020 496d 706f 7274 2827 696d 706f      Import('impo
+00041ca0: 7274 206d 6167 6963 2729 0a20 2020 2020  rt magic').     
+00041cb0: 2020 2066 3d6f 7065 6e28 6669 6c65 6e61     f=open(filena
+00041cc0: 6d65 2c27 7262 2729 0a20 2020 2020 2020  me,'rb').       
+00041cd0: 2061 613d 6d61 6769 632e 6672 6f6d 5f62   aa=magic.from_b
+00041ce0: 7566 6665 7228 662e 7265 6164 2832 3034  uffer(f.read(204
+00041cf0: 3829 290a 2020 2020 2020 2020 662e 636c  8)).        f.cl
+00041d00: 6f73 6528 290a 2020 2020 2020 2020 6966  ose().        if
+00041d10: 2069 7369 6e73 7461 6e63 6528 6161 2c73   isinstance(aa,s
+00041d20: 7472 293a 2072 6574 7572 6e20 6161 2e73  tr): return aa.s
+00041d30: 706c 6974 2829 5b30 5d2e 6c6f 7765 7228  plit()[0].lower(
+00041d40: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00041d50: 2027 756e 6b6e 6f77 6e27 0a0a 2020 2020   'unknown'..    
+00041d60: 6465 6620 4669 6c65 496e 666f 2873 656c  def FileInfo(sel
+00041d70: 662c 6669 6c65 6e61 6d65 2c72 6f6f 7473  f,filename,roots
+00041d80: 3d4e 6f6e 652c 5f74 7970 653d 4e6f 6e65  =None,_type=None
+00041d90: 2c65 7869 7374 3d4e 6f6e 6529 3a0a 2020  ,exist=None):.  
+00041da0: 2020 2020 2020 6966 2073 656c 662e 696e        if self.in
+00041db0: 666f 3a20 2320 6672 6f6d 2069 6e73 6964  fo: # from insid
+00041dc0: 6520 6461 7461 0a20 2020 2020 2020 2020  e data.         
+00041dd0: 2020 2069 6620 4973 4e6f 6e65 2872 6f6f     if IsNone(roo
+00041de0: 7473 293a 2072 6f6f 7473 3d73 656c 662e  ts): roots=self.
+00041df0: 4669 6e64 5250 2829 0a20 2020 2020 2020  FindRP().       
+00041e00: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00041e10: 7374 616e 6365 2866 696c 656e 616d 652c  stance(filename,
+00041e20: 7374 7229 206f 7220 4973 4e6f 6e65 2866  str) or IsNone(f
+00041e30: 696c 656e 616d 6529 3a20 7265 7475 726e  ilename): return
+00041e40: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
+00041e50: 2020 2066 6f72 2072 6f6f 7420 696e 2072     for root in r
+00041e60: 6f6f 7473 3a0a 2020 2020 2020 2020 2020  oots:.          
+00041e70: 2020 2020 2020 7274 3d73 656c 662e 696e        rt=self.in
+00041e80: 666f 2e67 6574 2872 6f6f 742c 7b7d 290a  fo.get(root,{}).
+00041e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041ea0: 666f 7220 6969 2069 6e20 6669 6c65 6e61  for ii in filena
+00041eb0: 6d65 2e73 706c 6974 2827 2f27 293a 0a20  me.split('/'):. 
+00041ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041ed0: 2020 2069 6620 6969 206e 6f74 2069 6e20     if ii not in 
+00041ee0: 7274 3a20 7265 7475 726e 2046 616c 7365  rt: return False
+00041ef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00041f00: 2020 2020 2072 743d 7274 5b69 695d 0a20       rt=rt[ii]. 
+00041f10: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00041f20: 6574 7572 6e20 7274 2e67 6574 2827 2069  eturn rt.get(' i
+00041f30: 2027 2c46 616c 7365 290a 0a20 2020 2020   ',False)..     
+00041f40: 2020 2023 2066 726f 6d20 7265 616c 2066     # from real f
+00041f50: 696c 650a 2020 2020 2020 2020 7274 3d7b  ile.        rt={
+00041f60: 7d0a 2020 2020 2020 2020 6966 2065 7869  }.        if exi
+00041f70: 7374 2069 7320 4661 6c73 653a 2072 6574  st is False: ret
+00041f80: 7572 6e20 7b27 6578 6973 7427 3a46 616c  urn {'exist':Fal
+00041f90: 7365 7d0a 2020 2020 2020 2020 7274 5b27  se}.        rt['
+00041fa0: 6e61 6d65 275d 2c72 745b 2765 7874 275d  name'],rt['ext']
+00041fb0: 3d73 656c 662e 4669 6c65 4e61 6d65 2866  =self.FileName(f
+00041fc0: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
+00041fd0: 2069 6620 6f73 2e70 6174 682e 6578 6973   if os.path.exis
+00041fe0: 7473 2866 696c 656e 616d 6529 3a0a 2020  ts(filename):.  
+00041ff0: 2020 2020 2020 2020 2020 7374 6174 653d            state=
+00042000: 6f73 2e73 7461 7428 6669 6c65 6e61 6d65  os.stat(filename
+00042010: 290a 2020 2020 2020 2020 2020 2020 7274  ).            rt
+00042020: 5b27 6578 6973 7427 5d3d 5472 7565 0a20  ['exist']=True. 
+00042030: 2020 2020 2020 2020 2020 2072 745b 2773             rt['s
+00042040: 697a 6527 5d3d 7374 6174 652e 7374 5f73  ize']=state.st_s
+00042050: 697a 650a 2020 2020 2020 2020 2020 2020  ize.            
+00042060: 7274 5b27 6d6f 6465 275d 3d6f 6374 2873  rt['mode']=oct(s
+00042070: 7461 7465 2e73 745f 6d6f 6465 295b 2d34  tate.st_mode)[-4
+00042080: 3a5d 0a20 2020 2020 2020 2020 2020 2072  :].            r
+00042090: 745b 2761 7469 6d65 275d 3d73 7461 7465  t['atime']=state
+000420a0: 2e73 745f 6174 696d 650a 2020 2020 2020  .st_atime.      
+000420b0: 2020 2020 2020 7274 5b27 6d74 696d 6527        rt['mtime'
+000420c0: 5d3d 7374 6174 652e 7374 5f6d 7469 6d65  ]=state.st_mtime
+000420d0: 0a20 2020 2020 2020 2020 2020 2072 745b  .            rt[
+000420e0: 2763 7469 6d65 275d 3d73 7461 7465 2e73  'ctime']=state.s
+000420f0: 745f 6374 696d 650a 2020 2020 2020 2020  t_ctime.        
+00042100: 2020 2020 7274 5b27 6769 6427 5d3d 7374      rt['gid']=st
+00042110: 6174 652e 7374 5f67 6964 0a20 2020 2020  ate.st_gid.     
+00042120: 2020 2020 2020 2072 745b 2775 6964 275d         rt['uid']
+00042130: 3d73 7461 7465 2e73 745f 7569 640a 2020  =state.st_uid.  
+00042140: 2020 2020 2020 2020 2020 6966 2049 734e            if IsN
+00042150: 6f6e 6528 5f74 7970 6529 3a0a 2020 2020  one(_type):.    
+00042160: 2020 2020 2020 2020 2020 2020 7274 5b27              rt['
+00042170: 7479 7065 275d 3d5f 7479 7065 0a20 2020  type']=_type.   
+00042180: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00042190: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000421a0: 6620 6f73 2e70 6174 682e 6973 6c69 6e6b  f os.path.islink
+000421b0: 2866 696c 656e 616d 6529 3a0a 2020 2020  (filename):.    
+000421c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000421d0: 7274 5b27 7479 7065 275d 3d27 6c69 6e6b  rt['type']='link
+000421e0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+000421f0: 2020 656c 6966 206f 732e 7061 7468 2e69    elif os.path.i
+00042200: 7364 6972 2866 696c 656e 616d 6529 3a0a  sdir(filename):.
+00042210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042220: 2020 2020 7274 5b27 7479 7065 275d 3d27      rt['type']='
+00042230: 6469 7227 0a20 2020 2020 2020 2020 2020  dir'.           
+00042240: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00042250: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00042260: 745b 2774 7970 6527 5d3d 7365 6c66 2e46  t['type']=self.F
+00042270: 696c 6554 7970 6528 6669 6c65 6e61 6d65  ileType(filename
+00042280: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00042290: 2020 2020 2020 2020 2020 2020 7274 5b27              rt['
+000422a0: 6578 6973 7427 5d3d 4661 6c73 650a 2020  exist']=False.  
+000422b0: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
+000422c0: 0a20 2020 2064 6566 2043 6450 6174 6828  .    def CdPath(
+000422d0: 7365 6c66 2c62 6173 652c 7061 7468 293a  self,base,path):
+000422e0: 0a20 2020 2020 2020 2072 743d 6261 7365  .        rt=base
+000422f0: 0a20 2020 2020 2020 2066 6f72 2069 6920  .        for ii 
+00042300: 696e 2070 6174 682e 7370 6c69 7428 272f  in path.split('/
+00042310: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00042320: 6966 2069 6920 6e6f 7420 696e 2072 743a  if ii not in rt:
+00042330: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
+00042340: 2020 2020 2020 2020 2020 7274 3d72 745b            rt=rt[
+00042350: 6969 5d0a 2020 2020 2020 2020 7265 7475  ii].        retu
+00042360: 726e 2072 740a 0a20 2020 2064 6566 204d  rn rt..    def M
+00042370: 6b49 6e66 6f28 7365 6c66 2c72 742c 6669  kInfo(self,rt,fi
+00042380: 6c65 6e61 6d65 3d4e 6f6e 652c 2a2a 6f70  lename=None,**op
+00042390: 7473 293a 0a20 2020 2020 2020 2069 6620  ts):.        if 
+000423a0: 2720 6920 2720 6e6f 7420 696e 2072 743a  ' i ' not in rt:
+000423b0: 2072 745b 2720 6920 275d 3d7b 7d0a 2020   rt[' i ']={}.  
+000423c0: 2020 2020 2020 7274 5b27 2069 2027 5d3d        rt[' i ']=
+000423d0: 7365 6c66 2e46 696c 6549 6e66 6f28 6669  self.FileInfo(fi
+000423e0: 6c65 6e61 6d65 2c5f 7479 7065 3d6f 7074  lename,_type=opt
+000423f0: 732e 6765 7428 2774 7970 6527 292c 6578  s.get('type'),ex
+00042400: 6973 743d 6f70 7473 2e67 6574 2827 6578  ist=opts.get('ex
+00042410: 6973 7427 2929 0a20 2020 2020 2020 2069  ist')).        i
+00042420: 6620 6f70 7473 3a20 7274 5b27 2069 2027  f opts: rt[' i '
+00042430: 5d2e 7570 6461 7465 286f 7074 7329 0a0a  ].update(opts)..
+00042440: 2020 2020 6465 6620 4765 7428 7365 6c66      def Get(self
+00042450: 2c2a 6669 6c65 6e61 6d65 732c 2a2a 6f70  ,*filenames,**op
+00042460: 7473 293a 0a20 2020 2020 2020 2062 6173  ts):.        bas
+00042470: 653d 7b7d 0a20 2020 2020 2020 2066 696c  e={}.        fil
+00042480: 656c 6973 743d 7b7d 0a20 2020 2020 2020  elist={}.       
+00042490: 2064 6566 204d 6b50 6174 6828 6261 7365   def MkPath(base
+000424a0: 2c70 6174 682c 726f 6f74 5f70 6174 6829  ,path,root_path)
+000424b0: 3a0a 2020 2020 2020 2020 2020 2020 7274  :.            rt
+000424c0: 3d62 6173 650a 2020 2020 2020 2020 2020  =base.          
+000424d0: 2020 6368 6b5f 6469 723d 277b 7d27 2e66    chk_dir='{}'.f
+000424e0: 6f72 6d61 7428 726f 6f74 5f70 6174 6829  ormat(root_path)
+000424f0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00042500: 2069 6920 696e 2070 6174 682e 7370 6c69   ii in path.spli
+00042510: 7428 272f 2729 3a0a 2020 2020 2020 2020  t('/'):.        
+00042520: 2020 2020 2020 2020 6966 2069 693a 0a20          if ii:. 
+00042530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042540: 2020 2063 686b 5f64 6972 3d50 6174 6828     chk_dir=Path(
+00042550: 6368 6b5f 6469 722c 6969 290a 2020 2020  chk_dir,ii).    
+00042560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042570: 6966 2069 6920 6e6f 7420 696e 2072 743a  if ii not in rt:
+00042580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00042590: 2020 2020 2020 2020 2072 745b 6969 5d3d           rt[ii]=
+000425a0: 7b7d 0a20 2020 2020 2020 2020 2020 2020  {}.             
+000425b0: 2020 2020 2020 2020 2020 2069 6620 6f73             if os
+000425c0: 2e70 6174 682e 6973 6469 7228 6368 6b5f  .path.isdir(chk_
+000425d0: 6469 7229 3a20 7365 6c66 2e4d 6b49 6e66  dir): self.MkInf
+000425e0: 6f28 7274 5b69 695d 2c63 686b 5f64 6972  o(rt[ii],chk_dir
+000425f0: 2c74 7970 653d 2764 6972 2729 0a20 2020  ,type='dir').   
+00042600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042610: 2072 743d 7274 5b69 695d 0a20 2020 2020   rt=rt[ii].     
+00042620: 2020 2020 2020 2072 6574 7572 6e20 7274         return rt
+00042630: 0a0a 2020 2020 2020 2020 6465 6620 5f47  ..        def _G
+00042640: 6574 5f28 726f 6f74 5f70 6174 682c 2a66  et_(root_path,*f
+00042650: 696c 656e 616d 6573 2c2a 2a6f 7074 7329  ilenames,**opts)
+00042660: 3a0a 2020 2020 2020 2020 2020 2020 6461  :.            da
+00042670: 7461 3d6f 7074 732e 6765 7428 2764 6174  ta=opts.get('dat
+00042680: 6127 2c46 616c 7365 290a 2020 2020 2020  a',False).      
+00042690: 2020 2020 2020 6d64 3573 756d 3d6f 7074        md5sum=opt
+000426a0: 732e 6765 7428 276d 6435 7375 6d27 2c46  s.get('md5sum',F
+000426b0: 616c 7365 290a 2020 2020 2020 2020 2020  alse).          
+000426c0: 2020 6c69 6e6b 3266 696c 653d 6f70 7473    link2file=opts
+000426d0: 2e67 6574 2827 6c69 6e6b 3266 696c 6527  .get('link2file'
+000426e0: 2c46 616c 7365 290a 0a20 2020 2020 2020  ,False)..       
+000426f0: 2020 2020 2066 6f72 2066 696c 656e 616d       for filenam
+00042700: 6520 696e 2066 696c 656e 616d 6573 3a0a  e in filenames:.
 00042710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042720: 2020 2020 2020 2020 2020 2069 6620 6461             if da
-00042730: 7461 3a20 7274 5b27 6461 7461 275d 3d66  ta: rt['data']=f
-00042740: 696c 6564 6174 615b 315d 0a20 2020 2020  iledata[1].     
-00042750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042770: 2020 2069 6620 6d64 3573 756d 3a20 5f6d     if md5sum: _m
-00042780: 6435 3d6d 6435 2866 696c 6564 6174 615b  d5=md5(filedata[
-00042790: 315d 290a 2020 2020 2020 2020 2020 2020  1]).            
-000427a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000427b0: 2020 2020 7365 6c66 2e4d 6b49 6e66 6f28      self.MkInfo(
-000427c0: 7274 2c66 696c 656e 616d 653d 7466 696c  rt,filename=tfil
-000427d0: 656e 616d 652c 7479 7065 3d73 656c 662e  ename,type=self.
-000427e0: 4669 6c65 5479 7065 2874 6669 6c65 6e61  FileType(tfilena
-000427f0: 6d65 292c 6d64 353d 5f6d 6435 290a 2020  me),md5=_md5).  
-00042800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042810: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00042820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042830: 2020 2020 2020 2020 7365 6c66 2e4d 6b49          self.MkI
-00042840: 6e66 6f28 7274 2c66 696c 656e 616d 653d  nfo(rt,filename=
-00042850: 7466 696c 656e 616d 652c 7479 7065 3d27  tfilename,type='
-00042860: 6c69 6e6b 272c 6465 7374 3d6f 732e 7265  link',dest=os.re
-00042870: 6164 6c69 6e6b 2874 6669 6c65 6e61 6d65  adlink(tfilename
-00042880: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00042890: 2020 2020 2020 2065 6c69 6620 6f73 2e70         elif os.p
-000428a0: 6174 682e 6973 6469 7228 7466 696c 656e  ath.isdir(tfilen
-000428b0: 616d 6529 3a20 2320 6974 2069 7320 6120  ame): # it is a 
-000428c0: 6469 7265 6374 6f72 790a 2020 2020 2020  directory.      
+00042720: 7466 696c 656e 616d 653d 5061 7468 2872  tfilename=Path(r
+00042730: 6f6f 745f 7061 7468 2c66 696c 656e 616d  oot_path,filenam
+00042740: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00042750: 2020 2069 6620 6f73 2e70 6174 682e 6578     if os.path.ex
+00042760: 6973 7473 2874 6669 6c65 6e61 6d65 293a  ists(tfilename):
+00042770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00042780: 2020 2020 2072 743d 4d6b 5061 7468 2862       rt=MkPath(b
+00042790: 6173 652c 6669 6c65 6e61 6d65 2c72 6f6f  ase,filename,roo
+000427a0: 745f 7061 7468 290a 2020 2020 2020 2020  t_path).        
+000427b0: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+000427c0: 732e 7061 7468 2e69 736c 696e 6b28 7466  s.path.islink(tf
+000427d0: 696c 656e 616d 6529 3a20 2320 6974 2069  ilename): # it i
+000427e0: 7320 6120 4c69 6e6b 2046 696c 650a 2020  s a Link File.  
+000427f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042800: 2020 2020 2020 6966 206f 732e 7061 7468        if os.path
+00042810: 2e69 7366 696c 6528 6669 6c65 6e61 6d65  .isfile(filename
+00042820: 293a 2023 2069 7420 6973 2061 2046 696c  ): # it is a Fil
+00042830: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00042840: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00042850: 206c 696e 6b32 6669 6c65 3a0a 2020 2020   link2file:.    
+00042860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042870: 2020 2020 2020 2020 2020 2020 5f6d 6435              _md5
+00042880: 3d4e 6f6e 650a 2020 2020 2020 2020 2020  =None.          
+00042890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000428a0: 2020 2020 2020 6966 2064 6174 6120 6f72        if data or
+000428b0: 206d 6435 7375 6d3a 2023 204d 4435 5355   md5sum: # MD5SU
+000428c0: 4d20 6f72 2044 6174 610a 2020 2020 2020  M or Data.      
 000428d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000428e0: 2020 7365 6c66 2e4d 6b49 6e66 6f28 7274    self.MkInfo(rt
-000428f0: 2c74 6669 6c65 6e61 6d65 2c74 7970 653d  ,tfilename,type=
-00042900: 2764 6972 2729 0a20 2020 2020 2020 2020  'dir').         
-00042910: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00042920: 6f73 2e70 6174 682e 6973 6669 6c65 2874  os.path.isfile(t
-00042930: 6669 6c65 6e61 6d65 293a 2023 2069 7420  filename): # it 
-00042940: 6973 2061 2046 696c 650a 2020 2020 2020  is a File.      
+000428e0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+000428f0: 6c65 6461 7461 3d73 656c 662e 5277 2874  ledata=self.Rw(t
+00042900: 6669 6c65 6e61 6d65 2c6f 7574 3d27 6279  filename,out='by
+00042910: 7465 2729 0a20 2020 2020 2020 2020 2020  te').           
+00042920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042930: 2020 2020 2020 2020 2069 6620 6669 6c65           if file
+00042940: 6461 7461 5b30 5d3a 0a20 2020 2020 2020  data[0]:.       
 00042950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042960: 2020 5f6d 6435 3d4e 6f6e 650a 2020 2020    _md5=None.    
-00042970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042980: 2020 2020 6966 2064 6174 6120 6f72 206d      if data or m
-00042990: 6435 7375 6d3a 2023 204d 4435 5355 4d20  d5sum: # MD5SUM 
-000429a0: 6f72 2044 6174 610a 2020 2020 2020 2020  or Data.        
-000429b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000429c0: 2020 2020 6669 6c65 6461 7461 3d73 656c      filedata=sel
-000429d0: 662e 5277 2874 6669 6c65 6e61 6d65 2c6f  f.Rw(tfilename,o
-000429e0: 7574 3d27 6279 7465 2729 0a20 2020 2020  ut='byte').     
-000429f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042a00: 2020 2020 2020 2069 6620 6669 6c65 6461         if fileda
-00042a10: 7461 5b30 5d3a 0a20 2020 2020 2020 2020  ta[0]:.         
-00042a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042a30: 2020 2020 2020 2069 6620 6461 7461 3a20         if data: 
-00042a40: 7274 5b27 6461 7461 275d 3d66 696c 6564  rt['data']=filed
-00042a50: 6174 615b 315d 0a20 2020 2020 2020 2020  ata[1].         
-00042a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042a70: 2020 2020 2020 2069 6620 6d64 3573 756d         if md5sum
-00042a80: 3a20 5f6d 6435 3d6d 6435 2866 696c 6564  : _md5=md5(filed
-00042a90: 6174 615b 315d 290a 2020 2020 2020 2020  ata[1]).        
-00042aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042ab0: 7365 6c66 2e4d 6b49 6e66 6f28 7274 2c66  self.MkInfo(rt,f
-00042ac0: 696c 656e 616d 653d 7466 696c 656e 616d  ilename=tfilenam
-00042ad0: 652c 7479 7065 3d73 656c 662e 4669 6c65  e,type=self.File
-00042ae0: 5479 7065 2874 6669 6c65 6e61 6d65 292c  Type(tfilename),
-00042af0: 6d64 353d 5f6d 6435 290a 2020 2020 2020  md5=_md5).      
-00042b00: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00042960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042970: 2069 6620 6461 7461 3a20 7274 5b27 6461   if data: rt['da
+00042980: 7461 275d 3d66 696c 6564 6174 615b 315d  ta']=filedata[1]
+00042990: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000429a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000429b0: 2020 2020 2020 2020 2069 6620 6d64 3573           if md5s
+000429c0: 756d 3a20 5f6d 6435 3d6d 6435 2866 696c  um: _md5=md5(fil
+000429d0: 6564 6174 615b 315d 290a 2020 2020 2020  edata[1]).      
+000429e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000429f0: 2020 2020 2020 2020 2020 7365 6c66 2e4d            self.M
+00042a00: 6b49 6e66 6f28 7274 2c66 696c 656e 616d  kInfo(rt,filenam
+00042a10: 653d 7466 696c 656e 616d 652c 7479 7065  e=tfilename,type
+00042a20: 3d73 656c 662e 4669 6c65 5479 7065 2874  =self.FileType(t
+00042a30: 6669 6c65 6e61 6d65 292c 6d64 353d 5f6d  filename),md5=_m
+00042a40: 6435 290a 2020 2020 2020 2020 2020 2020  d5).            
+00042a50: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00042a60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00042a70: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00042a80: 6c66 2e4d 6b49 6e66 6f28 7274 2c66 696c  lf.MkInfo(rt,fil
+00042a90: 656e 616d 653d 7466 696c 656e 616d 652c  ename=tfilename,
+00042aa0: 7479 7065 3d27 6c69 6e6b 272c 6465 7374  type='link',dest
+00042ab0: 3d6f 732e 7265 6164 6c69 6e6b 2874 6669  =os.readlink(tfi
+00042ac0: 6c65 6e61 6d65 2929 0a20 2020 2020 2020  lename)).       
+00042ad0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00042ae0: 6620 6f73 2e70 6174 682e 6973 6469 7228  f os.path.isdir(
+00042af0: 7466 696c 656e 616d 6529 3a20 2320 6974  tfilename): # it
+00042b00: 2069 7320 6120 6469 7265 6374 6f72 790a   is a directory.
 00042b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042b20: 2020 2020 7365 6c66 2e4d 6b49 6e66 6f28      self.MkInfo(
-00042b30: 7274 2c66 696c 656e 616d 652c 6578 6973  rt,filename,exis
-00042b40: 743d 4661 6c73 6529 0a20 2020 2020 2020  t=False).       
-00042b50: 2020 2020 2069 6620 6261 7365 3a0a 2020       if base:.  
-00042b60: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00042b70: 7475 726e 207b 726f 6f74 5f70 6174 683a  turn {root_path:
-00042b80: 6261 7365 7d0a 2020 2020 2020 2020 2020  base}.          
-00042b90: 2020 7265 7475 726e 207b 7d0a 0a20 2020    return {}..   
-00042ba0: 2020 2020 2069 6620 6e6f 7420 6669 6c65       if not file
-00042bb0: 6e61 6d65 733a 2066 696c 656e 616d 6573  names: filenames
-00042bc0: 3d5b 272e 275d 0a20 2020 2020 2020 2066  =['.'].        f
-00042bd0: 6f72 2066 696c 656e 616d 6520 696e 2066  or filename in f
-00042be0: 696c 656e 616d 6573 3a0a 2020 2020 2020  ilenames:.      
-00042bf0: 2020 2020 2020 726f 6f74 5f70 6174 682c        root_path,
-00042c00: 666c 6973 743d 7365 6c66 2e4c 6973 7428  flist=self.List(
-00042c10: 6669 6c65 6e61 6d65 2c73 7562 5f64 6972  filename,sub_dir
-00042c20: 3d6f 7074 732e 6765 7428 2773 7562 5f64  =opts.get('sub_d
-00042c30: 6972 272c 4661 6c73 6529 2c64 6972 6e61  ir',False),dirna
-00042c40: 6d65 3d54 7275 6529 0a20 2020 2020 2020  me=True).       
-00042c50: 2020 2020 2069 6620 726f 6f74 5f70 6174       if root_pat
-00042c60: 6820 6e6f 7420 696e 2066 696c 656c 6973  h not in filelis
-00042c70: 743a 2066 696c 656c 6973 745b 726f 6f74  t: filelist[root
-00042c80: 5f70 6174 685d 3d5b 5d0a 2020 2020 2020  _path]=[].      
-00042c90: 2020 2020 2020 6669 6c65 6c69 7374 5b72        filelist[r
-00042ca0: 6f6f 745f 7061 7468 5d3d 6669 6c65 6c69  oot_path]=fileli
-00042cb0: 7374 5b72 6f6f 745f 7061 7468 5d2b 666c  st[root_path]+fl
-00042cc0: 6973 740a 0a20 2020 2020 2020 2066 6f72  ist..        for
-00042cd0: 2066 6620 696e 2066 696c 656c 6973 743a   ff in filelist:
-00042ce0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00042cf0: 662e 696e 666f 2e75 7064 6174 6528 5f47  f.info.update(_G
-00042d00: 6574 5f28 6666 2c2a 6669 6c65 6c69 7374  et_(ff,*filelist
-00042d10: 5b66 665d 2c2a 2a6f 7074 7329 290a 2020  [ff],**opts)).  
-00042d20: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00042d30: 660a 0a0a 2020 2020 6465 6620 4765 744c  f...    def GetL
-00042d40: 6973 7428 7365 6c66 2c64 6972 6e61 6d65  ist(self,dirname
-00042d50: 3d4e 6f6e 652c 726f 6f74 733d 4e6f 6e65  =None,roots=None
-00042d60: 2c66 696c 655f 6f6e 6c79 3d46 616c 7365  ,file_only=False
-00042d70: 2c64 6972 5f6f 6e6c 793d 4661 6c73 652c  ,dir_only=False,
-00042d80: 7375 625f 6469 723d 4661 6c73 652c 696e  sub_dir=False,in
-00042d90: 636c 7564 655f 7061 7468 3d46 616c 7365  clude_path=False
-00042da0: 2c64 6574 6169 6c3d 4661 6c73 6529 3a20  ,detail=False): 
-00042db0: 2367 6574 2066 696c 6520 696e 666f 2064  #get file info d
-00042dc0: 6963 7420 6672 6f6d 2046 696c 656e 616d  ict from Filenam
-00042dd0: 6520 7061 7468 0a20 2020 2020 2020 2069  e path.        i
-00042de0: 6620 4973 4e6f 6e65 2872 6f6f 7473 293a  f IsNone(roots):
-00042df0: 2072 6f6f 7473 3d73 656c 662e 4669 6e64   roots=self.Find
-00042e00: 5250 2829 0a20 2020 2020 2020 2066 6f72  RP().        for
-00042e10: 2072 6f6f 7420 696e 2072 6f6f 7473 3a0a   root in roots:.
-00042e20: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00042e30: 7369 6e73 7461 6e63 6528 726f 6f74 2c73  sinstance(root,s
-00042e40: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00042e50: 2020 2020 2072 743d 7365 6c66 2e69 6e66       rt=self.inf
-00042e60: 6f2e 6765 7428 726f 6f74 2c7b 7d29 0a20  o.get(root,{}). 
-00042e70: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00042e80: 6620 6469 726e 616d 6520 616e 6420 6469  f dirname and di
-00042e90: 726e 616d 6520 213d 2072 6f6f 743a 0a20  rname != root:. 
-00042ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042eb0: 2020 2072 743d 7365 6c66 2e43 6450 6174     rt=self.CdPat
-00042ec0: 6828 7274 2c64 6972 6e61 6d65 290a 2020  h(rt,dirname).  
-00042ed0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00042ee0: 2069 7369 6e73 7461 6e63 6528 7274 2c64   isinstance(rt,d
-00042ef0: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
-00042f00: 2020 2020 2020 2020 2020 666f 7220 6969            for ii
-00042f10: 2069 6e20 7274 3a0a 2020 2020 2020 2020   in rt:.        
-00042f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f30: 6669 6c65 5f69 6e66 6f3d 7274 5b69 695d  file_info=rt[ii]
-00042f40: 2e67 6574 2827 2069 2027 2c7b 7d29 0a20  .get(' i ',{}). 
-00042f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f60: 2020 2020 2020 2064 696e 666f 3d27 270a         dinfo=''.
-00042f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f80: 2020 2020 2020 2020 6966 2064 6574 6169          if detai
-00042f90: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
-00042fa0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00042fb0: 696e 666f 3d27 7b7d 207b 7d20 7b7d 207b  info='{} {} {} {
-00042fc0: 7d20 7b7d 207b 7d20 272e 666f 726d 6174  } {} {} '.format
-00042fd0: 2866 696c 655f 696e 666f 2e67 6574 2827  (file_info.get('
-00042fe0: 6d6f 6465 2729 2c0a 2020 2020 2020 2020  mode'),.        
-00042ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043000: 2020 2020 2020 2020 2020 2020 2020 3120                1 
-00043010: 6966 2066 696c 655f 696e 666f 2e67 6574  if file_info.get
-00043020: 2827 7479 7065 2729 2021 3d20 2764 6972  ('type') != 'dir
-00043030: 2720 656c 7365 206c 656e 2872 745b 6969  ' else len(rt[ii
-00043040: 5d29 2d31 2c0a 2020 2020 2020 2020 2020  ])-1,.          
-00043050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043060: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00043070: 5f69 6e66 6f2e 6765 7428 2775 6964 2729  _info.get('uid')
-00043080: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00043090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000430a0: 2020 2020 2020 2020 6669 6c65 5f69 6e66          file_inf
-000430b0: 6f2e 6765 7428 2767 6964 2729 2c0a 2020  o.get('gid'),.  
-000430c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000430d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000430e0: 2020 2020 6669 6c65 5f69 6e66 6f2e 6765      file_info.ge
-000430f0: 7428 2773 697a 6527 292c 0a20 2020 2020  t('size'),.     
-00043100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043120: 2066 696c 655f 696e 666f 2e67 6574 2827   file_info.get('
-00043130: 6d74 696d 6527 292c 0a20 2020 2020 2020  mtime'),.       
+00042b20: 2020 2020 2020 2020 7365 6c66 2e4d 6b49          self.MkI
+00042b30: 6e66 6f28 7274 2c74 6669 6c65 6e61 6d65  nfo(rt,tfilename
+00042b40: 2c74 7970 653d 2764 6972 2729 0a20 2020  ,type='dir').   
+00042b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042b60: 2065 6c69 6620 6f73 2e70 6174 682e 6973   elif os.path.is
+00042b70: 6669 6c65 2874 6669 6c65 6e61 6d65 293a  file(tfilename):
+00042b80: 2023 2069 7420 6973 2061 2046 696c 650a   # it is a File.
+00042b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042ba0: 2020 2020 2020 2020 5f6d 6435 3d4e 6f6e          _md5=Non
+00042bb0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00042bc0: 2020 2020 2020 2020 2020 6966 2064 6174            if dat
+00042bd0: 6120 6f72 206d 6435 7375 6d3a 2023 204d  a or md5sum: # M
+00042be0: 4435 5355 4d20 6f72 2044 6174 610a 2020  D5SUM or Data.  
+00042bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042c00: 2020 2020 2020 2020 2020 6669 6c65 6461            fileda
+00042c10: 7461 3d73 656c 662e 5277 2874 6669 6c65  ta=self.Rw(tfile
+00042c20: 6e61 6d65 2c6f 7574 3d27 6279 7465 2729  name,out='byte')
+00042c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00042c40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00042c50: 6669 6c65 6461 7461 5b30 5d3a 0a20 2020  filedata[0]:.   
+00042c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042c70: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00042c80: 6461 7461 3a20 7274 5b27 6461 7461 275d  data: rt['data']
+00042c90: 3d66 696c 6564 6174 615b 315d 0a20 2020  =filedata[1].   
+00042ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042cb0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00042cc0: 6d64 3573 756d 3a20 5f6d 6435 3d6d 6435  md5sum: _md5=md5
+00042cd0: 2866 696c 6564 6174 615b 315d 290a 2020  (filedata[1]).  
+00042ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042cf0: 2020 2020 2020 7365 6c66 2e4d 6b49 6e66        self.MkInf
+00042d00: 6f28 7274 2c66 696c 656e 616d 653d 7466  o(rt,filename=tf
+00042d10: 696c 656e 616d 652c 7479 7065 3d73 656c  ilename,type=sel
+00042d20: 662e 4669 6c65 5479 7065 2874 6669 6c65  f.FileType(tfile
+00042d30: 6e61 6d65 292c 6d64 353d 5f6d 6435 290a  name),md5=_md5).
+00042d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042d50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00042d60: 2020 2020 2020 2020 2020 7365 6c66 2e4d            self.M
+00042d70: 6b49 6e66 6f28 7274 2c66 696c 656e 616d  kInfo(rt,filenam
+00042d80: 652c 6578 6973 743d 4661 6c73 6529 0a20  e,exist=False). 
+00042d90: 2020 2020 2020 2020 2020 2069 6620 6261             if ba
+00042da0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00042db0: 2020 2020 7265 7475 726e 207b 726f 6f74      return {root
+00042dc0: 5f70 6174 683a 6261 7365 7d0a 2020 2020  _path:base}.    
+00042dd0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+00042de0: 7d0a 0a20 2020 2020 2020 2069 6620 6e6f  }..        if no
+00042df0: 7420 6669 6c65 6e61 6d65 733a 2066 696c  t filenames: fil
+00042e00: 656e 616d 6573 3d5b 272e 275d 0a20 2020  enames=['.'].   
+00042e10: 2020 2020 2066 6f72 2066 696c 656e 616d       for filenam
+00042e20: 6520 696e 2066 696c 656e 616d 6573 3a0a  e in filenames:.
+00042e30: 2020 2020 2020 2020 2020 2020 726f 6f74              root
+00042e40: 5f70 6174 682c 666c 6973 743d 7365 6c66  _path,flist=self
+00042e50: 2e4c 6973 7428 6669 6c65 6e61 6d65 2c73  .List(filename,s
+00042e60: 7562 5f64 6972 3d6f 7074 732e 6765 7428  ub_dir=opts.get(
+00042e70: 2773 7562 5f64 6972 272c 4661 6c73 6529  'sub_dir',False)
+00042e80: 2c64 6972 6e61 6d65 3d54 7275 6529 0a20  ,dirname=True). 
+00042e90: 2020 2020 2020 2020 2020 2069 6620 726f             if ro
+00042ea0: 6f74 5f70 6174 6820 6e6f 7420 696e 2066  ot_path not in f
+00042eb0: 696c 656c 6973 743a 2066 696c 656c 6973  ilelist: filelis
+00042ec0: 745b 726f 6f74 5f70 6174 685d 3d5b 5d0a  t[root_path]=[].
+00042ed0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+00042ee0: 6c69 7374 5b72 6f6f 745f 7061 7468 5d3d  list[root_path]=
+00042ef0: 6669 6c65 6c69 7374 5b72 6f6f 745f 7061  filelist[root_pa
+00042f00: 7468 5d2b 666c 6973 740a 0a20 2020 2020  th]+flist..     
+00042f10: 2020 2066 6f72 2066 6620 696e 2066 696c     for ff in fil
+00042f20: 656c 6973 743a 0a20 2020 2020 2020 2020  elist:.         
+00042f30: 2020 2073 656c 662e 696e 666f 2e75 7064     self.info.upd
+00042f40: 6174 6528 5f47 6574 5f28 6666 2c2a 6669  ate(_Get_(ff,*fi
+00042f50: 6c65 6c69 7374 5b66 665d 2c2a 2a6f 7074  lelist[ff],**opt
+00042f60: 7329 290a 2020 2020 2020 2020 7265 7475  s)).        retu
+00042f70: 726e 2073 656c 660a 0a0a 2020 2020 6465  rn self...    de
+00042f80: 6620 4765 744c 6973 7428 7365 6c66 2c64  f GetList(self,d
+00042f90: 6972 6e61 6d65 3d4e 6f6e 652c 726f 6f74  irname=None,root
+00042fa0: 733d 4e6f 6e65 2c66 696c 655f 6f6e 6c79  s=None,file_only
+00042fb0: 3d46 616c 7365 2c64 6972 5f6f 6e6c 793d  =False,dir_only=
+00042fc0: 4661 6c73 652c 7375 625f 6469 723d 4661  False,sub_dir=Fa
+00042fd0: 6c73 652c 696e 636c 7564 655f 7061 7468  lse,include_path
+00042fe0: 3d46 616c 7365 2c64 6574 6169 6c3d 4661  =False,detail=Fa
+00042ff0: 6c73 6529 3a20 2367 6574 2066 696c 6520  lse): #get file 
+00043000: 696e 666f 2064 6963 7420 6672 6f6d 2046  info dict from F
+00043010: 696c 656e 616d 6520 7061 7468 0a20 2020  ilename path.   
+00043020: 2020 2020 2069 6620 4973 4e6f 6e65 2872       if IsNone(r
+00043030: 6f6f 7473 293a 2072 6f6f 7473 3d73 656c  oots): roots=sel
+00043040: 662e 4669 6e64 5250 2829 0a20 2020 2020  f.FindRP().     
+00043050: 2020 2066 6f72 2072 6f6f 7420 696e 2072     for root in r
+00043060: 6f6f 7473 3a0a 2020 2020 2020 2020 2020  oots:.          
+00043070: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00043080: 726f 6f74 2c73 7472 293a 0a20 2020 2020  root,str):.     
+00043090: 2020 2020 2020 2020 2020 2072 743d 7365             rt=se
+000430a0: 6c66 2e69 6e66 6f2e 6765 7428 726f 6f74  lf.info.get(root
+000430b0: 2c7b 7d29 0a20 2020 2020 2020 2020 2020  ,{}).           
+000430c0: 2020 2020 2069 6620 6469 726e 616d 6520       if dirname 
+000430d0: 616e 6420 6469 726e 616d 6520 213d 2072  and dirname != r
+000430e0: 6f6f 743a 0a20 2020 2020 2020 2020 2020  oot:.           
+000430f0: 2020 2020 2020 2020 2072 743d 7365 6c66           rt=self
+00043100: 2e43 6450 6174 6828 7274 2c64 6972 6e61  .CdPath(rt,dirna
+00043110: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
+00043120: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00043130: 6528 7274 2c64 6963 7429 3a0a 2020 2020  e(rt,dict):.    
 00043140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043150: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00043160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043170: 2020 2020 2020 2020 2069 6620 6969 203d           if ii =
-00043180: 3d20 2720 6920 273a 2063 6f6e 7469 6e75  = ' i ': continu
-00043190: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000431a0: 2020 2020 2020 2020 2020 6966 2066 696c            if fil
-000431b0: 655f 696e 666f 2e67 6574 2827 7479 7065  e_info.get('type
-000431c0: 2729 203d 3d20 2764 6972 273a 0a20 2020  ') == 'dir':.   
-000431d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000431e0: 2020 2020 2020 2020 2069 6620 6669 6c65           if file
-000431f0: 5f6f 6e6c 793a 2063 6f6e 7469 6e75 650a  _only: continue.
-00043200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043210: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00043220: 7428 277b 7d7b 7d2f 272e 666f 726d 6174  t('{}{}/'.format
-00043230: 2864 696e 666f 2c69 6929 290a 2020 2020  (dinfo,ii)).    
+00043150: 666f 7220 6969 2069 6e20 7274 3a0a 2020  for ii in rt:.  
+00043160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043170: 2020 2020 2020 6669 6c65 5f69 6e66 6f3d        file_info=
+00043180: 7274 5b69 695d 2e67 6574 2827 2069 2027  rt[ii].get(' i '
+00043190: 2c7b 7d29 0a20 2020 2020 2020 2020 2020  ,{}).           
+000431a0: 2020 2020 2020 2020 2020 2020 2064 696e               din
+000431b0: 666f 3d27 270a 2020 2020 2020 2020 2020  fo=''.          
+000431c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000431d0: 2064 6574 6169 6c3a 0a20 2020 2020 2020   detail:.       
+000431e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000431f0: 2020 2020 2064 696e 666f 3d27 7b7d 207b       dinfo='{} {
+00043200: 7d20 7b7d 207b 7d20 7b7d 207b 7d20 272e  } {} {} {} {} '.
+00043210: 666f 726d 6174 2866 696c 655f 696e 666f  format(file_info
+00043220: 2e67 6574 2827 6d6f 6465 2729 2c0a 2020  .get('mode'),.  
+00043230: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00043240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043250: 2020 2020 2020 2020 6966 2073 7562 5f64          if sub_d
-00043260: 6972 3a0a 2020 2020 2020 2020 2020 2020  ir:.            
-00043270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043280: 2020 2020 7365 6c66 2e47 6574 4c69 7374      self.GetList
-00043290: 2864 6972 6e61 6d65 3d69 692c 726f 6f74  (dirname=ii,root
-000432a0: 733d 5b72 6f6f 745d 2c73 7562 5f64 6972  s=[root],sub_dir
-000432b0: 3d73 7562 5f64 6972 2c69 6e63 6c75 6465  =sub_dir,include
-000432c0: 5f70 6174 683d 5472 7565 2c64 6574 6169  _path=True,detai
-000432d0: 6c3d 6465 7461 696c 290a 2020 2020 2020  l=detail).      
-000432e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000432f0: 2020 656c 6966 206e 6f74 2064 6972 5f6f    elif not dir_o
-00043300: 6e6c 793a 0a20 2020 2020 2020 2020 2020  nly:.           
+00043250: 2020 2020 3120 6966 2066 696c 655f 696e      1 if file_in
+00043260: 666f 2e67 6574 2827 7479 7065 2729 2021  fo.get('type') !
+00043270: 3d20 2764 6972 2720 656c 7365 206c 656e  = 'dir' else len
+00043280: 2872 745b 6969 5d29 2d31 2c0a 2020 2020  (rt[ii])-1,.    
+00043290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000432a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000432b0: 2020 6669 6c65 5f69 6e66 6f2e 6765 7428    file_info.get(
+000432c0: 2775 6964 2729 2c0a 2020 2020 2020 2020  'uid'),.        
+000432d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000432e0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+000432f0: 6c65 5f69 6e66 6f2e 6765 7428 2767 6964  le_info.get('gid
+00043300: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
 00043310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043320: 2069 6620 696e 636c 7564 655f 7061 7468   if include_path
-00043330: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00043340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043350: 2020 7072 696e 7428 277b 7d7b 7d2f 7b7d    print('{}{}/{}
-00043360: 272e 666f 726d 6174 2864 696e 666f 2c64  '.format(dinfo,d
-00043370: 6972 6e61 6d65 2c69 6929 290a 2020 2020  irname,ii)).    
+00043320: 2020 2020 2020 2020 2020 6669 6c65 5f69            file_i
+00043330: 6e66 6f2e 6765 7428 2773 697a 6527 292c  nfo.get('size'),
+00043340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00043350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043360: 2020 2020 2020 2066 696c 655f 696e 666f         file_info
+00043370: 2e67 6574 2827 6d74 696d 6527 292c 0a20  .get('mtime'),. 
 00043380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043390: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000433a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000433b0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-000433c0: 696e 7428 277b 7d7b 7d27 2e66 6f72 6d61  int('{}{}'.forma
-000433d0: 7428 6469 6e66 6f2c 6969 2929 0a20 2020  t(dinfo,ii)).   
-000433e0: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-000433f0: 650a 0a20 2020 2064 6566 2045 7865 6346  e..    def ExecF
-00043400: 696c 6528 7365 6c66 2c66 696c 656e 616d  ile(self,filenam
-00043410: 652c 6269 6e5f 6e61 6d65 3d4e 6f6e 652c  e,bin_name=None,
-00043420: 6465 6661 756c 743d 4e6f 6e65 2c77 6f72  default=None,wor
-00043430: 6b5f 7061 7468 3d27 2f74 6d70 2729 3a0a  k_path='/tmp'):.
-00043440: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
-00043450: 7468 6520 6669 6c65 6e61 6d65 2069 7320  the filename is 
-00043460: 6578 6375 7461 626c 6520 696e 2074 6865  excutable in the
-00043470: 2073 7973 7465 6d20 6269 6e20 6669 6c65   system bin file
-00043480: 2074 6865 6e20 7265 7475 726e 2074 6865   then return the
-00043490: 2066 696c 6520 6e61 6d65 0a20 2020 2020   file name.     
-000434a0: 2020 2023 2069 6620 636f 6d70 7265 7373     # if compress
-000434b0: 6564 2066 696c 6520 7468 656e 2065 7874  ed file then ext
-000434c0: 7261 6374 2074 6865 2066 696c 6520 616e  ract the file an
-000434d0: 6420 6669 6e64 2062 696e 5f6e 616d 6520  d find bin_name 
-000434e0: 6669 6c65 2069 6e20 7468 6520 6578 7472  file in the extr
-000434f0: 6163 7465 6420 6469 7265 6374 6f72 790a  acted directory.
-00043500: 2020 2020 2020 2020 2320 2020 616e 6420          #   and 
-00043510: 666f 756e 6420 6269 6e61 7279 2066 696c  found binary fil
-00043520: 6520 7468 656e 2072 6574 7572 6e20 7468  e then return th
-00043530: 656e 2062 696e 6172 7920 6669 6c65 2070  en binary file p
-00043540: 6174 680a 2020 2020 2020 2020 2320 6966  ath.        # if
-00043550: 2066 696c 656e 616d 6520 6973 2065 7863   filename is exc
-00043560: 7574 6162 6c65 2066 696c 6520 7468 656e  utable file then
-00043570: 2072 6574 7572 6e20 7468 6520 6669 6c65   return the file
-00043580: 2070 6174 680a 2020 2020 2020 2020 2320   path.        # 
-00043590: 6966 206e 6f74 2066 6f75 6e64 2074 6865  if not found the
-000435a0: 6e20 7265 7475 726e 2064 6566 6175 6c74  n return default
-000435b0: 2076 616c 7565 0a20 2020 2020 2020 2065   value.        e
-000435c0: 7869 7374 3d73 656c 662e 4669 6c65 496e  xist=self.FileIn
-000435d0: 666f 2866 696c 656e 616d 6529 0a20 2020  fo(filename).   
-000435e0: 2020 2020 2069 6620 6578 6973 743a 0a20       if exist:. 
-000435f0: 2020 2020 2020 2020 2020 2069 6620 6578             if ex
-00043600: 6973 745b 2774 7970 6527 5d20 696e 205b  ist['type'] in [
-00043610: 2765 6c66 275d 2061 6e64 2065 7869 7374  'elf'] and exist
-00043620: 5b27 6d6f 6465 275d 203d 3d20 3333 3236  ['mode'] == 3326
-00043630: 313a 7265 7475 726e 2066 696c 656e 616d  1:return filenam
-00043640: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
-00043650: 2073 656c 662e 4578 7472 6163 7428 6669   self.Extract(fi
-00043660: 6c65 6e61 6d65 2c77 6f72 6b5f 7061 7468  lename,work_path
-00043670: 3d77 6f72 6b5f 7061 7468 293a 0a20 2020  =work_path):.   
-00043680: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00043690: 6269 6e5f 6e61 6d65 3a0a 2020 2020 2020  bin_name:.      
-000436a0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-000436b0: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
-000436c0: 2020 2020 2020 2020 666f 7220 6666 2069          for ff i
-000436d0: 6e20 7365 6c66 2e46 696e 6428 776f 726b  n self.Find(work
-000436e0: 5f70 6174 682c 6669 6c65 6e61 6d65 3d62  _path,filename=b
-000436f0: 696e 5f6e 616d 6529 3a0a 2020 2020 2020  in_name):.      
-00043700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043710: 2020 6966 2073 656c 662e 496e 666f 2866    if self.Info(f
-00043720: 6629 2e67 6574 2827 6d6f 6465 2729 203d  f).get('mode') =
-00043730: 3d20 3333 3236 313a 0a20 2020 2020 2020  = 33261:.       
-00043740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043750: 2020 2020 2072 742e 6170 7065 6e64 2866       rt.append(f
-00043760: 6629 0a20 2020 2020 2020 2020 2020 2020  f).             
-00043770: 2020 2020 2020 2072 6574 7572 6e20 7274         return rt
-00043780: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00043790: 2020 2020 2020 2020 2020 2069 6620 6669             if fi
-000437a0: 6e64 5f65 7865 6375 7461 626c 6528 6669  nd_executable(fi
-000437b0: 6c65 6e61 6d65 293a 2072 6574 7572 6e20  lename): return 
-000437c0: 6669 6c65 6e61 6d65 0a20 2020 2020 2020  filename.       
-000437d0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-000437e0: 0a20 2020 2064 6566 2042 6173 656e 616d  .    def Basenam
-000437f0: 6528 7365 6c66 2c66 696c 656e 616d 652c  e(self,filename,
-00043800: 6465 6661 756c 743d 4661 6c73 6529 3a0a  default=False):.
-00043810: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00043820: 7461 6e63 6528 6669 6c65 6e61 6d65 2c73  tance(filename,s
-00043830: 7472 293a 7265 7475 726e 206f 732e 7061  tr):return os.pa
-00043840: 7468 2e62 6173 656e 616d 6528 6669 6c65  th.basename(file
-00043850: 6e61 6d65 290a 2020 2020 2020 2020 7265  name).        re
-00043860: 7475 726e 2064 6566 6175 6c74 0a0a 2020  turn default..  
-00043870: 2020 6465 6620 4469 726e 616d 6528 7365    def Dirname(se
-00043880: 6c66 2c66 696c 656e 616d 652c 6269 6e5f  lf,filename,bin_
-00043890: 6e61 6d65 3d4e 6f6e 652c 6465 6661 756c  name=None,defaul
-000438a0: 743d 4661 6c73 6529 3a0a 2020 2020 2020  t=False):.      
-000438b0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-000438c0: 6e63 6528 6669 6c65 6e61 6d65 2c73 7472  nce(filename,str
-000438d0: 293a 2072 6574 7572 6e20 6465 6661 756c  ): return defaul
-000438e0: 740a 2020 2020 2020 2020 6966 2049 734e  t.        if IsN
-000438f0: 6f6e 6528 6269 6e5f 6e61 6d65 293a 2072  one(bin_name): r
-00043900: 6574 7572 6e20 6f73 2e70 6174 682e 6469  eturn os.path.di
-00043910: 726e 616d 6528 6669 6c65 6e61 6d65 290a  rname(filename).
-00043920: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-00043930: 7369 6e73 7461 6e63 6528 6269 6e5f 6e61  sinstance(bin_na
-00043940: 6d65 2c73 7472 293a 2072 6574 7572 6e20  me,str): return 
-00043950: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
-00043960: 6269 6e5f 696e 666f 3d62 696e 5f6e 616d  bin_info=bin_nam
-00043970: 652e 7370 6c69 7428 272f 2729 0a20 2020  e.split('/').   
-00043980: 2020 2020 2062 696e 5f6e 3d6c 656e 2862       bin_n=len(b
-00043990: 696e 5f69 6e66 6f29 0a20 2020 2020 2020  in_info).       
-000439a0: 2066 696c 656e 616d 655f 696e 666f 3d66   filename_info=f
-000439b0: 696c 656e 616d 652e 7370 6c69 7428 272f  ilename.split('/
-000439c0: 2729 0a20 2020 2020 2020 2066 696c 656e  ').        filen
-000439d0: 616d 655f 6e3d 6c65 6e28 6669 6c65 6e61  ame_n=len(filena
-000439e0: 6d65 5f69 6e66 6f29 0a20 2020 2020 2020  me_info).       
-000439f0: 2066 6f72 2069 6920 696e 2072 616e 6765   for ii in range
-00043a00: 2830 2c62 696e 5f6e 293a 0a20 2020 2020  (0,bin_n):.     
-00043a10: 2020 2020 2020 2069 6620 6669 6c65 6e61         if filena
-00043a20: 6d65 5f69 6e66 6f5b 6669 6c65 6e61 6d65  me_info[filename
-00043a30: 5f6e 2d31 2d69 695d 2021 3d20 6269 6e5f  _n-1-ii] != bin_
-00043a40: 696e 666f 5b62 696e 5f6e 2d31 2d69 695d  info[bin_n-1-ii]
-00043a50: 3a20 7265 7475 726e 2064 6566 6175 6c74  : return default
-00043a60: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00043a70: 4a6f 696e 2866 696c 656e 616d 655f 696e  Join(filename_in
-00043a80: 666f 5b3a 2d62 696e 5f6e 5d2c 7379 6d62  fo[:-bin_n],symb
-00043a90: 6f6c 3d27 2f27 290a 0a20 2020 2064 6566  ol='/')..    def
-00043aa0: 2046 696e 6428 7365 6c66 2c66 696c 656e   Find(self,filen
-00043ab0: 616d 652c 6465 6661 756c 743d 5b5d 293a  ame,default=[]):
-00043ac0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00043ad0: 6973 696e 7374 616e 6365 2866 696c 656e  isinstance(filen
-00043ae0: 616d 652c 7374 7229 3a20 7265 7475 726e  ame,str): return
-00043af0: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
-00043b00: 2066 696c 656e 616d 653d 6f73 2e70 6174   filename=os.pat
-00043b10: 682e 6261 7365 6e61 6d65 2866 696c 656e  h.basename(filen
-00043b20: 616d 6529 0a20 2020 2020 2020 2069 6620  ame).        if 
-00043b30: 6f73 2e70 6174 682e 6973 6469 7228 7365  os.path.isdir(se
-00043b40: 6c66 2e72 6f6f 745f 7061 7468 293a 0a20  lf.root_path):. 
-00043b50: 2020 2020 2020 2020 2020 2072 7420 3d20             rt = 
-00043b60: 5b5d 0a20 2020 2020 2020 2020 2020 2066  [].            f
-00043b70: 6f72 2062 6173 652c 2064 6972 732c 2066  or base, dirs, f
-00043b80: 696c 6573 2069 6e20 6f73 2e77 616c 6b28  iles in os.walk(
-00043b90: 7365 6c66 2e72 6f6f 745f 7061 7468 293a  self.root_path):
-00043ba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043bb0: 2066 6f75 6e64 203d 2066 6e6d 6174 6368   found = fnmatch
-00043bc0: 2e66 696c 7465 7228 6669 6c65 732c 2066  .filter(files, f
-00043bd0: 696c 656e 616d 6529 0a20 2020 2020 2020  ilename).       
-00043be0: 2020 2020 2020 2020 2072 742e 6578 7465           rt.exte
-00043bf0: 6e64 286f 732e 7061 7468 2e6a 6f69 6e28  nd(os.path.join(
-00043c00: 6261 7365 2c20 6629 2066 6f72 2066 2069  base, f) for f i
-00043c10: 6e20 666f 756e 6429 0a20 2020 2020 2020  n found).       
-00043c20: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
-00043c30: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-00043c40: 6661 756c 740a 0a20 2020 2064 6566 2052  fault..    def R
-00043c50: 7728 7365 6c66 2c6e 616d 652c 6461 7461  w(self,name,data
-00043c60: 3d4e 6f6e 652c 6f75 743d 2762 7974 6527  =None,out='byte'
-00043c70: 2c61 7070 656e 643d 4661 6c73 652c 7265  ,append=False,re
-00043c80: 6164 3d4e 6f6e 652c 6f76 6572 7772 6974  ad=None,overwrit
-00043c90: 653d 5472 7565 2c66 696e 666f 3d7b 7d2c  e=True,finfo={},
-00043ca0: 6669 6c65 5f6f 6e6c 793d 5472 7565 2c64  file_only=True,d
-00043cb0: 6566 6175 6c74 3d46 616c 7365 293a 0a20  efault=False):. 
-00043cc0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00043cd0: 616e 6365 286e 616d 652c 7374 7229 3a0a  ance(name,str):.
-00043ce0: 2020 2020 2020 2020 2020 2020 2369 6620              #if 
-00043cf0: 6461 7461 2069 7320 4e6f 6e65 3a20 2320  data is None: # 
-00043d00: 5265 6164 2066 726f 6d20 6669 6c65 0a20  Read from file. 
-00043d10: 2020 2020 2020 2020 2020 2069 6620 4973             if Is
-00043d20: 4e6f 6e65 2864 6174 6129 3a20 2320 5265  None(data): # Re
-00043d30: 6164 2066 726f 6d20 6669 6c65 0a20 2020  ad from file.   
-00043d40: 2020 2020 2020 2020 2020 2020 2064 6174               dat
-00043d50: 613d 6361 7428 6e61 6d65 2c66 696c 655f  a=cat(name,file_
-00043d60: 6f6e 6c79 3d66 696c 655f 6f6e 6c79 2c62  only=file_only,b
-00043d70: 7974 653d 6f75 742c 6865 6164 3d72 6561  yte=out,head=rea
-00043d80: 642c 6465 6661 756c 743d 6465 6661 756c  d,default=defaul
-00043d90: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-00043da0: 2020 2069 6620 6461 7461 2069 7320 4661     if data is Fa
-00043db0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00043dc0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00043dd0: 4661 6c73 652c 6465 6661 756c 740a 2020  False,default.  
-00043de0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00043df0: 7475 726e 2054 7275 652c 6461 7461 0a20  turn True,data. 
-00043e00: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00043e10: 2023 2057 7269 7465 2074 6f20 6669 6c65   # Write to file
-00043e20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043e30: 2066 696c 655f 7061 7468 3d6f 732e 7061   file_path=os.pa
-00043e40: 7468 2e64 6972 6e61 6d65 286e 616d 6529  th.dirname(name)
-00043e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043e60: 2069 6620 6e6f 7420 6669 6c65 5f70 6174   if not file_pat
-00043e70: 6820 6f72 206f 732e 7061 7468 2e69 7364  h or os.path.isd
-00043e80: 6972 2866 696c 655f 7061 7468 293a 2023  ir(file_path): #
-00043e90: 2063 7572 7265 6e74 2064 6972 206f 7220   current dir or 
-00043ea0: 636f 7272 6563 7420 6469 7265 6374 6f72  correct director
-00043eb0: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
-00043ec0: 2020 2020 2020 6966 2061 7070 656e 643a        if append:
-00043ed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043ee0: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
-00043ef0: 656e 286e 616d 652c 2761 6227 2920 6173  en(name,'ab') as
-00043f00: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
-00043f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043f20: 662e 7772 6974 6528 4279 7465 7328 6461  f.write(Bytes(da
-00043f30: 7461 2929 0a20 2020 2020 2020 2020 2020  ta)).           
-00043f40: 2020 2020 2020 2020 2065 6c69 6620 6e6f           elif no
-00043f50: 7420 6669 6c65 5f6f 6e6c 793a 0a20 2020  t file_only:.   
-00043f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043f70: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00043f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043f90: 2020 2020 2020 663d 6f73 2e6f 7065 6e28        f=os.open(
-00043fa0: 6e61 6d65 2c6f 732e 4f5f 5244 5752 290a  name,os.O_RDWR).
-00043fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043fc0: 2020 2020 2020 2020 2020 2020 6f73 2e77              os.w
-00043fd0: 7269 7465 2866 2c64 6174 6129 0a20 2020  rite(f,data).   
-00043fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043ff0: 2020 2020 2020 2020 206f 732e 636c 6f73           os.clos
-00044000: 6528 6629 0a20 2020 2020 2020 2020 2020  e(f).           
-00044010: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-00044020: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-00044030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044040: 2072 6574 7572 6e20 4661 6c73 652c 4e6f   return False,No
-00044050: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-00044060: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00044070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044080: 2020 2020 2077 6974 6820 6f70 656e 286e       with open(n
-00044090: 616d 652c 2777 6227 2920 6173 2066 3a0a  ame,'wb') as f:.
-000440a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000440b0: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
-000440c0: 6974 6528 4279 7465 7328 6461 7461 2929  ite(Bytes(data))
-000440d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000440e0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-000440f0: 7374 616e 6365 2866 696e 666f 2c64 6963  stance(finfo,dic
-00044100: 7429 2061 6e64 2066 696e 666f 3a20 7365  t) and finfo: se
-00044110: 6c66 2e53 6574 4964 656e 7469 7479 286e  lf.SetIdentity(n
-00044120: 616d 652c 2a2a 6669 6e66 6f29 0a20 2020  ame,**finfo).   
-00044130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044140: 2020 2020 2023 6d6f 6465 3d73 656c 662e       #mode=self.
-00044150: 4d6f 6465 286d 6f64 6529 0a20 2020 2020  Mode(mode).     
-00044160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044170: 2020 2023 6966 206d 6f64 653a 206f 732e     #if mode: os.
-00044180: 6368 6d6f 6428 6e61 6d65 2c69 6e74 286d  chmod(name,int(m
-00044190: 6f64 652c 6261 7365 3d38 2929 0a20 2020  ode,base=8)).   
-000441a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000441b0: 2020 2020 2023 6966 2075 6964 2061 6e64       #if uid and
-000441c0: 2067 6964 3a20 6f73 2e63 686f 776e 286e   gid: os.chown(n
-000441d0: 616d 652c 7569 642c 6769 6429 0a20 2020  ame,uid,gid).   
-000441e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000441f0: 2020 2020 2023 6966 206d 7469 6d65 2061       #if mtime a
-00044200: 6e64 2061 7469 6d65 3a20 6f73 2e75 7469  nd atime: os.uti
-00044210: 6d65 286e 616d 652c 2861 7469 6d65 2c6d  me(name,(atime,m
-00044220: 7469 6d65 2929 2320 5469 6d65 2075 7064  time))# Time upd
-00044230: 6174 6520 6d75 7374 2062 6520 6174 206c  ate must be at l
-00044240: 6173 7420 6f72 6465 720a 2020 2020 2020  ast order.      
-00044250: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00044260: 7475 726e 2054 7275 652c 4e6f 6e65 0a20  turn True,None. 
-00044270: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00044280: 6620 6465 6661 756c 7420 3d3d 207b 2765  f default == {'e
-00044290: 7272 277d 3a0a 2020 2020 2020 2020 2020  rr'}:.          
-000442a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000442b0: 2046 616c 7365 2c27 4469 7265 6374 6f72   False,'Director
-000442c0: 7928 7b7d 2920 6e6f 7420 666f 756e 6427  y({}) not found'
-000442d0: 2e66 6f72 6d61 7428 6669 6c65 5f70 6174  .format(file_pat
-000442e0: 6829 0a20 2020 2020 2020 2020 2020 2020  h).             
-000442f0: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
-00044300: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
-00044310: 6966 2064 6566 6175 6c74 203d 3d20 7b27  if default == {'
-00044320: 6572 7227 7d3a 0a20 2020 2020 2020 2020  err'}:.         
-00044330: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
-00044340: 2755 6e6b 6e6f 776e 2074 7970 6528 7b7d  'Unknown type({}
-00044350: 2920 6669 6c65 6e61 6d65 272e 666f 726d  ) filename'.form
-00044360: 6174 286e 616d 6529 0a20 2020 2020 2020  at(name).       
-00044370: 2072 6574 7572 6e20 4661 6c73 652c 6465   return False,de
-00044380: 6661 756c 740a 0a20 2020 2064 6566 204d  fault..    def M
-00044390: 6f64 6528 7365 6c66 2c76 616c 2c6d 6f64  ode(self,val,mod
-000443a0: 653d 2763 686d 6f64 272c 6465 6661 756c  e='chmod',defaul
-000443b0: 743d 4661 6c73 6529 3a0a 2020 2020 2020  t=False):.      
-000443c0: 2020 2727 270a 2020 2020 2020 2020 636f    '''.        co
-000443d0: 6e76 6572 7420 4669 6c65 204d 6f64 6520  nvert File Mode 
-000443e0: 746f 206d 6173 6b0a 2020 2020 2020 2020  to mask.        
-000443f0: 6d6f 6465 200a 2020 2020 2020 2020 2020  mode .          
-00044400: 2027 6368 6d6f 6427 203a 2064 6566 6175   'chmod' : defau
-00044410: 6c74 2c20 636f 6e76 6572 7420 746f 206d  lt, convert to m
-00044420: 6173 6b20 286f 732e 6368 6d6f 6428 3c66  ask (os.chmod(<f
-00044430: 696c 653e 2c3c 6d61 736b 3e29 290a 2020  ile>,<mask>)).  
-00044440: 2020 2020 2020 2020 2027 696e 7427 2020           'int'  
-00044450: 203a 2072 6574 7572 6e20 746f 2069 6e74   : return to int
-00044460: 206e 756d 6265 7220 6f66 206f 6374 2820   number of oct( 
-00044470: 6578 3a20 3735 3520 290a 2020 2020 2020  ex: 755 ).      
-00044480: 2020 2020 2027 6f63 7427 2020 203a 2072       'oct'   : r
-00044490: 6574 7572 6e20 6f63 7420 6e75 6d62 6572  eturn oct number
-000444a0: 2028 7374 7269 6e67 290a 2020 2020 2020   (string).      
-000444b0: 2020 2020 2027 7374 7227 2020 203a 2072       'str'   : r
-000444c0: 6574 7572 6e20 7374 7269 6e67 2028 2d72  eturn string (-r
-000444d0: 7778 722d 2d72 2d2d 290a 2020 2020 2020  wxr--r--).      
-000444e0: 2020 6465 6661 756c 743a 2046 616c 7365    default: False
-000444f0: 0a20 2020 2020 2020 2027 2727 0a20 2020  .        '''.   
-00044500: 2020 2020 2064 6566 205f 6d6f 6465 5f28       def _mode_(
-00044510: 6f63 745f 6461 7461 2c6d 6f64 653d 2763  oct_data,mode='c
-00044520: 686d 6f64 2729 3a0a 2020 2020 2020 2020  hmod'):.        
-00044530: 2020 2020 2363 6f6e 7665 7274 2074 6f20      #convert to 
-00044540: 6f63 7461 6c20 746f 2038 6269 7420 6d61  octal to 8bit ma
-00044550: 736b 2c20 696e 742c 2073 7472 696e 670a  sk, int, string.
-00044560: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-00044570: 6f64 6520 3d3d 2027 6368 6d6f 6427 3a0a  ode == 'chmod':.
-00044580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044590: 7265 7475 726e 2069 6e74 286f 6374 5f64  return int(oct_d
-000445a0: 6174 612c 6261 7365 3d38 290a 2020 2020  ata,base=8).    
-000445b0: 2020 2020 2020 2020 656c 6966 206d 6f64          elif mod
-000445c0: 6520 696e 205b 2769 6e74 272c 696e 745d  e in ['int',int]
-000445d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000445e0: 2020 7265 7475 726e 2069 6e74 286f 6374    return int(oct
-000445f0: 5f64 6174 612e 7265 706c 6163 6528 276f  _data.replace('o
-00044600: 272c 2727 292c 6261 7365 3d31 3029 0a20  ',''),base=10). 
-00044610: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00044620: 6d6f 6465 2069 6e20 5b27 7374 7227 2c73  mode in ['str',s
-00044630: 7472 5d3a 0a20 2020 2020 2020 2020 2020  tr]:.           
-00044640: 2020 2020 206d 3d5b 5d0a 2020 2020 2020       m=[].      
-00044650: 2020 2020 2020 2020 2020 2366 6f72 2069            #for i
-00044660: 2069 6e20 6c69 7374 2873 7472 2869 6e74   in list(str(int
-00044670: 286f 6374 5f64 6174 612c 6261 7365 3d31  (oct_data,base=1
-00044680: 3029 2929 3a0a 2020 2020 2020 2020 2020  0))):.          
-00044690: 2020 2020 2020 743d 4661 6c73 650a 2020        t=False.  
-000446a0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-000446b0: 7220 6e2c 6920 696e 2065 6e75 6d65 7261  r n,i in enumera
-000446c0: 7465 2873 7472 2869 6e74 286f 6374 5f64  te(str(int(oct_d
-000446d0: 6174 612e 7265 706c 6163 6528 276f 272c  ata.replace('o',
-000446e0: 2727 292c 6261 7365 3d31 3029 2929 3a0a  ''),base=10))):.
-000446f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044700: 2020 2020 6966 206e 203d 3d20 303a 0a20      if n == 0:. 
-00044710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044720: 2020 2020 2020 2069 6620 6920 3d3d 2027         if i == '
-00044730: 3127 3a20 743d 5472 7565 0a20 2020 2020  1': t=True.     
-00044740: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00044750: 6620 6e20 3e20 303a 0a20 2020 2020 2020  f n > 0:.       
-00044760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044770: 2069 6620 6920 3d3d 2027 3727 3a0a 2020   if i == '7':.  
-00044780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044790: 2020 2020 2020 2020 2020 6d2e 6170 7065            m.appe
-000447a0: 6e64 2827 7277 7827 290a 2020 2020 2020  nd('rwx').      
-000447b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000447c0: 2020 656c 6966 2069 203d 3d20 2736 273a    elif i == '6':
-000447d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000447e0: 2020 2020 2020 2020 2020 2020 206d 2e61               m.a
-000447f0: 7070 656e 6428 2772 772d 2729 0a20 2020  ppend('rw-').   
-00044800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044810: 2020 2020 2065 6c69 6620 6920 3d3d 2027       elif i == '
-00044820: 3527 3a0a 2020 2020 2020 2020 2020 2020  5':.            
-00044830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044840: 6d2e 6170 7065 6e64 2827 722d 7827 290a  m.append('r-x').
-00044850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044860: 2020 2020 2020 2020 656c 6966 2069 203d          elif i =
-00044870: 3d20 2734 273a 0a20 2020 2020 2020 2020  = '4':.         
-00044880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044890: 2020 206d 2e61 7070 656e 6428 2772 2d2d     m.append('r--
-000448a0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-000448b0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000448c0: 6920 3d3d 2027 3327 3a0a 2020 2020 2020  i == '3':.      
-000448d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000448e0: 2020 2020 2020 6d2e 6170 7065 6e64 2827        m.append('
-000448f0: 2d77 7827 290a 2020 2020 2020 2020 2020  -wx').          
-00044900: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00044910: 6966 2069 203d 3d20 2732 273a 0a20 2020  if i == '2':.   
-00044920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044930: 2020 2020 2020 2020 206d 2e61 7070 656e           m.appen
-00044940: 6428 272d 772d 2729 0a20 2020 2020 2020  d('-w-').       
-00044950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044960: 2065 6c69 6620 6920 3d3d 2027 3127 3a0a   elif i == '1':.
-00044970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044980: 2020 2020 2020 2020 2020 2020 6d2e 6170              m.ap
-00044990: 7065 6e64 2827 2d2d 7827 290a 2020 2020  pend('--x').    
-000449a0: 2020 2020 2020 2020 2020 2020 7374 725f              str_
-000449b0: 6d6f 643d 4a6f 696e 286d 2c27 2729 0a20  mod=Join(m,''). 
-000449c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000449d0: 6620 743a 2072 6574 7572 6e20 7374 725f  f t: return str_
-000449e0: 6d6f 645b 3a2d 315d 2b27 7427 0a20 2020  mod[:-1]+'t'.   
-000449f0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00044a00: 7572 6e20 7374 725f 6d6f 640a 2020 2020  urn str_mod.    
-00044a10: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-00044a20: 6374 5f64 6174 610a 2020 2020 2020 2020  ct_data.        
-00044a30: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
-00044a40: 6c2c 696e 7429 3a0a 2020 2020 2020 2020  l,int):.        
-00044a50: 2020 2020 2369 6620 7661 6c20 3e20 3531      #if val > 51
-00044a60: 313a 2020 2020 2020 2023 7374 6174 2e73  1:       #stat.s
-00044a70: 745f 6d6f 6465 2028 3332 3736 3820 7e20  t_mode (32768 ~ 
-00044a80: 3333 3237 3929 0a20 2020 2020 2020 2020  33279).         
-00044a90: 2020 2023 7374 6174 2e73 745f 6d6f 6465     #stat.st_mode
-00044aa0: 2028 6669 6c65 3a20 3332 3736 387e 3336   (file: 32768~36
-00044ab0: 3836 332c 2064 6972 6563 746f 7279 3a20  863, directory: 
-00044ac0: 3136 3338 3420 7e20 3230 3437 3929 0a20  16384 ~ 20479). 
-00044ad0: 2020 2020 2020 2020 2020 2069 6620 3332             if 32
-00044ae0: 3736 3820 3c3d 2076 616c 203c 3d20 3336  768 <= val <= 36
-00044af0: 3836 3320 6f72 2031 3633 3834 203c 3d20  863 or 16384 <= 
-00044b00: 7661 6c20 3c3d 2032 3034 3739 3a20 2020  val <= 20479:   
-00044b10: 2373 7461 742e 7374 5f6d 6f64 650a 2020  #stat.st_mode.  
-00044b20: 2020 2020 2020 2020 2020 2020 2020 2372                #r
-00044b30: 6574 7572 6e20 5f6d 6f64 655f 286f 6374  eturn _mode_(oct
-00044b40: 2876 616c 295b 2d34 3a5d 2c6d 6f64 6529  (val)[-4:],mode)
-00044b50: 2023 2074 6f20 6f63 7461 6c20 6e75 6d62   # to octal numb
-00044b60: 6572 2028 6f63 7428 7661 6c29 5b2d 343a  er (oct(val)[-4:
-00044b70: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-00044b80: 2020 2072 6574 7572 6e20 5f6d 6f64 655f     return _mode_
-00044b90: 286f 6374 2876 616c 2026 2030 6f37 3737  (oct(val & 0o777
-00044ba0: 292c 6d6f 6465 2920 2320 746f 206f 6374  ),mode) # to oct
-00044bb0: 616c 206e 756d 6265 7220 286f 6374 2876  al number (oct(v
-00044bc0: 616c 295b 2d34 3a5d 290a 2020 2020 2020  al)[-4:]).      
-00044bd0: 2020 2020 2020 656c 6966 2035 3131 203e        elif 511 >
-00044be0: 3d20 7661 6c20 3e20 3633 3a20 2020 2020  = val > 63:     
-00044bf0: 2023 6d61 736b 0a20 2020 2020 2020 2020   #mask.         
-00044c00: 2020 2020 2020 2072 6574 7572 6e20 5f6d         return _m
-00044c10: 6f64 655f 286f 6374 2876 616c 292c 6d6f  ode_(oct(val),mo
-00044c20: 6465 2920 2020 2020 2023 2074 6f20 6f63  de)      # to oc
-00044c30: 616c 206e 756d 6265 7228 6f63 7428 7661  al number(oct(va
-00044c40: 6c29 290a 2020 2020 2020 2020 2020 2020  l)).            
-00044c50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00044c60: 2020 2020 2020 7265 7475 726e 205f 6d6f        return _mo
-00044c70: 6465 5f28 2725 3034 6427 2528 7661 6c29  de_('%04d'%(val)
-00044c80: 2c6d 6f64 6529 2020 2020 2020 2320 746f  ,mode)      # to
-00044c90: 206f 6361 6c20 6e75 6d62 6572 286f 6374   ocal number(oct
-00044ca0: 2876 616c 2929 0a20 2020 2020 2020 2065  (val)).        e
-00044cb0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00044cc0: 2076 616c 3d53 7472 2876 616c 2c64 6566   val=Str(val,def
-00044cd0: 6175 6c74 3d4e 6f6e 6529 0a20 2020 2020  ault=None).     
-00044ce0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00044cf0: 616e 6365 2876 616c 2c73 7472 293a 0a20  ance(val,str):. 
-00044d00: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00044d10: 616c 5f6c 656e 3d6c 656e 2876 616c 290a  al_len=len(val).
-00044d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044d30: 6e75 6d3d 496e 7428 7661 6c2c 6465 6661  num=Int(val,defa
-00044d40: 756c 743d 4e6f 6e65 290a 2020 2020 2020  ult=None).      
-00044d50: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00044d60: 6e73 7461 6e63 6528 6e75 6d2c 696e 7429  nstance(num,int)
-00044d70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00044d80: 2020 2020 2020 6966 2033 203c 3d20 6c65        if 3 <= le
-00044d90: 6e28 7661 6c29 203c 3d34 2061 6e64 2031  n(val) <=4 and 1
-00044da0: 3030 203c 3d20 6e75 6d20 3c3d 2037 3737  00 <= num <= 777
-00044db0: 3a20 2373 7472 696e 6720 7479 7065 206f  : #string type o
-00044dc0: 6620 7065 726d 6973 7369 6f6e 206e 756d  f permission num
-00044dd0: 6265 7228 6f63 7461 6c20 6e75 6d62 6572  ber(octal number
-00044de0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00044df0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00044e00: 205f 6d6f 6465 5f28 2725 3034 6427 2528   _mode_('%04d'%(
-00044e10: 6e75 6d29 2c6d 6f64 6529 0a20 2020 2020  num),mode).     
-00044e20: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00044e30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044e40: 2020 2020 2076 616c 5f6c 656e 3d6c 656e       val_len=len
-00044e50: 2876 616c 290a 2020 2020 2020 2020 2020  (val).          
-00044e60: 2020 2020 2020 2020 2020 6966 2039 3c3d            if 9<=
-00044e70: 2076 616c 5f6c 656e 203c 3d31 303a 0a20   val_len <=10:. 
-00044e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044e90: 2020 2020 2020 2069 6620 7661 6c5f 6c65         if val_le
-00044ea0: 6e20 3d3d 2031 3020 616e 6420 7661 6c5b  n == 10 and val[
-00044eb0: 305d 2069 6e20 5b27 2d27 2c27 6427 2c27  0] in ['-','d','
-00044ec0: 7327 5d3a 0a20 2020 2020 2020 2020 2020  s']:.           
-00044ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044ee0: 2076 616c 3d76 616c 5b31 3a5d 0a20 2020   val=val[1:].   
-00044ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044f00: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00044f10: 2020 2020 2020 2020 2020 2020 2020 2053                 S
-00044f20: 7464 4572 7228 2742 6164 2070 6572 6d69  tdErr('Bad permi
-00044f30: 7373 696f 6e20 6c65 6e67 7468 2729 0a20  ssion length'). 
-00044f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044f50: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-00044f60: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
-00044f70: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00044f80: 2061 6c6c 2876 616c 5b6b 5d20 696e 2027   all(val[k] in '
-00044f90: 7277 2d27 2066 6f72 206b 2069 6e20 5b30  rw-' for k in [0
-00044fa0: 2c31 2c33 2c34 2c36 2c37 5d29 3a0a 2020  ,1,3,4,6,7]):.  
-00044fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044fc0: 2020 2020 2020 5374 6445 7272 2827 4261        StdErr('Ba
-00044fd0: 6420 7065 726d 6973 7369 6f6e 2066 6f72  d permission for
-00044fe0: 6d61 7420 2872 6561 642d 7772 6974 6529  mat (read-write)
-00044ff0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00045000: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00045010: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
-00045020: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00045030: 206e 6f74 2061 6c6c 2876 616c 5b6b 5d20   not all(val[k] 
-00045040: 696e 2027 7873 2d27 2066 6f72 206b 2069  in 'xs-' for k i
-00045050: 6e20 5b32 2c35 5d29 3a0a 2020 2020 2020  n [2,5]):.      
-00045060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045070: 2020 5374 6445 7272 2827 4261 6420 7065    StdErr('Bad pe
-00045080: 726d 6973 7369 6f6e 2066 6f72 6d61 7420  rmission format 
-00045090: 2865 7865 6375 7465 2927 290a 2020 2020  (execute)').    
+00043390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000433a0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+000433b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000433c0: 6620 6969 203d 3d20 2720 6920 273a 2063  f ii == ' i ': c
+000433d0: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
+000433e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000433f0: 6966 2066 696c 655f 696e 666f 2e67 6574  if file_info.get
+00043400: 2827 7479 7065 2729 203d 3d20 2764 6972  ('type') == 'dir
+00043410: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00043420: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00043430: 6620 6669 6c65 5f6f 6e6c 793a 2063 6f6e  f file_only: con
+00043440: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00043450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043460: 2020 7072 696e 7428 277b 7d7b 7d2f 272e    print('{}{}/'.
+00043470: 666f 726d 6174 2864 696e 666f 2c69 6929  format(dinfo,ii)
+00043480: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00043490: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000434a0: 2073 7562 5f64 6972 3a0a 2020 2020 2020   sub_dir:.      
+000434b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000434c0: 2020 2020 2020 2020 2020 7365 6c66 2e47            self.G
+000434d0: 6574 4c69 7374 2864 6972 6e61 6d65 3d69  etList(dirname=i
+000434e0: 692c 726f 6f74 733d 5b72 6f6f 745d 2c73  i,roots=[root],s
+000434f0: 7562 5f64 6972 3d73 7562 5f64 6972 2c69  ub_dir=sub_dir,i
+00043500: 6e63 6c75 6465 5f70 6174 683d 5472 7565  nclude_path=True
+00043510: 2c64 6574 6169 6c3d 6465 7461 696c 290a  ,detail=detail).
+00043520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043530: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
+00043540: 2064 6972 5f6f 6e6c 793a 0a20 2020 2020   dir_only:.     
+00043550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043560: 2020 2020 2020 2069 6620 696e 636c 7564         if includ
+00043570: 655f 7061 7468 3a0a 2020 2020 2020 2020  e_path:.        
+00043580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043590: 2020 2020 2020 2020 7072 696e 7428 277b          print('{
+000435a0: 7d7b 7d2f 7b7d 272e 666f 726d 6174 2864  }{}/{}'.format(d
+000435b0: 696e 666f 2c64 6972 6e61 6d65 2c69 6929  info,dirname,ii)
+000435c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000435d0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000435e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000435f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043600: 2020 2020 7072 696e 7428 277b 7d7b 7d27      print('{}{}'
+00043610: 2e66 6f72 6d61 7428 6469 6e66 6f2c 6969  .format(dinfo,ii
+00043620: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
+00043630: 6e20 4661 6c73 650a 0a20 2020 2064 6566  n False..    def
+00043640: 2045 7865 6346 696c 6528 7365 6c66 2c66   ExecFile(self,f
+00043650: 696c 656e 616d 652c 6269 6e5f 6e61 6d65  ilename,bin_name
+00043660: 3d4e 6f6e 652c 6465 6661 756c 743d 4e6f  =None,default=No
+00043670: 6e65 2c77 6f72 6b5f 7061 7468 3d27 2f74  ne,work_path='/t
+00043680: 6d70 2729 3a0a 2020 2020 2020 2020 2320  mp'):.        # 
+00043690: 6368 6563 6b20 7468 6520 6669 6c65 6e61  check the filena
+000436a0: 6d65 2069 7320 6578 6375 7461 626c 6520  me is excutable 
+000436b0: 696e 2074 6865 2073 7973 7465 6d20 6269  in the system bi
+000436c0: 6e20 6669 6c65 2074 6865 6e20 7265 7475  n file then retu
+000436d0: 726e 2074 6865 2066 696c 6520 6e61 6d65  rn the file name
+000436e0: 0a20 2020 2020 2020 2023 2069 6620 636f  .        # if co
+000436f0: 6d70 7265 7373 6564 2066 696c 6520 7468  mpressed file th
+00043700: 656e 2065 7874 7261 6374 2074 6865 2066  en extract the f
+00043710: 696c 6520 616e 6420 6669 6e64 2062 696e  ile and find bin
+00043720: 5f6e 616d 6520 6669 6c65 2069 6e20 7468  _name file in th
+00043730: 6520 6578 7472 6163 7465 6420 6469 7265  e extracted dire
+00043740: 6374 6f72 790a 2020 2020 2020 2020 2320  ctory.        # 
+00043750: 2020 616e 6420 666f 756e 6420 6269 6e61    and found bina
+00043760: 7279 2066 696c 6520 7468 656e 2072 6574  ry file then ret
+00043770: 7572 6e20 7468 656e 2062 696e 6172 7920  urn then binary 
+00043780: 6669 6c65 2070 6174 680a 2020 2020 2020  file path.      
+00043790: 2020 2320 6966 2066 696c 656e 616d 6520    # if filename 
+000437a0: 6973 2065 7863 7574 6162 6c65 2066 696c  is excutable fil
+000437b0: 6520 7468 656e 2072 6574 7572 6e20 7468  e then return th
+000437c0: 6520 6669 6c65 2070 6174 680a 2020 2020  e file path.    
+000437d0: 2020 2020 2320 6966 206e 6f74 2066 6f75      # if not fou
+000437e0: 6e64 2074 6865 6e20 7265 7475 726e 2064  nd then return d
+000437f0: 6566 6175 6c74 2076 616c 7565 0a20 2020  efault value.   
+00043800: 2020 2020 2065 7869 7374 3d73 656c 662e       exist=self.
+00043810: 4669 6c65 496e 666f 2866 696c 656e 616d  FileInfo(filenam
+00043820: 6529 0a20 2020 2020 2020 2069 6620 6578  e).        if ex
+00043830: 6973 743a 0a20 2020 2020 2020 2020 2020  ist:.           
+00043840: 2069 6620 6578 6973 745b 2774 7970 6527   if exist['type'
+00043850: 5d20 696e 205b 2765 6c66 275d 2061 6e64  ] in ['elf'] and
+00043860: 2065 7869 7374 5b27 6d6f 6465 275d 203d   exist['mode'] =
+00043870: 3d20 3333 3236 313a 7265 7475 726e 2066  = 33261:return f
+00043880: 696c 656e 616d 650a 2020 2020 2020 2020  ilename.        
+00043890: 2020 2020 6966 2073 656c 662e 4578 7472      if self.Extr
+000438a0: 6163 7428 6669 6c65 6e61 6d65 2c77 6f72  act(filename,wor
+000438b0: 6b5f 7061 7468 3d77 6f72 6b5f 7061 7468  k_path=work_path
+000438c0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000438d0: 2020 2069 6620 6269 6e5f 6e61 6d65 3a0a     if bin_name:.
+000438e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000438f0: 2020 2020 7274 3d5b 5d0a 2020 2020 2020      rt=[].      
+00043900: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00043910: 7220 6666 2069 6e20 7365 6c66 2e46 696e  r ff in self.Fin
+00043920: 6428 776f 726b 5f70 6174 682c 6669 6c65  d(work_path,file
+00043930: 6e61 6d65 3d62 696e 5f6e 616d 6529 3a0a  name=bin_name):.
+00043940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043950: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00043960: 496e 666f 2866 6629 2e67 6574 2827 6d6f  Info(ff).get('mo
+00043970: 6465 2729 203d 3d20 3333 3236 313a 0a20  de') == 33261:. 
+00043980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043990: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+000439a0: 7065 6e64 2866 6629 0a20 2020 2020 2020  pend(ff).       
+000439b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000439c0: 7572 6e20 7274 0a20 2020 2020 2020 2065  urn rt.        e
+000439d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000439e0: 2069 6620 6669 6e64 5f65 7865 6375 7461   if find_executa
+000439f0: 626c 6528 6669 6c65 6e61 6d65 293a 2072  ble(filename): r
+00043a00: 6574 7572 6e20 6669 6c65 6e61 6d65 0a20  eturn filename. 
+00043a10: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00043a20: 6661 756c 740a 0a20 2020 2064 6566 2042  fault..    def B
+00043a30: 6173 656e 616d 6528 7365 6c66 2c66 696c  asename(self,fil
+00043a40: 656e 616d 652c 6465 6661 756c 743d 4661  ename,default=Fa
+00043a50: 6c73 6529 3a0a 2020 2020 2020 2020 6966  lse):.        if
+00043a60: 2069 7369 6e73 7461 6e63 6528 6669 6c65   isinstance(file
+00043a70: 6e61 6d65 2c73 7472 293a 7265 7475 726e  name,str):return
+00043a80: 206f 732e 7061 7468 2e62 6173 656e 616d   os.path.basenam
+00043a90: 6528 6669 6c65 6e61 6d65 290a 2020 2020  e(filename).    
+00043aa0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+00043ab0: 6c74 0a0a 2020 2020 6465 6620 4469 726e  lt..    def Dirn
+00043ac0: 616d 6528 7365 6c66 2c66 696c 656e 616d  ame(self,filenam
+00043ad0: 652c 6269 6e5f 6e61 6d65 3d4e 6f6e 652c  e,bin_name=None,
+00043ae0: 6465 6661 756c 743d 4661 6c73 6529 3a0a  default=False):.
+00043af0: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+00043b00: 7369 6e73 7461 6e63 6528 6669 6c65 6e61  sinstance(filena
+00043b10: 6d65 2c73 7472 293a 2072 6574 7572 6e20  me,str): return 
+00043b20: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+00043b30: 6966 2049 734e 6f6e 6528 6269 6e5f 6e61  if IsNone(bin_na
+00043b40: 6d65 293a 2072 6574 7572 6e20 6f73 2e70  me): return os.p
+00043b50: 6174 682e 6469 726e 616d 6528 6669 6c65  ath.dirname(file
+00043b60: 6e61 6d65 290a 2020 2020 2020 2020 6966  name).        if
+00043b70: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+00043b80: 6269 6e5f 6e61 6d65 2c73 7472 293a 2072  bin_name,str): r
+00043b90: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+00043ba0: 2020 2020 2020 6269 6e5f 696e 666f 3d62        bin_info=b
+00043bb0: 696e 5f6e 616d 652e 7370 6c69 7428 272f  in_name.split('/
+00043bc0: 2729 0a20 2020 2020 2020 2062 696e 5f6e  ').        bin_n
+00043bd0: 3d6c 656e 2862 696e 5f69 6e66 6f29 0a20  =len(bin_info). 
+00043be0: 2020 2020 2020 2066 696c 656e 616d 655f         filename_
+00043bf0: 696e 666f 3d66 696c 656e 616d 652e 7370  info=filename.sp
+00043c00: 6c69 7428 272f 2729 0a20 2020 2020 2020  lit('/').       
+00043c10: 2066 696c 656e 616d 655f 6e3d 6c65 6e28   filename_n=len(
+00043c20: 6669 6c65 6e61 6d65 5f69 6e66 6f29 0a20  filename_info). 
+00043c30: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
+00043c40: 2072 616e 6765 2830 2c62 696e 5f6e 293a   range(0,bin_n):
+00043c50: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00043c60: 6669 6c65 6e61 6d65 5f69 6e66 6f5b 6669  filename_info[fi
+00043c70: 6c65 6e61 6d65 5f6e 2d31 2d69 695d 2021  lename_n-1-ii] !
+00043c80: 3d20 6269 6e5f 696e 666f 5b62 696e 5f6e  = bin_info[bin_n
+00043c90: 2d31 2d69 695d 3a20 7265 7475 726e 2064  -1-ii]: return d
+00043ca0: 6566 6175 6c74 0a20 2020 2020 2020 2072  efault.        r
+00043cb0: 6574 7572 6e20 4a6f 696e 2866 696c 656e  eturn Join(filen
+00043cc0: 616d 655f 696e 666f 5b3a 2d62 696e 5f6e  ame_info[:-bin_n
+00043cd0: 5d2c 7379 6d62 6f6c 3d27 2f27 290a 0a20  ],symbol='/').. 
+00043ce0: 2020 2064 6566 2046 696e 6428 7365 6c66     def Find(self
+00043cf0: 2c66 696c 656e 616d 652c 6465 6661 756c  ,filename,defaul
+00043d00: 743d 5b5d 293a 0a20 2020 2020 2020 2069  t=[]):.        i
+00043d10: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+00043d20: 2866 696c 656e 616d 652c 7374 7229 3a20  (filename,str): 
+00043d30: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+00043d40: 2020 2020 2020 2066 696c 656e 616d 653d         filename=
+00043d50: 6f73 2e70 6174 682e 6261 7365 6e61 6d65  os.path.basename
+00043d60: 2866 696c 656e 616d 6529 0a20 2020 2020  (filename).     
+00043d70: 2020 2069 6620 6f73 2e70 6174 682e 6973     if os.path.is
+00043d80: 6469 7228 7365 6c66 2e72 6f6f 745f 7061  dir(self.root_pa
+00043d90: 7468 293a 0a20 2020 2020 2020 2020 2020  th):.           
+00043da0: 2072 7420 3d20 5b5d 0a20 2020 2020 2020   rt = [].       
+00043db0: 2020 2020 2066 6f72 2062 6173 652c 2064       for base, d
+00043dc0: 6972 732c 2066 696c 6573 2069 6e20 6f73  irs, files in os
+00043dd0: 2e77 616c 6b28 7365 6c66 2e72 6f6f 745f  .walk(self.root_
+00043de0: 7061 7468 293a 0a20 2020 2020 2020 2020  path):.         
+00043df0: 2020 2020 2020 2066 6f75 6e64 203d 2066         found = f
+00043e00: 6e6d 6174 6368 2e66 696c 7465 7228 6669  nmatch.filter(fi
+00043e10: 6c65 732c 2066 696c 656e 616d 6529 0a20  les, filename). 
+00043e20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00043e30: 742e 6578 7465 6e64 286f 732e 7061 7468  t.extend(os.path
+00043e40: 2e6a 6f69 6e28 6261 7365 2c20 6629 2066  .join(base, f) f
+00043e50: 6f72 2066 2069 6e20 666f 756e 6429 0a20  or f in found). 
+00043e60: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00043e70: 6e20 7274 0a20 2020 2020 2020 2072 6574  n rt.        ret
+00043e80: 7572 6e20 6465 6661 756c 740a 0a20 2020  urn default..   
+00043e90: 2064 6566 2052 7728 7365 6c66 2c6e 616d   def Rw(self,nam
+00043ea0: 652c 6461 7461 3d4e 6f6e 652c 6f75 743d  e,data=None,out=
+00043eb0: 2762 7974 6527 2c61 7070 656e 643d 4661  'byte',append=Fa
+00043ec0: 6c73 652c 7265 6164 3d4e 6f6e 652c 6f76  lse,read=None,ov
+00043ed0: 6572 7772 6974 653d 5472 7565 2c66 696e  erwrite=True,fin
+00043ee0: 666f 3d7b 7d2c 6669 6c65 5f6f 6e6c 793d  fo={},file_only=
+00043ef0: 5472 7565 2c64 6566 6175 6c74 3d46 616c  True,default=Fal
+00043f00: 7365 293a 0a20 2020 2020 2020 2069 6620  se):.        if 
+00043f10: 6973 696e 7374 616e 6365 286e 616d 652c  isinstance(name,
+00043f20: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
+00043f30: 2020 2369 6620 6461 7461 2069 7320 4e6f    #if data is No
+00043f40: 6e65 3a20 2320 5265 6164 2066 726f 6d20  ne: # Read from 
+00043f50: 6669 6c65 0a20 2020 2020 2020 2020 2020  file.           
+00043f60: 2069 6620 4973 4e6f 6e65 2864 6174 6129   if IsNone(data)
+00043f70: 3a20 2320 5265 6164 2066 726f 6d20 6669  : # Read from fi
+00043f80: 6c65 0a20 2020 2020 2020 2020 2020 2020  le.             
+00043f90: 2020 2064 6174 613d 6361 7428 6e61 6d65     data=cat(name
+00043fa0: 2c66 696c 655f 6f6e 6c79 3d66 696c 655f  ,file_only=file_
+00043fb0: 6f6e 6c79 2c62 7974 653d 6f75 742c 6865  only,byte=out,he
+00043fc0: 6164 3d72 6561 642c 6465 6661 756c 743d  ad=read,default=
+00043fd0: 6465 6661 756c 7429 0a20 2020 2020 2020  default).       
+00043fe0: 2020 2020 2020 2020 2069 6620 6461 7461           if data
+00043ff0: 2069 7320 4661 6c73 653a 0a20 2020 2020   is False:.     
+00044000: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00044010: 6574 7572 6e20 4661 6c73 652c 6465 6661  eturn False,defa
+00044020: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
+00044030: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
+00044040: 6461 7461 0a20 2020 2020 2020 2020 2020  data.           
+00044050: 2065 6c73 653a 2023 2057 7269 7465 2074   else: # Write t
+00044060: 6f20 6669 6c65 0a20 2020 2020 2020 2020  o file.         
+00044070: 2020 2020 2020 2066 696c 655f 7061 7468         file_path
+00044080: 3d6f 732e 7061 7468 2e64 6972 6e61 6d65  =os.path.dirname
+00044090: 286e 616d 6529 0a20 2020 2020 2020 2020  (name).         
+000440a0: 2020 2020 2020 2069 6620 6e6f 7420 6669         if not fi
+000440b0: 6c65 5f70 6174 6820 6f72 206f 732e 7061  le_path or os.pa
+000440c0: 7468 2e69 7364 6972 2866 696c 655f 7061  th.isdir(file_pa
+000440d0: 7468 293a 2023 2063 7572 7265 6e74 2064  th): # current d
+000440e0: 6972 206f 7220 636f 7272 6563 7420 6469  ir or correct di
+000440f0: 7265 6374 6f72 790a 2020 2020 2020 2020  rectory.        
+00044100: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00044110: 7070 656e 643a 0a20 2020 2020 2020 2020  ppend:.         
+00044120: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00044130: 6974 6820 6f70 656e 286e 616d 652c 2761  ith open(name,'a
+00044140: 6227 2920 6173 2066 3a0a 2020 2020 2020  b') as f:.      
+00044150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044160: 2020 2020 2020 662e 7772 6974 6528 4279        f.write(By
+00044170: 7465 7328 6461 7461 2929 0a20 2020 2020  tes(data)).     
+00044180: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00044190: 6c69 6620 6e6f 7420 6669 6c65 5f6f 6e6c  lif not file_onl
+000441a0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+000441b0: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+000441c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000441d0: 2020 2020 2020 2020 2020 2020 663d 6f73              f=os
+000441e0: 2e6f 7065 6e28 6e61 6d65 2c6f 732e 4f5f  .open(name,os.O_
+000441f0: 5244 5752 290a 2020 2020 2020 2020 2020  RDWR).          
+00044200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044210: 2020 6f73 2e77 7269 7465 2866 2c64 6174    os.write(f,dat
+00044220: 6129 0a20 2020 2020 2020 2020 2020 2020  a).             
+00044230: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00044240: 732e 636c 6f73 6528 6629 0a20 2020 2020  s.close(f).     
+00044250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044260: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+00044270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044280: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+00044290: 6c73 652c 4e6f 6e65 0a20 2020 2020 2020  lse,None.       
+000442a0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+000442b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000442c0: 2020 2020 2020 2020 2020 2077 6974 6820             with 
+000442d0: 6f70 656e 286e 616d 652c 2777 6227 2920  open(name,'wb') 
+000442e0: 6173 2066 3a0a 2020 2020 2020 2020 2020  as f:.          
+000442f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044300: 2020 662e 7772 6974 6528 4279 7465 7328    f.write(Bytes(
+00044310: 6461 7461 2929 0a20 2020 2020 2020 2020  data)).         
+00044320: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00044330: 6620 6973 696e 7374 616e 6365 2866 696e  f isinstance(fin
+00044340: 666f 2c64 6963 7429 2061 6e64 2066 696e  fo,dict) and fin
+00044350: 666f 3a20 7365 6c66 2e53 6574 4964 656e  fo: self.SetIden
+00044360: 7469 7479 286e 616d 652c 2a2a 6669 6e66  tity(name,**finf
+00044370: 6f29 0a20 2020 2020 2020 2020 2020 2020  o).             
+00044380: 2020 2020 2020 2020 2020 2023 6d6f 6465             #mode
+00044390: 3d73 656c 662e 4d6f 6465 286d 6f64 6529  =self.Mode(mode)
+000443a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000443b0: 2020 2020 2020 2020 2023 6966 206d 6f64           #if mod
+000443c0: 653a 206f 732e 6368 6d6f 6428 6e61 6d65  e: os.chmod(name
+000443d0: 2c69 6e74 286d 6f64 652c 6261 7365 3d38  ,int(mode,base=8
+000443e0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+000443f0: 2020 2020 2020 2020 2020 2023 6966 2075             #if u
+00044400: 6964 2061 6e64 2067 6964 3a20 6f73 2e63  id and gid: os.c
+00044410: 686f 776e 286e 616d 652c 7569 642c 6769  hown(name,uid,gi
+00044420: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
+00044430: 2020 2020 2020 2020 2020 2023 6966 206d             #if m
+00044440: 7469 6d65 2061 6e64 2061 7469 6d65 3a20  time and atime: 
+00044450: 6f73 2e75 7469 6d65 286e 616d 652c 2861  os.utime(name,(a
+00044460: 7469 6d65 2c6d 7469 6d65 2929 2320 5469  time,mtime))# Ti
+00044470: 6d65 2075 7064 6174 6520 6d75 7374 2062  me update must b
+00044480: 6520 6174 206c 6173 7420 6f72 6465 720a  e at last order.
+00044490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000444a0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
+000444b0: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+000444c0: 2020 2020 2069 6620 6465 6661 756c 7420       if default 
+000444d0: 3d3d 207b 2765 7272 277d 3a0a 2020 2020  == {'err'}:.    
+000444e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000444f0: 7265 7475 726e 2046 616c 7365 2c27 4469  return False,'Di
+00044500: 7265 6374 6f72 7928 7b7d 2920 6e6f 7420  rectory({}) not 
+00044510: 666f 756e 6427 2e66 6f72 6d61 7428 6669  found'.format(fi
+00044520: 6c65 5f70 6174 6829 0a20 2020 2020 2020  le_path).       
+00044530: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00044540: 4661 6c73 652c 6465 6661 756c 740a 2020  False,default.  
+00044550: 2020 2020 2020 6966 2064 6566 6175 6c74        if default
+00044560: 203d 3d20 7b27 6572 7227 7d3a 0a20 2020   == {'err'}:.   
+00044570: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00044580: 4661 6c73 652c 2755 6e6b 6e6f 776e 2074  False,'Unknown t
+00044590: 7970 6528 7b7d 2920 6669 6c65 6e61 6d65  ype({}) filename
+000445a0: 272e 666f 726d 6174 286e 616d 6529 0a20  '.format(name). 
+000445b0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+000445c0: 6c73 652c 6465 6661 756c 740a 0a20 2020  lse,default..   
+000445d0: 2064 6566 204d 6f64 6528 7365 6c66 2c76   def Mode(self,v
+000445e0: 616c 2c6d 6f64 653d 2763 686d 6f64 272c  al,mode='chmod',
+000445f0: 6465 6661 756c 743d 4661 6c73 6529 3a0a  default=False):.
+00044600: 2020 2020 2020 2020 2727 270a 2020 2020          '''.    
+00044610: 2020 2020 636f 6e76 6572 7420 4669 6c65      convert File
+00044620: 204d 6f64 6520 746f 206d 6173 6b0a 2020   Mode to mask.  
+00044630: 2020 2020 2020 6d6f 6465 200a 2020 2020        mode .    
+00044640: 2020 2020 2020 2027 6368 6d6f 6427 203a         'chmod' :
+00044650: 2064 6566 6175 6c74 2c20 636f 6e76 6572   default, conver
+00044660: 7420 746f 206d 6173 6b20 286f 732e 6368  t to mask (os.ch
+00044670: 6d6f 6428 3c66 696c 653e 2c3c 6d61 736b  mod(<file>,<mask
+00044680: 3e29 290a 2020 2020 2020 2020 2020 2027  >)).           '
+00044690: 696e 7427 2020 203a 2072 6574 7572 6e20  int'   : return 
+000446a0: 746f 2069 6e74 206e 756d 6265 7220 6f66  to int number of
+000446b0: 206f 6374 2820 6578 3a20 3735 3520 290a   oct( ex: 755 ).
+000446c0: 2020 2020 2020 2020 2020 2027 6f63 7427             'oct'
+000446d0: 2020 203a 2072 6574 7572 6e20 6f63 7420     : return oct 
+000446e0: 6e75 6d62 6572 2028 7374 7269 6e67 290a  number (string).
+000446f0: 2020 2020 2020 2020 2020 2027 7374 7227             'str'
+00044700: 2020 203a 2072 6574 7572 6e20 7374 7269     : return stri
+00044710: 6e67 2028 2d72 7778 722d 2d72 2d2d 290a  ng (-rwxr--r--).
+00044720: 2020 2020 2020 2020 6465 6661 756c 743a          default:
+00044730: 2046 616c 7365 0a20 2020 2020 2020 2027   False.        '
+00044740: 2727 0a20 2020 2020 2020 2064 6566 205f  ''.        def _
+00044750: 6d6f 6465 5f28 6f63 745f 6461 7461 2c6d  mode_(oct_data,m
+00044760: 6f64 653d 2763 686d 6f64 2729 3a0a 2020  ode='chmod'):.  
+00044770: 2020 2020 2020 2020 2020 2363 6f6e 7665            #conve
+00044780: 7274 2074 6f20 6f63 7461 6c20 746f 2038  rt to octal to 8
+00044790: 6269 7420 6d61 736b 2c20 696e 742c 2073  bit mask, int, s
+000447a0: 7472 696e 670a 2020 2020 2020 2020 2020  tring.          
+000447b0: 2020 6966 206d 6f64 6520 3d3d 2027 6368    if mode == 'ch
+000447c0: 6d6f 6427 3a0a 2020 2020 2020 2020 2020  mod':.          
+000447d0: 2020 2020 2020 7265 7475 726e 2069 6e74        return int
+000447e0: 286f 6374 5f64 6174 612c 6261 7365 3d38  (oct_data,base=8
+000447f0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+00044800: 6966 206d 6f64 6520 696e 205b 2769 6e74  if mode in ['int
+00044810: 272c 696e 745d 3a0a 2020 2020 2020 2020  ',int]:.        
+00044820: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+00044830: 6e74 286f 6374 5f64 6174 612e 7265 706c  nt(oct_data.repl
+00044840: 6163 6528 276f 272c 2727 292c 6261 7365  ace('o',''),base
+00044850: 3d31 3029 0a20 2020 2020 2020 2020 2020  =10).           
+00044860: 2065 6c69 6620 6d6f 6465 2069 6e20 5b27   elif mode in ['
+00044870: 7374 7227 2c73 7472 5d3a 0a20 2020 2020  str',str]:.     
+00044880: 2020 2020 2020 2020 2020 206d 3d5b 5d0a             m=[].
+00044890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000448a0: 2366 6f72 2069 2069 6e20 6c69 7374 2873  #for i in list(s
+000448b0: 7472 2869 6e74 286f 6374 5f64 6174 612c  tr(int(oct_data,
+000448c0: 6261 7365 3d31 3029 2929 3a0a 2020 2020  base=10))):.    
+000448d0: 2020 2020 2020 2020 2020 2020 743d 4661              t=Fa
+000448e0: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
+000448f0: 2020 2020 666f 7220 6e2c 6920 696e 2065      for n,i in e
+00044900: 6e75 6d65 7261 7465 2873 7472 2869 6e74  numerate(str(int
+00044910: 286f 6374 5f64 6174 612e 7265 706c 6163  (oct_data.replac
+00044920: 6528 276f 272c 2727 292c 6261 7365 3d31  e('o',''),base=1
+00044930: 3029 2929 3a0a 2020 2020 2020 2020 2020  0))):.          
+00044940: 2020 2020 2020 2020 2020 6966 206e 203d            if n =
+00044950: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+00044960: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00044970: 6920 3d3d 2027 3127 3a20 743d 5472 7565  i == '1': t=True
+00044980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00044990: 2020 2020 2069 6620 6e20 3e20 303a 0a20       if n > 0:. 
+000449a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000449b0: 2020 2020 2020 2069 6620 6920 3d3d 2027         if i == '
+000449c0: 3727 3a0a 2020 2020 2020 2020 2020 2020  7':.            
+000449d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000449e0: 6d2e 6170 7065 6e64 2827 7277 7827 290a  m.append('rwx').
+000449f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044a00: 2020 2020 2020 2020 656c 6966 2069 203d          elif i =
+00044a10: 3d20 2736 273a 0a20 2020 2020 2020 2020  = '6':.         
+00044a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044a30: 2020 206d 2e61 7070 656e 6428 2772 772d     m.append('rw-
+00044a40: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+00044a50: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00044a60: 6920 3d3d 2027 3527 3a0a 2020 2020 2020  i == '5':.      
+00044a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044a80: 2020 2020 2020 6d2e 6170 7065 6e64 2827        m.append('
+00044a90: 722d 7827 290a 2020 2020 2020 2020 2020  r-x').          
+00044aa0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00044ab0: 6966 2069 203d 3d20 2734 273a 0a20 2020  if i == '4':.   
+00044ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044ad0: 2020 2020 2020 2020 206d 2e61 7070 656e           m.appen
+00044ae0: 6428 2772 2d2d 2729 0a20 2020 2020 2020  d('r--').       
+00044af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044b00: 2065 6c69 6620 6920 3d3d 2027 3327 3a0a   elif i == '3':.
+00044b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044b20: 2020 2020 2020 2020 2020 2020 6d2e 6170              m.ap
+00044b30: 7065 6e64 2827 2d77 7827 290a 2020 2020  pend('-wx').    
+00044b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044b50: 2020 2020 656c 6966 2069 203d 3d20 2732      elif i == '2
+00044b60: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00044b70: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00044b80: 2e61 7070 656e 6428 272d 772d 2729 0a20  .append('-w-'). 
+00044b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044ba0: 2020 2020 2020 2065 6c69 6620 6920 3d3d         elif i ==
+00044bb0: 2027 3127 3a0a 2020 2020 2020 2020 2020   '1':.          
+00044bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044bd0: 2020 6d2e 6170 7065 6e64 2827 2d2d 7827    m.append('--x'
+00044be0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00044bf0: 2020 7374 725f 6d6f 643d 4a6f 696e 286d    str_mod=Join(m
+00044c00: 2c27 2729 0a20 2020 2020 2020 2020 2020  ,'').           
+00044c10: 2020 2020 2069 6620 743a 2072 6574 7572       if t: retur
+00044c20: 6e20 7374 725f 6d6f 645b 3a2d 315d 2b27  n str_mod[:-1]+'
+00044c30: 7427 0a20 2020 2020 2020 2020 2020 2020  t'.             
+00044c40: 2020 2072 6574 7572 6e20 7374 725f 6d6f     return str_mo
+00044c50: 640a 2020 2020 2020 2020 2020 2020 7265  d.            re
+00044c60: 7475 726e 206f 6374 5f64 6174 610a 2020  turn oct_data.  
+00044c70: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00044c80: 6e63 6528 7661 6c2c 696e 7429 3a0a 2020  nce(val,int):.  
+00044c90: 2020 2020 2020 2020 2020 2369 6620 7661            #if va
+00044ca0: 6c20 3e20 3531 313a 2020 2020 2020 2023  l > 511:       #
+00044cb0: 7374 6174 2e73 745f 6d6f 6465 2028 3332  stat.st_mode (32
+00044cc0: 3736 3820 7e20 3333 3237 3929 0a20 2020  768 ~ 33279).   
+00044cd0: 2020 2020 2020 2020 2023 7374 6174 2e73           #stat.s
+00044ce0: 745f 6d6f 6465 2028 6669 6c65 3a20 3332  t_mode (file: 32
+00044cf0: 3736 387e 3336 3836 332c 2064 6972 6563  768~36863, direc
+00044d00: 746f 7279 3a20 3136 3338 3420 7e20 3230  tory: 16384 ~ 20
+00044d10: 3437 3929 0a20 2020 2020 2020 2020 2020  479).           
+00044d20: 2069 6620 3332 3736 3820 3c3d 2076 616c   if 32768 <= val
+00044d30: 203c 3d20 3336 3836 3320 6f72 2031 3633   <= 36863 or 163
+00044d40: 3834 203c 3d20 7661 6c20 3c3d 2032 3034  84 <= val <= 204
+00044d50: 3739 3a20 2020 2373 7461 742e 7374 5f6d  79:   #stat.st_m
+00044d60: 6f64 650a 2020 2020 2020 2020 2020 2020  ode.            
+00044d70: 2020 2020 2372 6574 7572 6e20 5f6d 6f64      #return _mod
+00044d80: 655f 286f 6374 2876 616c 295b 2d34 3a5d  e_(oct(val)[-4:]
+00044d90: 2c6d 6f64 6529 2023 2074 6f20 6f63 7461  ,mode) # to octa
+00044da0: 6c20 6e75 6d62 6572 2028 6f63 7428 7661  l number (oct(va
+00044db0: 6c29 5b2d 343a 5d29 0a20 2020 2020 2020  l)[-4:]).       
+00044dc0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00044dd0: 5f6d 6f64 655f 286f 6374 2876 616c 2026  _mode_(oct(val &
+00044de0: 2030 6f37 3737 292c 6d6f 6465 2920 2320   0o777),mode) # 
+00044df0: 746f 206f 6374 616c 206e 756d 6265 7220  to octal number 
+00044e00: 286f 6374 2876 616c 295b 2d34 3a5d 290a  (oct(val)[-4:]).
+00044e10: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00044e20: 2035 3131 203e 3d20 7661 6c20 3e20 3633   511 >= val > 63
+00044e30: 3a20 2020 2020 2023 6d61 736b 0a20 2020  :      #mask.   
+00044e40: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00044e50: 7572 6e20 5f6d 6f64 655f 286f 6374 2876  urn _mode_(oct(v
+00044e60: 616c 292c 6d6f 6465 2920 2020 2020 2023  al),mode)      #
+00044e70: 2074 6f20 6f63 616c 206e 756d 6265 7228   to ocal number(
+00044e80: 6f63 7428 7661 6c29 290a 2020 2020 2020  oct(val)).      
+00044e90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00044ea0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00044eb0: 726e 205f 6d6f 6465 5f28 2725 3034 6427  rn _mode_('%04d'
+00044ec0: 2528 7661 6c29 2c6d 6f64 6529 2020 2020  %(val),mode)    
+00044ed0: 2020 2320 746f 206f 6361 6c20 6e75 6d62    # to ocal numb
+00044ee0: 6572 286f 6374 2876 616c 2929 0a20 2020  er(oct(val)).   
+00044ef0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00044f00: 2020 2020 2020 2076 616c 3d53 7472 2876         val=Str(v
+00044f10: 616c 2c64 6566 6175 6c74 3d4e 6f6e 6529  al,default=None)
+00044f20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00044f30: 6973 696e 7374 616e 6365 2876 616c 2c73  isinstance(val,s
+00044f40: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+00044f50: 2020 2020 2076 616c 5f6c 656e 3d6c 656e       val_len=len
+00044f60: 2876 616c 290a 2020 2020 2020 2020 2020  (val).          
+00044f70: 2020 2020 2020 6e75 6d3d 496e 7428 7661        num=Int(va
+00044f80: 6c2c 6465 6661 756c 743d 4e6f 6e65 290a  l,default=None).
+00044f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044fa0: 6966 2069 7369 6e73 7461 6e63 6528 6e75  if isinstance(nu
+00044fb0: 6d2c 696e 7429 3a0a 2020 2020 2020 2020  m,int):.        
+00044fc0: 2020 2020 2020 2020 2020 2020 6966 2033              if 3
+00044fd0: 203c 3d20 6c65 6e28 7661 6c29 203c 3d34   <= len(val) <=4
+00044fe0: 2061 6e64 2031 3030 203c 3d20 6e75 6d20   and 100 <= num 
+00044ff0: 3c3d 2037 3737 3a20 2373 7472 696e 6720  <= 777: #string 
+00045000: 7479 7065 206f 6620 7065 726d 6973 7369  type of permissi
+00045010: 6f6e 206e 756d 6265 7228 6f63 7461 6c20  on number(octal 
+00045020: 6e75 6d62 6572 290a 2020 2020 2020 2020  number).        
+00045030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045040: 7265 7475 726e 205f 6d6f 6465 5f28 2725  return _mode_('%
+00045050: 3034 6427 2528 6e75 6d29 2c6d 6f64 6529  04d'%(num),mode)
+00045060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045070: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00045080: 2020 2020 2020 2020 2020 2076 616c 5f6c             val_l
+00045090: 656e 3d6c 656e 2876 616c 290a 2020 2020  en=len(val).    
 000450a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000450b0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-000450c0: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
-000450d0: 2020 2020 2020 2069 6620 7661 6c5b 385d         if val[8]
-000450e0: 206e 6f74 2069 6e20 2778 742d 273a 0a20   not in 'xt-':. 
-000450f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045100: 2020 2020 2020 2053 7464 4572 7228 2027         StdErr( '
-00045110: 4261 6420 7065 726d 6973 7369 6f6e 2066  Bad permission f
-00045120: 6f72 6d61 7420 2865 7865 6375 7465 206f  ormat (execute o
-00045130: 7468 6572 2927 290a 2020 2020 2020 2020  ther)').        
-00045140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045150: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-00045160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045170: 2020 206d 203d 2030 0a20 2020 2020 2020     m = 0.       
-00045180: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00045190: 7661 6c5b 305d 203d 3d20 2772 273a 206d  val[0] == 'r': m
-000451a0: 207c 3d20 7374 6174 2e53 5f49 5255 5352   |= stat.S_IRUSR
-000451b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000451c0: 2020 2020 2069 6620 7661 6c5b 315d 203d       if val[1] =
-000451d0: 3d20 2777 273a 206d 207c 3d20 7374 6174  = 'w': m |= stat
-000451e0: 2e53 5f49 5755 5352 0a20 2020 2020 2020  .S_IWUSR.       
-000451f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00045200: 7661 6c5b 325d 203d 3d20 2778 273a 206d  val[2] == 'x': m
-00045210: 207c 3d20 7374 6174 2e53 5f49 5855 5352   |= stat.S_IXUSR
-00045220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045230: 2020 2020 2069 6620 7661 6c5b 325d 203d       if val[2] =
-00045240: 3d20 2773 273a 206d 207c 3d20 7374 6174  = 's': m |= stat
-00045250: 2e53 5f49 5855 5352 207c 2073 7461 742e  .S_IXUSR | stat.
-00045260: 535f 4953 5549 440a 0a20 2020 2020 2020  S_ISUID..       
-00045270: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00045280: 7661 6c5b 335d 203d 3d20 2772 273a 206d  val[3] == 'r': m
-00045290: 207c 3d20 7374 6174 2e53 5f49 5247 5250   |= stat.S_IRGRP
-000452a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000452b0: 2020 2020 2069 6620 7661 6c5b 345d 203d       if val[4] =
-000452c0: 3d20 2777 273a 206d 207c 3d20 7374 6174  = 'w': m |= stat
-000452d0: 2e53 5f49 5747 5250 0a20 2020 2020 2020  .S_IWGRP.       
-000452e0: 2069 6620 6973 696e 7374 616e 6365 2876   if isinstance(v
-000452f0: 616c 2c69 6e74 293a 0a20 2020 2020 2020  al,int):.       
-00045300: 2020 2020 2023 6966 2076 616c 203e 2035       #if val > 5
-00045310: 3131 3a20 2020 2020 2020 2373 7461 742e  11:       #stat.
-00045320: 7374 5f6d 6f64 6520 2833 3237 3638 207e  st_mode (32768 ~
-00045330: 2033 3332 3739 290a 2020 2020 2020 2020   33279).        
-00045340: 2020 2020 2373 7461 742e 7374 5f6d 6f64      #stat.st_mod
-00045350: 6520 2866 696c 653a 2033 3237 3638 7e33  e (file: 32768~3
-00045360: 3638 3633 2c20 6469 7265 6374 6f72 793a  6863, directory:
-00045370: 2031 3633 3834 207e 2032 3034 3739 290a   16384 ~ 20479).
-00045380: 2020 2020 2020 2020 2020 2020 6966 2033              if 3
-00045390: 3237 3638 203c 3d20 7661 6c20 3c3d 2033  2768 <= val <= 3
-000453a0: 3638 3633 206f 7220 3136 3338 3420 3c3d  6863 or 16384 <=
-000453b0: 2076 616c 203c 3d20 3230 3437 393a 2020   val <= 20479:  
-000453c0: 2023 7374 6174 2e73 745f 6d6f 6465 0a20   #stat.st_mode. 
-000453d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000453e0: 7265 7475 726e 205f 6d6f 6465 5f28 6f63  return _mode_(oc
-000453f0: 7428 7661 6c29 5b2d 343a 5d2c 6d6f 6465  t(val)[-4:],mode
-00045400: 2920 2320 746f 206f 6374 616c 206e 756d  ) # to octal num
-00045410: 6265 7220 286f 6374 2876 616c 295b 2d34  ber (oct(val)[-4
-00045420: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
-00045430: 2020 2020 7265 7475 726e 205f 6d6f 6465      return _mode
-00045440: 5f28 6f63 7428 7661 6c20 2620 306f 3737  _(oct(val & 0o77
-00045450: 3729 2c6d 6f64 6529 2023 2074 6f20 6f63  7),mode) # to oc
-00045460: 7461 6c20 6e75 6d62 6572 2028 6f63 7428  tal number (oct(
-00045470: 7661 6c29 5b2d 343a 5d29 0a20 2020 2020  val)[-4:]).     
-00045480: 2020 2020 2020 2065 6c69 6620 3531 3120         elif 511 
-00045490: 3e3d 2076 616c 203e 2036 333a 2020 2020  >= val > 63:    
-000454a0: 2020 236d 6173 6b0a 2020 2020 2020 2020    #mask.        
-000454b0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-000454c0: 6d6f 6465 5f28 6f63 7428 7661 6c29 2c6d  mode_(oct(val),m
-000454d0: 6f64 6529 2020 2020 2020 2320 746f 206f  ode)      # to o
-000454e0: 6361 6c20 6e75 6d62 6572 286f 6374 2876  cal number(oct(v
-000454f0: 616c 2929 0a20 2020 2020 2020 2020 2020  al)).           
-00045500: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00045510: 2020 2020 2020 2072 6574 7572 6e20 5f6d         return _m
-00045520: 6f64 655f 2827 2530 3464 2725 2876 616c  ode_('%04d'%(val
-00045530: 292c 6d6f 6465 2920 2020 2020 2023 2074  ),mode)      # t
-00045540: 6f20 6f63 616c 206e 756d 6265 7228 6f63  o ocal number(oc
-00045550: 7428 7661 6c29 290a 2020 2020 2020 2020  t(val)).        
-00045560: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00045570: 2020 7661 6c3d 5374 7228 7661 6c2c 6465    val=Str(val,de
-00045580: 6661 756c 743d 4e6f 6e65 290a 2020 2020  fault=None).    
-00045590: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-000455a0: 7461 6e63 6528 7661 6c2c 7374 7229 3a0a  tance(val,str):.
-000455b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000455c0: 7661 6c5f 6c65 6e3d 6c65 6e28 7661 6c29  val_len=len(val)
-000455d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000455e0: 206e 756d 3d49 6e74 2876 616c 2c64 6566   num=Int(val,def
-000455f0: 6175 6c74 3d4e 6f6e 6529 0a20 2020 2020  ault=None).     
-00045600: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00045610: 696e 7374 616e 6365 286e 756d 2c69 6e74  instance(num,int
-00045620: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00045630: 2020 2020 2020 2069 6620 3320 3c3d 206c         if 3 <= l
-00045640: 656e 2876 616c 2920 3c3d 3420 616e 6420  en(val) <=4 and 
-00045650: 3130 3020 3c3d 206e 756d 203c 3d20 3737  100 <= num <= 77
-00045660: 373a 2023 7374 7269 6e67 2074 7970 6520  7: #string type 
-00045670: 6f66 2070 6572 6d69 7373 696f 6e20 6e75  of permission nu
-00045680: 6d62 6572 286f 6374 616c 206e 756d 6265  mber(octal numbe
-00045690: 7229 0a20 2020 2020 2020 2020 2020 2020  r).             
-000456a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000456b0: 6e20 5f6d 6f64 655f 2827 2530 3464 2725  n _mode_('%04d'%
-000456c0: 286e 756d 292c 6d6f 6465 290a 2020 2020  (num),mode).    
-000456d0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000456e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000456f0: 2020 2020 2020 7661 6c5f 6c65 6e3d 6c65        val_len=le
-00045700: 6e28 7661 6c29 0a20 2020 2020 2020 2020  n(val).         
-00045710: 2020 2020 2020 2020 2020 2069 6620 393c             if 9<
-00045720: 3d20 7661 6c5f 6c65 6e20 3c3d 3130 3a0a  = val_len <=10:.
-00045730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045740: 2020 2020 2020 2020 6966 2076 616c 5f6c          if val_l
-00045750: 656e 203d 3d20 3130 2061 6e64 2076 616c  en == 10 and val
-00045760: 5b30 5d20 696e 205b 272d 272c 2764 272c  [0] in ['-','d',
-00045770: 2773 275d 3a0a 2020 2020 2020 2020 2020  's']:.          
-00045780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045790: 2020 7661 6c3d 7661 6c5b 313a 5d0a 2020    val=val[1:].  
-000457a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000457b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000457c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000457d0: 5374 6445 7272 2827 4261 6420 7065 726d  StdErr('Bad perm
-000457e0: 6973 7369 6f6e 206c 656e 6774 6827 290a  ission length').
-000457f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045800: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-00045810: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
-00045820: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00045830: 7420 616c 6c28 7661 6c5b 6b5d 2069 6e20  t all(val[k] in 
-00045840: 2772 772d 2720 666f 7220 6b20 696e 205b  'rw-' for k in [
-00045850: 302c 312c 332c 342c 362c 375d 293a 0a20  0,1,3,4,6,7]):. 
-00045860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045870: 2020 2020 2020 2053 7464 4572 7228 2742         StdErr('B
-00045880: 6164 2070 6572 6d69 7373 696f 6e20 666f  ad permission fo
-00045890: 726d 6174 2028 7265 6164 2d77 7269 7465  rmat (read-write
-000458a0: 2927 290a 2020 2020 2020 2020 2020 2020  )').            
-000458b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000458c0: 726e 2064 6566 6175 6c74 0a20 2020 2020  rn default.     
-000458d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000458e0: 6620 6e6f 7420 616c 6c28 7661 6c5b 6b5d  f not all(val[k]
-000458f0: 2069 6e20 2778 732d 2720 666f 7220 6b20   in 'xs-' for k 
-00045900: 696e 205b 322c 355d 293a 0a20 2020 2020  in [2,5]):.     
-00045910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045920: 2020 2053 7464 4572 7228 2742 6164 2070     StdErr('Bad p
-00045930: 6572 6d69 7373 696f 6e20 666f 726d 6174  ermission format
-00045940: 2028 6578 6563 7574 6529 2729 0a20 2020   (execute)').   
+000450b0: 6966 2039 3c3d 2076 616c 5f6c 656e 203c  if 9<= val_len <
+000450c0: 3d31 303a 0a20 2020 2020 2020 2020 2020  =10:.           
+000450d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000450e0: 7661 6c5f 6c65 6e20 3d3d 2031 3020 616e  val_len == 10 an
+000450f0: 6420 7661 6c5b 305d 2069 6e20 5b27 2d27  d val[0] in ['-'
+00045100: 2c27 6427 2c27 7327 5d3a 0a20 2020 2020  ,'d','s']:.     
+00045110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045120: 2020 2020 2020 2076 616c 3d76 616c 5b31         val=val[1
+00045130: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
+00045140: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00045150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045160: 2020 2020 2053 7464 4572 7228 2742 6164       StdErr('Bad
+00045170: 2070 6572 6d69 7373 696f 6e20 6c65 6e67   permission leng
+00045180: 7468 2729 0a20 2020 2020 2020 2020 2020  th').           
+00045190: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000451a0: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
+000451b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000451c0: 6966 206e 6f74 2061 6c6c 2876 616c 5b6b  if not all(val[k
+000451d0: 5d20 696e 2027 7277 2d27 2066 6f72 206b  ] in 'rw-' for k
+000451e0: 2069 6e20 5b30 2c31 2c33 2c34 2c36 2c37   in [0,1,3,4,6,7
+000451f0: 5d29 3a0a 2020 2020 2020 2020 2020 2020  ]):.            
+00045200: 2020 2020 2020 2020 2020 2020 5374 6445              StdE
+00045210: 7272 2827 4261 6420 7065 726d 6973 7369  rr('Bad permissi
+00045220: 6f6e 2066 6f72 6d61 7420 2872 6561 642d  on format (read-
+00045230: 7772 6974 6529 2729 0a20 2020 2020 2020  write)').       
+00045240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045250: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+00045260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045270: 2020 2020 6966 206e 6f74 2061 6c6c 2876      if not all(v
+00045280: 616c 5b6b 5d20 696e 2027 7873 2d27 2066  al[k] in 'xs-' f
+00045290: 6f72 206b 2069 6e20 5b32 2c35 5d29 3a0a  or k in [2,5]):.
+000452a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000452b0: 2020 2020 2020 2020 5374 6445 7272 2827          StdErr('
+000452c0: 4261 6420 7065 726d 6973 7369 6f6e 2066  Bad permission f
+000452d0: 6f72 6d61 7420 2865 7865 6375 7465 2927  ormat (execute)'
+000452e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000452f0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00045300: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
+00045310: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00045320: 7661 6c5b 385d 206e 6f74 2069 6e20 2778  val[8] not in 'x
+00045330: 742d 273a 0a20 2020 2020 2020 2020 2020  t-':.           
+00045340: 2020 2020 2020 2020 2020 2020 2053 7464               Std
+00045350: 4572 7228 2027 4261 6420 7065 726d 6973  Err( 'Bad permis
+00045360: 7369 6f6e 2066 6f72 6d61 7420 2865 7865  sion format (exe
+00045370: 6375 7465 206f 7468 6572 2927 290a 2020  cute other)').  
+00045380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045390: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+000453a0: 6175 6c74 0a20 2020 2020 2020 2020 2020  ault.           
+000453b0: 2020 2020 2020 2020 206d 203d 2030 0a20           m = 0. 
+000453c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000453d0: 2020 2069 6620 7661 6c5b 305d 203d 3d20     if val[0] == 
+000453e0: 2772 273a 206d 207c 3d20 7374 6174 2e53  'r': m |= stat.S
+000453f0: 5f49 5255 5352 0a20 2020 2020 2020 2020  _IRUSR.         
+00045400: 2020 2020 2020 2020 2020 2069 6620 7661             if va
+00045410: 6c5b 315d 203d 3d20 2777 273a 206d 207c  l[1] == 'w': m |
+00045420: 3d20 7374 6174 2e53 5f49 5755 5352 0a20  = stat.S_IWUSR. 
+00045430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045440: 2020 2069 6620 7661 6c5b 325d 203d 3d20     if val[2] == 
+00045450: 2778 273a 206d 207c 3d20 7374 6174 2e53  'x': m |= stat.S
+00045460: 5f49 5855 5352 0a20 2020 2020 2020 2020  _IXUSR.         
+00045470: 2020 2020 2020 2020 2020 2069 6620 7661             if va
+00045480: 6c5b 325d 203d 3d20 2773 273a 206d 207c  l[2] == 's': m |
+00045490: 3d20 7374 6174 2e53 5f49 5855 5352 207c  = stat.S_IXUSR |
+000454a0: 2073 7461 742e 535f 4953 5549 440a 0a20   stat.S_ISUID.. 
+000454b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000454c0: 2020 2069 6620 7661 6c5b 335d 203d 3d20     if val[3] == 
+000454d0: 2772 273a 206d 207c 3d20 7374 6174 2e53  'r': m |= stat.S
+000454e0: 5f49 5247 5250 0a20 2020 2020 2020 2020  _IRGRP.         
+000454f0: 2020 2020 2020 2020 2020 2069 6620 7661             if va
+00045500: 6c5b 345d 203d 3d20 2777 273a 206d 207c  l[4] == 'w': m |
+00045510: 3d20 7374 6174 2e53 5f49 5747 5250 0a20  = stat.S_IWGRP. 
+00045520: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00045530: 616e 6365 2876 616c 2c69 6e74 293a 0a20  ance(val,int):. 
+00045540: 2020 2020 2020 2020 2020 2023 6966 2076             #if v
+00045550: 616c 203e 2035 3131 3a20 2020 2020 2020  al > 511:       
+00045560: 2373 7461 742e 7374 5f6d 6f64 6520 2833  #stat.st_mode (3
+00045570: 3237 3638 207e 2033 3332 3739 290a 2020  2768 ~ 33279).  
+00045580: 2020 2020 2020 2020 2020 2373 7461 742e            #stat.
+00045590: 7374 5f6d 6f64 6520 2866 696c 653a 2033  st_mode (file: 3
+000455a0: 3237 3638 7e33 3638 3633 2c20 6469 7265  2768~36863, dire
+000455b0: 6374 6f72 793a 2031 3633 3834 207e 2032  ctory: 16384 ~ 2
+000455c0: 3034 3739 290a 2020 2020 2020 2020 2020  0479).          
+000455d0: 2020 6966 2033 3237 3638 203c 3d20 7661    if 32768 <= va
+000455e0: 6c20 3c3d 2033 3638 3633 206f 7220 3136  l <= 36863 or 16
+000455f0: 3338 3420 3c3d 2076 616c 203c 3d20 3230  384 <= val <= 20
+00045600: 3437 393a 2020 2023 7374 6174 2e73 745f  479:   #stat.st_
+00045610: 6d6f 6465 0a20 2020 2020 2020 2020 2020  mode.           
+00045620: 2020 2020 2023 7265 7475 726e 205f 6d6f       #return _mo
+00045630: 6465 5f28 6f63 7428 7661 6c29 5b2d 343a  de_(oct(val)[-4:
+00045640: 5d2c 6d6f 6465 2920 2320 746f 206f 6374  ],mode) # to oct
+00045650: 616c 206e 756d 6265 7220 286f 6374 2876  al number (oct(v
+00045660: 616c 295b 2d34 3a5d 290a 2020 2020 2020  al)[-4:]).      
+00045670: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00045680: 205f 6d6f 6465 5f28 6f63 7428 7661 6c20   _mode_(oct(val 
+00045690: 2620 306f 3737 3729 2c6d 6f64 6529 2023  & 0o777),mode) #
+000456a0: 2074 6f20 6f63 7461 6c20 6e75 6d62 6572   to octal number
+000456b0: 2028 6f63 7428 7661 6c29 5b2d 343a 5d29   (oct(val)[-4:])
+000456c0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+000456d0: 6620 3531 3120 3e3d 2076 616c 203e 2036  f 511 >= val > 6
+000456e0: 333a 2020 2020 2020 236d 6173 6b0a 2020  3:      #mask.  
+000456f0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00045700: 7475 726e 205f 6d6f 6465 5f28 6f63 7428  turn _mode_(oct(
+00045710: 7661 6c29 2c6d 6f64 6529 2020 2020 2020  val),mode)      
+00045720: 2320 746f 206f 6361 6c20 6e75 6d62 6572  # to ocal number
+00045730: 286f 6374 2876 616c 2929 0a20 2020 2020  (oct(val)).     
+00045740: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00045750: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00045760: 7572 6e20 5f6d 6f64 655f 2827 2530 3464  urn _mode_('%04d
+00045770: 2725 2876 616c 292c 6d6f 6465 2920 2020  '%(val),mode)   
+00045780: 2020 2023 2074 6f20 6f63 616c 206e 756d     # to ocal num
+00045790: 6265 7228 6f63 7428 7661 6c29 290a 2020  ber(oct(val)).  
+000457a0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000457b0: 2020 2020 2020 2020 7661 6c3d 5374 7228          val=Str(
+000457c0: 7661 6c2c 6465 6661 756c 743d 4e6f 6e65  val,default=None
+000457d0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000457e0: 2069 7369 6e73 7461 6e63 6528 7661 6c2c   isinstance(val,
+000457f0: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
+00045800: 2020 2020 2020 7661 6c5f 6c65 6e3d 6c65        val_len=le
+00045810: 6e28 7661 6c29 0a20 2020 2020 2020 2020  n(val).         
+00045820: 2020 2020 2020 206e 756d 3d49 6e74 2876         num=Int(v
+00045830: 616c 2c64 6566 6175 6c74 3d4e 6f6e 6529  al,default=None)
+00045840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045850: 2069 6620 6973 696e 7374 616e 6365 286e   if isinstance(n
+00045860: 756d 2c69 6e74 293a 0a20 2020 2020 2020  um,int):.       
+00045870: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00045880: 3320 3c3d 206c 656e 2876 616c 2920 3c3d  3 <= len(val) <=
+00045890: 3420 616e 6420 3130 3020 3c3d 206e 756d  4 and 100 <= num
+000458a0: 203c 3d20 3737 373a 2023 7374 7269 6e67   <= 777: #string
+000458b0: 2074 7970 6520 6f66 2070 6572 6d69 7373   type of permiss
+000458c0: 696f 6e20 6e75 6d62 6572 286f 6374 616c  ion number(octal
+000458d0: 206e 756d 6265 7229 0a20 2020 2020 2020   number).       
+000458e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000458f0: 2072 6574 7572 6e20 5f6d 6f64 655f 2827   return _mode_('
+00045900: 2530 3464 2725 286e 756d 292c 6d6f 6465  %04d'%(num),mode
+00045910: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00045920: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00045930: 2020 2020 2020 2020 2020 2020 7661 6c5f              val_
+00045940: 6c65 6e3d 6c65 6e28 7661 6c29 0a20 2020  len=len(val).   
 00045950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045960: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-00045970: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
-00045980: 2020 2020 2020 2020 6966 2076 616c 5b38          if val[8
-00045990: 5d20 6e6f 7420 696e 2027 7874 2d27 3a0a  ] not in 'xt-':.
-000459a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000459b0: 2020 2020 2020 2020 5374 6445 7272 2820          StdErr( 
-000459c0: 2742 6164 2070 6572 6d69 7373 696f 6e20  'Bad permission 
-000459d0: 666f 726d 6174 2028 6578 6563 7574 6520  format (execute 
-000459e0: 6f74 6865 7229 2729 0a20 2020 2020 2020  other)').       
-000459f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045a00: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-00045a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045a20: 2020 2020 6d20 3d20 300a 2020 2020 2020      m = 0.      
-00045a30: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00045a40: 2076 616c 5b30 5d20 3d3d 2027 7227 3a20   val[0] == 'r': 
-00045a50: 6d20 7c3d 2073 7461 742e 535f 4952 5553  m |= stat.S_IRUS
-00045a60: 520a 2020 2020 2020 2020 2020 2020 2020  R.              
-00045a70: 2020 2020 2020 6966 2076 616c 5b31 5d20        if val[1] 
-00045a80: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
-00045a90: 742e 535f 4957 5553 520a 2020 2020 2020  t.S_IWUSR.      
-00045aa0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00045ab0: 2076 616c 5b32 5d20 3d3d 2027 7827 3a20   val[2] == 'x': 
-00045ac0: 6d20 7c3d 2073 7461 742e 535f 4958 5553  m |= stat.S_IXUS
-00045ad0: 520a 2020 2020 2020 2020 2020 2020 2020  R.              
-00045ae0: 2020 2020 2020 6966 2076 616c 5b32 5d20        if val[2] 
-00045af0: 3d3d 2027 7327 3a20 6d20 7c3d 2073 7461  == 's': m |= sta
-00045b00: 742e 535f 4958 5553 5220 7c20 7374 6174  t.S_IXUSR | stat
-00045b10: 2e53 5f49 5355 4944 0a0a 2020 2020 2020  .S_ISUID..      
-00045b20: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00045b30: 2076 616c 5b33 5d20 3d3d 2027 7227 3a20   val[3] == 'r': 
-00045b40: 6d20 7c3d 2073 7461 742e 535f 4952 4752  m |= stat.S_IRGR
-00045b50: 500a 2020 2020 2020 2020 2020 2020 2020  P.              
-00045b60: 2020 2020 2020 6966 2076 616c 5b34 5d20        if val[4] 
-00045b70: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
-00045b80: 742e 535f 4957 4752 500a 2020 2020 2020  t.S_IWGRP.      
-00045b90: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00045ba0: 7661 6c2c 696e 7429 3a0a 2020 2020 2020  val,int):.      
-00045bb0: 2020 2020 2020 2369 6620 7661 6c20 3e20        #if val > 
-00045bc0: 3531 313a 2020 2020 2020 2023 7374 6174  511:       #stat
-00045bd0: 2e73 745f 6d6f 6465 2028 3332 3736 3820  .st_mode (32768 
-00045be0: 7e20 3333 3237 3929 0a20 2020 2020 2020  ~ 33279).       
-00045bf0: 2020 2020 2023 7374 6174 2e73 745f 6d6f       #stat.st_mo
-00045c00: 6465 2028 6669 6c65 3a20 3332 3736 387e  de (file: 32768~
-00045c10: 3336 3836 332c 2064 6972 6563 746f 7279  36863, directory
-00045c20: 3a20 3136 3338 3420 7e20 3230 3437 3929  : 16384 ~ 20479)
-00045c30: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00045c40: 3332 3736 3820 3c3d 2076 616c 203c 3d20  32768 <= val <= 
-00045c50: 3336 3836 3320 6f72 2031 3633 3834 203c  36863 or 16384 <
-00045c60: 3d20 7661 6c20 3c3d 2032 3034 3739 3a20  = val <= 20479: 
-00045c70: 2020 2373 7461 742e 7374 5f6d 6f64 650a    #stat.st_mode.
-00045c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045c90: 2372 6574 7572 6e20 5f6d 6f64 655f 286f  #return _mode_(o
-00045ca0: 6374 2876 616c 295b 2d34 3a5d 2c6d 6f64  ct(val)[-4:],mod
-00045cb0: 6529 2023 2074 6f20 6f63 7461 6c20 6e75  e) # to octal nu
-00045cc0: 6d62 6572 2028 6f63 7428 7661 6c29 5b2d  mber (oct(val)[-
-00045cd0: 343a 5d29 0a20 2020 2020 2020 2020 2020  4:]).           
-00045ce0: 2020 2020 2072 6574 7572 6e20 5f6d 6f64       return _mod
-00045cf0: 655f 286f 6374 2876 616c 2026 2030 6f37  e_(oct(val & 0o7
-00045d00: 3737 292c 6d6f 6465 2920 2320 746f 206f  77),mode) # to o
-00045d10: 6374 616c 206e 756d 6265 7220 286f 6374  ctal number (oct
-00045d20: 2876 616c 295b 2d34 3a5d 290a 2020 2020  (val)[-4:]).    
-00045d30: 2020 2020 2020 2020 656c 6966 2035 3131          elif 511
-00045d40: 203e 3d20 7661 6c20 3e20 3633 3a20 2020   >= val > 63:   
-00045d50: 2020 2023 6d61 736b 0a20 2020 2020 2020     #mask.       
-00045d60: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00045d70: 5f6d 6f64 655f 286f 6374 2876 616c 292c  _mode_(oct(val),
-00045d80: 6d6f 6465 2920 2020 2020 2023 2074 6f20  mode)      # to 
-00045d90: 6f63 616c 206e 756d 6265 7228 6f63 7428  ocal number(oct(
-00045da0: 7661 6c29 290a 2020 2020 2020 2020 2020  val)).          
-00045db0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00045dc0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-00045dd0: 6d6f 6465 5f28 2725 3034 6427 2528 7661  mode_('%04d'%(va
-00045de0: 6c29 2c6d 6f64 6529 2020 2020 2020 2320  l),mode)      # 
-00045df0: 746f 206f 6361 6c20 6e75 6d62 6572 286f  to ocal number(o
-00045e00: 6374 2876 616c 2929 0a20 2020 2020 2020  ct(val)).       
-00045e10: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00045e20: 2020 2076 616c 3d53 7472 2876 616c 2c64     val=Str(val,d
-00045e30: 6566 6175 6c74 3d4e 6f6e 6529 0a20 2020  efault=None).   
-00045e40: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00045e50: 7374 616e 6365 2876 616c 2c73 7472 293a  stance(val,str):
-00045e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045e70: 2076 616c 5f6c 656e 3d6c 656e 2876 616c   val_len=len(val
-00045e80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00045e90: 2020 6e75 6d3d 496e 7428 7661 6c2c 6465    num=Int(val,de
-00045ea0: 6661 756c 743d 4e6f 6e65 290a 2020 2020  fault=None).    
-00045eb0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00045ec0: 7369 6e73 7461 6e63 6528 6e75 6d2c 696e  sinstance(num,in
-00045ed0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00045ee0: 2020 2020 2020 2020 6966 2033 203c 3d20          if 3 <= 
-00045ef0: 6c65 6e28 7661 6c29 203c 3d34 2061 6e64  len(val) <=4 and
-00045f00: 2031 3030 203c 3d20 6e75 6d20 3c3d 2037   100 <= num <= 7
-00045f10: 3737 3a20 2373 7472 696e 6720 7479 7065  77: #string type
-00045f20: 206f 6620 7065 726d 6973 7369 6f6e 206e   of permission n
-00045f30: 756d 6265 7228 6f63 7461 6c20 6e75 6d62  umber(octal numb
-00045f40: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
-00045f50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00045f60: 726e 205f 6d6f 6465 5f28 2725 3034 6427  rn _mode_('%04d'
-00045f70: 2528 6e75 6d29 2c6d 6f64 6529 0a20 2020  %(num),mode).   
-00045f80: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00045f90: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00045fa0: 2020 2020 2020 2076 616c 5f6c 656e 3d6c         val_len=l
-00045fb0: 656e 2876 616c 290a 2020 2020 2020 2020  en(val).        
-00045fc0: 2020 2020 2020 2020 2020 2020 6966 2039              if 9
-00045fd0: 3c3d 2076 616c 5f6c 656e 203c 3d31 303a  <= val_len <=10:
-00045fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045ff0: 2020 2020 2020 2020 2069 6620 7661 6c5f           if val_
-00046000: 6c65 6e20 3d3d 2031 3020 616e 6420 7661  len == 10 and va
-00046010: 6c5b 305d 2069 6e20 5b27 2d27 2c27 6427  l[0] in ['-','d'
-00046020: 2c27 7327 5d3a 0a20 2020 2020 2020 2020  ,'s']:.         
-00046030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046040: 2020 2076 616c 3d76 616c 5b31 3a5d 0a20     val=val[1:]. 
-00046050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046060: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00046070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046080: 2053 7464 4572 7228 2742 6164 2070 6572   StdErr('Bad per
-00046090: 6d69 7373 696f 6e20 6c65 6e67 7468 2729  mission length')
-000460a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000460b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000460c0: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
-000460d0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-000460e0: 6f74 2061 6c6c 2876 616c 5b6b 5d20 696e  ot all(val[k] in
-000460f0: 2027 7277 2d27 2066 6f72 206b 2069 6e20   'rw-' for k in 
-00046100: 5b30 2c31 2c33 2c34 2c36 2c37 5d29 3a0a  [0,1,3,4,6,7]):.
-00046110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046120: 2020 2020 2020 2020 5374 6445 7272 2827          StdErr('
-00046130: 4261 6420 7065 726d 6973 7369 6f6e 2066  Bad permission f
-00046140: 6f72 6d61 7420 2872 6561 642d 7772 6974  ormat (read-writ
-00046150: 6529 2729 0a20 2020 2020 2020 2020 2020  e)').           
-00046160: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00046170: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
-00046180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046190: 6966 206e 6f74 2061 6c6c 2876 616c 5b6b  if not all(val[k
-000461a0: 5d20 696e 2027 7873 2d27 2066 6f72 206b  ] in 'xs-' for k
-000461b0: 2069 6e20 5b32 2c35 5d29 3a0a 2020 2020   in [2,5]):.    
-000461c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000461d0: 2020 2020 5374 6445 7272 2827 4261 6420      StdErr('Bad 
-000461e0: 7065 726d 6973 7369 6f6e 2066 6f72 6d61  permission forma
-000461f0: 7420 2865 7865 6375 7465 2927 290a 2020  t (execute)').  
+00045960: 2069 6620 393c 3d20 7661 6c5f 6c65 6e20   if 9<= val_len 
+00045970: 3c3d 3130 3a0a 2020 2020 2020 2020 2020  <=10:.          
+00045980: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00045990: 2076 616c 5f6c 656e 203d 3d20 3130 2061   val_len == 10 a
+000459a0: 6e64 2076 616c 5b30 5d20 696e 205b 272d  nd val[0] in ['-
+000459b0: 272c 2764 272c 2773 275d 3a0a 2020 2020  ','d','s']:.    
+000459c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000459d0: 2020 2020 2020 2020 7661 6c3d 7661 6c5b          val=val[
+000459e0: 313a 5d0a 2020 2020 2020 2020 2020 2020  1:].            
+000459f0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00045a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045a10: 2020 2020 2020 5374 6445 7272 2827 4261        StdErr('Ba
+00045a20: 6420 7065 726d 6973 7369 6f6e 206c 656e  d permission len
+00045a30: 6774 6827 290a 2020 2020 2020 2020 2020  gth').          
+00045a40: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00045a50: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
+00045a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045a70: 2069 6620 6e6f 7420 616c 6c28 7661 6c5b   if not all(val[
+00045a80: 6b5d 2069 6e20 2772 772d 2720 666f 7220  k] in 'rw-' for 
+00045a90: 6b20 696e 205b 302c 312c 332c 342c 362c  k in [0,1,3,4,6,
+00045aa0: 375d 293a 0a20 2020 2020 2020 2020 2020  7]):.           
+00045ab0: 2020 2020 2020 2020 2020 2020 2053 7464               Std
+00045ac0: 4572 7228 2742 6164 2070 6572 6d69 7373  Err('Bad permiss
+00045ad0: 696f 6e20 666f 726d 6174 2028 7265 6164  ion format (read
+00045ae0: 2d77 7269 7465 2927 290a 2020 2020 2020  -write)').      
+00045af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045b00: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
+00045b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045b20: 2020 2020 2069 6620 6e6f 7420 616c 6c28       if not all(
+00045b30: 7661 6c5b 6b5d 2069 6e20 2778 732d 2720  val[k] in 'xs-' 
+00045b40: 666f 7220 6b20 696e 205b 322c 355d 293a  for k in [2,5]):
+00045b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045b60: 2020 2020 2020 2020 2053 7464 4572 7228           StdErr(
+00045b70: 2742 6164 2070 6572 6d69 7373 696f 6e20  'Bad permission 
+00045b80: 666f 726d 6174 2028 6578 6563 7574 6529  format (execute)
+00045b90: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+00045ba0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00045bb0: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
+00045bc0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00045bd0: 2076 616c 5b38 5d20 6e6f 7420 696e 2027   val[8] not in '
+00045be0: 7874 2d27 3a0a 2020 2020 2020 2020 2020  xt-':.          
+00045bf0: 2020 2020 2020 2020 2020 2020 2020 5374                St
+00045c00: 6445 7272 2820 2742 6164 2070 6572 6d69  dErr( 'Bad permi
+00045c10: 7373 696f 6e20 666f 726d 6174 2028 6578  ssion format (ex
+00045c20: 6563 7574 6520 6f74 6865 7229 2729 0a20  ecute other)'). 
+00045c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045c40: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00045c50: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
+00045c60: 2020 2020 2020 2020 2020 6d20 3d20 300a            m = 0.
+00045c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045c80: 2020 2020 6966 2076 616c 5b30 5d20 3d3d      if val[0] ==
+00045c90: 2027 7227 3a20 6d20 7c3d 2073 7461 742e   'r': m |= stat.
+00045ca0: 535f 4952 5553 520a 2020 2020 2020 2020  S_IRUSR.        
+00045cb0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00045cc0: 616c 5b31 5d20 3d3d 2027 7727 3a20 6d20  al[1] == 'w': m 
+00045cd0: 7c3d 2073 7461 742e 535f 4957 5553 520a  |= stat.S_IWUSR.
+00045ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045cf0: 2020 2020 6966 2076 616c 5b32 5d20 3d3d      if val[2] ==
+00045d00: 2027 7827 3a20 6d20 7c3d 2073 7461 742e   'x': m |= stat.
+00045d10: 535f 4958 5553 520a 2020 2020 2020 2020  S_IXUSR.        
+00045d20: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00045d30: 616c 5b32 5d20 3d3d 2027 7327 3a20 6d20  al[2] == 's': m 
+00045d40: 7c3d 2073 7461 742e 535f 4958 5553 5220  |= stat.S_IXUSR 
+00045d50: 7c20 7374 6174 2e53 5f49 5355 4944 0a0a  | stat.S_ISUID..
+00045d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045d70: 2020 2020 6966 2076 616c 5b33 5d20 3d3d      if val[3] ==
+00045d80: 2027 7227 3a20 6d20 7c3d 2073 7461 742e   'r': m |= stat.
+00045d90: 535f 4952 4752 500a 2020 2020 2020 2020  S_IRGRP.        
+00045da0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00045db0: 616c 5b34 5d20 3d3d 2027 7727 3a20 6d20  al[4] == 'w': m 
+00045dc0: 7c3d 2073 7461 742e 535f 4957 4752 500a  |= stat.S_IWGRP.
+00045dd0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00045de0: 7461 6e63 6528 7661 6c2c 696e 7429 3a0a  tance(val,int):.
+00045df0: 2020 2020 2020 2020 2020 2020 2369 6620              #if 
+00045e00: 7661 6c20 3e20 3531 313a 2020 2020 2020  val > 511:      
+00045e10: 2023 7374 6174 2e73 745f 6d6f 6465 2028   #stat.st_mode (
+00045e20: 3332 3736 3820 7e20 3333 3237 3929 0a20  32768 ~ 33279). 
+00045e30: 2020 2020 2020 2020 2020 2023 7374 6174             #stat
+00045e40: 2e73 745f 6d6f 6465 2028 6669 6c65 3a20  .st_mode (file: 
+00045e50: 3332 3736 387e 3336 3836 332c 2064 6972  32768~36863, dir
+00045e60: 6563 746f 7279 3a20 3136 3338 3420 7e20  ectory: 16384 ~ 
+00045e70: 3230 3437 3929 0a20 2020 2020 2020 2020  20479).         
+00045e80: 2020 2069 6620 3332 3736 3820 3c3d 2076     if 32768 <= v
+00045e90: 616c 203c 3d20 3336 3836 3320 6f72 2031  al <= 36863 or 1
+00045ea0: 3633 3834 203c 3d20 7661 6c20 3c3d 2032  6384 <= val <= 2
+00045eb0: 3034 3739 3a20 2020 2373 7461 742e 7374  0479:   #stat.st
+00045ec0: 5f6d 6f64 650a 2020 2020 2020 2020 2020  _mode.          
+00045ed0: 2020 2020 2020 2372 6574 7572 6e20 5f6d        #return _m
+00045ee0: 6f64 655f 286f 6374 2876 616c 295b 2d34  ode_(oct(val)[-4
+00045ef0: 3a5d 2c6d 6f64 6529 2023 2074 6f20 6f63  :],mode) # to oc
+00045f00: 7461 6c20 6e75 6d62 6572 2028 6f63 7428  tal number (oct(
+00045f10: 7661 6c29 5b2d 343a 5d29 0a20 2020 2020  val)[-4:]).     
+00045f20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00045f30: 6e20 5f6d 6f64 655f 286f 6374 2876 616c  n _mode_(oct(val
+00045f40: 2026 2030 6f37 3737 292c 6d6f 6465 2920   & 0o777),mode) 
+00045f50: 2320 746f 206f 6374 616c 206e 756d 6265  # to octal numbe
+00045f60: 7220 286f 6374 2876 616c 295b 2d34 3a5d  r (oct(val)[-4:]
+00045f70: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+00045f80: 6966 2035 3131 203e 3d20 7661 6c20 3e20  if 511 >= val > 
+00045f90: 3633 3a20 2020 2020 2023 6d61 736b 0a20  63:      #mask. 
+00045fa0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00045fb0: 6574 7572 6e20 5f6d 6f64 655f 286f 6374  eturn _mode_(oct
+00045fc0: 2876 616c 292c 6d6f 6465 2920 2020 2020  (val),mode)     
+00045fd0: 2023 2074 6f20 6f63 616c 206e 756d 6265   # to ocal numbe
+00045fe0: 7228 6f63 7428 7661 6c29 290a 2020 2020  r(oct(val)).    
+00045ff0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00046000: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00046010: 7475 726e 205f 6d6f 6465 5f28 2725 3034  turn _mode_('%04
+00046020: 6427 2528 7661 6c29 2c6d 6f64 6529 2020  d'%(val),mode)  
+00046030: 2020 2020 2320 746f 206f 6361 6c20 6e75      # to ocal nu
+00046040: 6d62 6572 286f 6374 2876 616c 2929 0a20  mber(oct(val)). 
+00046050: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00046060: 2020 2020 2020 2020 2076 616c 3d53 7472           val=Str
+00046070: 2876 616c 2c64 6566 6175 6c74 3d4e 6f6e  (val,default=Non
+00046080: 6529 0a20 2020 2020 2020 2020 2020 2069  e).            i
+00046090: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
+000460a0: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
+000460b0: 2020 2020 2020 2076 616c 5f6c 656e 3d6c         val_len=l
+000460c0: 656e 2876 616c 290a 2020 2020 2020 2020  en(val).        
+000460d0: 2020 2020 2020 2020 6e75 6d3d 496e 7428          num=Int(
+000460e0: 7661 6c2c 6465 6661 756c 743d 4e6f 6e65  val,default=None
+000460f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00046100: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00046110: 6e75 6d2c 696e 7429 3a0a 2020 2020 2020  num,int):.      
+00046120: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00046130: 2033 203c 3d20 6c65 6e28 7661 6c29 203c   3 <= len(val) <
+00046140: 3d34 2061 6e64 2031 3030 203c 3d20 6e75  =4 and 100 <= nu
+00046150: 6d20 3c3d 2037 3737 3a20 2373 7472 696e  m <= 777: #strin
+00046160: 6720 7479 7065 206f 6620 7065 726d 6973  g type of permis
+00046170: 7369 6f6e 206e 756d 6265 7228 6f63 7461  sion number(octa
+00046180: 6c20 6e75 6d62 6572 290a 2020 2020 2020  l number).      
+00046190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000461a0: 2020 7265 7475 726e 205f 6d6f 6465 5f28    return _mode_(
+000461b0: 2725 3034 6427 2528 6e75 6d29 2c6d 6f64  '%04d'%(num),mod
+000461c0: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+000461d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000461e0: 2020 2020 2020 2020 2020 2020 2076 616c               val
+000461f0: 5f6c 656e 3d6c 656e 2876 616c 290a 2020  _len=len(val).  
 00046200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046210: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-00046220: 6175 6c74 0a20 2020 2020 2020 2020 2020  ault.           
-00046230: 2020 2020 2020 2020 2069 6620 7661 6c5b           if val[
-00046240: 385d 206e 6f74 2069 6e20 2778 742d 273a  8] not in 'xt-':
-00046250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00046260: 2020 2020 2020 2020 2053 7464 4572 7228           StdErr(
-00046270: 2027 4261 6420 7065 726d 6973 7369 6f6e   'Bad permission
-00046280: 2066 6f72 6d61 7420 2865 7865 6375 7465   format (execute
-00046290: 206f 7468 6572 2927 290a 2020 2020 2020   other)').      
-000462a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000462b0: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
-000462c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000462d0: 2020 2020 206d 203d 2030 0a20 2020 2020       m = 0.     
-000462e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000462f0: 6620 7661 6c5b 305d 203d 3d20 2772 273a  f val[0] == 'r':
-00046300: 206d 207c 3d20 7374 6174 2e53 5f49 5255   m |= stat.S_IRU
-00046310: 5352 0a20 2020 2020 2020 2020 2020 2020  SR.             
-00046320: 2020 2020 2020 2069 6620 7661 6c5b 315d         if val[1]
-00046330: 203d 3d20 2777 273a 206d 207c 3d20 7374   == 'w': m |= st
-00046340: 6174 2e53 5f49 5755 5352 0a20 2020 2020  at.S_IWUSR.     
-00046350: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00046360: 6620 7661 6c5b 325d 203d 3d20 2778 273a  f val[2] == 'x':
-00046370: 206d 207c 3d20 7374 6174 2e53 5f49 5855   m |= stat.S_IXU
-00046380: 5352 0a20 2020 2020 2020 2020 2020 2020  SR.             
-00046390: 2020 2020 2020 2069 6620 7661 6c5b 325d         if val[2]
-000463a0: 203d 3d20 2773 273a 206d 207c 3d20 7374   == 's': m |= st
-000463b0: 6174 2e53 5f49 5855 5352 207c 2073 7461  at.S_IXUSR | sta
-000463c0: 742e 535f 4953 5549 440a 0a20 2020 2020  t.S_ISUID..     
-000463d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000463e0: 6620 7661 6c5b 335d 203d 3d20 2772 273a  f val[3] == 'r':
-000463f0: 206d 207c 3d20 7374 6174 2e53 5f49 5247   m |= stat.S_IRG
-00046400: 5250 0a20 2020 2020 2020 2020 2020 2020  RP.             
-00046410: 2020 2020 2020 2069 6620 7661 6c5b 345d         if val[4]
-00046420: 203d 3d20 2777 273a 206d 207c 3d20 7374   == 'w': m |= st
-00046430: 6174 2e53 5f49 5747 5250 0a20 2020 2020  at.S_IWGRP.     
-00046440: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00046450: 6620 7661 6c5b 355d 203d 3d20 2778 273a  f val[5] == 'x':
-00046460: 206d 207c 3d20 7374 6174 2e53 5f49 5847   m |= stat.S_IXG
-00046470: 5250 0a20 2020 2020 2020 2020 2020 2020  RP.             
-00046480: 2020 2020 2020 2069 6620 7661 6c5b 355d         if val[5]
-00046490: 203d 3d20 2773 273a 206d 207c 3d20 7374   == 's': m |= st
-000464a0: 6174 2e53 5f49 5847 5250 207c 2073 7461  at.S_IXGRP | sta
-000464b0: 742e 535f 4953 4749 440a 0a20 2020 2020  t.S_ISGID..     
-000464c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000464d0: 6620 7661 6c5b 365d 203d 3d20 2772 273a  f val[6] == 'r':
-000464e0: 206d 207c 3d20 7374 6174 2e53 5f49 524f   m |= stat.S_IRO
-000464f0: 5448 0a20 2020 2020 2020 2020 2020 2020  TH.             
-00046500: 2020 2020 2020 2069 6620 7661 6c5b 375d         if val[7]
-00046510: 203d 3d20 2777 273a 206d 207c 3d20 7374   == 'w': m |= st
-00046520: 6174 2e53 5f49 574f 5448 0a20 2020 2020  at.S_IWOTH.     
-00046530: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00046540: 6620 7661 6c5b 385d 203d 3d20 2778 273a  f val[8] == 'x':
-00046550: 206d 207c 3d20 7374 6174 2e53 5f49 584f   m |= stat.S_IXO
-00046560: 5448 0a20 2020 2020 2020 2020 2020 2020  TH.             
-00046570: 2020 2020 2020 2069 6620 7661 6c5b 385d         if val[8]
-00046580: 203d 3d20 2774 273a 206d 207c 3d20 7374   == 't': m |= st
-00046590: 6174 2e53 5f49 584f 5448 207c 2073 7461  at.S_IXOTH | sta
-000465a0: 742e 535f 4953 5654 580a 2020 2020 2020  t.S_ISVTX.      
-000465b0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000465c0: 7475 726e 205f 6d6f 6465 5f28 6f63 7428  turn _mode_(oct(
-000465d0: 6d29 2c6d 6f64 6529 0a20 2020 2020 2020  m),mode).       
-000465e0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-000465f0: 0a20 2020 2023 2046 696e 6420 6669 6c65  .    # Find file
-00046600: 6e61 6d65 2773 2072 6f6f 7420 7061 7468  name's root path
-00046610: 2061 6e64 2066 696c 656e 616d 6520 6163   and filename ac
-00046620: 636f 7264 696e 6720 746f 2074 6865 2064  cording to the d
-00046630: 620a 2020 2020 6465 6620 4669 6e64 5250  b.    def FindRP
-00046640: 2873 656c 662c 6669 6c65 6e61 6d65 3d4e  (self,filename=N
-00046650: 6f6e 652c 6465 6661 756c 743d 4e6f 6e65  one,default=None
-00046660: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
-00046670: 696e 7374 616e 6365 2866 696c 656e 616d  instance(filenam
-00046680: 652c 7374 7229 2061 6e64 2073 656c 662e  e,str) and self.
-00046690: 696e 666f 3a0a 2020 2020 2020 2020 2020  info:.          
-000466a0: 2020 696e 666f 5f6b 6579 733d 6c69 7374    info_keys=list
-000466b0: 2873 656c 662e 696e 666f 2e6b 6579 7328  (self.info.keys(
-000466c0: 2929 0a20 2020 2020 2020 2020 2020 2069  )).            i
-000466d0: 6e66 6f5f 6e75 6d3d 6c65 6e28 696e 666f  nfo_num=len(info
-000466e0: 5f6b 6579 7329 0a20 2020 2020 2020 2020  _keys).         
-000466f0: 2020 2069 6620 6669 6c65 6e61 6d65 5b30     if filename[0
-00046700: 5d20 213d 2027 2f27 3a0a 2020 2020 2020  ] != '/':.      
-00046710: 2020 2020 2020 2020 2020 6966 2069 6e66            if inf
-00046720: 6f5f 6e75 6d20 3d3d 2031 3a20 7265 7475  o_num == 1: retu
-00046730: 726e 2069 6e66 6f5f 6b65 7973 5b30 5d0a  rn info_keys[0].
-00046740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046750: 7265 7475 726e 2073 656c 662e 726f 6f74  return self.root
-00046760: 5f70 6174 680a 2020 2020 2020 2020 2020  _path.          
-00046770: 2020 6161 3d27 2f27 0a20 2020 2020 2020    aa='/'.       
-00046780: 2020 2020 2066 696c 656e 616d 655f 613d       filename_a=
-00046790: 6669 6c65 6e61 6d65 2e73 706c 6974 2827  filename.split('
-000467a0: 2f27 290a 2020 2020 2020 2020 2020 2020  /').            
-000467b0: 666f 7220 6969 2069 6e20 7261 6e67 6528  for ii in range(
-000467c0: 312c 6c65 6e28 6669 6c65 6e61 6d65 5f61  1,len(filename_a
-000467d0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-000467e0: 2020 2020 6161 3d50 6174 6828 6161 2c66      aa=Path(aa,f
-000467f0: 696c 656e 616d 655f 615b 6969 5d29 0a20  ilename_a[ii]). 
-00046800: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00046810: 6620 6161 2069 6e20 696e 666f 5f6b 6579  f aa in info_key
-00046820: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00046830: 2020 2020 2020 2023 7265 6d61 696e 5f70         #remain_p
-00046840: 6174 683d 272f 272e 6a6f 696e 2866 696c  ath='/'.join(fil
-00046850: 656e 616d 655f 615b 6969 2b31 3a5d 290a  ename_a[ii+1:]).
-00046860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046870: 2020 2020 7265 6d61 696e 5f70 6174 683d      remain_path=
-00046880: 4a6f 696e 2866 696c 656e 616d 655f 615b  Join(filename_a[
-00046890: 6969 2b31 3a5d 2c73 796d 626f 6c3d 272f  ii+1:],symbol='/
-000468a0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-000468b0: 2020 2020 2020 2069 6620 696e 666f 5f6e         if info_n
-000468c0: 756d 203d 3d20 313a 2072 6574 7572 6e20  um == 1: return 
-000468d0: 6161 2c72 656d 6169 6e5f 7061 7468 0a20  aa,remain_path. 
-000468e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000468f0: 2020 2023 2069 6620 696e 666f 2068 6173     # if info has
-00046900: 206d 756c 7469 2072 6f6f 7420 7061 7468   multi root path
-00046910: 2074 6865 6e20 6368 6563 6b20 6669 6c65   then check file
-00046920: 6e61 6d65 2069 6e20 7468 6520 6462 206f  name in the db o
-00046930: 6620 6561 6368 2072 6f6f 745f 7061 7468  f each root_path
-00046940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00046950: 2020 2020 2069 6620 7365 6c66 2e46 696c       if self.Fil
-00046960: 6549 6e66 6f28 7265 6d61 696e 5f70 6174  eInfo(remain_pat
-00046970: 682c 6161 293a 2072 6574 7572 6e20 6161  h,aa): return aa
-00046980: 2c72 656d 6169 6e5f 7061 7468 0a20 2020  ,remain_path.   
-00046990: 2020 2020 2065 6c69 6620 7365 6c66 2e69       elif self.i
-000469a0: 6e66 6f3a 0a20 2020 2020 2020 2020 2020  nfo:.           
-000469b0: 2072 6574 7572 6e20 6c69 7374 2873 656c   return list(sel
-000469c0: 662e 696e 666f 2e6b 6579 7328 2929 0a20  f.info.keys()). 
-000469d0: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-000469e0: 6661 756c 740a 0a20 2020 2064 6566 2045  fault..    def E
-000469f0: 7874 7261 6374 526f 6f74 2873 656c 662c  xtractRoot(self,
-00046a00: 2a2a 6f70 7473 293a 0a20 2020 2020 2020  **opts):.       
-00046a10: 2072 6f6f 745f 7061 7468 3d6f 7074 732e   root_path=opts.
-00046a20: 6765 7428 2772 6f6f 745f 7061 7468 272c  get('root_path',
-00046a30: 5b5d 290a 2020 2020 2020 2020 6469 7270  []).        dirp
-00046a40: 6174 683d 6f70 7473 2e67 6574 2827 6469  ath=opts.get('di
-00046a50: 7270 6174 6827 290a 2020 2020 2020 2020  rpath').        
-00046a60: 7375 625f 6469 723d 6f70 7473 2e67 6574  sub_dir=opts.get
-00046a70: 2827 7375 625f 6469 7227 2c46 616c 7365  ('sub_dir',False
-00046a80: 290a 2020 2020 2020 2020 6966 2069 7369  ).        if isi
-00046a90: 6e73 7461 6e63 6528 726f 6f74 5f70 6174  nstance(root_pat
-00046aa0: 682c 7374 7229 3a0a 2020 2020 2020 2020  h,str):.        
-00046ab0: 2020 2020 726f 6f74 5f70 6174 683d 5b72      root_path=[r
-00046ac0: 6f6f 745f 7061 7468 5d0a 2020 2020 2020  oot_path].      
-00046ad0: 2020 2369 6620 6e6f 7420 6f73 2e70 6174    #if not os.pat
-00046ae0: 682e 6973 6469 7228 6f70 7473 2e67 6574  h.isdir(opts.get
-00046af0: 2827 6465 7374 2729 293a 206f 732e 6d61  ('dest')): os.ma
-00046b00: 6b65 6469 7273 286f 7074 732e 6765 7428  kedirs(opts.get(
-00046b10: 2764 6573 7427 2929 0a20 2020 2020 2020  'dest')).       
-00046b20: 2069 6620 7365 6c66 2e4d 6b64 6972 286f   if self.Mkdir(o
-00046b30: 7074 732e 6765 7428 2764 6573 7427 292c  pts.get('dest'),
-00046b40: 666f 7263 653d 5472 7565 2920 6973 2046  force=True) is F
-00046b50: 616c 7365 3a20 7265 7475 726e 2046 616c  alse: return Fal
-00046b60: 7365 0a20 2020 2020 2020 2066 6f72 2072  se.        for r
-00046b70: 7020 696e 2072 6f6f 745f 7061 7468 3a0a  p in root_path:.
-00046b80: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-00046b90: 6465 7374 3d6f 7074 732e 6765 7428 2764  dest=opts.get('d
-00046ba0: 6573 7427 290a 2020 2020 2020 2020 2020  est').          
-00046bb0: 2020 6966 2064 6972 7061 7468 3a0a 2020    if dirpath:.  
-00046bc0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-00046bd0: 3d73 656c 662e 4364 5061 7468 2873 656c  =self.CdPath(sel
-00046be0: 662e 696e 666f 5b72 705d 2c64 6972 7061  f.info[rp],dirpa
-00046bf0: 7468 290a 2020 2020 2020 2020 2020 2020  th).            
-00046c00: 2020 2020 6966 2072 7420 6973 2046 616c      if rt is Fal
-00046c10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00046c20: 2020 2020 2020 2020 7072 696e 7428 277b          print('{
-00046c30: 7d20 6e6f 7420 666f 756e 6427 2e66 6f72  } not found'.for
-00046c40: 6d61 7428 6469 7270 6174 6829 290a 2020  mat(dirpath)).  
-00046c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046c60: 2020 7265 7475 726e 0a20 2020 2020 2020    return.       
-00046c70: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00046c80: 2020 2020 2020 2020 2020 2064 6972 7061             dirpa
-00046c90: 7468 3d27 270a 2020 2020 2020 2020 2020  th=''.          
-00046ca0: 2020 2020 2020 7274 3d73 656c 662e 696e        rt=self.in
-00046cb0: 666f 5b72 705d 0a0a 2020 2020 2020 2020  fo[rp]..        
-00046cc0: 2020 2020 7269 6e66 6f3d 7274 2e67 6574      rinfo=rt.get
-00046cd0: 2827 2069 2027 2c7b 7d29 0a20 2020 2020  (' i ',{}).     
-00046ce0: 2020 2020 2020 2072 7479 7065 3d72 696e         rtype=rin
-00046cf0: 666f 2e67 6574 2827 7479 7065 2729 0a20  fo.get('type'). 
-00046d00: 2020 2020 2020 2020 2020 2023 6469 723a             #dir:
-00046d10: 6469 7265 6374 6f72 792c 4e6f 6e65 3a72  directory,None:r
-00046d20: 6f6f 7420 6469 7265 6374 6f72 790a 2020  oot directory.  
-00046d30: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00046d40: 2049 734e 6f6e 6528 7274 7970 652c 6368   IsNone(rtype,ch
-00046d50: 6b5f 7661 6c3d 5b27 6469 7227 2c4e 6f6e  k_val=['dir',Non
-00046d60: 652c 2727 5d29 3a20 2320 4669 6c65 202f  e,'']): # File /
-00046d70: 204c 696e 6b0a 2020 2020 2020 2020 2020   Link.          
-00046d80: 2020 2020 2020 6d79 6465 7374 3d6f 732e        mydest=os.
-00046d90: 7061 7468 2e64 6972 6e61 6d65 2864 6972  path.dirname(dir
-00046da0: 7061 7468 290a 2020 2020 2020 2020 2020  path).          
-00046db0: 2020 2020 2020 6d79 6e61 6d65 3d6f 732e        myname=os.
-00046dc0: 7061 7468 2e62 6173 656e 616d 6528 6469  path.basename(di
-00046dd0: 7270 6174 6829 0a20 2020 2020 2020 2020  rpath).         
-00046de0: 2020 2020 2020 2069 6620 6d79 6465 7374         if mydest
-00046df0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00046e00: 2020 2020 2020 6d79 6465 7374 3d6f 732e        mydest=os.
-00046e10: 7061 7468 2e6a 6f69 6e28 6e65 775f 6465  path.join(new_de
-00046e20: 7374 2c6d 7964 6573 7429 0a20 2020 2020  st,mydest).     
-00046e30: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00046e40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00046e50: 2020 2020 206d 7964 6573 743d 6e65 775f       mydest=new_
-00046e60: 6465 7374 0a20 2020 2020 2020 2020 2020  dest.           
-00046e70: 2020 2020 2023 6966 206e 6f74 206f 732e       #if not os.
-00046e80: 7061 7468 2e69 7364 6972 286d 7964 6573  path.isdir(mydes
-00046e90: 7429 3a20 6f73 2e6d 616b 6564 6972 7328  t): os.makedirs(
-00046ea0: 6d79 6465 7374 290a 2020 2020 2020 2020  mydest).        
-00046eb0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00046ec0: 4d6b 6469 7228 6d79 6465 7374 2c66 6f72  Mkdir(mydest,for
-00046ed0: 6365 3d54 7275 652c 696e 666f 3d72 696e  ce=True,info=rin
-00046ee0: 666f 2920 6973 2046 616c 7365 3a20 7265  fo) is False: re
-00046ef0: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
-00046f00: 2020 2020 2020 2020 2020 2069 6620 7274             if rt
-00046f10: 7970 6520 3d3d 2027 6c69 6e6b 273a 0a20  ype == 'link':. 
-00046f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046f30: 2020 206f 732e 7379 6d6c 696e 6b28 7269     os.symlink(ri
-00046f40: 6e66 6f5b 2764 6573 7427 5d2c 6f73 2e70  nfo['dest'],os.p
-00046f50: 6174 682e 6a6f 696e 286d 7964 6573 742c  ath.join(mydest,
-00046f60: 6d79 6e61 6d65 2929 0a20 2020 2020 2020  myname)).       
-00046f70: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00046f80: 662e 5365 7449 6465 6e74 6974 7928 6f73  f.SetIdentity(os
-00046f90: 2e70 6174 682e 6a6f 696e 286d 7964 6573  .path.join(mydes
-00046fa0: 742c 6d79 6e61 6d65 292c 2a2a 7269 6e66  t,myname),**rinf
-00046fb0: 6f29 0a20 2020 2020 2020 2020 2020 2020  o).             
-00046fc0: 2020 2065 6c73 653a 2023 2046 696c 650a     else: # File.
-00046fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046fe0: 2020 2020 6966 2027 6461 7461 2720 696e      if 'data' in
-00046ff0: 2072 743a 2073 656c 662e 5277 2850 6174   rt: self.Rw(Pat
-00047000: 6828 6d79 6465 7374 2c6d 796e 616d 6529  h(mydest,myname)
-00047010: 2c64 6174 613d 7274 5b27 6461 7461 275d  ,data=rt['data']
-00047020: 2c66 696e 666f 3d72 696e 666f 290a 2020  ,finfo=rinfo).  
-00047030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047040: 2020 656c 7365 3a20 7072 696e 7428 277b    else: print('{
-00047050: 7d20 6669 6c65 2068 6176 6520 6e6f 2064  } file have no d
-00047060: 6174 6127 2e66 6f72 6d61 7428 6469 7270  ata'.format(dirp
-00047070: 6174 6829 290a 2320 2020 2020 2020 2020  ath)).#         
-00047080: 2020 2020 2020 2073 656c 662e 5365 7449         self.SetI
-00047090: 6465 6e74 6974 7928 6f73 2e70 6174 682e  dentity(os.path.
-000470a0: 6a6f 696e 286d 7964 6573 742c 6d79 6e61  join(mydest,myna
-000470b0: 6d65 292c 2a2a 7269 6e66 6f29 0a20 2020  me),**rinfo).   
-000470c0: 2020 2020 2020 2020 2065 6c73 653a 2023           else: #
-000470d0: 2064 6972 6563 746f 7279 206f 7220 726f   directory or ro
-000470e0: 6f74 2044 420a 2020 2020 2020 2020 2020  ot DB.          
-000470f0: 2020 2020 2020 666f 7220 6969 2069 6e20        for ii in 
-00047100: 7274 3a0a 2020 2020 2020 2020 2020 2020  rt:.            
-00047110: 2020 2020 2020 2020 6966 2069 6920 3d3d          if ii ==
-00047120: 2027 2069 2027 3a20 636f 6e74 696e 7565   ' i ': continue
-00047130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00047140: 2020 2020 2066 696e 666f 3d72 745b 6969       finfo=rt[ii
-00047150: 5d2e 6765 7428 2720 6920 272c 7b7d 290a  ].get(' i ',{}).
-00047160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047170: 2020 2020 6674 7970 653d 6669 6e66 6f2e      ftype=finfo.
-00047180: 6765 7428 2774 7970 6527 290a 2020 2020  get('type').    
-00047190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000471a0: 6966 2066 7479 7065 203d 3d20 2764 6972  if ftype == 'dir
-000471b0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-000471c0: 2020 2020 2020 2020 2020 206d 7964 6972             mydir
-000471d0: 3d6f 732e 7061 7468 2e6a 6f69 6e28 6e65  =os.path.join(ne
-000471e0: 775f 6465 7374 2c69 6929 0a20 2020 2020  w_dest,ii).     
-000471f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047200: 2020 2073 656c 662e 4d6b 6469 7228 6d79     self.Mkdir(my
-00047210: 6469 722c 666f 7263 653d 5472 7565 2c69  dir,force=True,i
-00047220: 6e66 6f3d 6669 6e66 6f29 0a20 2020 2020  nfo=finfo).     
-00047230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047240: 2020 2023 7365 6c66 2e53 6574 4964 656e     #self.SetIden
-00047250: 7469 7479 286d 7964 6972 2c2a 2a66 696e  tity(mydir,**fin
-00047260: 666f 290a 2020 2020 2020 2020 2020 2020  fo).            
-00047270: 2020 2020 2020 2020 2020 2020 2320 5375              # Su
-00047280: 6220 6469 7265 6374 6f72 790a 2020 2020  b directory.    
-00047290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000472a0: 2020 2020 6966 2073 7562 5f64 6972 3a20      if sub_dir: 
-000472b0: 7365 6c66 2e45 7874 7261 6374 526f 6f74  self.ExtractRoot
-000472c0: 2864 6972 7061 7468 3d6f 732e 7061 7468  (dirpath=os.path
-000472d0: 2e6a 6f69 6e28 6469 7270 6174 682c 6969  .join(dirpath,ii
-000472e0: 292c 726f 6f74 5f70 6174 683d 7270 2c64  ),root_path=rp,d
-000472f0: 6573 743d 6f73 2e70 6174 682e 6a6f 696e  est=os.path.join
-00047300: 286e 6577 5f64 6573 742c 6969 292c 7375  (new_dest,ii),su
-00047310: 625f 6469 723d 7375 625f 6469 7229 0a20  b_dir=sub_dir). 
-00047320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047330: 2020 2020 2020 2023 6966 2064 6d74 696d         #if dmtim
-00047340: 6520 616e 6420 6461 7469 6d65 3a20 6f73  e and datime: os
-00047350: 2e75 7469 6d65 286d 7964 6972 2c28 6461  .utime(mydir,(da
-00047360: 7469 6d65 2c64 6d74 696d 6529 2920 2320  time,dmtime)) # 
-00047370: 5469 6d65 2075 7064 6174 6520 6d75 7374  Time update must
-00047380: 2062 6520 6174 206c 6173 7420 6f72 6465   be at last orde
-00047390: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-000473a0: 2020 2020 2020 656c 6966 2066 7479 7065        elif ftype
-000473b0: 203d 3d20 276c 696e 6b27 3a0a 2020 2020   == 'link':.    
-000473c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000473d0: 2020 2020 6969 6d6d 3d6f 732e 7061 7468      iimm=os.path
-000473e0: 2e6a 6f69 6e28 6e65 775f 6465 7374 2c69  .join(new_dest,i
-000473f0: 6929 0a20 2020 2020 2020 2020 2020 2020  i).             
-00047400: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00047410: 7420 6f73 2e70 6174 682e 6578 6973 7473  t os.path.exists
-00047420: 2869 696d 6d29 3a0a 2020 2020 2020 2020  (iimm):.        
-00047430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047440: 2020 2020 6f73 2e73 796d 6c69 6e6b 2866      os.symlink(f
-00047450: 696e 666f 5b27 6465 7374 275d 2c69 696d  info['dest'],iim
-00047460: 6d29 0a20 2020 2020 2020 2020 2020 2020  m).             
-00047470: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00047480: 656c 662e 5365 7449 6465 6e74 6974 7928  elf.SetIdentity(
-00047490: 6969 6d6d 2c2a 2a66 696e 666f 290a 2020  iimm,**finfo).  
-000474a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000474b0: 2020 656c 7365 3a20 2320 4669 6c65 0a20    else: # File. 
-000474c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000474d0: 2020 2020 2020 2069 6620 2764 6174 6127         if 'data'
-000474e0: 2069 6e20 7274 5b69 695d 3a20 7365 6c66   in rt[ii]: self
-000474f0: 2e52 7728 6f73 2e70 6174 682e 6a6f 696e  .Rw(os.path.join
-00047500: 286e 6577 5f64 6573 742c 6969 292c 6461  (new_dest,ii),da
-00047510: 7461 3d72 745b 6969 5d5b 2764 6174 6127  ta=rt[ii]['data'
-00047520: 5d2c 6669 6e66 6f3d 6669 6e66 6f29 0a20  ],finfo=finfo). 
-00047530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047540: 2020 2020 2020 2065 6c73 653a 2070 7269         else: pri
-00047550: 6e74 2827 7b7d 2066 696c 6520 6861 7665  nt('{} file have
-00047560: 206e 6f20 6461 7461 272e 666f 726d 6174   no data'.format
-00047570: 2869 6929 290a 0a20 2020 2064 6566 204d  (ii))..    def M
-00047580: 6b64 6972 2873 656c 662c 7061 7468 2c66  kdir(self,path,f
-00047590: 6f72 6365 3d46 616c 7365 2c69 6e66 6f3d  orce=False,info=
-000475a0: 7b7d 293a 0a20 2020 2020 2020 2069 6620  {}):.        if 
-000475b0: 6e6f 7420 6973 696e 7374 616e 6365 2870  not isinstance(p
-000475c0: 6174 682c 7374 7229 3a20 7265 7475 726e  ath,str): return
-000475d0: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
-000475e0: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
-000475f0: 7061 7468 293a 2072 6574 7572 6e20 4e6f  path): return No
-00047600: 6e65 0a20 2020 2020 2020 2069 6620 666f  ne.        if fo
-00047610: 7263 653a 0a20 2020 2020 2020 2020 2020  rce:.           
-00047620: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00047630: 2020 2020 2020 6f73 2e6d 616b 6564 6972        os.makedir
-00047640: 7328 7061 7468 290a 2020 2020 2020 2020  s(path).        
-00047650: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00047660: 7461 6e63 6528 696e 666f 2c64 6963 7429  tance(info,dict)
-00047670: 2061 6e64 2069 6e66 6f3a 2073 656c 662e   and info: self.
-00047680: 5365 7449 6465 6e74 6974 7928 7061 7468  SetIdentity(path
-00047690: 2c2a 2a69 6e66 6f29 0a20 2020 2020 2020  ,**info).       
-000476a0: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-000476b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000476c0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
-000476d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000476e0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-000476f0: 2020 2020 2020 2020 206f 732e 6d6b 6469           os.mkdi
-00047700: 7228 7061 7468 290a 2020 2020 2020 2020  r(path).        
-00047710: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00047720: 7461 6e63 6528 696e 666f 2c64 6963 7429  tance(info,dict)
-00047730: 2061 6e64 2069 6e66 6f3a 2073 656c 662e   and info: self.
-00047740: 5365 7449 6465 6e74 6974 7928 7061 7468  SetIdentity(path
-00047750: 2c2a 2a69 6e66 6f29 0a20 2020 2020 2020  ,**info).       
-00047760: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-00047770: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00047780: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
-00047790: 2020 7265 7475 726e 2054 7275 650a 0a20    return True.. 
-000477a0: 2020 2064 6566 2053 6574 4964 656e 7469     def SetIdenti
-000477b0: 7479 2873 656c 662c 7061 7468 2c2a 2a6f  ty(self,path,**o
-000477c0: 7074 7329 3a0a 2020 2020 2020 2020 6966  pts):.        if
-000477d0: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
-000477e0: 7061 7468 293a 0a20 2020 2020 2020 2020  path):.         
-000477f0: 2020 2063 686d 6f64 3d73 656c 662e 4d6f     chmod=self.Mo
-00047800: 6465 286f 7074 732e 6765 7428 276d 6f64  de(opts.get('mod
-00047810: 6527 2c4e 6f6e 6529 290a 2020 2020 2020  e',None)).      
-00047820: 2020 2020 2020 7569 643d 6f70 7473 2e67        uid=opts.g
-00047830: 6574 2827 7569 6427 2c4e 6f6e 6529 0a20  et('uid',None). 
-00047840: 2020 2020 2020 2020 2020 2067 6964 3d6f             gid=o
-00047850: 7074 732e 6765 7428 2767 6964 272c 4e6f  pts.get('gid',No
-00047860: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
-00047870: 6174 696d 653d 6f70 7473 2e67 6574 2827  atime=opts.get('
-00047880: 6174 696d 6527 2c4e 6f6e 6529 0a20 2020  atime',None).   
-00047890: 2020 2020 2020 2020 206d 7469 6d65 3d6f           mtime=o
-000478a0: 7074 732e 6765 7428 276d 7469 6d65 272c  pts.get('mtime',
-000478b0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-000478c0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-000478d0: 2020 2020 2020 2069 6620 6368 6d6f 643a         if chmod:
-000478e0: 206f 732e 6368 6d6f 6428 7061 7468 2c69   os.chmod(path,i
-000478f0: 6e74 2863 686d 6f64 2c62 6173 653d 3829  nt(chmod,base=8)
-00047900: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00047910: 2020 6966 2075 6964 2061 6e64 2067 6964    if uid and gid
-00047920: 3a20 6f73 2e63 686f 776e 2870 6174 682c  : os.chown(path,
-00047930: 7569 642c 6769 6429 0a20 2020 2020 2020  uid,gid).       
-00047940: 2020 2020 2020 2020 2069 6620 6d74 696d           if mtim
-00047950: 6520 616e 6420 6174 696d 653a 206f 732e  e and atime: os.
-00047960: 7574 696d 6528 7061 7468 2c28 6174 696d  utime(path,(atim
-00047970: 652c 6d74 696d 6529 2920 2320 5469 6d65  e,mtime)) # Time
-00047980: 2075 7064 6174 6520 6d75 7374 2062 6520   update must be 
-00047990: 6174 206c 6173 7420 6f72 6465 720a 2020  at last order.  
-000479a0: 2020 2020 2020 2020 2020 6578 6365 7074            except
-000479b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000479c0: 2020 7061 7373 0a0a 2020 2020 6465 6620    pass..    def 
-000479d0: 4578 7472 6163 7428 7365 6c66 2c2a 7061  Extract(self,*pa
-000479e0: 7468 2c2a 2a6f 7074 7329 3a0a 2020 2020  th,**opts):.    
-000479f0: 2020 2020 6465 7374 3d6f 7074 732e 6765      dest=opts.ge
-00047a00: 7428 2764 6573 7427 2c4e 6f6e 6529 0a20  t('dest',None). 
-00047a10: 2020 2020 2020 2072 6f6f 745f 7061 7468         root_path
-00047a20: 3d6f 7074 732e 6765 7428 2772 6f6f 745f  =opts.get('root_
-00047a30: 7061 7468 272c 4e6f 6e65 290a 2020 2020  path',None).    
-00047a40: 2020 2020 7375 625f 6469 723d 6f70 7473      sub_dir=opts
-00047a50: 2e67 6574 2827 7375 625f 6469 7227 2c46  .get('sub_dir',F
-00047a60: 616c 7365 290a 2020 2020 2020 2020 6966  alse).        if
-00047a70: 2049 734e 6f6e 6528 6465 7374 293a 2072   IsNone(dest): r
-00047a80: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-00047a90: 2020 2020 6966 206e 6f74 2070 6174 683a      if not path:
-00047aa0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00047ab0: 662e 4578 7472 6163 7452 6f6f 7428 726f  f.ExtractRoot(ro
-00047ac0: 6f74 5f70 6174 683d 7365 6c66 2e46 696e  ot_path=self.Fin
-00047ad0: 6452 5028 292c 6465 7374 3d64 6573 742c  dRP(),dest=dest,
-00047ae0: 7375 625f 6469 723d 7375 625f 6469 7229  sub_dir=sub_dir)
-00047af0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00047b00: 2020 2020 2020 2020 2020 2066 6f72 2066             for f
-00047b10: 696c 6570 6174 6820 696e 2070 6174 683a  ilepath in path:
-00047b20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00047b30: 2066 696c 6552 463d 7365 6c66 2e46 696e   fileRF=self.Fin
-00047b40: 6452 5028 6669 6c65 7061 7468 290a 2020  dRP(filepath).  
-00047b50: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00047b60: 2069 7369 6e73 7461 6e63 6528 6669 6c65   isinstance(file
-00047b70: 5246 2c74 7570 6c65 293a 0a20 2020 2020  RF,tuple):.     
-00047b80: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00047b90: 6f6f 745f 7061 7468 3d5b 6669 6c65 5246  oot_path=[fileRF
-00047ba0: 5b30 5d5d 0a20 2020 2020 2020 2020 2020  [0]].           
-00047bb0: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
-00047bc0: 653d 6669 6c65 5246 5b31 5d0a 2020 2020  e=fileRF[1].    
-00047bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047be0: 7365 6c66 2e45 7874 7261 6374 526f 6f74  self.ExtractRoot
-00047bf0: 2872 6f6f 745f 7061 7468 3d72 6f6f 745f  (root_path=root_
-00047c00: 7061 7468 2c64 6972 7061 7468 3d66 696c  path,dirpath=fil
-00047c10: 656e 616d 652c 6465 7374 3d64 6573 742c  ename,dest=dest,
-00047c20: 7375 625f 6469 723d 7375 625f 6469 7229  sub_dir=sub_dir)
-00047c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00047c40: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-00047c50: 2866 696c 6552 462c 6c69 7374 293a 0a20  (fileRF,list):. 
-00047c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047c70: 2020 2073 656c 662e 4578 7472 6163 7452     self.ExtractR
-00047c80: 6f6f 7428 726f 6f74 5f70 6174 683d 6669  oot(root_path=fi
-00047c90: 6c65 5246 2c64 6573 743d 6465 7374 2c73  leRF,dest=dest,s
-00047ca0: 7562 5f64 6972 3d73 7562 5f64 6972 290a  ub_dir=sub_dir).
-00047cb0: 0a20 2020 2064 6566 2053 6176 6528 7365  .    def Save(se
-00047cc0: 6c66 2c66 696c 656e 616d 6529 3a0a 2020  lf,filename):.  
-00047cd0: 2020 2020 2020 7076 3d62 2733 270a 2020        pv=b'3'.  
-00047ce0: 2020 2020 2020 6966 2050 7956 6572 2832        if PyVer(2
-00047cf0: 293a 2070 763d 6227 3227 0a20 2020 2020  ): pv=b'2'.     
-00047d00: 2020 2073 656c 662e 5277 2866 696c 656e     self.Rw(filen
-00047d10: 616d 652c 6461 7461 3d70 762b 436f 6d70  ame,data=pv+Comp
-00047d20: 7265 7373 2870 6963 6b6c 652e 6475 6d70  ress(pickle.dump
-00047d30: 7328 7365 6c66 2e69 6e66 6f2c 7072 6f74  s(self.info,prot
-00047d40: 6f63 6f6c 3d32 292c 6d6f 6465 3d27 627a  ocol=2),mode='bz
-00047d50: 3227 2929 0a0a 2020 2020 6465 6620 4f70  2'))..    def Op
-00047d60: 656e 2873 656c 662c 6669 6c65 6e61 6d65  en(self,filename
-00047d70: 293a 0a20 2020 2020 2020 2069 6620 6e6f  ):.        if no
-00047d80: 7420 6f73 2e70 6174 682e 6973 6669 6c65  t os.path.isfile
-00047d90: 2866 696c 656e 616d 6529 3a0a 2020 2020  (filename):.    
-00047da0: 2020 2020 2020 2020 7072 696e 7428 277b          print('{
-00047db0: 7d20 6e6f 7420 666f 756e 6427 2e66 6f72  } not found'.for
-00047dc0: 6d61 7428 6669 6c65 6e61 6d65 2929 0a20  mat(filename)). 
-00047dd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00047de0: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-00047df0: 6461 7461 3d73 656c 662e 5277 2866 696c  data=self.Rw(fil
-00047e00: 656e 616d 6529 0a20 2020 2020 2020 2069  ename).        i
-00047e10: 6620 6461 7461 5b30 5d3a 0a20 2020 2020  f data[0]:.     
-00047e20: 2020 2020 2020 2070 763d 6461 7461 5b31         pv=data[1
-00047e30: 5d5b 305d 0a20 2020 2020 2020 2020 2020  ][0].           
-00047e40: 2069 6620 7076 203d 3d20 2733 2720 616e   if pv == '3' an
-00047e50: 6420 5079 5665 7228 3229 3a0a 2020 2020  d PyVer(2):.    
-00047e60: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00047e70: 7428 2754 6865 2064 6174 6120 7665 7273  t('The data vers
-00047e80: 696f 6e20 6973 206e 6f74 206d 6174 6368  ion is not match
-00047e90: 6564 2e20 506c 6561 7365 2075 7365 2050  ed. Please use P
-00047ea0: 7974 686f 6e33 2729 0a20 2020 2020 2020  ython3').       
-00047eb0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00047ec0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
-00047ed0: 2020 2320 6465 636f 6d70 7265 7373 2064    # decompress d
-00047ee0: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
-00047ef0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-00047f00: 2020 2020 2064 6364 6174 613d 4465 636f       dcdata=Deco
-00047f10: 6d70 7265 7373 2864 6174 615b 315d 5b31  mpress(data[1][1
-00047f20: 3a5d 2c6d 6f64 653d 2762 7a32 2729 0a20  :],mode='bz2'). 
-00047f30: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-00047f40: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00047f50: 2020 2070 7269 6e74 2827 5468 6973 2069     print('This i
-00047f60: 7320 6e6f 7420 4b46 494c 4520 666f 726d  s not KFILE form
-00047f70: 6174 2729 0a20 2020 2020 2020 2020 2020  at').           
-00047f80: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00047f90: 650a 2020 2020 2020 2020 2020 2020 7472  e.            tr
-00047fa0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00047fb0: 2020 2073 656c 662e 696e 666f 3d70 6963     self.info=pic
-00047fc0: 6b6c 652e 6c6f 6164 7328 6463 6461 7461  kle.loads(dcdata
-00047fd0: 2920 2320 4c6f 6164 2064 6174 610a 2020  ) # Load data.  
-00047fe0: 2020 2020 2020 2020 2020 6578 6365 7074            except
-00047ff0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00048000: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-00048010: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00048020: 696e 666f 3d70 6963 6b6c 652e 6c6f 6164  info=pickle.load
-00048030: 7328 6463 6461 7461 2c65 6e63 6f64 696e  s(dcdata,encodin
-00048040: 673d 276c 6174 696e 3127 2920 2320 436f  g='latin1') # Co
-00048050: 6e76 6572 7420 3220 746f 2033 2066 6f72  nvert 2 to 3 for
-00048060: 6d61 740a 2020 2020 2020 2020 2020 2020  mat.            
-00048070: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
-00048080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048090: 7072 696e 7428 2754 6869 7320 6973 206e  print('This is n
-000480a0: 6f74 204b 4649 4c45 2066 6f72 6d61 7427  ot KFILE format'
-000480b0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000480c0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-000480d0: 7365 0a20 2020 2020 2020 2065 6c73 653a  se.        else:
-000480e0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-000480f0: 6e74 2827 4361 6e20 6e6f 7420 7265 6164  nt('Can not read
-00048100: 207b 7d27 2e66 6f72 6d61 7428 6669 6c65   {}'.format(file
-00048110: 6e61 6d65 2929 0a20 2020 2020 2020 2020  name)).         
-00048120: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
-00048130: 0a63 6c61 7373 2054 5259 3a0a 2020 2020  .class TRY:.    
-00048140: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-00048150: 662c 6175 746f 3d4e 6f6e 652c 6c6f 6766  f,auto=None,logf
-00048160: 696c 653d 4e6f 6e65 2c6c 6f67 5f61 6c6c  ile=None,log_all
-00048170: 3d46 616c 7365 2c65 7272 5f73 6372 6565  =False,err_scree
-00048180: 6e3d 4661 6c73 652c 6572 725f 6578 6974  n=False,err_exit
-00048190: 3d46 616c 7365 2c64 6566 6175 6c74 3d4e  =False,default=N
-000481a0: 6f6e 652c 6c6f 673d 4e6f 6e65 293a 0a20  one,log=None):. 
-000481b0: 2020 2020 2020 2073 656c 662e 6175 746f         self.auto
-000481c0: 3d61 7574 6f20 2354 7275 653a 2041 6c6c  =auto #True: All
-000481d0: 2061 7574 6f2c 204e 6f6e 653a 2064 6566   auto, None: def
-000481e0: 6175 6c74 7320 6175 746f 2c20 4661 6c73  aults auto, Fals
-000481f0: 653a 206e 6f74 2075 7365 0a20 2020 2020  e: not use.     
-00048200: 2020 2073 656c 662e 6c6f 6766 696c 653d     self.logfile=
-00048210: 6c6f 6766 696c 650a 2020 2020 2020 2020  logfile.        
-00048220: 7365 6c66 2e6c 6f67 5f61 6c6c 3d6c 6f67  self.log_all=log
-00048230: 5f61 6c6c 0a20 2020 2020 2020 2073 656c  _all.        sel
-00048240: 662e 6c6f 673d 6c6f 670a 2020 2020 2020  f.log=log.      
-00048250: 2020 7365 6c66 2e65 7272 5f65 7869 743d    self.err_exit=
-00048260: 6572 725f 6578 6974 0a20 2020 2020 2020  err_exit.       
-00048270: 2073 656c 662e 6572 725f 7363 7265 656e   self.err_screen
-00048280: 3d54 7275 6520 6966 2065 7272 5f65 7869  =True if err_exi
-00048290: 7420 656c 7365 2065 7272 5f73 6372 6565  t else err_scree
-000482a0: 6e0a 2020 2020 2020 2020 0a20 2020 2020  n.        .     
-000482b0: 2020 2073 656c 662e 7263 3d4e 6f6e 6520     self.rc=None 
-000482c0: 234e 6f6e 653a 206e 6f74 2072 756e 2c20  #None: not run, 
-000482d0: 4661 6c73 653a 2073 6f6d 6574 6869 6e67  False: something
-000482e0: 2065 7272 6f72 2c20 5472 7565 3a20 7275   error, True: ru
-000482f0: 6e20 6675 6e63 7469 6f6e 0a20 2020 2020  n function.     
-00048300: 2020 2073 656c 662e 7265 7375 6c74 3d64     self.result=d
-00048310: 6566 6175 6c74 0a20 2020 2020 2020 2073  efault.        s
-00048320: 656c 662e 6572 726f 723d 4e6f 6e65 0a0a  elf.error=None..
-00048330: 2020 2020 6465 6620 5f5f 7265 7072 5f5f      def __repr__
-00048340: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00048350: 6966 2073 656c 662e 7265 7375 6c74 3a0a  if self.result:.
-00048360: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00048370: 726e 2053 7472 2873 656c 662e 7265 7375  rn Str(self.resu
-00048380: 6c74 290a 2020 2020 2020 2020 7265 7475  lt).        retu
-00048390: 726e 2027 270a 0a20 2020 2064 6566 2072  rn ''..    def r
-000483a0: 756e 2873 656c 662c 6675 6e63 2c2a 696e  un(self,func,*in
-000483b0: 7073 2c2a 2a6f 7074 7329 3a0a 2020 2020  ps,**opts):.    
-000483c0: 2020 2020 2369 6620 5479 7065 2866 756e      #if Type(fun
-000483d0: 632c 2766 756e 6374 696f 6e27 293a 0a20  c,'function'):. 
-000483e0: 2020 2020 2020 2069 6620 4973 4675 6e63         if IsFunc
-000483f0: 7469 6f6e 2866 756e 632c 6275 696c 7469  tion(func,builti
-00048400: 6e3d 5472 7565 293a 0a20 2020 2020 2020  n=True):.       
-00048410: 2020 2020 2061 7267 3d41 7267 7328 6675       arg=Args(fu
-00048420: 6e63 290a 2020 2020 2020 2020 2020 2020  nc).            
-00048430: 6966 2073 656c 662e 6c6f 675f 616c 6c3a  if self.log_all:
-00048440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048450: 2070 7269 6e74 6628 2754 7279 2046 756e   printf('Try Fun
-00048460: 6374 696f 6e3a 207b 7d7b 7d5c 6e52 6563  ction: {}{}\nRec
-00048470: 6976 6564 3a20 7b7d 2c20 7b7d 272e 666f  ived: {}, {}'.fo
-00048480: 726d 6174 2866 756e 632e 5f5f 6e61 6d65  rmat(func.__name
-00048490: 5f5f 2c46 756e 6374 696f 6e41 7267 7328  __,FunctionArgs(
-000484a0: 6675 6e63 2c6d 6f64 653d 2773 7472 696e  func,mode='strin
-000484b0: 6727 292c 696e 7073 2c6f 7074 7329 2c64  g'),inps,opts),d
-000484c0: 6174 653d 5472 7565 2c63 616c 6c65 725f  ate=True,caller_
-000484d0: 7472 6565 3d54 7275 652c 6361 6c6c 6572  tree=True,caller
-000484e0: 5f70 6172 656e 743d 2731 2d35 272c 6361  _parent='1-5',ca
-000484f0: 6c6c 6572 5f66 696c 656e 616d 653d 5472  ller_filename=Tr
-00048500: 7565 2c63 616c 6c65 725f 6c69 6e65 5f6e  ue,caller_line_n
-00048510: 756d 6265 723d 5472 7565 2c6c 6f67 6669  umber=True,logfi
-00048520: 6c65 3d73 656c 662e 6c6f 6766 696c 652c  le=self.logfile,
-00048530: 6c6f 673d 7365 6c66 2e6c 6f67 2c64 7370  log=self.log,dsp
-00048540: 3d27 6627 2069 6620 7365 6c66 2e6c 6f67  ='f' if self.log
-00048550: 6669 6c65 2065 6c73 6520 2761 2729 0a0a  file else 'a')..
-00048560: 2020 2020 2020 2020 2020 2020 6e69 6e70              ninp
-00048570: 733d 5b5d 0a20 2020 2020 2020 2020 2020  s=[].           
-00048580: 206e 6f70 7473 3d7b 7d0a 2020 2020 2020   nopts={}.      
-00048590: 2020 2020 2020 6966 2073 656c 662e 6175        if self.au
-000485a0: 746f 2069 7320 6e6f 7420 4661 6c73 653a  to is not False:
-000485b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000485c0: 206e 696e 7073 5f6e 3d30 0a20 2020 2020   ninps_n=0.     
-000485d0: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
-000485e0: 5f6f 3d30 0a20 2020 2020 2020 2020 2020  _o=0.           
-000485f0: 2020 2020 206f 7074 735f 693d 6c69 7374       opts_i=list
-00048600: 286f 7074 732e 6974 656d 7328 2929 0a20  (opts.items()). 
-00048610: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00048620: 6869 6c65 206c 656e 2861 7267 2e67 6574  hile len(arg.get
-00048630: 2827 6172 6773 272c 5b5d 2929 203e 206e  ('args',[])) > n
-00048640: 696e 7073 5f6e 3a0a 2020 2020 2020 2020  inps_n:.        
-00048650: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00048660: 696e 7073 5f6e 203c 206c 656e 2869 6e70  inps_n < len(inp
-00048670: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
-00048680: 2020 2020 2020 2020 2020 2020 6e69 6e70              ninp
-00048690: 732e 6170 7065 6e64 2869 6e70 735b 6e69  s.append(inps[ni
-000486a0: 6e70 735f 6e5d 290a 2020 2020 2020 2020  nps_n]).        
-000486b0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-000486c0: 2073 656c 662e 6175 746f 2069 7320 5472   self.auto is Tr
-000486d0: 7565 2061 6e64 206e 696e 7073 5f6e 203c  ue and ninps_n <
-000486e0: 206c 656e 2869 6e70 7329 2b6c 656e 286f   len(inps)+len(o
-000486f0: 7074 7329 3a0a 2020 2020 2020 2020 2020  pts):.          
-00048700: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00048710: 206f 7074 735f 695b 6e69 6e70 735f 6f5d   opts_i[ninps_o]
-00048720: 5b30 5d20 6e6f 7420 696e 2061 7267 2e67  [0] not in arg.g
-00048730: 6574 2827 6465 6661 756c 7473 272c 7b7d  et('defaults',{}
-00048740: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00048750: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00048760: 696e 7073 2e61 7070 656e 6428 6f70 7473  inps.append(opts
-00048770: 5f69 5b6e 696e 7073 5f6f 5d5b 315d 290a  _i[ninps_o][1]).
-00048780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048790: 2020 2020 2020 2020 2020 2020 6e69 6e70              ninp
-000487a0: 735f 6f2b 3d31 0a20 2020 2020 2020 2020  s_o+=1.         
-000487b0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000487c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000487d0: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-000487e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000487f0: 2020 206e 696e 7073 5f6e 2b3d 310a 2020     ninps_n+=1.  
-00048800: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00048810: 2061 7267 2e67 6574 2827 7661 7261 7267   arg.get('vararg
-00048820: 7327 293a 0a20 2020 2020 2020 2020 2020  s'):.           
-00048830: 2020 2020 2020 2020 206e 696e 7073 3d6e           ninps=n
-00048840: 696e 7073 2b69 6e70 735b 6e69 6e70 735f  inps+inps[ninps_
-00048850: 6e3a 5d0a 2020 2020 2020 2020 2020 2020  n:].            
-00048860: 2020 2020 2020 2020 6e69 6e70 735f 6e3d          ninps_n=
-00048870: 6c65 6e28 696e 7073 290a 2020 2020 2020  len(inps).      
-00048880: 2020 2020 2020 2020 2020 6e6f 5f69 6e70            no_inp
-00048890: 733d 4661 6c73 650a 2020 2020 2020 2020  s=False.        
-000488a0: 2020 2020 2020 2020 6966 206e 696e 7073          if ninps
-000488b0: 5f6f 203e 2030 203a 206f 7074 733d 6469  _o > 0 : opts=di
-000488c0: 6374 286f 7074 735f 695b 6e69 6e70 735f  ct(opts_i[ninps_
-000488d0: 6f3a 5d29 0a20 2020 2020 2020 2020 2020  o:]).           
-000488e0: 2020 2020 2066 6f72 206b 2069 6e20 6172       for k in ar
-000488f0: 672e 6765 7428 2764 6566 6175 6c74 7327  g.get('defaults'
-00048900: 2c7b 7d29 3a0a 2020 2020 2020 2020 2020  ,{}):.          
-00048910: 2020 2020 2020 2020 2020 6966 206b 2069            if k i
-00048920: 6e20 6f70 7473 3a0a 2020 2020 2020 2020  n opts:.        
-00048930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048940: 6e6f 7074 735b 6b5d 3d6f 7074 732e 706f  nopts[k]=opts.po
-00048950: 7028 6b29 0a20 2020 2020 2020 2020 2020  p(k).           
-00048960: 2020 2020 2020 2020 2020 2020 206e 6f5f               no_
-00048970: 696e 7073 3d54 7275 650a 2020 2020 2020  inps=True.      
-00048980: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00048990: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000489a0: 2020 2020 2020 2020 2020 2020 2320 4669              # Fi
-000489b0: 6c6c 2069 6e20 746f 2069 6e70 7320 666f  ll in to inps fo
-000489c0: 7220 6465 6661 756c 7420 7769 7468 2065  r default with e
-000489d0: 7874 7261 2072 656d 6169 6e65 6420 696e  xtra remained in
-000489e0: 7073 0a20 2020 2020 2020 2020 2020 2020  ps.             
-000489f0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00048a00: 7420 6e6f 5f69 6e70 7320 616e 6420 6e69  t no_inps and ni
-00048a10: 6e70 735f 6e20 3c20 6c65 6e28 696e 7073  nps_n < len(inps
-00048a20: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00048a30: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00048a40: 696e 7073 2e61 7070 656e 6428 696e 7073  inps.append(inps
-00048a50: 5b6e 696e 7073 5f6e 5d29 0a20 2020 2020  [ninps_n]).     
-00048a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048a70: 2020 2020 2020 206e 696e 7073 5f6e 2b3d         ninps_n+=
-00048a80: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-00048a90: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00048aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048ab0: 2020 2020 2020 2020 2020 2020 6e6f 7074              nopt
-00048ac0: 735b 6b5d 3d61 7267 2e67 6574 2827 6465  s[k]=arg.get('de
-00048ad0: 6661 756c 7473 2729 2e67 6574 286b 290a  faults').get(k).
-00048ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048af0: 2020 2020 2020 2020 2020 2020 6e6f 5f69              no_i
-00048b00: 6e70 733d 5472 7565 0a20 2020 2020 2020  nps=True.       
-00048b10: 2020 2020 2020 2020 2069 6620 6172 672e           if arg.
-00048b20: 6765 7428 276b 6579 776f 7264 7327 2920  get('keywords') 
-00048b30: 616e 6420 6f70 7473 3a0a 2020 2020 2020  and opts:.      
-00048b40: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
-00048b50: 7074 732e 7570 6461 7465 286f 7074 7329  pts.update(opts)
-00048b60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048b70: 2069 6620 7365 6c66 2e6c 6f67 5f61 6c6c   if self.log_all
-00048b80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00048b90: 2020 2020 2020 7072 696e 7466 2827 4e65        printf('Ne
-00048ba0: 7720 496e 7075 7473 3a20 7b7d 207b 7d27  w Inputs: {} {}'
-00048bb0: 2e66 6f72 6d61 7428 6e69 6e70 732c 6e6f  .format(ninps,no
-00048bc0: 7074 7329 2c64 6174 653d 5472 7565 2c6c  pts),date=True,l
-00048bd0: 6f67 6669 6c65 3d73 656c 662e 6c6f 6766  ogfile=self.logf
-00048be0: 696c 652c 6c6f 673d 7365 6c66 2e6c 6f67  ile,log=self.log
-00048bf0: 2c64 7370 3d27 6627 2069 6620 7365 6c66  ,dsp='f' if self
-00048c00: 2e6c 6f67 6669 6c65 2065 6c73 6520 2761  .logfile else 'a
-00048c10: 2729 0a20 2020 2020 2020 2020 2020 2074  ').            t
-00048c20: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00048c30: 2020 2020 7365 6c66 2e72 633d 5472 7565      self.rc=True
-00048c40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048c50: 2069 6620 7365 6c66 2e61 7574 6f20 6973   if self.auto is
-00048c60: 2046 616c 7365 3a0a 2020 2020 2020 2020   False:.        
-00048c70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00048c80: 2e72 6573 756c 743d 6675 6e63 282a 696e  .result=func(*in
-00048c90: 7073 2c2a 2a6f 7074 7329 0a20 2020 2020  ps,**opts).     
-00048ca0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00048cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048cc0: 2020 2020 2069 6620 6e6f 7420 6172 6720       if not arg 
-00048cd0: 616e 6420 7479 7065 2866 756e 6329 2e5f  and type(func)._
-00048ce0: 5f6e 616d 655f 5f20 3d3d 2027 6275 696c  _name__ == 'buil
-00048cf0: 7469 6e5f 6675 6e63 7469 6f6e 5f6f 725f  tin_function_or_
-00048d00: 6d65 7468 6f64 273a 0a20 2020 2020 2020  method':.       
-00048d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048d20: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00046210: 2020 6966 2039 3c3d 2076 616c 5f6c 656e    if 9<= val_len
+00046220: 203c 3d31 303a 0a20 2020 2020 2020 2020   <=10:.         
+00046230: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00046240: 6620 7661 6c5f 6c65 6e20 3d3d 2031 3020  f val_len == 10 
+00046250: 616e 6420 7661 6c5b 305d 2069 6e20 5b27  and val[0] in ['
+00046260: 2d27 2c27 6427 2c27 7327 5d3a 0a20 2020  -','d','s']:.   
+00046270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046280: 2020 2020 2020 2020 2076 616c 3d76 616c           val=val
+00046290: 5b31 3a5d 0a20 2020 2020 2020 2020 2020  [1:].           
+000462a0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000462b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000462c0: 2020 2020 2020 2053 7464 4572 7228 2742         StdErr('B
+000462d0: 6164 2070 6572 6d69 7373 696f 6e20 6c65  ad permission le
+000462e0: 6e67 7468 2729 0a20 2020 2020 2020 2020  ngth').         
+000462f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00046300: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+00046310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046320: 2020 6966 206e 6f74 2061 6c6c 2876 616c    if not all(val
+00046330: 5b6b 5d20 696e 2027 7277 2d27 2066 6f72  [k] in 'rw-' for
+00046340: 206b 2069 6e20 5b30 2c31 2c33 2c34 2c36   k in [0,1,3,4,6
+00046350: 2c37 5d29 3a0a 2020 2020 2020 2020 2020  ,7]):.          
+00046360: 2020 2020 2020 2020 2020 2020 2020 5374                St
+00046370: 6445 7272 2827 4261 6420 7065 726d 6973  dErr('Bad permis
+00046380: 7369 6f6e 2066 6f72 6d61 7420 2872 6561  sion format (rea
+00046390: 642d 7772 6974 6529 2729 0a20 2020 2020  d-write)').     
+000463a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000463b0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
+000463c0: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+000463d0: 2020 2020 2020 6966 206e 6f74 2061 6c6c        if not all
+000463e0: 2876 616c 5b6b 5d20 696e 2027 7873 2d27  (val[k] in 'xs-'
+000463f0: 2066 6f72 206b 2069 6e20 5b32 2c35 5d29   for k in [2,5])
+00046400: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00046410: 2020 2020 2020 2020 2020 5374 6445 7272            StdErr
+00046420: 2827 4261 6420 7065 726d 6973 7369 6f6e  ('Bad permission
+00046430: 2066 6f72 6d61 7420 2865 7865 6375 7465   format (execute
+00046440: 2927 290a 2020 2020 2020 2020 2020 2020  )').            
+00046450: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00046460: 726e 2064 6566 6175 6c74 0a20 2020 2020  rn default.     
+00046470: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00046480: 6620 7661 6c5b 385d 206e 6f74 2069 6e20  f val[8] not in 
+00046490: 2778 742d 273a 0a20 2020 2020 2020 2020  'xt-':.         
+000464a0: 2020 2020 2020 2020 2020 2020 2020 2053                 S
+000464b0: 7464 4572 7228 2027 4261 6420 7065 726d  tdErr( 'Bad perm
+000464c0: 6973 7369 6f6e 2066 6f72 6d61 7420 2865  ission format (e
+000464d0: 7865 6375 7465 206f 7468 6572 2927 290a  xecute other)').
+000464e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000464f0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+00046500: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
+00046510: 2020 2020 2020 2020 2020 206d 203d 2030             m = 0
+00046520: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046530: 2020 2020 2069 6620 7661 6c5b 305d 203d       if val[0] =
+00046540: 3d20 2772 273a 206d 207c 3d20 7374 6174  = 'r': m |= stat
+00046550: 2e53 5f49 5255 5352 0a20 2020 2020 2020  .S_IRUSR.       
+00046560: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00046570: 7661 6c5b 315d 203d 3d20 2777 273a 206d  val[1] == 'w': m
+00046580: 207c 3d20 7374 6174 2e53 5f49 5755 5352   |= stat.S_IWUSR
+00046590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000465a0: 2020 2020 2069 6620 7661 6c5b 325d 203d       if val[2] =
+000465b0: 3d20 2778 273a 206d 207c 3d20 7374 6174  = 'x': m |= stat
+000465c0: 2e53 5f49 5855 5352 0a20 2020 2020 2020  .S_IXUSR.       
+000465d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000465e0: 7661 6c5b 325d 203d 3d20 2773 273a 206d  val[2] == 's': m
+000465f0: 207c 3d20 7374 6174 2e53 5f49 5855 5352   |= stat.S_IXUSR
+00046600: 207c 2073 7461 742e 535f 4953 5549 440a   | stat.S_ISUID.
+00046610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046620: 2020 2020 2069 6620 7661 6c5b 335d 203d       if val[3] =
+00046630: 3d20 2772 273a 206d 207c 3d20 7374 6174  = 'r': m |= stat
+00046640: 2e53 5f49 5247 5250 0a20 2020 2020 2020  .S_IRGRP.       
+00046650: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00046660: 7661 6c5b 345d 203d 3d20 2777 273a 206d  val[4] == 'w': m
+00046670: 207c 3d20 7374 6174 2e53 5f49 5747 5250   |= stat.S_IWGRP
+00046680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046690: 2020 2020 2069 6620 7661 6c5b 355d 203d       if val[5] =
+000466a0: 3d20 2778 273a 206d 207c 3d20 7374 6174  = 'x': m |= stat
+000466b0: 2e53 5f49 5847 5250 0a20 2020 2020 2020  .S_IXGRP.       
+000466c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000466d0: 7661 6c5b 355d 203d 3d20 2773 273a 206d  val[5] == 's': m
+000466e0: 207c 3d20 7374 6174 2e53 5f49 5847 5250   |= stat.S_IXGRP
+000466f0: 207c 2073 7461 742e 535f 4953 4749 440a   | stat.S_ISGID.
+00046700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046710: 2020 2020 2069 6620 7661 6c5b 365d 203d       if val[6] =
+00046720: 3d20 2772 273a 206d 207c 3d20 7374 6174  = 'r': m |= stat
+00046730: 2e53 5f49 524f 5448 0a20 2020 2020 2020  .S_IROTH.       
+00046740: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00046750: 7661 6c5b 375d 203d 3d20 2777 273a 206d  val[7] == 'w': m
+00046760: 207c 3d20 7374 6174 2e53 5f49 574f 5448   |= stat.S_IWOTH
+00046770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046780: 2020 2020 2069 6620 7661 6c5b 385d 203d       if val[8] =
+00046790: 3d20 2778 273a 206d 207c 3d20 7374 6174  = 'x': m |= stat
+000467a0: 2e53 5f49 584f 5448 0a20 2020 2020 2020  .S_IXOTH.       
+000467b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000467c0: 7661 6c5b 385d 203d 3d20 2774 273a 206d  val[8] == 't': m
+000467d0: 207c 3d20 7374 6174 2e53 5f49 584f 5448   |= stat.S_IXOTH
+000467e0: 207c 2073 7461 742e 535f 4953 5654 580a   | stat.S_ISVTX.
+000467f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046800: 2020 2020 7265 7475 726e 205f 6d6f 6465      return _mode
+00046810: 5f28 6f63 7428 6d29 2c6d 6f64 6529 0a20  _(oct(m),mode). 
+00046820: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+00046830: 6661 756c 740a 0a20 2020 2023 2046 696e  fault..    # Fin
+00046840: 6420 6669 6c65 6e61 6d65 2773 2072 6f6f  d filename's roo
+00046850: 7420 7061 7468 2061 6e64 2066 696c 656e  t path and filen
+00046860: 616d 6520 6163 636f 7264 696e 6720 746f  ame according to
+00046870: 2074 6865 2064 620a 2020 2020 6465 6620   the db.    def 
+00046880: 4669 6e64 5250 2873 656c 662c 6669 6c65  FindRP(self,file
+00046890: 6e61 6d65 3d4e 6f6e 652c 6465 6661 756c  name=None,defaul
+000468a0: 743d 4e6f 6e65 293a 0a20 2020 2020 2020  t=None):.       
+000468b0: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
+000468c0: 696c 656e 616d 652c 7374 7229 2061 6e64  ilename,str) and
+000468d0: 2073 656c 662e 696e 666f 3a0a 2020 2020   self.info:.    
+000468e0: 2020 2020 2020 2020 696e 666f 5f6b 6579          info_key
+000468f0: 733d 6c69 7374 2873 656c 662e 696e 666f  s=list(self.info
+00046900: 2e6b 6579 7328 2929 0a20 2020 2020 2020  .keys()).       
+00046910: 2020 2020 2069 6e66 6f5f 6e75 6d3d 6c65       info_num=le
+00046920: 6e28 696e 666f 5f6b 6579 7329 0a20 2020  n(info_keys).   
+00046930: 2020 2020 2020 2020 2069 6620 6669 6c65           if file
+00046940: 6e61 6d65 5b30 5d20 213d 2027 2f27 3a0a  name[0] != '/':.
+00046950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046960: 6966 2069 6e66 6f5f 6e75 6d20 3d3d 2031  if info_num == 1
+00046970: 3a20 7265 7475 726e 2069 6e66 6f5f 6b65  : return info_ke
+00046980: 7973 5b30 5d0a 2020 2020 2020 2020 2020  ys[0].          
+00046990: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+000469a0: 662e 726f 6f74 5f70 6174 680a 2020 2020  f.root_path.    
+000469b0: 2020 2020 2020 2020 6161 3d27 2f27 0a20          aa='/'. 
+000469c0: 2020 2020 2020 2020 2020 2066 696c 656e             filen
+000469d0: 616d 655f 613d 6669 6c65 6e61 6d65 2e73  ame_a=filename.s
+000469e0: 706c 6974 2827 2f27 290a 2020 2020 2020  plit('/').      
+000469f0: 2020 2020 2020 666f 7220 6969 2069 6e20        for ii in 
+00046a00: 7261 6e67 6528 312c 6c65 6e28 6669 6c65  range(1,len(file
+00046a10: 6e61 6d65 5f61 2929 3a0a 2020 2020 2020  name_a)):.      
+00046a20: 2020 2020 2020 2020 2020 6161 3d50 6174            aa=Pat
+00046a30: 6828 6161 2c66 696c 656e 616d 655f 615b  h(aa,filename_a[
+00046a40: 6969 5d29 0a20 2020 2020 2020 2020 2020  ii]).           
+00046a50: 2020 2020 2069 6620 6161 2069 6e20 696e       if aa in in
+00046a60: 666f 5f6b 6579 733a 0a20 2020 2020 2020  fo_keys:.       
+00046a70: 2020 2020 2020 2020 2020 2020 2023 7265               #re
+00046a80: 6d61 696e 5f70 6174 683d 272f 272e 6a6f  main_path='/'.jo
+00046a90: 696e 2866 696c 656e 616d 655f 615b 6969  in(filename_a[ii
+00046aa0: 2b31 3a5d 290a 2020 2020 2020 2020 2020  +1:]).          
+00046ab0: 2020 2020 2020 2020 2020 7265 6d61 696e            remain
+00046ac0: 5f70 6174 683d 4a6f 696e 2866 696c 656e  _path=Join(filen
+00046ad0: 616d 655f 615b 6969 2b31 3a5d 2c73 796d  ame_a[ii+1:],sym
+00046ae0: 626f 6c3d 272f 2729 0a20 2020 2020 2020  bol='/').       
+00046af0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00046b00: 696e 666f 5f6e 756d 203d 3d20 313a 2072  info_num == 1: r
+00046b10: 6574 7572 6e20 6161 2c72 656d 6169 6e5f  eturn aa,remain_
+00046b20: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
+00046b30: 2020 2020 2020 2020 2023 2069 6620 696e           # if in
+00046b40: 666f 2068 6173 206d 756c 7469 2072 6f6f  fo has multi roo
+00046b50: 7420 7061 7468 2074 6865 6e20 6368 6563  t path then chec
+00046b60: 6b20 6669 6c65 6e61 6d65 2069 6e20 7468  k filename in th
+00046b70: 6520 6462 206f 6620 6561 6368 2072 6f6f  e db of each roo
+00046b80: 745f 7061 7468 0a20 2020 2020 2020 2020  t_path.         
+00046b90: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00046ba0: 6c66 2e46 696c 6549 6e66 6f28 7265 6d61  lf.FileInfo(rema
+00046bb0: 696e 5f70 6174 682c 6161 293a 2072 6574  in_path,aa): ret
+00046bc0: 7572 6e20 6161 2c72 656d 6169 6e5f 7061  urn aa,remain_pa
+00046bd0: 7468 0a20 2020 2020 2020 2065 6c69 6620  th.        elif 
+00046be0: 7365 6c66 2e69 6e66 6f3a 0a20 2020 2020  self.info:.     
+00046bf0: 2020 2020 2020 2072 6574 7572 6e20 6c69         return li
+00046c00: 7374 2873 656c 662e 696e 666f 2e6b 6579  st(self.info.key
+00046c10: 7328 2929 0a20 2020 2020 2020 2072 6574  s()).        ret
+00046c20: 7572 6e20 6465 6661 756c 740a 0a20 2020  urn default..   
+00046c30: 2064 6566 2045 7874 7261 6374 526f 6f74   def ExtractRoot
+00046c40: 2873 656c 662c 2a2a 6f70 7473 293a 0a20  (self,**opts):. 
+00046c50: 2020 2020 2020 2072 6f6f 745f 7061 7468         root_path
+00046c60: 3d6f 7074 732e 6765 7428 2772 6f6f 745f  =opts.get('root_
+00046c70: 7061 7468 272c 5b5d 290a 2020 2020 2020  path',[]).      
+00046c80: 2020 6469 7270 6174 683d 6f70 7473 2e67    dirpath=opts.g
+00046c90: 6574 2827 6469 7270 6174 6827 290a 2020  et('dirpath').  
+00046ca0: 2020 2020 2020 7375 625f 6469 723d 6f70        sub_dir=op
+00046cb0: 7473 2e67 6574 2827 7375 625f 6469 7227  ts.get('sub_dir'
+00046cc0: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
+00046cd0: 6966 2069 7369 6e73 7461 6e63 6528 726f  if isinstance(ro
+00046ce0: 6f74 5f70 6174 682c 7374 7229 3a0a 2020  ot_path,str):.  
+00046cf0: 2020 2020 2020 2020 2020 726f 6f74 5f70            root_p
+00046d00: 6174 683d 5b72 6f6f 745f 7061 7468 5d0a  ath=[root_path].
+00046d10: 2020 2020 2020 2020 2369 6620 6e6f 7420          #if not 
+00046d20: 6f73 2e70 6174 682e 6973 6469 7228 6f70  os.path.isdir(op
+00046d30: 7473 2e67 6574 2827 6465 7374 2729 293a  ts.get('dest')):
+00046d40: 206f 732e 6d61 6b65 6469 7273 286f 7074   os.makedirs(opt
+00046d50: 732e 6765 7428 2764 6573 7427 2929 0a20  s.get('dest')). 
+00046d60: 2020 2020 2020 2069 6620 7365 6c66 2e4d         if self.M
+00046d70: 6b64 6972 286f 7074 732e 6765 7428 2764  kdir(opts.get('d
+00046d80: 6573 7427 292c 666f 7263 653d 5472 7565  est'),force=True
+00046d90: 2920 6973 2046 616c 7365 3a20 7265 7475  ) is False: retu
+00046da0: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+00046db0: 2066 6f72 2072 7020 696e 2072 6f6f 745f   for rp in root_
+00046dc0: 7061 7468 3a0a 2020 2020 2020 2020 2020  path:.          
+00046dd0: 2020 6e65 775f 6465 7374 3d6f 7074 732e    new_dest=opts.
+00046de0: 6765 7428 2764 6573 7427 290a 2020 2020  get('dest').    
+00046df0: 2020 2020 2020 2020 6966 2064 6972 7061          if dirpa
+00046e00: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
+00046e10: 2020 2020 7274 3d73 656c 662e 4364 5061      rt=self.CdPa
+00046e20: 7468 2873 656c 662e 696e 666f 5b72 705d  th(self.info[rp]
+00046e30: 2c64 6972 7061 7468 290a 2020 2020 2020  ,dirpath).      
+00046e40: 2020 2020 2020 2020 2020 6966 2072 7420            if rt 
+00046e50: 6973 2046 616c 7365 3a0a 2020 2020 2020  is False:.      
+00046e60: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00046e70: 696e 7428 277b 7d20 6e6f 7420 666f 756e  int('{} not foun
+00046e80: 6427 2e66 6f72 6d61 7428 6469 7270 6174  d'.format(dirpat
+00046e90: 6829 290a 2020 2020 2020 2020 2020 2020  h)).            
+00046ea0: 2020 2020 2020 2020 7265 7475 726e 0a20          return. 
+00046eb0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00046ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046ed0: 2064 6972 7061 7468 3d27 270a 2020 2020   dirpath=''.    
+00046ee0: 2020 2020 2020 2020 2020 2020 7274 3d73              rt=s
+00046ef0: 656c 662e 696e 666f 5b72 705d 0a0a 2020  elf.info[rp]..  
+00046f00: 2020 2020 2020 2020 2020 7269 6e66 6f3d            rinfo=
+00046f10: 7274 2e67 6574 2827 2069 2027 2c7b 7d29  rt.get(' i ',{})
+00046f20: 0a20 2020 2020 2020 2020 2020 2072 7479  .            rty
+00046f30: 7065 3d72 696e 666f 2e67 6574 2827 7479  pe=rinfo.get('ty
+00046f40: 7065 2729 0a20 2020 2020 2020 2020 2020  pe').           
+00046f50: 2023 6469 723a 6469 7265 6374 6f72 792c   #dir:directory,
+00046f60: 4e6f 6e65 3a72 6f6f 7420 6469 7265 6374  None:root direct
+00046f70: 6f72 790a 2020 2020 2020 2020 2020 2020  ory.            
+00046f80: 6966 206e 6f74 2049 734e 6f6e 6528 7274  if not IsNone(rt
+00046f90: 7970 652c 6368 6b5f 7661 6c3d 5b27 6469  ype,chk_val=['di
+00046fa0: 7227 2c4e 6f6e 652c 2727 5d29 3a20 2320  r',None,'']): # 
+00046fb0: 4669 6c65 202f 204c 696e 6b0a 2020 2020  File / Link.    
+00046fc0: 2020 2020 2020 2020 2020 2020 6d79 6465              myde
+00046fd0: 7374 3d6f 732e 7061 7468 2e64 6972 6e61  st=os.path.dirna
+00046fe0: 6d65 2864 6972 7061 7468 290a 2020 2020  me(dirpath).    
+00046ff0: 2020 2020 2020 2020 2020 2020 6d79 6e61              myna
+00047000: 6d65 3d6f 732e 7061 7468 2e62 6173 656e  me=os.path.basen
+00047010: 616d 6528 6469 7270 6174 6829 0a20 2020  ame(dirpath).   
+00047020: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00047030: 6d79 6465 7374 3a0a 2020 2020 2020 2020  mydest:.        
+00047040: 2020 2020 2020 2020 2020 2020 6d79 6465              myde
+00047050: 7374 3d6f 732e 7061 7468 2e6a 6f69 6e28  st=os.path.join(
+00047060: 6e65 775f 6465 7374 2c6d 7964 6573 7429  new_dest,mydest)
+00047070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047080: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00047090: 2020 2020 2020 2020 2020 206d 7964 6573             mydes
+000470a0: 743d 6e65 775f 6465 7374 0a20 2020 2020  t=new_dest.     
+000470b0: 2020 2020 2020 2020 2020 2023 6966 206e             #if n
+000470c0: 6f74 206f 732e 7061 7468 2e69 7364 6972  ot os.path.isdir
+000470d0: 286d 7964 6573 7429 3a20 6f73 2e6d 616b  (mydest): os.mak
+000470e0: 6564 6972 7328 6d79 6465 7374 290a 2020  edirs(mydest).  
+000470f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00047100: 2073 656c 662e 4d6b 6469 7228 6d79 6465   self.Mkdir(myde
+00047110: 7374 2c66 6f72 6365 3d54 7275 652c 696e  st,force=True,in
+00047120: 666f 3d72 696e 666f 2920 6973 2046 616c  fo=rinfo) is Fal
+00047130: 7365 3a20 7265 7475 726e 2046 616c 7365  se: return False
+00047140: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047150: 2069 6620 7274 7970 6520 3d3d 2027 6c69   if rtype == 'li
+00047160: 6e6b 273a 0a20 2020 2020 2020 2020 2020  nk':.           
+00047170: 2020 2020 2020 2020 206f 732e 7379 6d6c           os.syml
+00047180: 696e 6b28 7269 6e66 6f5b 2764 6573 7427  ink(rinfo['dest'
+00047190: 5d2c 6f73 2e70 6174 682e 6a6f 696e 286d  ],os.path.join(m
+000471a0: 7964 6573 742c 6d79 6e61 6d65 2929 0a20  ydest,myname)). 
+000471b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000471c0: 2020 2073 656c 662e 5365 7449 6465 6e74     self.SetIdent
+000471d0: 6974 7928 6f73 2e70 6174 682e 6a6f 696e  ity(os.path.join
+000471e0: 286d 7964 6573 742c 6d79 6e61 6d65 292c  (mydest,myname),
+000471f0: 2a2a 7269 6e66 6f29 0a20 2020 2020 2020  **rinfo).       
+00047200: 2020 2020 2020 2020 2065 6c73 653a 2023           else: #
+00047210: 2046 696c 650a 2020 2020 2020 2020 2020   File.          
+00047220: 2020 2020 2020 2020 2020 6966 2027 6461            if 'da
+00047230: 7461 2720 696e 2072 743a 2073 656c 662e  ta' in rt: self.
+00047240: 5277 2850 6174 6828 6d79 6465 7374 2c6d  Rw(Path(mydest,m
+00047250: 796e 616d 6529 2c64 6174 613d 7274 5b27  yname),data=rt['
+00047260: 6461 7461 275d 2c66 696e 666f 3d72 696e  data'],finfo=rin
+00047270: 666f 290a 2020 2020 2020 2020 2020 2020  fo).            
+00047280: 2020 2020 2020 2020 656c 7365 3a20 7072          else: pr
+00047290: 696e 7428 277b 7d20 6669 6c65 2068 6176  int('{} file hav
+000472a0: 6520 6e6f 2064 6174 6127 2e66 6f72 6d61  e no data'.forma
+000472b0: 7428 6469 7270 6174 6829 290a 2320 2020  t(dirpath)).#   
+000472c0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000472d0: 662e 5365 7449 6465 6e74 6974 7928 6f73  f.SetIdentity(os
+000472e0: 2e70 6174 682e 6a6f 696e 286d 7964 6573  .path.join(mydes
+000472f0: 742c 6d79 6e61 6d65 292c 2a2a 7269 6e66  t,myname),**rinf
+00047300: 6f29 0a20 2020 2020 2020 2020 2020 2065  o).            e
+00047310: 6c73 653a 2023 2064 6972 6563 746f 7279  lse: # directory
+00047320: 206f 7220 726f 6f74 2044 420a 2020 2020   or root DB.    
+00047330: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00047340: 6969 2069 6e20 7274 3a0a 2020 2020 2020  ii in rt:.      
+00047350: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00047360: 2069 6920 3d3d 2027 2069 2027 3a20 636f   ii == ' i ': co
+00047370: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+00047380: 2020 2020 2020 2020 2020 2066 696e 666f             finfo
+00047390: 3d72 745b 6969 5d2e 6765 7428 2720 6920  =rt[ii].get(' i 
+000473a0: 272c 7b7d 290a 2020 2020 2020 2020 2020  ',{}).          
+000473b0: 2020 2020 2020 2020 2020 6674 7970 653d            ftype=
+000473c0: 6669 6e66 6f2e 6765 7428 2774 7970 6527  finfo.get('type'
+000473d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000473e0: 2020 2020 2020 6966 2066 7479 7065 203d        if ftype =
+000473f0: 3d20 2764 6972 273a 0a20 2020 2020 2020  = 'dir':.       
+00047400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047410: 206d 7964 6972 3d6f 732e 7061 7468 2e6a   mydir=os.path.j
+00047420: 6f69 6e28 6e65 775f 6465 7374 2c69 6929  oin(new_dest,ii)
+00047430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047440: 2020 2020 2020 2020 2073 656c 662e 4d6b           self.Mk
+00047450: 6469 7228 6d79 6469 722c 666f 7263 653d  dir(mydir,force=
+00047460: 5472 7565 2c69 6e66 6f3d 6669 6e66 6f29  True,info=finfo)
+00047470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047480: 2020 2020 2020 2020 2023 7365 6c66 2e53           #self.S
+00047490: 6574 4964 656e 7469 7479 286d 7964 6972  etIdentity(mydir
+000474a0: 2c2a 2a66 696e 666f 290a 2020 2020 2020  ,**finfo).      
+000474b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000474c0: 2020 2320 5375 6220 6469 7265 6374 6f72    # Sub director
+000474d0: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
+000474e0: 2020 2020 2020 2020 2020 6966 2073 7562            if sub
+000474f0: 5f64 6972 3a20 7365 6c66 2e45 7874 7261  _dir: self.Extra
+00047500: 6374 526f 6f74 2864 6972 7061 7468 3d6f  ctRoot(dirpath=o
+00047510: 732e 7061 7468 2e6a 6f69 6e28 6469 7270  s.path.join(dirp
+00047520: 6174 682c 6969 292c 726f 6f74 5f70 6174  ath,ii),root_pat
+00047530: 683d 7270 2c64 6573 743d 6f73 2e70 6174  h=rp,dest=os.pat
+00047540: 682e 6a6f 696e 286e 6577 5f64 6573 742c  h.join(new_dest,
+00047550: 6969 292c 7375 625f 6469 723d 7375 625f  ii),sub_dir=sub_
+00047560: 6469 7229 0a20 2020 2020 2020 2020 2020  dir).           
+00047570: 2020 2020 2020 2020 2020 2020 2023 6966               #if
+00047580: 2064 6d74 696d 6520 616e 6420 6461 7469   dmtime and dati
+00047590: 6d65 3a20 6f73 2e75 7469 6d65 286d 7964  me: os.utime(myd
+000475a0: 6972 2c28 6461 7469 6d65 2c64 6d74 696d  ir,(datime,dmtim
+000475b0: 6529 2920 2320 5469 6d65 2075 7064 6174  e)) # Time updat
+000475c0: 6520 6d75 7374 2062 6520 6174 206c 6173  e must be at las
+000475d0: 7420 6f72 6465 720a 2020 2020 2020 2020  t order.        
+000475e0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000475f0: 2066 7479 7065 203d 3d20 276c 696e 6b27   ftype == 'link'
+00047600: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00047610: 2020 2020 2020 2020 2020 6969 6d6d 3d6f            iimm=o
+00047620: 732e 7061 7468 2e6a 6f69 6e28 6e65 775f  s.path.join(new_
+00047630: 6465 7374 2c69 6929 0a20 2020 2020 2020  dest,ii).       
+00047640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047650: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
+00047660: 6578 6973 7473 2869 696d 6d29 3a0a 2020  exists(iimm):.  
+00047670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047680: 2020 2020 2020 2020 2020 6f73 2e73 796d            os.sym
+00047690: 6c69 6e6b 2866 696e 666f 5b27 6465 7374  link(finfo['dest
+000476a0: 275d 2c69 696d 6d29 0a20 2020 2020 2020  '],iimm).       
+000476b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000476c0: 2020 2020 2073 656c 662e 5365 7449 6465       self.SetIde
+000476d0: 6e74 6974 7928 6969 6d6d 2c2a 2a66 696e  ntity(iimm,**fin
+000476e0: 666f 290a 2020 2020 2020 2020 2020 2020  fo).            
+000476f0: 2020 2020 2020 2020 656c 7365 3a20 2320          else: # 
+00047700: 4669 6c65 0a20 2020 2020 2020 2020 2020  File.           
+00047710: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00047720: 2764 6174 6127 2069 6e20 7274 5b69 695d  'data' in rt[ii]
+00047730: 3a20 7365 6c66 2e52 7728 6f73 2e70 6174  : self.Rw(os.pat
+00047740: 682e 6a6f 696e 286e 6577 5f64 6573 742c  h.join(new_dest,
+00047750: 6969 292c 6461 7461 3d72 745b 6969 5d5b  ii),data=rt[ii][
+00047760: 2764 6174 6127 5d2c 6669 6e66 6f3d 6669  'data'],finfo=fi
+00047770: 6e66 6f29 0a20 2020 2020 2020 2020 2020  nfo).           
+00047780: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00047790: 653a 2070 7269 6e74 2827 7b7d 2066 696c  e: print('{} fil
+000477a0: 6520 6861 7665 206e 6f20 6461 7461 272e  e have no data'.
+000477b0: 666f 726d 6174 2869 6929 290a 0a20 2020  format(ii))..   
+000477c0: 2064 6566 204d 6b64 6972 2873 656c 662c   def Mkdir(self,
+000477d0: 7061 7468 2c66 6f72 6365 3d46 616c 7365  path,force=False
+000477e0: 2c69 6e66 6f3d 7b7d 293a 0a20 2020 2020  ,info={}):.     
+000477f0: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
+00047800: 616e 6365 2870 6174 682c 7374 7229 3a20  ance(path,str): 
+00047810: 7265 7475 726e 204e 6f6e 650a 2020 2020  return None.    
+00047820: 2020 2020 6966 206f 732e 7061 7468 2e65      if os.path.e
+00047830: 7869 7374 7328 7061 7468 293a 2072 6574  xists(path): ret
+00047840: 7572 6e20 4e6f 6e65 0a20 2020 2020 2020  urn None.       
+00047850: 2069 6620 666f 7263 653a 0a20 2020 2020   if force:.     
+00047860: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+00047870: 2020 2020 2020 2020 2020 2020 6f73 2e6d              os.m
+00047880: 616b 6564 6972 7328 7061 7468 290a 2020  akedirs(path).  
+00047890: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000478a0: 2069 7369 6e73 7461 6e63 6528 696e 666f   isinstance(info
+000478b0: 2c64 6963 7429 2061 6e64 2069 6e66 6f3a  ,dict) and info:
+000478c0: 2073 656c 662e 5365 7449 6465 6e74 6974   self.SetIdentit
+000478d0: 7928 7061 7468 2c2a 2a69 6e66 6f29 0a20  y(path,**info). 
+000478e0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+000478f0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00047900: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+00047910: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00047920: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00047930: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00047940: 732e 6d6b 6469 7228 7061 7468 290a 2020  s.mkdir(path).  
+00047950: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00047960: 2069 7369 6e73 7461 6e63 6528 696e 666f   isinstance(info
+00047970: 2c64 6963 7429 2061 6e64 2069 6e66 6f3a  ,dict) and info:
+00047980: 2073 656c 662e 5365 7449 6465 6e74 6974   self.SetIdentit
+00047990: 7928 7061 7468 2c2a 2a69 6e66 6f29 0a20  y(path,**info). 
+000479a0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+000479b0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+000479c0: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+000479d0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+000479e0: 7275 650a 0a20 2020 2064 6566 2053 6574  rue..    def Set
+000479f0: 4964 656e 7469 7479 2873 656c 662c 7061  Identity(self,pa
+00047a00: 7468 2c2a 2a6f 7074 7329 3a0a 2020 2020  th,**opts):.    
+00047a10: 2020 2020 6966 206f 732e 7061 7468 2e65      if os.path.e
+00047a20: 7869 7374 7328 7061 7468 293a 0a20 2020  xists(path):.   
+00047a30: 2020 2020 2020 2020 2063 686d 6f64 3d73           chmod=s
+00047a40: 656c 662e 4d6f 6465 286f 7074 732e 6765  elf.Mode(opts.ge
+00047a50: 7428 276d 6f64 6527 2c4e 6f6e 6529 290a  t('mode',None)).
+00047a60: 2020 2020 2020 2020 2020 2020 7569 643d              uid=
+00047a70: 6f70 7473 2e67 6574 2827 7569 6427 2c4e  opts.get('uid',N
+00047a80: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+00047a90: 2067 6964 3d6f 7074 732e 6765 7428 2767   gid=opts.get('g
+00047aa0: 6964 272c 4e6f 6e65 290a 2020 2020 2020  id',None).      
+00047ab0: 2020 2020 2020 6174 696d 653d 6f70 7473        atime=opts
+00047ac0: 2e67 6574 2827 6174 696d 6527 2c4e 6f6e  .get('atime',Non
+00047ad0: 6529 0a20 2020 2020 2020 2020 2020 206d  e).            m
+00047ae0: 7469 6d65 3d6f 7074 732e 6765 7428 276d  time=opts.get('m
+00047af0: 7469 6d65 272c 4e6f 6e65 290a 2020 2020  time',None).    
+00047b00: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00047b10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00047b20: 6368 6d6f 643a 206f 732e 6368 6d6f 6428  chmod: os.chmod(
+00047b30: 7061 7468 2c69 6e74 2863 686d 6f64 2c62  path,int(chmod,b
+00047b40: 6173 653d 3829 290a 2020 2020 2020 2020  ase=8)).        
+00047b50: 2020 2020 2020 2020 6966 2075 6964 2061          if uid a
+00047b60: 6e64 2067 6964 3a20 6f73 2e63 686f 776e  nd gid: os.chown
+00047b70: 2870 6174 682c 7569 642c 6769 6429 0a20  (path,uid,gid). 
+00047b80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00047b90: 6620 6d74 696d 6520 616e 6420 6174 696d  f mtime and atim
+00047ba0: 653a 206f 732e 7574 696d 6528 7061 7468  e: os.utime(path
+00047bb0: 2c28 6174 696d 652c 6d74 696d 6529 2920  ,(atime,mtime)) 
+00047bc0: 2320 5469 6d65 2075 7064 6174 6520 6d75  # Time update mu
+00047bd0: 7374 2062 6520 6174 206c 6173 7420 6f72  st be at last or
+00047be0: 6465 720a 2020 2020 2020 2020 2020 2020  der.            
+00047bf0: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+00047c00: 2020 2020 2020 2020 7061 7373 0a0a 2020          pass..  
+00047c10: 2020 6465 6620 4578 7472 6163 7428 7365    def Extract(se
+00047c20: 6c66 2c2a 7061 7468 2c2a 2a6f 7074 7329  lf,*path,**opts)
+00047c30: 3a0a 2020 2020 2020 2020 6465 7374 3d6f  :.        dest=o
+00047c40: 7074 732e 6765 7428 2764 6573 7427 2c4e  pts.get('dest',N
+00047c50: 6f6e 6529 0a20 2020 2020 2020 2072 6f6f  one).        roo
+00047c60: 745f 7061 7468 3d6f 7074 732e 6765 7428  t_path=opts.get(
+00047c70: 2772 6f6f 745f 7061 7468 272c 4e6f 6e65  'root_path',None
+00047c80: 290a 2020 2020 2020 2020 7375 625f 6469  ).        sub_di
+00047c90: 723d 6f70 7473 2e67 6574 2827 7375 625f  r=opts.get('sub_
+00047ca0: 6469 7227 2c46 616c 7365 290a 2020 2020  dir',False).    
+00047cb0: 2020 2020 6966 2049 734e 6f6e 6528 6465      if IsNone(de
+00047cc0: 7374 293a 2072 6574 7572 6e20 4661 6c73  st): return Fals
+00047cd0: 650a 2020 2020 2020 2020 6966 206e 6f74  e.        if not
+00047ce0: 2070 6174 683a 0a20 2020 2020 2020 2020   path:.         
+00047cf0: 2020 2073 656c 662e 4578 7472 6163 7452     self.ExtractR
+00047d00: 6f6f 7428 726f 6f74 5f70 6174 683d 7365  oot(root_path=se
+00047d10: 6c66 2e46 696e 6452 5028 292c 6465 7374  lf.FindRP(),dest
+00047d20: 3d64 6573 742c 7375 625f 6469 723d 7375  =dest,sub_dir=su
+00047d30: 625f 6469 7229 0a20 2020 2020 2020 2065  b_dir).        e
+00047d40: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00047d50: 2066 6f72 2066 696c 6570 6174 6820 696e   for filepath in
+00047d60: 2070 6174 683a 0a20 2020 2020 2020 2020   path:.         
+00047d70: 2020 2020 2020 2066 696c 6552 463d 7365         fileRF=se
+00047d80: 6c66 2e46 696e 6452 5028 6669 6c65 7061  lf.FindRP(filepa
+00047d90: 7468 290a 2020 2020 2020 2020 2020 2020  th).            
+00047da0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00047db0: 6528 6669 6c65 5246 2c74 7570 6c65 293a  e(fileRF,tuple):
+00047dc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047dd0: 2020 2020 2072 6f6f 745f 7061 7468 3d5b       root_path=[
+00047de0: 6669 6c65 5246 5b30 5d5d 0a20 2020 2020  fileRF[0]].     
+00047df0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00047e00: 696c 656e 616d 653d 6669 6c65 5246 5b31  ilename=fileRF[1
+00047e10: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00047e20: 2020 2020 2020 7365 6c66 2e45 7874 7261        self.Extra
+00047e30: 6374 526f 6f74 2872 6f6f 745f 7061 7468  ctRoot(root_path
+00047e40: 3d72 6f6f 745f 7061 7468 2c64 6972 7061  =root_path,dirpa
+00047e50: 7468 3d66 696c 656e 616d 652c 6465 7374  th=filename,dest
+00047e60: 3d64 6573 742c 7375 625f 6469 723d 7375  =dest,sub_dir=su
+00047e70: 625f 6469 7229 0a20 2020 2020 2020 2020  b_dir).         
+00047e80: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+00047e90: 7374 616e 6365 2866 696c 6552 462c 6c69  stance(fileRF,li
+00047ea0: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
+00047eb0: 2020 2020 2020 2020 2073 656c 662e 4578           self.Ex
+00047ec0: 7472 6163 7452 6f6f 7428 726f 6f74 5f70  tractRoot(root_p
+00047ed0: 6174 683d 6669 6c65 5246 2c64 6573 743d  ath=fileRF,dest=
+00047ee0: 6465 7374 2c73 7562 5f64 6972 3d73 7562  dest,sub_dir=sub
+00047ef0: 5f64 6972 290a 0a20 2020 2064 6566 2053  _dir)..    def S
+00047f00: 6176 6528 7365 6c66 2c66 696c 656e 616d  ave(self,filenam
+00047f10: 6529 3a0a 2020 2020 2020 2020 7076 3d62  e):.        pv=b
+00047f20: 2733 270a 2020 2020 2020 2020 6966 2050  '3'.        if P
+00047f30: 7956 6572 2832 293a 2070 763d 6227 3227  yVer(2): pv=b'2'
+00047f40: 0a20 2020 2020 2020 2073 656c 662e 5277  .        self.Rw
+00047f50: 2866 696c 656e 616d 652c 6461 7461 3d70  (filename,data=p
+00047f60: 762b 436f 6d70 7265 7373 2870 6963 6b6c  v+Compress(pickl
+00047f70: 652e 6475 6d70 7328 7365 6c66 2e69 6e66  e.dumps(self.inf
+00047f80: 6f2c 7072 6f74 6f63 6f6c 3d32 292c 6d6f  o,protocol=2),mo
+00047f90: 6465 3d27 627a 3227 2929 0a0a 2020 2020  de='bz2'))..    
+00047fa0: 6465 6620 4f70 656e 2873 656c 662c 6669  def Open(self,fi
+00047fb0: 6c65 6e61 6d65 293a 0a20 2020 2020 2020  lename):.       
+00047fc0: 2069 6620 6e6f 7420 6f73 2e70 6174 682e   if not os.path.
+00047fd0: 6973 6669 6c65 2866 696c 656e 616d 6529  isfile(filename)
+00047fe0: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
+00047ff0: 696e 7428 277b 7d20 6e6f 7420 666f 756e  int('{} not foun
+00048000: 6427 2e66 6f72 6d61 7428 6669 6c65 6e61  d'.format(filena
+00048010: 6d65 2929 0a20 2020 2020 2020 2020 2020  me)).           
+00048020: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
+00048030: 2020 2020 2020 6461 7461 3d73 656c 662e        data=self.
+00048040: 5277 2866 696c 656e 616d 6529 0a20 2020  Rw(filename).   
+00048050: 2020 2020 2069 6620 6461 7461 5b30 5d3a       if data[0]:
+00048060: 0a20 2020 2020 2020 2020 2020 2070 763d  .            pv=
+00048070: 6461 7461 5b31 5d5b 305d 0a20 2020 2020  data[1][0].     
+00048080: 2020 2020 2020 2069 6620 7076 203d 3d20         if pv == 
+00048090: 2733 2720 616e 6420 5079 5665 7228 3229  '3' and PyVer(2)
+000480a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000480b0: 2020 7072 696e 7428 2754 6865 2064 6174    print('The dat
+000480c0: 6120 7665 7273 696f 6e20 6973 206e 6f74  a version is not
+000480d0: 206d 6174 6368 6564 2e20 506c 6561 7365   matched. Please
+000480e0: 2075 7365 2050 7974 686f 6e33 2729 0a20   use Python3'). 
+000480f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00048100: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
+00048110: 2020 2020 2020 2020 2320 6465 636f 6d70          # decomp
+00048120: 7265 7373 2064 6174 610a 2020 2020 2020  ress data.      
+00048130: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+00048140: 2020 2020 2020 2020 2020 2064 6364 6174             dcdat
+00048150: 613d 4465 636f 6d70 7265 7373 2864 6174  a=Decompress(dat
+00048160: 615b 315d 5b31 3a5d 2c6d 6f64 653d 2762  a[1][1:],mode='b
+00048170: 7a32 2729 0a20 2020 2020 2020 2020 2020  z2').           
+00048180: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+00048190: 2020 2020 2020 2020 2070 7269 6e74 2827           print('
+000481a0: 5468 6973 2069 7320 6e6f 7420 4b46 494c  This is not KFIL
+000481b0: 4520 666f 726d 6174 2729 0a20 2020 2020  E format').     
+000481c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000481d0: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
+000481e0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+000481f0: 2020 2020 2020 2020 2073 656c 662e 696e           self.in
+00048200: 666f 3d70 6963 6b6c 652e 6c6f 6164 7328  fo=pickle.loads(
+00048210: 6463 6461 7461 2920 2320 4c6f 6164 2064  dcdata) # Load d
+00048220: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
+00048230: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+00048240: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00048250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048260: 2073 656c 662e 696e 666f 3d70 6963 6b6c   self.info=pickl
+00048270: 652e 6c6f 6164 7328 6463 6461 7461 2c65  e.loads(dcdata,e
+00048280: 6e63 6f64 696e 673d 276c 6174 696e 3127  ncoding='latin1'
+00048290: 2920 2320 436f 6e76 6572 7420 3220 746f  ) # Convert 2 to
+000482a0: 2033 2066 6f72 6d61 740a 2020 2020 2020   3 format.      
+000482b0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+000482c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000482d0: 2020 2020 2020 7072 696e 7428 2754 6869        print('Thi
+000482e0: 7320 6973 206e 6f74 204b 4649 4c45 2066  s is not KFILE f
+000482f0: 6f72 6d61 7427 290a 2020 2020 2020 2020  ormat').        
+00048300: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00048310: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+00048320: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00048330: 2020 2070 7269 6e74 2827 4361 6e20 6e6f     print('Can no
+00048340: 7420 7265 6164 207b 7d27 2e66 6f72 6d61  t read {}'.forma
+00048350: 7428 6669 6c65 6e61 6d65 2929 0a20 2020  t(filename)).   
+00048360: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00048370: 4661 6c73 650a 0a63 6c61 7373 2054 5259  False..class TRY
+00048380: 3a0a 2020 2020 6465 6620 5f5f 696e 6974  :.    def __init
+00048390: 5f5f 2873 656c 662c 6175 746f 3d4e 6f6e  __(self,auto=Non
+000483a0: 652c 6c6f 6766 696c 653d 4e6f 6e65 2c6c  e,logfile=None,l
+000483b0: 6f67 5f61 6c6c 3d46 616c 7365 2c65 7272  og_all=False,err
+000483c0: 5f73 6372 6565 6e3d 4661 6c73 652c 6572  _screen=False,er
+000483d0: 725f 6578 6974 3d46 616c 7365 2c64 6566  r_exit=False,def
+000483e0: 6175 6c74 3d4e 6f6e 652c 6c6f 673d 4e6f  ault=None,log=No
+000483f0: 6e65 293a 0a20 2020 2020 2020 2073 656c  ne):.        sel
+00048400: 662e 6175 746f 3d61 7574 6f20 2354 7275  f.auto=auto #Tru
+00048410: 653a 2041 6c6c 2061 7574 6f2c 204e 6f6e  e: All auto, Non
+00048420: 653a 2064 6566 6175 6c74 7320 6175 746f  e: defaults auto
+00048430: 2c20 4661 6c73 653a 206e 6f74 2075 7365  , False: not use
+00048440: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
+00048450: 6766 696c 653d 6c6f 6766 696c 650a 2020  gfile=logfile.  
+00048460: 2020 2020 2020 7365 6c66 2e6c 6f67 5f61        self.log_a
+00048470: 6c6c 3d6c 6f67 5f61 6c6c 0a20 2020 2020  ll=log_all.     
+00048480: 2020 2073 656c 662e 6c6f 673d 6c6f 670a     self.log=log.
+00048490: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+000484a0: 5f65 7869 743d 6572 725f 6578 6974 0a20  _exit=err_exit. 
+000484b0: 2020 2020 2020 2073 656c 662e 6572 725f         self.err_
+000484c0: 7363 7265 656e 3d54 7275 6520 6966 2065  screen=True if e
+000484d0: 7272 5f65 7869 7420 656c 7365 2065 7272  rr_exit else err
+000484e0: 5f73 6372 6565 6e0a 2020 2020 2020 2020  _screen.        
+000484f0: 0a20 2020 2020 2020 2073 656c 662e 7263  .        self.rc
+00048500: 3d4e 6f6e 6520 234e 6f6e 653a 206e 6f74  =None #None: not
+00048510: 2072 756e 2c20 4661 6c73 653a 2073 6f6d   run, False: som
+00048520: 6574 6869 6e67 2065 7272 6f72 2c20 5472  ething error, Tr
+00048530: 7565 3a20 7275 6e20 6675 6e63 7469 6f6e  ue: run function
+00048540: 0a20 2020 2020 2020 2073 656c 662e 7265  .        self.re
+00048550: 7375 6c74 3d64 6566 6175 6c74 0a20 2020  sult=default.   
+00048560: 2020 2020 2073 656c 662e 6572 726f 723d       self.error=
+00048570: 4e6f 6e65 0a0a 2020 2020 6465 6620 5f5f  None..    def __
+00048580: 7265 7072 5f5f 2873 656c 6629 3a0a 2020  repr__(self):.  
+00048590: 2020 2020 2020 6966 2073 656c 662e 7265        if self.re
+000485a0: 7375 6c74 3a0a 2020 2020 2020 2020 2020  sult:.          
+000485b0: 2020 7265 7475 726e 2053 7472 2873 656c    return Str(sel
+000485c0: 662e 7265 7375 6c74 290a 2020 2020 2020  f.result).      
+000485d0: 2020 7265 7475 726e 2027 270a 0a20 2020    return ''..   
+000485e0: 2064 6566 2072 756e 2873 656c 662c 6675   def run(self,fu
+000485f0: 6e63 2c2a 696e 7073 2c2a 2a6f 7074 7329  nc,*inps,**opts)
+00048600: 3a0a 2020 2020 2020 2020 2369 6620 5479  :.        #if Ty
+00048610: 7065 2866 756e 632c 2766 756e 6374 696f  pe(func,'functio
+00048620: 6e27 293a 0a20 2020 2020 2020 2069 6620  n'):.        if 
+00048630: 4973 4675 6e63 7469 6f6e 2866 756e 632c  IsFunction(func,
+00048640: 6275 696c 7469 6e3d 5472 7565 293a 0a20  builtin=True):. 
+00048650: 2020 2020 2020 2020 2020 2061 7267 3d41             arg=A
+00048660: 7267 7328 6675 6e63 290a 2020 2020 2020  rgs(func).      
+00048670: 2020 2020 2020 6966 2073 656c 662e 6c6f        if self.lo
+00048680: 675f 616c 6c3a 0a20 2020 2020 2020 2020  g_all:.         
+00048690: 2020 2020 2020 2070 7269 6e74 6628 2754         printf('T
+000486a0: 7279 2046 756e 6374 696f 6e3a 207b 7d7b  ry Function: {}{
+000486b0: 7d5c 6e52 6563 6976 6564 3a20 7b7d 2c20  }\nRecived: {}, 
+000486c0: 7b7d 272e 666f 726d 6174 2866 756e 632e  {}'.format(func.
+000486d0: 5f5f 6e61 6d65 5f5f 2c46 756e 6374 696f  __name__,Functio
+000486e0: 6e41 7267 7328 6675 6e63 2c6d 6f64 653d  nArgs(func,mode=
+000486f0: 2773 7472 696e 6727 292c 696e 7073 2c6f  'string'),inps,o
+00048700: 7074 7329 2c64 6174 653d 5472 7565 2c63  pts),date=True,c
+00048710: 616c 6c65 725f 7472 6565 3d54 7275 652c  aller_tree=True,
+00048720: 6361 6c6c 6572 5f70 6172 656e 743d 2731  caller_parent='1
+00048730: 2d35 272c 6361 6c6c 6572 5f66 696c 656e  -5',caller_filen
+00048740: 616d 653d 5472 7565 2c63 616c 6c65 725f  ame=True,caller_
+00048750: 6c69 6e65 5f6e 756d 6265 723d 5472 7565  line_number=True
+00048760: 2c6c 6f67 6669 6c65 3d73 656c 662e 6c6f  ,logfile=self.lo
+00048770: 6766 696c 652c 6c6f 673d 7365 6c66 2e6c  gfile,log=self.l
+00048780: 6f67 2c64 7370 3d27 6627 2069 6620 7365  og,dsp='f' if se
+00048790: 6c66 2e6c 6f67 6669 6c65 2065 6c73 6520  lf.logfile else 
+000487a0: 2761 2729 0a0a 2020 2020 2020 2020 2020  'a')..          
+000487b0: 2020 6e69 6e70 733d 5b5d 0a20 2020 2020    ninps=[].     
+000487c0: 2020 2020 2020 206e 6f70 7473 3d7b 7d0a         nopts={}.
+000487d0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+000487e0: 656c 662e 6175 746f 2069 7320 6e6f 7420  elf.auto is not 
+000487f0: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
+00048800: 2020 2020 2020 206e 696e 7073 5f6e 3d30         ninps_n=0
+00048810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048820: 206e 696e 7073 5f6f 3d30 0a20 2020 2020   ninps_o=0.     
+00048830: 2020 2020 2020 2020 2020 206f 7074 735f             opts_
+00048840: 693d 6c69 7374 286f 7074 732e 6974 656d  i=list(opts.item
+00048850: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
+00048860: 2020 2020 2077 6869 6c65 206c 656e 2861       while len(a
+00048870: 7267 2e67 6574 2827 6172 6773 272c 5b5d  rg.get('args',[]
+00048880: 2929 203e 206e 696e 7073 5f6e 3a0a 2020  )) > ninps_n:.  
+00048890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000488a0: 2020 6966 206e 696e 7073 5f6e 203c 206c    if ninps_n < l
+000488b0: 656e 2869 6e70 7329 3a0a 2020 2020 2020  en(inps):.      
+000488c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000488d0: 2020 6e69 6e70 732e 6170 7065 6e64 2869    ninps.append(i
+000488e0: 6e70 735b 6e69 6e70 735f 6e5d 290a 2020  nps[ninps_n]).  
+000488f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048900: 2020 656c 6966 2073 656c 662e 6175 746f    elif self.auto
+00048910: 2069 7320 5472 7565 2061 6e64 206e 696e   is True and nin
+00048920: 7073 5f6e 203c 206c 656e 2869 6e70 7329  ps_n < len(inps)
+00048930: 2b6c 656e 286f 7074 7329 3a0a 2020 2020  +len(opts):.    
+00048940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048950: 2020 2020 6966 206f 7074 735f 695b 6e69      if opts_i[ni
+00048960: 6e70 735f 6f5d 5b30 5d20 6e6f 7420 696e  nps_o][0] not in
+00048970: 2061 7267 2e67 6574 2827 6465 6661 756c   arg.get('defaul
+00048980: 7473 272c 7b7d 293a 0a20 2020 2020 2020  ts',{}):.       
+00048990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000489a0: 2020 2020 206e 696e 7073 2e61 7070 656e       ninps.appen
+000489b0: 6428 6f70 7473 5f69 5b6e 696e 7073 5f6f  d(opts_i[ninps_o
+000489c0: 5d5b 315d 290a 2020 2020 2020 2020 2020  ][1]).          
+000489d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000489e0: 2020 6e69 6e70 735f 6f2b 3d31 0a20 2020    ninps_o+=1.   
+000489f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048a00: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00048a10: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00048a20: 7265 616b 0a20 2020 2020 2020 2020 2020  reak.           
+00048a30: 2020 2020 2020 2020 206e 696e 7073 5f6e           ninps_n
+00048a40: 2b3d 310a 2020 2020 2020 2020 2020 2020  +=1.            
+00048a50: 2020 2020 6966 2061 7267 2e67 6574 2827      if arg.get('
+00048a60: 7661 7261 7267 7327 293a 0a20 2020 2020  varargs'):.     
+00048a70: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00048a80: 696e 7073 3d6e 696e 7073 2b69 6e70 735b  inps=ninps+inps[
+00048a90: 6e69 6e70 735f 6e3a 5d0a 2020 2020 2020  ninps_n:].      
+00048aa0: 2020 2020 2020 2020 2020 2020 2020 6e69                ni
+00048ab0: 6e70 735f 6e3d 6c65 6e28 696e 7073 290a  nps_n=len(inps).
+00048ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048ad0: 6e6f 5f69 6e70 733d 4661 6c73 650a 2020  no_inps=False.  
+00048ae0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00048af0: 206e 696e 7073 5f6f 203e 2030 203a 206f   ninps_o > 0 : o
+00048b00: 7074 733d 6469 6374 286f 7074 735f 695b  pts=dict(opts_i[
+00048b10: 6e69 6e70 735f 6f3a 5d29 0a20 2020 2020  ninps_o:]).     
+00048b20: 2020 2020 2020 2020 2020 2066 6f72 206b             for k
+00048b30: 2069 6e20 6172 672e 6765 7428 2764 6566   in arg.get('def
+00048b40: 6175 6c74 7327 2c7b 7d29 3a0a 2020 2020  aults',{}):.    
+00048b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048b60: 6966 206b 2069 6e20 6f70 7473 3a0a 2020  if k in opts:.  
+00048b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048b80: 2020 2020 2020 6e6f 7074 735b 6b5d 3d6f        nopts[k]=o
+00048b90: 7074 732e 706f 7028 6b29 0a20 2020 2020  pts.pop(k).     
+00048ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048bb0: 2020 206e 6f5f 696e 7073 3d54 7275 650a     no_inps=True.
+00048bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048bd0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00048be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048bf0: 2020 2320 4669 6c6c 2069 6e20 746f 2069    # Fill in to i
+00048c00: 6e70 7320 666f 7220 6465 6661 756c 7420  nps for default 
+00048c10: 7769 7468 2065 7874 7261 2072 656d 6169  with extra remai
+00048c20: 6e65 6420 696e 7073 0a20 2020 2020 2020  ned inps.       
+00048c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048c40: 2069 6620 6e6f 7420 6e6f 5f69 6e70 7320   if not no_inps 
+00048c50: 616e 6420 6e69 6e70 735f 6e20 3c20 6c65  and ninps_n < le
+00048c60: 6e28 696e 7073 293a 0a20 2020 2020 2020  n(inps):.       
+00048c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048c80: 2020 2020 206e 696e 7073 2e61 7070 656e       ninps.appen
+00048c90: 6428 696e 7073 5b6e 696e 7073 5f6e 5d29  d(inps[ninps_n])
+00048ca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048cb0: 2020 2020 2020 2020 2020 2020 206e 696e               nin
+00048cc0: 7073 5f6e 2b3d 310a 2020 2020 2020 2020  ps_n+=1.        
+00048cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048ce0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00048cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048d00: 2020 6e6f 7074 735b 6b5d 3d61 7267 2e67    nopts[k]=arg.g
+00048d10: 6574 2827 6465 6661 756c 7473 2729 2e67  et('defaults').g
+00048d20: 6574 286b 290a 2020 2020 2020 2020 2020  et(k).          
 00048d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048d40: 2020 7365 6c66 2e72 6573 756c 743d 6675    self.result=fu
-00048d50: 6e63 282a 696e 7073 2c2a 2a6f 7074 7329  nc(*inps,**opts)
-00048d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048d70: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-00048d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048d90: 2020 2020 2020 2020 2020 2020 2065 3d45               e=E
-00048da0: 7863 6570 744d 6573 7361 6765 2829 0a20  xceptMessage(). 
-00048db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048dc0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00048dd0: 6572 726f 723d 652b 2728 6675 6e63 7469  error=e+'(functi
-00048de0: 6f6e 206e 616d 653a 207b 7d29 272e 666f  on name: {})'.fo
-00048df0: 726d 6174 2866 756e 632e 5f5f 6e61 6d65  rmat(func.__name
-00048e00: 5f5f 290a 2020 2020 2020 2020 2020 2020  __).            
-00048e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048e20: 7365 6c66 2e72 633d 4661 6c73 650a 2020  self.rc=False.  
-00048e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048e40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00048e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048e60: 7365 6c66 2e72 6573 756c 743d 6675 6e63  self.result=func
-00048e70: 282a 6e69 6e70 732c 2a2a 6e6f 7074 7329  (*ninps,**nopts)
-00048e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048e90: 2069 6620 7365 6c66 2e6c 6f67 5f61 6c6c   if self.log_all
-00048ea0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00048eb0: 2020 2020 2020 7072 696e 7466 2827 5243        printf('RC
-00048ec0: 3a7b 7d5c 6e52 6573 756c 743a 7b7d 272e  :{}\nResult:{}'.
-00048ed0: 666f 726d 6174 2873 656c 662e 7263 2c73  format(self.rc,s
-00048ee0: 656c 662e 7265 7375 6c74 292c 6461 7465  elf.result),date
-00048ef0: 3d54 7275 652c 6c6f 6766 696c 653d 7365  =True,logfile=se
-00048f00: 6c66 2e6c 6f67 6669 6c65 2c6c 6f67 3d73  lf.logfile,log=s
-00048f10: 656c 662e 6c6f 672c 6473 703d 2766 2720  elf.log,dsp='f' 
-00048f20: 6966 2073 656c 662e 6c6f 6766 696c 6520  if self.logfile 
-00048f30: 656c 7365 2027 6127 290a 2020 2020 2020  else 'a').      
-00048f40: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00048f50: 2073 656c 660a 2020 2020 2020 2020 2020   self.          
-00048f60: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-00048f70: 2020 2020 2020 2020 2020 653d 4578 6365            e=Exce
-00048f80: 7074 4d65 7373 6167 6528 290a 2020 2020  ptMessage().    
-00048f90: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00048fa0: 656c 662e 6c6f 6766 696c 6520 6f72 2073  elf.logfile or s
-00048fb0: 656c 662e 6c6f 673a 0a20 2020 2020 2020  elf.log:.       
-00048fc0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00048fd0: 6e74 6628 652c 6461 7465 3d54 7275 652c  ntf(e,date=True,
-00048fe0: 6361 6c6c 6572 5f74 7265 653d 5472 7565  caller_tree=True
-00048ff0: 2c63 616c 6c65 725f 7061 7265 6e74 3d27  ,caller_parent='
-00049000: 312d 3527 2c63 616c 6c65 725f 6669 6c65  1-5',caller_file
-00049010: 6e61 6d65 3d54 7275 652c 6361 6c6c 6572  name=True,caller
-00049020: 5f6c 696e 655f 6e75 6d62 6572 3d54 7275  _line_number=Tru
-00049030: 652c 6c6f 6766 696c 653d 7365 6c66 2e6c  e,logfile=self.l
-00049040: 6f67 6669 6c65 2c6c 6f67 3d73 656c 662e  ogfile,log=self.
-00049050: 6c6f 672c 6473 703d 2766 2729 0a20 2020  log,dsp='f').   
-00049060: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00049070: 7365 6c66 2e65 7272 5f73 6372 6565 6e3a  self.err_screen:
-00049080: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00049090: 2020 2020 2070 7269 6e74 6628 652c 6d6f       printf(e,mo
-000490a0: 6465 3d27 6527 290a 2020 2020 2020 2020  de='e').        
-000490b0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000490c0: 6572 725f 6578 6974 3a0a 2020 2020 2020  err_exit:.      
-000490d0: 2020 2020 2020 2020 2020 2020 2020 6f73                os
-000490e0: 2e5f 6578 6974 2831 290a 2020 2020 2020  ._exit(1).      
-000490f0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
-00049100: 633d 4661 6c73 650a 2020 2020 2020 2020  c=False.        
-00049110: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
-00049120: 6f72 3d65 0a20 2020 2020 2020 2020 2020  or=e.           
-00049130: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00049140: 0a20 2020 2020 2020 2065 6c69 6620 6973  .        elif is
-00049150: 696e 7374 616e 6365 2866 756e 632c 7374  instance(func,st
-00049160: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-00049170: 7365 6c66 2e72 632c 7365 6c66 2e72 6573  self.rc,self.res
-00049180: 756c 742c 7365 6c66 2e65 7272 6f72 3d54  ult,self.error=T
-00049190: 7279 436f 6465 2866 756e 632c 6465 6661  ryCode(func,defa
-000491a0: 756c 743d 4661 6c73 652c 5f72 6574 7572  ult=False,_retur
-000491b0: 6e5f 3d54 7275 6529 0a20 2020 2020 2020  n_=True).       
-000491c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000491d0: 0a20 2020 2020 2020 2073 656c 662e 7263  .        self.rc
-000491e0: 3d46 616c 7365 0a20 2020 2020 2020 2073  =False.        s
-000491f0: 656c 662e 6572 726f 723d 274e 6f74 205b  elf.error='Not [
-00049200: 7375 7070 6f72 745d 2066 756e 6374 696f  support] functio
-00049210: 6e27 0a20 2020 2020 2020 2069 6620 7365  n'.        if se
-00049220: 6c66 2e6c 6f67 5f61 6c6c 3a0a 2020 2020  lf.log_all:.    
-00049230: 2020 2020 2020 2020 7072 696e 7466 2827          printf('
-00049240: 5243 3a7b 7d5c 6e52 6573 756c 743a 7b7d  RC:{}\nResult:{}
-00049250: 5c6e 4572 726f 723a 7b7d 272e 666f 726d  \nError:{}'.form
-00049260: 6174 2873 656c 662e 7263 2c73 656c 662e  at(self.rc,self.
-00049270: 7265 7375 6c74 2c73 656c 662e 6572 726f  result,self.erro
-00049280: 7229 2c64 6174 653d 5472 7565 2c6c 6f67  r),date=True,log
-00049290: 6669 6c65 3d73 656c 662e 6c6f 6766 696c  file=self.logfil
-000492a0: 652c 6c6f 673d 7365 6c66 2e6c 6f67 2c64  e,log=self.log,d
-000492b0: 7370 3d27 6627 2069 6620 7365 6c66 2e6c  sp='f' if self.l
-000492c0: 6f67 6669 6c65 2065 6c73 6520 2761 2729  ogfile else 'a')
-000492d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000492e0: 7365 6c66 0a0a 2020 2020 6465 6620 5265  self..    def Re
-000492f0: 7375 6c74 2873 656c 6629 3a0a 2020 2020  sult(self):.    
-00049300: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00049310: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
-00049320: 5263 2873 656c 6629 3a0a 2020 2020 2020  Rc(self):.      
-00049330: 2020 7265 7475 726e 2073 656c 662e 7263    return self.rc
-00049340: 0a0a 2020 2020 6465 6620 4572 726f 7228  ..    def Error(
-00049350: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-00049360: 6574 7572 6e20 7365 6c66 2e65 7272 6f72  eturn self.error
-00049370: 0a0a 636c 6173 7320 5245 5455 524e 3a0a  ..class RETURN:.
-00049380: 2020 2020 2727 2754 656d 706f 7261 7279      '''Temporary
-00049390: 2074 7279 2074 6f20 5245 5455 524e 2076   try to RETURN v
-000493a0: 616c 7565 2064 6566 696e 6527 2727 0a20  alue define'''. 
-000493b0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-000493c0: 7365 6c66 2c2a 6461 7461 2c2a 2a6f 7074  self,*data,**opt
-000493d0: 7329 3a0a 2020 2020 2020 2020 7365 6c66  s):.        self
-000493e0: 2e72 633d 6f70 7473 2e67 6574 2827 7263  .rc=opts.get('rc
-000493f0: 272c 6f70 7473 2e67 6574 2827 5243 272c  ',opts.get('RC',
-00049400: 4e6f 6e65 2929 0a20 2020 2020 2020 2069  None)).        i
-00049410: 6620 6c65 6e28 6461 7461 2920 3d3d 2031  f len(data) == 1
-00049420: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00049430: 6c66 2e64 6174 613d 6461 7461 5b30 5d0a  lf.data=data[0].
-00049440: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00049450: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
-00049460: 6174 613d 6461 7461 0a20 2020 2020 2020  ata=data.       
-00049470: 2073 656c 662e 696e 666f 3d7b 7d0a 2020   self.info={}.  
-00049480: 2020 2020 2020 6966 206f 7074 732e 6765        if opts.ge
-00049490: 7428 2769 6e66 6f27 2c54 7275 6529 2069  t('info',True) i
-000494a0: 7320 5472 7565 3a0a 2020 2020 2020 2020  s True:.        
-000494b0: 2020 2020 7365 6c66 2e69 6e66 6f5b 2774      self.info['t
-000494c0: 696d 6527 5d3d 5449 4d45 2829 2e49 6e74  ime']=TIME().Int
-000494d0: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
-000494e0: 6620 6f70 7473 2e67 6574 2827 6675 6e63  f opts.get('func
-000494f0: 7469 6f6e 272c 5472 7565 2920 6973 2054  tion',True) is T
-00049500: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
-00049510: 2020 2020 2073 656c 662e 696e 666f 5b27       self.info['
-00049520: 6675 6e63 7469 6f6e 275d 3d46 756e 6374  function']=Funct
-00049530: 696f 6e4e 616d 6528 2a2a 7b27 7061 7265  ionName(**{'pare
-00049540: 6e74 273a 312c 2761 7267 7327 3a54 7275  nt':1,'args':Tru
-00049550: 652c 276c 696e 655f 6e75 6d62 6572 273a  e,'line_number':
-00049560: 5472 7565 2c27 6669 6c65 6e61 6d65 273a  True,'filename':
-00049570: 5472 7565 7d29 0a20 2020 2020 2020 2020  True}).         
-00049580: 2020 2069 6620 6f70 7473 2e67 6574 2827     if opts.get('
-00049590: 7061 7265 6e74 2729 2069 7320 5472 7565  parent') is True
-000495a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000495b0: 2020 7365 6c66 2e69 6e66 6f5b 2770 6172    self.info['par
-000495c0: 656e 7427 5d3d 4675 6e63 7469 6f6e 4e61  ent']=FunctionNa
-000495d0: 6d65 282a 2a7b 2770 6172 656e 7427 3a32  me(**{'parent':2
-000495e0: 2c27 6c69 6e65 5f6e 756d 6265 7227 3a54  ,'line_number':T
-000495f0: 7275 652c 2766 696c 656e 616d 6527 3a54  rue,'filename':T
-00049600: 7275 657d 290a 2020 2020 2020 2020 2020  rue}).          
-00049610: 2020 6966 2027 6d73 6727 2069 6e20 6f70    if 'msg' in op
-00049620: 7473 3a20 7365 6c66 2e69 6e66 6f5b 276d  ts: self.info['m
-00049630: 7367 275d 3d6f 7074 732e 6765 7428 276d  sg']=opts.get('m
-00049640: 7367 2729 0a20 2020 2020 2020 2020 2020  sg').           
-00049650: 2069 6620 276e 6574 776f 726b 2720 696e   if 'network' in
-00049660: 206f 7074 733a 2073 656c 662e 696e 666f   opts: self.info
-00049670: 5b27 6e65 7477 6f72 6b27 5d3d 6f70 7473  ['network']=opts
-00049680: 2e67 6574 2827 6e65 7477 6f72 6b27 290a  .get('network').
-00049690: 0a20 2020 2064 6566 2047 6574 2873 656c  .    def Get(sel
-000496a0: 662c 2a6f 2c2a 2a6f 7074 7329 3a0a 2020  f,*o,**opts):.  
-000496b0: 2020 2020 2020 6966 206e 6f74 206f 3a20        if not o: 
-000496c0: 6f70 7473 5b27 6465 6661 756c 7427 5d3d  opts['default']=
-000496d0: 276f 7267 270a 2020 2020 2020 2020 7265  'org'.        re
-000496e0: 7475 726e 2047 6574 2873 656c 662e 6461  turn Get(self.da
-000496f0: 7461 2c2a 6f2c 2a2a 6f70 7473 290a 0a63  ta,*o,**opts)..c
-00049700: 6c61 7373 206b 5468 7265 6164 2854 6872  lass kThread(Thr
-00049710: 6561 6429 3a0a 2020 2020 2727 270a 2020  ead):.    '''.  
-00049720: 2020 7420 3d20 6b54 6872 6561 6428 7461    t = kThread(ta
-00049730: 7267 6574 3d66 6f6f 2c20 6172 6773 3d28  rget=foo, args=(
-00049740: 2777 6f72 6c64 2127 2c29 2920 2320 6465  'world!',)) # de
-00049750: 6669 6e65 0a20 2020 2074 2e73 7461 7274  fine.    t.start
-00049760: 2829 2023 2073 7461 7274 0a20 2020 2070  () # start.    p
-00049770: 7269 6e74 2874 2e67 6574 2829 2920 2023  rint(t.get())  #
-00049780: 2067 6574 2072 6573 756c 740a 2020 2020   get result.    
-00049790: 2727 270a 2020 2020 6465 6620 5f5f 696e  '''.    def __in
-000497a0: 6974 5f5f 2873 656c 662c 2067 726f 7570  it__(self, group
-000497b0: 3d4e 6f6e 652c 2074 6172 6765 743d 4e6f  =None, target=No
-000497c0: 6e65 2c20 6e61 6d65 3d4e 6f6e 652c 0a20  ne, name=None,. 
-000497d0: 2020 2020 2020 2020 2020 2061 7267 733d             args=
-000497e0: 2829 2c20 6b77 6172 6773 3d7b 7d2c 2056  (), kwargs={}, V
-000497f0: 6572 626f 7365 3d4e 6f6e 652c 2064 6566  erbose=None, def
-00049800: 6175 6c74 3d4e 6f6e 6529 3a0a 2020 2020  ault=None):.    
-00049810: 2020 2020 6966 2050 7956 6572 2833 293a      if PyVer(3):
-00049820: 0a20 2020 2020 2020 2020 2020 2054 6872  .            Thr
-00049830: 6561 642e 5f5f 696e 6974 5f5f 2873 656c  ead.__init__(sel
-00049840: 662c 2067 726f 7570 2c20 7461 7267 6574  f, group, target
-00049850: 2c20 6e61 6d65 2c20 6172 6773 2c20 6b77  , name, args, kw
-00049860: 6172 6773 290a 2020 2020 2020 2020 656c  args).        el
-00049870: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00049880: 5468 7265 6164 2e5f 5f69 6e69 745f 5f28  Thread.__init__(
-00049890: 7365 6c66 2c20 6772 6f75 702c 2074 6172  self, group, tar
-000498a0: 6765 742c 206e 616d 652c 2061 7267 732c  get, name, args,
-000498b0: 206b 7761 7267 732c 2056 6572 626f 7365   kwargs, Verbose
-000498c0: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
-000498d0: 7265 7475 726e 203d 2064 6566 6175 6c74  return = default
-000498e0: 0a0a 2020 2020 6465 6620 7275 6e28 7365  ..    def run(se
-000498f0: 6c66 293a 0a20 2020 2020 2020 2069 6620  lf):.        if 
-00049900: 5079 5665 7228 3329 3a0a 2020 2020 2020  PyVer(3):.      
-00049910: 2020 2020 2020 6966 2073 656c 662e 5f74        if self._t
-00049920: 6172 6765 7420 6973 206e 6f74 204e 6f6e  arget is not Non
-00049930: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00049940: 2020 2073 656c 662e 5f72 6574 7572 6e20     self._return 
-00049950: 3d20 7365 6c66 2e5f 7461 7267 6574 282a  = self._target(*
-00049960: 7365 6c66 2e5f 6172 6773 2c2a 2a73 656c  self._args,**sel
-00049970: 662e 5f6b 7761 7267 7329 0a20 2020 2020  f._kwargs).     
-00049980: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00049990: 2020 2020 2069 6620 7365 6c66 2e5f 5468       if self._Th
-000499a0: 7265 6164 5f5f 7461 7267 6574 2069 7320  read__target is 
-000499b0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-000499c0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-000499d0: 7265 7475 726e 203d 2073 656c 662e 5f54  return = self._T
-000499e0: 6872 6561 645f 5f74 6172 6765 7428 2a73  hread__target(*s
-000499f0: 656c 662e 5f54 6872 6561 645f 5f61 7267  elf._Thread__arg
-00049a00: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-00049a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049a30: 2020 202a 2a73 656c 662e 5f54 6872 6561     **self._Threa
-00049a40: 645f 5f6b 7761 7267 7329 0a20 2020 2064  d__kwargs).    d
-00049a50: 6566 2067 6574 2873 656c 6629 3a0a 2020  ef get(self):.  
-00049a60: 2020 2020 2020 6966 2073 656c 662e 5f74        if self._t
-00049a70: 7374 6174 655f 6c6f 636b 3a0a 2020 2020  state_lock:.    
-00049a80: 2020 2020 2020 2020 5468 7265 6164 2e6a          Thread.j
-00049a90: 6f69 6e28 7365 6c66 290a 2020 2020 2020  oin(self).      
-00049aa0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00049ab0: 662e 5f72 6574 7572 6e0a 2020 2020 2020  f._return.      
-00049ac0: 2020 7265 7475 726e 204e 6f6e 650a 0a20    return None.. 
-00049ad0: 2020 2064 6566 2073 746f 7028 7365 6c66     def stop(self
-00049ae0: 2c72 6574 7279 5f6e 756d 3d31 3029 3a0a  ,retry_num=10):.
-00049af0: 2020 2020 2020 2020 6465 6620 5f61 7379          def _asy
-00049b00: 6e63 5f72 6169 7365 2874 685f 6964 2c65  nc_raise(th_id,e
-00049b10: 7865 5f74 7970 6529 3a0a 2020 2020 2020  xe_type):.      
-00049b20: 2020 2020 2020 7468 5f69 643d 6374 7970        th_id=ctyp
-00049b30: 6573 2e63 5f6c 6f6e 6728 7468 5f69 6429  es.c_long(th_id)
-00049b40: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00049b50: 6e6f 7420 696e 7370 6563 742e 6973 636c  not inspect.iscl
-00049b60: 6173 7328 6578 655f 7479 7065 293a 0a20  ass(exe_type):. 
-00049b70: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00049b80: 7865 5f74 7970 653d 7479 7065 2865 7865  xe_type=type(exe
-00049b90: 5f74 7970 6529 0a20 2020 2020 2020 2020  _type).         
-00049ba0: 2020 2072 6573 203d 2063 7479 7065 732e     res = ctypes.
-00049bb0: 7079 7468 6f6e 6170 692e 5079 5468 7265  pythonapi.PyThre
-00049bc0: 6164 5374 6174 655f 5365 7441 7379 6e63  adState_SetAsync
-00049bd0: 4578 6328 7468 5f69 642c 2063 7479 7065  Exc(th_id, ctype
-00049be0: 732e 7079 5f6f 626a 6563 7428 6578 655f  s.py_object(exe_
-00049bf0: 7479 7065 2929 0a20 2020 2020 2020 2020  type)).         
-00049c00: 2020 2069 6620 7265 7320 3d3d 2030 3a0a     if res == 0:.
-00049c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049c20: 2370 7269 6e74 2822 496e 7661 6c69 6420  #print("Invalid 
-00049c30: 7468 7265 6164 2069 6428 7b7d 2922 2e66  thread id({})".f
-00049c40: 6f72 6d61 7428 7468 5f69 6429 290a 2020  ormat(th_id)).  
-00049c50: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00049c60: 7475 726e 202d 310a 2020 2020 2020 2020  turn -1.        
-00049c70: 2020 2020 656c 6966 2072 6573 2021 3d20      elif res != 
-00049c80: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
-00049c90: 2020 2063 7479 7065 732e 7079 7468 6f6e     ctypes.python
-00049ca0: 6170 692e 5079 5468 7265 6164 5374 6174  api.PyThreadStat
-00049cb0: 655f 5365 7441 7379 6e63 4578 6328 7468  e_SetAsyncExc(th
-00049cc0: 5f69 642c 204e 6f6e 6529 0a20 2020 2020  _id, None).     
-00049cd0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00049ce0: 2053 7973 7465 6d45 7272 6f72 2822 5468   SystemError("Th
-00049cf0: 7265 6164 5374 6f70 2066 6169 6c65 6422  readStop failed"
-00049d00: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
-00049d10: 7374 6f70 7065 6420 7468 7265 6164 0a20  stopped thread. 
-00049d20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00049d30: 6e20 300a 2020 2020 2020 2020 666f 7220  n 0.        for 
-00049d40: 6920 696e 2072 616e 6765 2872 6574 7279  i in range(retry
-00049d50: 5f6e 756d 293a 0a20 2020 2020 2020 2020  _num):.         
-00049d60: 2020 2065 7869 745f 6964 3d5f 6173 796e     exit_id=_asyn
-00049d70: 635f 7261 6973 6528 7365 6c66 2e69 6465  c_raise(self.ide
-00049d80: 6e74 2c20 5379 7374 656d 4578 6974 290a  nt, SystemExit).
-00049d90: 2020 2020 2020 2020 2020 2020 6966 2065              if e
-00049da0: 7869 745f 6964 203d 3d20 303a 0a20 2020  xit_id == 0:.   
-00049db0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00049dc0: 662e 5f69 735f 7374 6f70 7065 643d 5472  f._is_stopped=Tr
-00049dd0: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-00049de0: 2020 2072 6574 7572 6e20 5472 7565 2023     return True #
-00049df0: 2073 746f 7070 6564 0a20 2020 2020 2020   stopped.       
-00049e00: 2020 2020 2065 6c69 6620 6578 6974 5f69       elif exit_i
-00049e10: 6420 3d3d 202d 313a 2023 4e6f 2074 6872  d == -1: #No thr
-00049e20: 6561 640a 2020 2020 2020 2020 2020 2020  ead.            
-00049e30: 2020 2020 7365 6c66 2e5f 6973 5f73 746f      self._is_sto
-00049e40: 7070 6564 3d54 7275 650a 2020 2020 2020  pped=True.      
-00049e50: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00049e60: 204e 6f6e 650a 2020 2020 2020 2020 7265   None.        re
-00049e70: 7475 726e 2046 616c 7365 2023 2073 746f  turn False # sto
-00049e80: 7020 4661 696c 0a0a 2020 2020 6465 6620  p Fail..    def 
-00049e90: 6973 416c 6976 6528 7365 6c66 293a 0a20  isAlive(self):. 
-00049ea0: 2020 2020 2020 2023 6966 206e 6f74 2073         #if not s
-00049eb0: 656c 662e 5f74 7374 6174 655f 6c6f 636b  elf._tstate_lock
-00049ec0: 2061 6e64 206e 6f74 2073 656c 662e 5f69   and not self._i
-00049ed0: 735f 7374 6f70 7065 643a 2072 6574 7572  s_stopped: retur
-00049ee0: 6e20 4e6f 6e65 2023 204e 6f74 2073 7461  n None # Not sta
-00049ef0: 7274 6564 0a20 2020 2020 2020 2069 6620  rted.        if 
-00049f00: 6e6f 7420 7365 6c66 2e5f 7473 7461 7465  not self._tstate
-00049f10: 5f6c 6f63 6b20 616e 6420 6e6f 7420 7365  _lock and not se
-00049f20: 6c66 2e5f 6964 656e 743a 2072 6574 7572  lf._ident: retur
-00049f30: 6e20 4e6f 6e65 2023 204e 6f74 2073 7461  n None # Not sta
-00049f40: 7274 6564 0a20 2020 2020 2020 2069 6620  rted.        if 
-00049f50: 6e6f 7420 7365 6c66 2e5f 7473 7461 7465  not self._tstate
-00049f60: 5f6c 6f63 6b20 6f72 2073 656c 662e 5f69  _lock or self._i
-00049f70: 735f 7374 6f70 7065 643a 2072 6574 7572  s_stopped: retur
-00049f80: 6e20 4661 6c73 6520 2353 746f 7070 6564  n False #Stopped
-00049f90: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00049fa0: 5472 7565 2023 5275 6e6e 696e 670a 0a20  True #Running.. 
-00049fb0: 2020 2064 6566 204e 616d 6528 7365 6c66     def Name(self
-00049fc0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00049fd0: 6e20 7365 6c66 2e5f 6e61 6d65 0a20 2020  n self._name.   
-00049fe0: 2064 6566 2041 7267 7328 7365 6c66 293a   def Args(self):
-00049ff0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0004a000: 7365 6c66 2e5f 6172 6773 2c73 656c 662e  self._args,self.
-0004a010: 5f6b 7761 7267 730a 2020 2020 6465 6620  _kwargs.    def 
-0004a020: 4964 2873 656c 6629 3a0a 2020 2020 2020  Id(self):.      
-0004a030: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0004a040: 7365 6c66 2e69 6465 6e74 2c69 6e74 293a  self.ident,int):
-0004a050: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0004a060: 7572 6e20 7365 6c66 2e69 6465 6e74 0a20  urn self.ident. 
-0004a070: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-0004a080: 6e65 2023 206e 6f74 2073 7461 7274 6564  ne # not started
-0004a090: 0a20 2020 2064 6566 2050 5049 4428 7365  .    def PPID(se
-0004a0a0: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
-0004a0b0: 7572 6e20 6f73 2e67 6574 7069 6428 290a  urn os.getpid().
-0004a0c0: 0a64 6566 2050 726f 6772 6573 7328 7379  .def Progress(sy
-0004a0d0: 6d62 6f6c 3d27 2e27 2c2a 2a6f 7074 7329  mbol='.',**opts)
-0004a0e0: 3a0a 2020 2020 7374 6172 745f 6e65 776c  :.    start_newl
-0004a0f0: 696e 653d 6f70 7473 2e67 6574 2827 7374  ine=opts.get('st
-0004a100: 6172 745f 6e65 776c 696e 6527 2c46 616c  art_newline',Fal
-0004a110: 7365 290a 2020 2020 656e 645f 6e65 776c  se).    end_newl
-0004a120: 696e 653d 6f70 7473 2e67 6574 2827 656e  ine=opts.get('en
-0004a130: 645f 6e65 776c 696e 6527 2c6f 7074 732e  d_newline',opts.
-0004a140: 6765 7428 276e 6577 6c69 6e65 272c 5472  get('newline',Tr
-0004a150: 7565 2929 0a20 2020 206c 6f67 3d6f 7074  ue)).    log=opt
-0004a160: 732e 6765 7428 276c 6f67 272c 4e6f 6e65  s.get('log',None
-0004a170: 290a 2020 2020 696e 7465 7276 616c 3d49  ).    interval=I
-0004a180: 6e74 286f 7074 732e 6765 7428 2769 6e74  nt(opts.get('int
-0004a190: 6572 7661 6c27 292c 3529 0a20 2020 2074  erval'),5).    t
-0004a1a0: 696d 656f 7574 3d49 6e74 286f 7074 732e  imeout=Int(opts.
-0004a1b0: 6765 7428 2774 696d 656f 7574 2729 2c33  get('timeout'),3
-0004a1c0: 3630 302a 3130 3029 0a20 2020 206d 6f64  600*100).    mod
-0004a1d0: 653d 6f70 7473 2e67 6574 2827 6d6f 6465  e=opts.get('mode
-0004a1e0: 272c 2773 2729 0a20 2020 2073 746f 703d  ','s').    stop=
-0004a1f0: 6f70 7473 5b27 7374 6f70 275d 2069 6620  opts['stop'] if 
-0004a200: 2773 746f 7027 2069 6e20 6f70 7473 2065  'stop' in opts e
-0004a210: 6c73 6520 4661 6c73 650a 2020 2020 6465  lse False.    de
-0004a220: 6c61 793d 6f70 7473 5b27 6465 6c61 7927  lay=opts['delay'
-0004a230: 5d20 6966 2027 6465 6c61 7927 2069 6e20  ] if 'delay' in 
-0004a240: 6f70 7473 2065 6c73 6520 4661 6c73 650a  opts else False.
-0004a250: 2020 2020 6c6f 6361 6c5f 7072 696e 7465      local_printe
-0004a260: 643d 4661 6c73 650a 2020 2020 6966 2073  d=False.    if s
-0004a270: 7461 7274 5f6e 6577 6c69 6e65 3a0a 2020  tart_newline:.  
-0004a280: 2020 2020 2020 7072 696e 7466 2827 272c        printf('',
-0004a290: 6967 6e6f 7265 5f65 6d70 7479 3d46 616c  ignore_empty=Fal
-0004a2a0: 7365 2c63 616c 6c65 725f 7061 7265 6e74  se,caller_parent
-0004a2b0: 3d31 2c73 7461 7274 5f6e 6577 6c69 6e65  =1,start_newline
-0004a2c0: 3d27 6175 746f 272c 6c6f 673d 6c6f 672c  ='auto',log=log,
-0004a2d0: 656e 643d 2727 2c6d 6f64 653d 6d6f 6465  end='',mode=mode
-0004a2e0: 290a 2020 2020 5469 6d65 3d54 494d 4528  ).    Time=TIME(
-0004a2f0: 290a 2020 2020 7768 696c 6520 5472 7565  ).    while True
-0004a300: 3a0a 2020 2020 2020 2020 6966 2049 7354  :.        if IsT
-0004a310: 7275 6528 7374 6f70 2920 6f72 2028 7469  rue(stop) or (ti
-0004a320: 6d65 6f75 7420 3e20 3020 616e 6420 5469  meout > 0 and Ti
-0004a330: 6d65 2e4f 7574 2874 696d 656f 7574 2929  me.Out(timeout))
-0004a340: 3a20 6272 6561 6b0a 2020 2020 2020 2020  : break.        
-0004a350: 6966 2064 656c 6179 3a0a 2020 2020 2020  if delay:.      
-0004a360: 2020 2020 2020 6966 2028 6973 696e 7374        if (isinst
-0004a370: 616e 6365 2864 656c 6179 2c69 6e74 2920  ance(delay,int) 
-0004a380: 616e 6420 6e6f 7420 2054 696d 652e 4f75  and not  Time.Ou
-0004a390: 7428 6465 6c61 7929 2920 6f72 206e 6f74  t(delay)) or not
-0004a3a0: 2049 7354 7275 6528 6465 6c61 7929 3a20   IsTrue(delay): 
-0004a3b0: 236c 6573 7320 6465 6c61 7920 7469 6d65  #less delay time
-0004a3c0: 2074 6865 6e20 736b 6970 2070 726f 6772   then skip progr
-0004a3d0: 6573 7320 6c6f 670a 2020 2020 2020 2020  ess log.        
-0004a3e0: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
-0004a3f0: 6570 2830 2e33 290a 2020 2020 2020 2020  ep(0.3).        
-0004a400: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-0004a410: 0a20 2020 2020 2020 2070 7269 6e74 6628  .        printf(
-0004a420: 7379 6d62 6f6c 2c64 6972 6563 743d 5472  symbol,direct=Tr
-0004a430: 7565 2c6c 6f67 3d6c 6f67 2c6c 6f67 5f6c  ue,log=log,log_l
-0004a440: 6576 656c 3d31 2c6d 6f64 653d 6d6f 6465  evel=1,mode=mode
-0004a450: 290a 2020 2020 2020 2020 6c6f 6361 6c5f  ).        local_
-0004a460: 7072 696e 7465 643d 5472 7565 0a20 2020  printed=True.   
-0004a470: 2020 2020 2074 696d 652e 736c 6565 7028       time.sleep(
-0004a480: 696e 7465 7276 616c 290a 2020 2020 6966  interval).    if
-0004a490: 2065 6e64 5f6e 6577 6c69 6e65 2061 6e64   end_newline and
-0004a4a0: 206c 6f63 616c 5f70 7269 6e74 6564 3a0a   local_printed:.
-0004a4b0: 2020 2020 2020 2020 7072 696e 7466 2827          printf('
-0004a4c0: 272c 6967 6e6f 7265 5f65 6d70 7479 3d46  ',ignore_empty=F
-0004a4d0: 616c 7365 2c63 616c 6c65 725f 7061 7265  alse,caller_pare
-0004a4e0: 6e74 3d31 2c6e 6f5f 696e 7472 6f3d 5472  nt=1,no_intro=Tr
-0004a4f0: 7565 2c6c 6f67 3d6c 6f67 2c6d 6f64 653d  ue,log=log,mode=
-0004a500: 6d6f 6465 290a 0a0a 2369 6620 5f5f 6e61  mode)...#if __na
-0004a510: 6d65 5f5f 203d 3d20 225f 5f6d 6169 6e5f  me__ == "__main_
-0004a520: 5f22 3a0a 2320 2020 2023 2049 6e74 6567  _":.#    # Integ
-0004a530: 6572 0a23 2020 2020 7072 696e 7428 2247  er.#    print("G
-0004a540: 6574 2831 3233 3435 293a 222c 4765 7428  et(12345):",Get(
-0004a550: 3132 3334 3529 290a 2320 2020 2070 7269  12345)).#    pri
-0004a560: 6e74 2822 4765 7428 3132 3334 352c 3129  nt("Get(12345,1)
-0004a570: 3a22 2c47 6574 2831 3233 3435 2c31 2929  :",Get(12345,1))
-0004a580: 0a                                       .
+00048d40: 2020 6e6f 5f69 6e70 733d 5472 7565 0a20    no_inps=True. 
+00048d50: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00048d60: 6620 6172 672e 6765 7428 276b 6579 776f  f arg.get('keywo
+00048d70: 7264 7327 2920 616e 6420 6f70 7473 3a0a  rds') and opts:.
+00048d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048d90: 2020 2020 6e6f 7074 732e 7570 6461 7465      nopts.update
+00048da0: 286f 7074 7329 0a20 2020 2020 2020 2020  (opts).         
+00048db0: 2020 2020 2020 2069 6620 7365 6c66 2e6c         if self.l
+00048dc0: 6f67 5f61 6c6c 3a0a 2020 2020 2020 2020  og_all:.        
+00048dd0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00048de0: 7466 2827 4e65 7720 496e 7075 7473 3a20  tf('New Inputs: 
+00048df0: 7b7d 207b 7d27 2e66 6f72 6d61 7428 6e69  {} {}'.format(ni
+00048e00: 6e70 732c 6e6f 7074 7329 2c64 6174 653d  nps,nopts),date=
+00048e10: 5472 7565 2c6c 6f67 6669 6c65 3d73 656c  True,logfile=sel
+00048e20: 662e 6c6f 6766 696c 652c 6c6f 673d 7365  f.logfile,log=se
+00048e30: 6c66 2e6c 6f67 2c64 7370 3d27 6627 2069  lf.log,dsp='f' i
+00048e40: 6620 7365 6c66 2e6c 6f67 6669 6c65 2065  f self.logfile e
+00048e50: 6c73 6520 2761 2729 0a20 2020 2020 2020  lse 'a').       
+00048e60: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00048e70: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
+00048e80: 633d 5472 7565 0a20 2020 2020 2020 2020  c=True.         
+00048e90: 2020 2020 2020 2069 6620 7365 6c66 2e61         if self.a
+00048ea0: 7574 6f20 6973 2046 616c 7365 3a0a 2020  uto is False:.  
+00048eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048ec0: 2020 7365 6c66 2e72 6573 756c 743d 6675    self.result=fu
+00048ed0: 6e63 282a 696e 7073 2c2a 2a6f 7074 7329  nc(*inps,**opts)
+00048ee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048ef0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00048f00: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00048f10: 7420 6172 6720 616e 6420 7479 7065 2866  t arg and type(f
+00048f20: 756e 6329 2e5f 5f6e 616d 655f 5f20 3d3d  unc).__name__ ==
+00048f30: 2027 6275 696c 7469 6e5f 6675 6e63 7469   'builtin_functi
+00048f40: 6f6e 5f6f 725f 6d65 7468 6f64 273a 0a20  on_or_method':. 
+00048f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048f60: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+00048f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048f80: 2020 2020 2020 2020 7365 6c66 2e72 6573          self.res
+00048f90: 756c 743d 6675 6e63 282a 696e 7073 2c2a  ult=func(*inps,*
+00048fa0: 2a6f 7074 7329 0a20 2020 2020 2020 2020  *opts).         
+00048fb0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00048fc0: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+00048fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048fe0: 2020 2065 3d45 7863 6570 744d 6573 7361     e=ExceptMessa
+00048ff0: 6765 2829 0a20 2020 2020 2020 2020 2020  ge().           
+00049000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049010: 2073 656c 662e 6572 726f 723d 652b 2728   self.error=e+'(
+00049020: 6675 6e63 7469 6f6e 206e 616d 653a 207b  function name: {
+00049030: 7d29 272e 666f 726d 6174 2866 756e 632e  })'.format(func.
+00049040: 5f5f 6e61 6d65 5f5f 290a 2020 2020 2020  __name__).      
+00049050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049060: 2020 2020 2020 7365 6c66 2e72 633d 4661        self.rc=Fa
+00049070: 6c73 650a 2020 2020 2020 2020 2020 2020  lse.            
+00049080: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00049090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000490a0: 2020 2020 2020 7365 6c66 2e72 6573 756c        self.resul
+000490b0: 743d 6675 6e63 282a 6e69 6e70 732c 2a2a  t=func(*ninps,**
+000490c0: 6e6f 7074 7329 0a20 2020 2020 2020 2020  nopts).         
+000490d0: 2020 2020 2020 2069 6620 7365 6c66 2e6c         if self.l
+000490e0: 6f67 5f61 6c6c 3a0a 2020 2020 2020 2020  og_all:.        
+000490f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00049100: 7466 2827 5243 3a7b 7d5c 6e52 6573 756c  tf('RC:{}\nResul
+00049110: 743a 7b7d 272e 666f 726d 6174 2873 656c  t:{}'.format(sel
+00049120: 662e 7263 2c73 656c 662e 7265 7375 6c74  f.rc,self.result
+00049130: 292c 6461 7465 3d54 7275 652c 6c6f 6766  ),date=True,logf
+00049140: 696c 653d 7365 6c66 2e6c 6f67 6669 6c65  ile=self.logfile
+00049150: 2c6c 6f67 3d73 656c 662e 6c6f 672c 6473  ,log=self.log,ds
+00049160: 703d 2766 2720 6966 2073 656c 662e 6c6f  p='f' if self.lo
+00049170: 6766 696c 6520 656c 7365 2027 6127 290a  gfile else 'a').
+00049180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049190: 7265 7475 726e 2073 656c 660a 2020 2020  return self.    
+000491a0: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+000491b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000491c0: 653d 4578 6365 7074 4d65 7373 6167 6528  e=ExceptMessage(
+000491d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000491e0: 2020 6966 2073 656c 662e 6c6f 6766 696c    if self.logfil
+000491f0: 6520 6f72 2073 656c 662e 6c6f 673a 0a20  e or self.log:. 
+00049200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049210: 2020 2070 7269 6e74 6628 652c 6461 7465     printf(e,date
+00049220: 3d54 7275 652c 6361 6c6c 6572 5f74 7265  =True,caller_tre
+00049230: 653d 5472 7565 2c63 616c 6c65 725f 7061  e=True,caller_pa
+00049240: 7265 6e74 3d27 312d 3527 2c63 616c 6c65  rent='1-5',calle
+00049250: 725f 6669 6c65 6e61 6d65 3d54 7275 652c  r_filename=True,
+00049260: 6361 6c6c 6572 5f6c 696e 655f 6e75 6d62  caller_line_numb
+00049270: 6572 3d54 7275 652c 6c6f 6766 696c 653d  er=True,logfile=
+00049280: 7365 6c66 2e6c 6f67 6669 6c65 2c6c 6f67  self.logfile,log
+00049290: 3d73 656c 662e 6c6f 672c 6473 703d 2766  =self.log,dsp='f
+000492a0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+000492b0: 2020 2069 6620 7365 6c66 2e65 7272 5f73     if self.err_s
+000492c0: 6372 6565 6e3a 0a20 2020 2020 2020 2020  creen:.         
+000492d0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+000492e0: 6628 652c 6d6f 6465 3d27 6527 290a 2020  f(e,mode='e').  
+000492f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00049300: 2073 656c 662e 6572 725f 6578 6974 3a0a   self.err_exit:.
+00049310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049320: 2020 2020 6f73 2e5f 6578 6974 2831 290a      os._exit(1).
+00049330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049340: 7365 6c66 2e72 633d 4661 6c73 650a 2020  self.rc=False.  
+00049350: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00049360: 6c66 2e65 7272 6f72 3d65 0a20 2020 2020  lf.error=e.     
+00049370: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00049380: 6e20 7365 6c66 0a20 2020 2020 2020 2065  n self.        e
+00049390: 6c69 6620 6973 696e 7374 616e 6365 2866  lif isinstance(f
+000493a0: 756e 632c 7374 7229 3a0a 2020 2020 2020  unc,str):.      
+000493b0: 2020 2020 2020 7365 6c66 2e72 632c 7365        self.rc,se
+000493c0: 6c66 2e72 6573 756c 742c 7365 6c66 2e65  lf.result,self.e
+000493d0: 7272 6f72 3d54 7279 436f 6465 2866 756e  rror=TryCode(fun
+000493e0: 632c 6465 6661 756c 743d 4661 6c73 652c  c,default=False,
+000493f0: 5f72 6574 7572 6e5f 3d54 7275 6529 0a20  _return_=True). 
+00049400: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00049410: 6e20 7365 6c66 0a20 2020 2020 2020 2073  n self.        s
+00049420: 656c 662e 7263 3d46 616c 7365 0a20 2020  elf.rc=False.   
+00049430: 2020 2020 2073 656c 662e 6572 726f 723d       self.error=
+00049440: 274e 6f74 205b 7375 7070 6f72 745d 2066  'Not [support] f
+00049450: 756e 6374 696f 6e27 0a20 2020 2020 2020  unction'.       
+00049460: 2069 6620 7365 6c66 2e6c 6f67 5f61 6c6c   if self.log_all
+00049470: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
+00049480: 696e 7466 2827 5243 3a7b 7d5c 6e52 6573  intf('RC:{}\nRes
+00049490: 756c 743a 7b7d 5c6e 4572 726f 723a 7b7d  ult:{}\nError:{}
+000494a0: 272e 666f 726d 6174 2873 656c 662e 7263  '.format(self.rc
+000494b0: 2c73 656c 662e 7265 7375 6c74 2c73 656c  ,self.result,sel
+000494c0: 662e 6572 726f 7229 2c64 6174 653d 5472  f.error),date=Tr
+000494d0: 7565 2c6c 6f67 6669 6c65 3d73 656c 662e  ue,logfile=self.
+000494e0: 6c6f 6766 696c 652c 6c6f 673d 7365 6c66  logfile,log=self
+000494f0: 2e6c 6f67 2c64 7370 3d27 6627 2069 6620  .log,dsp='f' if 
+00049500: 7365 6c66 2e6c 6f67 6669 6c65 2065 6c73  self.logfile els
+00049510: 6520 2761 2729 0a20 2020 2020 2020 2072  e 'a').        r
+00049520: 6574 7572 6e20 7365 6c66 0a0a 2020 2020  eturn self..    
+00049530: 6465 6620 5265 7375 6c74 2873 656c 6629  def Result(self)
+00049540: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00049550: 2073 656c 662e 7265 7375 6c74 0a0a 2020   self.result..  
+00049560: 2020 6465 6620 5263 2873 656c 6629 3a0a    def Rc(self):.
+00049570: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00049580: 656c 662e 7263 0a0a 2020 2020 6465 6620  elf.rc..    def 
+00049590: 4572 726f 7228 7365 6c66 293a 0a20 2020  Error(self):.   
+000495a0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000495b0: 2e65 7272 6f72 0a0a 636c 6173 7320 5245  .error..class RE
+000495c0: 5455 524e 3a0a 2020 2020 2727 2754 656d  TURN:.    '''Tem
+000495d0: 706f 7261 7279 2074 7279 2074 6f20 5245  porary try to RE
+000495e0: 5455 524e 2076 616c 7565 2064 6566 696e  TURN value defin
+000495f0: 6527 2727 0a20 2020 2064 6566 205f 5f69  e'''.    def __i
+00049600: 6e69 745f 5f28 7365 6c66 2c2a 6461 7461  nit__(self,*data
+00049610: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2020  ,**opts):.      
+00049620: 2020 7365 6c66 2e72 633d 6f70 7473 2e67    self.rc=opts.g
+00049630: 6574 2827 7263 272c 6f70 7473 2e67 6574  et('rc',opts.get
+00049640: 2827 5243 272c 4e6f 6e65 2929 0a20 2020  ('RC',None)).   
+00049650: 2020 2020 2069 6620 6c65 6e28 6461 7461       if len(data
+00049660: 2920 3d3d 2031 3a0a 2020 2020 2020 2020  ) == 1:.        
+00049670: 2020 2020 7365 6c66 2e64 6174 613d 6461      self.data=da
+00049680: 7461 5b30 5d0a 2020 2020 2020 2020 656c  ta[0].        el
+00049690: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000496a0: 7365 6c66 2e64 6174 613d 6461 7461 0a20  self.data=data. 
+000496b0: 2020 2020 2020 2073 656c 662e 696e 666f         self.info
+000496c0: 3d7b 7d0a 2020 2020 2020 2020 6966 206f  ={}.        if o
+000496d0: 7074 732e 6765 7428 2769 6e66 6f27 2c54  pts.get('info',T
+000496e0: 7275 6529 2069 7320 5472 7565 3a0a 2020  rue) is True:.  
+000496f0: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
+00049700: 6e66 6f5b 2774 696d 6527 5d3d 5449 4d45  nfo['time']=TIME
+00049710: 2829 2e49 6e74 2829 0a20 2020 2020 2020  ().Int().       
+00049720: 2020 2020 2069 6620 6f70 7473 2e67 6574       if opts.get
+00049730: 2827 6675 6e63 7469 6f6e 272c 5472 7565  ('function',True
+00049740: 2920 6973 2054 7275 653a 0a20 2020 2020  ) is True:.     
+00049750: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00049760: 696e 666f 5b27 6675 6e63 7469 6f6e 275d  info['function']
+00049770: 3d46 756e 6374 696f 6e4e 616d 6528 2a2a  =FunctionName(**
+00049780: 7b27 7061 7265 6e74 273a 312c 2761 7267  {'parent':1,'arg
+00049790: 7327 3a54 7275 652c 276c 696e 655f 6e75  s':True,'line_nu
+000497a0: 6d62 6572 273a 5472 7565 2c27 6669 6c65  mber':True,'file
+000497b0: 6e61 6d65 273a 5472 7565 7d29 0a20 2020  name':True}).   
+000497c0: 2020 2020 2020 2020 2069 6620 6f70 7473           if opts
+000497d0: 2e67 6574 2827 7061 7265 6e74 2729 2069  .get('parent') i
+000497e0: 7320 5472 7565 3a0a 2020 2020 2020 2020  s True:.        
+000497f0: 2020 2020 2020 2020 7365 6c66 2e69 6e66          self.inf
+00049800: 6f5b 2770 6172 656e 7427 5d3d 4675 6e63  o['parent']=Func
+00049810: 7469 6f6e 4e61 6d65 282a 2a7b 2770 6172  tionName(**{'par
+00049820: 656e 7427 3a32 2c27 6c69 6e65 5f6e 756d  ent':2,'line_num
+00049830: 6265 7227 3a54 7275 652c 2766 696c 656e  ber':True,'filen
+00049840: 616d 6527 3a54 7275 657d 290a 2020 2020  ame':True}).    
+00049850: 2020 2020 2020 2020 6966 2027 6d73 6727          if 'msg'
+00049860: 2069 6e20 6f70 7473 3a20 7365 6c66 2e69   in opts: self.i
+00049870: 6e66 6f5b 276d 7367 275d 3d6f 7074 732e  nfo['msg']=opts.
+00049880: 6765 7428 276d 7367 2729 0a20 2020 2020  get('msg').     
+00049890: 2020 2020 2020 2069 6620 276e 6574 776f         if 'netwo
+000498a0: 726b 2720 696e 206f 7074 733a 2073 656c  rk' in opts: sel
+000498b0: 662e 696e 666f 5b27 6e65 7477 6f72 6b27  f.info['network'
+000498c0: 5d3d 6f70 7473 2e67 6574 2827 6e65 7477  ]=opts.get('netw
+000498d0: 6f72 6b27 290a 0a20 2020 2064 6566 2047  ork')..    def G
+000498e0: 6574 2873 656c 662c 2a6f 2c2a 2a6f 7074  et(self,*o,**opt
+000498f0: 7329 3a0a 2020 2020 2020 2020 6966 206e  s):.        if n
+00049900: 6f74 206f 3a20 6f70 7473 5b27 6465 6661  ot o: opts['defa
+00049910: 756c 7427 5d3d 276f 7267 270a 2020 2020  ult']='org'.    
+00049920: 2020 2020 7265 7475 726e 2047 6574 2873      return Get(s
+00049930: 656c 662e 6461 7461 2c2a 6f2c 2a2a 6f70  elf.data,*o,**op
+00049940: 7473 290a 0a63 6c61 7373 206b 5468 7265  ts)..class kThre
+00049950: 6164 2854 6872 6561 6429 3a0a 2020 2020  ad(Thread):.    
+00049960: 2727 270a 2020 2020 7420 3d20 6b54 6872  '''.    t = kThr
+00049970: 6561 6428 7461 7267 6574 3d66 6f6f 2c20  ead(target=foo, 
+00049980: 6172 6773 3d28 2777 6f72 6c64 2127 2c29  args=('world!',)
+00049990: 2920 2320 6465 6669 6e65 0a20 2020 2074  ) # define.    t
+000499a0: 2e73 7461 7274 2829 2023 2073 7461 7274  .start() # start
+000499b0: 0a20 2020 2070 7269 6e74 2874 2e67 6574  .    print(t.get
+000499c0: 2829 2920 2023 2067 6574 2072 6573 756c  ())  # get resul
+000499d0: 740a 2020 2020 2727 270a 2020 2020 6465  t.    '''.    de
+000499e0: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+000499f0: 2067 726f 7570 3d4e 6f6e 652c 2074 6172   group=None, tar
+00049a00: 6765 743d 4e6f 6e65 2c20 6e61 6d65 3d4e  get=None, name=N
+00049a10: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00049a20: 2061 7267 733d 2829 2c20 6b77 6172 6773   args=(), kwargs
+00049a30: 3d7b 7d2c 2056 6572 626f 7365 3d4e 6f6e  ={}, Verbose=Non
+00049a40: 652c 2064 6566 6175 6c74 3d4e 6f6e 6529  e, default=None)
+00049a50: 3a0a 2020 2020 2020 2020 6966 2050 7956  :.        if PyV
+00049a60: 6572 2833 293a 0a20 2020 2020 2020 2020  er(3):.         
+00049a70: 2020 2054 6872 6561 642e 5f5f 696e 6974     Thread.__init
+00049a80: 5f5f 2873 656c 662c 2067 726f 7570 2c20  __(self, group, 
+00049a90: 7461 7267 6574 2c20 6e61 6d65 2c20 6172  target, name, ar
+00049aa0: 6773 2c20 6b77 6172 6773 290a 2020 2020  gs, kwargs).    
+00049ab0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00049ac0: 2020 2020 2020 5468 7265 6164 2e5f 5f69        Thread.__i
+00049ad0: 6e69 745f 5f28 7365 6c66 2c20 6772 6f75  nit__(self, grou
+00049ae0: 702c 2074 6172 6765 742c 206e 616d 652c  p, target, name,
+00049af0: 2061 7267 732c 206b 7761 7267 732c 2056   args, kwargs, V
+00049b00: 6572 626f 7365 290a 2020 2020 2020 2020  erbose).        
+00049b10: 7365 6c66 2e5f 7265 7475 726e 203d 2064  self._return = d
+00049b20: 6566 6175 6c74 0a0a 2020 2020 6465 6620  efault..    def 
+00049b30: 7275 6e28 7365 6c66 293a 0a20 2020 2020  run(self):.     
+00049b40: 2020 2069 6620 5079 5665 7228 3329 3a0a     if PyVer(3):.
+00049b50: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00049b60: 656c 662e 5f74 6172 6765 7420 6973 206e  elf._target is n
+00049b70: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00049b80: 2020 2020 2020 2020 2073 656c 662e 5f72           self._r
+00049b90: 6574 7572 6e20 3d20 7365 6c66 2e5f 7461  eturn = self._ta
+00049ba0: 7267 6574 282a 7365 6c66 2e5f 6172 6773  rget(*self._args
+00049bb0: 2c2a 2a73 656c 662e 5f6b 7761 7267 7329  ,**self._kwargs)
+00049bc0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00049bd0: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00049be0: 6c66 2e5f 5468 7265 6164 5f5f 7461 7267  lf._Thread__targ
+00049bf0: 6574 2069 7320 6e6f 7420 4e6f 6e65 3a0a  et is not None:.
+00049c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049c10: 7365 6c66 2e5f 7265 7475 726e 203d 2073  self._return = s
+00049c20: 656c 662e 5f54 6872 6561 645f 5f74 6172  elf._Thread__tar
+00049c30: 6765 7428 2a73 656c 662e 5f54 6872 6561  get(*self._Threa
+00049c40: 645f 5f61 7267 732c 0a20 2020 2020 2020  d__args,.       
+00049c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049c70: 2020 2020 2020 2020 202a 2a73 656c 662e           **self.
+00049c80: 5f54 6872 6561 645f 5f6b 7761 7267 7329  _Thread__kwargs)
+00049c90: 0a20 2020 2064 6566 2067 6574 2873 656c  .    def get(sel
+00049ca0: 6629 3a0a 2020 2020 2020 2020 6966 2073  f):.        if s
+00049cb0: 656c 662e 5f74 7374 6174 655f 6c6f 636b  elf._tstate_lock
+00049cc0: 3a0a 2020 2020 2020 2020 2020 2020 5468  :.            Th
+00049cd0: 7265 6164 2e6a 6f69 6e28 7365 6c66 290a  read.join(self).
+00049ce0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00049cf0: 726e 2073 656c 662e 5f72 6574 7572 6e0a  rn self._return.
+00049d00: 2020 2020 2020 2020 7265 7475 726e 204e          return N
+00049d10: 6f6e 650a 0a20 2020 2064 6566 2073 746f  one..    def sto
+00049d20: 7028 7365 6c66 2c72 6574 7279 5f6e 756d  p(self,retry_num
+00049d30: 3d31 3029 3a0a 2020 2020 2020 2020 6465  =10):.        de
+00049d40: 6620 5f61 7379 6e63 5f72 6169 7365 2874  f _async_raise(t
+00049d50: 685f 6964 2c65 7865 5f74 7970 6529 3a0a  h_id,exe_type):.
+00049d60: 2020 2020 2020 2020 2020 2020 7468 5f69              th_i
+00049d70: 643d 6374 7970 6573 2e63 5f6c 6f6e 6728  d=ctypes.c_long(
+00049d80: 7468 5f69 6429 0a20 2020 2020 2020 2020  th_id).         
+00049d90: 2020 2069 6620 6e6f 7420 696e 7370 6563     if not inspec
+00049da0: 742e 6973 636c 6173 7328 6578 655f 7479  t.isclass(exe_ty
+00049db0: 7065 293a 0a20 2020 2020 2020 2020 2020  pe):.           
+00049dc0: 2020 2020 2065 7865 5f74 7970 653d 7479       exe_type=ty
+00049dd0: 7065 2865 7865 5f74 7970 6529 0a20 2020  pe(exe_type).   
+00049de0: 2020 2020 2020 2020 2072 6573 203d 2063           res = c
+00049df0: 7479 7065 732e 7079 7468 6f6e 6170 692e  types.pythonapi.
+00049e00: 5079 5468 7265 6164 5374 6174 655f 5365  PyThreadState_Se
+00049e10: 7441 7379 6e63 4578 6328 7468 5f69 642c  tAsyncExc(th_id,
+00049e20: 2063 7479 7065 732e 7079 5f6f 626a 6563   ctypes.py_objec
+00049e30: 7428 6578 655f 7479 7065 2929 0a20 2020  t(exe_type)).   
+00049e40: 2020 2020 2020 2020 2069 6620 7265 7320           if res 
+00049e50: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
+00049e60: 2020 2020 2020 2370 7269 6e74 2822 496e        #print("In
+00049e70: 7661 6c69 6420 7468 7265 6164 2069 6428  valid thread id(
+00049e80: 7b7d 2922 2e66 6f72 6d61 7428 7468 5f69  {})".format(th_i
+00049e90: 6429 290a 2020 2020 2020 2020 2020 2020  d)).            
+00049ea0: 2020 2020 7265 7475 726e 202d 310a 2020      return -1.  
+00049eb0: 2020 2020 2020 2020 2020 656c 6966 2072            elif r
+00049ec0: 6573 2021 3d20 313a 0a20 2020 2020 2020  es != 1:.       
+00049ed0: 2020 2020 2020 2020 2063 7479 7065 732e           ctypes.
+00049ee0: 7079 7468 6f6e 6170 692e 5079 5468 7265  pythonapi.PyThre
+00049ef0: 6164 5374 6174 655f 5365 7441 7379 6e63  adState_SetAsync
+00049f00: 4578 6328 7468 5f69 642c 204e 6f6e 6529  Exc(th_id, None)
+00049f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00049f20: 2072 6169 7365 2053 7973 7465 6d45 7272   raise SystemErr
+00049f30: 6f72 2822 5468 7265 6164 5374 6f70 2066  or("ThreadStop f
+00049f40: 6169 6c65 6422 290a 2020 2020 2020 2020  ailed").        
+00049f50: 2020 2020 2320 7374 6f70 7065 6420 7468      # stopped th
+00049f60: 7265 6164 0a20 2020 2020 2020 2020 2020  read.           
+00049f70: 2072 6574 7572 6e20 300a 2020 2020 2020   return 0.      
+00049f80: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+00049f90: 2872 6574 7279 5f6e 756d 293a 0a20 2020  (retry_num):.   
+00049fa0: 2020 2020 2020 2020 2065 7869 745f 6964           exit_id
+00049fb0: 3d5f 6173 796e 635f 7261 6973 6528 7365  =_async_raise(se
+00049fc0: 6c66 2e69 6465 6e74 2c20 5379 7374 656d  lf.ident, System
+00049fd0: 4578 6974 290a 2020 2020 2020 2020 2020  Exit).          
+00049fe0: 2020 6966 2065 7869 745f 6964 203d 3d20    if exit_id == 
+00049ff0: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+0004a000: 2020 2073 656c 662e 5f69 735f 7374 6f70     self._is_stop
+0004a010: 7065 643d 5472 7565 0a20 2020 2020 2020  ped=True.       
+0004a020: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0004a030: 5472 7565 2023 2073 746f 7070 6564 0a20  True # stopped. 
+0004a040: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0004a050: 6578 6974 5f69 6420 3d3d 202d 313a 2023  exit_id == -1: #
+0004a060: 4e6f 2074 6872 6561 640a 2020 2020 2020  No thread.      
+0004a070: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+0004a080: 6973 5f73 746f 7070 6564 3d54 7275 650a  is_stopped=True.
+0004a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a0a0: 7265 7475 726e 204e 6f6e 650a 2020 2020  return None.    
+0004a0b0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+0004a0c0: 2023 2073 746f 7020 4661 696c 0a0a 2020   # stop Fail..  
+0004a0d0: 2020 6465 6620 6973 416c 6976 6528 7365    def isAlive(se
+0004a0e0: 6c66 293a 0a20 2020 2020 2020 2023 6966  lf):.        #if
+0004a0f0: 206e 6f74 2073 656c 662e 5f74 7374 6174   not self._tstat
+0004a100: 655f 6c6f 636b 2061 6e64 206e 6f74 2073  e_lock and not s
+0004a110: 656c 662e 5f69 735f 7374 6f70 7065 643a  elf._is_stopped:
+0004a120: 2072 6574 7572 6e20 4e6f 6e65 2023 204e   return None # N
+0004a130: 6f74 2073 7461 7274 6564 0a20 2020 2020  ot started.     
+0004a140: 2020 2069 6620 6e6f 7420 7365 6c66 2e5f     if not self._
+0004a150: 7473 7461 7465 5f6c 6f63 6b20 616e 6420  tstate_lock and 
+0004a160: 6e6f 7420 7365 6c66 2e5f 6964 656e 743a  not self._ident:
+0004a170: 2072 6574 7572 6e20 4e6f 6e65 2023 204e   return None # N
+0004a180: 6f74 2073 7461 7274 6564 0a20 2020 2020  ot started.     
+0004a190: 2020 2069 6620 6e6f 7420 7365 6c66 2e5f     if not self._
+0004a1a0: 7473 7461 7465 5f6c 6f63 6b20 6f72 2073  tstate_lock or s
+0004a1b0: 656c 662e 5f69 735f 7374 6f70 7065 643a  elf._is_stopped:
+0004a1c0: 2072 6574 7572 6e20 4661 6c73 6520 2353   return False #S
+0004a1d0: 746f 7070 6564 0a20 2020 2020 2020 2072  topped.        r
+0004a1e0: 6574 7572 6e20 5472 7565 2023 5275 6e6e  eturn True #Runn
+0004a1f0: 696e 670a 0a20 2020 2064 6566 204e 616d  ing..    def Nam
+0004a200: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
+0004a210: 2072 6574 7572 6e20 7365 6c66 2e5f 6e61   return self._na
+0004a220: 6d65 0a20 2020 2064 6566 2041 7267 7328  me.    def Args(
+0004a230: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+0004a240: 6574 7572 6e20 7365 6c66 2e5f 6172 6773  eturn self._args
+0004a250: 2c73 656c 662e 5f6b 7761 7267 730a 2020  ,self._kwargs.  
+0004a260: 2020 6465 6620 4964 2873 656c 6629 3a0a    def Id(self):.
+0004a270: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0004a280: 7461 6e63 6528 7365 6c66 2e69 6465 6e74  tance(self.ident
+0004a290: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
+0004a2a0: 2020 2072 6574 7572 6e20 7365 6c66 2e69     return self.i
+0004a2b0: 6465 6e74 0a20 2020 2020 2020 2072 6574  dent.        ret
+0004a2c0: 7572 6e20 4e6f 6e65 2023 206e 6f74 2073  urn None # not s
+0004a2d0: 7461 7274 6564 0a20 2020 2064 6566 2050  tarted.    def P
+0004a2e0: 5049 4428 7365 6c66 293a 0a20 2020 2020  PID(self):.     
+0004a2f0: 2020 2072 6574 7572 6e20 6f73 2e67 6574     return os.get
+0004a300: 7069 6428 290a 0a64 6566 2050 726f 6772  pid()..def Progr
+0004a310: 6573 7328 7379 6d62 6f6c 3d27 2e27 2c2a  ess(symbol='.',*
+0004a320: 2a6f 7074 7329 3a0a 2020 2020 7374 6172  *opts):.    star
+0004a330: 745f 6e65 776c 696e 653d 6f70 7473 2e67  t_newline=opts.g
+0004a340: 6574 2827 7374 6172 745f 6e65 776c 696e  et('start_newlin
+0004a350: 6527 2c46 616c 7365 290a 2020 2020 656e  e',False).    en
+0004a360: 645f 6e65 776c 696e 653d 6f70 7473 2e67  d_newline=opts.g
+0004a370: 6574 2827 656e 645f 6e65 776c 696e 6527  et('end_newline'
+0004a380: 2c6f 7074 732e 6765 7428 276e 6577 6c69  ,opts.get('newli
+0004a390: 6e65 272c 5472 7565 2929 0a20 2020 206c  ne',True)).    l
+0004a3a0: 6f67 3d6f 7074 732e 6765 7428 276c 6f67  og=opts.get('log
+0004a3b0: 272c 4e6f 6e65 290a 2020 2020 696e 7465  ',None).    inte
+0004a3c0: 7276 616c 3d49 6e74 286f 7074 732e 6765  rval=Int(opts.ge
+0004a3d0: 7428 2769 6e74 6572 7661 6c27 292c 3529  t('interval'),5)
+0004a3e0: 0a20 2020 2074 696d 656f 7574 3d49 6e74  .    timeout=Int
+0004a3f0: 286f 7074 732e 6765 7428 2774 696d 656f  (opts.get('timeo
+0004a400: 7574 2729 2c33 3630 302a 3130 3029 0a20  ut'),3600*100). 
+0004a410: 2020 206d 6f64 653d 6f70 7473 2e67 6574     mode=opts.get
+0004a420: 2827 6d6f 6465 272c 2773 2729 0a20 2020  ('mode','s').   
+0004a430: 2073 746f 703d 6f70 7473 5b27 7374 6f70   stop=opts['stop
+0004a440: 275d 2069 6620 2773 746f 7027 2069 6e20  '] if 'stop' in 
+0004a450: 6f70 7473 2065 6c73 6520 4661 6c73 650a  opts else False.
+0004a460: 2020 2020 6465 6c61 793d 6f70 7473 5b27      delay=opts['
+0004a470: 6465 6c61 7927 5d20 6966 2027 6465 6c61  delay'] if 'dela
+0004a480: 7927 2069 6e20 6f70 7473 2065 6c73 6520  y' in opts else 
+0004a490: 4661 6c73 650a 2020 2020 6c6f 6361 6c5f  False.    local_
+0004a4a0: 7072 696e 7465 643d 4661 6c73 650a 2020  printed=False.  
+0004a4b0: 2020 6966 2073 7461 7274 5f6e 6577 6c69    if start_newli
+0004a4c0: 6e65 3a0a 2020 2020 2020 2020 7072 696e  ne:.        prin
+0004a4d0: 7466 2827 272c 6967 6e6f 7265 5f65 6d70  tf('',ignore_emp
+0004a4e0: 7479 3d46 616c 7365 2c63 616c 6c65 725f  ty=False,caller_
+0004a4f0: 7061 7265 6e74 3d31 2c73 7461 7274 5f6e  parent=1,start_n
+0004a500: 6577 6c69 6e65 3d27 6175 746f 272c 6c6f  ewline='auto',lo
+0004a510: 673d 6c6f 672c 656e 643d 2727 2c6d 6f64  g=log,end='',mod
+0004a520: 653d 6d6f 6465 290a 2020 2020 5469 6d65  e=mode).    Time
+0004a530: 3d54 494d 4528 290a 2020 2020 7768 696c  =TIME().    whil
+0004a540: 6520 5472 7565 3a0a 2020 2020 2020 2020  e True:.        
+0004a550: 6966 2049 7354 7275 6528 7374 6f70 2920  if IsTrue(stop) 
+0004a560: 6f72 2028 7469 6d65 6f75 7420 3e20 3020  or (timeout > 0 
+0004a570: 616e 6420 5469 6d65 2e4f 7574 2874 696d  and Time.Out(tim
+0004a580: 656f 7574 2929 3a20 6272 6561 6b0a 2020  eout)): break.  
+0004a590: 2020 2020 2020 6966 2064 656c 6179 3a0a        if delay:.
+0004a5a0: 2020 2020 2020 2020 2020 2020 6966 2028              if (
+0004a5b0: 6973 696e 7374 616e 6365 2864 656c 6179  isinstance(delay
+0004a5c0: 2c69 6e74 2920 616e 6420 6e6f 7420 2054  ,int) and not  T
+0004a5d0: 696d 652e 4f75 7428 6465 6c61 7929 2920  ime.Out(delay)) 
+0004a5e0: 6f72 206e 6f74 2049 7354 7275 6528 6465  or not IsTrue(de
+0004a5f0: 6c61 7929 3a20 236c 6573 7320 6465 6c61  lay): #less dela
+0004a600: 7920 7469 6d65 2074 6865 6e20 736b 6970  y time then skip
+0004a610: 2070 726f 6772 6573 7320 6c6f 670a 2020   progress log.  
+0004a620: 2020 2020 2020 2020 2020 2020 2020 7469                ti
+0004a630: 6d65 2e73 6c65 6570 2830 2e33 290a 2020  me.sleep(0.3).  
+0004a640: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0004a650: 6e74 696e 7565 0a20 2020 2020 2020 2070  ntinue.        p
+0004a660: 7269 6e74 6628 7379 6d62 6f6c 2c64 6972  rintf(symbol,dir
+0004a670: 6563 743d 5472 7565 2c6c 6f67 3d6c 6f67  ect=True,log=log
+0004a680: 2c6c 6f67 5f6c 6576 656c 3d31 2c6d 6f64  ,log_level=1,mod
+0004a690: 653d 6d6f 6465 290a 2020 2020 2020 2020  e=mode).        
+0004a6a0: 6c6f 6361 6c5f 7072 696e 7465 643d 5472  local_printed=Tr
+0004a6b0: 7565 0a20 2020 2020 2020 2074 696d 652e  ue.        time.
+0004a6c0: 736c 6565 7028 696e 7465 7276 616c 290a  sleep(interval).
+0004a6d0: 2020 2020 6966 2065 6e64 5f6e 6577 6c69      if end_newli
+0004a6e0: 6e65 2061 6e64 206c 6f63 616c 5f70 7269  ne and local_pri
+0004a6f0: 6e74 6564 3a0a 2020 2020 2020 2020 7072  nted:.        pr
+0004a700: 696e 7466 2827 272c 6967 6e6f 7265 5f65  intf('',ignore_e
+0004a710: 6d70 7479 3d46 616c 7365 2c63 616c 6c65  mpty=False,calle
+0004a720: 725f 7061 7265 6e74 3d31 2c6e 6f5f 696e  r_parent=1,no_in
+0004a730: 7472 6f3d 5472 7565 2c6c 6f67 3d6c 6f67  tro=True,log=log
+0004a740: 2c6d 6f64 653d 6d6f 6465 290a 0a64 6566  ,mode=mode)..def
+0004a750: 2047 6574 4f70 7456 616c 7565 2864 6174   GetOptValue(dat
+0004a760: 612c 6b65 792c 6465 6661 756c 743d 4e6f  a,key,default=No
+0004a770: 6e65 2c64 6174 615f 7479 7065 3d4e 6f6e  ne,data_type=Non
+0004a780: 652c 6465 6661 756c 745f 7769 7468 5f6e  e,default_with_n
+0004a790: 6f6e 653d 4661 6c73 6529 3a0a 2020 2020  one=False):.    
+0004a7a0: 2320 6765 7420 6b65 7920 7661 6c75 6520  # get key value 
+0004a7b0: 696e 2061 2064 6963 7469 6f6e 6172 7920  in a dictionary 
+0004a7c0: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
+0004a7d0: 6365 2864 6174 612c 6469 6374 293a 0a20  ce(data,dict):. 
+0004a7e0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0004a7f0: 616e 6365 286b 6579 2c73 7472 293a 206b  ance(key,str): k
+0004a800: 6579 3d5b 6b65 795d 0a20 2020 2020 2020  ey=[key].       
+0004a810: 2066 6f72 206b 2069 6e20 6b65 793a 2023   for k in key: #
+0004a820: 2043 6865 636b 2061 6c6c 2077 616e 7420   Check all want 
+0004a830: 6b65 7973 2069 6e20 7468 6520 6469 6374  keys in the dict
+0004a840: 696f 6e61 7279 0a20 2020 2020 2020 2020  ionary.         
+0004a850: 2020 2069 6620 6b20 696e 2064 6174 613a     if k in data:
+0004a860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004a870: 2069 6620 6465 6661 756c 745f 7769 7468   if default_with
+0004a880: 5f6e 6f6e 653a 2023 2069 6620 4e6f 6e65  _none: # if None
+0004a890: 2064 6174 6120 7468 656e 2070 6173 7320   data then pass 
+0004a8a0: 746f 206e 6578 7420 6368 6563 6b0a 2020  to next check.  
+0004a8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004a8c0: 2020 6966 2049 734e 6f6e 6528 6461 7461    if IsNone(data
+0004a8d0: 5b6b 5d29 3a20 636f 6e74 696e 7565 0a20  [k]): continue. 
+0004a8e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0004a8f0: 6620 6461 7461 5f74 7970 653a 2023 2069  f data_type: # i
+0004a900: 6620 6469 6666 6572 656e 7420 7479 7065  f different type
+0004a910: 206f 6620 6461 7461 2074 6865 6e20 7061   of data then pa
+0004a920: 7373 2074 6f20 6e65 7874 2063 6865 636b  ss to next check
+0004a930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004a940: 2020 2020 2069 6620 6e6f 7420 5479 7065       if not Type
+0004a950: 2864 6174 615b 6b5d 2c64 6174 615f 7479  (data[k],data_ty
+0004a960: 7065 293a 2063 6f6e 7469 6e75 650a 2020  pe): continue.  
+0004a970: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0004a980: 7475 726e 2064 6174 615b 6b5d 0a20 2020  turn data[k].   
+0004a990: 2072 6574 7572 6e20 6465 6661 756c 7420   return default 
+0004a9a0: 2320 6e6f 7420 6d65 6574 2074 6865 6e20  # not meet then 
+0004a9b0: 6465 6661 756c 740a 0a23 6966 205f 5f6e  default..#if __n
+0004a9c0: 616d 655f 5f20 3d3d 2022 5f5f 6d61 696e  ame__ == "__main
+0004a9d0: 5f5f 223a 0a23 2020 2020 2320 496e 7465  __":.#    # Inte
+0004a9e0: 6765 720a 2320 2020 2070 7269 6e74 2822  ger.#    print("
+0004a9f0: 4765 7428 3132 3334 3529 3a22 2c47 6574  Get(12345):",Get
+0004aa00: 2831 3233 3435 2929 0a23 2020 2020 7072  (12345)).#    pr
+0004aa10: 696e 7428 2247 6574 2831 3233 3435 2c31  int("Get(12345,1
+0004aa20: 293a 222c 4765 7428 3132 3334 352c 3129  ):",Get(12345,1)
+0004aa30: 290a                                     ).
```

### Comparing `kmport-2.1.7/kmport.egg-info/PKG-INFO` & `kmport-2.1.8/kmport.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kmport
-Version: 2.1.7
+Version: 2.1.8
 Summary: Extended import function
 Home-page: https://github.com/kagepark/Import
 Author: Kage Park
 License: MIT
 Classifier: Programming Language :: Python :: 2
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: MIT License
```

### Comparing `kmport-2.1.7/setup.py` & `kmport-2.1.8/setup.py`

 * *Files identical despite different names*

