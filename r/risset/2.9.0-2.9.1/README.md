# Comparing `tmp/risset-2.9.0.tar.gz` & `tmp/risset-2.9.1-py3-none-any.whl.zip`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "risset-2.9.0.tar", last modified: Wed Apr 17 22:19:39 2024, max compression
+Zip archive data, at least v2.0 to extract, compression method=deflate
```

## filetype from diffoscope

```diff
@@ -1 +1 @@
-GzipFile
+ZipFile
```

## Comparing `risset-2.9.0.tar` & `risset.py`

 * *Files 21% similar despite different names*

```diff
@@ -1,11520 +1,7694 @@
-00000000: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-00000010: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000020: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000060: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-00000070: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-00000080: 3030 3030 3033 3400 3030 3030 3030 3030  0000034.00000000
-00000090: 3030 3000 3031 3032 3132 0020 7800 0000  000.010212. x...
-000000a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000000f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000100: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-00000110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000001f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000200: 3238 206d 7469 6d65 3d31 3731 3333 3932  28 mtime=1713392
-00000210: 3337 392e 3132 3037 3236 330a 0000 0000  379.1207263.....
-00000220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000002f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000003f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000400: 7269 7373 6574 2d32 2e39 2e30 2f00 0000  risset-2.9.0/...
-00000410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000460: 0000 0000 3030 3030 3737 3500 3030 3031  ....0000775.0001
-00000470: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-00000480: 3030 3030 3030 3000 3134 3631 3030 3435  0000000.14610045
-00000490: 3337 3300 3031 3036 3634 0020 3500 0000  373.010664. 5...
-000004a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000004f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000500: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-00000510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000520: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-00000530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000005f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000600: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-00000610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000660: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-00000670: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-00000680: 3030 3030 3033 3400 3030 3030 3030 3030  0000034.00000000
-00000690: 3030 3000 3031 3032 3132 0020 7800 0000  000.010212. x...
-000006a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000006f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000700: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-00000710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000007f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000800: 3238 206d 7469 6d65 3d31 3731 3333 3932  28 mtime=1713392
-00000810: 3337 392e 3132 3037 3236 330a 0000 0000  379.1207263.....
-00000820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000008f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000009f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a00: 7269 7373 6574 2d32 2e39 2e30 2f50 4b47  risset-2.9.0/PKG
-00000a10: 2d49 4e46 4f00 0000 0000 0000 0000 0000  -INFO...........
-00000a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000a60: 0000 0000 3030 3030 3634 3400 3030 3031  ....0000644.0001
-00000a70: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-00000a80: 3030 3234 3532 3600 3134 3631 3030 3435  0024526.14610045
-00000a90: 3337 3300 3031 3137 3730 0020 3000 0000  373.011770. 0...
-00000aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b00: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-00000b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b20: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-00000b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00000c00: 4d65 7461 6461 7461 2d56 6572 7369 6f6e  Metadata-Version
-00000c10: 3a20 322e 310a 4e61 6d65 3a20 7269 7373  : 2.1.Name: riss
-00000c20: 6574 0a56 6572 7369 6f6e 3a20 322e 392e  et.Version: 2.9.
-00000c30: 300a 5375 6d6d 6172 793a 2041 2070 6163  0.Summary: A pac
-00000c40: 6b61 6765 206d 616e 6167 6572 2066 6f72  kage manager for
-00000c50: 2063 736f 756e 640a 486f 6d65 2d70 6167   csound.Home-pag
-00000c60: 653a 2068 7474 7073 3a2f 2f67 6974 6875  e: https://githu
-00000c70: 622e 636f 6d2f 6373 6f75 6e64 2d70 6c75  b.com/csound-plu
-00000c80: 6769 6e73 2f72 6973 7365 740a 4175 7468  gins/risset.Auth
-00000c90: 6f72 3a20 4564 7561 7264 6f20 4d6f 6775  or: Eduardo Mogu
-00000ca0: 696c 6c61 6e73 6b79 0a41 7574 686f 722d  illansky.Author-
-00000cb0: 656d 6169 6c3a 2065 6475 6172 646f 2e6d  email: eduardo.m
-00000cc0: 6f67 7569 6c6c 616e 736b 7940 676d 6169  oguillansky@gmai
-00000cd0: 6c2e 636f 6d0a 5265 7175 6972 6573 2d50  l.com.Requires-P
-00000ce0: 7974 686f 6e3a 203e 3d33 2e38 0a44 6573  ython: >=3.8.Des
-00000cf0: 6372 6970 7469 6f6e 2d43 6f6e 7465 6e74  cription-Content
-00000d00: 2d54 7970 653a 2074 6578 742f 6d61 726b  -Type: text/mark
-00000d10: 646f 776e 0a52 6571 7569 7265 732d 4469  down.Requires-Di
-00000d20: 7374 3a20 7079 676d 656e 7473 0a52 6571  st: pygments.Req
-00000d30: 7569 7265 732d 4469 7374 3a20 6374 6373  uires-Dist: ctcs
-00000d40: 6f75 6e64 373e 3d30 2e33 2e30 0a52 6571  ound7>=0.3.0.Req
-00000d50: 7569 7265 732d 4469 7374 3a20 6d6b 646f  uires-Dist: mkdo
-00000d60: 6373 0a52 6571 7569 7265 732d 4469 7374  cs.Requires-Dist
-00000d70: 3a20 7265 7175 6573 7473 0a0a 215b 7269  : requests..![ri
-00000d80: 7373 6574 5d28 6173 7365 7473 2f72 6973  sset](assets/ris
-00000d90: 7365 742d 7469 746c 652e 706e 6729 0a0a  set-title.png)..
-00000da0: 2320 7269 7373 6574 3a20 6120 7061 636b  # risset: a pack
-00000db0: 6167 6520 6d61 6e61 6765 7220 666f 7220  age manager for 
-00000dc0: 6373 6f75 6e64 0a0a 5468 6973 2069 7320  csound..This is 
-00000dd0: 7468 6520 7265 706f 7369 746f 7279 206f  the repository o
-00000de0: 6620 7269 7373 6574 2c20 6120 7061 636b  f risset, a pack
-00000df0: 6167 6520 6d61 6e61 6765 7220 666f 7220  age manager for 
-00000e00: 6373 6f75 6e64 2065 7874 6572 6e61 6c0a  csound external.
-00000e10: 706c 7567 696e 7320 616e 6420 7573 6572  plugins and user
-00000e20: 2d64 6566 696e 6564 2d6f 7063 6f64 6573  -defined-opcodes
-00000e30: 2e20 5468 6520 696e 6465 7820 6167 6772  . The index aggr
-00000e40: 6567 6174 696e 6720 616c 6c20 6176 6169  egating all avai
-00000e50: 6c61 626c 6520 7061 636b 6167 6573 2069  lable packages i
-00000e60: 7320 6b65 7074 200a 6174 205b 7269 7373  s kept .at [riss
-00000e70: 6574 2d64 6174 615d 2868 7474 7073 3a2f  et-data](https:/
-00000e80: 2f67 6974 6875 622e 636f 6d2f 6373 6f75  /github.com/csou
-00000e90: 6e64 2d70 6c75 6769 6e73 2f72 6973 7365  nd-plugins/risse
-00000ea0: 742d 6461 7461 292e 0a0a 2320 496e 7374  t-data)...# Inst
-00000eb0: 616c 6c61 7469 6f6e 0a0a 6072 6973 7365  allation..`risse
-00000ec0: 7460 2064 6570 656e 6473 206f 6e6c 7920  t` depends only 
-00000ed0: 6f6e 2060 6769 7460 2061 6e64 2060 7079  on `git` and `py
-00000ee0: 7468 6f6e 3360 2028 3e3d 2033 2e39 2920  thon3` (>= 3.9) 
-00000ef0: 6265 696e 6720 696e 7374 616c 6c65 642e  being installed.
-00000f00: 0a0a 0a60 6060 6261 7368 0a70 6970 2069  ...```bash.pip i
-00000f10: 6e73 7461 6c6c 2072 6973 7365 740a 6060  nstall risset.``
-00000f20: 600a 0a54 6869 7320 7769 6c6c 2069 6e73  `..This will ins
-00000f30: 7461 6c6c 2074 6865 2073 6372 6970 7420  tall the script 
-00000f40: 2272 6973 7365 7422 2069 6e74 6f20 796f  "risset" into yo
-00000f50: 7572 2070 6174 680a 0a0a 2323 2320 4c69  ur path...### Li
-00000f60: 6e75 780a 0a49 6e20 6365 7274 6169 6e20  nux..In certain 
-00000f70: 6c69 6e75 7820 6469 7374 7269 6275 7469  linux distributi
-00000f80: 6f6e 7320 2875 6275 6e74 7529 2069 7420  ons (ubuntu) it 
-00000f90: 6973 206e 6f74 2061 6c6c 6f77 6564 2074  is not allowed t
-00000fa0: 6f20 696e 7374 616c 6c20 7061 636b 6167  o install packag
-00000fb0: 6573 2074 6f20 7468 650a 7379 7374 656d  es to the.system
-00000fc0: 2070 7974 686f 6e2e 2049 6e20 7468 6174   python. In that
-00000fd0: 2063 6173 6520 7468 6520 7265 636f 6d6d   case the recomm
-00000fe0: 656e 6465 6420 7761 7920 6973 2074 6f20  ended way is to 
-00000ff0: 696e 7374 616c 6c20 7269 7373 6574 2077  install risset w
-00001000: 6974 6869 6e0a 6974 7320 6f77 6e20 7669  ithin.its own vi
-00001010: 7274 7561 6c20 656e 7669 726f 6e6d 656e  rtual environmen
-00001020: 7420 7669 6120 6070 6970 7860 3a0a 0a60  t via `pipx`:..`
-00001030: 6060 6261 7368 0a73 7564 6f20 6170 7420  ``bash.sudo apt 
-00001040: 696e 7374 616c 6c20 7069 7078 0a70 6970  install pipx.pip
-00001050: 7820 696e 7374 616c 6c20 7269 7373 6574  x install risset
-00001060: 0a60 6060 0a0a 2d2d 2d2d 2d2d 2d2d 2d2d  .```..----------
-00001070: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00001080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00001090: 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2320 5175  ----------..# Qu
-000010a0: 6963 6b20 7374 6172 740a 0a23 2323 204c  ick start..### L
-000010b0: 6973 7420 616c 6c20 6465 6669 6e65 6420  ist all defined 
-000010c0: 7061 636b 6167 6573 0a0a 6060 6062 6173  packages..```bas
-000010d0: 680a 0a0a 2420 7269 7373 6574 206c 6973  h...$ risset lis
-000010e0: 740a 0a2a 2065 6c73 6520 2f31 2e31 382e  t..* else /1.18.
-000010f0: 3220 2020 2020 2020 2020 7c20 4d69 7363  2         | Misc
-00001100: 656c 6c61 6e65 6f75 7320 706c 7567 696e  ellaneous plugin
-00001110: 7320 5b6d 616e 7561 6c5d 0a20 2020 2020  s [manual].     
-00001120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001130: 2020 7c20 2020 2050 6174 683a 202f 686f    |    Path: /ho
-00001140: 6d65 2f65 6d2f 2e6c 6f63 616c 2f6c 6962  me/em/.local/lib
-00001150: 2f63 736f 756e 642f 362e 302f 706c 7567  /csound/6.0/plug
-00001160: 696e 7336 342f 6c69 6265 6c73 652e 736f  ins64/libelse.so
-00001170: 0a2a 2070 6174 6874 6f6f 6c73 202f 312e  .* pathtools /1.
-00001180: 3138 2e32 2020 2020 7c20 4372 6f73 732d  18.2    | Cross-
-00001190: 706c 6174 666f 726d 2070 6174 6820 6861  platform path ha
-000011a0: 6e64 6c69 6e67 2061 6e64 2073 7472 696e  ndling and strin
-000011b0: 6720 6f70 636f 6465 7320 5b6d 616e 7561  g opcodes [manua
-000011c0: 6c5d 0a20 2020 2020 2020 2020 2020 2020  l].             
-000011d0: 2020 2020 2020 2020 2020 7c20 2020 2050            |    P
-000011e0: 6174 683a 202f 686f 6d65 2f65 6d2f 2e6c  ath: /home/em/.l
-000011f0: 6f63 616c 2f6c 6962 2f63 736f 756e 642f  ocal/lib/csound/
-00001200: 362e 302f 706c 7567 696e 7336 342f 6c69  6.0/plugins64/li
-00001210: 6270 6174 6874 6f6f 6c73 2e73 6f0a 2a20  bpathtools.so.* 
-00001220: 6b6c 6962 202f 312e 3138 2e32 2020 2020  klib /1.18.2    
-00001230: 2020 2020 207c 2041 2068 6173 6874 6162       | A hashtab
-00001240: 6c65 2066 6f72 2063 736f 756e 6420 5b6d  le for csound [m
-00001250: 616e 7561 6c5d 0a20 2020 2020 2020 2020  anual].         
-00001260: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
-00001270: 2020 2050 6174 683a 202f 686f 6d65 2f65     Path: /home/e
-00001280: 6d2f 2e6c 6f63 616c 2f6c 6962 2f63 736f  m/.local/lib/cso
-00001290: 756e 642f 362e 302f 706c 7567 696e 7336  und/6.0/plugins6
-000012a0: 342f 6c69 626b 6c69 622e 736f 0a2a 2062  4/libklib.so.* b
-000012b0: 656f 7363 202f 312e 3138 2e32 2020 2020  eosc /1.18.2    
-000012c0: 2020 2020 7c20 4261 6e64 2d65 6e68 616e      | Band-enhan
-000012d0: 6365 6420 6f73 6369 6c6c 6174 6f72 7320  ced oscillators 
-000012e0: 696d 706c 656d 656e 7469 6e67 2074 6865  implementing the
-000012f0: 2073 696e 652b 6e6f 6973 6520 7379 6e74   sine+noise synt
-00001300: 6865 7369 7320 6d6f 6465 6c20 5b6d 616e  hesis model [man
-00001310: 7561 6c5d 0a20 2020 2020 2020 2020 2020  ual].           
-00001320: 2020 2020 2020 2020 2020 2020 7c20 2020              |   
-00001330: 2050 6174 683a 202f 686f 6d65 2f65 6d2f   Path: /home/em/
-00001340: 2e6c 6f63 616c 2f6c 6962 2f63 736f 756e  .local/lib/csoun
-00001350: 642f 362e 302f 706c 7567 696e 7336 342f  d/6.0/plugins64/
-00001360: 6c69 6262 656f 7363 2e73 6f0a 2a20 6a73  libbeosc.so.* js
-00001370: 6678 202f 312e 3138 2e32 2020 2020 2020  fx /1.18.2      
-00001380: 2020 207c 206a 7366 7820 7375 7070 6f72     | jsfx suppor
-00001390: 7420 666f 7220 6373 6f75 6e64 205b 6d61  t for csound [ma
-000013a0: 6e75 616c 5d0a 2020 2020 2020 2020 2020  nual].          
-000013b0: 2020 2020 2020 2020 2020 2020 207c 2020               |  
-000013c0: 2020 5061 7468 3a20 2f68 6f6d 652f 656d    Path: /home/em
-000013d0: 2f2e 6c6f 6361 6c2f 6c69 622f 6373 6f75  /.local/lib/csou
-000013e0: 6e64 2f36 2e30 2f70 6c75 6769 6e73 3634  nd/6.0/plugins64
-000013f0: 2f6c 6962 6a73 6678 2e73 6f0a 2a20 706f  /libjsfx.so.* po
-00001400: 6c79 202f 312e 3138 2e32 2020 2020 2020  ly /1.18.2      
-00001410: 2020 207c 204d 756c 7469 706c 6520 2870     | Multiple (p
-00001420: 6172 616c 6c65 6c20 6f72 2073 6571 7565  arallel or seque
-00001430: 6e74 6961 6c29 2069 6e73 7461 6e63 6573  ntial) instances
-00001440: 206f 6620 616e 206f 7063 6f64 6520 5b6d   of an opcode [m
-00001450: 616e 7561 6c5d 0a20 2020 2020 2020 2020  anual].         
-00001460: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
-00001470: 2020 2050 6174 683a 202f 686f 6d65 2f65     Path: /home/e
-00001480: 6d2f 2e6c 6f63 616c 2f6c 6962 2f63 736f  m/.local/lib/cso
-00001490: 756e 642f 362e 302f 706c 7567 696e 7336  und/6.0/plugins6
-000014a0: 342f 6c69 6270 6f6c 792e 736f 0a2a 2073  4/libpoly.so.* s
-000014b0: 6e64 6d65 7461 202f 312e 3138 2e32 2020  ndmeta /1.18.2  
-000014c0: 2020 2020 7c20 6f70 636f 6465 7320 7573      | opcodes us
-000014d0: 696e 6720 6c69 6273 6e64 6669 6c65 205b  ing libsndfile [
-000014e0: 6d61 6e75 616c 5d0a 2020 2020 2020 2020  manual].        
-000014f0: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00001500: 2020 2020 5061 7468 3a20 2f68 6f6d 652f      Path: /home/
-00001510: 656d 2f2e 6c6f 6361 6c2f 6c69 622f 6373  em/.local/lib/cs
-00001520: 6f75 6e64 2f36 2e30 2f70 6c75 6769 6e73  ound/6.0/plugins
-00001530: 3634 2f6c 6962 736e 646d 6574 612e 736f  64/libsndmeta.so
-00001540: 0a2a 2072 6973 7365 7420 2f31 2e31 382e  .* risset /1.18.
-00001550: 3220 2020 2020 2020 7c20 4f70 636f 6465  2       | Opcode
-00001560: 7320 746f 2061 6363 6573 7320 7269 7373  s to access riss
-00001570: 6574 2070 6163 6b61 6765 206d 6574 6164  et package metad
-00001580: 6174 6120 5b6d 616e 7561 6c5d 0a20 2020  ata [manual].   
-00001590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000015a0: 2020 2020 7c20 2020 2050 6174 683a 202f      |    Path: /
-000015b0: 686f 6d65 2f65 6d2f 2e6c 6f63 616c 2f6c  home/em/.local/l
-000015c0: 6962 2f63 736f 756e 642f 362e 302f 706c  ib/csound/6.0/pl
-000015d0: 7567 696e 7336 342f 6c69 6272 6973 7365  ugins64/librisse
-000015e0: 742e 736f 0a2d 2076 7374 3320 2f30 2e33  t.so.- vst3 /0.3
-000015f0: 2e30 2020 2020 2020 2020 2020 7c20 486f  .0          | Ho
-00001600: 7374 2076 7374 3320 706c 7567 696e 7320  st vst3 plugins 
-00001610: 696e 2063 736f 756e 640a 2d20 6368 7561  in csound.- chua
-00001620: 202f 302e 312e 3020 2020 2020 2020 2020   /0.1.0         
-00001630: 207c 2049 6d70 6c65 6d65 6e74 6174 696f   | Implementatio
-00001640: 6e20 6f66 2061 2043 6875 6120 6f73 6369  n of a Chua osci
-00001650: 6c6c 6174 6f72 0a2d 2068 6466 3520 2f30  llator.- hdf5 /0
-00001660: 2e31 2e30 2020 2020 2020 2020 2020 7c20  .1.0          | 
-00001670: 5265 6164 2f57 7269 7465 2073 6967 6e61  Read/Write signa
-00001680: 6c73 2061 6e64 2061 7272 6179 7320 746f  ls and arrays to
-00001690: 2f66 726f 6d20 616e 2068 6466 3520 6669  /from an hdf5 fi
-000016a0: 6c65 0a2d 2070 7974 686f 6e20 2f30 2e31  le.- python /0.1
-000016b0: 2e30 2020 2020 2020 2020 7c20 4f70 636f  .0        | Opco
-000016c0: 6465 7320 746f 2069 6e74 6572 6163 7420  des to interact 
-000016d0: 7769 7468 2061 6e20 656d 6265 6464 6564  with an embedded
-000016e0: 2070 7974 686f 6e20 696e 7465 7270 7265   python interpre
-000016f0: 7465 720a 0a60 6060 0a0a 2323 2320 496e  ter..```..### In
-00001700: 7374 616c 6c20 736f 6d65 2070 6163 6b61  stall some packa
-00001710: 6765 730a 0a60 6060 6261 7368 0a0a 2420  ges..```bash..$ 
-00001720: 7269 7373 6574 2069 6e73 7461 6c6c 2065  risset install e
-00001730: 6c73 6520 6a73 6678 0a0a 6060 600a 0a23  lse jsfx..```..#
-00001740: 2323 2053 686f 7720 696e 666f 726d 6174  ## Show informat
-00001750: 696f 6e20 6162 6f75 7420 6120 7370 6563  ion about a spec
-00001760: 6966 6963 2070 6163 6b61 6765 0a0a 6060  ific package..``
-00001770: 6062 6173 680a 0a24 2072 6973 7365 7420  `bash..$ risset 
-00001780: 7368 6f77 2070 6f6c 790a 0a50 6c75 6769  show poly..Plugi
-00001790: 6e20 2020 2020 2020 203a 2070 6f6c 790a  n        : poly.
-000017a0: 4175 7468 6f72 2020 2020 2020 2020 3a20  Author        : 
-000017b0: 4564 7561 7264 6f20 4d6f 6775 696c 6c61  Eduardo Moguilla
-000017c0: 6e73 6b79 2028 6564 7561 7264 6f2e 6d6f  nsky (eduardo.mo
-000017d0: 6775 696c 6c61 6e73 6b79 4067 6d61 696c  guillansky@gmail
-000017e0: 2e63 6f6d 290a 5552 4c20 2020 2020 2020  .com).URL       
-000017f0: 2020 2020 3a20 6874 7470 733a 2f2f 6769      : https://gi
-00001800: 7468 7562 2e63 6f6d 2f63 736f 756e 642d  thub.com/csound-
-00001810: 706c 7567 696e 732f 6373 6f75 6e64 2d70  plugins/csound-p
-00001820: 6c75 6769 6e73 2e67 6974 0a56 6572 7369  lugins.git.Versi
-00001830: 6f6e 2020 2020 2020 203a 2031 2e31 382e  on       : 1.18.
-00001840: 320a 0a49 6e73 7461 6c6c 6564 2020 2020  2..Installed    
-00001850: 203a 2055 6e6b 6e6f 776e 2028 7061 7468   : Unknown (path
-00001860: 3a20 2f68 6f6d 652f 656d 2f2e 6c6f 6361  : /home/em/.loca
-00001870: 6c2f 6c69 622f 6373 6f75 6e64 2f36 2e30  l/lib/csound/6.0
-00001880: 2f70 6c75 6769 6e73 3634 2f6c 6962 706f  /plugins64/libpo
-00001890: 6c79 2e73 6f29 0a4d 616e 6966 6573 7420  ly.so).Manifest 
-000018a0: 2020 2020 203a 204e 6f20 6d61 6e69 6665       : No manife
-000018b0: 7374 2028 696e 7374 616c 6c65 6420 6d61  st (installed ma
-000018c0: 6e75 616c 6c79 290a 4162 7374 7261 6374  nually).Abstract
-000018d0: 2020 2020 2020 3a20 4d75 6c74 6970 6c65        : Multiple
-000018e0: 2028 7061 7261 6c6c 656c 206f 7220 7365   (parallel or se
-000018f0: 7175 656e 7469 616c 2920 696e 7374 616e  quential) instan
-00001900: 6365 7320 6f66 2061 6e20 6f70 636f 6465  ces of an opcode
-00001910: 0a44 6573 6372 6970 7469 6f6e 3a0a 2020  .Description:.  
-00001920: 2020 4d75 6c74 6970 6c65 2028 7061 7261    Multiple (para
-00001930: 6c6c 656c 206f 7220 7365 7175 656e 7469  llel or sequenti
-00001940: 616c 2920 696e 7374 616e 6365 7320 6f66  al) instances of
-00001950: 2061 6e20 6f70 636f 6465 0a4f 7063 6f64   an opcode.Opcod
-00001960: 6573 3a0a 2020 2020 6465 6665 722c 2070  es:.    defer, p
-00001970: 6f6c 792c 2070 6f6c 7930 2c20 706f 6c79  oly, poly0, poly
-00001980: 7365 710a 4269 6e61 7269 6573 3a0a 2020  seq.Binaries:.  
-00001990: 2020 2a20 6c69 6e75 782f 6373 6f75 6e64    * linux/csound
-000019a0: 3e3d 362e 3137 3c37 2e30 0a20 2020 202a  >=6.17<7.0.    *
-000019b0: 206c 696e 7578 2f63 736f 756e 643e 3d37   linux/csound>=7
-000019c0: 2e30 0a20 2020 202a 206d 6163 6f73 2f63  .0.    * macos/c
-000019d0: 736f 756e 643e 3d36 2e31 373c 372e 300a  sound>=6.17<7.0.
-000019e0: 2020 2020 2a20 6d61 636f 732f 6373 6f75      * macos/csou
-000019f0: 6e64 3e3d 372e 300a 2020 2020 2a20 6d61  nd>=7.0.    * ma
-00001a00: 636f 732d 6172 6d36 342f 6373 6f75 6e64  cos-arm64/csound
-00001a10: 3e3d 362e 3137 3c37 2e30 0a20 2020 202a  >=6.17<7.0.    *
-00001a20: 206d 6163 6f73 2d61 726d 3634 2f63 736f   macos-arm64/cso
-00001a30: 756e 643e 3d37 2e30 0a20 2020 202a 2077  und>=7.0.    * w
-00001a40: 696e 646f 7773 2f63 736f 756e 643e 3d36  indows/csound>=6
-00001a50: 2e31 373c 372e 300a 2020 2020 2a20 7769  .17<7.0.    * wi
-00001a60: 6e64 6f77 732f 6373 6f75 6e64 3e3d 372e  ndows/csound>=7.
-00001a70: 300a 2020 2020 0a60 6060 0a0a 2323 2320  0.    .```..### 
-00001a80: 5265 6d6f 7665 2061 2070 6c75 6769 6e0a  Remove a plugin.
-00001a90: 0a60 6060 6261 7368 0a0a 2420 7269 7373  .```bash..$ riss
-00001aa0: 6574 2072 656d 6f76 6520 706f 6c79 0a0a  et remove poly..
-00001ab0: 6060 600a 0a23 2323 2053 6565 206d 616e  ```..### See man
-00001ac0: 7561 6c20 7061 6765 2066 6f72 2061 6e20  ual page for an 
-00001ad0: 6f70 636f 6465 2028 696e 7374 616c 6c65  opcode (installe
-00001ae0: 6420 6f72 206e 6f74 290a 0a60 6060 6261  d or not)..```ba
-00001af0: 7368 0a24 2072 6973 7365 7420 6d61 6e20  sh.$ risset man 
-00001b00: 706f 6c79 0a0a 6060 600a 0a60 6060 6d61  poly..```..```ma
-00001b10: 726b 646f 776e 0a0a 2320 6d74 726f 0a0a  rkdown..# mtro..
-00001b20: 2323 2041 6273 7472 6163 740a 0a61 6e20  ## Abstract..an 
-00001b30: 6163 6375 7261 7465 2076 6572 7369 6f6e  accurate version
-00001b40: 206f 6620 6d65 7472 6f0a 0a0a 2323 2044   of metro...## D
-00001b50: 6573 6372 6970 7469 6f6e 0a0a 606d 7472  escription..`mtr
-00001b60: 6f60 2069 7320 6120 6472 6f70 2d69 6e20  o` is a drop-in 
-00001b70: 7265 706c 6163 656d 656e 7420 6f66 2060  replacement of `
-00001b80: 6d65 7472 6f60 2077 6974 686f 7574 2074  metro` without t
-00001b90: 6865 0a64 7269 6674 696e 6720 6f76 6572  he.drifting over
-00001ba0: 2074 696d 652e 2060 6d65 7472 6f60 2069   time. `metro` i
-00001bb0: 7320 696d 706c 656d 656e 7465 6420 6279  s implemented by
-00001bc0: 2061 6464 696e 6720 6120 7068 6173 650a   adding a phase.
-00001bd0: 6561 6368 2063 7963 6c65 2c20 7768 6963  each cycle, whic
-00001be0: 6820 7265 7375 6c74 7320 696e 2064 7269  h results in dri
-00001bf0: 6674 696e 6720 6f76 6572 2074 696d 6520  fting over time 
-00001c00: 6475 6520 746f 2072 6f75 6e64 696e 6720  due to rounding 
-00001c10: 6572 726f 7273 2e0a 606d 7472 6f60 2061  errors..`mtro` a
-00001c20: 766f 6964 7320 7468 6973 2070 726f 626c  voids this probl
-00001c30: 656d 2062 7920 6b65 6570 696e 6720 6120  em by keeping a 
-00001c40: 636f 756e 7465 7220 616e 6420 646f 696e  counter and doin
-00001c50: 6720 6d75 6c74 6970 6c69 6361 7469 6f6e  g multiplication
-00001c60: 0a73 6f20 7468 6174 2074 6865 2065 7272  .so that the err
-00001c70: 6f72 2069 7320 6c69 6d69 7465 642e 0a0a  or is limited...
-00001c80: 466f 6c6c 6f77 696e 6720 6d65 7472 6f27  Following metro'
-00001c90: 7320 696d 706c 656d 656e 7461 7469 6f6e  s implementation
-00001ca0: 2062 7920 6465 6661 756c 7420 606d 7472   by default `mtr
-00001cb0: 6f60 2069 7320 7472 6967 6765 7265 6420  o` is triggered 
-00001cc0: 6174 2074 696d 653d 302e 2054 6869 730a  at time=0. This.
-00001cd0: 6973 2062 6563 6175 7365 2060 695f 696e  is because `i_in
-00001ce0: 6974 7068 6173 6560 2069 7320 7365 7420  itphase` is set 
-00001cf0: 746f 2031 2062 7920 6465 6661 756c 742e  to 1 by default.
-00001d00: 2049 7420 6973 2070 6f73 7369 626c 6520   It is possible 
-00001d10: 746f 206d 616b 6520 606d 7472 6f60 2073  to make `mtro` s
-00001d20: 6b69 7020 7468 650a 3020 7472 6967 6765  kip the.0 trigge
-00001d30: 7220 6279 2073 6574 7469 6e67 2060 695f  r by setting `i_
-00001d40: 696e 6974 7068 6173 6560 2074 6f20 302e  initphase` to 0.
-00001d50: 0a0a 2323 2053 796e 7461 780a 0a0a 2020  ..## Syntax...  
-00001d60: 2020 6b6f 7574 206d 7472 6f20 6b66 7265    kout mtro kfre
-00001d70: 712c 2069 5f69 6e69 7470 6861 7365 3d31  q, i_initphase=1
-00001d80: 0a0a 0a23 2320 4172 6775 6d65 6e74 730a  ...## Arguments.
-00001d90: 0a2a 202a 2a6b 6672 6571 2a2a 3a20 7468  .* **kfreq**: th
-00001da0: 6520 6672 6571 7565 6e63 7920 6f66 2074  e frequency of t
-00001db0: 6865 2074 7269 6767 6572 0a2a 202a 2a69  he trigger.* **i
-00001dc0: 5f69 6e69 7470 6861 7365 2a2a 3a20 7468  _initphase**: th
-00001dd0: 6520 696e 6974 6961 6c20 7068 6173 6520  e initial phase 
-00001de0: 2861 2076 616c 7565 2062 6574 7765 656e  (a value between
-00001df0: 2030 2061 6e64 2031 292e 2049 6620 7365   0 and 1). If se
-00001e00: 7420 746f 2030 2c20 7468 6572 6520 6973  t to 0, there is
-00001e10: 206e 6f20 7472 6967 6765 7220 6174 2074   no trigger at t
-00001e20: 696d 6520 302e 0a20 2020 2020 2020 2049  ime 0..        I
-00001e30: 6620 7365 7420 746f 2031 2c20 606d 7472  f set to 1, `mtr
-00001e40: 6f60 2074 7269 6767 6572 7320 6174 2074  o` triggers at t
-00001e50: 696d 653d 302c 2073 696d 696c 6172 2074  ime=0, similar t
-00001e60: 6f20 606d 6574 726f 600a 0a23 2320 4f75  o `metro`..## Ou
-00001e70: 7470 7574 0a0a 2a20 2a2a 6b6f 7574 2a2a  tput..* **kout**
-00001e80: 3a20 3120 6966 2074 6865 206d 7472 6f20  : 1 if the mtro 
-00001e90: 6861 7320 7472 6967 6765 7265 642c 2030  has triggered, 0
-00001ea0: 206f 7468 6572 7769 7365 0a0a 2323 2045   otherwise..## E
-00001eb0: 7865 6375 7469 6f6e 2054 696d 650a 0a2a  xecution Time..*
-00001ec0: 2050 6572 666f 726d 616e 6365 0a0a 6060   Performance..``
-00001ed0: 600a 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  `..-------------
-00001ee0: 2d2d 0a0a 0a23 2052 6973 7365 7420 636f  --...# Risset co
-00001ef0: 6d6d 616e 6473 0a0a 2323 2320 7570 6461  mmands..### upda
-00001f00: 7465 0a0a 5570 6461 7465 2074 6865 206c  te..Update the l
-00001f10: 6f63 616c 2069 6e64 6578 2074 6f20 7468  ocal index to th
-00001f20: 6520 6c61 7465 7374 2073 7461 7465 2e0a  e latest state..
-00001f30: 0a20 2020 2024 2072 6973 7365 7420 7570  .    $ risset up
-00001f40: 6461 7465 0a0a 0a23 2323 206c 6973 740a  date...### list.
-00001f50: 0a4c 6973 7420 616c 6c20 6176 6169 6c61  .List all availa
-00001f60: 626c 6520 706c 7567 696e 7320 666f 7220  ble plugins for 
-00001f70: 796f 7572 2070 6c61 7466 6f72 6d0a 0a20  your platform.. 
-00001f80: 2020 2024 2072 6973 7365 7420 6c69 7374     $ risset list
-00001f90: 205b 6f70 7469 6f6e 735d 0a0a 2323 2323   [options]..####
-00001fa0: 2320 4f70 7469 6f6e 730a 0a2a 2060 2d2d  # Options..* `--
-00001fb0: 6e61 6d65 6f6e 6c79 603a 204f 7574 7075  nameonly`: Outpu
-00001fc0: 7420 6a75 7374 2074 6865 206e 616d 6520  t just the name 
-00001fd0: 6f66 2065 6163 6820 706c 7567 696e 0a2a  of each plugin.*
-00001fe0: 2060 2d2d 696e 7374 616c 6c65 6460 3a20   `--installed`: 
-00001ff0: 4c69 7374 206f 6e6c 7920 696e 7374 616c  List only instal
-00002000: 6c65 6420 706c 7567 696e 730a 2a20 602d  led plugins.* `-
-00002010: 2d75 7067 7261 6465 6162 6c65 603a 204c  -upgradeable`: L
-00002020: 6973 7420 6f6e 6c79 2069 6e73 7461 6c6c  ist only install
-00002030: 6564 2070 6163 6b61 6765 7320 7768 6963  ed packages whic
-00002040: 6820 6361 6e20 6265 2075 7067 7261 6465  h can be upgrade
-00002050: 640a 2a20 602d 2d6e 6f74 696e 7374 616c  d.* `--notinstal
-00002060: 6c65 6460 3a20 4c69 7374 206f 6e6c 7920  led`: List only 
-00002070: 706c 7567 696e 7320 7768 6963 6820 6172  plugins which ar
-00002080: 6520 6e6f 7420 696e 7374 616c 6c65 640a  e not installed.
-00002090: 2a20 602d 312c 202d 2d6f 6e65 6c69 6e65  * `-1, --oneline
-000020a0: 603a 204c 6973 7420 6561 6368 2070 6c75  `: List each plu
-000020b0: 6769 6e20 696e 206f 6e65 206c 696e 650a  gin in one line.
-000020c0: 0a0a 2323 2320 7368 6f77 0a0a 5368 6f77  ..### show..Show
-000020d0: 2069 6e66 6f72 6d61 7469 6f6e 2061 626f   information abo
-000020e0: 7574 2061 2070 6c75 6769 6e0a 0a20 2020  ut a plugin..   
-000020f0: 2024 2072 6973 7365 7420 7368 6f77 203c   $ risset show <
-00002100: 706c 7567 696e 3e0a 0a0a 2323 2320 696e  plugin>...### in
-00002110: 7374 616c 6c0a 0a49 6e73 7461 6c6c 206f  stall..Install o
-00002120: 6e65 206f 7220 6d75 6c74 6970 6c65 2070  ne or multiple p
-00002130: 6c75 6769 6e73 0a0a 2020 2020 2420 7269  lugins..    $ ri
-00002140: 7373 6574 2069 6e73 7461 6c6c 205b 2d2d  sset install [--
-00002150: 666f 7263 655d 203c 706c 7567 696e 3e20  force] <plugin> 
-00002160: 5b3c 706c 7567 696e 323e 2c20 2e2e 2e5d  [<plugin2>, ...]
-00002170: 0a0a 496e 7374 616c 6c20 6120 6769 7665  ..Install a give
-00002180: 6e20 706c 7567 696e 2066 6f72 2074 6865  n plugin for the
-00002190: 2063 7572 7265 6e74 2070 6c61 7466 6f72   current platfor
-000021a0: 6d2e 2050 6c75 6769 6e73 2061 7265 2069  m. Plugins are i
-000021b0: 6e73 7461 6c6c 6564 2069 6e74 6f0a 7468  nstalled into.th
-000021c0: 6520 7573 6572 2066 6f6c 6465 7220 286e  e user folder (n
-000021d0: 6f20 6164 6d69 6e69 7374 7261 746f 7220  o administrator 
-000021e0: 7265 7175 6972 656d 656e 7473 2061 7265  requirements are
-000021f0: 206e 6565 6465 6429 2e20 4c6f 6f6b 2061   needed). Look a
-00002200: 7420 7468 6520 6069 6e66 6f60 0a63 6f6d  t the `info`.com
-00002210: 6d61 6e64 2074 6f20 7175 6572 7920 696e  mand to query in
-00002220: 666f 726d 6174 696f 6e20 6162 6f75 7420  formation about 
-00002230: 7468 6520 7379 7374 656d 2e0a 0a23 2323  the system...###
-00002240: 2323 204f 7074 696f 6e73 0a0a 2a20 602d  ## Options..* `-
-00002250: 2d66 6f72 6365 603a 2049 6e73 7461 6c6c  -force`: Install
-00002260: 7320 6120 706c 7567 696e 2065 7665 6e20  s a plugin even 
-00002270: 6966 2074 6865 2070 6c75 6769 6e20 7769  if the plugin wi
-00002280: 7468 2074 6865 2073 616d 6520 7665 7273  th the same vers
-00002290: 696f 6e20 6973 2061 6c72 6561 6479 2069  ion is already i
-000022a0: 6e73 7461 6c6c 6564 0a0a 7468 6520 7379  nstalled..the sy
-000022b0: 7374 656d 2066 6f6c 6465 7220 7768 6572  stem folder wher
-000022c0: 6520 616c 6c20 6f74 6865 7220 6275 696c  e all other buil
-000022d0: 7469 6e20 706c 7567 696e 7320 6172 6520  tin plugins are 
-000022e0: 696e 7374 616c 6c65 6420 2874 6869 7320  installed (this 
-000022f0: 7265 7175 6972 6573 2061 646d 696e 6973  requires adminis
-00002300: 7472 6174 6f72 2072 6967 6874 7320 696e  trator rights in
-00002310: 2073 6f6d 6520 706c 6174 666f 726d 7329   some platforms)
-00002320: 2e20 4164 6d69 6e20 7269 6768 7473 2061  . Admin rights a
-00002330: 7265 206e 6565 6465 6420 666f 7220 7468  re needed for th
-00002340: 6973 2e0a 0a0a 2323 2320 7265 6d6f 7665  is....### remove
-00002350: 0a0a 5265 6d6f 7665 2061 6e20 696e 7374  ..Remove an inst
-00002360: 616c 6c65 6420 706c 7567 696e 0a0a 2020  alled plugin..  
-00002370: 2020 2420 7269 7373 6574 2072 656d 6f76    $ risset remov
-00002380: 6520 3c70 6c75 6769 6e3e 0a0a 0a20 2020  e <plugin>...   
-00002390: 2023 2323 2320 646f 6375 6d65 6e74 6174   #### documentat
-000023a0: 696f 6e0a 0a4f 7065 6e20 6d61 6e20 7061  ion..Open man pa
-000023b0: 6765 2061 7320 6d61 726b 646f 776e 2069  ge as markdown i
-000023c0: 6e20 7468 6520 636f 6d6d 616e 6420 6c69  n the command li
-000023d0: 6e65 0a0a 0a20 2020 2024 2072 6973 7365  ne...    $ risse
-000023e0: 7420 6d61 6e20 5b6f 7074 696f 6e73 5d20  t man [options] 
-000023f0: 3c6f 7063 6f64 653e 0a0a 0a23 2323 2323  <opcode>...#####
-00002400: 204f 7074 696f 6e73 0a0a 2a20 602d 732c   Options..* `-s,
-00002410: 202d 2d73 696d 706c 6570 6174 6860 3a20   --simplepath`: 
-00002420: 5072 696e 7420 6a75 7374 2074 6865 2070  Print just the p
-00002430: 6174 6820 6f66 2074 6865 206d 616e 7561  ath of the manua
-00002440: 6c20 7061 6765 0a2a 2060 2d6d 2c20 2d2d  l page.* `-m, --
-00002450: 6d61 726b 646f 776e 603a 2055 7365 2074  markdown`: Use t
-00002460: 6865 202e 6d64 2070 6167 6520 696e 7374  he .md page inst
-00002470: 6561 6420 6f66 2074 6865 202e 6874 6d6c  ead of the .html
-00002480: 2076 6572 7369 6f6e 0a2a 2060 2d65 2c20   version.* `-e, 
-00002490: 2d2d 6578 7465 726e 616c 603a 204f 7065  --external`: Ope
-000024a0: 6e20 7468 6520 6d61 6e20 7061 6765 2069  n the man page i
-000024b0: 6e20 7468 6520 6465 6661 756c 7420 6170  n the default ap
-000024c0: 702e 2054 6869 7320 6973 206f 6e6c 7920  p. This is only 
-000024d0: 7573 6564 2077 6865 6e20 6f70 656e 696e  used when openin
-000024e0: 6720 7468 6520 6d61 726b 646f 776e 206d  g the markdown m
-000024f0: 616e 2070 6167 652e 0a2a 2060 2d2d 6874  an page..* `--ht
-00002500: 6d6c 603a 204f 7065 6e73 2074 6865 202e  ml`: Opens the .
-00002510: 6874 6d6c 2076 6572 7369 6f6e 206f 6620  html version of 
-00002520: 7468 6520 6d61 6e70 6167 6520 696e 2074  the manpage in t
-00002530: 6865 2064 6566 6175 6c74 2062 726f 7773  he default brows
-00002540: 6572 2028 6f72 206f 7574 7075 7473 2074  er (or outputs t
-00002550: 6865 2070 6174 6820 7769 7468 2074 6865  he path with the
-00002560: 202d 2d70 6174 6820 6f70 7469 6f6e 290a   --path option).
-00002570: 2a20 602d 2d74 6865 6d65 207b 6461 726b  * `--theme {dark
-00002580: 2c6c 6967 6874 2c67 7275 7662 6f78 2d64  ,light,gruvbox-d
-00002590: 6172 6b2c 6772 7576 626f 782d 6c69 6768  ark,gruvbox-ligh
-000025a0: 742c 6d61 7465 7269 616c 2c66 7275 6974  t,material,fruit
-000025b0: 792c 6e61 7469 7665 7d60 3a20 5374 796c  y,native}`: Styl
-000025c0: 6520 7573 6564 2077 6865 6e20 6469 7370  e used when disp
-000025d0: 6c61 7969 6e67 206d 6172 6b64 6f77 6e20  laying markdown 
-000025e0: 6669 6c65 7320 2864 6566 6175 6c74 3d64  files (default=d
-000025f0: 6172 6b29 0a0a 4f70 656e 2074 6865 2068  ark)..Open the h
-00002600: 746d 6c20 6d61 6e20 7061 6765 2069 6e20  tml man page in 
-00002610: 7468 6520 6465 6661 756c 7420 6272 6f77  the default brow
-00002620: 7365 723a 0a0a 2020 2020 2420 7269 7373  ser:..    $ riss
-00002630: 6574 206d 616e 202d 2d68 746d 6c20 3c6f  et man --html <o
-00002640: 7063 6f64 653e 0a0a 4765 6e65 7261 7465  pcode>..Generate
-00002650: 2f75 7064 6174 6520 646f 6375 6d65 6e74  /update document
-00002660: 6174 696f 6e3a 0a0a 2020 2020 2420 7269  ation:..    $ ri
-00002670: 7373 6574 206d 616b 6564 6f63 730a 0a42  sset makedocs..B
-00002680: 7569 6c64 2074 6865 2064 6f63 756d 656e  uild the documen
-00002690: 7461 7469 6f6e 2066 6f72 2061 6c6c 2064  tation for all d
-000026a0: 6566 696e 6564 2070 6c75 6769 6e73 2e20  efined plugins. 
-000026b0: 5468 6973 2064 6570 656e 6473 206f 6e20  This depends on 
-000026c0: 2a2a 6d6b 646f 6373 2a2a 2062 6569 6e67  **mkdocs** being
-000026d0: 2069 6e73 7461 6c6c 6564 0a0a 0a23 2323   installed...###
-000026e0: 2075 7067 7261 6465 0a0a 2020 2020 2420   upgrade..    $ 
-000026f0: 7269 7373 6574 2075 7067 7261 6465 0a0a  risset upgrade..
-00002700: 5570 6772 6164 6520 616e 7920 696e 7374  Upgrade any inst
-00002710: 616c 6c65 6420 706c 7567 696e 2074 6f20  alled plugin to 
-00002720: 7468 6520 6c61 7465 7374 2076 6572 7369  the latest versi
-00002730: 6f6e 0a0a 0a23 2323 206c 6973 746f 7063  on...### listopc
-00002740: 6f64 6573 0a0a 2020 2020 2420 7269 7373  odes..    $ riss
-00002750: 6574 206c 6973 746f 7063 6f64 6573 0a0a  et listopcodes..
-00002760: 4c69 7374 2069 6e73 7461 6c6c 6564 206f  List installed o
-00002770: 7063 6f64 6573 0a0a 0a23 2323 2323 204f  pcodes...##### O
-00002780: 7074 696f 6e73 0a0a 2a20 602d 6c2c 202d  ptions..* `-l, -
-00002790: 2d6c 6f6e 6760 3a20 4c6f 6e67 2066 6f72  -long`: Long for
-000027a0: 6d61 740a 0a60 6060 0a24 2072 6973 7365  mat..```.$ risse
-000027b0: 7420 6c69 7374 6f70 636f 6465 7320 2d6c  t listopcodes -l
-000027c0: 0a0a 6163 6375 6d20 2020 2020 2020 2020  ..accum         
-000027d0: 2020 2020 2020 656c 7365 2020 2020 2020        else      
-000027e0: 2020 5369 6d70 6c65 2061 6363 756d 756c    Simple accumul
-000027f0: 6174 6f72 206f 6620 7363 616c 6172 2076  ator of scalar v
-00002800: 616c 7565 730a 6174 7374 6f70 2020 2020  alues.atstop    
-00002810: 2020 2020 2020 2020 2020 656c 7365 2020            else  
-00002820: 2020 2020 2020 5363 6865 6475 6c65 2061        Schedule a
-00002830: 6e20 696e 7374 7275 6d65 6e74 2061 7420  n instrument at 
-00002840: 7468 6520 656e 6420 6f66 2074 6865 2063  the end of the c
-00002850: 7572 7265 6e74 2069 6e73 7472 756d 656e  urrent instrumen
-00002860: 740a 6265 6164 7379 6e74 2020 2020 2020  t.beadsynt      
-00002870: 2020 2020 2020 6265 6f73 6320 2020 2020        beosc     
-00002880: 2020 4261 6e64 2d45 6e68 616e 6365 6420    Band-Enhanced 
-00002890: 4f73 6369 6c6c 6174 6f72 2d42 616e 6b0a  Oscillator-Bank.
-000028a0: 6265 6f73 6320 2020 2020 2020 2020 2020  beosc           
-000028b0: 2020 2020 6265 6f73 6320 2020 2020 2020      beosc       
-000028c0: 4261 6e64 2d45 6e68 616e 6365 6420 4f73  Band-Enhanced Os
-000028d0: 6369 6c6c 6174 6f72 0a62 6973 6563 7420  cillator.bisect 
-000028e0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-000028f0: 6520 2020 2020 2020 2052 6574 7572 6e73  e        Returns
-00002900: 2074 6865 2066 7261 6374 696f 6e61 6c20   the fractional 
-00002910: 696e 6465 7820 6f66 2061 2076 616c 7565  index of a value
-00002920: 2077 6974 6869 6e20 6120 736f 7274 6564   within a sorted
-00002930: 2061 72e2 80a6 6179 202f 2074 6162 0a63   ar...ay / tab.c
-00002940: 6875 6170 2020 2020 2020 2020 2020 2020  huap            
-00002950: 2020 2063 6875 6120 2020 2020 2020 2053     chua        S
-00002960: 696d 756c 6174 6573 2043 6875 6127 7320  imulates Chua's 
-00002970: 6f73 6369 6c6c 6174 6f72 0a63 7261 636b  oscillator.crack
-00002980: 6c65 2020 2020 2020 2020 2020 2020 2065  le             e
-00002990: 6c73 6520 2020 2020 2020 2067 656e 6572  lse        gener
-000029a0: 6174 6573 206e 6f69 7365 2062 6173 6564  ates noise based
-000029b0: 206f 6e20 6120 6368 616f 7469 6320 6571   on a chaotic eq
-000029c0: 7561 7469 6f6e 0a64 6566 6572 2020 2020  uation.defer    
-000029d0: 2020 2020 2020 2020 2020 2070 6f6c 7920             poly 
-000029e0: 2020 2020 2020 2052 756e 2061 6e20 6f70         Run an op
-000029f0: 636f 6465 2061 7420 7468 6520 656e 6420  code at the end 
-00002a00: 6f66 2063 7572 7265 6e74 2065 7665 6e74  of current event
-00002a10: 0a64 6572 6566 2020 2020 2020 2020 2020  .deref          
-00002a20: 2020 2020 2065 6c73 6520 2020 2020 2020       else       
-00002a30: 2044 6572 6566 6572 656e 6365 2061 2070   Dereference a p
-00002a40: 7265 7669 6f75 736c 7920 6372 6561 7465  reviously create
-00002a50: 6420 7265 6665 7265 6e63 6520 746f 2061  d reference to a
-00002a60: 2076 6172 6961 626c 650a 6465 7465 6374   variable.detect
-00002a70: 7369 6c65 6e63 6520 2020 2020 2020 656c  silence       el
-00002a80: 7365 2020 2020 2020 2020 4465 7465 6374  se        Detect
-00002a90: 2077 6865 6e20 696e 7075 7420 6661 6c6c   when input fall
-00002aa0: 7320 6265 6c6f 7720 616e 2061 6d70 6c69  s below an ampli
-00002ab0: 7475 6465 2074 6872 6573 686f 6c64 0a64  tude threshold.d
-00002ac0: 6963 745f 6465 6c20 2020 2020 2020 2020  ict_del         
-00002ad0: 2020 206b 6c69 6220 2020 2020 2020 2052     klib        R
-00002ae0: 656d 6f76 6520 6120 6b65 793a 7661 6c75  emove a key:valu
-00002af0: 6520 7061 6972 2066 726f 6d20 6120 6861  e pair from a ha
-00002b00: 7368 7461 626c 650a 6469 6374 5f64 756d  shtable.dict_dum
-00002b10: 7020 2020 2020 2020 2020 2020 6b6c 6962  p           klib
-00002b20: 2020 2020 2020 2020 4475 6d70 7320 7468          Dumps th
-00002b30: 6520 636f 6e74 656e 7473 206f 6620 7468  e contents of th
-00002b40: 6973 2064 6963 7420 6173 2061 2073 7472  is dict as a str
-00002b50: 696e 670a 6469 6374 5f65 7869 7374 7320  ing.dict_exists 
-00002b60: 2020 2020 2020 2020 6b6c 6962 2020 2020          klib    
-00002b70: 2020 2020 5265 7475 726e 7320 3120 6966      Returns 1 if
-00002b80: 2074 6865 2064 6963 7420 6578 6973 7473   the dict exists
-00002b90: 2c20 3020 6f74 6865 7277 6973 650a 6469  , 0 otherwise.di
-00002ba0: 6374 5f66 7265 6520 2020 2020 2020 2020  ct_free         
-00002bb0: 2020 6b6c 6962 2020 2020 2020 2020 4672    klib        Fr
-00002bc0: 6565 2061 2068 6173 6874 6162 6c65 0a2e  ee a hashtable..
-00002bd0: 2e2e 0a0a 6060 600a 0a23 2323 2064 6f77  ....```..### dow
-00002be0: 6e6c 6f61 640a 0a20 2020 2024 2072 6973  nload..    $ ris
-00002bf0: 7365 7420 646f 776e 6c6f 6164 203c 706c  set download <pl
-00002c00: 7567 696e 3e0a 0a44 6f77 6e6c 6f61 6420  ugin>..Download 
-00002c10: 6120 706c 7567 696e 0a0a 2323 2323 2320  a plugin..##### 
-00002c20: 4f70 7469 6f6e 730a 0a2a 2060 2d2d 7061  Options..* `--pa
-00002c30: 7468 2050 4154 4860 3a20 4469 7265 6374  th PATH`: Direct
-00002c40: 6f72 7920 746f 2064 6f77 6e6c 6f61 6420  ory to download 
-00002c50: 7468 6520 706c 7567 696e 2074 6f20 2864  the plugin to (d
-00002c60: 6566 6175 6c74 3a20 6375 7272 656e 7420  efault: current 
-00002c70: 6469 7265 6374 6f72 7929 0a2a 2060 2d2d  directory).* `--
-00002c80: 706c 6174 666f 726d 603a 2054 6865 2070  platform`: The p
-00002c90: 6c61 7466 6f72 6d20 6f66 2074 6865 2070  latform of the p
-00002ca0: 6c75 6769 6e20 746f 2064 6f77 6e6c 6f61  lugin to downloa
-00002cb0: 6420 2864 6566 6175 6c74 3a20 6375 7272  d (default: curr
-00002cc0: 656e 7420 706c 6174 666f 726d 292e 204f  ent platform). O
-00002cd0: 6e65 206f 6620 2a6c 696e 7578 2a2c 202a  ne of *linux*, *
-00002ce0: 6d61 636f 732a 2c20 2a77 696e 646f 772a  macos*, *window*
-00002cf0: 2c20 2a6d 6163 6f73 2d61 726d 3634 2a2c  , *macos-arm64*,
-00002d00: 202a 6c69 6e75 782d 6172 6d36 342a 0a0a   *linux-arm64*..
-00002d10: 0a23 2323 2069 6e66 6f0a 0a20 2020 2024  .### info..    $
-00002d20: 2072 6973 7365 7420 696e 666f 205b 6f70   risset info [op
-00002d30: 7469 6f6e 735d 0a0a 4f75 7470 7574 7320  tions]..Outputs 
-00002d40: 696e 666f 726d 6174 696f 6e20 6162 6f75  information abou
-00002d50: 7420 7468 6520 656e 7669 726f 6e6d 656e  t the environmen
-00002d60: 7420 6173 206a 736f 6e20 696e 206f 7264  t as json in ord
-00002d70: 6572 2074 6f20 6265 2069 6e74 6567 7261  er to be integra
-00002d80: 7465 6420 6279 206f 7468 6572 2073 7973  ted by other sys
-00002d90: 7465 6d73 2e0a 466f 7220 6578 616d 706c  tems..For exampl
-00002da0: 652c 202a 2a43 736f 756e 6451 542a 2a20  e, **CsoundQT** 
-00002db0: 7573 6573 2074 6869 7320 636f 6d6d 616e  uses this comman
-00002dc0: 6420 746f 2072 6561 6420 7468 6520 696e  d to read the in
-00002dd0: 7374 616c 6c65 6420 706c 7567 696e 7320  stalled plugins 
-00002de0: 616e 6420 7468 6569 7220 6f70 636f 6465  and their opcode
-00002df0: 730a 616e 6420 646f 6375 6d65 6e74 6174  s.and documentat
-00002e00: 696f 6e0a 0a23 2323 2323 204f 7074 696f  ion..##### Optio
-00002e10: 6e73 0a0a 2a20 602d 2d6f 7574 6669 6c65  ns..* `--outfile
-00002e20: 204f 5554 4649 4c45 603a 2053 6176 6520   OUTFILE`: Save 
-00002e30: 6f75 7470 7574 2074 6f20 7468 6973 2070  output to this p
-00002e40: 6174 680a 2a20 602d 2d66 756c 6c60 3a20  ath.* `--full`: 
-00002e50: 496e 636c 7564 6520 616c 6c20 6176 6169  Include all avai
-00002e60: 6c61 626c 6520 696e 666f 726d 6174 696f  lable informatio
-00002e70: 6e0a 0a2d 2d2d 2d2d 2d2d 0a0a 2320 506c  n..-------..# Pl
-00002e80: 7567 696e 2044 6f63 756d 656e 7461 7469  ugin Documentati
-00002e90: 6f6e 0a0a 446f 6375 6d65 6e74 6174 696f  on..Documentatio
-00002ea0: 6e20 666f 7220 616c 6c20 706c 7567 696e  n for all plugin
-00002eb0: 7320 6361 6e20 6265 2066 6f75 6e64 2068  s can be found h
-00002ec0: 6572 653a 2068 7474 7073 3a2f 2f63 736f  ere: https://cso
-00002ed0: 756e 642d 706c 7567 696e 732e 6769 7468  und-plugins.gith
-00002ee0: 7562 2e69 6f2f 7269 7373 6574 2d64 6f63  ub.io/risset-doc
-00002ef0: 732f 0a0a 2d2d 2d2d 2d2d 2d0a 0a23 2055  s/..-------..# U
-00002f00: 7067 7261 6469 6e67 2072 6973 7365 740a  pgrading risset.
-00002f10: 0a49 6620 696e 7374 616c 6c65 6420 7669  .If installed vi
-00002f20: 6120 6070 6970 602c 2064 6f3a 0a0a 2020  a `pip`, do:..  
-00002f30: 2020 7069 7020 696e 7374 616c 6c20 7269    pip install ri
-00002f40: 7373 6574 202d 550a 0a49 6620 696e 7374  sset -U..If inst
-00002f50: 616c 6c65 6420 7669 6120 6067 6974 602c  alled via `git`,
-00002f60: 2067 6f20 746f 2074 6865 2072 6570 6f73   go to the repos
-00002f70: 6974 6f72 7920 616e 6420 646f 3a0a 0a20  itory and do:.. 
-00002f80: 2020 2067 6974 2070 756c 6c0a 2020 2020     git pull.    
-00002f90: 7079 7468 6f6e 2073 6574 7570 2e70 7920  python setup.py 
-00002fa0: 696e 7374 616c 6c0a 0a0a 2d2d 2d2d 2d0a  install...-----.
-00002fb0: 0a23 2043 6f6e 7472 6962 7574 696e 670a  .# Contributing.
-00002fc0: 0a49 6e20 6f72 6465 7220 746f 2061 6464  .In order to add
-00002fd0: 2f6d 6f64 6966 7920 6120 706c 7567 696e  /modify a plugin
-00002fe0: 2c20 636c 6f6e 6520 5b72 6973 7365 742d  , clone [risset-
-00002ff0: 6461 7461 5d28 6874 7470 733a 2f2f 6769  data](https://gi
-00003000: 7468 7562 2e63 6f6d 2f63 736f 756e 642d  thub.com/csound-
-00003010: 706c 7567 696e 732f 7269 7373 6574 2d64  plugins/risset-d
-00003020: 6174 6129 0a0a 4174 2074 6865 2072 6f6f  ata)..At the roo
-00003030: 7420 6f66 2074 6865 2072 6570 6f73 6974  t of the reposit
-00003040: 6f72 7920 7468 6572 6520 6973 2061 6e20  ory there is an 
-00003050: 696e 6465 7820 6669 6c65 2060 7269 7373  index file `riss
-00003060: 6574 696e 6465 782e 6a73 6f6e 602c 2077  etindex.json`, w
-00003070: 6974 6820 7468 6520 666f 726d 3a0a 0a60  ith the form:..`
-00003080: 6060 6a73 6f6e 0a7b 0a20 2020 2022 7665  ``json.{.    "ve
-00003090: 7273 696f 6e22 3a20 2231 2e30 2e30 222c  rsion": "1.0.0",
-000030a0: 0a20 2020 2022 706c 7567 696e 7322 3a20  .    "plugins": 
-000030b0: 7b0a 2020 2020 2020 2020 2265 6c73 6522  {.        "else"
-000030c0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-000030d0: 2275 726c 223a 2022 6874 7470 733a 2f2f  "url": "https://
-000030e0: 6769 7468 7562 2e63 6f6d 2f63 736f 756e  github.com/csoun
-000030f0: 642d 706c 7567 696e 732f 6373 6f75 6e64  d-plugins/csound
-00003100: 2d70 6c75 6769 6e73 2e67 6974 222c 0a20  -plugins.git",. 
-00003110: 2020 2020 2020 2020 2020 2022 7061 7468             "path
-00003120: 223a 2022 7372 632f 656c 7365 220a 2020  ": "src/else".  
-00003130: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-00003140: 2022 7061 7468 746f 6f6c 7322 3a20 7b0a   "pathtools": {.
-00003150: 2020 2020 2020 2020 2020 2020 2275 726c              "url
-00003160: 223a 2022 6874 7470 733a 2f2f 6769 7468  ": "https://gith
-00003170: 7562 2e63 6f6d 2f63 736f 756e 642d 706c  ub.com/csound-pl
-00003180: 7567 696e 732f 6373 6f75 6e64 2d70 6c75  ugins/csound-plu
-00003190: 6769 6e73 2e67 6974 222c 0a20 2020 2020  gins.git",.     
-000031a0: 2020 2020 2020 2022 7061 7468 223a 2022         "path": "
-000031b0: 7372 632f 7061 7468 746f 6f6c 7322 0a20  src/pathtools". 
-000031c0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-000031d0: 2020 226b 6c69 6222 3a20 7b0a 2020 2020    "klib": {.    
-000031e0: 2020 2020 2020 2020 2275 726c 223a 2022          "url": "
-000031f0: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-00003200: 6f6d 2f63 736f 756e 642d 706c 7567 696e  om/csound-plugin
-00003210: 732f 6373 6f75 6e64 2d70 6c75 6769 6e73  s/csound-plugins
-00003220: 2e67 6974 222c 0a20 2020 2020 2020 2020  .git",.         
-00003230: 2020 2022 7061 7468 223a 2022 7372 632f     "path": "src/
-00003240: 6b6c 6962 220a 2020 2020 2020 2020 7d2c  klib".        },
-00003250: 0a20 2020 2020 2020 2022 6265 6f73 6322  .        "beosc"
-00003260: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-00003270: 2275 726c 223a 2022 6874 7470 733a 2f2f  "url": "https://
-00003280: 6769 7468 7562 2e63 6f6d 2f63 736f 756e  github.com/csoun
-00003290: 642d 706c 7567 696e 732f 6373 6f75 6e64  d-plugins/csound
-000032a0: 2d70 6c75 6769 6e73 2e67 6974 222c 0a20  -plugins.git",. 
-000032b0: 2020 2020 2020 2020 2020 2022 7061 7468             "path
-000032c0: 223a 2022 7372 632f 6265 6f73 6322 0a20  ": "src/beosc". 
-000032d0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-000032e0: 2020 2276 7374 3322 3a20 7b0a 2020 2020    "vst3": {.    
-000032f0: 2020 2020 2020 2020 2275 726c 223a 2022          "url": "
-00003300: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-00003310: 6f6d 2f63 736f 756e 642d 706c 7567 696e  om/csound-plugin
-00003320: 732f 7673 7433 2d72 6973 7365 742e 6769  s/vst3-risset.gi
-00003330: 7422 0a20 2020 2020 2020 207d 0a20 2020  t".        }.   
-00003340: 207d 0a7d 0a60 6060 0a0a 546f 2061 6464   }.}.```..To add
-00003350: 2061 2070 6c75 6769 6e20 746f 2074 6865   a plugin to the
-00003360: 2069 6e64 6578 2c20 6a75 7374 2065 7874   index, just ext
-00003370: 656e 6420 7468 6520 2a70 6c75 6769 6e73  end the *plugins
-00003380: 2a20 6469 6374 2e20 5468 6520 7572 6c20  * dict. The url 
-00003390: 7368 6f75 6c64 2070 6f69 6e74 2074 6f20  should point to 
-000033a0: 6120 7661 6c69 6420 6769 7420 7265 706f  a valid git repo
-000033b0: 7369 746f 7279 2c0a 7468 6520 7061 7468  sitory,.the path
-000033c0: 2061 7474 7269 6275 7465 2063 616e 2062   attribute can b
-000033d0: 6520 7573 6564 2074 6f20 696e 6469 6361  e used to indica
-000033e0: 7465 2077 6865 7265 2072 6973 7365 742e  te where risset.
-000033f0: 6a73 6f6e 206d 616e 6966 6573 7420 6973  json manifest is
-00003400: 2077 6974 6869 6e20 7468 6973 2072 6570   within this rep
-00003410: 6f73 6974 6f72 792e 2054 6869 7320 616c  ository. This al
-00003420: 6c6f 7773 2074 6f20 0a64 6566 696e 6520  lows to .define 
-00003430: 6d75 6c74 6970 6c65 2070 6c75 6769 6e73  multiple plugins
-00003440: 2077 6974 6869 6e20 6f6e 6520 7265 706f   within one repo
-00003450: 7369 746f 7279 2e0a 0a23 2320 4d61 6e69  sitory...## Mani
-00003460: 6665 7374 0a0a 4561 6368 2070 6c75 6769  fest..Each plugi
-00003470: 6e20 6861 7320 616e 2061 6363 6f6d 7061  n has an accompa
-00003480: 6e79 696e 6720 6d61 6e69 6665 7374 2069  nying manifest i
-00003490: 6e20 7468 6520 2e6a 736f 6e20 666f 726d  n the .json form
-000034a0: 6174 2e20 5468 6520 6e61 6d65 206f 6620  at. The name of 
-000034b0: 7468 6973 2066 696c 650a 6973 2061 6c77  this file.is alw
-000034c0: 6179 7320 6072 6973 7365 742e 6a73 6f6e  ays `risset.json
-000034d0: 600a 5365 6520 6f6e 6520 6f66 2074 6865  `.See one of the
-000034e0: 2065 7861 6d70 6c65 7320 696e 2068 7474   examples in htt
-000034f0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00003500: 6373 6f75 6e64 2d70 6c75 6769 6e73 2f63  csound-plugins/c
-00003510: 736f 756e 642d 706c 7567 696e 732f 7472  sound-plugins/tr
-00003520: 6565 2f6d 6173 7465 722f 7372 6320 666f  ee/master/src fo
-00003530: 720a 6d6f 7265 2069 6e66 6f72 6d61 7469  r.more informati
-00003540: 6f6e 2061 626f 7574 2074 6865 206d 616e  on about the man
-00003550: 6966 6573 740a 0000 0000 0000 0000 0000  ifest...........
-00003560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000035f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003600: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-00003610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003660: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-00003670: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-00003680: 3030 3030 3032 3600 3030 3030 3030 3030  0000026.00000000
-00003690: 3030 3000 3031 3032 3133 0020 7800 0000  000.010213. x...
-000036a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000036f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003700: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-00003710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000037f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003800: 3232 206d 7469 6d65 3d31 3730 3739 3935  22 mtime=1707995
-00003810: 3630 302e 300a 0000 0000 0000 0000 0000  600.0...........
-00003820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000038f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000039f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a00: 7269 7373 6574 2d32 2e39 2e30 2f52 4541  risset-2.9.0/REA
-00003a10: 444d 452e 6d64 0000 0000 0000 0000 0000  DME.md..........
-00003a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003a60: 0000 0000 3030 3030 3636 3400 3030 3031  ....0000664.0001
-00003a70: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-00003a80: 3030 3233 3733 3200 3134 3536 3333 3730  0023732.14563370
-00003a90: 3732 3000 3031 3231 3536 0020 3000 0000  720.012156. 0...
-00003aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b00: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-00003b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b20: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-00003b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00003c00: 215b 7269 7373 6574 5d28 6173 7365 7473  ![risset](assets
-00003c10: 2f72 6973 7365 742d 7469 746c 652e 706e  /risset-title.pn
-00003c20: 6729 0a0a 2320 7269 7373 6574 3a20 6120  g)..# risset: a 
-00003c30: 7061 636b 6167 6520 6d61 6e61 6765 7220  package manager 
-00003c40: 666f 7220 6373 6f75 6e64 0a0a 5468 6973  for csound..This
-00003c50: 2069 7320 7468 6520 7265 706f 7369 746f   is the reposito
-00003c60: 7279 206f 6620 7269 7373 6574 2c20 6120  ry of risset, a 
-00003c70: 7061 636b 6167 6520 6d61 6e61 6765 7220  package manager 
-00003c80: 666f 7220 6373 6f75 6e64 2065 7874 6572  for csound exter
-00003c90: 6e61 6c0a 706c 7567 696e 7320 616e 6420  nal.plugins and 
-00003ca0: 7573 6572 2d64 6566 696e 6564 2d6f 7063  user-defined-opc
-00003cb0: 6f64 6573 2e20 5468 6520 696e 6465 7820  odes. The index 
-00003cc0: 6167 6772 6567 6174 696e 6720 616c 6c20  aggregating all 
-00003cd0: 6176 6169 6c61 626c 6520 7061 636b 6167  available packag
-00003ce0: 6573 2069 7320 6b65 7074 200a 6174 205b  es is kept .at [
-00003cf0: 7269 7373 6574 2d64 6174 615d 2868 7474  risset-data](htt
-00003d00: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00003d10: 6373 6f75 6e64 2d70 6c75 6769 6e73 2f72  csound-plugins/r
-00003d20: 6973 7365 742d 6461 7461 292e 0a0a 2320  isset-data)...# 
-00003d30: 496e 7374 616c 6c61 7469 6f6e 0a0a 6072  Installation..`r
-00003d40: 6973 7365 7460 2064 6570 656e 6473 206f  isset` depends o
-00003d50: 6e6c 7920 6f6e 2060 6769 7460 2061 6e64  nly on `git` and
-00003d60: 2060 7079 7468 6f6e 3360 2028 3e3d 2033   `python3` (>= 3
-00003d70: 2e39 2920 6265 696e 6720 696e 7374 616c  .9) being instal
-00003d80: 6c65 642e 0a0a 0a60 6060 6261 7368 0a70  led....```bash.p
-00003d90: 6970 2069 6e73 7461 6c6c 2072 6973 7365  ip install risse
-00003da0: 740a 6060 600a 0a54 6869 7320 7769 6c6c  t.```..This will
-00003db0: 2069 6e73 7461 6c6c 2074 6865 2073 6372   install the scr
-00003dc0: 6970 7420 2272 6973 7365 7422 2069 6e74  ipt "risset" int
-00003dd0: 6f20 796f 7572 2070 6174 680a 0a0a 2323  o your path...##
-00003de0: 2320 4c69 6e75 780a 0a49 6e20 6365 7274  # Linux..In cert
-00003df0: 6169 6e20 6c69 6e75 7820 6469 7374 7269  ain linux distri
-00003e00: 6275 7469 6f6e 7320 2875 6275 6e74 7529  butions (ubuntu)
-00003e10: 2069 7420 6973 206e 6f74 2061 6c6c 6f77   it is not allow
-00003e20: 6564 2074 6f20 696e 7374 616c 6c20 7061  ed to install pa
-00003e30: 636b 6167 6573 2074 6f20 7468 650a 7379  ckages to the.sy
-00003e40: 7374 656d 2070 7974 686f 6e2e 2049 6e20  stem python. In 
-00003e50: 7468 6174 2063 6173 6520 7468 6520 7265  that case the re
-00003e60: 636f 6d6d 656e 6465 6420 7761 7920 6973  commended way is
-00003e70: 2074 6f20 696e 7374 616c 6c20 7269 7373   to install riss
-00003e80: 6574 2077 6974 6869 6e0a 6974 7320 6f77  et within.its ow
-00003e90: 6e20 7669 7274 7561 6c20 656e 7669 726f  n virtual enviro
-00003ea0: 6e6d 656e 7420 7669 6120 6070 6970 7860  nment via `pipx`
-00003eb0: 3a0a 0a60 6060 6261 7368 0a73 7564 6f20  :..```bash.sudo 
-00003ec0: 6170 7420 696e 7374 616c 6c20 7069 7078  apt install pipx
-00003ed0: 0a70 6970 7820 696e 7374 616c 6c20 7269  .pipx install ri
-00003ee0: 7373 6574 0a60 6060 0a0a 2d2d 2d2d 2d2d  sset.```..------
-00003ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00003f10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a  --------------..
-00003f20: 2320 5175 6963 6b20 7374 6172 740a 0a23  # Quick start..#
-00003f30: 2323 204c 6973 7420 616c 6c20 6465 6669  ## List all defi
-00003f40: 6e65 6420 7061 636b 6167 6573 0a0a 6060  ned packages..``
-00003f50: 6062 6173 680a 0a0a 2420 7269 7373 6574  `bash...$ risset
-00003f60: 206c 6973 740a 0a2a 2065 6c73 6520 2f31   list..* else /1
-00003f70: 2e31 382e 3220 2020 2020 2020 2020 7c20  .18.2         | 
-00003f80: 4d69 7363 656c 6c61 6e65 6f75 7320 706c  Miscellaneous pl
-00003f90: 7567 696e 7320 5b6d 616e 7561 6c5d 0a20  ugins [manual]. 
-00003fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003fb0: 2020 2020 2020 7c20 2020 2050 6174 683a        |    Path:
-00003fc0: 202f 686f 6d65 2f65 6d2f 2e6c 6f63 616c   /home/em/.local
-00003fd0: 2f6c 6962 2f63 736f 756e 642f 362e 302f  /lib/csound/6.0/
-00003fe0: 706c 7567 696e 7336 342f 6c69 6265 6c73  plugins64/libels
-00003ff0: 652e 736f 0a2a 2070 6174 6874 6f6f 6c73  e.so.* pathtools
-00004000: 202f 312e 3138 2e32 2020 2020 7c20 4372   /1.18.2    | Cr
-00004010: 6f73 732d 706c 6174 666f 726d 2070 6174  oss-platform pat
-00004020: 6820 6861 6e64 6c69 6e67 2061 6e64 2073  h handling and s
-00004030: 7472 696e 6720 6f70 636f 6465 7320 5b6d  tring opcodes [m
-00004040: 616e 7561 6c5d 0a20 2020 2020 2020 2020  anual].         
-00004050: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
-00004060: 2020 2050 6174 683a 202f 686f 6d65 2f65     Path: /home/e
-00004070: 6d2f 2e6c 6f63 616c 2f6c 6962 2f63 736f  m/.local/lib/cso
-00004080: 756e 642f 362e 302f 706c 7567 696e 7336  und/6.0/plugins6
-00004090: 342f 6c69 6270 6174 6874 6f6f 6c73 2e73  4/libpathtools.s
-000040a0: 6f0a 2a20 6b6c 6962 202f 312e 3138 2e32  o.* klib /1.18.2
-000040b0: 2020 2020 2020 2020 207c 2041 2068 6173           | A has
-000040c0: 6874 6162 6c65 2066 6f72 2063 736f 756e  htable for csoun
-000040d0: 6420 5b6d 616e 7561 6c5d 0a20 2020 2020  d [manual].     
-000040e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000040f0: 2020 7c20 2020 2050 6174 683a 202f 686f    |    Path: /ho
-00004100: 6d65 2f65 6d2f 2e6c 6f63 616c 2f6c 6962  me/em/.local/lib
-00004110: 2f63 736f 756e 642f 362e 302f 706c 7567  /csound/6.0/plug
-00004120: 696e 7336 342f 6c69 626b 6c69 622e 736f  ins64/libklib.so
-00004130: 0a2a 2062 656f 7363 202f 312e 3138 2e32  .* beosc /1.18.2
-00004140: 2020 2020 2020 2020 7c20 4261 6e64 2d65          | Band-e
-00004150: 6e68 616e 6365 6420 6f73 6369 6c6c 6174  nhanced oscillat
-00004160: 6f72 7320 696d 706c 656d 656e 7469 6e67  ors implementing
-00004170: 2074 6865 2073 696e 652b 6e6f 6973 6520   the sine+noise 
-00004180: 7379 6e74 6865 7369 7320 6d6f 6465 6c20  synthesis model 
-00004190: 5b6d 616e 7561 6c5d 0a20 2020 2020 2020  [manual].       
-000041a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000041b0: 7c20 2020 2050 6174 683a 202f 686f 6d65  |    Path: /home
-000041c0: 2f65 6d2f 2e6c 6f63 616c 2f6c 6962 2f63  /em/.local/lib/c
-000041d0: 736f 756e 642f 362e 302f 706c 7567 696e  sound/6.0/plugin
-000041e0: 7336 342f 6c69 6262 656f 7363 2e73 6f0a  s64/libbeosc.so.
-000041f0: 2a20 6a73 6678 202f 312e 3138 2e32 2020  * jsfx /1.18.2  
-00004200: 2020 2020 2020 207c 206a 7366 7820 7375         | jsfx su
-00004210: 7070 6f72 7420 666f 7220 6373 6f75 6e64  pport for csound
-00004220: 205b 6d61 6e75 616c 5d0a 2020 2020 2020   [manual].      
-00004230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004240: 207c 2020 2020 5061 7468 3a20 2f68 6f6d   |    Path: /hom
-00004250: 652f 656d 2f2e 6c6f 6361 6c2f 6c69 622f  e/em/.local/lib/
-00004260: 6373 6f75 6e64 2f36 2e30 2f70 6c75 6769  csound/6.0/plugi
-00004270: 6e73 3634 2f6c 6962 6a73 6678 2e73 6f0a  ns64/libjsfx.so.
-00004280: 2a20 706f 6c79 202f 312e 3138 2e32 2020  * poly /1.18.2  
-00004290: 2020 2020 2020 207c 204d 756c 7469 706c         | Multipl
-000042a0: 6520 2870 6172 616c 6c65 6c20 6f72 2073  e (parallel or s
-000042b0: 6571 7565 6e74 6961 6c29 2069 6e73 7461  equential) insta
-000042c0: 6e63 6573 206f 6620 616e 206f 7063 6f64  nces of an opcod
-000042d0: 6520 5b6d 616e 7561 6c5d 0a20 2020 2020  e [manual].     
-000042e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000042f0: 2020 7c20 2020 2050 6174 683a 202f 686f    |    Path: /ho
-00004300: 6d65 2f65 6d2f 2e6c 6f63 616c 2f6c 6962  me/em/.local/lib
-00004310: 2f63 736f 756e 642f 362e 302f 706c 7567  /csound/6.0/plug
-00004320: 696e 7336 342f 6c69 6270 6f6c 792e 736f  ins64/libpoly.so
-00004330: 0a2a 2073 6e64 6d65 7461 202f 312e 3138  .* sndmeta /1.18
-00004340: 2e32 2020 2020 2020 7c20 6f70 636f 6465  .2      | opcode
-00004350: 7320 7573 696e 6720 6c69 6273 6e64 6669  s using libsndfi
-00004360: 6c65 205b 6d61 6e75 616c 5d0a 2020 2020  le [manual].    
-00004370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004380: 2020 207c 2020 2020 5061 7468 3a20 2f68     |    Path: /h
-00004390: 6f6d 652f 656d 2f2e 6c6f 6361 6c2f 6c69  ome/em/.local/li
-000043a0: 622f 6373 6f75 6e64 2f36 2e30 2f70 6c75  b/csound/6.0/plu
-000043b0: 6769 6e73 3634 2f6c 6962 736e 646d 6574  gins64/libsndmet
-000043c0: 612e 736f 0a2a 2072 6973 7365 7420 2f31  a.so.* risset /1
-000043d0: 2e31 382e 3220 2020 2020 2020 7c20 4f70  .18.2       | Op
-000043e0: 636f 6465 7320 746f 2061 6363 6573 7320  codes to access 
-000043f0: 7269 7373 6574 2070 6163 6b61 6765 206d  risset package m
-00004400: 6574 6164 6174 6120 5b6d 616e 7561 6c5d  etadata [manual]
-00004410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004420: 2020 2020 2020 2020 7c20 2020 2050 6174          |    Pat
-00004430: 683a 202f 686f 6d65 2f65 6d2f 2e6c 6f63  h: /home/em/.loc
-00004440: 616c 2f6c 6962 2f63 736f 756e 642f 362e  al/lib/csound/6.
-00004450: 302f 706c 7567 696e 7336 342f 6c69 6272  0/plugins64/libr
-00004460: 6973 7365 742e 736f 0a2d 2076 7374 3320  isset.so.- vst3 
-00004470: 2f30 2e33 2e30 2020 2020 2020 2020 2020  /0.3.0          
-00004480: 7c20 486f 7374 2076 7374 3320 706c 7567  | Host vst3 plug
-00004490: 696e 7320 696e 2063 736f 756e 640a 2d20  ins in csound.- 
-000044a0: 6368 7561 202f 302e 312e 3020 2020 2020  chua /0.1.0     
-000044b0: 2020 2020 207c 2049 6d70 6c65 6d65 6e74       | Implement
-000044c0: 6174 696f 6e20 6f66 2061 2043 6875 6120  ation of a Chua 
-000044d0: 6f73 6369 6c6c 6174 6f72 0a2d 2068 6466  oscillator.- hdf
-000044e0: 3520 2f30 2e31 2e30 2020 2020 2020 2020  5 /0.1.0        
-000044f0: 2020 7c20 5265 6164 2f57 7269 7465 2073    | Read/Write s
-00004500: 6967 6e61 6c73 2061 6e64 2061 7272 6179  ignals and array
-00004510: 7320 746f 2f66 726f 6d20 616e 2068 6466  s to/from an hdf
-00004520: 3520 6669 6c65 0a2d 2070 7974 686f 6e20  5 file.- python 
-00004530: 2f30 2e31 2e30 2020 2020 2020 2020 7c20  /0.1.0        | 
-00004540: 4f70 636f 6465 7320 746f 2069 6e74 6572  Opcodes to inter
-00004550: 6163 7420 7769 7468 2061 6e20 656d 6265  act with an embe
-00004560: 6464 6564 2070 7974 686f 6e20 696e 7465  dded python inte
-00004570: 7270 7265 7465 720a 0a60 6060 0a0a 2323  rpreter..```..##
-00004580: 2320 496e 7374 616c 6c20 736f 6d65 2070  # Install some p
-00004590: 6163 6b61 6765 730a 0a60 6060 6261 7368  ackages..```bash
-000045a0: 0a0a 2420 7269 7373 6574 2069 6e73 7461  ..$ risset insta
-000045b0: 6c6c 2065 6c73 6520 6a73 6678 0a0a 6060  ll else jsfx..``
-000045c0: 600a 0a23 2323 2053 686f 7720 696e 666f  `..### Show info
-000045d0: 726d 6174 696f 6e20 6162 6f75 7420 6120  rmation about a 
-000045e0: 7370 6563 6966 6963 2070 6163 6b61 6765  specific package
-000045f0: 0a0a 6060 6062 6173 680a 0a24 2072 6973  ..```bash..$ ris
-00004600: 7365 7420 7368 6f77 2070 6f6c 790a 0a50  set show poly..P
-00004610: 6c75 6769 6e20 2020 2020 2020 203a 2070  lugin        : p
-00004620: 6f6c 790a 4175 7468 6f72 2020 2020 2020  oly.Author      
-00004630: 2020 3a20 4564 7561 7264 6f20 4d6f 6775    : Eduardo Mogu
-00004640: 696c 6c61 6e73 6b79 2028 6564 7561 7264  illansky (eduard
-00004650: 6f2e 6d6f 6775 696c 6c61 6e73 6b79 4067  o.moguillansky@g
-00004660: 6d61 696c 2e63 6f6d 290a 5552 4c20 2020  mail.com).URL   
-00004670: 2020 2020 2020 2020 3a20 6874 7470 733a          : https:
-00004680: 2f2f 6769 7468 7562 2e63 6f6d 2f63 736f  //github.com/cso
-00004690: 756e 642d 706c 7567 696e 732f 6373 6f75  und-plugins/csou
-000046a0: 6e64 2d70 6c75 6769 6e73 2e67 6974 0a56  nd-plugins.git.V
-000046b0: 6572 7369 6f6e 2020 2020 2020 203a 2031  ersion       : 1
-000046c0: 2e31 382e 320a 0a49 6e73 7461 6c6c 6564  .18.2..Installed
-000046d0: 2020 2020 203a 2055 6e6b 6e6f 776e 2028       : Unknown (
-000046e0: 7061 7468 3a20 2f68 6f6d 652f 656d 2f2e  path: /home/em/.
-000046f0: 6c6f 6361 6c2f 6c69 622f 6373 6f75 6e64  local/lib/csound
-00004700: 2f36 2e30 2f70 6c75 6769 6e73 3634 2f6c  /6.0/plugins64/l
-00004710: 6962 706f 6c79 2e73 6f29 0a4d 616e 6966  ibpoly.so).Manif
-00004720: 6573 7420 2020 2020 203a 204e 6f20 6d61  est      : No ma
-00004730: 6e69 6665 7374 2028 696e 7374 616c 6c65  nifest (installe
-00004740: 6420 6d61 6e75 616c 6c79 290a 4162 7374  d manually).Abst
-00004750: 7261 6374 2020 2020 2020 3a20 4d75 6c74  ract      : Mult
-00004760: 6970 6c65 2028 7061 7261 6c6c 656c 206f  iple (parallel o
-00004770: 7220 7365 7175 656e 7469 616c 2920 696e  r sequential) in
-00004780: 7374 616e 6365 7320 6f66 2061 6e20 6f70  stances of an op
-00004790: 636f 6465 0a44 6573 6372 6970 7469 6f6e  code.Description
-000047a0: 3a0a 2020 2020 4d75 6c74 6970 6c65 2028  :.    Multiple (
-000047b0: 7061 7261 6c6c 656c 206f 7220 7365 7175  parallel or sequ
-000047c0: 656e 7469 616c 2920 696e 7374 616e 6365  ential) instance
-000047d0: 7320 6f66 2061 6e20 6f70 636f 6465 0a4f  s of an opcode.O
-000047e0: 7063 6f64 6573 3a0a 2020 2020 6465 6665  pcodes:.    defe
-000047f0: 722c 2070 6f6c 792c 2070 6f6c 7930 2c20  r, poly, poly0, 
-00004800: 706f 6c79 7365 710a 4269 6e61 7269 6573  polyseq.Binaries
-00004810: 3a0a 2020 2020 2a20 6c69 6e75 782f 6373  :.    * linux/cs
-00004820: 6f75 6e64 3e3d 362e 3137 3c37 2e30 0a20  ound>=6.17<7.0. 
-00004830: 2020 202a 206c 696e 7578 2f63 736f 756e     * linux/csoun
-00004840: 643e 3d37 2e30 0a20 2020 202a 206d 6163  d>=7.0.    * mac
-00004850: 6f73 2f63 736f 756e 643e 3d36 2e31 373c  os/csound>=6.17<
-00004860: 372e 300a 2020 2020 2a20 6d61 636f 732f  7.0.    * macos/
-00004870: 6373 6f75 6e64 3e3d 372e 300a 2020 2020  csound>=7.0.    
-00004880: 2a20 6d61 636f 732d 6172 6d36 342f 6373  * macos-arm64/cs
-00004890: 6f75 6e64 3e3d 362e 3137 3c37 2e30 0a20  ound>=6.17<7.0. 
-000048a0: 2020 202a 206d 6163 6f73 2d61 726d 3634     * macos-arm64
-000048b0: 2f63 736f 756e 643e 3d37 2e30 0a20 2020  /csound>=7.0.   
-000048c0: 202a 2077 696e 646f 7773 2f63 736f 756e   * windows/csoun
-000048d0: 643e 3d36 2e31 373c 372e 300a 2020 2020  d>=6.17<7.0.    
-000048e0: 2a20 7769 6e64 6f77 732f 6373 6f75 6e64  * windows/csound
-000048f0: 3e3d 372e 300a 2020 2020 0a60 6060 0a0a  >=7.0.    .```..
-00004900: 2323 2320 5265 6d6f 7665 2061 2070 6c75  ### Remove a plu
-00004910: 6769 6e0a 0a60 6060 6261 7368 0a0a 2420  gin..```bash..$ 
-00004920: 7269 7373 6574 2072 656d 6f76 6520 706f  risset remove po
-00004930: 6c79 0a0a 6060 600a 0a23 2323 2053 6565  ly..```..### See
-00004940: 206d 616e 7561 6c20 7061 6765 2066 6f72   manual page for
-00004950: 2061 6e20 6f70 636f 6465 2028 696e 7374   an opcode (inst
-00004960: 616c 6c65 6420 6f72 206e 6f74 290a 0a60  alled or not)..`
-00004970: 6060 6261 7368 0a24 2072 6973 7365 7420  ``bash.$ risset 
-00004980: 6d61 6e20 706f 6c79 0a0a 6060 600a 0a60  man poly..```..`
-00004990: 6060 6d61 726b 646f 776e 0a0a 2320 6d74  ``markdown..# mt
-000049a0: 726f 0a0a 2323 2041 6273 7472 6163 740a  ro..## Abstract.
-000049b0: 0a61 6e20 6163 6375 7261 7465 2076 6572  .an accurate ver
-000049c0: 7369 6f6e 206f 6620 6d65 7472 6f0a 0a0a  sion of metro...
-000049d0: 2323 2044 6573 6372 6970 7469 6f6e 0a0a  ## Description..
-000049e0: 606d 7472 6f60 2069 7320 6120 6472 6f70  `mtro` is a drop
-000049f0: 2d69 6e20 7265 706c 6163 656d 656e 7420  -in replacement 
-00004a00: 6f66 2060 6d65 7472 6f60 2077 6974 686f  of `metro` witho
-00004a10: 7574 2074 6865 0a64 7269 6674 696e 6720  ut the.drifting 
-00004a20: 6f76 6572 2074 696d 652e 2060 6d65 7472  over time. `metr
-00004a30: 6f60 2069 7320 696d 706c 656d 656e 7465  o` is implemente
-00004a40: 6420 6279 2061 6464 696e 6720 6120 7068  d by adding a ph
-00004a50: 6173 650a 6561 6368 2063 7963 6c65 2c20  ase.each cycle, 
-00004a60: 7768 6963 6820 7265 7375 6c74 7320 696e  which results in
-00004a70: 2064 7269 6674 696e 6720 6f76 6572 2074   drifting over t
-00004a80: 696d 6520 6475 6520 746f 2072 6f75 6e64  ime due to round
-00004a90: 696e 6720 6572 726f 7273 2e0a 606d 7472  ing errors..`mtr
-00004aa0: 6f60 2061 766f 6964 7320 7468 6973 2070  o` avoids this p
-00004ab0: 726f 626c 656d 2062 7920 6b65 6570 696e  roblem by keepin
-00004ac0: 6720 6120 636f 756e 7465 7220 616e 6420  g a counter and 
-00004ad0: 646f 696e 6720 6d75 6c74 6970 6c69 6361  doing multiplica
-00004ae0: 7469 6f6e 0a73 6f20 7468 6174 2074 6865  tion.so that the
-00004af0: 2065 7272 6f72 2069 7320 6c69 6d69 7465   error is limite
-00004b00: 642e 0a0a 466f 6c6c 6f77 696e 6720 6d65  d...Following me
-00004b10: 7472 6f27 7320 696d 706c 656d 656e 7461  tro's implementa
-00004b20: 7469 6f6e 2062 7920 6465 6661 756c 7420  tion by default 
-00004b30: 606d 7472 6f60 2069 7320 7472 6967 6765  `mtro` is trigge
-00004b40: 7265 6420 6174 2074 696d 653d 302e 2054  red at time=0. T
-00004b50: 6869 730a 6973 2062 6563 6175 7365 2060  his.is because `
-00004b60: 695f 696e 6974 7068 6173 6560 2069 7320  i_initphase` is 
-00004b70: 7365 7420 746f 2031 2062 7920 6465 6661  set to 1 by defa
-00004b80: 756c 742e 2049 7420 6973 2070 6f73 7369  ult. It is possi
-00004b90: 626c 6520 746f 206d 616b 6520 606d 7472  ble to make `mtr
-00004ba0: 6f60 2073 6b69 7020 7468 650a 3020 7472  o` skip the.0 tr
-00004bb0: 6967 6765 7220 6279 2073 6574 7469 6e67  igger by setting
-00004bc0: 2060 695f 696e 6974 7068 6173 6560 2074   `i_initphase` t
-00004bd0: 6f20 302e 0a0a 2323 2053 796e 7461 780a  o 0...## Syntax.
-00004be0: 0a0a 2020 2020 6b6f 7574 206d 7472 6f20  ..    kout mtro 
-00004bf0: 6b66 7265 712c 2069 5f69 6e69 7470 6861  kfreq, i_initpha
-00004c00: 7365 3d31 0a0a 0a23 2320 4172 6775 6d65  se=1...## Argume
-00004c10: 6e74 730a 0a2a 202a 2a6b 6672 6571 2a2a  nts..* **kfreq**
-00004c20: 3a20 7468 6520 6672 6571 7565 6e63 7920  : the frequency 
-00004c30: 6f66 2074 6865 2074 7269 6767 6572 0a2a  of the trigger.*
-00004c40: 202a 2a69 5f69 6e69 7470 6861 7365 2a2a   **i_initphase**
-00004c50: 3a20 7468 6520 696e 6974 6961 6c20 7068  : the initial ph
-00004c60: 6173 6520 2861 2076 616c 7565 2062 6574  ase (a value bet
-00004c70: 7765 656e 2030 2061 6e64 2031 292e 2049  ween 0 and 1). I
-00004c80: 6620 7365 7420 746f 2030 2c20 7468 6572  f set to 0, ther
-00004c90: 6520 6973 206e 6f20 7472 6967 6765 7220  e is no trigger 
-00004ca0: 6174 2074 696d 6520 302e 0a20 2020 2020  at time 0..     
-00004cb0: 2020 2049 6620 7365 7420 746f 2031 2c20     If set to 1, 
-00004cc0: 606d 7472 6f60 2074 7269 6767 6572 7320  `mtro` triggers 
-00004cd0: 6174 2074 696d 653d 302c 2073 696d 696c  at time=0, simil
-00004ce0: 6172 2074 6f20 606d 6574 726f 600a 0a23  ar to `metro`..#
-00004cf0: 2320 4f75 7470 7574 0a0a 2a20 2a2a 6b6f  # Output..* **ko
-00004d00: 7574 2a2a 3a20 3120 6966 2074 6865 206d  ut**: 1 if the m
-00004d10: 7472 6f20 6861 7320 7472 6967 6765 7265  tro has triggere
-00004d20: 642c 2030 206f 7468 6572 7769 7365 0a0a  d, 0 otherwise..
-00004d30: 2323 2045 7865 6375 7469 6f6e 2054 696d  ## Execution Tim
-00004d40: 650a 0a2a 2050 6572 666f 726d 616e 6365  e..* Performance
-00004d50: 0a0a 6060 600a 0a2d 2d2d 2d2d 2d2d 2d2d  ..```..---------
-00004d60: 2d2d 2d2d 2d2d 0a0a 0a23 2052 6973 7365  ------...# Risse
-00004d70: 7420 636f 6d6d 616e 6473 0a0a 2323 2320  t commands..### 
-00004d80: 7570 6461 7465 0a0a 5570 6461 7465 2074  update..Update t
-00004d90: 6865 206c 6f63 616c 2069 6e64 6578 2074  he local index t
-00004da0: 6f20 7468 6520 6c61 7465 7374 2073 7461  o the latest sta
-00004db0: 7465 2e0a 0a20 2020 2024 2072 6973 7365  te...    $ risse
-00004dc0: 7420 7570 6461 7465 0a0a 0a23 2323 206c  t update...### l
-00004dd0: 6973 740a 0a4c 6973 7420 616c 6c20 6176  ist..List all av
-00004de0: 6169 6c61 626c 6520 706c 7567 696e 7320  ailable plugins 
-00004df0: 666f 7220 796f 7572 2070 6c61 7466 6f72  for your platfor
-00004e00: 6d0a 0a20 2020 2024 2072 6973 7365 7420  m..    $ risset 
-00004e10: 6c69 7374 205b 6f70 7469 6f6e 735d 0a0a  list [options]..
-00004e20: 2323 2323 2320 4f70 7469 6f6e 730a 0a2a  ##### Options..*
-00004e30: 2060 2d2d 6e61 6d65 6f6e 6c79 603a 204f   `--nameonly`: O
-00004e40: 7574 7075 7420 6a75 7374 2074 6865 206e  utput just the n
-00004e50: 616d 6520 6f66 2065 6163 6820 706c 7567  ame of each plug
-00004e60: 696e 0a2a 2060 2d2d 696e 7374 616c 6c65  in.* `--installe
-00004e70: 6460 3a20 4c69 7374 206f 6e6c 7920 696e  d`: List only in
-00004e80: 7374 616c 6c65 6420 706c 7567 696e 730a  stalled plugins.
-00004e90: 2a20 602d 2d75 7067 7261 6465 6162 6c65  * `--upgradeable
-00004ea0: 603a 204c 6973 7420 6f6e 6c79 2069 6e73  `: List only ins
-00004eb0: 7461 6c6c 6564 2070 6163 6b61 6765 7320  talled packages 
-00004ec0: 7768 6963 6820 6361 6e20 6265 2075 7067  which can be upg
-00004ed0: 7261 6465 640a 2a20 602d 2d6e 6f74 696e  raded.* `--notin
-00004ee0: 7374 616c 6c65 6460 3a20 4c69 7374 206f  stalled`: List o
-00004ef0: 6e6c 7920 706c 7567 696e 7320 7768 6963  nly plugins whic
-00004f00: 6820 6172 6520 6e6f 7420 696e 7374 616c  h are not instal
-00004f10: 6c65 640a 2a20 602d 312c 202d 2d6f 6e65  led.* `-1, --one
-00004f20: 6c69 6e65 603a 204c 6973 7420 6561 6368  line`: List each
-00004f30: 2070 6c75 6769 6e20 696e 206f 6e65 206c   plugin in one l
-00004f40: 696e 650a 0a0a 2323 2320 7368 6f77 0a0a  ine...### show..
-00004f50: 5368 6f77 2069 6e66 6f72 6d61 7469 6f6e  Show information
-00004f60: 2061 626f 7574 2061 2070 6c75 6769 6e0a   about a plugin.
-00004f70: 0a20 2020 2024 2072 6973 7365 7420 7368  .    $ risset sh
-00004f80: 6f77 203c 706c 7567 696e 3e0a 0a0a 2323  ow <plugin>...##
-00004f90: 2320 696e 7374 616c 6c0a 0a49 6e73 7461  # install..Insta
-00004fa0: 6c6c 206f 6e65 206f 7220 6d75 6c74 6970  ll one or multip
-00004fb0: 6c65 2070 6c75 6769 6e73 0a0a 2020 2020  le plugins..    
-00004fc0: 2420 7269 7373 6574 2069 6e73 7461 6c6c  $ risset install
-00004fd0: 205b 2d2d 666f 7263 655d 203c 706c 7567   [--force] <plug
-00004fe0: 696e 3e20 5b3c 706c 7567 696e 323e 2c20  in> [<plugin2>, 
-00004ff0: 2e2e 2e5d 0a0a 496e 7374 616c 6c20 6120  ...]..Install a 
-00005000: 6769 7665 6e20 706c 7567 696e 2066 6f72  given plugin for
-00005010: 2074 6865 2063 7572 7265 6e74 2070 6c61   the current pla
-00005020: 7466 6f72 6d2e 2050 6c75 6769 6e73 2061  tform. Plugins a
-00005030: 7265 2069 6e73 7461 6c6c 6564 2069 6e74  re installed int
-00005040: 6f0a 7468 6520 7573 6572 2066 6f6c 6465  o.the user folde
-00005050: 7220 286e 6f20 6164 6d69 6e69 7374 7261  r (no administra
-00005060: 746f 7220 7265 7175 6972 656d 656e 7473  tor requirements
-00005070: 2061 7265 206e 6565 6465 6429 2e20 4c6f   are needed). Lo
-00005080: 6f6b 2061 7420 7468 6520 6069 6e66 6f60  ok at the `info`
-00005090: 0a63 6f6d 6d61 6e64 2074 6f20 7175 6572  .command to quer
-000050a0: 7920 696e 666f 726d 6174 696f 6e20 6162  y information ab
-000050b0: 6f75 7420 7468 6520 7379 7374 656d 2e0a  out the system..
-000050c0: 0a23 2323 2323 204f 7074 696f 6e73 0a0a  .##### Options..
-000050d0: 2a20 602d 2d66 6f72 6365 603a 2049 6e73  * `--force`: Ins
-000050e0: 7461 6c6c 7320 6120 706c 7567 696e 2065  talls a plugin e
-000050f0: 7665 6e20 6966 2074 6865 2070 6c75 6769  ven if the plugi
-00005100: 6e20 7769 7468 2074 6865 2073 616d 6520  n with the same 
-00005110: 7665 7273 696f 6e20 6973 2061 6c72 6561  version is alrea
-00005120: 6479 2069 6e73 7461 6c6c 6564 0a0a 7468  dy installed..th
-00005130: 6520 7379 7374 656d 2066 6f6c 6465 7220  e system folder 
-00005140: 7768 6572 6520 616c 6c20 6f74 6865 7220  where all other 
-00005150: 6275 696c 7469 6e20 706c 7567 696e 7320  builtin plugins 
-00005160: 6172 6520 696e 7374 616c 6c65 6420 2874  are installed (t
-00005170: 6869 7320 7265 7175 6972 6573 2061 646d  his requires adm
-00005180: 696e 6973 7472 6174 6f72 2072 6967 6874  inistrator right
-00005190: 7320 696e 2073 6f6d 6520 706c 6174 666f  s in some platfo
-000051a0: 726d 7329 2e20 4164 6d69 6e20 7269 6768  rms). Admin righ
-000051b0: 7473 2061 7265 206e 6565 6465 6420 666f  ts are needed fo
-000051c0: 7220 7468 6973 2e0a 0a0a 2323 2320 7265  r this....### re
-000051d0: 6d6f 7665 0a0a 5265 6d6f 7665 2061 6e20  move..Remove an 
-000051e0: 696e 7374 616c 6c65 6420 706c 7567 696e  installed plugin
-000051f0: 0a0a 2020 2020 2420 7269 7373 6574 2072  ..    $ risset r
-00005200: 656d 6f76 6520 3c70 6c75 6769 6e3e 0a0a  emove <plugin>..
-00005210: 0a20 2020 2023 2323 2320 646f 6375 6d65  .    #### docume
-00005220: 6e74 6174 696f 6e0a 0a4f 7065 6e20 6d61  ntation..Open ma
-00005230: 6e20 7061 6765 2061 7320 6d61 726b 646f  n page as markdo
-00005240: 776e 2069 6e20 7468 6520 636f 6d6d 616e  wn in the comman
-00005250: 6420 6c69 6e65 0a0a 0a20 2020 2024 2072  d line...    $ r
-00005260: 6973 7365 7420 6d61 6e20 5b6f 7074 696f  isset man [optio
-00005270: 6e73 5d20 3c6f 7063 6f64 653e 0a0a 0a23  ns] <opcode>...#
-00005280: 2323 2323 204f 7074 696f 6e73 0a0a 2a20  #### Options..* 
-00005290: 602d 732c 202d 2d73 696d 706c 6570 6174  `-s, --simplepat
-000052a0: 6860 3a20 5072 696e 7420 6a75 7374 2074  h`: Print just t
-000052b0: 6865 2070 6174 6820 6f66 2074 6865 206d  he path of the m
-000052c0: 616e 7561 6c20 7061 6765 0a2a 2060 2d6d  anual page.* `-m
-000052d0: 2c20 2d2d 6d61 726b 646f 776e 603a 2055  , --markdown`: U
-000052e0: 7365 2074 6865 202e 6d64 2070 6167 6520  se the .md page 
-000052f0: 696e 7374 6561 6420 6f66 2074 6865 202e  instead of the .
-00005300: 6874 6d6c 2076 6572 7369 6f6e 0a2a 2060  html version.* `
-00005310: 2d65 2c20 2d2d 6578 7465 726e 616c 603a  -e, --external`:
-00005320: 204f 7065 6e20 7468 6520 6d61 6e20 7061   Open the man pa
-00005330: 6765 2069 6e20 7468 6520 6465 6661 756c  ge in the defaul
-00005340: 7420 6170 702e 2054 6869 7320 6973 206f  t app. This is o
-00005350: 6e6c 7920 7573 6564 2077 6865 6e20 6f70  nly used when op
-00005360: 656e 696e 6720 7468 6520 6d61 726b 646f  ening the markdo
-00005370: 776e 206d 616e 2070 6167 652e 0a2a 2060  wn man page..* `
-00005380: 2d2d 6874 6d6c 603a 204f 7065 6e73 2074  --html`: Opens t
-00005390: 6865 202e 6874 6d6c 2076 6572 7369 6f6e  he .html version
-000053a0: 206f 6620 7468 6520 6d61 6e70 6167 6520   of the manpage 
-000053b0: 696e 2074 6865 2064 6566 6175 6c74 2062  in the default b
-000053c0: 726f 7773 6572 2028 6f72 206f 7574 7075  rowser (or outpu
-000053d0: 7473 2074 6865 2070 6174 6820 7769 7468  ts the path with
-000053e0: 2074 6865 202d 2d70 6174 6820 6f70 7469   the --path opti
-000053f0: 6f6e 290a 2a20 602d 2d74 6865 6d65 207b  on).* `--theme {
-00005400: 6461 726b 2c6c 6967 6874 2c67 7275 7662  dark,light,gruvb
-00005410: 6f78 2d64 6172 6b2c 6772 7576 626f 782d  ox-dark,gruvbox-
-00005420: 6c69 6768 742c 6d61 7465 7269 616c 2c66  light,material,f
-00005430: 7275 6974 792c 6e61 7469 7665 7d60 3a20  ruity,native}`: 
-00005440: 5374 796c 6520 7573 6564 2077 6865 6e20  Style used when 
-00005450: 6469 7370 6c61 7969 6e67 206d 6172 6b64  displaying markd
-00005460: 6f77 6e20 6669 6c65 7320 2864 6566 6175  own files (defau
-00005470: 6c74 3d64 6172 6b29 0a0a 4f70 656e 2074  lt=dark)..Open t
-00005480: 6865 2068 746d 6c20 6d61 6e20 7061 6765  he html man page
-00005490: 2069 6e20 7468 6520 6465 6661 756c 7420   in the default 
-000054a0: 6272 6f77 7365 723a 0a0a 2020 2020 2420  browser:..    $ 
-000054b0: 7269 7373 6574 206d 616e 202d 2d68 746d  risset man --htm
-000054c0: 6c20 3c6f 7063 6f64 653e 0a0a 4765 6e65  l <opcode>..Gene
-000054d0: 7261 7465 2f75 7064 6174 6520 646f 6375  rate/update docu
-000054e0: 6d65 6e74 6174 696f 6e3a 0a0a 2020 2020  mentation:..    
-000054f0: 2420 7269 7373 6574 206d 616b 6564 6f63  $ risset makedoc
-00005500: 730a 0a42 7569 6c64 2074 6865 2064 6f63  s..Build the doc
-00005510: 756d 656e 7461 7469 6f6e 2066 6f72 2061  umentation for a
-00005520: 6c6c 2064 6566 696e 6564 2070 6c75 6769  ll defined plugi
-00005530: 6e73 2e20 5468 6973 2064 6570 656e 6473  ns. This depends
-00005540: 206f 6e20 2a2a 6d6b 646f 6373 2a2a 2062   on **mkdocs** b
-00005550: 6569 6e67 2069 6e73 7461 6c6c 6564 0a0a  eing installed..
-00005560: 0a23 2323 2075 7067 7261 6465 0a0a 2020  .### upgrade..  
-00005570: 2020 2420 7269 7373 6574 2075 7067 7261    $ risset upgra
-00005580: 6465 0a0a 5570 6772 6164 6520 616e 7920  de..Upgrade any 
-00005590: 696e 7374 616c 6c65 6420 706c 7567 696e  installed plugin
-000055a0: 2074 6f20 7468 6520 6c61 7465 7374 2076   to the latest v
-000055b0: 6572 7369 6f6e 0a0a 0a23 2323 206c 6973  ersion...### lis
-000055c0: 746f 7063 6f64 6573 0a0a 2020 2020 2420  topcodes..    $ 
-000055d0: 7269 7373 6574 206c 6973 746f 7063 6f64  risset listopcod
-000055e0: 6573 0a0a 4c69 7374 2069 6e73 7461 6c6c  es..List install
-000055f0: 6564 206f 7063 6f64 6573 0a0a 0a23 2323  ed opcodes...###
-00005600: 2323 204f 7074 696f 6e73 0a0a 2a20 602d  ## Options..* `-
-00005610: 6c2c 202d 2d6c 6f6e 6760 3a20 4c6f 6e67  l, --long`: Long
-00005620: 2066 6f72 6d61 740a 0a60 6060 0a24 2072   format..```.$ r
-00005630: 6973 7365 7420 6c69 7374 6f70 636f 6465  isset listopcode
-00005640: 7320 2d6c 0a0a 6163 6375 6d20 2020 2020  s -l..accum     
-00005650: 2020 2020 2020 2020 2020 656c 7365 2020            else  
-00005660: 2020 2020 2020 5369 6d70 6c65 2061 6363        Simple acc
-00005670: 756d 756c 6174 6f72 206f 6620 7363 616c  umulator of scal
-00005680: 6172 2076 616c 7565 730a 6174 7374 6f70  ar values.atstop
-00005690: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000056a0: 7365 2020 2020 2020 2020 5363 6865 6475  se        Schedu
-000056b0: 6c65 2061 6e20 696e 7374 7275 6d65 6e74  le an instrument
-000056c0: 2061 7420 7468 6520 656e 6420 6f66 2074   at the end of t
-000056d0: 6865 2063 7572 7265 6e74 2069 6e73 7472  he current instr
-000056e0: 756d 656e 740a 6265 6164 7379 6e74 2020  ument.beadsynt  
-000056f0: 2020 2020 2020 2020 2020 6265 6f73 6320            beosc 
-00005700: 2020 2020 2020 4261 6e64 2d45 6e68 616e        Band-Enhan
-00005710: 6365 6420 4f73 6369 6c6c 6174 6f72 2d42  ced Oscillator-B
-00005720: 616e 6b0a 6265 6f73 6320 2020 2020 2020  ank.beosc       
-00005730: 2020 2020 2020 2020 6265 6f73 6320 2020          beosc   
-00005740: 2020 2020 4261 6e64 2d45 6e68 616e 6365      Band-Enhance
-00005750: 6420 4f73 6369 6c6c 6174 6f72 0a62 6973  d Oscillator.bis
-00005760: 6563 7420 2020 2020 2020 2020 2020 2020  ect             
-00005770: 2065 6c73 6520 2020 2020 2020 2052 6574   else        Ret
-00005780: 7572 6e73 2074 6865 2066 7261 6374 696f  urns the fractio
-00005790: 6e61 6c20 696e 6465 7820 6f66 2061 2076  nal index of a v
-000057a0: 616c 7565 2077 6974 6869 6e20 6120 736f  alue within a so
-000057b0: 7274 6564 2061 72e2 80a6 6179 202f 2074  rted ar...ay / t
-000057c0: 6162 0a63 6875 6170 2020 2020 2020 2020  ab.chuap        
-000057d0: 2020 2020 2020 2063 6875 6120 2020 2020         chua     
-000057e0: 2020 2053 696d 756c 6174 6573 2043 6875     Simulates Chu
-000057f0: 6127 7320 6f73 6369 6c6c 6174 6f72 0a63  a's oscillator.c
-00005800: 7261 636b 6c65 2020 2020 2020 2020 2020  rackle          
-00005810: 2020 2065 6c73 6520 2020 2020 2020 2067     else        g
-00005820: 656e 6572 6174 6573 206e 6f69 7365 2062  enerates noise b
-00005830: 6173 6564 206f 6e20 6120 6368 616f 7469  ased on a chaoti
-00005840: 6320 6571 7561 7469 6f6e 0a64 6566 6572  c equation.defer
-00005850: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00005860: 6f6c 7920 2020 2020 2020 2052 756e 2061  oly        Run a
-00005870: 6e20 6f70 636f 6465 2061 7420 7468 6520  n opcode at the 
-00005880: 656e 6420 6f66 2063 7572 7265 6e74 2065  end of current e
-00005890: 7665 6e74 0a64 6572 6566 2020 2020 2020  vent.deref      
-000058a0: 2020 2020 2020 2020 2065 6c73 6520 2020           else   
-000058b0: 2020 2020 2044 6572 6566 6572 656e 6365       Dereference
-000058c0: 2061 2070 7265 7669 6f75 736c 7920 6372   a previously cr
-000058d0: 6561 7465 6420 7265 6665 7265 6e63 6520  eated reference 
-000058e0: 746f 2061 2076 6172 6961 626c 650a 6465  to a variable.de
-000058f0: 7465 6374 7369 6c65 6e63 6520 2020 2020  tectsilence     
-00005900: 2020 656c 7365 2020 2020 2020 2020 4465    else        De
-00005910: 7465 6374 2077 6865 6e20 696e 7075 7420  tect when input 
-00005920: 6661 6c6c 7320 6265 6c6f 7720 616e 2061  falls below an a
-00005930: 6d70 6c69 7475 6465 2074 6872 6573 686f  mplitude thresho
-00005940: 6c64 0a64 6963 745f 6465 6c20 2020 2020  ld.dict_del     
-00005950: 2020 2020 2020 206b 6c69 6220 2020 2020         klib     
-00005960: 2020 2052 656d 6f76 6520 6120 6b65 793a     Remove a key:
-00005970: 7661 6c75 6520 7061 6972 2066 726f 6d20  value pair from 
-00005980: 6120 6861 7368 7461 626c 650a 6469 6374  a hashtable.dict
-00005990: 5f64 756d 7020 2020 2020 2020 2020 2020  _dump           
-000059a0: 6b6c 6962 2020 2020 2020 2020 4475 6d70  klib        Dump
-000059b0: 7320 7468 6520 636f 6e74 656e 7473 206f  s the contents o
-000059c0: 6620 7468 6973 2064 6963 7420 6173 2061  f this dict as a
-000059d0: 2073 7472 696e 670a 6469 6374 5f65 7869   string.dict_exi
-000059e0: 7374 7320 2020 2020 2020 2020 6b6c 6962  sts         klib
-000059f0: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
-00005a00: 3120 6966 2074 6865 2064 6963 7420 6578  1 if the dict ex
-00005a10: 6973 7473 2c20 3020 6f74 6865 7277 6973  ists, 0 otherwis
-00005a20: 650a 6469 6374 5f66 7265 6520 2020 2020  e.dict_free     
-00005a30: 2020 2020 2020 6b6c 6962 2020 2020 2020        klib      
-00005a40: 2020 4672 6565 2061 2068 6173 6874 6162    Free a hashtab
-00005a50: 6c65 0a2e 2e2e 0a0a 6060 600a 0a23 2323  le......```..###
-00005a60: 2064 6f77 6e6c 6f61 640a 0a20 2020 2024   download..    $
-00005a70: 2072 6973 7365 7420 646f 776e 6c6f 6164   risset download
-00005a80: 203c 706c 7567 696e 3e0a 0a44 6f77 6e6c   <plugin>..Downl
-00005a90: 6f61 6420 6120 706c 7567 696e 0a0a 2323  oad a plugin..##
-00005aa0: 2323 2320 4f70 7469 6f6e 730a 0a2a 2060  ### Options..* `
-00005ab0: 2d2d 7061 7468 2050 4154 4860 3a20 4469  --path PATH`: Di
-00005ac0: 7265 6374 6f72 7920 746f 2064 6f77 6e6c  rectory to downl
-00005ad0: 6f61 6420 7468 6520 706c 7567 696e 2074  oad the plugin t
-00005ae0: 6f20 2864 6566 6175 6c74 3a20 6375 7272  o (default: curr
-00005af0: 656e 7420 6469 7265 6374 6f72 7929 0a2a  ent directory).*
-00005b00: 2060 2d2d 706c 6174 666f 726d 603a 2054   `--platform`: T
-00005b10: 6865 2070 6c61 7466 6f72 6d20 6f66 2074  he platform of t
-00005b20: 6865 2070 6c75 6769 6e20 746f 2064 6f77  he plugin to dow
-00005b30: 6e6c 6f61 6420 2864 6566 6175 6c74 3a20  nload (default: 
-00005b40: 6375 7272 656e 7420 706c 6174 666f 726d  current platform
-00005b50: 292e 204f 6e65 206f 6620 2a6c 696e 7578  ). One of *linux
-00005b60: 2a2c 202a 6d61 636f 732a 2c20 2a77 696e  *, *macos*, *win
-00005b70: 646f 772a 2c20 2a6d 6163 6f73 2d61 726d  dow*, *macos-arm
-00005b80: 3634 2a2c 202a 6c69 6e75 782d 6172 6d36  64*, *linux-arm6
-00005b90: 342a 0a0a 0a23 2323 2069 6e66 6f0a 0a20  4*...### info.. 
-00005ba0: 2020 2024 2072 6973 7365 7420 696e 666f     $ risset info
-00005bb0: 205b 6f70 7469 6f6e 735d 0a0a 4f75 7470   [options]..Outp
-00005bc0: 7574 7320 696e 666f 726d 6174 696f 6e20  uts information 
-00005bd0: 6162 6f75 7420 7468 6520 656e 7669 726f  about the enviro
-00005be0: 6e6d 656e 7420 6173 206a 736f 6e20 696e  nment as json in
-00005bf0: 206f 7264 6572 2074 6f20 6265 2069 6e74   order to be int
-00005c00: 6567 7261 7465 6420 6279 206f 7468 6572  egrated by other
-00005c10: 2073 7973 7465 6d73 2e0a 466f 7220 6578   systems..For ex
-00005c20: 616d 706c 652c 202a 2a43 736f 756e 6451  ample, **CsoundQ
-00005c30: 542a 2a20 7573 6573 2074 6869 7320 636f  T** uses this co
-00005c40: 6d6d 616e 6420 746f 2072 6561 6420 7468  mmand to read th
-00005c50: 6520 696e 7374 616c 6c65 6420 706c 7567  e installed plug
-00005c60: 696e 7320 616e 6420 7468 6569 7220 6f70  ins and their op
-00005c70: 636f 6465 730a 616e 6420 646f 6375 6d65  codes.and docume
-00005c80: 6e74 6174 696f 6e0a 0a23 2323 2323 204f  ntation..##### O
-00005c90: 7074 696f 6e73 0a0a 2a20 602d 2d6f 7574  ptions..* `--out
-00005ca0: 6669 6c65 204f 5554 4649 4c45 603a 2053  file OUTFILE`: S
-00005cb0: 6176 6520 6f75 7470 7574 2074 6f20 7468  ave output to th
-00005cc0: 6973 2070 6174 680a 2a20 602d 2d66 756c  is path.* `--ful
-00005cd0: 6c60 3a20 496e 636c 7564 6520 616c 6c20  l`: Include all 
-00005ce0: 6176 6169 6c61 626c 6520 696e 666f 726d  available inform
-00005cf0: 6174 696f 6e0a 0a2d 2d2d 2d2d 2d2d 0a0a  ation..-------..
-00005d00: 2320 506c 7567 696e 2044 6f63 756d 656e  # Plugin Documen
-00005d10: 7461 7469 6f6e 0a0a 446f 6375 6d65 6e74  tation..Document
-00005d20: 6174 696f 6e20 666f 7220 616c 6c20 706c  ation for all pl
-00005d30: 7567 696e 7320 6361 6e20 6265 2066 6f75  ugins can be fou
-00005d40: 6e64 2068 6572 653a 2068 7474 7073 3a2f  nd here: https:/
-00005d50: 2f63 736f 756e 642d 706c 7567 696e 732e  /csound-plugins.
-00005d60: 6769 7468 7562 2e69 6f2f 7269 7373 6574  github.io/risset
-00005d70: 2d64 6f63 732f 0a0a 2d2d 2d2d 2d2d 2d0a  -docs/..-------.
-00005d80: 0a23 2055 7067 7261 6469 6e67 2072 6973  .# Upgrading ris
-00005d90: 7365 740a 0a49 6620 696e 7374 616c 6c65  set..If installe
-00005da0: 6420 7669 6120 6070 6970 602c 2064 6f3a  d via `pip`, do:
-00005db0: 0a0a 2020 2020 7069 7020 696e 7374 616c  ..    pip instal
-00005dc0: 6c20 7269 7373 6574 202d 550a 0a49 6620  l risset -U..If 
-00005dd0: 696e 7374 616c 6c65 6420 7669 6120 6067  installed via `g
-00005de0: 6974 602c 2067 6f20 746f 2074 6865 2072  it`, go to the r
-00005df0: 6570 6f73 6974 6f72 7920 616e 6420 646f  epository and do
-00005e00: 3a0a 0a20 2020 2067 6974 2070 756c 6c0a  :..    git pull.
-00005e10: 2020 2020 7079 7468 6f6e 2073 6574 7570      python setup
-00005e20: 2e70 7920 696e 7374 616c 6c0a 0a0a 2d2d  .py install...--
-00005e30: 2d2d 2d0a 0a23 2043 6f6e 7472 6962 7574  ---..# Contribut
-00005e40: 696e 670a 0a49 6e20 6f72 6465 7220 746f  ing..In order to
-00005e50: 2061 6464 2f6d 6f64 6966 7920 6120 706c   add/modify a pl
-00005e60: 7567 696e 2c20 636c 6f6e 6520 5b72 6973  ugin, clone [ris
-00005e70: 7365 742d 6461 7461 5d28 6874 7470 733a  set-data](https:
-00005e80: 2f2f 6769 7468 7562 2e63 6f6d 2f63 736f  //github.com/cso
-00005e90: 756e 642d 706c 7567 696e 732f 7269 7373  und-plugins/riss
-00005ea0: 6574 2d64 6174 6129 0a0a 4174 2074 6865  et-data)..At the
-00005eb0: 2072 6f6f 7420 6f66 2074 6865 2072 6570   root of the rep
-00005ec0: 6f73 6974 6f72 7920 7468 6572 6520 6973  ository there is
-00005ed0: 2061 6e20 696e 6465 7820 6669 6c65 2060   an index file `
-00005ee0: 7269 7373 6574 696e 6465 782e 6a73 6f6e  rissetindex.json
-00005ef0: 602c 2077 6974 6820 7468 6520 666f 726d  `, with the form
-00005f00: 3a0a 0a60 6060 6a73 6f6e 0a7b 0a20 2020  :..```json.{.   
-00005f10: 2022 7665 7273 696f 6e22 3a20 2231 2e30   "version": "1.0
-00005f20: 2e30 222c 0a20 2020 2022 706c 7567 696e  .0",.    "plugin
-00005f30: 7322 3a20 7b0a 2020 2020 2020 2020 2265  s": {.        "e
-00005f40: 6c73 6522 3a20 7b0a 2020 2020 2020 2020  lse": {.        
-00005f50: 2020 2020 2275 726c 223a 2022 6874 7470      "url": "http
-00005f60: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f63  s://github.com/c
-00005f70: 736f 756e 642d 706c 7567 696e 732f 6373  sound-plugins/cs
-00005f80: 6f75 6e64 2d70 6c75 6769 6e73 2e67 6974  ound-plugins.git
-00005f90: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00005fa0: 7061 7468 223a 2022 7372 632f 656c 7365  path": "src/else
-00005fb0: 220a 2020 2020 2020 2020 7d2c 0a20 2020  ".        },.   
-00005fc0: 2020 2020 2022 7061 7468 746f 6f6c 7322       "pathtools"
-00005fd0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-00005fe0: 2275 726c 223a 2022 6874 7470 733a 2f2f  "url": "https://
-00005ff0: 6769 7468 7562 2e63 6f6d 2f63 736f 756e  github.com/csoun
-00006000: 642d 706c 7567 696e 732f 6373 6f75 6e64  d-plugins/csound
-00006010: 2d70 6c75 6769 6e73 2e67 6974 222c 0a20  -plugins.git",. 
-00006020: 2020 2020 2020 2020 2020 2022 7061 7468             "path
-00006030: 223a 2022 7372 632f 7061 7468 746f 6f6c  ": "src/pathtool
-00006040: 7322 0a20 2020 2020 2020 207d 2c0a 2020  s".        },.  
-00006050: 2020 2020 2020 226b 6c69 6222 3a20 7b0a        "klib": {.
-00006060: 2020 2020 2020 2020 2020 2020 2275 726c              "url
-00006070: 223a 2022 6874 7470 733a 2f2f 6769 7468  ": "https://gith
-00006080: 7562 2e63 6f6d 2f63 736f 756e 642d 706c  ub.com/csound-pl
-00006090: 7567 696e 732f 6373 6f75 6e64 2d70 6c75  ugins/csound-plu
-000060a0: 6769 6e73 2e67 6974 222c 0a20 2020 2020  gins.git",.     
-000060b0: 2020 2020 2020 2022 7061 7468 223a 2022         "path": "
-000060c0: 7372 632f 6b6c 6962 220a 2020 2020 2020  src/klib".      
-000060d0: 2020 7d2c 0a20 2020 2020 2020 2022 6265    },.        "be
-000060e0: 6f73 6322 3a20 7b0a 2020 2020 2020 2020  osc": {.        
-000060f0: 2020 2020 2275 726c 223a 2022 6874 7470      "url": "http
-00006100: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f63  s://github.com/c
-00006110: 736f 756e 642d 706c 7567 696e 732f 6373  sound-plugins/cs
-00006120: 6f75 6e64 2d70 6c75 6769 6e73 2e67 6974  ound-plugins.git
-00006130: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00006140: 7061 7468 223a 2022 7372 632f 6265 6f73  path": "src/beos
-00006150: 6322 0a20 2020 2020 2020 207d 2c0a 2020  c".        },.  
-00006160: 2020 2020 2020 2276 7374 3322 3a20 7b0a        "vst3": {.
-00006170: 2020 2020 2020 2020 2020 2020 2275 726c              "url
-00006180: 223a 2022 6874 7470 733a 2f2f 6769 7468  ": "https://gith
-00006190: 7562 2e63 6f6d 2f63 736f 756e 642d 706c  ub.com/csound-pl
-000061a0: 7567 696e 732f 7673 7433 2d72 6973 7365  ugins/vst3-risse
-000061b0: 742e 6769 7422 0a20 2020 2020 2020 207d  t.git".        }
-000061c0: 0a20 2020 207d 0a7d 0a60 6060 0a0a 546f  .    }.}.```..To
-000061d0: 2061 6464 2061 2070 6c75 6769 6e20 746f   add a plugin to
-000061e0: 2074 6865 2069 6e64 6578 2c20 6a75 7374   the index, just
-000061f0: 2065 7874 656e 6420 7468 6520 2a70 6c75   extend the *plu
-00006200: 6769 6e73 2a20 6469 6374 2e20 5468 6520  gins* dict. The 
-00006210: 7572 6c20 7368 6f75 6c64 2070 6f69 6e74  url should point
-00006220: 2074 6f20 6120 7661 6c69 6420 6769 7420   to a valid git 
-00006230: 7265 706f 7369 746f 7279 2c0a 7468 6520  repository,.the 
-00006240: 7061 7468 2061 7474 7269 6275 7465 2063  path attribute c
-00006250: 616e 2062 6520 7573 6564 2074 6f20 696e  an be used to in
-00006260: 6469 6361 7465 2077 6865 7265 2072 6973  dicate where ris
-00006270: 7365 742e 6a73 6f6e 206d 616e 6966 6573  set.json manifes
-00006280: 7420 6973 2077 6974 6869 6e20 7468 6973  t is within this
-00006290: 2072 6570 6f73 6974 6f72 792e 2054 6869   repository. Thi
-000062a0: 7320 616c 6c6f 7773 2074 6f20 0a64 6566  s allows to .def
-000062b0: 696e 6520 6d75 6c74 6970 6c65 2070 6c75  ine multiple plu
-000062c0: 6769 6e73 2077 6974 6869 6e20 6f6e 6520  gins within one 
-000062d0: 7265 706f 7369 746f 7279 2e0a 0a23 2320  repository...## 
-000062e0: 4d61 6e69 6665 7374 0a0a 4561 6368 2070  Manifest..Each p
-000062f0: 6c75 6769 6e20 6861 7320 616e 2061 6363  lugin has an acc
-00006300: 6f6d 7061 6e79 696e 6720 6d61 6e69 6665  ompanying manife
-00006310: 7374 2069 6e20 7468 6520 2e6a 736f 6e20  st in the .json 
-00006320: 666f 726d 6174 2e20 5468 6520 6e61 6d65  format. The name
-00006330: 206f 6620 7468 6973 2066 696c 650a 6973   of this file.is
-00006340: 2061 6c77 6179 7320 6072 6973 7365 742e   always `risset.
-00006350: 6a73 6f6e 600a 5365 6520 6f6e 6520 6f66  json`.See one of
-00006360: 2074 6865 2065 7861 6d70 6c65 7320 696e   the examples in
-00006370: 2068 7474 7073 3a2f 2f67 6974 6875 622e   https://github.
-00006380: 636f 6d2f 6373 6f75 6e64 2d70 6c75 6769  com/csound-plugi
-00006390: 6e73 2f63 736f 756e 642d 706c 7567 696e  ns/csound-plugin
-000063a0: 732f 7472 6565 2f6d 6173 7465 722f 7372  s/tree/master/sr
-000063b0: 6320 666f 720a 6d6f 7265 2069 6e66 6f72  c for.more infor
-000063c0: 6d61 7469 6f6e 2061 626f 7574 2074 6865  mation about the
-000063d0: 206d 616e 6966 6573 740a 0000 0000 0000   manifest.......
-000063e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000063f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006400: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-00006410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006460: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-00006470: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-00006480: 3030 3030 3033 3400 3030 3030 3030 3030  0000034.00000000
-00006490: 3030 3000 3031 3032 3132 0020 7800 0000  000.010212. x...
-000064a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000064f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006500: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-00006510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000065f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006600: 3238 206d 7469 6d65 3d31 3731 3333 3932  28 mtime=1713392
-00006610: 3337 392e 3132 3037 3236 330a 0000 0000  379.1207263.....
-00006620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000066f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000067f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006800: 7269 7373 6574 2d32 2e39 2e30 2f72 6973  risset-2.9.0/ris
-00006810: 7365 742e 6567 672d 696e 666f 2f00 0000  set.egg-info/...
-00006820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006860: 0000 0000 3030 3030 3737 3500 3030 3031  ....0000775.0001
-00006870: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-00006880: 3030 3030 3030 3000 3134 3631 3030 3435  0000000.14610045
-00006890: 3337 3300 3031 3336 3637 0020 3500 0000  373.013667. 5...
-000068a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000068f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006900: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-00006910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006920: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-00006930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000069f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a00: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-00006a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006a60: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-00006a70: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-00006a80: 3030 3030 3032 3600 3030 3030 3030 3030  0000026.00000000
-00006a90: 3030 3000 3031 3032 3133 0020 7800 0000  000.010213. x...
-00006aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b00: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-00006b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c00: 3232 206d 7469 6d65 3d31 3731 3333 3932  22 mtime=1713392
-00006c10: 3337 392e 300a 0000 0000 0000 0000 0000  379.0...........
-00006c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006e00: 7269 7373 6574 2d32 2e39 2e30 2f72 6973  risset-2.9.0/ris
-00006e10: 7365 742e 6567 672d 696e 666f 2f50 4b47  set.egg-info/PKG
-00006e20: 2d49 4e46 4f00 0000 0000 0000 0000 0000  -INFO...........
-00006e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006e60: 0000 0000 3030 3030 3634 3400 3030 3031  ....0000644.0001
-00006e70: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-00006e80: 3030 3234 3532 3600 3134 3631 3030 3435  0024526.14610045
-00006e90: 3337 3300 3031 3437 3733 0020 3000 0000  373.014773. 0...
-00006ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006f00: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-00006f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006f20: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-00006f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00006ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00007000: 4d65 7461 6461 7461 2d56 6572 7369 6f6e  Metadata-Version
-00007010: 3a20 322e 310a 4e61 6d65 3a20 7269 7373  : 2.1.Name: riss
-00007020: 6574 0a56 6572 7369 6f6e 3a20 322e 392e  et.Version: 2.9.
-00007030: 300a 5375 6d6d 6172 793a 2041 2070 6163  0.Summary: A pac
-00007040: 6b61 6765 206d 616e 6167 6572 2066 6f72  kage manager for
-00007050: 2063 736f 756e 640a 486f 6d65 2d70 6167   csound.Home-pag
-00007060: 653a 2068 7474 7073 3a2f 2f67 6974 6875  e: https://githu
-00007070: 622e 636f 6d2f 6373 6f75 6e64 2d70 6c75  b.com/csound-plu
-00007080: 6769 6e73 2f72 6973 7365 740a 4175 7468  gins/risset.Auth
-00007090: 6f72 3a20 4564 7561 7264 6f20 4d6f 6775  or: Eduardo Mogu
-000070a0: 696c 6c61 6e73 6b79 0a41 7574 686f 722d  illansky.Author-
-000070b0: 656d 6169 6c3a 2065 6475 6172 646f 2e6d  email: eduardo.m
-000070c0: 6f67 7569 6c6c 616e 736b 7940 676d 6169  oguillansky@gmai
-000070d0: 6c2e 636f 6d0a 5265 7175 6972 6573 2d50  l.com.Requires-P
-000070e0: 7974 686f 6e3a 203e 3d33 2e38 0a44 6573  ython: >=3.8.Des
-000070f0: 6372 6970 7469 6f6e 2d43 6f6e 7465 6e74  cription-Content
-00007100: 2d54 7970 653a 2074 6578 742f 6d61 726b  -Type: text/mark
-00007110: 646f 776e 0a52 6571 7569 7265 732d 4469  down.Requires-Di
-00007120: 7374 3a20 7079 676d 656e 7473 0a52 6571  st: pygments.Req
-00007130: 7569 7265 732d 4469 7374 3a20 6374 6373  uires-Dist: ctcs
-00007140: 6f75 6e64 373e 3d30 2e33 2e30 0a52 6571  ound7>=0.3.0.Req
-00007150: 7569 7265 732d 4469 7374 3a20 6d6b 646f  uires-Dist: mkdo
-00007160: 6373 0a52 6571 7569 7265 732d 4469 7374  cs.Requires-Dist
-00007170: 3a20 7265 7175 6573 7473 0a0a 215b 7269  : requests..![ri
-00007180: 7373 6574 5d28 6173 7365 7473 2f72 6973  sset](assets/ris
-00007190: 7365 742d 7469 746c 652e 706e 6729 0a0a  set-title.png)..
-000071a0: 2320 7269 7373 6574 3a20 6120 7061 636b  # risset: a pack
-000071b0: 6167 6520 6d61 6e61 6765 7220 666f 7220  age manager for 
-000071c0: 6373 6f75 6e64 0a0a 5468 6973 2069 7320  csound..This is 
-000071d0: 7468 6520 7265 706f 7369 746f 7279 206f  the repository o
-000071e0: 6620 7269 7373 6574 2c20 6120 7061 636b  f risset, a pack
-000071f0: 6167 6520 6d61 6e61 6765 7220 666f 7220  age manager for 
-00007200: 6373 6f75 6e64 2065 7874 6572 6e61 6c0a  csound external.
-00007210: 706c 7567 696e 7320 616e 6420 7573 6572  plugins and user
-00007220: 2d64 6566 696e 6564 2d6f 7063 6f64 6573  -defined-opcodes
-00007230: 2e20 5468 6520 696e 6465 7820 6167 6772  . The index aggr
-00007240: 6567 6174 696e 6720 616c 6c20 6176 6169  egating all avai
-00007250: 6c61 626c 6520 7061 636b 6167 6573 2069  lable packages i
-00007260: 7320 6b65 7074 200a 6174 205b 7269 7373  s kept .at [riss
-00007270: 6574 2d64 6174 615d 2868 7474 7073 3a2f  et-data](https:/
-00007280: 2f67 6974 6875 622e 636f 6d2f 6373 6f75  /github.com/csou
-00007290: 6e64 2d70 6c75 6769 6e73 2f72 6973 7365  nd-plugins/risse
-000072a0: 742d 6461 7461 292e 0a0a 2320 496e 7374  t-data)...# Inst
-000072b0: 616c 6c61 7469 6f6e 0a0a 6072 6973 7365  allation..`risse
-000072c0: 7460 2064 6570 656e 6473 206f 6e6c 7920  t` depends only 
-000072d0: 6f6e 2060 6769 7460 2061 6e64 2060 7079  on `git` and `py
-000072e0: 7468 6f6e 3360 2028 3e3d 2033 2e39 2920  thon3` (>= 3.9) 
-000072f0: 6265 696e 6720 696e 7374 616c 6c65 642e  being installed.
-00007300: 0a0a 0a60 6060 6261 7368 0a70 6970 2069  ...```bash.pip i
-00007310: 6e73 7461 6c6c 2072 6973 7365 740a 6060  nstall risset.``
-00007320: 600a 0a54 6869 7320 7769 6c6c 2069 6e73  `..This will ins
-00007330: 7461 6c6c 2074 6865 2073 6372 6970 7420  tall the script 
-00007340: 2272 6973 7365 7422 2069 6e74 6f20 796f  "risset" into yo
-00007350: 7572 2070 6174 680a 0a0a 2323 2320 4c69  ur path...### Li
-00007360: 6e75 780a 0a49 6e20 6365 7274 6169 6e20  nux..In certain 
-00007370: 6c69 6e75 7820 6469 7374 7269 6275 7469  linux distributi
-00007380: 6f6e 7320 2875 6275 6e74 7529 2069 7420  ons (ubuntu) it 
-00007390: 6973 206e 6f74 2061 6c6c 6f77 6564 2074  is not allowed t
-000073a0: 6f20 696e 7374 616c 6c20 7061 636b 6167  o install packag
-000073b0: 6573 2074 6f20 7468 650a 7379 7374 656d  es to the.system
-000073c0: 2070 7974 686f 6e2e 2049 6e20 7468 6174   python. In that
-000073d0: 2063 6173 6520 7468 6520 7265 636f 6d6d   case the recomm
-000073e0: 656e 6465 6420 7761 7920 6973 2074 6f20  ended way is to 
-000073f0: 696e 7374 616c 6c20 7269 7373 6574 2077  install risset w
-00007400: 6974 6869 6e0a 6974 7320 6f77 6e20 7669  ithin.its own vi
-00007410: 7274 7561 6c20 656e 7669 726f 6e6d 656e  rtual environmen
-00007420: 7420 7669 6120 6070 6970 7860 3a0a 0a60  t via `pipx`:..`
-00007430: 6060 6261 7368 0a73 7564 6f20 6170 7420  ``bash.sudo apt 
-00007440: 696e 7374 616c 6c20 7069 7078 0a70 6970  install pipx.pip
-00007450: 7820 696e 7374 616c 6c20 7269 7373 6574  x install risset
-00007460: 0a60 6060 0a0a 2d2d 2d2d 2d2d 2d2d 2d2d  .```..----------
-00007470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007490: 2d2d 2d2d 2d2d 2d2d 2d2d 0a0a 2320 5175  ----------..# Qu
-000074a0: 6963 6b20 7374 6172 740a 0a23 2323 204c  ick start..### L
-000074b0: 6973 7420 616c 6c20 6465 6669 6e65 6420  ist all defined 
-000074c0: 7061 636b 6167 6573 0a0a 6060 6062 6173  packages..```bas
-000074d0: 680a 0a0a 2420 7269 7373 6574 206c 6973  h...$ risset lis
-000074e0: 740a 0a2a 2065 6c73 6520 2f31 2e31 382e  t..* else /1.18.
-000074f0: 3220 2020 2020 2020 2020 7c20 4d69 7363  2         | Misc
-00007500: 656c 6c61 6e65 6f75 7320 706c 7567 696e  ellaneous plugin
-00007510: 7320 5b6d 616e 7561 6c5d 0a20 2020 2020  s [manual].     
-00007520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007530: 2020 7c20 2020 2050 6174 683a 202f 686f    |    Path: /ho
-00007540: 6d65 2f65 6d2f 2e6c 6f63 616c 2f6c 6962  me/em/.local/lib
-00007550: 2f63 736f 756e 642f 362e 302f 706c 7567  /csound/6.0/plug
-00007560: 696e 7336 342f 6c69 6265 6c73 652e 736f  ins64/libelse.so
-00007570: 0a2a 2070 6174 6874 6f6f 6c73 202f 312e  .* pathtools /1.
-00007580: 3138 2e32 2020 2020 7c20 4372 6f73 732d  18.2    | Cross-
-00007590: 706c 6174 666f 726d 2070 6174 6820 6861  platform path ha
-000075a0: 6e64 6c69 6e67 2061 6e64 2073 7472 696e  ndling and strin
-000075b0: 6720 6f70 636f 6465 7320 5b6d 616e 7561  g opcodes [manua
-000075c0: 6c5d 0a20 2020 2020 2020 2020 2020 2020  l].             
-000075d0: 2020 2020 2020 2020 2020 7c20 2020 2050            |    P
-000075e0: 6174 683a 202f 686f 6d65 2f65 6d2f 2e6c  ath: /home/em/.l
-000075f0: 6f63 616c 2f6c 6962 2f63 736f 756e 642f  ocal/lib/csound/
-00007600: 362e 302f 706c 7567 696e 7336 342f 6c69  6.0/plugins64/li
-00007610: 6270 6174 6874 6f6f 6c73 2e73 6f0a 2a20  bpathtools.so.* 
-00007620: 6b6c 6962 202f 312e 3138 2e32 2020 2020  klib /1.18.2    
-00007630: 2020 2020 207c 2041 2068 6173 6874 6162       | A hashtab
-00007640: 6c65 2066 6f72 2063 736f 756e 6420 5b6d  le for csound [m
-00007650: 616e 7561 6c5d 0a20 2020 2020 2020 2020  anual].         
-00007660: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
-00007670: 2020 2050 6174 683a 202f 686f 6d65 2f65     Path: /home/e
-00007680: 6d2f 2e6c 6f63 616c 2f6c 6962 2f63 736f  m/.local/lib/cso
-00007690: 756e 642f 362e 302f 706c 7567 696e 7336  und/6.0/plugins6
-000076a0: 342f 6c69 626b 6c69 622e 736f 0a2a 2062  4/libklib.so.* b
-000076b0: 656f 7363 202f 312e 3138 2e32 2020 2020  eosc /1.18.2    
-000076c0: 2020 2020 7c20 4261 6e64 2d65 6e68 616e      | Band-enhan
-000076d0: 6365 6420 6f73 6369 6c6c 6174 6f72 7320  ced oscillators 
-000076e0: 696d 706c 656d 656e 7469 6e67 2074 6865  implementing the
-000076f0: 2073 696e 652b 6e6f 6973 6520 7379 6e74   sine+noise synt
-00007700: 6865 7369 7320 6d6f 6465 6c20 5b6d 616e  hesis model [man
-00007710: 7561 6c5d 0a20 2020 2020 2020 2020 2020  ual].           
-00007720: 2020 2020 2020 2020 2020 2020 7c20 2020              |   
-00007730: 2050 6174 683a 202f 686f 6d65 2f65 6d2f   Path: /home/em/
-00007740: 2e6c 6f63 616c 2f6c 6962 2f63 736f 756e  .local/lib/csoun
-00007750: 642f 362e 302f 706c 7567 696e 7336 342f  d/6.0/plugins64/
-00007760: 6c69 6262 656f 7363 2e73 6f0a 2a20 6a73  libbeosc.so.* js
-00007770: 6678 202f 312e 3138 2e32 2020 2020 2020  fx /1.18.2      
-00007780: 2020 207c 206a 7366 7820 7375 7070 6f72     | jsfx suppor
-00007790: 7420 666f 7220 6373 6f75 6e64 205b 6d61  t for csound [ma
-000077a0: 6e75 616c 5d0a 2020 2020 2020 2020 2020  nual].          
-000077b0: 2020 2020 2020 2020 2020 2020 207c 2020               |  
-000077c0: 2020 5061 7468 3a20 2f68 6f6d 652f 656d    Path: /home/em
-000077d0: 2f2e 6c6f 6361 6c2f 6c69 622f 6373 6f75  /.local/lib/csou
-000077e0: 6e64 2f36 2e30 2f70 6c75 6769 6e73 3634  nd/6.0/plugins64
-000077f0: 2f6c 6962 6a73 6678 2e73 6f0a 2a20 706f  /libjsfx.so.* po
-00007800: 6c79 202f 312e 3138 2e32 2020 2020 2020  ly /1.18.2      
-00007810: 2020 207c 204d 756c 7469 706c 6520 2870     | Multiple (p
-00007820: 6172 616c 6c65 6c20 6f72 2073 6571 7565  arallel or seque
-00007830: 6e74 6961 6c29 2069 6e73 7461 6e63 6573  ntial) instances
-00007840: 206f 6620 616e 206f 7063 6f64 6520 5b6d   of an opcode [m
-00007850: 616e 7561 6c5d 0a20 2020 2020 2020 2020  anual].         
-00007860: 2020 2020 2020 2020 2020 2020 2020 7c20                | 
-00007870: 2020 2050 6174 683a 202f 686f 6d65 2f65     Path: /home/e
-00007880: 6d2f 2e6c 6f63 616c 2f6c 6962 2f63 736f  m/.local/lib/cso
-00007890: 756e 642f 362e 302f 706c 7567 696e 7336  und/6.0/plugins6
-000078a0: 342f 6c69 6270 6f6c 792e 736f 0a2a 2073  4/libpoly.so.* s
-000078b0: 6e64 6d65 7461 202f 312e 3138 2e32 2020  ndmeta /1.18.2  
-000078c0: 2020 2020 7c20 6f70 636f 6465 7320 7573      | opcodes us
-000078d0: 696e 6720 6c69 6273 6e64 6669 6c65 205b  ing libsndfile [
-000078e0: 6d61 6e75 616c 5d0a 2020 2020 2020 2020  manual].        
-000078f0: 2020 2020 2020 2020 2020 2020 2020 207c                 |
-00007900: 2020 2020 5061 7468 3a20 2f68 6f6d 652f      Path: /home/
-00007910: 656d 2f2e 6c6f 6361 6c2f 6c69 622f 6373  em/.local/lib/cs
-00007920: 6f75 6e64 2f36 2e30 2f70 6c75 6769 6e73  ound/6.0/plugins
-00007930: 3634 2f6c 6962 736e 646d 6574 612e 736f  64/libsndmeta.so
-00007940: 0a2a 2072 6973 7365 7420 2f31 2e31 382e  .* risset /1.18.
-00007950: 3220 2020 2020 2020 7c20 4f70 636f 6465  2       | Opcode
-00007960: 7320 746f 2061 6363 6573 7320 7269 7373  s to access riss
-00007970: 6574 2070 6163 6b61 6765 206d 6574 6164  et package metad
-00007980: 6174 6120 5b6d 616e 7561 6c5d 0a20 2020  ata [manual].   
-00007990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000079a0: 2020 2020 7c20 2020 2050 6174 683a 202f      |    Path: /
-000079b0: 686f 6d65 2f65 6d2f 2e6c 6f63 616c 2f6c  home/em/.local/l
-000079c0: 6962 2f63 736f 756e 642f 362e 302f 706c  ib/csound/6.0/pl
-000079d0: 7567 696e 7336 342f 6c69 6272 6973 7365  ugins64/librisse
-000079e0: 742e 736f 0a2d 2076 7374 3320 2f30 2e33  t.so.- vst3 /0.3
-000079f0: 2e30 2020 2020 2020 2020 2020 7c20 486f  .0          | Ho
-00007a00: 7374 2076 7374 3320 706c 7567 696e 7320  st vst3 plugins 
-00007a10: 696e 2063 736f 756e 640a 2d20 6368 7561  in csound.- chua
-00007a20: 202f 302e 312e 3020 2020 2020 2020 2020   /0.1.0         
-00007a30: 207c 2049 6d70 6c65 6d65 6e74 6174 696f   | Implementatio
-00007a40: 6e20 6f66 2061 2043 6875 6120 6f73 6369  n of a Chua osci
-00007a50: 6c6c 6174 6f72 0a2d 2068 6466 3520 2f30  llator.- hdf5 /0
-00007a60: 2e31 2e30 2020 2020 2020 2020 2020 7c20  .1.0          | 
-00007a70: 5265 6164 2f57 7269 7465 2073 6967 6e61  Read/Write signa
-00007a80: 6c73 2061 6e64 2061 7272 6179 7320 746f  ls and arrays to
-00007a90: 2f66 726f 6d20 616e 2068 6466 3520 6669  /from an hdf5 fi
-00007aa0: 6c65 0a2d 2070 7974 686f 6e20 2f30 2e31  le.- python /0.1
-00007ab0: 2e30 2020 2020 2020 2020 7c20 4f70 636f  .0        | Opco
-00007ac0: 6465 7320 746f 2069 6e74 6572 6163 7420  des to interact 
-00007ad0: 7769 7468 2061 6e20 656d 6265 6464 6564  with an embedded
-00007ae0: 2070 7974 686f 6e20 696e 7465 7270 7265   python interpre
-00007af0: 7465 720a 0a60 6060 0a0a 2323 2320 496e  ter..```..### In
-00007b00: 7374 616c 6c20 736f 6d65 2070 6163 6b61  stall some packa
-00007b10: 6765 730a 0a60 6060 6261 7368 0a0a 2420  ges..```bash..$ 
-00007b20: 7269 7373 6574 2069 6e73 7461 6c6c 2065  risset install e
-00007b30: 6c73 6520 6a73 6678 0a0a 6060 600a 0a23  lse jsfx..```..#
-00007b40: 2323 2053 686f 7720 696e 666f 726d 6174  ## Show informat
-00007b50: 696f 6e20 6162 6f75 7420 6120 7370 6563  ion about a spec
-00007b60: 6966 6963 2070 6163 6b61 6765 0a0a 6060  ific package..``
-00007b70: 6062 6173 680a 0a24 2072 6973 7365 7420  `bash..$ risset 
-00007b80: 7368 6f77 2070 6f6c 790a 0a50 6c75 6769  show poly..Plugi
-00007b90: 6e20 2020 2020 2020 203a 2070 6f6c 790a  n        : poly.
-00007ba0: 4175 7468 6f72 2020 2020 2020 2020 3a20  Author        : 
-00007bb0: 4564 7561 7264 6f20 4d6f 6775 696c 6c61  Eduardo Moguilla
-00007bc0: 6e73 6b79 2028 6564 7561 7264 6f2e 6d6f  nsky (eduardo.mo
-00007bd0: 6775 696c 6c61 6e73 6b79 4067 6d61 696c  guillansky@gmail
-00007be0: 2e63 6f6d 290a 5552 4c20 2020 2020 2020  .com).URL       
-00007bf0: 2020 2020 3a20 6874 7470 733a 2f2f 6769      : https://gi
-00007c00: 7468 7562 2e63 6f6d 2f63 736f 756e 642d  thub.com/csound-
-00007c10: 706c 7567 696e 732f 6373 6f75 6e64 2d70  plugins/csound-p
-00007c20: 6c75 6769 6e73 2e67 6974 0a56 6572 7369  lugins.git.Versi
-00007c30: 6f6e 2020 2020 2020 203a 2031 2e31 382e  on       : 1.18.
-00007c40: 320a 0a49 6e73 7461 6c6c 6564 2020 2020  2..Installed    
-00007c50: 203a 2055 6e6b 6e6f 776e 2028 7061 7468   : Unknown (path
-00007c60: 3a20 2f68 6f6d 652f 656d 2f2e 6c6f 6361  : /home/em/.loca
-00007c70: 6c2f 6c69 622f 6373 6f75 6e64 2f36 2e30  l/lib/csound/6.0
-00007c80: 2f70 6c75 6769 6e73 3634 2f6c 6962 706f  /plugins64/libpo
-00007c90: 6c79 2e73 6f29 0a4d 616e 6966 6573 7420  ly.so).Manifest 
-00007ca0: 2020 2020 203a 204e 6f20 6d61 6e69 6665       : No manife
-00007cb0: 7374 2028 696e 7374 616c 6c65 6420 6d61  st (installed ma
-00007cc0: 6e75 616c 6c79 290a 4162 7374 7261 6374  nually).Abstract
-00007cd0: 2020 2020 2020 3a20 4d75 6c74 6970 6c65        : Multiple
-00007ce0: 2028 7061 7261 6c6c 656c 206f 7220 7365   (parallel or se
-00007cf0: 7175 656e 7469 616c 2920 696e 7374 616e  quential) instan
-00007d00: 6365 7320 6f66 2061 6e20 6f70 636f 6465  ces of an opcode
-00007d10: 0a44 6573 6372 6970 7469 6f6e 3a0a 2020  .Description:.  
-00007d20: 2020 4d75 6c74 6970 6c65 2028 7061 7261    Multiple (para
-00007d30: 6c6c 656c 206f 7220 7365 7175 656e 7469  llel or sequenti
-00007d40: 616c 2920 696e 7374 616e 6365 7320 6f66  al) instances of
-00007d50: 2061 6e20 6f70 636f 6465 0a4f 7063 6f64   an opcode.Opcod
-00007d60: 6573 3a0a 2020 2020 6465 6665 722c 2070  es:.    defer, p
-00007d70: 6f6c 792c 2070 6f6c 7930 2c20 706f 6c79  oly, poly0, poly
-00007d80: 7365 710a 4269 6e61 7269 6573 3a0a 2020  seq.Binaries:.  
-00007d90: 2020 2a20 6c69 6e75 782f 6373 6f75 6e64    * linux/csound
-00007da0: 3e3d 362e 3137 3c37 2e30 0a20 2020 202a  >=6.17<7.0.    *
-00007db0: 206c 696e 7578 2f63 736f 756e 643e 3d37   linux/csound>=7
-00007dc0: 2e30 0a20 2020 202a 206d 6163 6f73 2f63  .0.    * macos/c
-00007dd0: 736f 756e 643e 3d36 2e31 373c 372e 300a  sound>=6.17<7.0.
-00007de0: 2020 2020 2a20 6d61 636f 732f 6373 6f75      * macos/csou
-00007df0: 6e64 3e3d 372e 300a 2020 2020 2a20 6d61  nd>=7.0.    * ma
-00007e00: 636f 732d 6172 6d36 342f 6373 6f75 6e64  cos-arm64/csound
-00007e10: 3e3d 362e 3137 3c37 2e30 0a20 2020 202a  >=6.17<7.0.    *
-00007e20: 206d 6163 6f73 2d61 726d 3634 2f63 736f   macos-arm64/cso
-00007e30: 756e 643e 3d37 2e30 0a20 2020 202a 2077  und>=7.0.    * w
-00007e40: 696e 646f 7773 2f63 736f 756e 643e 3d36  indows/csound>=6
-00007e50: 2e31 373c 372e 300a 2020 2020 2a20 7769  .17<7.0.    * wi
-00007e60: 6e64 6f77 732f 6373 6f75 6e64 3e3d 372e  ndows/csound>=7.
-00007e70: 300a 2020 2020 0a60 6060 0a0a 2323 2320  0.    .```..### 
-00007e80: 5265 6d6f 7665 2061 2070 6c75 6769 6e0a  Remove a plugin.
-00007e90: 0a60 6060 6261 7368 0a0a 2420 7269 7373  .```bash..$ riss
-00007ea0: 6574 2072 656d 6f76 6520 706f 6c79 0a0a  et remove poly..
-00007eb0: 6060 600a 0a23 2323 2053 6565 206d 616e  ```..### See man
-00007ec0: 7561 6c20 7061 6765 2066 6f72 2061 6e20  ual page for an 
-00007ed0: 6f70 636f 6465 2028 696e 7374 616c 6c65  opcode (installe
-00007ee0: 6420 6f72 206e 6f74 290a 0a60 6060 6261  d or not)..```ba
-00007ef0: 7368 0a24 2072 6973 7365 7420 6d61 6e20  sh.$ risset man 
-00007f00: 706f 6c79 0a0a 6060 600a 0a60 6060 6d61  poly..```..```ma
-00007f10: 726b 646f 776e 0a0a 2320 6d74 726f 0a0a  rkdown..# mtro..
-00007f20: 2323 2041 6273 7472 6163 740a 0a61 6e20  ## Abstract..an 
-00007f30: 6163 6375 7261 7465 2076 6572 7369 6f6e  accurate version
-00007f40: 206f 6620 6d65 7472 6f0a 0a0a 2323 2044   of metro...## D
-00007f50: 6573 6372 6970 7469 6f6e 0a0a 606d 7472  escription..`mtr
-00007f60: 6f60 2069 7320 6120 6472 6f70 2d69 6e20  o` is a drop-in 
-00007f70: 7265 706c 6163 656d 656e 7420 6f66 2060  replacement of `
-00007f80: 6d65 7472 6f60 2077 6974 686f 7574 2074  metro` without t
-00007f90: 6865 0a64 7269 6674 696e 6720 6f76 6572  he.drifting over
-00007fa0: 2074 696d 652e 2060 6d65 7472 6f60 2069   time. `metro` i
-00007fb0: 7320 696d 706c 656d 656e 7465 6420 6279  s implemented by
-00007fc0: 2061 6464 696e 6720 6120 7068 6173 650a   adding a phase.
-00007fd0: 6561 6368 2063 7963 6c65 2c20 7768 6963  each cycle, whic
-00007fe0: 6820 7265 7375 6c74 7320 696e 2064 7269  h results in dri
-00007ff0: 6674 696e 6720 6f76 6572 2074 696d 6520  fting over time 
-00008000: 6475 6520 746f 2072 6f75 6e64 696e 6720  due to rounding 
-00008010: 6572 726f 7273 2e0a 606d 7472 6f60 2061  errors..`mtro` a
-00008020: 766f 6964 7320 7468 6973 2070 726f 626c  voids this probl
-00008030: 656d 2062 7920 6b65 6570 696e 6720 6120  em by keeping a 
-00008040: 636f 756e 7465 7220 616e 6420 646f 696e  counter and doin
-00008050: 6720 6d75 6c74 6970 6c69 6361 7469 6f6e  g multiplication
-00008060: 0a73 6f20 7468 6174 2074 6865 2065 7272  .so that the err
-00008070: 6f72 2069 7320 6c69 6d69 7465 642e 0a0a  or is limited...
-00008080: 466f 6c6c 6f77 696e 6720 6d65 7472 6f27  Following metro'
-00008090: 7320 696d 706c 656d 656e 7461 7469 6f6e  s implementation
-000080a0: 2062 7920 6465 6661 756c 7420 606d 7472   by default `mtr
-000080b0: 6f60 2069 7320 7472 6967 6765 7265 6420  o` is triggered 
-000080c0: 6174 2074 696d 653d 302e 2054 6869 730a  at time=0. This.
-000080d0: 6973 2062 6563 6175 7365 2060 695f 696e  is because `i_in
-000080e0: 6974 7068 6173 6560 2069 7320 7365 7420  itphase` is set 
-000080f0: 746f 2031 2062 7920 6465 6661 756c 742e  to 1 by default.
-00008100: 2049 7420 6973 2070 6f73 7369 626c 6520   It is possible 
-00008110: 746f 206d 616b 6520 606d 7472 6f60 2073  to make `mtro` s
-00008120: 6b69 7020 7468 650a 3020 7472 6967 6765  kip the.0 trigge
-00008130: 7220 6279 2073 6574 7469 6e67 2060 695f  r by setting `i_
-00008140: 696e 6974 7068 6173 6560 2074 6f20 302e  initphase` to 0.
-00008150: 0a0a 2323 2053 796e 7461 780a 0a0a 2020  ..## Syntax...  
-00008160: 2020 6b6f 7574 206d 7472 6f20 6b66 7265    kout mtro kfre
-00008170: 712c 2069 5f69 6e69 7470 6861 7365 3d31  q, i_initphase=1
-00008180: 0a0a 0a23 2320 4172 6775 6d65 6e74 730a  ...## Arguments.
-00008190: 0a2a 202a 2a6b 6672 6571 2a2a 3a20 7468  .* **kfreq**: th
-000081a0: 6520 6672 6571 7565 6e63 7920 6f66 2074  e frequency of t
-000081b0: 6865 2074 7269 6767 6572 0a2a 202a 2a69  he trigger.* **i
-000081c0: 5f69 6e69 7470 6861 7365 2a2a 3a20 7468  _initphase**: th
-000081d0: 6520 696e 6974 6961 6c20 7068 6173 6520  e initial phase 
-000081e0: 2861 2076 616c 7565 2062 6574 7765 656e  (a value between
-000081f0: 2030 2061 6e64 2031 292e 2049 6620 7365   0 and 1). If se
-00008200: 7420 746f 2030 2c20 7468 6572 6520 6973  t to 0, there is
-00008210: 206e 6f20 7472 6967 6765 7220 6174 2074   no trigger at t
-00008220: 696d 6520 302e 0a20 2020 2020 2020 2049  ime 0..        I
-00008230: 6620 7365 7420 746f 2031 2c20 606d 7472  f set to 1, `mtr
-00008240: 6f60 2074 7269 6767 6572 7320 6174 2074  o` triggers at t
-00008250: 696d 653d 302c 2073 696d 696c 6172 2074  ime=0, similar t
-00008260: 6f20 606d 6574 726f 600a 0a23 2320 4f75  o `metro`..## Ou
-00008270: 7470 7574 0a0a 2a20 2a2a 6b6f 7574 2a2a  tput..* **kout**
-00008280: 3a20 3120 6966 2074 6865 206d 7472 6f20  : 1 if the mtro 
-00008290: 6861 7320 7472 6967 6765 7265 642c 2030  has triggered, 0
-000082a0: 206f 7468 6572 7769 7365 0a0a 2323 2045   otherwise..## E
-000082b0: 7865 6375 7469 6f6e 2054 696d 650a 0a2a  xecution Time..*
-000082c0: 2050 6572 666f 726d 616e 6365 0a0a 6060   Performance..``
-000082d0: 600a 0a2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  `..-------------
-000082e0: 2d2d 0a0a 0a23 2052 6973 7365 7420 636f  --...# Risset co
-000082f0: 6d6d 616e 6473 0a0a 2323 2320 7570 6461  mmands..### upda
-00008300: 7465 0a0a 5570 6461 7465 2074 6865 206c  te..Update the l
-00008310: 6f63 616c 2069 6e64 6578 2074 6f20 7468  ocal index to th
-00008320: 6520 6c61 7465 7374 2073 7461 7465 2e0a  e latest state..
-00008330: 0a20 2020 2024 2072 6973 7365 7420 7570  .    $ risset up
-00008340: 6461 7465 0a0a 0a23 2323 206c 6973 740a  date...### list.
-00008350: 0a4c 6973 7420 616c 6c20 6176 6169 6c61  .List all availa
-00008360: 626c 6520 706c 7567 696e 7320 666f 7220  ble plugins for 
-00008370: 796f 7572 2070 6c61 7466 6f72 6d0a 0a20  your platform.. 
-00008380: 2020 2024 2072 6973 7365 7420 6c69 7374     $ risset list
-00008390: 205b 6f70 7469 6f6e 735d 0a0a 2323 2323   [options]..####
-000083a0: 2320 4f70 7469 6f6e 730a 0a2a 2060 2d2d  # Options..* `--
-000083b0: 6e61 6d65 6f6e 6c79 603a 204f 7574 7075  nameonly`: Outpu
-000083c0: 7420 6a75 7374 2074 6865 206e 616d 6520  t just the name 
-000083d0: 6f66 2065 6163 6820 706c 7567 696e 0a2a  of each plugin.*
-000083e0: 2060 2d2d 696e 7374 616c 6c65 6460 3a20   `--installed`: 
-000083f0: 4c69 7374 206f 6e6c 7920 696e 7374 616c  List only instal
-00008400: 6c65 6420 706c 7567 696e 730a 2a20 602d  led plugins.* `-
-00008410: 2d75 7067 7261 6465 6162 6c65 603a 204c  -upgradeable`: L
-00008420: 6973 7420 6f6e 6c79 2069 6e73 7461 6c6c  ist only install
-00008430: 6564 2070 6163 6b61 6765 7320 7768 6963  ed packages whic
-00008440: 6820 6361 6e20 6265 2075 7067 7261 6465  h can be upgrade
-00008450: 640a 2a20 602d 2d6e 6f74 696e 7374 616c  d.* `--notinstal
-00008460: 6c65 6460 3a20 4c69 7374 206f 6e6c 7920  led`: List only 
-00008470: 706c 7567 696e 7320 7768 6963 6820 6172  plugins which ar
-00008480: 6520 6e6f 7420 696e 7374 616c 6c65 640a  e not installed.
-00008490: 2a20 602d 312c 202d 2d6f 6e65 6c69 6e65  * `-1, --oneline
-000084a0: 603a 204c 6973 7420 6561 6368 2070 6c75  `: List each plu
-000084b0: 6769 6e20 696e 206f 6e65 206c 696e 650a  gin in one line.
-000084c0: 0a0a 2323 2320 7368 6f77 0a0a 5368 6f77  ..### show..Show
-000084d0: 2069 6e66 6f72 6d61 7469 6f6e 2061 626f   information abo
-000084e0: 7574 2061 2070 6c75 6769 6e0a 0a20 2020  ut a plugin..   
-000084f0: 2024 2072 6973 7365 7420 7368 6f77 203c   $ risset show <
-00008500: 706c 7567 696e 3e0a 0a0a 2323 2320 696e  plugin>...### in
-00008510: 7374 616c 6c0a 0a49 6e73 7461 6c6c 206f  stall..Install o
-00008520: 6e65 206f 7220 6d75 6c74 6970 6c65 2070  ne or multiple p
-00008530: 6c75 6769 6e73 0a0a 2020 2020 2420 7269  lugins..    $ ri
-00008540: 7373 6574 2069 6e73 7461 6c6c 205b 2d2d  sset install [--
-00008550: 666f 7263 655d 203c 706c 7567 696e 3e20  force] <plugin> 
-00008560: 5b3c 706c 7567 696e 323e 2c20 2e2e 2e5d  [<plugin2>, ...]
-00008570: 0a0a 496e 7374 616c 6c20 6120 6769 7665  ..Install a give
-00008580: 6e20 706c 7567 696e 2066 6f72 2074 6865  n plugin for the
-00008590: 2063 7572 7265 6e74 2070 6c61 7466 6f72   current platfor
-000085a0: 6d2e 2050 6c75 6769 6e73 2061 7265 2069  m. Plugins are i
-000085b0: 6e73 7461 6c6c 6564 2069 6e74 6f0a 7468  nstalled into.th
-000085c0: 6520 7573 6572 2066 6f6c 6465 7220 286e  e user folder (n
-000085d0: 6f20 6164 6d69 6e69 7374 7261 746f 7220  o administrator 
-000085e0: 7265 7175 6972 656d 656e 7473 2061 7265  requirements are
-000085f0: 206e 6565 6465 6429 2e20 4c6f 6f6b 2061   needed). Look a
-00008600: 7420 7468 6520 6069 6e66 6f60 0a63 6f6d  t the `info`.com
-00008610: 6d61 6e64 2074 6f20 7175 6572 7920 696e  mand to query in
-00008620: 666f 726d 6174 696f 6e20 6162 6f75 7420  formation about 
-00008630: 7468 6520 7379 7374 656d 2e0a 0a23 2323  the system...###
-00008640: 2323 204f 7074 696f 6e73 0a0a 2a20 602d  ## Options..* `-
-00008650: 2d66 6f72 6365 603a 2049 6e73 7461 6c6c  -force`: Install
-00008660: 7320 6120 706c 7567 696e 2065 7665 6e20  s a plugin even 
-00008670: 6966 2074 6865 2070 6c75 6769 6e20 7769  if the plugin wi
-00008680: 7468 2074 6865 2073 616d 6520 7665 7273  th the same vers
-00008690: 696f 6e20 6973 2061 6c72 6561 6479 2069  ion is already i
-000086a0: 6e73 7461 6c6c 6564 0a0a 7468 6520 7379  nstalled..the sy
-000086b0: 7374 656d 2066 6f6c 6465 7220 7768 6572  stem folder wher
-000086c0: 6520 616c 6c20 6f74 6865 7220 6275 696c  e all other buil
-000086d0: 7469 6e20 706c 7567 696e 7320 6172 6520  tin plugins are 
-000086e0: 696e 7374 616c 6c65 6420 2874 6869 7320  installed (this 
-000086f0: 7265 7175 6972 6573 2061 646d 696e 6973  requires adminis
-00008700: 7472 6174 6f72 2072 6967 6874 7320 696e  trator rights in
-00008710: 2073 6f6d 6520 706c 6174 666f 726d 7329   some platforms)
-00008720: 2e20 4164 6d69 6e20 7269 6768 7473 2061  . Admin rights a
-00008730: 7265 206e 6565 6465 6420 666f 7220 7468  re needed for th
-00008740: 6973 2e0a 0a0a 2323 2320 7265 6d6f 7665  is....### remove
-00008750: 0a0a 5265 6d6f 7665 2061 6e20 696e 7374  ..Remove an inst
-00008760: 616c 6c65 6420 706c 7567 696e 0a0a 2020  alled plugin..  
-00008770: 2020 2420 7269 7373 6574 2072 656d 6f76    $ risset remov
-00008780: 6520 3c70 6c75 6769 6e3e 0a0a 0a20 2020  e <plugin>...   
-00008790: 2023 2323 2320 646f 6375 6d65 6e74 6174   #### documentat
-000087a0: 696f 6e0a 0a4f 7065 6e20 6d61 6e20 7061  ion..Open man pa
-000087b0: 6765 2061 7320 6d61 726b 646f 776e 2069  ge as markdown i
-000087c0: 6e20 7468 6520 636f 6d6d 616e 6420 6c69  n the command li
-000087d0: 6e65 0a0a 0a20 2020 2024 2072 6973 7365  ne...    $ risse
-000087e0: 7420 6d61 6e20 5b6f 7074 696f 6e73 5d20  t man [options] 
-000087f0: 3c6f 7063 6f64 653e 0a0a 0a23 2323 2323  <opcode>...#####
-00008800: 204f 7074 696f 6e73 0a0a 2a20 602d 732c   Options..* `-s,
-00008810: 202d 2d73 696d 706c 6570 6174 6860 3a20   --simplepath`: 
-00008820: 5072 696e 7420 6a75 7374 2074 6865 2070  Print just the p
-00008830: 6174 6820 6f66 2074 6865 206d 616e 7561  ath of the manua
-00008840: 6c20 7061 6765 0a2a 2060 2d6d 2c20 2d2d  l page.* `-m, --
-00008850: 6d61 726b 646f 776e 603a 2055 7365 2074  markdown`: Use t
-00008860: 6865 202e 6d64 2070 6167 6520 696e 7374  he .md page inst
-00008870: 6561 6420 6f66 2074 6865 202e 6874 6d6c  ead of the .html
-00008880: 2076 6572 7369 6f6e 0a2a 2060 2d65 2c20   version.* `-e, 
-00008890: 2d2d 6578 7465 726e 616c 603a 204f 7065  --external`: Ope
-000088a0: 6e20 7468 6520 6d61 6e20 7061 6765 2069  n the man page i
-000088b0: 6e20 7468 6520 6465 6661 756c 7420 6170  n the default ap
-000088c0: 702e 2054 6869 7320 6973 206f 6e6c 7920  p. This is only 
-000088d0: 7573 6564 2077 6865 6e20 6f70 656e 696e  used when openin
-000088e0: 6720 7468 6520 6d61 726b 646f 776e 206d  g the markdown m
-000088f0: 616e 2070 6167 652e 0a2a 2060 2d2d 6874  an page..* `--ht
-00008900: 6d6c 603a 204f 7065 6e73 2074 6865 202e  ml`: Opens the .
-00008910: 6874 6d6c 2076 6572 7369 6f6e 206f 6620  html version of 
-00008920: 7468 6520 6d61 6e70 6167 6520 696e 2074  the manpage in t
-00008930: 6865 2064 6566 6175 6c74 2062 726f 7773  he default brows
-00008940: 6572 2028 6f72 206f 7574 7075 7473 2074  er (or outputs t
-00008950: 6865 2070 6174 6820 7769 7468 2074 6865  he path with the
-00008960: 202d 2d70 6174 6820 6f70 7469 6f6e 290a   --path option).
-00008970: 2a20 602d 2d74 6865 6d65 207b 6461 726b  * `--theme {dark
-00008980: 2c6c 6967 6874 2c67 7275 7662 6f78 2d64  ,light,gruvbox-d
-00008990: 6172 6b2c 6772 7576 626f 782d 6c69 6768  ark,gruvbox-ligh
-000089a0: 742c 6d61 7465 7269 616c 2c66 7275 6974  t,material,fruit
-000089b0: 792c 6e61 7469 7665 7d60 3a20 5374 796c  y,native}`: Styl
-000089c0: 6520 7573 6564 2077 6865 6e20 6469 7370  e used when disp
-000089d0: 6c61 7969 6e67 206d 6172 6b64 6f77 6e20  laying markdown 
-000089e0: 6669 6c65 7320 2864 6566 6175 6c74 3d64  files (default=d
-000089f0: 6172 6b29 0a0a 4f70 656e 2074 6865 2068  ark)..Open the h
-00008a00: 746d 6c20 6d61 6e20 7061 6765 2069 6e20  tml man page in 
-00008a10: 7468 6520 6465 6661 756c 7420 6272 6f77  the default brow
-00008a20: 7365 723a 0a0a 2020 2020 2420 7269 7373  ser:..    $ riss
-00008a30: 6574 206d 616e 202d 2d68 746d 6c20 3c6f  et man --html <o
-00008a40: 7063 6f64 653e 0a0a 4765 6e65 7261 7465  pcode>..Generate
-00008a50: 2f75 7064 6174 6520 646f 6375 6d65 6e74  /update document
-00008a60: 6174 696f 6e3a 0a0a 2020 2020 2420 7269  ation:..    $ ri
-00008a70: 7373 6574 206d 616b 6564 6f63 730a 0a42  sset makedocs..B
-00008a80: 7569 6c64 2074 6865 2064 6f63 756d 656e  uild the documen
-00008a90: 7461 7469 6f6e 2066 6f72 2061 6c6c 2064  tation for all d
-00008aa0: 6566 696e 6564 2070 6c75 6769 6e73 2e20  efined plugins. 
-00008ab0: 5468 6973 2064 6570 656e 6473 206f 6e20  This depends on 
-00008ac0: 2a2a 6d6b 646f 6373 2a2a 2062 6569 6e67  **mkdocs** being
-00008ad0: 2069 6e73 7461 6c6c 6564 0a0a 0a23 2323   installed...###
-00008ae0: 2075 7067 7261 6465 0a0a 2020 2020 2420   upgrade..    $ 
-00008af0: 7269 7373 6574 2075 7067 7261 6465 0a0a  risset upgrade..
-00008b00: 5570 6772 6164 6520 616e 7920 696e 7374  Upgrade any inst
-00008b10: 616c 6c65 6420 706c 7567 696e 2074 6f20  alled plugin to 
-00008b20: 7468 6520 6c61 7465 7374 2076 6572 7369  the latest versi
-00008b30: 6f6e 0a0a 0a23 2323 206c 6973 746f 7063  on...### listopc
-00008b40: 6f64 6573 0a0a 2020 2020 2420 7269 7373  odes..    $ riss
-00008b50: 6574 206c 6973 746f 7063 6f64 6573 0a0a  et listopcodes..
-00008b60: 4c69 7374 2069 6e73 7461 6c6c 6564 206f  List installed o
-00008b70: 7063 6f64 6573 0a0a 0a23 2323 2323 204f  pcodes...##### O
-00008b80: 7074 696f 6e73 0a0a 2a20 602d 6c2c 202d  ptions..* `-l, -
-00008b90: 2d6c 6f6e 6760 3a20 4c6f 6e67 2066 6f72  -long`: Long for
-00008ba0: 6d61 740a 0a60 6060 0a24 2072 6973 7365  mat..```.$ risse
-00008bb0: 7420 6c69 7374 6f70 636f 6465 7320 2d6c  t listopcodes -l
-00008bc0: 0a0a 6163 6375 6d20 2020 2020 2020 2020  ..accum         
-00008bd0: 2020 2020 2020 656c 7365 2020 2020 2020        else      
-00008be0: 2020 5369 6d70 6c65 2061 6363 756d 756c    Simple accumul
-00008bf0: 6174 6f72 206f 6620 7363 616c 6172 2076  ator of scalar v
-00008c00: 616c 7565 730a 6174 7374 6f70 2020 2020  alues.atstop    
-00008c10: 2020 2020 2020 2020 2020 656c 7365 2020            else  
-00008c20: 2020 2020 2020 5363 6865 6475 6c65 2061        Schedule a
-00008c30: 6e20 696e 7374 7275 6d65 6e74 2061 7420  n instrument at 
-00008c40: 7468 6520 656e 6420 6f66 2074 6865 2063  the end of the c
-00008c50: 7572 7265 6e74 2069 6e73 7472 756d 656e  urrent instrumen
-00008c60: 740a 6265 6164 7379 6e74 2020 2020 2020  t.beadsynt      
-00008c70: 2020 2020 2020 6265 6f73 6320 2020 2020        beosc     
-00008c80: 2020 4261 6e64 2d45 6e68 616e 6365 6420    Band-Enhanced 
-00008c90: 4f73 6369 6c6c 6174 6f72 2d42 616e 6b0a  Oscillator-Bank.
-00008ca0: 6265 6f73 6320 2020 2020 2020 2020 2020  beosc           
-00008cb0: 2020 2020 6265 6f73 6320 2020 2020 2020      beosc       
-00008cc0: 4261 6e64 2d45 6e68 616e 6365 6420 4f73  Band-Enhanced Os
-00008cd0: 6369 6c6c 6174 6f72 0a62 6973 6563 7420  cillator.bisect 
-00008ce0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00008cf0: 6520 2020 2020 2020 2052 6574 7572 6e73  e        Returns
-00008d00: 2074 6865 2066 7261 6374 696f 6e61 6c20   the fractional 
-00008d10: 696e 6465 7820 6f66 2061 2076 616c 7565  index of a value
-00008d20: 2077 6974 6869 6e20 6120 736f 7274 6564   within a sorted
-00008d30: 2061 72e2 80a6 6179 202f 2074 6162 0a63   ar...ay / tab.c
-00008d40: 6875 6170 2020 2020 2020 2020 2020 2020  huap            
-00008d50: 2020 2063 6875 6120 2020 2020 2020 2053     chua        S
-00008d60: 696d 756c 6174 6573 2043 6875 6127 7320  imulates Chua's 
-00008d70: 6f73 6369 6c6c 6174 6f72 0a63 7261 636b  oscillator.crack
-00008d80: 6c65 2020 2020 2020 2020 2020 2020 2065  le             e
-00008d90: 6c73 6520 2020 2020 2020 2067 656e 6572  lse        gener
-00008da0: 6174 6573 206e 6f69 7365 2062 6173 6564  ates noise based
-00008db0: 206f 6e20 6120 6368 616f 7469 6320 6571   on a chaotic eq
-00008dc0: 7561 7469 6f6e 0a64 6566 6572 2020 2020  uation.defer    
-00008dd0: 2020 2020 2020 2020 2020 2070 6f6c 7920             poly 
-00008de0: 2020 2020 2020 2052 756e 2061 6e20 6f70         Run an op
-00008df0: 636f 6465 2061 7420 7468 6520 656e 6420  code at the end 
-00008e00: 6f66 2063 7572 7265 6e74 2065 7665 6e74  of current event
-00008e10: 0a64 6572 6566 2020 2020 2020 2020 2020  .deref          
-00008e20: 2020 2020 2065 6c73 6520 2020 2020 2020       else       
-00008e30: 2044 6572 6566 6572 656e 6365 2061 2070   Dereference a p
-00008e40: 7265 7669 6f75 736c 7920 6372 6561 7465  reviously create
-00008e50: 6420 7265 6665 7265 6e63 6520 746f 2061  d reference to a
-00008e60: 2076 6172 6961 626c 650a 6465 7465 6374   variable.detect
-00008e70: 7369 6c65 6e63 6520 2020 2020 2020 656c  silence       el
-00008e80: 7365 2020 2020 2020 2020 4465 7465 6374  se        Detect
-00008e90: 2077 6865 6e20 696e 7075 7420 6661 6c6c   when input fall
-00008ea0: 7320 6265 6c6f 7720 616e 2061 6d70 6c69  s below an ampli
-00008eb0: 7475 6465 2074 6872 6573 686f 6c64 0a64  tude threshold.d
-00008ec0: 6963 745f 6465 6c20 2020 2020 2020 2020  ict_del         
-00008ed0: 2020 206b 6c69 6220 2020 2020 2020 2052     klib        R
-00008ee0: 656d 6f76 6520 6120 6b65 793a 7661 6c75  emove a key:valu
-00008ef0: 6520 7061 6972 2066 726f 6d20 6120 6861  e pair from a ha
-00008f00: 7368 7461 626c 650a 6469 6374 5f64 756d  shtable.dict_dum
-00008f10: 7020 2020 2020 2020 2020 2020 6b6c 6962  p           klib
-00008f20: 2020 2020 2020 2020 4475 6d70 7320 7468          Dumps th
-00008f30: 6520 636f 6e74 656e 7473 206f 6620 7468  e contents of th
-00008f40: 6973 2064 6963 7420 6173 2061 2073 7472  is dict as a str
-00008f50: 696e 670a 6469 6374 5f65 7869 7374 7320  ing.dict_exists 
-00008f60: 2020 2020 2020 2020 6b6c 6962 2020 2020          klib    
-00008f70: 2020 2020 5265 7475 726e 7320 3120 6966      Returns 1 if
-00008f80: 2074 6865 2064 6963 7420 6578 6973 7473   the dict exists
-00008f90: 2c20 3020 6f74 6865 7277 6973 650a 6469  , 0 otherwise.di
-00008fa0: 6374 5f66 7265 6520 2020 2020 2020 2020  ct_free         
-00008fb0: 2020 6b6c 6962 2020 2020 2020 2020 4672    klib        Fr
-00008fc0: 6565 2061 2068 6173 6874 6162 6c65 0a2e  ee a hashtable..
-00008fd0: 2e2e 0a0a 6060 600a 0a23 2323 2064 6f77  ....```..### dow
-00008fe0: 6e6c 6f61 640a 0a20 2020 2024 2072 6973  nload..    $ ris
-00008ff0: 7365 7420 646f 776e 6c6f 6164 203c 706c  set download <pl
-00009000: 7567 696e 3e0a 0a44 6f77 6e6c 6f61 6420  ugin>..Download 
-00009010: 6120 706c 7567 696e 0a0a 2323 2323 2320  a plugin..##### 
-00009020: 4f70 7469 6f6e 730a 0a2a 2060 2d2d 7061  Options..* `--pa
-00009030: 7468 2050 4154 4860 3a20 4469 7265 6374  th PATH`: Direct
-00009040: 6f72 7920 746f 2064 6f77 6e6c 6f61 6420  ory to download 
-00009050: 7468 6520 706c 7567 696e 2074 6f20 2864  the plugin to (d
-00009060: 6566 6175 6c74 3a20 6375 7272 656e 7420  efault: current 
-00009070: 6469 7265 6374 6f72 7929 0a2a 2060 2d2d  directory).* `--
-00009080: 706c 6174 666f 726d 603a 2054 6865 2070  platform`: The p
-00009090: 6c61 7466 6f72 6d20 6f66 2074 6865 2070  latform of the p
-000090a0: 6c75 6769 6e20 746f 2064 6f77 6e6c 6f61  lugin to downloa
-000090b0: 6420 2864 6566 6175 6c74 3a20 6375 7272  d (default: curr
-000090c0: 656e 7420 706c 6174 666f 726d 292e 204f  ent platform). O
-000090d0: 6e65 206f 6620 2a6c 696e 7578 2a2c 202a  ne of *linux*, *
-000090e0: 6d61 636f 732a 2c20 2a77 696e 646f 772a  macos*, *window*
-000090f0: 2c20 2a6d 6163 6f73 2d61 726d 3634 2a2c  , *macos-arm64*,
-00009100: 202a 6c69 6e75 782d 6172 6d36 342a 0a0a   *linux-arm64*..
-00009110: 0a23 2323 2069 6e66 6f0a 0a20 2020 2024  .### info..    $
-00009120: 2072 6973 7365 7420 696e 666f 205b 6f70   risset info [op
-00009130: 7469 6f6e 735d 0a0a 4f75 7470 7574 7320  tions]..Outputs 
-00009140: 696e 666f 726d 6174 696f 6e20 6162 6f75  information abou
-00009150: 7420 7468 6520 656e 7669 726f 6e6d 656e  t the environmen
-00009160: 7420 6173 206a 736f 6e20 696e 206f 7264  t as json in ord
-00009170: 6572 2074 6f20 6265 2069 6e74 6567 7261  er to be integra
-00009180: 7465 6420 6279 206f 7468 6572 2073 7973  ted by other sys
-00009190: 7465 6d73 2e0a 466f 7220 6578 616d 706c  tems..For exampl
-000091a0: 652c 202a 2a43 736f 756e 6451 542a 2a20  e, **CsoundQT** 
-000091b0: 7573 6573 2074 6869 7320 636f 6d6d 616e  uses this comman
-000091c0: 6420 746f 2072 6561 6420 7468 6520 696e  d to read the in
-000091d0: 7374 616c 6c65 6420 706c 7567 696e 7320  stalled plugins 
-000091e0: 616e 6420 7468 6569 7220 6f70 636f 6465  and their opcode
-000091f0: 730a 616e 6420 646f 6375 6d65 6e74 6174  s.and documentat
-00009200: 696f 6e0a 0a23 2323 2323 204f 7074 696f  ion..##### Optio
-00009210: 6e73 0a0a 2a20 602d 2d6f 7574 6669 6c65  ns..* `--outfile
-00009220: 204f 5554 4649 4c45 603a 2053 6176 6520   OUTFILE`: Save 
-00009230: 6f75 7470 7574 2074 6f20 7468 6973 2070  output to this p
-00009240: 6174 680a 2a20 602d 2d66 756c 6c60 3a20  ath.* `--full`: 
-00009250: 496e 636c 7564 6520 616c 6c20 6176 6169  Include all avai
-00009260: 6c61 626c 6520 696e 666f 726d 6174 696f  lable informatio
-00009270: 6e0a 0a2d 2d2d 2d2d 2d2d 0a0a 2320 506c  n..-------..# Pl
-00009280: 7567 696e 2044 6f63 756d 656e 7461 7469  ugin Documentati
-00009290: 6f6e 0a0a 446f 6375 6d65 6e74 6174 696f  on..Documentatio
-000092a0: 6e20 666f 7220 616c 6c20 706c 7567 696e  n for all plugin
-000092b0: 7320 6361 6e20 6265 2066 6f75 6e64 2068  s can be found h
-000092c0: 6572 653a 2068 7474 7073 3a2f 2f63 736f  ere: https://cso
-000092d0: 756e 642d 706c 7567 696e 732e 6769 7468  und-plugins.gith
-000092e0: 7562 2e69 6f2f 7269 7373 6574 2d64 6f63  ub.io/risset-doc
-000092f0: 732f 0a0a 2d2d 2d2d 2d2d 2d0a 0a23 2055  s/..-------..# U
-00009300: 7067 7261 6469 6e67 2072 6973 7365 740a  pgrading risset.
-00009310: 0a49 6620 696e 7374 616c 6c65 6420 7669  .If installed vi
-00009320: 6120 6070 6970 602c 2064 6f3a 0a0a 2020  a `pip`, do:..  
-00009330: 2020 7069 7020 696e 7374 616c 6c20 7269    pip install ri
-00009340: 7373 6574 202d 550a 0a49 6620 696e 7374  sset -U..If inst
-00009350: 616c 6c65 6420 7669 6120 6067 6974 602c  alled via `git`,
-00009360: 2067 6f20 746f 2074 6865 2072 6570 6f73   go to the repos
-00009370: 6974 6f72 7920 616e 6420 646f 3a0a 0a20  itory and do:.. 
-00009380: 2020 2067 6974 2070 756c 6c0a 2020 2020     git pull.    
-00009390: 7079 7468 6f6e 2073 6574 7570 2e70 7920  python setup.py 
-000093a0: 696e 7374 616c 6c0a 0a0a 2d2d 2d2d 2d0a  install...-----.
-000093b0: 0a23 2043 6f6e 7472 6962 7574 696e 670a  .# Contributing.
-000093c0: 0a49 6e20 6f72 6465 7220 746f 2061 6464  .In order to add
-000093d0: 2f6d 6f64 6966 7920 6120 706c 7567 696e  /modify a plugin
-000093e0: 2c20 636c 6f6e 6520 5b72 6973 7365 742d  , clone [risset-
-000093f0: 6461 7461 5d28 6874 7470 733a 2f2f 6769  data](https://gi
-00009400: 7468 7562 2e63 6f6d 2f63 736f 756e 642d  thub.com/csound-
-00009410: 706c 7567 696e 732f 7269 7373 6574 2d64  plugins/risset-d
-00009420: 6174 6129 0a0a 4174 2074 6865 2072 6f6f  ata)..At the roo
-00009430: 7420 6f66 2074 6865 2072 6570 6f73 6974  t of the reposit
-00009440: 6f72 7920 7468 6572 6520 6973 2061 6e20  ory there is an 
-00009450: 696e 6465 7820 6669 6c65 2060 7269 7373  index file `riss
-00009460: 6574 696e 6465 782e 6a73 6f6e 602c 2077  etindex.json`, w
-00009470: 6974 6820 7468 6520 666f 726d 3a0a 0a60  ith the form:..`
-00009480: 6060 6a73 6f6e 0a7b 0a20 2020 2022 7665  ``json.{.    "ve
-00009490: 7273 696f 6e22 3a20 2231 2e30 2e30 222c  rsion": "1.0.0",
-000094a0: 0a20 2020 2022 706c 7567 696e 7322 3a20  .    "plugins": 
-000094b0: 7b0a 2020 2020 2020 2020 2265 6c73 6522  {.        "else"
-000094c0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-000094d0: 2275 726c 223a 2022 6874 7470 733a 2f2f  "url": "https://
-000094e0: 6769 7468 7562 2e63 6f6d 2f63 736f 756e  github.com/csoun
-000094f0: 642d 706c 7567 696e 732f 6373 6f75 6e64  d-plugins/csound
-00009500: 2d70 6c75 6769 6e73 2e67 6974 222c 0a20  -plugins.git",. 
-00009510: 2020 2020 2020 2020 2020 2022 7061 7468             "path
-00009520: 223a 2022 7372 632f 656c 7365 220a 2020  ": "src/else".  
-00009530: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-00009540: 2022 7061 7468 746f 6f6c 7322 3a20 7b0a   "pathtools": {.
-00009550: 2020 2020 2020 2020 2020 2020 2275 726c              "url
-00009560: 223a 2022 6874 7470 733a 2f2f 6769 7468  ": "https://gith
-00009570: 7562 2e63 6f6d 2f63 736f 756e 642d 706c  ub.com/csound-pl
-00009580: 7567 696e 732f 6373 6f75 6e64 2d70 6c75  ugins/csound-plu
-00009590: 6769 6e73 2e67 6974 222c 0a20 2020 2020  gins.git",.     
-000095a0: 2020 2020 2020 2022 7061 7468 223a 2022         "path": "
-000095b0: 7372 632f 7061 7468 746f 6f6c 7322 0a20  src/pathtools". 
-000095c0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-000095d0: 2020 226b 6c69 6222 3a20 7b0a 2020 2020    "klib": {.    
-000095e0: 2020 2020 2020 2020 2275 726c 223a 2022          "url": "
-000095f0: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-00009600: 6f6d 2f63 736f 756e 642d 706c 7567 696e  om/csound-plugin
-00009610: 732f 6373 6f75 6e64 2d70 6c75 6769 6e73  s/csound-plugins
-00009620: 2e67 6974 222c 0a20 2020 2020 2020 2020  .git",.         
-00009630: 2020 2022 7061 7468 223a 2022 7372 632f     "path": "src/
-00009640: 6b6c 6962 220a 2020 2020 2020 2020 7d2c  klib".        },
-00009650: 0a20 2020 2020 2020 2022 6265 6f73 6322  .        "beosc"
-00009660: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-00009670: 2275 726c 223a 2022 6874 7470 733a 2f2f  "url": "https://
-00009680: 6769 7468 7562 2e63 6f6d 2f63 736f 756e  github.com/csoun
-00009690: 642d 706c 7567 696e 732f 6373 6f75 6e64  d-plugins/csound
-000096a0: 2d70 6c75 6769 6e73 2e67 6974 222c 0a20  -plugins.git",. 
-000096b0: 2020 2020 2020 2020 2020 2022 7061 7468             "path
-000096c0: 223a 2022 7372 632f 6265 6f73 6322 0a20  ": "src/beosc". 
-000096d0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-000096e0: 2020 2276 7374 3322 3a20 7b0a 2020 2020    "vst3": {.    
-000096f0: 2020 2020 2020 2020 2275 726c 223a 2022          "url": "
-00009700: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-00009710: 6f6d 2f63 736f 756e 642d 706c 7567 696e  om/csound-plugin
-00009720: 732f 7673 7433 2d72 6973 7365 742e 6769  s/vst3-risset.gi
-00009730: 7422 0a20 2020 2020 2020 207d 0a20 2020  t".        }.   
-00009740: 207d 0a7d 0a60 6060 0a0a 546f 2061 6464   }.}.```..To add
-00009750: 2061 2070 6c75 6769 6e20 746f 2074 6865   a plugin to the
-00009760: 2069 6e64 6578 2c20 6a75 7374 2065 7874   index, just ext
-00009770: 656e 6420 7468 6520 2a70 6c75 6769 6e73  end the *plugins
-00009780: 2a20 6469 6374 2e20 5468 6520 7572 6c20  * dict. The url 
-00009790: 7368 6f75 6c64 2070 6f69 6e74 2074 6f20  should point to 
-000097a0: 6120 7661 6c69 6420 6769 7420 7265 706f  a valid git repo
-000097b0: 7369 746f 7279 2c0a 7468 6520 7061 7468  sitory,.the path
-000097c0: 2061 7474 7269 6275 7465 2063 616e 2062   attribute can b
-000097d0: 6520 7573 6564 2074 6f20 696e 6469 6361  e used to indica
-000097e0: 7465 2077 6865 7265 2072 6973 7365 742e  te where risset.
-000097f0: 6a73 6f6e 206d 616e 6966 6573 7420 6973  json manifest is
-00009800: 2077 6974 6869 6e20 7468 6973 2072 6570   within this rep
-00009810: 6f73 6974 6f72 792e 2054 6869 7320 616c  ository. This al
-00009820: 6c6f 7773 2074 6f20 0a64 6566 696e 6520  lows to .define 
-00009830: 6d75 6c74 6970 6c65 2070 6c75 6769 6e73  multiple plugins
-00009840: 2077 6974 6869 6e20 6f6e 6520 7265 706f   within one repo
-00009850: 7369 746f 7279 2e0a 0a23 2320 4d61 6e69  sitory...## Mani
-00009860: 6665 7374 0a0a 4561 6368 2070 6c75 6769  fest..Each plugi
-00009870: 6e20 6861 7320 616e 2061 6363 6f6d 7061  n has an accompa
-00009880: 6e79 696e 6720 6d61 6e69 6665 7374 2069  nying manifest i
-00009890: 6e20 7468 6520 2e6a 736f 6e20 666f 726d  n the .json form
-000098a0: 6174 2e20 5468 6520 6e61 6d65 206f 6620  at. The name of 
-000098b0: 7468 6973 2066 696c 650a 6973 2061 6c77  this file.is alw
-000098c0: 6179 7320 6072 6973 7365 742e 6a73 6f6e  ays `risset.json
-000098d0: 600a 5365 6520 6f6e 6520 6f66 2074 6865  `.See one of the
-000098e0: 2065 7861 6d70 6c65 7320 696e 2068 7474   examples in htt
-000098f0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00009900: 6373 6f75 6e64 2d70 6c75 6769 6e73 2f63  csound-plugins/c
-00009910: 736f 756e 642d 706c 7567 696e 732f 7472  sound-plugins/tr
-00009920: 6565 2f6d 6173 7465 722f 7372 6320 666f  ee/master/src fo
-00009930: 720a 6d6f 7265 2069 6e66 6f72 6d61 7469  r.more informati
-00009940: 6f6e 2061 626f 7574 2074 6865 206d 616e  on about the man
-00009950: 6966 6573 740a 0000 0000 0000 0000 0000  ifest...........
-00009960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000099a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000099b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000099c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000099d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000099e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-000099f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009a00: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-00009a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009a20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009a30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009a40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009a60: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-00009a70: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-00009a80: 3030 3030 3032 3600 3030 3030 3030 3030  0000026.00000000
-00009a90: 3030 3000 3031 3032 3133 0020 7800 0000  000.010213. x...
-00009aa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009af0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009b00: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-00009b10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009b20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009b30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009b40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009b50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009b60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009b70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009b80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009b90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009bb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009bc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009bd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009be0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009bf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009c00: 3232 206d 7469 6d65 3d31 3731 3333 3932  22 mtime=1713392
-00009c10: 3337 392e 300a 0000 0000 0000 0000 0000  379.0...........
-00009c20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009c30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009c40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009c50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009c60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009c70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009c80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009c90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009cb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009cc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009cd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009cf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009d90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009da0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009db0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009dc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009dd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009de0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009df0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009e00: 7269 7373 6574 2d32 2e39 2e30 2f72 6973  risset-2.9.0/ris
-00009e10: 7365 742e 6567 672d 696e 666f 2f53 4f55  set.egg-info/SOU
-00009e20: 5243 4553 2e74 7874 0000 0000 0000 0000  RCES.txt........
-00009e30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009e40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009e50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009e60: 0000 0000 3030 3030 3636 3400 3030 3031  ....0000664.0001
-00009e70: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-00009e80: 3030 3030 3332 3200 3134 3631 3030 3435  0000322.14610045
-00009e90: 3337 3300 3031 3535 3530 0020 3000 0000  373.015550. 0...
-00009ea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009eb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009f00: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-00009f10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009f20: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-00009f30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009f40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009f50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009f60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009f70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009f80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009f90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009fa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009fb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009fc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009fd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009fe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-00009ff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a000: 5245 4144 4d45 2e6d 640a 7269 7373 6574  README.md.risset
-0000a010: 2e70 790a 7365 7475 702e 7079 0a72 6973  .py.setup.py.ris
-0000a020: 7365 742e 6567 672d 696e 666f 2f50 4b47  set.egg-info/PKG
-0000a030: 2d49 4e46 4f0a 7269 7373 6574 2e65 6767  -INFO.risset.egg
-0000a040: 2d69 6e66 6f2f 534f 5552 4345 532e 7478  -info/SOURCES.tx
-0000a050: 740a 7269 7373 6574 2e65 6767 2d69 6e66  t.risset.egg-inf
-0000a060: 6f2f 6465 7065 6e64 656e 6379 5f6c 696e  o/dependency_lin
-0000a070: 6b73 2e74 7874 0a72 6973 7365 742e 6567  ks.txt.risset.eg
-0000a080: 672d 696e 666f 2f65 6e74 7279 5f70 6f69  g-info/entry_poi
-0000a090: 6e74 732e 7478 740a 7269 7373 6574 2e65  nts.txt.risset.e
-0000a0a0: 6767 2d69 6e66 6f2f 7265 7175 6972 6573  gg-info/requires
-0000a0b0: 2e74 7874 0a72 6973 7365 742e 6567 672d  .txt.risset.egg-
-0000a0c0: 696e 666f 2f74 6f70 5f6c 6576 656c 2e74  info/top_level.t
-0000a0d0: 7874 0000 0000 0000 0000 0000 0000 0000  xt..............
-0000a0e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a0f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a1a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a1b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a1c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a1d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a1e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a1f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a200: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-0000a210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a260: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-0000a270: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-0000a280: 3030 3030 3032 3600 3030 3030 3030 3030  0000026.00000000
-0000a290: 3030 3000 3031 3032 3133 0020 7800 0000  000.010213. x...
-0000a2a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a2b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a2c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a2d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a2e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a2f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a300: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-0000a310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a3a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a3b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a3c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a3d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a3e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a3f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a400: 3232 206d 7469 6d65 3d31 3731 3333 3932  22 mtime=1713392
-0000a410: 3337 392e 300a 0000 0000 0000 0000 0000  379.0...........
-0000a420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a4a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a4b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a4c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a4d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a4e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a4f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a5a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a5b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a5c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a5d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a5e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a5f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a600: 7269 7373 6574 2d32 2e39 2e30 2f72 6973  risset-2.9.0/ris
-0000a610: 7365 742e 6567 672d 696e 666f 2f64 6570  set.egg-info/dep
-0000a620: 656e 6465 6e63 795f 6c69 6e6b 732e 7478  endency_links.tx
-0000a630: 7400 0000 0000 0000 0000 0000 0000 0000  t...............
-0000a640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a660: 0000 0000 3030 3030 3636 3400 3030 3031  ....0000664.0001
-0000a670: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-0000a680: 3030 3030 3030 3100 3134 3631 3030 3435  0000001.14610045
-0000a690: 3337 3300 3031 3737 3335 0020 3000 0000  373.017735. 0...
-0000a6a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a6b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a6c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a6d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a6e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a6f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a700: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-0000a710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a720: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-0000a730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a7a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a7b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a7c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a7d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a7e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a7f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a800: 0a00 0000 0000 0000 0000 0000 0000 0000  ................
-0000a810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a8a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a8b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a8c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a8d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a8e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a8f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a9a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a9b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a9c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a9d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a9e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000a9f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aa00: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-0000aa10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aa20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aa30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aa40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aa50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aa60: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-0000aa70: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-0000aa80: 3030 3030 3032 3600 3030 3030 3030 3030  0000026.00000000
-0000aa90: 3030 3000 3031 3032 3133 0020 7800 0000  000.010213. x...
-0000aaa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aaf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ab00: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-0000ab10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ab20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ab30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ab40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ab50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ab60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ab70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ab80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ab90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000abb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000abc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000abd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000abe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000abf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ac00: 3232 206d 7469 6d65 3d31 3731 3333 3932  22 mtime=1713392
-0000ac10: 3337 392e 300a 0000 0000 0000 0000 0000  379.0...........
-0000ac20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ac30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ac40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ac50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ac60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ac70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ac80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ac90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000acb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000acc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000acd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ace0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000acf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ad90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ada0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000adb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000adc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000add0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ade0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000adf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ae00: 7269 7373 6574 2d32 2e39 2e30 2f72 6973  risset-2.9.0/ris
-0000ae10: 7365 742e 6567 672d 696e 666f 2f65 6e74  set.egg-info/ent
-0000ae20: 7279 5f70 6f69 6e74 732e 7478 7400 0000  ry_points.txt...
-0000ae30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ae40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ae50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ae60: 0000 0000 3030 3030 3636 3400 3030 3031  ....0000664.0001
-0000ae70: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-0000ae80: 3030 3030 3034 3700 3134 3631 3030 3435  0000047.14610045
-0000ae90: 3337 3300 3031 3731 3636 0020 3000 0000  373.017166. 0...
-0000aea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aeb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000af00: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-0000af10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000af20: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-0000af30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000af40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000af50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000af60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000af70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000af80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000af90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000afa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000afb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000afc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000afd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000afe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000aff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b000: 5b63 6f6e 736f 6c65 5f73 6372 6970 7473  [console_scripts
-0000b010: 5d0a 7269 7373 6574 203d 2072 6973 7365  ].risset = risse
-0000b020: 743a 6d61 696e 0a00 0000 0000 0000 0000  t:main..........
-0000b030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b060: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b070: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b0a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b0b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b0c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b0d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b0e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b0f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b1a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b1b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b1c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b1d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b1e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b1f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b200: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-0000b210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b260: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-0000b270: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-0000b280: 3030 3030 3032 3600 3030 3030 3030 3030  0000026.00000000
-0000b290: 3030 3000 3031 3032 3133 0020 7800 0000  000.010213. x...
-0000b2a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b2b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b2c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b2d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b2e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b2f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b300: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-0000b310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b3a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b3b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b3c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b3d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b3e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b3f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b400: 3232 206d 7469 6d65 3d31 3731 3333 3932  22 mtime=1713392
-0000b410: 3337 392e 300a 0000 0000 0000 0000 0000  379.0...........
-0000b420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b4a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b4b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b4c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b4d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b4e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b4f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b5a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b5b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b5c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b5d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b5e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b5f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b600: 7269 7373 6574 2d32 2e39 2e30 2f72 6973  risset-2.9.0/ris
-0000b610: 7365 742e 6567 672d 696e 666f 2f72 6571  set.egg-info/req
-0000b620: 7569 7265 732e 7478 7400 0000 0000 0000  uires.txt.......
-0000b630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b660: 0000 0000 3030 3030 3636 3400 3030 3031  ....0000664.0001
-0000b670: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-0000b680: 3030 3030 3035 3200 3134 3631 3030 3435  0000052.14610045
-0000b690: 3337 3300 3031 3632 3634 0020 3000 0000  373.016264. 0...
-0000b6a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b6b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b6c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b6d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b6e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b6f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b700: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-0000b710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b720: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-0000b730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b7a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b7b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b7c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b7d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b7e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b7f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b800: 7079 676d 656e 7473 0a63 7463 736f 756e  pygments.ctcsoun
-0000b810: 6437 3e3d 302e 332e 300a 6d6b 646f 6373  d7>=0.3.0.mkdocs
-0000b820: 0a72 6571 7565 7374 730a 0000 0000 0000  .requests.......
-0000b830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b8a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b8b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b8c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b8d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b8e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b8f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b9a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b9b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b9c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b9d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b9e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000b9f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ba00: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-0000ba10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ba20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ba30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ba40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ba50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000ba60: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-0000ba70: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-0000ba80: 3030 3030 3032 3600 3030 3030 3030 3030  0000026.00000000
-0000ba90: 3030 3000 3031 3032 3133 0020 7800 0000  000.010213. x...
-0000baa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000baf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bb00: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-0000bb10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bb20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bb30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bb40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bb50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bb60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bb70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bb80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bb90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bbb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bbc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bbd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bbe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bbf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bc00: 3232 206d 7469 6d65 3d31 3731 3333 3932  22 mtime=1713392
-0000bc10: 3337 392e 300a 0000 0000 0000 0000 0000  379.0...........
-0000bc20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bc30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bc40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bc50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bc60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bc70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bc80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bc90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bcb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bcc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bcd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bcf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bd90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bda0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bdb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bdc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bdd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bde0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bdf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000be00: 7269 7373 6574 2d32 2e39 2e30 2f72 6973  risset-2.9.0/ris
-0000be10: 7365 742e 6567 672d 696e 666f 2f74 6f70  set.egg-info/top
-0000be20: 5f6c 6576 656c 2e74 7874 0000 0000 0000  _level.txt......
-0000be30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000be40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000be50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000be60: 0000 0000 3030 3030 3636 3400 3030 3031  ....0000664.0001
-0000be70: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-0000be80: 3030 3030 3030 3700 3134 3631 3030 3435  0000007.14610045
-0000be90: 3337 3300 3031 3634 3136 0020 3000 0000  373.016416. 0...
-0000bea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000beb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bf00: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-0000bf10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bf20: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-0000bf30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bf40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bf50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bf60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bf70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bf80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bf90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bfa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bfb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bfc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bfd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bfe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000bff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c000: 7269 7373 6574 0a00 0000 0000 0000 0000  risset..........
-0000c010: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c020: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c060: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c070: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c0a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c0b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c0c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c0d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c0e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c0f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c1f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c200: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-0000c210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c260: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-0000c270: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-0000c280: 3030 3030 3032 3600 3030 3030 3030 3030  0000026.00000000
-0000c290: 3030 3000 3031 3032 3133 0020 7800 0000  000.010213. x...
-0000c2a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c2b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c2c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c2d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c2e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c2f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c300: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-0000c310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c3a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c3b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c3c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c3d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c3e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c3f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c400: 3232 206d 7469 6d65 3d31 3731 3333 3931  22 mtime=1713391
-0000c410: 3830 312e 300a 0000 0000 0000 0000 0000  801.0...........
-0000c420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c4a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c4b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c4c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c4d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c4e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c4f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c5a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c5b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c5c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c5d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c5e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c5f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c600: 7269 7373 6574 2d32 2e39 2e30 2f72 6973  risset-2.9.0/ris
-0000c610: 7365 742e 7079 0000 0000 0000 0000 0000  set.py..........
-0000c620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c660: 0000 0000 3030 3030 3737 3500 3030 3031  ....0000775.0001
-0000c670: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-0000c680: 3033 3535 3433 3700 3134 3631 3030 3434  0355437.14610044
-0000c690: 3237 3100 3031 3235 3637 0020 3000 0000  271.012567. 0...
-0000c6a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c6b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c6c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c6d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c6e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c6f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c700: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-0000c710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c720: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-0000c730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c7a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c7b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c7c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c7d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c7e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c7f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0000c800: 2321 2f75 7372 2f62 696e 2f65 6e76 2070  #!/usr/bin/env p
-0000c810: 7974 686f 6e33 0a66 726f 6d20 5f5f 6675  ython3.from __fu
-0000c820: 7475 7265 5f5f 2069 6d70 6f72 7420 616e  ture__ import an
-0000c830: 6e6f 7461 7469 6f6e 730a 0a5f 5f76 6572  notations..__ver
-0000c840: 7369 6f6e 5f5f 203d 2022 322e 392e 3022  sion__ = "2.9.0"
-0000c850: 0a0a 696d 706f 7274 2073 7973 0a0a 6966  ..import sys..if
-0000c860: 2028 7379 732e 7665 7273 696f 6e5f 696e   (sys.version_in
-0000c870: 666f 2e6d 616a 6f72 2c20 7379 732e 7665  fo.major, sys.ve
-0000c880: 7273 696f 6e5f 696e 666f 2e6d 696e 6f72  rsion_info.minor
-0000c890: 2920 3c20 2833 2c20 3829 3a0a 2020 2020  ) < (3, 8):.    
-0000c8a0: 7072 696e 7428 2250 7974 686f 6e20 332e  print("Python 3.
-0000c8b0: 3820 6f72 2068 6967 6865 7220 6973 206e  8 or higher is n
-0000c8c0: 6565 6465 6422 2c20 6669 6c65 3d73 7973  eeded", file=sys
-0000c8d0: 2e73 7464 6572 7229 0a20 2020 2073 7973  .stderr).    sys
-0000c8e0: 2e65 7869 7428 2d31 290a 0a69 6620 6c65  .exit(-1)..if le
-0000c8f0: 6e28 7379 732e 6172 6776 2920 3e3d 2032  n(sys.argv) >= 2
-0000c900: 2061 6e64 2028 7379 732e 6172 6776 5b31   and (sys.argv[1
-0000c910: 5d20 3d3d 2022 2d2d 7665 7273 696f 6e22  ] == "--version"
-0000c920: 206f 7220 7379 732e 6172 6776 5b31 5d20   or sys.argv[1] 
-0000c930: 3d3d 2022 2d76 2229 3a0a 2020 2020 7072  == "-v"):.    pr
-0000c940: 696e 7428 5f5f 7665 7273 696f 6e5f 5f29  int(__version__)
-0000c950: 0a20 2020 2073 7973 2e65 7869 7428 3029  .    sys.exit(0)
-0000c960: 0a0a 696d 706f 7274 2067 6c6f 620a 696d  ..import glob.im
-0000c970: 706f 7274 206f 730a 696d 706f 7274 2073  port os.import s
-0000c980: 7461 740a 696d 706f 7274 2061 7267 7061  tat.import argpa
-0000c990: 7273 650a 696d 706f 7274 206a 736f 6e0a  rse.import json.
-0000c9a0: 696d 706f 7274 2074 656d 7066 696c 650a  import tempfile.
-0000c9b0: 696d 706f 7274 2073 6875 7469 6c0a 696d  import shutil.im
-0000c9c0: 706f 7274 2073 7562 7072 6f63 6573 730a  port subprocess.
-0000c9d0: 696d 706f 7274 2074 6578 7477 7261 700a  import textwrap.
-0000c9e0: 696d 706f 7274 2066 6e6d 6174 6368 0a69  import fnmatch.i
-0000c9f0: 6d70 6f72 7420 7070 7269 6e74 0a69 6d70  mport pprint.imp
-0000ca00: 6f72 7420 706c 6174 666f 726d 0a66 726f  ort platform.fro
-0000ca10: 6d20 6461 7461 636c 6173 7365 7320 696d  m dataclasses im
-0000ca20: 706f 7274 2064 6174 6163 6c61 7373 2c20  port dataclass, 
-0000ca30: 6173 6469 6374 2061 7320 5f61 7364 6963  asdict as _asdic
-0000ca40: 740a 0a69 6d70 6f72 7420 7265 7175 6573  t..import reques
-0000ca50: 7473 0a69 6d70 6f72 7420 7572 6c6c 6962  ts.import urllib
-0000ca60: 2e70 6172 7365 0a69 6d70 6f72 7420 7572  .parse.import ur
-0000ca70: 6c6c 6962 2e72 6571 7565 7374 0a69 6d70  llib.request.imp
-0000ca80: 6f72 7420 7572 6c6c 6962 2e65 7272 6f72  ort urllib.error
-0000ca90: 0a66 726f 6d20 7061 7468 6c69 6220 696d  .from pathlib im
-0000caa0: 706f 7274 2050 6174 680a 6672 6f6d 207a  port Path.from z
-0000cab0: 6970 6669 6c65 2069 6d70 6f72 7420 5a69  ipfile import Zi
-0000cac0: 7046 696c 650a 696d 706f 7274 2069 6e73  pFile.import ins
-0000cad0: 7065 6374 2061 7320 5f69 6e73 7065 6374  pect as _inspect
-0000cae0: 0a69 6d70 6f72 7420 7265 0a66 726f 6d20  .import re.from 
-0000caf0: 7374 7269 6e67 2069 6d70 6f72 7420 5465  string import Te
-0000cb00: 6d70 6c61 7465 2061 7320 5f54 656d 706c  mplate as _Templ
-0000cb10: 6174 650a 0a66 726f 6d20 7479 7069 6e67  ate..from typing
-0000cb20: 2069 6d70 6f72 7420 5459 5045 5f43 4845   import TYPE_CHE
-0000cb30: 434b 494e 470a 6966 2054 5950 455f 4348  CKING.if TYPE_CH
-0000cb40: 4543 4b49 4e47 3a0a 2020 2020 6672 6f6d  ECKING:.    from
-0000cb50: 2074 7970 696e 6720 696d 706f 7274 2055   typing import U
-0000cb60: 6e69 6f6e 2c20 4f70 7469 6f6e 616c 2c20  nion, Optional, 
-0000cb70: 416e 790a 0a0a 636c 6173 7320 506c 6174  Any...class Plat
-0000cb80: 666f 726d 4e6f 7453 7570 706f 7274 6564  formNotSupported
-0000cb90: 4572 726f 7228 4578 6365 7074 696f 6e29  Error(Exception)
-0000cba0: 3a0a 2020 2020 2222 2252 6169 7365 6420  :.    """Raised 
-0000cbb0: 7768 656e 2074 6865 2063 7572 7265 6e74  when the current
-0000cbc0: 2070 6c61 7466 6f72 6d20 6973 206e 6f74   platform is not
-0000cbd0: 2073 7570 706f 7274 6564 2222 220a 0a0a   supported"""...
-0000cbe0: 636c 6173 7320 5363 6865 6d61 4572 726f  class SchemaErro
-0000cbf0: 7228 4578 6365 7074 696f 6e29 3a0a 2020  r(Exception):.  
-0000cc00: 2020 2222 2241 6e20 656e 7469 7479 2028    """An entity (
-0000cc10: 6120 6469 6374 2c20 6120 6a73 6f6e 2066  a dict, a json f
-0000cc20: 696c 6529 2064 6f65 7320 6e6f 7420 6675  ile) does not fu
-0000cc30: 6c66 696c 6c20 7468 6520 6e65 6564 6564  lfill the needed
-0000cc40: 2073 6368 656d 6122 2222 0a0a 0a63 6c61   schema"""...cla
-0000cc50: 7373 2050 6172 7365 4572 726f 7228 4578  ss ParseError(Ex
-0000cc60: 6365 7074 696f 6e29 3a0a 2020 2020 2222  ception):.    ""
-0000cc70: 2250 6172 7365 2065 7272 6f72 2069 6e20  "Parse error in 
-0000cc80: 6120 6d61 6e69 6665 7374 2066 696c 6522  a manifest file"
-0000cc90: 2222 0a0a 0a64 6566 205f 7375 6270 726f  ""...def _subpro
-0000cca0: 635f 6361 6c6c 2861 7267 733a 206c 6973  c_call(args: lis
-0000ccb0: 745b 7374 725d 2c20 7368 656c 6c3d 4661  t[str], shell=Fa
-0000ccc0: 6c73 6529 3a0a 2020 2020 5f64 6562 7567  lse):.    _debug
-0000ccd0: 2822 4361 6c6c 696e 6720 7375 6270 726f  ("Calling subpro
-0000cce0: 6365 7373 3a20 7b61 7267 737d 2229 0a20  cess: {args}"). 
-0000ccf0: 2020 2072 6574 7572 6e20 7375 6270 726f     return subpro
-0000cd00: 6365 7373 2e63 616c 6c28 6172 6773 2c20  cess.call(args, 
-0000cd10: 7368 656c 6c3d 7368 656c 6c29 0a0a 0a64  shell=shell)...d
-0000cd20: 6566 205f 6461 7461 5f64 6972 5f66 6f72  ef _data_dir_for
-0000cd30: 5f70 6c61 7466 6f72 6d28 2920 2d3e 2050  _platform() -> P
-0000cd40: 6174 683a 0a20 2020 2022 2222 0a20 2020  ath:.    """.   
-0000cd50: 2052 6574 7572 6e73 2074 6865 2064 6174   Returns the dat
-0000cd60: 6120 6469 7265 6374 6f72 7920 666f 7220  a directory for 
-0000cd70: 7468 6520 6769 7665 6e20 706c 6174 666f  the given platfo
-0000cd80: 726d 0a20 2020 2022 2222 0a20 2020 2070  rm.    """.    p
-0000cd90: 6c61 7466 6f72 6d20 3d20 7379 732e 706c  latform = sys.pl
-0000cda0: 6174 666f 726d 0a20 2020 2069 6620 706c  atform.    if pl
-0000cdb0: 6174 666f 726d 203d 3d20 276c 696e 7578  atform == 'linux
-0000cdc0: 273a 0a20 2020 2020 2020 2072 6574 7572  ':.        retur
-0000cdd0: 6e20 5061 7468 2822 7e2f 2e6c 6f63 616c  n Path("~/.local
-0000cde0: 2f73 6861 7265 2229 2e65 7870 616e 6475  /share").expandu
-0000cdf0: 7365 7228 290a 2020 2020 656c 6966 2070  ser().    elif p
-0000ce00: 6c61 7466 6f72 6d20 3d3d 2027 6461 7277  latform == 'darw
-0000ce10: 696e 273a 0a20 2020 2020 2020 2072 6574  in':.        ret
-0000ce20: 7572 6e20 5061 7468 2822 7e2f 4c69 6272  urn Path("~/Libr
-0000ce30: 6172 792f 4170 706c 6963 6174 696f 6e20  ary/Application 
-0000ce40: 5375 7070 6f72 7422 292e 6578 7061 6e64  Support").expand
-0000ce50: 7573 6572 2829 0a20 2020 2065 6c69 6620  user().    elif 
-0000ce60: 706c 6174 666f 726d 203d 3d20 2777 696e  platform == 'win
-0000ce70: 3332 273a 0a20 2020 2020 2020 2070 203d  32':.        p =
-0000ce80: 2052 2243 3a5c 5573 6572 735c 2455 5345   R"C:\Users\$USE
-0000ce90: 524e 414d 455c 4170 7044 6174 615c 4c6f  RNAME\AppData\Lo
-0000cea0: 6361 6c22 0a20 2020 2020 2020 2072 6574  cal".        ret
-0000ceb0: 7572 6e20 5061 7468 286f 732e 7061 7468  urn Path(os.path
-0000cec0: 2e65 7870 616e 6476 6172 7328 7029 290a  .expandvars(p)).
-0000ced0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000cee0: 2020 7261 6973 6520 506c 6174 666f 726d    raise Platform
-0000cef0: 4e6f 7453 7570 706f 7274 6564 4572 726f  NotSupportedErro
-0000cf00: 7228 6622 506c 6174 666f 726d 2075 6e6b  r(f"Platform unk
-0000cf10: 6e6f 776e 3a20 7b70 6c61 7466 6f72 6d7d  nown: {platform}
-0000cf20: 2229 0a0a 0a49 4e44 4558 5f47 4954 5f52  ")...INDEX_GIT_R
-0000cf30: 4550 4f53 4954 4f52 5920 3d20 2268 7474  EPOSITORY = "htt
-0000cf40: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-0000cf50: 6373 6f75 6e64 2d70 6c75 6769 6e73 2f72  csound-plugins/r
-0000cf60: 6973 7365 742d 6461 7461 220a 5249 5353  isset-data".RISS
-0000cf70: 4554 5f52 4f4f 5420 3d20 5f64 6174 615f  ET_ROOT = _data_
-0000cf80: 6469 725f 666f 725f 706c 6174 666f 726d  dir_for_platform
-0000cf90: 2829 202f 2022 7269 7373 6574 220a 5249  () / "risset".RI
-0000cfa0: 5353 4554 5f44 4154 4152 4550 4f5f 4c4f  SSET_DATAREPO_LO
-0000cfb0: 4341 4c50 4154 4820 3d20 5249 5353 4554  CALPATH = RISSET
-0000cfc0: 5f52 4f4f 5420 2f20 2272 6973 7365 742d  _ROOT / "risset-
-0000cfd0: 6461 7461 220a 5249 5353 4554 5f47 454e  data".RISSET_GEN
-0000cfe0: 4552 4154 4544 5f44 4f43 5320 3d20 5249  ERATED_DOCS = RI
-0000cff0: 5353 4554 5f52 4f4f 5420 2f20 226d 616e  SSET_ROOT / "man
-0000d000: 220a 5249 5353 4554 5f43 4c4f 4e45 535f  ".RISSET_CLONES_
-0000d010: 5041 5448 203d 2052 4953 5345 545f 524f  PATH = RISSET_RO
-0000d020: 4f54 202f 2022 636c 6f6e 6573 220a 5249  OT / "clones".RI
-0000d030: 5353 4554 5f41 5353 4554 535f 5041 5448  SSET_ASSETS_PATH
-0000d040: 203d 2052 4953 5345 545f 524f 4f54 202f   = RISSET_ROOT /
-0000d050: 2022 6173 7365 7473 220a 5249 5353 4554   "assets".RISSET
-0000d060: 5f4f 5043 4f44 4553 584d 4c20 3d20 5249  _OPCODESXML = RI
-0000d070: 5353 4554 5f52 4f4f 5420 2f20 226f 7063  SSET_ROOT / "opc
-0000d080: 6f64 6573 2e78 6d6c 220a 5f4d 4149 4e49  odes.xml"._MAINI
-0000d090: 4e44 4558 5f50 4943 4b4c 455f 4649 4c45  NDEX_PICKLE_FILE
-0000d0a0: 203d 2052 4953 5345 545f 524f 4f54 202f   = RISSET_ROOT /
-0000d0b0: 2022 6d61 696e 696e 6465 782e 7069 636b   "mainindex.pick
-0000d0c0: 6c65 220a 4d41 434f 535f 454e 5449 544c  le".MACOS_ENTITL
-0000d0d0: 454d 454e 5453 5f50 4154 4820 3d20 5249  EMENTS_PATH = RI
-0000d0e0: 5353 4554 5f41 5353 4554 535f 5041 5448  SSET_ASSETS_PATH
-0000d0f0: 202f 2027 6373 6f75 6e64 706c 7567 696e   / 'csoundplugin
-0000d100: 732e 656e 7469 746c 656d 656e 7473 270a  s.entitlements'.
-0000d110: 0a55 4e4b 4e4f 574e 5f56 4552 5349 4f4e  .UNKNOWN_VERSION
-0000d120: 203d 2022 556e 6b6e 6f77 6e22 0a0a 0a5f   = "Unknown"..._
-0000d130: 7375 7070 6f72 7465 645f 706c 6174 666f  supported_platfo
-0000d140: 726d 7320 3d20 7b0a 2020 2020 276d 6163  rms = {.    'mac
-0000d150: 6f73 2d78 3836 5f36 3427 2c0a 2020 2020  os-x86_64',.    
-0000d160: 276c 696e 7578 2d78 3836 5f36 3427 2c0a  'linux-x86_64',.
-0000d170: 2020 2020 2777 696e 646f 7773 2d78 3836      'windows-x86
-0000d180: 5f36 3427 2c0a 2020 2020 276d 6163 6f73  _64',.    'macos
-0000d190: 2d61 726d 3634 272c 0a20 2020 2027 6c69  -arm64',.    'li
-0000d1a0: 6e75 782d 6172 6d36 3427 0a7d 0a0a 0a5f  nux-arm64'.}..._
-0000d1b0: 554e 5345 5420 3d20 6f62 6a65 6374 2829  UNSET = object()
-0000d1c0: 0a0a 0a5f 656e 7469 746c 656d 656e 7473  ..._entitlements
-0000d1d0: 5f73 7472 203d 2072 2222 220a 3c3f 786d  _str = r""".<?xm
-0000d1e0: 6c20 7665 7273 696f 6e3d 2231 2e30 2220  l version="1.0" 
-0000d1f0: 656e 636f 6469 6e67 3d22 5554 462d 3822  encoding="UTF-8"
-0000d200: 3f3e 0a3c 2144 4f43 5459 5045 2070 6c69  ?>.<!DOCTYPE pli
-0000d210: 7374 2050 5542 4c49 4320 222d 2f2f 4170  st PUBLIC "-//Ap
-0000d220: 706c 652f 2f44 5444 2050 4c49 5354 2031  ple//DTD PLIST 1
-0000d230: 2e30 2f2f 454e 2220 2268 7474 703a 2f2f  .0//EN" "http://
-0000d240: 7777 772e 6170 706c 652e 636f 6d2f 4454  www.apple.com/DT
-0000d250: 4473 2f50 726f 7065 7274 794c 6973 742d  Ds/PropertyList-
-0000d260: 312e 302e 6474 6422 3e0a 3c70 6c69 7374  1.0.dtd">.<plist
-0000d270: 2076 6572 7369 6f6e 3d22 312e 3022 3e0a   version="1.0">.
-0000d280: 3c64 6963 743e 0a20 2020 203c 6b65 793e  <dict>.    <key>
-0000d290: 636f 6d2e 6170 706c 652e 7365 6375 7269  com.apple.securi
-0000d2a0: 7479 2e63 732e 6469 7361 626c 652d 6c69  ty.cs.disable-li
-0000d2b0: 6272 6172 792d 7661 6c69 6461 7469 6f6e  brary-validation
-0000d2c0: 3c2f 6b65 793e 0a20 2020 203c 7472 7565  </key>.    <true
-0000d2d0: 2f3e 0a20 2020 203c 6b65 793e 636f 6d2e  />.    <key>com.
-0000d2e0: 6170 706c 652e 7365 6375 7269 7479 2e64  apple.security.d
-0000d2f0: 6576 6963 652e 6175 6469 6f2d 696e 7075  evice.audio-inpu
-0000d300: 743c 2f6b 6579 3e0a 2020 2020 3c74 7275  t</key>.    <tru
-0000d310: 652f 3e0a 2020 2020 3c6b 6579 3e63 6f6d  e/>.    <key>com
-0000d320: 2e61 7070 6c65 2e73 6563 7572 6974 792e  .apple.security.
-0000d330: 6465 7669 6365 2e63 616d 6572 613c 2f6b  device.camera</k
-0000d340: 6579 3e0a 2020 2020 3c74 7275 652f 3e0a  ey>.    <true/>.
-0000d350: 3c2f 6469 6374 3e0a 3c2f 706c 6973 743e  </dict>.</plist>
-0000d360: 0a22 2222 0a0a 0a64 6566 205f 6d61 636f  ."""...def _maco
-0000d370: 735f 7361 7665 5f65 6e74 6974 6c65 6d65  s_save_entitleme
-0000d380: 6e74 7328 2920 2d3e 2050 6174 683a 0a20  nts() -> Path:. 
-0000d390: 2020 2070 6174 6820 3d20 4d41 434f 535f     path = MACOS_
-0000d3a0: 454e 5449 544c 454d 454e 5453 5f50 4154  ENTITLEMENTS_PAT
-0000d3b0: 480a 2020 2020 5f65 6e73 7572 655f 7061  H.    _ensure_pa
-0000d3c0: 7265 6e74 5f65 7869 7374 7328 7061 7468  rent_exists(path
-0000d3d0: 290a 2020 2020 6966 206e 6f74 205f 7365  ).    if not _se
-0000d3e0: 7373 696f 6e2e 656e 7469 746c 656d 656e  ssion.entitlemen
-0000d3f0: 7473 5f73 6176 6564 3a0a 2020 2020 2020  ts_saved:.      
-0000d400: 2020 7769 7468 206f 7065 6e28 7061 7468    with open(path
-0000d410: 2c20 2777 2729 2061 7320 663a 0a20 2020  , 'w') as f:.   
-0000d420: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
-0000d430: 285f 656e 7469 746c 656d 656e 7473 5f73  (_entitlements_s
-0000d440: 7472 290a 2020 2020 2020 2020 6173 7365  tr).        asse
-0000d450: 7274 206f 732e 7061 7468 2e65 7869 7374  rt os.path.exist
-0000d460: 7328 7061 7468 290a 2020 2020 2020 2020  s(path).        
-0000d470: 706c 7574 696c 203d 2073 6875 7469 6c2e  plutil = shutil.
-0000d480: 7768 6963 6828 2770 6c75 7469 6c27 290a  which('plutil').
-0000d490: 2020 2020 2020 2020 6966 2070 6c75 7469          if pluti
-0000d4a0: 6c3a 0a20 2020 2020 2020 2020 2020 205f  l:.            _
-0000d4b0: 6465 6275 6728 6622 5665 7269 6679 696e  debug(f"Verifyin
-0000d4c0: 6720 7468 6174 2074 6865 2065 6e74 6974  g that the entit
-0000d4d0: 6c65 6d65 6e74 7320 6669 6c65 2027 7b70  lements file '{p
-0000d4e0: 6174 687d 2720 6973 2061 2076 616c 6964  ath}' is a valid
-0000d4f0: 2070 6c69 7374 2229 0a20 2020 2020 2020   plist").       
-0000d500: 2020 2020 205f 7375 6270 726f 635f 6361       _subproc_ca
-0000d510: 6c6c 285b 706c 7574 696c 2c20 7061 7468  ll([plutil, path
-0000d520: 5d29 0a20 2020 2020 2020 205f 7365 7373  ]).        _sess
-0000d530: 696f 6e2e 656e 7469 746c 656d 656e 7473  ion.entitlements
-0000d540: 5f73 6176 6564 203d 2054 7275 650a 2020  _saved = True.  
-0000d550: 2020 2020 2020 5f64 6562 7567 2866 2253        _debug(f"S
-0000d560: 6176 6564 2065 6e74 6974 6c65 6d65 6e74  aved entitlement
-0000d570: 7320 6669 6c65 2074 6f20 7b70 6174 687d  s file to {path}
-0000d580: 2229 0a20 2020 2020 2020 205f 6465 6275  ").        _debu
-0000d590: 6728 6622 456e 7469 746c 656d 656e 7473  g(f"Entitlements
-0000d5a0: 3a5c 6e7b 6f70 656e 2870 6174 6829 2e72  :\n{open(path).r
-0000d5b0: 6561 6428 297d 5c6e 2d2d 2d2d 2d2d 2d2d  ead()}\n--------
-0000d5c0: 2d2d 2d2d 2065 6e64 2065 6e74 6974 6c65  ---- end entitle
-0000d5d0: 6d65 6e74 7322 290a 0a20 2020 2072 6574  ments")..    ret
-0000d5e0: 7572 6e20 7061 7468 0a0a 2320 5349 474e  urn path..# SIGN
-0000d5f0: 4154 5552 455f 4944 3d22 2d22 0a23 2063  ATURE_ID="-".# c
-0000d600: 6f64 6573 6967 6e20 2d2d 666f 7263 6520  odesign --force 
-0000d610: 2d2d 7369 676e 2022 247b 5349 474e 4154  --sign "${SIGNAT
-0000d620: 5552 455f 4944 7d22 202d 2d65 6e74 6974  URE_ID}" --entit
-0000d630: 6c65 6d65 6e74 7320 6373 6f75 6e64 706c  lements csoundpl
-0000d640: 7567 696e 732e 656e 7469 746c 656d 656e  ugins.entitlemen
-0000d650: 7473 2022 2f70 6174 682f 746f 2f64 796c  ts "/path/to/dyl
-0000d660: 6962 220a 0a0a 6465 6620 6d61 636f 735f  ib"...def macos_
-0000d670: 636f 6465 7369 676e 2864 796c 6962 7061  codesign(dylibpa
-0000d680: 7468 733a 206c 6973 745b 7374 725d 2c20  ths: list[str], 
-0000d690: 7369 676e 6174 7572 653d 272d 2729 202d  signature='-') -
-0000d6a0: 3e20 4e6f 6e65 3a0a 2020 2020 2222 220a  > None:.    """.
-0000d6b0: 2020 2020 436f 6465 7369 676e 2074 6865      Codesign the
-0000d6c0: 2067 6976 656e 206c 6962 7261 7279 2062   given library b
-0000d6d0: 696e 6172 6965 7320 7573 696e 6720 656e  inaries using en
-0000d6e0: 7469 746c 656d 656e 7473 0a0a 2020 2020  titlements..    
-0000d6f0: 4172 6773 3a0a 2020 2020 2020 2020 6479  Args:.        dy
-0000d700: 6c69 6270 6174 6873 3a20 6120 6c69 7374  libpaths: a list
-0000d710: 206f 6620 7061 7468 7320 746f 2063 6f64   of paths to cod
-0000d720: 6573 6967 6e0a 2020 2020 2020 2020 7369  esign.        si
-0000d730: 676e 6174 7572 653a 2074 6865 2073 6967  gnature: the sig
-0000d740: 6e61 7475 7265 2075 7365 642e 2027 2d27  nature used. '-'
-0000d750: 2069 6e64 6963 6174 6573 2074 6f20 7369   indicates to si
-0000d760: 676e 2069 7420 6c6f 6361 6c6c 790a 2020  gn it locally.  
-0000d770: 2020 2222 220a 2020 2020 6966 206e 6f74    """.    if not
-0000d780: 2073 6875 7469 6c2e 7768 6963 6828 2763   shutil.which('c
-0000d790: 6f64 6573 6967 6e27 293a 0a20 2020 2020  odesign'):.     
-0000d7a0: 2020 2072 6169 7365 2052 756e 7469 6d65     raise Runtime
-0000d7b0: 4572 726f 7228 2243 6f75 6c64 206e 6f74  Error("Could not
-0000d7c0: 2066 696e 6420 7468 6520 6269 6e61 7279   find the binary
-0000d7d0: 2027 636f 6465 7369 676e 2720 696e 2074   'codesign' in t
-0000d7e0: 6865 2070 6174 6822 290a 2020 2020 656e  he path").    en
-0000d7f0: 7469 746c 656d 656e 7473 5f70 6174 6820  titlements_path 
-0000d800: 3d20 5f6d 6163 6f73 5f73 6176 655f 656e  = _macos_save_en
-0000d810: 7469 746c 656d 656e 7473 2829 0a20 2020  titlements().   
-0000d820: 2061 7373 6572 7420 6f73 2e70 6174 682e   assert os.path.
-0000d830: 6578 6973 7473 2865 6e74 6974 6c65 6d65  exists(entitleme
-0000d840: 6e74 735f 7061 7468 290a 2020 2020 666f  nts_path).    fo
-0000d850: 7220 6479 6c69 6270 6174 6820 696e 2064  r dylibpath in d
-0000d860: 796c 6962 7061 7468 733a 0a20 2020 2020  ylibpaths:.     
-0000d870: 2020 205f 7375 6270 726f 635f 6361 6c6c     _subproc_call
-0000d880: 285b 2763 6f64 6573 6967 6e27 2c20 272d  (['codesign', '-
-0000d890: 2d66 6f72 6365 272c 2027 2d2d 7369 676e  -force', '--sign
-0000d8a0: 272c 2073 6967 6e61 7475 7265 2c20 272d  ', signature, '-
-0000d8b0: 2d65 6e74 6974 6c65 6d65 6e74 7327 2c20  -entitlements', 
-0000d8c0: 656e 7469 746c 656d 656e 7473 5f70 6174  entitlements_pat
-0000d8d0: 682c 2064 796c 6962 7061 7468 5d29 0a20  h, dylibpath]). 
-0000d8e0: 2020 2020 2020 205f 6465 6275 6728 2256         _debug("V
-0000d8f0: 6572 6966 7969 6e67 2063 6f64 6520 7369  erifying code si
-0000d900: 676e 696e 6722 290a 2020 2020 2020 2020  gning").        
-0000d910: 5f73 7562 7072 6f63 5f63 616c 6c28 5b27  _subproc_call(['
-0000d920: 636f 6465 7369 676e 272c 2027 2d2d 6469  codesign', '--di
-0000d930: 7370 6c61 7927 2c20 272d 2d76 6572 626f  splay', '--verbo
-0000d940: 7365 272c 2064 796c 6962 7061 7468 5d29  se', dylibpath])
-0000d950: 0a0a 0a64 6566 205f 6e6f 726d 616c 697a  ...def _normaliz
-0000d960: 655f 706c 6174 666f 726d 2873 3a20 7374  e_platform(s: st
-0000d970: 7229 202d 3e20 7374 723a 0a20 2020 2022  r) -> str:.    "
-0000d980: 2222 0a20 2020 204e 6f72 6d61 6c69 7a65  "".    Normalize
-0000d990: 7320 706c 6174 666f 726d 2064 6566 696e  s platform defin
-0000d9a0: 6974 696f 6e20 6173 2075 7365 6420 696e  ition as used in
-0000d9b0: 2072 6973 7365 742e 6a73 6f6e 0a0a 2020   risset.json..  
-0000d9c0: 2020 4861 6e64 6c65 7320 7468 6520 6361    Handles the ca
-0000d9d0: 7365 2077 6865 7265 2c20 666f 7220 636f  se where, for co
-0000d9e0: 6d70 6174 6962 696c 6974 7920 7265 6173  mpatibility reas
-0000d9f0: 6f6e 732c 2074 6865 0a20 2020 2061 7263  ons, the.    arc
-0000da00: 6869 7465 6374 7572 6520 6d69 6768 7420  hitecture might 
-0000da10: 6265 206d 6973 7369 6e67 2c20 736f 2074  be missing, so t
-0000da20: 6869 7320 6675 6e63 7469 6f6e 2072 6573  his function res
-0000da30: 6f6c 7665 732c 0a20 2020 2066 6f72 2065  olves,.    for e
-0000da40: 7861 6d70 6c65 2c20 2777 696e 646f 7773  xample, 'windows
-0000da50: 2720 746f 2027 7769 6e64 6f77 732d 7838  ' to 'windows-x8
-0000da60: 365f 3634 272e 0a0a 2020 2020 4f74 6865  6_64'...    Othe
-0000da70: 7277 6973 6520 7468 6520 706c 6174 666f  rwise the platfo
-0000da80: 726d 2064 6566 696e 6974 696f 6e20 7368  rm definition sh
-0000da90: 6f75 6c64 2063 6f6e 7369 7374 206f 6620  ould consist of 
-0000daa0: 6120 7061 6972 203c 6f73 3e2d 3c61 7263  a pair <os>-<arc
-0000dab0: 683e 2c0a 2020 2020 6c69 6b65 2022 6d61  h>,.    like "ma
-0000dac0: 636f 732d 6172 6d36 3422 206f 7220 226c  cos-arm64" or "l
-0000dad0: 696e 7578 2d78 3836 5f36 3422 0a0a 2020  inux-x86_64"..  
-0000dae0: 2020 5261 6973 6573 2056 616c 7565 4572    Raises ValueEr
-0000daf0: 726f 7220 6966 2074 6865 2070 6c61 7466  ror if the platf
-0000db00: 6f72 6d20 6973 206e 6f74 2073 7570 706f  orm is not suppo
-0000db10: 7274 6564 0a20 2020 2022 2222 0a20 2020  rted.    """.   
-0000db20: 2069 6620 7320 696e 205f 7375 7070 6f72   if s in _suppor
-0000db30: 7465 645f 706c 6174 666f 726d 733a 0a20  ted_platforms:. 
-0000db40: 2020 2020 2020 2072 6574 7572 6e20 730a         return s.
-0000db50: 0a20 2020 2069 6620 7320 696e 2028 276d  .    if s in ('m
-0000db60: 6163 6f73 272c 2027 7769 6e64 6f77 7327  acos', 'windows'
-0000db70: 2c20 276c 696e 7578 2729 3a0a 2020 2020  , 'linux'):.    
-0000db80: 2020 2020 7265 7475 726e 2073 202b 2027      return s + '
-0000db90: 2d78 3836 5f36 3427 0a0a 2020 2020 7261  -x86_64'..    ra
-0000dba0: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
-0000dbb0: 2255 6e6b 6e6f 776e 2070 6c61 7466 6f72  "Unknown platfor
-0000dbc0: 6d20 277b 737d 2722 290a 0a0a 6465 6620  m '{s}'")...def 
-0000dbd0: 5f70 6c61 7466 6f72 6d5f 6172 6368 6974  _platform_archit
-0000dbe0: 6563 7475 7265 2829 202d 3e20 7374 723a  ecture() -> str:
-0000dbf0: 0a20 2020 2022 2222 0a20 2020 2052 6574  .    """.    Ret
-0000dc00: 7572 6e73 2074 6865 2061 7263 6869 7465  urns the archite
-0000dc10: 6374 7572 6520 666f 7220 7468 6973 2070  cture for this p
-0000dc20: 6c61 7466 6f72 6d0a 0a20 2020 2054 6865  latform..    The
-0000dc30: 2061 7263 6869 7465 6374 7572 6520 6973   architecture is
-0000dc40: 206f 6e65 206f 6620 2778 3836 5f36 3427   one of 'x86_64'
-0000dc50: 2028 696e 7465 6c2c 2036 3462 6974 7329   (intel, 64bits)
-0000dc60: 2c0a 2020 2020 2778 3836 2720 2869 6e74  ,.    'x86' (int
-0000dc70: 656c 2c20 3332 6269 7473 292c 2027 6172  el, 32bits), 'ar
-0000dc80: 6d36 3427 2028 6172 6d20 3634 6269 7473  m64' (arm 64bits
-0000dc90: 2920 6f72 2027 6172 6d33 3227 2028 6172  ) or 'arm32' (ar
-0000dca0: 6d20 3332 6269 7473 290a 2020 2020 2222  m 32bits).    ""
-0000dcb0: 220a 2020 2020 6d61 6368 696e 6520 3d20  ".    machine = 
-0000dcc0: 706c 6174 666f 726d 2e6d 6163 6869 6e65  platform.machine
-0000dcd0: 2829 2e6c 6f77 6572 2829 0a20 2020 2062  ().lower().    b
-0000dce0: 6974 732c 206c 696e 6b61 6765 203d 2070  its, linkage = p
-0000dcf0: 6c61 7466 6f72 6d2e 6172 6368 6974 6563  latform.architec
-0000dd00: 7475 7265 2829 0a20 2020 2069 6620 6d61  ture().    if ma
-0000dd10: 6368 696e 6520 3d3d 2027 6172 6d27 3a0a  chine == 'arm':.
-0000dd20: 2020 2020 2020 2020 6966 2062 6974 7320          if bits 
-0000dd30: 3d3d 2027 3634 6269 7427 3a0a 2020 2020  == '64bit':.    
-0000dd40: 2020 2020 2020 2020 7265 7475 726e 2027          return '
-0000dd50: 6172 6d36 3427 0a20 2020 2020 2020 2065  arm64'.        e
-0000dd60: 6c69 6620 6269 7473 203d 3d20 2733 3262  lif bits == '32b
-0000dd70: 6974 273a 0a20 2020 2020 2020 2020 2020  it':.           
-0000dd80: 2072 6574 7572 6e20 2761 726d 3332 270a   return 'arm32'.
-0000dd90: 2020 2020 656c 6966 206d 6163 6869 6e65      elif machine
-0000dda0: 203d 3d20 2761 726d 3634 273a 0a20 2020   == 'arm64':.   
-0000ddb0: 2020 2020 2072 6574 7572 6e20 2761 726d       return 'arm
-0000ddc0: 3634 270a 2020 2020 656c 6966 206d 6163  64'.    elif mac
-0000ddd0: 6869 6e65 203d 3d20 2778 3836 5f36 3427  hine == 'x86_64'
-0000dde0: 206f 7220 6d61 6368 696e 652e 7374 6172   or machine.star
-0000ddf0: 7473 7769 7468 2827 616d 6436 3427 2920  tswith('amd64') 
-0000de00: 6f72 206d 6163 6869 6e65 2e73 7461 7274  or machine.start
-0000de10: 7377 6974 6828 2769 6e74 656c 3634 2729  swith('intel64')
-0000de20: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0000de30: 2027 7838 365f 3634 270a 2020 2020 656c   'x86_64'.    el
-0000de40: 6966 206d 6163 6869 6e65 203d 3d20 2769  if machine == 'i
-0000de50: 3338 3627 3a0a 2020 2020 2020 2020 6966  386':.        if
-0000de60: 2062 6974 7320 3d3d 2027 3634 6269 7427   bits == '64bit'
-0000de70: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0000de80: 7475 726e 2027 7838 365f 3634 270a 2020  turn 'x86_64'.  
-0000de90: 2020 2020 2020 656c 6966 2062 6974 7320        elif bits 
-0000dea0: 3d3d 2027 3332 6269 7427 3a0a 2020 2020  == '32bit':.    
-0000deb0: 2020 2020 2020 2020 7265 7475 726e 2027          return '
-0000dec0: 7838 3627 0a0a 2020 2020 7261 6973 6520  x86'..    raise 
-0000ded0: 5275 6e74 696d 6545 7272 6f72 2866 222a  RuntimeError(f"*
-0000dee0: 2a20 4172 6368 6974 6563 7475 7265 206e  * Architecture n
-0000def0: 6f74 2073 7570 706f 7274 6564 2028 6d61  ot supported (ma
-0000df00: 6368 696e 653d 277b 6d61 6368 696e 657d  chine='{machine}
-0000df10: 272c 207b 6269 7473 3d7d 2c20 7b6c 696e  ', {bits=}, {lin
-0000df20: 6b61 6765 3d7d 2922 290a 0a0a 6465 6620  kage=})")...def 
-0000df30: 5f63 736f 756e 646c 6962 5f76 6572 7369  _csoundlib_versi
-0000df40: 6f6e 2829 202d 3e20 7475 706c 655b 696e  on() -> tuple[in
-0000df50: 742c 2069 6e74 5d3a 0a20 2020 2022 2222  t, int]:.    """
-0000df60: 5265 7475 726e 7320 6120 7475 706c 6520  Returns a tuple 
-0000df70: 286d 616a 6f72 2c20 6d69 6e6f 7229 2075  (major, minor) u
-0000df80: 7369 6e67 2074 6865 2063 736f 756e 6420  sing the csound 
-0000df90: 6170 690a 0a20 2020 2054 6869 7320 7665  api..    This ve
-0000dfa0: 7273 696f 6e20 6361 6e20 6469 6666 6572  rsion can differ
-0000dfb0: 2066 726f 6d20 7468 6520 7665 7273 696f   from the versio
-0000dfc0: 6e20 6f66 2074 6865 2069 6e73 7461 6c6c  n of the install
-0000dfd0: 6564 2063 736f 756e 6420 6269 6e61 7279  ed csound binary
-0000dfe0: 0a20 2020 2022 2222 0a20 2020 2069 6d70  .    """.    imp
-0000dff0: 6f72 7420 6374 6373 6f75 6e64 370a 2020  ort ctcsound7.  
-0000e000: 2020 7665 7273 696f 6e69 6420 3d20 6374    versionid = ct
-0000e010: 6373 6f75 6e64 372e 6c69 6263 736f 756e  csound7.libcsoun
-0000e020: 642e 6373 6f75 6e64 4765 7456 6572 7369  d.csoundGetVersi
-0000e030: 6f6e 2829 0a20 2020 206d 616a 6f72 203d  on().    major =
-0000e040: 2076 6572 7369 6f6e 6964 202f 2f20 3130   versionid // 10
-0000e050: 3030 0a20 2020 206d 696e 6f72 203d 2028  00.    minor = (
-0000e060: 7665 7273 696f 6e69 6420 2d20 6d61 6a6f  versionid - majo
-0000e070: 722a 3130 3030 2920 2f2f 2031 300a 2020  r*1000) // 10.  
-0000e080: 2020 7265 7475 726e 206d 616a 6f72 2c20    return major, 
-0000e090: 6d69 6e6f 720a 0a0a 6465 6620 5f63 736f  minor...def _cso
-0000e0a0: 756e 645f 7665 7273 696f 6e28 6373 6f75  und_version(csou
-0000e0b0: 6e64 6578 653d 2763 736f 756e 6427 2920  ndexe='csound') 
-0000e0c0: 2d3e 2074 7570 6c65 5b69 6e74 2c20 696e  -> tuple[int, in
-0000e0d0: 745d 3a0a 2020 2020 6373 6f75 6e64 5f62  t]:.    csound_b
-0000e0e0: 696e 203d 205f 6765 745f 6373 6f75 6e64  in = _get_csound
-0000e0f0: 5f62 696e 6172 7928 6373 6f75 6e64 6578  _binary(csoundex
-0000e100: 6529 0a20 2020 2069 6620 6e6f 7420 6373  e).    if not cs
-0000e110: 6f75 6e64 5f62 696e 3a0a 2020 2020 2020  ound_bin:.      
-0000e120: 2020 7261 6973 6520 4f53 4572 726f 7228    raise OSError(
-0000e130: 2263 736f 756e 6420 6269 6e61 7279 206e  "csound binary n
-0000e140: 6f74 2066 6f75 6e64 2229 0a20 2020 2070  ot found").    p
-0000e150: 726f 6320 3d20 7375 6270 726f 6365 7373  roc = subprocess
-0000e160: 2e50 6f70 656e 285b 6373 6f75 6e64 5f62  .Popen([csound_b
-0000e170: 696e 2c20 222d 2d76 6572 7369 6f6e 225d  in, "--version"]
-0000e180: 2c20 7374 6465 7272 3d73 7562 7072 6f63  , stderr=subproc
-0000e190: 6573 732e 5049 5045 290a 2020 2020 7072  ess.PIPE).    pr
-0000e1a0: 6f63 2e77 6169 7428 290a 2020 2020 6173  oc.wait().    as
-0000e1b0: 7365 7274 2070 726f 632e 7374 6465 7272  sert proc.stderr
-0000e1c0: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
-0000e1d0: 206f 7574 203d 2070 726f 632e 7374 6465   out = proc.stde
-0000e1e0: 7272 2e72 6561 6428 292e 6465 636f 6465  rr.read().decode
-0000e1f0: 2827 6173 6369 6927 290a 2020 2020 666f  ('ascii').    fo
-0000e200: 7220 6c69 6e65 2069 6e20 6f75 742e 7370  r line in out.sp
-0000e210: 6c69 746c 696e 6573 2829 3a0a 2020 2020  litlines():.    
-0000e220: 2020 2020 6966 206d 6174 6368 203a 3d20      if match := 
-0000e230: 7265 2e73 6561 7263 6828 7227 2d2d 4373  re.search(r'--Cs
-0000e240: 6f75 6e64 5c73 2b76 6572 7369 6f6e 5c73  ound\s+version\s
-0000e250: 2b28 5c64 2b29 5c2e 285c 642b 2928 2e2a  +(\d+)\.(\d+)(.*
-0000e260: 2927 2c20 6c69 6e65 293a 0a20 2020 2020  )', line):.     
-0000e270: 2020 2020 2020 206d 616a 6f72 203d 2069         major = i
-0000e280: 6e74 286d 6174 6368 2e67 726f 7570 2831  nt(match.group(1
-0000e290: 2929 0a20 2020 2020 2020 2020 2020 206d  )).            m
-0000e2a0: 696e 6f72 203d 2069 6e74 286d 6174 6368  inor = int(match
-0000e2b0: 2e67 726f 7570 2832 2929 0a20 2020 2020  .group(2)).     
-0000e2c0: 2020 2020 2020 2072 6573 7420 3d20 6d61         rest = ma
-0000e2d0: 7463 682e 6772 6f75 7028 3329 0a20 2020  tch.group(3).   
-0000e2e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000e2f0: 6d61 6a6f 722c 206d 696e 6f72 0a20 2020  major, minor.   
-0000e300: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-0000e310: 7228 2243 6f75 6c64 206e 6f74 2066 696e  r("Could not fin
-0000e320: 6420 6120 7665 7273 696f 6e20 6e75 6d62  d a version numb
-0000e330: 6572 2069 6e20 7468 6520 6f75 7470 7574  er in the output
-0000e340: 2229 0a0a 0a63 6c61 7373 205f 5365 7373  ")...class _Sess
-0000e350: 696f 6e3a 0a20 2020 2022 2222 0a20 2020  ion:.    """.   
-0000e360: 2053 696d 676c 6574 6f6e 2063 6c61 7373   Simgleton class
-0000e370: 2074 6f20 686f 6c64 2069 6e66 6f72 6d61   to hold informa
-0000e380: 7469 6f6e 2061 626f 7574 2074 6865 2073  tion about the s
-0000e390: 6573 7369 6f6e 0a0a 2020 2020 5468 6973  ession..    This
-0000e3a0: 2063 6c61 7373 206b 6565 7073 2074 7261   class keeps tra
-0000e3b0: 636b 206f 6620 646f 776e 6c6f 6164 6564  ck of downloaded
-0000e3c0: 2066 696c 6573 2c20 636c 6f6e 6564 2072   files, cloned r
-0000e3d0: 6570 6f73 2c20 6574 632e 0a20 2020 2022  epos, etc..    "
-0000e3e0: 2222 0a20 2020 2069 6e73 7461 6e63 653a  "".    instance:
-0000e3f0: 205f 5365 7373 696f 6e20 7c20 4e6f 6e65   _Session | None
-0000e400: 203d 204e 6f6e 650a 0a20 2020 2064 6566   = None..    def
-0000e410: 205f 5f6e 6577 5f5f 2863 6c73 2c20 2a61   __new__(cls, *a
-0000e420: 7267 732c 202a 2a6b 7761 7267 7329 3a0a  rgs, **kwargs):.
-0000e430: 2020 2020 2020 2020 6966 205f 5365 7373          if _Sess
-0000e440: 696f 6e2e 696e 7374 616e 6365 2069 7320  ion.instance is 
-0000e450: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000e460: 2020 2020 2020 7265 7475 726e 205f 5365        return _Se
-0000e470: 7373 696f 6e2e 696e 7374 616e 6365 0a0a  ssion.instance..
-0000e480: 2020 2020 2020 2020 696e 7374 616e 6365          instance
-0000e490: 203d 2073 7570 6572 2829 2e5f 5f6e 6577   = super().__new
-0000e4a0: 5f5f 2863 6c73 2c20 2a61 7267 732c 202a  __(cls, *args, *
-0000e4b0: 2a6b 7761 7267 7329 0a20 2020 2020 2020  *kwargs).       
-0000e4c0: 205f 5365 7373 696f 6e2e 696e 7374 616e   _Session.instan
-0000e4d0: 6365 203d 2069 6e73 7461 6e63 650a 2020  ce = instance.  
-0000e4e0: 2020 2020 2020 7265 7475 726e 2069 6e73        return ins
-0000e4f0: 7461 6e63 650a 0a20 2020 2064 6566 205f  tance..    def _
-0000e500: 5f69 6e69 745f 5f28 7365 6c66 293a 0a20  _init__(self):. 
-0000e510: 2020 2020 2020 2073 656c 662e 646f 776e         self.down
-0000e520: 6c6f 6164 6564 5f66 696c 6573 3a20 6469  loaded_files: di
-0000e530: 6374 5b73 7472 2c20 5061 7468 5d20 3d20  ct[str, Path] = 
-0000e540: 7b7d 0a20 2020 2020 2020 2073 656c 662e  {}.        self.
-0000e550: 636c 6f6e 6564 5f72 6570 6f73 3a20 6469  cloned_repos: di
-0000e560: 6374 5b73 7472 2c20 5061 7468 5d20 3d20  ct[str, Path] = 
-0000e570: 7b7d 0a20 2020 2020 2020 2073 656c 662e  {}.        self.
-0000e580: 706c 6174 666f 726d 3a20 7374 7220 3d20  platform: str = 
-0000e590: 7b0a 2020 2020 2020 2020 2020 2020 276c  {.            'l
-0000e5a0: 696e 7578 273a 2027 6c69 6e75 7827 2c0a  inux': 'linux',.
-0000e5b0: 2020 2020 2020 2020 2020 2020 2764 6172              'dar
-0000e5c0: 7769 6e27 3a20 276d 6163 6f73 272c 0a20  win': 'macos',. 
-0000e5d0: 2020 2020 2020 2020 2020 2027 7769 6e33             'win3
-0000e5e0: 3227 3a20 2777 696e 646f 7773 270a 2020  2': 'windows'.  
-0000e5f0: 2020 2020 2020 7d5b 7379 732e 706c 6174        }[sys.plat
-0000e600: 666f 726d 5d0a 0a20 2020 2020 2020 2073  form]..        s
-0000e610: 656c 662e 6172 6368 6974 6563 7475 7265  elf.architecture
-0000e620: 203d 205f 706c 6174 666f 726d 5f61 7263   = _platform_arc
-0000e630: 6869 7465 6374 7572 6528 290a 0a20 2020  hitecture()..   
-0000e640: 2020 2020 2073 656c 662e 706c 6174 666f       self.platfo
-0000e650: 726d 6964 203d 2073 656c 662e 5f70 6c61  rmid = self._pla
-0000e660: 7466 6f72 6d5f 6964 2829 0a20 2020 2020  tform_id().     
-0000e670: 2020 2022 2222 5468 6520 7061 6972 203c     """The pair <
-0000e680: 6f73 3e2d 3c61 7263 683e 2028 6c69 6e75  os>-<arch> (linu
-0000e690: 782d 7838 365f 3634 2c20 7769 6e64 6f77  x-x86_64, window
-0000e6a0: 732d 7838 365f 3634 2c20 6d61 636f 732d  s-x86_64, macos-
-0000e6b0: 6172 6d36 342c 2065 7463 2222 220a 0a20  arm64, etc""".. 
-0000e6c0: 2020 2020 2020 2073 656c 662e 6465 6275         self.debu
-0000e6d0: 6720 3d20 4661 6c73 650a 2020 2020 2020  g = False.      
-0000e6e0: 2020 6d61 6a6f 722c 206d 696e 6f72 203d    major, minor =
-0000e6f0: 205f 6373 6f75 6e64 6c69 625f 7665 7273   _csoundlib_vers
-0000e700: 696f 6e28 290a 2020 2020 2020 2020 7365  ion().        se
-0000e710: 6c66 2e63 736f 756e 645f 7665 7273 696f  lf.csound_versio
-0000e720: 6e3a 2069 6e74 203d 206d 616a 6f72 202a  n: int = major *
-0000e730: 2031 3030 3020 2b20 6d69 6e6f 7220 2a20   1000 + minor * 
-0000e740: 3130 0a20 2020 2020 2020 2073 656c 662e  10.        self.
-0000e750: 7374 6f70 5f6f 6e5f 6572 726f 7273 203d  stop_on_errors =
-0000e760: 2054 7275 650a 2020 2020 2020 2020 7365   True.        se
-0000e770: 6c66 2e65 6e74 6974 6c65 6d65 6e74 735f  lf.entitlements_
-0000e780: 7361 7665 6420 3d20 4661 6c73 650a 2020  saved = False.  
-0000e790: 2020 2020 2020 7365 6c66 2e63 6163 6865        self.cache
-0000e7a0: 203d 207b 7d0a 0a20 2020 2064 6566 205f   = {}..    def _
-0000e7b0: 706c 6174 666f 726d 5f69 6428 7365 6c66  platform_id(self
-0000e7c0: 2920 2d3e 2073 7472 3a0a 2020 2020 2020  ) -> str:.      
-0000e7d0: 2020 2222 220a 2020 2020 2020 2020 5265    """.        Re
-0000e7e0: 7475 726e 7320 6f6e 6520 6f66 2027 6c69  turns one of 'li
-0000e7f0: 6e75 7827 2c20 2777 696e 646f 7773 272c  nux', 'windows',
-0000e800: 2027 6d61 636f 7327 2028 696e 7465 6c20   'macos' (intel 
-0000e810: 7838 365f 3634 2920 6f72 2074 6865 6972  x86_64) or their
-0000e820: 2027 6172 6d36 3427 2076 6172 6961 6e74   'arm64' variant
-0000e830: 3a0a 2020 2020 2020 2020 276d 6163 6f73  :.        'macos
-0000e840: 2d61 726d 3634 272c 2027 6c69 6e75 782d  -arm64', 'linux-
-0000e850: 6172 6d36 3427 2c20 6574 632e 0a20 2020  arm64', etc..   
-0000e860: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0000e870: 2072 6574 7572 6e20 6627 7b73 656c 662e   return f'{self.
-0000e880: 706c 6174 666f 726d 7d2d 7b73 656c 662e  platform}-{self.
-0000e890: 6172 6368 6974 6563 7475 7265 7d27 0a0a  architecture}'..
-0000e8a0: 0a5f 7365 7373 696f 6e20 3d20 5f53 6573  ._session = _Ses
-0000e8b0: 7369 6f6e 2829 0a0a 0a40 6461 7461 636c  sion()...@datacl
-0000e8c0: 6173 730a 636c 6173 7320 5f56 6572 7369  ass.class _Versi
-0000e8d0: 6f6e 5261 6e67 653a 0a20 2020 206d 696e  onRange:.    min
-0000e8e0: 7665 7273 696f 6e3a 2069 6e74 0a20 2020  version: int.   
-0000e8f0: 206d 6178 7665 7273 696f 6e3a 2069 6e74   maxversion: int
-0000e900: 0a20 2020 2069 6e63 6c75 6465 6d69 6e3a  .    includemin:
-0000e910: 2062 6f6f 6c20 3d20 5472 7565 0a20 2020   bool = True.   
-0000e920: 2069 6e63 6c75 6465 6d61 783a 2062 6f6f   includemax: boo
-0000e930: 6c20 3d20 4661 6c73 650a 0a20 2020 2064  l = False..    d
-0000e940: 6566 205f 5f70 6f73 745f 696e 6974 5f5f  ef __post_init__
-0000e950: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000e960: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
-0000e970: 6528 7365 6c66 2e6d 696e 7665 7273 696f  e(self.minversio
-0000e980: 6e2c 2069 6e74 2920 616e 6420 7365 6c66  n, int) and self
-0000e990: 2e6d 696e 7665 7273 696f 6e20 3e3d 2036  .minversion >= 6
-0000e9a0: 3030 302c 2066 2247 6f74 207b 7365 6c66  000, f"Got {self
-0000e9b0: 2e6d 696e 7665 7273 696f 6e7d 220a 2020  .minversion}".  
-0000e9c0: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
-0000e9d0: 6e73 7461 6e63 6528 7365 6c66 2e6d 6178  nstance(self.max
-0000e9e0: 7665 7273 696f 6e2c 2069 6e74 2920 616e  version, int) an
-0000e9f0: 6420 7365 6c66 2e6d 6178 7665 7273 696f  d self.maxversio
-0000ea00: 6e20 3e3d 2036 3030 302c 2066 2247 6f74  n >= 6000, f"Got
-0000ea10: 207b 7365 6c66 2e6d 6178 7665 7273 696f   {self.maxversio
-0000ea20: 6e7d 220a 0a20 2020 2064 6566 2063 6f6e  n}"..    def con
-0000ea30: 7461 696e 7328 7365 6c66 2c20 7665 7273  tains(self, vers
-0000ea40: 696f 6e69 643a 2069 6e74 2920 2d3e 2062  ionid: int) -> b
-0000ea50: 6f6f 6c3a 0a20 2020 2020 2020 2022 2222  ool:.        """
-0000ea60: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
-0000ea70: 2054 7275 6520 6966 2076 6572 7369 6f6e   True if version
-0000ea80: 2069 7320 636f 6e74 6169 6e65 6420 7769   is contained wi
-0000ea90: 7468 696e 2074 6869 7320 7665 7273 696f  thin this versio
-0000eaa0: 6e20 7261 6e67 650a 0a20 2020 2020 2020  n range..       
-0000eab0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
-0000eac0: 2020 2076 6572 7369 6f6e 3a20 6120 7665     version: a ve
-0000ead0: 7273 696f 6e20 6964 2c20 7768 6572 6520  rsion id, where 
-0000eae0: 7665 7273 696f 6e20 6964 2069 7320 6060  version id is ``
-0000eaf0: 696e 7428 6d61 6a6f 722e 6d69 6e6f 7220  int(major.minor 
-0000eb00: 2a20 3130 3030 2960 600a 0a20 2020 2020  * 1000)``..     
-0000eb10: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-0000eb20: 2020 2020 2020 2020 5472 7565 2069 6620          True if 
-0000eb30: 2a76 6572 7369 6f6e 2a20 6973 2077 6974  *version* is wit
-0000eb40: 6869 6e20 7468 6973 2072 616e 6765 0a0a  hin this range..
-0000eb50: 2020 2020 2020 2020 4578 616d 706c 650a          Example.
-0000eb60: 2020 2020 2020 2020 2d2d 2d2d 2d2d 2d0a          -------.
-0000eb70: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-0000eb80: 2076 203d 205f 5665 7273 696f 6e52 616e   v = _VersionRan
-0000eb90: 6765 286d 696e 7665 7273 696f 6e3d 3631  ge(minversion=61
-0000eba0: 3830 2c20 6d61 7876 6572 7369 6f6e 3d37  80, maxversion=7
-0000ebb0: 3030 302c 2069 6e63 6c75 6465 6d69 6e3d  000, includemin=
-0000ebc0: 5472 7565 2c20 696e 636c 7564 656d 6178  True, includemax
-0000ebd0: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
-0000ebe0: 2020 2020 3e3e 3e20 762e 636f 6e74 6169      >>> v.contai
-0000ebf0: 6e73 2836 3139 3029 0a20 2020 2020 2020  ns(6190).       
-0000ec00: 2020 2020 2054 7275 650a 2020 2020 2020       True.      
-0000ec10: 2020 2020 2020 3e3e 3e20 762e 636f 6e74        >>> v.cont
-0000ec20: 6169 6e73 2837 3030 3029 0a20 2020 2020  ains(7000).     
-0000ec30: 2020 2020 2020 2046 616c 7365 0a20 2020         False.   
-0000ec40: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0000ec50: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-0000ec60: 6365 2876 6572 7369 6f6e 6964 2c20 696e  ce(versionid, in
-0000ec70: 7429 206f 7220 7665 7273 696f 6e69 6420  t) or versionid 
-0000ec80: 3c20 3630 3030 3a0a 2020 2020 2020 2020  < 6000:.        
-0000ec90: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
-0000eca0: 7272 6f72 2866 2249 6e76 616c 6964 2076  rror(f"Invalid v
-0000ecb0: 6572 7369 6f6e 6964 2c20 676f 7420 7b76  ersionid, got {v
-0000ecc0: 6572 7369 6f6e 6964 7d22 290a 2020 2020  ersionid}").    
-0000ecd0: 2020 2020 6120 3d20 7665 7273 696f 6e69      a = versioni
-0000ece0: 6420 3e20 7365 6c66 2e6d 696e 7665 7273  d > self.minvers
-0000ecf0: 696f 6e20 6966 206e 6f74 2073 656c 662e  ion if not self.
-0000ed00: 696e 636c 7564 656d 696e 2065 6c73 6520  includemin else 
-0000ed10: 7665 7273 696f 6e69 6420 3e3d 2073 656c  versionid >= sel
-0000ed20: 662e 6d69 6e76 6572 7369 6f6e 0a20 2020  f.minversion.   
-0000ed30: 2020 2020 206d 6178 7665 7273 696f 6e20       maxversion 
-0000ed40: 3d20 7365 6c66 2e6d 6178 7665 7273 696f  = self.maxversio
-0000ed50: 6e20 6f72 2039 3939 3939 0a20 2020 2020  n or 99999.     
-0000ed60: 2020 2062 203d 2076 6572 7369 6f6e 6964     b = versionid
-0000ed70: 203c 206d 6178 7665 7273 696f 6e20 6966   < maxversion if
-0000ed80: 206e 6f74 2073 656c 662e 696e 636c 7564   not self.includ
-0000ed90: 656d 6178 2065 6c73 6520 7665 7273 696f  emax else versio
-0000eda0: 6e69 6420 3c3d 206d 6178 7665 7273 696f  nid <= maxversio
-0000edb0: 6e0a 2020 2020 2020 2020 7265 7475 726e  n.        return
-0000edc0: 2061 2061 6e64 2062 0a0a 0a64 6566 205f   a and b...def _
-0000edd0: 7465 726d 7369 7a65 2877 6964 7468 3d38  termsize(width=8
-0000ede0: 302c 2068 6569 6768 743d 3235 2920 2d3e  0, height=25) ->
-0000edf0: 2074 7570 6c65 5b69 6e74 2c20 696e 745d   tuple[int, int]
-0000ee00: 3a0a 2020 2020 6966 206e 6f74 2073 7973  :.    if not sys
-0000ee10: 2e73 7464 6f75 742e 6973 6174 7479 2829  .stdout.isatty()
-0000ee20: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0000ee30: 2077 6964 7468 2c20 6865 6967 6874 0a0a   width, height..
-0000ee40: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0000ee50: 2074 203d 206f 732e 6765 745f 7465 726d   t = os.get_term
-0000ee60: 696e 616c 5f73 697a 6528 290a 2020 2020  inal_size().    
-0000ee70: 2020 2020 7265 7475 726e 2074 2e63 6f6c      return t.col
-0000ee80: 756d 6e73 2c20 742e 6c69 6e65 730a 2020  umns, t.lines.  
-0000ee90: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-0000eea0: 2020 7265 7475 726e 2077 6964 7468 2c20    return width, 
-0000eeb0: 6865 6967 6874 0a0a 0a64 6566 205f 7665  height...def _ve
-0000eec0: 7273 696f 6e5f 746f 5f76 6572 7369 6f6e  rsion_to_version
-0000eed0: 6964 2876 6572 7369 6f6e 7374 723a 2073  id(versionstr: s
-0000eee0: 7472 2920 2d3e 2069 6e74 3a0a 2020 2020  tr) -> int:.    
-0000eef0: 6966 2027 2e27 206e 6f74 2069 6e20 7665  if '.' not in ve
-0000ef00: 7273 696f 6e73 7472 3a0a 2020 2020 2020  rsionstr:.      
-0000ef10: 2020 7265 7475 726e 2069 6e74 2876 6572    return int(ver
-0000ef20: 7369 6f6e 7374 7229 0a20 2020 206d 616a  sionstr).    maj
-0000ef30: 6f72 732c 206d 696e 6f72 7320 3d20 7665  ors, minors = ve
-0000ef40: 7273 696f 6e73 7472 2e73 706c 6974 2827  rsionstr.split('
-0000ef50: 2e27 2c20 6d61 7873 706c 6974 3d31 290a  .', maxsplit=1).
-0000ef60: 2020 2020 7061 7463 6820 3d20 300a 2020      patch = 0.  
-0000ef70: 2020 6966 2027 2e27 2069 6e20 6d69 6e6f    if '.' in mino
-0000ef80: 7273 3a0a 2020 2020 2020 2020 6d69 6e6f  rs:.        mino
-0000ef90: 7273 2c20 7061 7463 6873 203d 206d 696e  rs, patchs = min
-0000efa0: 6f72 732e 7370 6c69 7428 272e 272c 206d  ors.split('.', m
-0000efb0: 6178 7370 6c69 743d 3129 0a20 2020 2020  axsplit=1).     
-0000efc0: 2020 2070 6174 6368 203d 2069 6e74 2870     patch = int(p
-0000efd0: 6174 6368 7329 0a20 2020 2020 2020 2061  atchs).        a
-0000efe0: 7373 6572 7420 3020 3c3d 2070 6174 6368  ssert 0 <= patch
-0000eff0: 203c 2031 300a 2020 2020 7665 7273 696f   < 10.    versio
-0000f000: 6e69 6420 3d20 696e 7428 6d61 6a6f 7273  nid = int(majors
-0000f010: 2920 2a20 3130 3030 202b 2069 6e74 286d  ) * 1000 + int(m
-0000f020: 696e 6f72 7329 202a 2031 3020 2b20 7061  inors) * 10 + pa
-0000f030: 7463 680a 2020 2020 7265 7475 726e 2076  tch.    return v
-0000f040: 6572 7369 6f6e 6964 0a0a 0a64 6566 205f  ersionid...def _
-0000f050: 7061 7273 655f 7665 7273 696f 6e28 7665  parse_version(ve
-0000f060: 7273 696f 6e73 7472 3a20 7374 7229 202d  rsionstr: str) -
-0000f070: 3e20 5f56 6572 7369 6f6e 5261 6e67 653a  > _VersionRange:
-0000f080: 0a20 2020 2076 6572 7369 6f6e 7374 7220  .    versionstr 
-0000f090: 3d20 7665 7273 696f 6e73 7472 2e72 6570  = versionstr.rep
-0000f0a0: 6c61 6365 2827 2027 2c20 2727 290a 2020  lace(' ', '').  
-0000f0b0: 2020 6966 2076 6572 7369 6f6e 7374 722e    if versionstr.
-0000f0c0: 7374 6172 7473 7769 7468 2822 3d3d 2229  startswith("==")
-0000f0d0: 3a0a 2020 2020 2020 2020 6578 6163 7476  :.        exactv
-0000f0e0: 6572 7369 6f6e 7374 7220 3d20 7665 7273  ersionstr = vers
-0000f0f0: 696f 6e73 7472 5b32 3a5d 0a20 2020 2020  ionstr[2:].     
-0000f100: 2020 2076 6572 7369 6f6e 6964 203d 205f     versionid = _
-0000f110: 7665 7273 696f 6e5f 746f 5f76 6572 7369  version_to_versi
-0000f120: 6f6e 6964 2865 7861 6374 7665 7273 696f  onid(exactversio
-0000f130: 6e73 7472 290a 2020 2020 2020 2020 7265  nstr).        re
-0000f140: 7475 726e 205f 5665 7273 696f 6e52 616e  turn _VersionRan
-0000f150: 6765 286d 696e 7665 7273 696f 6e3d 7665  ge(minversion=ve
-0000f160: 7273 696f 6e69 642c 206d 6178 7665 7273  rsionid, maxvers
-0000f170: 696f 6e3d 7665 7273 696f 6e69 642c 2069  ion=versionid, i
-0000f180: 6e63 6c75 6465 6d69 6e3d 5472 7565 2c20  ncludemin=True, 
-0000f190: 696e 636c 7564 656d 6178 3d54 7275 6529  includemax=True)
-0000f1a0: 0a0a 2020 2020 7061 7274 7320 3d20 7265  ..    parts = re
-0000f1b0: 2e73 706c 6974 2872 2228 3e3d 7c3c 3d7c  .split(r"(>=|<=|
-0000f1c0: 3e7c 3c29 222c 2076 6572 7369 6f6e 7374  >|<)", versionst
-0000f1d0: 7229 0a20 2020 2070 6172 7473 203d 205b  r).    parts = [
-0000f1e0: 7020 666f 7220 7020 696e 2070 6172 7473  p for p in parts
-0000f1f0: 2069 6620 705d 0a20 2020 2069 6620 6c65   if p].    if le
-0000f200: 6e28 7061 7274 7329 2025 2032 2021 3d20  n(parts) % 2 != 
-0000f210: 303a 0a20 2020 2020 2020 2072 6169 7365  0:.        raise
-0000f220: 2050 6172 7365 4572 726f 7228 6622 436f   ParseError(f"Co
-0000f230: 756c 6420 6e6f 7420 7061 7273 6520 7665  uld not parse ve
-0000f240: 7273 696f 6e20 7261 6e67 653a 207b 7665  rsion range: {ve
-0000f250: 7273 696f 6e73 7472 7d2c 2070 6172 7473  rsionstr}, parts
-0000f260: 3a20 7b70 6172 7473 7d22 290a 2020 2020  : {parts}").    
-0000f270: 6d69 6e76 6572 7369 6f6e 203d 2036 3030  minversion = 600
-0000f280: 300a 2020 2020 6d61 7876 6572 7369 6f6e  0.    maxversion
-0000f290: 203d 2039 3939 390a 2020 2020 696e 636c   = 9999.    incl
-0000f2a0: 7564 656d 6178 203d 2046 616c 7365 0a20  udemax = False. 
-0000f2b0: 2020 2069 6e63 6c75 6465 6d69 6e20 3d20     includemin = 
-0000f2c0: 4661 6c73 650a 2020 2020 666f 7220 6f70  False.    for op
-0000f2d0: 2c20 7665 7273 696f 6e20 696e 207a 6970  , version in zip
-0000f2e0: 2870 6172 7473 5b3a 3a32 5d2c 2070 6172  (parts[::2], par
-0000f2f0: 7473 5b31 3a3a 325d 293a 0a20 2020 2020  ts[1::2]):.     
-0000f300: 2020 2061 7373 6572 7420 6f70 2069 6e20     assert op in 
-0000f310: 2827 3c27 2c20 273e 272c 2027 3c3d 272c  ('<', '>', '<=',
-0000f320: 2027 3e3d 2729 0a20 2020 2020 2020 2069   '>=').        i
-0000f330: 6620 6f70 5b30 5d20 3d3d 2027 3c27 3a0a  f op[0] == '<':.
-0000f340: 2020 2020 2020 2020 2020 2020 6d61 7876              maxv
-0000f350: 6572 7369 6f6e 203d 205f 7665 7273 696f  ersion = _versio
-0000f360: 6e5f 746f 5f76 6572 7369 6f6e 6964 2876  n_to_versionid(v
-0000f370: 6572 7369 6f6e 290a 2020 2020 2020 2020  ersion).        
-0000f380: 2020 2020 6966 206f 705b 2d31 5d20 3d3d      if op[-1] ==
-0000f390: 2027 3d27 3a0a 2020 2020 2020 2020 2020   '=':.          
-0000f3a0: 2020 2020 2020 696e 636c 7564 656d 6178        includemax
-0000f3b0: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
-0000f3c0: 656c 6966 206f 705b 305d 203d 3d20 273e  elif op[0] == '>
-0000f3d0: 273a 0a20 2020 2020 2020 2020 2020 206d  ':.            m
-0000f3e0: 696e 7665 7273 696f 6e20 3d20 5f76 6572  inversion = _ver
-0000f3f0: 7369 6f6e 5f74 6f5f 7665 7273 696f 6e69  sion_to_versioni
-0000f400: 6428 7665 7273 696f 6e29 0a20 2020 2020  d(version).     
-0000f410: 2020 2020 2020 2069 6620 6f70 5b2d 315d         if op[-1]
-0000f420: 203d 3d20 273d 273a 0a20 2020 2020 2020   == '=':.       
-0000f430: 2020 2020 2020 2020 2069 6e63 6c75 6465           include
-0000f440: 6d69 6e20 3d20 5472 7565 0a20 2020 2020  min = True.     
-0000f450: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0000f460: 2020 2020 2072 6169 7365 2050 6172 7365       raise Parse
-0000f470: 4572 726f 7228 6622 436f 756c 6420 6e6f  Error(f"Could no
-0000f480: 7420 7061 7273 6520 7665 7273 696f 6e20  t parse version 
-0000f490: 7261 6e67 653a 207b 7665 7273 696f 6e73  range: {versions
-0000f4a0: 7472 7d2c 206f 7065 7261 746f 7220 7b6f  tr}, operator {o
-0000f4b0: 707d 206e 6f74 2073 7570 706f 7274 6564  p} not supported
-0000f4c0: 2229 0a20 2020 2072 6574 7572 6e20 5f56  ").    return _V
-0000f4d0: 6572 7369 6f6e 5261 6e67 6528 6d69 6e76  ersionRange(minv
-0000f4e0: 6572 7369 6f6e 3d6d 696e 7665 7273 696f  ersion=minversio
-0000f4f0: 6e2c 206d 6178 7665 7273 696f 6e3d 6d61  n, maxversion=ma
-0000f500: 7876 6572 7369 6f6e 2c20 696e 636c 7564  xversion, includ
-0000f510: 656d 696e 3d69 6e63 6c75 6465 6d69 6e2c  emin=includemin,
-0000f520: 2069 6e63 6c75 6465 6d61 783d 696e 636c   includemax=incl
-0000f530: 7564 656d 6178 290a 0a0a 6465 6620 5f61  udemax)...def _a
-0000f540: 6262 7265 7628 733a 2073 7472 2c20 6d61  bbrev(s: str, ma
-0000f550: 786c 656e 3a20 696e 7429 202d 3e20 7374  xlen: int) -> st
-0000f560: 723a 0a20 2020 2022 2222 4162 6272 6576  r:.    """Abbrev
-0000f570: 6961 7465 2073 7472 696e 6722 2222 0a20  iate string""". 
-0000f580: 2020 2061 7373 6572 7420 6d61 786c 656e     assert maxlen
-0000f590: 203e 2031 380a 2020 2020 6c20 3d20 6c65   > 18.    l = le
-0000f5a0: 6e28 7329 0a20 2020 2069 6620 6c20 3c20  n(s).    if l < 
-0000f5b0: 6d61 786c 656e 3a0a 2020 2020 2020 2020  maxlen:.        
-0000f5c0: 7265 7475 726e 2073 0a20 2020 2072 6967  return s.    rig
-0000f5d0: 6874 6c65 6e20 3d20 6d69 6e28 382c 206c  htlen = min(8, l
-0000f5e0: 202f 2f20 3529 0a20 2020 2072 6574 7572   // 5).    retur
-0000f5f0: 6e20 6622 7b73 5b3a 6c20 2d20 7269 6768  n f"{s[:l - righ
-0000f600: 746c 656e 202d 2031 5d7d e280 a67b 735b  tlen - 1]}...{s[
-0000f610: 2d72 6967 6874 6c65 6e3a 5d7d 220a 0a0a  -rightlen:]}"...
-0000f620: 6465 6620 5f6d 6169 6e69 6e64 6578 5f72  def _mainindex_r
-0000f630: 6574 7269 6576 6528 6461 7973 5f74 6872  etrieve(days_thr
-0000f640: 6573 686f 6c64 3d31 3029 202d 3e20 4f70  eshold=10) -> Op
-0000f650: 7469 6f6e 616c 5b4d 6169 6e49 6e64 6578  tional[MainIndex
-0000f660: 5d3a 0a20 2020 2022 2222 0a20 2020 2054  ]:.    """.    T
-0000f670: 7279 2074 6f20 7265 7472 6965 7665 2061  ry to retrieve a
-0000f680: 2070 7265 7669 6f75 736c 7920 7069 636b   previously pick
-0000f690: 6c65 6420 6d61 696e 696e 6465 780a 2020  led mainindex.  
-0000f6a0: 2020 2222 220a 2020 2020 7069 636b 6c65    """.    pickle
-0000f6b0: 6669 6c65 203d 205f 4d41 494e 494e 4445  file = _MAININDE
-0000f6c0: 585f 5049 434b 4c45 5f46 494c 450a 2020  X_PICKLE_FILE.  
-0000f6d0: 2020 6966 206e 6f74 2070 6963 6b6c 6566    if not picklef
-0000f6e0: 696c 652e 6578 6973 7473 2829 3a0a 2020  ile.exists():.  
-0000f6f0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-0000f700: 650a 2020 2020 696d 706f 7274 2074 696d  e.    import tim
-0000f710: 650a 2020 2020 696d 706f 7274 2070 6963  e.    import pic
-0000f720: 6b6c 650a 2020 2020 6461 7973 5f73 696e  kle.    days_sin
-0000f730: 6365 5f6c 6173 745f 6d6f 6469 6669 6361  ce_last_modifica
-0000f740: 7469 6f6e 203d 2028 7069 636b 6c65 6669  tion = (picklefi
-0000f750: 6c65 2e73 7461 7428 292e 7374 5f6d 7469  le.stat().st_mti
-0000f760: 6d65 202d 2074 696d 652e 7469 6d65 2829  me - time.time()
-0000f770: 2920 2f20 3836 3430 300a 2020 2020 6966  ) / 86400.    if
-0000f780: 2064 6179 735f 7369 6e63 655f 6c61 7374   days_since_last
-0000f790: 5f6d 6f64 6966 6963 6174 696f 6e20 3e20  _modification > 
-0000f7a0: 6461 7973 5f74 6872 6573 686f 6c64 3a0a  days_threshold:.
-0000f7b0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-0000f7c0: 6f6e 650a 2020 2020 5f64 6562 7567 2822  one.    _debug("
-0000f7d0: 5265 6372 6561 7469 6e67 206d 6169 6e20  Recreating main 
-0000f7e0: 696e 6465 7820 6672 6f6d 2070 6963 6b6c  index from pickl
-0000f7f0: 6564 2076 6572 7369 6f6e 2229 0a20 2020  ed version").   
-0000f800: 2066 203d 206f 7065 6e28 7069 636b 6c65   f = open(pickle
-0000f810: 6669 6c65 2c20 2272 6222 290a 2020 2020  file, "rb").    
-0000f820: 7472 793a 0a20 2020 2020 2020 2072 6574  try:.        ret
-0000f830: 7572 6e20 7069 636b 6c65 2e6c 6f61 6428  urn pickle.load(
-0000f840: 6629 0a20 2020 2065 7863 6570 7420 4578  f).    except Ex
-0000f850: 6365 7074 696f 6e20 6173 2065 3a0a 2020  ception as e:.  
-0000f860: 2020 2020 2020 5f65 7272 6f72 6d73 6728        _errormsg(
-0000f870: 6622 436f 756c 6420 6e6f 7420 7265 7472  f"Could not retr
-0000f880: 6965 7665 206d 6169 6e69 6e64 6578 2066  ieve mainindex f
-0000f890: 726f 6d20 7365 7269 616c 697a 6564 2066  rom serialized f
-0000f8a0: 696c 653a 207b 657d 2229 0a20 2020 2020  ile: {e}").     
-0000f8b0: 2020 205f 6465 6275 6728 6622 5365 7269     _debug(f"Seri
-0000f8c0: 616c 697a 6564 2066 696c 6520 287b 7069  alized file ({pi
-0000f8d0: 636b 6c65 6669 6c65 7d29 2072 656d 6f76  cklefile}) remov
-0000f8e0: 6564 2229 0a20 2020 2020 2020 206f 732e  ed").        os.
-0000f8f0: 7265 6d6f 7665 2870 6963 6b6c 6566 696c  remove(picklefil
-0000f900: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
-0000f910: 6e20 4e6f 6e65 0a0a 0a64 6566 205f 6973  n None...def _is
-0000f920: 5f67 6974 5f72 6570 6f28 7061 7468 3a20  _git_repo(path: 
-0000f930: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
-0000f940: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2022  ) -> bool:.    "
-0000f950: 2222 0a20 2020 2049 6620 6070 6174 6860  "".    If `path`
-0000f960: 2061 2076 616c 6964 2067 6974 2072 6570   a valid git rep
-0000f970: 6f3f 0a20 2020 2022 2222 0a20 2020 2023  o?.    """.    #
-0000f980: 2076 6961 2068 7474 7073 3a2f 2f72 656d   via https://rem
-0000f990: 6172 6b61 626c 656d 6172 6b2e 6f72 672f  arkablemark.org/
-0000f9a0: 626c 6f67 2f32 3032 302f 3036 2f30 352f  blog/2020/06/05/
-0000f9b0: 6368 6563 6b2d 6769 742d 7265 706f 7369  check-git-reposi
-0000f9c0: 746f 7279 2f0a 2020 2020 6966 2069 7369  tory/.    if isi
-0000f9d0: 6e73 7461 6e63 6528 7061 7468 2c20 5061  nstance(path, Pa
-0000f9e0: 7468 293a 0a20 2020 2020 2020 2070 6174  th):.        pat
-0000f9f0: 6820 3d20 7061 7468 2e61 735f 706f 7369  h = path.as_posi
-0000fa00: 7828 290a 2020 2020 6f75 7420 3d20 7375  x().    out = su
-0000fa10: 6270 726f 6365 7373 2e63 6865 636b 5f6f  bprocess.check_o
-0000fa20: 7574 7075 7428 5b22 6769 7422 2c20 222d  utput(["git", "-
-0000fa30: 4322 2c20 7061 7468 2c20 2272 6576 2d70  C", path, "rev-p
-0000fa40: 6172 7365 222c 2022 2d2d 6973 2d69 6e73  arse", "--is-ins
-0000fa50: 6964 652d 776f 726b 2d74 7265 6522 5d29  ide-work-tree"])
-0000fa60: 2e64 6563 6f64 6528 2275 7466 2d38 2229  .decode("utf-8")
-0000fa70: 2e73 7472 6970 2829 0a20 2020 2072 6574  .strip().    ret
-0000fa80: 7572 6e20 6f75 7420 3d3d 2022 7472 7565  urn out == "true
-0000fa90: 220a 0a0a 6465 6620 5f67 6974 5f72 6570  "...def _git_rep
-0000faa0: 6f6e 616d 6528 7572 6c3a 2073 7472 2920  oname(url: str) 
-0000fab0: 2d3e 2073 7472 3a0a 2020 2020 2222 220a  -> str:.    """.
-0000fac0: 2020 2020 5265 7475 726e 7320 7468 6520      Returns the 
-0000fad0: 6e61 6d65 2066 6f20 7468 6520 6769 7420  name fo the git 
-0000fae0: 7265 706f 7369 746f 7279 2067 6976 656e  repository given
-0000faf0: 2061 7320 7572 6c0a 0a20 2020 203d 3d3d   as url..    ===
-0000fb00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000fb10: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000fb20: 3d3d 3d3d 2020 3d3d 3d3d 3d3d 3d0a 2020  ====  =======.  
-0000fb30: 2020 7572 6c20 2020 2020 2020 2020 2020    url           
-0000fb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fb50: 2020 2020 2020 2020 2020 206e 616d 650a             name.
-0000fb60: 2020 2020 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d      ============
-0000fb70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000fb80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 203d 3d3d  ===========  ===
-0000fb90: 3d3d 3d3d 0a20 2020 2068 7474 7073 3a2f  ====.    https:/
-0000fba0: 2f67 6974 6875 622e 636f 6d2f 7573 6572  /github.com/user
-0000fbb0: 2f66 6f6f 2e67 6974 2020 2020 2020 2020  /foo.git        
-0000fbc0: 2020 666f 6f0a 2020 2020 6874 7470 733a    foo.    https:
-0000fbd0: 2f2f 6769 746c 6162 2e63 6f6d 2f62 617a  //gitlab.com/baz
-0000fbe0: 2f62 6172 2e67 6974 2020 2020 2020 2020  /bar.git        
-0000fbf0: 2020 2062 6172 0a20 2020 203d 3d3d 3d3d     bar.    =====
-0000fc00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000fc10: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0000fc20: 3d3d 2020 3d3d 3d3d 3d3d 3d0a 2020 2020  ==  =======.    
-0000fc30: 2222 220a 2020 2020 7061 7274 7320 3d20  """.    parts = 
-0000fc40: 7572 6c2e 7370 6c69 7428 222f 2229 0a20  url.split("/"). 
-0000fc50: 2020 2069 6620 6e6f 7420 7061 7274 735b     if not parts[
-0000fc60: 2d31 5d2e 656e 6473 7769 7468 2822 2e67  -1].endswith(".g
-0000fc70: 6974 2229 3a0a 2020 2020 2020 2020 7261  it"):.        ra
-0000fc80: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
-0000fc90: 2241 2067 6974 2075 726c 2073 686f 756c  "A git url shoul
-0000fca0: 6420 616c 7761 7973 2065 6e64 2069 6e20  d always end in 
-0000fcb0: 272e 6769 7427 3a20 7b75 726c 7d22 290a  '.git': {url}").
-0000fcc0: 2020 2020 7265 7475 726e 2070 6172 7473      return parts
-0000fcd0: 5b2d 315d 2e72 7370 6c69 7428 222e 222c  [-1].rsplit(".",
-0000fce0: 206d 6178 7370 6c69 743d 3129 5b30 5d0a   maxsplit=1)[0].
-0000fcf0: 0a0a 6465 6620 5f69 735f 6769 745f 7572  ..def _is_git_ur
-0000fd00: 6c28 7572 6c3a 2073 7472 2920 2d3e 2062  l(url: str) -> b
-0000fd10: 6f6f 6c3a 0a20 2020 2022 2222 0a20 2020  ool:.    """.   
-0000fd20: 2049 7320 6075 726c 6020 616e 2075 726c   Is `url` an url
-0000fd30: 2074 6f20 6120 6769 7420 7265 706f 3f0a   to a git repo?.
-0000fd40: 2020 2020 2222 220a 2020 2020 7265 7475      """.    retu
-0000fd50: 726e 205f 6973 5f75 726c 2875 726c 2920  rn _is_url(url) 
-0000fd60: 616e 6420 7572 6c2e 656e 6473 7769 7468  and url.endswith
-0000fd70: 2822 2e67 6974 2229 0a0a 0a64 6566 205f  (".git")...def _
-0000fd80: 6465 6275 6728 2a6d 7367 732c 206c 6a75  debug(*msgs, lju
-0000fd90: 7374 3d32 3029 202d 3e20 4e6f 6e65 3a0a  st=20) -> None:.
-0000fda0: 2020 2020 2222 2220 5072 696e 7420 6465      """ Print de
-0000fdb0: 6275 6720 696e 666f 206f 6e6c 7920 6966  bug info only if
-0000fdc0: 2064 6562 7567 6769 6e67 2069 7320 7475   debugging is tu
-0000fdd0: 726e 6564 206f 6e20 2222 220a 2020 2020  rned on """.    
-0000fde0: 6966 205f 7365 7373 696f 6e2e 6465 6275  if _session.debu
-0000fdf0: 673a 0a20 2020 2020 2020 2063 616c 6c65  g:.        calle
-0000fe00: 7220 3d20 5f61 6262 7265 7628 5f69 6e73  r = _abbrev(_ins
-0000fe10: 7065 6374 2e73 7461 636b 2829 5b31 5d5b  pect.stack()[1][
-0000fe20: 335d 2c20 6c6a 7573 7429 0a20 2020 2020  3], ljust).     
-0000fe30: 2020 2070 7269 6e74 2866 2244 4542 5547     print(f"DEBUG
-0000fe40: 3a7b 6361 6c6c 6572 2e6c 6a75 7374 286c  :{caller.ljust(l
-0000fe50: 6a75 7374 297d 3a22 2c20 2a6d 7367 732c  just)}:", *msgs,
-0000fe60: 2066 696c 653d 7379 732e 7374 6465 7272   file=sys.stderr
-0000fe70: 290a 0a0a 6465 6620 5f65 7272 6f72 6d73  )...def _errorms
-0000fe80: 6728 6d73 673a 2073 7472 2920 2d3e 204e  g(msg: str) -> N
-0000fe90: 6f6e 653a 0a20 2020 2022 2222 2050 7269  one:.    """ Pri
-0000fea0: 6e74 2065 7272 6f72 206d 6573 7361 6765  nt error message
-0000feb0: 2022 2222 0a20 2020 206c 696e 6573 203d   """.    lines =
-0000fec0: 206d 7367 2e73 706c 6974 6c69 6e65 7328   msg.splitlines(
-0000fed0: 290a 2020 2020 7072 696e 7428 222a 2a20  ).    print("** 
-0000fee0: 4572 726f 723a 222c 206c 696e 6573 5b30  Error:", lines[0
-0000fef0: 5d2c 2066 696c 653d 7379 732e 7374 6465  ], file=sys.stde
-0000ff00: 7272 290a 2020 2020 666f 7220 6c69 6e65  rr).    for line
-0000ff10: 2069 6e20 6c69 6e65 735b 313a 5d3a 0a20   in lines[1:]:. 
-0000ff20: 2020 2020 2020 2070 7269 6e74 2822 2020         print("  
-0000ff30: 2020 2020 2020 2022 2c20 6c69 6e65 2c20         ", line, 
-0000ff40: 6669 6c65 3d73 7973 2e73 7464 6572 7229  file=sys.stderr)
-0000ff50: 0a0a 0a64 6566 205f 696e 666f 282a 6d73  ...def _info(*ms
-0000ff60: 6773 3a20 7374 7229 202d 3e20 4e6f 6e65  gs: str) -> None
-0000ff70: 3a0a 2020 2020 7072 696e 7428 2a6d 7367  :.    print(*msg
-0000ff80: 7329 0a0a 0a63 6c61 7373 2045 7272 6f72  s)...class Error
-0000ff90: 4d73 6728 7374 7229 3a0a 2020 2020 7061  Msg(str):.    pa
-0000ffa0: 7373 0a0a 0a40 6461 7461 636c 6173 730a  ss...@dataclass.
-0000ffb0: 636c 6173 7320 4173 7365 743a 0a20 2020  class Asset:.   
-0000ffc0: 2022 2222 0a20 2020 2041 6e20 4173 7365   """.    An Asse
-0000ffd0: 7420 6465 7363 7269 6265 7320 616e 7920  t describes any 
-0000ffe0: 6669 6c65 2f66 696c 6573 2064 6973 7472  file/files distr
-0000fff0: 6962 7574 6564 2061 6c6f 6e67 7369 6465  ibuted alongside
-00010000: 2061 2070 6c75 6769 6e0a 0a20 2020 2054   a plugin..    T
-00010010: 6865 2075 7365 2063 6173 6520 6973 2066  he use case is f
-00010020: 6f72 2064 6174 6120 6669 6c65 7320 7768  or data files wh
-00010030: 6963 6820 6172 6520 6e65 6564 6564 2062  ich are needed b
-00010040: 7920 6120 706c 7567 696e 2061 7420 7275  y a plugin at ru
-00010050: 6e74 696d 650a 0a20 2020 2041 7474 7269  ntime..    Attri
-00010060: 6273 3a0a 2020 2020 2020 2020 736f 7572  bs:.        sour
-00010070: 6365 3a20 7468 6520 736f 7572 6365 2077  ce: the source w
-00010080: 6865 7265 2074 6f20 6765 7420 7468 6520  here to get the 
-00010090: 6173 7365 7473 2066 726f 6d2e 2049 7420  assets from. It 
-000100a0: 6361 6e20 6265 2061 2075 726c 2074 6f20  can be a url to 
-000100b0: 6120 6769 7420 7265 706f 7369 746f 7279  a git repository
-000100c0: 2c0a 2020 2020 2020 2020 2020 2020 7468  ,.            th
-000100d0: 6520 6469 7265 6374 2075 726c 2074 6f20  e direct url to 
-000100e0: 6120 646f 776e 6c6f 6164 6162 6c65 2066  a downloadable f
-000100f0: 696c 652f 7a69 7020 6669 6c65 206f 7220  ile/zip file or 
-00010100: 7468 6520 7061 7468 2074 6f20 6120 6c6f  the path to a lo
-00010110: 6361 6c0a 2020 2020 2020 2020 2020 2020  cal.            
-00010120: 666f 6c64 6572 0a20 2020 2020 2020 2070  folder.        p
-00010130: 6174 7465 726e 733a 2074 6865 2070 6174  atterns: the pat
-00010140: 6873 2074 6f20 6578 7472 6163 7420 6672  hs to extract fr
-00010150: 6f6d 2074 6865 2073 6f75 7263 6520 2869  om the source (i
-00010160: 6620 6e65 6564 6564 292e 2045 6163 6820  f needed). Each 
-00010170: 6974 656d 2063 616e 2062 6520 6569 7468  item can be eith
-00010180: 6572 0a20 2020 2020 2020 2020 2020 2061  er.            a
-00010190: 2070 6174 6820 7265 6c61 7469 7665 2074   path relative t
-000101a0: 6f20 7468 6520 726f 6f74 206f 6620 7468  o the root of th
-000101b0: 6520 6769 7420 6f72 207a 6970 2066 696c  e git or zip fil
-000101c0: 652c 206f 7220 6120 676c 6f62 2070 6174  e, or a glob pat
-000101d0: 7465 726e 2e20 496e 2074 6865 0a20 2020  tern. In the.   
-000101e0: 2020 2020 2020 2020 2063 6173 6520 7768           case wh
-000101f0: 6572 6520 7468 6520 7572 6c20 706f 696e  ere the url poin
-00010200: 7473 2074 6f20 6120 636f 6e63 7265 7465  ts to a concrete
-00010210: 2066 696c 6520 286e 6f74 2061 207a 6970   file (not a zip
-00010220: 206f 7220 6120 6769 7420 7265 706f 292c   or a git repo),
-00010230: 2074 6869 730a 2020 2020 2020 2020 2020   this.          
-00010240: 2020 6174 7472 6962 7574 6573 2073 686f    attributes sho
-00010250: 756c 6420 6265 2065 6d70 7479 0a20 2020  uld be empty.   
-00010260: 2020 2020 2070 6c61 7466 6f72 6d3a 2069       platform: i
-00010270: 6620 6769 7665 6e2c 2074 6865 2070 6c61  f given, the pla
-00010280: 7466 6f72 6d20 666f 7220 7768 6963 6820  tform for which 
-00010290: 7468 6973 2061 7373 6574 7320 6172 6520  this assets are 
-000102a0: 7661 6c69 6420 2869 6e20 7468 6520 6361  valid (in the ca
-000102b0: 7365 0a20 2020 2020 2020 2020 2020 206f  se.            o
-000102c0: 6620 6269 6e61 7269 6573 206f 6620 736f  f binaries of so
-000102d0: 6d65 206b 696e 6429 0a20 2020 2020 2020  me kind).       
-000102e0: 206e 616d 653a 2074 6865 206e 616d 6520   name: the name 
-000102f0: 6f66 2074 6865 2061 7373 6574 2028 6f70  of the asset (op
-00010300: 7469 6f6e 616c 290a 2020 2020 2222 220a  tional).    """.
-00010310: 2020 2020 736f 7572 6365 3a20 7374 720a      source: str.
-00010320: 2020 2020 2222 2274 6865 2075 726c 2077      """the url w
-00010330: 6865 7265 2074 6f20 646f 776e 6c6f 6164  here to download
-00010340: 2074 6865 2061 7373 6574 7320 6672 6f6d   the assets from
-00010350: 2222 220a 0a20 2020 2070 6174 7465 726e  """..    pattern
-00010360: 733a 206c 6973 745b 7374 725d 0a20 2020  s: list[str].   
-00010370: 2022 2222 7468 6520 7061 7468 7320 746f   """the paths to
-00010380: 2065 7874 7261 6374 2066 726f 6d20 7468   extract from th
-00010390: 6520 7572 6c20 2869 6620 6e65 6564 6564  e url (if needed
-000103a0: 292e 2049 7420 6361 6e20 6265 2061 2067  ). It can be a g
-000103b0: 6c6f 6220 7061 7474 6572 6e22 2222 0a0a  lob pattern"""..
-000103c0: 2020 2020 706c 6174 666f 726d 3a20 7374      platform: st
-000103d0: 7220 3d20 2761 6c6c 270a 2020 2020 2222  r = 'all'.    ""
-000103e0: 2274 6865 2070 6c61 7466 6f72 6d20 666f  "the platform fo
-000103f0: 7220 7768 6963 6820 7468 6973 2061 7373  r which this ass
-00010400: 6574 7320 6172 6520 7661 6c69 6422 2222  ets are valid"""
-00010410: 0a0a 2020 2020 6e61 6d65 3a20 7374 7220  ..    name: str 
-00010420: 3d20 2727 0a0a 2020 2020 6465 6620 5f5f  = ''..    def __
-00010430: 706f 7374 5f69 6e69 745f 5f28 7365 6c66  post_init__(self
-00010440: 293a 0a20 2020 2020 2020 2061 7373 6572  ):.        asser
-00010450: 7420 7365 6c66 2e73 6f75 7263 650a 0a20  t self.source.. 
-00010460: 2020 2064 6566 2069 6465 6e74 6966 6965     def identifie
-00010470: 7228 7365 6c66 2920 2d3e 2073 7472 3a0a  r(self) -> str:.
-00010480: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00010490: 6e61 6d65 3a0a 2020 2020 2020 2020 2020  name:.          
-000104a0: 2020 7265 7475 726e 2073 656c 662e 6e61    return self.na
-000104b0: 6d65 0a20 2020 2020 2020 2069 6620 7365  me.        if se
-000104c0: 6c66 2e70 6174 7465 726e 733a 0a20 2020  lf.patterns:.   
-000104d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000104e0: 6622 7b73 656c 662e 736f 7572 6365 7d3a  f"{self.source}:
-000104f0: 3a7b 272c 272e 6a6f 696e 2873 7472 2870  :{','.join(str(p
-00010500: 6174 7429 2066 6f72 2070 6174 7420 696e  att) for patt in
-00010510: 2073 656c 662e 7061 7474 6572 6e73 297d   self.patterns)}
-00010520: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
-00010530: 2073 656c 662e 736f 7572 6365 0a0a 2020   self.source..  
-00010540: 2020 6465 6620 6c6f 6361 6c5f 7061 7468    def local_path
-00010550: 2873 656c 6629 202d 3e20 5061 7468 3a0a  (self) -> Path:.
-00010560: 2020 2020 2020 2020 6173 7365 7274 2073          assert s
-00010570: 656c 662e 736f 7572 6365 0a20 2020 2020  elf.source.     
-00010580: 2020 2069 6620 5f69 735f 7572 6c28 7365     if _is_url(se
-00010590: 6c66 2e73 6f75 7263 6529 3a0a 2020 2020  lf.source):.    
-000105a0: 2020 2020 2020 2020 6966 205f 6973 5f67          if _is_g
-000105b0: 6974 5f75 726c 2873 656c 662e 736f 7572  it_url(self.sour
-000105c0: 6365 293a 0a20 2020 2020 2020 2020 2020  ce):.           
-000105d0: 2020 2020 2072 6574 7572 6e20 5f67 6974       return _git
-000105e0: 5f6c 6f63 616c 5f70 6174 6828 7365 6c66  _local_path(self
-000105f0: 2e73 6f75 7263 6529 0a20 2020 2020 2020  .source).       
-00010600: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00010610: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
-00010620: 6728 6622 446f 776e 6c6f 6164 696e 6720  g(f"Downloading 
-00010630: 7572 6c20 7b73 656c 662e 736f 7572 6365  url {self.source
-00010640: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
-00010650: 2020 2020 7265 7475 726e 205f 646f 776e      return _down
-00010660: 6c6f 6164 5f66 696c 6528 7365 6c66 2e73  load_file(self.s
-00010670: 6f75 7263 6529 0a20 2020 2020 2020 2065  ource).        e
-00010680: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00010690: 2023 2069 7420 6973 2061 2070 6174 682c   # it is a path,
-000106a0: 2063 6865 636b 2074 6861 7420 6974 2065   check that it e
-000106b0: 7869 7374 730a 2020 2020 2020 2020 2020  xists.          
-000106c0: 2020 736f 7572 6365 203d 2050 6174 6828    source = Path(
-000106d0: 7365 6c66 2e73 6f75 7263 6529 0a20 2020  self.source).   
-000106e0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-000106f0: 736f 7572 6365 2e65 7869 7374 7328 292c  source.exists(),
-00010700: 2066 2241 7373 6572 7420 736f 7572 6365   f"Assert source
-00010710: 2064 6f65 7320 6e6f 7420 6578 6973 743a   does not exist:
-00010720: 207b 736f 7572 6365 7d22 0a20 2020 2020   {source}".     
-00010730: 2020 2020 2020 2072 6574 7572 6e20 736f         return so
-00010740: 7572 6365 0a0a 2020 2020 6465 6620 7265  urce..    def re
-00010750: 7472 6965 7665 2873 656c 6629 202d 3e20  trieve(self) -> 
-00010760: 6c69 7374 5b50 6174 685d 3a0a 2020 2020  list[Path]:.    
-00010770: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00010780: 446f 776e 6c6f 6164 2061 6e64 2072 6573  Download and res
-00010790: 6f6c 7665 2061 6c6c 2066 696c 6573 2c20  olve all files, 
-000107a0: 6966 206e 6565 6465 640a 0a20 2020 2020  if needed..     
-000107b0: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-000107c0: 2020 2020 2020 2020 6120 2870 6f73 7369          a (possi
-000107d0: 626c 7920 656d 7074 7929 206c 6973 7420  bly empty) list 
-000107e0: 6f66 206c 6f63 616c 2070 6174 6873 2077  of local paths w
-000107f0: 6869 6368 2062 656c 6f6e 6720 746f 2074  hich belong to t
-00010800: 6869 7320 6173 7365 742e 0a20 2020 2020  his asset..     
-00010810: 2020 2020 2020 2049 6e20 7468 6520 6361         In the ca
-00010820: 7365 206f 6620 616e 2061 7373 6574 2072  se of an asset r
-00010830: 6566 6572 7269 6e67 2074 6f20 6120 6669  eferring to a fi
-00010840: 6c65 2077 6974 6869 6e20 6120 7a69 702c  le within a zip,
-00010850: 2074 6865 0a20 2020 2020 2020 2020 2020   the.           
-00010860: 2066 696c 6573 2061 7265 2065 7874 7261   files are extra
-00010870: 6374 6564 2074 6f20 6120 7465 6d70 2064  cted to a temp d
-00010880: 6972 2061 6e64 2061 2070 6174 6820 746f  ir and a path to
-00010890: 2074 6861 7420 7465 6d70 2064 6972 0a20   that temp dir. 
-000108a0: 2020 2020 2020 2020 2020 2069 7320 7265             is re
-000108b0: 7475 726e 6564 0a20 2020 2020 2020 2022  turned.        "
-000108c0: 2222 0a20 2020 2020 2020 2061 7373 6572  "".        asser
-000108d0: 7420 7365 6c66 2e73 6f75 7263 6520 616e  t self.source an
-000108e0: 6420 285f 6973 5f75 726c 2873 656c 662e  d (_is_url(self.
-000108f0: 736f 7572 6365 2920 6f72 206f 732e 7061  source) or os.pa
-00010900: 7468 2e69 7361 6273 2873 656c 662e 736f  th.isabs(self.so
-00010910: 7572 6365 2929 2c20 5c0a 2020 2020 2020  urce)), \.      
-00010920: 2020 2020 2020 6622 536f 7572 6365 2073        f"Source s
-00010930: 686f 756c 6420 6265 2065 6974 6865 7220  hould be either 
-00010940: 6120 7572 6c20 6f72 2061 6e20 6162 736f  a url or an abso
-00010950: 6c75 7465 2070 6174 683a 207b 7365 6c66  lute path: {self
-00010960: 2e73 6f75 7263 657d 220a 2020 2020 2020  .source}".      
-00010970: 2020 2320 7365 6c66 2e75 726c 2069 7320    # self.url is 
-00010980: 6569 7468 6572 2061 2067 6974 2072 6570  either a git rep
-00010990: 6f20 6f72 2061 2075 726c 2070 6f69 6e74  o or a url point
-000109a0: 696e 6720 746f 2061 2066 696c 650a 2020  ing to a file.  
-000109b0: 2020 2020 2020 726f 6f74 203d 2073 656c        root = sel
-000109c0: 662e 6c6f 6361 6c5f 7061 7468 2829 0a20  f.local_path(). 
-000109d0: 2020 2020 2020 2069 6620 726f 6f74 2e69         if root.i
-000109e0: 735f 6469 7228 293a 0a20 2020 2020 2020  s_dir():.       
-000109f0: 2020 2020 2061 7373 6572 7420 5f69 735f       assert _is_
-00010a00: 6769 745f 7265 706f 2872 6f6f 7429 0a20  git_repo(root). 
-00010a10: 2020 2020 2020 2020 2020 205f 6769 745f             _git_
-00010a20: 7570 6461 7465 2872 6f6f 7429 0a20 2020  update(root).   
-00010a30: 2020 2020 2020 2020 2063 6f6c 6c65 6374           collect
-00010a40: 6564 5f61 7373 6574 733a 206c 6973 745b  ed_assets: list[
-00010a50: 5061 7468 5d20 3d20 5b5d 0a20 2020 2020  Path] = [].     
-00010a60: 2020 2020 2020 2066 6f72 2070 6174 7465         for patte
-00010a70: 726e 2069 6e20 7365 6c66 2e70 6174 7465  rn in self.patte
-00010a80: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-00010a90: 2020 2020 206d 6174 6368 6564 6669 6c65       matchedfile
-00010aa0: 7320 3d20 676c 6f62 2e67 6c6f 6228 2872  s = glob.glob((r
-00010ab0: 6f6f 742f 7061 7474 6572 6e29 2e61 735f  oot/pattern).as_
-00010ac0: 706f 7369 7828 2929 0a20 2020 2020 2020  posix()).       
-00010ad0: 2020 2020 2020 2020 2063 6f6c 6c65 6374           collect
-00010ae0: 6564 5f61 7373 6574 732e 6578 7465 6e64  ed_assets.extend
-00010af0: 2850 6174 6828 6d29 2066 6f72 206d 2069  (Path(m) for m i
-00010b00: 6e20 6d61 7463 6865 6466 696c 6573 290a  n matchedfiles).
-00010b10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00010b20: 726e 2063 6f6c 6c65 6374 6564 5f61 7373  rn collected_ass
-00010b30: 6574 730a 2020 2020 2020 2020 656c 6966  ets.        elif
-00010b40: 2072 6f6f 742e 7375 6666 6978 203d 3d20   root.suffix == 
-00010b50: 272e 7a69 7027 3a0a 2020 2020 2020 2020  '.zip':.        
-00010b60: 2020 2020 5f64 6562 7567 2866 2245 7874      _debug(f"Ext
-00010b70: 7261 6374 696e 6720 7b73 656c 662e 7061  racting {self.pa
-00010b80: 7474 6572 6e73 7d20 6672 6f6d 207b 726f  tterns} from {ro
-00010b90: 6f74 7d22 290a 2020 2020 2020 2020 2020  ot}").          
-00010ba0: 2020 6f75 7466 696c 6573 203d 205f 7a69    outfiles = _zi
-00010bb0: 705f 6578 7472 6163 7428 726f 6f74 2c20  p_extract(root, 
-00010bc0: 7365 6c66 2e70 6174 7465 726e 7329 0a20  self.patterns). 
-00010bd0: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
-00010be0: 6728 6622 4578 7472 6163 7465 6420 7b6f  g(f"Extracted {o
-00010bf0: 7574 6669 6c65 737d 2066 726f 6d20 7b72  utfiles} from {r
-00010c00: 6f6f 747d 2229 0a20 2020 2020 2020 2020  oot}").         
-00010c10: 2020 2072 6574 7572 6e20 6f75 7466 696c     return outfil
-00010c20: 6573 0a20 2020 2020 2020 2065 6c73 653a  es.        else:
-00010c30: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
-00010c40: 6f6f 7420 6973 2061 2066 696c 650a 2020  oot is a file.  
-00010c50: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00010c60: 205b 726f 6f74 5d0a 0a0a 4064 6174 6163   [root]...@datac
-00010c70: 6c61 7373 0a63 6c61 7373 2042 696e 6172  lass.class Binar
-00010c80: 793a 0a20 2020 2022 2222 0a20 2020 2041  y:.    """.    A
-00010c90: 2042 696e 6172 7920 6465 7363 7269 6265   Binary describe
-00010ca0: 7320 6120 706c 7567 696e 2062 696e 6172  s a plugin binar
-00010cb0: 790a 0a20 2020 2041 7474 7269 6273 3a0a  y..    Attribs:.
-00010cc0: 2020 2020 2020 2020 706c 6174 666f 726d          platform
-00010cd0: 3a20 7468 6520 706c 6174 666f 726d 2f61  : the platform/a
-00010ce0: 7263 6869 7465 6374 7572 6520 666f 7220  rchitecture for 
-00010cf0: 7768 6963 6820 7468 6973 2062 696e 6172  which this binar
-00010d00: 7920 6973 2062 7569 6c74 2e20 506f 7373  y is built. Poss
-00010d10: 6962 6c65 2070 6c61 7466 6f72 6d73 3a0a  ible platforms:.
-00010d20: 2020 2020 2020 2020 2020 2020 276c 696e              'lin
-00010d30: 7578 2720 2878 3836 5f36 3429 2c20 2777  ux' (x86_64), 'w
-00010d40: 696e 646f 7773 2720 2877 696e 646f 7773  indows' (windows
-00010d50: 2036 3420 6269 7473 292c 2027 6d61 636f   64 bits), 'maco
-00010d60: 7327 2028 7838 365f 3634 290a 2020 2020  s' (x86_64).    
-00010d70: 2020 2020 7572 6c3a 2065 6974 6865 7220      url: either 
-00010d80: 6120 6874 7470 206c 696e 6b20 746f 2061  a http link to a
-00010d90: 2062 696e 6172 792f 2e7a 6970 2066 696c   binary/.zip fil
-00010da0: 652c 206f 7220 656d 7074 7920 6966 2074  e, or empty if t
-00010db0: 6865 2070 6c75 6769 6e27 7320 6c6f 6361  he plugin's loca
-00010dc0: 7469 6f6e 2069 7320 7265 6c61 7469 7665  tion is relative
-00010dd0: 2074 6f20 7468 650a 2020 2020 2020 2020   to the.        
-00010de0: 2020 2020 6d61 6e69 6665 7374 2064 6566      manifest def
-00010df0: 696e 6974 696f 6e0a 2020 2020 2020 2020  inition.        
-00010e00: 6275 696c 645f 706c 6174 666f 726d 3a20  build_platform: 
-00010e10: 7468 6520 706c 6174 666f 726d 2074 6869  the platform thi
-00010e20: 7320 6269 6e61 7279 2077 6173 2062 7569  s binary was bui
-00010e30: 6c74 2077 6974 682e 204d 6967 6874 2073  lt with. Might s
-00010e40: 6572 7665 2061 7320 616e 206f 7269 656e  erve as an orien
-00010e50: 7461 7469 6f6e 2066 6f72 0a20 2020 2020  tation for.     
-00010e60: 2020 2020 2020 2075 7365 7273 2072 6567         users reg
-00010e70: 6172 6469 6e67 2074 6865 2063 6f6d 7061  arding the compa
-00010e80: 7469 6269 6c69 7479 206f 6620 7468 6520  tibility of the 
-00010e90: 6269 6e61 7279 2e20 4974 2063 616e 2062  binary. It can b
-00010ea0: 6520 616e 7974 6869 6e67 2062 7574 2065  e anything but e
-00010eb0: 7870 6563 7465 6420 7661 6c75 6573 0a20  xpected values. 
-00010ec0: 2020 2020 2020 2020 2020 206d 6967 6874             might
-00010ed0: 2062 6520 736f 6d65 7468 696e 6720 6c69   be something li
-00010ee0: 6b65 2022 6d61 634f 5320 3131 2e78 782e  ke "macOS 11.xx.
-00010ef0: 0a20 2020 2020 2020 2065 7874 7261 6374  .        extract
-00010f00: 7061 7468 3a20 696e 2074 6865 2063 6173  path: in the cas
-00010f10: 6520 6f66 2075 7369 6e67 2061 202e 7a69  e of using a .zi
-00010f20: 7020 6669 6c65 2061 7320 7572 6c2c 2074  p file as url, t
-00010f30: 6865 2065 7874 7261 6374 2070 6174 6820  he extract path 
-00010f40: 7368 6f75 6c64 2069 6e64 6963 6174 650a  should indicate.
-00010f50: 2020 2020 2020 2020 2020 2020 6120 7265              a re
-00010f60: 6c61 7469 7665 2070 6174 6820 746f 2074  lative path to t
-00010f70: 6865 2062 696e 6172 7920 7769 7468 696e  he binary within
-00010f80: 2074 6865 202e 7a69 7020 6669 6c65 2073   the .zip file s
-00010f90: 7472 7563 7475 7265 0a20 2020 2020 2020  tructure.       
-00010fa0: 2070 6f73 745f 696e 7374 616c 6c5f 7363   post_install_sc
-00010fb0: 7269 7074 3a20 6120 7363 7269 7074 2074  ript: a script t
-00010fc0: 6f20 7275 6e20 6166 7465 7220 7468 6520  o run after the 
-00010fd0: 6269 6e61 7279 2068 6173 2062 6565 6e20  binary has been 
-00010fe0: 696e 7374 616c 6c65 640a 2020 2020 2222  installed.    ""
-00010ff0: 220a 2020 2020 706c 6174 666f 726d 3a20  ".    platform: 
-00011000: 7374 720a 2020 2020 2222 2254 6865 2070  str.    """The p
-00011010: 6c61 7466 6f72 6d20 666f 7220 7768 6963  latform for whic
-00011020: 6820 7468 6973 2062 696e 6172 7920 7761  h this binary wa
-00011030: 7320 636f 6d70 696c 6564 2e20 0a20 2020  s compiled. .   
-00011040: 200a 2020 2020 4120 7061 6972 203c 6f73   .    A pair <os
-00011050: 3e2d 3c61 7263 683e 2c20 7768 6572 6520  >-<arch>, where 
-00011060: 6f73 2069 7320 6f6e 6520 6f66 206c 696e  os is one of lin
-00011070: 7578 2c20 7769 6e64 6f77 732c 206d 6163  ux, windows, mac
-00011080: 6f73 2c20 616e 6420 0a20 2020 2061 7263  os, and .    arc
-00011090: 6820 6973 206f 6e65 206f 6620 2778 3836  h is one of 'x86
-000110a0: 5f36 3427 2c20 2761 726d 3634 272e 2053  _64', 'arm64'. S
-000110b0: 6565 205f 7375 7070 6f72 7465 645f 706c  ee _supported_pl
-000110c0: 6174 666f 726d 7320 666f 7220 616e 200a  atforms for an .
-000110d0: 2020 2020 7570 2d74 6f2d 6461 7465 206c      up-to-date l
-000110e0: 6973 7422 2222 0a0a 2020 2020 7572 6c3a  ist"""..    url:
-000110f0: 2073 7472 0a20 2020 2022 2222 5468 6520   str.    """The 
-00011100: 7572 6c20 6f66 2074 6865 2062 696e 6172  url of the binar
-00011110: 7920 2863 616e 2062 6520 6120 7a69 7020  y (can be a zip 
-00011120: 6669 6c65 2922 2222 0a0a 2020 2020 6373  file)"""..    cs
-00011130: 6f75 6e64 5f76 6572 7369 6f6e 3a20 7374  ound_version: st
-00011140: 720a 2020 2020 2222 2254 6865 2076 6572  r.    """The ver
-00011150: 7369 6f6e 2072 616e 6765 2066 6f72 2077  sion range for w
-00011160: 6869 6368 2074 6869 7320 6269 6e61 7279  hich this binary
-00011170: 2069 7320 7661 6c69 6420 2863 616e 2062   is valid (can b
-00011180: 6520 6f66 2074 6865 2066 6f72 6d20 3e3d  e of the form >=
-00011190: 502e 713c 582e 7929 2222 220a 0a20 2020  P.q<X.y)"""..   
-000111a0: 2065 7874 7261 6374 7061 7468 3a20 7374   extractpath: st
-000111b0: 7220 3d20 2727 0a20 2020 2022 2222 496e  r = ''.    """In
-000111c0: 2074 6865 2063 6173 6520 6f66 2074 6865   the case of the
-000111d0: 2075 726c 2062 6569 6e67 2061 6e20 6172   url being an ar
-000111e0: 6368 6976 652c 2074 6869 7320 696e 6469  chive, this indi
-000111f0: 6361 7465 7320 7468 6520 7265 6c61 7469  cates the relati
-00011200: 7665 2070 6174 6820 6f66 2074 6865 2062  ve path of the b
-00011210: 696e 6172 7920 7769 7468 696e 2074 6861  inary within tha
-00011220: 7420 6172 6368 6976 6522 2222 0a0a 2020  t archive"""..  
-00011230: 2020 6275 696c 645f 706c 6174 666f 726d    build_platform
-00011240: 3a20 7374 7220 3d20 2727 0a20 2020 2022  : str = ''.    "
-00011250: 2222 4966 206b 6e6f 776e 2c20 7468 6520  ""If known, the 
-00011260: 706c 6174 666f 726d 2075 6e64 6572 2077  platform under w
-00011270: 6869 6368 2074 6869 7320 6269 6e61 7279  hich this binary
-00011280: 2077 6173 2062 7569 6c74 2e20 5468 6973   was built. This
-00011290: 2063 616e 2062 6520 616e 7974 6869 6e67   can be anything
-000112a0: 2c20 6974 2069 7320 6a75 7374 2069 6e66  , it is just inf
-000112b0: 6f72 6d61 7469 7665 2222 220a 0a20 2020  ormative"""..   
-000112c0: 2070 6f73 745f 696e 7374 616c 6c5f 7363   post_install_sc
-000112d0: 7269 7074 3a20 7374 7220 3d20 2727 0a20  ript: str = ''. 
-000112e0: 2020 2022 2222 4120 7363 7269 7074 2074     """A script t
-000112f0: 6f20 7275 6e20 6166 7465 7220 696e 7374  o run after inst
-00011300: 616c 6c61 7469 6f6e 2222 220a 0a20 2020  allation"""..   
-00011310: 205f 6373 6f75 6e64 5f76 6572 7369 6f6e   _csound_version
-00011320: 5f72 616e 6765 3a20 5f56 6572 7369 6f6e  _range: _Version
-00011330: 5261 6e67 6520 7c20 4e6f 6e65 203d 204e  Range | None = N
-00011340: 6f6e 650a 0a20 2020 2064 6566 205f 5f70  one..    def __p
-00011350: 6f73 745f 696e 6974 5f5f 2873 656c 6629  ost_init__(self)
-00011360: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
-00011370: 2073 656c 662e 706c 6174 666f 726d 2069   self.platform i
-00011380: 6e20 5f73 7570 706f 7274 6564 5f70 6c61  n _supported_pla
-00011390: 7466 6f72 6d73 2c20 6622 496e 7661 6c69  tforms, f"Invali
-000113a0: 6420 706c 6174 666f 726d 2027 7b73 656c  d platform '{sel
-000113b0: 662e 706c 6174 666f 726d 7d27 220a 0a20  f.platform}'".. 
-000113c0: 2020 2064 6566 2063 736f 756e 645f 7665     def csound_ve
-000113d0: 7273 696f 6e5f 7261 6e67 6528 7365 6c66  rsion_range(self
-000113e0: 2920 2d3e 205f 5665 7273 696f 6e52 616e  ) -> _VersionRan
-000113f0: 6765 3a0a 2020 2020 2020 2020 6966 2073  ge:.        if s
-00011400: 656c 662e 5f63 736f 756e 645f 7665 7273  elf._csound_vers
-00011410: 696f 6e5f 7261 6e67 6520 6973 204e 6f6e  ion_range is Non
-00011420: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-00011430: 656c 662e 5f63 736f 756e 645f 7665 7273  elf._csound_vers
-00011440: 696f 6e5f 7261 6e67 6520 3d20 5f70 6172  ion_range = _par
-00011450: 7365 5f76 6572 7369 6f6e 2873 656c 662e  se_version(self.
-00011460: 6373 6f75 6e64 5f76 6572 7369 6f6e 290a  csound_version).
-00011470: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00011480: 656c 662e 5f63 736f 756e 645f 7665 7273  elf._csound_vers
-00011490: 696f 6e5f 7261 6e67 650a 0a20 2020 2064  ion_range..    d
-000114a0: 6566 206d 6174 6368 6573 5f76 6572 7369  ef matches_versi
-000114b0: 6f6e 6964 2873 656c 662c 2076 6572 7369  onid(self, versi
-000114c0: 6f6e 6964 3a20 696e 7429 202d 3e20 626f  onid: int) -> bo
-000114d0: 6f6c 3a0a 2020 2020 2020 2020 2222 220a  ol:.        """.
-000114e0: 2020 2020 2020 2020 446f 6573 2074 6869          Does thi
-000114f0: 7320 6269 6e61 7279 2061 7070 6c79 2074  s binary apply t
-00011500: 6f20 7468 6520 2067 6976 656e 2076 6572  o the  given ver
-00011510: 7369 6f6e 6964 3f0a 0a20 2020 2020 2020  sionid?..       
-00011520: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
-00011530: 2020 2020 2020 5472 7565 2069 6620 7468        True if th
-00011540: 6520 7665 7273 696f 6e69 6420 6973 2063  e versionid is c
-00011550: 6f6e 7461 696e 6564 2077 6974 6869 6e20  ontained within 
-00011560: 7468 6520 7665 7273 696f 6e20 7261 6e67  the version rang
-00011570: 6520 6f66 2074 6869 7320 6269 6e61 7279  e of this binary
-00011580: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00011590: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
-000115a0: 7374 616e 6365 2876 6572 7369 6f6e 6964  stance(versionid
-000115b0: 2c20 696e 7429 2061 6e64 2076 6572 7369  , int) and versi
-000115c0: 6f6e 6964 203e 3d20 3630 3030 2c20 6622  onid >= 6000, f"
-000115d0: 476f 7420 7b76 6572 7369 6f6e 6964 7d22  Got {versionid}"
-000115e0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000115f0: 7365 6c66 2e63 736f 756e 645f 7665 7273  self.csound_vers
-00011600: 696f 6e5f 7261 6e67 6528 292e 636f 6e74  ion_range().cont
-00011610: 6169 6e73 2876 6572 7369 6f6e 6964 290a  ains(versionid).
-00011620: 0a20 2020 2064 6566 2062 696e 6172 795f  .    def binary_
-00011630: 6669 6c65 6e61 6d65 2873 656c 6629 202d  filename(self) -
-00011640: 3e20 7374 723a 0a20 2020 2020 2020 2022  > str:.        "
-00011650: 2222 0a20 2020 2020 2020 2054 6865 2066  "".        The f
-00011660: 696c 656e 616d 6520 6f66 2074 6865 2062  ilename of the b
-00011670: 696e 6172 790a 2020 2020 2020 2020 2222  inary.        ""
-00011680: 220a 2020 2020 2020 2020 6966 206e 6f74  ".        if not
-00011690: 2073 656c 662e 7572 6c2e 656e 6473 7769   self.url.endswi
-000116a0: 7468 2827 2e7a 6970 2729 3a0a 2020 2020  th('.zip'):.    
-000116b0: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-000116c0: 732e 7061 7468 2e73 706c 6974 2873 656c  s.path.split(sel
-000116d0: 662e 7572 6c29 5b31 5d0a 2020 2020 2020  f.url)[1].      
-000116e0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000116f0: 2020 2020 6173 7365 7274 2073 656c 662e      assert self.
-00011700: 6578 7472 6163 7470 6174 680a 2020 2020  extractpath.    
-00011710: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-00011720: 732e 7061 7468 2e73 706c 6974 2873 656c  s.path.split(sel
-00011730: 662e 6578 7472 6163 7470 6174 6829 5b31  f.extractpath)[1
-00011740: 5d0a 0a0a 4064 6174 6163 6c61 7373 0a63  ]...@dataclass.c
-00011750: 6c61 7373 204d 616e 5061 6765 3a0a 2020  lass ManPage:.  
-00011760: 2020 7379 6e74 6178 6573 3a20 6c69 7374    syntaxes: list
-00011770: 5b73 7472 5d0a 2020 2020 6162 7374 7261  [str].    abstra
-00011780: 6374 3a20 7374 720a 0a0a 4064 6174 6163  ct: str...@datac
-00011790: 6c61 7373 0a63 6c61 7373 2049 6e64 6578  lass.class Index
-000117a0: 4974 656d 3a0a 2020 2020 2222 220a 2020  Item:.    """.  
-000117b0: 2020 416e 2020 656e 7472 7920 696e 2074    An  entry in t
-000117c0: 6865 2072 6973 7365 7420 696e 6465 780a  he risset index.
-000117d0: 0a20 2020 2041 7474 7269 6273 3a0a 2020  .    Attribs:.  
-000117e0: 2020 2020 2020 6e61 6d65 3a20 7468 6520        name: the 
-000117f0: 6e61 6d65 206f 6620 7468 6520 656e 7469  name of the enti
-00011800: 7479 0a20 2020 2020 2020 2075 726c 3a20  ty.        url: 
-00011810: 7468 6520 7572 6c20 6f66 2074 6865 2067  the url of the g
-00011820: 6974 2072 6570 6f73 6974 6f72 790a 2020  it repository.  
-00011830: 2020 2020 2020 7061 7468 3a20 7468 6520        path: the 
-00011840: 7265 6c61 7469 7665 2070 6174 6820 7769  relative path wi
-00011850: 7468 696e 2074 6865 2072 6570 6f73 6974  thin the reposit
-00011860: 6f72 7920 746f 2074 6865 2072 6973 7365  ory to the risse
-00011870: 742e 6a73 6f6e 2066 696c 652e 0a20 2020  t.json file..   
-00011880: 2022 2222 0a20 2020 206e 616d 653a 2073   """.    name: s
-00011890: 7472 0a20 2020 2075 726c 3a20 7374 720a  tr.    url: str.
-000118a0: 2020 2020 7061 7468 3a20 7374 7220 3d20      path: str = 
-000118b0: 2727 0a0a 2020 2020 6465 6620 6d61 6e69  ''..    def mani
-000118c0: 6665 7374 5f70 6174 6828 7365 6c66 2920  fest_path(self) 
-000118d0: 2d3e 2050 6174 683a 0a20 2020 2020 2020  -> Path:.       
-000118e0: 206c 6f63 616c 7061 7468 203d 205f 6769   localpath = _gi
-000118f0: 745f 6c6f 6361 6c5f 7061 7468 2873 656c  t_local_path(sel
-00011900: 662e 7572 6c29 0a20 2020 2020 2020 2061  f.url).        a
-00011910: 7373 6572 7420 6c6f 6361 6c70 6174 682e  ssert localpath.
-00011920: 6578 6973 7473 2829 0a20 2020 2020 2020  exists().       
-00011930: 206d 616e 6966 6573 745f 7061 7468 203d   manifest_path =
-00011940: 206c 6f63 616c 7061 7468 202f 2073 656c   localpath / sel
-00011950: 662e 7061 7468 0a20 2020 2020 2020 2069  f.path.        i
-00011960: 6620 6d61 6e69 6665 7374 5f70 6174 682e  f manifest_path.
-00011970: 6973 5f66 696c 6528 293a 0a20 2020 2020  is_file():.     
-00011980: 2020 2020 2020 2061 7373 6572 7420 6d61         assert ma
-00011990: 6e69 6665 7374 5f70 6174 682e 7375 6666  nifest_path.suff
-000119a0: 6978 203d 3d20 222e 6a73 6f6e 220a 2020  ix == ".json".  
-000119b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000119c0: 2020 2020 2020 2020 6d61 6e69 6665 7374          manifest
-000119d0: 5f70 6174 6820 3d20 6d61 6e69 6665 7374  _path = manifest
-000119e0: 5f70 6174 6820 2f20 2272 6973 7365 742e  _path / "risset.
-000119f0: 6a73 6f6e 220a 2020 2020 2020 2020 6966  json".        if
-00011a00: 206e 6f74 206d 616e 6966 6573 745f 7061   not manifest_pa
-00011a10: 7468 2e65 7869 7374 7328 293a 0a20 2020  th.exists():.   
-00011a20: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
-00011a30: 756e 7469 6d65 4572 726f 7228 6622 466f  untimeError(f"Fo
-00011a40: 7220 706c 7567 696e 207b 7365 6c66 2e6e  r plugin {self.n
-00011a50: 616d 657d 2028 7b73 656c 662e 7572 6c7d  ame} ({self.url}
-00011a60: 2c20 636c 6f6e 6564 2061 7420 7b6c 6f63  , cloned at {loc
-00011a70: 616c 7061 7468 7d22 0a20 2020 2020 2020  alpath}".       
-00011a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a90: 2020 2020 2020 2020 6622 2074 6865 206d          f" the m
-00011aa0: 616e 6966 6573 7420 7761 7320 6e6f 7420  anifest was not 
-00011ab0: 666f 756e 6420 6174 2074 6865 2065 7870  found at the exp
-00011ac0: 6563 7465 6420 7061 7468 3a20 7b6d 616e  ected path: {man
-00011ad0: 6966 6573 745f 7061 7468 7d22 290a 2020  ifest_path}").  
-00011ae0: 2020 2020 2020 7265 7475 726e 206d 616e        return man
-00011af0: 6966 6573 745f 7061 7468 0a0a 2020 2020  ifest_path..    
-00011b00: 6465 6620 7570 6461 7465 2873 656c 6629  def update(self)
-00011b10: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00011b20: 2020 7061 7468 203d 205f 6769 745f 6c6f    path = _git_lo
-00011b30: 6361 6c5f 7061 7468 2873 656c 662e 7572  cal_path(self.ur
-00011b40: 6c29 0a20 2020 2020 2020 205f 6769 745f  l).        _git_
-00011b50: 7570 6461 7465 2870 6174 6829 0a0a 2020  update(path)..  
-00011b60: 2020 6465 6620 7265 6164 5f64 6566 696e    def read_defin
-00011b70: 6974 696f 6e28 7365 6c66 3a20 496e 6465  ition(self: Inde
-00011b80: 7849 7465 6d29 202d 3e20 506c 7567 696e  xItem) -> Plugin
-00011b90: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00011ba0: 2020 2020 2020 5265 6164 2074 6865 2070        Read the p
-00011bb0: 6c75 6769 6e20 6465 6669 6e69 7469 6f6e  lugin definition
-00011bc0: 2070 6f69 6e74 6564 2062 7920 7468 6973   pointed by this
-00011bd0: 2070 6c75 6769 6e20 736f 7572 6365 0a0a   plugin source..
-00011be0: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
-00011bf0: 0a20 2020 2020 2020 2020 2020 2061 2050  .            a P
-00011c00: 6c75 6769 6e0a 0a20 2020 2020 2020 2052  lugin..        R
-00011c10: 6169 7365 733a 2050 6c75 6769 6e44 6566  aises: PluginDef
-00011c20: 696e 6974 696f 6e45 7272 6f72 2069 6620  initionError if 
-00011c30: 7468 6572 6520 6973 2061 6e20 6572 726f  there is an erro
-00011c40: 720a 2020 2020 2020 2020 2222 220a 2020  r.        """.  
-00011c50: 2020 2020 2020 6d61 6e69 6665 7374 203d        manifest =
-00011c60: 2073 656c 662e 6d61 6e69 6665 7374 5f70   self.manifest_p
-00011c70: 6174 6828 290a 2020 2020 2020 2020 6173  ath().        as
-00011c80: 7365 7274 206d 616e 6966 6573 742e 6578  sert manifest.ex
-00011c90: 6973 7473 2829 2061 6e64 206d 616e 6966  ists() and manif
-00011ca0: 6573 742e 7375 6666 6978 203d 3d20 272e  est.suffix == '.
-00011cb0: 6a73 6f6e 270a 2020 2020 2020 2020 7472  json'.        tr
-00011cc0: 793a 0a20 2020 2020 2020 2020 2020 2070  y:.            p
-00011cd0: 6c75 6769 6e20 3d20 5f72 6561 645f 706c  lugin = _read_pl
-00011ce0: 7567 696e 6465 6628 6d61 6e69 6665 7374  ugindef(manifest
-00011cf0: 2e61 735f 706f 7369 7828 292c 2075 726c  .as_posix(), url
-00011d00: 3d73 656c 662e 7572 6c2c 0a20 2020 2020  =self.url,.     
-00011d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d30: 6d61 6e69 6665 7374 5f72 656c 6174 6976  manifest_relativ
-00011d40: 655f 7061 7468 3d73 656c 662e 7061 7468  e_path=self.path
-00011d50: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
-00011d60: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-00011d70: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00011d80: 662e 7570 6461 7465 2829 0a20 2020 2020  f.update().     
-00011d90: 2020 2020 2020 2070 6c75 6769 6e20 3d20         plugin = 
-00011da0: 5f72 6561 645f 706c 7567 696e 6465 6628  _read_plugindef(
-00011db0: 6d61 6e69 6665 7374 2e61 735f 706f 7369  manifest.as_posi
-00011dc0: 7828 292c 2075 726c 3d73 656c 662e 7572  x(), url=self.ur
-00011dd0: 6c2c 0a20 2020 2020 2020 2020 2020 2020  l,.             
-00011de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011df0: 2020 2020 2020 2020 6d61 6e69 6665 7374          manifest
-00011e00: 5f72 656c 6174 6976 655f 7061 7468 3d73  _relative_path=s
-00011e10: 656c 662e 7061 7468 290a 0a20 2020 2020  elf.path)..     
-00011e20: 2020 2070 6c75 6769 6e2e 636c 6f6e 6564     plugin.cloned
-00011e30: 5f70 6174 6820 3d20 5f67 6974 5f6c 6f63  _path = _git_loc
-00011e40: 616c 5f70 6174 6828 7365 6c66 2e75 726c  al_path(self.url
-00011e50: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00011e60: 2070 6c75 6769 6e0a 0a0a 4064 6174 6163   plugin...@datac
-00011e70: 6c61 7373 0a63 6c61 7373 2050 6c75 6769  lass.class Plugi
-00011e80: 6e3a 0a20 2020 2022 2222 0a20 2020 2041  n:.    """.    A
-00011e90: 7474 7269 6273 3a0a 2020 2020 2020 2020  ttribs:.        
-00011ea0: 6e61 6d65 3a20 6e61 6d65 206f 6620 7468  name: name of th
-00011eb0: 6520 706c 7567 696e 0a20 2020 2020 2020  e plugin.       
-00011ec0: 2076 6572 7369 6f6e 3a20 6120 7665 7273   version: a vers
-00011ed0: 696f 6e20 666f 7220 7468 6973 2070 6c75  ion for this plu
-00011ee0: 6769 6e2c 2066 6f72 2075 7064 6174 6520  gin, for update 
-00011ef0: 7265 6173 6f6e 730a 2020 2020 2020 2020  reasons.        
-00011f00: 7368 6f72 745f 6465 7363 7269 7074 696f  short_descriptio
-00011f10: 6e3a 2061 2073 686f 7274 2064 6573 6372  n: a short descr
-00011f20: 6970 7469 6f6e 206f 6620 7468 6520 706c  iption of the pl
-00011f30: 7567 696e 206f 7220 6974 7320 6f70 636f  ugin or its opco
-00011f40: 6465 730a 2020 2020 2020 2020 6269 6e61  des.        bina
-00011f50: 7269 6573 3a20 6120 6469 6374 206d 6170  ries: a dict map
-00011f60: 7069 6e67 2070 6c61 7466 6f72 6d20 746f  ping platform to
-00011f70: 2061 2042 696e 6172 792c 206c 696b 6520   a Binary, like 
-00011f80: 7b27 7769 6e64 6f77 7327 3a20 4269 6e61  {'windows': Bina
-00011f90: 7279 282e 2e2e 292c 2027 6c69 6e75 7827  ry(...), 'linux'
-00011fa0: 3a20 4269 6e61 7279 282e 2e2e 297d 0a20  : Binary(...)}. 
-00011fb0: 2020 2020 2020 2020 2020 2050 6f73 7369             Possi
-00011fc0: 626c 6520 706c 6174 666f 726d 7320 6172  ble platforms ar
-00011fd0: 653a 2027 6c69 6e75 7827 2c20 2777 696e  e: 'linux', 'win
-00011fe0: 646f 7773 272c 2027 6d61 636f 7327 2c20  dows', 'macos', 
-00011ff0: 7768 6572 6520 696e 2065 6163 6820 6361  where in each ca
-00012000: 7365 2078 3836 5f36 3420 6973 2069 6d70  se x86_64 is imp
-00012010: 6c69 6564 2e20 4f74 6865 720a 2020 2020  lied. Other.    
-00012020: 2020 2020 2020 2020 2020 2020 706c 6174              plat
-00012030: 666f 726d 732c 2077 6865 6e20 7375 7070  forms, when supp
-00012040: 6f72 7465 642c 2077 696c 6c20 6265 206f  orted, will be o
-00012050: 6620 7468 6520 666f 726d 2027 6c69 6e75  f the form 'linu
-00012060: 782d 6172 6d36 3427 206f 7220 276d 6163  x-arm64' or 'mac
-00012070: 6f73 2d61 726d 3634 270a 2020 2020 2020  os-arm64'.      
-00012080: 2020 6f70 636f 6465 733a 2061 206c 6973    opcodes: a lis
-00012090: 7420 6f66 206f 7063 6f64 6573 2064 6566  t of opcodes def
-000120a0: 696e 6564 2069 6e20 7468 6973 2070 6c75  ined in this plu
-000120b0: 6769 6e0a 2020 2020 2020 2020 6173 7365  gin.        asse
-000120c0: 7473 3a20 6120 6c69 7374 206f 6620 4173  ts: a list of As
-000120d0: 7365 7473 0a20 2020 2020 2020 2061 7574  sets.        aut
-000120e0: 686f 723a 2074 6865 2061 7574 686f 7220  hor: the author 
-000120f0: 6f66 2074 6869 7320 706c 7567 696e 0a20  of this plugin. 
-00012100: 2020 2020 2020 2065 6d61 696c 3a20 7468         email: th
-00012110: 6520 656d 6169 6c20 6f66 2074 6865 2061  e email of the a
-00012120: 7574 686f 720a 2020 2020 2020 2020 636c  uthor.        cl
-00012130: 6f6e 6564 5f70 6174 683a 2070 6174 6820  oned_path: path 
-00012140: 746f 2074 6865 2063 6c6f 6e65 6420 7265  to the cloned re
-00012150: 706f 7369 746f 7279 0a20 2020 2020 2020  pository.       
-00012160: 2064 6f63 5f66 6f6c 6465 723a 2074 6865   doc_folder: the
-00012170: 2072 656c 6174 6976 6520 7061 7468 2074   relative path t
-00012180: 6f20 6120 666f 6c64 6572 2068 6f6c 6469  o a folder holdi
-00012190: 6e67 2074 6865 2064 6f63 756d 656e 7461  ng the documenta
-000121a0: 7469 6f6e 2066 6f72 2065 6163 6820 6f70  tion for each op
-000121b0: 636f 6465 2e20 5468 6973 2066 6f6c 6465  code. This folde
-000121c0: 720a 2020 2020 2020 2020 2020 2020 6973  r.            is
-000121d0: 2072 656c 6174 6976 6520 746f 2074 6865   relative to the
-000121e0: 206d 616e 6966 6573 742e 2049 6620 6e6f   manifest. If no
-000121f0: 7420 7072 6f76 6964 6564 2069 7420 6465  t provided it de
-00012200: 6661 756c 7473 2074 6f20 6120 2264 6f63  faults to a "doc
-00012210: 2220 666f 6c64 6572 2070 6c61 6365 640a  " folder placed.
-00012220: 2020 2020 2020 2020 2020 2020 6265 7369              besi
-00012230: 6465 7320 7468 6520 6d61 6e69 6665 7374  des the manifest
-00012240: 0a20 2020 2020 2020 2075 726c 3a20 7468  .        url: th
-00012250: 6520 7572 6c20 6f66 2074 6865 2067 6974  e url of the git
-00012260: 2072 6570 6f73 6974 6f72 7920 7768 6572   repository wher
-00012270: 6520 7468 6973 2070 6c75 6769 6e20 6973  e this plugin is
-00012280: 2064 6566 696e 6564 2028 6e6f 7469 6365   defined (notice
-00012290: 2074 6861 7420 7468 6520 6269 6e61 7269   that the binari
-000122a0: 6573 2063 616e 0a20 2020 2020 2020 2020  es can.         
-000122b0: 2020 2062 6520 686f 7374 6564 2069 6e73     be hosted ins
-000122c0: 6964 6520 7468 6973 2072 6570 6f73 6974  ide this reposit
-000122d0: 6f72 7920 6f72 2069 6e20 616e 7920 6f74  ory or in any ot
-000122e0: 6865 7220 7572 6c29 0a20 2020 2020 2020  her url).       
-000122f0: 206d 616e 6966 6573 745f 7265 6c61 7469   manifest_relati
-00012300: 7665 5f70 6174 683a 2074 6865 2073 7562  ve_path: the sub
-00012310: 6469 7265 6374 6f72 7920 7769 7468 696e  directory within
-00012320: 2074 6865 2072 6570 6f73 6974 6f72 7920   the repository 
-00012330: 7768 6572 6520 7468 6520 2272 6973 7365  where the "risse
-00012340: 742e 6a73 6f6e 2220 6669 6c65 2069 730a  t.json" file is.
-00012350: 2020 2020 2020 2020 2020 2020 706c 6163              plac
-00012360: 6564 2e20 4966 206e 6f74 2067 6976 656e  ed. If not given
-00012370: 2c20 6974 2069 7320 6173 7375 6d65 6420  , it is assumed 
-00012380: 7468 6174 2074 6865 206d 616e 6966 6573  that the manifes
-00012390: 7420 6973 2070 6c61 6365 6420 6174 2074  t is placed at t
-000123a0: 6865 2072 6f6f 7420 6f66 2074 6865 2072  he root of the r
-000123b0: 6570 6f73 6974 6f72 790a 2020 2020 2020  epository.      
-000123c0: 2020 2020 2020 7374 7275 6374 7572 650a        structure.
-000123d0: 0a20 2020 207b 0a20 2020 2020 2020 2022  .    {.        "
-000123e0: 6173 7365 7473 223a 205b 0a20 2020 2020  assets": [.     
-000123f0: 2020 2020 2020 207b 2022 7572 6c22 3a20         { "url": 
-00012400: 222e 2e2e 222c 0a20 2020 2020 2020 2020  "...",.         
-00012410: 2020 2020 2022 6578 7472 6163 7470 6174       "extractpat
-00012420: 6822 3a20 222e 2e2e 222c 0a20 2020 2020  h": "...",.     
-00012430: 2020 2020 2020 2020 2022 706c 6174 666f           "platfo
-00012440: 726d 223a 2022 6c69 6e75 7822 0a20 2020  rm": "linux".   
-00012450: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-00012460: 2020 205d 0a20 2020 207d 0a20 2020 2022     ].    }.    "
-00012470: 2222 0a20 2020 206e 616d 653a 2073 7472  "".    name: str
-00012480: 0a20 2020 2075 726c 3a20 7374 720a 2020  .    url: str.  
-00012490: 2020 7665 7273 696f 6e3a 2073 7472 0a20    version: str. 
-000124a0: 2020 2073 686f 7274 5f64 6573 6372 6970     short_descrip
-000124b0: 7469 6f6e 3a20 7374 720a 2020 2020 6269  tion: str.    bi
-000124c0: 6e61 7269 6573 3a20 6c69 7374 5b42 696e  naries: list[Bin
-000124d0: 6172 795d 0a20 2020 206f 7063 6f64 6573  ary].    opcodes
-000124e0: 3a20 6c69 7374 5b73 7472 5d0a 2020 2020  : list[str].    
-000124f0: 6175 7468 6f72 3a20 7374 720a 2020 2020  author: str.    
-00012500: 656d 6169 6c3a 2073 7472 0a20 2020 2063  email: str.    c
-00012510: 6c6f 6e65 645f 7061 7468 3a20 5061 7468  loned_path: Path
-00012520: 0a20 2020 206d 616e 6966 6573 745f 7265  .    manifest_re
-00012530: 6c61 7469 7665 5f70 6174 683a 2073 7472  lative_path: str
-00012540: 203d 2027 270a 2020 2020 6c6f 6e67 5f64   = ''.    long_d
-00012550: 6573 6372 6970 7469 6f6e 3a20 7374 7220  escription: str 
-00012560: 3d20 2727 0a20 2020 2064 6f63 5f66 6f6c  = ''.    doc_fol
-00012570: 6465 723a 2073 7472 203d 2027 646f 6327  der: str = 'doc'
-00012580: 0a20 2020 2061 7373 6574 733a 204f 7074  .    assets: Opt
-00012590: 696f 6e61 6c5b 6c69 7374 5b41 7373 6574  ional[list[Asset
-000125a0: 5d5d 203d 204e 6f6e 650a 0a20 2020 2064  ]] = None..    d
-000125b0: 6566 205f 5f70 6f73 745f 696e 6974 5f5f  ef __post_init__
-000125c0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-000125d0: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
-000125e0: 6528 7365 6c66 2e62 696e 6172 6965 732c  e(self.binaries,
-000125f0: 206c 6973 7429 0a20 2020 2020 2020 2061   list).        a
-00012600: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
-00012610: 2873 656c 662e 6f70 636f 6465 732c 206c  (self.opcodes, l
-00012620: 6973 7429 0a20 2020 2020 2020 2061 7373  ist).        ass
-00012630: 6572 7420 6e6f 7420 7365 6c66 2e61 7373  ert not self.ass
-00012640: 6574 7320 6f72 2069 7369 6e73 7461 6e63  ets or isinstanc
-00012650: 6528 7365 6c66 2e61 7373 6574 732c 206c  e(self.assets, l
-00012660: 6973 7429 0a0a 2020 2020 6465 6620 5f5f  ist)..    def __
-00012670: 6861 7368 5f5f 2873 656c 6629 3a0a 2020  hash__(self):.  
-00012680: 2020 2020 2020 7265 7475 726e 2068 6173        return has
-00012690: 6828 2873 656c 662e 6e61 6d65 2c20 7365  h((self.name, se
-000126a0: 6c66 2e76 6572 7369 6f6e 2929 0a0a 2020  lf.version))..  
-000126b0: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
-000126c0: 6465 6620 7665 7273 696f 6e74 7570 6c65  def versiontuple
-000126d0: 2873 656c 6629 202d 3e20 7475 706c 655b  (self) -> tuple[
-000126e0: 696e 742c 2069 6e74 2c20 696e 745d 3a0a  int, int, int]:.
-000126f0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00012700: 7665 7273 696f 6e3a 0a20 2020 2020 2020  version:.       
-00012710: 2020 2020 2072 6574 7572 6e20 5f76 6572       return _ver
-00012720: 7369 6f6e 5f74 7570 6c65 2873 656c 662e  sion_tuple(self.
-00012730: 7665 7273 696f 6e29 0a20 2020 2020 2020  version).       
-00012740: 2072 6574 7572 6e20 2830 2c20 302c 2030   return (0, 0, 0
-00012750: 290a 0a20 2020 2064 6566 206c 6f63 616c  )..    def local
-00012760: 5f6d 616e 6966 6573 745f 7061 7468 2873  _manifest_path(s
-00012770: 656c 6629 202d 3e20 5061 7468 3a0a 2020  elf) -> Path:.  
-00012780: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00012790: 2020 5468 6520 6c6f 6361 6c20 7061 7468    The local path
-000127a0: 2074 6f20 7468 6520 6d61 6e69 6665 7374   to the manifest
-000127b0: 2066 696c 6520 6f66 2074 6869 7320 706c   file of this pl
-000127c0: 7567 696e 0a20 2020 2020 2020 2022 2222  ugin.        """
-000127d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000127e0: 7365 6c66 2e63 6c6f 6e65 645f 7061 7468  self.cloned_path
-000127f0: 202f 2073 656c 662e 6d61 6e69 6665 7374   / self.manifest
-00012800: 5f72 656c 6174 6976 655f 7061 7468 202f  _relative_path /
-00012810: 2022 7269 7373 6574 2e6a 736f 6e22 0a0a   "risset.json"..
-00012820: 2020 2020 6465 6620 6173 6469 6374 2873      def asdict(s
-00012830: 656c 6629 202d 3e20 6469 6374 3a0a 2020  elf) -> dict:.  
-00012840: 2020 2020 2020 6420 3d20 5f61 7364 6963        d = _asdic
-00012850: 7428 7365 6c66 290a 2020 2020 2020 2020  t(self).        
-00012860: 7265 7475 726e 2064 0a0a 2020 2020 6465  return d..    de
-00012870: 6620 6d61 6e70 6167 6528 7365 6c66 2c20  f manpage(self, 
-00012880: 6f70 636f 6465 3a20 7374 7229 202d 3e20  opcode: str) -> 
-00012890: 4f70 7469 6f6e 616c 5b50 6174 685d 3a0a  Optional[Path]:.
-000128a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000128b0: 2020 2020 5265 7475 726e 7320 7468 6520      Returns the 
-000128c0: 7061 7468 2074 6f20 7468 6520 6d61 6e20  path to the man 
-000128d0: 7061 6765 2066 6f72 206f 7063 6f64 650a  page for opcode.
+00000000: 2321 2f75 7372 2f62 696e 2f65 6e76 2070  #!/usr/bin/env p
+00000010: 7974 686f 6e33 0a66 726f 6d20 5f5f 6675  ython3.from __fu
+00000020: 7475 7265 5f5f 2069 6d70 6f72 7420 616e  ture__ import an
+00000030: 6e6f 7461 7469 6f6e 730a 0a5f 5f76 6572  notations..__ver
+00000040: 7369 6f6e 5f5f 203d 2022 322e 392e 3122  sion__ = "2.9.1"
+00000050: 0a0a 696d 706f 7274 2073 7973 0a0a 6966  ..import sys..if
+00000060: 2028 7379 732e 7665 7273 696f 6e5f 696e   (sys.version_in
+00000070: 666f 2e6d 616a 6f72 2c20 7379 732e 7665  fo.major, sys.ve
+00000080: 7273 696f 6e5f 696e 666f 2e6d 696e 6f72  rsion_info.minor
+00000090: 2920 3c20 2833 2c20 3929 3a0a 2020 2020  ) < (3, 9):.    
+000000a0: 7072 696e 7428 2250 7974 686f 6e20 332e  print("Python 3.
+000000b0: 3920 6f72 2068 6967 6865 7220 6973 206e  9 or higher is n
+000000c0: 6565 6465 6422 2c20 6669 6c65 3d73 7973  eeded", file=sys
+000000d0: 2e73 7464 6572 7229 0a20 2020 2073 7973  .stderr).    sys
+000000e0: 2e65 7869 7428 2d31 290a 0a69 6620 6c65  .exit(-1)..if le
+000000f0: 6e28 7379 732e 6172 6776 2920 3e3d 2032  n(sys.argv) >= 2
+00000100: 2061 6e64 2028 7379 732e 6172 6776 5b31   and (sys.argv[1
+00000110: 5d20 3d3d 2022 2d2d 7665 7273 696f 6e22  ] == "--version"
+00000120: 206f 7220 7379 732e 6172 6776 5b31 5d20   or sys.argv[1] 
+00000130: 3d3d 2022 2d76 2229 3a0a 2020 2020 7072  == "-v"):.    pr
+00000140: 696e 7428 5f5f 7665 7273 696f 6e5f 5f29  int(__version__)
+00000150: 0a20 2020 2073 7973 2e65 7869 7428 3029  .    sys.exit(0)
+00000160: 0a0a 696d 706f 7274 2067 6c6f 620a 696d  ..import glob.im
+00000170: 706f 7274 206f 730a 696d 706f 7274 2073  port os.import s
+00000180: 7461 740a 696d 706f 7274 2061 7267 7061  tat.import argpa
+00000190: 7273 650a 696d 706f 7274 206a 736f 6e0a  rse.import json.
+000001a0: 696d 706f 7274 2074 656d 7066 696c 650a  import tempfile.
+000001b0: 696d 706f 7274 2073 6875 7469 6c0a 696d  import shutil.im
+000001c0: 706f 7274 2073 7562 7072 6f63 6573 730a  port subprocess.
+000001d0: 696d 706f 7274 2074 6578 7477 7261 700a  import textwrap.
+000001e0: 696d 706f 7274 2066 6e6d 6174 6368 0a69  import fnmatch.i
+000001f0: 6d70 6f72 7420 7070 7269 6e74 0a69 6d70  mport pprint.imp
+00000200: 6f72 7420 706c 6174 666f 726d 0a66 726f  ort platform.fro
+00000210: 6d20 6461 7461 636c 6173 7365 7320 696d  m dataclasses im
+00000220: 706f 7274 2064 6174 6163 6c61 7373 2c20  port dataclass, 
+00000230: 6173 6469 6374 2061 7320 5f61 7364 6963  asdict as _asdic
+00000240: 740a 0a69 6d70 6f72 7420 7265 7175 6573  t..import reques
+00000250: 7473 0a69 6d70 6f72 7420 7572 6c6c 6962  ts.import urllib
+00000260: 2e70 6172 7365 0a69 6d70 6f72 7420 7572  .parse.import ur
+00000270: 6c6c 6962 2e72 6571 7565 7374 0a69 6d70  llib.request.imp
+00000280: 6f72 7420 7572 6c6c 6962 2e65 7272 6f72  ort urllib.error
+00000290: 0a66 726f 6d20 7061 7468 6c69 6220 696d  .from pathlib im
+000002a0: 706f 7274 2050 6174 680a 6672 6f6d 207a  port Path.from z
+000002b0: 6970 6669 6c65 2069 6d70 6f72 7420 5a69  ipfile import Zi
+000002c0: 7046 696c 650a 696d 706f 7274 2069 6e73  pFile.import ins
+000002d0: 7065 6374 2061 7320 5f69 6e73 7065 6374  pect as _inspect
+000002e0: 0a69 6d70 6f72 7420 7265 0a66 726f 6d20  .import re.from 
+000002f0: 7374 7269 6e67 2069 6d70 6f72 7420 5465  string import Te
+00000300: 6d70 6c61 7465 2061 7320 5f54 656d 706c  mplate as _Templ
+00000310: 6174 650a 0a66 726f 6d20 7479 7069 6e67  ate..from typing
+00000320: 2069 6d70 6f72 7420 5459 5045 5f43 4845   import TYPE_CHE
+00000330: 434b 494e 470a 6966 2054 5950 455f 4348  CKING.if TYPE_CH
+00000340: 4543 4b49 4e47 3a0a 2020 2020 6672 6f6d  ECKING:.    from
+00000350: 2074 7970 696e 6720 696d 706f 7274 2041   typing import A
+00000360: 6e79 0a0a 0a63 6c61 7373 2050 6c61 7466  ny...class Platf
+00000370: 6f72 6d4e 6f74 5375 7070 6f72 7465 6445  ormNotSupportedE
+00000380: 7272 6f72 2845 7863 6570 7469 6f6e 293a  rror(Exception):
+00000390: 0a20 2020 2022 2222 5261 6973 6564 2077  .    """Raised w
+000003a0: 6865 6e20 7468 6520 6375 7272 656e 7420  hen the current 
+000003b0: 706c 6174 666f 726d 2069 7320 6e6f 7420  platform is not 
+000003c0: 7375 7070 6f72 7465 6422 2222 0a0a 0a63  supported"""...c
+000003d0: 6c61 7373 2053 6368 656d 6145 7272 6f72  lass SchemaError
+000003e0: 2845 7863 6570 7469 6f6e 293a 0a20 2020  (Exception):.   
+000003f0: 2022 2222 416e 2065 6e74 6974 7920 2861   """An entity (a
+00000400: 2064 6963 742c 2061 206a 736f 6e20 6669   dict, a json fi
+00000410: 6c65 2920 646f 6573 206e 6f74 2066 756c  le) does not ful
+00000420: 6669 6c6c 2074 6865 206e 6565 6465 6420  fill the needed 
+00000430: 7363 6865 6d61 2222 220a 0a0a 636c 6173  schema"""...clas
+00000440: 7320 5061 7273 6545 7272 6f72 2845 7863  s ParseError(Exc
+00000450: 6570 7469 6f6e 293a 0a20 2020 2022 2222  eption):.    """
+00000460: 5061 7273 6520 6572 726f 7220 696e 2061  Parse error in a
+00000470: 206d 616e 6966 6573 7420 6669 6c65 2222   manifest file""
+00000480: 220a 0a0a 6465 6620 5f73 7562 7072 6f63  "...def _subproc
+00000490: 5f63 616c 6c28 6172 6773 3a20 6c69 7374  _call(args: list
+000004a0: 5b73 7472 5d20 7c20 7374 722c 2073 6865  [str] | str, she
+000004b0: 6c6c 3a20 626f 6f6c 207c 204e 6f6e 6520  ll: bool | None 
+000004c0: 3d20 4e6f 6e65 293a 0a20 2020 2069 6620  = None):.    if 
+000004d0: 7368 656c 6c20 6973 204e 6f6e 653a 0a20  shell is None:. 
+000004e0: 2020 2020 2020 2073 6865 6c6c 203d 2069         shell = i
+000004f0: 7369 6e73 7461 6e63 6528 6172 6773 2c20  sinstance(args, 
+00000500: 7374 7229 0a20 2020 205f 6465 6275 6728  str).    _debug(
+00000510: 6622 4361 6c6c 696e 6720 7375 6270 726f  f"Calling subpro
+00000520: 6365 7373 2077 6974 6820 7368 656c 6c3d  cess with shell=
+00000530: 7b73 6865 6c6c 7d3a 207b 6172 6773 7d22  {shell}: {args}"
+00000540: 290a 2020 2020 7265 7475 726e 2073 7562  ).    return sub
+00000550: 7072 6f63 6573 732e 6361 6c6c 2861 7267  process.call(arg
+00000560: 732c 2073 6865 6c6c 3d73 6865 6c6c 290a  s, shell=shell).
+00000570: 0a0a 6465 6620 5f64 6174 615f 6469 725f  ..def _data_dir_
+00000580: 666f 725f 706c 6174 666f 726d 2829 202d  for_platform() -
+00000590: 3e20 5061 7468 3a0a 2020 2020 2222 220a  > Path:.    """.
+000005a0: 2020 2020 5265 7475 726e 7320 7468 6520      Returns the 
+000005b0: 6461 7461 2064 6972 6563 746f 7279 2066  data directory f
+000005c0: 6f72 2074 6865 2067 6976 656e 2070 6c61  or the given pla
+000005d0: 7466 6f72 6d0a 2020 2020 2222 220a 2020  tform.    """.  
+000005e0: 2020 706c 6174 666f 726d 203d 2073 7973    platform = sys
+000005f0: 2e70 6c61 7466 6f72 6d0a 2020 2020 6966  .platform.    if
+00000600: 2070 6c61 7466 6f72 6d20 3d3d 2027 6c69   platform == 'li
+00000610: 6e75 7827 3a0a 2020 2020 2020 2020 7265  nux':.        re
+00000620: 7475 726e 2050 6174 6828 227e 2f2e 6c6f  turn Path("~/.lo
+00000630: 6361 6c2f 7368 6172 6522 292e 6578 7061  cal/share").expa
+00000640: 6e64 7573 6572 2829 0a20 2020 2065 6c69  nduser().    eli
+00000650: 6620 706c 6174 666f 726d 203d 3d20 2764  f platform == 'd
+00000660: 6172 7769 6e27 3a0a 2020 2020 2020 2020  arwin':.        
+00000670: 7265 7475 726e 2050 6174 6828 227e 2f4c  return Path("~/L
+00000680: 6962 7261 7279 2f41 7070 6c69 6361 7469  ibrary/Applicati
+00000690: 6f6e 2053 7570 706f 7274 2229 2e65 7870  on Support").exp
+000006a0: 616e 6475 7365 7228 290a 2020 2020 656c  anduser().    el
+000006b0: 6966 2070 6c61 7466 6f72 6d20 3d3d 2027  if platform == '
+000006c0: 7769 6e33 3227 3a0a 2020 2020 2020 2020  win32':.        
+000006d0: 7020 3d20 5222 433a 5c55 7365 7273 5c24  p = R"C:\Users\$
+000006e0: 5553 4552 4e41 4d45 5c41 7070 4461 7461  USERNAME\AppData
+000006f0: 5c4c 6f63 616c 220a 2020 2020 2020 2020  \Local".        
+00000700: 7265 7475 726e 2050 6174 6828 6f73 2e70  return Path(os.p
+00000710: 6174 682e 6578 7061 6e64 7661 7273 2870  ath.expandvars(p
+00000720: 2929 0a20 2020 2065 6c73 653a 0a20 2020  )).    else:.   
+00000730: 2020 2020 2072 6169 7365 2050 6c61 7466       raise Platf
+00000740: 6f72 6d4e 6f74 5375 7070 6f72 7465 6445  ormNotSupportedE
+00000750: 7272 6f72 2866 2250 6c61 7466 6f72 6d20  rror(f"Platform 
+00000760: 756e 6b6e 6f77 6e3a 207b 706c 6174 666f  unknown: {platfo
+00000770: 726d 7d22 290a 0a0a 494e 4445 585f 4749  rm}")...INDEX_GI
+00000780: 545f 5245 504f 5349 544f 5259 203d 2022  T_REPOSITORY = "
+00000790: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+000007a0: 6f6d 2f63 736f 756e 642d 706c 7567 696e  om/csound-plugin
+000007b0: 732f 7269 7373 6574 2d64 6174 6122 0a52  s/risset-data".R
+000007c0: 4953 5345 545f 524f 4f54 203d 205f 6461  ISSET_ROOT = _da
+000007d0: 7461 5f64 6972 5f66 6f72 5f70 6c61 7466  ta_dir_for_platf
+000007e0: 6f72 6d28 2920 2f20 2272 6973 7365 7422  orm() / "risset"
+000007f0: 0a52 4953 5345 545f 4441 5441 5245 504f  .RISSET_DATAREPO
+00000800: 5f4c 4f43 414c 5041 5448 203d 2052 4953  _LOCALPATH = RIS
+00000810: 5345 545f 524f 4f54 202f 2022 7269 7373  SET_ROOT / "riss
+00000820: 6574 2d64 6174 6122 0a52 4953 5345 545f  et-data".RISSET_
+00000830: 4745 4e45 5241 5445 445f 444f 4353 203d  GENERATED_DOCS =
+00000840: 2052 4953 5345 545f 524f 4f54 202f 2022   RISSET_ROOT / "
+00000850: 6d61 6e22 0a52 4953 5345 545f 434c 4f4e  man".RISSET_CLON
+00000860: 4553 5f50 4154 4820 3d20 5249 5353 4554  ES_PATH = RISSET
+00000870: 5f52 4f4f 5420 2f20 2263 6c6f 6e65 7322  _ROOT / "clones"
+00000880: 0a52 4953 5345 545f 4153 5345 5453 5f50  .RISSET_ASSETS_P
+00000890: 4154 4820 3d20 5249 5353 4554 5f52 4f4f  ATH = RISSET_ROO
+000008a0: 5420 2f20 2261 7373 6574 7322 0a52 4953  T / "assets".RIS
+000008b0: 5345 545f 4f50 434f 4445 5358 4d4c 203d  SET_OPCODESXML =
+000008c0: 2052 4953 5345 545f 524f 4f54 202f 2022   RISSET_ROOT / "
+000008d0: 6f70 636f 6465 732e 786d 6c22 0a5f 4d41  opcodes.xml"._MA
+000008e0: 494e 494e 4445 585f 5049 434b 4c45 5f46  ININDEX_PICKLE_F
+000008f0: 494c 4520 3d20 5249 5353 4554 5f52 4f4f  ILE = RISSET_ROO
+00000900: 5420 2f20 226d 6169 6e69 6e64 6578 2e70  T / "mainindex.p
+00000910: 6963 6b6c 6522 0a4d 4143 4f53 5f45 4e54  ickle".MACOS_ENT
+00000920: 4954 4c45 4d45 4e54 535f 5041 5448 203d  ITLEMENTS_PATH =
+00000930: 2052 4953 5345 545f 4153 5345 5453 5f50   RISSET_ASSETS_P
+00000940: 4154 4820 2f20 2763 736f 756e 6470 6c75  ATH / 'csoundplu
+00000950: 6769 6e73 2e65 6e74 6974 6c65 6d65 6e74  gins.entitlement
+00000960: 7327 0a0a 554e 4b4e 4f57 4e5f 5645 5253  s'..UNKNOWN_VERS
+00000970: 494f 4e20 3d20 2255 6e6b 6e6f 776e 220a  ION = "Unknown".
+00000980: 0a0a 5f73 7570 706f 7274 6564 5f70 6c61  .._supported_pla
+00000990: 7466 6f72 6d73 203d 207b 0a20 2020 2027  tforms = {.    '
+000009a0: 6d61 636f 732d 7838 365f 3634 272c 0a20  macos-x86_64',. 
+000009b0: 2020 2027 6c69 6e75 782d 7838 365f 3634     'linux-x86_64
+000009c0: 272c 0a20 2020 2027 7769 6e64 6f77 732d  ',.    'windows-
+000009d0: 7838 365f 3634 272c 0a20 2020 2027 6d61  x86_64',.    'ma
+000009e0: 636f 732d 6172 6d36 3427 2c0a 2020 2020  cos-arm64',.    
+000009f0: 276c 696e 7578 2d61 726d 3634 270a 7d0a  'linux-arm64'.}.
+00000a00: 0a0a 5f55 4e53 4554 203d 206f 626a 6563  .._UNSET = objec
+00000a10: 7428 290a 0a0a 5f65 6e74 6974 6c65 6d65  t()..._entitleme
+00000a20: 6e74 735f 7374 7220 3d20 7222 2222 0a3c  nts_str = r""".<
+00000a30: 3f78 6d6c 2076 6572 7369 6f6e 3d22 312e  ?xml version="1.
+00000a40: 3022 2065 6e63 6f64 696e 673d 2255 5446  0" encoding="UTF
+00000a50: 2d38 223f 3e0a 3c21 444f 4354 5950 4520  -8"?>.<!DOCTYPE 
+00000a60: 706c 6973 7420 5055 424c 4943 2022 2d2f  plist PUBLIC "-/
+00000a70: 2f41 7070 6c65 2f2f 4454 4420 504c 4953  /Apple//DTD PLIS
+00000a80: 5420 312e 302f 2f45 4e22 2022 6874 7470  T 1.0//EN" "http
+00000a90: 3a2f 2f77 7777 2e61 7070 6c65 2e63 6f6d  ://www.apple.com
+00000aa0: 2f44 5444 732f 5072 6f70 6572 7479 4c69  /DTDs/PropertyLi
+00000ab0: 7374 2d31 2e30 2e64 7464 223e 0a3c 706c  st-1.0.dtd">.<pl
+00000ac0: 6973 7420 7665 7273 696f 6e3d 2231 2e30  ist version="1.0
+00000ad0: 223e 0a3c 6469 6374 3e0a 2020 2020 3c6b  ">.<dict>.    <k
+00000ae0: 6579 3e63 6f6d 2e61 7070 6c65 2e73 6563  ey>com.apple.sec
+00000af0: 7572 6974 792e 6373 2e64 6973 6162 6c65  urity.cs.disable
+00000b00: 2d6c 6962 7261 7279 2d76 616c 6964 6174  -library-validat
+00000b10: 696f 6e3c 2f6b 6579 3e0a 2020 2020 3c74  ion</key>.    <t
+00000b20: 7275 652f 3e0a 2020 2020 3c6b 6579 3e63  rue/>.    <key>c
+00000b30: 6f6d 2e61 7070 6c65 2e73 6563 7572 6974  om.apple.securit
+00000b40: 792e 6465 7669 6365 2e61 7564 696f 2d69  y.device.audio-i
+00000b50: 6e70 7574 3c2f 6b65 793e 0a20 2020 203c  nput</key>.    <
+00000b60: 7472 7565 2f3e 0a20 2020 203c 6b65 793e  true/>.    <key>
+00000b70: 636f 6d2e 6170 706c 652e 7365 6375 7269  com.apple.securi
+00000b80: 7479 2e64 6576 6963 652e 6361 6d65 7261  ty.device.camera
+00000b90: 3c2f 6b65 793e 0a20 2020 203c 7472 7565  </key>.    <true
+00000ba0: 2f3e 0a3c 2f64 6963 743e 0a3c 2f70 6c69  />.</dict>.</pli
+00000bb0: 7374 3e0a 2222 220a 0a0a 6465 6620 5f6d  st>."""...def _m
+00000bc0: 6163 6f73 5f73 6176 655f 656e 7469 746c  acos_save_entitl
+00000bd0: 656d 656e 7473 2829 202d 3e20 5061 7468  ements() -> Path
+00000be0: 3a0a 2020 2020 7061 7468 203d 204d 4143  :.    path = MAC
+00000bf0: 4f53 5f45 4e54 4954 4c45 4d45 4e54 535f  OS_ENTITLEMENTS_
+00000c00: 5041 5448 0a20 2020 205f 656e 7375 7265  PATH.    _ensure
+00000c10: 5f70 6172 656e 745f 6578 6973 7473 2870  _parent_exists(p
+00000c20: 6174 6829 0a20 2020 2069 6620 6e6f 7420  ath).    if not 
+00000c30: 5f73 6573 7369 6f6e 2e65 6e74 6974 6c65  _session.entitle
+00000c40: 6d65 6e74 735f 7361 7665 643a 0a20 2020  ments_saved:.   
+00000c50: 2020 2020 2077 6974 6820 6f70 656e 2870       with open(p
+00000c60: 6174 682c 2027 7727 2920 6173 2066 3a0a  ath, 'w') as f:.
+00000c70: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
+00000c80: 6974 6528 5f65 6e74 6974 6c65 6d65 6e74  ite(_entitlement
+00000c90: 735f 7374 7229 0a20 2020 2020 2020 2061  s_str).        a
+00000ca0: 7373 6572 7420 6f73 2e70 6174 682e 6578  ssert os.path.ex
+00000cb0: 6973 7473 2870 6174 6829 0a20 2020 2020  ists(path).     
+00000cc0: 2020 2070 6c75 7469 6c20 3d20 7368 7574     plutil = shut
+00000cd0: 696c 2e77 6869 6368 2827 706c 7574 696c  il.which('plutil
+00000ce0: 2729 0a20 2020 2020 2020 2069 6620 706c  ').        if pl
+00000cf0: 7574 696c 3a0a 2020 2020 2020 2020 2020  util:.          
+00000d00: 2020 5f64 6562 7567 2866 2256 6572 6966    _debug(f"Verif
+00000d10: 7969 6e67 2074 6861 7420 7468 6520 656e  ying that the en
+00000d20: 7469 746c 656d 656e 7473 2066 696c 6520  titlements file 
+00000d30: 277b 7061 7468 7d27 2069 7320 6120 7661  '{path}' is a va
+00000d40: 6c69 6420 706c 6973 7422 290a 2020 2020  lid plist").    
+00000d50: 2020 2020 2020 2020 5f73 7562 7072 6f63          _subproc
+00000d60: 5f63 616c 6c28 5b70 6c75 7469 6c2c 2070  _call([plutil, p
+00000d70: 6174 685d 290a 2020 2020 2020 2020 5f73  ath]).        _s
+00000d80: 6573 7369 6f6e 2e65 6e74 6974 6c65 6d65  ession.entitleme
+00000d90: 6e74 735f 7361 7665 6420 3d20 5472 7565  nts_saved = True
+00000da0: 0a20 2020 2020 2020 205f 6465 6275 6728  .        _debug(
+00000db0: 6622 5361 7665 6420 656e 7469 746c 656d  f"Saved entitlem
+00000dc0: 656e 7473 2066 696c 6520 746f 207b 7061  ents file to {pa
+00000dd0: 7468 7d22 290a 2020 2020 2020 2020 5f64  th}").        _d
+00000de0: 6562 7567 2866 2245 6e74 6974 6c65 6d65  ebug(f"Entitleme
+00000df0: 6e74 733a 5c6e 7b6f 7065 6e28 7061 7468  nts:\n{open(path
+00000e00: 292e 7265 6164 2829 7d5c 6e2d 2d2d 2d2d  ).read()}\n-----
+00000e10: 2d2d 2d2d 2d2d 2d20 656e 6420 656e 7469  ------- end enti
+00000e20: 746c 656d 656e 7473 2229 0a0a 2020 2020  tlements")..    
+00000e30: 7265 7475 726e 2070 6174 680a 0a23 2053  return path..# S
+00000e40: 4947 4e41 5455 5245 5f49 443d 222d 220a  IGNATURE_ID="-".
+00000e50: 2320 636f 6465 7369 676e 202d 2d66 6f72  # codesign --for
+00000e60: 6365 202d 2d73 6967 6e20 2224 7b53 4947  ce --sign "${SIG
+00000e70: 4e41 5455 5245 5f49 447d 2220 2d2d 656e  NATURE_ID}" --en
+00000e80: 7469 746c 656d 656e 7473 2063 736f 756e  titlements csoun
+00000e90: 6470 6c75 6769 6e73 2e65 6e74 6974 6c65  dplugins.entitle
+00000ea0: 6d65 6e74 7320 222f 7061 7468 2f74 6f2f  ments "/path/to/
+00000eb0: 6479 6c69 6222 0a0a 0a64 6566 206d 6163  dylib"...def mac
+00000ec0: 6f73 5f63 6f64 6573 6967 6e28 6479 6c69  os_codesign(dyli
+00000ed0: 6270 6174 6873 3a20 6c69 7374 5b73 7472  bpaths: list[str
+00000ee0: 5d2c 2073 6967 6e61 7475 7265 3d27 2d27  ], signature='-'
+00000ef0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2022  ) -> None:.    "
+00000f00: 2222 0a20 2020 2043 6f64 6573 6967 6e20  "".    Codesign 
+00000f10: 7468 6520 6769 7665 6e20 6c69 6272 6172  the given librar
+00000f20: 7920 6269 6e61 7269 6573 2075 7369 6e67  y binaries using
+00000f30: 2065 6e74 6974 6c65 6d65 6e74 730a 0a20   entitlements.. 
+00000f40: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+00000f50: 2064 796c 6962 7061 7468 733a 2061 206c   dylibpaths: a l
+00000f60: 6973 7420 6f66 2070 6174 6873 2074 6f20  ist of paths to 
+00000f70: 636f 6465 7369 676e 0a20 2020 2020 2020  codesign.       
+00000f80: 2073 6967 6e61 7475 7265 3a20 7468 6520   signature: the 
+00000f90: 7369 676e 6174 7572 6520 7573 6564 2e20  signature used. 
+00000fa0: 272d 2720 696e 6469 6361 7465 7320 746f  '-' indicates to
+00000fb0: 2073 6967 6e20 6974 206c 6f63 616c 6c79   sign it locally
+00000fc0: 0a20 2020 2022 2222 0a20 2020 2069 6620  .    """.    if 
+00000fd0: 6e6f 7420 7368 7574 696c 2e77 6869 6368  not shutil.which
+00000fe0: 2827 636f 6465 7369 676e 2729 3a0a 2020  ('codesign'):.  
+00000ff0: 2020 2020 2020 7261 6973 6520 5275 6e74        raise Runt
+00001000: 696d 6545 7272 6f72 2822 436f 756c 6420  imeError("Could 
+00001010: 6e6f 7420 6669 6e64 2074 6865 2062 696e  not find the bin
+00001020: 6172 7920 2763 6f64 6573 6967 6e27 2069  ary 'codesign' i
+00001030: 6e20 7468 6520 7061 7468 2229 0a20 2020  n the path").   
+00001040: 2065 6e74 6974 6c65 6d65 6e74 735f 7061   entitlements_pa
+00001050: 7468 203d 205f 6d61 636f 735f 7361 7665  th = _macos_save
+00001060: 5f65 6e74 6974 6c65 6d65 6e74 7328 290a  _entitlements().
+00001070: 2020 2020 6173 7365 7274 206f 732e 7061      assert os.pa
+00001080: 7468 2e65 7869 7374 7328 656e 7469 746c  th.exists(entitl
+00001090: 656d 656e 7473 5f70 6174 6829 0a20 2020  ements_path).   
+000010a0: 2066 6f72 2064 796c 6962 7061 7468 2069   for dylibpath i
+000010b0: 6e20 6479 6c69 6270 6174 6873 3a0a 2020  n dylibpaths:.  
+000010c0: 2020 2020 2020 5f73 7562 7072 6f63 5f63        _subproc_c
+000010d0: 616c 6c28 5b27 636f 6465 7369 676e 272c  all(['codesign',
+000010e0: 2027 2d2d 666f 7263 6527 2c20 272d 2d73   '--force', '--s
+000010f0: 6967 6e27 2c20 7369 676e 6174 7572 652c  ign', signature,
+00001100: 2027 2d2d 656e 7469 746c 656d 656e 7473   '--entitlements
+00001110: 272c 2065 6e74 6974 6c65 6d65 6e74 735f  ', entitlements_
+00001120: 7061 7468 2c20 6479 6c69 6270 6174 685d  path, dylibpath]
+00001130: 290a 2020 2020 2020 2020 5f64 6562 7567  ).        _debug
+00001140: 2822 5665 7269 6679 696e 6720 636f 6465  ("Verifying code
+00001150: 2073 6967 6e69 6e67 2229 0a20 2020 2020   signing").     
+00001160: 2020 205f 7375 6270 726f 635f 6361 6c6c     _subproc_call
+00001170: 285b 2763 6f64 6573 6967 6e27 2c20 272d  (['codesign', '-
+00001180: 2d64 6973 706c 6179 272c 2027 2d2d 7665  -display', '--ve
+00001190: 7262 6f73 6527 2c20 6479 6c69 6270 6174  rbose', dylibpat
+000011a0: 685d 290a 0a0a 6465 6620 5f6e 6f72 6d61  h])...def _norma
+000011b0: 6c69 7a65 5f70 6c61 7466 6f72 6d28 733a  lize_platform(s:
+000011c0: 2073 7472 2920 2d3e 2073 7472 3a0a 2020   str) -> str:.  
+000011d0: 2020 2222 220a 2020 2020 4e6f 726d 616c    """.    Normal
+000011e0: 697a 6573 2070 6c61 7466 6f72 6d20 6465  izes platform de
+000011f0: 6669 6e69 7469 6f6e 2061 7320 7573 6564  finition as used
+00001200: 2069 6e20 7269 7373 6574 2e6a 736f 6e0a   in risset.json.
+00001210: 0a20 2020 2048 616e 646c 6573 2074 6865  .    Handles the
+00001220: 2063 6173 6520 7768 6572 652c 2066 6f72   case where, for
+00001230: 2063 6f6d 7061 7469 6269 6c69 7479 2072   compatibility r
+00001240: 6561 736f 6e73 2c20 7468 650a 2020 2020  easons, the.    
+00001250: 6172 6368 6974 6563 7475 7265 206d 6967  architecture mig
+00001260: 6874 2062 6520 6d69 7373 696e 672c 2073  ht be missing, s
+00001270: 6f20 7468 6973 2066 756e 6374 696f 6e20  o this function 
+00001280: 7265 736f 6c76 6573 2c0a 2020 2020 666f  resolves,.    fo
+00001290: 7220 6578 616d 706c 652c 2027 7769 6e64  r example, 'wind
+000012a0: 6f77 7327 2074 6f20 2777 696e 646f 7773  ows' to 'windows
+000012b0: 2d78 3836 5f36 3427 2e0a 0a20 2020 204f  -x86_64'...    O
+000012c0: 7468 6572 7769 7365 2074 6865 2070 6c61  therwise the pla
+000012d0: 7466 6f72 6d20 6465 6669 6e69 7469 6f6e  tform definition
+000012e0: 2073 686f 756c 6420 636f 6e73 6973 7420   should consist 
+000012f0: 6f66 2061 2070 6169 7220 3c6f 733e 2d3c  of a pair <os>-<
+00001300: 6172 6368 3e2c 0a20 2020 206c 696b 6520  arch>,.    like 
+00001310: 226d 6163 6f73 2d61 726d 3634 2220 6f72  "macos-arm64" or
+00001320: 2022 6c69 6e75 782d 7838 365f 3634 220a   "linux-x86_64".
+00001330: 0a20 2020 2052 6169 7365 7320 5661 6c75  .    Raises Valu
+00001340: 6545 7272 6f72 2069 6620 7468 6520 706c  eError if the pl
+00001350: 6174 666f 726d 2069 7320 6e6f 7420 7375  atform is not su
+00001360: 7070 6f72 7465 640a 2020 2020 2222 220a  pported.    """.
+00001370: 2020 2020 6966 2073 2069 6e20 5f73 7570      if s in _sup
+00001380: 706f 7274 6564 5f70 6c61 7466 6f72 6d73  ported_platforms
+00001390: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+000013a0: 2073 0a0a 2020 2020 6966 2073 2069 6e20   s..    if s in 
+000013b0: 2827 6d61 636f 7327 2c20 2777 696e 646f  ('macos', 'windo
+000013c0: 7773 272c 2027 6c69 6e75 7827 293a 0a20  ws', 'linux'):. 
+000013d0: 2020 2020 2020 2072 6574 7572 6e20 7320         return s 
+000013e0: 2b20 272d 7838 365f 3634 270a 0a20 2020  + '-x86_64'..   
+000013f0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+00001400: 7228 6622 556e 6b6e 6f77 6e20 706c 6174  r(f"Unknown plat
+00001410: 666f 726d 2027 7b73 7d27 2229 0a0a 0a64  form '{s}'")...d
+00001420: 6566 205f 706c 6174 666f 726d 5f61 7263  ef _platform_arc
+00001430: 6869 7465 6374 7572 6528 2920 2d3e 2073  hitecture() -> s
+00001440: 7472 3a0a 2020 2020 2222 220a 2020 2020  tr:.    """.    
+00001450: 5265 7475 726e 7320 7468 6520 6172 6368  Returns the arch
+00001460: 6974 6563 7475 7265 2066 6f72 2074 6869  itecture for thi
+00001470: 7320 706c 6174 666f 726d 0a0a 2020 2020  s platform..    
+00001480: 5468 6520 6172 6368 6974 6563 7475 7265  The architecture
+00001490: 2069 7320 6f6e 6520 6f66 2027 7838 365f   is one of 'x86_
+000014a0: 3634 2720 2869 6e74 656c 2c20 3634 6269  64' (intel, 64bi
+000014b0: 7473 292c 0a20 2020 2027 7838 3627 2028  ts),.    'x86' (
+000014c0: 696e 7465 6c2c 2033 3262 6974 7329 2c20  intel, 32bits), 
+000014d0: 2761 726d 3634 2720 2861 726d 2036 3462  'arm64' (arm 64b
+000014e0: 6974 7329 206f 7220 2761 726d 3332 2720  its) or 'arm32' 
+000014f0: 2861 726d 2033 3262 6974 7329 0a20 2020  (arm 32bits).   
+00001500: 2022 2222 0a20 2020 206d 6163 6869 6e65   """.    machine
+00001510: 203d 2070 6c61 7466 6f72 6d2e 6d61 6368   = platform.mach
+00001520: 696e 6528 292e 6c6f 7765 7228 290a 2020  ine().lower().  
+00001530: 2020 6269 7473 2c20 6c69 6e6b 6167 6520    bits, linkage 
+00001540: 3d20 706c 6174 666f 726d 2e61 7263 6869  = platform.archi
+00001550: 7465 6374 7572 6528 290a 2020 2020 6966  tecture().    if
+00001560: 206d 6163 6869 6e65 203d 3d20 2761 726d   machine == 'arm
+00001570: 273a 0a20 2020 2020 2020 2069 6620 6269  ':.        if bi
+00001580: 7473 203d 3d20 2736 3462 6974 273a 0a20  ts == '64bit':. 
+00001590: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000015a0: 6e20 2761 726d 3634 270a 2020 2020 2020  n 'arm64'.      
+000015b0: 2020 656c 6966 2062 6974 7320 3d3d 2027    elif bits == '
+000015c0: 3332 6269 7427 3a0a 2020 2020 2020 2020  32bit':.        
+000015d0: 2020 2020 7265 7475 726e 2027 6172 6d33      return 'arm3
+000015e0: 3227 0a20 2020 2065 6c69 6620 6d61 6368  2'.    elif mach
+000015f0: 696e 6520 3d3d 2027 6172 6d36 3427 3a0a  ine == 'arm64':.
+00001600: 2020 2020 2020 2020 7265 7475 726e 2027          return '
+00001610: 6172 6d36 3427 0a20 2020 2065 6c69 6620  arm64'.    elif 
+00001620: 6d61 6368 696e 6520 3d3d 2027 7838 365f  machine == 'x86_
+00001630: 3634 2720 6f72 206d 6163 6869 6e65 2e73  64' or machine.s
+00001640: 7461 7274 7377 6974 6828 2761 6d64 3634  tartswith('amd64
+00001650: 2729 206f 7220 6d61 6368 696e 652e 7374  ') or machine.st
+00001660: 6172 7473 7769 7468 2827 696e 7465 6c36  artswith('intel6
+00001670: 3427 293a 0a20 2020 2020 2020 2072 6574  4'):.        ret
+00001680: 7572 6e20 2778 3836 5f36 3427 0a20 2020  urn 'x86_64'.   
+00001690: 2065 6c69 6620 6d61 6368 696e 6520 3d3d   elif machine ==
+000016a0: 2027 6933 3836 273a 0a20 2020 2020 2020   'i386':.       
+000016b0: 2069 6620 6269 7473 203d 3d20 2736 3462   if bits == '64b
+000016c0: 6974 273a 0a20 2020 2020 2020 2020 2020  it':.           
+000016d0: 2072 6574 7572 6e20 2778 3836 5f36 3427   return 'x86_64'
+000016e0: 0a20 2020 2020 2020 2065 6c69 6620 6269  .        elif bi
+000016f0: 7473 203d 3d20 2733 3262 6974 273a 0a20  ts == '32bit':. 
+00001700: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00001710: 6e20 2778 3836 270a 0a20 2020 2072 6169  n 'x86'..    rai
+00001720: 7365 2052 756e 7469 6d65 4572 726f 7228  se RuntimeError(
+00001730: 6622 2a2a 2041 7263 6869 7465 6374 7572  f"** Architectur
+00001740: 6520 6e6f 7420 7375 7070 6f72 7465 6420  e not supported 
+00001750: 286d 6163 6869 6e65 3d27 7b6d 6163 6869  (machine='{machi
+00001760: 6e65 7d27 2c20 7b62 6974 733d 7d2c 207b  ne}', {bits=}, {
+00001770: 6c69 6e6b 6167 653d 7d29 2229 0a0a 0a64  linkage=})")...d
+00001780: 6566 205f 6373 6f75 6e64 6c69 625f 7665  ef _csoundlib_ve
+00001790: 7273 696f 6e28 2920 2d3e 2074 7570 6c65  rsion() -> tuple
+000017a0: 5b69 6e74 2c20 696e 745d 3a0a 2020 2020  [int, int]:.    
+000017b0: 2222 2252 6574 7572 6e73 2061 2074 7570  """Returns a tup
+000017c0: 6c65 2028 6d61 6a6f 722c 206d 696e 6f72  le (major, minor
+000017d0: 2920 7573 696e 6720 7468 6520 6373 6f75  ) using the csou
+000017e0: 6e64 2061 7069 0a0a 2020 2020 5468 6973  nd api..    This
+000017f0: 2076 6572 7369 6f6e 2063 616e 2064 6966   version can dif
+00001800: 6665 7220 6672 6f6d 2074 6865 2076 6572  fer from the ver
+00001810: 7369 6f6e 206f 6620 7468 6520 696e 7374  sion of the inst
+00001820: 616c 6c65 6420 6373 6f75 6e64 2062 696e  alled csound bin
+00001830: 6172 790a 2020 2020 2222 220a 2020 2020  ary.    """.    
+00001840: 696d 706f 7274 2063 7463 736f 756e 6437  import ctcsound7
+00001850: 0a20 2020 2076 6572 7369 6f6e 6964 203d  .    versionid =
+00001860: 2063 7463 736f 756e 6437 2e6c 6962 6373   ctcsound7.libcs
+00001870: 6f75 6e64 2e63 736f 756e 6447 6574 5665  ound.csoundGetVe
+00001880: 7273 696f 6e28 290a 2020 2020 6d61 6a6f  rsion().    majo
+00001890: 7220 3d20 7665 7273 696f 6e69 6420 2f2f  r = versionid //
+000018a0: 2031 3030 300a 2020 2020 6d69 6e6f 7220   1000.    minor 
+000018b0: 3d20 2876 6572 7369 6f6e 6964 202d 206d  = (versionid - m
+000018c0: 616a 6f72 2a31 3030 3029 202f 2f20 3130  ajor*1000) // 10
+000018d0: 0a20 2020 2072 6574 7572 6e20 6d61 6a6f  .    return majo
+000018e0: 722c 206d 696e 6f72 0a0a 0a64 6566 205f  r, minor...def _
+000018f0: 6373 6f75 6e64 5f76 6572 7369 6f6e 2863  csound_version(c
+00001900: 736f 756e 6465 7865 3d27 6373 6f75 6e64  soundexe='csound
+00001910: 2729 202d 3e20 7475 706c 655b 696e 742c  ') -> tuple[int,
+00001920: 2069 6e74 2c20 7374 725d 3a0a 2020 2020   int, str]:.    
+00001930: 2222 220a 2020 2020 5175 6572 7920 7468  """.    Query th
+00001940: 6520 6373 6f75 6e64 2076 6572 7369 6f6e  e csound version
+00001950: 2076 6961 2074 6865 2065 7865 6375 7461   via the executa
+00001960: 626c 650a 0a20 2020 2041 7267 733a 0a20  ble..    Args:. 
+00001970: 2020 2020 2020 2063 736f 756e 6465 7865         csoundexe
+00001980: 3a20 7468 6520 6373 6f75 6e64 2065 7865  : the csound exe
+00001990: 6375 7461 626c 650a 0a20 2020 2052 6574  cutable..    Ret
+000019a0: 7572 6e73 3a0a 2020 2020 2020 2020 6120  urns:.        a 
+000019b0: 7475 706c 6520 286d 616a 6f72 3a20 696e  tuple (major: in
+000019c0: 742c 206d 696e 6f72 3a20 696e 742c 2072  t, minor: int, r
+000019d0: 6573 743a 2073 7472 290a 2020 2020 2222  est: str).    ""
+000019e0: 220a 2020 2020 6373 6f75 6e64 5f62 696e  ".    csound_bin
+000019f0: 203d 205f 6765 745f 6373 6f75 6e64 5f62   = _get_csound_b
+00001a00: 696e 6172 7928 6373 6f75 6e64 6578 6529  inary(csoundexe)
+00001a10: 0a20 2020 2069 6620 6e6f 7420 6373 6f75  .    if not csou
+00001a20: 6e64 5f62 696e 3a0a 2020 2020 2020 2020  nd_bin:.        
+00001a30: 7261 6973 6520 4f53 4572 726f 7228 2263  raise OSError("c
+00001a40: 736f 756e 6420 6269 6e61 7279 206e 6f74  sound binary not
+00001a50: 2066 6f75 6e64 2229 0a20 2020 2070 726f   found").    pro
+00001a60: 6320 3d20 7375 6270 726f 6365 7373 2e50  c = subprocess.P
+00001a70: 6f70 656e 285b 6373 6f75 6e64 5f62 696e  open([csound_bin
+00001a80: 2c20 222d 2d76 6572 7369 6f6e 225d 2c20  , "--version"], 
+00001a90: 7374 6465 7272 3d73 7562 7072 6f63 6573  stderr=subproces
+00001aa0: 732e 5049 5045 290a 2020 2020 7072 6f63  s.PIPE).    proc
+00001ab0: 2e77 6169 7428 290a 2020 2020 6173 7365  .wait().    asse
+00001ac0: 7274 2070 726f 632e 7374 6465 7272 2069  rt proc.stderr i
+00001ad0: 7320 6e6f 7420 4e6f 6e65 0a20 2020 206f  s not None.    o
+00001ae0: 7574 203d 2070 726f 632e 7374 6465 7272  ut = proc.stderr
+00001af0: 2e72 6561 6428 292e 6465 636f 6465 2827  .read().decode('
+00001b00: 6173 6369 6927 290a 2020 2020 666f 7220  ascii').    for 
+00001b10: 6c69 6e65 2069 6e20 6f75 742e 7370 6c69  line in out.spli
+00001b20: 746c 696e 6573 2829 3a0a 2020 2020 2020  tlines():.      
+00001b30: 2020 6966 206d 6174 6368 203a 3d20 7265    if match := re
+00001b40: 2e73 6561 7263 6828 7227 2d2d 4373 6f75  .search(r'--Csou
+00001b50: 6e64 5c73 2b76 6572 7369 6f6e 5c73 2b28  nd\s+version\s+(
+00001b60: 5c64 2b29 5c2e 285c 642b 2928 2e2a 2927  \d+)\.(\d+)(.*)'
+00001b70: 2c20 6c69 6e65 293a 0a20 2020 2020 2020  , line):.       
+00001b80: 2020 2020 206d 616a 6f72 203d 2069 6e74       major = int
+00001b90: 286d 6174 6368 2e67 726f 7570 2831 2929  (match.group(1))
+00001ba0: 0a20 2020 2020 2020 2020 2020 206d 696e  .            min
+00001bb0: 6f72 203d 2069 6e74 286d 6174 6368 2e67  or = int(match.g
+00001bc0: 726f 7570 2832 2929 0a20 2020 2020 2020  roup(2)).       
+00001bd0: 2020 2020 2072 6573 7420 3d20 6d61 7463       rest = matc
+00001be0: 682e 6772 6f75 7028 3329 0a20 2020 2020  h.group(3).     
+00001bf0: 2020 2020 2020 2072 6574 7572 6e20 6d61         return ma
+00001c00: 6a6f 722c 206d 696e 6f72 2c20 7265 7374  jor, minor, rest
+00001c10: 0a20 2020 2072 6169 7365 2056 616c 7565  .    raise Value
+00001c20: 4572 726f 7228 2243 6f75 6c64 206e 6f74  Error("Could not
+00001c30: 2066 696e 6420 6120 7665 7273 696f 6e20   find a version 
+00001c40: 6e75 6d62 6572 2069 6e20 7468 6520 6f75  number in the ou
+00001c50: 7470 7574 2229 0a0a 0a63 6c61 7373 205f  tput")...class _
+00001c60: 5365 7373 696f 6e3a 0a20 2020 2022 2222  Session:.    """
+00001c70: 0a20 2020 2053 696d 676c 6574 6f6e 2063  .    Simgleton c
+00001c80: 6c61 7373 2074 6f20 686f 6c64 2069 6e66  lass to hold inf
+00001c90: 6f72 6d61 7469 6f6e 2061 626f 7574 2074  ormation about t
+00001ca0: 6865 2073 6573 7369 6f6e 0a0a 2020 2020  he session..    
+00001cb0: 5468 6973 2063 6c61 7373 206b 6565 7073  This class keeps
+00001cc0: 2074 7261 636b 206f 6620 646f 776e 6c6f   track of downlo
+00001cd0: 6164 6564 2066 696c 6573 2c20 636c 6f6e  aded files, clon
+00001ce0: 6564 2072 6570 6f73 2c20 6574 632e 0a20  ed repos, etc.. 
+00001cf0: 2020 2022 2222 0a20 2020 2069 6e73 7461     """.    insta
+00001d00: 6e63 653a 205f 5365 7373 696f 6e20 7c20  nce: _Session | 
+00001d10: 4e6f 6e65 203d 204e 6f6e 650a 0a20 2020  None = None..   
+00001d20: 2064 6566 205f 5f6e 6577 5f5f 2863 6c73   def __new__(cls
+00001d30: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
+00001d40: 7329 3a0a 2020 2020 2020 2020 6966 205f  s):.        if _
+00001d50: 5365 7373 696f 6e2e 696e 7374 616e 6365  Session.instance
+00001d60: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00001d70: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00001d80: 205f 5365 7373 696f 6e2e 696e 7374 616e   _Session.instan
+00001d90: 6365 0a0a 2020 2020 2020 2020 696e 7374  ce..        inst
+00001da0: 616e 6365 203d 2073 7570 6572 2829 2e5f  ance = super()._
+00001db0: 5f6e 6577 5f5f 2863 6c73 2c20 2a61 7267  _new__(cls, *arg
+00001dc0: 732c 202a 2a6b 7761 7267 7329 0a20 2020  s, **kwargs).   
+00001dd0: 2020 2020 205f 5365 7373 696f 6e2e 696e       _Session.in
+00001de0: 7374 616e 6365 203d 2069 6e73 7461 6e63  stance = instanc
+00001df0: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
+00001e00: 2069 6e73 7461 6e63 650a 0a20 2020 2064   instance..    d
+00001e10: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
+00001e20: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+00001e30: 646f 776e 6c6f 6164 6564 5f66 696c 6573  downloaded_files
+00001e40: 3a20 6469 6374 5b73 7472 2c20 5061 7468  : dict[str, Path
+00001e50: 5d20 3d20 7b7d 0a20 2020 2020 2020 2073  ] = {}.        s
+00001e60: 656c 662e 636c 6f6e 6564 5f72 6570 6f73  elf.cloned_repos
+00001e70: 3a20 6469 6374 5b73 7472 2c20 5061 7468  : dict[str, Path
+00001e80: 5d20 3d20 7b7d 0a20 2020 2020 2020 2073  ] = {}.        s
+00001e90: 656c 662e 706c 6174 666f 726d 3a20 7374  elf.platform: st
+00001ea0: 7220 3d20 7b0a 2020 2020 2020 2020 2020  r = {.          
+00001eb0: 2020 276c 696e 7578 273a 2027 6c69 6e75    'linux': 'linu
+00001ec0: 7827 2c0a 2020 2020 2020 2020 2020 2020  x',.            
+00001ed0: 2764 6172 7769 6e27 3a20 276d 6163 6f73  'darwin': 'macos
+00001ee0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+00001ef0: 7769 6e33 3227 3a20 2777 696e 646f 7773  win32': 'windows
+00001f00: 270a 2020 2020 2020 2020 7d5b 7379 732e  '.        }[sys.
+00001f10: 706c 6174 666f 726d 5d0a 0a20 2020 2020  platform]..     
+00001f20: 2020 2073 656c 662e 6172 6368 6974 6563     self.architec
+00001f30: 7475 7265 203d 205f 706c 6174 666f 726d  ture = _platform
+00001f40: 5f61 7263 6869 7465 6374 7572 6528 290a  _architecture().
+00001f50: 0a20 2020 2020 2020 2073 656c 662e 706c  .        self.pl
+00001f60: 6174 666f 726d 6964 203d 2073 656c 662e  atformid = self.
+00001f70: 5f70 6c61 7466 6f72 6d5f 6964 2829 0a20  _platform_id(). 
+00001f80: 2020 2020 2020 2022 2222 5468 6520 7061         """The pa
+00001f90: 6972 203c 6f73 3e2d 3c61 7263 683e 2028  ir <os>-<arch> (
+00001fa0: 6c69 6e75 782d 7838 365f 3634 2c20 7769  linux-x86_64, wi
+00001fb0: 6e64 6f77 732d 7838 365f 3634 2c20 6d61  ndows-x86_64, ma
+00001fc0: 636f 732d 6172 6d36 342c 2065 7463 2222  cos-arm64, etc""
+00001fd0: 220a 0a20 2020 2020 2020 2073 656c 662e  "..        self.
+00001fe0: 6465 6275 6720 3d20 4661 6c73 650a 2020  debug = False.  
+00001ff0: 2020 2020 2020 6d61 6a6f 722c 206d 696e        major, min
+00002000: 6f72 203d 205f 6373 6f75 6e64 6c69 625f  or = _csoundlib_
+00002010: 7665 7273 696f 6e28 290a 2020 2020 2020  version().      
+00002020: 2020 7365 6c66 2e63 736f 756e 645f 7665    self.csound_ve
+00002030: 7273 696f 6e3a 2069 6e74 203d 206d 616a  rsion: int = maj
+00002040: 6f72 202a 2031 3030 3020 2b20 6d69 6e6f  or * 1000 + mino
+00002050: 7220 2a20 3130 0a20 2020 2020 2020 2073  r * 10.        s
+00002060: 656c 662e 7374 6f70 5f6f 6e5f 6572 726f  elf.stop_on_erro
+00002070: 7273 203d 2054 7275 650a 2020 2020 2020  rs = True.      
+00002080: 2020 7365 6c66 2e65 6e74 6974 6c65 6d65    self.entitleme
+00002090: 6e74 735f 7361 7665 6420 3d20 4661 6c73  nts_saved = Fals
+000020a0: 650a 2020 2020 2020 2020 7365 6c66 2e63  e.        self.c
+000020b0: 6163 6865 203d 207b 7d0a 0a20 2020 2064  ache = {}..    d
+000020c0: 6566 205f 706c 6174 666f 726d 5f69 6428  ef _platform_id(
+000020d0: 7365 6c66 2920 2d3e 2073 7472 3a0a 2020  self) -> str:.  
+000020e0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000020f0: 2020 5265 7475 726e 7320 6f6e 6520 6f66    Returns one of
+00002100: 2027 6c69 6e75 7827 2c20 2777 696e 646f   'linux', 'windo
+00002110: 7773 272c 2027 6d61 636f 7327 2028 696e  ws', 'macos' (in
+00002120: 7465 6c20 7838 365f 3634 2920 6f72 2074  tel x86_64) or t
+00002130: 6865 6972 2027 6172 6d36 3427 2076 6172  heir 'arm64' var
+00002140: 6961 6e74 3a0a 2020 2020 2020 2020 276d  iant:.        'm
+00002150: 6163 6f73 2d61 726d 3634 272c 2027 6c69  acos-arm64', 'li
+00002160: 6e75 782d 6172 6d36 3427 2c20 6574 632e  nux-arm64', etc.
+00002170: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00002180: 2020 2020 2072 6574 7572 6e20 6627 7b73       return f'{s
+00002190: 656c 662e 706c 6174 666f 726d 7d2d 7b73  elf.platform}-{s
+000021a0: 656c 662e 6172 6368 6974 6563 7475 7265  elf.architecture
+000021b0: 7d27 0a0a 0a5f 7365 7373 696f 6e20 3d20  }'..._session = 
+000021c0: 5f53 6573 7369 6f6e 2829 0a0a 0a40 6461  _Session()...@da
+000021d0: 7461 636c 6173 730a 636c 6173 7320 5f56  taclass.class _V
+000021e0: 6572 7369 6f6e 5261 6e67 653a 0a20 2020  ersionRange:.   
+000021f0: 206d 696e 7665 7273 696f 6e3a 2069 6e74   minversion: int
+00002200: 0a20 2020 206d 6178 7665 7273 696f 6e3a  .    maxversion:
+00002210: 2069 6e74 0a20 2020 2069 6e63 6c75 6465   int.    include
+00002220: 6d69 6e3a 2062 6f6f 6c20 3d20 5472 7565  min: bool = True
+00002230: 0a20 2020 2069 6e63 6c75 6465 6d61 783a  .    includemax:
+00002240: 2062 6f6f 6c20 3d20 4661 6c73 650a 0a20   bool = False.. 
+00002250: 2020 2064 6566 205f 5f70 6f73 745f 696e     def __post_in
+00002260: 6974 5f5f 2873 656c 6629 3a0a 2020 2020  it__(self):.    
+00002270: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
+00002280: 7461 6e63 6528 7365 6c66 2e6d 696e 7665  tance(self.minve
+00002290: 7273 696f 6e2c 2069 6e74 2920 616e 6420  rsion, int) and 
+000022a0: 7365 6c66 2e6d 696e 7665 7273 696f 6e20  self.minversion 
+000022b0: 3e3d 2036 3030 302c 2066 2247 6f74 207b  >= 6000, f"Got {
+000022c0: 7365 6c66 2e6d 696e 7665 7273 696f 6e7d  self.minversion}
+000022d0: 220a 2020 2020 2020 2020 6173 7365 7274  ".        assert
+000022e0: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
+000022f0: 2e6d 6178 7665 7273 696f 6e2c 2069 6e74  .maxversion, int
+00002300: 2920 616e 6420 7365 6c66 2e6d 6178 7665  ) and self.maxve
+00002310: 7273 696f 6e20 3e3d 2036 3030 302c 2066  rsion >= 6000, f
+00002320: 2247 6f74 207b 7365 6c66 2e6d 6178 7665  "Got {self.maxve
+00002330: 7273 696f 6e7d 220a 0a20 2020 2064 6566  rsion}"..    def
+00002340: 2063 6f6e 7461 696e 7328 7365 6c66 2c20   contains(self, 
+00002350: 7665 7273 696f 6e69 643a 2069 6e74 2920  versionid: int) 
+00002360: 2d3e 2062 6f6f 6c3a 0a20 2020 2020 2020  -> bool:.       
+00002370: 2022 2222 0a20 2020 2020 2020 2052 6574   """.        Ret
+00002380: 7572 6e73 2054 7275 6520 6966 2076 6572  urns True if ver
+00002390: 7369 6f6e 2069 7320 636f 6e74 6169 6e65  sion is containe
+000023a0: 6420 7769 7468 696e 2074 6869 7320 7665  d within this ve
+000023b0: 7273 696f 6e20 7261 6e67 650a 0a20 2020  rsion range..   
+000023c0: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+000023d0: 2020 2020 2020 2076 6572 7369 6f6e 3a20         version: 
+000023e0: 6120 7665 7273 696f 6e20 6964 2c20 7768  a version id, wh
+000023f0: 6572 6520 7665 7273 696f 6e20 6964 2069  ere version id i
+00002400: 7320 6060 696e 7428 6d61 6a6f 722e 6d69  s ``int(major.mi
+00002410: 6e6f 7220 2a20 3130 3030 2960 600a 0a20  nor * 1000)``.. 
+00002420: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
+00002430: 2020 2020 2020 2020 2020 2020 5472 7565              True
+00002440: 2069 6620 2a76 6572 7369 6f6e 2a20 6973   if *version* is
+00002450: 2077 6974 6869 6e20 7468 6973 2072 616e   within this ran
+00002460: 6765 0a0a 2020 2020 2020 2020 4578 616d  ge..        Exam
+00002470: 706c 650a 2020 2020 2020 2020 2d2d 2d2d  ple.        ----
+00002480: 2d2d 2d0a 0a20 2020 2020 2020 2020 2020  ---..           
+00002490: 203e 3e3e 2076 203d 205f 5665 7273 696f   >>> v = _Versio
+000024a0: 6e52 616e 6765 286d 696e 7665 7273 696f  nRange(minversio
+000024b0: 6e3d 3631 3830 2c20 6d61 7876 6572 7369  n=6180, maxversi
+000024c0: 6f6e 3d37 3030 302c 2069 6e63 6c75 6465  on=7000, include
+000024d0: 6d69 6e3d 5472 7565 2c20 696e 636c 7564  min=True, includ
+000024e0: 656d 6178 3d46 616c 7365 290a 2020 2020  emax=False).    
+000024f0: 2020 2020 2020 2020 3e3e 3e20 762e 636f          >>> v.co
+00002500: 6e74 6169 6e73 2836 3139 3029 0a20 2020  ntains(6190).   
+00002510: 2020 2020 2020 2020 2054 7275 650a 2020           True.  
+00002520: 2020 2020 2020 2020 2020 3e3e 3e20 762e            >>> v.
+00002530: 636f 6e74 6169 6e73 2837 3030 3029 0a20  contains(7000). 
+00002540: 2020 2020 2020 2020 2020 2046 616c 7365             False
+00002550: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00002560: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00002570: 7374 616e 6365 2876 6572 7369 6f6e 6964  stance(versionid
+00002580: 2c20 696e 7429 206f 7220 7665 7273 696f  , int) or versio
+00002590: 6e69 6420 3c20 3630 3030 3a0a 2020 2020  nid < 6000:.    
+000025a0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+000025b0: 6c75 6545 7272 6f72 2866 2249 6e76 616c  lueError(f"Inval
+000025c0: 6964 2076 6572 7369 6f6e 6964 2c20 676f  id versionid, go
+000025d0: 7420 7b76 6572 7369 6f6e 6964 7d22 290a  t {versionid}").
+000025e0: 2020 2020 2020 2020 6120 3d20 7665 7273          a = vers
+000025f0: 696f 6e69 6420 3e20 7365 6c66 2e6d 696e  ionid > self.min
+00002600: 7665 7273 696f 6e20 6966 206e 6f74 2073  version if not s
+00002610: 656c 662e 696e 636c 7564 656d 696e 2065  elf.includemin e
+00002620: 6c73 6520 7665 7273 696f 6e69 6420 3e3d  lse versionid >=
+00002630: 2073 656c 662e 6d69 6e76 6572 7369 6f6e   self.minversion
+00002640: 0a20 2020 2020 2020 206d 6178 7665 7273  .        maxvers
+00002650: 696f 6e20 3d20 7365 6c66 2e6d 6178 7665  ion = self.maxve
+00002660: 7273 696f 6e20 6f72 2039 3939 3939 0a20  rsion or 99999. 
+00002670: 2020 2020 2020 2062 203d 2076 6572 7369         b = versi
+00002680: 6f6e 6964 203c 206d 6178 7665 7273 696f  onid < maxversio
+00002690: 6e20 6966 206e 6f74 2073 656c 662e 696e  n if not self.in
+000026a0: 636c 7564 656d 6178 2065 6c73 6520 7665  cludemax else ve
+000026b0: 7273 696f 6e69 6420 3c3d 206d 6178 7665  rsionid <= maxve
+000026c0: 7273 696f 6e0a 2020 2020 2020 2020 7265  rsion.        re
+000026d0: 7475 726e 2061 2061 6e64 2062 0a0a 0a64  turn a and b...d
+000026e0: 6566 205f 7465 726d 7369 7a65 2877 6964  ef _termsize(wid
+000026f0: 7468 3d38 302c 2068 6569 6768 743d 3235  th=80, height=25
+00002700: 2920 2d3e 2074 7570 6c65 5b69 6e74 2c20  ) -> tuple[int, 
+00002710: 696e 745d 3a0a 2020 2020 6966 206e 6f74  int]:.    if not
+00002720: 2073 7973 2e73 7464 6f75 742e 6973 6174   sys.stdout.isat
+00002730: 7479 2829 3a0a 2020 2020 2020 2020 7265  ty():.        re
+00002740: 7475 726e 2077 6964 7468 2c20 6865 6967  turn width, heig
+00002750: 6874 0a0a 2020 2020 7472 793a 0a20 2020  ht..    try:.   
+00002760: 2020 2020 2074 203d 206f 732e 6765 745f       t = os.get_
+00002770: 7465 726d 696e 616c 5f73 697a 6528 290a  terminal_size().
+00002780: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+00002790: 2e63 6f6c 756d 6e73 2c20 742e 6c69 6e65  .columns, t.line
+000027a0: 730a 2020 2020 6578 6365 7074 2045 7863  s.    except Exc
+000027b0: 6570 7469 6f6e 3a0a 2020 2020 2020 2020  eption:.        
+000027c0: 5f64 6562 7567 2866 2243 6f75 6c64 206e  _debug(f"Could n
+000027d0: 6f74 2064 6574 6572 6d69 6e65 2074 6572  ot determine ter
+000027e0: 6d69 6e61 6c20 7369 7a65 2c20 7573 696e  minal size, usin
+000027f0: 6720 6465 6661 756c 7420 7661 6c75 6573  g default values
+00002800: 207b 7769 6474 683d 7d2c 207b 6865 6967   {width=}, {heig
+00002810: 6874 3d7d 2229 0a20 2020 2020 2020 2072  ht=}").        r
+00002820: 6574 7572 6e20 7769 6474 682c 2068 6569  eturn width, hei
+00002830: 6768 740a 0a0a 6465 6620 5f76 6572 7369  ght...def _versi
+00002840: 6f6e 5f74 6f5f 7665 7273 696f 6e69 6428  on_to_versionid(
+00002850: 7665 7273 696f 6e73 7472 3a20 7374 7229  versionstr: str)
+00002860: 202d 3e20 696e 743a 0a20 2020 2069 6620   -> int:.    if 
+00002870: 272e 2720 6e6f 7420 696e 2076 6572 7369  '.' not in versi
+00002880: 6f6e 7374 723a 0a20 2020 2020 2020 2072  onstr:.        r
+00002890: 6574 7572 6e20 696e 7428 7665 7273 696f  eturn int(versio
+000028a0: 6e73 7472 290a 2020 2020 6d61 6a6f 7273  nstr).    majors
+000028b0: 2c20 6d69 6e6f 7273 203d 2076 6572 7369  , minors = versi
+000028c0: 6f6e 7374 722e 7370 6c69 7428 272e 272c  onstr.split('.',
+000028d0: 206d 6178 7370 6c69 743d 3129 0a20 2020   maxsplit=1).   
+000028e0: 2070 6174 6368 203d 2030 0a20 2020 2069   patch = 0.    i
+000028f0: 6620 272e 2720 696e 206d 696e 6f72 733a  f '.' in minors:
+00002900: 0a20 2020 2020 2020 206d 696e 6f72 732c  .        minors,
+00002910: 2070 6174 6368 7320 3d20 6d69 6e6f 7273   patchs = minors
+00002920: 2e73 706c 6974 2827 2e27 2c20 6d61 7873  .split('.', maxs
+00002930: 706c 6974 3d31 290a 2020 2020 2020 2020  plit=1).        
+00002940: 7061 7463 6820 3d20 696e 7428 7061 7463  patch = int(patc
+00002950: 6873 290a 2020 2020 2020 2020 6173 7365  hs).        asse
+00002960: 7274 2030 203c 3d20 7061 7463 6820 3c20  rt 0 <= patch < 
+00002970: 3130 0a20 2020 2076 6572 7369 6f6e 6964  10.    versionid
+00002980: 203d 2069 6e74 286d 616a 6f72 7329 202a   = int(majors) *
+00002990: 2031 3030 3020 2b20 696e 7428 6d69 6e6f   1000 + int(mino
+000029a0: 7273 2920 2a20 3130 202b 2070 6174 6368  rs) * 10 + patch
+000029b0: 0a20 2020 2072 6574 7572 6e20 7665 7273  .    return vers
+000029c0: 696f 6e69 640a 0a0a 6465 6620 5f70 6172  ionid...def _par
+000029d0: 7365 5f76 6572 7369 6f6e 2876 6572 7369  se_version(versi
+000029e0: 6f6e 7374 723a 2073 7472 2920 2d3e 205f  onstr: str) -> _
+000029f0: 5665 7273 696f 6e52 616e 6765 3a0a 2020  VersionRange:.  
+00002a00: 2020 7665 7273 696f 6e73 7472 203d 2076    versionstr = v
+00002a10: 6572 7369 6f6e 7374 722e 7265 706c 6163  ersionstr.replac
+00002a20: 6528 2720 272c 2027 2729 0a20 2020 2069  e(' ', '').    i
+00002a30: 6620 7665 7273 696f 6e73 7472 2e73 7461  f versionstr.sta
+00002a40: 7274 7377 6974 6828 223d 3d22 293a 0a20  rtswith("=="):. 
+00002a50: 2020 2020 2020 2065 7861 6374 7665 7273         exactvers
+00002a60: 696f 6e73 7472 203d 2076 6572 7369 6f6e  ionstr = version
+00002a70: 7374 725b 323a 5d0a 2020 2020 2020 2020  str[2:].        
+00002a80: 7665 7273 696f 6e69 6420 3d20 5f76 6572  versionid = _ver
+00002a90: 7369 6f6e 5f74 6f5f 7665 7273 696f 6e69  sion_to_versioni
+00002aa0: 6428 6578 6163 7476 6572 7369 6f6e 7374  d(exactversionst
+00002ab0: 7229 0a20 2020 2020 2020 2072 6574 7572  r).        retur
+00002ac0: 6e20 5f56 6572 7369 6f6e 5261 6e67 6528  n _VersionRange(
+00002ad0: 6d69 6e76 6572 7369 6f6e 3d76 6572 7369  minversion=versi
+00002ae0: 6f6e 6964 2c20 6d61 7876 6572 7369 6f6e  onid, maxversion
+00002af0: 3d76 6572 7369 6f6e 6964 2c20 696e 636c  =versionid, incl
+00002b00: 7564 656d 696e 3d54 7275 652c 2069 6e63  udemin=True, inc
+00002b10: 6c75 6465 6d61 783d 5472 7565 290a 0a20  ludemax=True).. 
+00002b20: 2020 2070 6172 7473 203d 2072 652e 7370     parts = re.sp
+00002b30: 6c69 7428 7222 283e 3d7c 3c3d 7c3e 7c3c  lit(r"(>=|<=|>|<
+00002b40: 2922 2c20 7665 7273 696f 6e73 7472 290a  )", versionstr).
+00002b50: 2020 2020 7061 7274 7320 3d20 5b70 2066      parts = [p f
+00002b60: 6f72 2070 2069 6e20 7061 7274 7320 6966  or p in parts if
+00002b70: 2070 5d0a 2020 2020 6966 206c 656e 2870   p].    if len(p
+00002b80: 6172 7473 2920 2520 3220 213d 2030 3a0a  arts) % 2 != 0:.
+00002b90: 2020 2020 2020 2020 7261 6973 6520 5061          raise Pa
+00002ba0: 7273 6545 7272 6f72 2866 2243 6f75 6c64  rseError(f"Could
+00002bb0: 206e 6f74 2070 6172 7365 2076 6572 7369   not parse versi
+00002bc0: 6f6e 2072 616e 6765 3a20 7b76 6572 7369  on range: {versi
+00002bd0: 6f6e 7374 727d 2c20 7061 7274 733a 207b  onstr}, parts: {
+00002be0: 7061 7274 737d 2229 0a20 2020 206d 696e  parts}").    min
+00002bf0: 7665 7273 696f 6e20 3d20 3630 3030 0a20  version = 6000. 
+00002c00: 2020 206d 6178 7665 7273 696f 6e20 3d20     maxversion = 
+00002c10: 3939 3939 0a20 2020 2069 6e63 6c75 6465  9999.    include
+00002c20: 6d61 7820 3d20 4661 6c73 650a 2020 2020  max = False.    
+00002c30: 696e 636c 7564 656d 696e 203d 2046 616c  includemin = Fal
+00002c40: 7365 0a20 2020 2066 6f72 206f 702c 2076  se.    for op, v
+00002c50: 6572 7369 6f6e 2069 6e20 7a69 7028 7061  ersion in zip(pa
+00002c60: 7274 735b 3a3a 325d 2c20 7061 7274 735b  rts[::2], parts[
+00002c70: 313a 3a32 5d29 3a0a 2020 2020 2020 2020  1::2]):.        
+00002c80: 6173 7365 7274 206f 7020 696e 2028 273c  assert op in ('<
+00002c90: 272c 2027 3e27 2c20 273c 3d27 2c20 273e  ', '>', '<=', '>
+00002ca0: 3d27 290a 2020 2020 2020 2020 6966 206f  =').        if o
+00002cb0: 705b 305d 203d 3d20 273c 273a 0a20 2020  p[0] == '<':.   
+00002cc0: 2020 2020 2020 2020 206d 6178 7665 7273           maxvers
+00002cd0: 696f 6e20 3d20 5f76 6572 7369 6f6e 5f74  ion = _version_t
+00002ce0: 6f5f 7665 7273 696f 6e69 6428 7665 7273  o_versionid(vers
+00002cf0: 696f 6e29 0a20 2020 2020 2020 2020 2020  ion).           
+00002d00: 2069 6620 6f70 5b2d 315d 203d 3d20 273d   if op[-1] == '=
+00002d10: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00002d20: 2020 2069 6e63 6c75 6465 6d61 7820 3d20     includemax = 
+00002d30: 5472 7565 0a20 2020 2020 2020 2065 6c69  True.        eli
+00002d40: 6620 6f70 5b30 5d20 3d3d 2027 3e27 3a0a  f op[0] == '>':.
+00002d50: 2020 2020 2020 2020 2020 2020 6d69 6e76              minv
+00002d60: 6572 7369 6f6e 203d 205f 7665 7273 696f  ersion = _versio
+00002d70: 6e5f 746f 5f76 6572 7369 6f6e 6964 2876  n_to_versionid(v
+00002d80: 6572 7369 6f6e 290a 2020 2020 2020 2020  ersion).        
+00002d90: 2020 2020 6966 206f 705b 2d31 5d20 3d3d      if op[-1] ==
+00002da0: 2027 3d27 3a0a 2020 2020 2020 2020 2020   '=':.          
+00002db0: 2020 2020 2020 696e 636c 7564 656d 696e        includemin
+00002dc0: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+00002dd0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00002de0: 2020 7261 6973 6520 5061 7273 6545 7272    raise ParseErr
+00002df0: 6f72 2866 2243 6f75 6c64 206e 6f74 2070  or(f"Could not p
+00002e00: 6172 7365 2076 6572 7369 6f6e 2072 616e  arse version ran
+00002e10: 6765 3a20 7b76 6572 7369 6f6e 7374 727d  ge: {versionstr}
+00002e20: 2c20 6f70 6572 6174 6f72 207b 6f70 7d20  , operator {op} 
+00002e30: 6e6f 7420 7375 7070 6f72 7465 6422 290a  not supported").
+00002e40: 2020 2020 7265 7475 726e 205f 5665 7273      return _Vers
+00002e50: 696f 6e52 616e 6765 286d 696e 7665 7273  ionRange(minvers
+00002e60: 696f 6e3d 6d69 6e76 6572 7369 6f6e 2c20  ion=minversion, 
+00002e70: 6d61 7876 6572 7369 6f6e 3d6d 6178 7665  maxversion=maxve
+00002e80: 7273 696f 6e2c 2069 6e63 6c75 6465 6d69  rsion, includemi
+00002e90: 6e3d 696e 636c 7564 656d 696e 2c20 696e  n=includemin, in
+00002ea0: 636c 7564 656d 6178 3d69 6e63 6c75 6465  cludemax=include
+00002eb0: 6d61 7829 0a0a 0a64 6566 205f 6162 6272  max)...def _abbr
+00002ec0: 6576 2873 3a20 7374 722c 206d 6178 6c65  ev(s: str, maxle
+00002ed0: 6e3a 2069 6e74 2920 2d3e 2073 7472 3a0a  n: int) -> str:.
+00002ee0: 2020 2020 2222 2241 6262 7265 7669 6174      """Abbreviat
+00002ef0: 6520 7374 7269 6e67 2222 220a 2020 2020  e string""".    
+00002f00: 6173 7365 7274 206d 6178 6c65 6e20 3e20  assert maxlen > 
+00002f10: 3138 0a20 2020 206c 656e 7320 3d20 6c65  18.    lens = le
+00002f20: 6e28 7329 0a20 2020 2069 6620 6c65 6e73  n(s).    if lens
+00002f30: 203c 206d 6178 6c65 6e3a 0a20 2020 2020   < maxlen:.     
+00002f40: 2020 2072 6574 7572 6e20 730a 2020 2020     return s.    
+00002f50: 7269 6768 746c 656e 203d 206d 696e 2838  rightlen = min(8
+00002f60: 2c20 6c65 6e73 202f 2f20 3529 0a20 2020  , lens // 5).   
+00002f70: 2072 6574 7572 6e20 6622 7b73 5b3a 6c65   return f"{s[:le
+00002f80: 6e73 202d 2072 6967 6874 6c65 6e20 2d20  ns - rightlen - 
+00002f90: 315d 7de2 80a6 7b73 5b2d 7269 6768 746c  1]}...{s[-rightl
+00002fa0: 656e 3a5d 7d22 0a0a 0a64 6566 205f 6d61  en:]}"...def _ma
+00002fb0: 696e 696e 6465 785f 7265 7472 6965 7665  inindex_retrieve
+00002fc0: 2864 6179 735f 7468 7265 7368 6f6c 643d  (days_threshold=
+00002fd0: 3130 2920 2d3e 204d 6169 6e49 6e64 6578  10) -> MainIndex
+00002fe0: 207c 204e 6f6e 653a 0a20 2020 2022 2222   | None:.    """
+00002ff0: 0a20 2020 2054 7279 2074 6f20 7265 7472  .    Try to retr
+00003000: 6965 7665 2061 2070 7265 7669 6f75 736c  ieve a previousl
+00003010: 7920 7069 636b 6c65 6420 6d61 696e 696e  y pickled mainin
+00003020: 6465 780a 2020 2020 2222 220a 2020 2020  dex.    """.    
+00003030: 7069 636b 6c65 6669 6c65 203d 205f 4d41  picklefile = _MA
+00003040: 494e 494e 4445 585f 5049 434b 4c45 5f46  ININDEX_PICKLE_F
+00003050: 494c 450a 2020 2020 6966 206e 6f74 2070  ILE.    if not p
+00003060: 6963 6b6c 6566 696c 652e 6578 6973 7473  icklefile.exists
+00003070: 2829 3a0a 2020 2020 2020 2020 7265 7475  ():.        retu
+00003080: 726e 204e 6f6e 650a 2020 2020 696d 706f  rn None.    impo
+00003090: 7274 2074 696d 650a 2020 2020 696d 706f  rt time.    impo
+000030a0: 7274 2070 6963 6b6c 650a 2020 2020 6461  rt pickle.    da
+000030b0: 7973 5f73 696e 6365 5f6c 6173 745f 6d6f  ys_since_last_mo
+000030c0: 6469 6669 6361 7469 6f6e 203d 2028 7069  dification = (pi
+000030d0: 636b 6c65 6669 6c65 2e73 7461 7428 292e  cklefile.stat().
+000030e0: 7374 5f6d 7469 6d65 202d 2074 696d 652e  st_mtime - time.
+000030f0: 7469 6d65 2829 2920 2f20 3836 3430 300a  time()) / 86400.
+00003100: 2020 2020 6966 2064 6179 735f 7369 6e63      if days_sinc
+00003110: 655f 6c61 7374 5f6d 6f64 6966 6963 6174  e_last_modificat
+00003120: 696f 6e20 3e20 6461 7973 5f74 6872 6573  ion > days_thres
+00003130: 686f 6c64 3a0a 2020 2020 2020 2020 7265  hold:.        re
+00003140: 7475 726e 204e 6f6e 650a 2020 2020 5f64  turn None.    _d
+00003150: 6562 7567 2822 5265 6372 6561 7469 6e67  ebug("Recreating
+00003160: 206d 6169 6e20 696e 6465 7820 6672 6f6d   main index from
+00003170: 2070 6963 6b6c 6564 2076 6572 7369 6f6e   pickled version
+00003180: 2229 0a20 2020 2066 203d 206f 7065 6e28  ").    f = open(
+00003190: 7069 636b 6c65 6669 6c65 2c20 2272 6222  picklefile, "rb"
+000031a0: 290a 2020 2020 7472 793a 0a20 2020 2020  ).    try:.     
+000031b0: 2020 2072 6574 7572 6e20 7069 636b 6c65     return pickle
+000031c0: 2e6c 6f61 6428 6629 0a20 2020 2065 7863  .load(f).    exc
+000031d0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+000031e0: 2065 3a0a 2020 2020 2020 2020 5f65 7272   e:.        _err
+000031f0: 6f72 6d73 6728 6622 436f 756c 6420 6e6f  ormsg(f"Could no
+00003200: 7420 7265 7472 6965 7665 206d 6169 6e69  t retrieve maini
+00003210: 6e64 6578 2066 726f 6d20 7365 7269 616c  ndex from serial
+00003220: 697a 6564 2066 696c 653a 207b 657d 2229  ized file: {e}")
+00003230: 0a20 2020 2020 2020 205f 6465 6275 6728  .        _debug(
+00003240: 6622 5365 7269 616c 697a 6564 2066 696c  f"Serialized fil
+00003250: 6520 287b 7069 636b 6c65 6669 6c65 7d29  e ({picklefile})
+00003260: 2072 656d 6f76 6564 2229 0a20 2020 2020   removed").     
+00003270: 2020 206f 732e 7265 6d6f 7665 2870 6963     os.remove(pic
+00003280: 6b6c 6566 696c 6529 0a20 2020 2020 2020  klefile).       
+00003290: 2072 6574 7572 6e20 4e6f 6e65 0a0a 0a64   return None...d
+000032a0: 6566 205f 6973 5f67 6974 5f72 6570 6f28  ef _is_git_repo(
+000032b0: 7061 7468 3a20 7374 7220 7c20 5061 7468  path: str | Path
+000032c0: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2022  ) -> bool:.    "
+000032d0: 2222 0a20 2020 2049 6620 6070 6174 6860  "".    If `path`
+000032e0: 2061 2076 616c 6964 2067 6974 2072 6570   a valid git rep
+000032f0: 6f3f 0a20 2020 2022 2222 0a20 2020 2023  o?.    """.    #
+00003300: 2076 6961 2068 7474 7073 3a2f 2f72 656d   via https://rem
+00003310: 6172 6b61 626c 656d 6172 6b2e 6f72 672f  arkablemark.org/
+00003320: 626c 6f67 2f32 3032 302f 3036 2f30 352f  blog/2020/06/05/
+00003330: 6368 6563 6b2d 6769 742d 7265 706f 7369  check-git-reposi
+00003340: 746f 7279 2f0a 2020 2020 6966 2069 7369  tory/.    if isi
+00003350: 6e73 7461 6e63 6528 7061 7468 2c20 5061  nstance(path, Pa
+00003360: 7468 293a 0a20 2020 2020 2020 2070 6174  th):.        pat
+00003370: 6820 3d20 7061 7468 2e61 735f 706f 7369  h = path.as_posi
+00003380: 7828 290a 2020 2020 6f75 7420 3d20 7375  x().    out = su
+00003390: 6270 726f 6365 7373 2e63 6865 636b 5f6f  bprocess.check_o
+000033a0: 7574 7075 7428 5b22 6769 7422 2c20 222d  utput(["git", "-
+000033b0: 4322 2c20 7061 7468 2c20 2272 6576 2d70  C", path, "rev-p
+000033c0: 6172 7365 222c 2022 2d2d 6973 2d69 6e73  arse", "--is-ins
+000033d0: 6964 652d 776f 726b 2d74 7265 6522 5d29  ide-work-tree"])
+000033e0: 2e64 6563 6f64 6528 2275 7466 2d38 2229  .decode("utf-8")
+000033f0: 2e73 7472 6970 2829 0a20 2020 2072 6574  .strip().    ret
+00003400: 7572 6e20 6f75 7420 3d3d 2022 7472 7565  urn out == "true
+00003410: 220a 0a0a 6465 6620 5f67 6974 5f72 6570  "...def _git_rep
+00003420: 6f6e 616d 6528 7572 6c3a 2073 7472 2920  oname(url: str) 
+00003430: 2d3e 2073 7472 3a0a 2020 2020 2222 220a  -> str:.    """.
+00003440: 2020 2020 5265 7475 726e 7320 7468 6520      Returns the 
+00003450: 6e61 6d65 2066 6f20 7468 6520 6769 7420  name fo the git 
+00003460: 7265 706f 7369 746f 7279 2067 6976 656e  repository given
+00003470: 2061 7320 7572 6c0a 0a20 2020 203d 3d3d   as url..    ===
+00003480: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003490: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000034a0: 3d3d 3d3d 2020 3d3d 3d3d 3d3d 3d0a 2020  ====  =======.  
+000034b0: 2020 7572 6c20 2020 2020 2020 2020 2020    url           
+000034c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000034d0: 2020 2020 2020 2020 2020 206e 616d 650a             name.
+000034e0: 2020 2020 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d      ============
+000034f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003500: 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 203d 3d3d  ===========  ===
+00003510: 3d3d 3d3d 0a20 2020 2068 7474 7073 3a2f  ====.    https:/
+00003520: 2f67 6974 6875 622e 636f 6d2f 7573 6572  /github.com/user
+00003530: 2f66 6f6f 2e67 6974 2020 2020 2020 2020  /foo.git        
+00003540: 2020 666f 6f0a 2020 2020 6874 7470 733a    foo.    https:
+00003550: 2f2f 6769 746c 6162 2e63 6f6d 2f62 617a  //gitlab.com/baz
+00003560: 2f62 6172 2e67 6974 2020 2020 2020 2020  /bar.git        
+00003570: 2020 2062 6172 0a20 2020 203d 3d3d 3d3d     bar.    =====
+00003580: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00003590: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000035a0: 3d3d 2020 3d3d 3d3d 3d3d 3d0a 2020 2020  ==  =======.    
+000035b0: 2222 220a 2020 2020 7061 7274 7320 3d20  """.    parts = 
+000035c0: 7572 6c2e 7370 6c69 7428 222f 2229 0a20  url.split("/"). 
+000035d0: 2020 2069 6620 6e6f 7420 7061 7274 735b     if not parts[
+000035e0: 2d31 5d2e 656e 6473 7769 7468 2822 2e67  -1].endswith(".g
+000035f0: 6974 2229 3a0a 2020 2020 2020 2020 7261  it"):.        ra
+00003600: 6973 6520 5661 6c75 6545 7272 6f72 2866  ise ValueError(f
+00003610: 2241 2067 6974 2075 726c 2073 686f 756c  "A git url shoul
+00003620: 6420 616c 7761 7973 2065 6e64 2069 6e20  d always end in 
+00003630: 272e 6769 7427 3a20 7b75 726c 7d22 290a  '.git': {url}").
+00003640: 2020 2020 7265 7475 726e 2070 6172 7473      return parts
+00003650: 5b2d 315d 2e72 7370 6c69 7428 222e 222c  [-1].rsplit(".",
+00003660: 206d 6178 7370 6c69 743d 3129 5b30 5d0a   maxsplit=1)[0].
+00003670: 0a0a 6465 6620 5f69 735f 6769 745f 7572  ..def _is_git_ur
+00003680: 6c28 7572 6c3a 2073 7472 2920 2d3e 2062  l(url: str) -> b
+00003690: 6f6f 6c3a 0a20 2020 2022 2222 0a20 2020  ool:.    """.   
+000036a0: 2049 7320 6075 726c 6020 616e 2075 726c   Is `url` an url
+000036b0: 2074 6f20 6120 6769 7420 7265 706f 3f0a   to a git repo?.
+000036c0: 2020 2020 2222 220a 2020 2020 7265 7475      """.    retu
+000036d0: 726e 205f 6973 5f75 726c 2875 726c 2920  rn _is_url(url) 
+000036e0: 616e 6420 7572 6c2e 656e 6473 7769 7468  and url.endswith
+000036f0: 2822 2e67 6974 2229 0a0a 0a64 6566 205f  (".git")...def _
+00003700: 6465 6275 6728 2a6d 7367 732c 206c 6a75  debug(*msgs, lju
+00003710: 7374 3d32 3029 202d 3e20 4e6f 6e65 3a0a  st=20) -> None:.
+00003720: 2020 2020 2222 2220 5072 696e 7420 6465      """ Print de
+00003730: 6275 6720 696e 666f 206f 6e6c 7920 6966  bug info only if
+00003740: 2064 6562 7567 6769 6e67 2069 7320 7475   debugging is tu
+00003750: 726e 6564 206f 6e20 2222 220a 2020 2020  rned on """.    
+00003760: 6966 205f 7365 7373 696f 6e2e 6465 6275  if _session.debu
+00003770: 673a 0a20 2020 2020 2020 2063 616c 6c65  g:.        calle
+00003780: 7220 3d20 5f61 6262 7265 7628 5f69 6e73  r = _abbrev(_ins
+00003790: 7065 6374 2e73 7461 636b 2829 5b31 5d5b  pect.stack()[1][
+000037a0: 335d 2c20 6c6a 7573 7429 0a20 2020 2020  3], ljust).     
+000037b0: 2020 2070 7269 6e74 2866 2244 4542 5547     print(f"DEBUG
+000037c0: 3a7b 6361 6c6c 6572 2e6c 6a75 7374 286c  :{caller.ljust(l
+000037d0: 6a75 7374 297d 3a22 2c20 2a6d 7367 732c  just)}:", *msgs,
+000037e0: 2066 696c 653d 7379 732e 7374 6465 7272   file=sys.stderr
+000037f0: 290a 0a0a 6465 6620 5f65 7272 6f72 6d73  )...def _errorms
+00003800: 6728 6d73 673a 2073 7472 2920 2d3e 204e  g(msg: str) -> N
+00003810: 6f6e 653a 0a20 2020 2022 2222 2050 7269  one:.    """ Pri
+00003820: 6e74 2065 7272 6f72 206d 6573 7361 6765  nt error message
+00003830: 2022 2222 0a20 2020 206c 696e 6573 203d   """.    lines =
+00003840: 206d 7367 2e73 706c 6974 6c69 6e65 7328   msg.splitlines(
+00003850: 290a 2020 2020 7072 696e 7428 222a 2a20  ).    print("** 
+00003860: 4572 726f 723a 222c 206c 696e 6573 5b30  Error:", lines[0
+00003870: 5d2c 2066 696c 653d 7379 732e 7374 6465  ], file=sys.stde
+00003880: 7272 290a 2020 2020 666f 7220 6c69 6e65  rr).    for line
+00003890: 2069 6e20 6c69 6e65 735b 313a 5d3a 0a20   in lines[1:]:. 
+000038a0: 2020 2020 2020 2070 7269 6e74 2822 2020         print("  
+000038b0: 2020 2020 2020 2022 2c20 6c69 6e65 2c20         ", line, 
+000038c0: 6669 6c65 3d73 7973 2e73 7464 6572 7229  file=sys.stderr)
+000038d0: 0a0a 0a64 6566 205f 696e 666f 282a 6d73  ...def _info(*ms
+000038e0: 6773 3a20 7374 7229 202d 3e20 4e6f 6e65  gs: str) -> None
+000038f0: 3a0a 2020 2020 7072 696e 7428 2a6d 7367  :.    print(*msg
+00003900: 7329 0a0a 0a63 6c61 7373 2045 7272 6f72  s)...class Error
+00003910: 4d73 6728 7374 7229 3a0a 2020 2020 7061  Msg(str):.    pa
+00003920: 7373 0a0a 0a40 6461 7461 636c 6173 730a  ss...@dataclass.
+00003930: 636c 6173 7320 4173 7365 743a 0a20 2020  class Asset:.   
+00003940: 2022 2222 0a20 2020 2041 6e20 4173 7365   """.    An Asse
+00003950: 7420 6465 7363 7269 6265 7320 616e 7920  t describes any 
+00003960: 6669 6c65 2f66 696c 6573 2064 6973 7472  file/files distr
+00003970: 6962 7574 6564 2061 6c6f 6e67 7369 6465  ibuted alongside
+00003980: 2061 2070 6c75 6769 6e0a 0a20 2020 2054   a plugin..    T
+00003990: 6865 2075 7365 2063 6173 6520 6973 2066  he use case is f
+000039a0: 6f72 2064 6174 6120 6669 6c65 7320 7768  or data files wh
+000039b0: 6963 6820 6172 6520 6e65 6564 6564 2062  ich are needed b
+000039c0: 7920 6120 706c 7567 696e 2061 7420 7275  y a plugin at ru
+000039d0: 6e74 696d 650a 0a20 2020 2041 7474 7269  ntime..    Attri
+000039e0: 6273 3a0a 2020 2020 2020 2020 736f 7572  bs:.        sour
+000039f0: 6365 3a20 7468 6520 736f 7572 6365 2077  ce: the source w
+00003a00: 6865 7265 2074 6f20 6765 7420 7468 6520  here to get the 
+00003a10: 6173 7365 7473 2066 726f 6d2e 2049 7420  assets from. It 
+00003a20: 6361 6e20 6265 2061 2075 726c 2074 6f20  can be a url to 
+00003a30: 6120 6769 7420 7265 706f 7369 746f 7279  a git repository
+00003a40: 2c0a 2020 2020 2020 2020 2020 2020 7468  ,.            th
+00003a50: 6520 6469 7265 6374 2075 726c 2074 6f20  e direct url to 
+00003a60: 6120 646f 776e 6c6f 6164 6162 6c65 2066  a downloadable f
+00003a70: 696c 652f 7a69 7020 6669 6c65 206f 7220  ile/zip file or 
+00003a80: 7468 6520 7061 7468 2074 6f20 6120 6c6f  the path to a lo
+00003a90: 6361 6c0a 2020 2020 2020 2020 2020 2020  cal.            
+00003aa0: 666f 6c64 6572 0a20 2020 2020 2020 2070  folder.        p
+00003ab0: 6174 7465 726e 733a 2074 6865 2070 6174  atterns: the pat
+00003ac0: 6873 2074 6f20 6578 7472 6163 7420 6672  hs to extract fr
+00003ad0: 6f6d 2074 6865 2073 6f75 7263 6520 2869  om the source (i
+00003ae0: 6620 6e65 6564 6564 292e 2045 6163 6820  f needed). Each 
+00003af0: 6974 656d 2063 616e 2062 6520 6569 7468  item can be eith
+00003b00: 6572 0a20 2020 2020 2020 2020 2020 2061  er.            a
+00003b10: 2070 6174 6820 7265 6c61 7469 7665 2074   path relative t
+00003b20: 6f20 7468 6520 726f 6f74 206f 6620 7468  o the root of th
+00003b30: 6520 6769 7420 6f72 207a 6970 2066 696c  e git or zip fil
+00003b40: 652c 206f 7220 6120 676c 6f62 2070 6174  e, or a glob pat
+00003b50: 7465 726e 2e20 496e 2074 6865 0a20 2020  tern. In the.   
+00003b60: 2020 2020 2020 2020 2063 6173 6520 7768           case wh
+00003b70: 6572 6520 7468 6520 7572 6c20 706f 696e  ere the url poin
+00003b80: 7473 2074 6f20 6120 636f 6e63 7265 7465  ts to a concrete
+00003b90: 2066 696c 6520 286e 6f74 2061 207a 6970   file (not a zip
+00003ba0: 206f 7220 6120 6769 7420 7265 706f 292c   or a git repo),
+00003bb0: 2074 6869 730a 2020 2020 2020 2020 2020   this.          
+00003bc0: 2020 6174 7472 6962 7574 6573 2073 686f    attributes sho
+00003bd0: 756c 6420 6265 2065 6d70 7479 0a20 2020  uld be empty.   
+00003be0: 2020 2020 2070 6c61 7466 6f72 6d3a 2069       platform: i
+00003bf0: 6620 6769 7665 6e2c 2074 6865 2070 6c61  f given, the pla
+00003c00: 7466 6f72 6d20 666f 7220 7768 6963 6820  tform for which 
+00003c10: 7468 6973 2061 7373 6574 7320 6172 6520  this assets are 
+00003c20: 7661 6c69 6420 2869 6e20 7468 6520 6361  valid (in the ca
+00003c30: 7365 0a20 2020 2020 2020 2020 2020 206f  se.            o
+00003c40: 6620 6269 6e61 7269 6573 206f 6620 736f  f binaries of so
+00003c50: 6d65 206b 696e 6429 0a20 2020 2020 2020  me kind).       
+00003c60: 206e 616d 653a 2074 6865 206e 616d 6520   name: the name 
+00003c70: 6f66 2074 6865 2061 7373 6574 2028 6f70  of the asset (op
+00003c80: 7469 6f6e 616c 290a 2020 2020 2222 220a  tional).    """.
+00003c90: 2020 2020 736f 7572 6365 3a20 7374 720a      source: str.
+00003ca0: 2020 2020 2222 2274 6865 2075 726c 2077      """the url w
+00003cb0: 6865 7265 2074 6f20 646f 776e 6c6f 6164  here to download
+00003cc0: 2074 6865 2061 7373 6574 7320 6672 6f6d   the assets from
+00003cd0: 2222 220a 0a20 2020 2070 6174 7465 726e  """..    pattern
+00003ce0: 733a 206c 6973 745b 7374 725d 0a20 2020  s: list[str].   
+00003cf0: 2022 2222 7468 6520 7061 7468 7320 746f   """the paths to
+00003d00: 2065 7874 7261 6374 2066 726f 6d20 7468   extract from th
+00003d10: 6520 7572 6c20 2869 6620 6e65 6564 6564  e url (if needed
+00003d20: 292e 2049 7420 6361 6e20 6265 2061 2067  ). It can be a g
+00003d30: 6c6f 6220 7061 7474 6572 6e22 2222 0a0a  lob pattern"""..
+00003d40: 2020 2020 706c 6174 666f 726d 3a20 7374      platform: st
+00003d50: 7220 3d20 2761 6c6c 270a 2020 2020 2222  r = 'all'.    ""
+00003d60: 2274 6865 2070 6c61 7466 6f72 6d20 666f  "the platform fo
+00003d70: 7220 7768 6963 6820 7468 6973 2061 7373  r which this ass
+00003d80: 6574 7320 6172 6520 7661 6c69 6422 2222  ets are valid"""
+00003d90: 0a0a 2020 2020 6e61 6d65 3a20 7374 7220  ..    name: str 
+00003da0: 3d20 2727 0a0a 2020 2020 6465 6620 5f5f  = ''..    def __
+00003db0: 706f 7374 5f69 6e69 745f 5f28 7365 6c66  post_init__(self
+00003dc0: 293a 0a20 2020 2020 2020 2061 7373 6572  ):.        asser
+00003dd0: 7420 7365 6c66 2e73 6f75 7263 650a 0a20  t self.source.. 
+00003de0: 2020 2064 6566 2069 6465 6e74 6966 6965     def identifie
+00003df0: 7228 7365 6c66 2920 2d3e 2073 7472 3a0a  r(self) -> str:.
+00003e00: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00003e10: 6e61 6d65 3a0a 2020 2020 2020 2020 2020  name:.          
+00003e20: 2020 7265 7475 726e 2073 656c 662e 6e61    return self.na
+00003e30: 6d65 0a20 2020 2020 2020 2069 6620 7365  me.        if se
+00003e40: 6c66 2e70 6174 7465 726e 733a 0a20 2020  lf.patterns:.   
+00003e50: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00003e60: 6622 7b73 656c 662e 736f 7572 6365 7d3a  f"{self.source}:
+00003e70: 3a7b 272c 272e 6a6f 696e 2873 7472 2870  :{','.join(str(p
+00003e80: 6174 7429 2066 6f72 2070 6174 7420 696e  att) for patt in
+00003e90: 2073 656c 662e 7061 7474 6572 6e73 297d   self.patterns)}
+00003ea0: 220a 2020 2020 2020 2020 7265 7475 726e  ".        return
+00003eb0: 2073 656c 662e 736f 7572 6365 0a0a 2020   self.source..  
+00003ec0: 2020 6465 6620 6c6f 6361 6c5f 7061 7468    def local_path
+00003ed0: 2873 656c 6629 202d 3e20 5061 7468 3a0a  (self) -> Path:.
+00003ee0: 2020 2020 2020 2020 6173 7365 7274 2073          assert s
+00003ef0: 656c 662e 736f 7572 6365 0a20 2020 2020  elf.source.     
+00003f00: 2020 2069 6620 5f69 735f 7572 6c28 7365     if _is_url(se
+00003f10: 6c66 2e73 6f75 7263 6529 3a0a 2020 2020  lf.source):.    
+00003f20: 2020 2020 2020 2020 6966 205f 6973 5f67          if _is_g
+00003f30: 6974 5f75 726c 2873 656c 662e 736f 7572  it_url(self.sour
+00003f40: 6365 293a 0a20 2020 2020 2020 2020 2020  ce):.           
+00003f50: 2020 2020 2072 6574 7572 6e20 5f67 6974       return _git
+00003f60: 5f6c 6f63 616c 5f70 6174 6828 7365 6c66  _local_path(self
+00003f70: 2e73 6f75 7263 6529 0a20 2020 2020 2020  .source).       
+00003f80: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00003f90: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
+00003fa0: 6728 6622 446f 776e 6c6f 6164 696e 6720  g(f"Downloading 
+00003fb0: 7572 6c20 7b73 656c 662e 736f 7572 6365  url {self.source
+00003fc0: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
+00003fd0: 2020 2020 7265 7475 726e 205f 646f 776e      return _down
+00003fe0: 6c6f 6164 5f66 696c 6528 7365 6c66 2e73  load_file(self.s
+00003ff0: 6f75 7263 6529 0a20 2020 2020 2020 2065  ource).        e
+00004000: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00004010: 2023 2069 7420 6973 2061 2070 6174 682c   # it is a path,
+00004020: 2063 6865 636b 2074 6861 7420 6974 2065   check that it e
+00004030: 7869 7374 730a 2020 2020 2020 2020 2020  xists.          
+00004040: 2020 736f 7572 6365 203d 2050 6174 6828    source = Path(
+00004050: 7365 6c66 2e73 6f75 7263 6529 0a20 2020  self.source).   
+00004060: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+00004070: 736f 7572 6365 2e65 7869 7374 7328 292c  source.exists(),
+00004080: 2066 2241 7373 6572 7420 736f 7572 6365   f"Assert source
+00004090: 2064 6f65 7320 6e6f 7420 6578 6973 743a   does not exist:
+000040a0: 207b 736f 7572 6365 7d22 0a20 2020 2020   {source}".     
+000040b0: 2020 2020 2020 2072 6574 7572 6e20 736f         return so
+000040c0: 7572 6365 0a0a 2020 2020 6465 6620 7265  urce..    def re
+000040d0: 7472 6965 7665 2873 656c 6629 202d 3e20  trieve(self) -> 
+000040e0: 6c69 7374 5b50 6174 685d 3a0a 2020 2020  list[Path]:.    
+000040f0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00004100: 446f 776e 6c6f 6164 2061 6e64 2072 6573  Download and res
+00004110: 6f6c 7665 2061 6c6c 2066 696c 6573 2c20  olve all files, 
+00004120: 6966 206e 6565 6465 640a 0a20 2020 2020  if needed..     
+00004130: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
+00004140: 2020 2020 2020 2020 6120 2870 6f73 7369          a (possi
+00004150: 626c 7920 656d 7074 7929 206c 6973 7420  bly empty) list 
+00004160: 6f66 206c 6f63 616c 2070 6174 6873 2077  of local paths w
+00004170: 6869 6368 2062 656c 6f6e 6720 746f 2074  hich belong to t
+00004180: 6869 7320 6173 7365 742e 0a20 2020 2020  his asset..     
+00004190: 2020 2020 2020 2049 6e20 7468 6520 6361         In the ca
+000041a0: 7365 206f 6620 616e 2061 7373 6574 2072  se of an asset r
+000041b0: 6566 6572 7269 6e67 2074 6f20 6120 6669  eferring to a fi
+000041c0: 6c65 2077 6974 6869 6e20 6120 7a69 702c  le within a zip,
+000041d0: 2074 6865 0a20 2020 2020 2020 2020 2020   the.           
+000041e0: 2066 696c 6573 2061 7265 2065 7874 7261   files are extra
+000041f0: 6374 6564 2074 6f20 6120 7465 6d70 2064  cted to a temp d
+00004200: 6972 2061 6e64 2061 2070 6174 6820 746f  ir and a path to
+00004210: 2074 6861 7420 7465 6d70 2064 6972 0a20   that temp dir. 
+00004220: 2020 2020 2020 2020 2020 2069 7320 7265             is re
+00004230: 7475 726e 6564 0a20 2020 2020 2020 2022  turned.        "
+00004240: 2222 0a20 2020 2020 2020 2061 7373 6572  "".        asser
+00004250: 7420 7365 6c66 2e73 6f75 7263 6520 616e  t self.source an
+00004260: 6420 285f 6973 5f75 726c 2873 656c 662e  d (_is_url(self.
+00004270: 736f 7572 6365 2920 6f72 206f 732e 7061  source) or os.pa
+00004280: 7468 2e69 7361 6273 2873 656c 662e 736f  th.isabs(self.so
+00004290: 7572 6365 2929 2c20 5c0a 2020 2020 2020  urce)), \.      
+000042a0: 2020 2020 2020 6622 536f 7572 6365 2073        f"Source s
+000042b0: 686f 756c 6420 6265 2065 6974 6865 7220  hould be either 
+000042c0: 6120 7572 6c20 6f72 2061 6e20 6162 736f  a url or an abso
+000042d0: 6c75 7465 2070 6174 683a 207b 7365 6c66  lute path: {self
+000042e0: 2e73 6f75 7263 657d 220a 2020 2020 2020  .source}".      
+000042f0: 2020 2320 7365 6c66 2e75 726c 2069 7320    # self.url is 
+00004300: 6569 7468 6572 2061 2067 6974 2072 6570  either a git rep
+00004310: 6f20 6f72 2061 2075 726c 2070 6f69 6e74  o or a url point
+00004320: 696e 6720 746f 2061 2066 696c 650a 2020  ing to a file.  
+00004330: 2020 2020 2020 726f 6f74 203d 2073 656c        root = sel
+00004340: 662e 6c6f 6361 6c5f 7061 7468 2829 0a20  f.local_path(). 
+00004350: 2020 2020 2020 2069 6620 726f 6f74 2e69         if root.i
+00004360: 735f 6469 7228 293a 0a20 2020 2020 2020  s_dir():.       
+00004370: 2020 2020 2061 7373 6572 7420 5f69 735f       assert _is_
+00004380: 6769 745f 7265 706f 2872 6f6f 7429 0a20  git_repo(root). 
+00004390: 2020 2020 2020 2020 2020 205f 6769 745f             _git_
+000043a0: 7570 6461 7465 2872 6f6f 7429 0a20 2020  update(root).   
+000043b0: 2020 2020 2020 2020 2063 6f6c 6c65 6374           collect
+000043c0: 6564 5f61 7373 6574 733a 206c 6973 745b  ed_assets: list[
+000043d0: 5061 7468 5d20 3d20 5b5d 0a20 2020 2020  Path] = [].     
+000043e0: 2020 2020 2020 2066 6f72 2070 6174 7465         for patte
+000043f0: 726e 2069 6e20 7365 6c66 2e70 6174 7465  rn in self.patte
+00004400: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
+00004410: 2020 2020 206d 6174 6368 6564 6669 6c65       matchedfile
+00004420: 7320 3d20 676c 6f62 2e67 6c6f 6228 2872  s = glob.glob((r
+00004430: 6f6f 742f 7061 7474 6572 6e29 2e61 735f  oot/pattern).as_
+00004440: 706f 7369 7828 2929 0a20 2020 2020 2020  posix()).       
+00004450: 2020 2020 2020 2020 2063 6f6c 6c65 6374           collect
+00004460: 6564 5f61 7373 6574 732e 6578 7465 6e64  ed_assets.extend
+00004470: 2850 6174 6828 6d29 2066 6f72 206d 2069  (Path(m) for m i
+00004480: 6e20 6d61 7463 6865 6466 696c 6573 290a  n matchedfiles).
+00004490: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000044a0: 726e 2063 6f6c 6c65 6374 6564 5f61 7373  rn collected_ass
+000044b0: 6574 730a 2020 2020 2020 2020 656c 6966  ets.        elif
+000044c0: 2072 6f6f 742e 7375 6666 6978 203d 3d20   root.suffix == 
+000044d0: 272e 7a69 7027 3a0a 2020 2020 2020 2020  '.zip':.        
+000044e0: 2020 2020 5f64 6562 7567 2866 2245 7874      _debug(f"Ext
+000044f0: 7261 6374 696e 6720 7b73 656c 662e 7061  racting {self.pa
+00004500: 7474 6572 6e73 7d20 6672 6f6d 207b 726f  tterns} from {ro
+00004510: 6f74 7d22 290a 2020 2020 2020 2020 2020  ot}").          
+00004520: 2020 6f75 7466 696c 6573 203d 205f 7a69    outfiles = _zi
+00004530: 705f 6578 7472 6163 7428 726f 6f74 2c20  p_extract(root, 
+00004540: 7365 6c66 2e70 6174 7465 726e 7329 0a20  self.patterns). 
+00004550: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
+00004560: 6728 6622 4578 7472 6163 7465 6420 7b6f  g(f"Extracted {o
+00004570: 7574 6669 6c65 737d 2066 726f 6d20 7b72  utfiles} from {r
+00004580: 6f6f 747d 2229 0a20 2020 2020 2020 2020  oot}").         
+00004590: 2020 2072 6574 7572 6e20 6f75 7466 696c     return outfil
+000045a0: 6573 0a20 2020 2020 2020 2065 6c73 653a  es.        else:
+000045b0: 0a20 2020 2020 2020 2020 2020 2023 2072  .            # r
+000045c0: 6f6f 7420 6973 2061 2066 696c 650a 2020  oot is a file.  
+000045d0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000045e0: 205b 726f 6f74 5d0a 0a0a 4064 6174 6163   [root]...@datac
+000045f0: 6c61 7373 0a63 6c61 7373 2042 696e 6172  lass.class Binar
+00004600: 793a 0a20 2020 2022 2222 0a20 2020 2041  y:.    """.    A
+00004610: 2042 696e 6172 7920 6465 7363 7269 6265   Binary describe
+00004620: 7320 6120 706c 7567 696e 2062 696e 6172  s a plugin binar
+00004630: 790a 0a20 2020 2041 7474 7269 6273 3a0a  y..    Attribs:.
+00004640: 2020 2020 2020 2020 706c 6174 666f 726d          platform
+00004650: 3a20 7468 6520 706c 6174 666f 726d 2f61  : the platform/a
+00004660: 7263 6869 7465 6374 7572 6520 666f 7220  rchitecture for 
+00004670: 7768 6963 6820 7468 6973 2062 696e 6172  which this binar
+00004680: 7920 6973 2062 7569 6c74 2e20 506f 7373  y is built. Poss
+00004690: 6962 6c65 2070 6c61 7466 6f72 6d73 3a0a  ible platforms:.
+000046a0: 2020 2020 2020 2020 2020 2020 276c 696e              'lin
+000046b0: 7578 2720 2878 3836 5f36 3429 2c20 2777  ux' (x86_64), 'w
+000046c0: 696e 646f 7773 2720 2877 696e 646f 7773  indows' (windows
+000046d0: 2036 3420 6269 7473 292c 2027 6d61 636f   64 bits), 'maco
+000046e0: 7327 2028 7838 365f 3634 290a 2020 2020  s' (x86_64).    
+000046f0: 2020 2020 7572 6c3a 2065 6974 6865 7220      url: either 
+00004700: 6120 6874 7470 206c 696e 6b20 746f 2061  a http link to a
+00004710: 2062 696e 6172 792f 2e7a 6970 2066 696c   binary/.zip fil
+00004720: 652c 206f 7220 656d 7074 7920 6966 2074  e, or empty if t
+00004730: 6865 2070 6c75 6769 6e27 7320 6c6f 6361  he plugin's loca
+00004740: 7469 6f6e 2069 7320 7265 6c61 7469 7665  tion is relative
+00004750: 2074 6f20 7468 650a 2020 2020 2020 2020   to the.        
+00004760: 2020 2020 6d61 6e69 6665 7374 2064 6566      manifest def
+00004770: 696e 6974 696f 6e0a 2020 2020 2020 2020  inition.        
+00004780: 6275 696c 645f 706c 6174 666f 726d 3a20  build_platform: 
+00004790: 7468 6520 706c 6174 666f 726d 2074 6869  the platform thi
+000047a0: 7320 6269 6e61 7279 2077 6173 2062 7569  s binary was bui
+000047b0: 6c74 2077 6974 682e 204d 6967 6874 2073  lt with. Might s
+000047c0: 6572 7665 2061 7320 616e 206f 7269 656e  erve as an orien
+000047d0: 7461 7469 6f6e 2066 6f72 0a20 2020 2020  tation for.     
+000047e0: 2020 2020 2020 2075 7365 7273 2072 6567         users reg
+000047f0: 6172 6469 6e67 2074 6865 2063 6f6d 7061  arding the compa
+00004800: 7469 6269 6c69 7479 206f 6620 7468 6520  tibility of the 
+00004810: 6269 6e61 7279 2e20 4974 2063 616e 2062  binary. It can b
+00004820: 6520 616e 7974 6869 6e67 2062 7574 2065  e anything but e
+00004830: 7870 6563 7465 6420 7661 6c75 6573 0a20  xpected values. 
+00004840: 2020 2020 2020 2020 2020 206d 6967 6874             might
+00004850: 2062 6520 736f 6d65 7468 696e 6720 6c69   be something li
+00004860: 6b65 2022 6d61 634f 5320 3131 2e78 782e  ke "macOS 11.xx.
+00004870: 0a20 2020 2020 2020 2065 7874 7261 6374  .        extract
+00004880: 7061 7468 3a20 696e 2074 6865 2063 6173  path: in the cas
+00004890: 6520 6f66 2075 7369 6e67 2061 202e 7a69  e of using a .zi
+000048a0: 7020 6669 6c65 2061 7320 7572 6c2c 2074  p file as url, t
+000048b0: 6865 2065 7874 7261 6374 2070 6174 6820  he extract path 
+000048c0: 7368 6f75 6c64 2069 6e64 6963 6174 650a  should indicate.
+000048d0: 2020 2020 2020 2020 2020 2020 6120 7265              a re
+000048e0: 6c61 7469 7665 2070 6174 6820 746f 2074  lative path to t
+000048f0: 6865 2062 696e 6172 7920 7769 7468 696e  he binary within
+00004900: 2074 6865 202e 7a69 7020 6669 6c65 2073   the .zip file s
+00004910: 7472 7563 7475 7265 0a20 2020 2020 2020  tructure.       
+00004920: 2070 6f73 745f 696e 7374 616c 6c5f 7363   post_install_sc
+00004930: 7269 7074 3a20 6120 7363 7269 7074 2074  ript: a script t
+00004940: 6f20 7275 6e20 6166 7465 7220 7468 6520  o run after the 
+00004950: 6269 6e61 7279 2068 6173 2062 6565 6e20  binary has been 
+00004960: 696e 7374 616c 6c65 640a 2020 2020 2222  installed.    ""
+00004970: 220a 2020 2020 706c 6174 666f 726d 3a20  ".    platform: 
+00004980: 7374 720a 2020 2020 2222 2254 6865 2070  str.    """The p
+00004990: 6c61 7466 6f72 6d20 666f 7220 7768 6963  latform for whic
+000049a0: 6820 7468 6973 2062 696e 6172 7920 7761  h this binary wa
+000049b0: 7320 636f 6d70 696c 6564 2e20 0a20 2020  s compiled. .   
+000049c0: 200a 2020 2020 4120 7061 6972 203c 6f73   .    A pair <os
+000049d0: 3e2d 3c61 7263 683e 2c20 7768 6572 6520  >-<arch>, where 
+000049e0: 6f73 2069 7320 6f6e 6520 6f66 206c 696e  os is one of lin
+000049f0: 7578 2c20 7769 6e64 6f77 732c 206d 6163  ux, windows, mac
+00004a00: 6f73 2c20 616e 6420 0a20 2020 2061 7263  os, and .    arc
+00004a10: 6820 6973 206f 6e65 206f 6620 2778 3836  h is one of 'x86
+00004a20: 5f36 3427 2c20 2761 726d 3634 272e 2053  _64', 'arm64'. S
+00004a30: 6565 205f 7375 7070 6f72 7465 645f 706c  ee _supported_pl
+00004a40: 6174 666f 726d 7320 666f 7220 616e 200a  atforms for an .
+00004a50: 2020 2020 7570 2d74 6f2d 6461 7465 206c      up-to-date l
+00004a60: 6973 7422 2222 0a0a 2020 2020 7572 6c3a  ist"""..    url:
+00004a70: 2073 7472 0a20 2020 2022 2222 5468 6520   str.    """The 
+00004a80: 7572 6c20 6f66 2074 6865 2062 696e 6172  url of the binar
+00004a90: 7920 2863 616e 2062 6520 6120 7a69 7020  y (can be a zip 
+00004aa0: 6669 6c65 2922 2222 0a0a 2020 2020 6373  file)"""..    cs
+00004ab0: 6f75 6e64 5f76 6572 7369 6f6e 3a20 7374  ound_version: st
+00004ac0: 720a 2020 2020 2222 2254 6865 2076 6572  r.    """The ver
+00004ad0: 7369 6f6e 2072 616e 6765 2066 6f72 2077  sion range for w
+00004ae0: 6869 6368 2074 6869 7320 6269 6e61 7279  hich this binary
+00004af0: 2069 7320 7661 6c69 6420 2863 616e 2062   is valid (can b
+00004b00: 6520 6f66 2074 6865 2066 6f72 6d20 3e3d  e of the form >=
+00004b10: 502e 713c 582e 7929 2222 220a 0a20 2020  P.q<X.y)"""..   
+00004b20: 2065 7874 7261 6374 7061 7468 3a20 7374   extractpath: st
+00004b30: 7220 3d20 2727 0a20 2020 2022 2222 496e  r = ''.    """In
+00004b40: 2074 6865 2063 6173 6520 6f66 2074 6865   the case of the
+00004b50: 2075 726c 2062 6569 6e67 2061 6e20 6172   url being an ar
+00004b60: 6368 6976 652c 2074 6869 7320 696e 6469  chive, this indi
+00004b70: 6361 7465 7320 7468 6520 7265 6c61 7469  cates the relati
+00004b80: 7665 2070 6174 6820 6f66 2074 6865 2062  ve path of the b
+00004b90: 696e 6172 7920 7769 7468 696e 2074 6861  inary within tha
+00004ba0: 7420 6172 6368 6976 6522 2222 0a0a 2020  t archive"""..  
+00004bb0: 2020 6275 696c 645f 706c 6174 666f 726d    build_platform
+00004bc0: 3a20 7374 7220 3d20 2727 0a20 2020 2022  : str = ''.    "
+00004bd0: 2222 4966 206b 6e6f 776e 2c20 7468 6520  ""If known, the 
+00004be0: 706c 6174 666f 726d 2075 6e64 6572 2077  platform under w
+00004bf0: 6869 6368 2074 6869 7320 6269 6e61 7279  hich this binary
+00004c00: 2077 6173 2062 7569 6c74 2e20 5468 6973   was built. This
+00004c10: 2063 616e 2062 6520 616e 7974 6869 6e67   can be anything
+00004c20: 2c20 6974 2069 7320 6a75 7374 2069 6e66  , it is just inf
+00004c30: 6f72 6d61 7469 7665 2222 220a 0a20 2020  ormative"""..   
+00004c40: 2070 6f73 745f 696e 7374 616c 6c5f 7363   post_install_sc
+00004c50: 7269 7074 3a20 7374 7220 3d20 2727 0a20  ript: str = ''. 
+00004c60: 2020 2022 2222 4120 7363 7269 7074 2074     """A script t
+00004c70: 6f20 7275 6e20 6166 7465 7220 696e 7374  o run after inst
+00004c80: 616c 6c61 7469 6f6e 2222 220a 0a20 2020  allation"""..   
+00004c90: 205f 6373 6f75 6e64 5f76 6572 7369 6f6e   _csound_version
+00004ca0: 5f72 616e 6765 3a20 5f56 6572 7369 6f6e  _range: _Version
+00004cb0: 5261 6e67 6520 7c20 4e6f 6e65 203d 204e  Range | None = N
+00004cc0: 6f6e 650a 0a20 2020 2064 6566 205f 5f70  one..    def __p
+00004cd0: 6f73 745f 696e 6974 5f5f 2873 656c 6629  ost_init__(self)
+00004ce0: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
+00004cf0: 2073 656c 662e 706c 6174 666f 726d 2069   self.platform i
+00004d00: 6e20 5f73 7570 706f 7274 6564 5f70 6c61  n _supported_pla
+00004d10: 7466 6f72 6d73 2c20 6622 496e 7661 6c69  tforms, f"Invali
+00004d20: 6420 706c 6174 666f 726d 2027 7b73 656c  d platform '{sel
+00004d30: 662e 706c 6174 666f 726d 7d27 220a 0a20  f.platform}'".. 
+00004d40: 2020 2064 6566 2063 736f 756e 645f 7665     def csound_ve
+00004d50: 7273 696f 6e5f 7261 6e67 6528 7365 6c66  rsion_range(self
+00004d60: 2920 2d3e 205f 5665 7273 696f 6e52 616e  ) -> _VersionRan
+00004d70: 6765 3a0a 2020 2020 2020 2020 6966 2073  ge:.        if s
+00004d80: 656c 662e 5f63 736f 756e 645f 7665 7273  elf._csound_vers
+00004d90: 696f 6e5f 7261 6e67 6520 6973 204e 6f6e  ion_range is Non
+00004da0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00004db0: 656c 662e 5f63 736f 756e 645f 7665 7273  elf._csound_vers
+00004dc0: 696f 6e5f 7261 6e67 6520 3d20 5f70 6172  ion_range = _par
+00004dd0: 7365 5f76 6572 7369 6f6e 2873 656c 662e  se_version(self.
+00004de0: 6373 6f75 6e64 5f76 6572 7369 6f6e 290a  csound_version).
+00004df0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00004e00: 656c 662e 5f63 736f 756e 645f 7665 7273  elf._csound_vers
+00004e10: 696f 6e5f 7261 6e67 650a 0a20 2020 2064  ion_range..    d
+00004e20: 6566 206d 6174 6368 6573 5f76 6572 7369  ef matches_versi
+00004e30: 6f6e 6964 2873 656c 662c 2076 6572 7369  onid(self, versi
+00004e40: 6f6e 6964 3a20 696e 7429 202d 3e20 626f  onid: int) -> bo
+00004e50: 6f6c 3a0a 2020 2020 2020 2020 2222 220a  ol:.        """.
+00004e60: 2020 2020 2020 2020 446f 6573 2074 6869          Does thi
+00004e70: 7320 6269 6e61 7279 2061 7070 6c79 2074  s binary apply t
+00004e80: 6f20 7468 6520 2067 6976 656e 2076 6572  o the  given ver
+00004e90: 7369 6f6e 6964 3f0a 0a20 2020 2020 2020  sionid?..       
+00004ea0: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+00004eb0: 2020 2020 2020 5472 7565 2069 6620 7468        True if th
+00004ec0: 6520 7665 7273 696f 6e69 6420 6973 2063  e versionid is c
+00004ed0: 6f6e 7461 696e 6564 2077 6974 6869 6e20  ontained within 
+00004ee0: 7468 6520 7665 7273 696f 6e20 7261 6e67  the version rang
+00004ef0: 6520 6f66 2074 6869 7320 6269 6e61 7279  e of this binary
+00004f00: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00004f10: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
+00004f20: 7374 616e 6365 2876 6572 7369 6f6e 6964  stance(versionid
+00004f30: 2c20 696e 7429 2061 6e64 2076 6572 7369  , int) and versi
+00004f40: 6f6e 6964 203e 3d20 3630 3030 2c20 6622  onid >= 6000, f"
+00004f50: 476f 7420 7b76 6572 7369 6f6e 6964 7d22  Got {versionid}"
+00004f60: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00004f70: 7365 6c66 2e63 736f 756e 645f 7665 7273  self.csound_vers
+00004f80: 696f 6e5f 7261 6e67 6528 292e 636f 6e74  ion_range().cont
+00004f90: 6169 6e73 2876 6572 7369 6f6e 6964 290a  ains(versionid).
+00004fa0: 0a20 2020 2064 6566 2062 696e 6172 795f  .    def binary_
+00004fb0: 6669 6c65 6e61 6d65 2873 656c 6629 202d  filename(self) -
+00004fc0: 3e20 7374 723a 0a20 2020 2020 2020 2022  > str:.        "
+00004fd0: 2222 0a20 2020 2020 2020 2054 6865 2066  "".        The f
+00004fe0: 696c 656e 616d 6520 6f66 2074 6865 2062  ilename of the b
+00004ff0: 696e 6172 790a 2020 2020 2020 2020 2222  inary.        ""
+00005000: 220a 2020 2020 2020 2020 6966 206e 6f74  ".        if not
+00005010: 2073 656c 662e 7572 6c2e 656e 6473 7769   self.url.endswi
+00005020: 7468 2827 2e7a 6970 2729 3a0a 2020 2020  th('.zip'):.    
+00005030: 2020 2020 2020 2020 7265 7475 726e 206f          return o
+00005040: 732e 7061 7468 2e73 706c 6974 2873 656c  s.path.split(sel
+00005050: 662e 7572 6c29 5b31 5d0a 2020 2020 2020  f.url)[1].      
+00005060: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00005070: 2020 2020 6173 7365 7274 2073 656c 662e      assert self.
+00005080: 6578 7472 6163 7470 6174 680a 2020 2020  extractpath.    
+00005090: 2020 2020 2020 2020 7265 7475 726e 206f          return o
+000050a0: 732e 7061 7468 2e73 706c 6974 2873 656c  s.path.split(sel
+000050b0: 662e 6578 7472 6163 7470 6174 6829 5b31  f.extractpath)[1
+000050c0: 5d0a 0a0a 4064 6174 6163 6c61 7373 0a63  ]...@dataclass.c
+000050d0: 6c61 7373 204d 616e 5061 6765 3a0a 2020  lass ManPage:.  
+000050e0: 2020 7379 6e74 6178 6573 3a20 6c69 7374    syntaxes: list
+000050f0: 5b73 7472 5d0a 2020 2020 6162 7374 7261  [str].    abstra
+00005100: 6374 3a20 7374 720a 0a0a 4064 6174 6163  ct: str...@datac
+00005110: 6c61 7373 0a63 6c61 7373 2049 6e64 6578  lass.class Index
+00005120: 4974 656d 3a0a 2020 2020 2222 220a 2020  Item:.    """.  
+00005130: 2020 416e 2020 656e 7472 7920 696e 2074    An  entry in t
+00005140: 6865 2072 6973 7365 7420 696e 6465 780a  he risset index.
+00005150: 0a20 2020 2041 7474 7269 6273 3a0a 2020  .    Attribs:.  
+00005160: 2020 2020 2020 6e61 6d65 3a20 7468 6520        name: the 
+00005170: 6e61 6d65 206f 6620 7468 6520 656e 7469  name of the enti
+00005180: 7479 0a20 2020 2020 2020 2075 726c 3a20  ty.        url: 
+00005190: 7468 6520 7572 6c20 6f66 2074 6865 2067  the url of the g
+000051a0: 6974 2072 6570 6f73 6974 6f72 790a 2020  it repository.  
+000051b0: 2020 2020 2020 7061 7468 3a20 7468 6520        path: the 
+000051c0: 7265 6c61 7469 7665 2070 6174 6820 7769  relative path wi
+000051d0: 7468 696e 2074 6865 2072 6570 6f73 6974  thin the reposit
+000051e0: 6f72 7920 746f 2074 6865 2072 6973 7365  ory to the risse
+000051f0: 742e 6a73 6f6e 2066 696c 652e 0a20 2020  t.json file..   
+00005200: 2022 2222 0a20 2020 206e 616d 653a 2073   """.    name: s
+00005210: 7472 0a20 2020 2075 726c 3a20 7374 720a  tr.    url: str.
+00005220: 2020 2020 7061 7468 3a20 7374 7220 3d20      path: str = 
+00005230: 2727 0a0a 2020 2020 6465 6620 6d61 6e69  ''..    def mani
+00005240: 6665 7374 5f70 6174 6828 7365 6c66 2920  fest_path(self) 
+00005250: 2d3e 2050 6174 683a 0a20 2020 2020 2020  -> Path:.       
+00005260: 206c 6f63 616c 7061 7468 203d 205f 6769   localpath = _gi
+00005270: 745f 6c6f 6361 6c5f 7061 7468 2873 656c  t_local_path(sel
+00005280: 662e 7572 6c29 0a20 2020 2020 2020 2061  f.url).        a
+00005290: 7373 6572 7420 6c6f 6361 6c70 6174 682e  ssert localpath.
+000052a0: 6578 6973 7473 2829 0a20 2020 2020 2020  exists().       
+000052b0: 206d 616e 6966 6573 745f 7061 7468 203d   manifest_path =
+000052c0: 206c 6f63 616c 7061 7468 202f 2073 656c   localpath / sel
+000052d0: 662e 7061 7468 0a20 2020 2020 2020 2069  f.path.        i
+000052e0: 6620 6d61 6e69 6665 7374 5f70 6174 682e  f manifest_path.
+000052f0: 6973 5f66 696c 6528 293a 0a20 2020 2020  is_file():.     
+00005300: 2020 2020 2020 2061 7373 6572 7420 6d61         assert ma
+00005310: 6e69 6665 7374 5f70 6174 682e 7375 6666  nifest_path.suff
+00005320: 6978 203d 3d20 222e 6a73 6f6e 220a 2020  ix == ".json".  
+00005330: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00005340: 2020 2020 2020 2020 6d61 6e69 6665 7374          manifest
+00005350: 5f70 6174 6820 3d20 6d61 6e69 6665 7374  _path = manifest
+00005360: 5f70 6174 6820 2f20 2272 6973 7365 742e  _path / "risset.
+00005370: 6a73 6f6e 220a 2020 2020 2020 2020 6966  json".        if
+00005380: 206e 6f74 206d 616e 6966 6573 745f 7061   not manifest_pa
+00005390: 7468 2e65 7869 7374 7328 293a 0a20 2020  th.exists():.   
+000053a0: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
+000053b0: 756e 7469 6d65 4572 726f 7228 6622 466f  untimeError(f"Fo
+000053c0: 7220 706c 7567 696e 207b 7365 6c66 2e6e  r plugin {self.n
+000053d0: 616d 657d 2028 7b73 656c 662e 7572 6c7d  ame} ({self.url}
+000053e0: 2c20 636c 6f6e 6564 2061 7420 7b6c 6f63  , cloned at {loc
+000053f0: 616c 7061 7468 7d22 0a20 2020 2020 2020  alpath}".       
+00005400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005410: 2020 2020 2020 2020 6622 2074 6865 206d          f" the m
+00005420: 616e 6966 6573 7420 7761 7320 6e6f 7420  anifest was not 
+00005430: 666f 756e 6420 6174 2074 6865 2065 7870  found at the exp
+00005440: 6563 7465 6420 7061 7468 3a20 7b6d 616e  ected path: {man
+00005450: 6966 6573 745f 7061 7468 7d22 290a 2020  ifest_path}").  
+00005460: 2020 2020 2020 7265 7475 726e 206d 616e        return man
+00005470: 6966 6573 745f 7061 7468 0a0a 2020 2020  ifest_path..    
+00005480: 6465 6620 7570 6461 7465 2873 656c 6629  def update(self)
+00005490: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+000054a0: 2020 7061 7468 203d 205f 6769 745f 6c6f    path = _git_lo
+000054b0: 6361 6c5f 7061 7468 2873 656c 662e 7572  cal_path(self.ur
+000054c0: 6c29 0a20 2020 2020 2020 205f 6769 745f  l).        _git_
+000054d0: 7570 6461 7465 2870 6174 6829 0a0a 2020  update(path)..  
+000054e0: 2020 6465 6620 7265 6164 5f64 6566 696e    def read_defin
+000054f0: 6974 696f 6e28 7365 6c66 3a20 496e 6465  ition(self: Inde
+00005500: 7849 7465 6d29 202d 3e20 506c 7567 696e  xItem) -> Plugin
+00005510: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00005520: 2020 2020 2020 5265 6164 2074 6865 2070        Read the p
+00005530: 6c75 6769 6e20 6465 6669 6e69 7469 6f6e  lugin definition
+00005540: 2070 6f69 6e74 6564 2062 7920 7468 6973   pointed by this
+00005550: 2070 6c75 6769 6e20 736f 7572 6365 0a0a   plugin source..
+00005560: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+00005570: 0a20 2020 2020 2020 2020 2020 2061 2050  .            a P
+00005580: 6c75 6769 6e0a 0a20 2020 2020 2020 2052  lugin..        R
+00005590: 6169 7365 733a 2050 6c75 6769 6e44 6566  aises: PluginDef
+000055a0: 696e 6974 696f 6e45 7272 6f72 2069 6620  initionError if 
+000055b0: 7468 6572 6520 6973 2061 6e20 6572 726f  there is an erro
+000055c0: 720a 2020 2020 2020 2020 2222 220a 2020  r.        """.  
+000055d0: 2020 2020 2020 6d61 6e69 6665 7374 203d        manifest =
+000055e0: 2073 656c 662e 6d61 6e69 6665 7374 5f70   self.manifest_p
+000055f0: 6174 6828 290a 2020 2020 2020 2020 6173  ath().        as
+00005600: 7365 7274 206d 616e 6966 6573 742e 6578  sert manifest.ex
+00005610: 6973 7473 2829 2061 6e64 206d 616e 6966  ists() and manif
+00005620: 6573 742e 7375 6666 6978 203d 3d20 272e  est.suffix == '.
+00005630: 6a73 6f6e 270a 2020 2020 2020 2020 7472  json'.        tr
+00005640: 793a 0a20 2020 2020 2020 2020 2020 2070  y:.            p
+00005650: 6c75 6769 6e20 3d20 5f72 6561 645f 706c  lugin = _read_pl
+00005660: 7567 696e 6465 6628 6d61 6e69 6665 7374  ugindef(manifest
+00005670: 2e61 735f 706f 7369 7828 292c 2075 726c  .as_posix(), url
+00005680: 3d73 656c 662e 7572 6c2c 0a20 2020 2020  =self.url,.     
+00005690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000056a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000056b0: 6d61 6e69 6665 7374 5f72 656c 6174 6976  manifest_relativ
+000056c0: 655f 7061 7468 3d73 656c 662e 7061 7468  e_path=self.path
+000056d0: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
+000056e0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+000056f0: 0a20 2020 2020 2020 2020 2020 205f 6572  .            _er
+00005700: 726f 726d 7367 2866 2243 6f75 6c64 206e  rormsg(f"Could n
+00005710: 6f74 2072 6561 6420 6d61 6e69 6665 7374  ot read manifest
+00005720: 2027 7b6d 616e 6966 6573 742e 6173 5f70   '{manifest.as_p
+00005730: 6f73 6978 2829 7d27 2c20 6572 726f 723a  osix()}', error:
+00005740: 2027 7b65 7d27 2e20 220a 2020 2020 2020   '{e}'. ".      
+00005750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005760: 6622 4920 7769 6c6c 2075 7064 6174 6520  f"I will update 
+00005770: 7468 6520 696e 6465 7820 616e 6420 7472  the index and tr
+00005780: 7920 6167 6169 6e22 290a 2020 2020 2020  y again").      
+00005790: 2020 2020 2020 7365 6c66 2e75 7064 6174        self.updat
+000057a0: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
+000057b0: 706c 7567 696e 203d 205f 7265 6164 5f70  plugin = _read_p
+000057c0: 6c75 6769 6e64 6566 286d 616e 6966 6573  lugindef(manifes
+000057d0: 742e 6173 5f70 6f73 6978 2829 2c20 7572  t.as_posix(), ur
+000057e0: 6c3d 7365 6c66 2e75 726c 2c0a 2020 2020  l=self.url,.    
+000057f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005810: 206d 616e 6966 6573 745f 7265 6c61 7469   manifest_relati
+00005820: 7665 5f70 6174 683d 7365 6c66 2e70 6174  ve_path=self.pat
+00005830: 6829 0a20 2020 2020 2020 2020 2020 205f  h).            _
+00005840: 696e 666f 2822 2e2e 2e20 6f6b 2c20 7468  info("... ok, th
+00005850: 6174 2077 6f72 6b65 6422 290a 2020 2020  at worked").    
+00005860: 2020 2020 706c 7567 696e 2e63 6c6f 6e65      plugin.clone
+00005870: 645f 7061 7468 203d 205f 6769 745f 6c6f  d_path = _git_lo
+00005880: 6361 6c5f 7061 7468 2873 656c 662e 7572  cal_path(self.ur
+00005890: 6c29 0a20 2020 2020 2020 2072 6574 7572  l).        retur
+000058a0: 6e20 706c 7567 696e 0a0a 0a40 6461 7461  n plugin...@data
+000058b0: 636c 6173 730a 636c 6173 7320 506c 7567  class.class Plug
+000058c0: 696e 3a0a 2020 2020 2222 220a 2020 2020  in:.    """.    
+000058d0: 4174 7472 6962 733a 0a20 2020 2020 2020  Attribs:.       
+000058e0: 206e 616d 653a 206e 616d 6520 6f66 2074   name: name of t
+000058f0: 6865 2070 6c75 6769 6e0a 2020 2020 2020  he plugin.      
+00005900: 2020 7665 7273 696f 6e3a 2061 2076 6572    version: a ver
+00005910: 7369 6f6e 2066 6f72 2074 6869 7320 706c  sion for this pl
+00005920: 7567 696e 2c20 666f 7220 7570 6461 7465  ugin, for update
+00005930: 2072 6561 736f 6e73 0a20 2020 2020 2020   reasons.       
+00005940: 2073 686f 7274 5f64 6573 6372 6970 7469   short_descripti
+00005950: 6f6e 3a20 6120 7368 6f72 7420 6465 7363  on: a short desc
+00005960: 7269 7074 696f 6e20 6f66 2074 6865 2070  ription of the p
+00005970: 6c75 6769 6e20 6f72 2069 7473 206f 7063  lugin or its opc
+00005980: 6f64 6573 0a20 2020 2020 2020 2062 696e  odes.        bin
+00005990: 6172 6965 733a 2061 2064 6963 7420 6d61  aries: a dict ma
+000059a0: 7070 696e 6720 706c 6174 666f 726d 2074  pping platform t
+000059b0: 6f20 6120 4269 6e61 7279 2c20 6c69 6b65  o a Binary, like
+000059c0: 207b 2777 696e 646f 7773 273a 2042 696e   {'windows': Bin
+000059d0: 6172 7928 2e2e 2e29 2c20 276c 696e 7578  ary(...), 'linux
+000059e0: 273a 2042 696e 6172 7928 2e2e 2e29 7d0a  ': Binary(...)}.
+000059f0: 2020 2020 2020 2020 2020 2020 506f 7373              Poss
+00005a00: 6962 6c65 2070 6c61 7466 6f72 6d73 2061  ible platforms a
+00005a10: 7265 3a20 276c 696e 7578 272c 2027 7769  re: 'linux', 'wi
+00005a20: 6e64 6f77 7327 2c20 276d 6163 6f73 272c  ndows', 'macos',
+00005a30: 2077 6865 7265 2069 6e20 6561 6368 2063   where in each c
+00005a40: 6173 6520 7838 365f 3634 2069 7320 696d  ase x86_64 is im
+00005a50: 706c 6965 642e 204f 7468 6572 0a20 2020  plied. Other.   
+00005a60: 2020 2020 2020 2020 2020 2020 2070 6c61               pla
+00005a70: 7466 6f72 6d73 2c20 7768 656e 2073 7570  tforms, when sup
+00005a80: 706f 7274 6564 2c20 7769 6c6c 2062 6520  ported, will be 
+00005a90: 6f66 2074 6865 2066 6f72 6d20 276c 696e  of the form 'lin
+00005aa0: 7578 2d61 726d 3634 2720 6f72 2027 6d61  ux-arm64' or 'ma
+00005ab0: 636f 732d 6172 6d36 3427 0a20 2020 2020  cos-arm64'.     
+00005ac0: 2020 206f 7063 6f64 6573 3a20 6120 6c69     opcodes: a li
+00005ad0: 7374 206f 6620 6f70 636f 6465 7320 6465  st of opcodes de
+00005ae0: 6669 6e65 6420 696e 2074 6869 7320 706c  fined in this pl
+00005af0: 7567 696e 0a20 2020 2020 2020 2061 7373  ugin.        ass
+00005b00: 6574 733a 2061 206c 6973 7420 6f66 2041  ets: a list of A
+00005b10: 7373 6574 730a 2020 2020 2020 2020 6175  ssets.        au
+00005b20: 7468 6f72 3a20 7468 6520 6175 7468 6f72  thor: the author
+00005b30: 206f 6620 7468 6973 2070 6c75 6769 6e0a   of this plugin.
+00005b40: 2020 2020 2020 2020 656d 6169 6c3a 2074          email: t
+00005b50: 6865 2065 6d61 696c 206f 6620 7468 6520  he email of the 
+00005b60: 6175 7468 6f72 0a20 2020 2020 2020 2063  author.        c
+00005b70: 6c6f 6e65 645f 7061 7468 3a20 7061 7468  loned_path: path
+00005b80: 2074 6f20 7468 6520 636c 6f6e 6564 2072   to the cloned r
+00005b90: 6570 6f73 6974 6f72 790a 2020 2020 2020  epository.      
+00005ba0: 2020 646f 635f 666f 6c64 6572 3a20 7468    doc_folder: th
+00005bb0: 6520 7265 6c61 7469 7665 2070 6174 6820  e relative path 
+00005bc0: 746f 2061 2066 6f6c 6465 7220 686f 6c64  to a folder hold
+00005bd0: 696e 6720 7468 6520 646f 6375 6d65 6e74  ing the document
+00005be0: 6174 696f 6e20 666f 7220 6561 6368 206f  ation for each o
+00005bf0: 7063 6f64 652e 2054 6869 7320 666f 6c64  pcode. This fold
+00005c00: 6572 0a20 2020 2020 2020 2020 2020 2069  er.            i
+00005c10: 7320 7265 6c61 7469 7665 2074 6f20 7468  s relative to th
+00005c20: 6520 6d61 6e69 6665 7374 2e20 4966 206e  e manifest. If n
+00005c30: 6f74 2070 726f 7669 6465 6420 6974 2064  ot provided it d
+00005c40: 6566 6175 6c74 7320 746f 2061 2022 646f  efaults to a "do
+00005c50: 6322 2066 6f6c 6465 7220 706c 6163 6564  c" folder placed
+00005c60: 0a20 2020 2020 2020 2020 2020 2062 6573  .            bes
+00005c70: 6964 6573 2074 6865 206d 616e 6966 6573  ides the manifes
+00005c80: 740a 2020 2020 2020 2020 7572 6c3a 2074  t.        url: t
+00005c90: 6865 2075 726c 206f 6620 7468 6520 6769  he url of the gi
+00005ca0: 7420 7265 706f 7369 746f 7279 2077 6865  t repository whe
+00005cb0: 7265 2074 6869 7320 706c 7567 696e 2069  re this plugin i
+00005cc0: 7320 6465 6669 6e65 6420 286e 6f74 6963  s defined (notic
+00005cd0: 6520 7468 6174 2074 6865 2062 696e 6172  e that the binar
+00005ce0: 6965 7320 6361 6e0a 2020 2020 2020 2020  ies can.        
+00005cf0: 2020 2020 6265 2068 6f73 7465 6420 696e      be hosted in
+00005d00: 7369 6465 2074 6869 7320 7265 706f 7369  side this reposi
+00005d10: 746f 7279 206f 7220 696e 2061 6e79 206f  tory or in any o
+00005d20: 7468 6572 2075 726c 290a 2020 2020 2020  ther url).      
+00005d30: 2020 6d61 6e69 6665 7374 5f72 656c 6174    manifest_relat
+00005d40: 6976 655f 7061 7468 3a20 7468 6520 7375  ive_path: the su
+00005d50: 6264 6972 6563 746f 7279 2077 6974 6869  bdirectory withi
+00005d60: 6e20 7468 6520 7265 706f 7369 746f 7279  n the repository
+00005d70: 2077 6865 7265 2074 6865 2022 7269 7373   where the "riss
+00005d80: 6574 2e6a 736f 6e22 2066 696c 6520 6973  et.json" file is
+00005d90: 0a20 2020 2020 2020 2020 2020 2070 6c61  .            pla
+00005da0: 6365 642e 2049 6620 6e6f 7420 6769 7665  ced. If not give
+00005db0: 6e2c 2069 7420 6973 2061 7373 756d 6564  n, it is assumed
+00005dc0: 2074 6861 7420 7468 6520 6d61 6e69 6665   that the manife
+00005dd0: 7374 2069 7320 706c 6163 6564 2061 7420  st is placed at 
+00005de0: 7468 6520 726f 6f74 206f 6620 7468 6520  the root of the 
+00005df0: 7265 706f 7369 746f 7279 0a20 2020 2020  repository.     
+00005e00: 2020 2020 2020 2073 7472 7563 7475 7265         structure
+00005e10: 0a0a 2020 2020 7b0a 2020 2020 2020 2020  ..    {.        
+00005e20: 2261 7373 6574 7322 3a20 5b0a 2020 2020  "assets": [.    
+00005e30: 2020 2020 2020 2020 7b20 2275 726c 223a          { "url":
+00005e40: 2022 2e2e 2e22 2c0a 2020 2020 2020 2020   "...",.        
+00005e50: 2020 2020 2020 2265 7874 7261 6374 7061        "extractpa
+00005e60: 7468 223a 2022 2e2e 2e22 2c0a 2020 2020  th": "...",.    
+00005e70: 2020 2020 2020 2020 2020 2270 6c61 7466            "platf
+00005e80: 6f72 6d22 3a20 226c 696e 7578 220a 2020  orm": "linux".  
+00005e90: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00005ea0: 2020 2020 5d0a 2020 2020 7d0a 2020 2020      ].    }.    
+00005eb0: 2222 220a 2020 2020 6e61 6d65 3a20 7374  """.    name: st
+00005ec0: 720a 2020 2020 7572 6c3a 2073 7472 0a20  r.    url: str. 
+00005ed0: 2020 2076 6572 7369 6f6e 3a20 7374 720a     version: str.
+00005ee0: 2020 2020 7368 6f72 745f 6465 7363 7269      short_descri
+00005ef0: 7074 696f 6e3a 2073 7472 0a20 2020 2062  ption: str.    b
+00005f00: 696e 6172 6965 733a 206c 6973 745b 4269  inaries: list[Bi
+00005f10: 6e61 7279 5d0a 2020 2020 6f70 636f 6465  nary].    opcode
+00005f20: 733a 206c 6973 745b 7374 725d 0a20 2020  s: list[str].   
+00005f30: 2061 7574 686f 723a 2073 7472 0a20 2020   author: str.   
+00005f40: 2065 6d61 696c 3a20 7374 720a 2020 2020   email: str.    
+00005f50: 636c 6f6e 6564 5f70 6174 683a 2050 6174  cloned_path: Pat
+00005f60: 680a 2020 2020 6d61 6e69 6665 7374 5f72  h.    manifest_r
+00005f70: 656c 6174 6976 655f 7061 7468 3a20 7374  elative_path: st
+00005f80: 7220 3d20 2727 0a20 2020 206c 6f6e 675f  r = ''.    long_
+00005f90: 6465 7363 7269 7074 696f 6e3a 2073 7472  description: str
+00005fa0: 203d 2027 270a 2020 2020 646f 635f 666f   = ''.    doc_fo
+00005fb0: 6c64 6572 3a20 7374 7220 3d20 2764 6f63  lder: str = 'doc
+00005fc0: 270a 2020 2020 6173 7365 7473 3a20 6c69  '.    assets: li
+00005fd0: 7374 5b41 7373 6574 5d20 7c20 4e6f 6e65  st[Asset] | None
+00005fe0: 203d 204e 6f6e 650a 0a20 2020 2064 6566   = None..    def
+00005ff0: 205f 5f70 6f73 745f 696e 6974 5f5f 2873   __post_init__(s
+00006000: 656c 6629 3a0a 2020 2020 2020 2020 6173  elf):.        as
+00006010: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
+00006020: 7365 6c66 2e62 696e 6172 6965 732c 206c  self.binaries, l
+00006030: 6973 7429 0a20 2020 2020 2020 2061 7373  ist).        ass
+00006040: 6572 7420 6973 696e 7374 616e 6365 2873  ert isinstance(s
+00006050: 656c 662e 6f70 636f 6465 732c 206c 6973  elf.opcodes, lis
+00006060: 7429 0a20 2020 2020 2020 2061 7373 6572  t).        asser
+00006070: 7420 6e6f 7420 7365 6c66 2e61 7373 6574  t not self.asset
+00006080: 7320 6f72 2069 7369 6e73 7461 6e63 6528  s or isinstance(
+00006090: 7365 6c66 2e61 7373 6574 732c 206c 6973  self.assets, lis
+000060a0: 7429 0a0a 2020 2020 6465 6620 5f5f 6861  t)..    def __ha
+000060b0: 7368 5f5f 2873 656c 6629 3a0a 2020 2020  sh__(self):.    
+000060c0: 2020 2020 7265 7475 726e 2068 6173 6828      return hash(
+000060d0: 2873 656c 662e 6e61 6d65 2c20 7365 6c66  (self.name, self
+000060e0: 2e76 6572 7369 6f6e 2929 0a0a 2020 2020  .version))..    
+000060f0: 4070 726f 7065 7274 790a 2020 2020 6465  @property.    de
+00006100: 6620 7665 7273 696f 6e74 7570 6c65 2873  f versiontuple(s
+00006110: 656c 6629 202d 3e20 7475 706c 655b 696e  elf) -> tuple[in
+00006120: 742c 2069 6e74 2c20 696e 745d 3a0a 2020  t, int, int]:.  
+00006130: 2020 2020 2020 6966 2073 656c 662e 7665        if self.ve
+00006140: 7273 696f 6e3a 0a20 2020 2020 2020 2020  rsion:.         
+00006150: 2020 2072 6574 7572 6e20 5f76 6572 7369     return _versi
+00006160: 6f6e 5f74 7570 6c65 2873 656c 662e 7665  on_tuple(self.ve
+00006170: 7273 696f 6e29 0a20 2020 2020 2020 2072  rsion).        r
+00006180: 6574 7572 6e20 2830 2c20 302c 2030 290a  eturn (0, 0, 0).
+00006190: 0a20 2020 2064 6566 206c 6f63 616c 5f6d  .    def local_m
+000061a0: 616e 6966 6573 745f 7061 7468 2873 656c  anifest_path(sel
+000061b0: 6629 202d 3e20 5061 7468 3a0a 2020 2020  f) -> Path:.    
+000061c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000061d0: 5468 6520 6c6f 6361 6c20 7061 7468 2074  The local path t
+000061e0: 6f20 7468 6520 6d61 6e69 6665 7374 2066  o the manifest f
+000061f0: 696c 6520 6f66 2074 6869 7320 706c 7567  ile of this plug
+00006200: 696e 0a20 2020 2020 2020 2022 2222 0a20  in.        """. 
+00006210: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00006220: 6c66 2e63 6c6f 6e65 645f 7061 7468 202f  lf.cloned_path /
+00006230: 2073 656c 662e 6d61 6e69 6665 7374 5f72   self.manifest_r
+00006240: 656c 6174 6976 655f 7061 7468 202f 2022  elative_path / "
+00006250: 7269 7373 6574 2e6a 736f 6e22 0a0a 2020  risset.json"..  
+00006260: 2020 6465 6620 6173 6469 6374 2873 656c    def asdict(sel
+00006270: 6629 202d 3e20 6469 6374 3a0a 2020 2020  f) -> dict:.    
+00006280: 2020 2020 6420 3d20 5f61 7364 6963 7428      d = _asdict(
+00006290: 7365 6c66 290a 2020 2020 2020 2020 7265  self).        re
+000062a0: 7475 726e 2064 0a0a 2020 2020 6465 6620  turn d..    def 
+000062b0: 6d61 6e70 6167 6528 7365 6c66 2c20 6f70  manpage(self, op
+000062c0: 636f 6465 3a20 7374 7229 202d 3e20 5061  code: str) -> Pa
+000062d0: 7468 207c 204e 6f6e 653a 0a20 2020 2020  th | None:.     
+000062e0: 2020 2022 2222 0a20 2020 2020 2020 2052     """.        R
+000062f0: 6574 7572 6e73 2074 6865 2070 6174 6820  eturns the path 
+00006300: 746f 2074 6865 206d 616e 2070 6167 6520  to the man page 
+00006310: 666f 7220 6f70 636f 6465 0a20 2020 2020  for opcode.     
+00006320: 2020 2022 2222 0a20 2020 2020 2020 206d     """.        m
+00006330: 6172 6b64 6f77 6e66 696c 6520 3d20 6f70  arkdownfile = op
+00006340: 636f 6465 202b 2022 2e6d 6422 0a20 2020  code + ".md".   
+00006350: 2020 2020 2070 6174 6820 3d20 7365 6c66       path = self
+00006360: 2e72 6573 6f6c 7665 5f64 6f63 5f66 6f6c  .resolve_doc_fol
+00006370: 6465 7228 2920 2f20 6d61 726b 646f 776e  der() / markdown
+00006380: 6669 6c65 0a20 2020 2020 2020 2072 6574  file.        ret
+00006390: 7572 6e20 7061 7468 2069 6620 7061 7468  urn path if path
+000063a0: 2e65 7869 7374 7328 2920 656c 7365 204e  .exists() else N
+000063b0: 6f6e 650a 0a20 2020 2064 6566 2072 6573  one..    def res
+000063c0: 6f6c 7665 5f70 6174 6828 7365 6c66 2c20  olve_path(self, 
+000063d0: 7265 6c70 6174 683a 2050 6174 6820 7c20  relpath: Path | 
+000063e0: 7374 7229 202d 3e20 5061 7468 3a0a 2020  str) -> Path:.  
+000063f0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00006400: 2020 5265 7475 726e 7320 7468 6520 6162    Returns the ab
+00006410: 736f 6c75 7465 2070 6174 6820 7265 6c61  solute path rela
+00006420: 7469 7665 2074 6f20 7468 6520 6d61 6e69  tive to the mani
+00006430: 6665 7374 2070 6174 6820 6f66 2074 6869  fest path of thi
+00006440: 7320 706c 7567 696e 0a20 2020 2020 2020  s plugin.       
+00006450: 2022 2222 0a20 2020 2020 2020 2072 6f6f   """.        roo
+00006460: 7420 3d20 7365 6c66 2e6c 6f63 616c 5f6d  t = self.local_m
+00006470: 616e 6966 6573 745f 7061 7468 2829 2e70  anifest_path().p
+00006480: 6172 656e 740a 2020 2020 2020 2020 7265  arent.        re
+00006490: 7475 726e 205f 7265 736f 6c76 655f 7061  turn _resolve_pa
+000064a0: 7468 2872 656c 7061 7468 2c20 726f 6f74  th(relpath, root
+000064b0: 290a 0a20 2020 2064 6566 2072 6573 6f6c  )..    def resol
+000064c0: 7665 5f64 6f63 5f66 6f6c 6465 7228 7365  ve_doc_folder(se
+000064d0: 6c66 2920 2d3e 2050 6174 683a 0a20 2020  lf) -> Path:.   
+000064e0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000064f0: 2052 6573 6f6c 7665 2074 6865 2064 6f63   Resolve the doc
+00006500: 2066 6f6c 6465 7220 666f 7220 7468 6973   folder for this
+00006510: 2070 6c75 6769 6e0a 0a20 2020 2020 2020   plugin..       
+00006520: 2041 2064 6f63 2066 6f6c 6465 7220 6361   A doc folder ca
+00006530: 6e20 6265 2064 6563 6c61 7265 6420 696e  n be declared in
+00006540: 2074 6865 206d 616e 6966 6573 7420 6173   the manifest as
+00006550: 2061 2072 656c 6174 6976 6520 7061 7468   a relative path
+00006560: 0a20 2020 2020 2020 2074 6f20 7468 6520  .        to the 
+00006570: 6d61 6e69 6665 7374 2069 7473 656c 662e  manifest itself.
+00006580: 2049 6620 6e6f 7420 6769 7665 6e2c 2069   If not given, i
+00006590: 7420 6465 6661 756c 7473 2074 6f20 6120  t defaults to a 
+000065a0: 2764 6f63 2720 666f 6c64 6572 0a20 2020  'doc' folder.   
+000065b0: 2020 2020 2062 6573 6964 6573 2074 6865       besides the
+000065c0: 206d 616e 6966 6573 740a 2020 2020 2020   manifest.      
+000065d0: 2020 2222 220a 2020 2020 2020 2020 726f    """.        ro
+000065e0: 6f74 203d 2073 656c 662e 6c6f 6361 6c5f  ot = self.local_
+000065f0: 6d61 6e69 6665 7374 5f70 6174 6828 292e  manifest_path().
+00006600: 7061 7265 6e74 0a20 2020 2020 2020 2064  parent.        d
+00006610: 6f63 5f66 6f6c 6465 7220 3d20 5f72 6573  oc_folder = _res
+00006620: 6f6c 7665 5f70 6174 6828 7365 6c66 2e64  olve_path(self.d
+00006630: 6f63 5f66 6f6c 6465 7220 6f72 2022 646f  oc_folder or "do
+00006640: 6322 2c20 726f 6f74 290a 2020 2020 2020  c", root).      
+00006650: 2020 6966 206e 6f74 2064 6f63 5f66 6f6c    if not doc_fol
+00006660: 6465 722e 6578 6973 7473 2829 3a0a 2020  der.exists():.  
+00006670: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00006680: 4f53 4572 726f 7228 6622 4e6f 2064 6f63  OSError(f"No doc
+00006690: 2066 6f6c 6465 7220 666f 756e 6420 2864   folder found (d
+000066a0: 6563 6c61 7265 6420 6173 207b 646f 635f  eclared as {doc_
+000066b0: 666f 6c64 6572 7d22 290a 2020 2020 2020  folder}").      
+000066c0: 2020 7265 7475 726e 2064 6f63 5f66 6f6c    return doc_fol
+000066d0: 6465 720a 0a20 2020 2064 6566 2066 696e  der..    def fin
+000066e0: 645f 6269 6e61 7279 2873 656c 662c 2070  d_binary(self, p
+000066f0: 6c61 7466 6f72 6d69 643d 2727 2c20 6373  latformid='', cs
+00006700: 6f75 6e64 5f76 6572 7369 6f6e 3a20 696e  ound_version: in
+00006710: 7420 3d20 300a 2020 2020 2020 2020 2020  t = 0.          
+00006720: 2020 2020 2020 2020 2020 2920 2d3e 2042            ) -> B
+00006730: 696e 6172 7920 7c20 4e6f 6e65 3a0a 2020  inary | None:.  
+00006740: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00006750: 2020 4669 6e64 2061 2062 696e 6172 7920    Find a binary 
+00006760: 666f 7220 7468 6520 706c 6174 666f 726d  for the platform
+00006770: 2061 6e64 2063 736f 756e 6420 7665 7273   and csound vers
+00006780: 696f 6e73 2067 6976 656e 202f 2063 7572  ions given / cur
+00006790: 7265 6e74 0a0a 2020 2020 2020 2020 4172  rent..        Ar
+000067a0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+000067b0: 706c 6174 666f 726d 6964 3a20 7468 6520  platformid: the 
+000067c0: 706c 6174 666f 726d 2069 642e 2049 6620  platform id. If 
+000067d0: 696e 7465 6c20 7838 362d 3634 2c20 7369  intel x86-64, si
+000067e0: 6d70 6c79 2074 6865 2070 6c61 7466 6f72  mply the platfor
+000067f0: 6d20 2827 6d61 636f 7327 2c20 276c 696e  m ('macos', 'lin
+00006800: 7578 272c 2027 7769 6e64 6f77 7327 292c  ux', 'windows'),
+00006810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006820: 206f 7468 6572 7769 7365 2074 6865 2070   otherwise the p
+00006830: 6c61 7466 6f72 6d20 616e 6420 6172 6368  latform and arch
+00006840: 6974 6563 7475 7265 2028 276d 6163 6f73  itecture ('macos
+00006850: 2d61 726d 3634 272c 2027 6c69 6e75 782d  -arm64', 'linux-
+00006860: 6172 6d36 3427 2c20 2e2e 2e29 0a20 2020  arm64', ...).   
+00006870: 2020 2020 2020 2020 2063 736f 756e 645f           csound_
+00006880: 7665 7273 696f 6e3a 2074 6865 2063 736f  version: the cso
+00006890: 756e 6420 7665 7273 696f 6e20 6173 2069  und version as i
+000068a0: 6e74 2028 362e 3138 203d 2036 3138 302c  nt (6.18 = 6180,
+000068b0: 2036 2e31 3920 3d20 3631 3930 2c20 372e   6.19 = 6190, 7.
+000068c0: 3031 203d 2037 3031 3029 2e20 5468 6973  01 = 7010). This
+000068d0: 2073 686f 756c 6420 6265 0a20 2020 2020   should be.     
+000068e0: 2020 2020 2020 2020 2020 2074 6865 2076             the v
+000068f0: 6572 7369 6f6e 206f 6620 6373 6f75 6e64  ersion of csound
+00006900: 2066 6f72 2077 6869 6368 2074 6865 2070   for which the p
+00006910: 6c75 6769 6e20 6973 2074 6f20 6265 2069  lugin is to be i
+00006920: 6e73 7461 6c6c 6564 2e20 496e 2074 6865  nstalled. In the
+00006930: 2070 6c75 6769 6e20 6465 6669 6e69 7469   plugin definiti
+00006940: 6f6e 2065 6163 680a 2020 2020 2020 2020  on each.        
+00006950: 2020 2020 2020 2020 6269 6e61 7279 2064          binary d
+00006960: 6566 696e 6573 2061 2076 6572 7369 6f6e  efines a version
+00006970: 2072 616e 6765 2066 6f72 2077 6869 6368   range for which
+00006980: 2069 7420 6973 2062 7569 6c74 2e0a 0a20   it is built... 
+00006990: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
+000069a0: 2020 2020 2020 2020 2020 2020 6120 4269              a Bi
+000069b0: 6e61 7279 2077 6869 6368 206d 6174 6368  nary which match
+000069c0: 6573 2074 6865 2067 6976 656e 2070 6c61  es the given pla
+000069d0: 7466 6f72 6d20 616e 6420 6373 6f75 6e64  tform and csound
+000069e0: 2076 6572 7369 6f6e 2c20 6f72 204e 6f6e   version, or Non
+000069f0: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00006a00: 206e 6f20 6d61 7463 6820 706f 7373 6962   no match possib
+00006a10: 6c65 0a20 2020 2020 2020 2022 2222 0a0a  le.        """..
+00006a20: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
+00006a30: 736f 756e 645f 7665 7273 696f 6e3a 0a20  sound_version:. 
+00006a40: 2020 2020 2020 2020 2020 2063 736f 756e             csoun
+00006a50: 645f 7665 7273 696f 6e20 3d20 5f73 6573  d_version = _ses
+00006a60: 7369 6f6e 2e63 736f 756e 645f 7665 7273  sion.csound_vers
+00006a70: 696f 6e0a 2020 2020 2020 2020 656c 7365  ion.        else
+00006a80: 3a0a 2020 2020 2020 2020 2020 2020 6173  :.            as
+00006a90: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
+00006aa0: 6373 6f75 6e64 5f76 6572 7369 6f6e 2c20  csound_version, 
+00006ab0: 696e 7429 2061 6e64 2063 736f 756e 645f  int) and csound_
+00006ac0: 7665 7273 696f 6e20 3e3d 2036 3030 302c  version >= 6000,
+00006ad0: 2066 2247 6f74 207b 6373 6f75 6e64 5f76   f"Got {csound_v
+00006ae0: 6572 7369 6f6e 7d22 0a0a 2020 2020 2020  ersion}"..      
+00006af0: 2020 6966 206e 6f74 2070 6c61 7466 6f72    if not platfor
+00006b00: 6d69 643a 0a20 2020 2020 2020 2020 2020  mid:.           
+00006b10: 2070 6c61 7466 6f72 6d69 6420 3d20 5f73   platformid = _s
+00006b20: 6573 7369 6f6e 2e70 6c61 7466 6f72 6d69  ession.platformi
+00006b30: 640a 0a20 2020 2020 2020 2070 6f73 7369  d..        possi
+00006b40: 626c 655f 6269 6e61 7269 6573 203d 205b  ble_binaries = [
+00006b50: 6220 666f 7220 6220 696e 2073 656c 662e  b for b in self.
+00006b60: 6269 6e61 7269 6573 0a20 2020 2020 2020  binaries.       
+00006b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006b80: 2020 2020 2020 6966 2062 2e70 6c61 7466        if b.platf
+00006b90: 6f72 6d20 3d3d 2070 6c61 7466 6f72 6d69  orm == platformi
+00006ba0: 6420 616e 6420 622e 6d61 7463 6865 735f  d and b.matches_
+00006bb0: 7665 7273 696f 6e69 6428 6373 6f75 6e64  versionid(csound
+00006bc0: 5f76 6572 7369 6f6e 295d 0a20 2020 2020  _version)].     
+00006bd0: 2020 2069 6620 6e6f 7420 706f 7373 6962     if not possib
+00006be0: 6c65 5f62 696e 6172 6965 733a 0a20 2020  le_binaries:.   
+00006bf0: 2020 2020 2020 2020 205f 6465 6275 6728           _debug(
+00006c00: 6622 506c 7567 696e 2027 7b73 656c 662e  f"Plugin '{self.
+00006c10: 6e61 6d65 7d27 2064 6f65 7320 6e6f 7420  name}' does not 
+00006c20: 7365 656d 2074 6f20 6861 7665 2061 2062  seem to have a b
+00006c30: 696e 6172 7920 666f 7220 706c 6174 666f  inary for platfo
+00006c40: 726d 2027 7b70 6c61 7466 6f72 6d69 647d  rm '{platformid}
+00006c50: 272e 2022 0a20 2020 2020 2020 2020 2020  '. ".           
+00006c60: 2020 2020 2020 2020 6622 466f 756e 6420          f"Found 
+00006c70: 6269 6e61 7269 6573 2066 6f72 2070 6c61  binaries for pla
+00006c80: 7466 6f72 6d73 3a20 7b5b 622e 706c 6174  tforms: {[b.plat
+00006c90: 666f 726d 2066 6f72 2062 2069 6e20 7365  form for b in se
+00006ca0: 6c66 2e62 696e 6172 6965 735d 7d22 290a  lf.binaries]}").
+00006cb0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00006cc0: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
+00006cd0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00006ce0: 2020 6966 206c 656e 2870 6f73 7369 626c    if len(possibl
+00006cf0: 655f 6269 6e61 7269 6573 2920 3e20 313a  e_binaries) > 1:
+00006d00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006d10: 205f 6465 6275 6728 6622 466f 756e 6420   _debug(f"Found 
+00006d20: 6d75 6c74 6970 6c65 2062 696e 6172 6965  multiple binarie
+00006d30: 7320 666f 7220 7b73 656c 662e 6e61 6d65  s for {self.name
+00006d40: 7d2e 2057 696c 6c20 7365 6c65 6374 2074  }. Will select t
+00006d50: 6865 2066 6972 7374 206f 6e65 2229 0a20  he first one"). 
+00006d60: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00006d70: 6e20 706f 7373 6962 6c65 5f62 696e 6172  n possible_binar
+00006d80: 6965 735b 305d 0a0a 2020 2020 6465 6620  ies[0]..    def 
+00006d90: 6176 6169 6c61 626c 655f 6269 6e61 7269  available_binari
+00006da0: 6573 2873 656c 6629 202d 3e20 6c69 7374  es(self) -> list
+00006db0: 5b73 7472 5d3a 0a20 2020 2020 2020 2072  [str]:.        r
+00006dc0: 6574 7572 6e20 5b66 227b 6269 6e61 7279  eturn [f"{binary
+00006dd0: 2e70 6c61 7466 6f72 6d7d 2f63 736f 756e  .platform}/csoun
+00006de0: 647b 6269 6e61 7279 2e63 736f 756e 645f  d{binary.csound_
+00006df0: 7665 7273 696f 6e7d 220a 2020 2020 2020  version}".      
+00006e00: 2020 2020 2020 2020 2020 666f 7220 6269            for bi
+00006e10: 6e61 7279 2069 6e20 7365 6c66 2e62 696e  nary in self.bin
+00006e20: 6172 6965 735d 0a0a 0a40 6461 7461 636c  aries]...@datacl
+00006e30: 6173 730a 636c 6173 7320 4f70 636f 6465  ass.class Opcode
+00006e40: 3a0a 2020 2020 6e61 6d65 3a20 7374 720a  :.    name: str.
+00006e50: 2020 2020 706c 7567 696e 3a20 7374 720a      plugin: str.
+00006e60: 2020 2020 7379 6e74 6178 6573 3a20 6c69      syntaxes: li
+00006e70: 7374 5b73 7472 5d20 7c20 4e6f 6e65 203d  st[str] | None =
+00006e80: 204e 6f6e 650a 2020 2020 6162 7374 7261   None.    abstra
+00006e90: 6374 3a20 7374 7220 3d20 2727 0a20 2020  ct: str = ''.   
+00006ea0: 2069 6e73 7461 6c6c 6564 3a20 626f 6f6c   installed: bool
+00006eb0: 203d 2054 7275 650a 0a0a 4064 6174 6163   = True...@datac
+00006ec0: 6c61 7373 0a63 6c61 7373 2049 6e73 7461  lass.class Insta
+00006ed0: 6c6c 6564 506c 7567 696e 496e 666f 3a0a  lledPluginInfo:.
+00006ee0: 2020 2020 2222 220a 2020 2020 496e 666f      """.    Info
+00006ef0: 726d 6174 696f 6e20 6162 6f75 7420 616e  rmation about an
+00006f00: 2069 6e73 7461 6c6c 6564 2070 6c75 6769   installed plugi
+00006f10: 6e0a 0a20 2020 2041 7474 7269 6273 3a0a  n..    Attribs:.
+00006f20: 2020 2020 2020 2020 6e61 6d65 3a20 2873          name: (s
+00006f30: 7472 2920 6e61 6d65 206f 6620 7468 6520  tr) name of the 
+00006f40: 706c 7567 696e 0a20 2020 2020 2020 2064  plugin.        d
+00006f50: 6c6c 7061 7468 3a20 2850 6174 6829 2070  llpath: (Path) p
+00006f60: 6174 6820 6f66 2074 6865 2070 6c75 6769  ath of the plugi
+00006f70: 6e20 6269 6e61 7279 2028 6120 2e73 6f2c  n binary (a .so,
+00006f80: 202e 646c 6c20 6f72 202e 6479 6c69 6220   .dll or .dylib 
+00006f90: 6669 6c65 290a 2020 2020 2020 2020 696e  file).        in
+00006fa0: 7374 616c 6c65 645f 696e 5f73 7973 7465  stalled_in_syste
+00006fb0: 6d5f 666f 6c64 6572 3a20 2862 6f6f 6c29  m_folder: (bool)
+00006fc0: 2069 7320 7468 6973 2069 6e73 7461 6c6c   is this install
+00006fd0: 6564 2069 6e20 7468 6520 7379 7374 656d  ed in the system
+00006fe0: 7320 666f 6c64 6572 3f0a 2020 2020 2020  s folder?.      
+00006ff0: 2020 696e 7374 616c 6c65 645f 6d61 6e69    installed_mani
+00007000: 6665 7374 5f70 6174 683a 2028 5061 7468  fest_path: (Path
+00007010: 2920 7468 6520 7061 7468 2074 6f20 7468  ) the path to th
+00007020: 6520 696e 7374 616c 6c61 7469 6f6e 206d  e installation m
+00007030: 616e 6966 6573 7420 2861 202e 6a73 6f6e  anifest (a .json
+00007040: 2066 696c 6529 0a20 2020 2020 2020 2076   file).        v
+00007050: 6572 7369 6f6e 7374 723a 2028 7374 7229  ersionstr: (str)
+00007060: 2074 6865 2069 6e73 7461 6c6c 6564 2076   the installed v
+00007070: 6572 7369 6f6e 2c20 6173 2073 7472 2028  ersion, as str (
+00007080: 6966 2069 6e73 7461 6c6c 6564 2076 6961  if installed via
+00007090: 2072 6973 7365 7429 0a20 2020 2022 2222   risset).    """
+000070a0: 0a20 2020 206e 616d 653a 2073 7472 0a20  .    name: str. 
+000070b0: 2020 2064 6c6c 7061 7468 3a20 5061 7468     dllpath: Path
+000070c0: 0a20 2020 2076 6572 7369 6f6e 7374 723a  .    versionstr:
+000070d0: 2073 7472 207c 204e 6f6e 650a 2020 2020   str | None.    
+000070e0: 696e 7374 616c 6c65 645f 6d61 6e69 6665  installed_manife
+000070f0: 7374 5f70 6174 683a 2050 6174 6820 7c20  st_path: Path | 
+00007100: 4e6f 6e65 203d 204e 6f6e 650a 2020 2020  None = None.    
+00007110: 696e 7374 616c 6c65 645f 696e 5f73 7973  installed_in_sys
+00007120: 7465 6d5f 666f 6c64 6572 3a20 626f 6f6c  tem_folder: bool
+00007130: 203d 2046 616c 7365 0a0a 2020 2020 4070   = False..    @p
+00007140: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
+00007150: 7665 7273 696f 6e74 7570 6c65 2873 656c  versiontuple(sel
+00007160: 6629 202d 3e20 7475 706c 655b 696e 742c  f) -> tuple[int,
+00007170: 2069 6e74 2c20 696e 745d 3a0a 2020 2020   int, int]:.    
+00007180: 2020 2020 7265 7475 726e 205f 7665 7273      return _vers
+00007190: 696f 6e5f 7475 706c 6528 7365 6c66 2e76  ion_tuple(self.v
+000071a0: 6572 7369 6f6e 7374 7229 2069 6620 7365  ersionstr) if se
+000071b0: 6c66 2e76 6572 7369 6f6e 7374 7220 616e  lf.versionstr an
+000071c0: 6420 7365 6c66 2e76 6572 7369 6f6e 7374  d self.versionst
+000071d0: 7220 213d 2055 4e4b 4e4f 574e 5f56 4552  r != UNKNOWN_VER
+000071e0: 5349 4f4e 2065 6c73 6520 2830 2c20 302c  SION else (0, 0,
+000071f0: 2030 290a 0a0a 6465 6620 5f6d 6169 6e5f   0)...def _main_
+00007200: 7265 706f 7369 746f 7279 5f70 6174 6828  repository_path(
+00007210: 2920 2d3e 2050 6174 683a 0a20 2020 2022  ) -> Path:.    "
+00007220: 2222 0a20 2020 2047 6574 2074 6865 2070  "".    Get the p
+00007230: 6174 6820 6f66 2074 6865 206d 6169 6e20  ath of the main 
+00007240: 6461 7461 2072 6570 6f73 6974 6f72 790a  data repository.
+00007250: 0a20 2020 2054 6865 206d 6169 6e20 7265  .    The main re
+00007260: 706f 7369 746f 7279 2069 7320 7468 6520  pository is the 
+00007270: 7265 706f 7369 746f 7279 2068 6f6c 6469  repository holdi
+00007280: 6e67 2072 6973 7365 7427 7320 6d61 696e  ng risset's main
+00007290: 2069 6e64 6578 2e0a 2020 2020 5468 6520   index..    The 
+000072a0: 6d61 696e 2069 6e64 6578 2069 7320 6120  main index is a 
+000072b0: 2e6a 736f 6e20 6669 6c65 2077 6974 6820  .json file with 
+000072c0: 7468 6520 6e61 6d65 2022 7269 7373 6574  the name "risset
+000072d0: 696e 6465 782e 6a73 6f6e 2220 7768 6572  index.json" wher
+000072e0: 650a 2020 2020 616c 6c20 706c 7567 696e  e.    all plugin
+000072f0: 7320 616e 6420 6f74 6865 7220 7265 736f  s and other reso
+00007300: 7572 6365 7320 6172 6520 696e 6465 7865  urces are indexe
+00007310: 642e 0a0a 2020 2020 5468 6520 7061 7468  d...    The path
+00007320: 2072 6574 7572 6e65 6420 6865 7265 2064   returned here d
+00007330: 6574 6572 6d69 6e65 7320 7768 6572 6520  etermines where 
+00007340: 7468 6973 2072 6570 6f73 6974 6f72 7920  this repository 
+00007350: 7368 6f75 6c64 2062 650a 2020 2020 636c  should be.    cl
+00007360: 6f6e 6564 206c 6f63 616c 6c79 0a20 2020  oned locally.   
+00007370: 2022 2222 0a20 2020 2072 6574 7572 6e20   """.    return 
+00007380: 5249 5353 4554 5f52 4f4f 5420 2f20 2272  RISSET_ROOT / "r
+00007390: 6973 7365 742d 6461 7461 220a 0a0a 6465  isset-data"...de
+000073a0: 6620 7573 6572 5f70 6c75 6769 6e73 5f70  f user_plugins_p
+000073b0: 6174 6828 6d61 6a6f 7276 6572 7369 6f6e  ath(majorversion
+000073c0: 3d36 2920 2d3e 2050 6174 683a 0a20 2020  =6) -> Path:.   
+000073d0: 2022 2222 0a20 2020 2052 6574 7572 6e20   """.    Return 
+000073e0: 7468 6520 696e 7374 616c 6c20 7061 7468  the install path
+000073f0: 2066 6f72 2075 7365 7220 706c 7567 696e   for user plugin
+00007400: 730a 0a20 2020 2054 6869 7320 7265 7475  s..    This retu
+00007410: 726e 7320 7468 6520 6465 6661 756c 7420  rns the default 
+00007420: 7061 7468 206f 7220 7468 6520 7661 6c75  path or the valu
+00007430: 6520 6f66 2024 4353 5f55 5345 525f 504c  e of $CS_USER_PL
+00007440: 5547 494e 4449 522e 2054 6865 2065 6e76  UGINDIR. The env
+00007450: 0a20 2020 2076 6172 6961 626c 6520 6861  .    variable ha
+00007460: 7320 7072 696f 7269 7479 0a20 2020 2022  s priority.    "
+00007470: 2222 0a20 2020 2063 735f 7573 6572 5f70  "".    cs_user_p
+00007480: 6c75 6769 6e64 6972 203d 206f 732e 6765  lugindir = os.ge
+00007490: 7465 6e76 2822 4353 5f55 5345 525f 504c  tenv("CS_USER_PL
+000074a0: 5547 494e 4449 5222 290a 2020 2020 6966  UGINDIR").    if
+000074b0: 2063 735f 7573 6572 5f70 6c75 6769 6e64   cs_user_plugind
+000074c0: 6972 3a0a 2020 2020 2020 2020 6f75 7420  ir:.        out 
+000074d0: 3d20 5061 7468 2863 735f 7573 6572 5f70  = Path(cs_user_p
+000074e0: 6c75 6769 6e64 6972 290a 2020 2020 656c  lugindir).    el
+000074f0: 7365 3a0a 2020 2020 2020 2020 706c 7567  se:.        plug
+00007500: 696e 7364 6972 203d 207b 0a20 2020 2020  insdir = {.     
+00007510: 2020 2020 2020 2027 6c69 6e75 7827 3a20         'linux': 
+00007520: 6627 2448 4f4d 452f 2e6c 6f63 616c 2f6c  f'$HOME/.local/l
+00007530: 6962 2f63 736f 756e 642f 7b6d 616a 6f72  ib/csound/{major
+00007540: 7665 7273 696f 6e7d 2e30 2f70 6c75 6769  version}.0/plugi
+00007550: 6e73 3634 272c 0a20 2020 2020 2020 2020  ns64',.         
+00007560: 2020 2027 7769 6e33 3227 3a20 6627 433a     'win32': f'C:
+00007570: 5c5c 5573 6572 735c 5c24 5553 4552 4e41  \\Users\\$USERNA
+00007580: 4d45 5c5c 4170 7044 6174 615c 5c4c 6f63  ME\\AppData\\Loc
+00007590: 616c 5c5c 6373 6f75 6e64 5c5c 7b6d 616a  al\\csound\\{maj
+000075a0: 6f72 7665 7273 696f 6e7d 2e30 5c5c 706c  orversion}.0\\pl
+000075b0: 7567 696e 7336 3427 2c0a 2020 2020 2020  ugins64',.      
+000075c0: 2020 2020 2020 2764 6172 7769 6e27 3a20        'darwin': 
+000075d0: 6627 2448 4f4d 452f 4c69 6272 6172 792f  f'$HOME/Library/
+000075e0: 6373 6f75 6e64 2f7b 6d61 6a6f 7276 6572  csound/{majorver
+000075f0: 7369 6f6e 7d2e 302f 706c 7567 696e 7336  sion}.0/plugins6
+00007600: 3427 0a20 2020 2020 2020 207d 5b73 7973  4'.        }[sys
+00007610: 2e70 6c61 7466 6f72 6d5d 0a20 2020 2020  .platform].     
+00007620: 2020 206f 7574 203d 2050 6174 6828 6f73     out = Path(os
+00007630: 2e70 6174 682e 6578 7061 6e64 7661 7273  .path.expandvars
+00007640: 2870 6c75 6769 6e73 6469 7229 290a 2020  (pluginsdir)).  
+00007650: 2020 7265 7475 726e 206f 7574 0a0a 0a64    return out...d
+00007660: 6566 205f 6973 5f67 6c6f 6228 733a 2073  ef _is_glob(s: s
+00007670: 7472 2920 2d3e 2062 6f6f 6c3a 0a20 2020  tr) -> bool:.   
+00007680: 2072 6574 7572 6e20 222a 2220 696e 2073   return "*" in s
+00007690: 206f 7220 223f 2220 696e 2073 0a0a 0a64   or "?" in s...d
+000076a0: 6566 205f 7a69 705f 6578 7472 6163 745f  ef _zip_extract_
+000076b0: 666f 6c64 6572 287a 6970 6669 6c65 3a20  folder(zipfile: 
+000076c0: 5061 7468 2c0a 2020 2020 2020 2020 2020  Path,.          
+000076d0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+000076e0: 6c64 6572 3a20 7374 722c 0a20 2020 2020  lder: str,.     
+000076f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007700: 2020 2063 6c65 616e 7570 3d54 7275 652c     cleanup=True,
+00007710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007720: 2020 2020 2020 2020 2064 6573 7472 6f6f           destroo
+00007730: 743a 2050 6174 6820 7c20 4e6f 6e65 203d  t: Path | None =
+00007740: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+00007750: 2020 2020 2020 2020 2020 2020 2020 2920                ) 
+00007760: 2d3e 2050 6174 683a 0a20 2020 2066 6f6c  -> Path:.    fol
+00007770: 6465 726e 616d 6520 3d20 6f73 2e70 6174  dername = os.pat
+00007780: 682e 7370 6c69 7428 666f 6c64 6572 295b  h.split(folder)[
+00007790: 315d 0a20 2020 2072 6f6f 7420 3d20 5061  1].    root = Pa
+000077a0: 7468 2874 656d 7066 696c 652e 6d6b 7465  th(tempfile.mkte
+000077b0: 6d70 2829 290a 2020 2020 726f 6f74 2e6d  mp()).    root.m
+000077c0: 6b64 6972 2870 6172 656e 7473 3d54 7275  kdir(parents=Tru
+000077d0: 652c 2065 7869 7374 5f6f 6b3d 5472 7565  e, exist_ok=True
+000077e0: 290a 2020 2020 7a20 3d20 5a69 7046 696c  ).    z = ZipFil
+000077f0: 6528 7a69 7066 696c 652c 2027 7227 290a  e(zipfile, 'r').
+00007800: 2020 2020 7061 7474 6572 6e20 3d20 666f      pattern = fo
+00007810: 6c64 6572 202b 2027 2f2a 270a 2020 2020  lder + '/*'.    
+00007820: 6578 7472 6163 7465 6420 3d20 5b7a 2e65  extracted = [z.e
+00007830: 7874 7261 6374 286e 616d 652c 2072 6f6f  xtract(name, roo
+00007840: 7429 2066 6f72 206e 616d 6520 696e 207a  t) for name in z
+00007850: 2e6e 616d 656c 6973 7428 290a 2020 2020  .namelist().    
+00007860: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00007870: 666e 6d61 7463 682e 666e 6d61 7463 6828  fnmatch.fnmatch(
+00007880: 6e61 6d65 2c20 7061 7474 6572 6e29 5d0a  name, pattern)].
+00007890: 2020 2020 5f64 6562 7567 2866 225f 7a69      _debug(f"_zi
+000078a0: 705f 6578 7472 6163 745f 666f 6c64 6572  p_extract_folder
+000078b0: 3a20 4578 7472 6163 7465 6420 6669 6c65  : Extracted file
+000078c0: 7320 6672 6f6d 2066 6f6c 6465 7220 7b66  s from folder {f
+000078d0: 6f6c 6465 727d 3a20 7b65 7874 7261 6374  older}: {extract
+000078e0: 6564 7d22 290a 2020 2020 6966 2064 6573  ed}").    if des
+000078f0: 7472 6f6f 7420 6973 204e 6f6e 653a 0a20  troot is None:. 
+00007900: 2020 2020 2020 2064 6573 7472 6f6f 7420         destroot 
+00007910: 3d20 5061 7468 2874 656d 7066 696c 652e  = Path(tempfile.
+00007920: 6765 7474 656d 7064 6972 2829 290a 2020  gettempdir()).  
+00007930: 2020 6465 7374 666f 6c64 6572 203d 2064    destfolder = d
+00007940: 6573 7472 6f6f 7420 2f20 666f 6c64 6572  estroot / folder
+00007950: 6e61 6d65 0a20 2020 2069 6620 6465 7374  name.    if dest
+00007960: 666f 6c64 6572 2e65 7869 7374 7328 293a  folder.exists():
+00007970: 0a20 2020 2020 2020 205f 6465 6275 6728  .        _debug(
+00007980: 6622 5f7a 6970 5f65 7874 7261 6374 5f66  f"_zip_extract_f
+00007990: 6f6c 6465 723a 2044 6573 7469 6e61 7469  older: Destinati
+000079a0: 6f6e 2066 6f6c 6465 7220 7b64 6573 7466  on folder {destf
+000079b0: 6f6c 6465 727d 2061 6c72 6561 6479 2065  older} already e
+000079c0: 7869 7374 732c 2072 656d 6f76 696e 6722  xists, removing"
+000079d0: 290a 2020 2020 2020 2020 5f72 6d5f 6469  ).        _rm_di
+000079e0: 7228 6465 7374 666f 6c64 6572 290a 2020  r(destfolder).  
+000079f0: 2020 7368 7574 696c 2e6d 6f76 6528 726f    shutil.move(ro
+00007a00: 6f74 202f 2066 6f6c 6465 722c 2064 6573  ot / folder, des
+00007a10: 7472 6f6f 7429 0a20 2020 2061 7373 6572  troot).    asser
+00007a20: 7420 6465 7374 666f 6c64 6572 2e65 7869  t destfolder.exi
+00007a30: 7374 7328 2920 616e 6420 6465 7374 666f  sts() and destfo
+00007a40: 6c64 6572 2e69 735f 6469 7228 290a 2020  lder.is_dir().  
+00007a50: 2020 6966 2063 6c65 616e 7570 3a0a 2020    if cleanup:.  
+00007a60: 2020 2020 2020 5f72 6d5f 6469 7228 726f        _rm_dir(ro
+00007a70: 6f74 290a 2020 2020 7265 7475 726e 2064  ot).    return d
+00007a80: 6573 7466 6f6c 6465 720a 0a0a 6465 6620  estfolder...def 
+00007a90: 5f7a 6970 5f65 7874 7261 6374 287a 6970  _zip_extract(zip
+00007aa0: 6669 6c65 3a20 5061 7468 2c20 7061 7474  file: Path, patt
+00007ab0: 6572 6e73 3a20 6c69 7374 5b73 7472 5d29  erns: list[str])
+00007ac0: 202d 3e20 6c69 7374 5b50 6174 685d 3a0a   -> list[Path]:.
+00007ad0: 2020 2020 2222 220a 2020 2020 4578 7472      """.    Extr
+00007ae0: 6163 7420 6d75 6c74 6970 6c65 2066 696c  act multiple fil
+00007af0: 6573 2066 726f 6d20 7a69 700a 0a20 2020  es from zip..   
+00007b00: 2041 7267 733a 0a20 2020 2020 2020 207a   Args:.        z
+00007b10: 6970 6669 6c65 3a20 7468 6520 7a69 7020  ipfile: the zip 
+00007b20: 6669 6c65 2074 6f20 6578 7472 6163 7420  file to extract 
+00007b30: 6672 6f6d 0a20 2020 2020 2020 2070 6174  from.        pat
+00007b40: 7465 726e 733a 2061 206c 6973 7420 6f66  terns: a list of
+00007b50: 2066 696c 656e 616d 6573 206f 7220 676c   filenames or gl
+00007b60: 6f62 2070 6174 7465 726e 730a 0a20 2020  ob patterns..   
+00007b70: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+00007b80: 2020 6120 6c69 7374 206f 6620 6f75 7470    a list of outp
+00007b90: 7574 2066 696c 6573 2065 7874 7261 6374  ut files extract
+00007ba0: 6564 2e20 4966 2067 6c6f 6220 7061 7474  ed. If glob patt
+00007bb0: 6572 6e73 2077 6572 6520 7573 6564 2074  erns were used t
+00007bc0: 6865 7265 206d 6967 6874 2062 650a 2020  here might be.  
+00007bd0: 2020 2020 2020 6d6f 7265 206f 7574 7075        more outpu
+00007be0: 7420 6669 6c65 7320 7468 616e 206e 756d  t files than num
+00007bf0: 6265 7220 6f66 2070 6174 7465 726e 732e  ber of patterns.
+00007c00: 204f 7468 6572 7769 7365 2074 6865 7265   Otherwise there
+00007c10: 2069 7320 6120 3120 746f 2031 0a20 2020   is a 1 to 1.   
+00007c20: 2020 2020 2072 656c 6174 696f 6e73 6869       relationshi
+00007c30: 7020 6265 7477 6565 6e20 696e 7075 7420  p between input 
+00007c40: 616e 6420 6f75 7470 7574 0a20 2020 2022  and output.    "
+00007c50: 2222 0a20 2020 206f 7574 666f 6c64 6572  "".    outfolder
+00007c60: 203d 2050 6174 6828 7465 6d70 6669 6c65   = Path(tempfile
+00007c70: 2e67 6574 7465 6d70 6469 7228 2929 0a20  .gettempdir()). 
+00007c80: 2020 207a 203d 205a 6970 4669 6c65 287a     z = ZipFile(z
+00007c90: 6970 6669 6c65 2c20 2772 2729 0a20 2020  ipfile, 'r').   
+00007ca0: 206f 7574 3a20 6c69 7374 5b50 6174 685d   out: list[Path]
+00007cb0: 203d 205b 5d0a 2020 2020 7a69 7070 6564   = [].    zipped
+00007cc0: 203d 207a 2e6e 616d 656c 6973 7428 290a   = z.namelist().
+00007cd0: 2020 2020 5f64 6562 7567 2866 2249 6e73      _debug(f"Ins
+00007ce0: 7065 6374 696e 6720 7a69 7066 696c 6520  pecting zipfile 
+00007cf0: 7b7a 6970 6669 6c65 7d2c 2063 6f6e 7465  {zipfile}, conte
+00007d00: 6e74 733a 207b 7a69 7070 6564 7d22 290a  nts: {zipped}").
+00007d10: 2020 2020 666f 7220 7061 7474 6572 6e20      for pattern 
+00007d20: 696e 2070 6174 7465 726e 733a 0a20 2020  in patterns:.   
+00007d30: 2020 2020 2069 6620 5f69 735f 676c 6f62       if _is_glob
+00007d40: 2870 6174 7465 726e 293a 0a20 2020 2020  (pattern):.     
+00007d50: 2020 2020 2020 205f 6465 6275 6728 6622         _debug(f"
+00007d60: 4d61 7463 6869 6e67 206e 616d 6573 2061  Matching names a
+00007d70: 6761 696e 7374 2070 6174 7465 726e 207b  gainst pattern {
+00007d80: 7061 7474 6572 6e7d 2229 0a20 2020 2020  pattern}").     
+00007d90: 2020 2020 2020 2066 6f72 206e 616d 6520         for name 
+00007da0: 696e 207a 6970 7065 643a 0a20 2020 2020  in zipped:.     
+00007db0: 2020 2020 2020 2020 2020 2069 6620 6e61             if na
+00007dc0: 6d65 2e65 6e64 7377 6974 6828 222f 2229  me.endswith("/")
+00007dd0: 2061 6e64 2066 6e6d 6174 6368 2e66 6e6d   and fnmatch.fnm
+00007de0: 6174 6368 286e 616d 655b 3a2d 315d 2c20  atch(name[:-1], 
+00007df0: 7061 7474 6572 6e29 3a0a 2020 2020 2020  pattern):.      
+00007e00: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00007e10: 6120 666f 6c64 6572 0a20 2020 2020 2020  a folder.       
+00007e20: 2020 2020 2020 2020 2020 2020 206f 7574               out
+00007e30: 2e61 7070 656e 6428 5f7a 6970 5f65 7874  .append(_zip_ext
+00007e40: 7261 6374 5f66 6f6c 6465 7228 7a69 7066  ract_folder(zipf
+00007e50: 696c 652c 206e 616d 655b 3a2d 315d 2929  ile, name[:-1]))
+00007e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007e70: 2065 6c69 6620 666e 6d61 7463 682e 666e   elif fnmatch.fn
+00007e80: 6d61 7463 6828 6e61 6d65 2c20 7061 7474  match(name, patt
+00007e90: 6572 6e29 3a0a 2020 2020 2020 2020 2020  ern):.          
+00007ea0: 2020 2020 2020 2020 2020 5f64 6562 7567            _debug
+00007eb0: 2866 2220 2020 4e61 6d65 207b 6e61 6d65  (f"   Name {name
+00007ec0: 7d20 6d61 7463 6865 7321 2229 0a20 2020  } matches!").   
+00007ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007ee0: 206f 7574 2e61 7070 656e 6428 5061 7468   out.append(Path
+00007ef0: 287a 2e65 7874 7261 6374 286e 616d 652c  (z.extract(name,
+00007f00: 2070 6174 683d 6f75 7466 6f6c 6465 722e   path=outfolder.
+00007f10: 6173 5f70 6f73 6978 2829 2929 290a 2020  as_posix()))).  
+00007f20: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00007f30: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00007f40: 2020 2020 2020 2020 5f64 6562 7567 2866          _debug(f
+00007f50: 2220 2020 4e61 6d65 207b 6e61 6d65 7d20  "   Name {name} 
+00007f60: 646f 6573 206e 6f74 206d 6174 6368 2229  does not match")
+00007f70: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00007f80: 2020 2020 2020 2020 2020 206f 7574 2e61             out.a
+00007f90: 7070 656e 6428 5061 7468 287a 2e65 7874  ppend(Path(z.ext
+00007fa0: 7261 6374 2870 6174 7465 726e 2c20 7061  ract(pattern, pa
+00007fb0: 7468 3d6f 7574 666f 6c64 6572 2929 290a  th=outfolder))).
+00007fc0: 2020 2020 7265 7475 726e 206f 7574 0a0a      return out..
+00007fd0: 0a64 6566 205f 7a69 705f 6578 7472 6163  .def _zip_extrac
+00007fe0: 745f 6669 6c65 287a 6970 6669 6c65 3a20  t_file(zipfile: 
+00007ff0: 5061 7468 2c20 6578 7472 6163 7470 6174  Path, extractpat
+00008000: 683a 2073 7472 2920 2d3e 2050 6174 683a  h: str) -> Path:
+00008010: 0a20 2020 2022 2222 0a20 2020 2045 7874  .    """.    Ext
+00008020: 7261 6374 7320 6120 6669 6c65 2066 726f  racts a file fro
+00008030: 6d20 6120 7a69 7066 696c 652c 2072 6574  m a zipfile, ret
+00008040: 7572 6e73 2074 6865 2070 6174 6820 746f  urns the path to
+00008050: 2074 6865 2065 7874 7261 6374 6564 2066   the extracted f
+00008060: 696c 650a 0a20 2020 2041 7267 733a 0a20  ile..    Args:. 
+00008070: 2020 2020 2020 207a 6970 6669 6c65 3a20         zipfile: 
+00008080: 7468 6520 7061 7468 2074 6f20 6120 6c6f  the path to a lo
+00008090: 6361 6c20 2e7a 6970 2066 696c 650a 2020  cal .zip file.  
+000080a0: 2020 2020 2020 6578 7472 6163 7470 6174        extractpat
+000080b0: 683a 2074 6865 2070 6174 6820 746f 2065  h: the path to e
+000080c0: 7874 7261 6374 2069 6e73 6964 6520 7468  xtract inside th
+000080d0: 6520 2e7a 6970 2066 696c 650a 0a20 2020  e .zip file..   
+000080e0: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+000080f0: 2020 7468 6520 7061 7468 206f 6620 7468    the path of th
+00008100: 6520 6578 7472 6163 7465 6420 6669 6c65  e extracted file
+00008110: 2e0a 0a20 2020 2052 6169 7365 7320 4b65  ...    Raises Ke
+00008120: 7945 7272 6f72 2069 6620 6065 7874 7261  yError if `extra
+00008130: 6374 7061 7468 6020 6973 206e 6f74 2069  ctpath` is not i
+00008140: 6e20 607a 6970 6669 6c65 600a 2020 2020  n `zipfile`.    
+00008150: 2222 220a 2020 2020 7265 7475 726e 205f  """.    return _
+00008160: 7a69 705f 6578 7472 6163 7428 7a69 7066  zip_extract(zipf
+00008170: 696c 652c 205b 6578 7472 6163 7470 6174  ile, [extractpat
+00008180: 685d 295b 305d 0a0a 0a64 6566 205f 6373  h])[0]...def _cs
+00008190: 6f75 6e64 5f6f 7063 6f64 6573 286d 6574  ound_opcodes(met
+000081a0: 686f 643d 2763 736f 756e 6427 2920 2d3e  hod='csound') ->
+000081b0: 206c 6973 745b 7374 725d 3a0a 2020 2020   list[str]:.    
+000081c0: 2222 220a 2020 2020 5265 7475 726e 7320  """.    Returns 
+000081d0: 6120 6c69 7374 206f 6620 696e 7374 616c  a list of instal
+000081e0: 6c65 6420 6f70 636f 6465 730a 2020 2020  led opcodes.    
+000081f0: 2222 220a 2020 2020 6966 206d 6574 686f  """.    if metho
+00008200: 6420 3d3d 2027 6373 6f75 6e64 273a 0a20  d == 'csound':. 
+00008210: 2020 2020 2020 2063 736f 756e 645f 6269         csound_bi
+00008220: 6e20 3d20 5f67 6574 5f63 736f 756e 645f  n = _get_csound_
+00008230: 6269 6e61 7279 2822 6373 6f75 6e64 2229  binary("csound")
+00008240: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00008250: 6373 6f75 6e64 5f62 696e 3a0a 2020 2020  csound_bin:.    
+00008260: 2020 2020 2020 2020 7261 6973 6520 5275          raise Ru
+00008270: 6e74 696d 6545 7272 6f72 2822 4469 6420  ntimeError("Did 
+00008280: 6e6f 7420 6669 6e64 2063 736f 756e 6420  not find csound 
+00008290: 6269 6e61 7279 2229 0a20 2020 2020 2020  binary").       
+000082a0: 2070 726f 6320 3d20 7375 6270 726f 6365   proc = subproce
+000082b0: 7373 2e72 756e 285b 6373 6f75 6e64 5f62  ss.run([csound_b
+000082c0: 696e 2c20 222d 7a31 225d 2c20 7374 646f  in, "-z1"], stdo
+000082d0: 7574 3d73 7562 7072 6f63 6573 732e 5049  ut=subprocess.PI
+000082e0: 5045 2c20 7374 6465 7272 3d73 7562 7072  PE, stderr=subpr
+000082f0: 6f63 6573 732e 5354 444f 5554 290a 2020  ocess.STDOUT).  
+00008300: 2020 2020 2020 7478 7420 3d20 7072 6f63        txt = proc
+00008310: 2e73 7464 6f75 742e 6465 636f 6465 2827  .stdout.decode('
+00008320: 6173 6369 6927 290a 2020 2020 2020 2020  ascii').        
+00008330: 6f70 636f 6465 7320 3d20 5b5d 0a20 2020  opcodes = [].   
+00008340: 2020 2020 2066 6f72 206c 696e 6520 696e       for line in
+00008350: 2074 7874 2e73 706c 6974 6c69 6e65 7328   txt.splitlines(
+00008360: 293a 0a20 2020 2020 2020 2020 2020 206c  ):.            l
+00008370: 696e 6520 3d20 6c69 6e65 2e73 7472 6970  ine = line.strip
+00008380: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
+00008390: 6620 6e6f 7420 6c69 6e65 3a0a 2020 2020  f not line:.    
+000083a0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+000083b0: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
+000083c0: 2070 6172 7473 203d 206c 696e 652e 7370   parts = line.sp
+000083d0: 6c69 7428 290a 2020 2020 2020 2020 2020  lit().          
+000083e0: 2020 6f70 636f 6465 732e 6170 7065 6e64    opcodes.append
+000083f0: 2870 6172 7473 5b30 5d29 0a20 2020 2020  (parts[0]).     
+00008400: 2020 2072 6574 7572 6e20 6f70 636f 6465     return opcode
+00008410: 730a 2020 2020 656c 6966 206d 6574 686f  s.    elif metho
+00008420: 6420 3d3d 2027 6374 6373 6f75 6e64 273a  d == 'ctcsound':
+00008430: 0a20 2020 2020 2020 2069 6d70 6f72 7420  .        import 
+00008440: 6374 6373 6f75 6e64 370a 2020 2020 2020  ctcsound7.      
+00008450: 2020 6373 203d 2063 7463 736f 756e 6437    cs = ctcsound7
+00008460: 2e43 736f 756e 6428 290a 2020 2020 2020  .Csound().      
+00008470: 2020 6373 2e73 6574 4f70 7469 6f6e 2822    cs.setOption("
+00008480: 2d64 2229 2020 2320 7375 7072 6573 7320  -d")  # supress 
+00008490: 6469 7370 6c61 7973 0a20 2020 2020 2020  displays.       
+000084a0: 2023 2069 6620 6f70 636f 6465 6469 723a   # if opcodedir:
+000084b0: 0a20 2020 2020 2020 2023 2020 2020 2063  .        #     c
+000084c0: 732e 7365 744f 7074 696f 6e28 6627 2d2d  s.setOption(f'--
+000084d0: 6f70 636f 6465 2d64 6972 3d7b 6f70 636f  opcode-dir={opco
+000084e0: 6465 6469 727d 2729 0a20 2020 2020 2020  dedir}').       
+000084f0: 206f 7063 6f64 6573 2c20 6e20 3d20 6373   opcodes, n = cs
+00008500: 2e6e 6577 4f70 636f 6465 4c69 7374 2829  .newOpcodeList()
+00008510: 0a20 2020 2020 2020 206f 7063 6f64 654e  .        opcodeN
+00008520: 616d 6573 203d 205b 6f70 632e 6f70 6e61  ames = [opc.opna
+00008530: 6d65 2e64 6563 6f64 6528 2775 7466 2d38  me.decode('utf-8
+00008540: 2729 2066 6f72 206f 7063 2069 6e20 6f70  ') for opc in op
+00008550: 636f 6465 735d 0a20 2020 2020 2020 2063  codes].        c
+00008560: 732e 6469 7370 6f73 654f 7063 6f64 654c  s.disposeOpcodeL
+00008570: 6973 7428 6f70 636f 6465 7329 0a20 2020  ist(opcodes).   
+00008580: 2020 2020 2072 6574 7572 6e20 6f70 636f       return opco
+00008590: 6465 4e61 6d65 730a 2020 2020 656c 7365  deNames.    else
+000085a0: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+000085b0: 5661 6c75 6545 7272 6f72 2866 224d 6574  ValueError(f"Met
+000085c0: 686f 6420 277b 6d65 7468 6f64 7d27 2075  hod '{method}' u
+000085d0: 6e6b 6e6f 776e 2c20 706f 7373 6962 6c65  nknown, possible
+000085e0: 206d 6574 686f 6473 3a20 2763 736f 756e   methods: 'csoun
+000085f0: 6427 2c20 2763 7463 736f 756e 6427 2229  d', 'ctcsound'")
+00008600: 0a0a 0a64 6566 205f 706c 7567 696e 5f65  ...def _plugin_e
+00008610: 7874 656e 7369 6f6e 2829 202d 3e20 7374  xtension() -> st
+00008620: 723a 0a20 2020 2072 6574 7572 6e20 7b0a  r:.    return {.
+00008630: 2020 2020 2020 2020 276c 696e 7578 273a          'linux':
+00008640: 2027 2e73 6f27 2c0a 2020 2020 2020 2020   '.so',.        
+00008650: 2764 6172 7769 6e27 3a20 272e 6479 6c69  'darwin': '.dyli
+00008660: 6227 2c0a 2020 2020 2020 2020 2777 696e  b',.        'win
+00008670: 3332 273a 2027 2e64 6c6c 270a 2020 2020  32': '.dll'.    
+00008680: 7d5b 7379 732e 706c 6174 666f 726d 5d0a  }[sys.platform].
+00008690: 0a0a 6465 6620 5f67 6574 5f70 6174 685f  ..def _get_path_
+000086a0: 7365 7061 7261 746f 7228 2920 2d3e 2073  separator() -> s
+000086b0: 7472 3a0a 2020 2020 2222 2252 6574 7572  tr:.    """Retur
+000086c0: 6e73 2074 6865 2070 6174 6820 7365 7061  ns the path sepa
+000086d0: 7261 746f 7220 666f 7220 7468 6520 6375  rator for the cu
+000086e0: 7272 656e 7420 706c 6174 666f 726d 2222  rrent platform""
+000086f0: 220a 2020 2020 6966 2073 7973 2e70 6c61  ".    if sys.pla
+00008700: 7466 6f72 6d20 3d3d 2022 7769 6e33 3222  tform == "win32"
+00008710: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00008720: 2022 3b22 0a20 2020 2072 6574 7572 6e20   ";".    return 
+00008730: 223a 220a 0a0a 6465 6620 5f67 6574 5f73  ":"...def _get_s
+00008740: 6865 6c6c 2829 202d 3e20 7374 7220 7c20  hell() -> str | 
+00008750: 4e6f 6e65 3a0a 2020 2020 2222 220a 2020  None:.    """.  
+00008760: 2020 5265 7475 726e 7320 6f6e 6520 6f66    Returns one of
+00008770: 2022 6261 7368 222c 2022 7a73 6822 2c20   "bash", "zsh", 
+00008780: 2266 6973 6822 0a0a 2020 2020 4966 206e  "fish"..    If n
+00008790: 6f74 2061 626c 6520 746f 2067 6574 2074  ot able to get t
+000087a0: 6865 2067 6976 656e 2069 6e66 6f72 6d61  he given informa
+000087b0: 7469 6f6e 2c20 7265 7475 726e 7320 4e6f  tion, returns No
+000087c0: 6e65 0a20 2020 2049 6e20 7061 7274 6963  ne.    In partic
+000087d0: 756c 6172 2c20 696e 2077 696e 646f 7773  ular, in windows
+000087e0: 2069 7420 7265 7475 726e 7320 4e6f 6e65   it returns None
+000087f0: 0a20 2020 2022 2222 0a20 2020 2069 6620  .    """.    if 
+00008800: 7379 732e 706c 6174 666f 726d 203d 3d20  sys.platform == 
+00008810: 2277 696e 3332 223a 0a20 2020 2020 2020  "win32":.       
+00008820: 2072 6574 7572 6e0a 2020 2020 7368 656c   return.    shel
+00008830: 6c65 6e76 203d 206f 732e 6765 7465 6e76  lenv = os.getenv
+00008840: 2822 5348 454c 4c22 290a 2020 2020 6966  ("SHELL").    if
+00008850: 206e 6f74 2073 6865 6c6c 656e 763a 0a20   not shellenv:. 
+00008860: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
+00008870: 6e65 0a20 2020 2073 6865 6c6c 203d 206f  ne.    shell = o
+00008880: 732e 7061 7468 2e73 706c 6974 2873 6865  s.path.split(she
+00008890: 6c6c 656e 7629 5b31 5d2e 7374 7269 7028  llenv)[1].strip(
+000088a0: 290a 2020 2020 6966 2073 6865 6c6c 2069  ).    if shell i
+000088b0: 6e20 2822 6261 7368 222c 2022 7a73 6822  n ("bash", "zsh"
+000088c0: 2c20 2266 6973 6822 293a 0a20 2020 2020  , "fish"):.     
+000088d0: 2020 2072 6574 7572 6e20 7368 656c 6c0a     return shell.
+000088e0: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
+000088f0: 0a0a 6465 6620 5f67 6574 5f63 736f 756e  ..def _get_csoun
+00008900: 645f 6269 6e61 7279 2862 696e 6172 7929  d_binary(binary)
+00008910: 202d 3e20 7374 7220 7c20 4e6f 6e65 3a0a   -> str | None:.
+00008920: 2020 2020 6966 2028 6f75 7420 3a3d 205f      if (out := _
+00008930: 7365 7373 696f 6e2e 6361 6368 652e 6765  session.cache.ge
+00008940: 7428 2763 736f 756e 642d 6269 6e27 2c20  t('csound-bin', 
+00008950: 5f55 4e53 4554 2929 2069 7320 5f55 4e53  _UNSET)) is _UNS
+00008960: 4554 3a0a 2020 2020 2020 2020 7061 7468  ET:.        path
+00008970: 203d 2073 6875 7469 6c2e 7768 6963 6828   = shutil.which(
+00008980: 6269 6e61 7279 290a 2020 2020 2020 2020  binary).        
+00008990: 5f73 6573 7369 6f6e 2e63 6163 6865 5b27  _session.cache['
+000089a0: 6373 6f75 6e64 2d62 696e 275d 203d 206f  csound-bin'] = o
+000089b0: 7574 203d 2070 6174 6820 6966 2070 6174  ut = path if pat
+000089c0: 6820 656c 7365 204e 6f6e 650a 2020 2020  h else None.    
+000089d0: 7265 7475 726e 206f 7574 0a0a 0a64 6566  return out...def
+000089e0: 205f 6765 745f 6769 745f 6269 6e61 7279   _get_git_binary
+000089f0: 2829 202d 3e20 7374 723a 0a20 2020 2069  () -> str:.    i
+00008a00: 6620 2870 6174 6820 3a3d 205f 7365 7373  f (path := _sess
+00008a10: 696f 6e2e 6361 6368 652e 6765 7428 2767  ion.cache.get('g
+00008a20: 6974 2d62 696e 6172 7927 2929 2069 7320  it-binary')) is 
+00008a30: 4e6f 6e65 3a0a 2020 2020 2020 2020 7061  None:.        pa
+00008a40: 7468 203d 2073 6875 7469 6c2e 7768 6963  th = shutil.whic
+00008a50: 6828 2267 6974 2229 0a20 2020 2020 2020  h("git").       
+00008a60: 2069 6620 6e6f 7420 7061 7468 206f 7220   if not path or 
+00008a70: 6e6f 7420 6f73 2e70 6174 682e 6578 6973  not os.path.exis
+00008a80: 7473 2870 6174 6829 3a0a 2020 2020 2020  ts(path):.      
+00008a90: 2020 2020 2020 7261 6973 6520 5275 6e74        raise Runt
+00008aa0: 696d 6545 7272 6f72 2822 6769 7420 6269  imeError("git bi
+00008ab0: 6e61 7279 206e 6f74 2066 6f75 6e64 2229  nary not found")
+00008ac0: 0a20 2020 2020 2020 205f 7365 7373 696f  .        _sessio
+00008ad0: 6e2e 6361 6368 655b 2767 6974 2d62 696e  n.cache['git-bin
+00008ae0: 6172 7927 5d20 3d20 7061 7468 0a20 2020  ary'] = path.   
+00008af0: 2072 6574 7572 6e20 7061 7468 0a0a 0a64   return path...d
+00008b00: 6566 205f 656e 7375 7265 5f70 6172 656e  ef _ensure_paren
+00008b10: 745f 6578 6973 7473 2870 6174 683a 2050  t_exists(path: P
+00008b20: 6174 6829 202d 3e20 4e6f 6e65 3a0a 2020  ath) -> None:.  
+00008b30: 2020 6966 2070 6174 682e 6973 5f64 6972    if path.is_dir
+00008b40: 2829 3a0a 2020 2020 2020 2020 7061 7265  ():.        pare
+00008b50: 6e74 203d 2070 6174 680a 2020 2020 656c  nt = path.    el
+00008b60: 7365 3a0a 2020 2020 2020 2020 7061 7265  se:.        pare
+00008b70: 6e74 203d 2070 6174 682e 7061 7265 6e74  nt = path.parent
+00008b80: 0a20 2020 2070 6172 656e 742e 6d6b 6469  .    parent.mkdi
+00008b90: 7228 7061 7265 6e74 733d 5472 7565 2c20  r(parents=True, 
+00008ba0: 6578 6973 745f 6f6b 3d54 7275 6529 0a0a  exist_ok=True)..
+00008bb0: 0a64 6566 205f 6769 745f 6c6f 6361 6c5f  .def _git_local_
+00008bc0: 7061 7468 2872 6570 6f3a 2073 7472 2c20  path(repo: str, 
+00008bd0: 7570 6461 7465 3d46 616c 7365 2920 2d3e  update=False) ->
+00008be0: 2050 6174 683a 0a20 2020 2022 2222 0a20   Path:.    """. 
+00008bf0: 2020 2051 7565 7279 2074 6865 206c 6f63     Query the loc
+00008c00: 616c 2070 6174 6820 6f66 2074 6865 2067  al path of the g
+00008c10: 6976 656e 2072 6570 6f73 6974 6f72 792c  iven repository,
+00008c20: 2063 6c6f 6e65 2069 6620 6e65 6564 6564   clone if needed
+00008c30: 0a0a 2020 2020 4172 6773 3a0a 2020 2020  ..    Args:.    
+00008c40: 2020 2020 7265 706f 3a20 7468 6520 7572      repo: the ur
+00008c50: 6c20 6f66 2074 6865 2067 6974 2072 6570  l of the git rep
+00008c60: 6f73 6974 6f72 790a 2020 2020 2020 2020  ository.        
+00008c70: 7570 6461 7465 3a20 6966 206e 6f74 2063  update: if not c
+00008c80: 6c6f 6e65 642c 2075 7064 6174 6520 7468  loned, update th
+00008c90: 6520 7265 706f 0a20 2020 2022 2222 0a20  e repo.    """. 
+00008ca0: 2020 2069 6620 7265 706f 2069 6e20 5f73     if repo in _s
+00008cb0: 6573 7369 6f6e 2e63 6c6f 6e65 645f 7265  ession.cloned_re
+00008cc0: 706f 733a 0a20 2020 2020 2020 2072 6574  pos:.        ret
+00008cd0: 7572 6e20 5f73 6573 7369 6f6e 2e63 6c6f  urn _session.clo
+00008ce0: 6e65 645f 7265 706f 735b 7265 706f 5d0a  ned_repos[repo].
+00008cf0: 2020 2020 6173 7365 7274 2072 6570 6f20      assert repo 
+00008d00: 616e 6420 5f69 735f 6769 745f 7572 6c28  and _is_git_url(
+00008d10: 7265 706f 292c 2066 2249 6e76 616c 6964  repo), f"Invalid
+00008d20: 2072 6570 6f73 6974 6f72 7920 6e61 6d65   repository name
+00008d30: 3a20 7b72 6570 6f7d 220a 2020 2020 5f64  : {repo}".    _d
+00008d40: 6562 7567 2866 2251 7565 7279 696e 6720  ebug(f"Querying 
+00008d50: 6c6f 6361 6c20 7061 7468 2066 6f72 2072  local path for r
+00008d60: 6570 6f20 7b72 6570 6f7d 2229 0a20 2020  epo {repo}").   
+00008d70: 2072 6570 6f6e 616d 6520 3d20 5f67 6974   reponame = _git
+00008d80: 5f72 6570 6f6e 616d 6528 7265 706f 290a  _reponame(repo).
+00008d90: 2020 2020 6465 7374 696e 6174 696f 6e20      destination 
+00008da0: 3d20 5249 5353 4554 5f43 4c4f 4e45 535f  = RISSET_CLONES_
+00008db0: 5041 5448 202f 2072 6570 6f6e 616d 650a  PATH / reponame.
+00008dc0: 2020 2020 6966 2064 6573 7469 6e61 7469      if destinati
+00008dd0: 6f6e 2e65 7869 7374 7328 293a 0a20 2020  on.exists():.   
+00008de0: 2020 2020 2061 7373 6572 7420 5f69 735f       assert _is_
+00008df0: 6769 745f 7265 706f 2864 6573 7469 6e61  git_repo(destina
+00008e00: 7469 6f6e 292c 2066 2245 7870 6563 7465  tion), f"Expecte
+00008e10: 6420 7b64 6573 7469 6e61 7469 6f6e 7d20  d {destination} 
+00008e20: 746f 2062 6520 6120 6769 7420 7265 706f  to be a git repo
+00008e30: 7369 746f 7279 220a 2020 2020 2020 2020  sitory".        
+00008e40: 5f73 6573 7369 6f6e 2e63 6c6f 6e65 645f  _session.cloned_
+00008e50: 7265 706f 735b 7265 706f 5d20 3d20 6465  repos[repo] = de
+00008e60: 7374 696e 6174 696f 6e0a 2020 2020 2020  stination.      
+00008e70: 2020 6966 2075 7064 6174 653a 0a20 2020    if update:.   
+00008e80: 2020 2020 2020 2020 205f 6769 745f 7570           _git_up
+00008e90: 6461 7465 2864 6573 7469 6e61 7469 6f6e  date(destination
+00008ea0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+00008eb0: 2020 2020 5f67 6974 5f63 6c6f 6e65 5f69      _git_clone_i
+00008ec0: 6e74 6f28 7265 706f 2c20 6465 7374 696e  nto(repo, destin
+00008ed0: 6174 696f 6e3d 6465 7374 696e 6174 696f  ation=destinatio
+00008ee0: 6e2c 2064 6570 7468 3d31 290a 2020 2020  n, depth=1).    
+00008ef0: 2020 2020 5f73 6573 7369 6f6e 2e63 6c6f      _session.clo
+00008f00: 6e65 645f 7265 706f 735b 7265 706f 5d20  ned_repos[repo] 
+00008f10: 3d20 6465 7374 696e 6174 696f 6e0a 2020  = destination.  
+00008f20: 2020 7265 7475 726e 2064 6573 7469 6e61    return destina
+00008f30: 7469 6f6e 0a0a 0a64 6566 205f 6769 745f  tion...def _git_
+00008f40: 636c 6f6e 655f 696e 746f 2872 6570 6f3a  clone_into(repo:
+00008f50: 2073 7472 2c20 6465 7374 696e 6174 696f   str, destinatio
+00008f60: 6e3a 2050 6174 682c 2064 6570 7468 3d31  n: Path, depth=1
+00008f70: 2920 2d3e 204e 6f6e 653a 0a20 2020 2022  ) -> None:.    "
+00008f80: 2222 0a20 2020 2043 6c6f 6e65 2074 6865  "".    Clone the
+00008f90: 2067 6976 656e 2072 6570 6f73 6974 6f72   given repositor
+00008fa0: 7920 746f 2074 6865 2064 6573 7469 6e61  y to the destina
+00008fb0: 7469 6f6e 2e0a 0a20 2020 2041 7267 733a  tion...    Args:
+00008fc0: 0a20 2020 2020 2020 2072 6570 6f3a 2074  .        repo: t
+00008fd0: 6865 2075 726c 2074 6f20 7468 6520 7265  he url to the re
+00008fe0: 706f 7369 746f 7279 0a20 2020 2020 2020  pository.       
+00008ff0: 2064 6573 7469 6e61 7469 6f6e 3a20 6c6f   destination: lo
+00009000: 6361 6c20 7061 7468 2077 6865 7265 2074  cal path where t
+00009010: 6865 2072 6570 6f73 6974 6f72 7920 7769  he repository wi
+00009020: 6c6c 2062 6520 636c 6f6e 6564 0a20 2020  ll be cloned.   
+00009030: 2020 2020 2064 6570 7468 3a20 6966 203e       depth: if >
+00009040: 2030 2c20 7468 6520 6465 7074 6820 6f66   0, the depth of
+00009050: 2074 6865 2063 6c6f 6e65 2e0a 2020 2020   the clone..    
+00009060: 2222 220a 2020 2020 6966 206e 6f74 2069  """.    if not i
+00009070: 7369 6e73 7461 6e63 6528 6465 7374 696e  sinstance(destin
+00009080: 6174 696f 6e2c 2050 6174 6829 3a0a 2020  ation, Path):.  
+00009090: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
+000090a0: 4572 726f 7228 2264 6573 7469 6e61 7469  Error("destinati
+000090b0: 6f6e 2073 686f 756c 6420 6265 2061 2050  on should be a P
+000090c0: 6174 6822 290a 2020 2020 6966 206e 6f74  ath").    if not
+000090d0: 2064 6573 7469 6e61 7469 6f6e 2e69 735f   destination.is_
+000090e0: 6162 736f 6c75 7465 2829 3a0a 2020 2020  absolute():.    
+000090f0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+00009100: 7272 6f72 2822 4465 7374 696e 6174 696f  rror("Destinatio
+00009110: 6e20 7368 6f75 6c64 2062 6520 616e 2061  n should be an a
+00009120: 6273 6f6c 7574 6520 7061 7468 2229 0a20  bsolute path"). 
+00009130: 2020 2069 6620 6465 7374 696e 6174 696f     if destinatio
+00009140: 6e2e 6578 6973 7473 2829 3a0a 2020 2020  n.exists():.    
+00009150: 2020 2020 7261 6973 6520 4f53 4572 726f      raise OSErro
+00009160: 7228 2244 6573 7469 6e61 7469 6f6e 2070  r("Destination p
+00009170: 6174 6820 616c 7265 6164 7920 6578 6973  ath already exis
+00009180: 7473 2c20 6361 6e27 7420 636c 6f6e 6520  ts, can't clone 
+00009190: 6769 7420 7265 706f 7369 746f 7279 2229  git repository")
+000091a0: 0a20 2020 2067 6974 6269 6e20 3d20 5f67  .    gitbin = _g
+000091b0: 6574 5f67 6974 5f62 696e 6172 7928 290a  et_git_binary().
+000091c0: 2020 2020 5f65 6e73 7572 655f 7061 7265      _ensure_pare
+000091d0: 6e74 5f65 7869 7374 7328 6465 7374 696e  nt_exists(destin
+000091e0: 6174 696f 6e29 0a20 2020 2061 7267 7320  ation).    args 
+000091f0: 3d20 5b67 6974 6269 6e2c 2022 636c 6f6e  = [gitbin, "clon
+00009200: 6522 5d0a 2020 2020 6966 2064 6570 7468  e"].    if depth
+00009210: 203e 2030 3a0a 2020 2020 2020 2020 6172   > 0:.        ar
+00009220: 6773 2e65 7874 656e 6428 5b22 2d2d 6465  gs.extend(["--de
+00009230: 7074 6822 2c20 7374 7228 6465 7074 6829  pth", str(depth)
+00009240: 5d29 0a20 2020 2061 7267 732e 6578 7465  ]).    args.exte
+00009250: 6e64 285b 7265 706f 2c20 7374 7228 6465  nd([repo, str(de
+00009260: 7374 696e 6174 696f 6e29 5d29 0a20 2020  stination)]).   
+00009270: 205f 7375 6270 726f 635f 6361 6c6c 2861   _subproc_call(a
+00009280: 7267 7329 0a0a 0a64 6566 205f 6769 745f  rgs)...def _git_
+00009290: 7265 706f 5f6e 6565 6473 5f75 7064 6174  repo_needs_updat
+000092a0: 6528 7265 706f 7061 7468 3a20 5061 7468  e(repopath: Path
+000092b0: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2022  ) -> bool:.    "
+000092c0: 2222 0a20 2020 2043 6865 636b 2069 6620  "".    Check if 
+000092d0: 6120 7265 706f 7369 746f 7279 206e 6565  a repository nee
+000092e0: 6473 2074 6f20 6265 2075 7064 6174 6564  ds to be updated
+000092f0: 0a0a 2020 2020 4e42 3a20 666f 7220 6f75  ..    NB: for ou
+00009300: 7220 7573 6520 6361 7365 2c20 7768 6572  r use case, wher
+00009310: 6520 6e6f 206d 6572 6765 7320 6172 6520  e no merges are 
+00009320: 6578 7065 6374 6564 2c20 746f 2075 7064  expected, to upd
+00009330: 6174 6520 6973 206a 7573 740a 2020 2020  ate is just.    
+00009340: 6173 2066 6173 7420 6173 2074 6f20 6368  as fast as to ch
+00009350: 6563 6b20 6669 7273 7420 616e 6420 7468  eck first and th
+00009360: 656e 2061 6374 2e0a 2020 2020 2222 220a  en act..    """.
+00009370: 2020 2020 6377 6420 3d20 6f73 2e70 6174      cwd = os.pat
+00009380: 682e 6162 7370 6174 6828 6f73 2e70 6174  h.abspath(os.pat
+00009390: 682e 6375 7264 6972 290a 2020 2020 6f73  h.curdir).    os
+000093a0: 2e63 6864 6972 2873 7472 2872 6570 6f70  .chdir(str(repop
+000093b0: 6174 6829 290a 2020 2020 6769 7420 3d20  ath)).    git = 
+000093c0: 5f67 6574 5f67 6974 5f62 696e 6172 7928  _get_git_binary(
+000093d0: 290a 2020 2020 5f73 7562 7072 6f63 5f63  ).    _subproc_c
+000093e0: 616c 6c28 5b67 6974 2c20 2266 6574 6368  all([git, "fetch
+000093f0: 225d 290a 2020 2020 6865 6164 6861 7368  "]).    headhash
+00009400: 203d 2073 7562 7072 6f63 6573 732e 6368   = subprocess.ch
+00009410: 6563 6b5f 6f75 7470 7574 285b 6769 742c  eck_output([git,
+00009420: 2022 7265 762d 7061 7273 6522 2c20 2248   "rev-parse", "H
+00009430: 4541 4422 5d29 2e64 6563 6f64 6528 2775  EAD"]).decode('u
+00009440: 7466 2d38 2729 0a20 2020 2075 7073 7472  tf-8').    upstr
+00009450: 6561 6d68 6173 6820 3d20 7375 6270 726f  eamhash = subpro
+00009460: 6365 7373 2e63 6865 636b 5f6f 7574 7075  cess.check_outpu
+00009470: 7428 5b67 6974 2c20 2272 6576 2d70 6172  t([git, "rev-par
+00009480: 7365 222c 2022 6d61 7374 6572 407b 7570  se", "master@{up
+00009490: 7374 7265 616d 7d22 5d29 2e64 6563 6f64  stream}"]).decod
+000094a0: 6528 2775 7466 2d38 2729 0a20 2020 205f  e('utf-8').    _
+000094b0: 6465 6275 6728 6622 4368 6563 6b69 6e67  debug(f"Checking
+000094c0: 2068 6173 6865 732c 2068 6561 643a 207b   hashes, head: {
+000094d0: 6865 6164 6861 7368 7d2c 2075 7073 7472  headhash}, upstr
+000094e0: 6561 6d3a 207b 7570 7374 7265 616d 6861  eam: {upstreamha
+000094f0: 7368 7d22 290a 2020 2020 6f73 2e63 6864  sh}").    os.chd
+00009500: 6972 2863 7764 290a 2020 2020 7265 7475  ir(cwd).    retu
+00009510: 726e 2068 6561 6468 6173 6820 213d 2075  rn headhash != u
+00009520: 7073 7472 6561 6d68 6173 680a 0a0a 6465  pstreamhash...de
+00009530: 6620 5f67 6974 5f75 7064 6174 6528 7265  f _git_update(re
+00009540: 706f 7061 7468 3a20 5061 7468 2c20 6465  popath: Path, de
+00009550: 7074 683d 302c 2063 6865 636b 5f69 665f  pth=0, check_if_
+00009560: 6e65 6564 6564 3d46 616c 7365 2920 2d3e  needed=False) ->
+00009570: 204e 6f6e 653a 0a20 2020 2022 2222 0a20   None:.    """. 
+00009580: 2020 2055 7064 6174 6520 7468 6520 6769     Update the gi
+00009590: 7420 7265 706f 2061 7420 7468 6520 6769  t repo at the gi
+000095a0: 7665 6e20 7061 7468 0a20 2020 2022 2222  ven path.    """
+000095b0: 0a20 2020 205f 6465 6275 6728 6622 5570  .    _debug(f"Up
+000095c0: 6461 7469 6e67 2067 6974 2072 6570 6f73  dating git repos
+000095d0: 6974 6f72 793a 207b 7265 706f 7061 7468  itory: {repopath
+000095e0: 7d22 290a 2020 2020 6966 206e 6f74 2072  }").    if not r
+000095f0: 6570 6f70 6174 682e 6578 6973 7473 2829  epopath.exists()
+00009600: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+00009610: 4f53 4572 726f 7228 6622 4361 6e27 7420  OSError(f"Can't 
+00009620: 6669 6e64 2070 6174 6820 746f 2067 6974  find path to git
+00009630: 2072 6570 6f73 6974 6f72 7920 7b72 6570   repository {rep
+00009640: 6f70 6174 687d 2229 0a20 2020 2069 6620  opath}").    if 
+00009650: 6368 6563 6b5f 6966 5f6e 6565 6465 6420  check_if_needed 
+00009660: 616e 6420 6e6f 7420 5f67 6974 5f72 6570  and not _git_rep
+00009670: 6f5f 6e65 6564 735f 7570 6461 7465 2872  o_needs_update(r
+00009680: 6570 6f70 6174 6829 3a0a 2020 2020 2020  epopath):.      
+00009690: 2020 5f64 6562 7567 2866 2252 6570 6f73    _debug(f"Repos
+000096a0: 6974 6f72 7920 7b72 6570 6f70 6174 687d  itory {repopath}
+000096b0: 2075 7020 746f 2064 6174 6522 290a 2020   up to date").  
+000096c0: 2020 2020 2020 7265 7475 726e 0a20 2020        return.   
+000096d0: 2067 6974 6269 6e20 3d20 5f67 6574 5f67   gitbin = _get_g
+000096e0: 6974 5f62 696e 6172 7928 290a 2020 2020  it_binary().    
+000096f0: 6377 6420 3d20 6f73 2e70 6174 682e 6162  cwd = os.path.ab
+00009700: 7370 6174 6828 6f73 2e70 6174 682e 6375  spath(os.path.cu
+00009710: 7264 6972 290a 2020 2020 6f73 2e63 6864  rdir).    os.chd
+00009720: 6972 2873 7472 2872 6570 6f70 6174 6829  ir(str(repopath)
+00009730: 290a 2020 2020 6172 6773 203d 205b 6769  ).    args = [gi
+00009740: 7462 696e 2c20 2270 756c 6c22 5d0a 2020  tbin, "pull"].  
+00009750: 2020 6966 2064 6570 7468 203e 2030 3a0a    if depth > 0:.
+00009760: 2020 2020 2020 2020 6172 6773 2e65 7874          args.ext
+00009770: 656e 6428 5b27 2d2d 6465 7074 6827 2c20  end(['--depth', 
+00009780: 7374 7228 6465 7074 6829 5d29 0a20 2020  str(depth)]).   
+00009790: 2069 6620 5f73 6573 7369 6f6e 2e64 6562   if _session.deb
+000097a0: 7567 3a0a 2020 2020 2020 2020 7375 6270  ug:.        subp
+000097b0: 726f 6365 7373 2e63 616c 6c28 6172 6773  rocess.call(args
+000097c0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+000097d0: 2020 2020 7375 6270 726f 6365 7373 2e63      subprocess.c
+000097e0: 616c 6c28 6172 6773 2c20 7374 646f 7574  all(args, stdout
+000097f0: 3d73 7562 7072 6f63 6573 732e 5049 5045  =subprocess.PIPE
+00009800: 290a 2020 2020 6f73 2e63 6864 6972 2863  ).    os.chdir(c
+00009810: 7764 290a 0a0a 6465 6620 5f76 6572 7369  wd)...def _versi
+00009820: 6f6e 5f74 7570 6c65 2876 6572 7369 6f6e  on_tuple(version
+00009830: 7374 723a 2073 7472 2920 2d3e 2074 7570  str: str) -> tup
+00009840: 6c65 5b69 6e74 2c20 696e 742c 2069 6e74  le[int, int, int
+00009850: 5d3a 0a20 2020 2022 2222 2043 6f6e 7665  ]:.    """ Conve
+00009860: 7274 2061 2076 6572 7369 6f6e 2073 7472  rt a version str
+00009870: 696e 6720 746f 2069 7473 2069 6e74 6567  ing to its integ
+00009880: 6572 2070 6172 7473 2022 2222 0a20 2020  er parts """.   
+00009890: 2069 6620 6e6f 7420 7665 7273 696f 6e73   if not versions
+000098a0: 7472 3a0a 2020 2020 2020 2020 7261 6973  tr:.        rais
+000098b0: 6520 5661 6c75 6545 7272 6f72 2822 7665  e ValueError("ve
+000098c0: 7273 696f 6e73 7472 2069 7320 656d 7074  rsionstr is empt
+000098d0: 7922 290a 2020 2020 7061 7274 7320 3d20  y").    parts = 
+000098e0: 7665 7273 696f 6e73 7472 2e73 706c 6974  versionstr.split
+000098f0: 2822 2e22 2c20 6d61 7873 706c 6974 3d33  (".", maxsplit=3
+00009900: 290a 2020 2020 7472 793a 0a20 2020 2020  ).    try:.     
+00009910: 2020 2069 6e74 7320 3d20 5b69 6e74 2870     ints = [int(p
+00009920: 6172 7429 2066 6f72 2070 6172 7420 696e  art) for part in
+00009930: 2070 6172 7473 5d0a 2020 2020 6578 6365   parts].    exce
+00009940: 7074 2056 616c 7565 4572 726f 723a 0a20  pt ValueError:. 
+00009950: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00009960: 7565 4572 726f 7228 6622 436f 756c 6420  ueError(f"Could 
+00009970: 6e6f 7420 7061 7273 6520 7665 7273 696f  not parse versio
+00009980: 6e20 277b 7665 7273 696f 6e73 7472 7d27  n '{versionstr}'
+00009990: 2229 0a0a 2020 2020 6966 206c 656e 2869  ")..    if len(i
+000099a0: 6e74 7329 203d 3d20 313a 0a20 2020 2020  nts) == 1:.     
+000099b0: 2020 2069 6e74 7320 2b3d 205b 302c 2030     ints += [0, 0
+000099c0: 5d0a 2020 2020 656c 6966 206c 656e 2869  ].    elif len(i
+000099d0: 6e74 7329 203d 3d20 323a 0a20 2020 2020  nts) == 2:.     
+000099e0: 2020 2069 6e74 732e 6170 7065 6e64 2830     ints.append(0
+000099f0: 290a 2020 2020 656c 6966 206c 656e 2869  ).    elif len(i
+00009a00: 6e74 7329 203e 2033 3a0a 2020 2020 2020  nts) > 3:.      
+00009a10: 2020 5f64 6562 7567 2822 546f 6f20 6d61    _debug("Too ma
+00009a20: 6e79 2076 6572 7369 6f6e 2070 6172 7473  ny version parts
+00009a30: 2028 6d61 782e 2033 292c 2075 7369 6e67   (max. 3), using
+00009a40: 2074 6865 2066 6972 7374 2033 2229 0a20   the first 3"). 
+00009a50: 2020 2020 2020 2069 6e74 7320 3d20 696e         ints = in
+00009a60: 7473 5b3a 335d 0a20 2020 2069 312c 2069  ts[:3].    i1, i
+00009a70: 322c 2069 3320 3d20 696e 7473 0a20 2020  2, i3 = ints.   
+00009a80: 2072 6574 7572 6e20 6931 2c20 6932 2c20   return i1, i2, 
+00009a90: 6933 0a0a 0a64 6566 205f 6669 6e64 5f73  i3...def _find_s
+00009aa0: 7973 7465 6d5f 706c 7567 696e 735f 7061  ystem_plugins_pa
+00009ab0: 7468 2870 6f73 7369 626c 655f 7061 7468  th(possible_path
+00009ac0: 733a 206c 6973 745b 5061 7468 5d29 202d  s: list[Path]) -
+00009ad0: 3e20 5061 7468 207c 204e 6f6e 653a 0a20  > Path | None:. 
+00009ae0: 2020 2022 2222 0a20 2020 2047 6976 656e     """.    Given
+00009af0: 2061 206c 6973 7420 6f66 2070 6f73 7369   a list of possi
+00009b00: 626c 6520 7061 7468 732c 2066 696e 6420  ble paths, find 
+00009b10: 7468 6520 666f 6c64 6572 2077 6865 7265  the folder where
+00009b20: 2074 6865 2073 7973 7465 6d20 706c 7567   the system plug
+00009b30: 696e 7320 6172 6520 696e 7374 616c 6c65  ins are installe
+00009b40: 640a 2020 2020 2222 220a 2020 2020 6578  d.    """.    ex
+00009b50: 7420 3d20 5f70 6c75 6769 6e5f 6578 7465  t = _plugin_exte
+00009b60: 6e73 696f 6e28 290a 2020 2020 5f64 6562  nsion().    _deb
+00009b70: 7567 2822 3e20 5365 6172 6368 696e 6720  ug("> Searching 
+00009b80: 6f70 636f 6465 7320 6469 723a 2022 290a  opcodes dir: ").
+00009b90: 0a20 2020 2069 6620 7379 732e 706c 6174  .    if sys.plat
+00009ba0: 666f 726d 203d 3d20 2277 696e 3332 223a  form == "win32":
+00009bb0: 0a20 2020 2020 2020 2064 6c6c 203d 2022  .        dll = "
+00009bc0: 6172 7261 796f 7073 2e64 6c6c 220a 2020  arrayops.dll".  
+00009bd0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00009be0: 646c 6c20 3d20 226c 6962 6172 7261 796f  dll = "libarrayo
+00009bf0: 7073 2220 2b20 6578 740a 0a20 2020 2066  ps" + ext..    f
+00009c00: 6f72 2064 2069 6e20 706f 7373 6962 6c65  or d in possible
+00009c10: 5f70 6174 6873 3a0a 2020 2020 2020 2020  _paths:.        
+00009c20: 5f64 6562 7567 2822 3e3e 206c 6f6f 6b69  _debug(">> looki
+00009c30: 6e67 2061 7420 222c 2064 290a 2020 2020  ng at ", d).    
+00009c40: 2020 2020 7061 7468 203d 2064 2e65 7870      path = d.exp
+00009c50: 616e 6475 7365 7228 292e 7265 736f 6c76  anduser().resolv
+00009c60: 6528 290a 2020 2020 2020 2020 6966 206e  e().        if n
+00009c70: 6f74 2070 6174 682e 6973 5f64 6972 2829  ot path.is_dir()
+00009c80: 206f 7220 6e6f 7420 7061 7468 2e65 7869   or not path.exi
+00009c90: 7374 7328 293a 0a20 2020 2020 2020 2020  sts():.         
+00009ca0: 2020 205f 6465 6275 6728 223e 3e3e 2070     _debug(">>> p
+00009cb0: 6174 6820 646f 6573 206e 6f74 2065 7869  ath does not exi
+00009cc0: 7374 2e2e 2e22 290a 2020 2020 2020 2020  st...").        
+00009cd0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
+00009ce0: 2020 2020 2070 6c75 6769 6e73 203d 206c       plugins = l
+00009cf0: 6973 7428 7061 7468 2e67 6c6f 6228 222a  ist(path.glob("*
+00009d00: 2220 2b20 6578 7429 290a 2020 2020 2020  " + ext)).      
+00009d10: 2020 6966 206e 6f74 2070 6c75 6769 6e73    if not plugins
+00009d20: 3a0a 2020 2020 2020 2020 2020 2020 5f64  :.            _d
+00009d30: 6562 7567 2866 223e 3e3e 2070 6174 6820  ebug(f">>> path 
+00009d40: 7b64 7d20 6578 6973 7473 2c20 6275 7420  {d} exists, but 
+00009d50: 6861 7320 6e6f 2070 6c75 6769 6e73 2c20  has no plugins, 
+00009d60: 736b 6970 7069 6e67 2229 0a20 2020 2020  skipping").     
+00009d70: 2020 2065 6c69 6620 616e 7928 706c 7567     elif any(plug
+00009d80: 696e 2066 6f72 2070 6c75 6769 6e20 696e  in for plugin in
+00009d90: 2070 6c75 6769 6e73 2069 6620 646c 6c20   plugins if dll 
+00009da0: 3d3d 2070 6c75 6769 6e2e 6e61 6d65 293a  == plugin.name):
+00009db0: 0a20 2020 2020 2020 2020 2020 205f 6465  .            _de
+00009dc0: 6275 6728 223e 3e3e 2046 6f75 6e64 2122  bug(">>> Found!"
+00009dd0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+00009de0: 7475 726e 2070 6174 680a 2020 2020 2020  turn path.      
+00009df0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00009e00: 2020 2020 5f64 6562 7567 2866 223e 3e3e      _debug(f">>>
+00009e10: 2050 6174 6820 6578 6973 7473 2c20 6275   Path exists, bu
+00009e20: 7420 6974 2064 6f65 7320 6e6f 7420 7365  t it does not se
+00009e30: 656d 2074 6f20 6265 2074 6865 2073 7973  em to be the sys
+00009e40: 7465 6d73 2070 6c75 6769 6e20 7061 7468  tems plugin path
+00009e50: 5c6e 220a 2020 2020 2020 2020 2020 2020  \n".            
+00009e60: 2020 2020 2020 2066 223e 3e3e 2028 7b64         f">>> ({d
+00009e70: 6c6c 7d20 7761 7320 6e6f 7420 666f 756e  ll} was not foun
+00009e80: 6420 7468 6572 6529 2229 0a20 2020 2020  d there)").     
+00009e90: 2020 2020 2020 205f 6465 6275 6728 6622         _debug(f"
+00009ea0: 3e3e 3e20 506c 7567 696e 7320 666f 756e  >>> Plugins foun
+00009eb0: 6420 6865 7265 3a20 222c 2027 2c20 272e  d here: ", ', '.
+00009ec0: 6a6f 696e 2870 6c75 6769 6e2e 6e61 6d65  join(plugin.name
+00009ed0: 2066 6f72 2070 6c75 6769 6e20 696e 2070   for plugin in p
+00009ee0: 6c75 6769 6e73 2929 0a20 2020 2072 6574  lugins)).    ret
+00009ef0: 7572 6e20 4e6f 6e65 0a0a 0a64 6566 205f  urn None...def _
+00009f00: 6c6f 6164 5f69 6e73 7461 6c6c 6174 696f  load_installatio
+00009f10: 6e5f 6d61 6e69 6665 7374 2870 6174 683a  n_manifest(path:
+00009f20: 2050 6174 6829 202d 3e20 6469 6374 3a0a   Path) -> dict:.
+00009f30: 2020 2020 2222 220a 2020 2020 4c6f 6164      """.    Load
+00009f40: 2061 6e20 696e 7374 616c 6c61 7469 6f6e   an installation
+00009f50: 206d 616e 6966 6573 740a 0a20 2020 2041   manifest..    A
+00009f60: 6e20 696e 7374 616c 6c61 7469 6f6e 206d  n installation m
+00009f70: 616e 6966 6573 7420 6973 2061 206a 736f  anifest is a jso
+00009f80: 6e20 6669 6c65 2070 726f 6475 6365 6420  n file produced 
+00009f90: 6475 7269 6e67 2069 6e73 7461 6c6c 6174  during installat
+00009fa0: 696f 6e2c 0a20 2020 2077 6974 6820 6d65  ion,.    with me
+00009fb0: 7461 6461 7461 2061 626f 7574 2077 6861  tadata about wha
+00009fc0: 7420 7761 7320 696e 7374 616c 6c65 6420  t was installed 
+00009fd0: 2870 6c75 6769 6e2c 206e 616d 652c 2061  (plugin, name, a
+00009fe0: 7373 6574 732c 2065 7463 292e 0a0a 2020  ssets, etc)...  
+00009ff0: 2020 5261 6973 6573 206a 736f 6e2e 4a53    Raises json.JS
+0000a000: 4f4e 4465 636f 6465 4572 726f 7220 6966  ONDecodeError if
+0000a010: 2074 6865 206d 616e 6966 6573 7427 7320   the manifest's 
+0000a020: 6a73 6f6e 2063 6f75 6c64 206e 6f74 2062  json could not b
+0000a030: 6520 7061 7273 6564 0a20 2020 2022 2222  e parsed.    """
+0000a040: 0a20 2020 2061 7373 6572 7420 7061 7468  .    assert path
+0000a050: 2e73 7566 6669 7820 3d3d 2027 2e6a 736f  .suffix == '.jso
+0000a060: 6e27 0a20 2020 2074 7279 3a0a 2020 2020  n'.    try:.    
+0000a070: 2020 2020 6420 3d20 6a73 6f6e 2e6c 6f61      d = json.loa
+0000a080: 6428 6f70 656e 2870 6174 6829 290a 2020  d(open(path)).  
+0000a090: 2020 2020 2020 7265 7475 726e 2064 0a20        return d. 
+0000a0a0: 2020 2065 7863 6570 7420 6a73 6f6e 2e4a     except json.J
+0000a0b0: 534f 4e44 6563 6f64 6545 7272 6f72 2061  SONDecodeError a
+0000a0c0: 7320 653a 0a20 2020 2020 2020 205f 6572  s e:.        _er
+0000a0d0: 726f 726d 7367 2866 2243 6f75 6c64 206e  rormsg(f"Could n
+0000a0e0: 6f74 2070 6172 7365 206d 616e 6966 6573  ot parse manifes
+0000a0f0: 7420 6a73 6f6e 3a20 7b70 6174 687d 2229  t json: {path}")
+0000a100: 0a20 2020 2020 2020 2072 6169 7365 2065  .        raise e
+0000a110: 0a0a 0a64 6566 205f 6973 5f75 726c 2873  ...def _is_url(s
+0000a120: 3a20 7374 7229 202d 3e20 626f 6f6c 3a0a  : str) -> bool:.
+0000a130: 2020 2020 2222 220a 2020 2020 4973 2060      """.    Is `
+0000a140: 7360 2061 2076 616c 6964 2075 726c 3f0a  s` a valid url?.
+0000a150: 0a20 2020 2041 7267 733a 0a20 2020 2020  .    Args:.     
+0000a160: 2020 2073 3a20 5552 4c20 6164 6472 6573     s: URL addres
+0000a170: 7320 7374 7269 6e67 2074 6f20 7661 6c69  s string to vali
+0000a180: 6461 7465 0a20 2020 2022 2222 0a20 2020  date.    """.   
+0000a190: 2072 6573 756c 7420 3d20 7572 6c6c 6962   result = urllib
+0000a1a0: 2e70 6172 7365 2e75 726c 7061 7273 6528  .parse.urlparse(
+0000a1b0: 7374 7228 7329 290a 2020 2020 7265 7475  str(s)).    retu
+0000a1c0: 726e 2062 6f6f 6c28 7265 7375 6c74 2e73  rn bool(result.s
+0000a1d0: 6368 656d 6520 616e 6420 7265 7375 6c74  cheme and result
+0000a1e0: 2e6e 6574 6c6f 6329 0a0a 0a64 6566 205f  .netloc)...def _
+0000a1f0: 7061 7273 655f 706c 7567 696e 6b65 7928  parse_pluginkey(
+0000a200: 706c 7567 696e 6b65 793a 2073 7472 2920  pluginkey: str) 
+0000a210: 2d3e 2074 7570 6c65 5b73 7472 2c20 7374  -> tuple[str, st
+0000a220: 725d 3a0a 2020 2020 2222 220a 2020 2020  r]:.    """.    
+0000a230: 4769 7665 6e20 6120 6b65 7920 706c 7567  Given a key plug
+0000a240: 696e 6e61 6d65 4076 6572 7369 6f6e 2c20  inname@version, 
+0000a250: 7265 7475 726e 2028 706c 7567 696e 6e61  return (pluginna
+0000a260: 6d65 2c20 7665 7273 696f 6e29 0a0a 2020  me, version)..  
+0000a270: 2020 4861 6e64 6c65 2063 6173 6573 2077    Handle cases w
+0000a280: 6865 7265 2074 6865 2070 6c75 6769 6e6b  here the plugink
+0000a290: 6579 2068 6173 206e 6f20 7665 7273 696f  ey has no versio
+0000a2a0: 6e0a 2020 2020 2222 220a 2020 2020 6966  n.    """.    if
+0000a2b0: 2022 4022 2069 6e20 706c 7567 696e 6b65   "@" in pluginke
+0000a2c0: 793a 0a20 2020 2020 2020 206e 616d 652c  y:.        name,
+0000a2d0: 2076 6572 7369 6f6e 203d 2070 6c75 6769   version = plugi
+0000a2e0: 6e6b 6579 2e73 706c 6974 2822 4022 290a  nkey.split("@").
+0000a2f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000a300: 2020 6e61 6d65 203d 2070 6c75 6769 6e6b    name = plugink
+0000a310: 6579 0a20 2020 2020 2020 2076 6572 7369  ey.        versi
+0000a320: 6f6e 203d 2022 302e 302e 3022 0a20 2020  on = "0.0.0".   
+0000a330: 2072 6574 7572 6e20 6e61 6d65 2c20 7665   return name, ve
+0000a340: 7273 696f 6e0a 0a0a 6465 6620 5f6e 6f72  rsion...def _nor
+0000a350: 6d61 6c69 7a65 5f76 6572 7369 6f6e 2876  malize_version(v
+0000a360: 6572 7369 6f6e 3a20 7374 722c 2064 6566  ersion: str, def
+0000a370: 6175 6c74 3d22 302e 302e 3022 2920 2d3e  ault="0.0.0") ->
+0000a380: 2073 7472 3a0a 2020 2020 7472 793a 0a20   str:.    try:. 
+0000a390: 2020 2020 2020 2076 6572 7369 6f6e 7475         versiontu
+0000a3a0: 7020 3d20 5f76 6572 7369 6f6e 5f74 7570  p = _version_tup
+0000a3b0: 6c65 2876 6572 7369 6f6e 290a 2020 2020  le(version).    
+0000a3c0: 6578 6365 7074 2056 616c 7565 4572 726f  except ValueErro
+0000a3d0: 7220 6173 2065 3a0a 2020 2020 2020 2020  r as e:.        
+0000a3e0: 5f65 7272 6f72 6d73 6728 6622 4572 726f  _errormsg(f"Erro
+0000a3f0: 7220 7768 696c 6520 7061 7273 696e 6720  r while parsing 
+0000a400: 7665 7273 696f 6e20 7b76 6572 7369 6f6e  version {version
+0000a410: 7d3a 2025 7320 2845 7863 6570 7469 6f6e  }: %s (Exception
+0000a420: 3a20 7b65 7d29 2229 0a20 2020 2020 2020  : {e})").       
+0000a430: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+0000a440: 2020 2020 7265 7475 726e 2022 2e22 2e6a      return ".".j
+0000a450: 6f69 6e28 7374 7228 6929 2066 6f72 2069  oin(str(i) for i
+0000a460: 2069 6e20 7665 7273 696f 6e74 7570 290a   in versiontup).
+0000a470: 0a0a 6465 6620 5f65 7870 616e 645f 7375  ..def _expand_su
+0000a480: 6273 7469 7475 7469 6f6e 7328 733a 2073  bstitutions(s: s
+0000a490: 7472 2c20 7375 6273 7469 7475 7469 6f6e  tr, substitution
+0000a4a0: 733a 2064 6963 745b 7374 722c 2073 7472  s: dict[str, str
+0000a4b0: 5d29 202d 3e20 7374 723a 0a20 2020 2022  ]) -> str:.    "
+0000a4c0: 2222 0a20 2020 2045 7870 616e 6473 2076  "".    Expands v
+0000a4d0: 6172 6961 626c 6573 206f 6620 7468 6520  ariables of the 
+0000a4e0: 666f 726d 2024 7661 7220 6f72 2024 7b76  form $var or ${v
+0000a4f0: 6172 7d0a 2020 2020 2222 220a 2020 2020  ar}.    """.    
+0000a500: 7420 3d20 5f54 656d 706c 6174 6528 7329  t = _Template(s)
+0000a510: 0a20 2020 2072 6574 7572 6e20 742e 7375  .    return t.su
+0000a520: 6273 7469 7475 7465 2873 7562 7374 6974  bstitute(substit
+0000a530: 7574 696f 6e73 290a 0a0a 6465 6620 5f70  utions)...def _p
+0000a540: 6172 7365 5f62 696e 6172 7964 6566 2862  arse_binarydef(b
+0000a550: 696e 6172 7964 6566 3a20 6469 6374 2c20  inarydef: dict, 
+0000a560: 7375 6273 7469 7475 7469 6f6e 733a 2064  substitutions: d
+0000a570: 6963 745b 7374 722c 2073 7472 5d29 202d  ict[str, str]) -
+0000a580: 3e20 4269 6e61 7279 3a0a 2020 2020 2222  > Binary:.    ""
+0000a590: 220a 2020 2020 5061 7273 6573 2061 2062  ".    Parses a b
+0000a5a0: 696e 6172 7920 6465 6669 6e69 7469 6f6e  inary definition
+0000a5b0: 2077 6974 6869 6e20 6120 7269 7373 6574   within a risset
+0000a5c0: 2e6a 736f 6e20 6469 6374 0a0a 2020 2020  .json dict..    
+0000a5d0: 4120 6269 6e61 7279 2064 6566 696e 6974  A binary definit
+0000a5e0: 696f 6e20 6861 7320 7468 6520 666f 726d  ion has the form
+0000a5f0: 0a0a 2020 2020 7b20 2020 2270 6c61 7466  ..    {   "platf
+0000a600: 6f72 6d22 3a20 7374 722c 0a20 2020 2020  orm": str,.     
+0000a610: 2020 2022 7572 6c22 3a20 7374 722c 0a20     "url": str,. 
+0000a620: 2020 2020 2020 2022 6275 696c 645f 706c         "build_pl
+0000a630: 6174 666f 726d 223a 2073 7472 2c0a 2020  atform": str,.  
+0000a640: 2020 2020 2020 2265 7874 7261 6374 7061        "extractpa
+0000a650: 7468 223a 2073 7472 2028 6f70 7469 6f6e  th": str (option
+0000a660: 616c 290a 2020 2020 7d0a 0a20 2020 202a  al).    }..    *
+0000a670: 2070 6c61 7466 6f72 6d3a 206f 6e65 206f   platform: one o
+0000a680: 6620 276c 696e 7578 272c 2027 7769 6e64  f 'linux', 'wind
+0000a690: 6f77 7327 2c20 276d 6163 6f73 272c 206f  ows', 'macos', o
+0000a6a0: 7074 696f 6e61 6c6c 7920 666f 6c6c 6f77  ptionally follow
+0000a6b0: 6564 2062 7920 7468 6520 6172 6368 6974  ed by the archit
+0000a6c0: 6563 7475 7265 2c0a 2020 2020 2020 2020  ecture,.        
+0000a6d0: 7365 7061 7261 7465 6420 6279 2061 2027  separated by a '
+0000a6e0: 2d27 2073 6967 6e2e 2050 6f73 7369 626c  -' sign. Possibl
+0000a6f0: 6520 6172 6368 6974 6563 7475 7265 733a  e architectures:
+0000a700: 2027 7838 365f 3634 272c 2027 6172 6d36   'x86_64', 'arm6
+0000a710: 3427 2e20 496e 2061 6c6c 206c 696e 7578  4'. In all linux
+0000a720: 2c20 7769 6e64 6f77 7320 616e 6420 6d61  , windows and ma
+0000a730: 636f 730a 2020 2020 2020 2020 7468 6520  cos.        the 
+0000a740: 6465 6661 756c 7420 6172 6368 6974 6563  default architec
+0000a750: 7475 7265 2069 7320 2778 3836 5f36 3427  ture is 'x86_64'
+0000a760: 2e0a 2020 2020 2a20 7572 6c3a 2074 6865  ..    * url: the
+0000a770: 2075 726c 2077 6865 7265 2074 6f20 646f   url where to do
+0000a780: 776e 6c6f 6164 2074 6865 2062 696e 6172  wnload the binar
+0000a790: 792e 2049 7420 6361 6e20 6265 2061 6e20  y. It can be an 
+0000a7a0: 7572 6c20 746f 2074 6865 2062 696e 6172  url to the binar
+0000a7b0: 7920 6974 7365 6c66 2c20 746f 2061 202e  y itself, to a .
+0000a7c0: 7a69 7020 6669 6c65 2c0a 2020 2020 2020  zip file,.      
+0000a7d0: 2020 6f72 2074 6f20 6120 6769 7420 7265    or to a git re
+0000a7e0: 706f 7369 746f 7279 0a20 2020 202a 2062  pository.    * b
+0000a7f0: 7569 6c64 5f70 6c61 7466 6f72 6d3a 206f  uild_platform: o
+0000a800: 7074 696f 6e61 6c20 696e 666f 726d 6174  ptional informat
+0000a810: 696f 6e20 6162 6f75 7420 7468 6520 706c  ion about the pl
+0000a820: 6174 666f 726d 2077 6865 7265 2074 6865  atform where the
+0000a830: 2067 6976 656e 2062 696e 6172 7920 7761   given binary wa
+0000a840: 7320 6275 696c 742e 2054 6869 7320 7365  s built. This se
+0000a850: 7276 6573 2061 730a 2020 2020 2020 2020  rves as.        
+0000a860: 7265 6665 7265 6e63 6520 666f 7220 6120  reference for a 
+0000a870: 7573 6572 2e20 466f 7220 6578 616d 706c  user. For exampl
+0000a880: 652c 2069 6e20 6c69 6e75 7820 6120 6275  e, in linux a bu
+0000a890: 696c 6420 706c 6174 666f 726d 206d 6967  ild platform mig
+0000a8a0: 6874 2062 6520 2255 6275 6e74 7520 3230  ht be "Ubuntu 20
+0000a8b0: 2e30 3422 2e20 5468 6973 206e 6f72 6d61  .04". This norma
+0000a8c0: 6c6c 7920 6d61 726b 730a 2020 2020 2020  lly marks.      
+0000a8d0: 2020 7468 6520 6c6f 7765 7220 626f 756e    the lower boun
+0000a8e0: 6420 666f 7220 636f 6d70 6174 6962 696c  d for compatibil
+0000a8f0: 6974 792e 0a20 2020 202a 2065 7874 7261  ity..    * extra
+0000a900: 6374 7061 7468 3a20 6966 2074 6865 2063  ctpath: if the c
+0000a910: 6173 6520 7768 6572 6520 7468 6520 7572  ase where the ur
+0000a920: 6c20 646f 6573 206e 6f74 2070 6f69 6e74  l does not point
+0000a930: 2074 6f20 6120 6269 6e61 7279 2c20 6578   to a binary, ex
+0000a940: 7472 6163 7470 6174 6820 7368 6f75 6c64  tractpath should
+0000a950: 2062 6520 7573 6564 0a20 2020 2020 2020   be used.       
+0000a960: 2074 6f20 696e 6469 6361 7465 2074 6865   to indicate the
+0000a970: 206c 6f63 6174 696f 6e20 6f66 2074 6865   location of the
+0000a980: 2062 696e 6172 7920 7769 7468 696e 2074   binary within t
+0000a990: 6865 202e 7a69 7020 6669 6c65 206f 7220  he .zip file or 
+0000a9a0: 7769 7468 696e 2074 6865 2067 6974 2072  within the git r
+0000a9b0: 6570 6f73 6974 6f72 790a 2020 2020 2222  epository.    ""
+0000a9c0: 220a 2020 2020 6173 7365 7274 2069 7369  ".    assert isi
+0000a9d0: 6e73 7461 6e63 6528 6269 6e61 7279 6465  nstance(binaryde
+0000a9e0: 662c 2064 6963 7429 2c20 6622 6469 6374  f, dict), f"dict
+0000a9f0: 3a20 7b62 696e 6172 7964 6566 7d22 0a20  : {binarydef}". 
+0000aa00: 2020 2070 6c61 7466 6f72 6d20 3d20 6269     platform = bi
+0000aa10: 6e61 7279 6465 662e 6765 7428 2770 6c61  narydef.get('pla
+0000aa20: 7466 6f72 6d27 290a 2020 2020 6966 206e  tform').    if n
+0000aa30: 6f74 2070 6c61 7466 6f72 6d3a 0a20 2020  ot platform:.   
+0000aa40: 2020 2020 2072 6169 7365 2050 6172 7365       raise Parse
+0000aa50: 4572 726f 7228 6622 506c 7567 696e 2062  Error(f"Plugin b
+0000aa60: 696e 6172 7920 7368 6f75 6c64 2068 6176  inary should hav
+0000aa70: 6520 6120 706c 6174 666f 726d 206b 6579  e a platform key
+0000aa80: 2e20 4269 6e61 7279 2064 6566 696e 6974  . Binary definit
+0000aa90: 696f 6e3a 207b 6269 6e61 7279 6465 667d  ion: {binarydef}
+0000aaa0: 2229 0a0a 2020 2020 7472 793a 0a20 2020  ")..    try:.   
+0000aab0: 2020 2020 2070 6c61 7466 6f72 6d20 3d20       platform = 
+0000aac0: 5f6e 6f72 6d61 6c69 7a65 5f70 6c61 7466  _normalize_platf
+0000aad0: 6f72 6d28 706c 6174 666f 726d 290a 2020  orm(platform).  
+0000aae0: 2020 6578 6365 7074 2056 616c 7565 4572    except ValueEr
+0000aaf0: 726f 7220 6173 2065 7272 3a0a 2020 2020  ror as err:.    
+0000ab00: 2020 2020 7261 6973 6520 5061 7273 6545      raise ParseE
+0000ab10: 7272 6f72 2866 2250 6c61 7466 6f72 6d20  rror(f"Platform 
+0000ab20: 277b 706c 6174 666f 726d 7d27 206e 6f74  '{platform}' not
+0000ab30: 2073 7570 706f 7274 6564 2e20 220a 2020   supported. ".  
+0000ab40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab50: 2020 2020 2020 2066 2250 6f73 7369 626c         f"Possibl
+0000ab60: 6520 706c 6174 666f 726d 7320 6172 6520  e platforms are 
+0000ab70: 7b5f 7375 7070 6f72 7465 645f 706c 6174  {_supported_plat
+0000ab80: 666f 726d 737d 2e20 220a 2020 2020 2020  forms}. ".      
+0000ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aba0: 2020 2066 224f 7269 6769 6e61 6c20 6572     f"Original er
+0000abb0: 726f 723a 207b 6572 727d 2229 0a0a 2020  ror: {err}")..  
+0000abc0: 2020 7572 6c20 3d20 6269 6e61 7279 6465    url = binaryde
+0000abd0: 662e 6765 7428 2775 726c 2729 0a20 2020  f.get('url').   
+0000abe0: 2069 6620 6e6f 7420 7572 6c3a 0a20 2020   if not url:.   
+0000abf0: 2020 2020 2072 6169 7365 2050 6172 7365       raise Parse
+0000ac00: 4572 726f 7228 6622 506c 7567 696e 2064  Error(f"Plugin d
+0000ac10: 6566 696e 6974 696f 6e20 666f 7220 7b70  efinition for {p
+0000ac20: 6c61 7466 6f72 6d7d 2073 686f 756c 6420  latform} should 
+0000ac30: 6861 7665 2061 6e20 7572 6c22 290a 0a20  have an url").. 
+0000ac40: 2020 2063 736f 756e 645f 7665 7273 696f     csound_versio
+0000ac50: 6e20 3d20 6269 6e61 7279 6465 662e 6765  n = binarydef.ge
+0000ac60: 7428 2763 736f 756e 645f 7665 7273 696f  t('csound_versio
+0000ac70: 6e27 290a 2020 2020 6966 206e 6f74 2063  n').    if not c
+0000ac80: 736f 756e 645f 7665 7273 696f 6e3a 0a20  sound_version:. 
+0000ac90: 2020 2020 2020 205f 6572 726f 726d 7367         _errormsg
+0000aca0: 2866 274e 6f20 6373 6f75 6e64 2076 6572  (f'No csound ver
+0000acb0: 7369 6f6e 2066 6f75 6e64 2066 6f72 2062  sion found for b
+0000acc0: 696e 6172 7920 7b62 696e 6172 7964 6566  inary {binarydef
+0000acd0: 7d27 290a 2020 2020 2020 2020 6373 6f75  }').        csou
+0000ace0: 6e64 5f76 6572 7369 6f6e 203d 2027 3e3d  nd_version = '>=
+0000acf0: 362e 3138 3c37 2e30 270a 0a20 2020 2075  6.18<7.0'..    u
+0000ad00: 726c 203d 205f 6578 7061 6e64 5f73 7562  rl = _expand_sub
+0000ad10: 7374 6974 7574 696f 6e73 2875 726c 2c20  stitutions(url, 
+0000ad20: 7375 6273 7469 7475 7469 6f6e 7329 0a20  substitutions). 
+0000ad30: 2020 2062 7569 6c64 5f70 6c61 7466 6f72     build_platfor
+0000ad40: 6d20 3d20 6269 6e61 7279 6465 662e 6765  m = binarydef.ge
+0000ad50: 7428 2762 7569 6c64 5f70 6c61 7466 6f72  t('build_platfor
+0000ad60: 6d27 2c20 2775 6e6b 6e6f 776e 2729 0a20  m', 'unknown'). 
+0000ad70: 2020 2072 6574 7572 6e20 4269 6e61 7279     return Binary
+0000ad80: 2870 6c61 7466 6f72 6d3d 706c 6174 666f  (platform=platfo
+0000ad90: 726d 2c20 7572 6c3d 7572 6c2c 2062 7569  rm, url=url, bui
+0000ada0: 6c64 5f70 6c61 7466 6f72 6d3d 6275 696c  ld_platform=buil
+0000adb0: 645f 706c 6174 666f 726d 2c0a 2020 2020  d_platform,.    
+0000adc0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+0000add0: 7472 6163 7470 6174 683d 6269 6e61 7279  tractpath=binary
+0000ade0: 6465 662e 6765 7428 2765 7874 7261 6374  def.get('extract
+0000adf0: 7061 7468 272c 2027 2729 2c0a 2020 2020  path', ''),.    
+0000ae00: 2020 2020 2020 2020 2020 2020 2020 706f                po
+0000ae10: 7374 5f69 6e73 7461 6c6c 5f73 6372 6970  st_install_scrip
+0000ae20: 743d 6269 6e61 7279 6465 662e 6765 7428  t=binarydef.get(
+0000ae30: 2770 6f73 745f 696e 7374 616c 6c27 2c20  'post_install', 
+0000ae40: 2727 292c 0a20 2020 2020 2020 2020 2020  ''),.           
+0000ae50: 2020 2020 2020 2063 736f 756e 645f 7665         csound_ve
+0000ae60: 7273 696f 6e3d 6373 6f75 6e64 5f76 6572  rsion=csound_ver
+0000ae70: 7369 6f6e 290a 0a0a 6465 6620 5f70 6172  sion)...def _par
+0000ae80: 7365 5f61 7373 6574 2861 7373 6574 6465  se_asset(assetde
+0000ae90: 663a 2064 6963 742c 2064 6566 6175 6c74  f: dict, default
+0000aea0: 736f 7572 6365 3a20 7374 7229 202d 3e20  source: str) -> 
+0000aeb0: 4173 7365 743a 0a20 2020 2073 6f75 7263  Asset:.    sourc
+0000aec0: 6520 3d20 6173 7365 7464 6566 2e67 6574  e = assetdef.get
+0000aed0: 2827 7572 6c27 2c20 6465 6661 756c 7473  ('url', defaults
+0000aee0: 6f75 7263 6529 0a20 2020 2065 7874 7261  ource).    extra
+0000aef0: 6374 7061 7468 203d 2061 7373 6574 6465  ctpath = assetde
+0000af00: 662e 6765 7428 2765 7874 7261 6374 7061  f.get('extractpa
+0000af10: 7468 2729 206f 7220 6173 7365 7464 6566  th') or assetdef
+0000af20: 2e67 6574 2827 7061 7468 2729 0a20 2020  .get('path').   
+0000af30: 2069 6620 6e6f 7420 736f 7572 6365 2061   if not source a
+0000af40: 6e64 206e 6f74 2065 7874 7261 6374 7061  nd not extractpa
+0000af50: 7468 3a0a 2020 2020 2020 2020 7261 6973  th:.        rais
+0000af60: 6520 5061 7273 6545 7272 6f72 2866 2241  e ParseError(f"A
+0000af70: 7373 6574 2064 6566 696e 6974 696f 6e20  sset definition 
+0000af80: 7368 6f75 6c64 2068 6176 6520 616e 2055  should have an U
+0000af90: 524c 206f 7220 616e 2065 7874 7261 6374  RL or an extract
+0000afa0: 7061 7468 206b 6579 2229 0a20 2020 2070  path key").    p
+0000afb0: 6174 6873 203d 2065 7874 7261 6374 7061  aths = extractpa
+0000afc0: 7468 2e73 706c 6974 2822 3b22 2920 6966  th.split(";") if
+0000afd0: 2065 7874 7261 6374 7061 7468 2065 6c73   extractpath els
+0000afe0: 6520 5b5d 0a20 2020 2072 6574 7572 6e20  e [].    return 
+0000aff0: 4173 7365 7428 736f 7572 6365 3d73 6f75  Asset(source=sou
+0000b000: 7263 652c 2070 6174 7465 726e 733d 7061  rce, patterns=pa
+0000b010: 7468 732c 2070 6c61 7466 6f72 6d3d 6173  ths, platform=as
+0000b020: 7365 7464 6566 2e67 6574 2827 706c 6174  setdef.get('plat
+0000b030: 666f 726d 272c 2027 616c 6c27 292c 206e  form', 'all'), n
+0000b040: 616d 653d 6173 7365 7464 6566 2e67 6574  ame=assetdef.get
+0000b050: 2827 6e61 6d65 272c 2027 2729 290a 0a0a  ('name', ''))...
+0000b060: 6465 6620 5f65 6e66 6f72 6365 5f6b 6579  def _enforce_key
+0000b070: 2864 3a20 6469 6374 2c20 6b65 793a 2073  (d: dict, key: s
+0000b080: 7472 293a 0a20 2020 2076 616c 7565 203d  tr):.    value =
+0000b090: 2064 2e67 6574 286b 6579 290a 2020 2020   d.get(key).    
+0000b0a0: 6966 2076 616c 7565 2069 7320 4e6f 6e65  if value is None
+0000b0b0: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+0000b0c0: 5363 6865 6d61 4572 726f 7228 6622 506c  SchemaError(f"Pl
+0000b0d0: 7567 696e 2068 6173 206e 6f20 7b6b 6579  ugin has no {key
+0000b0e0: 7d20 6b65 7922 290a 2020 2020 7265 7475  } key").    retu
+0000b0f0: 726e 2076 616c 7565 0a0a 0a64 6566 205f  rn value...def _
+0000b100: 706c 7567 696e 5f66 726f 6d5f 6469 6374  plugin_from_dict
+0000b110: 2864 3a20 6469 6374 2c20 706c 7567 696e  (d: dict, plugin
+0000b120: 7572 6c3a 2073 7472 2c20 7375 6270 6174  url: str, subpat
+0000b130: 683a 2073 7472 2920 2d3e 2050 6c75 6769  h: str) -> Plugi
+0000b140: 6e3a 0a20 2020 2022 2222 0a20 2020 2041  n:.    """.    A
+0000b150: 7267 733a 0a20 2020 2020 2020 2064 3a20  rgs:.        d: 
+0000b160: 7468 6520 6c6f 6164 6564 206a 736f 6e0a  the loaded json.
+0000b170: 2020 2020 2020 2020 706c 7567 696e 7572          pluginur
+0000b180: 6c3a 2074 6865 2075 726c 206f 6620 7468  l: the url of th
+0000b190: 6973 2070 6c75 6769 6e0a 2020 2020 2020  is plugin.      
+0000b1a0: 2020 7375 6270 6174 683a 2074 6865 2070    subpath: the p
+0000b1b0: 6174 6820 6f66 2074 6865 206d 616e 6966  ath of the manif
+0000b1c0: 6573 7427 7320 666f 6c64 6572 2c20 7265  est's folder, re
+0000b1d0: 6c61 7469 7665 2074 6f20 7468 6520 726f  lative to the ro
+0000b1e0: 6f74 206f 6620 7468 6520 7265 706f 7369  ot of the reposi
+0000b1f0: 746f 7279 0a20 2020 2022 2222 0a20 2020  tory.    """.   
+0000b200: 2063 6c6f 6e65 7061 7468 203d 205f 6769   clonepath = _gi
+0000b210: 745f 6c6f 6361 6c5f 7061 7468 2870 6c75  t_local_path(plu
+0000b220: 6769 6e75 726c 290a 2020 2020 7665 7273  ginurl).    vers
+0000b230: 696f 6e20 3d20 5f6e 6f72 6d61 6c69 7a65  ion = _normalize
+0000b240: 5f76 6572 7369 6f6e 285f 656e 666f 7263  _version(_enforc
+0000b250: 655f 6b65 7928 642c 2027 7665 7273 696f  e_key(d, 'versio
+0000b260: 6e27 2929 0a20 2020 2070 6c75 6769 6e6e  n')).    pluginn
+0000b270: 616d 6520 3d20 5f65 6e66 6f72 6365 5f6b  ame = _enforce_k
+0000b280: 6579 2864 2c20 276e 616d 6527 290a 2020  ey(d, 'name').  
+0000b290: 2020 6f70 636f 6465 7320 3d20 5f65 6e66    opcodes = _enf
+0000b2a0: 6f72 6365 5f6b 6579 2864 2c20 276f 7063  orce_key(d, 'opc
+0000b2b0: 6f64 6573 2729 0a20 2020 206f 7063 6f64  odes').    opcod
+0000b2c0: 6573 2e73 6f72 7428 290a 2020 2020 7375  es.sort().    su
+0000b2d0: 6273 7469 7475 7469 6f6e 7320 3d20 7b6b  bstitutions = {k
+0000b2e0: 6579 3a20 7374 7228 7661 6c75 6529 2066  ey: str(value) f
+0000b2f0: 6f72 206b 6579 2c20 7661 6c75 6520 696e  or key, value in
+0000b300: 2064 2e69 7465 6d73 2829 2069 6620 6973   d.items() if is
+0000b310: 696e 7374 616e 6365 2876 616c 7565 2c20  instance(value, 
+0000b320: 2869 6e74 2c20 666c 6f61 742c 2073 7472  (int, float, str
+0000b330: 2929 7d0a 0a20 2020 2062 696e 6172 6965  ))}..    binarie
+0000b340: 733a 206c 6973 745b 4269 6e61 7279 5d20  s: list[Binary] 
+0000b350: 3d20 5b5d 0a20 2020 2062 696e 6172 7964  = [].    binaryd
+0000b360: 6566 7320 3d20 5f65 6e66 6f72 6365 5f6b  efs = _enforce_k
+0000b370: 6579 2864 2c20 2762 696e 6172 6965 7327  ey(d, 'binaries'
+0000b380: 290a 2020 2020 6966 206e 6f74 2069 7369  ).    if not isi
+0000b390: 6e73 7461 6e63 6528 6269 6e61 7279 6465  nstance(binaryde
+0000b3a0: 6673 2c20 6c69 7374 293a 0a20 2020 2020  fs, list):.     
+0000b3b0: 2020 2073 203d 2070 7072 696e 742e 7066     s = pprint.pf
+0000b3c0: 6f72 6d61 7428 6269 6e61 7279 6465 6673  ormat(binarydefs
+0000b3d0: 290a 2020 2020 2020 2020 5f65 7272 6f72  ).        _error
+0000b3e0: 6d73 6728 6622 4578 7065 6374 6564 2061  msg(f"Expected a
+0000b3f0: 206c 6973 7420 6f66 2062 696e 6172 7920   list of binary 
+0000b400: 6465 6669 6e69 7469 6f6e 732c 2067 6f74  definitions, got
+0000b410: 3a20 2229 0a20 2020 2020 2020 205f 6572  : ").        _er
+0000b420: 726f 726d 7367 2873 290a 2020 2020 2020  rormsg(s).      
+0000b430: 2020 7261 6973 6520 5363 6865 6d61 4572    raise SchemaEr
+0000b440: 726f 7228 6622 5061 7273 696e 6720 2762  ror(f"Parsing 'b
+0000b450: 696e 6172 6965 7327 2c20 6578 7065 6374  inaries', expect
+0000b460: 6564 2061 206c 6973 7420 6f66 2062 696e  ed a list of bin
+0000b470: 6172 7920 6465 6669 6e69 7469 6f6e 732c  ary definitions,
+0000b480: 2067 6f74 2061 207b 7479 7065 2862 696e   got a {type(bin
+0000b490: 6172 7964 6566 7329 7d22 290a 2020 2020  arydefs)}").    
+0000b4a0: 666f 7220 6269 6e61 7279 6465 6620 696e  for binarydef in
+0000b4b0: 2062 696e 6172 7964 6566 733a 0a20 2020   binarydefs:.   
+0000b4c0: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+0000b4d0: 7374 616e 6365 2862 696e 6172 7964 6566  stance(binarydef
+0000b4e0: 2c20 6469 6374 293a 0a0a 2020 2020 2020  , dict):..      
+0000b4f0: 2020 2020 2020 5f65 7272 6f72 6d73 6728        _errormsg(
+0000b500: 6622 7b70 6c75 6769 6e6e 616d 657d 3a20  f"{pluginname}: 
+0000b510: 5061 7273 696e 6720 2762 696e 6172 6965  Parsing 'binarie
+0000b520: 7327 206b 6579 2c20 6578 7065 6374 6564  s' key, expected
+0000b530: 2061 2064 6963 742c 2067 6f74 2229 0a20   a dict, got"). 
+0000b540: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0000b550: 2053 6368 656d 6145 7272 6f72 2866 2250   SchemaError(f"P
+0000b560: 6172 7369 6e67 2027 6269 6e61 7269 6573  arsing 'binaries
+0000b570: 272c 2045 7870 6563 7465 6420 6120 6469  ', Expected a di
+0000b580: 6374 2c20 676f 7420 7b62 696e 6172 7964  ct, got {binaryd
+0000b590: 6566 7d22 290a 2020 2020 2020 2020 7472  ef}").        tr
+0000b5a0: 793a 0a20 2020 2020 2020 2020 2020 205f  y:.            _
+0000b5b0: 6465 6275 6728 6622 5061 7273 696e 6720  debug(f"Parsing 
+0000b5c0: 6269 6e61 7279 2064 6566 696e 6974 696f  binary definitio
+0000b5d0: 6e20 666f 7220 7b70 6c75 6769 6e6e 616d  n for {pluginnam
+0000b5e0: 657d 3a20 7b62 696e 6172 7964 6566 7d22  e}: {binarydef}"
+0000b5f0: 290a 2020 2020 2020 2020 2020 2020 6269  ).            bi
+0000b600: 6e61 7279 203d 205f 7061 7273 655f 6269  nary = _parse_bi
+0000b610: 6e61 7279 6465 6628 6269 6e61 7279 6465  narydef(binaryde
+0000b620: 662c 2073 7562 7374 6974 7574 696f 6e73  f, substitutions
+0000b630: 3d73 7562 7374 6974 7574 696f 6e73 290a  =substitutions).
+0000b640: 2020 2020 2020 2020 2020 2020 6269 6e61              bina
+0000b650: 7269 6573 2e61 7070 656e 6428 6269 6e61  ries.append(bina
+0000b660: 7279 290a 2020 2020 2020 2020 6578 6365  ry).        exce
+0000b670: 7074 2050 6172 7365 4572 726f 7220 6173  pt ParseError as
+0000b680: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+0000b690: 5f65 7272 6f72 6d73 6728 6622 4661 696c  _errormsg(f"Fail
+0000b6a0: 6564 2074 6f20 7061 7273 6520 6269 6e61  ed to parse bina
+0000b6b0: 7279 2064 6566 696e 6974 696f 6e20 666f  ry definition fo
+0000b6c0: 7220 706c 7567 696e 207b 642e 6765 7428  r plugin {d.get(
+0000b6d0: 276e 616d 6527 2c20 273f 3f27 297d 2229  'name', '??')}")
+0000b6e0: 0a20 2020 2020 2020 2020 2020 205f 6572  .            _er
+0000b6f0: 726f 726d 7367 2866 222e 2e2e 2073 6f75  rormsg(f"... sou
+0000b700: 7263 6520 6461 7461 3a20 7b62 696e 6172  rce data: {binar
+0000b710: 7964 6566 7d22 290a 2020 2020 2020 2020  ydef}").        
+0000b720: 2020 2020 5f65 7272 6f72 6d73 6728 7374      _errormsg(st
+0000b730: 7228 6529 290a 0a20 2020 2069 6620 6e6f  r(e))..    if no
+0000b740: 7420 6269 6e61 7269 6573 3a0a 2020 2020  t binaries:.    
+0000b750: 2020 2020 7261 6973 6520 5363 6865 6d61      raise Schema
+0000b760: 4572 726f 7228 224e 6f20 7661 6c69 6420  Error("No valid 
+0000b770: 6269 6e61 7269 6573 2064 6566 696e 6564  binaries defined
+0000b780: 2229 0a0a 2020 2020 6d61 6e69 6665 7374  ")..    manifest
+0000b790: 5f6c 6f63 616c 5f66 6f6c 6465 7220 3d20  _local_folder = 
+0000b7a0: 636c 6f6e 6570 6174 6820 2f20 7375 6270  clonepath / subp
+0000b7b0: 6174 680a 2020 2020 6966 206e 6f74 206d  ath.    if not m
+0000b7c0: 616e 6966 6573 745f 6c6f 6361 6c5f 666f  anifest_local_fo
+0000b7d0: 6c64 6572 2e65 7869 7374 7328 293a 0a20  lder.exists():. 
+0000b7e0: 2020 2020 2020 205f 6572 726f 726d 7367         _errormsg
+0000b7f0: 2866 2254 6865 206c 6f63 616c 206d 616e  (f"The local man
+0000b800: 6966 6573 7420 666f 6c64 6572 2063 6f72  ifest folder cor
+0000b810: 7265 7370 6f6e 6469 6e67 2074 6f20 706c  responding to pl
+0000b820: 7567 696e 207b 706c 7567 696e 6e61 6d65  ugin {pluginname
+0000b830: 7d20 7761 7320 6e6f 7420 666f 756e 6420  } was not found 
+0000b840: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0000b850: 2020 2020 6622 287b 6d61 6e69 6665 7374      f"({manifest
+0000b860: 5f6c 6f63 616c 5f66 6f6c 6465 727d 2922  _local_folder})"
+0000b870: 290a 0a20 2020 2061 7373 6574 733a 206c  )..    assets: l
+0000b880: 6973 745b 4173 7365 745d 203d 205b 5d0a  ist[Asset] = [].
+0000b890: 2020 2020 6173 7365 7464 6566 7320 3d20      assetdefs = 
+0000b8a0: 642e 6765 7428 2761 7373 6574 7327 290a  d.get('assets').
+0000b8b0: 2020 2020 6966 2061 7373 6574 6465 6673      if assetdefs
+0000b8c0: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
+0000b8d0: 2069 7369 6e73 7461 6e63 6528 6173 7365   isinstance(asse
+0000b8e0: 7464 6566 732c 206c 6973 7429 3a0a 2020  tdefs, list):.  
+0000b8f0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0000b900: 5363 6865 6d61 4572 726f 7228 6622 6173  SchemaError(f"as
+0000b910: 7365 7473 2073 686f 756c 6420 686f 6c64  sets should hold
+0000b920: 2061 206c 6973 7420 6f66 2061 7373 6574   a list of asset
+0000b930: 2064 6566 696e 6974 696f 6e73 2c20 676f   definitions, go
+0000b940: 7420 7b61 7373 6574 6465 6673 7d22 290a  t {assetdefs}").
+0000b950: 2020 2020 2020 2020 666f 7220 6173 7365          for asse
+0000b960: 7464 6566 2069 6e20 6173 7365 7464 6566  tdef in assetdef
+0000b970: 733a 0a20 2020 2020 2020 2020 2020 2074  s:.            t
+0000b980: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+0000b990: 2020 2020 6173 7365 7473 2e61 7070 656e      assets.appen
+0000b9a0: 6428 5f70 6172 7365 5f61 7373 6574 2861  d(_parse_asset(a
+0000b9b0: 7373 6574 6465 662c 2064 6566 6175 6c74  ssetdef, default
+0000b9c0: 736f 7572 6365 3d6d 616e 6966 6573 745f  source=manifest_
+0000b9d0: 6c6f 6361 6c5f 666f 6c64 6572 2e61 735f  local_folder.as_
+0000b9e0: 706f 7369 7828 2929 290a 2020 2020 2020  posix())).      
+0000b9f0: 2020 2020 2020 6578 6365 7074 2050 6172        except Par
+0000ba00: 7365 4572 726f 7220 6173 2065 3a0a 2020  seError as e:.  
+0000ba10: 2020 2020 2020 2020 2020 2020 2020 5f65                _e
+0000ba20: 7272 6f72 6d73 6728 7374 7228 6529 290a  rrormsg(str(e)).
+0000ba30: 0a20 2020 2072 6574 7572 6e20 506c 7567  .    return Plug
+0000ba40: 696e 280a 2020 2020 2020 2020 6e61 6d65  in(.        name
+0000ba50: 3d5f 656e 666f 7263 655f 6b65 7928 642c  =_enforce_key(d,
+0000ba60: 2027 6e61 6d65 2729 2c0a 2020 2020 2020   'name'),.      
+0000ba70: 2020 7665 7273 696f 6e3d 7665 7273 696f    version=versio
+0000ba80: 6e2c 0a20 2020 2020 2020 2073 686f 7274  n,.        short
+0000ba90: 5f64 6573 6372 6970 7469 6f6e 3d5f 656e  _description=_en
+0000baa0: 666f 7263 655f 6b65 7928 642c 2027 7368  force_key(d, 'sh
+0000bab0: 6f72 745f 6465 7363 7269 7074 696f 6e27  ort_description'
+0000bac0: 292c 0a20 2020 2020 2020 2061 7574 686f  ),.        autho
+0000bad0: 723d 5f65 6e66 6f72 6365 5f6b 6579 2864  r=_enforce_key(d
+0000bae0: 2c20 2761 7574 686f 7227 292c 0a20 2020  , 'author'),.   
+0000baf0: 2020 2020 2065 6d61 696c 3d5f 656e 666f       email=_enfo
+0000bb00: 7263 655f 6b65 7928 642c 2027 656d 6169  rce_key(d, 'emai
+0000bb10: 6c27 292c 0a20 2020 2020 2020 206f 7063  l'),.        opc
+0000bb20: 6f64 6573 3d6f 7063 6f64 6573 2c0a 2020  odes=opcodes,.  
+0000bb30: 2020 2020 2020 6269 6e61 7269 6573 3d62        binaries=b
+0000bb40: 696e 6172 6965 732c 0a20 2020 2020 2020  inaries,.       
+0000bb50: 2064 6f63 5f66 6f6c 6465 723d 642e 6765   doc_folder=d.ge
+0000bb60: 7428 2764 6f63 272c 2027 2729 2c0a 2020  t('doc', ''),.  
+0000bb70: 2020 2020 2020 6c6f 6e67 5f64 6573 6372        long_descr
+0000bb80: 6970 7469 6f6e 3d64 2e67 6574 2827 6c6f  iption=d.get('lo
+0000bb90: 6e67 5f64 6573 6372 6970 7469 6f6e 272c  ng_description',
+0000bba0: 2027 2729 2c0a 2020 2020 2020 2020 7572   ''),.        ur
+0000bbb0: 6c3d 706c 7567 696e 7572 6c2c 0a20 2020  l=pluginurl,.   
+0000bbc0: 2020 2020 206d 616e 6966 6573 745f 7265       manifest_re
+0000bbd0: 6c61 7469 7665 5f70 6174 683d 7375 6270  lative_path=subp
+0000bbe0: 6174 682c 0a20 2020 2020 2020 2061 7373  ath,.        ass
+0000bbf0: 6574 733d 6173 7365 7473 2c0a 2020 2020  ets=assets,.    
+0000bc00: 2020 2020 636c 6f6e 6564 5f70 6174 683d      cloned_path=
+0000bc10: 5f67 6974 5f6c 6f63 616c 5f70 6174 6828  _git_local_path(
+0000bc20: 706c 7567 696e 7572 6c29 0a20 2020 2029  pluginurl).    )
+0000bc30: 0a0a 0a64 6566 205f 7265 736f 6c76 655f  ...def _resolve_
+0000bc40: 7061 7468 2870 6174 683a 2073 7472 207c  path(path: str |
+0000bc50: 2050 6174 682c 0a20 2020 2020 2020 2020   Path,.         
+0000bc60: 2020 2020 2020 2020 2062 6173 6564 6972           basedir
+0000bc70: 3a20 7374 7220 7c20 5061 7468 207c 204e  : str | Path | N
+0000bc80: 6f6e 6520 3d20 4e6f 6e65 0a20 2020 2020  one = None.     
+0000bc90: 2020 2020 2020 2020 2020 2020 2029 202d               ) -
+0000bca0: 3e20 5061 7468 3a0a 2020 2020 2222 220a  > Path:.    """.
+0000bcb0: 2020 2020 436f 6e76 6572 7420 7061 7468      Convert path
+0000bcc0: 2074 6f20 6162 736f 6c75 7465 2c20 7573   to absolute, us
+0000bcd0: 6520 6062 6173 6564 6972 6020 6f72 2074  e `basedir` or t
+0000bce0: 6865 2063 7764 2061 7320 6261 7365 0a20  he cwd as base. 
+0000bcf0: 2020 2022 2222 0a20 2020 2070 203d 2050     """.    p = P
+0000bd00: 6174 6828 7061 7468 290a 2020 2020 6966  ath(path).    if
+0000bd10: 2070 2e69 735f 6162 736f 6c75 7465 2829   p.is_absolute()
+0000bd20: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+0000bd30: 2070 2e72 6573 6f6c 7665 2829 0a20 2020   p.resolve().   
+0000bd40: 2069 6620 6261 7365 6469 7220 6973 204e   if basedir is N
+0000bd50: 6f6e 653a 0a20 2020 2020 2020 2072 6574  one:.        ret
+0000bd60: 7572 6e20 2850 6174 682e 6377 6428 292f  urn (Path.cwd()/
+0000bd70: 7029 2e72 6573 6f6c 7665 2829 0a20 2020  p).resolve().   
+0000bd80: 2072 6574 7572 6e20 2850 6174 6828 6261   return (Path(ba
+0000bd90: 7365 6469 7229 202f 2070 292e 7265 736f  sedir) / p).reso
+0000bda0: 6c76 6528 290a 0a0a 6465 6620 5f72 6d5f  lve()...def _rm_
+0000bdb0: 6469 7228 7061 7468 3a20 5061 7468 2920  dir(path: Path) 
+0000bdc0: 2d3e 204e 6f6e 653a 0a0a 2020 2020 6966  -> None:..    if
+0000bdd0: 206e 6f74 2070 6174 682e 6578 6973 7473   not path.exists
+0000bde0: 2829 3a0a 2020 2020 2020 2020 7265 7475  ():.        retu
+0000bdf0: 726e 0a0a 2020 2020 2320 4f6e 2077 696e  rn..    # On win
+0000be00: 646f 7773 2072 6d74 7265 6520 6d69 6768  dows rmtree migh
+0000be10: 7420 6661 696c 2077 6865 6e20 6120 6669  t fail when a fi
+0000be20: 6c65 2069 7320 6d61 726b 6564 2061 7320  le is marked as 
+0000be30: 7265 6164 2d6f 6e6c 790a 2020 2020 2320  read-only.    # 
+0000be40: 5468 6973 2069 7320 7468 6520 6361 7365  This is the case
+0000be50: 2069 6e73 6964 6520 6120 6769 7420 7265   inside a git re
+0000be60: 706f 2e0a 2020 2020 2320 536f 6c75 7469  po..    # Soluti
+0000be70: 6f6e 2074 616b 656e 2066 726f 6d3a 2068  on taken from: h
+0000be80: 7474 7073 3a2f 2f62 7567 732e 7079 7468  ttps://bugs.pyth
+0000be90: 6f6e 2e6f 7267 2f69 7373 7565 3433 3635  on.org/issue4365
+0000bea0: 370a 2020 2020 6465 6620 7265 6d6f 7665  7.    def remove
+0000beb0: 5f72 6561 646f 6e6c 7928 6675 6e63 2c20  _readonly(func, 
+0000bec0: 7061 7468 2c20 6578 635f 696e 666f 293a  path, exc_info):
+0000bed0: 0a20 2020 2020 2020 2022 2222 436c 6561  .        """Clea
+0000bee0: 7220 7468 6520 7265 6164 6f6e 6c79 2062  r the readonly b
+0000bef0: 6974 2061 6e64 2072 6561 7474 656d 7074  it and reattempt
+0000bf00: 2074 6865 2072 656d 6f76 616c 2222 220a   the removal""".
+0000bf10: 2020 2020 2020 2020 2320 4552 524f 525f          # ERROR_
+0000bf20: 4143 4345 5353 5f44 454e 4945 4420 3d20  ACCESS_DENIED = 
+0000bf30: 350a 2020 2020 2020 2020 6966 2066 756e  5.        if fun
+0000bf40: 6320 6e6f 7420 696e 2028 6f73 2e75 6e6c  c not in (os.unl
+0000bf50: 696e 6b2c 206f 732e 726d 6469 7229 206f  ink, os.rmdir) o
+0000bf60: 7220 6578 635f 696e 666f 5b31 5d2e 7769  r exc_info[1].wi
+0000bf70: 6e65 7272 6f72 2021 3d20 353a 0a20 2020  nerror != 5:.   
+0000bf80: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
+0000bf90: 7863 5f69 6e66 6f5b 315d 0a20 2020 2020  xc_info[1].     
+0000bfa0: 2020 206f 732e 6368 6d6f 6428 7061 7468     os.chmod(path
+0000bfb0: 2c20 7374 6174 2e53 5f49 5752 4954 4529  , stat.S_IWRITE)
+0000bfc0: 0a20 2020 2020 2020 2066 756e 6328 7061  .        func(pa
+0000bfd0: 7468 290a 0a20 2020 2073 6875 7469 6c2e  th)..    shutil.
+0000bfe0: 726d 7472 6565 2870 6174 682e 6173 5f70  rmtree(path.as_p
+0000bff0: 6f73 6978 2829 2c20 6f6e 6572 726f 723d  osix(), onerror=
+0000c000: 7265 6d6f 7665 5f72 6561 646f 6e6c 7929  remove_readonly)
+0000c010: 0a0a 0a64 6566 205f 636f 7079 5f72 6563  ...def _copy_rec
+0000c020: 7572 7369 7665 2873 7263 3a20 5061 7468  ursive(src: Path
+0000c030: 2c20 6465 7374 3a20 5061 7468 2920 2d3e  , dest: Path) ->
+0000c040: 204e 6f6e 653a 0a20 2020 2069 6620 6e6f   None:.    if no
+0000c050: 7420 6465 7374 2e65 7869 7374 7328 293a  t dest.exists():
+0000c060: 0a20 2020 2020 2020 2072 6169 7365 204f  .        raise O
+0000c070: 5345 7272 6f72 2866 2244 6573 7469 6e61  SError(f"Destina
+0000c080: 7469 6f6e 2070 6174 6820 287b 6465 7374  tion path ({dest
+0000c090: 2e61 735f 706f 7369 7828 297d 2920 646f  .as_posix()}) do
+0000c0a0: 6573 206e 6f74 2065 7869 7374 2229 0a20  es not exist"). 
+0000c0b0: 2020 2069 6620 6e6f 7420 6465 7374 2e69     if not dest.i
+0000c0c0: 735f 6469 7228 293a 0a20 2020 2020 2020  s_dir():.       
+0000c0d0: 2072 6169 7365 204f 5345 7272 6f72 2866   raise OSError(f
+0000c0e0: 2244 6573 7469 6e61 7469 6f6e 2070 6174  "Destination pat
+0000c0f0: 6820 287b 6465 7374 2e61 735f 706f 7369  h ({dest.as_posi
+0000c100: 7828 297d 2920 7368 6f75 6c64 2062 6520  x()}) should be 
+0000c110: 6120 6469 7265 6374 6f72 7922 290a 0a20  a directory").. 
+0000c120: 2020 2069 6620 7372 632e 6973 5f64 6972     if src.is_dir
+0000c130: 2829 3a0a 2020 2020 2020 2020 5f64 6562  ():.        _deb
+0000c140: 7567 2866 2243 6f70 7969 6e67 2061 6c6c  ug(f"Copying all
+0000c150: 2066 696c 6573 2075 6e64 6572 207b 7374   files under {st
+0000c160: 7228 7372 6329 7d20 746f 207b 7374 7228  r(src)} to {str(
+0000c170: 6465 7374 297d 2229 0a20 2020 2020 2020  dest)}").       
+0000c180: 2066 6f72 2066 2069 6e20 7372 632e 676c   for f in src.gl
+0000c190: 6f62 2822 2a22 293a 0a20 2020 2020 2020  ob("*"):.       
+0000c1a0: 2020 2020 205f 6465 6275 6728 2220 2020       _debug("   
+0000c1b0: 2022 2c20 7374 7228 6629 290a 2020 2020   ", str(f)).    
+0000c1c0: 2020 2020 2020 2020 6966 2066 2e69 735f          if f.is_
+0000c1d0: 6469 7228 293a 0a20 2020 2020 2020 2020  dir():.         
+0000c1e0: 2020 2020 2020 2073 6875 7469 6c2e 636f         shutil.co
+0000c1f0: 7079 7472 6565 2866 2e61 6273 6f6c 7574  pytree(f.absolut
+0000c200: 6528 292e 6173 5f70 6f73 6978 2829 2c20  e().as_posix(), 
+0000c210: 6465 7374 2e61 735f 706f 7369 7828 2929  dest.as_posix())
+0000c220: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+0000c230: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000c240: 2020 2073 6875 7469 6c2e 636f 7079 2866     shutil.copy(f
+0000c250: 2e61 735f 706f 7369 7828 292c 2064 6573  .as_posix(), des
+0000c260: 742e 6173 5f70 6f73 6978 2829 290a 2020  t.as_posix()).  
+0000c270: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000c280: 5f64 6562 7567 2866 2243 6f70 7969 6e67  _debug(f"Copying
+0000c290: 2066 696c 6520 7b73 7472 2873 7263 297d   file {str(src)}
+0000c2a0: 2074 6f20 7b73 7472 2864 6573 7429 7d22   to {str(dest)}"
+0000c2b0: 290a 2020 2020 2020 2020 7368 7574 696c  ).        shutil
+0000c2c0: 2e63 6f70 7928 7372 632e 6173 5f70 6f73  .copy(src.as_pos
+0000c2d0: 6978 2829 2c20 6465 7374 2e61 735f 706f  ix(), dest.as_po
+0000c2e0: 7369 7828 2929 0a0a 0a64 6566 205f 7265  six())...def _re
+0000c2f0: 6164 5f70 6c75 6769 6e64 6566 2866 696c  ad_plugindef(fil
+0000c300: 6570 6174 683a 2073 7472 207c 2050 6174  epath: str | Pat
+0000c310: 682c 0a20 2020 2020 2020 2020 2020 2020  h,.             
+0000c320: 2020 2020 2020 2075 726c 3a20 7374 7220         url: str 
+0000c330: 3d20 2727 2c0a 2020 2020 2020 2020 2020  = '',.          
+0000c340: 2020 2020 2020 2020 2020 6d61 6e69 6665            manife
+0000c350: 7374 5f72 656c 6174 6976 655f 7061 7468  st_relative_path
+0000c360: 3a20 7374 7220 3d20 2727 0a20 2020 2020  : str = ''.     
+0000c370: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000c380: 202d 3e20 506c 7567 696e 3a0a 2020 2020   -> Plugin:.    
+0000c390: 2222 220a 2020 2020 4372 6561 7465 2061  """.    Create a
+0000c3a0: 2050 6c75 6769 6e20 6672 6f6d 2061 2070   Plugin from a p
+0000c3b0: 6c75 6769 6e20 6465 6669 6e69 7469 6f6e  lugin definition
+0000c3c0: 2066 696c 6520 2872 6973 7365 742e 6a73   file (risset.js
+0000c3d0: 6f6e 290a 0a20 2020 2041 7267 733a 0a20  on)..    Args:. 
+0000c3e0: 2020 2020 2020 2066 696c 6570 6174 683a         filepath:
+0000c3f0: 2061 6e20 6162 736f 6c75 7465 2070 6174   an absolute pat
+0000c400: 6820 746f 2074 6865 2070 6c75 6769 6e20  h to the plugin 
+0000c410: 6465 6669 6e69 7469 6f6e 0a20 2020 2020  definition.     
+0000c420: 2020 206d 616e 6966 6573 745f 7265 6c61     manifest_rela
+0000c430: 7469 7665 5f70 6174 683a 2072 656c 6174  tive_path: relat
+0000c440: 6976 6520 7061 7468 2074 6f20 6d61 6e69  ive path to mani
+0000c450: 6665 7374 0a0a 2020 2020 5265 7475 726e  fest..    Return
+0000c460: 733a 0a20 2020 2020 2020 2061 2050 6c75  s:.        a Plu
+0000c470: 6769 6e0a 0a20 2020 2052 6169 7365 7320  gin..    Raises 
+0000c480: 5363 6865 6d61 4572 726f 7220 6966 2074  SchemaError if t
+0000c490: 6865 2064 6566 696e 6974 696f 6e20 6973  he definition is
+0000c4a0: 2069 6e76 616c 6964 2028 6974 2064 6f65   invalid (it doe
+0000c4b0: 7320 6e6f 7420 6465 6669 6e65 0a20 2020  s not define.   
+0000c4c0: 2061 6c6c 206e 6565 6465 6420 6b65 7973   all needed keys
+0000c4d0: 2920 6f72 206a 736f 6e2e 4a53 4f4e 4465  ) or json.JSONDe
+0000c4e0: 636f 6465 4572 726f 7220 6966 2074 6865  codeError if the
+0000c4f0: 206a 736f 6e20 6974 7365 6c66 2069 7320   json itself is 
+0000c500: 6e6f 7420 636f 7272 6563 746c 7920 666f  not correctly fo
+0000c510: 726d 6174 7465 640a 2020 2020 2222 220a  rmatted.    """.
+0000c520: 2020 2020 2320 6162 736f 6c75 7465 2070      # absolute p
+0000c530: 6174 680a 2020 2020 7061 7468 203d 2050  ath.    path = P
+0000c540: 6174 6828 6669 6c65 7061 7468 292e 7265  ath(filepath).re
+0000c550: 736f 6c76 6528 290a 0a20 2020 2069 6620  solve()..    if 
+0000c560: 6e6f 7420 7061 7468 2e65 7869 7374 7328  not path.exists(
+0000c570: 293a 0a20 2020 2020 2020 2072 6169 7365  ):.        raise
+0000c580: 2053 6368 656d 6145 7272 6f72 2866 2270   SchemaError(f"p
+0000c590: 6c75 6769 6e20 6465 6669 6e69 7469 6f6e  lugin definition
+0000c5a0: 2066 696c 6520 287b 7061 7468 7d29 206e   file ({path}) n
+0000c5b0: 6f74 2066 6f75 6e64 2229 0a0a 2020 2020  ot found")..    
+0000c5c0: 6173 7365 7274 2070 6174 682e 7375 6666  assert path.suff
+0000c5d0: 6978 203d 3d20 222e 6a73 6f6e 222c 2022  ix == ".json", "
+0000c5e0: 506c 7567 696e 2064 6566 696e 6974 696f  Plugin definitio
+0000c5f0: 6e20 6669 6c65 2073 686f 756c 6420 6265  n file should be
+0000c600: 2061 202e 6a73 6f6e 2066 696c 6522 0a0a   a .json file"..
+0000c610: 2020 2020 5f64 6562 7567 2822 5061 7273      _debug("Pars
+0000c620: 696e 6720 6d61 6e69 6665 7374 3a22 2c20  ing manifest:", 
+0000c630: 7061 7468 290a 0a20 2020 2074 7279 3a0a  path)..    try:.
+0000c640: 2020 2020 2020 2020 6420 3d20 6a73 6f6e          d = json
+0000c650: 2e6c 6f61 6428 6f70 656e 2870 6174 6829  .load(open(path)
+0000c660: 290a 2020 2020 6578 6365 7074 206a 736f  ).    except jso
+0000c670: 6e2e 6465 636f 6465 722e 4a53 4f4e 4465  n.decoder.JSONDe
+0000c680: 636f 6465 4572 726f 7220 6173 2065 3a0a  codeError as e:.
+0000c690: 2020 2020 2020 2020 5f65 7272 6f72 6d73          _errorms
+0000c6a0: 6728 6622 436f 756c 6420 6e6f 7420 7061  g(f"Could not pa
+0000c6b0: 7273 6520 6a73 6f6e 2066 696c 6520 7b70  rse json file {p
+0000c6c0: 6174 687d 3a5c 6e20 2020 207b 657d 2229  ath}:\n    {e}")
+0000c6d0: 0a20 2020 2020 2020 2072 6169 7365 2065  .        raise e
+0000c6e0: 0a0a 2020 2020 5f64 6562 7567 2822 2e2e  ..    _debug("..
+0000c6f0: 2e20 6d61 6e69 6665 7374 206a 736f 6e20  . manifest json 
+0000c700: 6f6b 2229 0a0a 2020 2020 7472 793a 0a20  ok")..    try:. 
+0000c710: 2020 2020 2020 2070 6c75 6769 6e20 3d20         plugin = 
+0000c720: 5f70 6c75 6769 6e5f 6672 6f6d 5f64 6963  _plugin_from_dic
+0000c730: 7428 642c 2070 6c75 6769 6e75 726c 3d75  t(d, pluginurl=u
+0000c740: 726c 2c20 7375 6270 6174 683d 6d61 6e69  rl, subpath=mani
+0000c750: 6665 7374 5f72 656c 6174 6976 655f 7061  fest_relative_pa
+0000c760: 7468 290a 2020 2020 6578 6365 7074 2053  th).    except S
+0000c770: 6368 656d 6145 7272 6f72 2061 7320 653a  chemaError as e:
+0000c780: 0a20 2020 2020 2020 205f 6572 726f 726d  .        _errorm
+0000c790: 7367 2866 2245 7272 6f72 2077 6869 6c65  sg(f"Error while
+0000c7a0: 2070 726f 6365 7373 696e 6720 7b66 696c   processing {fil
+0000c7b0: 6570 6174 687d 2229 0a20 2020 2020 2020  epath}").       
+0000c7c0: 2072 6169 7365 2065 0a20 2020 2065 7863   raise e.    exc
+0000c7d0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0000c7e0: 2065 3a0a 2020 2020 2020 2020 5f65 7272   e:.        _err
+0000c7f0: 6f72 6d73 6728 6622 556e 6b6e 6f77 6e20  ormsg(f"Unknown 
+0000c800: 6572 726f 7220 7768 696c 6520 7072 6f63  error while proc
+0000c810: 6573 7369 6e67 207b 6669 6c65 7061 7468  essing {filepath
+0000c820: 7d22 290a 2020 2020 2020 2020 7261 6973  }").        rais
+0000c830: 6520 650a 0a20 2020 2072 6574 7572 6e20  e e..    return 
+0000c840: 706c 7567 696e 0a0a 0a64 6566 205f 6e6f  plugin...def _no
+0000c850: 726d 616c 697a 655f 7061 7468 2870 6174  rmalize_path(pat
+0000c860: 683a 2073 7472 2920 2d3e 2073 7472 3a0a  h: str) -> str:.
+0000c870: 2020 2020 7061 7468 203d 206f 732e 7061      path = os.pa
+0000c880: 7468 2e65 7870 616e 6476 6172 7328 7061  th.expandvars(pa
+0000c890: 7468 290a 2020 2020 7061 7468 203d 206f  th).    path = o
+0000c8a0: 732e 7061 7468 2e65 7870 616e 6475 7365  s.path.expanduse
+0000c8b0: 7228 7061 7468 290a 2020 2020 7061 7468  r(path).    path
+0000c8c0: 203d 206f 732e 7061 7468 2e61 6273 7061   = os.path.abspa
+0000c8d0: 7468 2870 6174 6829 0a20 2020 2072 6574  th(path).    ret
+0000c8e0: 7572 6e20 7061 7468 0a0a 0a64 6566 205f  urn path...def _
+0000c8f0: 6d61 6b65 5f69 6e73 7461 6c6c 5f6d 616e  make_install_man
+0000c900: 6966 6573 7428 706c 7567 696e 3a20 506c  ifest(plugin: Pl
+0000c910: 7567 696e 2c20 6173 7365 7466 696c 6573  ugin, assetfiles
+0000c920: 3a20 6c69 7374 5b73 7472 5d20 7c20 4e6f  : list[str] | No
+0000c930: 6e65 203d 204e 6f6e 650a 2020 2020 2020  ne = None.      
+0000c940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c950: 2020 2020 2029 202d 3e20 6469 6374 3a0a       ) -> dict:.
+0000c960: 2020 2020 2222 220a 2020 2020 4372 6561      """.    Crea
+0000c970: 7465 2061 6e20 696e 7374 616c 6c61 7469  te an installati
+0000c980: 6f6e 206d 616e 6966 6573 7420 6469 6374  on manifest dict
+0000c990: 0a0a 2020 2020 4172 6773 3a0a 2020 2020  ..    Args:.    
+0000c9a0: 2020 2020 706c 7567 696e 3a20 7468 6520      plugin: the 
+0000c9b0: 506c 7567 696e 2063 6f72 7265 7370 6f6e  Plugin correspon
+0000c9c0: 6469 6e67 2074 6f20 7468 6973 2069 6e73  ding to this ins
+0000c9d0: 7461 6c6c 6174 696f 6e20 6d61 6e69 6665  tallation manife
+0000c9e0: 7374 0a20 2020 2020 2020 2061 7373 6574  st.        asset
+0000c9f0: 6669 6c65 733a 2069 6620 6769 7665 6e2c  files: if given,
+0000ca00: 2061 206c 6973 7420 6f66 2061 7373 6574   a list of asset
+0000ca10: 2066 696c 656e 616d 6573 2069 6e73 7461   filenames insta
+0000ca20: 6c6c 6564 2062 7920 7468 6973 2070 6c75  lled by this plu
+0000ca30: 6769 6e0a 2020 2020 2020 2020 2020 2020  gin.            
+0000ca40: 286f 6e6c 7920 7468 6520 6669 6c65 6e61  (only the filena
+0000ca50: 6d65 732c 206e 6f20 7061 7468 3a20 616c  mes, no path: al
+0000ca60: 6c20 6173 7365 7473 2061 7265 2070 6c61  l assets are pla
+0000ca70: 6365 6420 696e 2061 2066 6c61 7420 666f  ced in a flat fo
+0000ca80: 6c64 6572 0a20 2020 2020 2020 2020 2020  lder.           
+0000ca90: 2075 6e64 6572 2074 6865 2070 6c75 6769   under the plugi
+0000caa0: 6e73 2070 7265 6669 7829 0a20 2020 2022  ns prefix).    "
+0000cab0: 2222 0a20 2020 2070 6c61 7466 6f72 6d5f  "".    platform_
+0000cac0: 6964 203d 205f 7365 7373 696f 6e2e 706c  id = _session.pl
+0000cad0: 6174 666f 726d 6964 0a20 2020 2062 696e  atformid.    bin
+0000cae0: 6172 7920 3d20 706c 7567 696e 2e66 696e  ary = plugin.fin
+0000caf0: 645f 6269 6e61 7279 2870 6c61 7466 6f72  d_binary(platfor
+0000cb00: 6d69 643d 706c 6174 666f 726d 5f69 6429  mid=platform_id)
+0000cb10: 0a20 2020 2069 6620 6e6f 7420 6269 6e61  .    if not bina
+0000cb20: 7279 3a0a 2020 2020 2020 2020 7261 6973  ry:.        rais
+0000cb30: 6520 5275 6e74 696d 6545 7272 6f72 2866  e RuntimeError(f
+0000cb40: 224e 6f20 6269 6e61 7279 2066 6f75 6e64  "No binary found
+0000cb50: 2066 6f72 2070 6c75 6769 6e20 7b70 6c75   for plugin {plu
+0000cb60: 6769 6e2e 6e61 6d65 7d20 2870 6c61 7466  gin.name} (platf
+0000cb70: 6f72 6d3a 207b 706c 6174 666f 726d 5f69  orm: {platform_i
+0000cb80: 647d 2229 0a0a 2020 2020 6f75 743a 2064  d}")..    out: d
+0000cb90: 6963 745b 7374 722c 2041 6e79 5d20 3d20  ict[str, Any] = 
+0000cba0: 7b7d 0a20 2020 206f 7574 5b27 6e61 6d65  {}.    out['name
+0000cbb0: 275d 203d 2070 6c75 6769 6e2e 6e61 6d65  '] = plugin.name
+0000cbc0: 0a20 2020 206f 7574 5b27 6175 7468 6f72  .    out['author
+0000cbd0: 275d 203d 2070 6c75 6769 6e2e 6175 7468  '] = plugin.auth
+0000cbe0: 6f72 0a20 2020 206f 7574 5b27 656d 6169  or.    out['emai
+0000cbf0: 6c27 5d20 3d20 706c 7567 696e 2e65 6d61  l'] = plugin.ema
+0000cc00: 696c 0a20 2020 206f 7574 5b27 7665 7273  il.    out['vers
+0000cc10: 696f 6e27 5d20 3d20 706c 7567 696e 2e76  ion'] = plugin.v
+0000cc20: 6572 7369 6f6e 0a20 2020 206f 7574 5b27  ersion.    out['
+0000cc30: 6f70 636f 6465 7327 5d20 3d20 706c 7567  opcodes'] = plug
+0000cc40: 696e 2e6f 7063 6f64 6573 0a20 2020 206f  in.opcodes.    o
+0000cc50: 7574 5b27 6c6f 6e67 5f64 6573 6372 6970  ut['long_descrip
+0000cc60: 7469 6f6e 275d 203d 2070 6c75 6769 6e2e  tion'] = plugin.
+0000cc70: 6c6f 6e67 5f64 6573 6372 6970 7469 6f6e  long_description
+0000cc80: 0a20 2020 206f 7574 5b27 7368 6f72 745f  .    out['short_
+0000cc90: 6465 7363 7269 7074 696f 6e27 5d20 3d20  description'] = 
+0000cca0: 706c 7567 696e 2e73 686f 7274 5f64 6573  plugin.short_des
+0000ccb0: 6372 6970 7469 6f6e 0a20 2020 206f 7574  cription.    out
+0000ccc0: 5b27 6275 696c 645f 706c 6174 666f 726d  ['build_platform
+0000ccd0: 275d 203d 2062 696e 6172 792e 6275 696c  '] = binary.buil
+0000cce0: 645f 706c 6174 666f 726d 0a20 2020 206f  d_platform.    o
+0000ccf0: 7574 5b27 6269 6e61 7279 275d 203d 2062  ut['binary'] = b
+0000cd00: 696e 6172 792e 6269 6e61 7279 5f66 696c  inary.binary_fil
+0000cd10: 656e 616d 6528 290a 2020 2020 6f75 745b  ename().    out[
+0000cd20: 2770 6c61 7466 6f72 6d27 5d20 3d20 706c  'platform'] = pl
+0000cd30: 6174 666f 726d 5f69 640a 2020 2020 6f75  atform_id.    ou
+0000cd40: 745b 2761 7373 6574 6669 6c65 7327 5d20  t['assetfiles'] 
+0000cd50: 3d20 6173 7365 7466 696c 6573 206f 7220  = assetfiles or 
+0000cd60: 5b5d 0a20 2020 2072 6574 7572 6e20 6f75  [].    return ou
+0000cd70: 740a 0a0a 6465 6620 5f70 7269 6e74 5f77  t...def _print_w
+0000cd80: 6974 685f 6c69 6e65 5f6e 756d 6265 7273  ith_line_numbers
+0000cd90: 2873 3a20 7374 7229 202d 3e20 4e6f 6e65  (s: str) -> None
+0000cda0: 3a0a 2020 2020 666f 7220 692c 206c 696e  :.    for i, lin
+0000cdb0: 6520 696e 2065 6e75 6d65 7261 7465 2873  e in enumerate(s
+0000cdc0: 2e73 706c 6974 6c69 6e65 7328 2929 3a0a  .splitlines()):.
+0000cdd0: 2020 2020 2020 2020 7072 696e 7428 6622          print(f"
+0000cde0: 7b69 2b31 3a30 3033 647d 207b 6c69 6e65  {i+1:003d} {line
+0000cdf0: 7d22 290a 0a0a 6465 6620 5f66 696c 656e  }")...def _filen
+0000ce00: 616d 655f 6672 6f6d 5f63 6f6e 7465 6e74  ame_from_content
+0000ce10: 5f64 6973 706f 7369 7469 6f6e 2863 643a  _disposition(cd:
+0000ce20: 2073 7472 2920 2d3e 2073 7472 3a0a 2020   str) -> str:.  
+0000ce30: 2020 2222 220a 2020 2020 4765 7420 6669    """.    Get fi
+0000ce40: 6c65 6e61 6d65 2066 726f 6d20 636f 6e74  lename from cont
+0000ce50: 656e 742d 6469 7370 6f73 6974 696f 6e0a  ent-disposition.
+0000ce60: 0a20 2020 2056 6961 3a20 6874 7470 733a  .    Via: https:
+0000ce70: 2f2f 7777 772e 636f 6465 6d65 6e74 6f72  //www.codementor
+0000ce80: 2e69 6f2f 4061 7669 6172 7961 6e2f 646f  .io/@aviaryan/do
+0000ce90: 776e 6c6f 6164 696e 672d 6669 6c65 732d  wnloading-files-
+0000cea0: 6672 6f6d 2d75 726c 732d 696e 2d70 7974  from-urls-in-pyt
+0000ceb0: 686f 6e2d 3737 7133 6273 3075 6e0a 0a20  hon-77q3bs0un.. 
+0000cec0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+0000ced0: 2063 643a 2063 6f6e 7465 6e74 2064 6973   cd: content dis
+0000cee0: 706f 7369 7469 6f6e 0a0a 2020 2020 5265  position..    Re
+0000cef0: 7475 726e 733a 0a20 2020 2020 2020 2074  turns:.        t
+0000cf00: 6865 2066 696c 656e 616d 6520 6f72 2061  he filename or a
+0000cf10: 6e20 656d 7074 7920 7374 7269 6e67 0a20  n empty string. 
+0000cf20: 2020 2022 2222 0a20 2020 2069 6620 6e6f     """.    if no
+0000cf30: 7420 6364 3a0a 2020 2020 2020 2020 7265  t cd:.        re
+0000cf40: 7475 726e 2027 270a 2020 2020 666e 616d  turn ''.    fnam
+0000cf50: 6520 3d20 7265 2e66 696e 6461 6c6c 2827  e = re.findall('
+0000cf60: 6669 6c65 6e61 6d65 3d28 2e2b 2927 2c20  filename=(.+)', 
+0000cf70: 6364 290a 2020 2020 6966 206c 656e 2866  cd).    if len(f
+0000cf80: 6e61 6d65 2920 3d3d 2030 3a0a 2020 2020  name) == 0:.    
+0000cf90: 2020 2020 7265 7475 726e 2027 270a 2020      return ''.  
+0000cfa0: 2020 7265 7475 726e 2066 6e61 6d65 5b30    return fname[0
+0000cfb0: 5d0a 0a0a 6465 6620 5f64 6f77 6e6c 6f61  ]...def _downloa
+0000cfc0: 645f 6669 6c65 2875 726c 3a20 7374 722c  d_file(url: str,
+0000cfd0: 2064 6573 7469 6e61 7469 6f6e 5f66 6f6c   destination_fol
+0000cfe0: 6465 723d 2727 2c20 6361 6368 653d 5472  der='', cache=Tr
+0000cff0: 7565 2920 2d3e 2050 6174 683a 0a20 2020  ue) -> Path:.   
+0000d000: 2022 2222 0a20 2020 2044 6f77 6e6c 6f61   """.    Downloa
+0000d010: 6420 7468 6520 6769 7665 6e20 7572 6c2e  d the given url.
+0000d020: 2052 6169 7365 7320 5275 6e74 696d 6545   Raises RuntimeE
+0000d030: 7272 6f72 2069 6620 6661 696c 6564 0a0a  rror if failed..
+0000d040: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
+0000d050: 2020 7572 6c3a 2074 6865 2075 726c 2074    url: the url t
+0000d060: 6f20 646f 776e 6c6f 6164 2066 726f 6d0a  o download from.
+0000d070: 2020 2020 2020 2020 6465 7374 696e 6174          destinat
+0000d080: 696f 6e5f 666f 6c64 6572 3a20 6966 2067  ion_folder: if g
+0000d090: 6976 656e 2c20 7468 6520 666f 6c64 6572  iven, the folder
+0000d0a0: 2074 6f20 706c 6163 6520 7468 6520 646f   to place the do
+0000d0b0: 776e 6c6f 6164 6564 2066 696c 652e 2044  wnloaded file. D
+0000d0c0: 6566 6175 6c74 7320 746f 0a20 2020 2020  efaults to.     
+0000d0d0: 2020 2020 2020 2074 6865 2074 656d 706f         the tempo
+0000d0e0: 7261 7279 2066 6f6c 6465 722e 2049 6620  rary folder. If 
+0000d0f0: 6769 7665 6e2c 2063 6163 6865 2069 7320  given, cache is 
+0000d100: 6469 7361 626c 6564 2e0a 2020 2020 2020  disabled..      
+0000d110: 2020 6361 6368 653a 2069 6620 4661 6c73    cache: if Fals
+0000d120: 652c 2062 7970 6173 7320 7468 6520 6361  e, bypass the ca
+0000d130: 6368 652e 0a20 2020 2022 2222 0a20 2020  che..    """.   
+0000d140: 2062 6173 656f 7574 6669 6c65 203d 206f   baseoutfile = o
+0000d150: 732e 7061 7468 2e73 706c 6974 2875 726c  s.path.split(url
+0000d160: 295b 315d 0a20 2020 2063 6163 6865 6470  )[1].    cachedp
+0000d170: 6174 6820 3d20 5f73 6573 7369 6f6e 2e64  ath = _session.d
+0000d180: 6f77 6e6c 6f61 6465 645f 6669 6c65 732e  ownloaded_files.
+0000d190: 6765 7428 7572 6c29 0a20 2020 2069 6620  get(url).    if 
+0000d1a0: 6361 6368 6564 7061 7468 2069 7320 6e6f  cachedpath is no
+0000d1b0: 7420 4e6f 6e65 2061 6e64 2063 6163 6865  t None and cache
+0000d1c0: 3a0a 2020 2020 2020 2020 5f64 6562 7567  :.        _debug
+0000d1d0: 2822 466f 756e 6420 6669 6c65 2069 6e20  ("Found file in 
+0000d1e0: 7468 6520 6361 6368 652c 206e 6f20 6e65  the cache, no ne
+0000d1f0: 6564 2074 6f20 646f 776e 6c6f 6164 2229  ed to download")
+0000d200: 0a20 2020 2020 2020 2069 6620 6465 7374  .        if dest
+0000d210: 696e 6174 696f 6e5f 666f 6c64 6572 3a0a  ination_folder:.
+0000d220: 2020 2020 2020 2020 2020 2020 6465 7374              dest
+0000d230: 7061 7468 203d 2050 6174 6828 6465 7374  path = Path(dest
+0000d240: 696e 6174 696f 6e5f 666f 6c64 6572 2920  ination_folder) 
+0000d250: 2f20 6261 7365 6f75 7466 696c 650a 2020  / baseoutfile.  
+0000d260: 2020 2020 2020 2020 2020 5f64 6562 7567            _debug
+0000d270: 2866 2243 6f70 7969 6e67 2063 6163 6865  (f"Copying cache
+0000d280: 6420 646f 776e 6c6f 6164 6564 2066 696c  d downloaded fil
+0000d290: 6520 277b 6361 6368 6564 7061 7468 7d27  e '{cachedpath}'
+0000d2a0: 2074 6f20 277b 6465 7374 7061 7468 7d27   to '{destpath}'
+0000d2b0: 2229 0a20 2020 2020 2020 2020 2020 2073  ").            s
+0000d2c0: 6875 7469 6c2e 636f 7079 2863 6163 6865  hutil.copy(cache
+0000d2d0: 6470 6174 682c 2064 6573 7470 6174 6829  dpath, destpath)
+0000d2e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000d2f0: 7572 6e20 6465 7374 7061 7468 0a20 2020  urn destpath.   
+0000d300: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000d310: 2020 2020 2020 2072 6574 7572 6e20 6361         return ca
+0000d320: 6368 6564 7061 7468 0a20 2020 205f 6465  chedpath.    _de
+0000d330: 6275 6728 2244 6f77 6e6c 6f61 6469 6e67  bug("Downloading
+0000d340: 2075 726c 222c 2075 726c 290a 2020 2020   url", url).    
+0000d350: 7472 793a 0a20 2020 2020 2020 2072 6573  try:.        res
+0000d360: 7020 3d20 7265 7175 6573 7473 2e67 6574  p = requests.get
+0000d370: 2875 726c 2c20 7665 7269 6679 3d54 7275  (url, verify=Tru
+0000d380: 652c 2061 6c6c 6f77 5f72 6564 6972 6563  e, allow_redirec
+0000d390: 7473 3d54 7275 6529 0a20 2020 2020 2020  ts=True).       
+0000d3a0: 2063 6f6e 7465 6e74 6469 7370 5f66 696c   contentdisp_fil
+0000d3b0: 656e 616d 6520 3d20 5f66 696c 656e 616d  ename = _filenam
+0000d3c0: 655f 6672 6f6d 5f63 6f6e 7465 6e74 5f64  e_from_content_d
+0000d3d0: 6973 706f 7369 7469 6f6e 2872 6573 702e  isposition(resp.
+0000d3e0: 6865 6164 6572 732e 6765 7428 2763 6f6e  headers.get('con
+0000d3f0: 7465 6e74 2d64 6973 706f 7369 7469 6f6e  tent-disposition
+0000d400: 2729 290a 2020 2020 2020 2020 6966 2063  ')).        if c
+0000d410: 6f6e 7465 6e74 6469 7370 5f66 696c 656e  ontentdisp_filen
+0000d420: 616d 653a 0a20 2020 2020 2020 2020 2020  ame:.           
+0000d430: 2062 6173 656f 7574 6669 6c65 203d 2063   baseoutfile = c
+0000d440: 6f6e 7465 6e74 6469 7370 5f66 696c 656e  ontentdisp_filen
+0000d450: 616d 650a 0a20 2020 2065 7863 6570 7420  ame..    except 
+0000d460: 7265 7175 6573 7473 2e43 6f6e 6e65 6374  requests.Connect
+0000d470: 696f 6e45 7272 6f72 2061 7320 6572 723a  ionError as err:
+0000d480: 0a20 2020 2020 2020 205f 6572 726f 726d  .        _errorm
+0000d490: 7367 2866 2243 6f6e 6e65 6374 696f 6e20  sg(f"Connection 
+0000d4a0: 6572 726f 7220 7768 696c 6520 7472 7969  error while tryi
+0000d4b0: 6e67 2074 6f20 646f 776e 6c6f 6164 2075  ng to download u
+0000d4c0: 726c 3a20 277b 7572 6c7d 2722 290a 2020  rl: '{url}'").  
+0000d4d0: 2020 2020 2020 7261 6973 6520 6572 720a        raise err.
+0000d4e0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+0000d4f0: 7469 6f6e 2061 7320 6572 723a 0a20 2020  tion as err:.   
+0000d500: 2020 2020 205f 6572 726f 726d 7367 2866       _errormsg(f
+0000d510: 2255 6e6b 6e6f 776e 2065 7863 6570 7469  "Unknown excepti
+0000d520: 6f6e 2077 6869 6c65 2074 7279 696e 6720  on while trying 
+0000d530: 746f 2064 6f77 6e6c 6f61 6420 7572 6c3a  to download url:
+0000d540: 2027 7b75 726c 7d27 2229 0a20 2020 2020   '{url}'").     
+0000d550: 2020 2072 6169 7365 2065 7272 0a0a 2020     raise err..  
+0000d560: 2020 6966 206e 6f74 2064 6573 7469 6e61    if not destina
+0000d570: 7469 6f6e 5f66 6f6c 6465 723a 0a20 2020  tion_folder:.   
+0000d580: 2020 2020 2064 6573 7469 6e61 7469 6f6e       destination
+0000d590: 5f66 6f6c 6465 7220 3d20 7465 6d70 6669  _folder = tempfi
+0000d5a0: 6c65 2e67 6574 7465 6d70 6469 7228 290a  le.gettempdir().
+0000d5b0: 2020 2020 6465 7374 7061 7468 203d 2050      destpath = P
+0000d5c0: 6174 6828 6465 7374 696e 6174 696f 6e5f  ath(destination_
+0000d5d0: 666f 6c64 6572 2920 2f20 6261 7365 6f75  folder) / baseou
+0000d5e0: 7466 696c 650a 2020 2020 5f64 6562 7567  tfile.    _debug
+0000d5f0: 2866 2257 7269 7469 6e67 2064 6f77 6e6c  (f"Writing downl
+0000d600: 6f61 6465 6420 636f 6e74 656e 7420 6672  oaded content fr
+0000d610: 6f6d 2075 726c 2027 7b75 726c 7d27 2074  om url '{url}' t
+0000d620: 6f20 6669 6c65 2027 7b64 6573 7470 6174  o file '{destpat
+0000d630: 687d 2722 290a 2020 2020 6f70 656e 2864  h}'").    open(d
+0000d640: 6573 7470 6174 682c 2027 7762 2729 2e77  estpath, 'wb').w
+0000d650: 7269 7465 2872 6573 702e 636f 6e74 656e  rite(resp.conten
+0000d660: 7429 0a20 2020 205f 7365 7373 696f 6e2e  t).    _session.
+0000d670: 646f 776e 6c6f 6164 6564 5f66 696c 6573  downloaded_files
+0000d680: 5b75 726c 5d20 3d20 6465 7374 7061 7468  [url] = destpath
+0000d690: 0a20 2020 2072 6574 7572 6e20 6465 7374  .    return dest
+0000d6a0: 7061 7468 0a0a 0a64 6566 2064 6566 6175  path...def defau
+0000d6b0: 6c74 5f73 7973 7465 6d5f 706c 7567 696e  lt_system_plugin
+0000d6c0: 735f 7061 7468 286d 616a 6f72 3d36 2c20  s_path(major=6, 
+0000d6d0: 6d69 6e6f 723d 3029 202d 3e20 6c69 7374  minor=0) -> list
+0000d6e0: 5b50 6174 685d 3a0a 2020 2020 706c 6174  [Path]:.    plat
+0000d6f0: 666f 726d 203d 205f 7365 7373 696f 6e2e  form = _session.
+0000d700: 706c 6174 666f 726d 0a0a 2020 2020 6966  platform..    if
+0000d710: 2070 6c61 7466 6f72 6d20 3d3d 2027 6c69   platform == 'li
+0000d720: 6e75 7827 3a0a 2020 2020 2020 2020 706f  nux':.        po
+0000d730: 7373 6962 6c65 5f64 6972 7320 3d20 5b66  ssible_dirs = [f
+0000d740: 222f 7573 722f 6c6f 6361 6c2f 6c69 622f  "/usr/local/lib/
+0000d750: 6373 6f75 6e64 2f70 6c75 6769 6e73 3634  csound/plugins64
+0000d760: 2d7b 6d61 6a6f 727d 2e7b 6d69 6e6f 727d  -{major}.{minor}
+0000d770: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+0000d780: 2020 2020 2020 2020 2020 2020 6622 2f75              f"/u
+0000d790: 7372 2f6c 6962 2f63 736f 756e 642f 706c  sr/lib/csound/pl
+0000d7a0: 7567 696e 7336 342d 7b6d 616a 6f72 7d2e  ugins64-{major}.
+0000d7b0: 7b6d 696e 6f72 7d22 2c0a 2020 2020 2020  {minor}",.      
+0000d7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d7d0: 2020 2066 222f 7573 722f 6c69 622f 7838     f"/usr/lib/x8
+0000d7e0: 365f 3634 2d6c 696e 7578 2d67 6e75 2f63  6_64-linux-gnu/c
+0000d7f0: 736f 756e 642f 706c 7567 696e 7336 342d  sound/plugins64-
+0000d800: 7b6d 616a 6f72 7d2e 7b6d 696e 6f72 7d22  {major}.{minor}"
+0000d810: 5d0a 2020 2020 2020 2020 6966 205f 7365  ].        if _se
+0000d820: 7373 696f 6e2e 6172 6368 6974 6563 7475  ssion.architectu
+0000d830: 7265 203d 3d20 2761 726d 3634 273a 0a20  re == 'arm64':. 
+0000d840: 2020 2020 2020 2020 2020 2023 2054 6869             # Thi
+0000d850: 7320 6973 2077 6865 7265 2064 6562 6961  s is where debia
+0000d860: 6e20 696e 2072 6173 7062 6572 7279 2070  n in raspberry p
+0000d870: 6920 696e 7374 616c 6c73 2063 736f 756e  i installs csoun
+0000d880: 6427 7320 706c 7567 696e 730a 2020 2020  d's plugins.    
+0000d890: 2020 2020 2020 2020 2320 6874 7470 733a          # https:
+0000d8a0: 2f2f 7061 636b 6167 6573 2e64 6562 6961  //packages.debia
+0000d8b0: 6e2e 6f72 672f 6275 6c6c 7365 7965 2f61  n.org/bullseye/a
+0000d8c0: 726d 6866 2f6c 6962 6373 6f75 6e64 3634  rmhf/libcsound64
+0000d8d0: 2d36 2e30 2f66 696c 656c 6973 740a 2020  -6.0/filelist.  
+0000d8e0: 2020 2020 2020 2020 2020 706f 7373 6962            possib
+0000d8f0: 6c65 5f64 6972 732e 6170 7065 6e64 2866  le_dirs.append(f
+0000d900: 222f 7573 722f 6c69 622f 6172 6d2d 6c69  "/usr/lib/arm-li
+0000d910: 6e75 782d 676e 7565 6162 6968 662f 6373  nux-gnueabihf/cs
+0000d920: 6f75 6e64 2f70 6c75 6769 6e73 3634 2d7b  ound/plugins64-{
+0000d930: 6d61 6a6f 727d 2e7b 6d69 6e6f 727d 2f22  major}.{minor}/"
+0000d940: 290a 2020 2020 656c 6966 2070 6c61 7466  ).    elif platf
+0000d950: 6f72 6d20 3d3d 2027 6d61 636f 7327 3a0a  orm == 'macos':.
+0000d960: 2020 2020 2020 2020 2320 5468 6520 7061          # The pa
+0000d970: 7468 2062 6173 6564 206f 6e20 7e20 6973  th based on ~ is
+0000d980: 2075 7365 6420 7768 656e 2063 736f 756e   used when csoun
+0000d990: 6420 6973 2063 6f6d 7069 6c65 6420 6672  d is compiled fr
+0000d9a0: 6f6d 2073 6f75 7263 652e 0a20 2020 2020  om source..     
+0000d9b0: 2020 2023 2057 6520 6769 7665 2074 6861     # We give tha
+0000d9c0: 7420 7072 696f 7269 7479 2073 696e 6365  t priority since
+0000d9d0: 2069 6620 6120 7573 6572 2069 7320 646f   if a user is do
+0000d9e0: 696e 6720 7468 6174 2c20 6974 2069 7320  ing that, it is 
+0000d9f0: 7072 6f62 6162 6c79 2073 6f6d 656f 6e65  probably someone
+0000da00: 2077 686f 206b 6e6f 7773 0a20 2020 2020   who knows.     
+0000da10: 2020 2023 2077 6861 7420 7368 6520 6973     # what she is
+0000da20: 2064 6f69 6e67 0a20 2020 2020 2020 204d   doing.        M
+0000da30: 4143 5f43 534f 554e 444c 4942 203d 2027  AC_CSOUNDLIB = '
+0000da40: 4373 6f75 6e64 4c69 6236 3427 0a20 2020  CsoundLib64'.   
+0000da50: 2020 2020 2041 5049 5f56 4552 5349 4f4e       API_VERSION
+0000da60: 203d 2066 277b 6d61 6a6f 727d 2e7b 6d69   = f'{major}.{mi
+0000da70: 6e6f 727d 270a 2020 2020 2020 2020 484f  nor}'.        HO
+0000da80: 4d45 203d 206f 732e 6765 7465 6e76 2822  ME = os.getenv("
+0000da90: 484f 4d45 2229 0a20 2020 2020 2020 2070  HOME").        p
+0000daa0: 6f73 7369 626c 655f 6469 7273 203d 205b  ossible_dirs = [
+0000dab0: 0a20 2020 2020 2020 2020 2020 2066 222f  .            f"/
+0000dac0: 7573 722f 6c6f 6361 6c2f 6f70 742f 6373  usr/local/opt/cs
+0000dad0: 6f75 6e64 2f46 7261 6d65 776f 726b 732f  ound/Frameworks/
+0000dae0: 7b4d 4143 5f43 534f 554e 444c 4942 7d2e  {MAC_CSOUNDLIB}.
+0000daf0: 6672 616d 6577 6f72 6b2f 5665 7273 696f  framework/Versio
+0000db00: 6e73 2f7b 4150 495f 5645 5253 494f 4e7d  ns/{API_VERSION}
+0000db10: 2f52 6573 6f75 7263 6573 2f4f 7063 6f64  /Resources/Opcod
+0000db20: 6573 3634 222c 0a20 2020 2020 2020 2020  es64",.         
+0000db30: 2020 2066 227b 484f 4d45 7d2f 4c69 6272     f"{HOME}/Libr
+0000db40: 6172 792f 4672 616d 6577 6f72 6b73 2f7b  ary/Frameworks/{
+0000db50: 4d41 435f 4353 4f55 4e44 4c49 427d 2e66  MAC_CSOUNDLIB}.f
+0000db60: 7261 6d65 776f 726b 2f56 6572 7369 6f6e  ramework/Version
+0000db70: 732f 7b41 5049 5f56 4552 5349 4f4e 7d2f  s/{API_VERSION}/
+0000db80: 5265 736f 7572 6365 732f 4f70 636f 6465  Resources/Opcode
+0000db90: 7336 3422 2c0a 2020 2020 2020 2020 2020  s64",.          
+0000dba0: 2020 6622 2f4c 6962 7261 7279 2f46 7261    f"/Library/Fra
+0000dbb0: 6d65 776f 726b 732f 7b4d 4143 5f43 534f  meworks/{MAC_CSO
+0000dbc0: 554e 444c 4942 7d2e 6672 616d 6577 6f72  UNDLIB}.framewor
+0000dbd0: 6b2f 5665 7273 696f 6e73 2f7b 4150 495f  k/Versions/{API_
+0000dbe0: 5645 5253 494f 4e7d 2f52 6573 6f75 7263  VERSION}/Resourc
+0000dbf0: 6573 2f4f 7063 6f64 6573 3634 222c 0a20  es/Opcodes64",. 
+0000dc00: 2020 2020 2020 2020 2020 2066 222f 7573             f"/us
+0000dc10: 722f 6c6f 6361 6c2f 6c69 622f 6373 6f75  r/local/lib/csou
+0000dc20: 6e64 2f70 6c75 6769 6e73 3634 2d7b 4150  nd/plugins64-{AP
+0000dc30: 495f 5645 5253 494f 4e7d 222c 0a20 2020  I_VERSION}",.   
+0000dc40: 2020 2020 2020 2020 2066 222f 7573 722f           f"/usr/
+0000dc50: 6c69 622f 6373 6f75 6e64 2f70 6c75 6769  lib/csound/plugi
+0000dc60: 6e73 3634 2d7b 4150 495f 5645 5253 494f  ns64-{API_VERSIO
+0000dc70: 4e7d 220a 2020 2020 2020 2020 5d0a 2020  N}".        ].  
+0000dc80: 2020 656c 6966 2070 6c61 7466 6f72 6d20    elif platform 
+0000dc90: 3d3d 2022 7769 6e64 6f77 7322 3a0a 2020  == "windows":.  
+0000dca0: 2020 2020 2020 706f 7373 6962 6c65 5f64        possible_d
+0000dcb0: 6972 7320 3d20 5b66 2243 3a5c 5c50 726f  irs = [f"C:\\Pro
+0000dcc0: 6772 616d 2046 696c 6573 5c5c 4373 6f75  gram Files\\Csou
+0000dcd0: 6e64 7b6d 616a 6f72 7d5f 7836 345c 5c70  nd{major}_x64\\p
+0000dce0: 6c75 6769 6e73 3634 225d 0a20 2020 2020  lugins64"].     
+0000dcf0: 2020 2070 6174 6820 3d20 6f73 2e67 6574     path = os.get
+0000dd00: 656e 7628 2750 4154 4827 290a 2020 2020  env('PATH').    
+0000dd10: 2020 2020 6966 2070 6174 6820 6973 204e      if path is N
+0000dd20: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0000dd30: 2072 6169 7365 2052 756e 7469 6d65 4572   raise RuntimeEr
+0000dd40: 726f 7228 2243 6f75 6c64 206e 6f74 2064  ror("Could not d
+0000dd50: 6574 6572 6d69 6e65 2074 6865 2076 616c  etermine the val
+0000dd60: 7565 206f 6620 7468 6520 5041 5448 2065  ue of the PATH e
+0000dd70: 6e76 2076 6172 6961 626c 6522 290a 2020  nv variable").  
+0000dd80: 2020 2020 2020 7061 7468 666f 6c64 6572        pathfolder
+0000dd90: 7320 3d20 7061 7468 2e73 706c 6974 286f  s = path.split(o
+0000dda0: 732e 7061 7468 7365 7029 0a20 2020 2020  s.pathsep).     
+0000ddb0: 2020 2070 6f73 7369 626c 655f 6469 7273     possible_dirs
+0000ddc0: 202b 3d20 7061 7468 666f 6c64 6572 730a   += pathfolders.
+0000ddd0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000dde0: 2020 7261 6973 6520 506c 6174 666f 726d    raise Platform
+0000ddf0: 4e6f 7453 7570 706f 7274 6564 4572 726f  NotSupportedErro
+0000de00: 7228 6622 506c 6174 666f 726d 207b 706c  r(f"Platform {pl
+0000de10: 6174 666f 726d 7d20 6e6f 7420 7375 7070  atform} not supp
+0000de20: 6f72 7465 6422 290a 2020 2020 7265 7475  orted").    retu
+0000de30: 726e 205b 5061 7468 2870 292e 6162 736f  rn [Path(p).abso
+0000de40: 6c75 7465 2829 2066 6f72 2070 2069 6e20  lute() for p in 
+0000de50: 706f 7373 6962 6c65 5f64 6972 735d 0a0a  possible_dirs]..
+0000de60: 0a64 6566 2073 7973 7465 6d5f 706c 7567  .def system_plug
+0000de70: 696e 735f 7061 7468 2829 202d 3e20 5061  ins_path() -> Pa
+0000de80: 7468 207c 204e 6f6e 653a 0a20 2020 2022  th | None:.    "
+0000de90: 2222 0a20 2020 2047 6574 2074 6865 2070  "".    Get the p
+0000dea0: 6174 6820 7765 7265 2073 7973 7465 6d20  ath were system 
+0000deb0: 706c 7567 696e 7320 6172 6520 696e 7374  plugins are inst
+0000dec0: 616c 6c65 642e 0a20 2020 2022 2222 0a0a  alled..    """..
+0000ded0: 2020 2020 6966 2028 6f75 7420 3a3d 205f      if (out := _
+0000dee0: 7365 7373 696f 6e2e 6361 6368 652e 6765  session.cache.ge
+0000def0: 7428 2773 7973 7465 6d5f 706c 7567 696e  t('system_plugin
+0000df00: 735f 7061 7468 272c 205f 554e 5345 5429  s_path', _UNSET)
+0000df10: 2920 6973 205f 554e 5345 543a 0a20 2020  ) is _UNSET:.   
+0000df20: 2020 2020 205f 7365 7373 696f 6e2e 6361       _session.ca
+0000df30: 6368 655b 2773 7973 7465 6d5f 706c 7567  che['system_plug
+0000df40: 696e 735f 7061 7468 275d 203d 206f 7574  ins_path'] = out
+0000df50: 203d 205f 7379 7374 656d 5f70 6c75 6769   = _system_plugi
+0000df60: 6e73 5f70 6174 6828 290a 2020 2020 7265  ns_path().    re
+0000df70: 7475 726e 206f 7574 0a0a 0a64 6566 205f  turn out...def _
+0000df80: 7379 7374 656d 5f70 6c75 6769 6e73 5f70  system_plugins_p
+0000df90: 6174 6828 6d61 6a6f 7276 6572 7369 6f6e  ath(majorversion
+0000dfa0: 3d36 2920 2d3e 2050 6174 6820 7c20 4e6f  =6) -> Path | No
+0000dfb0: 6e65 3a0a 2020 2020 2320 6669 7273 7420  ne:.    # first 
+0000dfc0: 6368 6563 6b20 6966 2074 6865 2075 7365  check if the use
+0000dfd0: 7220 6861 7320 7365 7420 4f50 434f 4445  r has set OPCODE
+0000dfe0: 3644 4952 3634 0a20 2020 206f 7063 6f64  6DIR64.    opcod
+0000dff0: 6536 6469 7236 3420 3d20 6f73 2e67 6574  e6dir64 = os.get
+0000e000: 656e 7628 6622 4f50 434f 4445 7b6d 616a  env(f"OPCODE{maj
+0000e010: 6f72 7665 7273 696f 6e7d 4449 5236 3422  orversion}DIR64"
+0000e020: 290a 2020 2020 6966 206f 7063 6f64 6536  ).    if opcode6
+0000e030: 6469 7236 343a 0a20 2020 2020 2020 2070  dir64:.        p
+0000e040: 6f73 7369 626c 655f 7061 7468 7320 3d20  ossible_paths = 
+0000e050: 5b50 6174 6828 7029 2066 6f72 2070 2069  [Path(p) for p i
+0000e060: 6e20 6f70 636f 6465 3664 6972 3634 2e73  n opcode6dir64.s
+0000e070: 706c 6974 285f 6765 745f 7061 7468 5f73  plit(_get_path_s
+0000e080: 6570 6172 6174 6f72 2829 295d 0a20 2020  eparator())].   
+0000e090: 2065 6c73 653a 0a20 2020 2020 2020 2070   else:.        p
+0000e0a0: 6f73 7369 626c 655f 7061 7468 7320 3d20  ossible_paths = 
+0000e0b0: 6465 6661 756c 745f 7379 7374 656d 5f70  default_system_p
+0000e0c0: 6c75 6769 6e73 5f70 6174 6828 290a 0a20  lugins_path().. 
+0000e0d0: 2020 206f 7574 203d 205f 6669 6e64 5f73     out = _find_s
+0000e0e0: 7973 7465 6d5f 706c 7567 696e 735f 7061  ystem_plugins_pa
+0000e0f0: 7468 2870 6f73 7369 626c 655f 7061 7468  th(possible_path
+0000e100: 7329 0a20 2020 2069 6620 6e6f 7420 6f75  s).    if not ou
+0000e110: 743a 0a20 2020 2020 2020 205f 696e 666f  t:.        _info
+0000e120: 2866 2253 7973 7465 6d20 706c 7567 696e  (f"System plugin
+0000e130: 7320 7061 7468 206e 6f74 2066 6f75 6e64  s path not found
+0000e140: 2e20 5365 6172 6368 6564 2070 6174 6873  . Searched paths
+0000e150: 3a20 7b70 6f73 7369 626c 655f 7061 7468  : {possible_path
+0000e160: 737d 2229 0a20 2020 2020 2020 2072 6574  s}").        ret
+0000e170: 7572 6e20 4e6f 6e65 0a20 2020 2061 7373  urn None.    ass
+0000e180: 6572 7420 6f75 742e 6578 6973 7473 2829  ert out.exists()
+0000e190: 2061 6e64 206f 7574 2e69 735f 6469 7228   and out.is_dir(
+0000e1a0: 2920 616e 6420 6f75 742e 6973 5f61 6273  ) and out.is_abs
+0000e1b0: 6f6c 7574 6528 290a 2020 2020 7265 7475  olute().    retu
+0000e1c0: 726e 206f 7574 0a0a 0a64 6566 2075 7365  rn out...def use
+0000e1d0: 725f 696e 7374 616c 6c65 645f 646c 6c73  r_installed_dlls
+0000e1e0: 286d 616a 6f72 7665 7273 696f 6e3d 3629  (majorversion=6)
+0000e1f0: 202d 3e20 6c69 7374 5b50 6174 685d 3a0a   -> list[Path]:.
+0000e200: 2020 2020 2222 220a 2020 2020 5265 7475      """.    Retu
+0000e210: 726e 2061 206c 6973 7420 6f66 2070 6c75  rn a list of plu
+0000e220: 6769 6e73 2069 6e73 7461 6c6c 6564 2061  gins installed a
+0000e230: 7420 7468 6520 7573 6572 2070 6c75 6769  t the user plugi
+0000e240: 6e20 7061 7468 2e0a 2020 2020 2222 220a  n path..    """.
+0000e250: 2020 2020 6966 2028 6f75 7420 3a3d 205f      if (out := _
+0000e260: 7365 7373 696f 6e2e 6361 6368 652e 6765  session.cache.ge
+0000e270: 7428 2775 7365 725f 696e 7374 616c 6c65  t('user_installe
+0000e280: 645f 646c 6c73 272c 205f 554e 5345 5429  d_dlls', _UNSET)
+0000e290: 2920 6973 205f 554e 5345 543a 0a20 2020  ) is _UNSET:.   
+0000e2a0: 2020 2020 2070 6174 6820 3d20 7573 6572       path = user
+0000e2b0: 5f70 6c75 6769 6e73 5f70 6174 6828 6d61  _plugins_path(ma
+0000e2c0: 6a6f 7276 6572 7369 6f6e 3d6d 616a 6f72  jorversion=major
+0000e2d0: 7665 7273 696f 6e29 0a20 2020 2020 2020  version).       
+0000e2e0: 206f 7574 203d 206c 6973 7428 7061 7468   out = list(path
+0000e2f0: 2e67 6c6f 6228 222a 2220 2b20 5f70 6c75  .glob("*" + _plu
+0000e300: 6769 6e5f 6578 7465 6e73 696f 6e28 2929  gin_extension())
+0000e310: 2920 6966 2070 6174 6820 616e 6420 7061  ) if path and pa
+0000e320: 7468 2e65 7869 7374 7328 2920 656c 7365  th.exists() else
+0000e330: 205b 5d0a 2020 2020 2020 2020 5f73 6573   [].        _ses
+0000e340: 7369 6f6e 2e63 6163 6865 5b27 7573 6572  sion.cache['user
+0000e350: 5f69 6e73 7461 6c6c 6564 5f64 6c6c 7327  _installed_dlls'
+0000e360: 5d20 3d20 6f75 740a 2020 2020 7265 7475  ] = out.    retu
+0000e370: 726e 206f 7574 0a0a 0a64 6566 2073 7973  rn out...def sys
+0000e380: 7465 6d5f 696e 7374 616c 6c65 645f 646c  tem_installed_dl
+0000e390: 6c73 2829 202d 3e20 6c69 7374 5b50 6174  ls() -> list[Pat
+0000e3a0: 685d 3a0a 2020 2020 2222 220a 2020 2020  h]:.    """.    
+0000e3b0: 4c49 7374 206f 6620 706c 7567 696e 7320  LIst of plugins 
+0000e3c0: 696e 7374 616c 6c65 6420 6174 2074 6865  installed at the
+0000e3d0: 2073 7973 7465 6d27 7320 7061 7468 0a20   system's path. 
+0000e3e0: 2020 2022 2222 0a20 2020 2069 6620 286f     """.    if (o
+0000e3f0: 7574 203a 3d20 5f73 6573 7369 6f6e 2e63  ut := _session.c
+0000e400: 6163 6865 2e67 6574 2827 7379 7374 656d  ache.get('system
+0000e410: 5f69 6e73 7461 6c6c 6564 5f64 6c6c 7327  _installed_dlls'
+0000e420: 2929 2069 7320 4e6f 6e65 3a0a 2020 2020  )) is None:.    
+0000e430: 2020 2020 7061 7468 203d 2073 7973 7465      path = syste
+0000e440: 6d5f 706c 7567 696e 735f 7061 7468 2829  m_plugins_path()
+0000e450: 0a20 2020 2020 2020 206f 7574 203d 206c  .        out = l
+0000e460: 6973 7428 7061 7468 2e67 6c6f 6228 222a  ist(path.glob("*
+0000e470: 2220 2b20 5f70 6c75 6769 6e5f 6578 7465  " + _plugin_exte
+0000e480: 6e73 696f 6e28 2929 2920 6966 2070 6174  nsion())) if pat
+0000e490: 6820 616e 6420 7061 7468 2e65 7869 7374  h and path.exist
+0000e4a0: 7328 2920 656c 7365 205b 5d0a 2020 2020  s() else [].    
+0000e4b0: 2020 2020 5f73 6573 7369 6f6e 2e63 6163      _session.cac
+0000e4c0: 6865 5b27 7379 7374 656d 5f69 6e73 7461  he['system_insta
+0000e4d0: 6c6c 6564 5f64 6c6c 7327 5d20 3d20 6f75  lled_dlls'] = ou
+0000e4e0: 740a 2020 2020 7265 7475 726e 206f 7574  t.    return out
+0000e4f0: 0a0a 0a63 6c61 7373 204d 6169 6e49 6e64  ...class MainInd
+0000e500: 6578 3a0a 2020 2020 2222 220a 2020 2020  ex:.    """.    
+0000e510: 5468 6973 2063 6c61 7373 2068 6f6c 6473  This class holds
+0000e520: 2072 6973 7365 7427 7320 6d61 696e 2069   risset's main i
+0000e530: 6e64 6578 0a20 2020 2022 2222 0a20 2020  ndex.    """.   
+0000e540: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+0000e550: 6c66 2c0a 2020 2020 2020 2020 2020 2020  lf,.            
+0000e560: 2020 2020 2064 6174 6172 6570 6f3a 2050       datarepo: P
+0000e570: 6174 6820 7c20 4e6f 6e65 203d 204e 6f6e  ath | None = Non
+0000e580: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+0000e590: 2020 2020 7570 6461 7465 3d46 616c 7365      update=False
+0000e5a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000e5b0: 2020 206d 616a 6f72 7665 7273 696f 6e3a     majorversion:
+0000e5c0: 2069 6e74 207c 204e 6f6e 6520 3d20 4e6f   int | None = No
+0000e5d0: 6e65 293a 0a20 2020 2020 2020 2022 2222  ne):.        """
+0000e5e0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+0000e5f0: 2020 2020 2020 2020 2020 2064 6174 6172             datar
+0000e600: 6570 6f3a 2074 6865 206c 6f63 616c 2070  epo: the local p
+0000e610: 6174 6820 746f 2063 6c6f 6e65 2074 6865  ath to clone the
+0000e620: 2067 6974 206d 6169 6e20 696e 6465 7820   git main index 
+0000e630: 7265 706f 7369 746f 7279 2074 6f0a 2020  repository to.  
+0000e640: 2020 2020 2020 2020 2020 7570 6461 7465            update
+0000e650: 3a20 6966 2054 7275 652c 2075 7064 6174  : if True, updat
+0000e660: 6520 696e 6465 7820 7072 696f 7220 746f  e index prior to
+0000e670: 2070 6172 7369 6e67 0a20 2020 2020 2020   parsing.       
+0000e680: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
+0000e690: 6d61 6a6f 7276 6572 7369 6f6e 2069 7320  majorversion is 
+0000e6a0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0000e6b0: 2020 2320 6d61 6a6f 722c 206d 696e 6f72    # major, minor
+0000e6c0: 203d 205f 6373 6f75 6e64 5f76 6572 7369   = _csound_versi
+0000e6d0: 6f6e 2829 0a20 2020 2020 2020 2020 2020  on().           
+0000e6e0: 206d 616a 6f72 2c20 6d69 6e6f 7220 3d20   major, minor = 
+0000e6f0: 5f63 736f 756e 646c 6962 5f76 6572 7369  _csoundlib_versi
+0000e700: 6f6e 2829 0a20 2020 2020 2020 2020 2020  on().           
+0000e710: 2069 6620 6e6f 7420 286d 616a 6f72 203d   if not (major =
+0000e720: 3d20 3620 6f72 206d 616a 6f72 203d 3d20  = 6 or major == 
+0000e730: 3729 3a0a 2020 2020 2020 2020 2020 2020  7):.            
+0000e740: 2020 2020 7261 6973 6520 5275 6e74 696d      raise Runtim
+0000e750: 6545 7272 6f72 2866 2243 736f 756e 6420  eError(f"Csound 
+0000e760: 7665 7273 696f 6e20 7b6d 616a 6f72 7d2e  version {major}.
+0000e770: 7b6d 696e 6f72 7d20 6e6f 7420 7375 7070  {minor} not supp
+0000e780: 6f72 7465 6422 290a 2020 2020 2020 2020  orted").        
+0000e790: 2020 2020 6d61 6a6f 7276 6572 7369 6f6e      majorversion
+0000e7a0: 203d 206d 616a 6f72 0a0a 2020 2020 2020   = major..      
+0000e7b0: 2020 6966 2064 6174 6172 6570 6f20 6973    if datarepo is
+0000e7c0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000e7d0: 2020 2064 6174 6172 6570 6f20 3d20 5249     datarepo = RI
+0000e7e0: 5353 4554 5f52 4f4f 5420 2f20 2772 6973  SSET_ROOT / 'ris
+0000e7f0: 7365 742d 6461 7461 270a 2020 2020 2020  set-data'.      
+0000e800: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000e810: 2020 2020 6173 7365 7274 2069 7369 6e73      assert isins
+0000e820: 7461 6e63 6528 6461 7461 7265 706f 2c20  tance(datarepo, 
+0000e830: 5061 7468 290a 2020 2020 2020 2020 7365  Path).        se
+0000e840: 6c66 2e69 6e64 6578 6669 6c65 203d 2064  lf.indexfile = d
+0000e850: 6174 6172 6570 6f20 2f20 2272 6973 7365  atarepo / "risse
+0000e860: 7469 6e64 6578 2e6a 736f 6e22 0a20 2020  tindex.json".   
+0000e870: 2020 2020 2069 6620 6e6f 7420 6461 7461       if not data
+0000e880: 7265 706f 2e65 7869 7374 7328 293a 0a20  repo.exists():. 
+0000e890: 2020 2020 2020 2020 2020 2075 7064 6174             updat
+0000e8a0: 6569 6e64 6578 203d 2046 616c 7365 0a20  eindex = False. 
+0000e8b0: 2020 2020 2020 2020 2020 205f 6769 745f             _git_
+0000e8c0: 636c 6f6e 655f 696e 746f 2849 4e44 4558  clone_into(INDEX
+0000e8d0: 5f47 4954 5f52 4550 4f53 4954 4f52 592c  _GIT_REPOSITORY,
+0000e8e0: 2064 6174 6172 6570 6f2c 2064 6570 7468   datarepo, depth
+0000e8f0: 3d31 290a 2020 2020 2020 2020 656c 7365  =1).        else
+0000e900: 3a0a 2020 2020 2020 2020 2020 2020 7570  :.            up
+0000e910: 6461 7465 696e 6465 7820 3d20 7570 6461  dateindex = upda
+0000e920: 7465 0a20 2020 2020 2020 2061 7373 6572  te.        asser
+0000e930: 7420 6461 7461 7265 706f 2e65 7869 7374  t datarepo.exist
+0000e940: 7328 290a 2020 2020 2020 2020 6173 7365  s().        asse
+0000e950: 7274 205f 6973 5f67 6974 5f72 6570 6f28  rt _is_git_repo(
+0000e960: 6461 7461 7265 706f 290a 2020 2020 2020  datarepo).      
+0000e970: 2020 6173 7365 7274 2073 656c 662e 696e    assert self.in
+0000e980: 6465 7866 696c 652e 6578 6973 7473 2829  dexfile.exists()
+0000e990: 2c20 6622 4d61 696e 2069 6e64 6578 2066  , f"Main index f
+0000e9a0: 696c 6520 6e6f 7420 666f 756e 642c 2073  ile not found, s
+0000e9b0: 6561 7263 6865 643a 207b 7365 6c66 2e69  earched: {self.i
+0000e9c0: 6e64 6578 6669 6c65 7d22 0a0a 2020 2020  ndexfile}"..    
+0000e9d0: 2020 2020 7365 6c66 2e64 6174 6172 6570      self.datarep
+0000e9e0: 6f3a 2050 6174 6820 3d20 6461 7461 7265  o: Path = datare
+0000e9f0: 706f 0a0a 2020 2020 2020 2020 7365 6c66  po..        self
+0000ea00: 2e6d 616a 6f72 7665 7273 696f 6e3a 2069  .majorversion: i
+0000ea10: 6e74 203d 206d 616a 6f72 7665 7273 696f  nt = majorversio
+0000ea20: 6e0a 0a20 2020 2020 2020 2073 656c 662e  n..        self.
+0000ea30: 706c 7567 696e 736f 7572 6365 733a 2064  pluginsources: d
+0000ea40: 6963 745b 7374 722c 2049 6e64 6578 4974  ict[str, IndexIt
+0000ea50: 656d 5d20 3d20 7b7d 0a20 2020 2020 2020  em] = {}.       
+0000ea60: 2073 656c 662e 706c 7567 696e 733a 2064   self.plugins: d
+0000ea70: 6963 745b 7374 722c 2050 6c75 6769 6e5d  ict[str, Plugin]
+0000ea80: 203d 207b 7d0a 2020 2020 2020 2020 7365   = {}.        se
+0000ea90: 6c66 2e5f 6361 6368 653a 2064 6963 745b  lf._cache: dict[
+0000eaa0: 7374 722c 2041 6e79 5d20 3d20 7b7d 0a20  str, Any] = {}. 
+0000eab0: 2020 2020 2020 2073 656c 662e 5f70 6172         self._par
+0000eac0: 7365 5f69 6e64 6578 2875 7064 6174 6569  se_index(updatei
+0000ead0: 6e64 6578 3d75 7064 6174 6569 6e64 6578  ndex=updateindex
+0000eae0: 2c20 7570 6461 7465 706c 7567 696e 733d  , updateplugins=
+0000eaf0: 7570 6461 7465 2c20 7374 6f70 5f6f 6e5f  update, stop_on_
+0000eb00: 6572 726f 7273 3d46 616c 7365 290a 2020  errors=False).  
+0000eb10: 2020 2020 2020 7365 6c66 2e75 7365 725f        self.user_
+0000eb20: 706c 7567 696e 735f 7061 7468 203d 2075  plugins_path = u
+0000eb30: 7365 725f 706c 7567 696e 735f 7061 7468  ser_plugins_path
+0000eb40: 286d 616a 6f72 7665 7273 696f 6e3d 7365  (majorversion=se
+0000eb50: 6c66 2e6d 616a 6f72 7665 7273 696f 6e29  lf.majorversion)
+0000eb60: 0a20 2020 2020 2020 2069 6620 7570 6461  .        if upda
+0000eb70: 7465 3a0a 2020 2020 2020 2020 2020 2020  te:.            
+0000eb80: 7365 6c66 2e73 6572 6961 6c69 7a65 2829  self.serialize()
+0000eb90: 0a0a 2020 2020 6465 6620 5f70 6172 7365  ..    def _parse
+0000eba0: 5f69 6e64 6578 2873 656c 662c 2075 7064  _index(self, upd
+0000ebb0: 6174 6569 6e64 6578 3d46 616c 7365 2c20  ateindex=False, 
+0000ebc0: 7570 6461 7465 706c 7567 696e 733d 4661  updateplugins=Fa
+0000ebd0: 6c73 652c 2073 746f 705f 6f6e 5f65 7272  lse, stop_on_err
+0000ebe0: 6f72 733d 5472 7565 2920 2d3e 204e 6f6e  ors=True) -> Non
+0000ebf0: 653a 0a20 2020 2020 2020 2022 2222 0a20  e:.        """. 
+0000ec00: 2020 2020 2020 2050 6172 7365 2074 6865         Parse the
+0000ec10: 206d 6169 6e20 696e 6465 7820 616e 6420   main index and 
+0000ec20: 6561 6368 2065 6e74 6974 7920 6465 6669  each entity defi
+0000ec30: 6e65 6420 7769 7468 696e 2069 740a 0a20  ned within it.. 
+0000ec40: 2020 2020 2020 2049 6620 7468 6572 6520         If there 
+0000ec50: 6172 6520 6572 726f 7273 2066 6f72 2061  are errors for a
+0000ec60: 2070 6c75 6769 6e20 6465 6669 6e69 7469   plugin definiti
+0000ec70: 6f6e 2c20 7468 6973 2070 6c75 6769 6e20  on, this plugin 
+0000ec80: 6973 2073 6b69 7070 6564 2061 6e64 2061  is skipped and a
+0000ec90: 6e0a 2020 2020 2020 2020 6572 726f 7220  n.        error 
+0000eca0: 6d65 7373 6167 6520 6973 2070 7269 6e74  message is print
+0000ecb0: 6564 2c20 756e 6c65 7373 2066 6169 6c5f  ed, unless fail_
+0000ecc0: 6966 5f65 7272 6f72 2069 7320 5472 7565  if_error is True
+0000ecd0: 2c20 696e 2077 6869 6368 2063 6173 6520  , in which case 
+0000ece0: 7468 650a 2020 2020 2020 2020 7768 6f6c  the.        whol
+0000ecf0: 6520 6f70 6572 6174 696f 6e20 6973 2063  e operation is c
+0000ed00: 616e 6365 6c6c 6564 0a20 2020 2020 2020  ancelled.       
+0000ed10: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
+0000ed20: 662e 706c 7567 696e 732e 636c 6561 7228  f.plugins.clear(
+0000ed30: 290a 2020 2020 2020 2020 7365 6c66 2e70  ).        self.p
+0000ed40: 6c75 6769 6e73 6f75 7263 6573 2e63 6c65  luginsources.cle
+0000ed50: 6172 2829 0a20 2020 2020 2020 2073 656c  ar().        sel
+0000ed60: 662e 5f63 6163 6865 2e63 6c65 6172 2829  f._cache.clear()
+0000ed70: 0a20 2020 2020 2020 2069 6620 7570 6461  .        if upda
+0000ed80: 7465 696e 6465 783a 0a20 2020 2020 2020  teindex:.       
+0000ed90: 2020 2020 205f 6769 745f 7570 6461 7465       _git_update
+0000eda0: 2873 656c 662e 6461 7461 7265 706f 290a  (self.datarepo).
+0000edb0: 0a20 2020 2020 2020 2069 6e64 6578 7374  .        indexst
+0000edc0: 7220 3d20 6f70 656e 2873 656c 662e 696e  r = open(self.in
+0000edd0: 6465 7866 696c 6529 2e72 6561 6428 290a  dexfile).read().
+0000ede0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+0000edf0: 2020 2020 2020 2020 2064 203d 206a 736f           d = jso
+0000ee00: 6e2e 6c6f 6164 7328 696e 6465 7873 7472  n.loads(indexstr
+0000ee10: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
+0000ee20: 206a 736f 6e2e 4a53 4f4e 4465 636f 6465   json.JSONDecode
+0000ee30: 4572 726f 7220 6173 2065 7272 3a0a 2020  Error as err:.  
+0000ee40: 2020 2020 2020 2020 2020 5f65 7272 6f72            _error
+0000ee50: 6d73 6728 6622 4572 726f 7220 7768 696c  msg(f"Error whil
+0000ee60: 6520 7061 7273 696e 6720 6a73 6f6e 2069  e parsing json i
+0000ee70: 6e64 6578 2066 696c 6520 7b73 656c 662e  ndex file {self.
+0000ee80: 696e 6465 7866 696c 657d 2229 0a20 2020  indexfile}").   
+0000ee90: 2020 2020 2020 2020 205f 7072 696e 745f           _print_
+0000eea0: 7769 7468 5f6c 696e 655f 6e75 6d62 6572  with_line_number
+0000eeb0: 7328 696e 6465 7873 7472 290a 2020 2020  s(indexstr).    
+0000eec0: 2020 2020 2020 2020 7261 6973 6520 5275          raise Ru
+0000eed0: 6e74 696d 6545 7272 6f72 2866 2243 6f75  ntimeError(f"Cou
+0000eee0: 6c64 206e 6f74 2070 6172 7365 2069 6e64  ld not parse ind
+0000eef0: 6578 2066 696c 653a 207b 6572 727d 2229  ex file: {err}")
+0000ef00: 0a0a 2020 2020 2020 2020 7365 6c66 2e76  ..        self.v
+0000ef10: 6572 7369 6f6e 203d 2064 2e67 6574 2827  ersion = d.get('
+0000ef20: 7665 7273 696f 6e27 2c20 2727 290a 2020  version', '').  
+0000ef30: 2020 2020 2020 706c 7567 696e 733a 2064        plugins: d
+0000ef40: 6963 745b 7374 722c 2050 6c75 6769 6e5d  ict[str, Plugin]
+0000ef50: 203d 2064 2e67 6574 2827 706c 7567 696e   = d.get('plugin
+0000ef60: 7327 2c20 7b7d 290a 2020 2020 2020 2020  s', {}).        
+0000ef70: 7570 6461 7465 643a 2073 6574 5b50 6174  updated: set[Pat
+0000ef80: 685d 203d 2073 6574 2829 0a0a 2020 2020  h] = set()..    
+0000ef90: 2020 2020 666f 7220 6e61 6d65 2c20 706c      for name, pl
+0000efa0: 7567 696e 6465 6620 696e 2070 6c75 6769  ugindef in plugi
+0000efb0: 6e73 2e69 7465 6d73 2829 3a0a 2020 2020  ns.items():.    
+0000efc0: 2020 2020 2020 2020 6173 7365 7274 2069          assert i
+0000efd0: 7369 6e73 7461 6e63 6528 6e61 6d65 2c20  sinstance(name, 
+0000efe0: 7374 7229 0a20 2020 2020 2020 2020 2020  str).           
+0000eff0: 2061 7373 6572 7420 6973 696e 7374 616e   assert isinstan
+0000f000: 6365 2870 6c75 6769 6e64 6566 2c20 6469  ce(plugindef, di
+0000f010: 6374 290a 2020 2020 2020 2020 2020 2020  ct).            
+0000f020: 7572 6c20 3d20 706c 7567 696e 6465 662e  url = plugindef.
+0000f030: 6765 7428 2775 726c 2729 0a20 2020 2020  get('url').     
+0000f040: 2020 2020 2020 2069 6620 6e6f 7420 7572         if not ur
+0000f050: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
+0000f060: 2020 205f 6572 726f 726d 7367 2866 2249     _errormsg(f"I
+0000f070: 6e76 616c 6964 2070 6c75 6769 6e20 736f  nvalid plugin so
+0000f080: 7572 6365 2064 6566 696e 6974 696f 6e20  urce definition 
+0000f090: 666f 7220 706c 7567 696e 207b 6e61 6d65  for plugin {name
+0000f0a0: 7d3a 207b 706c 7567 696e 6465 667d 2229  }: {plugindef}")
+0000f0b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f0c0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
+0000f0d0: 7228 6622 4572 726f 7220 7768 696c 6520  r(f"Error while 
+0000f0e0: 7061 7273 696e 6720 7468 6520 7269 7373  parsing the riss
+0000f0f0: 6574 2069 6e64 6578 2e20 220a 2020 2020  et index. ".    
+0000f100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f110: 2020 2020 2020 2020 2020 2020 2066 2250               f"P
+0000f120: 6c75 6769 6e20 7b6e 616d 657d 2064 6f65  lugin {name} doe
+0000f130: 7320 6e6f 7420 6465 6669 6e65 2061 2075  s not define a u
+0000f140: 726c 2229 0a20 2020 2020 2020 2020 2020  rl").           
+0000f150: 2061 7373 6572 7420 5f69 735f 6769 745f   assert _is_git_
+0000f160: 7572 6c28 7572 6c29 2c20 6622 7572 6c20  url(url), f"url 
+0000f170: 666f 7220 706c 7567 696e 207b 6e61 6d65  for plugin {name
+0000f180: 7d20 6973 206e 6f74 2061 2067 6974 2072  } is not a git r
+0000f190: 6570 6f73 6974 6f72 793a 207b 7572 6c7d  epository: {url}
+0000f1a0: 220a 2020 2020 2020 2020 2020 2020 7061  ".            pa
+0000f1b0: 7468 203d 2070 6c75 6769 6e64 6566 2e67  th = plugindef.g
+0000f1c0: 6574 2827 7061 7468 272c 2027 2729 0a20  et('path', ''). 
+0000f1d0: 2020 2020 2020 2020 2020 2070 6c75 6769             plugi
+0000f1e0: 6e73 6f75 7263 6520 3d20 496e 6465 7849  nsource = IndexI
+0000f1f0: 7465 6d28 6e61 6d65 3d6e 616d 652c 2075  tem(name=name, u
+0000f200: 726c 3d75 726c 2c20 7061 7468 3d70 6174  rl=url, path=pat
+0000f210: 6829 0a20 2020 2020 2020 2020 2020 2070  h).            p
+0000f220: 6c75 6769 6e70 6174 6820 3d20 5f67 6974  luginpath = _git
+0000f230: 5f6c 6f63 616c 5f70 6174 6828 7572 6c29  _local_path(url)
+0000f240: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
+0000f250: 6572 7420 706c 7567 696e 7061 7468 2e65  ert pluginpath.e
+0000f260: 7869 7374 7328 290a 2020 2020 2020 2020  xists().        
+0000f270: 2020 2020 6966 2075 7064 6174 6570 6c75      if updateplu
+0000f280: 6769 6e73 2061 6e64 2070 6c75 6769 6e70  gins and pluginp
+0000f290: 6174 6820 6e6f 7420 696e 2075 7064 6174  ath not in updat
+0000f2a0: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
+0000f2b0: 2020 2020 5f67 6974 5f75 7064 6174 6528      _git_update(
+0000f2c0: 706c 7567 696e 7061 7468 290a 2020 2020  pluginpath).    
+0000f2d0: 2020 2020 2020 2020 2020 2020 7570 6461              upda
+0000f2e0: 7465 642e 6164 6428 706c 7567 696e 7061  ted.add(pluginpa
+0000f2f0: 7468 290a 0a20 2020 2020 2020 2020 2020  th)..           
+0000f300: 2073 656c 662e 706c 7567 696e 736f 7572   self.pluginsour
+0000f310: 6365 735b 6e61 6d65 5d20 3d20 706c 7567  ces[name] = plug
+0000f320: 696e 736f 7572 6365 0a0a 2020 2020 2020  insource..      
+0000f330: 2020 6966 2073 656c 662e 706c 7567 696e    if self.plugin
+0000f340: 736f 7572 6365 733a 0a20 2020 2020 2020  sources:.       
+0000f350: 2020 2020 2066 6f72 206e 616d 652c 2070       for name, p
+0000f360: 6c75 6769 6e73 6f75 7263 6520 696e 2073  luginsource in s
+0000f370: 656c 662e 706c 7567 696e 736f 7572 6365  elf.pluginsource
+0000f380: 732e 6974 656d 7328 293a 0a20 2020 2020  s.items():.     
+0000f390: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+0000f3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f3b0: 2020 2020 5f64 6562 7567 2866 2250 6172      _debug(f"Par
+0000f3c0: 7369 6e67 2070 6c75 6769 6e20 6465 6669  sing plugin defi
+0000f3d0: 6e69 7469 6f6e 2066 6f72 207b 6e61 6d65  nition for {name
+0000f3e0: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
+0000f3f0: 2020 2020 2020 2020 706c 7567 696e 203d          plugin =
+0000f400: 2073 656c 662e 5f70 6172 7365 5f70 6c75   self._parse_plu
+0000f410: 6769 6e28 6e61 6d65 290a 2020 2020 2020  gin(name).      
+0000f420: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000f430: 6c66 2e70 6c75 6769 6e73 5b6e 616d 655d  lf.plugins[name]
+0000f440: 203d 2070 6c75 6769 6e0a 2020 2020 2020   = plugin.      
+0000f450: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0000f460: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+0000f470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f480: 2020 2020 2069 6620 7374 6f70 5f6f 6e5f       if stop_on_
+0000f490: 6572 726f 7273 3a0a 2020 2020 2020 2020  errors:.        
+0000f4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f4b0: 7261 6973 6520 650a 2020 2020 2020 2020  raise e.        
+0000f4c0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000f4d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000f4e0: 2020 2020 2020 2020 2020 5f65 7272 6f72            _error
+0000f4f0: 6d73 6728 6622 4572 726f 7220 7768 696c  msg(f"Error whil
+0000f500: 6520 7061 7273 696e 6720 706c 7567 696e  e parsing plugin
+0000f510: 2064 6566 696e 6974 696f 6e20 666f 7220   definition for 
+0000f520: 277b 6e61 6d65 7d27 3a20 7b65 7d22 290a  '{name}': {e}").
+0000f530: 0a20 2020 2064 6566 2075 7064 6174 6528  .    def update(
+0000f540: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+0000f550: 2222 0a20 2020 2020 2020 2055 7064 6174  "".        Updat
+0000f560: 6520 616c 6c20 736f 7572 6365 7320 616e  e all sources an
+0000f570: 6420 7265 7265 6164 2074 6865 2069 6e64  d reread the ind
+0000f580: 6578 0a20 2020 2020 2020 2022 2222 0a20  ex.        """. 
+0000f590: 2020 2020 2020 2073 656c 662e 5f70 6172         self._par
+0000f5a0: 7365 5f69 6e64 6578 2875 7064 6174 6569  se_index(updatei
+0000f5b0: 6e64 6578 3d54 7275 652c 2075 7064 6174  ndex=True, updat
+0000f5c0: 6570 6c75 6769 6e73 3d54 7275 652c 2073  eplugins=True, s
+0000f5d0: 746f 705f 6f6e 5f65 7272 6f72 733d 5f73  top_on_errors=_s
+0000f5e0: 6573 7369 6f6e 2e73 746f 705f 6f6e 5f65  ession.stop_on_e
+0000f5f0: 7272 6f72 7329 0a20 2020 2020 2020 2073  rrors).        s
+0000f600: 656c 662e 7365 7269 616c 697a 6528 290a  elf.serialize().
+0000f610: 0a20 2020 2064 6566 2062 7569 6c64 5f64  .    def build_d
+0000f620: 6f63 756d 656e 7461 7469 6f6e 2873 656c  ocumentation(sel
+0000f630: 662c 0a20 2020 2020 2020 2020 2020 2020  f,.             
+0000f640: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+0000f650: 6573 743a 2050 6174 6820 7c20 4e6f 6e65  est: Path | None
+0000f660: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+0000f670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f680: 2020 2020 2062 7569 6c64 6874 6d6c 3d54       buildhtml=T
+0000f690: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
+0000f6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f6b0: 206f 6e6c 7969 6e73 7461 6c6c 6564 3d46   onlyinstalled=F
+0000f6c0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+0000f6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f6e0: 2029 202d 3e20 5061 7468 3a0a 2020 2020   ) -> Path:.    
+0000f6f0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+0000f700: 4275 696c 6420 7468 6520 646f 6375 6d65  Build the docume
+0000f710: 6e74 6174 696f 6e20 666f 7220 7468 6520  ntation for the 
+0000f720: 706c 7567 696e 7320 696e 6465 7865 640a  plugins indexed.
+0000f730: 0a20 2020 2020 2020 2041 7267 756d 656e  .        Argumen
+0000f740: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+0000f750: 6465 7374 3a20 7468 6520 6465 7374 696e  dest: the destin
+0000f760: 6174 696f 6e20 666f 6c64 6572 2e20 4966  ation folder. If
+0000f770: 206e 6f74 2067 6976 656e 2c20 6974 2069   not given, it i
+0000f780: 7320 7772 6974 7465 6e20 746f 2052 4953  s written to RIS
+0000f790: 5345 545f 524f 4f54 2f6d 616e 2028 7365  SET_ROOT/man (se
+0000f7a0: 6520 6265 6c6f 7729 0a20 2020 2020 2020  e below).       
+0000f7b0: 2020 2020 2062 7569 6c64 6874 6d6c 3a20       buildhtml: 
+0000f7c0: 6966 2054 7275 652c 2062 7569 6c64 2074  if True, build t
+0000f7d0: 6865 2068 746d 6c20 6d61 6e75 616c 2066  he html manual f
+0000f7e0: 726f 6d20 7468 6520 6769 7665 6e20 6d61  rom the given ma
+0000f7f0: 726b 646f 776e 2064 6f63 730a 2020 2020  rkdown docs.    
+0000f800: 2020 2020 2020 2020 6f6e 6c79 696e 7374          onlyinst
+0000f810: 616c 6c65 643a 2069 6620 5472 7565 2c20  alled: if True, 
+0000f820: 6f6e 6c79 2074 6865 2064 6f63 756d 656e  only the documen
+0000f830: 7461 7469 6f6e 2066 6f72 2074 6865 2070  tation for the p
+0000f840: 6c75 6769 6e73 2f6f 7063 6f64 6573 2061  lugins/opcodes a
+0000f850: 6374 7561 6c6c 7920 696e 7374 616c 6c65  ctually installe
+0000f860: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
+0000f870: 2020 6973 2067 656e 6572 6174 6564 0a0a    is generated..
+0000f880: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+0000f890: 0a20 2020 2020 2020 2020 2020 2074 6865  .            the
+0000f8a0: 2070 6174 6820 7768 6572 6520 7468 6520   path where the 
+0000f8b0: 646f 6375 6d65 6e74 6174 696f 6e20 7761  documentation wa
+0000f8c0: 7320 706c 6163 6564 0a0a 2020 2020 2020  s placed..      
+0000f8d0: 2020 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 2020    ===========   
+0000f8e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000f8f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000f900: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 2020 2020  ===========.    
+0000f910: 2020 2020 506c 6174 666f 726d 2020 2020      Platform    
+0000f920: 2020 4465 6661 756c 7420 646f 6373 2066    Default docs f
+0000f930: 6f6c 6465 720a 2020 2020 2020 2020 3d3d  older.        ==
+0000f940: 3d3d 3d3d 3d3d 3d3d 3d20 2020 3d3d 3d3d  =========   ====
+0000f950: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000f960: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000f970: 3d3d 3d3d 3d3d 3d0a 2020 2020 2020 2020  =======.        
+0000f980: 6c69 6e75 7820 2020 2020 2020 2020 7e2f  linux         ~/
+0000f990: 2e6c 6f63 616c 2f73 6861 7265 2f72 6973  .local/share/ris
+0000f9a0: 7365 742f 6d61 6e0a 2020 2020 2020 2020  set/man.        
+0000f9b0: 6d61 636f 7320 2020 2020 2020 2020 7e2f  macos         ~/
+0000f9c0: 4c69 6272 6172 792f 7269 7373 6574 2f6d  Library/risset/m
+0000f9d0: 616e 0a20 2020 2020 2020 2077 696e 646f  an.        windo
+0000f9e0: 7773 2020 2020 2020 2043 3a2f 5573 6572  ws       C:/User
+0000f9f0: 732f 2455 5345 524e 414d 452f 4170 7044  s/$USERNAME/AppD
+0000fa00: 6174 612f 4c6f 6361 6c2f 7269 7373 6574  ata/Local/risset
+0000fa10: 2f6d 616e 0a20 2020 2020 2020 203d 3d3d  /man.        ===
+0000fa20: 3d3d 3d3d 3d3d 3d3d 2020 203d 3d3d 3d3d  ========   =====
+0000fa30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000fa40: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0000fa50: 3d3d 3d3d 3d3d 0a20 2020 2020 2020 2022  ======.        "
+0000fa60: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
+0000fa70: 6e20 5f67 656e 6572 6174 655f 646f 6375  n _generate_docu
+0000fa80: 6d65 6e74 6174 696f 6e28 7365 6c66 2c20  mentation(self, 
+0000fa90: 6465 7374 3d64 6573 742c 2062 7569 6c64  dest=dest, build
+0000faa0: 6874 6d6c 3d62 7569 6c64 6874 6d6c 2c20  html=buildhtml, 
+0000fab0: 6f6e 6c79 696e 7374 616c 6c65 643d 6f6e  onlyinstalled=on
+0000fac0: 6c79 696e 7374 616c 6c65 6429 0a0a 2020  lyinstalled)..  
+0000fad0: 2020 6465 6620 5f70 6172 7365 5f70 6c75    def _parse_plu
+0000fae0: 6769 6e28 7365 6c66 2c20 706c 7567 696e  gin(self, plugin
+0000faf0: 6e61 6d65 3a20 7374 7229 202d 3e20 506c  name: str) -> Pl
+0000fb00: 7567 696e 3a0a 2020 2020 2020 2020 706c  ugin:.        pl
+0000fb10: 7567 696e 736f 7572 6365 203d 2073 656c  uginsource = sel
+0000fb20: 662e 706c 7567 696e 736f 7572 6365 732e  f.pluginsources.
+0000fb30: 6765 7428 706c 7567 696e 6e61 6d65 290a  get(pluginname).
+0000fb40: 2020 2020 2020 2020 6966 2070 6c75 6769          if plugi
+0000fb50: 6e73 6f75 7263 6520 6973 204e 6f6e 653a  nsource is None:
+0000fb60: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0000fb70: 7365 204b 6579 4572 726f 7228 6622 506c  se KeyError(f"Pl
+0000fb80: 7567 696e 207b 706c 7567 696e 6e61 6d65  ugin {pluginname
+0000fb90: 7d20 6e6f 7420 6b6e 6f77 6e2e 204b 6e6f  } not known. Kno
+0000fba0: 776e 2070 6c75 6769 6e73 3a20 7b73 656c  wn plugins: {sel
+0000fbb0: 662e 706c 7567 696e 736f 7572 6365 732e  f.pluginsources.
+0000fbc0: 6b65 7973 2829 7d22 290a 2020 2020 2020  keys()}").      
+0000fbd0: 2020 6d61 6e69 6665 7374 7061 7468 203d    manifestpath =
+0000fbe0: 2070 6c75 6769 6e73 6f75 7263 652e 6d61   pluginsource.ma
+0000fbf0: 6e69 6665 7374 5f70 6174 6828 290a 2020  nifest_path().  
+0000fc00: 2020 2020 2020 6173 7365 7274 206d 616e        assert man
+0000fc10: 6966 6573 7470 6174 682e 6578 6973 7473  ifestpath.exists
+0000fc20: 2829 0a20 2020 2020 2020 206d 616e 6966  ().        manif
+0000fc30: 6573 7473 7472 203d 206f 7065 6e28 6d61  eststr = open(ma
+0000fc40: 6e69 6665 7374 7061 7468 292e 7265 6164  nifestpath).read
+0000fc50: 2829 0a20 2020 2020 2020 2074 7279 3a0a  ().        try:.
+0000fc60: 2020 2020 2020 2020 2020 2020 5f20 3d20              _ = 
+0000fc70: 6a73 6f6e 2e6c 6f61 6473 286d 616e 6966  json.loads(manif
+0000fc80: 6573 7473 7472 290a 2020 2020 2020 2020  eststr).        
+0000fc90: 6578 6365 7074 206a 736f 6e2e 4a53 4f4e  except json.JSON
+0000fca0: 4465 636f 6465 4572 726f 7220 6173 2065  DecodeError as e
+0000fcb0: 7272 3a0a 2020 2020 2020 2020 2020 2020  rr:.            
+0000fcc0: 5f65 7272 6f72 6d73 6728 6622 4572 726f  _errormsg(f"Erro
+0000fcd0: 7220 7768 696c 6520 7061 7273 696e 6720  r while parsing 
+0000fce0: 706c 7567 696e 206d 616e 6966 6573 742e  plugin manifest.
+0000fcf0: 206e 616d 653d 7b70 6c75 6769 6e6e 616d   name={pluginnam
+0000fd00: 657d 2c20 6d61 6e69 6665 7374 3d7b 6d61  e}, manifest={ma
+0000fd10: 6e69 6665 7374 7061 7468 7d22 290a 2020  nifestpath}").  
+0000fd20: 2020 2020 2020 2020 2020 5f70 7269 6e74            _print
+0000fd30: 5f77 6974 685f 6c69 6e65 5f6e 756d 6265  _with_line_numbe
+0000fd40: 7273 286d 616e 6966 6573 7473 7472 290a  rs(manifeststr).
+0000fd50: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0000fd60: 6520 6572 720a 2020 2020 2020 2020 7265  e err.        re
+0000fd70: 7475 726e 2070 6c75 6769 6e73 6f75 7263  turn pluginsourc
+0000fd80: 652e 7265 6164 5f64 6566 696e 6974 696f  e.read_definitio
+0000fd90: 6e28 290a 0a20 2020 2064 6566 2069 6e73  n()..    def ins
+0000fda0: 7461 6c6c 6564 5f64 6c6c 7328 7365 6c66  talled_dlls(self
+0000fdb0: 2920 2d3e 2064 6963 745b 7374 722c 2074  ) -> dict[str, t
+0000fdc0: 7570 6c65 5b50 6174 682c 2062 6f6f 6c5d  uple[Path, bool]
+0000fdd0: 5d3a 0a20 2020 2020 2020 2022 2222 0a20  ]:.        """. 
+0000fde0: 2020 2020 2020 2052 6574 7572 6e73 2061         Returns a
+0000fdf0: 2064 6963 7420 6d61 7070 696e 6720 646c   dict mapping dl
+0000fe00: 6c20 6e61 6d65 2074 6f20 2869 6e73 7461  l name to (insta
+0000fe10: 6c6c 6564 5f70 6174 683a 2073 7472 2c20  lled_path: str, 
+0000fe20: 7573 6572 5f69 6e73 7461 6c6c 6564 3a20  user_installed: 
+0000fe30: 626f 6f6c 290a 2020 2020 2020 2020 2222  bool).        ""
+0000fe40: 220a 2020 2020 2020 2020 7573 6572 5f64  ".        user_d
+0000fe50: 6c6c 7320 3d20 7573 6572 5f69 6e73 7461  lls = user_insta
+0000fe60: 6c6c 6564 5f64 6c6c 7328 290a 2020 2020  lled_dlls().    
+0000fe70: 2020 2020 7379 7374 656d 5f64 6c6c 7320      system_dlls 
+0000fe80: 3d20 7379 7374 656d 5f69 6e73 7461 6c6c  = system_install
+0000fe90: 6564 5f64 6c6c 7328 290a 2020 2020 2020  ed_dlls().      
+0000fea0: 2020 6462 203d 207b 7d0a 2020 2020 2020    db = {}.      
+0000feb0: 2020 666f 7220 646c 6c20 696e 2075 7365    for dll in use
+0000fec0: 725f 646c 6c73 3a0a 2020 2020 2020 2020  r_dlls:.        
+0000fed0: 2020 2020 6462 5b64 6c6c 2e6e 616d 655d      db[dll.name]
+0000fee0: 203d 2028 646c 6c2c 2054 7275 6529 0a20   = (dll, True). 
+0000fef0: 2020 2020 2020 2066 6f72 2064 6c6c 2069         for dll i
+0000ff00: 6e20 7379 7374 656d 5f64 6c6c 733a 0a20  n system_dlls:. 
+0000ff10: 2020 2020 2020 2020 2020 2064 625b 646c             db[dl
+0000ff20: 6c2e 6e61 6d65 5d20 3d20 2864 6c6c 2c20  l.name] = (dll, 
+0000ff30: 4661 6c73 6529 0a20 2020 2020 2020 2072  False).        r
+0000ff40: 6574 7572 6e20 6462 0a0a 2020 2020 6465  eturn db..    de
+0000ff50: 6620 696e 7374 616c 6c65 645f 7061 7468  f installed_path
+0000ff60: 5f66 6f72 5f64 6c6c 2873 656c 662c 2062  _for_dll(self, b
+0000ff70: 696e 6172 793a 2073 7472 2920 2d3e 2074  inary: str) -> t
+0000ff80: 7570 6c65 5b50 6174 6820 7c20 4e6f 6e65  uple[Path | None
+0000ff90: 2c20 626f 6f6c 5d3a 0a20 2020 2020 2020  , bool]:.       
+0000ffa0: 2022 2222 0a20 2020 2020 2020 2047 6574   """.        Get
+0000ffb0: 2074 6865 2069 6e73 7461 6c6c 6564 2070   the installed p
+0000ffc0: 6174 6820 666f 7220 6120 6769 7665 6e20  ath for a given 
+0000ffd0: 706c 7567 696e 2062 696e 6172 790a 0a20  plugin binary.. 
+0000ffe0: 2020 2020 2020 2052 6574 7572 6e73 2028         Returns (
+0000fff0: 7061 7468 2074 6f20 646c 6c2c 2075 7365  path to dll, use
+00010000: 725f 696e 7374 616c 6c65 6429 2e20 4966  r_installed). If
+00010010: 206e 6f74 2069 6e73 7461 6c6c 6564 2072   not installed r
+00010020: 6574 7572 6e73 2028 4e6f 6e65 2c20 4661  eturns (None, Fa
+00010030: 6c73 6529 2e20 4120 7573 6572 2069 6e73  lse). A user ins
+00010040: 7461 6c6c 6564 0a20 2020 2020 2020 2064  talled.        d
+00010050: 6c6c 2068 6173 2070 7269 6f72 6974 7920  ll has priority 
+00010060: 6f76 6572 2073 7973 7465 6d20 696e 7374  over system inst
+00010070: 616c 6c65 640a 0a20 2020 2020 2020 2041  alled..        A
+00010080: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+00010090: 2062 696e 6172 793a 2074 6865 206e 616d   binary: the nam
+000100a0: 6520 6f66 2074 6865 2070 6c75 6769 6e20  e of the plugin 
+000100b0: 6269 6e61 7279 2c20 5749 5448 2065 7874  binary, WITH ext
+000100c0: 656e 7369 6f6e 2028 6c69 6266 6f6f 2e73  ension (libfoo.s
+000100d0: 6f2c 206c 6962 666f 6f2e 646c 6c2c 2065  o, libfoo.dll, e
+000100e0: 7463 290a 0a20 2020 2020 2020 2052 6574  tc)..        Ret
+000100f0: 7572 6e73 3a0a 2020 2020 2020 2020 2020  urns:.          
+00010100: 2020 4120 7475 706c 6520 2870 6174 6820    A tuple (path 
+00010110: 746f 2074 6865 2061 6374 7561 6c20 6669  to the actual fi
+00010120: 6c65 206f 7220 4e6f 6e65 2069 6620 6e6f  le or None if no
+00010130: 7420 666f 756e 642c 2054 7275 6520 6966  t found, True if
+00010140: 2074 6869 7320 6973 2069 6e73 6964 6520   this is inside 
+00010150: 7468 6520 7573 6572 2070 6c75 6769 6e73  the user plugins
+00010160: 2070 6174 6829 0a20 2020 2020 2020 2022   path).        "
+00010170: 2222 0a20 2020 2020 2020 2064 6c6c 6462  "".        dlldb
+00010180: 203d 2073 656c 662e 696e 7374 616c 6c65   = self.installe
+00010190: 645f 646c 6c73 2829 0a20 2020 2020 2020  d_dlls().       
+000101a0: 2069 6620 6269 6e61 7279 2069 6e20 646c   if binary in dl
+000101b0: 6c64 623a 0a20 2020 2020 2020 2020 2020  ldb:.           
+000101c0: 2070 6174 682c 2075 7365 7269 6e73 7461   path, userinsta
+000101d0: 6c6c 6564 203d 2064 6c6c 6462 5b62 696e  lled = dlldb[bin
+000101e0: 6172 795d 0a20 2020 2020 2020 2020 2020  ary].           
+000101f0: 2072 6574 7572 6e20 7061 7468 2c20 7573   return path, us
+00010200: 6572 696e 7374 616c 6c65 640a 2020 2020  erinstalled.    
+00010210: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00010220: 2020 2020 2020 5f64 6562 7567 2866 2254        _debug(f"T
+00010230: 6865 2062 696e 6172 7920 7b62 696e 6172  he binary {binar
+00010240: 797d 2063 6f75 6c64 206e 6f74 2062 6520  y} could not be 
+00010250: 666f 756e 6420 696e 2074 6865 2069 6e73  found in the ins
+00010260: 7461 6c6c 6564 2064 6c6c 732e 2049 6e73  talled dlls. Ins
+00010270: 7461 6c6c 6564 2064 6c6c 733a 2229 0a20  talled dlls:"). 
+00010280: 2020 2020 2020 2020 2020 2069 6620 5f73             if _s
+00010290: 6573 7369 6f6e 2e64 6562 7567 3a0a 2020  ession.debug:.  
+000102a0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+000102b0: 7220 646c 6c2c 2028 7061 7468 2c20 7573  r dll, (path, us
+000102c0: 6572 696e 7374 616c 6c65 6429 2069 6e20  erinstalled) in 
+000102d0: 646c 6c64 622e 6974 656d 7328 293a 0a20  dlldb.items():. 
+000102e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000102f0: 2020 2070 7269 6e74 2866 2220 2d20 7b64     print(f" - {d
+00010300: 6c6c 2e6c 6a75 7374 2832 3829 7d3a 207b  ll.ljust(28)}: {
+00010310: 7061 7468 7d20 222c 2066 696c 653d 7379  path} ", file=sy
+00010320: 732e 7374 6465 7272 290a 2020 2020 2020  s.stderr).      
+00010330: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00010340: 652c 2046 616c 7365 0a0a 2020 2020 6465  e, False..    de
+00010350: 6620 696e 7374 616c 6c65 645f 6d61 6e69  f installed_mani
+00010360: 6665 7374 735f 7061 7468 2873 656c 6629  fests_path(self)
+00010370: 202d 3e20 5061 7468 3a0a 2020 2020 2020   -> Path:.      
+00010380: 2020 2222 220a 2020 2020 2020 2020 5265    """.        Re
+00010390: 7475 726e 7320 7468 6520 7061 7468 2074  turns the path t
+000103a0: 6f20 7765 7265 2069 6e73 7461 6c6c 6174  o were installat
+000103b0: 696f 6e20 6d61 6e69 6665 7374 7320 6172  ion manifests ar
+000103c0: 6520 7361 7665 6420 696e 2074 6869 7320  e saved in this 
+000103d0: 7379 7374 656d 0a0a 2020 2020 2020 2020  system..        
+000103e0: 4372 6561 7465 7320 7468 6520 7061 7468  Creates the path
+000103f0: 2069 6620 6974 2064 6f65 736e 2774 2065   if it doesn't e
+00010400: 7869 7374 2061 6c72 6561 6479 0a20 2020  xist already.   
+00010410: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00010420: 2070 6174 6820 3d20 5249 5353 4554 5f52   path = RISSET_R
+00010430: 4f4f 5420 2f20 2269 6e73 7461 6c6c 6564  OOT / "installed
+00010440: 2d6d 616e 6966 6573 7473 220a 2020 2020  -manifests".    
+00010450: 2020 2020 6966 206e 6f74 2070 6174 682e      if not path.
+00010460: 6578 6973 7473 2829 3a0a 2020 2020 2020  exists():.      
+00010470: 2020 2020 2020 7061 7468 2e6d 6b64 6972        path.mkdir
+00010480: 2870 6172 656e 7473 3d54 7275 6529 0a20  (parents=True). 
+00010490: 2020 2020 2020 2072 6574 7572 6e20 7061         return pa
+000104a0: 7468 0a0a 2020 2020 6465 6620 696e 7374  th..    def inst
+000104b0: 616c 6c65 645f 6d61 6e69 6665 7374 7328  alled_manifests(
+000104c0: 7365 6c66 2920 2d3e 206c 6973 745b 5061  self) -> list[Pa
+000104d0: 7468 5d3a 0a20 2020 2020 2020 2022 2222  th]:.        """
+000104e0: 0a20 2020 2020 2020 2052 6574 7572 6e20  .        Return 
+000104f0: 6120 6c69 7374 206f 6620 616c 6c20 696e  a list of all in
+00010500: 7374 616c 6c65 6420 6d61 6e69 6665 7374  stalled manifest
+00010510: 730a 2020 2020 2020 2020 2222 220a 2020  s.        """.  
+00010520: 2020 2020 2020 7061 7468 203d 2073 656c        path = sel
+00010530: 662e 696e 7374 616c 6c65 645f 6d61 6e69  f.installed_mani
+00010540: 6665 7374 735f 7061 7468 2829 0a20 2020  fests_path().   
+00010550: 2020 2020 206d 616e 6966 6573 7473 203d       manifests =
+00010560: 206c 6973 7428 7061 7468 2e67 6c6f 6228   list(path.glob(
+00010570: 222a 2e6a 736f 6e22 2929 0a20 2020 2020  "*.json")).     
+00010580: 2020 2072 6574 7572 6e20 6d61 6e69 6665     return manife
+00010590: 7374 730a 0a20 2020 2064 6566 205f 6973  sts..    def _is
+000105a0: 5f70 6c75 6769 6e5f 7265 636f 676e 697a  _plugin_recogniz
+000105b0: 6564 5f62 795f 6373 6f75 6e64 2873 656c  ed_by_csound(sel
+000105c0: 662c 2070 6c75 6769 6e3a 2050 6c75 6769  f, plugin: Plugi
+000105d0: 6e2c 206d 6574 686f 643d 2763 736f 756e  n, method='csoun
+000105e0: 6427 2920 2d3e 2062 6f6f 6c3a 0a20 2020  d') -> bool:.   
+000105f0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00010600: 2043 6865 636b 2069 6620 6120 6769 7665   Check if a give
+00010610: 6e20 706c 7567 696e 2069 7320 696e 7374  n plugin is inst
+00010620: 616c 6c65 640a 0a20 2020 2020 2020 2054  alled..        T
+00010630: 6869 7320 726f 7574 696e 6520 7175 6572  his routine quer
+00010640: 6965 7320 7468 6520 6176 6169 6c61 626c  ies the availabl
+00010650: 6520 6f70 636f 6465 7320 696e 2063 736f  e opcodes in cso
+00010660: 756e 6420 616e 6420 6368 6563 6b73 0a20  und and checks. 
+00010670: 2020 2020 2020 2074 6861 7420 7468 6520         that the 
+00010680: 6f70 636f 6465 7320 696e 2070 6c75 6769  opcodes in plugi
+00010690: 6e20 6172 6520 7072 6573 656e 740a 0a20  n are present.. 
+000106a0: 2020 2020 2020 2052 6574 7572 6e73 3a0a         Returns:.
+000106b0: 2020 2020 2020 2020 2020 2020 5472 7565              True
+000106c0: 2069 6620 7468 6520 706c 7567 696e 2069   if the plugin i
+000106d0: 7320 7265 636f 676e 697a 6564 2062 7920  s recognized by 
+000106e0: 6373 6f75 6e64 0a20 2020 2020 2020 2022  csound.        "
+000106f0: 2222 0a20 2020 2020 2020 2074 6573 7420  "".        test 
+00010700: 3d20 706c 7567 696e 2e6f 7063 6f64 6573  = plugin.opcodes
+00010710: 5b30 5d0a 2020 2020 2020 2020 6f70 636f  [0].        opco
+00010720: 6465 7320 3d20 5f63 736f 756e 645f 6f70  des = _csound_op
+00010730: 636f 6465 7328 6d65 7468 6f64 3d6d 6574  codes(method=met
+00010740: 686f 6429 0a20 2020 2020 2020 2072 6574  hod).        ret
+00010750: 7572 6e20 7465 7374 2069 6e20 6f70 636f  urn test in opco
+00010760: 6465 730a 0a20 2020 2064 6566 2070 6c75  des..    def plu
+00010770: 6769 6e5f 696e 7374 616c 6c65 645f 7061  gin_installed_pa
+00010780: 7468 2873 656c 662c 2070 6c75 6769 6e3a  th(self, plugin:
+00010790: 2050 6c75 6769 6e29 202d 3e20 5061 7468   Plugin) -> Path
+000107a0: 207c 204e 6f6e 653a 0a20 2020 2020 2020   | None:.       
+000107b0: 2022 2222 0a20 2020 2020 2020 2052 6574   """.        Ret
+000107c0: 7572 6e73 2074 6865 2070 6174 6820 746f  urns the path to
+000107d0: 2074 6865 2070 6c75 6769 6e27 7320 646c   the plugin's dl
+000107e0: 6c0a 0a20 2020 2020 2020 2049 6620 7468  l..        If th
+000107f0: 6520 706c 7567 696e 2069 7320 6e6f 7420  e plugin is not 
+00010800: 696e 7374 616c 6c65 6420 6f72 2074 6865  installed or the
+00010810: 2062 696e 6172 7920 6973 206e 6f74 2066   binary is not f
+00010820: 6f75 6e64 0a20 2020 2020 2020 2072 6574  ound.        ret
+00010830: 7572 6e73 204e 6f6e 650a 2020 2020 2020  urns None.      
+00010840: 2020 2222 220a 2020 2020 2020 2020 6269    """.        bi
+00010850: 6e61 7279 203d 2070 6c75 6769 6e2e 6669  nary = plugin.fi
+00010860: 6e64 5f62 696e 6172 7928 290a 2020 2020  nd_binary().    
+00010870: 2020 2020 6966 206e 6f74 2062 696e 6172      if not binar
+00010880: 793a 0a20 2020 2020 2020 2020 2020 205f  y:.            _
+00010890: 6465 6275 6728 6622 4e6f 2062 696e 6172  debug(f"No binar
+000108a0: 7920 666f 756e 6420 666f 7220 706c 7567  y found for plug
+000108b0: 696e 207b 706c 7567 696e 2e6e 616d 657d  in {plugin.name}
+000108c0: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
+000108d0: 6574 7572 6e20 4e6f 6e65 0a0a 2020 2020  eturn None..    
+000108e0: 2020 2020 6269 6e66 696c 6520 3d20 6269      binfile = bi
+000108f0: 6e61 7279 2e62 696e 6172 795f 6669 6c65  nary.binary_file
+00010900: 6e61 6d65 2829 0a20 2020 2020 2020 2064  name().        d
+00010910: 6c6c 2c20 7573 6572 5f69 6e73 7461 6c6c  ll, user_install
+00010920: 6564 203d 2073 656c 662e 696e 7374 616c  ed = self.instal
+00010930: 6c65 645f 7061 7468 5f66 6f72 5f64 6c6c  led_path_for_dll
+00010940: 2862 696e 6669 6c65 290a 2020 2020 2020  (binfile).      
+00010950: 2020 7265 7475 726e 2064 6c6c 0a0a 2020    return dll..  
+00010960: 2020 6465 6620 6973 5f70 6c75 6769 6e5f    def is_plugin_
+00010970: 696e 7374 616c 6c65 6428 7365 6c66 2c20  installed(self, 
+00010980: 706c 7567 696e 3a20 506c 7567 696e 2c20  plugin: Plugin, 
+00010990: 6368 6563 6b3d 5472 7565 2c20 6d65 7468  check=True, meth
+000109a0: 6f64 3d27 6373 6f75 6e64 2729 202d 3e20  od='csound') -> 
+000109b0: 626f 6f6c 3a0a 2020 2020 2020 2020 2222  bool:.        ""
+000109c0: 220a 2020 2020 2020 2020 4973 2074 6865  ".        Is the
+000109d0: 2067 6976 656e 2070 6c75 6769 6e20 696e   given plugin in
+000109e0: 7374 616c 6c65 643f 0a0a 2020 2020 2020  stalled?..      
+000109f0: 2020 4974 2063 6865 636b 7320 7468 6174    It checks that
+00010a00: 2074 6865 2062 696e 6172 7920 6973 2069   the binary is i
+00010a10: 6e20 6373 6f75 6e64 2773 2070 6174 682e  n csound's path.
+00010a20: 2049 6620 6368 6563 6b20 6973 2054 7275   If check is Tru
+00010a30: 652c 2069 740a 2020 2020 2020 2020 6368  e, it.        ch
+00010a40: 6563 6b73 2074 6861 7420 7468 6520 6f70  ecks that the op
+00010a50: 636f 6465 7320 6465 6669 6e65 6420 696e  codes defined in
+00010a60: 2074 6865 2070 6c75 6769 6e20 6172 6520   the plugin are 
+00010a70: 6163 7475 616c 6c79 2070 7265 7365 6e74  actually present
+00010a80: 0a0a 2020 2020 2020 2020 4172 6775 6d65  ..        Argume
+00010a90: 6e74 733a 0a20 2020 2020 2020 2020 2020  nts:.           
+00010aa0: 2070 6c75 6769 6e3a 2074 6865 2070 6c75   plugin: the plu
+00010ab0: 6769 6e20 746f 2071 7565 7279 0a20 2020  gin to query.   
+00010ac0: 2020 2020 2020 2020 2063 6865 636b 3a20           check: 
+00010ad0: 6966 2054 7275 652c 2077 6520 6368 6563  if True, we chec
+00010ae0: 6b20 6966 2074 6865 206f 7063 6f64 6573  k if the opcodes
+00010af0: 2064 6563 6c61 7265 6420 696e 2074 6865   declared in the
+00010b00: 2070 6c75 6769 6e20 6465 6669 6e69 7469   plugin definiti
+00010b10: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
+00010b20: 2020 2061 7265 2061 6374 7561 6c6c 7920     are actually 
+00010b30: 6176 6169 6c61 626c 650a 2020 2020 2020  available.      
+00010b40: 2020 2020 2020 6d65 7468 6f64 3a20 6f6e        method: on
+00010b50: 6520 6f66 2027 6373 6f75 6e64 2720 2863  e of 'csound' (c
+00010b60: 6865 636b 2076 6961 2074 6865 2062 696e  heck via the bin
+00010b70: 6172 7929 2c20 2763 7463 736f 756e 6427  ary), 'ctcsound'
+00010b80: 2028 6368 6563 6b20 7669 6120 7468 6520   (check via the 
+00010b90: 4150 4929 0a0a 2020 2020 2020 2020 5265  API)..        Re
+00010ba0: 7475 726e 733a 0a20 2020 2020 2020 2020  turns:.         
+00010bb0: 2020 2054 7275 6520 6966 2074 6865 2070     True if the p
+00010bc0: 6c75 6769 6e20 6973 2069 6e73 7461 6c6c  lugin is install
+00010bd0: 6564 2e20 4966 2063 6865 636b 2c20 7765  ed. If check, we
+00010be0: 2061 6c73 6f20 6368 6563 6b20 7468 6174   also check that
+00010bf0: 2074 6865 2070 6c75 6769 6e20 6973 2061   the plugin is a
+00010c00: 6374 7561 6c6c 790a 2020 2020 2020 2020  ctually.        
+00010c10: 2020 2020 6c6f 6164 6564 2062 7920 6373      loaded by cs
+00010c20: 6f75 6e64 0a20 2020 2020 2020 2022 2222  ound.        """
+00010c30: 0a20 2020 2020 2020 2062 696e 6172 7920  .        binary 
+00010c40: 3d20 706c 7567 696e 2e66 696e 645f 6269  = plugin.find_bi
+00010c50: 6e61 7279 2829 0a20 2020 2020 2020 2069  nary().        i
+00010c60: 6620 6e6f 7420 6269 6e61 7279 3a0a 2020  f not binary:.  
+00010c70: 2020 2020 2020 2020 2020 5f64 6562 7567            _debug
+00010c80: 2866 224e 6f20 6d61 7463 6869 6e67 2062  (f"No matching b
+00010c90: 696e 6172 7920 666f 7220 706c 7567 696e  inary for plugin
+00010ca0: 207b 706c 7567 696e 2e6e 616d 657d 2229   {plugin.name}")
+00010cb0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00010cc0: 7572 6e20 4661 6c73 650a 0a20 2020 2020  urn False..     
+00010cd0: 2020 2062 696e 6669 6c65 203d 2062 696e     binfile = bin
+00010ce0: 6172 792e 6269 6e61 7279 5f66 696c 656e  ary.binary_filen
+00010cf0: 616d 6528 290a 2020 2020 2020 2020 6966  ame().        if
+00010d00: 206e 6f74 2062 696e 6669 6c65 3a0a 2020   not binfile:.  
+00010d10: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00010d20: 2046 616c 7365 0a20 2020 2020 2020 2064   False.        d
+00010d30: 6c6c 2c20 7573 6572 5f69 6e73 7461 6c6c  ll, user_install
+00010d40: 6564 203d 2073 656c 662e 696e 7374 616c  ed = self.instal
+00010d50: 6c65 645f 7061 7468 5f66 6f72 5f64 6c6c  led_path_for_dll
+00010d60: 2862 696e 6669 6c65 290a 2020 2020 2020  (binfile).      
+00010d70: 2020 6966 2064 6c6c 2069 7320 4e6f 6e65    if dll is None
+00010d80: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00010d90: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
+00010da0: 2020 2072 6574 7572 6e20 5472 7565 2069     return True i
+00010db0: 6620 6e6f 7420 6368 6563 6b20 656c 7365  f not check else
+00010dc0: 2073 656c 662e 5f69 735f 706c 7567 696e   self._is_plugin
+00010dd0: 5f72 6563 6f67 6e69 7a65 645f 6279 5f63  _recognized_by_c
+00010de0: 736f 756e 6428 706c 7567 696e 2c20 6d65  sound(plugin, me
+00010df0: 7468 6f64 3d6d 6574 686f 6429 0a0a 2020  thod=method)..  
+00010e00: 2020 6465 6620 6669 6e64 5f6d 616e 7061    def find_manpa
+00010e10: 6765 2873 656c 662c 206f 7063 6f64 653a  ge(self, opcode:
+00010e20: 2073 7472 2c20 6d61 726b 646f 776e 3d54   str, markdown=T
+00010e30: 7275 6529 202d 3e20 5061 7468 207c 204e  rue) -> Path | N
+00010e40: 6f6e 653a 0a20 2020 2020 2020 2022 2222  one:.        """
+00010e50: 0a20 2020 2020 2020 2046 696e 6420 7468  .        Find th
+00010e60: 6520 6d61 6e20 7061 6765 2066 6f72 2074  e man page for t
+00010e70: 6865 2067 6976 656e 206f 7063 6f64 650a  he given opcode.
+00010e80: 0a20 2020 2020 2020 2049 6620 6d61 726b  .        If mark
+00010e90: 646f 776e 2069 7320 5472 7565 2c20 7365  down is True, se
+00010ea0: 6172 6368 2066 6f72 2074 6865 202e 6d64  arch for the .md
+00010eb0: 2066 696c 652c 206f 7468 6572 7769 7365   file, otherwise
+00010ec0: 2073 6561 7263 6820 7468 650a 2020 2020   search the.    
+00010ed0: 2020 2020 6874 6d6c 2064 6f63 756d 656e      html documen
+00010ee0: 7461 7469 6f6e 0a0a 2020 2020 2020 2020  tation..        
+00010ef0: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
+00010f00: 2020 6f70 636f 6465 3a20 7468 6520 6e61    opcode: the na
+00010f10: 6d65 206f 6620 7468 6520 6f70 636f 6465  me of the opcode
+00010f20: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
+00010f30: 6b64 6f77 6e3a 2069 6620 5472 7565 2c20  kdown: if True, 
+00010f40: 7265 7475 726e 2074 6865 206d 6172 6b64  return the markd
+00010f50: 6f77 6e20 6669 6c65 206f 6620 7468 6520  own file of the 
+00010f60: 6f70 636f 6465 2c20 6f74 6865 7277 6973  opcode, otherwis
+00010f70: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00010f80: 2020 7265 7475 726e 7320 7468 6520 7061    returns the pa
+00010f90: 7468 2074 6f20 7468 6520 2e68 746d 6c20  th to the .html 
+00010fa0: 6669 6c65 2067 656e 6572 6174 6564 2066  file generated f
+00010fb0: 726f 6d20 6974 0a20 2020 2020 2020 2022  rom it.        "
+00010fc0: 2222 0a20 2020 2020 2020 2069 6620 6e6f  "".        if no
+00010fd0: 7420 6d61 726b 646f 776e 3a0a 2020 2020  t markdown:.    
+00010fe0: 2020 2020 2020 2020 646f 6366 6f6c 6465          docfolde
+00010ff0: 7220 3d20 5061 7468 2852 4953 5345 545f  r = Path(RISSET_
+00011000: 4745 4e45 5241 5445 445f 444f 4353 290a  GENERATED_DOCS).
+00011010: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00011020: 6f74 2064 6f63 666f 6c64 6572 2e65 7869  ot docfolder.exi
+00011030: 7374 7328 293a 0a20 2020 2020 2020 2020  sts():.         
+00011040: 2020 2020 2020 205f 6572 726f 726d 7367         _errormsg
+00011050: 2822 446f 6375 6d65 6e74 6174 696f 6e20  ("Documentation 
+00011060: 6e65 6564 7320 746f 2062 6520 6765 6e65  needs to be gene
+00011070: 7261 7465 6420 6669 7273 7420 2873 6565  rated first (see
+00011080: 2060 7269 7373 6574 206d 616b 6564 6f63   `risset makedoc
+00011090: 7360 2922 290a 2020 2020 2020 2020 2020  s`)").          
+000110a0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+000110b0: 650a 2020 2020 2020 2020 2020 2020 6874  e.            ht
+000110c0: 6d6c 7061 6765 203d 2064 6f63 666f 6c64  mlpage = docfold
+000110d0: 6572 202f 2022 7369 7465 2220 2f20 226f  er / "site" / "o
+000110e0: 7063 6f64 6573 2220 2f20 286f 7063 6f64  pcodes" / (opcod
+000110f0: 6520 2b20 222e 6874 6d6c 2229 0a20 2020  e + ".html").   
+00011100: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00011110: 6874 6d6c 7061 6765 2e65 7869 7374 7328  htmlpage.exists(
+00011120: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00011130: 2020 205f 6572 726f 726d 7367 2866 224e     _errormsg(f"N
+00011140: 6f20 6874 6d6c 2070 6167 6520 666f 756e  o html page foun
+00011150: 642e 2050 6174 683a 207b 6874 6d6c 7061  d. Path: {htmlpa
+00011160: 6765 7d22 290a 2020 2020 2020 2020 2020  ge}").          
+00011170: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00011180: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
+00011190: 7475 726e 2068 746d 6c70 6167 650a 2020  turn htmlpage.  
+000111a0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000111b0: 2020 2020 2020 2020 666f 7220 706c 7567          for plug
+000111c0: 696e 2069 6e20 7365 6c66 2e70 6c75 6769  in in self.plugi
+000111d0: 6e73 2e76 616c 7565 7328 293a 0a20 2020  ns.values():.   
+000111e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000111f0: 6f70 636f 6465 2069 6e20 706c 7567 696e  opcode in plugin
+00011200: 2e6f 7063 6f64 6573 3a0a 2020 2020 2020  .opcodes:.      
+00011210: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00011220: 7475 726e 2070 6c75 6769 6e2e 6d61 6e70  turn plugin.manp
+00011230: 6167 6528 6f70 636f 6465 290a 2020 2020  age(opcode).    
+00011240: 2020 2020 2020 2020 5f65 7272 6f72 6d73          _errorms
+00011250: 6728 6622 4f70 636f 6465 207b 6f70 636f  g(f"Opcode {opco
+00011260: 6465 7d20 6e6f 7420 666f 756e 6422 290a  de} not found").
+00011270: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00011280: 726e 204e 6f6e 650a 0a20 2020 2064 6566  rn None..    def
+00011290: 2069 6e73 7461 6c6c 6564 5f70 6c75 6769   installed_plugi
+000112a0: 6e5f 696e 666f 2873 656c 662c 2070 6c75  n_info(self, plu
+000112b0: 6769 6e3a 2050 6c75 6769 6e29 202d 3e20  gin: Plugin) -> 
+000112c0: 496e 7374 616c 6c65 6450 6c75 6769 6e49  InstalledPluginI
+000112d0: 6e66 6f20 7c20 4e6f 6e65 3a0a 2020 2020  nfo | None:.    
+000112e0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000112f0: 5265 7475 726e 7320 616e 2049 6e73 7461  Returns an Insta
+00011300: 6c6c 6564 506c 7567 696e 496e 666f 2069  lledPluginInfo i
+00011310: 6620 666f 756e 642c 204e 6f6e 6520 6f74  f found, None ot
+00011320: 6865 7277 6973 650a 2020 2020 2020 2020  herwise.        
+00011330: 2222 220a 2020 2020 2020 2020 5f64 6562  """.        _deb
+00011340: 7567 2866 2243 6865 636b 696e 6720 6966  ug(f"Checking if
+00011350: 2070 6c75 6769 6e20 7b70 6c75 6769 6e2e   plugin {plugin.
+00011360: 6e61 6d65 7d20 6973 2069 6e73 7461 6c6c  name} is install
+00011370: 6564 2229 0a20 2020 2020 2020 2062 696e  ed").        bin
+00011380: 6172 7920 3d20 706c 7567 696e 2e66 696e  ary = plugin.fin
+00011390: 645f 6269 6e61 7279 2829 0a20 2020 2020  d_binary().     
+000113a0: 2020 2069 6620 6e6f 7420 6269 6e61 7279     if not binary
+000113b0: 3a0a 2020 2020 2020 2020 2020 2020 5f64  :.            _d
+000113c0: 6562 7567 2866 2250 6c75 6769 6e20 7b70  ebug(f"Plugin {p
+000113d0: 6c75 6769 6e2e 6e61 6d65 7d20 6861 7320  lugin.name} has 
+000113e0: 6e6f 2062 696e 6172 7920 666f 7220 7468  no binary for th
+000113f0: 6973 2070 6c61 7466 6f72 6d20 616e 642f  is platform and/
+00011400: 6f72 2063 736f 756e 6420 7665 7273 696f  or csound versio
+00011410: 6e22 0a20 2020 2020 2020 2020 2020 2020  n".             
+00011420: 2020 2020 2020 6622 2e20 4269 6e61 7269        f". Binari
+00011430: 6573 3a20 7b70 6c75 6769 6e2e 6269 6e61  es: {plugin.bina
+00011440: 7269 6573 7d22 290a 2020 2020 2020 2020  ries}").        
+00011450: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
+00011460: 2020 2020 2020 2020 6269 6e66 696c 6520          binfile 
+00011470: 3d20 6269 6e61 7279 2e62 696e 6172 795f  = binary.binary_
+00011480: 6669 6c65 6e61 6d65 2829 0a20 2020 2020  filename().     
+00011490: 2020 2064 6c6c 2c20 7573 6572 5f69 6e73     dll, user_ins
+000114a0: 7461 6c6c 6564 203d 2073 656c 662e 696e  talled = self.in
+000114b0: 7374 616c 6c65 645f 7061 7468 5f66 6f72  stalled_path_for
+000114c0: 5f64 6c6c 2862 696e 6669 6c65 290a 2020  _dll(binfile).  
+000114d0: 2020 2020 2020 6966 206e 6f74 2064 6c6c        if not dll
+000114e0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+000114f0: 706c 7567 696e 2069 7320 6e6f 7420 696e  plugin is not in
+00011500: 7374 616c 6c65 640a 2020 2020 2020 2020  stalled.        
+00011510: 2020 2020 5f64 6562 7567 2866 2270 6c75      _debug(f"plu
+00011520: 6769 6e20 7b70 6c75 6769 6e2e 6e61 6d65  gin {plugin.name
+00011530: 7d20 6973 206e 6f74 2069 6e73 7461 6c6c  } is not install
+00011540: 6564 2079 6574 2229 0a20 2020 2020 2020  ed yet").       
+00011550: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+00011560: 0a0a 2020 2020 2020 2020 696e 7374 616c  ..        instal
+00011570: 6c65 645f 7665 7273 696f 6e20 3d20 554e  led_version = UN
+00011580: 4b4e 4f57 4e5f 5645 5253 494f 4e0a 2020  KNOWN_VERSION.  
+00011590: 2020 2020 2020 696e 7374 616c 6c65 645f        installed_
+000115a0: 6d61 6e69 6665 7374 5f70 6174 6820 3d20  manifest_path = 
+000115b0: 4e6f 6e65 0a0a 2020 2020 2020 2020 666f  None..        fo
+000115c0: 7220 6d61 6e69 6665 7374 2069 6e20 7365  r manifest in se
+000115d0: 6c66 2e69 6e73 7461 6c6c 6564 5f6d 616e  lf.installed_man
+000115e0: 6966 6573 7473 2829 3a0a 2020 2020 2020  ifests():.      
+000115f0: 2020 2020 2020 706c 7567 696e 6b65 7920        pluginkey 
+00011600: 3d20 6d61 6e69 6665 7374 2e6e 616d 652e  = manifest.name.
+00011610: 7370 6c69 7428 222e 2229 5b30 5d0a 2020  split(".")[0].  
+00011620: 2020 2020 2020 2020 2020 6e61 6d65 2c20            name, 
+00011630: 7665 7273 696f 6e20 3d20 5f70 6172 7365  version = _parse
+00011640: 5f70 6c75 6769 6e6b 6579 2870 6c75 6769  _pluginkey(plugi
+00011650: 6e6b 6579 290a 2020 2020 2020 2020 2020  nkey).          
+00011660: 2020 6966 206e 616d 6520 3d3d 2070 6c75    if name == plu
+00011670: 6769 6e2e 6e61 6d65 3a0a 2020 2020 2020  gin.name:.      
+00011680: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00011690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116a0: 2020 2072 6573 756c 7420 3d20 5f6c 6f61     result = _loa
+000116b0: 645f 696e 7374 616c 6c61 7469 6f6e 5f6d  d_installation_m
+000116c0: 616e 6966 6573 7428 6d61 6e69 6665 7374  anifest(manifest
+000116d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000116e0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+000116f0: 6f6e 2061 7320 653a 0a20 2020 2020 2020  on as e:.       
+00011700: 2020 2020 2020 2020 2020 2020 205f 6572               _er
+00011710: 726f 726d 7367 2866 2243 6f75 6c64 206e  rormsg(f"Could n
+00011720: 6f74 206c 6f61 6420 696e 7374 616c 6c61  ot load installa
+00011730: 7469 6f6e 206d 616e 6966 6573 7420 666f  tion manifest fo
+00011740: 7220 706c 7567 696e 207b 706c 7567 696e  r plugin {plugin
+00011750: 2e6e 616d 657d 2c20 736b 6970 7069 6e67  .name}, skipping
+00011760: 2e20 220a 2020 2020 2020 2020 2020 2020  . ".            
+00011770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011780: 2020 6622 4f72 6967 696e 616c 2065 7272    f"Original err
+00011790: 6f72 3a20 7b65 7d22 290a 2020 2020 2020  or: {e}").      
+000117a0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+000117b0: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+000117c0: 2020 2020 2020 2069 6e73 7461 6c6c 6564         installed
+000117d0: 5f76 6572 7369 6f6e 203d 2072 6573 756c  _version = resul
+000117e0: 745b 2776 6572 7369 6f6e 275d 0a20 2020  t['version'].   
+000117f0: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
+00011800: 7461 6c6c 6564 5f6d 616e 6966 6573 745f  talled_manifest_
+00011810: 7061 7468 203d 206d 616e 6966 6573 740a  path = manifest.
+00011820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011830: 6272 6561 6b0a 0a20 2020 2020 2020 206f  break..        o
+00011840: 7574 203d 2049 6e73 7461 6c6c 6564 506c  ut = InstalledPl
+00011850: 7567 696e 496e 666f 280a 2020 2020 2020  uginInfo(.      
+00011860: 2020 2020 2020 6e61 6d65 3d70 6c75 6769        name=plugi
+00011870: 6e2e 6e61 6d65 2c0a 2020 2020 2020 2020  n.name,.        
+00011880: 2020 2020 646c 6c70 6174 683d 646c 6c2c      dllpath=dll,
+00011890: 0a20 2020 2020 2020 2020 2020 2076 6572  .            ver
+000118a0: 7369 6f6e 7374 723d 696e 7374 616c 6c65  sionstr=installe
+000118b0: 645f 7665 7273 696f 6e2c 0a20 2020 2020  d_version,.     
+000118c0: 2020 2020 2020 2069 6e73 7461 6c6c 6564         installed
+000118d0: 5f69 6e5f 7379 7374 656d 5f66 6f6c 6465  _in_system_folde
+000118e0: 723d 7374 7228 646c 6c2e 7061 7265 6e74  r=str(dll.parent
+000118f0: 2920 3d3d 2073 7472 2873 7973 7465 6d5f  ) == str(system_
+00011900: 706c 7567 696e 735f 7061 7468 2829 292c  plugins_path()),
+00011910: 0a20 2020 2020 2020 2020 2020 2069 6e73  .            ins
+00011920: 7461 6c6c 6564 5f6d 616e 6966 6573 745f  talled_manifest_
+00011930: 7061 7468 3d69 6e73 7461 6c6c 6564 5f6d  path=installed_m
+00011940: 616e 6966 6573 745f 7061 7468 0a20 2020  anifest_path.   
+00011950: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
+00011960: 6574 7572 6e20 6f75 740a 0a20 2020 2064  eturn out..    d
+00011970: 6566 2067 6574 5f70 6c75 6769 6e5f 646c  ef get_plugin_dl
+00011980: 6c28 7365 6c66 2c20 706c 7567 696e 3a20  l(self, plugin: 
+00011990: 506c 7567 696e 2c20 706c 6174 666f 726d  Plugin, platform
+000119a0: 6964 3a20 7374 7220 3d20 2727 2c20 6373  id: str = '', cs
+000119b0: 6f75 6e64 5f76 6572 7369 6f6e 3a20 696e  ound_version: in
+000119c0: 7420 3d20 300a 2020 2020 2020 2020 2020  t = 0.          
+000119d0: 2020 2020 2020 2020 2020 2020 2029 202d               ) -
+000119e0: 3e20 5061 7468 3a0a 2020 2020 2020 2020  > Path:.        
+000119f0: 2222 220a 2020 2020 2020 2020 5265 7475  """.        Retu
+00011a00: 726e 7320 7468 6520 7061 7468 2074 6f20  rns the path to 
+00011a10: 7468 6520 6269 6e61 7279 2061 7320 6465  the binary as de
+00011a20: 6669 6e65 6420 696e 2074 6865 206d 616e  fined in the man
+00011a30: 6966 6573 740a 0a20 2020 2020 2020 2049  ifest..        I
+00011a40: 6620 6e65 6564 6564 2c20 646f 776e 6c6f  f needed, downlo
+00011a50: 6164 7320 7468 6520 6669 6c65 2070 6f69  ads the file poi
+00011a60: 6e74 6564 2062 7920 6120 7572 6c20 616e  nted by a url an
+00011a70: 6420 6578 7472 6163 7473 2069 7420 6966  d extracts it if
+00011a80: 2063 6f6d 7072 6573 7365 642c 0a20 2020   compressed,.   
+00011a90: 2020 2020 2074 6f20 6120 7465 6d70 6f72       to a tempor
+00011aa0: 6172 7920 6c6f 6361 7469 6f6e 2e20 4966  ary location. If
+00011ab0: 2074 6865 2070 6c75 6769 6e20 696e 636c   the plugin incl
+00011ac0: 7564 6573 2074 6865 2062 696e 6172 7920  udes the binary 
+00011ad0: 7769 7468 696e 2069 7473 2072 6570 6f73  within its repos
+00011ae0: 6974 6f72 790a 2020 2020 2020 2020 7468  itory.        th
+00011af0: 656e 2074 6865 206c 6f63 616c 2070 6174  en the local pat
+00011b00: 6820 6f66 2074 6865 2063 6c6f 6e65 6420  h of the cloned 
+00011b10: 7265 706f 7369 746f 7279 2069 7320 7265  repository is re
+00011b20: 7475 726e 6564 0a0a 2020 2020 2020 2020  turned..        
+00011b30: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
+00011b40: 2020 706c 7567 696e 3a20 7468 6520 706c    plugin: the pl
+00011b50: 7567 696e 2077 6869 6368 2064 6566 696e  ugin which defin
+00011b60: 6573 2077 6869 6368 2062 696e 6172 7920  es which binary 
+00011b70: 746f 2067 6574 0a20 2020 2020 2020 2020  to get.         
+00011b80: 2020 2070 6c61 7466 6f72 6d69 643a 2074     platformid: t
+00011b90: 6865 2070 6c61 7466 6f72 6d20 666f 7220  he platform for 
+00011ba0: 7768 6963 6820 746f 2067 6574 2074 6865  which to get the
+00011bb0: 2062 696e 6172 792e 2049 6620 6e6f 7420   binary. If not 
+00011bc0: 6769 7665 6e2c 2075 7365 2074 6865 0a20  given, use the. 
+00011bd0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00011be0: 7572 7265 6e74 2070 6c61 7466 6f72 6d2e  urrent platform.
+00011bf0: 2054 6869 7320 6172 6775 6d65 6e74 2069   This argument i
+00011c00: 7320 7072 6f76 6964 6564 2074 6f20 7465  s provided to te
+00011c10: 7374 2074 6865 2064 6f77 6e6c 6f61 6469  st the downloadi
+00011c20: 6e67 2061 6e64 0a20 2020 2020 2020 2020  ng and.         
+00011c30: 2020 2020 2020 2065 7874 7261 6374 696e         extractin
+00011c40: 6720 6d65 7468 6f64 7320 6c6f 6361 6c6c  g methods locall
+00011c50: 792e 0a20 2020 2020 2020 2020 2020 2063  y..            c
+00011c60: 736f 756e 645f 7665 7273 696f 6e3a 2074  sound_version: t
+00011c70: 6865 2063 736f 756e 6420 7665 7273 696f  he csound versio
+00011c80: 6e20 746f 2066 696e 6420 6120 706c 7567  n to find a plug
+00011c90: 696e 2064 6c6c 2066 6f72 2e0a 0a20 2020  in dll for...   
+00011ca0: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
+00011cb0: 2020 2020 2020 2020 2020 7468 6520 7061            the pa
+00011cc0: 7468 206f 6620 7468 6520 6269 6e61 7279  th of the binary
+00011cd0: 2e0a 2020 2020 2020 2020 2222 220a 2020  ..        """.  
+00011ce0: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
+00011cf0: 6e73 7461 6e63 6528 706c 7567 696e 2c20  nstance(plugin, 
+00011d00: 506c 7567 696e 290a 2020 2020 2020 2020  Plugin).        
+00011d10: 6966 206e 6f74 2070 6c61 7466 6f72 6d69  if not platformi
+00011d20: 643a 0a20 2020 2020 2020 2020 2020 2070  d:.            p
+00011d30: 6c61 7466 6f72 6d69 6420 3d20 5f73 6573  latformid = _ses
+00011d40: 7369 6f6e 2e70 6c61 7466 6f72 6d69 640a  sion.platformid.
+00011d50: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
+00011d60: 736f 756e 645f 7665 7273 696f 6e3a 0a20  sound_version:. 
+00011d70: 2020 2020 2020 2020 2020 2063 736f 756e             csoun
+00011d80: 645f 7665 7273 696f 6e20 3d20 5f73 6573  d_version = _ses
+00011d90: 7369 6f6e 2e63 736f 756e 645f 7665 7273  sion.csound_vers
+00011da0: 696f 6e0a 2020 2020 2020 2020 6269 6e64  ion.        bind
+00011db0: 6566 203d 2070 6c75 6769 6e2e 6669 6e64  ef = plugin.find
+00011dc0: 5f62 696e 6172 7928 706c 6174 666f 726d  _binary(platform
+00011dd0: 6964 3d70 6c61 7466 6f72 6d69 642c 2063  id=platformid, c
+00011de0: 736f 756e 645f 7665 7273 696f 6e3d 6373  sound_version=cs
+00011df0: 6f75 6e64 5f76 6572 7369 6f6e 290a 2020  ound_version).  
+00011e00: 2020 2020 2020 6966 206e 6f74 2062 696e        if not bin
+00011e10: 6465 663a 0a20 2020 2020 2020 2020 2020  def:.           
+00011e20: 2061 7661 696c 6162 6c65 203d 2022 2c20   available = ", 
+00011e30: 222e 6a6f 696e 2870 6c75 6769 6e2e 6176  ".join(plugin.av
+00011e40: 6169 6c61 626c 655f 6269 6e61 7269 6573  ailable_binaries
+00011e50: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
+00011e60: 7261 6973 6520 506c 6174 666f 726d 4e6f  raise PlatformNo
+00011e70: 7453 7570 706f 7274 6564 4572 726f 7228  tSupportedError(
+00011e80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011e90: 2066 224e 6f20 6269 6e61 7279 2064 6566   f"No binary def
+00011ea0: 696e 6564 2066 6f72 2070 6c61 7466 6f72  ined for platfor
+00011eb0: 6d20 7b70 6c61 7466 6f72 6d69 647d 202f  m {platformid} /
+00011ec0: 207b 6373 6f75 6e64 5f76 6572 7369 6f6e   {csound_version
+00011ed0: 7d2e 220a 2020 2020 2020 2020 2020 2020  }.".            
+00011ee0: 2020 2020 6622 2041 7661 696c 6162 6c65      f" Available
+00011ef0: 2070 6c61 7466 6f72 6d73 2066 6f72 207b   platforms for {
+00011f00: 706c 7567 696e 2e6e 616d 657d 3a20 7b61  plugin.name}: {a
+00011f10: 7661 696c 6162 6c65 7d22 290a 2020 2020  vailable}").    
+00011f20: 2020 2020 2320 5468 6520 6269 6e61 7279      # The binary
+00011f30: 2064 6566 696e 6573 2061 2075 726c 202f   defines a url /
+00011f40: 2070 6174 6820 756e 6465 7220 7468 6520   path under the 
+00011f50: 2275 726c 2220 6b65 792e 2042 6f74 6820  "url" key. Both 
+00011f60: 6361 6e20 6265 2061 0a20 2020 2020 2020  can be a.       
+00011f70: 2023 2062 696e 6172 7920 2861 202e 736f   # binary (a .so
+00011f80: 2c20 2e64 6c6c 2c20 2e64 796c 6962 2066  , .dll, .dylib f
+00011f90: 696c 6529 206f 7220 6120 2e7a 6970 2066  ile) or a .zip f
+00011fa0: 696c 652e 2049 6e20 7468 6973 206c 6174  ile. In this lat
+00011fb0: 7465 7220 6361 7365 2c0a 2020 2020 2020  ter case,.      
+00011fc0: 2020 2320 7468 6520 6b65 7920 2265 7874    # the key "ext
+00011fd0: 7261 6374 7061 7468 2220 6e65 6564 7320  ractpath" needs 
+00011fe0: 746f 2062 6520 6465 6669 6e65 642c 2069  to be defined, i
+00011ff0: 6e20 7768 6963 6820 6361 7365 2069 7420  n which case it 
+00012000: 706f 696e 7473 2074 6f0a 2020 2020 2020  points to.      
+00012010: 2020 2320 7468 6520 7265 6c61 7469 7665    # the relative
+00012020: 2070 6174 6820 746f 2074 6865 2062 696e   path to the bin
+00012030: 6172 7920 696e 7369 6465 2074 6865 2063  ary inside the c
+00012040: 6f6d 7072 6573 7365 6420 6669 6c65 0a0a  ompressed file..
+00012050: 2020 2020 2020 2020 2320 5468 6520 6d61          # The ma
+00012060: 6e69 6665 7374 2064 6566 696e 6573 2061  nifest defines a
+00012070: 2070 6174 682e 2049 6620 6974 2069 7320   path. If it is 
+00012080: 7265 6c61 7469 7665 2c20 6974 2069 7320  relative, it is 
+00012090: 7265 6c61 7469 7665 2074 6f20 7468 650a  relative to the.
+000120a0: 2020 2020 2020 2020 2320 6d61 6e69 6665          # manife
+000120b0: 7374 2069 7473 656c 662e 0a20 2020 2020  st itself..     
+000120c0: 2020 2069 6620 5f69 735f 7572 6c28 6269     if _is_url(bi
+000120d0: 6e64 6566 2e75 726c 293a 0a20 2020 2020  ndef.url):.     
+000120e0: 2020 2020 2020 2070 6174 6820 3d20 5f64         path = _d
+000120f0: 6f77 6e6c 6f61 645f 6669 6c65 2862 696e  ownload_file(bin
+00012100: 6465 662e 7572 6c29 0a20 2020 2020 2020  def.url).       
+00012110: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00012120: 2020 2023 2075 726c 2070 6f69 6e74 7320     # url points 
+00012130: 746f 2061 206c 6f63 616c 2066 696c 652c  to a local file,
+00012140: 2072 656c 6174 6976 6520 746f 2074 6865   relative to the
+00012150: 206d 616e 6966 6573 740a 2020 2020 2020   manifest.      
+00012160: 2020 2020 2020 6d61 6e69 6665 7374 7061        manifestpa
+00012170: 7468 203d 2070 6c75 6769 6e2e 6c6f 6361  th = plugin.loca
+00012180: 6c5f 6d61 6e69 6665 7374 5f70 6174 6828  l_manifest_path(
+00012190: 290a 2020 2020 2020 2020 2020 2020 7061  ).            pa
+000121a0: 7468 203d 205f 7265 736f 6c76 655f 7061  th = _resolve_pa
+000121b0: 7468 2862 696e 6465 662e 7572 6c2c 2020  th(bindef.url,  
+000121c0: 6d61 6e69 6665 7374 7061 7468 2e70 6172  manifestpath.par
+000121d0: 656e 7429 0a20 2020 2020 2020 205f 6465  ent).        _de
+000121e0: 6275 6728 6622 6765 745f 706c 7567 696e  bug(f"get_plugin
+000121f0: 5f64 6c6c 3a20 7265 736f 6c76 6564 2070  _dll: resolved p
+00012200: 6174 6820 3d20 7b73 7472 2870 6174 6829  ath = {str(path)
+00012210: 7d22 290a 2020 2020 2020 2020 6966 206e  }").        if n
+00012220: 6f74 2070 6174 682e 6578 6973 7473 2829  ot path.exists()
+00012230: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00012240: 6973 6520 494f 4572 726f 7228 6622 4269  ise IOError(f"Bi
+00012250: 6e61 7279 206e 6f74 2066 6f75 6e64 2e20  nary not found. 
+00012260: 4769 7665 6e20 7061 7468 2077 6173 3a20  Given path was: 
+00012270: 7b73 7472 2870 6174 6829 7d22 290a 0a20  {str(path)}").. 
+00012280: 2020 2020 2020 2069 6620 7061 7468 2e73         if path.s
+00012290: 7566 6669 7820 696e 2028 272e 736f 272c  uffix in ('.so',
+000122a0: 2027 2e64 6c6c 272c 2027 2e64 796c 6962   '.dll', '.dylib
+000122b0: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+000122c0: 7265 7475 726e 2070 6174 680a 2020 2020  return path.    
+000122d0: 2020 2020 656c 6966 2070 6174 682e 7375      elif path.su
+000122e0: 6666 6978 203d 3d20 272e 7a69 7027 3a0a  ffix == '.zip':.
+000122f0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00012300: 6f74 2062 696e 6465 662e 6578 7472 6163  ot bindef.extrac
+00012310: 7470 6174 683a 0a20 2020 2020 2020 2020  tpath:.         
+00012320: 2020 2020 2020 2072 6169 7365 2053 6368         raise Sch
+00012330: 656d 6145 7272 6f72 280a 2020 2020 2020  emaError(.      
+00012340: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+00012350: 5468 6520 6269 6e61 7279 2064 6566 696e  The binary defin
+00012360: 6974 696f 6e20 666f 7220 7b70 6c75 6769  ition for {plugi
+00012370: 6e2e 6e61 6d65 7d20 6861 7320 6120 636f  n.name} has a co
+00012380: 6d70 7265 7373 6564 2075 726c 207b 6269  mpressed url {bi
+00012390: 6e64 6566 2e75 726c 7d22 0a20 2020 2020  ndef.url}".     
+000123a0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000123b0: 2220 6275 7420 646f 6573 206e 6f74 2064  " but does not d
+000123c0: 6566 696e 6520 616e 2060 6578 7472 6163  efine an `extrac
+000123d0: 7470 6174 6860 2061 7474 7269 6275 7465  tpath` attribute
+000123e0: 2074 6f20 6c6f 6361 7465 2074 6865 2022   to locate the "
+000123f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012400: 2020 2020 2066 2262 696e 6172 7920 7769       f"binary wi
+00012410: 7468 696e 2074 6865 2063 6f6d 7072 6573  thin the compres
+00012420: 7365 6420 6669 6c65 2229 0a20 2020 2020  sed file").     
+00012430: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+00012440: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00012450: 726e 205f 7a69 705f 6578 7472 6163 745f  rn _zip_extract_
+00012460: 6669 6c65 2870 6174 682c 2062 696e 6465  file(path, binde
+00012470: 662e 6578 7472 6163 7470 6174 6829 0a20  f.extractpath). 
+00012480: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00012490: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+000124a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000124b0: 2020 7261 6973 6520 5275 6e74 696d 6545    raise RuntimeE
+000124c0: 7272 6f72 2866 2245 7272 6f72 2077 6869  rror(f"Error whi
+000124d0: 6c65 2065 7874 7261 6374 696e 6720 7b62  le extracting {b
+000124e0: 696e 6465 662e 6578 7472 6163 7470 6174  indef.extractpat
+000124f0: 687d 2066 726f 6d20 7a69 7020 7b73 7472  h} from zip {str
+00012500: 2870 6174 6829 7d3a 207b 657d 2229 0a20  (path)}: {e}"). 
+00012510: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00012520: 2020 2020 2020 2020 2072 6169 7365 2053           raise S
+00012530: 6368 656d 6145 7272 6f72 2866 2253 7566  chemaError(f"Suf
+00012540: 6669 7820 7b70 6174 682e 7375 6666 6978  fix {path.suffix
+00012550: 7d20 6e6f 7420 7375 7070 6f72 7465 6420  } not supported 
+00012560: 696e 2075 726c 3a20 7b62 696e 6465 662e  in url: {bindef.
+00012570: 7572 6c7d 2229 0a0a 2020 2020 6465 6620  url}")..    def 
+00012580: 6f70 636f 6465 735f 6279 5f6e 616d 6528  opcodes_by_name(
+00012590: 7365 6c66 2920 2d3e 2064 6963 745b 7374  self) -> dict[st
+000125a0: 722c 204f 7063 6f64 655d 3a0a 2020 2020  r, Opcode]:.    
+000125b0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000125c0: 5265 7475 726e 7320 6120 6469 6374 206d  Returns a dict m
+000125d0: 6170 7069 6e67 206f 7063 6f64 656e 616d  apping opcodenam
+000125e0: 6520 746f 2061 6e20 4f70 636f 6465 2064  e to an Opcode d
+000125f0: 6566 696e 6974 696f 6e0a 2020 2020 2020  efinition.      
+00012600: 2020 2222 220a 2020 2020 2020 2020 6f75    """.        ou
+00012610: 7420 3d20 7365 6c66 2e5f 6361 6368 652e  t = self._cache.
+00012620: 6765 7428 276f 7063 6f64 6573 5f62 795f  get('opcodes_by_
+00012630: 6e61 6d65 2729 0a20 2020 2020 2020 2069  name').        i
+00012640: 6620 6f75 743a 0a20 2020 2020 2020 2020  f out:.         
+00012650: 2020 2072 6574 7572 6e20 6f75 740a 2020     return out.  
+00012660: 2020 2020 2020 6f75 7420 3d20 7b6f 7063        out = {opc
+00012670: 6f64 652e 6e61 6d65 3a20 6f70 636f 6465  ode.name: opcode
+00012680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012690: 666f 7220 6f70 636f 6465 2069 6e20 7365  for opcode in se
+000126a0: 6c66 2e64 6566 696e 6564 5f6f 7063 6f64  lf.defined_opcod
+000126b0: 6573 2829 7d0a 2020 2020 2020 2020 7365  es()}.        se
+000126c0: 6c66 2e5f 6361 6368 655b 276f 7063 6f64  lf._cache['opcod
+000126d0: 6573 5f62 795f 6e61 6d65 275d 203d 206f  es_by_name'] = o
+000126e0: 7574 0a20 2020 2020 2020 2072 6574 7572  ut.        retur
+000126f0: 6e20 6f75 740a 0a20 2020 2064 6566 2070  n out..    def p
+00012700: 6172 7365 5f6d 616e 7061 6765 2873 656c  arse_manpage(sel
+00012710: 662c 206f 7063 6f64 653a 2073 7472 2920  f, opcode: str) 
+00012720: 2d3e 204d 616e 5061 6765 207c 204e 6f6e  -> ManPage | Non
+00012730: 653a 0a20 2020 2020 2020 2022 2222 0a20  e:.        """. 
+00012740: 2020 2020 2020 2050 6172 7365 2074 6865         Parse the
+00012750: 206d 616e 7561 6c20 7061 6765 2066 6f72   manual page for
+00012760: 2061 2067 6976 656e 206f 7063 6f64 650a   a given opcode.
+00012770: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+00012780: 2020 2020 2020 2020 2020 206f 7063 6f64             opcod
+00012790: 653a 206f 7063 6f64 6520 6e61 6d65 0a0a  e: opcode name..
+000127a0: 2020 2020 2020 2020 5265 7475 726e 733a          Returns:
+000127b0: 0a20 2020 2020 2020 2020 2020 2061 204d  .            a M
+000127c0: 616e 5061 6765 2c20 6966 2061 206d 616e  anPage, if a man
+000127d0: 7061 6765 2077 6173 2066 6f75 6e64 2066  page was found f
+000127e0: 6f72 2074 6865 206f 7063 6f64 652c 206f  or the opcode, o
+000127f0: 7220 4e6f 6e65 0a20 2020 2020 2020 2022  r None.        "
+00012800: 2222 0a20 2020 2020 2020 206d 616e 7061  "".        manpa
+00012810: 6765 203d 2073 656c 662e 6669 6e64 5f6d  ge = self.find_m
+00012820: 616e 7061 6765 286f 7063 6f64 652c 206d  anpage(opcode, m
+00012830: 6172 6b64 6f77 6e3d 5472 7565 290a 2020  arkdown=True).  
+00012840: 2020 2020 2020 7265 7475 726e 205f 6d61        return _ma
+00012850: 6e70 6167 655f 7061 7273 6528 6d61 6e70  npage_parse(manp
+00012860: 6167 652c 206f 7063 6f64 6529 2069 6620  age, opcode) if 
+00012870: 6d61 6e70 6167 6520 656c 7365 204e 6f6e  manpage else Non
+00012880: 650a 0a20 2020 2064 6566 2064 6566 696e  e..    def defin
+00012890: 6564 5f6f 7063 6f64 6573 2873 656c 6629  ed_opcodes(self)
+000128a0: 202d 3e20 6c69 7374 5b4f 7063 6f64 655d   -> list[Opcode]
+000128b0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+000128c0: 2020 2020 2020 5265 7475 726e 7320 6120        Returns a 
+000128d0: 6c69 7374 206f 6620 6f70 636f 6465 730a  list of opcodes.
 000128e0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000128f0: 2020 2020 6d61 726b 646f 776e 6669 6c65      markdownfile
-00012900: 203d 206f 7063 6f64 6520 2b20 222e 6d64   = opcode + ".md
-00012910: 220a 2020 2020 2020 2020 7061 7468 203d  ".        path =
-00012920: 2073 656c 662e 7265 736f 6c76 655f 646f   self.resolve_do
-00012930: 635f 666f 6c64 6572 2829 202f 206d 6172  c_folder() / mar
-00012940: 6b64 6f77 6e66 696c 650a 2020 2020 2020  kdownfile.      
-00012950: 2020 7265 7475 726e 2070 6174 6820 6966    return path if
-00012960: 2070 6174 682e 6578 6973 7473 2829 2065   path.exists() e
-00012970: 6c73 6520 4e6f 6e65 0a0a 2020 2020 6465  lse None..    de
-00012980: 6620 7265 736f 6c76 655f 7061 7468 2873  f resolve_path(s
-00012990: 656c 662c 2072 656c 7061 7468 3a20 556e  elf, relpath: Un
-000129a0: 696f 6e5b 5061 7468 2c20 7374 725d 2920  ion[Path, str]) 
-000129b0: 2d3e 2050 6174 683a 0a20 2020 2020 2020  -> Path:.       
-000129c0: 2022 2222 0a20 2020 2020 2020 2052 6574   """.        Ret
-000129d0: 7572 6e73 2074 6865 2061 6273 6f6c 7574  urns the absolut
-000129e0: 6520 7061 7468 2072 656c 6174 6976 6520  e path relative 
-000129f0: 746f 2074 6865 206d 616e 6966 6573 7420  to the manifest 
-00012a00: 7061 7468 206f 6620 7468 6973 2070 6c75  path of this plu
-00012a10: 6769 6e0a 2020 2020 2020 2020 2222 220a  gin.        """.
-00012a20: 2020 2020 2020 2020 726f 6f74 203d 2073          root = s
-00012a30: 656c 662e 6c6f 6361 6c5f 6d61 6e69 6665  elf.local_manife
-00012a40: 7374 5f70 6174 6828 292e 7061 7265 6e74  st_path().parent
-00012a50: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00012a60: 5f72 6573 6f6c 7665 5f70 6174 6828 7265  _resolve_path(re
-00012a70: 6c70 6174 682c 2072 6f6f 7429 0a0a 2020  lpath, root)..  
-00012a80: 2020 6465 6620 7265 736f 6c76 655f 646f    def resolve_do
-00012a90: 635f 666f 6c64 6572 2873 656c 6629 202d  c_folder(self) -
-00012aa0: 3e20 5061 7468 3a0a 2020 2020 2020 2020  > Path:.        
-00012ab0: 2222 220a 2020 2020 2020 2020 5265 736f  """.        Reso
-00012ac0: 6c76 6520 7468 6520 646f 6320 666f 6c64  lve the doc fold
-00012ad0: 6572 2066 6f72 2074 6869 7320 706c 7567  er for this plug
-00012ae0: 696e 0a0a 2020 2020 2020 2020 4120 646f  in..        A do
-00012af0: 6320 666f 6c64 6572 2063 616e 2062 6520  c folder can be 
-00012b00: 6465 636c 6172 6564 2069 6e20 7468 6520  declared in the 
-00012b10: 6d61 6e69 6665 7374 2061 7320 6120 7265  manifest as a re
-00012b20: 6c61 7469 7665 2070 6174 680a 2020 2020  lative path.    
-00012b30: 2020 2020 746f 2074 6865 206d 616e 6966      to the manif
-00012b40: 6573 7420 6974 7365 6c66 2e20 4966 206e  est itself. If n
-00012b50: 6f74 2067 6976 656e 2c20 6974 2064 6566  ot given, it def
-00012b60: 6175 6c74 7320 746f 2061 2027 646f 6327  aults to a 'doc'
-00012b70: 2066 6f6c 6465 720a 2020 2020 2020 2020   folder.        
-00012b80: 6265 7369 6465 7320 7468 6520 6d61 6e69  besides the mani
-00012b90: 6665 7374 0a20 2020 2020 2020 2022 2222  fest.        """
-00012ba0: 0a20 2020 2020 2020 2072 6f6f 7420 3d20  .        root = 
-00012bb0: 7365 6c66 2e6c 6f63 616c 5f6d 616e 6966  self.local_manif
-00012bc0: 6573 745f 7061 7468 2829 2e70 6172 656e  est_path().paren
-00012bd0: 740a 2020 2020 2020 2020 646f 635f 666f  t.        doc_fo
-00012be0: 6c64 6572 203d 205f 7265 736f 6c76 655f  lder = _resolve_
-00012bf0: 7061 7468 2873 656c 662e 646f 635f 666f  path(self.doc_fo
-00012c00: 6c64 6572 206f 7220 2264 6f63 222c 2072  lder or "doc", r
-00012c10: 6f6f 7429 0a20 2020 2020 2020 2069 6620  oot).        if 
-00012c20: 6e6f 7420 646f 635f 666f 6c64 6572 2e65  not doc_folder.e
-00012c30: 7869 7374 7328 293a 0a20 2020 2020 2020  xists():.       
-00012c40: 2020 2020 2072 6169 7365 204f 5345 7272       raise OSErr
-00012c50: 6f72 2866 224e 6f20 646f 6320 666f 6c64  or(f"No doc fold
-00012c60: 6572 2066 6f75 6e64 2028 6465 636c 6172  er found (declar
-00012c70: 6564 2061 7320 7b64 6f63 5f66 6f6c 6465  ed as {doc_folde
-00012c80: 727d 2229 0a20 2020 2020 2020 2072 6574  r}").        ret
-00012c90: 7572 6e20 646f 635f 666f 6c64 6572 0a0a  urn doc_folder..
-00012ca0: 2020 2020 6465 6620 6669 6e64 5f62 696e      def find_bin
-00012cb0: 6172 7928 7365 6c66 2c20 706c 6174 666f  ary(self, platfo
-00012cc0: 726d 6964 3d27 272c 2063 736f 756e 645f  rmid='', csound_
-00012cd0: 7665 7273 696f 6e3a 2069 6e74 203d 2030  version: int = 0
-00012ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012cf0: 2020 2020 2029 202d 3e20 4f70 7469 6f6e       ) -> Option
-00012d00: 616c 5b42 696e 6172 795d 3a0a 2020 2020  al[Binary]:.    
-00012d10: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00012d20: 4669 6e64 2061 2062 696e 6172 7920 666f  Find a binary fo
-00012d30: 7220 7468 6520 706c 6174 666f 726d 2061  r the platform a
-00012d40: 6e64 2063 736f 756e 6420 7665 7273 696f  nd csound versio
-00012d50: 6e73 2067 6976 656e 202f 2063 7572 7265  ns given / curre
-00012d60: 6e74 0a0a 2020 2020 2020 2020 4172 6773  nt..        Args
-00012d70: 3a0a 2020 2020 2020 2020 2020 2020 706c  :.            pl
-00012d80: 6174 666f 726d 6964 3a20 7468 6520 706c  atformid: the pl
-00012d90: 6174 666f 726d 2069 642e 2049 6620 696e  atform id. If in
-00012da0: 7465 6c20 7838 362d 3634 2c20 7369 6d70  tel x86-64, simp
-00012db0: 6c79 2074 6865 2070 6c61 7466 6f72 6d20  ly the platform 
-00012dc0: 2827 6d61 636f 7327 2c20 276c 696e 7578  ('macos', 'linux
-00012dd0: 272c 2027 7769 6e64 6f77 7327 292c 0a20  ', 'windows'),. 
-00012de0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00012df0: 7468 6572 7769 7365 2074 6865 2070 6c61  therwise the pla
-00012e00: 7466 6f72 6d20 616e 6420 6172 6368 6974  tform and archit
-00012e10: 6563 7475 7265 2028 276d 6163 6f73 2d61  ecture ('macos-a
-00012e20: 726d 3634 272c 2027 6c69 6e75 782d 6172  rm64', 'linux-ar
-00012e30: 6d36 3427 2c20 2e2e 2e29 0a20 2020 2020  m64', ...).     
-00012e40: 2020 2020 2020 2063 736f 756e 645f 7665         csound_ve
-00012e50: 7273 696f 6e3a 2074 6865 2063 736f 756e  rsion: the csoun
-00012e60: 6420 7665 7273 696f 6e20 6173 2069 6e74  d version as int
-00012e70: 2028 362e 3138 203d 2036 3138 302c 2036   (6.18 = 6180, 6
-00012e80: 2e31 3920 3d20 3631 3930 2c20 372e 3031  .19 = 6190, 7.01
-00012e90: 203d 2037 3031 3029 2e20 5468 6973 2073   = 7010). This s
-00012ea0: 686f 756c 6420 6265 0a20 2020 2020 2020  hould be.       
-00012eb0: 2020 2020 2020 2020 2074 6865 2076 6572           the ver
-00012ec0: 7369 6f6e 206f 6620 6373 6f75 6e64 2066  sion of csound f
-00012ed0: 6f72 2077 6869 6368 2074 6865 2070 6c75  or which the plu
-00012ee0: 6769 6e20 6973 2074 6f20 6265 2069 6e73  gin is to be ins
-00012ef0: 7461 6c6c 6564 2e20 496e 2074 6865 2070  talled. In the p
-00012f00: 6c75 6769 6e20 6465 6669 6e69 7469 6f6e  lugin definition
-00012f10: 2065 6163 680a 2020 2020 2020 2020 2020   each.          
-00012f20: 2020 2020 2020 6269 6e61 7279 2064 6566        binary def
-00012f30: 696e 6573 2061 2076 6572 7369 6f6e 2072  ines a version r
-00012f40: 616e 6765 2066 6f72 2077 6869 6368 2069  ange for which i
-00012f50: 7420 6973 2062 7569 6c74 2e0a 0a20 2020  t is built...   
-00012f60: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-00012f70: 2020 2020 2020 2020 2020 6120 4269 6e61            a Bina
-00012f80: 7279 2077 6869 6368 206d 6174 6368 6573  ry which matches
-00012f90: 2074 6865 2067 6976 656e 2070 6c61 7466   the given platf
-00012fa0: 6f72 6d20 616e 6420 6373 6f75 6e64 2076  orm and csound v
-00012fb0: 6572 7369 6f6e 2c20 6f72 204e 6f6e 650a  ersion, or None.
-00012fc0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00012fd0: 6f20 6d61 7463 6820 706f 7373 6962 6c65  o match possible
-00012fe0: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-00012ff0: 2020 2020 2020 6966 206e 6f74 2063 736f        if not cso
-00013000: 756e 645f 7665 7273 696f 6e3a 0a20 2020  und_version:.   
-00013010: 2020 2020 2020 2020 2063 736f 756e 645f           csound_
-00013020: 7665 7273 696f 6e20 3d20 5f73 6573 7369  version = _sessi
-00013030: 6f6e 2e63 736f 756e 645f 7665 7273 696f  on.csound_versio
-00013040: 6e0a 2020 2020 2020 2020 656c 7365 3a0a  n.        else:.
-00013050: 2020 2020 2020 2020 2020 2020 6173 7365              asse
-00013060: 7274 2069 7369 6e73 7461 6e63 6528 6373  rt isinstance(cs
-00013070: 6f75 6e64 5f76 6572 7369 6f6e 2c20 696e  ound_version, in
-00013080: 7429 2061 6e64 2063 736f 756e 645f 7665  t) and csound_ve
-00013090: 7273 696f 6e20 3e3d 2036 3030 302c 2066  rsion >= 6000, f
-000130a0: 2247 6f74 207b 6373 6f75 6e64 5f76 6572  "Got {csound_ver
-000130b0: 7369 6f6e 7d22 0a0a 2020 2020 2020 2020  sion}"..        
-000130c0: 6966 206e 6f74 2070 6c61 7466 6f72 6d69  if not platformi
-000130d0: 643a 0a20 2020 2020 2020 2020 2020 2070  d:.            p
-000130e0: 6c61 7466 6f72 6d69 6420 3d20 5f73 6573  latformid = _ses
-000130f0: 7369 6f6e 2e70 6c61 7466 6f72 6d69 640a  sion.platformid.
-00013100: 0a20 2020 2020 2020 2070 6f73 7369 626c  .        possibl
-00013110: 655f 6269 6e61 7269 6573 203d 205b 6220  e_binaries = [b 
-00013120: 666f 7220 6220 696e 2073 656c 662e 6269  for b in self.bi
-00013130: 6e61 7269 6573 0a20 2020 2020 2020 2020  naries.         
-00013140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013150: 2020 2020 6966 2062 2e70 6c61 7466 6f72      if b.platfor
-00013160: 6d20 3d3d 2070 6c61 7466 6f72 6d69 6420  m == platformid 
-00013170: 616e 6420 622e 6d61 7463 6865 735f 7665  and b.matches_ve
-00013180: 7273 696f 6e69 6428 6373 6f75 6e64 5f76  rsionid(csound_v
-00013190: 6572 7369 6f6e 295d 0a20 2020 2020 2020  ersion)].       
-000131a0: 2069 6620 6e6f 7420 706f 7373 6962 6c65   if not possible
-000131b0: 5f62 696e 6172 6965 733a 0a20 2020 2020  _binaries:.     
-000131c0: 2020 2020 2020 205f 6465 6275 6728 6622         _debug(f"
-000131d0: 506c 7567 696e 2027 7b73 656c 662e 6e61  Plugin '{self.na
-000131e0: 6d65 7d27 2064 6f65 7320 6e6f 7420 7365  me}' does not se
-000131f0: 656d 2074 6f20 6861 7665 2061 2062 696e  em to have a bin
-00013200: 6172 7920 666f 7220 706c 6174 666f 726d  ary for platform
-00013210: 2027 7b70 6c61 7466 6f72 6d69 647d 272e   '{platformid}'.
-00013220: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
-00013230: 2020 2020 2020 6622 466f 756e 6420 6269        f"Found bi
-00013240: 6e61 7269 6573 2066 6f72 2070 6c61 7466  naries for platf
-00013250: 6f72 6d73 3a20 7b5b 622e 706c 6174 666f  orms: {[b.platfo
-00013260: 726d 2066 6f72 2062 2069 6e20 7365 6c66  rm for b in self
-00013270: 2e62 696e 6172 6965 735d 7d22 290a 2020  .binaries]}").  
-00013280: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00013290: 204e 6f6e 650a 2020 2020 2020 2020 656c   None.        el
-000132a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000132b0: 6966 206c 656e 2870 6f73 7369 626c 655f  if len(possible_
-000132c0: 6269 6e61 7269 6573 2920 3e20 313a 0a20  binaries) > 1:. 
-000132d0: 2020 2020 2020 2020 2020 2020 2020 205f                 _
-000132e0: 6465 6275 6728 6622 466f 756e 6420 6d75  debug(f"Found mu
-000132f0: 6c74 6970 6c65 2062 696e 6172 6965 7320  ltiple binaries 
-00013300: 666f 7220 7b73 656c 662e 6e61 6d65 7d2e  for {self.name}.
-00013310: 2057 696c 6c20 7365 6c65 6374 2074 6865   Will select the
-00013320: 2066 6972 7374 206f 6e65 2229 0a20 2020   first one").   
-00013330: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00013340: 706f 7373 6962 6c65 5f62 696e 6172 6965  possible_binarie
-00013350: 735b 305d 0a0a 2020 2020 6465 6620 6176  s[0]..    def av
-00013360: 6169 6c61 626c 655f 6269 6e61 7269 6573  ailable_binaries
-00013370: 2873 656c 6629 202d 3e20 6c69 7374 5b73  (self) -> list[s
-00013380: 7472 5d3a 0a20 2020 2020 2020 2072 6574  tr]:.        ret
-00013390: 7572 6e20 5b66 227b 6269 6e61 7279 2e70  urn [f"{binary.p
-000133a0: 6c61 7466 6f72 6d7d 2f63 736f 756e 647b  latform}/csound{
-000133b0: 6269 6e61 7279 2e63 736f 756e 645f 7665  binary.csound_ve
-000133c0: 7273 696f 6e7d 220a 2020 2020 2020 2020  rsion}".        
-000133d0: 2020 2020 2020 2020 666f 7220 6269 6e61          for bina
-000133e0: 7279 2069 6e20 7365 6c66 2e62 696e 6172  ry in self.binar
-000133f0: 6965 735d 0a0a 0a40 6461 7461 636c 6173  ies]...@dataclas
-00013400: 730a 636c 6173 7320 4f70 636f 6465 3a0a  s.class Opcode:.
-00013410: 2020 2020 6e61 6d65 3a20 7374 720a 2020      name: str.  
-00013420: 2020 706c 7567 696e 3a20 7374 720a 2020    plugin: str.  
-00013430: 2020 7379 6e74 6178 6573 3a20 4f70 7469    syntaxes: Opti
-00013440: 6f6e 616c 5b6c 6973 745b 7374 725d 5d20  onal[list[str]] 
-00013450: 3d20 4e6f 6e65 0a20 2020 2061 6273 7472  = None.    abstr
-00013460: 6163 743a 2073 7472 203d 2027 270a 2020  act: str = ''.  
-00013470: 2020 696e 7374 616c 6c65 643a 2062 6f6f    installed: boo
-00013480: 6c20 3d20 5472 7565 0a0a 0a40 6461 7461  l = True...@data
-00013490: 636c 6173 730a 636c 6173 7320 496e 7374  class.class Inst
-000134a0: 616c 6c65 6450 6c75 6769 6e49 6e66 6f3a  alledPluginInfo:
-000134b0: 0a20 2020 2022 2222 0a20 2020 2049 6e66  .    """.    Inf
-000134c0: 6f72 6d61 7469 6f6e 2061 626f 7574 2061  ormation about a
-000134d0: 6e20 696e 7374 616c 6c65 6420 706c 7567  n installed plug
-000134e0: 696e 0a0a 2020 2020 4174 7472 6962 733a  in..    Attribs:
-000134f0: 0a20 2020 2020 2020 206e 616d 653a 2028  .        name: (
-00013500: 7374 7229 206e 616d 6520 6f66 2074 6865  str) name of the
-00013510: 2070 6c75 6769 6e0a 2020 2020 2020 2020   plugin.        
-00013520: 646c 6c70 6174 683a 2028 5061 7468 2920  dllpath: (Path) 
-00013530: 7061 7468 206f 6620 7468 6520 706c 7567  path of the plug
-00013540: 696e 2062 696e 6172 7920 2861 202e 736f  in binary (a .so
-00013550: 2c20 2e64 6c6c 206f 7220 2e64 796c 6962  , .dll or .dylib
-00013560: 2066 696c 6529 0a20 2020 2020 2020 2069   file).        i
-00013570: 6e73 7461 6c6c 6564 5f69 6e5f 7379 7374  nstalled_in_syst
-00013580: 656d 5f66 6f6c 6465 723a 2028 626f 6f6c  em_folder: (bool
-00013590: 2920 6973 2074 6869 7320 696e 7374 616c  ) is this instal
-000135a0: 6c65 6420 696e 2074 6865 2073 7973 7465  led in the syste
-000135b0: 6d73 2066 6f6c 6465 723f 0a20 2020 2020  ms folder?.     
-000135c0: 2020 2069 6e73 7461 6c6c 6564 5f6d 616e     installed_man
-000135d0: 6966 6573 745f 7061 7468 3a20 2850 6174  ifest_path: (Pat
-000135e0: 6829 2074 6865 2070 6174 6820 746f 2074  h) the path to t
-000135f0: 6865 2069 6e73 7461 6c6c 6174 696f 6e20  he installation 
-00013600: 6d61 6e69 6665 7374 2028 6120 2e6a 736f  manifest (a .jso
-00013610: 6e20 6669 6c65 290a 2020 2020 2020 2020  n file).        
-00013620: 7665 7273 696f 6e73 7472 3a20 2873 7472  versionstr: (str
-00013630: 2920 7468 6520 696e 7374 616c 6c65 6420  ) the installed 
-00013640: 7665 7273 696f 6e2c 2061 7320 7374 7220  version, as str 
-00013650: 2869 6620 696e 7374 616c 6c65 6420 7669  (if installed vi
-00013660: 6120 7269 7373 6574 290a 2020 2020 2222  a risset).    ""
-00013670: 220a 2020 2020 6e61 6d65 3a20 7374 720a  ".    name: str.
-00013680: 2020 2020 646c 6c70 6174 683a 2050 6174      dllpath: Pat
-00013690: 680a 2020 2020 7665 7273 696f 6e73 7472  h.    versionstr
-000136a0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d0a  : Optional[str].
-000136b0: 2020 2020 696e 7374 616c 6c65 645f 6d61      installed_ma
-000136c0: 6e69 6665 7374 5f70 6174 683a 204f 7074  nifest_path: Opt
-000136d0: 696f 6e61 6c5b 5061 7468 5d20 3d20 4e6f  ional[Path] = No
-000136e0: 6e65 0a20 2020 2069 6e73 7461 6c6c 6564  ne.    installed
-000136f0: 5f69 6e5f 7379 7374 656d 5f66 6f6c 6465  _in_system_folde
-00013700: 723a 2062 6f6f 6c20 3d20 4661 6c73 650a  r: bool = False.
-00013710: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
-00013720: 2020 2064 6566 2076 6572 7369 6f6e 7475     def versiontu
-00013730: 706c 6528 7365 6c66 2920 2d3e 2074 7570  ple(self) -> tup
-00013740: 6c65 5b69 6e74 2c20 696e 742c 2069 6e74  le[int, int, int
-00013750: 5d3a 0a20 2020 2020 2020 2072 6574 7572  ]:.        retur
-00013760: 6e20 5f76 6572 7369 6f6e 5f74 7570 6c65  n _version_tuple
-00013770: 2873 656c 662e 7665 7273 696f 6e73 7472  (self.versionstr
-00013780: 2920 6966 2073 656c 662e 7665 7273 696f  ) if self.versio
-00013790: 6e73 7472 2061 6e64 2073 656c 662e 7665  nstr and self.ve
-000137a0: 7273 696f 6e73 7472 2021 3d20 554e 4b4e  rsionstr != UNKN
-000137b0: 4f57 4e5f 5645 5253 494f 4e20 656c 7365  OWN_VERSION else
-000137c0: 2028 302c 2030 2c20 3029 0a0a 0a64 6566   (0, 0, 0)...def
-000137d0: 205f 6d61 696e 5f72 6570 6f73 6974 6f72   _main_repositor
-000137e0: 795f 7061 7468 2829 202d 3e20 5061 7468  y_path() -> Path
-000137f0: 3a0a 2020 2020 2222 220a 2020 2020 4765  :.    """.    Ge
-00013800: 7420 7468 6520 7061 7468 206f 6620 7468  t the path of th
-00013810: 6520 6d61 696e 2064 6174 6120 7265 706f  e main data repo
-00013820: 7369 746f 7279 0a0a 2020 2020 5468 6520  sitory..    The 
-00013830: 6d61 696e 2072 6570 6f73 6974 6f72 7920  main repository 
-00013840: 6973 2074 6865 2072 6570 6f73 6974 6f72  is the repositor
-00013850: 7920 686f 6c64 696e 6720 7269 7373 6574  y holding risset
-00013860: 2773 206d 6169 6e20 696e 6465 782e 0a20  's main index.. 
-00013870: 2020 2054 6865 206d 6169 6e20 696e 6465     The main inde
-00013880: 7820 6973 2061 202e 6a73 6f6e 2066 696c  x is a .json fil
-00013890: 6520 7769 7468 2074 6865 206e 616d 6520  e with the name 
-000138a0: 2272 6973 7365 7469 6e64 6578 2e6a 736f  "rissetindex.jso
-000138b0: 6e22 2077 6865 7265 0a20 2020 2061 6c6c  n" where.    all
-000138c0: 2070 6c75 6769 6e73 2061 6e64 206f 7468   plugins and oth
-000138d0: 6572 2072 6573 6f75 7263 6573 2061 7265  er resources are
-000138e0: 2069 6e64 6578 6564 2e0a 0a20 2020 2054   indexed...    T
-000138f0: 6865 2070 6174 6820 7265 7475 726e 6564  he path returned
-00013900: 2068 6572 6520 6465 7465 726d 696e 6573   here determines
-00013910: 2077 6865 7265 2074 6869 7320 7265 706f   where this repo
-00013920: 7369 746f 7279 2073 686f 756c 6420 6265  sitory should be
-00013930: 0a20 2020 2063 6c6f 6e65 6420 6c6f 6361  .    cloned loca
-00013940: 6c6c 790a 2020 2020 2222 220a 2020 2020  lly.    """.    
-00013950: 7265 7475 726e 2052 4953 5345 545f 524f  return RISSET_RO
-00013960: 4f54 202f 2022 7269 7373 6574 2d64 6174  OT / "risset-dat
-00013970: 6122 0a0a 0a64 6566 2075 7365 725f 706c  a"...def user_pl
-00013980: 7567 696e 735f 7061 7468 286d 616a 6f72  ugins_path(major
-00013990: 7665 7273 696f 6e3d 3629 202d 3e20 5061  version=6) -> Pa
-000139a0: 7468 3a0a 2020 2020 2222 220a 2020 2020  th:.    """.    
-000139b0: 5265 7475 726e 2074 6865 2069 6e73 7461  Return the insta
-000139c0: 6c6c 2070 6174 6820 666f 7220 7573 6572  ll path for user
-000139d0: 2070 6c75 6769 6e73 0a0a 2020 2020 5468   plugins..    Th
-000139e0: 6973 2072 6574 7572 6e73 2074 6865 2064  is returns the d
-000139f0: 6566 6175 6c74 2070 6174 6820 6f72 2074  efault path or t
-00013a00: 6865 2076 616c 7565 206f 6620 2443 535f  he value of $CS_
-00013a10: 5553 4552 5f50 4c55 4749 4e44 4952 2e20  USER_PLUGINDIR. 
-00013a20: 5468 6520 656e 760a 2020 2020 7661 7269  The env.    vari
-00013a30: 6162 6c65 2068 6173 2070 7269 6f72 6974  able has priorit
-00013a40: 790a 2020 2020 2222 220a 2020 2020 6373  y.    """.    cs
-00013a50: 5f75 7365 725f 706c 7567 696e 6469 7220  _user_plugindir 
-00013a60: 3d20 6f73 2e67 6574 656e 7628 2243 535f  = os.getenv("CS_
-00013a70: 5553 4552 5f50 4c55 4749 4e44 4952 2229  USER_PLUGINDIR")
-00013a80: 0a20 2020 2069 6620 6373 5f75 7365 725f  .    if cs_user_
-00013a90: 706c 7567 696e 6469 723a 0a20 2020 2020  plugindir:.     
-00013aa0: 2020 206f 7574 203d 2050 6174 6828 6373     out = Path(cs
-00013ab0: 5f75 7365 725f 706c 7567 696e 6469 7229  _user_plugindir)
-00013ac0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00013ad0: 2020 2070 6c75 6769 6e73 6469 7220 3d20     pluginsdir = 
-00013ae0: 7b0a 2020 2020 2020 2020 2020 2020 276c  {.            'l
-00013af0: 696e 7578 273a 2066 2724 484f 4d45 2f2e  inux': f'$HOME/.
-00013b00: 6c6f 6361 6c2f 6c69 622f 6373 6f75 6e64  local/lib/csound
-00013b10: 2f7b 6d61 6a6f 7276 6572 7369 6f6e 7d2e  /{majorversion}.
-00013b20: 302f 706c 7567 696e 7336 3427 2c0a 2020  0/plugins64',.  
-00013b30: 2020 2020 2020 2020 2020 2777 696e 3332            'win32
-00013b40: 273a 2066 2743 3a5c 5c55 7365 7273 5c5c  ': f'C:\\Users\\
-00013b50: 2455 5345 524e 414d 455c 5c41 7070 4461  $USERNAME\\AppDa
-00013b60: 7461 5c5c 4c6f 6361 6c5c 5c63 736f 756e  ta\\Local\\csoun
-00013b70: 645c 5c7b 6d61 6a6f 7276 6572 7369 6f6e  d\\{majorversion
-00013b80: 7d2e 305c 5c70 6c75 6769 6e73 3634 272c  }.0\\plugins64',
-00013b90: 0a20 2020 2020 2020 2020 2020 2027 6461  .            'da
-00013ba0: 7277 696e 273a 2066 2724 484f 4d45 2f4c  rwin': f'$HOME/L
-00013bb0: 6962 7261 7279 2f63 736f 756e 642f 7b6d  ibrary/csound/{m
-00013bc0: 616a 6f72 7665 7273 696f 6e7d 2e30 2f70  ajorversion}.0/p
-00013bd0: 6c75 6769 6e73 3634 270a 2020 2020 2020  lugins64'.      
-00013be0: 2020 7d5b 7379 732e 706c 6174 666f 726d    }[sys.platform
-00013bf0: 5d0a 2020 2020 2020 2020 6f75 7420 3d20  ].        out = 
-00013c00: 5061 7468 286f 732e 7061 7468 2e65 7870  Path(os.path.exp
-00013c10: 616e 6476 6172 7328 706c 7567 696e 7364  andvars(pluginsd
-00013c20: 6972 2929 0a20 2020 2072 6574 7572 6e20  ir)).    return 
-00013c30: 6f75 740a 0a0a 6465 6620 5f69 735f 676c  out...def _is_gl
-00013c40: 6f62 2873 3a20 7374 7229 202d 3e20 626f  ob(s: str) -> bo
-00013c50: 6f6c 3a0a 2020 2020 7265 7475 726e 2022  ol:.    return "
-00013c60: 2a22 2069 6e20 7320 6f72 2022 3f22 2069  *" in s or "?" i
-00013c70: 6e20 730a 0a0a 6465 6620 5f7a 6970 5f65  n s...def _zip_e
-00013c80: 7874 7261 6374 5f66 6f6c 6465 7228 7a69  xtract_folder(zi
-00013c90: 7066 696c 653a 2050 6174 682c 2066 6f6c  pfile: Path, fol
-00013ca0: 6465 723a 2073 7472 2c20 636c 6561 6e75  der: str, cleanu
-00013cb0: 703d 5472 7565 2c20 6465 7374 726f 6f74  p=True, destroot
-00013cc0: 3a20 5061 7468 203d 204e 6f6e 6529 202d  : Path = None) -
-00013cd0: 3e20 5061 7468 3a0a 2020 2020 666f 6c64  > Path:.    fold
-00013ce0: 6572 6e61 6d65 203d 206f 732e 7061 7468  ername = os.path
-00013cf0: 2e73 706c 6974 2866 6f6c 6465 7229 5b31  .split(folder)[1
-00013d00: 5d0a 2020 2020 726f 6f74 203d 2050 6174  ].    root = Pat
-00013d10: 6828 7465 6d70 6669 6c65 2e6d 6b74 656d  h(tempfile.mktem
-00013d20: 7028 2929 0a20 2020 2072 6f6f 742e 6d6b  p()).    root.mk
-00013d30: 6469 7228 7061 7265 6e74 733d 5472 7565  dir(parents=True
-00013d40: 2c20 6578 6973 745f 6f6b 3d54 7275 6529  , exist_ok=True)
-00013d50: 0a20 2020 207a 203d 205a 6970 4669 6c65  .    z = ZipFile
-00013d60: 287a 6970 6669 6c65 2c20 2772 2729 0a20  (zipfile, 'r'). 
-00013d70: 2020 2070 6174 7465 726e 203d 2066 6f6c     pattern = fol
-00013d80: 6465 7220 2b20 272f 2a27 0a20 2020 2065  der + '/*'.    e
-00013d90: 7874 7261 6374 6564 203d 205b 7a2e 6578  xtracted = [z.ex
-00013da0: 7472 6163 7428 6e61 6d65 2c20 726f 6f74  tract(name, root
-00013db0: 2920 666f 7220 6e61 6d65 2069 6e20 7a2e  ) for name in z.
-00013dc0: 6e61 6d65 6c69 7374 2829 0a20 2020 2020  namelist().     
-00013dd0: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-00013de0: 6e6d 6174 6368 2e66 6e6d 6174 6368 286e  nmatch.fnmatch(n
-00013df0: 616d 652c 2070 6174 7465 726e 295d 0a20  ame, pattern)]. 
-00013e00: 2020 205f 6465 6275 6728 6622 5f7a 6970     _debug(f"_zip
-00013e10: 5f65 7874 7261 6374 5f66 6f6c 6465 723a  _extract_folder:
-00013e20: 2045 7874 7261 6374 6564 2066 696c 6573   Extracted files
-00013e30: 2066 726f 6d20 666f 6c64 6572 207b 666f   from folder {fo
-00013e40: 6c64 6572 7d3a 207b 6578 7472 6163 7465  lder}: {extracte
-00013e50: 647d 2229 0a20 2020 2069 6620 6465 7374  d}").    if dest
-00013e60: 726f 6f74 2069 7320 4e6f 6e65 3a0a 2020  root is None:.  
-00013e70: 2020 2020 2020 6465 7374 726f 6f74 203d        destroot =
-00013e80: 2050 6174 6828 7465 6d70 6669 6c65 2e67   Path(tempfile.g
-00013e90: 6574 7465 6d70 6469 7228 2929 0a20 2020  ettempdir()).   
-00013ea0: 2064 6573 7466 6f6c 6465 7220 3d20 6465   destfolder = de
-00013eb0: 7374 726f 6f74 202f 2066 6f6c 6465 726e  stroot / foldern
-00013ec0: 616d 650a 2020 2020 6966 2064 6573 7466  ame.    if destf
-00013ed0: 6f6c 6465 722e 6578 6973 7473 2829 3a0a  older.exists():.
-00013ee0: 2020 2020 2020 2020 5f64 6562 7567 2866          _debug(f
-00013ef0: 225f 7a69 705f 6578 7472 6163 745f 666f  "_zip_extract_fo
-00013f00: 6c64 6572 3a20 4465 7374 696e 6174 696f  lder: Destinatio
-00013f10: 6e20 666f 6c64 6572 207b 6465 7374 666f  n folder {destfo
-00013f20: 6c64 6572 7d20 616c 7265 6164 7920 6578  lder} already ex
-00013f30: 6973 7473 2c20 7265 6d6f 7669 6e67 2229  ists, removing")
-00013f40: 0a20 2020 2020 2020 205f 726d 5f64 6972  .        _rm_dir
-00013f50: 2864 6573 7466 6f6c 6465 7229 0a20 2020  (destfolder).   
-00013f60: 2073 6875 7469 6c2e 6d6f 7665 2872 6f6f   shutil.move(roo
-00013f70: 7420 2f20 666f 6c64 6572 2c20 6465 7374  t / folder, dest
-00013f80: 726f 6f74 290a 2020 2020 6173 7365 7274  root).    assert
-00013f90: 2064 6573 7466 6f6c 6465 722e 6578 6973   destfolder.exis
-00013fa0: 7473 2829 2061 6e64 2064 6573 7466 6f6c  ts() and destfol
-00013fb0: 6465 722e 6973 5f64 6972 2829 0a20 2020  der.is_dir().   
-00013fc0: 2069 6620 636c 6561 6e75 703a 0a20 2020   if cleanup:.   
-00013fd0: 2020 2020 205f 726d 5f64 6972 2872 6f6f       _rm_dir(roo
-00013fe0: 7429 0a20 2020 2072 6574 7572 6e20 6465  t).    return de
-00013ff0: 7374 666f 6c64 6572 0a0a 0a64 6566 205f  stfolder...def _
-00014000: 7a69 705f 6578 7472 6163 7428 7a69 7066  zip_extract(zipf
-00014010: 696c 653a 2050 6174 682c 2070 6174 7465  ile: Path, patte
-00014020: 726e 733a 206c 6973 745b 7374 725d 2920  rns: list[str]) 
-00014030: 2d3e 206c 6973 745b 5061 7468 5d3a 0a20  -> list[Path]:. 
-00014040: 2020 2022 2222 0a20 2020 2045 7874 7261     """.    Extra
-00014050: 6374 206d 756c 7469 706c 6520 6669 6c65  ct multiple file
-00014060: 7320 6672 6f6d 207a 6970 0a0a 2020 2020  s from zip..    
-00014070: 4172 6773 3a0a 2020 2020 2020 2020 7a69  Args:.        zi
-00014080: 7066 696c 653a 2074 6865 207a 6970 2066  pfile: the zip f
-00014090: 696c 6520 746f 2065 7874 7261 6374 2066  ile to extract f
-000140a0: 726f 6d0a 2020 2020 2020 2020 7061 7474  rom.        patt
-000140b0: 6572 6e73 3a20 6120 6c69 7374 206f 6620  erns: a list of 
-000140c0: 6669 6c65 6e61 6d65 7320 6f72 2067 6c6f  filenames or glo
-000140d0: 6220 7061 7474 6572 6e73 0a0a 2020 2020  b patterns..    
-000140e0: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
-000140f0: 2061 206c 6973 7420 6f66 206f 7574 7075   a list of outpu
-00014100: 7420 6669 6c65 7320 6578 7472 6163 7465  t files extracte
-00014110: 642e 2049 6620 676c 6f62 2070 6174 7465  d. If glob patte
-00014120: 726e 7320 7765 7265 2075 7365 6420 7468  rns were used th
-00014130: 6572 6520 6d69 6768 7420 6265 0a20 2020  ere might be.   
-00014140: 2020 2020 206d 6f72 6520 6f75 7470 7574       more output
-00014150: 2066 696c 6573 2074 6861 6e20 6e75 6d62   files than numb
-00014160: 6572 206f 6620 7061 7474 6572 6e73 2e20  er of patterns. 
-00014170: 4f74 6865 7277 6973 6520 7468 6572 6520  Otherwise there 
-00014180: 6973 2061 2031 2074 6f20 310a 2020 2020  is a 1 to 1.    
-00014190: 2020 2020 7265 6c61 7469 6f6e 7368 6970      relationship
-000141a0: 2062 6574 7765 656e 2069 6e70 7574 2061   between input a
-000141b0: 6e64 206f 7574 7075 740a 2020 2020 2222  nd output.    ""
-000141c0: 220a 2020 2020 6f75 7466 6f6c 6465 7220  ".    outfolder 
-000141d0: 3d20 5061 7468 2874 656d 7066 696c 652e  = Path(tempfile.
-000141e0: 6765 7474 656d 7064 6972 2829 290a 2020  gettempdir()).  
-000141f0: 2020 7a20 3d20 5a69 7046 696c 6528 7a69    z = ZipFile(zi
-00014200: 7066 696c 652c 2027 7227 290a 2020 2020  pfile, 'r').    
-00014210: 6f75 743a 206c 6973 745b 5061 7468 5d20  out: list[Path] 
-00014220: 3d20 5b5d 0a20 2020 207a 6970 7065 6420  = [].    zipped 
-00014230: 3d20 7a2e 6e61 6d65 6c69 7374 2829 0a20  = z.namelist(). 
-00014240: 2020 205f 6465 6275 6728 6622 496e 7370     _debug(f"Insp
-00014250: 6563 7469 6e67 207a 6970 6669 6c65 207b  ecting zipfile {
-00014260: 7a69 7066 696c 657d 2c20 636f 6e74 656e  zipfile}, conten
-00014270: 7473 3a20 7b7a 6970 7065 647d 2229 0a20  ts: {zipped}"). 
-00014280: 2020 2066 6f72 2070 6174 7465 726e 2069     for pattern i
-00014290: 6e20 7061 7474 6572 6e73 3a0a 2020 2020  n patterns:.    
-000142a0: 2020 2020 6966 205f 6973 5f67 6c6f 6228      if _is_glob(
-000142b0: 7061 7474 6572 6e29 3a0a 2020 2020 2020  pattern):.      
-000142c0: 2020 2020 2020 5f64 6562 7567 2866 224d        _debug(f"M
-000142d0: 6174 6368 696e 6720 6e61 6d65 7320 6167  atching names ag
-000142e0: 6169 6e73 7420 7061 7474 6572 6e20 7b70  ainst pattern {p
-000142f0: 6174 7465 726e 7d22 290a 2020 2020 2020  attern}").      
-00014300: 2020 2020 2020 666f 7220 6e61 6d65 2069        for name i
-00014310: 6e20 7a69 7070 6564 3a0a 2020 2020 2020  n zipped:.      
-00014320: 2020 2020 2020 2020 2020 6966 206e 616d            if nam
-00014330: 652e 656e 6473 7769 7468 2822 2f22 2920  e.endswith("/") 
-00014340: 616e 6420 666e 6d61 7463 682e 666e 6d61  and fnmatch.fnma
-00014350: 7463 6828 6e61 6d65 5b3a 2d31 5d2c 2070  tch(name[:-1], p
-00014360: 6174 7465 726e 293a 0a20 2020 2020 2020  attern):.       
-00014370: 2020 2020 2020 2020 2020 2020 2023 2061               # a
-00014380: 2066 6f6c 6465 720a 2020 2020 2020 2020   folder.        
-00014390: 2020 2020 2020 2020 2020 2020 6f75 742e              out.
-000143a0: 6170 7065 6e64 285f 7a69 705f 6578 7472  append(_zip_extr
-000143b0: 6163 745f 666f 6c64 6572 287a 6970 6669  act_folder(zipfi
-000143c0: 6c65 2c20 6e61 6d65 5b3a 2d31 5d29 290a  le, name[:-1])).
+000128f0: 2020 2020 6361 6368 6564 203d 2073 656c      cached = sel
+00012900: 662e 5f63 6163 6865 2e67 6574 2827 6465  f._cache.get('de
+00012910: 6669 6e65 645f 6f70 636f 6465 7327 290a  fined_opcodes').
+00012920: 2020 2020 2020 2020 6966 2063 6163 6865          if cache
+00012930: 643a 0a20 2020 2020 2020 2020 2020 2072  d:.            r
+00012940: 6574 7572 6e20 6361 6368 6564 0a20 2020  eturn cached.   
+00012950: 2020 2020 206f 7063 6f64 6573 203d 205b       opcodes = [
+00012960: 5d0a 2020 2020 2020 2020 666f 7220 706c  ].        for pl
+00012970: 7567 696e 2069 6e20 7365 6c66 2e70 6c75  ugin in self.plu
+00012980: 6769 6e73 2e76 616c 7565 7328 293a 0a20  gins.values():. 
+00012990: 2020 2020 2020 2020 2020 2070 6c75 6769             plugi
+000129a0: 6e73 7461 6c6c 6564 203d 2073 656c 662e  nstalled = self.
+000129b0: 6973 5f70 6c75 6769 6e5f 696e 7374 616c  is_plugin_instal
+000129c0: 6c65 6428 706c 7567 696e 2c20 6368 6563  led(plugin, chec
+000129d0: 6b3d 4661 6c73 6529 0a20 2020 2020 2020  k=False).       
+000129e0: 2020 2020 2066 6f72 206f 7063 6f64 656e       for opcoden
+000129f0: 616d 6520 696e 2070 6c75 6769 6e2e 6f70  ame in plugin.op
+00012a00: 636f 6465 733a 0a20 2020 2020 2020 2020  codes:.         
+00012a10: 2020 2020 2020 206d 616e 7061 6765 203d         manpage =
+00012a20: 2073 656c 662e 7061 7273 655f 6d61 6e70   self.parse_manp
+00012a30: 6167 6528 6f70 636f 6465 6e61 6d65 290a  age(opcodename).
+00012a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a50: 6966 206e 6f74 206d 616e 7061 6765 3a0a  if not manpage:.
+00012a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a70: 2020 2020 5f65 7272 6f72 6d73 6728 6622      _errormsg(f"
+00012a80: 4e6f 206d 616e 7061 6765 2066 6f72 206f  No manpage for o
+00012a90: 7063 6f64 6520 7b6f 7063 6f64 656e 616d  pcode {opcodenam
+00012aa0: 657d 2122 290a 2020 2020 2020 2020 2020  e}!").          
+00012ab0: 2020 2020 2020 6f70 636f 6465 732e 6170        opcodes.ap
+00012ac0: 7065 6e64 284f 7063 6f64 6528 6e61 6d65  pend(Opcode(name
+00012ad0: 3d6f 7063 6f64 656e 616d 652c 2070 6c75  =opcodename, plu
+00012ae0: 6769 6e3d 706c 7567 696e 2e6e 616d 652c  gin=plugin.name,
+00012af0: 2069 6e73 7461 6c6c 6564 3d70 6c75 6769   installed=plugi
+00012b00: 6e73 7461 6c6c 6564 2c0a 2020 2020 2020  nstalled,.      
+00012b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b30: 6162 7374 7261 6374 3d6d 616e 7061 6765  abstract=manpage
+00012b40: 2e61 6273 7472 6163 7420 6966 206d 616e  .abstract if man
+00012b50: 7061 6765 2065 6c73 6520 273f 272c 0a20  page else '?',. 
+00012b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012b80: 2020 2020 2073 796e 7461 7865 733d 6d61       syntaxes=ma
+00012b90: 6e70 6167 652e 7379 6e74 6178 6573 2069  npage.syntaxes i
+00012ba0: 6620 6d61 6e70 6167 6520 656c 7365 205b  f manpage else [
+00012bb0: 5d29 290a 2020 2020 2020 2020 6f70 636f  ])).        opco
+00012bc0: 6465 732e 736f 7274 286b 6579 3d6c 616d  des.sort(key=lam
+00012bd0: 6264 6120 6f70 633a 206f 7063 2e6e 616d  bda opc: opc.nam
+00012be0: 652e 6c6f 7765 7228 2929 0a20 2020 2020  e.lower()).     
+00012bf0: 2020 2073 656c 662e 5f63 6163 6865 5b27     self._cache['
+00012c00: 6465 6669 6e65 645f 6f70 636f 6465 7327  defined_opcodes'
+00012c10: 5d20 3d20 6f70 636f 6465 730a 2020 2020  ] = opcodes.    
+00012c20: 2020 2020 7265 7475 726e 206f 7063 6f64      return opcod
+00012c30: 6573 0a0a 2020 2020 6465 6620 7365 7269  es..    def seri
+00012c40: 616c 697a 6528 7365 6c66 2c20 6f75 7466  alize(self, outf
+00012c50: 696c 653a 2073 7472 207c 2050 6174 6820  ile: str | Path 
+00012c60: 3d20 5f4d 4149 4e49 4e44 4558 5f50 4943  = _MAININDEX_PIC
+00012c70: 4b4c 455f 4649 4c45 0a20 2020 2020 2020  KLE_FILE.       
+00012c80: 2020 2020 2020 2020 2020 2029 202d 3e20             ) -> 
+00012c90: 4e6f 6e65 3a0a 2020 2020 2020 2020 696d  None:.        im
+00012ca0: 706f 7274 2070 6963 6b6c 650a 2020 2020  port pickle.    
+00012cb0: 2020 2020 2320 506f 7075 6c61 7465 2063      # Populate c
+00012cc0: 6163 6865 0a20 2020 2020 2020 205f 203d  ache.        _ =
+00012cd0: 2073 656c 662e 6f70 636f 6465 735f 6279   self.opcodes_by
+00012ce0: 5f6e 616d 6528 290a 2020 2020 2020 2020  _name().        
+00012cf0: 5f20 3d20 7365 6c66 2e69 6e73 7461 6c6c  _ = self.install
+00012d00: 6564 5f64 6c6c 7328 290a 2020 2020 2020  ed_dlls().      
+00012d10: 2020 7069 636b 6c65 2e64 756d 7028 7365    pickle.dump(se
+00012d20: 6c66 2c20 6f70 656e 286f 7574 6669 6c65  lf, open(outfile
+00012d30: 2c20 2777 6227 2929 0a0a 2020 2020 6465  , 'wb'))..    de
+00012d40: 6620 696e 7374 616c 6c5f 706c 7567 696e  f install_plugin
+00012d50: 2873 656c 662c 2070 6c75 6769 6e3a 2050  (self, plugin: P
+00012d60: 6c75 6769 6e2c 2063 6865 636b 3d46 616c  lugin, check=Fal
+00012d70: 7365 2920 2d3e 2045 7272 6f72 4d73 6720  se) -> ErrorMsg 
+00012d80: 7c20 4e6f 6e65 3a0a 2020 2020 2020 2020  | None:.        
+00012d90: 2222 220a 2020 2020 2020 2020 496e 7374  """.        Inst
+00012da0: 616c 6c20 7468 6520 6769 7665 6e20 706c  all the given pl
+00012db0: 7567 696e 0a0a 2020 2020 2020 2020 4172  ugin..        Ar
+00012dc0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00012dd0: 706c 7567 696e 3a20 7468 6520 706c 7567  plugin: the plug
+00012de0: 696e 2074 6f20 696e 7374 616c 6c0a 2020  in to install.  
+00012df0: 2020 2020 2020 2020 2020 6368 6563 6b3a            check:
+00012e00: 2069 6620 5472 7565 2c20 6368 6563 6b20   if True, check 
+00012e10: 7468 6174 2074 6865 206f 7063 6f64 6573  that the opcodes
+00012e20: 2064 6566 696e 6564 2069 6e20 706c 7567   defined in plug
+00012e30: 696e 2061 7265 2070 7265 7365 6e74 0a20  in are present. 
+00012e40: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00012e50: 6674 6572 2069 6e73 7461 6c6c 6174 696f  fter installatio
+00012e60: 6e0a 0a20 2020 2020 2020 2052 6574 7572  n..        Retur
+00012e70: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
+00012e80: 4e6f 6e65 2069 6620 6f6b 2c20 616e 2045  None if ok, an E
+00012e90: 7272 6f72 4d73 6720 6966 2066 6169 6c65  rrorMsg if faile
+00012ea0: 640a 0a20 2020 2020 2020 2045 7861 6d70  d..        Examp
+00012eb0: 6c65 0a20 2020 2020 2020 203d 3d3d 3d3d  le.        =====
+00012ec0: 3d3d 0a0a 2020 2020 2020 2020 2020 2020  ==..            
+00012ed0: 3e3e 3e20 696d 706f 7274 2072 6973 7365  >>> import risse
+00012ee0: 740a 2020 2020 2020 2020 2020 2020 3e3e  t.            >>
+00012ef0: 3e20 6964 7820 3d20 7269 7373 6574 2e4d  > idx = risset.M
+00012f00: 6169 6e49 6e64 6578 2875 7064 6174 653d  ainIndex(update=
+00012f10: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
+00012f20: 2020 3e3e 3e20 706c 7567 696e 706f 6c79    >>> pluginpoly
+00012f30: 203d 2069 6478 2e70 6c75 6769 6e73 5b27   = idx.plugins['
+00012f40: 706f 6c79 275d 0a20 2020 2020 2020 2020  poly'].         
+00012f50: 2020 203e 3e3e 2069 6478 2e69 6e73 7461     >>> idx.insta
+00012f60: 6c6c 5f70 6c75 6769 6e28 706c 7567 696e  ll_plugin(plugin
+00012f70: 706f 6c79 290a 2020 2020 2020 2020 2222  poly).        ""
+00012f80: 220a 2020 2020 2020 2020 6173 7365 7274  ".        assert
+00012f90: 2069 7369 6e73 7461 6e63 6528 706c 7567   isinstance(plug
+00012fa0: 696e 2c20 506c 7567 696e 290a 2020 2020  in, Plugin).    
+00012fb0: 2020 2020 706c 6174 666f 726d 6964 203d      platformid =
+00012fc0: 205f 7365 7373 696f 6e2e 706c 6174 666f   _session.platfo
+00012fd0: 726d 6964 0a20 2020 2020 2020 2074 7279  rmid.        try
+00012fe0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+00012ff0: 5468 6973 206d 6574 686f 6420 7769 6c6c  This method will
+00013000: 2064 6f77 6e6c 6f61 6420 616e 6420 6578   download and ex
+00013010: 7472 6163 7420 7468 6520 706c 7567 696e  tract the plugin
+00013020: 2069 6620 6e65 6365 7373 6172 790a 2020   if necessary.  
+00013030: 2020 2020 2020 2020 2020 706c 7567 696e            plugin
+00013040: 5f62 696e 6172 795f 7061 7468 203d 2073  _binary_path = s
+00013050: 656c 662e 6765 745f 706c 7567 696e 5f64  elf.get_plugin_d
+00013060: 6c6c 2870 6c75 6769 6e29 0a20 2020 2020  ll(plugin).     
+00013070: 2020 2065 7863 6570 7420 506c 6174 666f     except Platfo
+00013080: 726d 4e6f 7453 7570 706f 7274 6564 4572  rmNotSupportedEr
+00013090: 726f 7220 6173 2065 3a0a 2020 2020 2020  ror as e:.      
+000130a0: 2020 2020 2020 7265 7475 726e 2045 7272        return Err
+000130b0: 6f72 4d73 6728 6622 506c 6174 666f 726d  orMsg(f"Platform
+000130c0: 2027 7b70 6c61 7466 6f72 6d69 647d 2720   '{platformid}' 
+000130d0: 6e6f 7420 7375 7070 6f72 7465 6420 666f  not supported fo
+000130e0: 7220 706c 7567 696e 2027 7b70 6c75 6769  r plugin '{plugi
+000130f0: 6e2e 6e61 6d65 7d27 3a20 7b65 7d22 290a  n.name}': {e}").
+00013100: 2020 2020 2020 2020 6578 6365 7074 2052          except R
+00013110: 756e 7469 6d65 4572 726f 7220 6173 2065  untimeError as e
+00013120: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00013130: 7475 726e 2045 7272 6f72 4d73 6728 6622  turn ErrorMsg(f"
+00013140: 4572 726f 7220 7768 696c 6520 6765 7474  Error while gett
+00013150: 696e 6720 706c 7567 696e 2064 6c6c 2028  ing plugin dll (
+00013160: 706c 7567 696e 3a20 7b70 6c75 6769 6e2e  plugin: {plugin.
+00013170: 6e61 6d65 7d29 3a20 7b65 7d22 290a 2020  name}): {e}").  
+00013180: 2020 2020 2020 6578 6365 7074 2053 6368        except Sch
+00013190: 656d 6145 7272 6f72 2061 7320 653a 0a20  emaError as e:. 
+000131a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000131b0: 6e20 4572 726f 724d 7367 2866 2254 6865  n ErrorMsg(f"The
+000131c0: 2070 6c75 6769 6e20 6465 6669 6e69 7469   plugin definiti
+000131d0: 6f6e 2066 6f72 207b 706c 7567 696e 2e6e  on for {plugin.n
+000131e0: 616d 657d 2068 6173 2065 7272 6f72 733a  ame} has errors:
+000131f0: 207b 657d 2229 0a0a 2020 2020 2020 2020   {e}")..        
+00013200: 696e 7374 616c 6c70 6174 6820 3d20 7573  installpath = us
+00013210: 6572 5f70 6c75 6769 6e73 5f70 6174 6828  er_plugins_path(
+00013220: 290a 2020 2020 2020 2020 696e 7374 616c  ).        instal
+00013230: 6c70 6174 682e 6d6b 6469 7228 7061 7265  lpath.mkdir(pare
+00013240: 6e74 733d 5472 7565 2c20 6578 6973 745f  nts=True, exist_
+00013250: 6f6b 3d54 7275 6529 0a20 2020 2020 2020  ok=True).       
+00013260: 205f 6465 6275 6728 2255 7365 7220 706c   _debug("User pl
+00013270: 7567 696e 7320 7061 7468 3a20 222c 2069  ugins path: ", i
+00013280: 6e73 7461 6c6c 7061 7468 2e61 735f 706f  nstallpath.as_po
+00013290: 7369 7828 2929 0a20 2020 2020 2020 205f  six()).        _
+000132a0: 6465 6275 6728 2244 6f77 6e6c 6f61 6465  debug("Downloade
+000132b0: 6420 646c 6c20 666f 7220 706c 7567 696e  d dll for plugin
+000132c0: 3a20 222c 2070 6c75 6769 6e5f 6269 6e61  : ", plugin_bina
+000132d0: 7279 5f70 6174 682e 6173 5f70 6f73 6978  ry_path.as_posix
+000132e0: 2829 290a 2020 2020 2020 2020 7472 793a  ()).        try:
+000132f0: 0a20 2020 2020 2020 2020 2020 2073 6875  .            shu
+00013300: 7469 6c2e 636f 7079 2870 6c75 6769 6e5f  til.copy(plugin_
+00013310: 6269 6e61 7279 5f70 6174 682e 6173 5f70  binary_path.as_p
+00013320: 6f73 6978 2829 2c20 696e 7374 616c 6c70  osix(), installp
+00013330: 6174 682e 6173 5f70 6f73 6978 2829 290a  ath.as_posix()).
+00013340: 2020 2020 2020 2020 6578 6365 7074 2049          except I
+00013350: 4f45 7272 6f72 2061 7320 653a 0a20 2020  OError as e:.   
+00013360: 2020 2020 2020 2020 205f 6465 6275 6728           _debug(
+00013370: 6622 5472 6965 6420 746f 2063 6f70 7920  f"Tried to copy 
+00013380: 7b70 6c75 6769 6e5f 6269 6e61 7279 5f70  {plugin_binary_p
+00013390: 6174 682e 6173 5f70 6f73 6978 2829 7d20  ath.as_posix()} 
+000133a0: 746f 207b 696e 7374 616c 6c70 6174 682e  to {installpath.
+000133b0: 6173 5f70 6f73 6978 2829 7d20 6275 7420  as_posix()} but 
+000133c0: 6661 696c 6564 2229 0a20 2020 2020 2020  failed").       
+000133d0: 2020 2020 205f 6465 6275 6728 7374 7228       _debug(str(
+000133e0: 6529 290a 2020 2020 2020 2020 2020 2020  e)).            
+000133f0: 7265 7475 726e 2045 7272 6f72 4d73 6728  return ErrorMsg(
+00013400: 2243 6f75 6c64 206e 6f74 2063 6f70 7920  "Could not copy 
+00013410: 7468 6520 6269 6e61 7279 2074 6f20 7468  the binary to th
+00013420: 6520 696e 7374 616c 6c20 7061 7468 2229  e install path")
+00013430: 0a0a 2020 2020 2020 2020 696e 7374 616c  ..        instal
+00013440: 6c65 645f 7061 7468 203d 2069 6e73 7461  led_path = insta
+00013450: 6c6c 7061 7468 202f 2070 6c75 6769 6e5f  llpath / plugin_
+00013460: 6269 6e61 7279 5f70 6174 682e 6e61 6d65  binary_path.name
+00013470: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00013480: 696e 7374 616c 6c65 645f 7061 7468 2e65  installed_path.e
+00013490: 7869 7374 7328 293a 0a20 2020 2020 2020  xists():.       
+000134a0: 2020 2020 2072 6574 7572 6e20 4572 726f       return Erro
+000134b0: 724d 7367 2866 2249 6e73 7461 6c6c 6174  rMsg(f"Installat
+000134c0: 696f 6e20 6f66 2070 6c75 6769 6e20 7b70  ion of plugin {p
+000134d0: 6c75 6769 6e2e 6e61 6d65 7d20 6661 696c  lugin.name} fail
+000134e0: 6564 2c20 6269 6e61 7279 2077 6173 206e  ed, binary was n
+000134f0: 6f74 2066 6f75 6e64 2069 6e20 220a 2020  ot found in ".  
+00013500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013510: 2020 2020 2020 2020 2020 6622 7468 6520            f"the 
+00013520: 6578 7065 6374 6564 2070 6174 683a 207b  expected path: {
+00013530: 696e 7374 616c 6c65 645f 7061 7468 2e61  installed_path.a
+00013540: 735f 706f 7369 7828 297d 2229 0a0a 2020  s_posix()}")..  
+00013550: 2020 2020 2020 5f73 6573 7369 6f6e 2e63        _session.c
+00013560: 6163 6865 2e63 6c65 6172 2829 0a0a 2020  ache.clear()..  
+00013570: 2020 2020 2020 2320 696e 7374 616c 6c61        # installa
+00013580: 7469 6f6e 2073 7563 6365 6564 6564 2c20  tion succeeded, 
+00013590: 6368 6563 6b20 7468 6174 2069 7420 776f  check that it wo
+000135a0: 726b 730a 2020 2020 2020 2020 6966 206e  rks.        if n
+000135b0: 6f74 2073 656c 662e 6973 5f70 6c75 6769  ot self.is_plugi
+000135c0: 6e5f 696e 7374 616c 6c65 6428 706c 7567  n_installed(plug
+000135d0: 696e 2c20 6368 6563 6b3d 6368 6563 6b29  in, check=check)
+000135e0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+000135f0: 2070 6c61 7466 6f72 6d69 642e 7374 6172   platformid.star
+00013600: 7473 7769 7468 2827 6d61 636f 7327 293a  tswith('macos'):
+00013610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013620: 2023 2074 7279 2063 6f64 6520 7369 676e   # try code sign
+00013630: 696e 6720 7468 6520 6269 6e61 7279 0a20  ing the binary. 
+00013640: 2020 2020 2020 2020 2020 2020 2020 205f                 _
+00013650: 6465 6275 6728 6622 5468 6520 6269 6e61  debug(f"The bina
+00013660: 7279 2027 7b69 6e73 7461 6c6c 6564 5f70  ry '{installed_p
+00013670: 6174 682e 6173 5f70 6f73 6978 2829 7d27  ath.as_posix()}'
+00013680: 2077 6173 2069 6e73 7461 6c6c 6564 2062   was installed b
+00013690: 7574 2069 7420 6973 206e 6f74 2072 6563  ut it is not rec
+000136a0: 6f67 6e69 7a65 6420 6279 2063 736f 756e  ognized by csoun
+000136b0: 642e 2022 0a20 2020 2020 2020 2020 2020  d. ".           
+000136c0: 2020 2020 2020 2020 2020 2020 6622 4974              f"It
+000136d0: 206d 6967 6874 2062 6520 6120 7365 6375   might be a secu
+000136e0: 7269 7479 2070 726f 626c 656d 2e20 4920  rity problem. I 
+000136f0: 7769 6c6c 2074 7279 2074 6f20 636f 6465  will try to code
+00013700: 2073 6967 6e20 6974 2229 0a20 2020 2020   sign it").     
+00013710: 2020 2020 2020 2020 2020 206d 6163 6f73             macos
+00013720: 5f63 6f64 6573 6967 6e28 5b69 6e73 7461  _codesign([insta
+00013730: 6c6c 6564 5f70 6174 682e 6173 5f70 6f73  lled_path.as_pos
+00013740: 6978 2829 5d29 0a20 2020 2020 2020 2020  ix()]).         
+00013750: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
+00013760: 6973 5f70 6c75 6769 6e5f 7265 636f 676e  is_plugin_recogn
+00013770: 697a 6564 5f62 795f 6373 6f75 6e64 2870  ized_by_csound(p
+00013780: 6c75 6769 6e29 3a0a 2020 2020 2020 2020  lugin):.        
+00013790: 2020 2020 2020 2020 2020 2020 5f64 6562              _deb
+000137a0: 7567 2822 2e2e 2e20 4f6b 2c20 7468 6174  ug("... Ok, that
+000137b0: 2077 6f72 6b65 642e 2022 290a 2020 2020   worked. ").    
+000137c0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000137d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000137e0: 2020 2020 2020 5f65 7272 6f72 6d73 6728        _errormsg(
+000137f0: 6622 5468 6520 706c 7567 696e 2027 7b70  f"The plugin '{p
+00013800: 6c75 6769 6e2e 6e61 6d65 7d27 2077 6173  lugin.name}' was
+00013810: 206e 6f74 2072 6563 6f67 6e69 7a65 642e   not recognized.
+00013820: 2054 6865 2072 6561 736f 6e20 6d69 6768   The reason migh
+00013830: 7420 6265 2074 6861 7420 7468 6520 6269  t be that the bi
+00013840: 6e61 7279 220a 2020 2020 2020 2020 2020  nary".          
+00013850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013860: 2020 2020 6622 206e 6565 6473 2074 6f20      f" needs to 
+00013870: 6265 2063 6f64 652d 7369 676e 6564 2e20  be code-signed. 
+00013880: 2229 0a0a 2020 2020 2020 2020 2020 2020  ")..            
+00013890: 6966 206e 6f74 2063 6865 636b 3a0a 2020  if not check:.  
+000138a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000138b0: 7475 726e 2045 7272 6f72 4d73 6728 6622  turn ErrorMsg(f"
+000138c0: 5472 6965 6420 746f 2069 6e73 7461 6c6c  Tried to install
+000138d0: 2070 6c75 6769 6e20 7b70 6c75 6769 6e2e   plugin {plugin.
+000138e0: 6e61 6d65 7d2c 2062 7574 2074 6865 2062  name}, but the b
+000138f0: 696e 6172 7922 0a20 2020 2020 2020 2020  inary".         
+00013900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013910: 2020 2020 2020 2066 2220 6973 206e 6f74         f" is not
+00013920: 2070 7265 7365 6e74 2e22 290a 2020 2020   present.").    
+00013930: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00013940: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00013950: 7475 726e 2045 7272 6f72 4d73 6728 6622  turn ErrorMsg(f"
+00013960: 5472 6965 6420 746f 2069 6e73 7461 6c6c  Tried to install
+00013970: 2070 6c75 6769 6e20 7b70 6c75 6769 6e2e   plugin {plugin.
+00013980: 6e61 6d65 7d2c 2062 7574 206f 7063 6f64  name}, but opcod
+00013990: 6520 220a 2020 2020 2020 2020 2020 2020  e ".            
+000139a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000139b0: 2020 2020 6622 7b70 6c75 6769 6e2e 6f70      f"{plugin.op
+000139c0: 636f 6465 735b 305d 7d2c 2077 6869 6368  codes[0]}, which
+000139d0: 2069 7320 7072 6f76 6964 6564 2062 7920   is provided by 
+000139e0: 7468 6973 2070 6c75 6769 6e2c 2022 0a20  this plugin, ". 
+000139f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013a00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00013a10: 2269 7320 6e6f 7420 7072 6573 656e 7422  "is not present"
+00013a20: 290a 0a20 2020 2020 2020 2023 2049 6e73  )..        # Ins
+00013a30: 7461 6c6c 2061 7373 6574 732c 2069 6620  tall assets, if 
+00013a40: 616e 790a 2020 2020 2020 2020 6173 7365  any.        asse
+00013a50: 7466 696c 6573 203d 205b 5d0a 2020 2020  tfiles = [].    
+00013a60: 2020 2020 6966 2070 6c75 6769 6e2e 6173      if plugin.as
+00013a70: 7365 7473 3a0a 2020 2020 2020 2020 2020  sets:.          
+00013a80: 2020 666f 7220 6173 7365 7420 696e 2070    for asset in p
+00013a90: 6c75 6769 6e2e 6173 7365 7473 3a0a 2020  lugin.assets:.  
+00013aa0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00013ab0: 2061 7373 6574 2e70 6c61 7466 6f72 6d20   asset.platform 
+00013ac0: 3d3d 2027 616c 6c27 206f 7220 6173 7365  == 'all' or asse
+00013ad0: 742e 706c 6174 666f 726d 203d 3d20 706c  t.platform == pl
+00013ae0: 6174 666f 726d 6964 3a0a 2020 2020 2020  atformid:.      
+00013af0: 2020 2020 2020 2020 2020 2020 2020 5f64                _d
+00013b00: 6562 7567 2866 2249 6e73 7461 6c6c 696e  ebug(f"Installin
+00013b10: 6720 6173 7365 7420 7b61 7373 6574 2e69  g asset {asset.i
+00013b20: 6465 6e74 6966 6965 7228 297d 2229 0a20  dentifier()}"). 
+00013b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013b40: 2020 2061 7373 6574 6669 6c65 732e 6578     assetfiles.ex
+00013b50: 7465 6e64 2873 656c 662e 696e 7374 616c  tend(self.instal
+00013b60: 6c5f 6173 7365 7428 6173 7365 742c 2070  l_asset(asset, p
+00013b70: 6c75 6769 6e2e 6e61 6d65 2929 0a0a 2020  lugin.name))..  
+00013b80: 2020 2020 2020 2320 696e 7374 616c 6c20        # install 
+00013b90: 6d61 6e69 6665 7374 0a20 2020 2020 2020  manifest.       
+00013ba0: 206d 616e 6966 6573 745f 7061 7468 203d   manifest_path =
+00013bb0: 2073 656c 662e 696e 7374 616c 6c65 645f   self.installed_
+00013bc0: 6d61 6e69 6665 7374 735f 7061 7468 2829  manifests_path()
+00013bd0: 202f 2066 227b 706c 7567 696e 2e6e 616d   / f"{plugin.nam
+00013be0: 657d 2e6a 736f 6e22 0a20 2020 2020 2020  e}.json".       
+00013bf0: 206d 616e 6966 6573 7420 3d20 5f6d 616b   manifest = _mak
+00013c00: 655f 696e 7374 616c 6c5f 6d61 6e69 6665  e_install_manife
+00013c10: 7374 2870 6c75 6769 6e2c 2061 7373 6574  st(plugin, asset
+00013c20: 6669 6c65 733d 6173 7365 7466 696c 6573  files=assetfiles
+00013c30: 290a 2020 2020 2020 2020 7472 793a 0a20  ).        try:. 
+00013c40: 2020 2020 2020 2020 2020 206d 616e 6966             manif
+00013c50: 6573 745f 6a73 6f6e 203d 206a 736f 6e2e  est_json = json.
+00013c60: 6475 6d70 7328 6d61 6e69 6665 7374 2c20  dumps(manifest, 
+00013c70: 696e 6465 6e74 3d54 7275 6529 0a20 2020  indent=True).   
+00013c80: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+00013c90: 7074 696f 6e20 6173 2065 3a0a 2020 2020  ption as e:.    
+00013ca0: 2020 2020 2020 2020 5f65 7272 6f72 6d73          _errorms
+00013cb0: 6728 6622 696e 7374 616c 6c5f 706c 7567  g(f"install_plug
+00013cc0: 696e 3a20 6a73 6f6e 2065 7272 6f72 2077  in: json error w
+00013cd0: 6869 6c65 2073 6176 696e 6720 6d61 6e69  hile saving mani
+00013ce0: 6665 7374 3a20 7b65 7d22 290a 2020 2020  fest: {e}").    
+00013cf0: 2020 2020 2020 2020 5f65 7272 6f72 6d73          _errorms
+00013d00: 6728 6622 2020 206d 616e 6966 6573 7420  g(f"   manifest 
+00013d10: 7761 733a 205c 6e7b 6d61 6e69 6665 7374  was: \n{manifest
+00013d20: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
+00013d30: 7265 7475 726e 2045 7272 6f72 4d73 6728  return ErrorMsg(
+00013d40: 2245 7272 6f72 2077 6865 6e20 6475 6d70  "Error when dump
+00013d50: 696e 6720 6d61 6e69 6665 7374 2074 6f20  ing manifest to 
+00013d60: 6a73 6f6e 2229 0a0a 2020 2020 2020 2020  json")..        
+00013d70: 6269 6e61 7279 6465 6620 3d20 706c 7567  binarydef = plug
+00013d80: 696e 2e66 696e 645f 6269 6e61 7279 2829  in.find_binary()
+00013d90: 0a20 2020 2020 2020 2069 6620 6269 6e61  .        if bina
+00013da0: 7279 6465 6620 616e 6420 6269 6e61 7279  rydef and binary
+00013db0: 6465 662e 706f 7374 5f69 6e73 7461 6c6c  def.post_install
+00013dc0: 5f73 6372 6970 743a 0a20 2020 2020 2020  _script:.       
+00013dd0: 2020 2020 2073 6372 6970 7420 3d20 706c       script = pl
+00013de0: 7567 696e 2e72 6573 6f6c 7665 5f70 6174  ugin.resolve_pat
+00013df0: 6828 6269 6e61 7279 6465 662e 706f 7374  h(binarydef.post
+00013e00: 5f69 6e73 7461 6c6c 5f73 6372 6970 7429  _install_script)
+00013e10: 0a20 2020 2020 2020 2020 2020 205f 7375  .            _su
+00013e20: 6270 726f 635f 6361 6c6c 2873 6372 6970  bproc_call(scrip
+00013e30: 742e 6173 5f70 6f73 6978 2829 2c20 7368  t.as_posix(), sh
+00013e40: 656c 6c3d 5472 7565 290a 0a20 2020 2020  ell=True)..     
+00013e50: 2020 2077 6974 6820 6f70 656e 286d 616e     with open(man
+00013e60: 6966 6573 745f 7061 7468 2e61 735f 706f  ifest_path.as_po
+00013e70: 7369 7828 292c 2022 7722 2920 6173 2066  six(), "w") as f
+00013e80: 3a0a 2020 2020 2020 2020 2020 2020 662e  :.            f.
+00013e90: 7772 6974 6528 6d61 6e69 6665 7374 5f6a  write(manifest_j
+00013ea0: 736f 6e29 0a20 2020 2020 2020 205f 6465  son).        _de
+00013eb0: 6275 6728 6622 5361 7665 6420 6d61 6e69  bug(f"Saved mani
+00013ec0: 6665 7374 2066 6f72 2070 6c75 6769 6e20  fest for plugin 
+00013ed0: 7b70 6c75 6769 6e2e 6e61 6d65 7d20 746f  {plugin.name} to
+00013ee0: 207b 6d61 6e69 6665 7374 5f70 6174 687d   {manifest_path}
+00013ef0: 2229 0a0a 2020 2020 2020 2020 2320 6e6f  ")..        # no
+00013f00: 2065 7272 6f72 730a 2020 2020 2020 2020   errors.        
+00013f10: 7265 7475 726e 204e 6f6e 650a 0a20 2020  return None..   
+00013f20: 2064 6566 206c 6973 745f 706c 7567 696e   def list_plugin
+00013f30: 735f 6173 5f64 6963 7428 7365 6c66 2c20  s_as_dict(self, 
+00013f40: 696e 7374 616c 6c65 643d 4661 6c73 6529  installed=False)
+00013f50: 202d 3e20 6469 6374 3a0a 2020 2020 2020   -> dict:.      
+00013f60: 2020 6420 3d20 7b7d 0a20 2020 2020 2020    d = {}.       
+00013f70: 2066 6f72 2070 6c75 6769 6e20 696e 2073   for plugin in s
+00013f80: 656c 662e 706c 7567 696e 732e 7661 6c75  elf.plugins.valu
+00013f90: 6573 2829 3a0a 2020 2020 2020 2020 2020  es():.          
+00013fa0: 2020 6173 7365 7274 2069 7369 6e73 7461    assert isinsta
+00013fb0: 6e63 6528 706c 7567 696e 2c20 506c 7567  nce(plugin, Plug
+00013fc0: 696e 290a 2020 2020 2020 2020 2020 2020  in).            
+00013fd0: 696e 666f 203d 2073 656c 662e 696e 7374  info = self.inst
+00013fe0: 616c 6c65 645f 706c 7567 696e 5f69 6e66  alled_plugin_inf
+00013ff0: 6f28 706c 7567 696e 290a 2020 2020 2020  o(plugin).      
+00014000: 2020 2020 2020 6269 6e61 7279 203d 2070        binary = p
+00014010: 6c75 6769 6e2e 6669 6e64 5f62 696e 6172  lugin.find_binar
+00014020: 7928 290a 2020 2020 2020 2020 2020 2020  y().            
+00014030: 706c 7567 696e 696e 7374 616c 6c65 6420  plugininstalled 
+00014040: 3d20 696e 666f 2069 7320 6e6f 7420 4e6f  = info is not No
+00014050: 6e65 0a20 2020 2020 2020 2020 2020 2069  ne.            i
+00014060: 6620 696e 7374 616c 6c65 6420 616e 6420  f installed and 
+00014070: 6e6f 7420 706c 7567 696e 696e 7374 616c  not plugininstal
+00014080: 6c65 643a 0a20 2020 2020 2020 2020 2020  led:.           
+00014090: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
+000140a0: 2020 2020 2020 2020 2020 706c 7567 6469            plugdi
+000140b0: 6374 3a20 6469 6374 5b73 7472 2c20 416e  ct: dict[str, An
+000140c0: 795d 203d 207b 2776 6572 7369 6f6e 273a  y] = {'version':
+000140d0: 2070 6c75 6769 6e2e 7665 7273 696f 6e7d   plugin.version}
+000140e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000140f0: 696e 666f 3a0a 2020 2020 2020 2020 2020  info:.          
+00014100: 2020 2020 2020 706c 7567 6469 6374 5b27        plugdict['
+00014110: 696e 7374 616c 6c65 6427 5d20 3d20 5472  installed'] = Tr
+00014120: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+00014130: 2020 2070 6c75 6764 6963 745b 2769 6e73     plugdict['ins
+00014140: 7461 6c6c 6564 2d76 6572 7369 6f6e 275d  talled-version']
+00014150: 203d 2069 6e66 6f2e 7665 7273 696f 6e73   = info.versions
+00014160: 7472 0a20 2020 2020 2020 2020 2020 2020  tr.             
+00014170: 2020 2070 6c75 6764 6963 745b 2770 6174     plugdict['pat
+00014180: 6827 5d20 3d20 696e 666f 2e64 6c6c 7061  h'] = info.dllpa
+00014190: 7468 2e61 735f 706f 7369 7828 290a 2020  th.as_posix().  
+000141a0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000141b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000141c0: 706c 7567 6469 6374 5b27 696e 7374 616c  plugdict['instal
+000141d0: 6c65 6427 5d20 3d20 4661 6c73 650a 2020  led'] = False.  
+000141e0: 2020 2020 2020 2020 2020 2020 2020 706c                pl
+000141f0: 7567 6469 6374 5b27 6176 6169 6c61 626c  ugdict['availabl
+00014200: 6527 5d20 3d20 6269 6e61 7279 2069 7320  e'] = binary is 
+00014210: 6e6f 7420 4e6f 6e65 0a0a 2020 2020 2020  not None..      
+00014220: 2020 2020 2020 706c 7567 6469 6374 5b27        plugdict['
+00014230: 6f70 636f 6465 7327 5d20 3d20 706c 7567  opcodes'] = plug
+00014240: 696e 2e6f 7063 6f64 6573 0a20 2020 2020  in.opcodes.     
+00014250: 2020 2020 2020 2070 6c75 6764 6963 745b         plugdict[
+00014260: 2775 726c 275d 203d 2070 6c75 6769 6e2e  'url'] = plugin.
+00014270: 7572 6c0a 2020 2020 2020 2020 2020 2020  url.            
+00014280: 706c 7567 6469 6374 5b27 7368 6f72 745f  plugdict['short_
+00014290: 6465 7363 7269 7074 696f 6e27 5d20 3d20  description'] = 
+000142a0: 706c 7567 696e 2e73 686f 7274 5f64 6573  plugin.short_des
+000142b0: 6372 6970 7469 6f6e 0a20 2020 2020 2020  cription.       
+000142c0: 2020 2020 2070 6c75 6764 6963 745b 276c       plugdict['l
+000142d0: 6f6e 675f 6465 7363 7269 7074 696f 6e27  ong_description'
+000142e0: 5d20 3d20 706c 7567 696e 2e6c 6f6e 675f  ] = plugin.long_
+000142f0: 6465 7363 7269 7074 696f 6e0a 2020 2020  description.    
+00014300: 2020 2020 2020 2020 706c 7567 6469 6374          plugdict
+00014310: 5b27 6175 7468 6f72 275d 203d 2070 6c75  ['author'] = plu
+00014320: 6769 6e2e 6175 7468 6f72 0a20 2020 2020  gin.author.     
+00014330: 2020 2020 2020 2064 5b70 6c75 6769 6e2e         d[plugin.
+00014340: 6e61 6d65 5d20 3d20 706c 7567 6469 6374  name] = plugdict
+00014350: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00014360: 640a 0a20 2020 2064 6566 2061 7661 696c  d..    def avail
+00014370: 6162 6c65 5f70 6c75 6769 6e73 2873 656c  able_plugins(sel
+00014380: 662c 2070 6c61 7466 6f72 6d69 643a 2073  f, platformid: s
+00014390: 7472 203d 2027 272c 2063 736f 756e 645f  tr = '', csound_
+000143a0: 7665 7273 696f 6e3a 2069 6e74 203d 2030  version: int = 0
+000143b0: 2c20 696e 7374 616c 6c65 645f 6f6e 6c79  , installed_only
+000143c0: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
 000143d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000143e0: 656c 6966 2066 6e6d 6174 6368 2e66 6e6d  elif fnmatch.fnm
-000143f0: 6174 6368 286e 616d 652c 2070 6174 7465  atch(name, patte
-00014400: 726e 293a 0a20 2020 2020 2020 2020 2020  rn):.           
-00014410: 2020 2020 2020 2020 205f 6465 6275 6728           _debug(
-00014420: 6622 2020 204e 616d 6520 7b6e 616d 657d  f"   Name {name}
-00014430: 206d 6174 6368 6573 2122 290a 2020 2020   matches!").    
-00014440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014450: 6f75 742e 6170 7065 6e64 2850 6174 6828  out.append(Path(
-00014460: 7a2e 6578 7472 6163 7428 6e61 6d65 2c20  z.extract(name, 
-00014470: 7061 7468 3d6f 7574 666f 6c64 6572 2e61  path=outfolder.a
-00014480: 735f 706f 7369 7828 2929 2929 0a20 2020  s_posix()))).   
-00014490: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-000144a0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000144b0: 2020 2020 2020 205f 6465 6275 6728 6622         _debug(f"
-000144c0: 2020 204e 616d 6520 7b6e 616d 657d 2064     Name {name} d
-000144d0: 6f65 7320 6e6f 7420 6d61 7463 6822 290a  oes not match").
-000144e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000144f0: 2020 2020 2020 2020 2020 6f75 742e 6170            out.ap
-00014500: 7065 6e64 2850 6174 6828 7a2e 6578 7472  pend(Path(z.extr
-00014510: 6163 7428 7061 7474 6572 6e2c 2070 6174  act(pattern, pat
-00014520: 683d 6f75 7466 6f6c 6465 7229 2929 0a20  h=outfolder))). 
-00014530: 2020 2072 6574 7572 6e20 6f75 740a 0a0a     return out...
-00014540: 6465 6620 5f7a 6970 5f65 7874 7261 6374  def _zip_extract
-00014550: 5f66 696c 6528 7a69 7066 696c 653a 2050  _file(zipfile: P
-00014560: 6174 682c 2065 7874 7261 6374 7061 7468  ath, extractpath
-00014570: 3a20 7374 7229 202d 3e20 5061 7468 3a0a  : str) -> Path:.
-00014580: 2020 2020 2222 220a 2020 2020 4578 7472      """.    Extr
-00014590: 6163 7473 2061 2066 696c 6520 6672 6f6d  acts a file from
-000145a0: 2061 207a 6970 6669 6c65 2c20 7265 7475   a zipfile, retu
-000145b0: 726e 7320 7468 6520 7061 7468 2074 6f20  rns the path to 
-000145c0: 7468 6520 6578 7472 6163 7465 6420 6669  the extracted fi
-000145d0: 6c65 0a0a 2020 2020 4172 6773 3a0a 2020  le..    Args:.  
-000145e0: 2020 2020 2020 7a69 7066 696c 653a 2074        zipfile: t
-000145f0: 6865 2070 6174 6820 746f 2061 206c 6f63  he path to a loc
-00014600: 616c 202e 7a69 7020 6669 6c65 0a20 2020  al .zip file.   
-00014610: 2020 2020 2065 7874 7261 6374 7061 7468       extractpath
-00014620: 3a20 7468 6520 7061 7468 2074 6f20 6578  : the path to ex
-00014630: 7472 6163 7420 696e 7369 6465 2074 6865  tract inside the
-00014640: 202e 7a69 7020 6669 6c65 0a0a 2020 2020   .zip file..    
-00014650: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
-00014660: 2074 6865 2070 6174 6820 6f66 2074 6865   the path of the
-00014670: 2065 7874 7261 6374 6564 2066 696c 652e   extracted file.
-00014680: 0a0a 2020 2020 5261 6973 6573 204b 6579  ..    Raises Key
-00014690: 4572 726f 7220 6966 2060 6578 7472 6163  Error if `extrac
-000146a0: 7470 6174 6860 2069 7320 6e6f 7420 696e  tpath` is not in
-000146b0: 2060 7a69 7066 696c 6560 0a20 2020 2022   `zipfile`.    "
-000146c0: 2222 0a20 2020 2072 6574 7572 6e20 5f7a  "".    return _z
-000146d0: 6970 5f65 7874 7261 6374 287a 6970 6669  ip_extract(zipfi
-000146e0: 6c65 2c20 5b65 7874 7261 6374 7061 7468  le, [extractpath
-000146f0: 5d29 5b30 5d0a 0a0a 6465 6620 5f63 736f  ])[0]...def _cso
-00014700: 756e 645f 6f70 636f 6465 7328 6d65 7468  und_opcodes(meth
-00014710: 6f64 3d27 6373 6f75 6e64 2729 202d 3e20  od='csound') -> 
-00014720: 6c69 7374 5b73 7472 5d3a 0a20 2020 2022  list[str]:.    "
-00014730: 2222 0a20 2020 2052 6574 7572 6e73 2061  "".    Returns a
-00014740: 206c 6973 7420 6f66 2069 6e73 7461 6c6c   list of install
-00014750: 6564 206f 7063 6f64 6573 0a20 2020 2022  ed opcodes.    "
-00014760: 2222 0a20 2020 2069 6620 6d65 7468 6f64  "".    if method
-00014770: 203d 3d20 2763 736f 756e 6427 3a0a 2020   == 'csound':.  
-00014780: 2020 2020 2020 6373 6f75 6e64 5f62 696e        csound_bin
-00014790: 203d 205f 6765 745f 6373 6f75 6e64 5f62   = _get_csound_b
-000147a0: 696e 6172 7928 2263 736f 756e 6422 290a  inary("csound").
-000147b0: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
-000147c0: 736f 756e 645f 6269 6e3a 0a20 2020 2020  sound_bin:.     
-000147d0: 2020 2020 2020 2072 6169 7365 2052 756e         raise Run
-000147e0: 7469 6d65 4572 726f 7228 2244 6964 206e  timeError("Did n
-000147f0: 6f74 2066 696e 6420 6373 6f75 6e64 2062  ot find csound b
-00014800: 696e 6172 7922 290a 2020 2020 2020 2020  inary").        
-00014810: 7072 6f63 203d 2073 7562 7072 6f63 6573  proc = subproces
-00014820: 732e 7275 6e28 5b63 736f 756e 645f 6269  s.run([csound_bi
-00014830: 6e2c 2022 2d7a 3122 5d2c 2073 7464 6f75  n, "-z1"], stdou
-00014840: 743d 7375 6270 726f 6365 7373 2e50 4950  t=subprocess.PIP
-00014850: 452c 2073 7464 6572 723d 7375 6270 726f  E, stderr=subpro
-00014860: 6365 7373 2e53 5444 4f55 5429 0a20 2020  cess.STDOUT).   
-00014870: 2020 2020 2074 7874 203d 2070 726f 632e       txt = proc.
-00014880: 7374 646f 7574 2e64 6563 6f64 6528 2761  stdout.decode('a
-00014890: 7363 6969 2729 0a20 2020 2020 2020 206f  scii').        o
-000148a0: 7063 6f64 6573 203d 205b 5d0a 2020 2020  pcodes = [].    
-000148b0: 2020 2020 666f 7220 6c69 6e65 2069 6e20      for line in 
-000148c0: 7478 742e 7370 6c69 746c 696e 6573 2829  txt.splitlines()
-000148d0: 3a0a 2020 2020 2020 2020 2020 2020 6c69  :.            li
-000148e0: 6e65 203d 206c 696e 652e 7374 7269 7028  ne = line.strip(
-000148f0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00014900: 206e 6f74 206c 696e 653a 0a20 2020 2020   not line:.     
-00014910: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
-00014920: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
-00014930: 7061 7274 7320 3d20 6c69 6e65 2e73 706c  parts = line.spl
-00014940: 6974 2829 0a20 2020 2020 2020 2020 2020  it().           
-00014950: 206f 7063 6f64 6573 2e61 7070 656e 6428   opcodes.append(
-00014960: 7061 7274 735b 305d 290a 2020 2020 2020  parts[0]).      
-00014970: 2020 7265 7475 726e 206f 7063 6f64 6573    return opcodes
-00014980: 0a20 2020 2065 6c69 6620 6d65 7468 6f64  .    elif method
-00014990: 203d 3d20 2763 7463 736f 756e 6427 3a0a   == 'ctcsound':.
-000149a0: 2020 2020 2020 2020 696d 706f 7274 2063          import c
-000149b0: 7463 736f 756e 6437 0a20 2020 2020 2020  tcsound7.       
-000149c0: 2063 7320 3d20 6374 6373 6f75 6e64 372e   cs = ctcsound7.
-000149d0: 4373 6f75 6e64 2829 0a20 2020 2020 2020  Csound().       
-000149e0: 2063 732e 7365 744f 7074 696f 6e28 222d   cs.setOption("-
-000149f0: 6422 2920 2023 2073 7570 7265 7373 2064  d")  # supress d
-00014a00: 6973 706c 6179 730a 2020 2020 2020 2020  isplays.        
-00014a10: 2320 6966 206f 7063 6f64 6564 6972 3a0a  # if opcodedir:.
-00014a20: 2020 2020 2020 2020 2320 2020 2020 6373          #     cs
-00014a30: 2e73 6574 4f70 7469 6f6e 2866 272d 2d6f  .setOption(f'--o
-00014a40: 7063 6f64 652d 6469 723d 7b6f 7063 6f64  pcode-dir={opcod
-00014a50: 6564 6972 7d27 290a 2020 2020 2020 2020  edir}').        
-00014a60: 6f70 636f 6465 732c 206e 203d 2063 732e  opcodes, n = cs.
-00014a70: 6e65 774f 7063 6f64 654c 6973 7428 290a  newOpcodeList().
-00014a80: 2020 2020 2020 2020 6f70 636f 6465 4e61          opcodeNa
-00014a90: 6d65 7320 3d20 5b6f 7063 2e6f 706e 616d  mes = [opc.opnam
-00014aa0: 652e 6465 636f 6465 2827 7574 662d 3827  e.decode('utf-8'
-00014ab0: 2920 666f 7220 6f70 6320 696e 206f 7063  ) for opc in opc
-00014ac0: 6f64 6573 5d0a 2020 2020 2020 2020 6373  odes].        cs
-00014ad0: 2e64 6973 706f 7365 4f70 636f 6465 4c69  .disposeOpcodeLi
-00014ae0: 7374 286f 7063 6f64 6573 290a 2020 2020  st(opcodes).    
-00014af0: 2020 2020 7265 7475 726e 206f 7063 6f64      return opcod
-00014b00: 654e 616d 6573 0a0a 0a64 6566 205f 706c  eNames...def _pl
-00014b10: 7567 696e 5f65 7874 656e 7369 6f6e 2829  ugin_extension()
-00014b20: 202d 3e20 7374 723a 0a20 2020 2072 6574   -> str:.    ret
-00014b30: 7572 6e20 7b0a 2020 2020 2020 2020 276c  urn {.        'l
-00014b40: 696e 7578 273a 2027 2e73 6f27 2c0a 2020  inux': '.so',.  
-00014b50: 2020 2020 2020 2764 6172 7769 6e27 3a20        'darwin': 
-00014b60: 272e 6479 6c69 6227 2c0a 2020 2020 2020  '.dylib',.      
-00014b70: 2020 2777 696e 3332 273a 2027 2e64 6c6c    'win32': '.dll
-00014b80: 270a 2020 2020 7d5b 7379 732e 706c 6174  '.    }[sys.plat
-00014b90: 666f 726d 5d0a 0a0a 6465 6620 5f67 6574  form]...def _get
-00014ba0: 5f70 6174 685f 7365 7061 7261 746f 7228  _path_separator(
-00014bb0: 2920 2d3e 2073 7472 3a0a 2020 2020 2222  ) -> str:.    ""
-00014bc0: 2252 6574 7572 6e73 2074 6865 2070 6174  "Returns the pat
-00014bd0: 6820 7365 7061 7261 746f 7220 666f 7220  h separator for 
-00014be0: 7468 6520 6375 7272 656e 7420 706c 6174  the current plat
-00014bf0: 666f 726d 2222 220a 2020 2020 6966 2073  form""".    if s
-00014c00: 7973 2e70 6c61 7466 6f72 6d20 3d3d 2022  ys.platform == "
-00014c10: 7769 6e33 3222 3a0a 2020 2020 2020 2020  win32":.        
-00014c20: 7265 7475 726e 2022 3b22 0a20 2020 2072  return ";".    r
-00014c30: 6574 7572 6e20 223a 220a 0a0a 6465 6620  eturn ":"...def 
-00014c40: 5f67 6574 5f73 6865 6c6c 2829 202d 3e20  _get_shell() -> 
-00014c50: 4f70 7469 6f6e 616c 5b73 7472 5d3a 0a20  Optional[str]:. 
-00014c60: 2020 2022 2222 0a20 2020 2052 6574 7572     """.    Retur
-00014c70: 6e73 206f 6e65 206f 6620 2262 6173 6822  ns one of "bash"
-00014c80: 2c20 227a 7368 222c 2022 6669 7368 220a  , "zsh", "fish".
-00014c90: 0a20 2020 2049 6620 6e6f 7420 6162 6c65  .    If not able
-00014ca0: 2074 6f20 6765 7420 7468 6520 6769 7665   to get the give
-00014cb0: 6e20 696e 666f 726d 6174 696f 6e2c 2072  n information, r
-00014cc0: 6574 7572 6e73 204e 6f6e 650a 2020 2020  eturns None.    
-00014cd0: 496e 2070 6172 7469 6375 6c61 722c 2069  In particular, i
-00014ce0: 6e20 7769 6e64 6f77 7320 6974 2072 6574  n windows it ret
-00014cf0: 7572 6e73 204e 6f6e 650a 2020 2020 2222  urns None.    ""
-00014d00: 220a 2020 2020 6966 2073 7973 2e70 6c61  ".    if sys.pla
-00014d10: 7466 6f72 6d20 3d3d 2022 7769 6e33 3222  tform == "win32"
-00014d20: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00014d30: 0a20 2020 2073 6865 6c6c 656e 7620 3d20  .    shellenv = 
-00014d40: 6f73 2e67 6574 656e 7628 2253 4845 4c4c  os.getenv("SHELL
-00014d50: 2229 0a20 2020 2069 6620 6e6f 7420 7368  ").    if not sh
-00014d60: 656c 6c65 6e76 3a0a 2020 2020 2020 2020  ellenv:.        
-00014d70: 7265 7475 726e 204e 6f6e 650a 2020 2020  return None.    
-00014d80: 7368 656c 6c20 3d20 6f73 2e70 6174 682e  shell = os.path.
-00014d90: 7370 6c69 7428 7368 656c 6c65 6e76 295b  split(shellenv)[
-00014da0: 315d 2e73 7472 6970 2829 0a20 2020 2069  1].strip().    i
-00014db0: 6620 7368 656c 6c20 696e 2028 2262 6173  f shell in ("bas
-00014dc0: 6822 2c20 227a 7368 222c 2022 6669 7368  h", "zsh", "fish
-00014dd0: 2229 3a0a 2020 2020 2020 2020 7265 7475  "):.        retu
-00014de0: 726e 2073 6865 6c6c 0a20 2020 2072 6574  rn shell.    ret
-00014df0: 7572 6e20 4e6f 6e65 0a0a 0a64 6566 205f  urn None...def _
-00014e00: 6765 745f 6373 6f75 6e64 5f62 696e 6172  get_csound_binar
-00014e10: 7928 6269 6e61 7279 2920 2d3e 204f 7074  y(binary) -> Opt
-00014e20: 696f 6e61 6c5b 7374 725d 3a0a 2020 2020  ional[str]:.    
-00014e30: 6966 2028 6f75 7420 3a3d 205f 7365 7373  if (out := _sess
-00014e40: 696f 6e2e 6361 6368 652e 6765 7428 2763  ion.cache.get('c
-00014e50: 736f 756e 642d 6269 6e27 2c20 5f55 4e53  sound-bin', _UNS
-00014e60: 4554 2929 2069 7320 5f55 4e53 4554 3a0a  ET)) is _UNSET:.
-00014e70: 2020 2020 2020 2020 7061 7468 203d 2073          path = s
-00014e80: 6875 7469 6c2e 7768 6963 6828 6269 6e61  hutil.which(bina
-00014e90: 7279 290a 2020 2020 2020 2020 5f73 6573  ry).        _ses
-00014ea0: 7369 6f6e 2e63 6163 6865 5b27 6373 6f75  sion.cache['csou
-00014eb0: 6e64 2d62 696e 275d 203d 206f 7574 203d  nd-bin'] = out =
-00014ec0: 2070 6174 6820 6966 2070 6174 6820 656c   path if path el
-00014ed0: 7365 204e 6f6e 650a 2020 2020 7265 7475  se None.    retu
-00014ee0: 726e 206f 7574 0a0a 0a64 6566 205f 6765  rn out...def _ge
-00014ef0: 745f 6769 745f 6269 6e61 7279 2829 202d  t_git_binary() -
-00014f00: 3e20 7374 723a 0a20 2020 2069 6620 2870  > str:.    if (p
-00014f10: 6174 6820 3a3d 205f 7365 7373 696f 6e2e  ath := _session.
-00014f20: 6361 6368 652e 6765 7428 2767 6974 2d62  cache.get('git-b
-00014f30: 696e 6172 7927 2929 2069 7320 4e6f 6e65  inary')) is None
-00014f40: 3a0a 2020 2020 2020 2020 7061 7468 203d  :.        path =
-00014f50: 2073 6875 7469 6c2e 7768 6963 6828 2267   shutil.which("g
-00014f60: 6974 2229 0a20 2020 2020 2020 2069 6620  it").        if 
-00014f70: 6e6f 7420 7061 7468 206f 7220 6e6f 7420  not path or not 
-00014f80: 6f73 2e70 6174 682e 6578 6973 7473 2870  os.path.exists(p
-00014f90: 6174 6829 3a0a 2020 2020 2020 2020 2020  ath):.          
-00014fa0: 2020 7261 6973 6520 5275 6e74 696d 6545    raise RuntimeE
-00014fb0: 7272 6f72 2822 6769 7420 6269 6e61 7279  rror("git binary
-00014fc0: 206e 6f74 2066 6f75 6e64 2229 0a20 2020   not found").   
-00014fd0: 2020 2020 205f 7365 7373 696f 6e2e 6361       _session.ca
-00014fe0: 6368 655b 2767 6974 2d62 696e 6172 7927  che['git-binary'
-00014ff0: 5d20 3d20 7061 7468 0a20 2020 2072 6574  ] = path.    ret
-00015000: 7572 6e20 7061 7468 0a0a 0a64 6566 205f  urn path...def _
-00015010: 656e 7375 7265 5f70 6172 656e 745f 6578  ensure_parent_ex
-00015020: 6973 7473 2870 6174 683a 2050 6174 6829  ists(path: Path)
-00015030: 202d 3e20 4e6f 6e65 3a0a 2020 2020 6966   -> None:.    if
-00015040: 2070 6174 682e 6973 5f64 6972 2829 3a0a   path.is_dir():.
-00015050: 2020 2020 2020 2020 7061 7265 6e74 203d          parent =
-00015060: 2070 6174 680a 2020 2020 656c 7365 3a0a   path.    else:.
-00015070: 2020 2020 2020 2020 7061 7265 6e74 203d          parent =
-00015080: 2070 6174 682e 7061 7265 6e74 0a20 2020   path.parent.   
-00015090: 2070 6172 656e 742e 6d6b 6469 7228 7061   parent.mkdir(pa
-000150a0: 7265 6e74 733d 5472 7565 2c20 6578 6973  rents=True, exis
-000150b0: 745f 6f6b 3d54 7275 6529 0a0a 0a64 6566  t_ok=True)...def
-000150c0: 205f 6769 745f 6c6f 6361 6c5f 7061 7468   _git_local_path
-000150d0: 2872 6570 6f3a 2073 7472 2c20 7570 6461  (repo: str, upda
-000150e0: 7465 3d46 616c 7365 2920 2d3e 2050 6174  te=False) -> Pat
-000150f0: 683a 0a20 2020 2022 2222 0a20 2020 2051  h:.    """.    Q
-00015100: 7565 7279 2074 6865 206c 6f63 616c 2070  uery the local p
-00015110: 6174 6820 6f66 2074 6865 2067 6976 656e  ath of the given
-00015120: 2072 6570 6f73 6974 6f72 792c 2063 6c6f   repository, clo
-00015130: 6e65 2069 6620 6e65 6564 6564 0a0a 2020  ne if needed..  
-00015140: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
-00015150: 7265 706f 3a20 7468 6520 7572 6c20 6f66  repo: the url of
-00015160: 2074 6865 2067 6974 2072 6570 6f73 6974   the git reposit
-00015170: 6f72 790a 2020 2020 2020 2020 7570 6461  ory.        upda
-00015180: 7465 3a20 6966 206e 6f74 2063 6c6f 6e65  te: if not clone
-00015190: 642c 2075 7064 6174 6520 7468 6520 7265  d, update the re
-000151a0: 706f 0a20 2020 2022 2222 0a20 2020 2069  po.    """.    i
-000151b0: 6620 7265 706f 2069 6e20 5f73 6573 7369  f repo in _sessi
-000151c0: 6f6e 2e63 6c6f 6e65 645f 7265 706f 733a  on.cloned_repos:
-000151d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000151e0: 5f73 6573 7369 6f6e 2e63 6c6f 6e65 645f  _session.cloned_
-000151f0: 7265 706f 735b 7265 706f 5d0a 2020 2020  repos[repo].    
-00015200: 6173 7365 7274 2072 6570 6f20 616e 6420  assert repo and 
-00015210: 5f69 735f 6769 745f 7572 6c28 7265 706f  _is_git_url(repo
-00015220: 292c 2066 2249 6e76 616c 6964 2072 6570  ), f"Invalid rep
-00015230: 6f73 6974 6f72 7920 6e61 6d65 3a20 7b72  ository name: {r
-00015240: 6570 6f7d 220a 2020 2020 5f64 6562 7567  epo}".    _debug
-00015250: 2866 2251 7565 7279 696e 6720 6c6f 6361  (f"Querying loca
-00015260: 6c20 7061 7468 2066 6f72 2072 6570 6f20  l path for repo 
-00015270: 7b72 6570 6f7d 2229 0a20 2020 2072 6570  {repo}").    rep
-00015280: 6f6e 616d 6520 3d20 5f67 6974 5f72 6570  oname = _git_rep
-00015290: 6f6e 616d 6528 7265 706f 290a 2020 2020  oname(repo).    
-000152a0: 6465 7374 696e 6174 696f 6e20 3d20 5249  destination = RI
-000152b0: 5353 4554 5f43 4c4f 4e45 535f 5041 5448  SSET_CLONES_PATH
-000152c0: 202f 2072 6570 6f6e 616d 650a 2020 2020   / reponame.    
-000152d0: 6966 2064 6573 7469 6e61 7469 6f6e 2e65  if destination.e
-000152e0: 7869 7374 7328 293a 0a20 2020 2020 2020  xists():.       
-000152f0: 2061 7373 6572 7420 5f69 735f 6769 745f   assert _is_git_
-00015300: 7265 706f 2864 6573 7469 6e61 7469 6f6e  repo(destination
-00015310: 292c 2066 2245 7870 6563 7465 6420 7b64  ), f"Expected {d
-00015320: 6573 7469 6e61 7469 6f6e 7d20 746f 2062  estination} to b
-00015330: 6520 6120 6769 7420 7265 706f 7369 746f  e a git reposito
-00015340: 7279 220a 2020 2020 2020 2020 5f73 6573  ry".        _ses
-00015350: 7369 6f6e 2e63 6c6f 6e65 645f 7265 706f  sion.cloned_repo
-00015360: 735b 7265 706f 5d20 3d20 6465 7374 696e  s[repo] = destin
-00015370: 6174 696f 6e0a 2020 2020 2020 2020 6966  ation.        if
-00015380: 2075 7064 6174 653a 0a20 2020 2020 2020   update:.       
-00015390: 2020 2020 205f 6769 745f 7570 6461 7465       _git_update
-000153a0: 2864 6573 7469 6e61 7469 6f6e 290a 2020  (destination).  
-000153b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000153c0: 5f67 6974 5f63 6c6f 6e65 5f69 6e74 6f28  _git_clone_into(
-000153d0: 7265 706f 2c20 6465 7374 696e 6174 696f  repo, destinatio
-000153e0: 6e3d 6465 7374 696e 6174 696f 6e2c 2064  n=destination, d
-000153f0: 6570 7468 3d31 290a 2020 2020 2020 2020  epth=1).        
-00015400: 5f73 6573 7369 6f6e 2e63 6c6f 6e65 645f  _session.cloned_
-00015410: 7265 706f 735b 7265 706f 5d20 3d20 6465  repos[repo] = de
-00015420: 7374 696e 6174 696f 6e0a 2020 2020 7265  stination.    re
-00015430: 7475 726e 2064 6573 7469 6e61 7469 6f6e  turn destination
-00015440: 0a0a 0a64 6566 205f 6769 745f 636c 6f6e  ...def _git_clon
-00015450: 655f 696e 746f 2872 6570 6f3a 2073 7472  e_into(repo: str
-00015460: 2c20 6465 7374 696e 6174 696f 6e3a 2050  , destination: P
-00015470: 6174 682c 2064 6570 7468 3d31 2920 2d3e  ath, depth=1) ->
-00015480: 204e 6f6e 653a 0a20 2020 2022 2222 0a20   None:.    """. 
-00015490: 2020 2043 6c6f 6e65 2074 6865 2067 6976     Clone the giv
-000154a0: 656e 2072 6570 6f73 6974 6f72 7920 746f  en repository to
-000154b0: 2074 6865 2064 6573 7469 6e61 7469 6f6e   the destination
-000154c0: 2e0a 0a20 2020 2041 7267 733a 0a20 2020  ...    Args:.   
-000154d0: 2020 2020 2072 6570 6f3a 2074 6865 2075       repo: the u
-000154e0: 726c 2074 6f20 7468 6520 7265 706f 7369  rl to the reposi
-000154f0: 746f 7279 0a20 2020 2020 2020 2064 6573  tory.        des
-00015500: 7469 6e61 7469 6f6e 3a20 6c6f 6361 6c20  tination: local 
-00015510: 7061 7468 2077 6865 7265 2074 6865 2072  path where the r
-00015520: 6570 6f73 6974 6f72 7920 7769 6c6c 2062  epository will b
-00015530: 6520 636c 6f6e 6564 0a20 2020 2020 2020  e cloned.       
-00015540: 2064 6570 7468 3a20 6966 203e 2030 2c20   depth: if > 0, 
-00015550: 7468 6520 6465 7074 6820 6f66 2074 6865  the depth of the
-00015560: 2063 6c6f 6e65 2e0a 2020 2020 2222 220a   clone..    """.
-00015570: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
-00015580: 7461 6e63 6528 6465 7374 696e 6174 696f  tance(destinatio
-00015590: 6e2c 2050 6174 6829 3a0a 2020 2020 2020  n, Path):.      
-000155a0: 2020 7261 6973 6520 5479 7065 4572 726f    raise TypeErro
-000155b0: 7228 2264 6573 7469 6e61 7469 6f6e 2073  r("destination s
-000155c0: 686f 756c 6420 6265 2061 2050 6174 6822  hould be a Path"
-000155d0: 290a 2020 2020 6966 206e 6f74 2064 6573  ).    if not des
-000155e0: 7469 6e61 7469 6f6e 2e69 735f 6162 736f  tination.is_abso
-000155f0: 6c75 7465 2829 3a0a 2020 2020 2020 2020  lute():.        
-00015600: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
-00015610: 2822 4465 7374 696e 6174 696f 6e20 7368  ("Destination sh
-00015620: 6f75 6c64 2062 6520 616e 2061 6273 6f6c  ould be an absol
-00015630: 7574 6520 7061 7468 2229 0a20 2020 2069  ute path").    i
-00015640: 6620 6465 7374 696e 6174 696f 6e2e 6578  f destination.ex
-00015650: 6973 7473 2829 3a0a 2020 2020 2020 2020  ists():.        
-00015660: 7261 6973 6520 4f53 4572 726f 7228 2244  raise OSError("D
-00015670: 6573 7469 6e61 7469 6f6e 2070 6174 6820  estination path 
-00015680: 616c 7265 6164 7920 6578 6973 7473 2c20  already exists, 
-00015690: 6361 6e27 7420 636c 6f6e 6520 6769 7420  can't clone git 
-000156a0: 7265 706f 7369 746f 7279 2229 0a20 2020  repository").   
-000156b0: 2067 6974 6269 6e20 3d20 5f67 6574 5f67   gitbin = _get_g
-000156c0: 6974 5f62 696e 6172 7928 290a 2020 2020  it_binary().    
-000156d0: 5f65 6e73 7572 655f 7061 7265 6e74 5f65  _ensure_parent_e
-000156e0: 7869 7374 7328 6465 7374 696e 6174 696f  xists(destinatio
-000156f0: 6e29 0a20 2020 2061 7267 7320 3d20 5b67  n).    args = [g
-00015700: 6974 6269 6e2c 2022 636c 6f6e 6522 5d0a  itbin, "clone"].
-00015710: 2020 2020 6966 2064 6570 7468 203e 2030      if depth > 0
-00015720: 3a0a 2020 2020 2020 2020 6172 6773 2e65  :.        args.e
-00015730: 7874 656e 6428 5b22 2d2d 6465 7074 6822  xtend(["--depth"
-00015740: 2c20 7374 7228 6465 7074 6829 5d29 0a20  , str(depth)]). 
-00015750: 2020 2061 7267 732e 6578 7465 6e64 285b     args.extend([
-00015760: 7265 706f 2c20 7374 7228 6465 7374 696e  repo, str(destin
-00015770: 6174 696f 6e29 5d29 0a20 2020 205f 7375  ation)]).    _su
-00015780: 6270 726f 635f 6361 6c6c 2861 7267 7329  bproc_call(args)
-00015790: 0a0a 0a64 6566 205f 6769 745f 7265 706f  ...def _git_repo
-000157a0: 5f6e 6565 6473 5f75 7064 6174 6528 7265  _needs_update(re
-000157b0: 706f 7061 7468 3a20 5061 7468 2920 2d3e  popath: Path) ->
-000157c0: 2062 6f6f 6c3a 0a20 2020 2022 2222 0a20   bool:.    """. 
-000157d0: 2020 2043 6865 636b 2069 6620 6120 7265     Check if a re
-000157e0: 706f 7369 746f 7279 206e 6565 6473 2074  pository needs t
-000157f0: 6f20 6265 2075 7064 6174 6564 0a0a 2020  o be updated..  
-00015800: 2020 4e42 3a20 666f 7220 6f75 7220 7573    NB: for our us
-00015810: 6520 6361 7365 2c20 7768 6572 6520 6e6f  e case, where no
-00015820: 206d 6572 6765 7320 6172 6520 6578 7065   merges are expe
-00015830: 6374 6564 2c20 746f 2075 7064 6174 6520  cted, to update 
-00015840: 6973 206a 7573 740a 2020 2020 6173 2066  is just.    as f
-00015850: 6173 7420 6173 2074 6f20 6368 6563 6b20  ast as to check 
-00015860: 6669 7273 7420 616e 6420 7468 656e 2061  first and then a
-00015870: 6374 2e0a 2020 2020 2222 220a 2020 2020  ct..    """.    
-00015880: 6377 6420 3d20 6f73 2e70 6174 682e 6162  cwd = os.path.ab
-00015890: 7370 6174 6828 6f73 2e70 6174 682e 6375  spath(os.path.cu
-000158a0: 7264 6972 290a 2020 2020 6f73 2e63 6864  rdir).    os.chd
-000158b0: 6972 2873 7472 2872 6570 6f70 6174 6829  ir(str(repopath)
-000158c0: 290a 2020 2020 6769 7420 3d20 5f67 6574  ).    git = _get
-000158d0: 5f67 6974 5f62 696e 6172 7928 290a 2020  _git_binary().  
-000158e0: 2020 5f73 7562 7072 6f63 5f63 616c 6c28    _subproc_call(
-000158f0: 5b67 6974 2c20 2266 6574 6368 225d 290a  [git, "fetch"]).
-00015900: 2020 2020 6865 6164 6861 7368 203d 2073      headhash = s
-00015910: 7562 7072 6f63 6573 732e 6368 6563 6b5f  ubprocess.check_
-00015920: 6f75 7470 7574 285b 6769 742c 2022 7265  output([git, "re
-00015930: 762d 7061 7273 6522 2c20 2248 4541 4422  v-parse", "HEAD"
-00015940: 5d29 2e64 6563 6f64 6528 2775 7466 2d38  ]).decode('utf-8
-00015950: 2729 0a20 2020 2075 7073 7472 6561 6d68  ').    upstreamh
-00015960: 6173 6820 3d20 7375 6270 726f 6365 7373  ash = subprocess
-00015970: 2e63 6865 636b 5f6f 7574 7075 7428 5b67  .check_output([g
-00015980: 6974 2c20 2272 6576 2d70 6172 7365 222c  it, "rev-parse",
-00015990: 2022 6d61 7374 6572 407b 7570 7374 7265   "master@{upstre
-000159a0: 616d 7d22 5d29 2e64 6563 6f64 6528 2775  am}"]).decode('u
-000159b0: 7466 2d38 2729 0a20 2020 205f 6465 6275  tf-8').    _debu
-000159c0: 6728 6622 4368 6563 6b69 6e67 2068 6173  g(f"Checking has
-000159d0: 6865 732c 2068 6561 643a 207b 6865 6164  hes, head: {head
-000159e0: 6861 7368 7d2c 2075 7073 7472 6561 6d3a  hash}, upstream:
-000159f0: 207b 7570 7374 7265 616d 6861 7368 7d22   {upstreamhash}"
-00015a00: 290a 2020 2020 6f73 2e63 6864 6972 2863  ).    os.chdir(c
-00015a10: 7764 290a 2020 2020 7265 7475 726e 2068  wd).    return h
-00015a20: 6561 6468 6173 6820 213d 2075 7073 7472  eadhash != upstr
-00015a30: 6561 6d68 6173 680a 0a0a 6465 6620 5f67  eamhash...def _g
-00015a40: 6974 5f75 7064 6174 6528 7265 706f 7061  it_update(repopa
-00015a50: 7468 3a20 5061 7468 2c20 6465 7074 683d  th: Path, depth=
-00015a60: 302c 2063 6865 636b 5f69 665f 6e65 6564  0, check_if_need
-00015a70: 6564 3d46 616c 7365 2920 2d3e 204e 6f6e  ed=False) -> Non
-00015a80: 653a 0a20 2020 2022 2222 0a20 2020 2055  e:.    """.    U
-00015a90: 7064 6174 6520 7468 6520 6769 7420 7265  pdate the git re
-00015aa0: 706f 2061 7420 7468 6520 6769 7665 6e20  po at the given 
-00015ab0: 7061 7468 0a20 2020 2022 2222 0a20 2020  path.    """.   
-00015ac0: 205f 6465 6275 6728 6622 5570 6461 7469   _debug(f"Updati
-00015ad0: 6e67 2067 6974 2072 6570 6f73 6974 6f72  ng git repositor
-00015ae0: 793a 207b 7265 706f 7061 7468 7d22 290a  y: {repopath}").
-00015af0: 2020 2020 6966 206e 6f74 2072 6570 6f70      if not repop
-00015b00: 6174 682e 6578 6973 7473 2829 3a0a 2020  ath.exists():.  
-00015b10: 2020 2020 2020 7261 6973 6520 4f53 4572        raise OSEr
-00015b20: 726f 7228 6622 4361 6e27 7420 6669 6e64  ror(f"Can't find
-00015b30: 2070 6174 6820 746f 2067 6974 2072 6570   path to git rep
-00015b40: 6f73 6974 6f72 7920 7b72 6570 6f70 6174  ository {repopat
-00015b50: 687d 2229 0a20 2020 2069 6620 6368 6563  h}").    if chec
-00015b60: 6b5f 6966 5f6e 6565 6465 6420 616e 6420  k_if_needed and 
-00015b70: 6e6f 7420 5f67 6974 5f72 6570 6f5f 6e65  not _git_repo_ne
-00015b80: 6564 735f 7570 6461 7465 2872 6570 6f70  eds_update(repop
-00015b90: 6174 6829 3a0a 2020 2020 2020 2020 5f64  ath):.        _d
-00015ba0: 6562 7567 2866 2252 6570 6f73 6974 6f72  ebug(f"Repositor
-00015bb0: 7920 7b72 6570 6f70 6174 687d 2075 7020  y {repopath} up 
-00015bc0: 746f 2064 6174 6522 290a 2020 2020 2020  to date").      
-00015bd0: 2020 7265 7475 726e 0a20 2020 2067 6974    return.    git
-00015be0: 6269 6e20 3d20 5f67 6574 5f67 6974 5f62  bin = _get_git_b
-00015bf0: 696e 6172 7928 290a 2020 2020 6377 6420  inary().    cwd 
-00015c00: 3d20 6f73 2e70 6174 682e 6162 7370 6174  = os.path.abspat
-00015c10: 6828 6f73 2e70 6174 682e 6375 7264 6972  h(os.path.curdir
-00015c20: 290a 2020 2020 6f73 2e63 6864 6972 2873  ).    os.chdir(s
-00015c30: 7472 2872 6570 6f70 6174 6829 290a 2020  tr(repopath)).  
-00015c40: 2020 6172 6773 203d 205b 6769 7462 696e    args = [gitbin
-00015c50: 2c20 2270 756c 6c22 5d0a 2020 2020 6966  , "pull"].    if
-00015c60: 2064 6570 7468 203e 2030 3a0a 2020 2020   depth > 0:.    
-00015c70: 2020 2020 6172 6773 2e65 7874 656e 6428      args.extend(
-00015c80: 5b27 2d2d 6465 7074 6827 2c20 7374 7228  ['--depth', str(
-00015c90: 6465 7074 6829 5d29 0a20 2020 2069 6620  depth)]).    if 
-00015ca0: 5f73 6573 7369 6f6e 2e64 6562 7567 3a0a  _session.debug:.
-00015cb0: 2020 2020 2020 2020 7375 6270 726f 6365          subproce
-00015cc0: 7373 2e63 616c 6c28 6172 6773 290a 2020  ss.call(args).  
-00015cd0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00015ce0: 7375 6270 726f 6365 7373 2e63 616c 6c28  subprocess.call(
-00015cf0: 6172 6773 2c20 7374 646f 7574 3d73 7562  args, stdout=sub
-00015d00: 7072 6f63 6573 732e 5049 5045 290a 2020  process.PIPE).  
-00015d10: 2020 6f73 2e63 6864 6972 2863 7764 290a    os.chdir(cwd).
-00015d20: 0a0a 6465 6620 5f76 6572 7369 6f6e 5f74  ..def _version_t
-00015d30: 7570 6c65 2876 6572 7369 6f6e 7374 723a  uple(versionstr:
-00015d40: 2073 7472 2920 2d3e 2074 7570 6c65 5b69   str) -> tuple[i
-00015d50: 6e74 2c20 696e 742c 2069 6e74 5d3a 0a20  nt, int, int]:. 
-00015d60: 2020 2022 2222 2043 6f6e 7665 7274 2061     """ Convert a
-00015d70: 2076 6572 7369 6f6e 2073 7472 696e 6720   version string 
-00015d80: 746f 2069 7473 2069 6e74 6567 6572 2070  to its integer p
-00015d90: 6172 7473 2022 2222 0a20 2020 2069 6620  arts """.    if 
-00015da0: 6e6f 7420 7665 7273 696f 6e73 7472 3a0a  not versionstr:.
-00015db0: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00015dc0: 6c75 6545 7272 6f72 2822 7665 7273 696f  lueError("versio
-00015dd0: 6e73 7472 2069 7320 656d 7074 7922 290a  nstr is empty").
-00015de0: 2020 2020 7061 7274 7320 3d20 7665 7273      parts = vers
-00015df0: 696f 6e73 7472 2e73 706c 6974 2822 2e22  ionstr.split("."
-00015e00: 2c20 6d61 7873 706c 6974 3d33 290a 2020  , maxsplit=3).  
-00015e10: 2020 7472 793a 0a20 2020 2020 2020 2069    try:.        i
-00015e20: 6e74 7320 3d20 5b69 6e74 2870 6172 7429  nts = [int(part)
-00015e30: 2066 6f72 2070 6172 7420 696e 2070 6172   for part in par
-00015e40: 7473 5d0a 2020 2020 6578 6365 7074 2056  ts].    except V
-00015e50: 616c 7565 4572 726f 723a 0a20 2020 2020  alueError:.     
-00015e60: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-00015e70: 726f 7228 6622 436f 756c 6420 6e6f 7420  ror(f"Could not 
-00015e80: 7061 7273 6520 7665 7273 696f 6e20 277b  parse version '{
-00015e90: 7665 7273 696f 6e73 7472 7d27 2229 0a0a  versionstr}'")..
-00015ea0: 2020 2020 6966 206c 656e 2869 6e74 7329      if len(ints)
-00015eb0: 203d 3d20 313a 0a20 2020 2020 2020 2069   == 1:.        i
-00015ec0: 6e74 7320 2b3d 205b 302c 2030 5d0a 2020  nts += [0, 0].  
-00015ed0: 2020 656c 6966 206c 656e 2869 6e74 7329    elif len(ints)
-00015ee0: 203d 3d20 323a 0a20 2020 2020 2020 2069   == 2:.        i
-00015ef0: 6e74 732e 6170 7065 6e64 2830 290a 2020  nts.append(0).  
-00015f00: 2020 656c 6966 206c 656e 2869 6e74 7329    elif len(ints)
-00015f10: 203e 2033 3a0a 2020 2020 2020 2020 5f64   > 3:.        _d
-00015f20: 6562 7567 2822 546f 6f20 6d61 6e79 2076  ebug("Too many v
-00015f30: 6572 7369 6f6e 2070 6172 7473 2028 6d61  ersion parts (ma
-00015f40: 782e 2033 292c 2075 7369 6e67 2074 6865  x. 3), using the
-00015f50: 2066 6972 7374 2033 2229 0a20 2020 2020   first 3").     
-00015f60: 2020 2069 6e74 7320 3d20 696e 7473 5b3a     ints = ints[:
-00015f70: 335d 0a20 2020 2069 312c 2069 322c 2069  3].    i1, i2, i
-00015f80: 3320 3d20 696e 7473 0a20 2020 2072 6574  3 = ints.    ret
-00015f90: 7572 6e20 6931 2c20 6932 2c20 6933 0a0a  urn i1, i2, i3..
-00015fa0: 0a64 6566 205f 6669 6e64 5f73 7973 7465  .def _find_syste
-00015fb0: 6d5f 706c 7567 696e 735f 7061 7468 2870  m_plugins_path(p
-00015fc0: 6f73 7369 626c 655f 7061 7468 733a 206c  ossible_paths: l
-00015fd0: 6973 745b 5061 7468 5d29 202d 3e20 4f70  ist[Path]) -> Op
-00015fe0: 7469 6f6e 616c 5b50 6174 685d 3a0a 2020  tional[Path]:.  
-00015ff0: 2020 2222 220a 2020 2020 4769 7665 6e20    """.    Given 
-00016000: 6120 6c69 7374 206f 6620 706f 7373 6962  a list of possib
-00016010: 6c65 2070 6174 6873 2c20 6669 6e64 2074  le paths, find t
-00016020: 6865 2066 6f6c 6465 7220 7768 6572 6520  he folder where 
-00016030: 7468 6520 7379 7374 656d 2070 6c75 6769  the system plugi
-00016040: 6e73 2061 7265 2069 6e73 7461 6c6c 6564  ns are installed
-00016050: 0a20 2020 2022 2222 0a20 2020 2065 7874  .    """.    ext
-00016060: 203d 205f 706c 7567 696e 5f65 7874 656e   = _plugin_exten
-00016070: 7369 6f6e 2829 0a20 2020 205f 6465 6275  sion().    _debu
-00016080: 6728 223e 2053 6561 7263 6869 6e67 206f  g("> Searching o
-00016090: 7063 6f64 6573 2064 6972 3a20 2229 0a0a  pcodes dir: ")..
-000160a0: 2020 2020 6966 2073 7973 2e70 6c61 7466      if sys.platf
-000160b0: 6f72 6d20 3d3d 2022 7769 6e33 3222 3a0a  orm == "win32":.
-000160c0: 2020 2020 2020 2020 646c 6c20 3d20 2261          dll = "a
-000160d0: 7272 6179 6f70 732e 646c 6c22 0a20 2020  rrayops.dll".   
-000160e0: 2065 6c73 653a 0a20 2020 2020 2020 2064   else:.        d
-000160f0: 6c6c 203d 2022 6c69 6261 7272 6179 6f70  ll = "libarrayop
-00016100: 7322 202b 2065 7874 0a0a 2020 2020 666f  s" + ext..    fo
-00016110: 7220 6420 696e 2070 6f73 7369 626c 655f  r d in possible_
-00016120: 7061 7468 733a 0a20 2020 2020 2020 205f  paths:.        _
-00016130: 6465 6275 6728 223e 3e20 6c6f 6f6b 696e  debug(">> lookin
-00016140: 6720 6174 2022 2c20 6429 0a20 2020 2020  g at ", d).     
-00016150: 2020 2070 6174 6820 3d20 642e 6578 7061     path = d.expa
-00016160: 6e64 7573 6572 2829 2e72 6573 6f6c 7665  nduser().resolve
-00016170: 2829 0a20 2020 2020 2020 2069 6620 6e6f  ().        if no
-00016180: 7420 7061 7468 2e69 735f 6469 7228 2920  t path.is_dir() 
-00016190: 6f72 206e 6f74 2070 6174 682e 6578 6973  or not path.exis
-000161a0: 7473 2829 3a0a 2020 2020 2020 2020 2020  ts():.          
-000161b0: 2020 5f64 6562 7567 2822 3e3e 3e20 7061    _debug(">>> pa
-000161c0: 7468 2064 6f65 7320 6e6f 7420 6578 6973  th does not exis
-000161d0: 742e 2e2e 2229 0a20 2020 2020 2020 2020  t...").         
-000161e0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-000161f0: 2020 2020 706c 7567 696e 7320 3d20 6c69      plugins = li
-00016200: 7374 2870 6174 682e 676c 6f62 2822 2a22  st(path.glob("*"
-00016210: 202b 2065 7874 2929 0a20 2020 2020 2020   + ext)).       
-00016220: 2069 6620 6e6f 7420 706c 7567 696e 733a   if not plugins:
-00016230: 0a20 2020 2020 2020 2020 2020 205f 6465  .            _de
-00016240: 6275 6728 6622 3e3e 3e20 7061 7468 207b  bug(f">>> path {
-00016250: 647d 2065 7869 7374 732c 2062 7574 2068  d} exists, but h
-00016260: 6173 206e 6f20 706c 7567 696e 732c 2073  as no plugins, s
-00016270: 6b69 7070 696e 6722 290a 2020 2020 2020  kipping").      
-00016280: 2020 656c 6966 2061 6e79 2870 6c75 6769    elif any(plugi
-00016290: 6e20 666f 7220 706c 7567 696e 2069 6e20  n for plugin in 
-000162a0: 706c 7567 696e 7320 6966 2064 6c6c 203d  plugins if dll =
-000162b0: 3d20 706c 7567 696e 2e6e 616d 6529 3a0a  = plugin.name):.
-000162c0: 2020 2020 2020 2020 2020 2020 5f64 6562              _deb
-000162d0: 7567 2822 3e3e 3e20 466f 756e 6421 2229  ug(">>> Found!")
-000162e0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000162f0: 7572 6e20 7061 7468 0a20 2020 2020 2020  urn path.       
-00016300: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00016310: 2020 205f 6465 6275 6728 6622 3e3e 3e20     _debug(f">>> 
-00016320: 5061 7468 2065 7869 7374 732c 2062 7574  Path exists, but
-00016330: 2069 7420 646f 6573 206e 6f74 2073 6565   it does not see
-00016340: 6d20 746f 2062 6520 7468 6520 7379 7374  m to be the syst
-00016350: 656d 7320 706c 7567 696e 2070 6174 685c  ems plugin path\
-00016360: 6e22 0a20 2020 2020 2020 2020 2020 2020  n".             
-00016370: 2020 2020 2020 6622 3e3e 3e20 287b 646c        f">>> ({dl
-00016380: 6c7d 2077 6173 206e 6f74 2066 6f75 6e64  l} was not found
-00016390: 2074 6865 7265 2922 290a 2020 2020 2020   there)").      
-000163a0: 2020 2020 2020 5f64 6562 7567 2866 223e        _debug(f">
-000163b0: 3e3e 2050 6c75 6769 6e73 2066 6f75 6e64  >> Plugins found
-000163c0: 2068 6572 653a 2022 2c20 272c 2027 2e6a   here: ", ', '.j
-000163d0: 6f69 6e28 706c 7567 696e 2e6e 616d 6520  oin(plugin.name 
-000163e0: 666f 7220 706c 7567 696e 2069 6e20 706c  for plugin in pl
-000163f0: 7567 696e 7329 290a 2020 2020 7265 7475  ugins)).    retu
-00016400: 726e 204e 6f6e 650a 0a0a 6465 6620 5f6c  rn None...def _l
-00016410: 6f61 645f 696e 7374 616c 6c61 7469 6f6e  oad_installation
-00016420: 5f6d 616e 6966 6573 7428 7061 7468 3a20  _manifest(path: 
-00016430: 5061 7468 2920 2d3e 2064 6963 743a 0a20  Path) -> dict:. 
-00016440: 2020 2022 2222 0a20 2020 204c 6f61 6420     """.    Load 
-00016450: 616e 2069 6e73 7461 6c6c 6174 696f 6e20  an installation 
-00016460: 6d61 6e69 6665 7374 0a0a 2020 2020 416e  manifest..    An
-00016470: 2069 6e73 7461 6c6c 6174 696f 6e20 6d61   installation ma
-00016480: 6e69 6665 7374 2069 7320 6120 6a73 6f6e  nifest is a json
-00016490: 2066 696c 6520 7072 6f64 7563 6564 2064   file produced d
-000164a0: 7572 696e 6720 696e 7374 616c 6c61 7469  uring installati
-000164b0: 6f6e 2c0a 2020 2020 7769 7468 206d 6574  on,.    with met
-000164c0: 6164 6174 6120 6162 6f75 7420 7768 6174  adata about what
-000164d0: 2077 6173 2069 6e73 7461 6c6c 6564 2028   was installed (
-000164e0: 706c 7567 696e 2c20 6e61 6d65 2c20 6173  plugin, name, as
-000164f0: 7365 7473 2c20 6574 6329 2e0a 0a20 2020  sets, etc)...   
-00016500: 2052 6169 7365 7320 6a73 6f6e 2e4a 534f   Raises json.JSO
-00016510: 4e44 6563 6f64 6545 7272 6f72 2069 6620  NDecodeError if 
-00016520: 7468 6520 6d61 6e69 6665 7374 2773 206a  the manifest's j
-00016530: 736f 6e20 636f 756c 6420 6e6f 7420 6265  son could not be
-00016540: 2070 6172 7365 640a 2020 2020 2222 220a   parsed.    """.
-00016550: 2020 2020 6173 7365 7274 2070 6174 682e      assert path.
-00016560: 7375 6666 6978 203d 3d20 272e 6a73 6f6e  suffix == '.json
-00016570: 270a 2020 2020 7472 793a 0a20 2020 2020  '.    try:.     
-00016580: 2020 2064 203d 206a 736f 6e2e 6c6f 6164     d = json.load
-00016590: 286f 7065 6e28 7061 7468 2929 0a20 2020  (open(path)).   
-000165a0: 2020 2020 2072 6574 7572 6e20 640a 2020       return d.  
-000165b0: 2020 6578 6365 7074 206a 736f 6e2e 4a53    except json.JS
-000165c0: 4f4e 4465 636f 6465 4572 726f 7220 6173  ONDecodeError as
-000165d0: 2065 3a0a 2020 2020 2020 2020 5f65 7272   e:.        _err
-000165e0: 6f72 6d73 6728 6622 436f 756c 6420 6e6f  ormsg(f"Could no
-000165f0: 7420 7061 7273 6520 6d61 6e69 6665 7374  t parse manifest
-00016600: 206a 736f 6e3a 207b 7061 7468 7d22 290a   json: {path}").
-00016610: 2020 2020 2020 2020 7261 6973 6520 650a          raise e.
-00016620: 0a0a 6465 6620 5f69 735f 7572 6c28 733a  ..def _is_url(s:
-00016630: 2073 7472 2920 2d3e 2062 6f6f 6c3a 0a20   str) -> bool:. 
-00016640: 2020 2022 2222 0a20 2020 2049 7320 6073     """.    Is `s
-00016650: 6020 6120 7661 6c69 6420 7572 6c3f 0a0a  ` a valid url?..
-00016660: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-00016670: 2020 733a 2055 524c 2061 6464 7265 7373    s: URL address
-00016680: 2073 7472 696e 6720 746f 2076 616c 6964   string to valid
-00016690: 6174 650a 2020 2020 2222 220a 2020 2020  ate.    """.    
-000166a0: 7265 7375 6c74 203d 2075 726c 6c69 622e  result = urllib.
-000166b0: 7061 7273 652e 7572 6c70 6172 7365 2873  parse.urlparse(s
-000166c0: 7472 2873 2929 0a20 2020 2072 6574 7572  tr(s)).    retur
-000166d0: 6e20 626f 6f6c 2872 6573 756c 742e 7363  n bool(result.sc
-000166e0: 6865 6d65 2061 6e64 2072 6573 756c 742e  heme and result.
-000166f0: 6e65 746c 6f63 290a 0a0a 6465 6620 5f70  netloc)...def _p
-00016700: 6172 7365 5f70 6c75 6769 6e6b 6579 2870  arse_pluginkey(p
-00016710: 6c75 6769 6e6b 6579 3a20 7374 7229 202d  luginkey: str) -
-00016720: 3e20 7475 706c 655b 7374 722c 2073 7472  > tuple[str, str
-00016730: 5d3a 0a20 2020 2022 2222 0a20 2020 2047  ]:.    """.    G
-00016740: 6976 656e 2061 206b 6579 2070 6c75 6769  iven a key plugi
-00016750: 6e6e 616d 6540 7665 7273 696f 6e2c 2072  nname@version, r
-00016760: 6574 7572 6e20 2870 6c75 6769 6e6e 616d  eturn (pluginnam
-00016770: 652c 2076 6572 7369 6f6e 290a 0a20 2020  e, version)..   
-00016780: 2048 616e 646c 6520 6361 7365 7320 7768   Handle cases wh
-00016790: 6572 6520 7468 6520 706c 7567 696e 6b65  ere the pluginke
-000167a0: 7920 6861 7320 6e6f 2076 6572 7369 6f6e  y has no version
-000167b0: 0a20 2020 2022 2222 0a20 2020 2069 6620  .    """.    if 
-000167c0: 2240 2220 696e 2070 6c75 6769 6e6b 6579  "@" in pluginkey
-000167d0: 3a0a 2020 2020 2020 2020 6e61 6d65 2c20  :.        name, 
-000167e0: 7665 7273 696f 6e20 3d20 706c 7567 696e  version = plugin
-000167f0: 6b65 792e 7370 6c69 7428 2240 2229 0a20  key.split("@"). 
-00016800: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00016810: 206e 616d 6520 3d20 706c 7567 696e 6b65   name = pluginke
-00016820: 790a 2020 2020 2020 2020 7665 7273 696f  y.        versio
-00016830: 6e20 3d20 2230 2e30 2e30 220a 2020 2020  n = "0.0.0".    
-00016840: 7265 7475 726e 206e 616d 652c 2076 6572  return name, ver
-00016850: 7369 6f6e 0a0a 0a64 6566 205f 6e6f 726d  sion...def _norm
-00016860: 616c 697a 655f 7665 7273 696f 6e28 7665  alize_version(ve
-00016870: 7273 696f 6e3a 2073 7472 2c20 6465 6661  rsion: str, defa
-00016880: 756c 743d 2230 2e30 2e30 2229 202d 3e20  ult="0.0.0") -> 
-00016890: 7374 723a 0a20 2020 2074 7279 3a0a 2020  str:.    try:.  
-000168a0: 2020 2020 2020 7665 7273 696f 6e74 7570        versiontup
-000168b0: 203d 205f 7665 7273 696f 6e5f 7475 706c   = _version_tupl
-000168c0: 6528 7665 7273 696f 6e29 0a20 2020 2065  e(version).    e
-000168d0: 7863 6570 7420 5661 6c75 6545 7272 6f72  xcept ValueError
-000168e0: 2061 7320 653a 0a20 2020 2020 2020 205f   as e:.        _
-000168f0: 6572 726f 726d 7367 2866 2245 7272 6f72  errormsg(f"Error
-00016900: 2077 6869 6c65 2070 6172 7369 6e67 2076   while parsing v
-00016910: 6572 7369 6f6e 207b 7665 7273 696f 6e7d  ersion {version}
-00016920: 3a20 2573 2028 4578 6365 7074 696f 6e3a  : %s (Exception:
-00016930: 207b 657d 2922 290a 2020 2020 2020 2020   {e})").        
-00016940: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-00016950: 2020 2072 6574 7572 6e20 222e 222e 6a6f     return ".".jo
-00016960: 696e 2873 7472 2869 2920 666f 7220 6920  in(str(i) for i 
-00016970: 696e 2076 6572 7369 6f6e 7475 7029 0a0a  in versiontup)..
-00016980: 0a64 6566 205f 6578 7061 6e64 5f73 7562  .def _expand_sub
-00016990: 7374 6974 7574 696f 6e73 2873 3a20 7374  stitutions(s: st
-000169a0: 722c 2073 7562 7374 6974 7574 696f 6e73  r, substitutions
-000169b0: 3a20 6469 6374 5b73 7472 2c20 7374 725d  : dict[str, str]
-000169c0: 2920 2d3e 2073 7472 3a0a 2020 2020 2222  ) -> str:.    ""
-000169d0: 220a 2020 2020 4578 7061 6e64 7320 7661  ".    Expands va
-000169e0: 7269 6162 6c65 7320 6f66 2074 6865 2066  riables of the f
-000169f0: 6f72 6d20 2476 6172 206f 7220 247b 7661  orm $var or ${va
-00016a00: 727d 0a20 2020 2022 2222 0a20 2020 2074  r}.    """.    t
-00016a10: 203d 205f 5465 6d70 6c61 7465 2873 290a   = _Template(s).
-00016a20: 2020 2020 7265 7475 726e 2074 2e73 7562      return t.sub
-00016a30: 7374 6974 7574 6528 7375 6273 7469 7475  stitute(substitu
-00016a40: 7469 6f6e 7329 0a0a 0a64 6566 205f 7061  tions)...def _pa
-00016a50: 7273 655f 6269 6e61 7279 6465 6628 6269  rse_binarydef(bi
-00016a60: 6e61 7279 6465 663a 2064 6963 742c 2073  narydef: dict, s
-00016a70: 7562 7374 6974 7574 696f 6e73 3a20 6469  ubstitutions: di
-00016a80: 6374 5b73 7472 2c20 7374 725d 2920 2d3e  ct[str, str]) ->
-00016a90: 2042 696e 6172 793a 0a20 2020 2022 2222   Binary:.    """
-00016aa0: 0a20 2020 2050 6172 7365 7320 6120 6269  .    Parses a bi
-00016ab0: 6e61 7279 2064 6566 696e 6974 696f 6e20  nary definition 
-00016ac0: 7769 7468 696e 2061 2072 6973 7365 742e  within a risset.
-00016ad0: 6a73 6f6e 2064 6963 740a 0a20 2020 2041  json dict..    A
-00016ae0: 2062 696e 6172 7920 6465 6669 6e69 7469   binary definiti
-00016af0: 6f6e 2068 6173 2074 6865 2066 6f72 6d0a  on has the form.
-00016b00: 0a20 2020 207b 2020 2022 706c 6174 666f  .    {   "platfo
-00016b10: 726d 223a 2073 7472 2c0a 2020 2020 2020  rm": str,.      
-00016b20: 2020 2275 726c 223a 2073 7472 2c0a 2020    "url": str,.  
-00016b30: 2020 2020 2020 2262 7569 6c64 5f70 6c61        "build_pla
-00016b40: 7466 6f72 6d22 3a20 7374 722c 0a20 2020  tform": str,.   
-00016b50: 2020 2020 2022 6578 7472 6163 7470 6174       "extractpat
-00016b60: 6822 3a20 7374 7220 286f 7074 696f 6e61  h": str (optiona
-00016b70: 6c29 0a20 2020 207d 0a0a 2020 2020 2a20  l).    }..    * 
-00016b80: 706c 6174 666f 726d 3a20 6f6e 6520 6f66  platform: one of
-00016b90: 2027 6c69 6e75 7827 2c20 2777 696e 646f   'linux', 'windo
-00016ba0: 7773 272c 2027 6d61 636f 7327 2c20 6f70  ws', 'macos', op
-00016bb0: 7469 6f6e 616c 6c79 2066 6f6c 6c6f 7765  tionally followe
-00016bc0: 6420 6279 2074 6865 2061 7263 6869 7465  d by the archite
-00016bd0: 6374 7572 652c 0a20 2020 2020 2020 2073  cture,.        s
-00016be0: 6570 6172 6174 6564 2062 7920 6120 272d  eparated by a '-
-00016bf0: 2720 7369 676e 2e20 506f 7373 6962 6c65  ' sign. Possible
-00016c00: 2061 7263 6869 7465 6374 7572 6573 3a20   architectures: 
-00016c10: 2778 3836 5f36 3427 2c20 2761 726d 3634  'x86_64', 'arm64
-00016c20: 272e 2049 6e20 616c 6c20 6c69 6e75 782c  '. In all linux,
-00016c30: 2077 696e 646f 7773 2061 6e64 206d 6163   windows and mac
-00016c40: 6f73 0a20 2020 2020 2020 2074 6865 2064  os.        the d
-00016c50: 6566 6175 6c74 2061 7263 6869 7465 6374  efault architect
-00016c60: 7572 6520 6973 2027 7838 365f 3634 272e  ure is 'x86_64'.
-00016c70: 0a20 2020 202a 2075 726c 3a20 7468 6520  .    * url: the 
-00016c80: 7572 6c20 7768 6572 6520 746f 2064 6f77  url where to dow
-00016c90: 6e6c 6f61 6420 7468 6520 6269 6e61 7279  nload the binary
-00016ca0: 2e20 4974 2063 616e 2062 6520 616e 2075  . It can be an u
-00016cb0: 726c 2074 6f20 7468 6520 6269 6e61 7279  rl to the binary
-00016cc0: 2069 7473 656c 662c 2074 6f20 6120 2e7a   itself, to a .z
-00016cd0: 6970 2066 696c 652c 0a20 2020 2020 2020  ip file,.       
-00016ce0: 206f 7220 746f 2061 2067 6974 2072 6570   or to a git rep
-00016cf0: 6f73 6974 6f72 790a 2020 2020 2a20 6275  ository.    * bu
-00016d00: 696c 645f 706c 6174 666f 726d 3a20 6f70  ild_platform: op
-00016d10: 7469 6f6e 616c 2069 6e66 6f72 6d61 7469  tional informati
-00016d20: 6f6e 2061 626f 7574 2074 6865 2070 6c61  on about the pla
-00016d30: 7466 6f72 6d20 7768 6572 6520 7468 6520  tform where the 
-00016d40: 6769 7665 6e20 6269 6e61 7279 2077 6173  given binary was
-00016d50: 2062 7569 6c74 2e20 5468 6973 2073 6572   built. This ser
-00016d60: 7665 7320 6173 0a20 2020 2020 2020 2072  ves as.        r
-00016d70: 6566 6572 656e 6365 2066 6f72 2061 2075  eference for a u
-00016d80: 7365 722e 2046 6f72 2065 7861 6d70 6c65  ser. For example
-00016d90: 2c20 696e 206c 696e 7578 2061 2062 7569  , in linux a bui
-00016da0: 6c64 2070 6c61 7466 6f72 6d20 6d69 6768  ld platform migh
-00016db0: 7420 6265 2022 5562 756e 7475 2032 302e  t be "Ubuntu 20.
-00016dc0: 3034 222e 2054 6869 7320 6e6f 726d 616c  04". This normal
-00016dd0: 6c79 206d 6172 6b73 0a20 2020 2020 2020  ly marks.       
-00016de0: 2074 6865 206c 6f77 6572 2062 6f75 6e64   the lower bound
-00016df0: 2066 6f72 2063 6f6d 7061 7469 6269 6c69   for compatibili
-00016e00: 7479 2e0a 2020 2020 2a20 6578 7472 6163  ty..    * extrac
-00016e10: 7470 6174 683a 2069 6620 7468 6520 6361  tpath: if the ca
-00016e20: 7365 2077 6865 7265 2074 6865 2075 726c  se where the url
-00016e30: 2064 6f65 7320 6e6f 7420 706f 696e 7420   does not point 
-00016e40: 746f 2061 2062 696e 6172 792c 2065 7874  to a binary, ext
-00016e50: 7261 6374 7061 7468 2073 686f 756c 6420  ractpath should 
-00016e60: 6265 2075 7365 640a 2020 2020 2020 2020  be used.        
-00016e70: 746f 2069 6e64 6963 6174 6520 7468 6520  to indicate the 
-00016e80: 6c6f 6361 7469 6f6e 206f 6620 7468 6520  location of the 
-00016e90: 6269 6e61 7279 2077 6974 6869 6e20 7468  binary within th
-00016ea0: 6520 2e7a 6970 2066 696c 6520 6f72 2077  e .zip file or w
-00016eb0: 6974 6869 6e20 7468 6520 6769 7420 7265  ithin the git re
-00016ec0: 706f 7369 746f 7279 0a20 2020 2022 2222  pository.    """
-00016ed0: 0a20 2020 2061 7373 6572 7420 6973 696e  .    assert isin
-00016ee0: 7374 616e 6365 2862 696e 6172 7964 6566  stance(binarydef
-00016ef0: 2c20 6469 6374 292c 2066 2264 6963 743a  , dict), f"dict:
-00016f00: 207b 6269 6e61 7279 6465 667d 220a 2020   {binarydef}".  
-00016f10: 2020 706c 6174 666f 726d 203d 2062 696e    platform = bin
-00016f20: 6172 7964 6566 2e67 6574 2827 706c 6174  arydef.get('plat
-00016f30: 666f 726d 2729 0a20 2020 2069 6620 6e6f  form').    if no
-00016f40: 7420 706c 6174 666f 726d 3a0a 2020 2020  t platform:.    
-00016f50: 2020 2020 7261 6973 6520 5061 7273 6545      raise ParseE
-00016f60: 7272 6f72 2866 2250 6c75 6769 6e20 6269  rror(f"Plugin bi
-00016f70: 6e61 7279 2073 686f 756c 6420 6861 7665  nary should have
-00016f80: 2061 2070 6c61 7466 6f72 6d20 6b65 792e   a platform key.
-00016f90: 2042 696e 6172 7920 6465 6669 6e69 7469   Binary definiti
-00016fa0: 6f6e 3a20 7b62 696e 6172 7964 6566 7d22  on: {binarydef}"
-00016fb0: 290a 0a20 2020 2074 7279 3a0a 2020 2020  )..    try:.    
-00016fc0: 2020 2020 706c 6174 666f 726d 203d 205f      platform = _
-00016fd0: 6e6f 726d 616c 697a 655f 706c 6174 666f  normalize_platfo
-00016fe0: 726d 2870 6c61 7466 6f72 6d29 0a20 2020  rm(platform).   
-00016ff0: 2065 7863 6570 7420 5661 6c75 6545 7272   except ValueErr
-00017000: 6f72 2061 7320 6572 723a 0a20 2020 2020  or as err:.     
-00017010: 2020 2072 6169 7365 2050 6172 7365 4572     raise ParseEr
-00017020: 726f 7228 6622 506c 6174 666f 726d 2027  ror(f"Platform '
-00017030: 7b70 6c61 7466 6f72 6d7d 2720 6e6f 7420  {platform}' not 
-00017040: 7375 7070 6f72 7465 642e 2022 0a20 2020  supported. ".   
-00017050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017060: 2020 2020 2020 6622 506f 7373 6962 6c65        f"Possible
-00017070: 2070 6c61 7466 6f72 6d73 2061 7265 207b   platforms are {
-00017080: 5f73 7570 706f 7274 6564 5f70 6c61 7466  _supported_platf
-00017090: 6f72 6d73 7d22 290a 0a20 2020 2075 726c  orms}")..    url
-000170a0: 203d 2062 696e 6172 7964 6566 2e67 6574   = binarydef.get
-000170b0: 2827 7572 6c27 290a 2020 2020 6966 206e  ('url').    if n
-000170c0: 6f74 2075 726c 3a0a 2020 2020 2020 2020  ot url:.        
-000170d0: 7261 6973 6520 5061 7273 6545 7272 6f72  raise ParseError
-000170e0: 2866 2250 6c75 6769 6e20 6465 6669 6e69  (f"Plugin defini
-000170f0: 7469 6f6e 2066 6f72 207b 706c 6174 666f  tion for {platfo
-00017100: 726d 7d20 7368 6f75 6c64 2068 6176 6520  rm} should have 
-00017110: 616e 2075 726c 2229 0a0a 2020 2020 6373  an url")..    cs
-00017120: 6f75 6e64 5f76 6572 7369 6f6e 203d 2062  ound_version = b
-00017130: 696e 6172 7964 6566 2e67 6574 2827 6373  inarydef.get('cs
-00017140: 6f75 6e64 5f76 6572 7369 6f6e 2729 0a20  ound_version'). 
-00017150: 2020 2069 6620 6e6f 7420 6373 6f75 6e64     if not csound
-00017160: 5f76 6572 7369 6f6e 3a0a 2020 2020 2020  _version:.      
-00017170: 2020 5f65 7272 6f72 6d73 6728 6627 4e6f    _errormsg(f'No
-00017180: 2063 736f 756e 6420 7665 7273 696f 6e20   csound version 
-00017190: 666f 756e 6420 666f 7220 6269 6e61 7279  found for binary
-000171a0: 207b 6269 6e61 7279 6465 667d 2729 0a20   {binarydef}'). 
-000171b0: 2020 2020 2020 2063 736f 756e 645f 7665         csound_ve
-000171c0: 7273 696f 6e20 3d20 273e 3d36 2e31 383c  rsion = '>=6.18<
-000171d0: 372e 3027 0a0a 2020 2020 7572 6c20 3d20  7.0'..    url = 
-000171e0: 5f65 7870 616e 645f 7375 6273 7469 7475  _expand_substitu
-000171f0: 7469 6f6e 7328 7572 6c2c 2073 7562 7374  tions(url, subst
-00017200: 6974 7574 696f 6e73 290a 2020 2020 6275  itutions).    bu
-00017210: 696c 645f 706c 6174 666f 726d 203d 2062  ild_platform = b
-00017220: 696e 6172 7964 6566 2e67 6574 2827 6275  inarydef.get('bu
-00017230: 696c 645f 706c 6174 666f 726d 272c 2027  ild_platform', '
-00017240: 756e 6b6e 6f77 6e27 290a 2020 2020 7265  unknown').    re
-00017250: 7475 726e 2042 696e 6172 7928 706c 6174  turn Binary(plat
-00017260: 666f 726d 3d70 6c61 7466 6f72 6d2c 2075  form=platform, u
-00017270: 726c 3d75 726c 2c20 6275 696c 645f 706c  rl=url, build_pl
-00017280: 6174 666f 726d 3d62 7569 6c64 5f70 6c61  atform=build_pla
-00017290: 7466 6f72 6d2c 0a20 2020 2020 2020 2020  tform,.         
-000172a0: 2020 2020 2020 2020 2065 7874 7261 6374           extract
-000172b0: 7061 7468 3d62 696e 6172 7964 6566 2e67  path=binarydef.g
-000172c0: 6574 2827 6578 7472 6163 7470 6174 6827  et('extractpath'
-000172d0: 2c20 2727 292c 0a20 2020 2020 2020 2020  , ''),.         
-000172e0: 2020 2020 2020 2020 2070 6f73 745f 696e           post_in
-000172f0: 7374 616c 6c5f 7363 7269 7074 3d62 696e  stall_script=bin
-00017300: 6172 7964 6566 2e67 6574 2827 706f 7374  arydef.get('post
-00017310: 5f69 6e73 7461 6c6c 272c 2027 2729 2c0a  _install', ''),.
-00017320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017330: 2020 6373 6f75 6e64 5f76 6572 7369 6f6e    csound_version
-00017340: 3d63 736f 756e 645f 7665 7273 696f 6e29  =csound_version)
-00017350: 0a0a 0a64 6566 205f 7061 7273 655f 6173  ...def _parse_as
-00017360: 7365 7428 6173 7365 7464 6566 3a20 6469  set(assetdef: di
-00017370: 6374 2c20 6465 6661 756c 7473 6f75 7263  ct, defaultsourc
-00017380: 653a 2073 7472 2920 2d3e 2041 7373 6574  e: str) -> Asset
-00017390: 3a0a 2020 2020 736f 7572 6365 203d 2061  :.    source = a
-000173a0: 7373 6574 6465 662e 6765 7428 2775 726c  ssetdef.get('url
-000173b0: 272c 2064 6566 6175 6c74 736f 7572 6365  ', defaultsource
-000173c0: 290a 2020 2020 6578 7472 6163 7470 6174  ).    extractpat
-000173d0: 6820 3d20 6173 7365 7464 6566 2e67 6574  h = assetdef.get
-000173e0: 2827 6578 7472 6163 7470 6174 6827 2920  ('extractpath') 
-000173f0: 6f72 2061 7373 6574 6465 662e 6765 7428  or assetdef.get(
-00017400: 2770 6174 6827 290a 2020 2020 6966 206e  'path').    if n
-00017410: 6f74 2073 6f75 7263 6520 616e 6420 6e6f  ot source and no
-00017420: 7420 6578 7472 6163 7470 6174 683a 0a20  t extractpath:. 
-00017430: 2020 2020 2020 2072 6169 7365 2050 6172         raise Par
-00017440: 7365 4572 726f 7228 6622 4173 7365 7420  seError(f"Asset 
-00017450: 6465 6669 6e69 7469 6f6e 2073 686f 756c  definition shoul
-00017460: 6420 6861 7665 2061 6e20 5552 4c20 6f72  d have an URL or
-00017470: 2061 6e20 6578 7472 6163 7470 6174 6820   an extractpath 
-00017480: 6b65 7922 290a 2020 2020 7061 7468 7320  key").    paths 
-00017490: 3d20 6578 7472 6163 7470 6174 682e 7370  = extractpath.sp
-000174a0: 6c69 7428 223b 2229 2069 6620 6578 7472  lit(";") if extr
-000174b0: 6163 7470 6174 6820 656c 7365 205b 5d0a  actpath else [].
-000174c0: 2020 2020 7265 7475 726e 2041 7373 6574      return Asset
-000174d0: 2873 6f75 7263 653d 736f 7572 6365 2c20  (source=source, 
-000174e0: 7061 7474 6572 6e73 3d70 6174 6873 2c20  patterns=paths, 
-000174f0: 706c 6174 666f 726d 3d61 7373 6574 6465  platform=assetde
-00017500: 662e 6765 7428 2770 6c61 7466 6f72 6d27  f.get('platform'
-00017510: 2c20 2761 6c6c 2729 2c20 6e61 6d65 3d61  , 'all'), name=a
-00017520: 7373 6574 6465 662e 6765 7428 276e 616d  ssetdef.get('nam
-00017530: 6527 2c20 2727 2929 0a0a 0a64 6566 205f  e', ''))...def _
-00017540: 656e 666f 7263 655f 6b65 7928 643a 2064  enforce_key(d: d
-00017550: 6963 742c 206b 6579 3a20 7374 7229 3a0a  ict, key: str):.
-00017560: 2020 2020 7661 6c75 6520 3d20 642e 6765      value = d.ge
-00017570: 7428 6b65 7929 0a20 2020 2069 6620 7661  t(key).    if va
-00017580: 6c75 6520 6973 204e 6f6e 653a 0a20 2020  lue is None:.   
-00017590: 2020 2020 2072 6169 7365 2053 6368 656d       raise Schem
-000175a0: 6145 7272 6f72 2866 2250 6c75 6769 6e20  aError(f"Plugin 
-000175b0: 6861 7320 6e6f 207b 6b65 797d 206b 6579  has no {key} key
-000175c0: 2229 0a20 2020 2072 6574 7572 6e20 7661  ").    return va
-000175d0: 6c75 650a 0a0a 6465 6620 5f70 6c75 6769  lue...def _plugi
-000175e0: 6e5f 6672 6f6d 5f64 6963 7428 643a 2064  n_from_dict(d: d
-000175f0: 6963 742c 2070 6c75 6769 6e75 726c 3a20  ict, pluginurl: 
-00017600: 7374 722c 2073 7562 7061 7468 3a20 7374  str, subpath: st
-00017610: 7229 202d 3e20 506c 7567 696e 3a0a 2020  r) -> Plugin:.  
-00017620: 2020 2222 220a 2020 2020 4172 6773 3a0a    """.    Args:.
-00017630: 2020 2020 2020 2020 643a 2074 6865 206c          d: the l
-00017640: 6f61 6465 6420 6a73 6f6e 0a20 2020 2020  oaded json.     
-00017650: 2020 2070 6c75 6769 6e75 726c 3a20 7468     pluginurl: th
-00017660: 6520 7572 6c20 6f66 2074 6869 7320 706c  e url of this pl
-00017670: 7567 696e 0a20 2020 2020 2020 2073 7562  ugin.        sub
-00017680: 7061 7468 3a20 7468 6520 7061 7468 206f  path: the path o
-00017690: 6620 7468 6520 6d61 6e69 6665 7374 2773  f the manifest's
-000176a0: 2066 6f6c 6465 722c 2072 656c 6174 6976   folder, relativ
-000176b0: 6520 746f 2074 6865 2072 6f6f 7420 6f66  e to the root of
-000176c0: 2074 6865 2072 6570 6f73 6974 6f72 790a   the repository.
-000176d0: 2020 2020 2222 220a 2020 2020 636c 6f6e      """.    clon
-000176e0: 6570 6174 6820 3d20 5f67 6974 5f6c 6f63  epath = _git_loc
-000176f0: 616c 5f70 6174 6828 706c 7567 696e 7572  al_path(pluginur
-00017700: 6c29 0a20 2020 2076 6572 7369 6f6e 203d  l).    version =
-00017710: 205f 6e6f 726d 616c 697a 655f 7665 7273   _normalize_vers
-00017720: 696f 6e28 5f65 6e66 6f72 6365 5f6b 6579  ion(_enforce_key
-00017730: 2864 2c20 2776 6572 7369 6f6e 2729 290a  (d, 'version')).
-00017740: 2020 2020 706c 7567 696e 6e61 6d65 203d      pluginname =
-00017750: 205f 656e 666f 7263 655f 6b65 7928 642c   _enforce_key(d,
-00017760: 2027 6e61 6d65 2729 0a20 2020 206f 7063   'name').    opc
-00017770: 6f64 6573 203d 205f 656e 666f 7263 655f  odes = _enforce_
-00017780: 6b65 7928 642c 2027 6f70 636f 6465 7327  key(d, 'opcodes'
-00017790: 290a 2020 2020 6f70 636f 6465 732e 736f  ).    opcodes.so
-000177a0: 7274 2829 0a20 2020 2073 7562 7374 6974  rt().    substit
-000177b0: 7574 696f 6e73 203d 207b 6b65 793a 2073  utions = {key: s
-000177c0: 7472 2876 616c 7565 2920 666f 7220 6b65  tr(value) for ke
-000177d0: 792c 2076 616c 7565 2069 6e20 642e 6974  y, value in d.it
-000177e0: 656d 7328 2920 6966 2069 7369 6e73 7461  ems() if isinsta
-000177f0: 6e63 6528 7661 6c75 652c 2028 696e 742c  nce(value, (int,
-00017800: 2066 6c6f 6174 2c20 7374 7229 297d 0a0a   float, str))}..
-00017810: 2020 2020 6269 6e61 7269 6573 3a20 6c69      binaries: li
-00017820: 7374 5b42 696e 6172 795d 203d 205b 5d0a  st[Binary] = [].
-00017830: 2020 2020 6269 6e61 7279 6465 6673 203d      binarydefs =
-00017840: 205f 656e 666f 7263 655f 6b65 7928 642c   _enforce_key(d,
-00017850: 2027 6269 6e61 7269 6573 2729 0a20 2020   'binaries').   
-00017860: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00017870: 6365 2862 696e 6172 7964 6566 732c 206c  ce(binarydefs, l
-00017880: 6973 7429 3a0a 2020 2020 2020 2020 7320  ist):.        s 
-00017890: 3d20 7070 7269 6e74 2e70 666f 726d 6174  = pprint.pformat
-000178a0: 2862 696e 6172 7964 6566 7329 0a20 2020  (binarydefs).   
-000178b0: 2020 2020 205f 6572 726f 726d 7367 2866       _errormsg(f
-000178c0: 2245 7870 6563 7465 6420 6120 6c69 7374  "Expected a list
-000178d0: 206f 6620 6269 6e61 7279 2064 6566 696e   of binary defin
-000178e0: 6974 696f 6e73 2c20 676f 743a 2022 290a  itions, got: ").
-000178f0: 2020 2020 2020 2020 5f65 7272 6f72 6d73          _errorms
-00017900: 6728 7329 0a20 2020 2020 2020 2072 6169  g(s).        rai
-00017910: 7365 2053 6368 656d 6145 7272 6f72 2866  se SchemaError(f
-00017920: 2250 6172 7369 6e67 2027 6269 6e61 7269  "Parsing 'binari
-00017930: 6573 272c 2065 7870 6563 7465 6420 6120  es', expected a 
-00017940: 6c69 7374 206f 6620 6269 6e61 7279 2064  list of binary d
-00017950: 6566 696e 6974 696f 6e73 2c20 676f 7420  efinitions, got 
-00017960: 6120 7b74 7970 6528 6269 6e61 7279 6465  a {type(binaryde
-00017970: 6673 297d 2229 0a20 2020 2066 6f72 2062  fs)}").    for b
-00017980: 696e 6172 7964 6566 2069 6e20 6269 6e61  inarydef in bina
-00017990: 7279 6465 6673 3a0a 2020 2020 2020 2020  rydefs:.        
-000179a0: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
-000179b0: 6528 6269 6e61 7279 6465 662c 2064 6963  e(binarydef, dic
-000179c0: 7429 3a0a 0a20 2020 2020 2020 2020 2020  t):..           
-000179d0: 205f 6572 726f 726d 7367 2866 227b 706c   _errormsg(f"{pl
-000179e0: 7567 696e 6e61 6d65 7d3a 2050 6172 7369  uginname}: Parsi
-000179f0: 6e67 2027 6269 6e61 7269 6573 2720 6b65  ng 'binaries' ke
-00017a00: 792c 2065 7870 6563 7465 6420 6120 6469  y, expected a di
-00017a10: 6374 2c20 676f 7422 290a 2020 2020 2020  ct, got").      
-00017a20: 2020 2020 2020 7261 6973 6520 5363 6865        raise Sche
-00017a30: 6d61 4572 726f 7228 6622 5061 7273 696e  maError(f"Parsin
-00017a40: 6720 2762 696e 6172 6965 7327 2c20 4578  g 'binaries', Ex
-00017a50: 7065 6374 6564 2061 2064 6963 742c 2067  pected a dict, g
-00017a60: 6f74 207b 6269 6e61 7279 6465 667d 2229  ot {binarydef}")
-00017a70: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
-00017a80: 2020 2020 2020 2020 2020 5f64 6562 7567            _debug
-00017a90: 2866 2250 6172 7369 6e67 2062 696e 6172  (f"Parsing binar
-00017aa0: 7920 6465 6669 6e69 7469 6f6e 2066 6f72  y definition for
-00017ab0: 207b 706c 7567 696e 6e61 6d65 7d3a 207b   {pluginname}: {
-00017ac0: 6269 6e61 7279 6465 667d 2229 0a20 2020  binarydef}").   
-00017ad0: 2020 2020 2020 2020 2062 696e 6172 7920           binary 
-00017ae0: 3d20 5f70 6172 7365 5f62 696e 6172 7964  = _parse_binaryd
-00017af0: 6566 2862 696e 6172 7964 6566 2c20 7375  ef(binarydef, su
-00017b00: 6273 7469 7475 7469 6f6e 733d 7375 6273  bstitutions=subs
-00017b10: 7469 7475 7469 6f6e 7329 0a20 2020 2020  titutions).     
-00017b20: 2020 2020 2020 2062 696e 6172 6965 732e         binaries.
-00017b30: 6170 7065 6e64 2862 696e 6172 7929 0a20  append(binary). 
-00017b40: 2020 2020 2020 2065 7863 6570 7420 5061         except Pa
-00017b50: 7273 6545 7272 6f72 2061 7320 653a 0a20  rseError as e:. 
-00017b60: 2020 2020 2020 2020 2020 205f 6572 726f             _erro
-00017b70: 726d 7367 2866 2246 6169 6c65 6420 746f  rmsg(f"Failed to
-00017b80: 2070 6172 7365 2062 696e 6172 7920 6465   parse binary de
-00017b90: 6669 6e69 7469 6f6e 2066 6f72 2070 6c75  finition for plu
-00017ba0: 6769 6e20 7b64 2e67 6574 2827 6e61 6d65  gin {d.get('name
-00017bb0: 272c 2027 3f3f 2729 7d22 290a 2020 2020  ', '??')}").    
-00017bc0: 2020 2020 2020 2020 5f65 7272 6f72 6d73          _errorms
-00017bd0: 6728 6622 2e2e 2e20 736f 7572 6365 2064  g(f"... source d
-00017be0: 6174 613a 207b 6269 6e61 7279 6465 667d  ata: {binarydef}
-00017bf0: 2229 0a20 2020 2020 2020 2020 2020 205f  ").            _
-00017c00: 6572 726f 726d 7367 2873 7472 2865 2929  errormsg(str(e))
-00017c10: 0a0a 2020 2020 6966 206e 6f74 2062 696e  ..    if not bin
-00017c20: 6172 6965 733a 0a20 2020 2020 2020 2072  aries:.        r
-00017c30: 6169 7365 2053 6368 656d 6145 7272 6f72  aise SchemaError
-00017c40: 2822 4e6f 2076 616c 6964 2062 696e 6172  ("No valid binar
-00017c50: 6965 7320 6465 6669 6e65 6422 290a 0a20  ies defined").. 
-00017c60: 2020 206d 616e 6966 6573 745f 6c6f 6361     manifest_loca
-00017c70: 6c5f 666f 6c64 6572 203d 2063 6c6f 6e65  l_folder = clone
-00017c80: 7061 7468 202f 2073 7562 7061 7468 0a20  path / subpath. 
-00017c90: 2020 2069 6620 6e6f 7420 6d61 6e69 6665     if not manife
-00017ca0: 7374 5f6c 6f63 616c 5f66 6f6c 6465 722e  st_local_folder.
-00017cb0: 6578 6973 7473 2829 3a0a 2020 2020 2020  exists():.      
-00017cc0: 2020 5f65 7272 6f72 6d73 6728 6622 5468    _errormsg(f"Th
-00017cd0: 6520 6c6f 6361 6c20 6d61 6e69 6665 7374  e local manifest
-00017ce0: 2066 6f6c 6465 7220 636f 7272 6573 706f   folder correspo
-00017cf0: 6e64 696e 6720 746f 2070 6c75 6769 6e20  nding to plugin 
-00017d00: 7b70 6c75 6769 6e6e 616d 657d 2077 6173  {pluginname} was
-00017d10: 206e 6f74 2066 6f75 6e64 2022 0a20 2020   not found ".   
-00017d20: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00017d30: 2228 7b6d 616e 6966 6573 745f 6c6f 6361  "({manifest_loca
-00017d40: 6c5f 666f 6c64 6572 7d29 2229 0a0a 2020  l_folder})")..  
-00017d50: 2020 6173 7365 7473 3a20 6c69 7374 5b41    assets: list[A
-00017d60: 7373 6574 5d20 3d20 5b5d 0a20 2020 2061  sset] = [].    a
-00017d70: 7373 6574 6465 6673 203d 2064 2e67 6574  ssetdefs = d.get
-00017d80: 2827 6173 7365 7473 2729 0a20 2020 2069  ('assets').    i
-00017d90: 6620 6173 7365 7464 6566 733a 0a20 2020  f assetdefs:.   
-00017da0: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
-00017db0: 7374 616e 6365 2861 7373 6574 6465 6673  stance(assetdefs
-00017dc0: 2c20 6c69 7374 293a 0a20 2020 2020 2020  , list):.       
-00017dd0: 2020 2020 2072 6169 7365 2053 6368 656d       raise Schem
-00017de0: 6145 7272 6f72 2866 2261 7373 6574 7320  aError(f"assets 
-00017df0: 7368 6f75 6c64 2068 6f6c 6420 6120 6c69  should hold a li
-00017e00: 7374 206f 6620 6173 7365 7420 6465 6669  st of asset defi
-00017e10: 6e69 7469 6f6e 732c 2067 6f74 207b 6173  nitions, got {as
-00017e20: 7365 7464 6566 737d 2229 0a20 2020 2020  setdefs}").     
-00017e30: 2020 2066 6f72 2061 7373 6574 6465 6620     for assetdef 
-00017e40: 696e 2061 7373 6574 6465 6673 3a0a 2020  in assetdefs:.  
-00017e50: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-00017e60: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00017e70: 7373 6574 732e 6170 7065 6e64 285f 7061  ssets.append(_pa
-00017e80: 7273 655f 6173 7365 7428 6173 7365 7464  rse_asset(assetd
-00017e90: 6566 2c20 6465 6661 756c 7473 6f75 7263  ef, defaultsourc
-00017ea0: 653d 6d61 6e69 6665 7374 5f6c 6f63 616c  e=manifest_local
-00017eb0: 5f66 6f6c 6465 722e 6173 5f70 6f73 6978  _folder.as_posix
-00017ec0: 2829 2929 0a20 2020 2020 2020 2020 2020  ())).           
-00017ed0: 2065 7863 6570 7420 5061 7273 6545 7272   except ParseErr
-00017ee0: 6f72 2061 7320 653a 0a20 2020 2020 2020  or as e:.       
-00017ef0: 2020 2020 2020 2020 205f 6572 726f 726d           _errorm
-00017f00: 7367 2873 7472 2865 2929 0a0a 2020 2020  sg(str(e))..    
-00017f10: 7265 7475 726e 2050 6c75 6769 6e28 0a20  return Plugin(. 
-00017f20: 2020 2020 2020 206e 616d 653d 5f65 6e66         name=_enf
-00017f30: 6f72 6365 5f6b 6579 2864 2c20 276e 616d  orce_key(d, 'nam
-00017f40: 6527 292c 0a20 2020 2020 2020 2076 6572  e'),.        ver
-00017f50: 7369 6f6e 3d76 6572 7369 6f6e 2c0a 2020  sion=version,.  
-00017f60: 2020 2020 2020 7368 6f72 745f 6465 7363        short_desc
-00017f70: 7269 7074 696f 6e3d 5f65 6e66 6f72 6365  ription=_enforce
-00017f80: 5f6b 6579 2864 2c20 2773 686f 7274 5f64  _key(d, 'short_d
-00017f90: 6573 6372 6970 7469 6f6e 2729 2c0a 2020  escription'),.  
-00017fa0: 2020 2020 2020 6175 7468 6f72 3d5f 656e        author=_en
-00017fb0: 666f 7263 655f 6b65 7928 642c 2027 6175  force_key(d, 'au
-00017fc0: 7468 6f72 2729 2c0a 2020 2020 2020 2020  thor'),.        
-00017fd0: 656d 6169 6c3d 5f65 6e66 6f72 6365 5f6b  email=_enforce_k
-00017fe0: 6579 2864 2c20 2765 6d61 696c 2729 2c0a  ey(d, 'email'),.
-00017ff0: 2020 2020 2020 2020 6f70 636f 6465 733d          opcodes=
-00018000: 6f70 636f 6465 732c 0a20 2020 2020 2020  opcodes,.       
-00018010: 2062 696e 6172 6965 733d 6269 6e61 7269   binaries=binari
-00018020: 6573 2c0a 2020 2020 2020 2020 646f 635f  es,.        doc_
-00018030: 666f 6c64 6572 3d64 2e67 6574 2827 646f  folder=d.get('do
-00018040: 6327 2c20 2727 292c 0a20 2020 2020 2020  c', ''),.       
-00018050: 206c 6f6e 675f 6465 7363 7269 7074 696f   long_descriptio
-00018060: 6e3d 642e 6765 7428 276c 6f6e 675f 6465  n=d.get('long_de
-00018070: 7363 7269 7074 696f 6e27 2c20 2727 292c  scription', ''),
-00018080: 0a20 2020 2020 2020 2075 726c 3d70 6c75  .        url=plu
-00018090: 6769 6e75 726c 2c0a 2020 2020 2020 2020  ginurl,.        
-000180a0: 6d61 6e69 6665 7374 5f72 656c 6174 6976  manifest_relativ
-000180b0: 655f 7061 7468 3d73 7562 7061 7468 2c0a  e_path=subpath,.
-000180c0: 2020 2020 2020 2020 6173 7365 7473 3d61          assets=a
-000180d0: 7373 6574 732c 0a20 2020 2020 2020 2063  ssets,.        c
-000180e0: 6c6f 6e65 645f 7061 7468 3d5f 6769 745f  loned_path=_git_
-000180f0: 6c6f 6361 6c5f 7061 7468 2870 6c75 6769  local_path(plugi
-00018100: 6e75 726c 290a 2020 2020 290a 0a0a 6465  nurl).    )...de
-00018110: 6620 5f72 6573 6f6c 7665 5f70 6174 6828  f _resolve_path(
-00018120: 7061 7468 3a20 556e 696f 6e5b 7374 722c  path: Union[str,
-00018130: 2050 6174 685d 2c0a 2020 2020 2020 2020   Path],.        
-00018140: 2020 2020 2020 2020 2020 6261 7365 6469            basedi
-00018150: 723a 2055 6e69 6f6e 5b73 7472 2c20 5061  r: Union[str, Pa
-00018160: 7468 2c20 4e6f 6e65 5d20 3d20 4e6f 6e65  th, None] = None
-00018170: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018180: 2020 2029 202d 3e20 5061 7468 3a0a 2020     ) -> Path:.  
-00018190: 2020 2222 220a 2020 2020 436f 6e76 6572    """.    Conver
-000181a0: 7420 7061 7468 2074 6f20 6162 736f 6c75  t path to absolu
-000181b0: 7465 2c20 7573 6520 6062 6173 6564 6972  te, use `basedir
-000181c0: 6020 6f72 2074 6865 2063 7764 2061 7320  ` or the cwd as 
-000181d0: 6261 7365 0a20 2020 2022 2222 0a20 2020  base.    """.   
-000181e0: 2070 203d 2050 6174 6828 7061 7468 290a   p = Path(path).
-000181f0: 2020 2020 6966 2070 2e69 735f 6162 736f      if p.is_abso
-00018200: 6c75 7465 2829 3a0a 2020 2020 2020 2020  lute():.        
-00018210: 7265 7475 726e 2070 2e72 6573 6f6c 7665  return p.resolve
-00018220: 2829 0a20 2020 2069 6620 6261 7365 6469  ().    if basedi
-00018230: 7220 6973 204e 6f6e 653a 0a20 2020 2020  r is None:.     
-00018240: 2020 2072 6574 7572 6e20 2850 6174 682e     return (Path.
-00018250: 6377 6428 292f 7029 2e72 6573 6f6c 7665  cwd()/p).resolve
-00018260: 2829 0a20 2020 2072 6574 7572 6e20 2850  ().    return (P
-00018270: 6174 6828 6261 7365 6469 7229 202f 2070  ath(basedir) / p
-00018280: 292e 7265 736f 6c76 6528 290a 0a0a 6465  ).resolve()...de
-00018290: 6620 5f72 6d5f 6469 7228 7061 7468 3a20  f _rm_dir(path: 
-000182a0: 5061 7468 2920 2d3e 204e 6f6e 653a 0a0a  Path) -> None:..
-000182b0: 2020 2020 6966 206e 6f74 2070 6174 682e      if not path.
-000182c0: 6578 6973 7473 2829 3a0a 2020 2020 2020  exists():.      
-000182d0: 2020 7265 7475 726e 0a0a 2020 2020 2320    return..    # 
-000182e0: 4f6e 2077 696e 646f 7773 2072 6d74 7265  On windows rmtre
-000182f0: 6520 6d69 6768 7420 6661 696c 2077 6865  e might fail whe
-00018300: 6e20 6120 6669 6c65 2069 7320 6d61 726b  n a file is mark
-00018310: 6564 2061 7320 7265 6164 2d6f 6e6c 790a  ed as read-only.
-00018320: 2020 2020 2320 5468 6973 2069 7320 7468      # This is th
-00018330: 6520 6361 7365 2069 6e73 6964 6520 6120  e case inside a 
-00018340: 6769 7420 7265 706f 2e0a 2020 2020 2320  git repo..    # 
-00018350: 536f 6c75 7469 6f6e 2074 616b 656e 2066  Solution taken f
-00018360: 726f 6d3a 2068 7474 7073 3a2f 2f62 7567  rom: https://bug
-00018370: 732e 7079 7468 6f6e 2e6f 7267 2f69 7373  s.python.org/iss
-00018380: 7565 3433 3635 370a 2020 2020 6465 6620  ue43657.    def 
-00018390: 7265 6d6f 7665 5f72 6561 646f 6e6c 7928  remove_readonly(
-000183a0: 6675 6e63 2c20 7061 7468 2c20 6578 635f  func, path, exc_
-000183b0: 696e 666f 293a 0a20 2020 2020 2020 2022  info):.        "
-000183c0: 2222 436c 6561 7220 7468 6520 7265 6164  ""Clear the read
-000183d0: 6f6e 6c79 2062 6974 2061 6e64 2072 6561  only bit and rea
-000183e0: 7474 656d 7074 2074 6865 2072 656d 6f76  ttempt the remov
-000183f0: 616c 2222 220a 2020 2020 2020 2020 2320  al""".        # 
-00018400: 4552 524f 525f 4143 4345 5353 5f44 454e  ERROR_ACCESS_DEN
-00018410: 4945 4420 3d20 350a 2020 2020 2020 2020  IED = 5.        
-00018420: 6966 2066 756e 6320 6e6f 7420 696e 2028  if func not in (
-00018430: 6f73 2e75 6e6c 696e 6b2c 206f 732e 726d  os.unlink, os.rm
-00018440: 6469 7229 206f 7220 6578 635f 696e 666f  dir) or exc_info
-00018450: 5b31 5d2e 7769 6e65 7272 6f72 2021 3d20  [1].winerror != 
-00018460: 353a 0a20 2020 2020 2020 2020 2020 2072  5:.            r
-00018470: 6169 7365 2065 7863 5f69 6e66 6f5b 315d  aise exc_info[1]
-00018480: 0a20 2020 2020 2020 206f 732e 6368 6d6f  .        os.chmo
-00018490: 6428 7061 7468 2c20 7374 6174 2e53 5f49  d(path, stat.S_I
-000184a0: 5752 4954 4529 0a20 2020 2020 2020 2066  WRITE).        f
-000184b0: 756e 6328 7061 7468 290a 0a20 2020 2073  unc(path)..    s
-000184c0: 6875 7469 6c2e 726d 7472 6565 2870 6174  hutil.rmtree(pat
-000184d0: 682e 6173 5f70 6f73 6978 2829 2c20 6f6e  h.as_posix(), on
-000184e0: 6572 726f 723d 7265 6d6f 7665 5f72 6561  error=remove_rea
-000184f0: 646f 6e6c 7929 0a0a 0a64 6566 205f 636f  donly)...def _co
-00018500: 7079 5f72 6563 7572 7369 7665 2873 7263  py_recursive(src
-00018510: 3a20 5061 7468 2c20 6465 7374 3a20 5061  : Path, dest: Pa
-00018520: 7468 2920 2d3e 204e 6f6e 653a 0a20 2020  th) -> None:.   
-00018530: 2069 6620 6e6f 7420 6465 7374 2e65 7869   if not dest.exi
-00018540: 7374 7328 293a 0a20 2020 2020 2020 2072  sts():.        r
-00018550: 6169 7365 204f 5345 7272 6f72 2866 2244  aise OSError(f"D
-00018560: 6573 7469 6e61 7469 6f6e 2070 6174 6820  estination path 
-00018570: 287b 6465 7374 2e61 735f 706f 7369 7828  ({dest.as_posix(
-00018580: 297d 2920 646f 6573 206e 6f74 2065 7869  )}) does not exi
-00018590: 7374 2229 0a20 2020 2069 6620 6e6f 7420  st").    if not 
-000185a0: 6465 7374 2e69 735f 6469 7228 293a 0a20  dest.is_dir():. 
-000185b0: 2020 2020 2020 2072 6169 7365 204f 5345         raise OSE
-000185c0: 7272 6f72 2866 2244 6573 7469 6e61 7469  rror(f"Destinati
-000185d0: 6f6e 2070 6174 6820 287b 6465 7374 2e61  on path ({dest.a
-000185e0: 735f 706f 7369 7828 297d 2920 7368 6f75  s_posix()}) shou
-000185f0: 6c64 2062 6520 6120 6469 7265 6374 6f72  ld be a director
-00018600: 7922 290a 0a20 2020 2069 6620 7372 632e  y")..    if src.
-00018610: 6973 5f64 6972 2829 3a0a 2020 2020 2020  is_dir():.      
-00018620: 2020 5f64 6562 7567 2866 2243 6f70 7969    _debug(f"Copyi
-00018630: 6e67 2061 6c6c 2066 696c 6573 2075 6e64  ng all files und
-00018640: 6572 207b 7374 7228 7372 6329 7d20 746f  er {str(src)} to
-00018650: 207b 7374 7228 6465 7374 297d 2229 0a20   {str(dest)}"). 
-00018660: 2020 2020 2020 2066 6f72 2066 2069 6e20         for f in 
-00018670: 7372 632e 676c 6f62 2822 2a22 293a 0a20  src.glob("*"):. 
-00018680: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
-00018690: 6728 2220 2020 2022 2c20 7374 7228 6629  g("    ", str(f)
-000186a0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-000186b0: 2066 2e69 735f 6469 7228 293a 0a20 2020   f.is_dir():.   
-000186c0: 2020 2020 2020 2020 2020 2020 2073 6875               shu
-000186d0: 7469 6c2e 636f 7079 7472 6565 2866 2e61  til.copytree(f.a
-000186e0: 6273 6f6c 7574 6528 292e 6173 5f70 6f73  bsolute().as_pos
-000186f0: 6978 2829 2c20 6465 7374 2e61 735f 706f  ix(), dest.as_po
-00018700: 7369 7828 2929 0a20 2020 2020 2020 2020  six()).         
-00018710: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00018720: 2020 2020 2020 2020 2073 6875 7469 6c2e           shutil.
-00018730: 636f 7079 2866 2e61 735f 706f 7369 7828  copy(f.as_posix(
-00018740: 292c 2064 6573 742e 6173 5f70 6f73 6978  ), dest.as_posix
-00018750: 2829 290a 2020 2020 656c 7365 3a0a 2020  ()).    else:.  
-00018760: 2020 2020 2020 5f64 6562 7567 2866 2243        _debug(f"C
-00018770: 6f70 7969 6e67 2066 696c 6520 7b73 7472  opying file {str
-00018780: 2873 7263 297d 2074 6f20 7b73 7472 2864  (src)} to {str(d
-00018790: 6573 7429 7d22 290a 2020 2020 2020 2020  est)}").        
-000187a0: 7368 7574 696c 2e63 6f70 7928 7372 632e  shutil.copy(src.
-000187b0: 6173 5f70 6f73 6978 2829 2c20 6465 7374  as_posix(), dest
-000187c0: 2e61 735f 706f 7369 7828 2929 0a0a 0a64  .as_posix())...d
-000187d0: 6566 205f 7265 6164 5f70 6c75 6769 6e64  ef _read_plugind
-000187e0: 6566 2866 696c 6570 6174 683a 2055 6e69  ef(filepath: Uni
-000187f0: 6f6e 5b73 7472 2c20 5061 7468 5d2c 0a20  on[str, Path],. 
-00018800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018810: 2020 2075 726c 3a20 7374 7220 3d20 2727     url: str = ''
-00018820: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00018830: 2020 2020 2020 6d61 6e69 6665 7374 5f72        manifest_r
-00018840: 656c 6174 6976 655f 7061 7468 3a20 7374  elative_path: st
-00018850: 7220 3d20 2727 0a20 2020 2020 2020 2020  r = ''.         
-00018860: 2020 2020 2020 2020 2020 2029 202d 3e20             ) -> 
-00018870: 506c 7567 696e 3a0a 2020 2020 2222 220a  Plugin:.    """.
-00018880: 2020 2020 4372 6561 7465 2061 2050 6c75      Create a Plu
-00018890: 6769 6e20 6672 6f6d 2061 2070 6c75 6769  gin from a plugi
-000188a0: 6e20 6465 6669 6e69 7469 6f6e 2066 696c  n definition fil
-000188b0: 6520 2872 6973 7365 742e 6a73 6f6e 290a  e (risset.json).
-000188c0: 0a20 2020 2041 7267 733a 0a20 2020 2020  .    Args:.     
-000188d0: 2020 2066 696c 6570 6174 683a 2061 6e20     filepath: an 
-000188e0: 6162 736f 6c75 7465 2070 6174 6820 746f  absolute path to
-000188f0: 2074 6865 2070 6c75 6769 6e20 6465 6669   the plugin defi
-00018900: 6e69 7469 6f6e 0a20 2020 2020 2020 206d  nition.        m
-00018910: 616e 6966 6573 745f 7265 6c61 7469 7665  anifest_relative
-00018920: 5f70 6174 683a 2072 656c 6174 6976 6520  _path: relative 
-00018930: 7061 7468 2074 6f20 6d61 6e69 6665 7374  path to manifest
-00018940: 0a0a 2020 2020 5265 7475 726e 733a 0a20  ..    Returns:. 
-00018950: 2020 2020 2020 2061 2050 6c75 6769 6e0a         a Plugin.
-00018960: 0a20 2020 2052 6169 7365 7320 5363 6865  .    Raises Sche
-00018970: 6d61 4572 726f 7220 6966 2074 6865 2064  maError if the d
-00018980: 6566 696e 6974 696f 6e20 6973 2069 6e76  efinition is inv
-00018990: 616c 6964 2028 6974 2064 6f65 7320 6e6f  alid (it does no
-000189a0: 7420 6465 6669 6e65 0a20 2020 2061 6c6c  t define.    all
-000189b0: 206e 6565 6465 6420 6b65 7973 2920 6f72   needed keys) or
-000189c0: 206a 736f 6e2e 4a53 4f4e 4465 636f 6465   json.JSONDecode
-000189d0: 4572 726f 7220 6966 2074 6865 206a 736f  Error if the jso
-000189e0: 6e20 6974 7365 6c66 2069 7320 6e6f 7420  n itself is not 
-000189f0: 636f 7272 6563 746c 7920 666f 726d 6174  correctly format
-00018a00: 7465 640a 2020 2020 2222 220a 2020 2020  ted.    """.    
-00018a10: 2320 6162 736f 6c75 7465 2070 6174 680a  # absolute path.
-00018a20: 2020 2020 7061 7468 203d 2050 6174 6828      path = Path(
-00018a30: 6669 6c65 7061 7468 292e 7265 736f 6c76  filepath).resolv
-00018a40: 6528 290a 0a20 2020 2069 6620 6e6f 7420  e()..    if not 
-00018a50: 7061 7468 2e65 7869 7374 7328 293a 0a20  path.exists():. 
-00018a60: 2020 2020 2020 2072 6169 7365 2053 6368         raise Sch
-00018a70: 656d 6145 7272 6f72 2866 2270 6c75 6769  emaError(f"plugi
-00018a80: 6e20 6465 6669 6e69 7469 6f6e 2066 696c  n definition fil
-00018a90: 6520 287b 7061 7468 7d29 206e 6f74 2066  e ({path}) not f
-00018aa0: 6f75 6e64 2229 0a0a 2020 2020 6173 7365  ound")..    asse
-00018ab0: 7274 2070 6174 682e 7375 6666 6978 203d  rt path.suffix =
-00018ac0: 3d20 222e 6a73 6f6e 222c 2022 506c 7567  = ".json", "Plug
-00018ad0: 696e 2064 6566 696e 6974 696f 6e20 6669  in definition fi
-00018ae0: 6c65 2073 686f 756c 6420 6265 2061 202e  le should be a .
-00018af0: 6a73 6f6e 2066 696c 6522 0a0a 2020 2020  json file"..    
-00018b00: 5f64 6562 7567 2822 5061 7273 696e 6720  _debug("Parsing 
-00018b10: 6d61 6e69 6665 7374 3a22 2c20 7061 7468  manifest:", path
-00018b20: 290a 0a20 2020 2074 7279 3a0a 2020 2020  )..    try:.    
-00018b30: 2020 2020 6420 3d20 6a73 6f6e 2e6c 6f61      d = json.loa
-00018b40: 6428 6f70 656e 2870 6174 6829 290a 2020  d(open(path)).  
-00018b50: 2020 6578 6365 7074 206a 736f 6e2e 6465    except json.de
-00018b60: 636f 6465 722e 4a53 4f4e 4465 636f 6465  coder.JSONDecode
-00018b70: 4572 726f 7220 6173 2065 3a0a 2020 2020  Error as e:.    
-00018b80: 2020 2020 5f65 7272 6f72 6d73 6728 6622      _errormsg(f"
-00018b90: 436f 756c 6420 6e6f 7420 7061 7273 6520  Could not parse 
-00018ba0: 6a73 6f6e 2066 696c 6520 7b70 6174 687d  json file {path}
-00018bb0: 3a5c 6e20 2020 207b 657d 2229 0a20 2020  :\n    {e}").   
-00018bc0: 2020 2020 2072 6169 7365 2065 0a0a 2020       raise e..  
-00018bd0: 2020 5f64 6562 7567 2822 2e2e 2e20 6d61    _debug("... ma
-00018be0: 6e69 6665 7374 206a 736f 6e20 6f6b 2229  nifest json ok")
-00018bf0: 0a0a 2020 2020 7472 793a 0a20 2020 2020  ..    try:.     
-00018c00: 2020 2070 6c75 6769 6e20 3d20 5f70 6c75     plugin = _plu
-00018c10: 6769 6e5f 6672 6f6d 5f64 6963 7428 642c  gin_from_dict(d,
-00018c20: 2070 6c75 6769 6e75 726c 3d75 726c 2c20   pluginurl=url, 
-00018c30: 7375 6270 6174 683d 6d61 6e69 6665 7374  subpath=manifest
-00018c40: 5f72 656c 6174 6976 655f 7061 7468 290a  _relative_path).
-00018c50: 2020 2020 6578 6365 7074 2053 6368 656d      except Schem
-00018c60: 6145 7272 6f72 2061 7320 653a 0a20 2020  aError as e:.   
-00018c70: 2020 2020 205f 6572 726f 726d 7367 2866       _errormsg(f
-00018c80: 2245 7272 6f72 2077 6869 6c65 2070 726f  "Error while pro
-00018c90: 6365 7373 696e 6720 7b66 696c 6570 6174  cessing {filepat
-00018ca0: 687d 2229 0a20 2020 2020 2020 2072 6169  h}").        rai
-00018cb0: 7365 2065 0a20 2020 2065 7863 6570 7420  se e.    except 
-00018cc0: 4578 6365 7074 696f 6e20 6173 2065 3a0a  Exception as e:.
-00018cd0: 2020 2020 2020 2020 5f65 7272 6f72 6d73          _errorms
-00018ce0: 6728 6622 556e 6b6e 6f77 6e20 6572 726f  g(f"Unknown erro
-00018cf0: 7220 7768 696c 6520 7072 6f63 6573 7369  r while processi
-00018d00: 6e67 207b 6669 6c65 7061 7468 7d22 290a  ng {filepath}").
-00018d10: 2020 2020 2020 2020 7261 6973 6520 650a          raise e.
-00018d20: 0a20 2020 2072 6574 7572 6e20 706c 7567  .    return plug
-00018d30: 696e 0a0a 0a64 6566 205f 6e6f 726d 616c  in...def _normal
-00018d40: 697a 655f 7061 7468 2870 6174 683a 2073  ize_path(path: s
-00018d50: 7472 2920 2d3e 2073 7472 3a0a 2020 2020  tr) -> str:.    
-00018d60: 7061 7468 203d 206f 732e 7061 7468 2e65  path = os.path.e
-00018d70: 7870 616e 6476 6172 7328 7061 7468 290a  xpandvars(path).
-00018d80: 2020 2020 7061 7468 203d 206f 732e 7061      path = os.pa
-00018d90: 7468 2e65 7870 616e 6475 7365 7228 7061  th.expanduser(pa
-00018da0: 7468 290a 2020 2020 7061 7468 203d 206f  th).    path = o
-00018db0: 732e 7061 7468 2e61 6273 7061 7468 2870  s.path.abspath(p
-00018dc0: 6174 6829 0a20 2020 2072 6574 7572 6e20  ath).    return 
-00018dd0: 7061 7468 0a0a 0a64 6566 205f 6d61 6b65  path...def _make
-00018de0: 5f69 6e73 7461 6c6c 5f6d 616e 6966 6573  _install_manifes
-00018df0: 7428 706c 7567 696e 3a20 506c 7567 696e  t(plugin: Plugin
-00018e00: 2c20 6173 7365 7466 696c 6573 3a20 6c69  , assetfiles: li
-00018e10: 7374 5b73 7472 5d20 3d20 4e6f 6e65 2920  st[str] = None) 
-00018e20: 2d3e 2064 6963 743a 0a20 2020 2022 2222  -> dict:.    """
-00018e30: 0a20 2020 2043 7265 6174 6520 616e 2069  .    Create an i
-00018e40: 6e73 7461 6c6c 6174 696f 6e20 6d61 6e69  nstallation mani
-00018e50: 6665 7374 2064 6963 740a 0a20 2020 2041  fest dict..    A
-00018e60: 7267 733a 0a20 2020 2020 2020 2070 6c75  rgs:.        plu
-00018e70: 6769 6e3a 2074 6865 2050 6c75 6769 6e20  gin: the Plugin 
-00018e80: 636f 7272 6573 706f 6e64 696e 6720 746f  corresponding to
-00018e90: 2074 6869 7320 696e 7374 616c 6c61 7469   this installati
-00018ea0: 6f6e 206d 616e 6966 6573 740a 2020 2020  on manifest.    
-00018eb0: 2020 2020 6173 7365 7466 696c 6573 3a20      assetfiles: 
-00018ec0: 6966 2067 6976 656e 2c20 6120 6c69 7374  if given, a list
-00018ed0: 206f 6620 6173 7365 7420 6669 6c65 6e61   of asset filena
-00018ee0: 6d65 7320 696e 7374 616c 6c65 6420 6279  mes installed by
-00018ef0: 2074 6869 7320 706c 7567 696e 0a20 2020   this plugin.   
-00018f00: 2020 2020 2020 2020 2028 6f6e 6c79 2074           (only t
-00018f10: 6865 2066 696c 656e 616d 6573 2c20 6e6f  he filenames, no
-00018f20: 2070 6174 683a 2061 6c6c 2061 7373 6574   path: all asset
-00018f30: 7320 6172 6520 706c 6163 6564 2069 6e20  s are placed in 
-00018f40: 6120 666c 6174 2066 6f6c 6465 720a 2020  a flat folder.  
-00018f50: 2020 2020 2020 2020 2020 756e 6465 7220            under 
-00018f60: 7468 6520 706c 7567 696e 7320 7072 6566  the plugins pref
-00018f70: 6978 290a 2020 2020 2222 220a 2020 2020  ix).    """.    
-00018f80: 706c 6174 666f 726d 5f69 6420 3d20 5f73  platform_id = _s
-00018f90: 6573 7369 6f6e 2e70 6c61 7466 6f72 6d69  ession.platformi
-00018fa0: 640a 2020 2020 6269 6e61 7279 203d 2070  d.    binary = p
-00018fb0: 6c75 6769 6e2e 6669 6e64 5f62 696e 6172  lugin.find_binar
-00018fc0: 7928 706c 6174 666f 726d 6964 3d70 6c61  y(platformid=pla
-00018fd0: 7466 6f72 6d5f 6964 290a 2020 2020 6966  tform_id).    if
-00018fe0: 206e 6f74 2062 696e 6172 793a 0a20 2020   not binary:.   
-00018ff0: 2020 2020 2072 6169 7365 2052 756e 7469       raise Runti
-00019000: 6d65 4572 726f 7228 6622 4e6f 2062 696e  meError(f"No bin
-00019010: 6172 7920 666f 756e 6420 666f 7220 706c  ary found for pl
-00019020: 7567 696e 207b 706c 7567 696e 2e6e 616d  ugin {plugin.nam
-00019030: 657d 2028 706c 6174 666f 726d 3a20 7b70  e} (platform: {p
-00019040: 6c61 7466 6f72 6d5f 6964 7d22 290a 0a20  latform_id}").. 
-00019050: 2020 206f 7574 3a20 6469 6374 5b73 7472     out: dict[str
-00019060: 2c20 416e 795d 203d 207b 7d0a 2020 2020  , Any] = {}.    
-00019070: 6f75 745b 276e 616d 6527 5d20 3d20 706c  out['name'] = pl
-00019080: 7567 696e 2e6e 616d 650a 2020 2020 6f75  ugin.name.    ou
-00019090: 745b 2761 7574 686f 7227 5d20 3d20 706c  t['author'] = pl
-000190a0: 7567 696e 2e61 7574 686f 720a 2020 2020  ugin.author.    
-000190b0: 6f75 745b 2765 6d61 696c 275d 203d 2070  out['email'] = p
-000190c0: 6c75 6769 6e2e 656d 6169 6c0a 2020 2020  lugin.email.    
-000190d0: 6f75 745b 2776 6572 7369 6f6e 275d 203d  out['version'] =
-000190e0: 2070 6c75 6769 6e2e 7665 7273 696f 6e0a   plugin.version.
-000190f0: 2020 2020 6f75 745b 276f 7063 6f64 6573      out['opcodes
-00019100: 275d 203d 2070 6c75 6769 6e2e 6f70 636f  '] = plugin.opco
-00019110: 6465 730a 2020 2020 6f75 745b 276c 6f6e  des.    out['lon
-00019120: 675f 6465 7363 7269 7074 696f 6e27 5d20  g_description'] 
-00019130: 3d20 706c 7567 696e 2e6c 6f6e 675f 6465  = plugin.long_de
-00019140: 7363 7269 7074 696f 6e0a 2020 2020 6f75  scription.    ou
-00019150: 745b 2773 686f 7274 5f64 6573 6372 6970  t['short_descrip
-00019160: 7469 6f6e 275d 203d 2070 6c75 6769 6e2e  tion'] = plugin.
-00019170: 7368 6f72 745f 6465 7363 7269 7074 696f  short_descriptio
-00019180: 6e0a 2020 2020 6f75 745b 2762 7569 6c64  n.    out['build
-00019190: 5f70 6c61 7466 6f72 6d27 5d20 3d20 6269  _platform'] = bi
-000191a0: 6e61 7279 2e62 7569 6c64 5f70 6c61 7466  nary.build_platf
-000191b0: 6f72 6d0a 2020 2020 6f75 745b 2762 696e  orm.    out['bin
-000191c0: 6172 7927 5d20 3d20 6269 6e61 7279 2e62  ary'] = binary.b
-000191d0: 696e 6172 795f 6669 6c65 6e61 6d65 2829  inary_filename()
-000191e0: 0a20 2020 206f 7574 5b27 706c 6174 666f  .    out['platfo
-000191f0: 726d 275d 203d 2070 6c61 7466 6f72 6d5f  rm'] = platform_
-00019200: 6964 0a20 2020 206f 7574 5b27 6173 7365  id.    out['asse
-00019210: 7466 696c 6573 275d 203d 2061 7373 6574  tfiles'] = asset
-00019220: 6669 6c65 7320 6f72 205b 5d0a 2020 2020  files or [].    
-00019230: 7265 7475 726e 206f 7574 0a0a 0a64 6566  return out...def
-00019240: 205f 7072 696e 745f 7769 7468 5f6c 696e   _print_with_lin
-00019250: 655f 6e75 6d62 6572 7328 733a 2073 7472  e_numbers(s: str
-00019260: 2920 2d3e 204e 6f6e 653a 0a20 2020 2066  ) -> None:.    f
-00019270: 6f72 2069 2c20 6c69 6e65 2069 6e20 656e  or i, line in en
-00019280: 756d 6572 6174 6528 732e 7370 6c69 746c  umerate(s.splitl
-00019290: 696e 6573 2829 293a 0a20 2020 2020 2020  ines()):.       
-000192a0: 2070 7269 6e74 2866 227b 692b 313a 3030   print(f"{i+1:00
-000192b0: 3364 7d20 7b6c 696e 657d 2229 0a0a 0a64  3d} {line}")...d
-000192c0: 6566 205f 6669 6c65 6e61 6d65 5f66 726f  ef _filename_fro
-000192d0: 6d5f 636f 6e74 656e 745f 6469 7370 6f73  m_content_dispos
-000192e0: 6974 696f 6e28 6364 3a20 7374 7229 202d  ition(cd: str) -
-000192f0: 3e20 7374 723a 0a20 2020 2022 2222 0a20  > str:.    """. 
-00019300: 2020 2047 6574 2066 696c 656e 616d 6520     Get filename 
-00019310: 6672 6f6d 2063 6f6e 7465 6e74 2d64 6973  from content-dis
-00019320: 706f 7369 7469 6f6e 0a0a 2020 2020 5669  position..    Vi
-00019330: 613a 2068 7474 7073 3a2f 2f77 7777 2e63  a: https://www.c
-00019340: 6f64 656d 656e 746f 722e 696f 2f40 6176  odementor.io/@av
-00019350: 6961 7279 616e 2f64 6f77 6e6c 6f61 6469  iaryan/downloadi
-00019360: 6e67 2d66 696c 6573 2d66 726f 6d2d 7572  ng-files-from-ur
-00019370: 6c73 2d69 6e2d 7079 7468 6f6e 2d37 3771  ls-in-python-77q
-00019380: 3362 7330 756e 0a0a 2020 2020 4172 6773  3bs0un..    Args
-00019390: 3a0a 2020 2020 2020 2020 6364 3a20 636f  :.        cd: co
-000193a0: 6e74 656e 7420 6469 7370 6f73 6974 696f  ntent dispositio
-000193b0: 6e0a 0a20 2020 2052 6574 7572 6e73 3a0a  n..    Returns:.
-000193c0: 2020 2020 2020 2020 7468 6520 6669 6c65          the file
-000193d0: 6e61 6d65 206f 7220 616e 2065 6d70 7479  name or an empty
-000193e0: 2073 7472 696e 670a 2020 2020 2222 220a   string.    """.
-000193f0: 2020 2020 6966 206e 6f74 2063 643a 0a20      if not cd:. 
-00019400: 2020 2020 2020 2072 6574 7572 6e20 2727         return ''
-00019410: 0a20 2020 2066 6e61 6d65 203d 2072 652e  .    fname = re.
-00019420: 6669 6e64 616c 6c28 2766 696c 656e 616d  findall('filenam
-00019430: 653d 282e 2b29 272c 2063 6429 0a20 2020  e=(.+)', cd).   
-00019440: 2069 6620 6c65 6e28 666e 616d 6529 203d   if len(fname) =
-00019450: 3d20 303a 0a20 2020 2020 2020 2072 6574  = 0:.        ret
-00019460: 7572 6e20 2727 0a20 2020 2072 6574 7572  urn ''.    retur
-00019470: 6e20 666e 616d 655b 305d 0a0a 0a64 6566  n fname[0]...def
-00019480: 205f 646f 776e 6c6f 6164 5f66 696c 6528   _download_file(
-00019490: 7572 6c3a 2073 7472 2c20 6465 7374 696e  url: str, destin
-000194a0: 6174 696f 6e5f 666f 6c64 6572 3d27 272c  ation_folder='',
-000194b0: 2063 6163 6865 3d54 7275 6529 202d 3e20   cache=True) -> 
-000194c0: 5061 7468 3a0a 2020 2020 2222 220a 2020  Path:.    """.  
-000194d0: 2020 446f 776e 6c6f 6164 2074 6865 2067    Download the g
-000194e0: 6976 656e 2075 726c 2e20 5261 6973 6573  iven url. Raises
-000194f0: 2052 756e 7469 6d65 4572 726f 7220 6966   RuntimeError if
-00019500: 2066 6169 6c65 640a 0a20 2020 2041 7267   failed..    Arg
-00019510: 733a 0a20 2020 2020 2020 2075 726c 3a20  s:.        url: 
-00019520: 7468 6520 7572 6c20 746f 2064 6f77 6e6c  the url to downl
-00019530: 6f61 6420 6672 6f6d 0a20 2020 2020 2020  oad from.       
-00019540: 2064 6573 7469 6e61 7469 6f6e 5f66 6f6c   destination_fol
-00019550: 6465 723a 2069 6620 6769 7665 6e2c 2074  der: if given, t
-00019560: 6865 2066 6f6c 6465 7220 746f 2070 6c61  he folder to pla
-00019570: 6365 2074 6865 2064 6f77 6e6c 6f61 6465  ce the downloade
-00019580: 6420 6669 6c65 2e20 4465 6661 756c 7473  d file. Defaults
-00019590: 2074 6f0a 2020 2020 2020 2020 2020 2020   to.            
-000195a0: 7468 6520 7465 6d70 6f72 6172 7920 666f  the temporary fo
-000195b0: 6c64 6572 2e20 4966 2067 6976 656e 2c20  lder. If given, 
-000195c0: 6361 6368 6520 6973 2064 6973 6162 6c65  cache is disable
-000195d0: 642e 0a20 2020 2020 2020 2063 6163 6865  d..        cache
-000195e0: 3a20 6966 2046 616c 7365 2c20 6279 7061  : if False, bypa
-000195f0: 7373 2074 6865 2063 6163 6865 2e0a 2020  ss the cache..  
-00019600: 2020 2222 220a 2020 2020 6261 7365 6f75    """.    baseou
-00019610: 7466 696c 6520 3d20 6f73 2e70 6174 682e  tfile = os.path.
-00019620: 7370 6c69 7428 7572 6c29 5b31 5d0a 2020  split(url)[1].  
-00019630: 2020 6361 6368 6564 7061 7468 203d 205f    cachedpath = _
-00019640: 7365 7373 696f 6e2e 646f 776e 6c6f 6164  session.download
-00019650: 6564 5f66 696c 6573 2e67 6574 2875 726c  ed_files.get(url
-00019660: 290a 2020 2020 6966 2063 6163 6865 6470  ).    if cachedp
-00019670: 6174 6820 6973 206e 6f74 204e 6f6e 6520  ath is not None 
-00019680: 616e 6420 6361 6368 653a 0a20 2020 2020  and cache:.     
-00019690: 2020 205f 6465 6275 6728 2246 6f75 6e64     _debug("Found
-000196a0: 2066 696c 6520 696e 2074 6865 2063 6163   file in the cac
-000196b0: 6865 2c20 6e6f 206e 6565 6420 746f 2064  he, no need to d
-000196c0: 6f77 6e6c 6f61 6422 290a 2020 2020 2020  ownload").      
-000196d0: 2020 6966 2064 6573 7469 6e61 7469 6f6e    if destination
-000196e0: 5f66 6f6c 6465 723a 0a20 2020 2020 2020  _folder:.       
-000196f0: 2020 2020 2064 6573 7470 6174 6820 3d20       destpath = 
-00019700: 5061 7468 2864 6573 7469 6e61 7469 6f6e  Path(destination
-00019710: 5f66 6f6c 6465 7229 202f 2062 6173 656f  _folder) / baseo
-00019720: 7574 6669 6c65 0a20 2020 2020 2020 2020  utfile.         
-00019730: 2020 205f 6465 6275 6728 6622 436f 7079     _debug(f"Copy
-00019740: 696e 6720 6361 6368 6564 2064 6f77 6e6c  ing cached downl
-00019750: 6f61 6465 6420 6669 6c65 2027 7b63 6163  oaded file '{cac
-00019760: 6865 6470 6174 687d 2720 746f 2027 7b64  hedpath}' to '{d
-00019770: 6573 7470 6174 687d 2722 290a 2020 2020  estpath}'").    
-00019780: 2020 2020 2020 2020 7368 7574 696c 2e63          shutil.c
-00019790: 6f70 7928 6361 6368 6564 7061 7468 2c20  opy(cachedpath, 
-000197a0: 6465 7374 7061 7468 290a 2020 2020 2020  destpath).      
-000197b0: 2020 2020 2020 7265 7475 726e 2064 6573        return des
-000197c0: 7470 6174 680a 2020 2020 2020 2020 656c  tpath.        el
-000197d0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000197e0: 7265 7475 726e 2063 6163 6865 6470 6174  return cachedpat
-000197f0: 680a 2020 2020 5f64 6562 7567 2822 446f  h.    _debug("Do
-00019800: 776e 6c6f 6164 696e 6720 7572 6c22 2c20  wnloading url", 
-00019810: 7572 6c29 0a20 2020 2074 7279 3a0a 2020  url).    try:.  
-00019820: 2020 2020 2020 7265 7370 203d 2072 6571        resp = req
-00019830: 7565 7374 732e 6765 7428 7572 6c2c 2076  uests.get(url, v
-00019840: 6572 6966 793d 5472 7565 2c20 616c 6c6f  erify=True, allo
-00019850: 775f 7265 6469 7265 6374 733d 5472 7565  w_redirects=True
-00019860: 290a 2020 2020 2020 2020 636f 6e74 656e  ).        conten
-00019870: 7464 6973 705f 6669 6c65 6e61 6d65 203d  tdisp_filename =
-00019880: 205f 6669 6c65 6e61 6d65 5f66 726f 6d5f   _filename_from_
-00019890: 636f 6e74 656e 745f 6469 7370 6f73 6974  content_disposit
-000198a0: 696f 6e28 7265 7370 2e68 6561 6465 7273  ion(resp.headers
-000198b0: 2e67 6574 2827 636f 6e74 656e 742d 6469  .get('content-di
-000198c0: 7370 6f73 6974 696f 6e27 2929 0a20 2020  sposition')).   
-000198d0: 2020 2020 2069 6620 636f 6e74 656e 7464       if contentd
-000198e0: 6973 705f 6669 6c65 6e61 6d65 3a0a 2020  isp_filename:.  
-000198f0: 2020 2020 2020 2020 2020 6261 7365 6f75            baseou
-00019900: 7466 696c 6520 3d20 636f 6e74 656e 7464  tfile = contentd
-00019910: 6973 705f 6669 6c65 6e61 6d65 0a0a 2020  isp_filename..  
-00019920: 2020 6578 6365 7074 2072 6571 7565 7374    except request
-00019930: 732e 436f 6e6e 6563 7469 6f6e 4572 726f  s.ConnectionErro
-00019940: 7220 6173 2065 7272 3a0a 2020 2020 2020  r as err:.      
-00019950: 2020 5f65 7272 6f72 6d73 6728 6622 436f    _errormsg(f"Co
-00019960: 6e6e 6563 7469 6f6e 2065 7272 6f72 2077  nnection error w
-00019970: 6869 6c65 2074 7279 696e 6720 746f 2064  hile trying to d
-00019980: 6f77 6e6c 6f61 6420 7572 6c3a 2027 7b75  ownload url: '{u
-00019990: 726c 7d27 2229 0a20 2020 2020 2020 2072  rl}'").        r
-000199a0: 6169 7365 2065 7272 0a20 2020 2065 7863  aise err.    exc
-000199b0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-000199c0: 2065 7272 3a0a 2020 2020 2020 2020 5f65   err:.        _e
-000199d0: 7272 6f72 6d73 6728 6622 556e 6b6e 6f77  rrormsg(f"Unknow
-000199e0: 6e20 6578 6365 7074 696f 6e20 7768 696c  n exception whil
-000199f0: 6520 7472 7969 6e67 2074 6f20 646f 776e  e trying to down
-00019a00: 6c6f 6164 2075 726c 3a20 277b 7572 6c7d  load url: '{url}
-00019a10: 2722 290a 2020 2020 2020 2020 7261 6973  '").        rais
-00019a20: 6520 6572 720a 0a20 2020 2069 6620 6e6f  e err..    if no
-00019a30: 7420 6465 7374 696e 6174 696f 6e5f 666f  t destination_fo
-00019a40: 6c64 6572 3a0a 2020 2020 2020 2020 6465  lder:.        de
-00019a50: 7374 696e 6174 696f 6e5f 666f 6c64 6572  stination_folder
-00019a60: 203d 2074 656d 7066 696c 652e 6765 7474   = tempfile.gett
-00019a70: 656d 7064 6972 2829 0a20 2020 2064 6573  empdir().    des
-00019a80: 7470 6174 6820 3d20 5061 7468 2864 6573  tpath = Path(des
-00019a90: 7469 6e61 7469 6f6e 5f66 6f6c 6465 7229  tination_folder)
-00019aa0: 202f 2062 6173 656f 7574 6669 6c65 0a20   / baseoutfile. 
-00019ab0: 2020 205f 6465 6275 6728 6622 5772 6974     _debug(f"Writ
-00019ac0: 696e 6720 646f 776e 6c6f 6164 6564 2063  ing downloaded c
-00019ad0: 6f6e 7465 6e74 2066 726f 6d20 7572 6c20  ontent from url 
-00019ae0: 277b 7572 6c7d 2720 746f 2066 696c 6520  '{url}' to file 
-00019af0: 277b 6465 7374 7061 7468 7d27 2229 0a20  '{destpath}'"). 
-00019b00: 2020 206f 7065 6e28 6465 7374 7061 7468     open(destpath
-00019b10: 2c20 2777 6227 292e 7772 6974 6528 7265  , 'wb').write(re
-00019b20: 7370 2e63 6f6e 7465 6e74 290a 2020 2020  sp.content).    
-00019b30: 5f73 6573 7369 6f6e 2e64 6f77 6e6c 6f61  _session.downloa
-00019b40: 6465 645f 6669 6c65 735b 7572 6c5d 203d  ded_files[url] =
-00019b50: 2064 6573 7470 6174 680a 2020 2020 7265   destpath.    re
-00019b60: 7475 726e 2064 6573 7470 6174 680a 0a0a  turn destpath...
-00019b70: 6465 6620 6465 6661 756c 745f 7379 7374  def default_syst
-00019b80: 656d 5f70 6c75 6769 6e73 5f70 6174 6828  em_plugins_path(
-00019b90: 6d61 6a6f 723d 362c 206d 696e 6f72 3d30  major=6, minor=0
-00019ba0: 2920 2d3e 206c 6973 745b 5061 7468 5d3a  ) -> list[Path]:
-00019bb0: 0a20 2020 2070 6c61 7466 6f72 6d20 3d20  .    platform = 
-00019bc0: 5f73 6573 7369 6f6e 2e70 6c61 7466 6f72  _session.platfor
-00019bd0: 6d0a 0a20 2020 2069 6620 706c 6174 666f  m..    if platfo
-00019be0: 726d 203d 3d20 276c 696e 7578 273a 0a20  rm == 'linux':. 
-00019bf0: 2020 2020 2020 2070 6f73 7369 626c 655f         possible_
-00019c00: 6469 7273 203d 205b 6622 2f75 7372 2f6c  dirs = [f"/usr/l
-00019c10: 6f63 616c 2f6c 6962 2f63 736f 756e 642f  ocal/lib/csound/
-00019c20: 706c 7567 696e 7336 342d 7b6d 616a 6f72  plugins64-{major
-00019c30: 7d2e 7b6d 696e 6f72 7d22 2c0a 2020 2020  }.{minor}",.    
-00019c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c50: 2020 2020 2066 222f 7573 722f 6c69 622f       f"/usr/lib/
-00019c60: 6373 6f75 6e64 2f70 6c75 6769 6e73 3634  csound/plugins64
-00019c70: 2d7b 6d61 6a6f 727d 2e7b 6d69 6e6f 727d  -{major}.{minor}
-00019c80: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-00019c90: 2020 2020 2020 2020 2020 2020 6622 2f75              f"/u
-00019ca0: 7372 2f6c 6962 2f78 3836 5f36 342d 6c69  sr/lib/x86_64-li
-00019cb0: 6e75 782d 676e 752f 6373 6f75 6e64 2f70  nux-gnu/csound/p
-00019cc0: 6c75 6769 6e73 3634 2d7b 6d61 6a6f 727d  lugins64-{major}
-00019cd0: 2e7b 6d69 6e6f 727d 225d 0a20 2020 2020  .{minor}"].     
-00019ce0: 2020 2069 6620 5f73 6573 7369 6f6e 2e61     if _session.a
-00019cf0: 7263 6869 7465 6374 7572 6520 3d3d 2027  rchitecture == '
-00019d00: 6172 6d36 3427 3a0a 2020 2020 2020 2020  arm64':.        
-00019d10: 2020 2020 2320 5468 6973 2069 7320 7768      # This is wh
-00019d20: 6572 6520 6465 6269 616e 2069 6e20 7261  ere debian in ra
-00019d30: 7370 6265 7272 7920 7069 2069 6e73 7461  spberry pi insta
-00019d40: 6c6c 7320 6373 6f75 6e64 2773 2070 6c75  lls csound's plu
-00019d50: 6769 6e73 0a20 2020 2020 2020 2020 2020  gins.           
-00019d60: 2023 2068 7474 7073 3a2f 2f70 6163 6b61   # https://packa
-00019d70: 6765 732e 6465 6269 616e 2e6f 7267 2f62  ges.debian.org/b
-00019d80: 756c 6c73 6579 652f 6172 6d68 662f 6c69  ullseye/armhf/li
-00019d90: 6263 736f 756e 6436 342d 362e 302f 6669  bcsound64-6.0/fi
-00019da0: 6c65 6c69 7374 0a20 2020 2020 2020 2020  lelist.         
-00019db0: 2020 2070 6f73 7369 626c 655f 6469 7273     possible_dirs
-00019dc0: 2e61 7070 656e 6428 6622 2f75 7372 2f6c  .append(f"/usr/l
-00019dd0: 6962 2f61 726d 2d6c 696e 7578 2d67 6e75  ib/arm-linux-gnu
-00019de0: 6561 6269 6866 2f63 736f 756e 642f 706c  eabihf/csound/pl
-00019df0: 7567 696e 7336 342d 7b6d 616a 6f72 7d2e  ugins64-{major}.
-00019e00: 7b6d 696e 6f72 7d2f 2229 0a20 2020 2065  {minor}/").    e
-00019e10: 6c69 6620 706c 6174 666f 726d 203d 3d20  lif platform == 
-00019e20: 276d 6163 6f73 273a 0a20 2020 2020 2020  'macos':.       
-00019e30: 2023 2054 6865 2070 6174 6820 6261 7365   # The path base
-00019e40: 6420 6f6e 207e 2069 7320 7573 6564 2077  d on ~ is used w
-00019e50: 6865 6e20 6373 6f75 6e64 2069 7320 636f  hen csound is co
-00019e60: 6d70 696c 6564 2066 726f 6d20 736f 7572  mpiled from sour
-00019e70: 6365 2e0a 2020 2020 2020 2020 2320 5765  ce..        # We
-00019e80: 2067 6976 6520 7468 6174 2070 7269 6f72   give that prior
-00019e90: 6974 7920 7369 6e63 6520 6966 2061 2075  ity since if a u
-00019ea0: 7365 7220 6973 2064 6f69 6e67 2074 6861  ser is doing tha
-00019eb0: 742c 2069 7420 6973 2070 726f 6261 626c  t, it is probabl
-00019ec0: 7920 736f 6d65 6f6e 6520 7768 6f20 6b6e  y someone who kn
-00019ed0: 6f77 730a 2020 2020 2020 2020 2320 7768  ows.        # wh
-00019ee0: 6174 2073 6865 2069 7320 646f 696e 670a  at she is doing.
-00019ef0: 2020 2020 2020 2020 4d41 435f 4353 4f55          MAC_CSOU
-00019f00: 4e44 4c49 4220 3d20 2743 736f 756e 644c  NDLIB = 'CsoundL
-00019f10: 6962 3634 270a 2020 2020 2020 2020 4150  ib64'.        AP
-00019f20: 495f 5645 5253 494f 4e20 3d20 6627 7b6d  I_VERSION = f'{m
-00019f30: 616a 6f72 7d2e 7b6d 696e 6f72 7d27 0a20  ajor}.{minor}'. 
-00019f40: 2020 2020 2020 2048 4f4d 4520 3d20 6f73         HOME = os
-00019f50: 2e67 6574 656e 7628 2248 4f4d 4522 290a  .getenv("HOME").
-00019f60: 2020 2020 2020 2020 706f 7373 6962 6c65          possible
-00019f70: 5f64 6972 7320 3d20 5b0a 2020 2020 2020  _dirs = [.      
-00019f80: 2020 2020 2020 6622 2f75 7372 2f6c 6f63        f"/usr/loc
-00019f90: 616c 2f6f 7074 2f63 736f 756e 642f 4672  al/opt/csound/Fr
-00019fa0: 616d 6577 6f72 6b73 2f7b 4d41 435f 4353  ameworks/{MAC_CS
-00019fb0: 4f55 4e44 4c49 427d 2e66 7261 6d65 776f  OUNDLIB}.framewo
-00019fc0: 726b 2f56 6572 7369 6f6e 732f 7b41 5049  rk/Versions/{API
-00019fd0: 5f56 4552 5349 4f4e 7d2f 5265 736f 7572  _VERSION}/Resour
-00019fe0: 6365 732f 4f70 636f 6465 7336 3422 2c0a  ces/Opcodes64",.
-00019ff0: 2020 2020 2020 2020 2020 2020 6622 7b48              f"{H
-0001a000: 4f4d 457d 2f4c 6962 7261 7279 2f46 7261  OME}/Library/Fra
-0001a010: 6d65 776f 726b 732f 7b4d 4143 5f43 534f  meworks/{MAC_CSO
-0001a020: 554e 444c 4942 7d2e 6672 616d 6577 6f72  UNDLIB}.framewor
-0001a030: 6b2f 5665 7273 696f 6e73 2f7b 4150 495f  k/Versions/{API_
-0001a040: 5645 5253 494f 4e7d 2f52 6573 6f75 7263  VERSION}/Resourc
-0001a050: 6573 2f4f 7063 6f64 6573 3634 222c 0a20  es/Opcodes64",. 
-0001a060: 2020 2020 2020 2020 2020 2066 222f 4c69             f"/Li
-0001a070: 6272 6172 792f 4672 616d 6577 6f72 6b73  brary/Frameworks
-0001a080: 2f7b 4d41 435f 4353 4f55 4e44 4c49 427d  /{MAC_CSOUNDLIB}
-0001a090: 2e66 7261 6d65 776f 726b 2f56 6572 7369  .framework/Versi
-0001a0a0: 6f6e 732f 7b41 5049 5f56 4552 5349 4f4e  ons/{API_VERSION
-0001a0b0: 7d2f 5265 736f 7572 6365 732f 4f70 636f  }/Resources/Opco
-0001a0c0: 6465 7336 3422 2c0a 2020 2020 2020 2020  des64",.        
-0001a0d0: 2020 2020 6622 2f75 7372 2f6c 6f63 616c      f"/usr/local
-0001a0e0: 2f6c 6962 2f63 736f 756e 642f 706c 7567  /lib/csound/plug
-0001a0f0: 696e 7336 342d 7b41 5049 5f56 4552 5349  ins64-{API_VERSI
-0001a100: 4f4e 7d22 2c0a 2020 2020 2020 2020 2020  ON}",.          
-0001a110: 2020 6622 2f75 7372 2f6c 6962 2f63 736f    f"/usr/lib/cso
-0001a120: 756e 642f 706c 7567 696e 7336 342d 7b41  und/plugins64-{A
-0001a130: 5049 5f56 4552 5349 4f4e 7d22 0a20 2020  PI_VERSION}".   
-0001a140: 2020 2020 205d 0a20 2020 2065 6c69 6620       ].    elif 
-0001a150: 706c 6174 666f 726d 203d 3d20 2277 696e  platform == "win
-0001a160: 646f 7773 223a 0a20 2020 2020 2020 2070  dows":.        p
-0001a170: 6f73 7369 626c 655f 6469 7273 203d 205b  ossible_dirs = [
-0001a180: 6622 433a 5c5c 5072 6f67 7261 6d20 4669  f"C:\\Program Fi
-0001a190: 6c65 735c 5c43 736f 756e 647b 6d61 6a6f  les\\Csound{majo
-0001a1a0: 727d 5f78 3634 5c5c 706c 7567 696e 7336  r}_x64\\plugins6
-0001a1b0: 3422 5d0a 2020 2020 2020 2020 7061 7468  4"].        path
-0001a1c0: 666f 6c64 6572 7320 3d20 6f73 2e67 6574  folders = os.get
-0001a1d0: 656e 7628 2750 4154 4827 292e 7370 6c69  env('PATH').spli
-0001a1e0: 7428 6f73 2e70 6174 6873 6570 290a 2020  t(os.pathsep).  
-0001a1f0: 2020 2020 2020 706f 7373 6962 6c65 5f64        possible_d
-0001a200: 6972 7320 2b3d 2070 6174 6866 6f6c 6465  irs += pathfolde
-0001a210: 7273 0a20 2020 2065 6c73 653a 0a20 2020  rs.    else:.   
-0001a220: 2020 2020 2072 6169 7365 2050 6c61 7466       raise Platf
-0001a230: 6f72 6d4e 6f74 5375 7070 6f72 7465 6445  ormNotSupportedE
-0001a240: 7272 6f72 2866 2250 6c61 7466 6f72 6d20  rror(f"Platform 
-0001a250: 7b70 6c61 7466 6f72 6d7d 206e 6f74 2073  {platform} not s
-0001a260: 7570 706f 7274 6564 2229 0a20 2020 2072  upported").    r
-0001a270: 6574 7572 6e20 5b50 6174 6828 7029 2e61  eturn [Path(p).a
-0001a280: 6273 6f6c 7574 6528 2920 666f 7220 7020  bsolute() for p 
-0001a290: 696e 2070 6f73 7369 626c 655f 6469 7273  in possible_dirs
-0001a2a0: 5d0a 0a0a 6465 6620 7379 7374 656d 5f70  ]...def system_p
-0001a2b0: 6c75 6769 6e73 5f70 6174 6828 2920 2d3e  lugins_path() ->
-0001a2c0: 204f 7074 696f 6e61 6c5b 5061 7468 5d3a   Optional[Path]:
-0001a2d0: 0a20 2020 2022 2222 0a20 2020 2047 6574  .    """.    Get
-0001a2e0: 2074 6865 2070 6174 6820 7765 7265 2073   the path were s
-0001a2f0: 7973 7465 6d20 706c 7567 696e 7320 6172  ystem plugins ar
-0001a300: 6520 696e 7374 616c 6c65 642e 0a20 2020  e installed..   
-0001a310: 2022 2222 0a0a 2020 2020 6966 2028 6f75   """..    if (ou
-0001a320: 7420 3a3d 205f 7365 7373 696f 6e2e 6361  t := _session.ca
-0001a330: 6368 652e 6765 7428 2773 7973 7465 6d5f  che.get('system_
-0001a340: 706c 7567 696e 735f 7061 7468 272c 205f  plugins_path', _
-0001a350: 554e 5345 5429 2920 6973 205f 554e 5345  UNSET)) is _UNSE
-0001a360: 543a 0a20 2020 2020 2020 205f 7365 7373  T:.        _sess
-0001a370: 696f 6e2e 6361 6368 655b 2773 7973 7465  ion.cache['syste
-0001a380: 6d5f 706c 7567 696e 735f 7061 7468 275d  m_plugins_path']
-0001a390: 203d 206f 7574 203d 205f 7379 7374 656d   = out = _system
-0001a3a0: 5f70 6c75 6769 6e73 5f70 6174 6828 290a  _plugins_path().
-0001a3b0: 2020 2020 7265 7475 726e 206f 7574 0a0a      return out..
-0001a3c0: 0a64 6566 205f 7379 7374 656d 5f70 6c75  .def _system_plu
-0001a3d0: 6769 6e73 5f70 6174 6828 6d61 6a6f 7276  gins_path(majorv
-0001a3e0: 6572 7369 6f6e 3d36 2920 2d3e 204f 7074  ersion=6) -> Opt
-0001a3f0: 696f 6e61 6c5b 5061 7468 5d3a 0a20 2020  ional[Path]:.   
-0001a400: 2023 2066 6972 7374 2063 6865 636b 2069   # first check i
-0001a410: 6620 7468 6520 7573 6572 2068 6173 2073  f the user has s
-0001a420: 6574 204f 5043 4f44 4536 4449 5236 340a  et OPCODE6DIR64.
-0001a430: 2020 2020 6f70 636f 6465 3664 6972 3634      opcode6dir64
-0001a440: 203d 206f 732e 6765 7465 6e76 2866 224f   = os.getenv(f"O
-0001a450: 5043 4f44 457b 6d61 6a6f 7276 6572 7369  PCODE{majorversi
-0001a460: 6f6e 7d44 4952 3634 2229 0a20 2020 2069  on}DIR64").    i
-0001a470: 6620 6f70 636f 6465 3664 6972 3634 3a0a  f opcode6dir64:.
-0001a480: 2020 2020 2020 2020 706f 7373 6962 6c65          possible
-0001a490: 5f70 6174 6873 203d 205b 5061 7468 2870  _paths = [Path(p
-0001a4a0: 2920 666f 7220 7020 696e 206f 7063 6f64  ) for p in opcod
-0001a4b0: 6536 6469 7236 342e 7370 6c69 7428 5f67  e6dir64.split(_g
-0001a4c0: 6574 5f70 6174 685f 7365 7061 7261 746f  et_path_separato
-0001a4d0: 7228 2929 5d0a 2020 2020 656c 7365 3a0a  r())].    else:.
-0001a4e0: 2020 2020 2020 2020 706f 7373 6962 6c65          possible
-0001a4f0: 5f70 6174 6873 203d 2064 6566 6175 6c74  _paths = default
-0001a500: 5f73 7973 7465 6d5f 706c 7567 696e 735f  _system_plugins_
-0001a510: 7061 7468 2829 0a0a 2020 2020 6f75 7420  path()..    out 
-0001a520: 3d20 5f66 696e 645f 7379 7374 656d 5f70  = _find_system_p
-0001a530: 6c75 6769 6e73 5f70 6174 6828 706f 7373  lugins_path(poss
-0001a540: 6962 6c65 5f70 6174 6873 290a 2020 2020  ible_paths).    
-0001a550: 6966 206e 6f74 206f 7574 3a0a 2020 2020  if not out:.    
-0001a560: 2020 2020 5f69 6e66 6f28 6622 5379 7374      _info(f"Syst
-0001a570: 656d 2070 6c75 6769 6e73 2070 6174 6820  em plugins path 
-0001a580: 6e6f 7420 666f 756e 642e 2053 6561 7263  not found. Searc
-0001a590: 6865 6420 7061 7468 733a 207b 706f 7373  hed paths: {poss
-0001a5a0: 6962 6c65 5f70 6174 6873 7d22 290a 2020  ible_paths}").  
-0001a5b0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-0001a5c0: 650a 2020 2020 6173 7365 7274 206f 7574  e.    assert out
-0001a5d0: 2e65 7869 7374 7328 2920 616e 6420 6f75  .exists() and ou
-0001a5e0: 742e 6973 5f64 6972 2829 2061 6e64 206f  t.is_dir() and o
-0001a5f0: 7574 2e69 735f 6162 736f 6c75 7465 2829  ut.is_absolute()
-0001a600: 0a20 2020 2072 6574 7572 6e20 6f75 740a  .    return out.
-0001a610: 0a0a 6465 6620 7573 6572 5f69 6e73 7461  ..def user_insta
-0001a620: 6c6c 6564 5f64 6c6c 7328 6d61 6a6f 7276  lled_dlls(majorv
-0001a630: 6572 7369 6f6e 3d36 2920 2d3e 206c 6973  ersion=6) -> lis
-0001a640: 745b 5061 7468 5d3a 0a20 2020 2022 2222  t[Path]:.    """
-0001a650: 0a20 2020 2052 6574 7572 6e20 6120 6c69  .    Return a li
-0001a660: 7374 206f 6620 706c 7567 696e 7320 696e  st of plugins in
-0001a670: 7374 616c 6c65 6420 6174 2074 6865 2075  stalled at the u
-0001a680: 7365 7220 706c 7567 696e 2070 6174 682e  ser plugin path.
-0001a690: 0a20 2020 2022 2222 0a20 2020 2069 6620  .    """.    if 
-0001a6a0: 286f 7574 203a 3d20 5f73 6573 7369 6f6e  (out := _session
-0001a6b0: 2e63 6163 6865 2e67 6574 2827 7573 6572  .cache.get('user
-0001a6c0: 5f69 6e73 7461 6c6c 6564 5f64 6c6c 7327  _installed_dlls'
-0001a6d0: 2c20 5f55 4e53 4554 2929 2069 7320 5f55  , _UNSET)) is _U
-0001a6e0: 4e53 4554 3a0a 2020 2020 2020 2020 7061  NSET:.        pa
-0001a6f0: 7468 203d 2075 7365 725f 706c 7567 696e  th = user_plugin
-0001a700: 735f 7061 7468 286d 616a 6f72 7665 7273  s_path(majorvers
-0001a710: 696f 6e3d 6d61 6a6f 7276 6572 7369 6f6e  ion=majorversion
-0001a720: 290a 2020 2020 2020 2020 6f75 7420 3d20  ).        out = 
-0001a730: 6c69 7374 2870 6174 682e 676c 6f62 2822  list(path.glob("
-0001a740: 2a22 202b 205f 706c 7567 696e 5f65 7874  *" + _plugin_ext
-0001a750: 656e 7369 6f6e 2829 2929 2069 6620 7061  ension())) if pa
-0001a760: 7468 2061 6e64 2070 6174 682e 6578 6973  th and path.exis
-0001a770: 7473 2829 2065 6c73 6520 5b5d 0a20 2020  ts() else [].   
-0001a780: 2020 2020 205f 7365 7373 696f 6e2e 6361       _session.ca
-0001a790: 6368 655b 2775 7365 725f 696e 7374 616c  che['user_instal
-0001a7a0: 6c65 645f 646c 6c73 275d 203d 206f 7574  led_dlls'] = out
-0001a7b0: 0a20 2020 2072 6574 7572 6e20 6f75 740a  .    return out.
-0001a7c0: 0a0a 6465 6620 7379 7374 656d 5f69 6e73  ..def system_ins
-0001a7d0: 7461 6c6c 6564 5f64 6c6c 7328 2920 2d3e  talled_dlls() ->
-0001a7e0: 206c 6973 745b 5061 7468 5d3a 0a20 2020   list[Path]:.   
-0001a7f0: 2022 2222 0a20 2020 204c 4973 7420 6f66   """.    LIst of
-0001a800: 2070 6c75 6769 6e73 2069 6e73 7461 6c6c   plugins install
-0001a810: 6564 2061 7420 7468 6520 7379 7374 656d  ed at the system
-0001a820: 2773 2070 6174 680a 2020 2020 2222 220a  's path.    """.
-0001a830: 2020 2020 6966 2028 6f75 7420 3a3d 205f      if (out := _
-0001a840: 7365 7373 696f 6e2e 6361 6368 652e 6765  session.cache.ge
-0001a850: 7428 2773 7973 7465 6d5f 696e 7374 616c  t('system_instal
-0001a860: 6c65 645f 646c 6c73 2729 2920 6973 204e  led_dlls')) is N
-0001a870: 6f6e 653a 0a20 2020 2020 2020 2070 6174  one:.        pat
-0001a880: 6820 3d20 7379 7374 656d 5f70 6c75 6769  h = system_plugi
-0001a890: 6e73 5f70 6174 6828 290a 2020 2020 2020  ns_path().      
-0001a8a0: 2020 6f75 7420 3d20 6c69 7374 2870 6174    out = list(pat
-0001a8b0: 682e 676c 6f62 2822 2a22 202b 205f 706c  h.glob("*" + _pl
-0001a8c0: 7567 696e 5f65 7874 656e 7369 6f6e 2829  ugin_extension()
-0001a8d0: 2929 2069 6620 7061 7468 2061 6e64 2070  )) if path and p
-0001a8e0: 6174 682e 6578 6973 7473 2829 2065 6c73  ath.exists() els
-0001a8f0: 6520 5b5d 0a20 2020 2020 2020 205f 7365  e [].        _se
-0001a900: 7373 696f 6e2e 6361 6368 655b 2773 7973  ssion.cache['sys
-0001a910: 7465 6d5f 696e 7374 616c 6c65 645f 646c  tem_installed_dl
-0001a920: 6c73 275d 203d 206f 7574 0a20 2020 2072  ls'] = out.    r
-0001a930: 6574 7572 6e20 6f75 740a 0a0a 636c 6173  eturn out...clas
-0001a940: 7320 4d61 696e 496e 6465 783a 0a20 2020  s MainIndex:.   
-0001a950: 2022 2222 0a20 2020 2054 6869 7320 636c   """.    This cl
-0001a960: 6173 7320 686f 6c64 7320 7269 7373 6574  ass holds risset
-0001a970: 2773 206d 6169 6e20 696e 6465 780a 2020  's main index.  
-0001a980: 2020 2222 220a 2020 2020 6465 6620 5f5f    """.    def __
-0001a990: 696e 6974 5f5f 2873 656c 662c 2064 6174  init__(self, dat
-0001a9a0: 6172 6570 6f3a 2050 6174 6820 3d20 4e6f  arepo: Path = No
-0001a9b0: 6e65 2c20 7570 6461 7465 3d46 616c 7365  ne, update=False
-0001a9c0: 2c20 6d61 6a6f 7276 6572 7369 6f6e 3a20  , majorversion: 
-0001a9d0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
-0001a9e0: 4e6f 6e65 293a 0a20 2020 2020 2020 2022  None):.        "
-0001a9f0: 2222 0a20 2020 2020 2020 2041 7267 733a  "".        Args:
-0001aa00: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-0001aa10: 6172 6570 6f3a 2074 6865 206c 6f63 616c  arepo: the local
-0001aa20: 2070 6174 6820 746f 2063 6c6f 6e65 2074   path to clone t
-0001aa30: 6865 2067 6974 206d 6169 6e20 696e 6465  he git main inde
-0001aa40: 7820 7265 706f 7369 746f 7279 2074 6f0a  x repository to.
-0001aa50: 2020 2020 2020 2020 2020 2020 7570 6461              upda
-0001aa60: 7465 3a20 6966 2054 7275 652c 2075 7064  te: if True, upd
-0001aa70: 6174 6520 696e 6465 7820 7072 696f 7220  ate index prior 
-0001aa80: 746f 2070 6172 7369 6e67 0a20 2020 2020  to parsing.     
-0001aa90: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-0001aaa0: 6620 6d61 6a6f 7276 6572 7369 6f6e 2069  f majorversion i
-0001aab0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-0001aac0: 2020 2020 2320 6d61 6a6f 722c 206d 696e      # major, min
-0001aad0: 6f72 203d 205f 6373 6f75 6e64 5f76 6572  or = _csound_ver
-0001aae0: 7369 6f6e 2829 0a20 2020 2020 2020 2020  sion().         
-0001aaf0: 2020 206d 616a 6f72 2c20 6d69 6e6f 7220     major, minor 
-0001ab00: 3d20 5f63 736f 756e 646c 6962 5f76 6572  = _csoundlib_ver
-0001ab10: 7369 6f6e 2829 0a20 2020 2020 2020 2020  sion().         
-0001ab20: 2020 2069 6620 6e6f 7420 286d 616a 6f72     if not (major
-0001ab30: 203d 3d20 3620 6f72 206d 616a 6f72 203d   == 6 or major =
-0001ab40: 3d20 3729 3a0a 2020 2020 2020 2020 2020  = 7):.          
-0001ab50: 2020 2020 2020 7261 6973 6520 5275 6e74        raise Runt
-0001ab60: 696d 6545 7272 6f72 2866 2243 736f 756e  imeError(f"Csoun
-0001ab70: 6420 7665 7273 696f 6e20 7b6d 616a 6f72  d version {major
-0001ab80: 7d2e 7b6d 696e 6f72 7d20 6e6f 7420 7375  }.{minor} not su
-0001ab90: 7070 6f72 7465 6422 290a 2020 2020 2020  pported").      
-0001aba0: 2020 2020 2020 6d61 6a6f 7276 6572 7369        majorversi
-0001abb0: 6f6e 203d 206d 616a 6f72 0a0a 2020 2020  on = major..    
-0001abc0: 2020 2020 6966 2064 6174 6172 6570 6f20      if datarepo 
-0001abd0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-0001abe0: 2020 2020 2064 6174 6172 6570 6f20 3d20       datarepo = 
-0001abf0: 5249 5353 4554 5f52 4f4f 5420 2f20 2772  RISSET_ROOT / 'r
-0001ac00: 6973 7365 742d 6461 7461 270a 2020 2020  isset-data'.    
-0001ac10: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001ac20: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
-0001ac30: 6e73 7461 6e63 6528 6461 7461 7265 706f  nstance(datarepo
-0001ac40: 2c20 5061 7468 290a 2020 2020 2020 2020  , Path).        
-0001ac50: 7365 6c66 2e69 6e64 6578 6669 6c65 203d  self.indexfile =
-0001ac60: 2064 6174 6172 6570 6f20 2f20 2272 6973   datarepo / "ris
-0001ac70: 7365 7469 6e64 6578 2e6a 736f 6e22 0a20  setindex.json". 
-0001ac80: 2020 2020 2020 2069 6620 6e6f 7420 6461         if not da
-0001ac90: 7461 7265 706f 2e65 7869 7374 7328 293a  tarepo.exists():
-0001aca0: 0a20 2020 2020 2020 2020 2020 2075 7064  .            upd
-0001acb0: 6174 6569 6e64 6578 203d 2046 616c 7365  ateindex = False
-0001acc0: 0a20 2020 2020 2020 2020 2020 205f 6769  .            _gi
-0001acd0: 745f 636c 6f6e 655f 696e 746f 2849 4e44  t_clone_into(IND
-0001ace0: 4558 5f47 4954 5f52 4550 4f53 4954 4f52  EX_GIT_REPOSITOR
-0001acf0: 592c 2064 6174 6172 6570 6f2c 2064 6570  Y, datarepo, dep
-0001ad00: 7468 3d31 290a 2020 2020 2020 2020 656c  th=1).        el
-0001ad10: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001ad20: 7570 6461 7465 696e 6465 7820 3d20 7570  updateindex = up
-0001ad30: 6461 7465 0a20 2020 2020 2020 2061 7373  date.        ass
-0001ad40: 6572 7420 6461 7461 7265 706f 2e65 7869  ert datarepo.exi
-0001ad50: 7374 7328 290a 2020 2020 2020 2020 6173  sts().        as
-0001ad60: 7365 7274 205f 6973 5f67 6974 5f72 6570  sert _is_git_rep
-0001ad70: 6f28 6461 7461 7265 706f 290a 2020 2020  o(datarepo).    
-0001ad80: 2020 2020 6173 7365 7274 2073 656c 662e      assert self.
-0001ad90: 696e 6465 7866 696c 652e 6578 6973 7473  indexfile.exists
-0001ada0: 2829 2c20 6622 4d61 696e 2069 6e64 6578  (), f"Main index
-0001adb0: 2066 696c 6520 6e6f 7420 666f 756e 642c   file not found,
-0001adc0: 2073 6561 7263 6865 643a 207b 7365 6c66   searched: {self
-0001add0: 2e69 6e64 6578 6669 6c65 7d22 0a0a 2020  .indexfile}"..  
-0001ade0: 2020 2020 2020 7365 6c66 2e64 6174 6172        self.datar
-0001adf0: 6570 6f3a 2050 6174 6820 3d20 6461 7461  epo: Path = data
-0001ae00: 7265 706f 0a0a 2020 2020 2020 2020 7365  repo..        se
-0001ae10: 6c66 2e6d 616a 6f72 7665 7273 696f 6e3a  lf.majorversion:
-0001ae20: 2069 6e74 203d 206d 616a 6f72 7665 7273   int = majorvers
-0001ae30: 696f 6e0a 0a20 2020 2020 2020 2073 656c  ion..        sel
-0001ae40: 662e 706c 7567 696e 736f 7572 6365 733a  f.pluginsources:
-0001ae50: 2064 6963 745b 7374 722c 2049 6e64 6578   dict[str, Index
-0001ae60: 4974 656d 5d20 3d20 7b7d 0a20 2020 2020  Item] = {}.     
-0001ae70: 2020 2073 656c 662e 706c 7567 696e 733a     self.plugins:
-0001ae80: 2064 6963 745b 7374 722c 2050 6c75 6769   dict[str, Plugi
-0001ae90: 6e5d 203d 207b 7d0a 2020 2020 2020 2020  n] = {}.        
-0001aea0: 7365 6c66 2e5f 6361 6368 653a 2064 6963  self._cache: dic
-0001aeb0: 745b 7374 722c 2041 6e79 5d20 3d20 7b7d  t[str, Any] = {}
-0001aec0: 0a20 2020 2020 2020 2073 656c 662e 5f70  .        self._p
-0001aed0: 6172 7365 5f69 6e64 6578 2875 7064 6174  arse_index(updat
-0001aee0: 6569 6e64 6578 3d75 7064 6174 6569 6e64  eindex=updateind
-0001aef0: 6578 2c20 7570 6461 7465 706c 7567 696e  ex, updateplugin
-0001af00: 733d 7570 6461 7465 2c20 7374 6f70 5f6f  s=update, stop_o
-0001af10: 6e5f 6572 726f 7273 3d46 616c 7365 290a  n_errors=False).
-0001af20: 2020 2020 2020 2020 7365 6c66 2e75 7365          self.use
-0001af30: 725f 706c 7567 696e 735f 7061 7468 203d  r_plugins_path =
-0001af40: 2075 7365 725f 706c 7567 696e 735f 7061   user_plugins_pa
-0001af50: 7468 286d 616a 6f72 7665 7273 696f 6e3d  th(majorversion=
-0001af60: 7365 6c66 2e6d 616a 6f72 7665 7273 696f  self.majorversio
-0001af70: 6e29 0a20 2020 2020 2020 2069 6620 7570  n).        if up
-0001af80: 6461 7465 3a0a 2020 2020 2020 2020 2020  date:.          
-0001af90: 2020 7365 6c66 2e73 6572 6961 6c69 7a65    self.serialize
-0001afa0: 2829 0a0a 2020 2020 6465 6620 5f70 6172  ()..    def _par
-0001afb0: 7365 5f69 6e64 6578 2873 656c 662c 2075  se_index(self, u
-0001afc0: 7064 6174 6569 6e64 6578 3d46 616c 7365  pdateindex=False
-0001afd0: 2c20 7570 6461 7465 706c 7567 696e 733d  , updateplugins=
-0001afe0: 4661 6c73 652c 2073 746f 705f 6f6e 5f65  False, stop_on_e
-0001aff0: 7272 6f72 733d 5472 7565 2920 2d3e 204e  rrors=True) -> N
-0001b000: 6f6e 653a 0a20 2020 2020 2020 2022 2222  one:.        """
-0001b010: 0a20 2020 2020 2020 2050 6172 7365 2074  .        Parse t
-0001b020: 6865 206d 6169 6e20 696e 6465 7820 616e  he main index an
-0001b030: 6420 6561 6368 2065 6e74 6974 7920 6465  d each entity de
-0001b040: 6669 6e65 6420 7769 7468 696e 2069 740a  fined within it.
-0001b050: 0a20 2020 2020 2020 2049 6620 7468 6572  .        If ther
-0001b060: 6520 6172 6520 6572 726f 7273 2066 6f72  e are errors for
-0001b070: 2061 2070 6c75 6769 6e20 6465 6669 6e69   a plugin defini
-0001b080: 7469 6f6e 2c20 7468 6973 2070 6c75 6769  tion, this plugi
-0001b090: 6e20 6973 2073 6b69 7070 6564 2061 6e64  n is skipped and
-0001b0a0: 2061 6e0a 2020 2020 2020 2020 6572 726f   an.        erro
-0001b0b0: 7220 6d65 7373 6167 6520 6973 2070 7269  r message is pri
-0001b0c0: 6e74 6564 2c20 756e 6c65 7373 2066 6169  nted, unless fai
-0001b0d0: 6c5f 6966 5f65 7272 6f72 2069 7320 5472  l_if_error is Tr
-0001b0e0: 7565 2c20 696e 2077 6869 6368 2063 6173  ue, in which cas
-0001b0f0: 6520 7468 650a 2020 2020 2020 2020 7768  e the.        wh
-0001b100: 6f6c 6520 6f70 6572 6174 696f 6e20 6973  ole operation is
-0001b110: 2063 616e 6365 6c6c 6564 0a20 2020 2020   cancelled.     
-0001b120: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0001b130: 656c 662e 706c 7567 696e 732e 636c 6561  elf.plugins.clea
-0001b140: 7228 290a 2020 2020 2020 2020 7365 6c66  r().        self
-0001b150: 2e70 6c75 6769 6e73 6f75 7263 6573 2e63  .pluginsources.c
-0001b160: 6c65 6172 2829 0a20 2020 2020 2020 2073  lear().        s
-0001b170: 656c 662e 5f63 6163 6865 2e63 6c65 6172  elf._cache.clear
-0001b180: 2829 0a20 2020 2020 2020 2069 6620 7570  ().        if up
-0001b190: 6461 7465 696e 6465 783a 0a20 2020 2020  dateindex:.     
-0001b1a0: 2020 2020 2020 205f 6769 745f 7570 6461         _git_upda
-0001b1b0: 7465 2873 656c 662e 6461 7461 7265 706f  te(self.datarepo
-0001b1c0: 290a 0a20 2020 2020 2020 2069 6e64 6578  )..        index
-0001b1d0: 7374 7220 3d20 6f70 656e 2873 656c 662e  str = open(self.
-0001b1e0: 696e 6465 7866 696c 6529 2e72 6561 6428  indexfile).read(
-0001b1f0: 290a 2020 2020 2020 2020 7472 793a 0a20  ).        try:. 
-0001b200: 2020 2020 2020 2020 2020 2064 203d 206a             d = j
-0001b210: 736f 6e2e 6c6f 6164 7328 696e 6465 7873  son.loads(indexs
-0001b220: 7472 290a 2020 2020 2020 2020 6578 6365  tr).        exce
-0001b230: 7074 206a 736f 6e2e 4a53 4f4e 4465 636f  pt json.JSONDeco
-0001b240: 6465 4572 726f 7220 6173 2065 7272 3a0a  deError as err:.
-0001b250: 2020 2020 2020 2020 2020 2020 5f65 7272              _err
-0001b260: 6f72 6d73 6728 6622 4572 726f 7220 7768  ormsg(f"Error wh
-0001b270: 696c 6520 7061 7273 696e 6720 6a73 6f6e  ile parsing json
-0001b280: 2069 6e64 6578 2066 696c 6520 7b73 656c   index file {sel
-0001b290: 662e 696e 6465 7866 696c 657d 2229 0a20  f.indexfile}"). 
-0001b2a0: 2020 2020 2020 2020 2020 205f 7072 696e             _prin
-0001b2b0: 745f 7769 7468 5f6c 696e 655f 6e75 6d62  t_with_line_numb
-0001b2c0: 6572 7328 696e 6465 7873 7472 290a 2020  ers(indexstr).  
-0001b2d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0001b2e0: 5275 6e74 696d 6545 7272 6f72 2866 2243  RuntimeError(f"C
-0001b2f0: 6f75 6c64 206e 6f74 2070 6172 7365 2069  ould not parse i
-0001b300: 6e64 6578 2066 696c 653a 207b 6572 727d  ndex file: {err}
-0001b310: 2229 0a0a 2020 2020 2020 2020 7365 6c66  ")..        self
-0001b320: 2e76 6572 7369 6f6e 203d 2064 2e67 6574  .version = d.get
-0001b330: 2827 7665 7273 696f 6e27 2c20 2727 290a  ('version', '').
-0001b340: 2020 2020 2020 2020 706c 7567 696e 733a          plugins:
-0001b350: 2064 6963 745b 7374 722c 2050 6c75 6769   dict[str, Plugi
-0001b360: 6e5d 203d 2064 2e67 6574 2827 706c 7567  n] = d.get('plug
-0001b370: 696e 7327 2c20 7b7d 290a 2020 2020 2020  ins', {}).      
-0001b380: 2020 7570 6461 7465 643a 2073 6574 5b50    updated: set[P
-0001b390: 6174 685d 203d 2073 6574 2829 0a0a 2020  ath] = set()..  
-0001b3a0: 2020 2020 2020 666f 7220 6e61 6d65 2c20        for name, 
-0001b3b0: 706c 7567 696e 6465 6620 696e 2070 6c75  plugindef in plu
-0001b3c0: 6769 6e73 2e69 7465 6d73 2829 3a0a 2020  gins.items():.  
-0001b3d0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-0001b3e0: 2069 7369 6e73 7461 6e63 6528 6e61 6d65   isinstance(name
-0001b3f0: 2c20 7374 7229 0a20 2020 2020 2020 2020  , str).         
-0001b400: 2020 2061 7373 6572 7420 6973 696e 7374     assert isinst
-0001b410: 616e 6365 2870 6c75 6769 6e64 6566 2c20  ance(plugindef, 
-0001b420: 6469 6374 290a 2020 2020 2020 2020 2020  dict).          
-0001b430: 2020 7572 6c20 3d20 706c 7567 696e 6465    url = pluginde
-0001b440: 662e 6765 7428 2775 726c 2729 0a20 2020  f.get('url').   
-0001b450: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0001b460: 7572 6c3a 0a20 2020 2020 2020 2020 2020  url:.           
-0001b470: 2020 2020 205f 6572 726f 726d 7367 2866       _errormsg(f
-0001b480: 2249 6e76 616c 6964 2070 6c75 6769 6e20  "Invalid plugin 
-0001b490: 736f 7572 6365 2064 6566 696e 6974 696f  source definitio
-0001b4a0: 6e20 666f 7220 706c 7567 696e 207b 6e61  n for plugin {na
-0001b4b0: 6d65 7d3a 207b 706c 7567 696e 6465 667d  me}: {plugindef}
-0001b4c0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-0001b4d0: 2020 2072 6169 7365 2056 616c 7565 4572     raise ValueEr
-0001b4e0: 726f 7228 6622 4572 726f 7220 7768 696c  ror(f"Error whil
-0001b4f0: 6520 7061 7273 696e 6720 7468 6520 7269  e parsing the ri
-0001b500: 7373 6574 2069 6e64 6578 2e20 220a 2020  sset index. ".  
-0001b510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b520: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001b530: 2250 6c75 6769 6e20 7b6e 616d 657d 2064  "Plugin {name} d
-0001b540: 6f65 7320 6e6f 7420 6465 6669 6e65 2061  oes not define a
-0001b550: 2075 726c 2229 0a20 2020 2020 2020 2020   url").         
-0001b560: 2020 2061 7373 6572 7420 5f69 735f 6769     assert _is_gi
-0001b570: 745f 7572 6c28 7572 6c29 2c20 6622 7572  t_url(url), f"ur
-0001b580: 6c20 666f 7220 706c 7567 696e 207b 6e61  l for plugin {na
-0001b590: 6d65 7d20 6973 206e 6f74 2061 2067 6974  me} is not a git
-0001b5a0: 2072 6570 6f73 6974 6f72 793a 207b 7572   repository: {ur
-0001b5b0: 6c7d 220a 2020 2020 2020 2020 2020 2020  l}".            
-0001b5c0: 7061 7468 203d 2070 6c75 6769 6e64 6566  path = plugindef
-0001b5d0: 2e67 6574 2827 7061 7468 272c 2027 2729  .get('path', '')
-0001b5e0: 0a20 2020 2020 2020 2020 2020 2070 6c75  .            plu
-0001b5f0: 6769 6e73 6f75 7263 6520 3d20 496e 6465  ginsource = Inde
-0001b600: 7849 7465 6d28 6e61 6d65 3d6e 616d 652c  xItem(name=name,
-0001b610: 2075 726c 3d75 726c 2c20 7061 7468 3d70   url=url, path=p
-0001b620: 6174 6829 0a20 2020 2020 2020 2020 2020  ath).           
-0001b630: 2070 6c75 6769 6e70 6174 6820 3d20 5f67   pluginpath = _g
-0001b640: 6974 5f6c 6f63 616c 5f70 6174 6828 7572  it_local_path(ur
-0001b650: 6c29 0a20 2020 2020 2020 2020 2020 2061  l).            a
-0001b660: 7373 6572 7420 706c 7567 696e 7061 7468  ssert pluginpath
-0001b670: 2e65 7869 7374 7328 290a 2020 2020 2020  .exists().      
-0001b680: 2020 2020 2020 6966 2075 7064 6174 6570        if updatep
-0001b690: 6c75 6769 6e73 2061 6e64 2070 6c75 6769  lugins and plugi
-0001b6a0: 6e70 6174 6820 6e6f 7420 696e 2075 7064  npath not in upd
-0001b6b0: 6174 6564 3a0a 2020 2020 2020 2020 2020  ated:.          
-0001b6c0: 2020 2020 2020 5f67 6974 5f75 7064 6174        _git_updat
-0001b6d0: 6528 706c 7567 696e 7061 7468 290a 2020  e(pluginpath).  
-0001b6e0: 2020 2020 2020 2020 2020 2020 2020 7570                up
-0001b6f0: 6461 7465 642e 6164 6428 706c 7567 696e  dated.add(plugin
-0001b700: 7061 7468 290a 0a20 2020 2020 2020 2020  path)..         
-0001b710: 2020 2073 656c 662e 706c 7567 696e 736f     self.pluginso
-0001b720: 7572 6365 735b 6e61 6d65 5d20 3d20 706c  urces[name] = pl
-0001b730: 7567 696e 736f 7572 6365 0a0a 2020 2020  uginsource..    
-0001b740: 2020 2020 6966 2073 656c 662e 706c 7567      if self.plug
-0001b750: 696e 736f 7572 6365 733a 0a20 2020 2020  insources:.     
-0001b760: 2020 2020 2020 2066 6f72 206e 616d 652c         for name,
-0001b770: 2070 6c75 6769 6e73 6f75 7263 6520 696e   pluginsource in
-0001b780: 2073 656c 662e 706c 7567 696e 736f 7572   self.pluginsour
-0001b790: 6365 732e 6974 656d 7328 293a 0a20 2020  ces.items():.   
-0001b7a0: 2020 2020 2020 2020 2020 2020 2074 7279               try
-0001b7b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001b7c0: 2020 2020 2020 5f64 6562 7567 2866 2250        _debug(f"P
-0001b7d0: 6172 7369 6e67 2070 6c75 6769 6e20 6465  arsing plugin de
-0001b7e0: 6669 6e69 7469 6f6e 2066 6f72 207b 6e61  finition for {na
-0001b7f0: 6d65 7d22 290a 2020 2020 2020 2020 2020  me}").          
-0001b800: 2020 2020 2020 2020 2020 706c 7567 696e            plugin
-0001b810: 203d 2073 656c 662e 5f70 6172 7365 5f70   = self._parse_p
-0001b820: 6c75 6769 6e28 6e61 6d65 290a 2020 2020  lugin(name).    
-0001b830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b840: 7365 6c66 2e70 6c75 6769 6e73 5b6e 616d  self.plugins[nam
-0001b850: 655d 203d 2070 6c75 6769 6e0a 2020 2020  e] = plugin.    
-0001b860: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0001b870: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-0001b880: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0001b890: 2020 2020 2020 2069 6620 7374 6f70 5f6f         if stop_o
-0001b8a0: 6e5f 6572 726f 7273 3a0a 2020 2020 2020  n_errors:.      
-0001b8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b8c0: 2020 7261 6973 6520 650a 2020 2020 2020    raise e.      
-0001b8d0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0001b8e0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001b8f0: 2020 2020 2020 2020 2020 2020 5f65 7272              _err
-0001b900: 6f72 6d73 6728 6622 4572 726f 7220 7768  ormsg(f"Error wh
-0001b910: 696c 6520 7061 7273 696e 6720 706c 7567  ile parsing plug
-0001b920: 696e 2064 6566 696e 6974 696f 6e20 666f  in definition fo
-0001b930: 7220 277b 6e61 6d65 7d27 3a20 7b65 7d22  r '{name}': {e}"
-0001b940: 290a 0a20 2020 2064 6566 2075 7064 6174  )..    def updat
-0001b950: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-0001b960: 2022 2222 0a20 2020 2020 2020 2055 7064   """.        Upd
-0001b970: 6174 6520 616c 6c20 736f 7572 6365 7320  ate all sources 
-0001b980: 616e 6420 7265 7265 6164 2074 6865 2069  and reread the i
-0001b990: 6e64 6578 0a20 2020 2020 2020 2022 2222  ndex.        """
-0001b9a0: 0a20 2020 2020 2020 2073 656c 662e 5f70  .        self._p
-0001b9b0: 6172 7365 5f69 6e64 6578 2875 7064 6174  arse_index(updat
-0001b9c0: 6569 6e64 6578 3d54 7275 652c 2075 7064  eindex=True, upd
-0001b9d0: 6174 6570 6c75 6769 6e73 3d54 7275 652c  ateplugins=True,
-0001b9e0: 2073 746f 705f 6f6e 5f65 7272 6f72 733d   stop_on_errors=
-0001b9f0: 5f73 6573 7369 6f6e 2e73 746f 705f 6f6e  _session.stop_on
-0001ba00: 5f65 7272 6f72 7329 0a20 2020 2020 2020  _errors).       
-0001ba10: 2073 656c 662e 7365 7269 616c 697a 6528   self.serialize(
-0001ba20: 290a 0a20 2020 2064 6566 2062 7569 6c64  )..    def build
-0001ba30: 5f64 6f63 756d 656e 7461 7469 6f6e 2873  _documentation(s
-0001ba40: 656c 662c 2064 6573 743a 2050 6174 6820  elf, dest: Path 
-0001ba50: 3d20 4e6f 6e65 2c20 6275 696c 6468 746d  = None, buildhtm
-0001ba60: 6c3d 5472 7565 2c20 206f 6e6c 7969 6e73  l=True,  onlyins
-0001ba70: 7461 6c6c 6564 3d46 616c 7365 2920 2d3e  talled=False) ->
-0001ba80: 2050 6174 683a 0a20 2020 2020 2020 2022   Path:.        "
-0001ba90: 2222 0a20 2020 2020 2020 2042 7569 6c64  "".        Build
-0001baa0: 2074 6865 2064 6f63 756d 656e 7461 7469   the documentati
-0001bab0: 6f6e 2066 6f72 2074 6865 2070 6c75 6769  on for the plugi
-0001bac0: 6e73 2069 6e64 6578 6564 0a0a 2020 2020  ns indexed..    
-0001bad0: 2020 2020 4172 6775 6d65 6e74 733a 0a20      Arguments:. 
-0001bae0: 2020 2020 2020 2020 2020 2064 6573 743a             dest:
-0001baf0: 2074 6865 2064 6573 7469 6e61 7469 6f6e   the destination
-0001bb00: 2066 6f6c 6465 722e 2049 6620 6e6f 7420   folder. If not 
-0001bb10: 6769 7665 6e2c 2069 7420 6973 2077 7269  given, it is wri
-0001bb20: 7474 656e 2074 6f20 5249 5353 4554 5f52  tten to RISSET_R
-0001bb30: 4f4f 542f 6d61 6e20 2873 6565 2062 656c  OOT/man (see bel
-0001bb40: 6f77 290a 2020 2020 2020 2020 2020 2020  ow).            
-0001bb50: 6275 696c 6468 746d 6c3a 2069 6620 5472  buildhtml: if Tr
-0001bb60: 7565 2c20 6275 696c 6420 7468 6520 6874  ue, build the ht
-0001bb70: 6d6c 206d 616e 7561 6c20 6672 6f6d 2074  ml manual from t
-0001bb80: 6865 2067 6976 656e 206d 6172 6b64 6f77  he given markdow
-0001bb90: 6e20 646f 6373 0a20 2020 2020 2020 2020  n docs.         
-0001bba0: 2020 206f 6e6c 7969 6e73 7461 6c6c 6564     onlyinstalled
-0001bbb0: 3a20 6966 2054 7275 652c 206f 6e6c 7920  : if True, only 
-0001bbc0: 7468 6520 646f 6375 6d65 6e74 6174 696f  the documentatio
-0001bbd0: 6e20 666f 7220 7468 6520 706c 7567 696e  n for the plugin
-0001bbe0: 732f 6f70 636f 6465 7320 6163 7475 616c  s/opcodes actual
-0001bbf0: 6c79 2069 6e73 7461 6c6c 6564 0a20 2020  ly installed.   
-0001bc00: 2020 2020 2020 2020 2020 2020 2069 7320               is 
-0001bc10: 6765 6e65 7261 7465 640a 0a20 2020 2020  generated..     
-0001bc20: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-0001bc30: 2020 2020 2020 2020 7468 6520 7061 7468          the path
-0001bc40: 2077 6865 7265 2074 6865 2064 6f63 756d   where the docum
-0001bc50: 656e 7461 7469 6f6e 2077 6173 2070 6c61  entation was pla
-0001bc60: 6365 640a 0a20 2020 2020 2020 203d 3d3d  ced..        ===
-0001bc70: 3d3d 3d3d 3d3d 3d3d 2020 203d 3d3d 3d3d  ========   =====
-0001bc80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001bc90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001bca0: 3d3d 3d3d 3d3d 0a20 2020 2020 2020 2050  ======.        P
-0001bcb0: 6c61 7466 6f72 6d20 2020 2020 2044 6566  latform      Def
-0001bcc0: 6175 6c74 2064 6f63 7320 666f 6c64 6572  ault docs folder
-0001bcd0: 0a20 2020 2020 2020 203d 3d3d 3d3d 3d3d  .        =======
-0001bce0: 3d3d 3d3d 2020 203d 3d3d 3d3d 3d3d 3d3d  ====   =========
-0001bcf0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001bd00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001bd10: 3d3d 0a20 2020 2020 2020 206c 696e 7578  ==.        linux
-0001bd20: 2020 2020 2020 2020 207e 2f2e 6c6f 6361           ~/.loca
-0001bd30: 6c2f 7368 6172 652f 7269 7373 6574 2f6d  l/share/risset/m
-0001bd40: 616e 0a20 2020 2020 2020 206d 6163 6f73  an.        macos
-0001bd50: 2020 2020 2020 2020 207e 2f4c 6962 7261           ~/Libra
-0001bd60: 7279 2f72 6973 7365 742f 6d61 6e0a 2020  ry/risset/man.  
-0001bd70: 2020 2020 2020 7769 6e64 6f77 7320 2020        windows   
-0001bd80: 2020 2020 433a 2f55 7365 7273 2f24 5553      C:/Users/$US
-0001bd90: 4552 4e41 4d45 2f41 7070 4461 7461 2f4c  ERNAME/AppData/L
-0001bda0: 6f63 616c 2f72 6973 7365 742f 6d61 6e0a  ocal/risset/man.
-0001bdb0: 2020 2020 2020 2020 3d3d 3d3d 3d3d 3d3d          ========
-0001bdc0: 3d3d 3d20 2020 3d3d 3d3d 3d3d 3d3d 3d3d  ===   ==========
-0001bdd0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001bde0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001bdf0: 3d0a 2020 2020 2020 2020 2222 220a 2020  =.        """.  
-0001be00: 2020 2020 2020 7265 7475 726e 205f 6765        return _ge
-0001be10: 6e65 7261 7465 5f64 6f63 756d 656e 7461  nerate_documenta
-0001be20: 7469 6f6e 2873 656c 662c 2064 6573 743d  tion(self, dest=
-0001be30: 6465 7374 2c20 6275 696c 6468 746d 6c3d  dest, buildhtml=
-0001be40: 6275 696c 6468 746d 6c2c 206f 6e6c 7969  buildhtml, onlyi
-0001be50: 6e73 7461 6c6c 6564 3d6f 6e6c 7969 6e73  nstalled=onlyins
-0001be60: 7461 6c6c 6564 290a 0a20 2020 2064 6566  talled)..    def
-0001be70: 205f 7061 7273 655f 706c 7567 696e 2873   _parse_plugin(s
-0001be80: 656c 662c 2070 6c75 6769 6e6e 616d 653a  elf, pluginname:
-0001be90: 2073 7472 2920 2d3e 2050 6c75 6769 6e3a   str) -> Plugin:
-0001bea0: 0a20 2020 2020 2020 2070 6c75 6769 6e73  .        plugins
-0001beb0: 6f75 7263 6520 3d20 7365 6c66 2e70 6c75  ource = self.plu
-0001bec0: 6769 6e73 6f75 7263 6573 2e67 6574 2870  ginsources.get(p
-0001bed0: 6c75 6769 6e6e 616d 6529 0a20 2020 2020  luginname).     
-0001bee0: 2020 2069 6620 706c 7567 696e 736f 7572     if pluginsour
-0001bef0: 6365 2069 7320 4e6f 6e65 3a0a 2020 2020  ce is None:.    
-0001bf00: 2020 2020 2020 2020 7261 6973 6520 4b65          raise Ke
-0001bf10: 7945 7272 6f72 2866 2250 6c75 6769 6e20  yError(f"Plugin 
-0001bf20: 7b70 6c75 6769 6e6e 616d 657d 206e 6f74  {pluginname} not
-0001bf30: 206b 6e6f 776e 2e20 4b6e 6f77 6e20 706c   known. Known pl
-0001bf40: 7567 696e 733a 207b 7365 6c66 2e70 6c75  ugins: {self.plu
-0001bf50: 6769 6e73 6f75 7263 6573 2e6b 6579 7328  ginsources.keys(
-0001bf60: 297d 2229 0a20 2020 2020 2020 206d 616e  )}").        man
-0001bf70: 6966 6573 7470 6174 6820 3d20 706c 7567  ifestpath = plug
-0001bf80: 696e 736f 7572 6365 2e6d 616e 6966 6573  insource.manifes
-0001bf90: 745f 7061 7468 2829 0a20 2020 2020 2020  t_path().       
-0001bfa0: 2061 7373 6572 7420 6d61 6e69 6665 7374   assert manifest
-0001bfb0: 7061 7468 2e65 7869 7374 7328 290a 2020  path.exists().  
-0001bfc0: 2020 2020 2020 6d61 6e69 6665 7374 7374        manifestst
-0001bfd0: 7220 3d20 6f70 656e 286d 616e 6966 6573  r = open(manifes
-0001bfe0: 7470 6174 6829 2e72 6561 6428 290a 2020  tpath).read().  
-0001bff0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-0001c000: 2020 2020 2020 205f 203d 206a 736f 6e2e         _ = json.
-0001c010: 6c6f 6164 7328 6d61 6e69 6665 7374 7374  loads(manifestst
-0001c020: 7229 0a20 2020 2020 2020 2065 7863 6570  r).        excep
-0001c030: 7420 6a73 6f6e 2e4a 534f 4e44 6563 6f64  t json.JSONDecod
-0001c040: 6545 7272 6f72 2061 7320 6572 723a 0a20  eError as err:. 
-0001c050: 2020 2020 2020 2020 2020 205f 6572 726f             _erro
-0001c060: 726d 7367 2866 2245 7272 6f72 2077 6869  rmsg(f"Error whi
-0001c070: 6c65 2070 6172 7369 6e67 2070 6c75 6769  le parsing plugi
-0001c080: 6e20 6d61 6e69 6665 7374 2e20 6e61 6d65  n manifest. name
-0001c090: 3d7b 706c 7567 696e 6e61 6d65 7d2c 206d  ={pluginname}, m
-0001c0a0: 616e 6966 6573 743d 7b6d 616e 6966 6573  anifest={manifes
-0001c0b0: 7470 6174 687d 2229 0a20 2020 2020 2020  tpath}").       
-0001c0c0: 2020 2020 205f 7072 696e 745f 7769 7468       _print_with
-0001c0d0: 5f6c 696e 655f 6e75 6d62 6572 7328 6d61  _line_numbers(ma
-0001c0e0: 6e69 6665 7374 7374 7229 0a20 2020 2020  nifeststr).     
-0001c0f0: 2020 2020 2020 2072 6169 7365 2065 7272         raise err
-0001c100: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001c110: 706c 7567 696e 736f 7572 6365 2e72 6561  pluginsource.rea
-0001c120: 645f 6465 6669 6e69 7469 6f6e 2829 0a0a  d_definition()..
-0001c130: 2020 2020 6465 6620 696e 7374 616c 6c65      def installe
-0001c140: 645f 646c 6c73 2873 656c 6629 202d 3e20  d_dlls(self) -> 
-0001c150: 6469 6374 5b73 7472 2c20 7475 706c 655b  dict[str, tuple[
-0001c160: 5061 7468 2c20 626f 6f6c 5d5d 3a0a 2020  Path, bool]]:.  
-0001c170: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001c180: 2020 5265 7475 726e 7320 6120 6469 6374    Returns a dict
-0001c190: 206d 6170 7069 6e67 2064 6c6c 206e 616d   mapping dll nam
-0001c1a0: 6520 746f 2028 696e 7374 616c 6c65 645f  e to (installed_
-0001c1b0: 7061 7468 3a20 7374 722c 2075 7365 725f  path: str, user_
-0001c1c0: 696e 7374 616c 6c65 643a 2062 6f6f 6c29  installed: bool)
-0001c1d0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001c1e0: 2020 2020 2075 7365 725f 646c 6c73 203d       user_dlls =
-0001c1f0: 2075 7365 725f 696e 7374 616c 6c65 645f   user_installed_
-0001c200: 646c 6c73 2829 0a20 2020 2020 2020 2073  dlls().        s
-0001c210: 7973 7465 6d5f 646c 6c73 203d 2073 7973  ystem_dlls = sys
-0001c220: 7465 6d5f 696e 7374 616c 6c65 645f 646c  tem_installed_dl
-0001c230: 6c73 2829 0a20 2020 2020 2020 2064 6220  ls().        db 
-0001c240: 3d20 7b7d 0a20 2020 2020 2020 2066 6f72  = {}.        for
-0001c250: 2064 6c6c 2069 6e20 7573 6572 5f64 6c6c   dll in user_dll
-0001c260: 733a 0a20 2020 2020 2020 2020 2020 2064  s:.            d
-0001c270: 625b 646c 6c2e 6e61 6d65 5d20 3d20 2864  b[dll.name] = (d
-0001c280: 6c6c 2c20 5472 7565 290a 2020 2020 2020  ll, True).      
-0001c290: 2020 666f 7220 646c 6c20 696e 2073 7973    for dll in sys
-0001c2a0: 7465 6d5f 646c 6c73 3a0a 2020 2020 2020  tem_dlls:.      
-0001c2b0: 2020 2020 2020 6462 5b64 6c6c 2e6e 616d        db[dll.nam
-0001c2c0: 655d 203d 2028 646c 6c2c 2046 616c 7365  e] = (dll, False
-0001c2d0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0001c2e0: 2064 620a 0a20 2020 2064 6566 2069 6e73   db..    def ins
-0001c2f0: 7461 6c6c 6564 5f70 6174 685f 666f 725f  talled_path_for_
-0001c300: 646c 6c28 7365 6c66 2c20 6269 6e61 7279  dll(self, binary
-0001c310: 3a20 7374 7229 202d 3e20 7475 706c 655b  : str) -> tuple[
-0001c320: 4f70 7469 6f6e 616c 5b50 6174 685d 2c20  Optional[Path], 
-0001c330: 626f 6f6c 5d3a 0a20 2020 2020 2020 2022  bool]:.        "
-0001c340: 2222 0a20 2020 2020 2020 2047 6574 2074  "".        Get t
-0001c350: 6865 2069 6e73 7461 6c6c 6564 2070 6174  he installed pat
-0001c360: 6820 666f 7220 6120 6769 7665 6e20 706c  h for a given pl
-0001c370: 7567 696e 2062 696e 6172 790a 0a20 2020  ugin binary..   
-0001c380: 2020 2020 2052 6574 7572 6e73 2028 7061       Returns (pa
-0001c390: 7468 2074 6f20 646c 6c2c 2075 7365 725f  th to dll, user_
-0001c3a0: 696e 7374 616c 6c65 6429 2e20 4966 206e  installed). If n
-0001c3b0: 6f74 2069 6e73 7461 6c6c 6564 2072 6574  ot installed ret
-0001c3c0: 7572 6e73 2028 4e6f 6e65 2c20 4661 6c73  urns (None, Fals
-0001c3d0: 6529 2e20 4120 7573 6572 2069 6e73 7461  e). A user insta
-0001c3e0: 6c6c 6564 0a20 2020 2020 2020 2064 6c6c  lled.        dll
-0001c3f0: 2068 6173 2070 7269 6f72 6974 7920 6f76   has priority ov
-0001c400: 6572 2073 7973 7465 6d20 696e 7374 616c  er system instal
-0001c410: 6c65 640a 0a20 2020 2020 2020 2041 7267  led..        Arg
-0001c420: 733a 0a20 2020 2020 2020 2020 2020 2062  s:.            b
-0001c430: 696e 6172 793a 2074 6865 206e 616d 6520  inary: the name 
-0001c440: 6f66 2074 6865 2070 6c75 6769 6e20 6269  of the plugin bi
-0001c450: 6e61 7279 2c20 5749 5448 2065 7874 656e  nary, WITH exten
-0001c460: 7369 6f6e 2028 6c69 6266 6f6f 2e73 6f2c  sion (libfoo.so,
-0001c470: 206c 6962 666f 6f2e 646c 6c2c 2065 7463   libfoo.dll, etc
-0001c480: 290a 0a20 2020 2020 2020 2052 6574 7572  )..        Retur
-0001c490: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-0001c4a0: 4120 7475 706c 6520 2870 6174 6820 746f  A tuple (path to
-0001c4b0: 2074 6865 2061 6374 7561 6c20 6669 6c65   the actual file
-0001c4c0: 206f 7220 4e6f 6e65 2069 6620 6e6f 7420   or None if not 
-0001c4d0: 666f 756e 642c 2054 7275 6520 6966 2074  found, True if t
-0001c4e0: 6869 7320 6973 2069 6e73 6964 6520 7468  his is inside th
-0001c4f0: 6520 7573 6572 2070 6c75 6769 6e73 2070  e user plugins p
-0001c500: 6174 6829 0a20 2020 2020 2020 2022 2222  ath).        """
-0001c510: 0a20 2020 2020 2020 2064 6c6c 6462 203d  .        dlldb =
-0001c520: 2073 656c 662e 696e 7374 616c 6c65 645f   self.installed_
-0001c530: 646c 6c73 2829 0a20 2020 2020 2020 2069  dlls().        i
-0001c540: 6620 6269 6e61 7279 2069 6e20 646c 6c64  f binary in dlld
-0001c550: 623a 0a20 2020 2020 2020 2020 2020 2070  b:.            p
-0001c560: 6174 682c 2075 7365 7269 6e73 7461 6c6c  ath, userinstall
-0001c570: 6564 203d 2064 6c6c 6462 5b62 696e 6172  ed = dlldb[binar
-0001c580: 795d 0a20 2020 2020 2020 2020 2020 2072  y].            r
-0001c590: 6574 7572 6e20 7061 7468 2c20 7573 6572  eturn path, user
-0001c5a0: 696e 7374 616c 6c65 640a 2020 2020 2020  installed.      
-0001c5b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0001c5c0: 2020 2020 5f64 6562 7567 2866 2254 6865      _debug(f"The
-0001c5d0: 2062 696e 6172 7920 7b62 696e 6172 797d   binary {binary}
-0001c5e0: 2063 6f75 6c64 206e 6f74 2062 6520 666f   could not be fo
-0001c5f0: 756e 6420 696e 2074 6865 2069 6e73 7461  und in the insta
-0001c600: 6c6c 6564 2064 6c6c 732e 2049 6e73 7461  lled dlls. Insta
-0001c610: 6c6c 6564 2064 6c6c 733a 2229 0a20 2020  lled dlls:").   
-0001c620: 2020 2020 2020 2020 2069 6620 5f73 6573           if _ses
-0001c630: 7369 6f6e 2e64 6562 7567 3a0a 2020 2020  sion.debug:.    
-0001c640: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001c650: 646c 6c2c 2028 7061 7468 2c20 7573 6572  dll, (path, user
-0001c660: 696e 7374 616c 6c65 6429 2069 6e20 646c  installed) in dl
-0001c670: 6c64 622e 6974 656d 7328 293a 0a20 2020  ldb.items():.   
-0001c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c690: 2070 7269 6e74 2866 2220 2d20 7b64 6c6c   print(f" - {dll
-0001c6a0: 2e6c 6a75 7374 2832 3829 7d3a 207b 7061  .ljust(28)}: {pa
-0001c6b0: 7468 7d20 222c 2066 696c 653d 7379 732e  th} ", file=sys.
-0001c6c0: 7374 6465 7272 290a 2020 2020 2020 2020  stderr).        
-0001c6d0: 2020 2020 7265 7475 726e 204e 6f6e 652c      return None,
-0001c6e0: 2046 616c 7365 0a0a 2020 2020 6465 6620   False..    def 
-0001c6f0: 696e 7374 616c 6c65 645f 6d61 6e69 6665  installed_manife
-0001c700: 7374 735f 7061 7468 2873 656c 6629 202d  sts_path(self) -
-0001c710: 3e20 5061 7468 3a0a 2020 2020 2020 2020  > Path:.        
-0001c720: 2222 220a 2020 2020 2020 2020 5265 7475  """.        Retu
-0001c730: 726e 7320 7468 6520 7061 7468 2074 6f20  rns the path to 
-0001c740: 7765 7265 2069 6e73 7461 6c6c 6174 696f  were installatio
-0001c750: 6e20 6d61 6e69 6665 7374 7320 6172 6520  n manifests are 
-0001c760: 7361 7665 6420 696e 2074 6869 7320 7379  saved in this sy
-0001c770: 7374 656d 0a0a 2020 2020 2020 2020 4372  stem..        Cr
-0001c780: 6561 7465 7320 7468 6520 7061 7468 2069  eates the path i
-0001c790: 6620 6974 2064 6f65 736e 2774 2065 7869  f it doesn't exi
-0001c7a0: 7374 2061 6c72 6561 6479 0a20 2020 2020  st already.     
-0001c7b0: 2020 2022 2222 0a20 2020 2020 2020 2070     """.        p
-0001c7c0: 6174 6820 3d20 5249 5353 4554 5f52 4f4f  ath = RISSET_ROO
-0001c7d0: 5420 2f20 2269 6e73 7461 6c6c 6564 2d6d  T / "installed-m
-0001c7e0: 616e 6966 6573 7473 220a 2020 2020 2020  anifests".      
-0001c7f0: 2020 6966 206e 6f74 2070 6174 682e 6578    if not path.ex
-0001c800: 6973 7473 2829 3a0a 2020 2020 2020 2020  ists():.        
-0001c810: 2020 2020 7061 7468 2e6d 6b64 6972 2870      path.mkdir(p
-0001c820: 6172 656e 7473 3d54 7275 6529 0a20 2020  arents=True).   
-0001c830: 2020 2020 2072 6574 7572 6e20 7061 7468       return path
-0001c840: 0a0a 2020 2020 6465 6620 696e 7374 616c  ..    def instal
-0001c850: 6c65 645f 6d61 6e69 6665 7374 7328 7365  led_manifests(se
-0001c860: 6c66 2920 2d3e 206c 6973 745b 5061 7468  lf) -> list[Path
-0001c870: 5d3a 0a20 2020 2020 2020 2022 2222 0a20  ]:.        """. 
-0001c880: 2020 2020 2020 2052 6574 7572 6e20 6120         Return a 
-0001c890: 6c69 7374 206f 6620 616c 6c20 696e 7374  list of all inst
-0001c8a0: 616c 6c65 6420 6d61 6e69 6665 7374 730a  alled manifests.
-0001c8b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001c8c0: 2020 2020 7061 7468 203d 2073 656c 662e      path = self.
-0001c8d0: 696e 7374 616c 6c65 645f 6d61 6e69 6665  installed_manife
-0001c8e0: 7374 735f 7061 7468 2829 0a20 2020 2020  sts_path().     
-0001c8f0: 2020 206d 616e 6966 6573 7473 203d 206c     manifests = l
-0001c900: 6973 7428 7061 7468 2e67 6c6f 6228 222a  ist(path.glob("*
-0001c910: 2e6a 736f 6e22 2929 0a20 2020 2020 2020  .json")).       
-0001c920: 2072 6574 7572 6e20 6d61 6e69 6665 7374   return manifest
-0001c930: 730a 0a20 2020 2064 6566 205f 6973 5f70  s..    def _is_p
-0001c940: 6c75 6769 6e5f 7265 636f 676e 697a 6564  lugin_recognized
-0001c950: 5f62 795f 6373 6f75 6e64 2873 656c 662c  _by_csound(self,
-0001c960: 2070 6c75 6769 6e3a 2050 6c75 6769 6e2c   plugin: Plugin,
-0001c970: 206d 6574 686f 643d 2763 736f 756e 6427   method='csound'
-0001c980: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
-0001c990: 2020 2022 2222 0a20 2020 2020 2020 2043     """.        C
-0001c9a0: 6865 636b 2069 6620 6120 6769 7665 6e20  heck if a given 
-0001c9b0: 706c 7567 696e 2069 7320 696e 7374 616c  plugin is instal
-0001c9c0: 6c65 640a 0a20 2020 2020 2020 2054 6869  led..        Thi
-0001c9d0: 7320 726f 7574 696e 6520 7175 6572 6965  s routine querie
-0001c9e0: 7320 7468 6520 6176 6169 6c61 626c 6520  s the available 
-0001c9f0: 6f70 636f 6465 7320 696e 2063 736f 756e  opcodes in csoun
-0001ca00: 6420 616e 6420 6368 6563 6b73 0a20 2020  d and checks.   
-0001ca10: 2020 2020 2074 6861 7420 7468 6520 6f70       that the op
-0001ca20: 636f 6465 7320 696e 2070 6c75 6769 6e20  codes in plugin 
-0001ca30: 6172 6520 7072 6573 656e 740a 0a20 2020  are present..   
-0001ca40: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-0001ca50: 2020 2020 2020 2020 2020 5472 7565 2069            True i
-0001ca60: 6620 7468 6520 706c 7567 696e 2069 7320  f the plugin is 
-0001ca70: 7265 636f 676e 697a 6564 2062 7920 6373  recognized by cs
-0001ca80: 6f75 6e64 0a20 2020 2020 2020 2022 2222  ound.        """
-0001ca90: 0a20 2020 2020 2020 2074 6573 7420 3d20  .        test = 
-0001caa0: 706c 7567 696e 2e6f 7063 6f64 6573 5b30  plugin.opcodes[0
-0001cab0: 5d0a 2020 2020 2020 2020 6f70 636f 6465  ].        opcode
-0001cac0: 7320 3d20 5f63 736f 756e 645f 6f70 636f  s = _csound_opco
-0001cad0: 6465 7328 6d65 7468 6f64 3d6d 6574 686f  des(method=metho
-0001cae0: 6429 0a20 2020 2020 2020 2072 6574 7572  d).        retur
-0001caf0: 6e20 7465 7374 2069 6e20 6f70 636f 6465  n test in opcode
-0001cb00: 730a 0a20 2020 2064 6566 2070 6c75 6769  s..    def plugi
-0001cb10: 6e5f 696e 7374 616c 6c65 645f 7061 7468  n_installed_path
-0001cb20: 2873 656c 662c 2070 6c75 6769 6e3a 2050  (self, plugin: P
-0001cb30: 6c75 6769 6e29 202d 3e20 4f70 7469 6f6e  lugin) -> Option
-0001cb40: 616c 5b50 6174 685d 3a0a 2020 2020 2020  al[Path]:.      
-0001cb50: 2020 2222 220a 2020 2020 2020 2020 5265    """.        Re
-0001cb60: 7475 726e 7320 7468 6520 7061 7468 2074  turns the path t
-0001cb70: 6f20 7468 6520 706c 7567 696e 2773 2064  o the plugin's d
-0001cb80: 6c6c 0a0a 2020 2020 2020 2020 4966 2074  ll..        If t
-0001cb90: 6865 2070 6c75 6769 6e20 6973 206e 6f74  he plugin is not
-0001cba0: 2069 6e73 7461 6c6c 6564 206f 7220 7468   installed or th
-0001cbb0: 6520 6269 6e61 7279 2069 7320 6e6f 7420  e binary is not 
-0001cbc0: 666f 756e 640a 2020 2020 2020 2020 7265  found.        re
-0001cbd0: 7475 726e 7320 4e6f 6e65 0a20 2020 2020  turns None.     
-0001cbe0: 2020 2022 2222 0a20 2020 2020 2020 2062     """.        b
-0001cbf0: 696e 6172 7920 3d20 706c 7567 696e 2e66  inary = plugin.f
-0001cc00: 696e 645f 6269 6e61 7279 2829 0a20 2020  ind_binary().   
-0001cc10: 2020 2020 2069 6620 6e6f 7420 6269 6e61       if not bina
-0001cc20: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-0001cc30: 5f64 6562 7567 2866 224e 6f20 6269 6e61  _debug(f"No bina
-0001cc40: 7279 2066 6f75 6e64 2066 6f72 2070 6c75  ry found for plu
-0001cc50: 6769 6e20 7b70 6c75 6769 6e2e 6e61 6d65  gin {plugin.name
-0001cc60: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
-0001cc70: 7265 7475 726e 204e 6f6e 650a 0a20 2020  return None..   
-0001cc80: 2020 2020 2062 696e 6669 6c65 203d 2062       binfile = b
-0001cc90: 696e 6172 792e 6269 6e61 7279 5f66 696c  inary.binary_fil
-0001cca0: 656e 616d 6528 290a 2020 2020 2020 2020  ename().        
-0001ccb0: 646c 6c2c 2075 7365 725f 696e 7374 616c  dll, user_instal
-0001ccc0: 6c65 6420 3d20 7365 6c66 2e69 6e73 7461  led = self.insta
-0001ccd0: 6c6c 6564 5f70 6174 685f 666f 725f 646c  lled_path_for_dl
-0001cce0: 6c28 6269 6e66 696c 6529 0a20 2020 2020  l(binfile).     
-0001ccf0: 2020 2072 6574 7572 6e20 646c 6c0a 0a20     return dll.. 
-0001cd00: 2020 2064 6566 2069 735f 706c 7567 696e     def is_plugin
-0001cd10: 5f69 6e73 7461 6c6c 6564 2873 656c 662c  _installed(self,
-0001cd20: 2070 6c75 6769 6e3a 2050 6c75 6769 6e2c   plugin: Plugin,
-0001cd30: 2063 6865 636b 3d54 7275 652c 206d 6574   check=True, met
-0001cd40: 686f 643d 2763 736f 756e 6427 2920 2d3e  hod='csound') ->
-0001cd50: 2062 6f6f 6c3a 0a20 2020 2020 2020 2022   bool:.        "
-0001cd60: 2222 0a20 2020 2020 2020 2049 7320 7468  "".        Is th
-0001cd70: 6520 6769 7665 6e20 706c 7567 696e 2069  e given plugin i
-0001cd80: 6e73 7461 6c6c 6564 3f0a 0a20 2020 2020  nstalled?..     
-0001cd90: 2020 2049 7420 6368 6563 6b73 2074 6861     It checks tha
-0001cda0: 7420 7468 6520 6269 6e61 7279 2069 7320  t the binary is 
-0001cdb0: 696e 2063 736f 756e 6427 7320 7061 7468  in csound's path
-0001cdc0: 2e20 4966 2063 6865 636b 2069 7320 5472  . If check is Tr
-0001cdd0: 7565 2c20 6974 0a20 2020 2020 2020 2063  ue, it.        c
-0001cde0: 6865 636b 7320 7468 6174 2074 6865 206f  hecks that the o
-0001cdf0: 7063 6f64 6573 2064 6566 696e 6564 2069  pcodes defined i
-0001ce00: 6e20 7468 6520 706c 7567 696e 2061 7265  n the plugin are
-0001ce10: 2061 6374 7561 6c6c 7920 7072 6573 656e   actually presen
-0001ce20: 740a 0a20 2020 2020 2020 2041 7267 756d  t..        Argum
-0001ce30: 656e 7473 3a0a 2020 2020 2020 2020 2020  ents:.          
-0001ce40: 2020 706c 7567 696e 3a20 7468 6520 706c    plugin: the pl
-0001ce50: 7567 696e 2074 6f20 7175 6572 790a 2020  ugin to query.  
-0001ce60: 2020 2020 2020 2020 2020 6368 6563 6b3a            check:
-0001ce70: 2069 6620 5472 7565 2c20 7765 2063 6865   if True, we che
-0001ce80: 636b 2069 6620 7468 6520 6f70 636f 6465  ck if the opcode
-0001ce90: 7320 6465 636c 6172 6564 2069 6e20 7468  s declared in th
-0001cea0: 6520 706c 7567 696e 2064 6566 696e 6974  e plugin definit
-0001ceb0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-0001cec0: 2020 2020 6172 6520 6163 7475 616c 6c79      are actually
-0001ced0: 2061 7661 696c 6162 6c65 0a20 2020 2020   available.     
-0001cee0: 2020 2020 2020 206d 6574 686f 643a 206f         method: o
-0001cef0: 6e65 206f 6620 2763 736f 756e 6427 2028  ne of 'csound' (
-0001cf00: 6368 6563 6b20 7669 6120 7468 6520 6269  check via the bi
-0001cf10: 6e61 7279 292c 2027 6374 6373 6f75 6e64  nary), 'ctcsound
-0001cf20: 2720 2863 6865 636b 2076 6961 2074 6865  ' (check via the
-0001cf30: 2041 5049 290a 0a20 2020 2020 2020 2052   API)..        R
-0001cf40: 6574 7572 6e73 3a0a 2020 2020 2020 2020  eturns:.        
-0001cf50: 2020 2020 5472 7565 2069 6620 7468 6520      True if the 
-0001cf60: 706c 7567 696e 2069 7320 696e 7374 616c  plugin is instal
-0001cf70: 6c65 642e 2049 6620 6368 6563 6b2c 2077  led. If check, w
-0001cf80: 6520 616c 736f 2063 6865 636b 2074 6861  e also check tha
-0001cf90: 7420 7468 6520 706c 7567 696e 2069 7320  t the plugin is 
-0001cfa0: 6163 7475 616c 6c79 0a20 2020 2020 2020  actually.       
-0001cfb0: 2020 2020 206c 6f61 6465 6420 6279 2063       loaded by c
-0001cfc0: 736f 756e 640a 2020 2020 2020 2020 2222  sound.        ""
-0001cfd0: 220a 2020 2020 2020 2020 6269 6e61 7279  ".        binary
-0001cfe0: 203d 2070 6c75 6769 6e2e 6669 6e64 5f62   = plugin.find_b
-0001cff0: 696e 6172 7928 290a 2020 2020 2020 2020  inary().        
-0001d000: 6966 206e 6f74 2062 696e 6172 793a 0a20  if not binary:. 
-0001d010: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
-0001d020: 6728 6622 4e6f 206d 6174 6368 696e 6720  g(f"No matching 
-0001d030: 6269 6e61 7279 2066 6f72 2070 6c75 6769  binary for plugi
-0001d040: 6e20 7b70 6c75 6769 6e2e 6e61 6d65 7d22  n {plugin.name}"
-0001d050: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-0001d060: 7475 726e 2046 616c 7365 0a0a 2020 2020  turn False..    
-0001d070: 2020 2020 6269 6e66 696c 6520 3d20 6269      binfile = bi
-0001d080: 6e61 7279 2e62 696e 6172 795f 6669 6c65  nary.binary_file
-0001d090: 6e61 6d65 2829 0a20 2020 2020 2020 2069  name().        i
-0001d0a0: 6620 6e6f 7420 6269 6e66 696c 653a 0a20  f not binfile:. 
-0001d0b0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001d0c0: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-0001d0d0: 646c 6c2c 2075 7365 725f 696e 7374 616c  dll, user_instal
-0001d0e0: 6c65 6420 3d20 7365 6c66 2e69 6e73 7461  led = self.insta
-0001d0f0: 6c6c 6564 5f70 6174 685f 666f 725f 646c  lled_path_for_dl
-0001d100: 6c28 6269 6e66 696c 6529 0a20 2020 2020  l(binfile).     
-0001d110: 2020 2069 6620 646c 6c20 6973 204e 6f6e     if dll is Non
-0001d120: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-0001d130: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-0001d140: 2020 2020 7265 7475 726e 2054 7275 6520      return True 
-0001d150: 6966 206e 6f74 2063 6865 636b 2065 6c73  if not check els
-0001d160: 6520 7365 6c66 2e5f 6973 5f70 6c75 6769  e self._is_plugi
-0001d170: 6e5f 7265 636f 676e 697a 6564 5f62 795f  n_recognized_by_
-0001d180: 6373 6f75 6e64 2870 6c75 6769 6e2c 206d  csound(plugin, m
-0001d190: 6574 686f 643d 6d65 7468 6f64 290a 0a20  ethod=method).. 
-0001d1a0: 2020 2064 6566 2066 696e 645f 6d61 6e70     def find_manp
-0001d1b0: 6167 6528 7365 6c66 2c20 6f70 636f 6465  age(self, opcode
-0001d1c0: 3a20 7374 722c 206d 6172 6b64 6f77 6e3d  : str, markdown=
-0001d1d0: 5472 7565 2920 2d3e 204f 7074 696f 6e61  True) -> Optiona
-0001d1e0: 6c5b 5061 7468 5d3a 0a20 2020 2020 2020  l[Path]:.       
-0001d1f0: 2022 2222 0a20 2020 2020 2020 2046 696e   """.        Fin
-0001d200: 6420 7468 6520 6d61 6e20 7061 6765 2066  d the man page f
-0001d210: 6f72 2074 6865 2067 6976 656e 206f 7063  or the given opc
-0001d220: 6f64 650a 0a20 2020 2020 2020 2049 6620  ode..        If 
-0001d230: 6d61 726b 646f 776e 2069 7320 5472 7565  markdown is True
-0001d240: 2c20 7365 6172 6368 2066 6f72 2074 6865  , search for the
-0001d250: 202e 6d64 2066 696c 652c 206f 7468 6572   .md file, other
-0001d260: 7769 7365 2073 6561 7263 6820 7468 650a  wise search the.
-0001d270: 2020 2020 2020 2020 6874 6d6c 2064 6f63          html doc
-0001d280: 756d 656e 7461 7469 6f6e 0a0a 2020 2020  umentation..    
-0001d290: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-0001d2a0: 2020 2020 2020 6f70 636f 6465 3a20 7468        opcode: th
-0001d2b0: 6520 6e61 6d65 206f 6620 7468 6520 6f70  e name of the op
-0001d2c0: 636f 6465 0a20 2020 2020 2020 2020 2020  code.           
-0001d2d0: 206d 6172 6b64 6f77 6e3a 2069 6620 5472   markdown: if Tr
-0001d2e0: 7565 2c20 7265 7475 726e 2074 6865 206d  ue, return the m
-0001d2f0: 6172 6b64 6f77 6e20 6669 6c65 206f 6620  arkdown file of 
-0001d300: 7468 6520 6f70 636f 6465 2c20 6f74 6865  the opcode, othe
-0001d310: 7277 6973 650a 2020 2020 2020 2020 2020  rwise.          
-0001d320: 2020 2020 2020 7265 7475 726e 7320 7468        returns th
-0001d330: 6520 7061 7468 2074 6f20 7468 6520 2e68  e path to the .h
-0001d340: 746d 6c20 6669 6c65 2067 656e 6572 6174  tml file generat
-0001d350: 6564 2066 726f 6d20 6974 0a20 2020 2020  ed from it.     
-0001d360: 2020 2022 2222 0a20 2020 2020 2020 2069     """.        i
-0001d370: 6620 6e6f 7420 6d61 726b 646f 776e 3a0a  f not markdown:.
-0001d380: 2020 2020 2020 2020 2020 2020 646f 6366              docf
-0001d390: 6f6c 6465 7220 3d20 5061 7468 2852 4953  older = Path(RIS
-0001d3a0: 5345 545f 4745 4e45 5241 5445 445f 444f  SET_GENERATED_DO
-0001d3b0: 4353 290a 2020 2020 2020 2020 2020 2020  CS).            
-0001d3c0: 6966 206e 6f74 2064 6f63 666f 6c64 6572  if not docfolder
-0001d3d0: 2e65 7869 7374 7328 293a 0a20 2020 2020  .exists():.     
-0001d3e0: 2020 2020 2020 2020 2020 205f 6572 726f             _erro
-0001d3f0: 726d 7367 2822 446f 6375 6d65 6e74 6174  rmsg("Documentat
-0001d400: 696f 6e20 6e65 6564 7320 746f 2062 6520  ion needs to be 
-0001d410: 6765 6e65 7261 7465 6420 6669 7273 7420  generated first 
-0001d420: 2873 6565 2060 7269 7373 6574 206d 616b  (see `risset mak
-0001d430: 6564 6f63 7360 2922 290a 2020 2020 2020  edocs`)").      
-0001d440: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001d450: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0001d460: 2020 6874 6d6c 7061 6765 203d 2064 6f63    htmlpage = doc
-0001d470: 666f 6c64 6572 202f 2022 7369 7465 2220  folder / "site" 
-0001d480: 2f20 226f 7063 6f64 6573 2220 2f20 286f  / "opcodes" / (o
-0001d490: 7063 6f64 6520 2b20 222e 6874 6d6c 2229  pcode + ".html")
-0001d4a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001d4b0: 6e6f 7420 6874 6d6c 7061 6765 2e65 7869  not htmlpage.exi
-0001d4c0: 7374 7328 293a 0a20 2020 2020 2020 2020  sts():.         
-0001d4d0: 2020 2020 2020 205f 6572 726f 726d 7367         _errormsg
-0001d4e0: 2866 224e 6f20 6874 6d6c 2070 6167 6520  (f"No html page 
-0001d4f0: 666f 756e 642e 2050 6174 683a 207b 6874  found. Path: {ht
-0001d500: 6d6c 7061 6765 7d22 290a 2020 2020 2020  mlpage}").      
-0001d510: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001d520: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-0001d530: 2020 7265 7475 726e 2068 746d 6c70 6167    return htmlpag
-0001d540: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
-0001d550: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001d560: 706c 7567 696e 2069 6e20 7365 6c66 2e70  plugin in self.p
-0001d570: 6c75 6769 6e73 2e76 616c 7565 7328 293a  lugins.values():
-0001d580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d590: 2069 6620 6f70 636f 6465 2069 6e20 706c   if opcode in pl
-0001d5a0: 7567 696e 2e6f 7063 6f64 6573 3a0a 2020  ugin.opcodes:.  
-0001d5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d5c0: 2020 7265 7475 726e 2070 6c75 6769 6e2e    return plugin.
-0001d5d0: 6d61 6e70 6167 6528 6f70 636f 6465 290a  manpage(opcode).
-0001d5e0: 2020 2020 2020 2020 2020 2020 5f65 7272              _err
-0001d5f0: 6f72 6d73 6728 6622 4f70 636f 6465 207b  ormsg(f"Opcode {
-0001d600: 6f70 636f 6465 7d20 6e6f 7420 666f 756e  opcode} not foun
-0001d610: 6422 290a 2020 2020 2020 2020 2020 2020  d").            
-0001d620: 7265 7475 726e 204e 6f6e 650a 0a20 2020  return None..   
-0001d630: 2064 6566 2069 6e73 7461 6c6c 6564 5f70   def installed_p
-0001d640: 6c75 6769 6e5f 696e 666f 2873 656c 662c  lugin_info(self,
-0001d650: 2070 6c75 6769 6e3a 2050 6c75 6769 6e29   plugin: Plugin)
-0001d660: 202d 3e20 4f70 7469 6f6e 616c 5b49 6e73   -> Optional[Ins
-0001d670: 7461 6c6c 6564 506c 7567 696e 496e 666f  talledPluginInfo
-0001d680: 5d3a 0a20 2020 2020 2020 2022 2222 0a20  ]:.        """. 
-0001d690: 2020 2020 2020 2052 6574 7572 6e73 2061         Returns a
-0001d6a0: 6e20 496e 7374 616c 6c65 6450 6c75 6769  n InstalledPlugi
-0001d6b0: 6e49 6e66 6f20 6966 2066 6f75 6e64 2c20  nInfo if found, 
-0001d6c0: 4e6f 6e65 206f 7468 6572 7769 7365 0a20  None otherwise. 
-0001d6d0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0001d6e0: 2020 205f 6465 6275 6728 6622 4368 6563     _debug(f"Chec
-0001d6f0: 6b69 6e67 2069 6620 706c 7567 696e 207b  king if plugin {
-0001d700: 706c 7567 696e 2e6e 616d 657d 2069 7320  plugin.name} is 
-0001d710: 696e 7374 616c 6c65 6422 290a 2020 2020  installed").    
-0001d720: 2020 2020 6269 6e61 7279 203d 2070 6c75      binary = plu
-0001d730: 6769 6e2e 6669 6e64 5f62 696e 6172 7928  gin.find_binary(
-0001d740: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
-0001d750: 2062 696e 6172 793a 0a20 2020 2020 2020   binary:.       
-0001d760: 2020 2020 205f 6465 6275 6728 6622 506c       _debug(f"Pl
-0001d770: 7567 696e 207b 706c 7567 696e 2e6e 616d  ugin {plugin.nam
-0001d780: 657d 2068 6173 206e 6f20 6269 6e61 7279  e} has no binary
-0001d790: 2066 6f72 2074 6869 7320 706c 6174 666f   for this platfo
-0001d7a0: 726d 2061 6e64 2f6f 7220 6373 6f75 6e64  rm and/or csound
-0001d7b0: 2076 6572 7369 6f6e 220a 2020 2020 2020   version".      
-0001d7c0: 2020 2020 2020 2020 2020 2020 2066 222e               f".
-0001d7d0: 2042 696e 6172 6965 733a 207b 706c 7567   Binaries: {plug
-0001d7e0: 696e 2e62 696e 6172 6965 737d 2229 0a20  in.binaries}"). 
-0001d7f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001d800: 6e20 4e6f 6e65 0a20 2020 2020 2020 2062  n None.        b
-0001d810: 696e 6669 6c65 203d 2062 696e 6172 792e  infile = binary.
-0001d820: 6269 6e61 7279 5f66 696c 656e 616d 6528  binary_filename(
-0001d830: 290a 2020 2020 2020 2020 646c 6c2c 2075  ).        dll, u
-0001d840: 7365 725f 696e 7374 616c 6c65 6420 3d20  ser_installed = 
-0001d850: 7365 6c66 2e69 6e73 7461 6c6c 6564 5f70  self.installed_p
-0001d860: 6174 685f 666f 725f 646c 6c28 6269 6e66  ath_for_dll(binf
-0001d870: 696c 6529 0a20 2020 2020 2020 2069 6620  ile).        if 
-0001d880: 6e6f 7420 646c 6c3a 0a20 2020 2020 2020  not dll:.       
-0001d890: 2020 2020 2023 2070 6c75 6769 6e20 6973       # plugin is
-0001d8a0: 206e 6f74 2069 6e73 7461 6c6c 6564 0a20   not installed. 
-0001d8b0: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
-0001d8c0: 6728 6622 706c 7567 696e 207b 706c 7567  g(f"plugin {plug
-0001d8d0: 696e 2e6e 616d 657d 2069 7320 6e6f 7420  in.name} is not 
-0001d8e0: 696e 7374 616c 6c65 6420 7965 7422 290a  installed yet").
-0001d8f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001d900: 726e 204e 6f6e 650a 0a20 2020 2020 2020  rn None..       
-0001d910: 2069 6e73 7461 6c6c 6564 5f76 6572 7369   installed_versi
-0001d920: 6f6e 203d 2055 4e4b 4e4f 574e 5f56 4552  on = UNKNOWN_VER
-0001d930: 5349 4f4e 0a20 2020 2020 2020 2069 6e73  SION.        ins
-0001d940: 7461 6c6c 6564 5f6d 616e 6966 6573 745f  talled_manifest_
-0001d950: 7061 7468 203d 204e 6f6e 650a 0a20 2020  path = None..   
-0001d960: 2020 2020 2066 6f72 206d 616e 6966 6573       for manifes
-0001d970: 7420 696e 2073 656c 662e 696e 7374 616c  t in self.instal
-0001d980: 6c65 645f 6d61 6e69 6665 7374 7328 293a  led_manifests():
-0001d990: 0a20 2020 2020 2020 2020 2020 2070 6c75  .            plu
-0001d9a0: 6769 6e6b 6579 203d 206d 616e 6966 6573  ginkey = manifes
-0001d9b0: 742e 6e61 6d65 2e73 706c 6974 2822 2e22  t.name.split("."
-0001d9c0: 295b 305d 0a20 2020 2020 2020 2020 2020  )[0].           
-0001d9d0: 206e 616d 652c 2076 6572 7369 6f6e 203d   name, version =
-0001d9e0: 205f 7061 7273 655f 706c 7567 696e 6b65   _parse_pluginke
-0001d9f0: 7928 706c 7567 696e 6b65 7929 0a20 2020  y(pluginkey).   
-0001da00: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
-0001da10: 203d 3d20 706c 7567 696e 2e6e 616d 653a   == plugin.name:
-0001da20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001da30: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-0001da40: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-0001da50: 203d 205f 6c6f 6164 5f69 6e73 7461 6c6c   = _load_install
-0001da60: 6174 696f 6e5f 6d61 6e69 6665 7374 286d  ation_manifest(m
-0001da70: 616e 6966 6573 7429 0a20 2020 2020 2020  anifest).       
-0001da80: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-0001da90: 4578 6365 7074 696f 6e20 6173 2065 3a0a  Exception as e:.
-0001daa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dab0: 2020 2020 5f65 7272 6f72 6d73 6728 6622      _errormsg(f"
-0001dac0: 436f 756c 6420 6e6f 7420 6c6f 6164 2069  Could not load i
-0001dad0: 6e73 7461 6c6c 6174 696f 6e20 6d61 6e69  nstallation mani
-0001dae0: 6665 7374 2066 6f72 2070 6c75 6769 6e20  fest for plugin 
-0001daf0: 7b70 6c75 6769 6e2e 6e61 6d65 7d2c 2073  {plugin.name}, s
-0001db00: 6b69 7070 696e 6722 290a 2020 2020 2020  kipping").      
-0001db10: 2020 2020 2020 2020 2020 2020 2020 636f                co
-0001db20: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
-0001db30: 2020 2020 2020 2069 6e73 7461 6c6c 6564         installed
-0001db40: 5f76 6572 7369 6f6e 203d 2072 6573 756c  _version = resul
-0001db50: 745b 2776 6572 7369 6f6e 275d 0a20 2020  t['version'].   
-0001db60: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
-0001db70: 7461 6c6c 6564 5f6d 616e 6966 6573 745f  talled_manifest_
-0001db80: 7061 7468 203d 206d 616e 6966 6573 740a  path = manifest.
-0001db90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dba0: 6272 6561 6b0a 0a20 2020 2020 2020 206f  break..        o
-0001dbb0: 7574 203d 2049 6e73 7461 6c6c 6564 506c  ut = InstalledPl
-0001dbc0: 7567 696e 496e 666f 280a 2020 2020 2020  uginInfo(.      
-0001dbd0: 2020 2020 2020 6e61 6d65 3d70 6c75 6769        name=plugi
-0001dbe0: 6e2e 6e61 6d65 2c0a 2020 2020 2020 2020  n.name,.        
-0001dbf0: 2020 2020 646c 6c70 6174 683d 646c 6c2c      dllpath=dll,
-0001dc00: 0a20 2020 2020 2020 2020 2020 2076 6572  .            ver
-0001dc10: 7369 6f6e 7374 723d 696e 7374 616c 6c65  sionstr=installe
-0001dc20: 645f 7665 7273 696f 6e2c 0a20 2020 2020  d_version,.     
-0001dc30: 2020 2020 2020 2069 6e73 7461 6c6c 6564         installed
-0001dc40: 5f69 6e5f 7379 7374 656d 5f66 6f6c 6465  _in_system_folde
-0001dc50: 723d 7374 7228 646c 6c2e 7061 7265 6e74  r=str(dll.parent
-0001dc60: 2920 3d3d 2073 7472 2873 7973 7465 6d5f  ) == str(system_
-0001dc70: 706c 7567 696e 735f 7061 7468 2829 292c  plugins_path()),
-0001dc80: 0a20 2020 2020 2020 2020 2020 2069 6e73  .            ins
-0001dc90: 7461 6c6c 6564 5f6d 616e 6966 6573 745f  talled_manifest_
-0001dca0: 7061 7468 3d69 6e73 7461 6c6c 6564 5f6d  path=installed_m
-0001dcb0: 616e 6966 6573 745f 7061 7468 0a20 2020  anifest_path.   
-0001dcc0: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
-0001dcd0: 6574 7572 6e20 6f75 740a 0a20 2020 2064  eturn out..    d
-0001dce0: 6566 2067 6574 5f70 6c75 6769 6e5f 646c  ef get_plugin_dl
-0001dcf0: 6c28 7365 6c66 2c20 706c 7567 696e 3a20  l(self, plugin: 
-0001dd00: 506c 7567 696e 2c20 706c 6174 666f 726d  Plugin, platform
-0001dd10: 6964 3a20 7374 7220 3d20 2727 2c20 6373  id: str = '', cs
-0001dd20: 6f75 6e64 5f76 6572 7369 6f6e 3a20 696e  ound_version: in
-0001dd30: 7420 3d20 3029 202d 3e20 5061 7468 3a0a  t = 0) -> Path:.
-0001dd40: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001dd50: 2020 2020 5265 7475 726e 7320 7468 6520      Returns the 
-0001dd60: 7061 7468 2074 6f20 7468 6520 6269 6e61  path to the bina
-0001dd70: 7279 2061 7320 6465 6669 6e65 6420 696e  ry as defined in
-0001dd80: 2074 6865 206d 616e 6966 6573 740a 0a20   the manifest.. 
-0001dd90: 2020 2020 2020 2049 6620 6e65 6564 6564         If needed
-0001dda0: 2c20 646f 776e 6c6f 6164 7320 7468 6520  , downloads the 
-0001ddb0: 6669 6c65 2070 6f69 6e74 6564 2062 7920  file pointed by 
-0001ddc0: 6120 7572 6c20 616e 6420 6578 7472 6163  a url and extrac
-0001ddd0: 7473 2069 7420 6966 2063 6f6d 7072 6573  ts it if compres
-0001dde0: 7365 642c 0a20 2020 2020 2020 2074 6f20  sed,.        to 
-0001ddf0: 6120 7465 6d70 6f72 6172 7920 6c6f 6361  a temporary loca
-0001de00: 7469 6f6e 2e20 4966 2074 6865 2070 6c75  tion. If the plu
-0001de10: 6769 6e20 696e 636c 7564 6573 2074 6865  gin includes the
-0001de20: 2062 696e 6172 7920 7769 7468 696e 2069   binary within i
-0001de30: 7473 2072 6570 6f73 6974 6f72 790a 2020  ts repository.  
-0001de40: 2020 2020 2020 7468 656e 2074 6865 206c        then the l
-0001de50: 6f63 616c 2070 6174 6820 6f66 2074 6865  ocal path of the
-0001de60: 2063 6c6f 6e65 6420 7265 706f 7369 746f   cloned reposito
-0001de70: 7279 2069 7320 7265 7475 726e 6564 0a0a  ry is returned..
-0001de80: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-0001de90: 2020 2020 2020 2020 2020 706c 7567 696e            plugin
-0001dea0: 3a20 7468 6520 706c 7567 696e 2077 6869  : the plugin whi
-0001deb0: 6368 2064 6566 696e 6573 2077 6869 6368  ch defines which
-0001dec0: 2062 696e 6172 7920 746f 2067 6574 0a20   binary to get. 
-0001ded0: 2020 2020 2020 2020 2020 2070 6c61 7466             platf
-0001dee0: 6f72 6d69 643a 2074 6865 2070 6c61 7466  ormid: the platf
-0001def0: 6f72 6d20 666f 7220 7768 6963 6820 746f  orm for which to
-0001df00: 2067 6574 2074 6865 2062 696e 6172 792e   get the binary.
-0001df10: 2049 6620 6e6f 7420 6769 7665 6e2c 2075   If not given, u
-0001df20: 7365 2074 6865 0a20 2020 2020 2020 2020  se the.         
-0001df30: 2020 2020 2020 2063 7572 7265 6e74 2070         current p
-0001df40: 6c61 7466 6f72 6d2e 2054 6869 7320 6172  latform. This ar
-0001df50: 6775 6d65 6e74 2069 7320 7072 6f76 6964  gument is provid
-0001df60: 6564 2074 6f20 7465 7374 2074 6865 2064  ed to test the d
-0001df70: 6f77 6e6c 6f61 6469 6e67 2061 6e64 0a20  ownloading and. 
-0001df80: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001df90: 7874 7261 6374 696e 6720 6d65 7468 6f64  xtracting method
-0001dfa0: 7320 6c6f 6361 6c6c 792e 0a0a 2020 2020  s locally...    
-0001dfb0: 2020 2020 5265 7475 726e 733a 0a20 2020      Returns:.   
-0001dfc0: 2020 2020 2020 2020 2074 6865 2070 6174           the pat
-0001dfd0: 6820 6f66 2074 6865 2062 696e 6172 792e  h of the binary.
-0001dfe0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001dff0: 2020 2020 2061 7373 6572 7420 6973 696e       assert isin
-0001e000: 7374 616e 6365 2870 6c75 6769 6e2c 2050  stance(plugin, P
-0001e010: 6c75 6769 6e29 0a20 2020 2020 2020 2069  lugin).        i
-0001e020: 6620 6e6f 7420 706c 6174 666f 726d 6964  f not platformid
-0001e030: 3a0a 2020 2020 2020 2020 2020 2020 706c  :.            pl
-0001e040: 6174 666f 726d 6964 203d 205f 7365 7373  atformid = _sess
-0001e050: 696f 6e2e 706c 6174 666f 726d 6964 0a20  ion.platformid. 
-0001e060: 2020 2020 2020 2069 6620 6e6f 7420 6373         if not cs
-0001e070: 6f75 6e64 5f76 6572 7369 6f6e 3a0a 2020  ound_version:.  
-0001e080: 2020 2020 2020 2020 2020 6373 6f75 6e64            csound
-0001e090: 5f76 6572 7369 6f6e 203d 205f 7365 7373  _version = _sess
-0001e0a0: 696f 6e2e 6373 6f75 6e64 5f76 6572 7369  ion.csound_versi
-0001e0b0: 6f6e 0a20 2020 2020 2020 2062 696e 6465  on.        binde
-0001e0c0: 6620 3d20 706c 7567 696e 2e66 696e 645f  f = plugin.find_
-0001e0d0: 6269 6e61 7279 2870 6c61 7466 6f72 6d69  binary(platformi
-0001e0e0: 643d 706c 6174 666f 726d 6964 2c20 6373  d=platformid, cs
-0001e0f0: 6f75 6e64 5f76 6572 7369 6f6e 3d63 736f  ound_version=cso
-0001e100: 756e 645f 7665 7273 696f 6e29 0a20 2020  und_version).   
-0001e110: 2020 2020 2069 6620 6e6f 7420 6269 6e64       if not bind
-0001e120: 6566 3a0a 2020 2020 2020 2020 2020 2020  ef:.            
-0001e130: 6176 6169 6c61 626c 6520 3d20 222c 2022  available = ", "
-0001e140: 2e6a 6f69 6e28 706c 7567 696e 2e61 7661  .join(plugin.ava
-0001e150: 696c 6162 6c65 5f62 696e 6172 6965 7328  ilable_binaries(
-0001e160: 2929 0a20 2020 2020 2020 2020 2020 2072  )).            r
-0001e170: 6169 7365 2050 6c61 7466 6f72 6d4e 6f74  aise PlatformNot
-0001e180: 5375 7070 6f72 7465 6445 7272 6f72 280a  SupportedError(.
-0001e190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e1a0: 6622 4e6f 2062 696e 6172 7920 6465 6669  f"No binary defi
-0001e1b0: 6e65 6420 666f 7220 706c 6174 666f 726d  ned for platform
-0001e1c0: 207b 706c 6174 666f 726d 6964 7d20 2f20   {platformid} / 
-0001e1d0: 7b63 736f 756e 645f 7665 7273 696f 6e7d  {csound_version}
-0001e1e0: 2e22 0a20 2020 2020 2020 2020 2020 2020  .".             
-0001e1f0: 2020 2066 2220 4176 6169 6c61 626c 6520     f" Available 
-0001e200: 706c 6174 666f 726d 7320 666f 7220 7b70  platforms for {p
-0001e210: 6c75 6769 6e2e 6e61 6d65 7d3a 207b 6176  lugin.name}: {av
-0001e220: 6169 6c61 626c 657d 2229 0a20 2020 2020  ailable}").     
-0001e230: 2020 2023 2054 6865 2062 696e 6172 7920     # The binary 
-0001e240: 6465 6669 6e65 7320 6120 7572 6c20 2f20  defines a url / 
-0001e250: 7061 7468 2075 6e64 6572 2074 6865 2022  path under the "
-0001e260: 7572 6c22 206b 6579 2e20 426f 7468 2063  url" key. Both c
-0001e270: 616e 2062 6520 610a 2020 2020 2020 2020  an be a.        
-0001e280: 2320 6269 6e61 7279 2028 6120 2e73 6f2c  # binary (a .so,
-0001e290: 202e 646c 6c2c 202e 6479 6c69 6220 6669   .dll, .dylib fi
-0001e2a0: 6c65 2920 6f72 2061 202e 7a69 7020 6669  le) or a .zip fi
-0001e2b0: 6c65 2e20 496e 2074 6869 7320 6c61 7474  le. In this latt
-0001e2c0: 6572 2063 6173 652c 0a20 2020 2020 2020  er case,.       
-0001e2d0: 2023 2074 6865 206b 6579 2022 6578 7472   # the key "extr
-0001e2e0: 6163 7470 6174 6822 206e 6565 6473 2074  actpath" needs t
-0001e2f0: 6f20 6265 2064 6566 696e 6564 2c20 696e  o be defined, in
-0001e300: 2077 6869 6368 2063 6173 6520 6974 2070   which case it p
-0001e310: 6f69 6e74 7320 746f 0a20 2020 2020 2020  oints to.       
-0001e320: 2023 2074 6865 2072 656c 6174 6976 6520   # the relative 
-0001e330: 7061 7468 2074 6f20 7468 6520 6269 6e61  path to the bina
-0001e340: 7279 2069 6e73 6964 6520 7468 6520 636f  ry inside the co
-0001e350: 6d70 7265 7373 6564 2066 696c 650a 0a20  mpressed file.. 
-0001e360: 2020 2020 2020 2023 2054 6865 206d 616e         # The man
-0001e370: 6966 6573 7420 6465 6669 6e65 7320 6120  ifest defines a 
-0001e380: 7061 7468 2e20 4966 2069 7420 6973 2072  path. If it is r
-0001e390: 656c 6174 6976 652c 2069 7420 6973 2072  elative, it is r
-0001e3a0: 656c 6174 6976 6520 746f 2074 6865 0a20  elative to the. 
-0001e3b0: 2020 2020 2020 2023 206d 616e 6966 6573         # manifes
-0001e3c0: 7420 6974 7365 6c66 2e0a 2020 2020 2020  t itself..      
-0001e3d0: 2020 6966 205f 6973 5f75 726c 2862 696e    if _is_url(bin
-0001e3e0: 6465 662e 7572 6c29 3a0a 2020 2020 2020  def.url):.      
-0001e3f0: 2020 2020 2020 7061 7468 203d 205f 646f        path = _do
-0001e400: 776e 6c6f 6164 5f66 696c 6528 6269 6e64  wnload_file(bind
-0001e410: 6566 2e75 726c 290a 2020 2020 2020 2020  ef.url).        
-0001e420: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001e430: 2020 2320 7572 6c20 706f 696e 7473 2074    # url points t
-0001e440: 6f20 6120 6c6f 6361 6c20 6669 6c65 2c20  o a local file, 
-0001e450: 7265 6c61 7469 7665 2074 6f20 7468 6520  relative to the 
-0001e460: 6d61 6e69 6665 7374 0a20 2020 2020 2020  manifest.       
-0001e470: 2020 2020 206d 616e 6966 6573 7470 6174       manifestpat
-0001e480: 6820 3d20 706c 7567 696e 2e6c 6f63 616c  h = plugin.local
-0001e490: 5f6d 616e 6966 6573 745f 7061 7468 2829  _manifest_path()
-0001e4a0: 0a20 2020 2020 2020 2020 2020 2070 6174  .            pat
-0001e4b0: 6820 3d20 5f72 6573 6f6c 7665 5f70 6174  h = _resolve_pat
-0001e4c0: 6828 6269 6e64 6566 2e75 726c 2c20 206d  h(bindef.url,  m
-0001e4d0: 616e 6966 6573 7470 6174 682e 7061 7265  anifestpath.pare
-0001e4e0: 6e74 290a 2020 2020 2020 2020 5f64 6562  nt).        _deb
-0001e4f0: 7567 2866 2267 6574 5f70 6c75 6769 6e5f  ug(f"get_plugin_
-0001e500: 646c 6c3a 2072 6573 6f6c 7665 6420 7061  dll: resolved pa
-0001e510: 7468 203d 207b 7374 7228 7061 7468 297d  th = {str(path)}
-0001e520: 2229 0a20 2020 2020 2020 2069 6620 6e6f  ").        if no
-0001e530: 7420 7061 7468 2e65 7869 7374 7328 293a  t path.exists():
-0001e540: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0001e550: 7365 2049 4f45 7272 6f72 2866 2242 696e  se IOError(f"Bin
-0001e560: 6172 7920 6e6f 7420 666f 756e 642e 2047  ary not found. G
-0001e570: 6976 656e 2070 6174 6820 7761 733a 207b  iven path was: {
-0001e580: 7374 7228 7061 7468 297d 2229 0a0a 2020  str(path)}")..  
-0001e590: 2020 2020 2020 6966 2070 6174 682e 7375        if path.su
-0001e5a0: 6666 6978 2069 6e20 2827 2e73 6f27 2c20  ffix in ('.so', 
-0001e5b0: 272e 646c 6c27 2c20 272e 6479 6c69 6227  '.dll', '.dylib'
-0001e5c0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-0001e5d0: 6574 7572 6e20 7061 7468 0a20 2020 2020  eturn path.     
-0001e5e0: 2020 2065 6c69 6620 7061 7468 2e73 7566     elif path.suf
-0001e5f0: 6669 7820 3d3d 2027 2e7a 6970 273a 0a20  fix == '.zip':. 
-0001e600: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-0001e610: 7420 6269 6e64 6566 2e65 7874 7261 6374  t bindef.extract
-0001e620: 7061 7468 3a0a 2020 2020 2020 2020 2020  path:.          
-0001e630: 2020 2020 2020 7261 6973 6520 5363 6865        raise Sche
-0001e640: 6d61 4572 726f 7228 0a20 2020 2020 2020  maError(.       
-0001e650: 2020 2020 2020 2020 2020 2020 2066 2254               f"T
-0001e660: 6865 2062 696e 6172 7920 6465 6669 6e69  he binary defini
-0001e670: 7469 6f6e 2066 6f72 207b 706c 7567 696e  tion for {plugin
-0001e680: 2e6e 616d 657d 2068 6173 2061 2063 6f6d  .name} has a com
-0001e690: 7072 6573 7365 6420 7572 6c20 7b62 696e  pressed url {bin
-0001e6a0: 6465 662e 7572 6c7d 220a 2020 2020 2020  def.url}".      
-0001e6b0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-0001e6c0: 2062 7574 2064 6f65 7320 6e6f 7420 6465   but does not de
-0001e6d0: 6669 6e65 2061 6e20 6065 7874 7261 6374  fine an `extract
-0001e6e0: 7061 7468 6020 6174 7472 6962 7574 6520  path` attribute 
-0001e6f0: 746f 206c 6f63 6174 6520 7468 6520 220a  to locate the ".
-0001e700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e710: 2020 2020 6622 6269 6e61 7279 2077 6974      f"binary wit
-0001e720: 6869 6e20 7468 6520 636f 6d70 7265 7373  hin the compress
-0001e730: 6564 2066 696c 6522 290a 2020 2020 2020  ed file").      
-0001e740: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-0001e750: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001e760: 6e20 5f7a 6970 5f65 7874 7261 6374 5f66  n _zip_extract_f
-0001e770: 696c 6528 7061 7468 2c20 6269 6e64 6566  ile(path, bindef
-0001e780: 2e65 7874 7261 6374 7061 7468 290a 2020  .extractpath).  
-0001e790: 2020 2020 2020 2020 2020 6578 6365 7074            except
-0001e7a0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
-0001e7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e7c0: 2072 6169 7365 2052 756e 7469 6d65 4572   raise RuntimeEr
-0001e7d0: 726f 7228 6622 4572 726f 7220 7768 696c  ror(f"Error whil
-0001e7e0: 6520 6578 7472 6163 7469 6e67 207b 6269  e extracting {bi
-0001e7f0: 6e64 6566 2e65 7874 7261 6374 7061 7468  ndef.extractpath
-0001e800: 7d20 6672 6f6d 207a 6970 207b 7374 7228  } from zip {str(
-0001e810: 7061 7468 297d 3a20 7b65 7d22 290a 2020  path)}: {e}").  
-0001e820: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0001e830: 2020 2020 2020 2020 7261 6973 6520 5363          raise Sc
-0001e840: 6865 6d61 4572 726f 7228 6622 5375 6666  hemaError(f"Suff
-0001e850: 6978 207b 7061 7468 2e73 7566 6669 787d  ix {path.suffix}
-0001e860: 206e 6f74 2073 7570 706f 7274 6564 2069   not supported i
-0001e870: 6e20 7572 6c3a 207b 6269 6e64 6566 2e75  n url: {bindef.u
-0001e880: 726c 7d22 290a 0a20 2020 2064 6566 206f  rl}")..    def o
-0001e890: 7063 6f64 6573 5f62 795f 6e61 6d65 2873  pcodes_by_name(s
-0001e8a0: 656c 6629 202d 3e20 6469 6374 5b73 7472  elf) -> dict[str
-0001e8b0: 2c20 4f70 636f 6465 5d3a 0a20 2020 2020  , Opcode]:.     
-0001e8c0: 2020 2022 2222 0a20 2020 2020 2020 2052     """.        R
-0001e8d0: 6574 7572 6e73 2061 2064 6963 7420 6d61  eturns a dict ma
-0001e8e0: 7070 696e 6720 6f70 636f 6465 6e61 6d65  pping opcodename
-0001e8f0: 2074 6f20 616e 204f 7063 6f64 6520 6465   to an Opcode de
-0001e900: 6669 6e69 7469 6f6e 0a20 2020 2020 2020  finition.       
-0001e910: 2022 2222 0a20 2020 2020 2020 206f 7574   """.        out
-0001e920: 203d 2073 656c 662e 5f63 6163 6865 2e67   = self._cache.g
-0001e930: 6574 2827 6f70 636f 6465 735f 6279 5f6e  et('opcodes_by_n
-0001e940: 616d 6527 290a 2020 2020 2020 2020 6966  ame').        if
-0001e950: 206f 7574 3a0a 2020 2020 2020 2020 2020   out:.          
-0001e960: 2020 7265 7475 726e 206f 7574 0a20 2020    return out.   
-0001e970: 2020 2020 206f 7574 203d 207b 6f70 636f       out = {opco
-0001e980: 6465 2e6e 616d 653a 206f 7063 6f64 650a  de.name: opcode.
-0001e990: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001e9a0: 6f72 206f 7063 6f64 6520 696e 2073 656c  or opcode in sel
-0001e9b0: 662e 6465 6669 6e65 645f 6f70 636f 6465  f.defined_opcode
-0001e9c0: 7328 297d 0a20 2020 2020 2020 2073 656c  s()}.        sel
-0001e9d0: 662e 5f63 6163 6865 5b27 6f70 636f 6465  f._cache['opcode
-0001e9e0: 735f 6279 5f6e 616d 6527 5d20 3d20 6f75  s_by_name'] = ou
-0001e9f0: 740a 2020 2020 2020 2020 7265 7475 726e  t.        return
-0001ea00: 206f 7574 0a0a 2020 2020 6465 6620 7061   out..    def pa
-0001ea10: 7273 655f 6d61 6e70 6167 6528 7365 6c66  rse_manpage(self
-0001ea20: 2c20 6f70 636f 6465 3a20 7374 7229 202d  , opcode: str) -
-0001ea30: 3e20 4f70 7469 6f6e 616c 5b4d 616e 5061  > Optional[ManPa
-0001ea40: 6765 5d3a 0a20 2020 2020 2020 2022 2222  ge]:.        """
-0001ea50: 0a20 2020 2020 2020 2050 6172 7365 2074  .        Parse t
-0001ea60: 6865 206d 616e 7561 6c20 7061 6765 2066  he manual page f
-0001ea70: 6f72 2061 2067 6976 656e 206f 7063 6f64  or a given opcod
-0001ea80: 650a 0a20 2020 2020 2020 2041 7267 733a  e..        Args:
-0001ea90: 0a20 2020 2020 2020 2020 2020 206f 7063  .            opc
-0001eaa0: 6f64 653a 206f 7063 6f64 6520 6e61 6d65  ode: opcode name
-0001eab0: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-0001eac0: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
-0001ead0: 204d 616e 5061 6765 2c20 6966 2061 206d   ManPage, if a m
-0001eae0: 616e 7061 6765 2077 6173 2066 6f75 6e64  anpage was found
-0001eaf0: 2066 6f72 2074 6865 206f 7063 6f64 652c   for the opcode,
-0001eb00: 206f 7220 4e6f 6e65 0a20 2020 2020 2020   or None.       
-0001eb10: 2022 2222 0a20 2020 2020 2020 206d 616e   """.        man
-0001eb20: 7061 6765 203d 2073 656c 662e 6669 6e64  page = self.find
-0001eb30: 5f6d 616e 7061 6765 286f 7063 6f64 652c  _manpage(opcode,
-0001eb40: 206d 6172 6b64 6f77 6e3d 5472 7565 290a   markdown=True).
-0001eb50: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-0001eb60: 6d61 6e70 6167 655f 7061 7273 6528 6d61  manpage_parse(ma
-0001eb70: 6e70 6167 652c 206f 7063 6f64 6529 2069  npage, opcode) i
-0001eb80: 6620 6d61 6e70 6167 6520 656c 7365 204e  f manpage else N
-0001eb90: 6f6e 650a 0a20 2020 2064 6566 2064 6566  one..    def def
-0001eba0: 696e 6564 5f6f 7063 6f64 6573 2873 656c  ined_opcodes(sel
-0001ebb0: 6629 202d 3e20 6c69 7374 5b4f 7063 6f64  f) -> list[Opcod
-0001ebc0: 655d 3a0a 2020 2020 2020 2020 2222 220a  e]:.        """.
-0001ebd0: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
-0001ebe0: 6120 6c69 7374 206f 6620 6f70 636f 6465  a list of opcode
-0001ebf0: 730a 2020 2020 2020 2020 2222 220a 2020  s.        """.  
-0001ec00: 2020 2020 2020 6361 6368 6564 203d 2073        cached = s
-0001ec10: 656c 662e 5f63 6163 6865 2e67 6574 2827  elf._cache.get('
-0001ec20: 6465 6669 6e65 645f 6f70 636f 6465 7327  defined_opcodes'
-0001ec30: 290a 2020 2020 2020 2020 6966 2063 6163  ).        if cac
-0001ec40: 6865 643a 0a20 2020 2020 2020 2020 2020  hed:.           
-0001ec50: 2072 6574 7572 6e20 6361 6368 6564 0a20   return cached. 
-0001ec60: 2020 2020 2020 206f 7063 6f64 6573 203d         opcodes =
-0001ec70: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
-0001ec80: 706c 7567 696e 2069 6e20 7365 6c66 2e70  plugin in self.p
-0001ec90: 6c75 6769 6e73 2e76 616c 7565 7328 293a  lugins.values():
-0001eca0: 0a20 2020 2020 2020 2020 2020 2070 6c75  .            plu
-0001ecb0: 6769 6e73 7461 6c6c 6564 203d 2073 656c  ginstalled = sel
-0001ecc0: 662e 6973 5f70 6c75 6769 6e5f 696e 7374  f.is_plugin_inst
-0001ecd0: 616c 6c65 6428 706c 7567 696e 2c20 6368  alled(plugin, ch
-0001ece0: 6563 6b3d 4661 6c73 6529 0a20 2020 2020  eck=False).     
-0001ecf0: 2020 2020 2020 2066 6f72 206f 7063 6f64         for opcod
-0001ed00: 656e 616d 6520 696e 2070 6c75 6769 6e2e  ename in plugin.
-0001ed10: 6f70 636f 6465 733a 0a20 2020 2020 2020  opcodes:.       
-0001ed20: 2020 2020 2020 2020 206d 616e 7061 6765           manpage
-0001ed30: 203d 2073 656c 662e 7061 7273 655f 6d61   = self.parse_ma
-0001ed40: 6e70 6167 6528 6f70 636f 6465 6e61 6d65  npage(opcodename
-0001ed50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001ed60: 2020 6966 206e 6f74 206d 616e 7061 6765    if not manpage
-0001ed70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001ed80: 2020 2020 2020 5f65 7272 6f72 6d73 6728        _errormsg(
-0001ed90: 6622 4e6f 206d 616e 7061 6765 2066 6f72  f"No manpage for
-0001eda0: 206f 7063 6f64 6520 7b6f 7063 6f64 656e   opcode {opcoden
-0001edb0: 616d 657d 2122 290a 2020 2020 2020 2020  ame}!").        
-0001edc0: 2020 2020 2020 2020 6f70 636f 6465 732e          opcodes.
-0001edd0: 6170 7065 6e64 284f 7063 6f64 6528 6e61  append(Opcode(na
-0001ede0: 6d65 3d6f 7063 6f64 656e 616d 652c 2070  me=opcodename, p
-0001edf0: 6c75 6769 6e3d 706c 7567 696e 2e6e 616d  lugin=plugin.nam
-0001ee00: 652c 2069 6e73 7461 6c6c 6564 3d70 6c75  e, installed=plu
-0001ee10: 6769 6e73 7461 6c6c 6564 2c0a 2020 2020  ginstalled,.    
-0001ee20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ee40: 2020 6162 7374 7261 6374 3d6d 616e 7061    abstract=manpa
-0001ee50: 6765 2e61 6273 7472 6163 7420 6966 206d  ge.abstract if m
-0001ee60: 616e 7061 6765 2065 6c73 6520 273f 272c  anpage else '?',
-0001ee70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ee80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ee90: 2020 2020 2020 2073 796e 7461 7865 733d         syntaxes=
-0001eea0: 6d61 6e70 6167 652e 7379 6e74 6178 6573  manpage.syntaxes
-0001eeb0: 2069 6620 6d61 6e70 6167 6520 656c 7365   if manpage else
-0001eec0: 205b 5d29 290a 2020 2020 2020 2020 6f70   [])).        op
-0001eed0: 636f 6465 732e 736f 7274 286b 6579 3d6c  codes.sort(key=l
-0001eee0: 616d 6264 6120 6f70 633a 206f 7063 2e6e  ambda opc: opc.n
-0001eef0: 616d 652e 6c6f 7765 7228 2929 0a20 2020  ame.lower()).   
-0001ef00: 2020 2020 2073 656c 662e 5f63 6163 6865       self._cache
-0001ef10: 5b27 6465 6669 6e65 645f 6f70 636f 6465  ['defined_opcode
-0001ef20: 7327 5d20 3d20 6f70 636f 6465 730a 2020  s'] = opcodes.  
-0001ef30: 2020 2020 2020 7265 7475 726e 206f 7063        return opc
-0001ef40: 6f64 6573 0a0a 2020 2020 6465 6620 7365  odes..    def se
-0001ef50: 7269 616c 697a 6528 7365 6c66 2c20 6f75  rialize(self, ou
-0001ef60: 7466 696c 653a 2055 6e69 6f6e 5b73 7472  tfile: Union[str
-0001ef70: 2c20 5061 7468 5d20 3d20 5f4d 4149 4e49  , Path] = _MAINI
-0001ef80: 4e44 4558 5f50 4943 4b4c 455f 4649 4c45  NDEX_PICKLE_FILE
-0001ef90: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-0001efa0: 2020 2069 6d70 6f72 7420 7069 636b 6c65     import pickle
-0001efb0: 0a20 2020 2020 2020 2023 2050 6f70 756c  .        # Popul
-0001efc0: 6174 6520 6361 6368 650a 2020 2020 2020  ate cache.      
-0001efd0: 2020 5f20 3d20 7365 6c66 2e6f 7063 6f64    _ = self.opcod
-0001efe0: 6573 5f62 795f 6e61 6d65 2829 0a20 2020  es_by_name().   
-0001eff0: 2020 2020 205f 203d 2073 656c 662e 696e       _ = self.in
-0001f000: 7374 616c 6c65 645f 646c 6c73 2829 0a20  stalled_dlls(). 
-0001f010: 2020 2020 2020 2070 6963 6b6c 652e 6475         pickle.du
-0001f020: 6d70 2873 656c 662c 206f 7065 6e28 6f75  mp(self, open(ou
-0001f030: 7466 696c 652c 2027 7762 2729 290a 0a20  tfile, 'wb')).. 
-0001f040: 2020 2064 6566 2069 6e73 7461 6c6c 5f70     def install_p
-0001f050: 6c75 6769 6e28 7365 6c66 2c20 706c 7567  lugin(self, plug
-0001f060: 696e 3a20 506c 7567 696e 2c20 6368 6563  in: Plugin, chec
-0001f070: 6b3d 4661 6c73 6529 202d 3e20 4f70 7469  k=False) -> Opti
-0001f080: 6f6e 616c 5b45 7272 6f72 4d73 675d 3a0a  onal[ErrorMsg]:.
-0001f090: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001f0a0: 2020 2020 496e 7374 616c 6c20 7468 6520      Install the 
-0001f0b0: 6769 7665 6e20 706c 7567 696e 0a0a 2020  given plugin..  
-0001f0c0: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-0001f0d0: 2020 2020 2020 2020 706c 7567 696e 3a20          plugin: 
-0001f0e0: 7468 6520 706c 7567 696e 2074 6f20 696e  the plugin to in
-0001f0f0: 7374 616c 6c0a 2020 2020 2020 2020 2020  stall.          
-0001f100: 2020 6368 6563 6b3a 2069 6620 5472 7565    check: if True
-0001f110: 2c20 6368 6563 6b20 7468 6174 2074 6865  , check that the
-0001f120: 206f 7063 6f64 6573 2064 6566 696e 6564   opcodes defined
-0001f130: 2069 6e20 706c 7567 696e 2061 7265 2070   in plugin are p
-0001f140: 7265 7365 6e74 0a20 2020 2020 2020 2020  resent.         
-0001f150: 2020 2020 2020 2061 6674 6572 2069 6e73         after ins
-0001f160: 7461 6c6c 6174 696f 6e0a 0a20 2020 2020  tallation..     
-0001f170: 2020 2052 6574 7572 6e73 3a0a 2020 2020     Returns:.    
-0001f180: 2020 2020 2020 2020 4e6f 6e65 2069 6620          None if 
-0001f190: 6f6b 2c20 616e 2045 7272 6f72 4d73 6720  ok, an ErrorMsg 
-0001f1a0: 6966 2066 6169 6c65 640a 0a20 2020 2020  if failed..     
-0001f1b0: 2020 2045 7861 6d70 6c65 0a20 2020 2020     Example.     
-0001f1c0: 2020 203d 3d3d 3d3d 3d3d 0a0a 2020 2020     =======..    
-0001f1d0: 2020 2020 2020 2020 3e3e 3e20 696d 706f          >>> impo
-0001f1e0: 7274 2072 6973 7365 740a 2020 2020 2020  rt risset.      
-0001f1f0: 2020 2020 2020 3e3e 3e20 6964 7820 3d20        >>> idx = 
-0001f200: 7269 7373 6574 2e4d 6169 6e49 6e64 6578  risset.MainIndex
-0001f210: 2875 7064 6174 653d 5472 7565 290a 2020  (update=True).  
-0001f220: 2020 2020 2020 2020 2020 3e3e 3e20 706c            >>> pl
-0001f230: 7567 696e 706f 6c79 203d 2069 6478 2e70  uginpoly = idx.p
-0001f240: 6c75 6769 6e73 5b27 706f 6c79 275d 0a20  lugins['poly']. 
-0001f250: 2020 2020 2020 2020 2020 203e 3e3e 2069             >>> i
-0001f260: 6478 2e69 6e73 7461 6c6c 5f70 6c75 6769  dx.install_plugi
-0001f270: 6e28 706c 7567 696e 706f 6c79 290a 2020  n(pluginpoly).  
-0001f280: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001f290: 2020 6173 7365 7274 2069 7369 6e73 7461    assert isinsta
-0001f2a0: 6e63 6528 706c 7567 696e 2c20 506c 7567  nce(plugin, Plug
-0001f2b0: 696e 290a 2020 2020 2020 2020 706c 6174  in).        plat
-0001f2c0: 666f 726d 6964 203d 205f 7365 7373 696f  formid = _sessio
-0001f2d0: 6e2e 706c 6174 666f 726d 6964 0a20 2020  n.platformid.   
-0001f2e0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-0001f2f0: 2020 2020 2020 2320 5468 6973 206d 6574        # This met
-0001f300: 686f 6420 7769 6c6c 2064 6f77 6e6c 6f61  hod will downloa
-0001f310: 6420 616e 6420 6578 7472 6163 7420 7468  d and extract th
-0001f320: 6520 706c 7567 696e 2069 6620 6e65 6365  e plugin if nece
-0001f330: 7373 6172 790a 2020 2020 2020 2020 2020  ssary.          
-0001f340: 2020 706c 7567 696e 5f62 696e 6172 795f    plugin_binary_
-0001f350: 7061 7468 203d 2073 656c 662e 6765 745f  path = self.get_
-0001f360: 706c 7567 696e 5f64 6c6c 2870 6c75 6769  plugin_dll(plugi
-0001f370: 6e29 0a20 2020 2020 2020 2065 7863 6570  n).        excep
-0001f380: 7420 506c 6174 666f 726d 4e6f 7453 7570  t PlatformNotSup
-0001f390: 706f 7274 6564 4572 726f 7220 6173 2065  portedError as e
-0001f3a0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001f3b0: 7475 726e 2045 7272 6f72 4d73 6728 6622  turn ErrorMsg(f"
-0001f3c0: 506c 6174 666f 726d 2027 7b70 6c61 7466  Platform '{platf
-0001f3d0: 6f72 6d69 647d 2720 6e6f 7420 7375 7070  ormid}' not supp
-0001f3e0: 6f72 7465 6420 666f 7220 706c 7567 696e  orted for plugin
-0001f3f0: 2027 7b70 6c75 6769 6e2e 6e61 6d65 7d27   '{plugin.name}'
-0001f400: 3a20 7b65 7d22 290a 2020 2020 2020 2020  : {e}").        
-0001f410: 6578 6365 7074 2052 756e 7469 6d65 4572  except RuntimeEr
-0001f420: 726f 7220 6173 2065 3a0a 2020 2020 2020  ror as e:.      
-0001f430: 2020 2020 2020 7265 7475 726e 2045 7272        return Err
-0001f440: 6f72 4d73 6728 6622 4572 726f 7220 7768  orMsg(f"Error wh
-0001f450: 696c 6520 6765 7474 696e 6720 706c 7567  ile getting plug
-0001f460: 696e 2064 6c6c 2028 706c 7567 696e 3a20  in dll (plugin: 
-0001f470: 7b70 6c75 6769 6e2e 6e61 6d65 7d29 3a20  {plugin.name}): 
-0001f480: 7b65 7d22 290a 2020 2020 2020 2020 6578  {e}").        ex
-0001f490: 6365 7074 2053 6368 656d 6145 7272 6f72  cept SchemaError
-0001f4a0: 2061 7320 653a 0a20 2020 2020 2020 2020   as e:.         
-0001f4b0: 2020 2072 6574 7572 6e20 4572 726f 724d     return ErrorM
-0001f4c0: 7367 2866 2254 6865 2070 6c75 6769 6e20  sg(f"The plugin 
-0001f4d0: 6465 6669 6e69 7469 6f6e 2066 6f72 207b  definition for {
-0001f4e0: 706c 7567 696e 2e6e 616d 657d 2068 6173  plugin.name} has
-0001f4f0: 2065 7272 6f72 733a 207b 657d 2229 0a0a   errors: {e}")..
-0001f500: 2020 2020 2020 2020 696e 7374 616c 6c70          installp
-0001f510: 6174 6820 3d20 7573 6572 5f70 6c75 6769  ath = user_plugi
-0001f520: 6e73 5f70 6174 6828 290a 2020 2020 2020  ns_path().      
-0001f530: 2020 696e 7374 616c 6c70 6174 682e 6d6b    installpath.mk
-0001f540: 6469 7228 7061 7265 6e74 733d 5472 7565  dir(parents=True
-0001f550: 2c20 6578 6973 745f 6f6b 3d54 7275 6529  , exist_ok=True)
-0001f560: 0a20 2020 2020 2020 205f 6465 6275 6728  .        _debug(
-0001f570: 2255 7365 7220 706c 7567 696e 7320 7061  "User plugins pa
-0001f580: 7468 3a20 222c 2069 6e73 7461 6c6c 7061  th: ", installpa
-0001f590: 7468 2e61 735f 706f 7369 7828 2929 0a20  th.as_posix()). 
-0001f5a0: 2020 2020 2020 205f 6465 6275 6728 2244         _debug("D
-0001f5b0: 6f77 6e6c 6f61 6465 6420 646c 6c20 666f  ownloaded dll fo
-0001f5c0: 7220 706c 7567 696e 3a20 222c 2070 6c75  r plugin: ", plu
-0001f5d0: 6769 6e5f 6269 6e61 7279 5f70 6174 682e  gin_binary_path.
-0001f5e0: 6173 5f70 6f73 6978 2829 290a 2020 2020  as_posix()).    
-0001f5f0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0001f600: 2020 2020 2073 6875 7469 6c2e 636f 7079       shutil.copy
-0001f610: 2870 6c75 6769 6e5f 6269 6e61 7279 5f70  (plugin_binary_p
-0001f620: 6174 682e 6173 5f70 6f73 6978 2829 2c20  ath.as_posix(), 
-0001f630: 696e 7374 616c 6c70 6174 682e 6173 5f70  installpath.as_p
-0001f640: 6f73 6978 2829 290a 2020 2020 2020 2020  osix()).        
-0001f650: 6578 6365 7074 2049 4f45 7272 6f72 2061  except IOError a
-0001f660: 7320 653a 0a20 2020 2020 2020 2020 2020  s e:.           
-0001f670: 205f 6465 6275 6728 6622 5472 6965 6420   _debug(f"Tried 
-0001f680: 746f 2063 6f70 7920 7b70 6c75 6769 6e5f  to copy {plugin_
-0001f690: 6269 6e61 7279 5f70 6174 682e 6173 5f70  binary_path.as_p
-0001f6a0: 6f73 6978 2829 7d20 746f 207b 696e 7374  osix()} to {inst
-0001f6b0: 616c 6c70 6174 682e 6173 5f70 6f73 6978  allpath.as_posix
-0001f6c0: 2829 7d20 6275 7420 6661 696c 6564 2229  ()} but failed")
-0001f6d0: 0a20 2020 2020 2020 2020 2020 205f 6465  .            _de
-0001f6e0: 6275 6728 7374 7228 6529 290a 2020 2020  bug(str(e)).    
-0001f6f0: 2020 2020 2020 2020 7265 7475 726e 2045          return E
-0001f700: 7272 6f72 4d73 6728 2243 6f75 6c64 206e  rrorMsg("Could n
-0001f710: 6f74 2063 6f70 7920 7468 6520 6269 6e61  ot copy the bina
-0001f720: 7279 2074 6f20 7468 6520 696e 7374 616c  ry to the instal
-0001f730: 6c20 7061 7468 2229 0a0a 2020 2020 2020  l path")..      
-0001f740: 2020 696e 7374 616c 6c65 645f 7061 7468    installed_path
-0001f750: 203d 2069 6e73 7461 6c6c 7061 7468 202f   = installpath /
-0001f760: 2070 6c75 6769 6e5f 6269 6e61 7279 5f70   plugin_binary_p
-0001f770: 6174 682e 6e61 6d65 0a20 2020 2020 2020  ath.name.       
-0001f780: 2069 6620 6e6f 7420 696e 7374 616c 6c65   if not installe
-0001f790: 645f 7061 7468 2e65 7869 7374 7328 293a  d_path.exists():
-0001f7a0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001f7b0: 7572 6e20 4572 726f 724d 7367 2866 2249  urn ErrorMsg(f"I
-0001f7c0: 6e73 7461 6c6c 6174 696f 6e20 6f66 2070  nstallation of p
-0001f7d0: 6c75 6769 6e20 7b70 6c75 6769 6e2e 6e61  lugin {plugin.na
-0001f7e0: 6d65 7d20 6661 696c 6564 2c20 6269 6e61  me} failed, bina
-0001f7f0: 7279 2077 6173 206e 6f74 2066 6f75 6e64  ry was not found
-0001f800: 2069 6e20 220a 2020 2020 2020 2020 2020   in ".          
-0001f810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f820: 2020 6622 7468 6520 6578 7065 6374 6564    f"the expected
-0001f830: 2070 6174 683a 207b 696e 7374 616c 6c65   path: {installe
-0001f840: 645f 7061 7468 2e61 735f 706f 7369 7828  d_path.as_posix(
-0001f850: 297d 2229 0a0a 2020 2020 2020 2020 5f73  )}")..        _s
-0001f860: 6573 7369 6f6e 2e63 6163 6865 2e63 6c65  ession.cache.cle
-0001f870: 6172 2829 0a0a 2020 2020 2020 2020 2320  ar()..        # 
-0001f880: 696e 7374 616c 6c61 7469 6f6e 2073 7563  installation suc
-0001f890: 6365 6564 6564 2c20 6368 6563 6b20 7468  ceeded, check th
-0001f8a0: 6174 2069 7420 776f 726b 730a 2020 2020  at it works.    
-0001f8b0: 2020 2020 6966 206e 6f74 2073 656c 662e      if not self.
-0001f8c0: 6973 5f70 6c75 6769 6e5f 696e 7374 616c  is_plugin_instal
-0001f8d0: 6c65 6428 706c 7567 696e 2c20 6368 6563  led(plugin, chec
-0001f8e0: 6b3d 6368 6563 6b29 3a0a 2020 2020 2020  k=check):.      
-0001f8f0: 2020 2020 2020 6966 2070 6c61 7466 6f72        if platfor
-0001f900: 6d69 642e 7374 6172 7473 7769 7468 2827  mid.startswith('
-0001f910: 6d61 636f 7327 293a 0a20 2020 2020 2020  macos'):.       
-0001f920: 2020 2020 2020 2020 2023 2074 7279 2063           # try c
-0001f930: 6f64 6520 7369 676e 696e 6720 7468 6520  ode signing the 
-0001f940: 6269 6e61 7279 0a20 2020 2020 2020 2020  binary.         
-0001f950: 2020 2020 2020 205f 6465 6275 6728 6622         _debug(f"
-0001f960: 5468 6520 6269 6e61 7279 2027 7b69 6e73  The binary '{ins
-0001f970: 7461 6c6c 6564 5f70 6174 682e 6173 5f70  talled_path.as_p
-0001f980: 6f73 6978 2829 7d27 2077 6173 2069 6e73  osix()}' was ins
-0001f990: 7461 6c6c 6564 2062 7574 2069 7420 6973  talled but it is
-0001f9a0: 206e 6f74 2072 6563 6f67 6e69 7a65 6420   not recognized 
-0001f9b0: 6279 2063 736f 756e 642e 2022 0a20 2020  by csound. ".   
-0001f9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f9d0: 2020 2020 6622 4974 206d 6967 6874 2062      f"It might b
-0001f9e0: 6520 6120 7365 6375 7269 7479 2070 726f  e a security pro
-0001f9f0: 626c 656d 2e20 4920 7769 6c6c 2074 7279  blem. I will try
-0001fa00: 2074 6f20 636f 6465 2073 6967 6e20 6974   to code sign it
-0001fa10: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-0001fa20: 2020 206d 6163 6f73 5f63 6f64 6573 6967     macos_codesig
-0001fa30: 6e28 5b69 6e73 7461 6c6c 6564 5f70 6174  n([installed_pat
-0001fa40: 682e 6173 5f70 6f73 6978 2829 5d29 0a20  h.as_posix()]). 
-0001fa50: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001fa60: 6620 7365 6c66 2e5f 6973 5f70 6c75 6769  f self._is_plugi
-0001fa70: 6e5f 7265 636f 676e 697a 6564 5f62 795f  n_recognized_by_
-0001fa80: 6373 6f75 6e64 2870 6c75 6769 6e29 3a0a  csound(plugin):.
-0001fa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001faa0: 2020 2020 5f64 6562 7567 2822 2e2e 2e20      _debug("... 
-0001fab0: 4f6b 2c20 7468 6174 2077 6f72 6b65 642e  Ok, that worked.
-0001fac0: 2022 290a 2020 2020 2020 2020 2020 2020   ").            
-0001fad0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001fae0: 2020 2020 2020 2020 2020 2020 2020 5f65                _e
-0001faf0: 7272 6f72 6d73 6728 6622 5468 6520 706c  rrormsg(f"The pl
-0001fb00: 7567 696e 2027 7b70 6c75 6769 6e2e 6e61  ugin '{plugin.na
-0001fb10: 6d65 7d27 2077 6173 206e 6f74 2072 6563  me}' was not rec
-0001fb20: 6f67 6e69 7a65 642e 2054 6865 2072 6561  ognized. The rea
-0001fb30: 736f 6e20 6d69 6768 7420 6265 2074 6861  son might be tha
-0001fb40: 7420 7468 6520 6269 6e61 7279 220a 2020  t the binary".  
-0001fb50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fb60: 2020 2020 2020 2020 2020 2020 6622 206e              f" n
-0001fb70: 6565 6473 2074 6f20 6265 2063 6f64 652d  eeds to be code-
-0001fb80: 7369 676e 6564 2e20 2229 0a0a 2020 2020  signed. ")..    
-0001fb90: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
-0001fba0: 6865 636b 3a0a 2020 2020 2020 2020 2020  heck:.          
-0001fbb0: 2020 2020 2020 7265 7475 726e 2045 7272        return Err
-0001fbc0: 6f72 4d73 6728 6622 5472 6965 6420 746f  orMsg(f"Tried to
-0001fbd0: 2069 6e73 7461 6c6c 2070 6c75 6769 6e20   install plugin 
-0001fbe0: 7b70 6c75 6769 6e2e 6e61 6d65 7d2c 2062  {plugin.name}, b
-0001fbf0: 7574 2074 6865 2062 696e 6172 7922 0a20  ut the binary". 
-0001fc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fc10: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001fc20: 2220 6973 206e 6f74 2070 7265 7365 6e74  " is not present
-0001fc30: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
-0001fc40: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001fc50: 2020 2020 2020 7265 7475 726e 2045 7272        return Err
-0001fc60: 6f72 4d73 6728 6622 5472 6965 6420 746f  orMsg(f"Tried to
-0001fc70: 2069 6e73 7461 6c6c 2070 6c75 6769 6e20   install plugin 
-0001fc80: 7b70 6c75 6769 6e2e 6e61 6d65 7d2c 2062  {plugin.name}, b
-0001fc90: 7574 206f 7063 6f64 6520 220a 2020 2020  ut opcode ".    
-0001fca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fcb0: 2020 2020 2020 2020 2020 2020 6622 7b70              f"{p
-0001fcc0: 6c75 6769 6e2e 6f70 636f 6465 735b 305d  lugin.opcodes[0]
-0001fcd0: 7d2c 2077 6869 6368 2069 7320 7072 6f76  }, which is prov
-0001fce0: 6964 6564 2062 7920 7468 6973 2070 6c75  ided by this plu
-0001fcf0: 6769 6e2c 2022 0a20 2020 2020 2020 2020  gin, ".         
-0001fd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd10: 2020 2020 2020 2066 2269 7320 6e6f 7420         f"is not 
-0001fd20: 7072 6573 656e 7422 290a 0a20 2020 2020  present")..     
-0001fd30: 2020 2023 2049 6e73 7461 6c6c 2061 7373     # Install ass
-0001fd40: 6574 732c 2069 6620 616e 790a 2020 2020  ets, if any.    
-0001fd50: 2020 2020 6173 7365 7466 696c 6573 203d      assetfiles =
-0001fd60: 205b 5d0a 2020 2020 2020 2020 6966 2070   [].        if p
-0001fd70: 6c75 6769 6e2e 6173 7365 7473 3a0a 2020  lugin.assets:.  
-0001fd80: 2020 2020 2020 2020 2020 666f 7220 6173            for as
-0001fd90: 7365 7420 696e 2070 6c75 6769 6e2e 6173  set in plugin.as
-0001fda0: 7365 7473 3a0a 2020 2020 2020 2020 2020  sets:.          
-0001fdb0: 2020 2020 2020 6966 2061 7373 6574 2e70        if asset.p
-0001fdc0: 6c61 7466 6f72 6d20 3d3d 2027 616c 6c27  latform == 'all'
-0001fdd0: 206f 7220 6173 7365 742e 706c 6174 666f   or asset.platfo
-0001fde0: 726d 203d 3d20 706c 6174 666f 726d 6964  rm == platformid
-0001fdf0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001fe00: 2020 2020 2020 5f64 6562 7567 2866 2249        _debug(f"I
-0001fe10: 6e73 7461 6c6c 696e 6720 6173 7365 7420  nstalling asset 
-0001fe20: 7b61 7373 6574 2e69 6465 6e74 6966 6965  {asset.identifie
-0001fe30: 7228 297d 2229 0a20 2020 2020 2020 2020  r()}").         
-0001fe40: 2020 2020 2020 2020 2020 2061 7373 6574             asset
-0001fe50: 6669 6c65 732e 6578 7465 6e64 2873 656c  files.extend(sel
-0001fe60: 662e 696e 7374 616c 6c5f 6173 7365 7428  f.install_asset(
-0001fe70: 6173 7365 742c 2070 6c75 6769 6e2e 6e61  asset, plugin.na
-0001fe80: 6d65 2929 0a0a 2020 2020 2020 2020 2320  me))..        # 
-0001fe90: 696e 7374 616c 6c20 6d61 6e69 6665 7374  install manifest
-0001fea0: 0a20 2020 2020 2020 206d 616e 6966 6573  .        manifes
-0001feb0: 745f 7061 7468 203d 2073 656c 662e 696e  t_path = self.in
-0001fec0: 7374 616c 6c65 645f 6d61 6e69 6665 7374  stalled_manifest
-0001fed0: 735f 7061 7468 2829 202f 2066 227b 706c  s_path() / f"{pl
-0001fee0: 7567 696e 2e6e 616d 657d 2e6a 736f 6e22  ugin.name}.json"
-0001fef0: 0a20 2020 2020 2020 206d 616e 6966 6573  .        manifes
-0001ff00: 7420 3d20 5f6d 616b 655f 696e 7374 616c  t = _make_instal
-0001ff10: 6c5f 6d61 6e69 6665 7374 2870 6c75 6769  l_manifest(plugi
-0001ff20: 6e2c 2061 7373 6574 6669 6c65 733d 6173  n, assetfiles=as
-0001ff30: 7365 7466 696c 6573 290a 2020 2020 2020  setfiles).      
-0001ff40: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-0001ff50: 2020 206d 616e 6966 6573 745f 6a73 6f6e     manifest_json
-0001ff60: 203d 206a 736f 6e2e 6475 6d70 7328 6d61   = json.dumps(ma
-0001ff70: 6e69 6665 7374 2c20 696e 6465 6e74 3d54  nifest, indent=T
-0001ff80: 7275 6529 0a20 2020 2020 2020 2065 7863  rue).        exc
-0001ff90: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-0001ffa0: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
-0001ffb0: 5f65 7272 6f72 6d73 6728 6622 696e 7374  _errormsg(f"inst
-0001ffc0: 616c 6c5f 706c 7567 696e 3a20 6a73 6f6e  all_plugin: json
-0001ffd0: 2065 7272 6f72 2077 6869 6c65 2073 6176   error while sav
-0001ffe0: 696e 6720 6d61 6e69 6665 7374 3a20 7b65  ing manifest: {e
-0001fff0: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
-00020000: 5f65 7272 6f72 6d73 6728 6622 2020 206d  _errormsg(f"   m
-00020010: 616e 6966 6573 7420 7761 733a 205c 6e7b  anifest was: \n{
-00020020: 6d61 6e69 6665 7374 7d22 290a 2020 2020  manifest}").    
-00020030: 2020 2020 2020 2020 7265 7475 726e 2045          return E
-00020040: 7272 6f72 4d73 6728 2245 7272 6f72 2077  rrorMsg("Error w
-00020050: 6865 6e20 6475 6d70 696e 6720 6d61 6e69  hen dumping mani
-00020060: 6665 7374 2074 6f20 6a73 6f6e 2229 0a0a  fest to json")..
-00020070: 2020 2020 2020 2020 6269 6e61 7279 6465          binaryde
-00020080: 6620 3d20 706c 7567 696e 2e66 696e 645f  f = plugin.find_
-00020090: 6269 6e61 7279 2829 0a20 2020 2020 2020  binary().       
-000200a0: 2069 6620 6269 6e61 7279 6465 6620 616e   if binarydef an
-000200b0: 6420 6269 6e61 7279 6465 662e 706f 7374  d binarydef.post
-000200c0: 5f69 6e73 7461 6c6c 5f73 6372 6970 743a  _install_script:
-000200d0: 0a20 2020 2020 2020 2020 2020 2073 6372  .            scr
-000200e0: 6970 7420 3d20 706c 7567 696e 2e72 6573  ipt = plugin.res
-000200f0: 6f6c 7665 5f70 6174 6828 6269 6e61 7279  olve_path(binary
-00020100: 6465 662e 706f 7374 5f69 6e73 7461 6c6c  def.post_install
-00020110: 5f73 6372 6970 7429 0a20 2020 2020 2020  _script).       
-00020120: 2020 2020 205f 7375 6270 726f 635f 6361       _subproc_ca
-00020130: 6c6c 2873 6372 6970 742e 6173 5f70 6f73  ll(script.as_pos
-00020140: 6978 2829 2c20 7368 656c 6c3d 5472 7565  ix(), shell=True
-00020150: 290a 0a20 2020 2020 2020 2077 6974 6820  )..        with 
-00020160: 6f70 656e 286d 616e 6966 6573 745f 7061  open(manifest_pa
-00020170: 7468 2e61 735f 706f 7369 7828 292c 2022  th.as_posix(), "
-00020180: 7722 2920 6173 2066 3a0a 2020 2020 2020  w") as f:.      
-00020190: 2020 2020 2020 662e 7772 6974 6528 6d61        f.write(ma
-000201a0: 6e69 6665 7374 5f6a 736f 6e29 0a20 2020  nifest_json).   
-000201b0: 2020 2020 205f 6465 6275 6728 6622 5361       _debug(f"Sa
-000201c0: 7665 6420 6d61 6e69 6665 7374 2066 6f72  ved manifest for
-000201d0: 2070 6c75 6769 6e20 7b70 6c75 6769 6e2e   plugin {plugin.
-000201e0: 6e61 6d65 7d20 746f 207b 6d61 6e69 6665  name} to {manife
-000201f0: 7374 5f70 6174 687d 2229 0a0a 2020 2020  st_path}")..    
-00020200: 2020 2020 2320 6e6f 2065 7272 6f72 730a      # no errors.
-00020210: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00020220: 6f6e 650a 0a20 2020 2064 6566 206c 6973  one..    def lis
-00020230: 745f 706c 7567 696e 735f 6173 5f64 6963  t_plugins_as_dic
-00020240: 7428 7365 6c66 2c20 696e 7374 616c 6c65  t(self, installe
-00020250: 643d 4661 6c73 6529 202d 3e20 6469 6374  d=False) -> dict
-00020260: 3a0a 2020 2020 2020 2020 6420 3d20 7b7d  :.        d = {}
-00020270: 0a20 2020 2020 2020 2066 6f72 2070 6c75  .        for plu
-00020280: 6769 6e20 696e 2073 656c 662e 706c 7567  gin in self.plug
-00020290: 696e 732e 7661 6c75 6573 2829 3a0a 2020  ins.values():.  
-000202a0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-000202b0: 2069 7369 6e73 7461 6e63 6528 706c 7567   isinstance(plug
-000202c0: 696e 2c20 506c 7567 696e 290a 2020 2020  in, Plugin).    
-000202d0: 2020 2020 2020 2020 696e 666f 203d 2073          info = s
-000202e0: 656c 662e 696e 7374 616c 6c65 645f 706c  elf.installed_pl
-000202f0: 7567 696e 5f69 6e66 6f28 706c 7567 696e  ugin_info(plugin
-00020300: 290a 2020 2020 2020 2020 2020 2020 6269  ).            bi
-00020310: 6e61 7279 203d 2070 6c75 6769 6e2e 6669  nary = plugin.fi
-00020320: 6e64 5f62 696e 6172 7928 290a 2020 2020  nd_binary().    
-00020330: 2020 2020 2020 2020 706c 7567 696e 696e          pluginin
-00020340: 7374 616c 6c65 6420 3d20 696e 666f 2069  stalled = info i
-00020350: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-00020360: 2020 2020 2020 2069 6620 696e 7374 616c         if instal
-00020370: 6c65 6420 616e 6420 6e6f 7420 706c 7567  led and not plug
-00020380: 696e 696e 7374 616c 6c65 643a 0a20 2020  ininstalled:.   
-00020390: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-000203a0: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-000203b0: 2020 706c 7567 6469 6374 3a20 6469 6374    plugdict: dict
-000203c0: 5b73 7472 2c20 416e 795d 203d 207b 2776  [str, Any] = {'v
-000203d0: 6572 7369 6f6e 273a 2070 6c75 6769 6e2e  ersion': plugin.
-000203e0: 7665 7273 696f 6e7d 0a20 2020 2020 2020  version}.       
-000203f0: 2020 2020 2069 6620 696e 666f 3a0a 2020       if info:.  
-00020400: 2020 2020 2020 2020 2020 2020 2020 706c                pl
-00020410: 7567 6469 6374 5b27 696e 7374 616c 6c65  ugdict['installe
-00020420: 6427 5d20 3d20 5472 7565 0a20 2020 2020  d'] = True.     
-00020430: 2020 2020 2020 2020 2020 2070 6c75 6764             plugd
-00020440: 6963 745b 2769 6e73 7461 6c6c 6564 2d76  ict['installed-v
-00020450: 6572 7369 6f6e 275d 203d 2069 6e66 6f2e  ersion'] = info.
-00020460: 7665 7273 696f 6e73 7472 0a20 2020 2020  versionstr.     
-00020470: 2020 2020 2020 2020 2020 2070 6c75 6764             plugd
-00020480: 6963 745b 2770 6174 6827 5d20 3d20 696e  ict['path'] = in
-00020490: 666f 2e64 6c6c 7061 7468 2e61 735f 706f  fo.dllpath.as_po
-000204a0: 7369 7828 290a 2020 2020 2020 2020 2020  six().          
-000204b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000204c0: 2020 2020 2020 2020 706c 7567 6469 6374          plugdict
-000204d0: 5b27 696e 7374 616c 6c65 6427 5d20 3d20  ['installed'] = 
-000204e0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
-000204f0: 2020 2020 2020 706c 7567 6469 6374 5b27        plugdict['
-00020500: 6176 6169 6c61 626c 6527 5d20 3d20 6269  available'] = bi
-00020510: 6e61 7279 2069 7320 6e6f 7420 4e6f 6e65  nary is not None
-00020520: 0a0a 2020 2020 2020 2020 2020 2020 706c  ..            pl
-00020530: 7567 6469 6374 5b27 6f70 636f 6465 7327  ugdict['opcodes'
-00020540: 5d20 3d20 706c 7567 696e 2e6f 7063 6f64  ] = plugin.opcod
-00020550: 6573 0a20 2020 2020 2020 2020 2020 2070  es.            p
-00020560: 6c75 6764 6963 745b 2775 726c 275d 203d  lugdict['url'] =
-00020570: 2070 6c75 6769 6e2e 7572 6c0a 2020 2020   plugin.url.    
-00020580: 2020 2020 2020 2020 706c 7567 6469 6374          plugdict
-00020590: 5b27 7368 6f72 745f 6465 7363 7269 7074  ['short_descript
-000205a0: 696f 6e27 5d20 3d20 706c 7567 696e 2e73  ion'] = plugin.s
-000205b0: 686f 7274 5f64 6573 6372 6970 7469 6f6e  hort_description
-000205c0: 0a20 2020 2020 2020 2020 2020 2070 6c75  .            plu
-000205d0: 6764 6963 745b 276c 6f6e 675f 6465 7363  gdict['long_desc
-000205e0: 7269 7074 696f 6e27 5d20 3d20 706c 7567  ription'] = plug
-000205f0: 696e 2e6c 6f6e 675f 6465 7363 7269 7074  in.long_descript
-00020600: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-00020610: 706c 7567 6469 6374 5b27 6175 7468 6f72  plugdict['author
-00020620: 275d 203d 2070 6c75 6769 6e2e 6175 7468  '] = plugin.auth
-00020630: 6f72 0a20 2020 2020 2020 2020 2020 2064  or.            d
-00020640: 5b70 6c75 6769 6e2e 6e61 6d65 5d20 3d20  [plugin.name] = 
-00020650: 706c 7567 6469 6374 0a20 2020 2020 2020  plugdict.       
-00020660: 2072 6574 7572 6e20 640a 0a20 2020 2064   return d..    d
-00020670: 6566 2061 7661 696c 6162 6c65 5f70 6c75  ef available_plu
-00020680: 6769 6e73 2873 656c 662c 2070 6c61 7466  gins(self, platf
-00020690: 6f72 6d69 643a 2073 7472 203d 2027 272c  ormid: str = '',
-000206a0: 2063 736f 756e 645f 7665 7273 696f 6e3a   csound_version:
-000206b0: 2069 6e74 203d 2030 2c20 696e 7374 616c   int = 0, instal
-000206c0: 6c65 645f 6f6e 6c79 3d46 616c 7365 2c0a  led_only=False,.
-000206d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000206e0: 2020 2020 2020 2020 2020 6e6f 745f 696e            not_in
-000206f0: 7374 616c 6c65 645f 6f6e 6c79 3d46 616c  stalled_only=Fal
-00020700: 7365 2c20 6d65 7468 6f64 3d27 6373 6f75  se, method='csou
-00020710: 6e64 272c 2063 6865 636b 3d54 7275 650a  nd', check=True.
-00020720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020730: 2020 2020 2020 2020 2020 2920 2d3e 206c            ) -> l
-00020740: 6973 745b 506c 7567 696e 5d3a 0a20 2020  ist[Plugin]:.   
-00020750: 2020 2020 2069 6620 6e6f 7420 706c 6174       if not plat
-00020760: 666f 726d 6964 3a0a 2020 2020 2020 2020  formid:.        
-00020770: 2020 2020 706c 6174 666f 726d 6964 203d      platformid =
-00020780: 205f 7365 7373 696f 6e2e 706c 6174 666f   _session.platfo
-00020790: 726d 6964 0a0a 2020 2020 2020 2020 6966  rmid..        if
-000207a0: 206e 6f74 2063 736f 756e 645f 7665 7273   not csound_vers
-000207b0: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
-000207c0: 2063 736f 756e 645f 7665 7273 696f 6e20   csound_version 
-000207d0: 3d20 5f73 6573 7369 6f6e 2e63 736f 756e  = _session.csoun
-000207e0: 645f 7665 7273 696f 6e0a 0a20 2020 2020  d_version..     
-000207f0: 2020 2070 6c75 6769 6e73 203d 205b 5d0a     plugins = [].
-00020800: 2020 2020 2020 2020 666f 7220 706c 7567          for plug
-00020810: 696e 2069 6e20 7365 6c66 2e70 6c75 6769  in in self.plugi
-00020820: 6e73 2e76 616c 7565 7328 293a 0a20 2020  ns.values():.   
-00020830: 2020 2020 2020 2020 2069 6620 706c 7567           if plug
-00020840: 696e 2e66 696e 645f 6269 6e61 7279 2870  in.find_binary(p
-00020850: 6c61 7466 6f72 6d69 643d 706c 6174 666f  latformid=platfo
-00020860: 726d 6964 2c20 6373 6f75 6e64 5f76 6572  rmid, csound_ver
-00020870: 7369 6f6e 3d63 736f 756e 645f 7665 7273  sion=csound_vers
-00020880: 696f 6e29 3a0a 2020 2020 2020 2020 2020  ion):.          
-00020890: 2020 2020 2020 6966 2069 6e73 7461 6c6c        if install
-000208a0: 6564 5f6f 6e6c 7920 616e 6420 6e6f 7420  ed_only and not 
-000208b0: 7365 6c66 2e69 735f 706c 7567 696e 5f69  self.is_plugin_i
-000208c0: 6e73 7461 6c6c 6564 2870 6c75 6769 6e2c  nstalled(plugin,
-000208d0: 2063 6865 636b 3d63 6865 636b 2c20 6d65   check=check, me
-000208e0: 7468 6f64 3d6d 6574 686f 6429 3a0a 2020  thod=method):.  
-000208f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020900: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-00020910: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00020920: 6e6f 745f 696e 7374 616c 6c65 645f 6f6e  not_installed_on
-00020930: 6c79 2061 6e64 2073 656c 662e 6973 5f70  ly and self.is_p
-00020940: 6c75 6769 6e5f 696e 7374 616c 6c65 6428  lugin_installed(
-00020950: 706c 7567 696e 2c20 6368 6563 6b3d 6368  plugin, check=ch
-00020960: 6563 6b2c 206d 6574 686f 643d 6d65 7468  eck, method=meth
-00020970: 6f64 293a 0a20 2020 2020 2020 2020 2020  od):.           
-00020980: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
-00020990: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000209a0: 2020 706c 7567 696e 732e 6170 7065 6e64    plugins.append
-000209b0: 2870 6c75 6769 6e29 0a20 2020 2020 2020  (plugin).       
-000209c0: 2072 6574 7572 6e20 706c 7567 696e 730a   return plugins.
-000209d0: 0a20 2020 2064 6566 206c 6973 745f 706c  .    def list_pl
-000209e0: 7567 696e 7328 7365 6c66 2c20 696e 7374  ugins(self, inst
-000209f0: 616c 6c65 643d 4661 6c73 652c 206e 616d  alled=False, nam
-00020a00: 656f 6e6c 793d 4661 6c73 652c 206c 6566  eonly=False, lef
-00020a10: 7463 6f6c 7769 6474 683d 3230 2c0a 2020  tcolwidth=20,.  
-00020a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020a30: 2020 206f 6e65 6c69 6e65 3d46 616c 7365     oneline=False
-00020a40: 2c20 7570 6772 6164 6561 626c 653d 4661  , upgradeable=Fa
-00020a50: 6c73 652c 2068 6561 6465 723d 5472 7565  lse, header=True
-00020a60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020a70: 2020 2020 2020 2920 2d3e 2062 6f6f 6c3a        ) -> bool:
-00020a80: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00020a90: 2020 2020 2050 7269 6e74 2061 206c 6973       Print a lis
-00020aa0: 7420 6f66 2074 6865 2069 6e73 7461 6c6c  t of the install
-00020ab0: 6564 2070 6c75 6769 6e73 0a20 2020 2020  ed plugins.     
-00020ac0: 2020 2022 2222 0a20 2020 2020 2020 2077     """.        w
-00020ad0: 6964 7468 2c20 6865 6967 6874 203d 205f  idth, height = _
-00020ae0: 7465 726d 7369 7a65 2829 0a20 2020 2020  termsize().     
-00020af0: 2020 2064 6573 6372 5f6d 6178 5f77 6964     descr_max_wid
-00020b00: 7468 203d 2077 6964 7468 202d 2033 360a  th = width - 36.
-00020b10: 0a20 2020 2020 2020 2069 6620 7570 6772  .        if upgr
-00020b20: 6164 6561 626c 653a 0a20 2020 2020 2020  adeable:.       
-00020b30: 2020 2020 2069 6e73 7461 6c6c 6564 203d       installed =
-00020b40: 2054 7275 650a 0a20 2020 2020 2020 2070   True..        p
-00020b50: 6c61 7466 6f72 6d20 3d20 5f73 6573 7369  latform = _sessi
-00020b60: 6f6e 2e70 6c61 7466 6f72 6d69 640a 2020  on.platformid.  
-00020b70: 2020 2020 2020 6373 6f75 6e64 7665 7273        csoundvers
-00020b80: 696f 6e20 3d20 5f73 6573 7369 6f6e 2e63  ion = _session.c
-00020b90: 736f 756e 645f 7665 7273 696f 6e0a 0a20  sound_version.. 
-00020ba0: 2020 2020 2020 2069 6620 6865 6164 6572         if header
-00020bb0: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
-00020bc0: 696e 7428 6622 4373 6f75 6e64 2056 6572  int(f"Csound Ver
-00020bd0: 7369 6f6e 3a20 7b63 736f 756e 6476 6572  sion: {csoundver
-00020be0: 7369 6f6e 7d22 290a 2020 2020 2020 2020  sion}").        
-00020bf0: 2020 2020 7072 696e 7428 290a 0a20 2020      print()..   
-00020c00: 2020 2020 2066 6f72 2070 6c75 6769 6e20       for plugin 
-00020c10: 696e 2073 656c 662e 706c 7567 696e 732e  in self.plugins.
-00020c20: 7661 6c75 6573 2829 3a0a 2020 2020 2020  values():.      
-00020c30: 2020 2020 2020 6461 7461 203d 205b 5d0a        data = [].
-00020c40: 2020 2020 2020 2020 2020 2020 696e 666f              info
-00020c50: 203d 2073 656c 662e 696e 7374 616c 6c65   = self.installe
-00020c60: 645f 706c 7567 696e 5f69 6e66 6f28 706c  d_plugin_info(pl
-00020c70: 7567 696e 290a 2020 2020 2020 2020 2020  ugin).          
-00020c80: 2020 706c 7567 696e 696e 7374 616c 6c65    plugininstalle
-00020c90: 6420 3d20 696e 666f 2069 7320 6e6f 7420  d = info is not 
-00020ca0: 4e6f 6e65 0a0a 2020 2020 2020 2020 2020  None..          
-00020cb0: 2020 6966 206e 6f74 2070 6c75 6769 6e69    if not plugini
-00020cc0: 6e73 7461 6c6c 6564 2061 6e64 2069 6e73  nstalled and ins
-00020cd0: 7461 6c6c 6564 3a0a 2020 2020 2020 2020  talled:.        
-00020ce0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00020cf0: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00020d00: 2075 7067 7261 6465 6162 6c65 2061 6e64   upgradeable and
-00020d10: 2028 6e6f 7420 696e 666f 206f 7220 696e   (not info or in
-00020d20: 666f 2e76 6572 7369 6f6e 7475 706c 6520  fo.versiontuple 
-00020d30: 3d3d 2028 302c 2030 2c20 3029 206f 720a  == (0, 0, 0) or.
-00020d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d60: 706c 7567 696e 2e76 6572 7369 6f6e 7475  plugin.versiontu
-00020d70: 706c 6520 3c3d 2069 6e66 6f2e 7665 7273  ple <= info.vers
-00020d80: 696f 6e74 7570 6c65 293a 0a20 2020 2020  iontuple):.     
-00020d90: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
-00020da0: 6e75 650a 0a20 2020 2020 2020 2020 2020  nue..           
-00020db0: 2069 6620 6e61 6d65 6f6e 6c79 3a0a 2020   if nameonly:.  
-00020dc0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00020dd0: 696e 7428 706c 7567 696e 2e6e 616d 6529  int(plugin.name)
-00020de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020df0: 2063 6f6e 7469 6e75 650a 0a20 2020 2020   continue..     
-00020e00: 2020 2020 2020 2065 7874 7261 5f6c 696e         extra_lin
-00020e10: 6573 203d 205b 5d0a 2020 2020 2020 2020  es = [].        
-00020e20: 2020 2020 6966 2069 6e66 6f3a 0a20 2020      if info:.   
-00020e30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00020e40: 696e 666f 2e76 6572 7369 6f6e 7374 7220  info.versionstr 
-00020e50: 3d3d 2055 4e4b 4e4f 574e 5f56 4552 5349  == UNKNOWN_VERSI
-00020e60: 4f4e 3a0a 2020 2020 2020 2020 2020 2020  ON:.            
-00020e70: 2020 2020 2020 2020 6461 7461 2e61 7070          data.app
-00020e80: 656e 6428 226d 616e 7561 6c22 290a 2020  end("manual").  
-00020e90: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00020ea0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00020eb0: 2020 2020 2020 2020 6966 206f 6e65 6c69          if oneli
-00020ec0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00020ed0: 2020 2020 2020 2020 2020 2020 6461 7461              data
-00020ee0: 2e61 7070 656e 6428 696e 666f 2e76 6572  .append(info.ver
-00020ef0: 7369 6f6e 7374 7229 0a20 2020 2020 2020  sionstr).       
-00020f00: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00020f10: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00020f20: 2020 2020 2020 2020 2020 2064 6174 612e             data.
-00020f30: 6170 7065 6e64 2866 2269 6e73 7461 6c6c  append(f"install
-00020f40: 6564 3a20 7b69 6e66 6f2e 7665 7273 696f  ed: {info.versio
-00020f50: 6e73 7472 7d22 290a 2020 2020 2020 2020  nstr}").        
-00020f60: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-00020f70: 6e66 6f2e 696e 7374 616c 6c65 645f 696e  nfo.installed_in
-00020f80: 5f73 7973 7465 6d5f 666f 6c64 6572 2061  _system_folder a
-00020f90: 6e64 206e 6f74 206f 6e65 6c69 6e65 3a0a  nd not oneline:.
-00020fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020fb0: 2020 2020 6578 7472 615f 6c69 6e65 732e      extra_lines.
-00020fc0: 6170 7065 6e64 2866 2250 6174 683a 207b  append(f"Path: {
-00020fd0: 696e 666f 2e64 6c6c 7061 7468 7d22 290a  info.dllpath}").
-00020fe0: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-00020ff0: 6174 613a 0a20 2020 2020 2020 2020 2020  ata:.           
-00021000: 2020 2020 2073 7461 7475 7320 3d20 225b       status = "[
-00021010: 2220 2b20 222c 2022 2e6a 6f69 6e28 6461  " + ", ".join(da
-00021020: 7461 2920 2b20 225d 220a 2020 2020 2020  ta) + "]".      
-00021030: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00021040: 2020 2020 2020 2020 2020 2020 7374 6174              stat
-00021050: 7573 203d 2022 220a 2020 2020 2020 2020  us = "".        
-00021060: 2020 2020 6c65 6674 636f 6c20 3d20 6622      leftcol = f"
-00021070: 7b70 6c75 6769 6e2e 6e61 6d65 7d20 2f7b  {plugin.name} /{
-00021080: 706c 7567 696e 2e76 6572 7369 6f6e 7d22  plugin.version}"
-00021090: 0a20 2020 2020 2020 2020 2020 2064 6573  .            des
-000210a0: 6372 203d 2070 6c75 6769 6e2e 7368 6f72  cr = plugin.shor
-000210b0: 745f 6465 7363 7269 7074 696f 6e0a 2020  t_description.  
-000210c0: 2020 2020 2020 2020 2020 6269 6e64 6566            bindef
-000210d0: 203d 2070 6c75 6769 6e2e 6669 6e64 5f62   = plugin.find_b
-000210e0: 696e 6172 7928 290a 2020 2020 2020 2020  inary().        
-000210f0: 2020 2020 6966 206e 6f74 2062 696e 6465      if not binde
-00021100: 663a 0a20 2020 2020 2020 2020 2020 2020  f:.             
-00021110: 2020 2061 7661 696c 6162 6c65 203d 2027     available = '
-00021120: 2c20 272e 6a6f 696e 2870 6c75 6769 6e2e  , '.join(plugin.
-00021130: 6176 6169 6c61 626c 655f 6269 6e61 7269  available_binari
-00021140: 6573 2829 290a 2020 2020 2020 2020 2020  es()).          
-00021150: 2020 2020 2020 6578 7472 615f 6c69 6e65        extra_line
-00021160: 732e 6170 7065 6e64 2866 222d 2d20 4e6f  s.append(f"-- No
-00021170: 2062 696e 6172 6965 7320 666f 7220 7b70   binaries for {p
-00021180: 6c61 7466 6f72 6d7d 2f7b 6373 6f75 6e64  latform}/{csound
-00021190: 7665 7273 696f 6e7d 2229 0a20 2020 2020  version}").     
-000211a0: 2020 2020 2020 2020 2020 2065 7874 7261             extra
-000211b0: 5f6c 696e 6573 2e61 7070 656e 6428 6622  _lines.append(f"
-000211c0: 2020 2041 7661 696c 6162 6c65 2062 696e     Available bin
-000211d0: 6172 6965 733a 207b 6176 6169 6c61 626c  aries: {availabl
-000211e0: 657d 2229 0a20 2020 2020 2020 2020 2020  e}").           
-000211f0: 2069 6620 6f6e 656c 696e 6520 616e 6420   if oneline and 
-00021200: 6c65 6e28 6465 7363 7229 203e 2064 6573  len(descr) > des
-00021210: 6372 5f6d 6178 5f77 6964 7468 3a0a 2020  cr_max_width:.  
-00021220: 2020 2020 2020 2020 2020 2020 2020 6465                de
-00021230: 7363 7220 3d20 6465 7363 725b 3a64 6573  scr = descr[:des
-00021240: 6372 5f6d 6178 5f77 6964 7468 5d20 2b20  cr_max_width] + 
-00021250: 22e2 80a6 220a 2020 2020 2020 2020 2020  "...".          
-00021260: 2020 7379 6d62 6f6c 203d 2022 2a22 2069    symbol = "*" i
-00021270: 6620 706c 7567 696e 696e 7374 616c 6c65  f plugininstalle
-00021280: 6420 656c 7365 2022 2d22 0a20 2020 2020  d else "-".     
-00021290: 2020 2020 2020 2070 7269 6e74 2866 227b         print(f"{
-000212a0: 7379 6d62 6f6c 7d20 7b6c 6566 7463 6f6c  symbol} {leftcol
-000212b0: 2e6c 6a75 7374 286c 6566 7463 6f6c 7769  .ljust(leftcolwi
-000212c0: 6474 6829 7d20 7c20 7b64 6573 6372 7d20  dth)} | {descr} 
-000212d0: 7b73 7461 7475 737d 2229 0a20 2020 2020  {status}").     
-000212e0: 2020 2020 2020 2069 6620 6578 7472 615f         if extra_
-000212f0: 6c69 6e65 733a 0a20 2020 2020 2020 2020  lines:.         
-00021300: 2020 2020 2020 2066 6f72 206c 696e 6520         for line 
-00021310: 696e 2065 7874 7261 5f6c 696e 6573 3a0a  in extra_lines:.
-00021320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021330: 2020 2020 7072 696e 7428 2220 2220 2a20      print(" " * 
-00021340: 6c65 6674 636f 6c77 6964 7468 202b 2066  leftcolwidth + f
-00021350: 2220 2020 7c20 2020 222c 206c 696e 6529  "   |   ", line)
-00021360: 0a20 2020 2020 2020 2070 7269 6e74 2829  .        print()
-00021370: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00021380: 5472 7565 0a0a 2020 2020 6465 6620 7368  True..    def sh
-00021390: 6f77 5f70 6c75 6769 6e28 7365 6c66 2c20  ow_plugin(self, 
-000213a0: 706c 7567 696e 6e61 6d65 3a20 7374 7229  pluginname: str)
-000213b0: 202d 3e20 626f 6f6c 3a0a 2020 2020 2020   -> bool:.      
-000213c0: 2020 2222 220a 2020 2020 2020 2020 5368    """.        Sh
-000213d0: 6f77 2069 6e66 6f20 6162 6f75 7420 6120  ow info about a 
-000213e0: 706c 7567 696e 0a0a 2020 2020 2020 2020  plugin..        
-000213f0: 5265 7475 726e 7320 5472 7565 206f 6e20  Returns True on 
-00021400: 7375 6363 6573 730a 2020 2020 2020 2020  success.        
-00021410: 2222 220a 2020 2020 2020 2020 706c 7567  """.        plug
-00021420: 6465 6620 3d20 7365 6c66 2e70 6c75 6769  def = self.plugi
-00021430: 6e73 2e67 6574 2870 6c75 6769 6e6e 616d  ns.get(pluginnam
-00021440: 6529 0a20 2020 2020 2020 2069 6620 706c  e).        if pl
-00021450: 7567 6465 6620 6973 204e 6f6e 653a 0a20  ugdef is None:. 
-00021460: 2020 2020 2020 2020 2020 205f 6572 726f             _erro
-00021470: 726d 7367 2866 2250 6c75 6769 6e20 277b  rmsg(f"Plugin '{
-00021480: 706c 7567 696e 6e61 6d65 7d27 2075 6e6b  pluginname}' unk
-00021490: 6e6f 776e 5c6e 220a 2020 2020 2020 2020  nown\n".        
-000214a0: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-000214b0: 4b6e 6f77 6e20 706c 7567 696e 733a 207b  Known plugins: {
-000214c0: 272c 2027 2e6a 6f69 6e28 7365 6c66 2e70  ', '.join(self.p
-000214d0: 6c75 6769 6e73 2e6b 6579 7328 2929 7d22  lugins.keys())}"
-000214e0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-000214f0: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
-00021500: 2020 2069 6e66 6f20 3d20 7365 6c66 2e69     info = self.i
-00021510: 6e73 7461 6c6c 6564 5f70 6c75 6769 6e5f  nstalled_plugin_
-00021520: 696e 666f 2870 6c75 6764 6566 290a 2020  info(plugdef).  
-00021530: 2020 2020 2020 7072 696e 7428 225c 6e22        print("\n"
-00021540: 0a20 2020 2020 2020 2020 2020 2020 2066  .              f
-00021550: 2250 6c75 6769 6e20 2020 2020 2020 203a  "Plugin        :
-00021560: 207b 706c 7567 6465 662e 6e61 6d65 7d20   {plugdef.name} 
-00021570: 2020 205c 6e22 0a20 2020 2020 2020 2020     \n".         
-00021580: 2020 2020 2066 2241 7574 686f 7220 2020       f"Author   
-00021590: 2020 2020 203a 207b 706c 7567 6465 662e       : {plugdef.
-000215a0: 6175 7468 6f72 7d20 287b 706c 7567 6465  author} ({plugde
-000215b0: 662e 656d 6169 6c7d 2920 5c6e 220a 2020  f.email}) \n".  
-000215c0: 2020 2020 2020 2020 2020 2020 6622 5552              f"UR
-000215d0: 4c20 2020 2020 2020 2020 2020 3a20 7b70  L           : {p
-000215e0: 6c75 6764 6566 2e75 726c 7d20 2020 2020  lugdef.url}     
-000215f0: 5c6e 220a 2020 2020 2020 2020 2020 2020  \n".            
-00021600: 2020 6622 5665 7273 696f 6e20 2020 2020    f"Version     
-00021610: 2020 3a20 7b70 6c75 6764 6566 2e76 6572    : {plugdef.ver
-00021620: 7369 6f6e 7d20 5c6e 220a 2020 2020 2020  sion} \n".      
-00021630: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00021640: 2020 6966 2069 6e66 6f3a 0a20 2020 2020    if info:.     
-00021650: 2020 2020 2020 206d 616e 6966 6573 7420         manifest 
-00021660: 3d20 696e 666f 2e69 6e73 7461 6c6c 6564  = info.installed
-00021670: 5f6d 616e 6966 6573 745f 7061 7468 2e61  _manifest_path.a
-00021680: 735f 706f 7369 7828 2920 6966 2069 6e66  s_posix() if inf
-00021690: 6f2e 696e 7374 616c 6c65 645f 6d61 6e69  o.installed_mani
-000216a0: 6665 7374 5f70 6174 6820 656c 7365 2027  fest_path else '
-000216b0: 4e6f 206d 616e 6966 6573 7420 2869 6e73  No manifest (ins
-000216c0: 7461 6c6c 6564 206d 616e 7561 6c6c 7929  talled manually)
-000216d0: 270a 2020 2020 2020 2020 2020 2020 7072  '.            pr
-000216e0: 696e 7428 6622 496e 7374 616c 6c65 6420  int(f"Installed 
-000216f0: 2020 2020 3a20 7b69 6e66 6f2e 7665 7273      : {info.vers
-00021700: 696f 6e73 7472 7d20 2870 6174 683a 207b  ionstr} (path: {
-00021710: 696e 666f 2e64 6c6c 7061 7468 2e61 735f  info.dllpath.as_
-00021720: 706f 7369 7828 297d 2920 5c6e 220a 2020  posix()}) \n".  
-00021730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021740: 6622 4d61 6e69 6665 7374 2020 2020 2020  f"Manifest      
-00021750: 3a20 7b6d 616e 6966 6573 747d 2229 0a20  : {manifest}"). 
-00021760: 2020 2020 2020 2070 7269 6e74 2866 2241         print(f"A
-00021770: 6273 7472 6163 7420 2020 2020 203a 207b  bstract      : {
-00021780: 706c 7567 6465 662e 7368 6f72 745f 6465  plugdef.short_de
-00021790: 7363 7269 7074 696f 6e7d 2229 0a20 2020  scription}").   
-000217a0: 2020 2020 2069 6620 706c 7567 6465 662e       if plugdef.
-000217b0: 6c6f 6e67 5f64 6573 6372 6970 7469 6f6e  long_description
-000217c0: 2e73 7472 6970 2829 3a0a 2020 2020 2020  .strip():.      
-000217d0: 2020 2020 2020 7072 696e 7428 2244 6573        print("Des
-000217e0: 6372 6970 7469 6f6e 3a22 290a 2020 2020  cription:").    
-000217f0: 2020 2020 2020 2020 666f 7220 6c69 6e65          for line
-00021800: 2069 6e20 7465 7874 7772 6170 2e77 7261   in textwrap.wra
-00021810: 7028 706c 7567 6465 662e 6c6f 6e67 5f64  p(plugdef.long_d
-00021820: 6573 6372 6970 7469 6f6e 2c20 3732 293a  escription, 72):
-00021830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021840: 2070 7269 6e74 2822 2022 202a 2033 2c20   print(" " * 3, 
-00021850: 6c69 6e65 290a 2020 2020 2020 2020 2020  line).          
-00021860: 2020 2320 7072 696e 7428 7465 7874 7772    # print(textwr
-00021870: 6170 2e77 7261 7069 6e64 656e 7428 2220  ap.wrapindent(" 
-00021880: 2020 2020 222c 2070 6c75 6764 6566 2e6c      ", plugdef.l
-00021890: 6f6e 675f 6465 7363 7269 7074 696f 6e29  ong_description)
-000218a0: 290a 2020 2020 2020 2020 7072 696e 7428  ).        print(
-000218b0: 6622 4f70 636f 6465 733a 2229 0a20 2020  f"Opcodes:").   
-000218c0: 2020 2020 206f 7063 7374 7273 203d 2074       opcstrs = t
-000218d0: 6578 7477 7261 702e 7772 6170 2822 2c20  extwrap.wrap(", 
-000218e0: 222e 6a6f 696e 2870 6c75 6764 6566 2e6f  ".join(plugdef.o
-000218f0: 7063 6f64 6573 292c 2037 3229 0a20 2020  pcodes), 72).   
-00021900: 2020 2020 2066 6f72 2073 2069 6e20 6f70       for s in op
-00021910: 6373 7472 733a 0a20 2020 2020 2020 2020  cstrs:.         
-00021920: 2020 2070 7269 6e74 2822 2020 2022 2c20     print("   ", 
-00021930: 7329 0a0a 2020 2020 2020 2020 6966 2070  s)..        if p
-00021940: 6c75 6764 6566 2e62 696e 6172 6965 733a  lugdef.binaries:
-00021950: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00021960: 6e74 2822 4269 6e61 7269 6573 3a22 290a  nt("Binaries:").
-00021970: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00021980: 6269 6e61 7279 2069 6e20 706c 7567 6465  binary in plugde
-00021990: 662e 6269 6e61 7269 6573 3a0a 2020 2020  f.binaries:.    
-000219a0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-000219b0: 7428 6622 2020 2020 2a20 7b62 696e 6172  t(f"    * {binar
-000219c0: 792e 706c 6174 666f 726d 7d2f 6373 6f75  y.platform}/csou
-000219d0: 6e64 7b62 696e 6172 792e 6373 6f75 6e64  nd{binary.csound
-000219e0: 5f76 6572 7369 6f6e 7d22 290a 0a20 2020  _version}")..   
-000219f0: 2020 2020 2069 6620 706c 7567 6465 662e       if plugdef.
-00021a00: 6173 7365 7473 3a0a 2020 2020 2020 2020  assets:.        
-00021a10: 2020 2020 7072 696e 7428 2241 7373 6574      print("Asset
-00021a20: 733a 2229 0a20 2020 2020 2020 2020 2020  s:").           
-00021a30: 2066 6f72 2061 7373 6574 2069 6e20 706c   for asset in pl
-00021a40: 7567 6465 662e 6173 7365 7473 3a0a 2020  ugdef.assets:.  
-00021a50: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00021a60: 696e 7428 6622 2020 2020 2a20 6964 656e  int(f"    * iden
-00021a70: 7469 6669 6572 3a20 7b5f 6162 6272 6576  tifier: {_abbrev
-00021a80: 2861 7373 6574 2e69 6465 6e74 6966 6965  (asset.identifie
-00021a90: 7228 292c 2037 3029 7d5c 6e22 0a20 2020  r(), 70)}\n".   
-00021aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021ab0: 2020 2066 2220 2020 2020 2073 6f75 7263     f"      sourc
-00021ac0: 653a 207b 6173 7365 742e 736f 7572 6365  e: {asset.source
-00021ad0: 7d5c 6e22 0a20 2020 2020 2020 2020 2020  }\n".           
-00021ae0: 2020 2020 2020 2020 2020 2066 2220 2020             f"   
-00021af0: 2020 2070 6174 7465 726e 733a 207b 272c     patterns: {',
-00021b00: 2027 2e6a 6f69 6e28 6173 7365 742e 7061   '.join(asset.pa
-00021b10: 7474 6572 6e73 297d 5c6e 220a 2020 2020  tterns)}\n".    
-00021b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021b30: 2020 6622 2020 2020 2020 706c 6174 666f    f"      platfo
-00021b40: 726d 3a20 7b61 7373 6574 2e70 6c61 7466  rm: {asset.platf
-00021b50: 6f72 6d7d 2229 0a20 2020 2020 2020 2070  orm}").        p
-00021b60: 7269 6e74 2829 0a20 2020 2020 2020 2072  rint().        r
-00021b70: 6574 7572 6e20 5472 7565 0a0a 2020 2020  eturn True..    
-00021b80: 6465 6620 756e 696e 7374 616c 6c5f 706c  def uninstall_pl
-00021b90: 7567 696e 2873 656c 662c 2070 6c75 6769  ugin(self, plugi
-00021ba0: 6e3a 2050 6c75 6769 6e2c 2072 656d 6f76  n: Plugin, remov
-00021bb0: 6561 7373 6574 733d 5472 7565 2920 2d3e  eassets=True) ->
-00021bc0: 204e 6f6e 653a 0a20 2020 2020 2020 2022   None:.        "
-00021bd0: 2222 0a20 2020 2020 2020 2055 6e69 6e73  "".        Unins
-00021be0: 7461 6c6c 2074 6865 2067 6976 656e 2070  tall the given p
-00021bf0: 6c75 6769 6e0a 0a20 2020 2020 2020 2054  lugin..        T
-00021c00: 6869 7320 6f70 6572 6174 696f 6e20 616c  his operation al
-00021c10: 736f 2072 656d 6f76 6573 2074 6865 2069  so removes the i
-00021c20: 6e73 7461 6c6c 6174 696f 6e20 6d61 6e69  nstallation mani
-00021c30: 6665 7374 2c20 6966 2074 6865 0a20 2020  fest, if the.   
-00021c40: 2020 2020 2070 6c75 6769 6e20 7761 7320       plugin was 
-00021c50: 696e 7374 616c 6c65 6420 7669 6120 7269  installed via ri
-00021c60: 7373 6574 2e20 506c 7567 696e 7320 696e  sset. Plugins in
-00021c70: 7374 616c 6c65 6420 696e 2074 6865 0a20  stalled in the. 
-00021c80: 2020 2020 2020 2073 7973 7465 6d27 7320         system's 
-00021c90: 6469 7265 6374 6f72 7920 6e65 6564 2074  directory need t
-00021ca0: 6f20 6265 2072 656d 6f76 6564 206d 616e  o be removed man
-00021cb0: 7561 6c6c 792e 0a0a 2020 2020 2020 2020  ually...        
-00021cc0: 5261 6973 6573 2052 756e 7469 6d65 4572  Raises RuntimeEr
-00021cd0: 726f 7220 6966 2074 6865 2070 6c75 6769  ror if the plugi
-00021ce0: 6e20 6973 206e 6f74 2069 6e73 7461 6c6c  n is not install
-00021cf0: 6564 206f 7220 6973 2069 6e73 7461 6c6c  ed or is install
-00021d00: 6564 0a20 2020 2020 2020 2069 6e20 7468  ed.        in th
-00021d10: 6520 7379 7374 656d 2773 2066 6f6c 6465  e system's folde
-00021d20: 722e 0a0a 2020 2020 2020 2020 4172 6773  r...        Args
-00021d30: 3a0a 2020 2020 2020 2020 2020 2020 706c  :.            pl
-00021d40: 7567 696e 3a20 7468 6520 706c 7567 696e  ugin: the plugin
-00021d50: 2074 6f20 756e 696e 7374 616c 6c0a 2020   to uninstall.  
-00021d60: 2020 2020 2020 2020 2020 7265 6d6f 7665            remove
-00021d70: 6173 7365 7473 3a20 6966 2054 7275 652c  assets: if True,
-00021d80: 2072 656d 6f76 6573 2074 6865 2061 7373   removes the ass
-00021d90: 6574 7320 696e 7374 616c 6c65 6420 6279  ets installed by
-00021da0: 2074 6869 7320 706c 7567 696e 0a20 2020   this plugin.   
-00021db0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00021dc0: 2069 6e66 6f20 3d20 7365 6c66 2e69 6e73   info = self.ins
-00021dd0: 7461 6c6c 6564 5f70 6c75 6769 6e5f 696e  talled_plugin_in
-00021de0: 666f 2870 6c75 6769 6e29 0a20 2020 2020  fo(plugin).     
-00021df0: 2020 2069 6620 6e6f 7420 696e 666f 3a0a     if not info:.
-00021e00: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00021e10: 6520 5275 6e74 696d 6545 7272 6f72 2866  e RuntimeError(f
-00021e20: 2250 6c75 6769 6e20 7b70 6c75 6769 6e2e  "Plugin {plugin.
-00021e30: 6e61 6d65 7d20 6973 206e 6f74 2069 6e73  name} is not ins
-00021e40: 7461 6c6c 6564 2229 0a20 2020 2020 2020  talled").       
-00021e50: 2069 6620 6e6f 7420 696e 666f 2e64 6c6c   if not info.dll
-00021e60: 7061 7468 2e65 7869 7374 7328 293a 0a20  path.exists():. 
-00021e70: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00021e80: 2052 756e 7469 6d65 4572 726f 7228 6622   RuntimeError(f"
-00021e90: 436f 756c 6420 6e6f 7420 6669 6e64 2062  Could not find b
-00021ea0: 696e 6172 7920 666f 7220 706c 7567 696e  inary for plugin
-00021eb0: 207b 706c 7567 696e 2e6e 616d 657d 2e20   {plugin.name}. 
-00021ec0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00021ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021ee0: 2066 2244 6563 6c61 7265 6420 6269 6e61   f"Declared bina
-00021ef0: 7279 3a20 7b69 6e66 6f2e 646c 6c70 6174  ry: {info.dllpat
-00021f00: 682e 6173 5f70 6f73 6978 2829 7d22 290a  h.as_posix()}").
-00021f10: 2020 2020 2020 2020 6966 2069 6e66 6f2e          if info.
-00021f20: 696e 7374 616c 6c65 645f 696e 5f73 7973  installed_in_sys
-00021f30: 7465 6d5f 666f 6c64 6572 3a0a 2020 2020  tem_folder:.    
-00021f40: 2020 2020 2020 2020 7261 6973 6520 5275          raise Ru
-00021f50: 6e74 696d 6545 7272 6f72 2866 2250 6c75  ntimeError(f"Plu
-00021f60: 6769 6e20 6973 2069 6e73 7461 6c6c 6564  gin is installed
-00021f70: 2069 6e20 7468 6520 7379 7374 656d 2066   in the system f
-00021f80: 6f6c 6465 7220 616e 6420 6e65 6564 7320  older and needs 
-00021f90: 746f 220a 2020 2020 2020 2020 2020 2020  to".            
-00021fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021fb0: 2020 2066 2220 6265 2072 656d 6f76 6564     f" be removed
-00021fc0: 206d 616e 7561 6c6c 792e 2050 6174 683a   manually. Path:
-00021fd0: 207b 696e 666f 2e64 6c6c 7061 7468 2e61   {info.dllpath.a
-00021fe0: 735f 706f 7369 7828 297d 2229 0a20 2020  s_posix()}").   
-00021ff0: 2020 2020 206f 732e 7265 6d6f 7665 2869       os.remove(i
-00022000: 6e66 6f2e 646c 6c70 6174 682e 6173 5f70  nfo.dllpath.as_p
-00022010: 6f73 6978 2829 290a 2020 2020 2020 2020  osix()).        
-00022020: 6173 7365 7274 206e 6f74 2069 6e66 6f2e  assert not info.
-00022030: 646c 6c70 6174 682e 6578 6973 7473 2829  dllpath.exists()
-00022040: 2c20 6622 4174 7465 6d70 7465 6420 746f  , f"Attempted to
-00022050: 2072 656d 6f76 6520 7b69 6e66 6f2e 646c   remove {info.dl
-00022060: 6c70 6174 682e 6173 5f70 6f73 6978 2829  lpath.as_posix()
-00022070: 7d2c 2062 7574 2066 6169 6c65 6422 0a20  }, but failed". 
-00022080: 2020 2020 2020 206d 616e 6966 6573 7470         manifestp
-00022090: 6174 6820 3d20 696e 666f 2e69 6e73 7461  ath = info.insta
-000220a0: 6c6c 6564 5f6d 616e 6966 6573 745f 7061  lled_manifest_pa
-000220b0: 7468 0a20 2020 2020 2020 2061 7373 6574  th.        asset
-000220c0: 7366 6f6c 6465 7220 3d20 5249 5353 4554  sfolder = RISSET
-000220d0: 5f41 5353 4554 535f 5041 5448 202f 2070  _ASSETS_PATH / p
-000220e0: 6c75 6769 6e2e 6e61 6d65 0a20 2020 2020  lugin.name.     
-000220f0: 2020 2069 6620 6d61 6e69 6665 7374 7061     if manifestpa
-00022100: 7468 2061 6e64 206d 616e 6966 6573 7470  th and manifestp
-00022110: 6174 682e 6578 6973 7473 2829 3a0a 2020  ath.exists():.  
-00022120: 2020 2020 2020 2020 2020 696e 7374 616c            instal
-00022130: 6c65 645f 6d61 6e69 6665 7374 203d 205f  led_manifest = _
-00022140: 6c6f 6164 5f69 6e73 7461 6c6c 6174 696f  load_installatio
-00022150: 6e5f 6d61 6e69 6665 7374 286d 616e 6966  n_manifest(manif
-00022160: 6573 7470 6174 6829 0a20 2020 2020 2020  estpath).       
-00022170: 2020 2020 2061 7373 6574 6669 6c65 7320       assetfiles 
-00022180: 3d20 696e 7374 616c 6c65 645f 6d61 6e69  = installed_mani
-00022190: 6665 7374 2e67 6574 2827 6173 7365 7466  fest.get('assetf
-000221a0: 696c 6573 272c 205b 5d29 0a20 2020 2020  iles', []).     
-000221b0: 2020 2020 2020 2069 6620 7265 6d6f 7665         if remove
-000221c0: 6173 7365 7473 2061 6e64 2061 7373 6574  assets and asset
-000221d0: 7366 6f6c 6465 722e 6578 6973 7473 2829  sfolder.exists()
-000221e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000221f0: 2020 5f64 6562 7567 2866 2252 656d 6f76    _debug(f"Remov
-00022200: 696e 6720 6173 7365 7473 2066 6f72 2070  ing assets for p
-00022210: 6c75 6769 6e20 7b70 6c75 6769 6e2e 6e61  lugin {plugin.na
-00022220: 6d65 7d3a 207b 6173 7365 7466 696c 6573  me}: {assetfiles
-00022230: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
-00022240: 2020 2020 666f 7220 6173 7365 7466 696c      for assetfil
-00022250: 6520 696e 2061 7373 6574 6669 6c65 733a  e in assetfiles:
-00022260: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022270: 2020 2020 2061 7373 6574 6675 6c6c 7061       assetfullpa
-00022280: 7468 203d 2061 7373 6574 7366 6f6c 6465  th = assetsfolde
-00022290: 7220 2f20 6173 7365 7466 696c 650a 2020  r / assetfile.  
-000222a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000222b0: 2020 6966 2061 7373 6574 6675 6c6c 7061    if assetfullpa
-000222c0: 7468 2e65 7869 7374 7328 293a 0a20 2020  th.exists():.   
-000222d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000222e0: 2020 2020 206f 732e 7265 6d6f 7665 2861       os.remove(a
-000222f0: 7373 6574 6675 6c6c 7061 7468 290a 2020  ssetfullpath).  
-00022300: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00022310: 6d61 696e 696e 6761 7373 6574 7320 3d20  mainingassets = 
-00022320: 6c69 7374 2861 7373 6574 7366 6f6c 6465  list(assetsfolde
-00022330: 722e 676c 6f62 2822 2a22 2929 0a20 2020  r.glob("*")).   
-00022340: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00022350: 7265 6d61 696e 696e 6761 7373 6574 733a  remainingassets:
-00022360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022370: 2020 2020 205f 696e 666f 2866 2254 6865       _info(f"The
-00022380: 7265 2061 7265 2072 656d 6169 6e69 6e67  re are remaining
-00022390: 2061 7373 6574 7320 696e 2074 6865 2066   assets in the f
-000223a0: 6f6c 6465 7220 7b61 7373 6574 7366 6f6c  older {assetsfol
-000223b0: 6465 727d 3a20 7b27 2c20 272e 6a6f 696e  der}: {', '.join
-000223c0: 2870 2e61 735f 706f 7369 7828 2920 666f  (p.as_posix() fo
-000223d0: 7220 7020 696e 2072 656d 6169 6e69 6e67  r p in remaining
-000223e0: 6173 7365 7473 297d 2229 0a20 2020 2020  assets)}").     
-000223f0: 2020 2020 2020 2020 2020 2020 2020 205f                 _
-00022400: 696e 666f 2822 2e2e 2e20 5468 6579 2077  info("... They w
-00022410: 696c 6c20 6265 2072 656d 6f76 6564 2229  ill be removed")
-00022420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022430: 205f 726d 5f64 6972 2861 7373 6574 7366   _rm_dir(assetsf
-00022440: 6f6c 6465 7229 0a20 2020 2020 2020 2020  older).         
-00022450: 2020 206f 732e 7265 6d6f 7665 286d 616e     os.remove(man
-00022460: 6966 6573 7470 6174 682e 6173 5f70 6f73  ifestpath.as_pos
-00022470: 6978 2829 290a 0a20 2020 2064 6566 2069  ix())..    def i
-00022480: 6e73 7461 6c6c 5f61 7373 6574 2873 656c  nstall_asset(sel
-00022490: 662c 2061 7373 6574 3a20 4173 7365 742c  f, asset: Asset,
-000224a0: 2070 7265 6669 783a 2073 7472 2920 2d3e   prefix: str) ->
-000224b0: 206c 6973 745b 7374 725d 3a0a 2020 2020   list[str]:.    
-000224c0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000224d0: 496e 7374 616c 6c20 616e 2041 7373 6574  Install an Asset
-000224e0: 2075 6e64 6572 2061 2067 6976 656e 2070   under a given p
-000224f0: 7265 6669 780a 0a20 2020 2020 2020 2041  refix..        A
-00022500: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-00022510: 2061 7373 6574 3a20 7468 6520 4173 7365   asset: the Asse
-00022520: 7420 746f 2069 6e73 7461 6c6c 0a20 2020  t to install.   
-00022530: 2020 2020 2020 2020 2070 7265 6669 783a           prefix:
-00022540: 2074 6865 2070 7265 6669 7820 746f 2069   the prefix to i
-00022550: 6e73 7461 6c6c 2069 7420 756e 6465 722e  nstall it under.
-00022560: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
-00022570: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
-00022580: 206c 6973 7420 6f66 2069 6e73 7461 6c6c   list of install
-00022590: 6564 2066 696c 6520 6e61 6d65 7320 286f  ed file names (o
-000225a0: 6e6c 7920 7468 6520 6669 6c65 6e61 6d65  nly the filename
-000225b0: 2c20 6e6f 7420 7468 650a 2020 2020 2020  , not the.      
-000225c0: 2020 2020 2020 6162 736f 6c75 7465 2070        absolute p
-000225d0: 6174 682c 2074 6865 2064 6573 7469 6e61  ath, the destina
-000225e0: 7469 6f6e 2070 6174 6820 6973 2052 4953  tion path is RIS
-000225f0: 5345 545f 4153 5345 5453 5f50 4154 4820  SET_ASSETS_PATH 
-00022600: 2f20 7072 6566 6978 290a 2020 2020 2020  / prefix).      
-00022610: 2020 2222 220a 2020 2020 2020 2020 6465    """.        de
-00022620: 7374 696e 6174 696f 6e5f 666f 6c64 6572  stination_folder
-00022630: 203d 2052 4953 5345 545f 4153 5345 5453   = RISSET_ASSETS
-00022640: 5f50 4154 4820 2f20 7072 6566 6978 0a20  _PATH / prefix. 
-00022650: 2020 2020 2020 2073 6f75 7263 6573 203d         sources =
-00022660: 2061 7373 6574 2e72 6574 7269 6576 6528   asset.retrieve(
-00022670: 290a 2020 2020 2020 2020 6465 7374 696e  ).        destin
-00022680: 6174 696f 6e5f 666f 6c64 6572 2e6d 6b64  ation_folder.mkd
-00022690: 6972 2870 6172 656e 7473 3d54 7275 652c  ir(parents=True,
-000226a0: 2065 7869 7374 5f6f 6b3d 5472 7565 290a   exist_ok=True).
-000226b0: 2020 2020 2020 2020 666f 7220 736f 7572          for sour
-000226c0: 6365 2069 6e20 736f 7572 6365 733a 0a20  ce in sources:. 
-000226d0: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
-000226e0: 6728 6622 436f 7079 696e 6720 6173 7365  g(f"Copying asse
-000226f0: 7420 7b73 6f75 7263 657d 2074 6f20 7b64  t {source} to {d
-00022700: 6573 7469 6e61 7469 6f6e 5f66 6f6c 6465  estination_folde
-00022710: 727d 2229 0a20 2020 2020 2020 2020 2020  r}").           
-00022720: 2069 6620 736f 7572 6365 2e69 735f 6469   if source.is_di
-00022730: 7228 293a 0a20 2020 2020 2020 2020 2020  r():.           
-00022740: 2020 2020 2073 6875 7469 6c2e 636f 7079       shutil.copy
-00022750: 7472 6565 2873 6f75 7263 652c 2064 6573  tree(source, des
-00022760: 7469 6e61 7469 6f6e 5f66 6f6c 6465 722f  tination_folder/
-00022770: 736f 7572 6365 2e6e 616d 6529 0a20 2020  source.name).   
-00022780: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00022790: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000227a0: 6875 7469 6c2e 636f 7079 2873 6f75 7263  hutil.copy(sourc
-000227b0: 652c 2064 6573 7469 6e61 7469 6f6e 5f66  e, destination_f
-000227c0: 6f6c 6465 7229 0a20 2020 2020 2020 2072  older).        r
-000227d0: 6574 7572 6e20 5b66 2e6e 616d 6520 666f  eturn [f.name fo
-000227e0: 7220 6620 696e 2073 6f75 7263 6573 5d0a  r f in sources].
-000227f0: 0a20 2020 2064 6566 2067 656e 6572 6174  .    def generat
-00022800: 655f 6f70 636f 6465 735f 786d 6c28 7365  e_opcodes_xml(se
-00022810: 6c66 2920 2d3e 2073 7472 3a0a 2020 2020  lf) -> str:.    
-00022820: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00022830: 4765 6e65 7261 7465 7320 786d 6c20 666f  Generates xml fo
-00022840: 6c6c 6f77 696e 6720 7468 6520 7363 6865  llowing the sche
-00022850: 6d65 206f 6620 7468 6520 6d61 6e75 616c  me of the manual
-00022860: 2773 206f 7063 6f64 6573 2e78 6d6c 0a0a  's opcodes.xml..
-00022870: 2020 2020 2020 2020 5468 6973 2063 616e          This can
-00022880: 2062 6520 7573 6564 2062 7920 6672 6f6e   be used by fron
-00022890: 7465 6e64 7320 746f 2067 656e 6572 6174  tends to generat
-000228a0: 6520 6865 6c70 2066 6f72 2061 6c6c 2063  e help for all c
-000228b0: 736f 756e 6420 6f70 636f 6465 730a 0a20  sound opcodes.. 
-000228c0: 2020 2020 2020 203c 3f78 6d6c 2076 6572         <?xml ver
-000228d0: 7369 6f6e 3d22 312e 3022 2065 6e63 6f64  sion="1.0" encod
-000228e0: 696e 673d 2255 5446 2d38 223f 3e0a 2020  ing="UTF-8"?>.  
-000228f0: 2020 2020 2020 3c6f 7063 6f64 6573 3e0a        <opcodes>.
-00022900: 2020 2020 2020 2020 2020 3c63 6174 6567            <categ
-00022910: 6f72 7920 6e61 6d65 3d22 4f72 6368 6573  ory name="Orches
-00022920: 7472 6120 5379 6e74 6178 3a48 6561 6465  tra Syntax:Heade
-00022930: 7222 3e0a 2020 2020 2020 2020 2020 2020  r">.            
-00022940: 3c6f 7063 6f64 653e 0a20 2020 2020 2020  <opcode>.       
-00022950: 2020 2020 2020 203c 6465 7363 3e53 6574         <desc>Set
-00022960: 7320 7468 6520 7661 6c75 6520 6f66 2030  s the value of 0
-00022970: 2064 6563 6962 656c 7320 7573 696e 6720   decibels using 
-00022980: 6675 6c6c 2073 6361 6c65 2061 6d70 6c69  full scale ampli
-00022990: 7475 6465 2e3c 2f64 6573 633e 0a20 2020  tude.</desc>.   
-000229a0: 2020 2020 2020 2020 2020 203c 7379 6e6f             <syno
-000229b0: 7073 6973 3e0a 2020 2020 2020 2020 2020  psis>.          
-000229c0: 2020 2020 2020 3c6f 7063 6f64 656e 616d        <opcodenam
-000229d0: 653e 3064 6266 733c 2f6f 7063 6f64 656e  e>0dbfs</opcoden
-000229e0: 616d 653e 203d 2069 6172 670a 2020 2020  ame> = iarg.    
-000229f0: 2020 2020 2020 2020 2020 3c2f 7379 6e6f            </syno
-00022a00: 7073 6973 3e0a 2020 2020 2020 2020 2020  psis>.          
-00022a10: 2020 3c2f 6f70 636f 6465 3e0a 2020 2020    </opcode>.    
-00022a20: 2020 2020 2020 2020 3c6f 7063 6f64 653e          <opcode>
-00022a30: 0a20 2020 2020 2020 2020 2020 2020 203c  .              <
-00022a40: 6465 7363 3e41 6e20 6f73 6369 6c6c 6174  desc>An oscillat
-00022a50: 6f72 2077 6869 6368 2074 616b 6573 2074  or which takes t
-00022a60: 6f6e 616c 6974 7920 616e 6420 6272 6967  onality and brig
-00022a70: 6874 6e65 7373 2061 7320 6172 6775 6d65  htness as argume
-00022a80: 6e74 732e 3c2f 6465 7363 3e0a 2020 2020  nts.</desc>.    
-00022a90: 2020 2020 2020 2020 2020 3c73 796e 6f70            <synop
-00022aa0: 7369 733e 6172 6573 203c 6f70 636f 6465  sis>ares <opcode
-00022ab0: 6e61 6d65 3e68 7362 6f73 6369 6c3c 2f6f  name>hsboscil</o
-00022ac0: 7063 6f64 656e 616d 653e 206b 616d 702c  pcodename> kamp,
-00022ad0: 206b 746f 6e65 2c20 6b62 7269 7465 2c20   ktone, kbrite, 
-00022ae0: 6962 6173 6672 6571 2c20 6977 666e 2c20  ibasfreq, iwfn, 
-00022af0: 696f 6374 666e 205c 0a20 2020 2020 2020  ioctfn \.       
-00022b00: 2020 2020 2020 2020 5b2c 2069 6f63 7463          [, ioctc
-00022b10: 6e74 5d20 5b2c 2069 7068 735d 0a20 2020  nt] [, iphs].   
-00022b20: 2020 2020 2020 2020 2020 203c 2f73 796e             </syn
-00022b30: 6f70 7369 733e 0a20 2020 2020 2020 2020  opsis>.         
-00022b40: 2020 203c 2f6f 7063 6f64 653e 0a20 2020     </opcode>.   
-00022b50: 2020 2020 2020 2020 202e 2e2e 0a20 2020           ....   
-00022b60: 2020 2020 2020 203c 2f63 6174 6567 6f72         </categor
-00022b70: 793e 0a20 2020 2020 2020 2020 202e 2e2e  y>.          ...
-00022b80: 0a20 2020 2020 2020 203c 2f6f 7063 6f64  .        </opcod
-00022b90: 6573 3e0a 2020 2020 2020 2020 2222 220a  es>.        """.
-00022ba0: 2020 2020 2020 2020 6c69 6e65 7320 3d20          lines = 
-00022bb0: 205b 5d0a 2020 2020 2020 2020 696e 6465   [].        inde
-00022bc0: 6e74 7769 6474 6820 3d20 320a 0a20 2020  ntwidth = 2..   
-00022bd0: 2020 2020 2064 6566 205f 2873 2c20 696e       def _(s, in
-00022be0: 6465 6e74 3d30 293a 0a20 2020 2020 2020  dent=0):.       
-00022bf0: 2020 2020 2069 6620 696e 6465 6e74 203e       if indent >
-00022c00: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00022c10: 2020 2020 7320 3d20 2822 2022 2a28 696e      s = (" "*(in
-00022c20: 6465 6e74 2a69 6e64 656e 7477 6964 7468  dent*indentwidth
-00022c30: 2929 202b 2073 0a20 2020 2020 2020 2020  )) + s.         
-00022c40: 2020 206c 696e 6573 2e61 7070 656e 6428     lines.append(
-00022c50: 7329 0a0a 2020 2020 2020 2020 5f28 273c  s)..        _('<
-00022c60: 3f78 6d6c 2076 6572 7369 6f6e 3d22 312e  ?xml version="1.
-00022c70: 3022 2065 6e63 6f64 696e 673d 2255 5446  0" encoding="UTF
-00022c80: 2d38 223f 3e27 290a 2020 2020 2020 2020  -8"?>').        
-00022c90: 5f28 273c 6f70 636f 6465 733e 2729 0a20  _('<opcodes>'). 
-00022ca0: 2020 2020 2020 2023 2046 6f72 206e 6f77         # For now
-00022cb0: 2c20 6761 7468 6572 2061 6c6c 206f 7063  , gather all opc
-00022cc0: 6f64 6573 2062 656c 6f6e 6769 6e67 2074  odes belonging t
-00022cd0: 6f20 6f6e 6520 706c 7567 696e 2075 6e64  o one plugin und
-00022ce0: 6572 2074 6865 2073 616d 6520 6361 7465  er the same cate
-00022cf0: 676f 7279 2e20 4c61 7465 7220 7765 2063  gory. Later we c
-00022d00: 616e 0a20 2020 2020 2020 2023 2065 6e66  an.        # enf
-00022d10: 6f72 6365 2074 6861 7420 6561 6368 2070  orce that each p
-00022d20: 6c75 6769 6e20 6465 6669 6e65 7320 6120  lugin defines a 
-00022d30: 6361 7465 676f 7279 2069 6e20 7468 6569  category in thei
-00022d40: 7220 6d61 6e70 6167 650a 2020 2020 2020  r manpage.      
-00022d50: 2020 6f70 636f 6465 7320 3d20 7365 6c66    opcodes = self
-00022d60: 2e6f 7063 6f64 6573 5f62 795f 6e61 6d65  .opcodes_by_name
-00022d70: 2829 0a20 2020 2020 2020 2066 6f72 2070  ().        for p
-00022d80: 6c75 6769 6e20 696e 2073 656c 662e 706c  lugin in self.pl
-00022d90: 7567 696e 732e 7661 6c75 6573 2829 3a0a  ugins.values():.
-00022da0: 2020 2020 2020 2020 2020 2020 5f28 6627              _(f'
-00022db0: 3c63 6174 6567 6f72 7920 6e61 6d65 3d22  <category name="
-00022dc0: 4578 7465 726e 616c 2050 6c75 6769 6e3a  External Plugin:
-00022dd0: 7b70 6c75 6769 6e2e 6e61 6d65 7d22 3e27  {plugin.name}">'
-00022de0: 2c20 3129 0a20 2020 2020 2020 2020 2020  , 1).           
-00022df0: 2066 6f72 206f 7063 6f64 656e 616d 6520   for opcodename 
-00022e00: 696e 2070 6c75 6769 6e2e 6f70 636f 6465  in plugin.opcode
-00022e10: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00022e20: 2020 206f 7063 6f64 6520 3d20 6f70 636f     opcode = opco
-00022e30: 6465 732e 6765 7428 6f70 636f 6465 6e61  des.get(opcodena
-00022e40: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
-00022e50: 2020 2020 6966 206e 6f74 206f 7063 6f64      if not opcod
-00022e60: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00022e70: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-00022e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022e90: 6d61 6e70 6167 6520 3d20 7365 6c66 2e70  manpage = self.p
-00022ea0: 6172 7365 5f6d 616e 7061 6765 286f 7063  arse_manpage(opc
-00022eb0: 6f64 656e 616d 6529 0a20 2020 2020 2020  odename).       
-00022ec0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00022ed0: 6d61 6e70 6167 653a 0a20 2020 2020 2020  manpage:.       
-00022ee0: 2020 2020 2020 2020 2020 2020 205f 6572               _er
-00022ef0: 726f 726d 7367 2866 224e 6f20 6d61 6e70  rormsg(f"No manp
-00022f00: 6167 6520 666f 756e 6420 666f 7220 6f70  age found for op
-00022f10: 636f 6465 207b 6f70 636f 6465 6e61 6d65  code {opcodename
-00022f20: 7d2c 2073 6b69 7070 696e 6722 290a 2020  }, skipping").  
-00022f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022f40: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-00022f50: 2020 2020 2020 2020 2020 205f 2866 273c             _(f'<
-00022f60: 6f70 636f 6465 206e 616d 653d 227b 6f70  opcode name="{op
-00022f70: 636f 6465 6e61 6d65 7d22 3e27 2c20 3229  codename}">', 2)
-00022f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00022f90: 205f 2866 223c 6465 7363 3e7b 6d61 6e70   _(f"<desc>{manp
-00022fa0: 6167 652e 6162 7374 7261 6374 7d3c 2f64  age.abstract}</d
-00022fb0: 6573 633e 222c 2033 290a 2020 2020 2020  esc>", 3).      
-00022fc0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00022fd0: 206d 616e 7061 6765 2e73 796e 7461 7865   manpage.syntaxe
-00022fe0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00022ff0: 2020 2020 2020 205f 6572 726f 726d 7367         _errormsg
-00023000: 2866 224e 6f20 7379 6e74 6178 6573 2066  (f"No syntaxes f
-00023010: 6f75 6e64 2066 6f72 206f 7063 6f64 6520  ound for opcode 
-00023020: 7b6f 7063 6f64 656e 616d 657d 2c20 736b  {opcodename}, sk
-00023030: 6970 7069 6e67 2229 0a20 2020 2020 2020  ipping").       
-00023040: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00023050: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
-00023060: 2020 2020 2020 666f 7220 7379 6e74 6178        for syntax
-00023070: 2069 6e20 6d61 6e70 6167 652e 7379 6e74   in manpage.synt
-00023080: 6178 6573 3a0a 2020 2020 2020 2020 2020  axes:.          
-00023090: 2020 2020 2020 2020 2020 7379 6e74 6178            syntax
-000230a0: 203d 2073 796e 7461 782e 7265 706c 6163   = syntax.replac
-000230b0: 6528 6f70 636f 6465 6e61 6d65 2c20 6622  e(opcodename, f"
-000230c0: 3c6f 7063 6f64 656e 616d 653e 7b6f 7063  <opcodename>{opc
-000230d0: 6f64 656e 616d 657d 3c2f 6f70 636f 6465  odename}</opcode
-000230e0: 6e61 6d65 3e22 290a 2020 2020 2020 2020  name>").        
-000230f0: 2020 2020 2020 2020 2020 2020 5f28 6622              _(f"
-00023100: 3c73 796e 6f70 7369 733e 7b73 796e 7461  <synopsis>{synta
-00023110: 787d 3c2f 7379 6e6f 7073 6973 3e22 2c20  x}</synopsis>", 
-00023120: 3329 0a20 2020 2020 2020 2020 2020 2020  3).             
-00023130: 2020 205f 2822 3c2f 6f70 636f 6465 3e22     _("</opcode>"
-00023140: 2c20 3229 0a20 2020 2020 2020 2020 2020  , 2).           
-00023150: 205f 2827 3c2f 6361 7465 676f 7279 3e27   _('</category>'
-00023160: 2c20 3129 0a20 2020 2020 2020 205f 2827  , 1).        _('
-00023170: 3c2f 6f70 636f 6465 733e 2729 0a20 2020  </opcodes>').   
-00023180: 2020 2020 2072 6574 7572 6e20 225c 6e22       return "\n"
-00023190: 2e6a 6f69 6e28 6c69 6e65 7329 0a0a 0a23  .join(lines)...#
-000231a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000231b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000231c0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000231d0: 2323 2323 2323 2323 2323 2323 2323 0a23  ##############.#
-000231e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000231f0: 2020 2020 2020 2020 446f 6375 6d65 6e74          Document
-00023200: 6174 696f 6e20 2020 2020 2020 2020 2020  ation           
-00023210: 2020 2020 2020 2020 2020 2020 2023 0a23               #.#
-00023220: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00023230: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00023240: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00023250: 2323 2323 2323 2323 2323 2323 2323 0a0a  ##############..
-00023260: 0a64 6566 205f 6973 5f70 6163 6b61 6765  .def _is_package
-00023270: 5f69 6e73 7461 6c6c 6564 2870 6b67 3a20  _installed(pkg: 
-00023280: 7374 7229 202d 3e20 626f 6f6c 3a0a 2020  str) -> bool:.  
-00023290: 2020 696d 706f 7274 2069 6d70 6f72 746c    import importl
-000232a0: 6962 2e75 7469 6c0a 2020 2020 7265 7475  ib.util.    retu
-000232b0: 726e 2069 6d70 6f72 746c 6962 2e75 7469  rn importlib.uti
-000232c0: 6c2e 6669 6e64 5f73 7065 6328 706b 6729  l.find_spec(pkg)
-000232d0: 2069 7320 6e6f 7420 4e6f 6e65 0a0a 0a64   is not None...d
-000232e0: 6566 205f 6361 6c6c 5f6d 6b64 6f63 7328  ef _call_mkdocs(
-000232f0: 666f 6c64 6572 3a20 5061 7468 2c20 2a61  folder: Path, *a
-00023300: 7267 733a 2073 7472 2920 2d3e 204e 6f6e  rgs: str) -> Non
-00023310: 653a 0a20 2020 2063 7572 7265 6e74 6469  e:.    currentdi
-00023320: 7220 3d20 6f73 2e67 6574 6377 6428 290a  r = os.getcwd().
-00023330: 2020 2020 6f73 2e63 6864 6972 2866 6f6c      os.chdir(fol
-00023340: 6465 7229 0a20 2020 205f 6465 6275 6728  der).    _debug(
-00023350: 6622 5265 6e64 6572 696e 6720 646f 6373  f"Rendering docs
-00023360: 2076 6961 206d 6b64 6f63 732e 2043 7572   via mkdocs. Cur
-00023370: 7265 6e74 2064 6972 3a20 7b6f 732e 6765  rent dir: {os.ge
-00023380: 7463 7764 2829 7d22 290a 2020 2020 5f73  tcwd()}").    _s
-00023390: 7562 7072 6f63 5f63 616c 6c28 5b73 7973  ubproc_call([sys
-000233a0: 2e65 7865 6375 7461 626c 652c 2022 2d6d  .executable, "-m
-000233b0: 222c 2022 6d6b 646f 6373 225d 202b 206c  ", "mkdocs"] + l
-000233c0: 6973 7428 6172 6773 2929 0a20 2020 206f  ist(args)).    o
-000233d0: 732e 6368 6469 7228 6375 7272 656e 7464  s.chdir(currentd
-000233e0: 6972 290a 0a0a 6465 6620 5f69 735f 6d6b  ir)...def _is_mk
-000233f0: 646f 6373 5f69 6e73 7461 6c6c 6564 2829  docs_installed()
-00023400: 202d 3e20 626f 6f6c 3a0a 2020 2020 7265   -> bool:.    re
-00023410: 7475 726e 205f 6973 5f70 6163 6b61 6765  turn _is_package
-00023420: 5f69 6e73 7461 6c6c 6564 2822 6d6b 646f  _installed("mkdo
-00023430: 6373 2229 206f 7220 7368 7574 696c 2e77  cs") or shutil.w
-00023440: 6869 6368 2822 6d6b 646f 6373 2229 2069  hich("mkdocs") i
-00023450: 7320 6e6f 7420 4e6f 6e65 0a0a 0a64 6566  s not None...def
-00023460: 205f 6765 6e65 7261 7465 5f64 6f63 756d   _generate_docum
-00023470: 656e 7461 7469 6f6e 2869 6e64 6578 3a20  entation(index: 
-00023480: 4d61 696e 496e 6465 782c 2064 6573 743a  MainIndex, dest:
-00023490: 2050 6174 6820 3d20 4e6f 6e65 2c0a 2020   Path = None,.  
-000234a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000234b0: 2020 2020 2020 2020 2020 6275 696c 6468            buildh
-000234c0: 746d 6c3d 5472 7565 2c20 6f6e 6c79 696e  tml=True, onlyin
-000234d0: 7374 616c 6c65 643d 4661 6c73 652c 0a20  stalled=False,. 
-000234e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000234f0: 2020 2020 2020 2020 2020 206f 7063 6f64             opcod
-00023500: 6573 786d 6c3a 2050 6174 6820 3d20 4e6f  esxml: Path = No
-00023510: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-00023520: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00023530: 202d 3e20 5061 7468 3a0a 2020 2020 2222   -> Path:.    ""
-00023540: 220a 2020 2020 4765 6e65 7261 7465 2064  ".    Generate d
-00023550: 6f63 756d 656e 7461 7469 6f6e 2066 6f72  ocumentation for
-00023560: 2074 6865 2070 6c75 6769 6e73 0a0a 2020   the plugins..  
-00023570: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
-00023580: 696e 6465 783a 2074 6865 206d 6169 6e20  index: the main 
-00023590: 696e 6465 780a 2020 2020 2020 2020 6465  index.        de
-000235a0: 7374 3a20 7468 6520 7061 7468 2077 6865  st: the path whe
-000235b0: 7265 2074 6f20 7075 7420 7468 6520 2264  re to put the "d
-000235c0: 6f63 7322 2066 6f6c 6465 720a 2020 2020  ocs" folder.    
-000235d0: 2020 2020 6275 696c 6468 746d 6c3a 2069      buildhtml: i
-000235e0: 6620 5472 7565 2c20 6361 6c6c 206d 6b64  f True, call mkd
-000235f0: 6f63 7320 746f 2062 7569 6c64 2068 746d  ocs to build htm
-00023600: 6c20 646f 6375 6d65 6e74 6174 696f 6e0a  l documentation.
-00023610: 2020 2020 2020 2020 6f6e 6c79 696e 7374          onlyinst
-00023620: 616c 6c65 643a 2069 6620 5472 7565 2c20  alled: if True, 
-00023630: 6f6e 6c79 2067 656e 6572 6174 6520 646f  only generate do
-00023640: 6373 2066 6f72 2069 6e73 7461 6c6c 6564  cs for installed
-00023650: 2070 6c75 6769 6e73 0a20 2020 2020 2020   plugins.       
-00023660: 206f 7063 6f64 6573 786d 6c3a 2069 6620   opcodesxml: if 
-00023670: 6769 7665 6e2c 2067 656e 6572 6174 6520  given, generate 
-00023680: 616e 206f 7063 6f64 6573 2e78 6d6c 2063  an opcodes.xml c
-00023690: 6f6d 7061 7469 626c 6520 6669 6c65 2077  ompatible file w
-000236a0: 6974 6820 7468 6520 6f70 636f 6465 7320  ith the opcodes 
-000236b0: 7379 6e74 6178 2061 6e64 0a20 2020 2020  syntax and.     
-000236c0: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
-000236d0: 6f6e 2061 6e64 2073 6176 6573 2069 7420  on and saves it 
-000236e0: 6174 2074 6865 2067 6976 656e 2070 6174  at the given pat
-000236f0: 680a 0a20 2020 2052 6169 7365 7320 5275  h..    Raises Ru
-00023700: 6e74 696d 6545 7863 650a 2020 2020 2222  ntimeExce.    ""
-00023710: 220a 2020 2020 6966 2064 6573 7420 6973  ".    if dest is
-00023720: 204e 6f6e 653a 0a20 2020 2020 2020 2064   None:.        d
-00023730: 6573 7420 3d20 5249 5353 4554 5f47 454e  est = RISSET_GEN
-00023740: 4552 4154 4544 5f44 4f43 530a 2020 2020  ERATED_DOCS.    
-00023750: 5f63 6f6d 7069 6c65 5f64 6f63 7328 696e  _compile_docs(in
-00023760: 6465 783d 696e 6465 782c 2064 6573 743d  dex=index, dest=
-00023770: 6465 7374 202f 2022 646f 6373 222c 206d  dest / "docs", m
-00023780: 616b 6569 6e64 6578 3d54 7275 652c 0a20  akeindex=True,. 
-00023790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000237a0: 206f 6e6c 7969 6e73 7461 6c6c 6564 3d6f   onlyinstalled=o
-000237b0: 6e6c 7969 6e73 7461 6c6c 6564 290a 0a20  nlyinstalled).. 
-000237c0: 2020 2069 6620 6f70 636f 6465 7378 6d6c     if opcodesxml
-000237d0: 3a0a 2020 2020 2020 2020 786d 6c73 7472  :.        xmlstr
-000237e0: 203d 2069 6e64 6578 2e67 656e 6572 6174   = index.generat
-000237f0: 655f 6f70 636f 6465 735f 786d 6c28 290a  e_opcodes_xml().
-00023800: 2020 2020 2020 2020 6f70 656e 286f 7063          open(opc
-00023810: 6f64 6573 786d 6c2c 2022 7722 292e 7772  odesxml, "w").wr
-00023820: 6974 6528 786d 6c73 7472 290a 0a20 2020  ite(xmlstr)..   
-00023830: 2069 6620 6275 696c 6468 746d 6c3a 0a20   if buildhtml:. 
-00023840: 2020 2020 2020 206d 6b64 6f63 7363 6f6e         mkdocscon
-00023850: 6669 6720 3d20 5249 5353 4554 5f44 4154  fig = RISSET_DAT
-00023860: 4152 4550 4f5f 4c4f 4341 4c50 4154 4820  AREPO_LOCALPATH 
-00023870: 2f20 2261 7373 6574 7322 202f 2022 6d6b  / "assets" / "mk
-00023880: 646f 6373 2e79 6d6c 220a 2020 2020 2020  docs.yml".      
-00023890: 2020 6966 206e 6f74 206d 6b64 6f63 7363    if not mkdocsc
-000238a0: 6f6e 6669 672e 6578 6973 7473 2829 3a0a  onfig.exists():.
-000238b0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000238c0: 6520 494f 4572 726f 7228 6622 4469 6420  e IOError(f"Did 
-000238d0: 6e6f 7420 6669 6e64 206d 6b64 6f63 7320  not find mkdocs 
-000238e0: 636f 6e66 6967 7572 6174 696f 6e20 6669  configuration fi
-000238f0: 6c65 2e20 5365 6172 6368 6564 3a20 7b6d  le. Searched: {m
-00023900: 6b64 6f63 7363 6f6e 6669 677d 2229 0a20  kdocsconfig}"). 
-00023910: 2020 2020 2020 2069 6620 6e6f 7420 5f69         if not _i
-00023920: 735f 6d6b 646f 6373 5f69 6e73 7461 6c6c  s_mkdocs_install
-00023930: 6564 2829 3a0a 2020 2020 2020 2020 2020  ed():.          
-00023940: 2020 7261 6973 6520 5275 6e74 696d 6545    raise RuntimeE
-00023950: 7272 6f72 2822 6d6b 646f 6373 2069 7320  rror("mkdocs is 
-00023960: 6e65 6564 6564 2074 6f20 6275 696c 6420  needed to build 
-00023970: 7468 6520 6874 6d6c 2064 6f63 756d 656e  the html documen
-00023980: 7461 7469 6f6e 2e20 496e 7374 616c 6c20  tation. Install 
-00023990: 6974 2076 6961 2027 7069 7020 696e 7374  it via 'pip inst
-000239a0: 616c 6c20 6d6b 646f 6373 2722 290a 2020  all mkdocs'").  
-000239b0: 2020 2020 2020 7368 7574 696c 2e63 6f70        shutil.cop
-000239c0: 7928 6d6b 646f 6373 636f 6e66 6967 2c20  y(mkdocsconfig, 
-000239d0: 6465 7374 290a 2020 2020 2020 2020 5f63  dest).        _c
-000239e0: 616c 6c5f 6d6b 646f 6373 2864 6573 742c  all_mkdocs(dest,
-000239f0: 2022 6275 696c 6422 290a 0a20 2020 2072   "build")..    r
-00023a00: 6574 7572 6e20 6465 7374 0a0a 0a64 6566  eturn dest...def
-00023a10: 205f 636f 6d70 696c 655f 646f 6373 2869   _compile_docs(i
-00023a20: 6e64 6578 3a20 4d61 696e 496e 6465 782c  ndex: MainIndex,
-00023a30: 2064 6573 743a 2050 6174 682c 206d 616b   dest: Path, mak
-00023a40: 6569 6e64 6578 3d54 7275 652c 0a20 2020  eindex=True,.   
-00023a50: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00023a60: 6e6c 7969 6e73 7461 6c6c 6564 3d46 616c  nlyinstalled=Fal
-00023a70: 7365 2920 2d3e 204e 6f6e 653a 0a20 2020  se) -> None:.   
-00023a80: 2022 2222 0a20 2020 2047 6174 6865 7220   """.    Gather 
-00023a90: 616c 6c20 6d61 6e70 6167 6573 2061 6e64  all manpages and
-00023aa0: 2067 656e 6572 6174 6520 6120 6d6b 646f   generate a mkdo
-00023ab0: 6373 2063 6f6d 7061 7469 626c 6520 646f  cs compatible do
-00023ac0: 6373 2066 6f6c 6465 720a 0a20 2020 2041  cs folder..    A
-00023ad0: 7267 733a 0a20 2020 2020 2020 2069 6e64  rgs:.        ind
-00023ae0: 6578 3a20 7468 6520 6d61 696e 2069 6e64  ex: the main ind
-00023af0: 6578 0a20 2020 2020 2020 2064 6573 743a  ex.        dest:
-00023b00: 2064 6573 7469 6e61 7469 6f6e 2070 6174   destination pat
-00023b10: 6820 6f66 2074 6865 2064 6f63 756d 656e  h of the documen
-00023b20: 7461 7469 6f6e 0a20 2020 2020 2020 206d  tation.        m
-00023b30: 616b 6569 6e64 6578 3a20 6765 6e65 7261  akeindex: genera
-00023b40: 7465 2061 6e20 696e 6465 7820 6669 6c65  te an index file
-00023b50: 0a20 2020 2020 2020 206f 6e6c 7969 6e73  .        onlyins
-00023b60: 7461 6c6c 6564 3a20 6966 2054 7275 652c  talled: if True,
-00023b70: 206f 6e6c 7920 6765 6e65 7261 7465 2064   only generate d
-00023b80: 6f63 756d 656e 7461 7469 6f6e 2066 6f72  ocumentation for
-00023b90: 2069 6e73 7461 6c6c 6564 2070 6c75 6769   installed plugi
-00023ba0: 6e73 2f6f 7063 6f64 6573 0a0a 2020 2020  ns/opcodes..    
-00023bb0: 2222 220a 2020 2020 6465 7374 203d 2064  """.    dest = d
-00023bc0: 6573 742e 6578 7061 6e64 7573 6572 2829  est.expanduser()
-00023bd0: 2e61 6273 6f6c 7574 6528 290a 2020 2020  .absolute().    
-00023be0: 6966 2064 6573 742e 6578 6973 7473 2829  if dest.exists()
-00023bf0: 3a0a 2020 2020 2020 2020 5f64 6562 7567  :.        _debug
-00023c00: 2866 2252 656d 6f76 696e 6720 6578 6973  (f"Removing exis
-00023c10: 7469 6e67 2064 6f63 2066 6f6c 6465 723a  ting doc folder:
-00023c20: 207b 7374 7228 6465 7374 297d 2229 0a20   {str(dest)}"). 
-00023c30: 2020 2020 2020 2073 6875 7469 6c2e 726d         shutil.rm
-00023c40: 7472 6565 2864 6573 742e 6173 5f70 6f73  tree(dest.as_pos
-00023c50: 6978 2829 290a 2020 2020 6373 735f 666f  ix()).    css_fo
-00023c60: 6c64 6572 203d 2064 6573 7420 2f20 2263  lder = dest / "c
-00023c70: 7373 220a 2020 2020 6f70 636f 6465 735f  ss".    opcodes_
-00023c80: 666f 6c64 6572 203d 2064 6573 7420 2f20  folder = dest / 
-00023c90: 226f 7063 6f64 6573 220a 2020 2020 6f70  "opcodes".    op
-00023ca0: 636f 6465 735f 6173 7365 7473 5f66 6f6c  codes_assets_fol
-00023cb0: 6465 7220 3d20 6f70 636f 6465 735f 666f  der = opcodes_fo
-00023cc0: 6c64 6572 202f 2022 6173 7365 7473 220a  lder / "assets".
-00023cd0: 0a20 2020 2066 6f72 2066 6f6c 6465 7220  .    for folder 
-00023ce0: 696e 205b 6465 7374 2c20 6373 735f 666f  in [dest, css_fo
-00023cf0: 6c64 6572 2c20 6f70 636f 6465 735f 666f  lder, opcodes_fo
-00023d00: 6c64 6572 2c20 6f70 636f 6465 735f 6173  lder, opcodes_as
-00023d10: 7365 7473 5f66 6f6c 6465 725d 3a0a 2020  sets_folder]:.  
-00023d20: 2020 2020 2020 666f 6c64 6572 2e6d 6b64        folder.mkd
-00023d30: 6972 2865 7869 7374 5f6f 6b3d 5472 7565  ir(exist_ok=True
-00023d40: 2c20 7061 7265 6e74 733d 5472 7565 290a  , parents=True).
-00023d50: 0a20 2020 2023 2063 6f70 7920 2e63 7373  .    # copy .css
-00023d60: 2066 696c 650a 2020 2020 7379 6e74 6178   file.    syntax
-00023d70: 6869 6768 6c69 6768 7469 6e67 6373 7320  highlightingcss 
-00023d80: 3d20 5249 5353 4554 5f44 4154 4152 4550  = RISSET_DATAREP
-00023d90: 4f5f 4c4f 4341 4c50 4154 4820 2f20 2261  O_LOCALPATH / "a
-00023da0: 7373 6574 7322 202f 2022 7379 6e74 6178  ssets" / "syntax
-00023db0: 2d68 6967 686c 6967 6874 696e 672e 6373  -highlighting.cs
-00023dc0: 7322 0a20 2020 2061 7373 6572 7420 7379  s".    assert sy
-00023dd0: 6e74 6178 6869 6768 6c69 6768 7469 6e67  ntaxhighlighting
-00023de0: 6373 732e 6578 6973 7473 2829 0a20 2020  css.exists().   
-00023df0: 2073 6875 7469 6c2e 636f 7079 2873 796e   shutil.copy(syn
-00023e00: 7461 7868 6967 686c 6967 6874 696e 6763  taxhighlightingc
-00023e10: 7373 2c20 6373 735f 666f 6c64 6572 290a  ss, css_folder).
-00023e20: 0a20 2020 2066 6f72 2070 6c75 6769 6e20  .    for plugin 
-00023e30: 696e 2069 6e64 6578 2e70 6c75 6769 6e73  in index.plugins
-00023e40: 2e76 616c 7565 7328 293a 0a20 2020 2020  .values():.     
-00023e50: 2020 2069 6620 6f6e 6c79 696e 7374 616c     if onlyinstal
-00023e60: 6c65 6420 616e 6420 6e6f 7420 696e 6465  led and not inde
-00023e70: 782e 6973 5f70 6c75 6769 6e5f 696e 7374  x.is_plugin_inst
-00023e80: 616c 6c65 6428 706c 7567 696e 2c20 6368  alled(plugin, ch
-00023e90: 6563 6b3d 4661 6c73 6529 3a0a 2020 2020  eck=False):.    
-00023ea0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00023eb0: 0a20 2020 2020 2020 2064 6f63 5f66 6f6c  .        doc_fol
-00023ec0: 6465 7220 3d20 706c 7567 696e 2e72 6573  der = plugin.res
-00023ed0: 6f6c 7665 5f64 6f63 5f66 6f6c 6465 7228  olve_doc_folder(
-00023ee0: 290a 2020 2020 2020 2020 6966 2064 6f63  ).        if doc
-00023ef0: 5f66 6f6c 6465 7220 6973 204e 6f6e 653a  _folder is None:
-00023f00: 0a20 2020 2020 2020 2020 2020 205f 6465  .            _de
-00023f10: 6275 6728 6622 4e6f 2064 6f63 7320 666f  bug(f"No docs fo
-00023f20: 756e 6420 666f 7220 706c 7567 696e 3a20  und for plugin: 
-00023f30: 7b70 6c75 6769 6e2e 6e61 6d65 7d22 290a  {plugin.name}").
-00023f40: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-00023f50: 696e 7565 0a0a 2020 2020 2020 2020 646f  inue..        do
-00023f60: 6373 203d 2064 6f63 5f66 6f6c 6465 722e  cs = doc_folder.
-00023f70: 676c 6f62 2822 2a2e 6d64 2229 0a20 2020  glob("*.md").   
-00023f80: 2020 2020 205f 6465 6275 6728 6622 436f       _debug(f"Co
-00023f90: 7079 696e 6720 646f 6373 2074 6f20 7b6f  pying docs to {o
-00023fa0: 7063 6f64 6573 5f66 6f6c 6465 727d 2229  pcodes_folder}")
-00023fb0: 0a20 2020 2020 2020 2066 6f72 2064 6f63  .        for doc
-00023fc0: 2069 6e20 646f 6373 3a0a 2020 2020 2020   in docs:.      
-00023fd0: 2020 2020 2020 5f64 6562 7567 2822 2063        _debug(" c
-00023fe0: 6f70 7969 6e67 222c 2073 7472 2864 6f63  opying", str(doc
-00023ff0: 2929 0a20 2020 2020 2020 2020 2020 2073  )).            s
-00024000: 6875 7469 6c2e 636f 7079 2864 6f63 2e61  hutil.copy(doc.a
-00024010: 735f 706f 7369 7828 292c 206f 7063 6f64  s_posix(), opcod
-00024020: 6573 5f66 6f6c 6465 722e 6173 5f70 6f73  es_folder.as_pos
-00024030: 6978 2829 290a 0a20 2020 2020 2020 2023  ix())..        #
-00024040: 2063 6f70 7920 6173 7365 7473 0a20 2020   copy assets.   
-00024050: 2020 2020 2073 6f75 7263 655f 6173 7365       source_asse
-00024060: 7473 5f66 6f6c 6465 7220 3d20 646f 635f  ts_folder = doc_
-00024070: 666f 6c64 6572 202f 2022 6173 7365 7473  folder / "assets
-00024080: 220a 2020 2020 2020 2020 6966 2073 6f75  ".        if sou
-00024090: 7263 655f 6173 7365 7473 5f66 6f6c 6465  rce_assets_folde
-000240a0: 722e 6578 6973 7473 2829 2061 6e64 2073  r.exists() and s
-000240b0: 6f75 7263 655f 6173 7365 7473 5f66 6f6c  ource_assets_fol
-000240c0: 6465 722e 6973 5f64 6972 2829 3a0a 2020  der.is_dir():.  
-000240d0: 2020 2020 2020 2020 2020 5f64 6562 7567            _debug
-000240e0: 2866 2243 6f70 7969 6e67 2061 7373 6574  (f"Copying asset
-000240f0: 7320 666f 7220 706c 7567 696e 207b 706c  s for plugin {pl
-00024100: 7567 696e 2e6e 616d 657d 2229 0a20 2020  ugin.name}").   
-00024110: 2020 2020 2020 2020 205f 636f 7079 5f72           _copy_r
-00024120: 6563 7572 7369 7665 2873 6f75 7263 655f  ecursive(source_
-00024130: 6173 7365 7473 5f66 6f6c 6465 722c 206f  assets_folder, o
-00024140: 7063 6f64 6573 5f61 7373 6574 735f 666f  pcodes_assets_fo
-00024150: 6c64 6572 290a 2020 2020 2020 2020 656c  lder).        el
-00024160: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00024170: 5f64 6562 7567 2866 224e 6f20 6173 7365  _debug(f"No asse
-00024180: 7473 2074 6f20 636f 7079 2066 6f72 2070  ts to copy for p
-00024190: 6c75 6769 6e20 7b70 6c75 6769 6e2e 6e61  lugin {plugin.na
-000241a0: 6d65 7d22 290a 0a20 2020 2069 6620 6d61  me}")..    if ma
-000241b0: 6b65 696e 6465 783a 0a20 2020 2020 2020  keindex:.       
-000241c0: 205f 646f 6373 5f67 656e 6572 6174 655f   _docs_generate_
-000241d0: 696e 6465 7828 696e 6465 782c 2064 6573  index(index, des
-000241e0: 7420 2f20 2269 6e64 6578 2e6d 6422 290a  t / "index.md").
-000241f0: 0a0a 6465 6620 5f6d 616e 7061 6765 5f70  ..def _manpage_p
-00024200: 6172 7365 286d 616e 7061 6765 3a20 5061  arse(manpage: Pa
-00024210: 7468 2c20 6f70 636f 6465 3a20 7374 7229  th, opcode: str)
-00024220: 202d 3e20 4f70 7469 6f6e 616c 5b4d 616e   -> Optional[Man
-00024230: 5061 6765 5d3a 0a20 2020 2069 6620 6e6f  Page]:.    if no
-00024240: 7420 6d61 6e70 6167 653a 0a20 2020 2020  t manpage:.     
-00024250: 2020 205f 6572 726f 726d 7367 2866 224f     _errormsg(f"O
-00024260: 7063 6f64 6520 7b6f 7063 6f64 657d 2068  pcode {opcode} h
-00024270: 6173 206e 6f20 6d61 6e70 6167 6522 290a  as no manpage").
-00024280: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00024290: 6f6e 650a 0a20 2020 2074 6578 7420 3d20  one..    text = 
-000242a0: 6f70 656e 286d 616e 7061 6765 292e 7265  open(manpage).re
-000242b0: 6164 2829 0a20 2020 206c 696e 6573 203d  ad().    lines =
-000242c0: 2074 6578 742e 7370 6c69 746c 696e 6573   text.splitlines
-000242d0: 2829 0a20 2020 2069 7420 3d20 6974 6572  ().    it = iter
-000242e0: 286c 696e 6573 290a 2020 2020 6162 7374  (lines).    abst
-000242f0: 7261 6374 203d 2027 270a 2020 2020 7379  ract = ''.    sy
-00024300: 6e74 6178 6c69 6e65 7320 3d20 5b5d 0a20  ntaxlines = []. 
-00024310: 2020 2066 6f75 6e64 7379 6e74 6178 7461     foundsyntaxta
-00024320: 6720 3d20 4661 6c73 650a 2020 2020 666f  g = False.    fo
-00024330: 7220 6c69 6e65 2069 6e20 6974 3a0a 2020  r line in it:.  
-00024340: 2020 2020 2020 6966 2072 652e 7365 6172        if re.sear
-00024350: 6368 2872 225e 5c73 2a23 2b5c 732b 5b73  ch(r"^\s*#+\s+[s
-00024360: 7c53 5d79 6e74 6178 5c73 2a24 222c 206c  |S]yntax\s*$", l
-00024370: 696e 6529 3a0a 2020 2020 2020 2020 2020  ine):.          
-00024380: 2020 666f 756e 6473 796e 7461 7874 6167    foundsyntaxtag
-00024390: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
-000243a0: 2020 2020 6272 6561 6b0a 2020 2020 6966      break.    if
-000243b0: 2066 6f75 6e64 7379 6e74 6178 7461 673a   foundsyntaxtag:
-000243c0: 0a20 2020 2020 2020 2066 6f72 206c 696e  .        for lin
-000243d0: 6520 696e 2069 743a 0a20 2020 2020 2020  e in it:.       
-000243e0: 2020 2020 2069 6620 7265 2e73 6561 7263       if re.searc
-000243f0: 6828 7222 5e5c 732a 5b23 213b 2f5d 222c  h(r"^\s*[#!;/]",
-00024400: 206c 696e 6529 3a0a 2020 2020 2020 2020   line):.        
-00024410: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
-00024420: 2020 2020 2020 2020 2020 656c 6966 206f            elif o
-00024430: 7063 6f64 6520 696e 206c 696e 6520 616e  pcode in line an
-00024440: 6420 2872 652e 7365 6172 6368 2872 225e  d (re.search(r"^
-00024450: 5c73 2a5b 616b 6967 535c 5b78 5d22 2c20  \s*[akigS\[x]", 
-00024460: 6c69 6e65 2920 6f72 206c 696e 652e 6c73  line) or line.ls
-00024470: 7472 6970 2829 2e73 7461 7274 7377 6974  trip().startswit
-00024480: 6828 6f70 636f 6465 2929 3a0a 2020 2020  h(opcode)):.    
-00024490: 2020 2020 2020 2020 2020 2020 7379 6e74              synt
-000244a0: 6178 203d 206c 696e 652e 7374 7269 7028  ax = line.strip(
-000244b0: 292e 7370 6c69 7428 223b 222c 206d 6178  ).split(";", max
-000244c0: 7370 6c69 743d 3129 5b30 5d0a 2020 2020  split=1)[0].    
-000244d0: 2020 2020 2020 2020 2020 2020 7379 6e74              synt
-000244e0: 6178 6c69 6e65 732e 6170 7065 6e64 2873  axlines.append(s
-000244f0: 796e 7461 7829 0a0a 2020 2020 6966 2022  yntax)..    if "
-00024500: 2320 4162 7374 7261 6374 2220 696e 2074  # Abstract" in t
-00024510: 6578 743a 0a20 2020 2020 2020 2023 2074  ext:.        # t
-00024520: 6865 2061 6273 7472 6163 7420 776f 756c  he abstract woul
-00024530: 6420 6265 2061 6c6c 2074 6865 2074 6578  d be all the tex
-00024540: 7420 6265 7477 6565 6e20 2320 4162 7374  t between # Abst
-00024550: 7261 6374 2061 6e64 2074 6865 206e 6578  ract and the nex
-00024560: 7420 2374 6167 0a20 2020 2020 2020 2069  t #tag.        i
-00024570: 7420 3d20 6974 6572 286c 696e 6573 290a  t = iter(lines).
-00024580: 2020 2020 2020 2020 666f 7220 6c69 6e65          for line
-00024590: 2069 6e20 6974 3a0a 2020 2020 2020 2020   in it:.        
-000245a0: 2020 2020 6966 2022 2320 4162 7374 7261      if "# Abstra
-000245b0: 6374 2220 696e 206c 696e 653a 0a20 2020  ct" in line:.   
-000245c0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
-000245d0: 616b 0a20 2020 2020 2020 2066 6f72 206c  ak.        for l
-000245e0: 696e 6520 696e 2069 743a 0a20 2020 2020  ine in it:.     
-000245f0: 2020 2020 2020 206c 696e 6520 3d20 6c69         line = li
-00024600: 6e65 2e73 7472 6970 2829 0a20 2020 2020  ne.strip().     
-00024610: 2020 2020 2020 2069 6620 6e6f 7420 6c69         if not li
-00024620: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00024630: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-00024640: 2020 2020 2020 2020 2061 6273 7472 6163           abstrac
-00024650: 7420 3d20 6c69 6e65 2069 6620 6e6f 7420  t = line if not 
-00024660: 6c69 6e65 2e73 7461 7274 7377 6974 6828  line.startswith(
-00024670: 2223 2229 2065 6c73 6520 2222 0a20 2020  "#") else "".   
-00024680: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-00024690: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000246a0: 2020 2020 2020 2020 205f 6465 6275 6728           _debug(
-000246b0: 6622 4e6f 2061 6273 7472 6163 7420 696e  f"No abstract in
-000246c0: 206d 616e 7061 6765 2066 696c 6520 7b6d   manpage file {m
-000246d0: 616e 7061 6765 7d22 290a 2020 2020 656c  anpage}").    el
-000246e0: 7365 3a0a 2020 2020 2020 2020 2320 6e6f  se:.        # no
-000246f0: 2041 6273 7472 6163 7420 7461 672c 2073   Abstract tag, s
-00024700: 6f20 6162 7374 7261 6374 2069 7320 7468  o abstract is th
-00024710: 6520 7465 7874 2062 6574 7765 656e 2074  e text between t
-00024720: 6865 2074 6974 6c65 2061 6e64 2074 6865  he title and the
-00024730: 2074 6578 7420 7461 670a 2020 2020 2020   text tag.      
-00024740: 2020 5f64 6562 7567 2866 2267 6574 5f61    _debug(f"get_a
-00024750: 6273 7472 6163 743a 206d 616e 7061 6765  bstract: manpage
-00024760: 2066 6f72 206f 7063 6f64 6520 7b6f 7063   for opcode {opc
-00024770: 6f64 657d 2068 6173 206e 6f20 2320 4162  ode} has no # Ab
-00024780: 7374 7261 6374 2074 6167 2229 0a20 2020  stract tag").   
-00024790: 2020 2020 2069 7420 3d20 6974 6572 286c       it = iter(l
-000247a0: 696e 6573 290a 2020 2020 2020 2020 666f  ines).        fo
-000247b0: 7220 6c69 6e65 2069 6e20 6974 3a0a 2020  r line in it:.  
-000247c0: 2020 2020 2020 2020 2020 6c69 6e65 203d            line =
-000247d0: 206c 696e 652e 7374 7269 7028 290a 2020   line.strip().  
-000247e0: 2020 2020 2020 2020 2020 6966 206c 696e            if lin
-000247f0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00024800: 2020 2069 6620 6c69 6e65 2e73 7461 7274     if line.start
-00024810: 7377 6974 6828 2223 2229 2061 6e64 206c  swith("#") and l
-00024820: 696e 652e 7370 6c69 7428 2222 295b 2d31  ine.split("")[-1
-00024830: 5d20 3d3d 206f 7063 6f64 653a 0a20 2020  ] == opcode:.   
-00024840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024850: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
-00024860: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00024870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024880: 2072 6169 7365 2050 6172 7365 4572 726f   raise ParseErro
-00024890: 7228 6622 4578 7065 6374 6564 2074 6974  r(f"Expected tit
-000248a0: 6c65 2c20 676f 7420 7b6c 696e 657d 2229  le, got {line}")
-000248b0: 0a20 2020 2020 2020 2066 6f72 206c 696e  .        for lin
-000248c0: 6520 696e 2069 743a 0a20 2020 2020 2020  e in it:.       
-000248d0: 2020 2020 206c 696e 6520 3d20 6c69 6e65       line = line
-000248e0: 2e73 7472 6970 2829 0a20 2020 2020 2020  .strip().       
-000248f0: 2020 2020 2069 6620 6c69 6e65 3a0a 2020       if line:.  
-00024900: 2020 2020 2020 2020 2020 2020 2020 6162                ab
-00024910: 7374 7261 6374 203d 206c 696e 6520 6966  stract = line if
-00024920: 206e 6f74 206c 696e 652e 7374 6172 7473   not line.starts
-00024930: 7769 7468 2822 2322 2920 656c 7365 2022  with("#") else "
-00024940: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00024950: 2020 6272 6561 6b0a 0a20 2020 2072 6574    break..    ret
-00024960: 7572 6e20 4d61 6e50 6167 6528 7379 6e74  urn ManPage(synt
-00024970: 6178 6573 3d73 796e 7461 786c 696e 6573  axes=syntaxlines
-00024980: 2c20 6162 7374 7261 6374 3d61 6273 7472  , abstract=abstr
-00024990: 6163 7429 0a0a 0a64 6566 205f 646f 6373  act)...def _docs
-000249a0: 5f67 656e 6572 6174 655f 696e 6465 7828  _generate_index(
-000249b0: 696e 6465 783a 204d 6169 6e49 6e64 6578  index: MainIndex
-000249c0: 2c20 6f75 7466 696c 653a 2050 6174 6829  , outfile: Path)
-000249d0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2222   -> None:.    ""
-000249e0: 220a 2020 2020 4765 6e65 7261 7465 2061  ".    Generate a
-000249f0: 6e20 696e 6465 7820 666f 7220 7468 6520  n index for the 
-00024a00: 646f 6375 6d65 6e74 6174 696f 6e0a 0a20  documentation.. 
-00024a10: 2020 2041 7267 756d 656e 7473 3a0a 2020     Arguments:.  
-00024a20: 2020 2020 2020 696e 6465 783a 2074 6865        index: the
-00024a30: 206d 6169 6e20 696e 6465 780a 2020 2020   main index.    
-00024a40: 2020 2020 6f75 7466 696c 653a 2074 6865      outfile: the
-00024a50: 2070 6174 6820 746f 2077 7269 7465 2074   path to write t
-00024a60: 6865 2069 6e64 6578 2074 6f20 286e 6f72  he index to (nor
-00024a70: 6d61 6c6c 7920 616e 2069 6e64 6578 2e6d  mally an index.m
-00024a80: 6420 6669 6c65 290a 2020 2020 2222 220a  d file).    """.
-00024a90: 2020 2020 6c69 6e65 733a 206c 6973 745b      lines: list[
-00024aa0: 7374 725d 203d 205b 5d0a 2020 2020 5f20  str] = [].    _ 
-00024ab0: 3d20 6c69 6e65 732e 6170 7065 6e64 0a20  = lines.append. 
-00024ac0: 2020 205f 2822 2320 506c 7567 696e 735c     _("# Plugins\
-00024ad0: 6e22 290a 2020 2020 706c 7567 696e 7320  n").    plugins 
-00024ae0: 3d20 736f 7274 6564 2869 6e64 6578 2e70  = sorted(index.p
-00024af0: 6c75 6769 6e73 2e76 616c 7565 7328 292c  lugins.values(),
-00024b00: 206b 6579 3d6c 616d 6264 6120 706c 7567   key=lambda plug
-00024b10: 696e 3a20 706c 7567 696e 2e6e 616d 6529  in: plugin.name)
-00024b20: 0a20 2020 2066 6f72 2070 6c75 6769 6e20  .    for plugin 
-00024b30: 696e 2070 6c75 6769 6e73 3a0a 2020 2020  in plugins:.    
-00024b40: 2020 2020 5f28 6622 2323 207b 706c 7567      _(f"## {plug
-00024b50: 696e 2e6e 616d 657d 5c6e 2229 0a20 2020  in.name}\n").   
-00024b60: 2020 2020 205f 2870 6c75 6769 6e2e 7368       _(plugin.sh
-00024b70: 6f72 745f 6465 7363 7269 7074 696f 6e20  ort_description 
-00024b80: 2b20 275c 6e27 290a 2020 2020 2020 2020  + '\n').        
-00024b90: 6f70 636f 6465 7320 3d20 736f 7274 6564  opcodes = sorted
-00024ba0: 2870 6c75 6769 6e2e 6f70 636f 6465 7329  (plugin.opcodes)
-00024bb0: 0a20 2020 2020 2020 2066 6f72 206f 7063  .        for opc
-00024bc0: 6f64 6520 696e 206f 7063 6f64 6573 3a0a  ode in opcodes:.
-00024bd0: 2020 2020 2020 2020 2020 2020 6d61 6e70              manp
-00024be0: 6167 6520 3d20 706c 7567 696e 2e6d 616e  age = plugin.man
-00024bf0: 7061 6765 286f 7063 6f64 6529 0a20 2020  page(opcode).   
-00024c00: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00024c10: 6d61 6e70 6167 653a 0a20 2020 2020 2020  manpage:.       
-00024c20: 2020 2020 2020 2020 205f 6465 6275 6728           _debug(
-00024c30: 6622 6f70 636f 6465 207b 6f70 636f 6465  f"opcode {opcode
-00024c40: 7d20 6861 7320 6e6f 206d 616e 7061 6765  } has no manpage
-00024c50: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00024c60: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
-00024c70: 2020 2020 2020 2020 7061 7273 6564 6d61          parsedma
-00024c80: 6e70 6167 6520 3d20 5f6d 616e 7061 6765  npage = _manpage
-00024c90: 5f70 6172 7365 286d 616e 7061 6765 2c20  _parse(manpage, 
-00024ca0: 6f70 636f 6465 290a 2020 2020 2020 2020  opcode).        
-00024cb0: 2020 2020 6966 206e 6f74 2070 6172 7365      if not parse
-00024cc0: 646d 616e 7061 6765 206f 7220 6e6f 7420  dmanpage or not 
-00024cd0: 7061 7273 6564 6d61 6e70 6167 652e 6162  parsedmanpage.ab
-00024ce0: 7374 7261 6374 3a0a 2020 2020 2020 2020  stract:.        
-00024cf0: 2020 2020 2020 2020 5f65 7272 6f72 6d73          _errorms
-00024d00: 6728 6622 436f 756c 6420 6e6f 7420 6765  g(f"Could not ge
-00024d10: 7420 6162 7374 7261 6374 2066 6f72 206f  t abstract for o
-00024d20: 7063 6f64 6520 7b6f 7063 6f64 657d 2229  pcode {opcode}")
-00024d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00024d40: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-00024d50: 2020 2020 2020 5f28 6622 2020 2a20 5b7b        _(f"  * [{
-00024d60: 6f70 636f 6465 7d5d 286f 7063 6f64 6573  opcode}](opcodes
-00024d70: 2f7b 6f70 636f 6465 7d2e 6d64 293a 207b  /{opcode}.md): {
-00024d80: 7061 7273 6564 6d61 6e70 6167 652e 6162  parsedmanpage.ab
-00024d90: 7374 7261 6374 7d22 290a 0a20 2020 2020  stract}")..     
-00024da0: 2020 205f 2822 2229 0a20 2020 2077 6974     _("").    wit
-00024db0: 6820 6f70 656e 286f 7574 6669 6c65 2c20  h open(outfile, 
-00024dc0: 2277 2229 2061 7320 663a 0a20 2020 2020  "w") as f:.     
-00024dd0: 2020 2066 2e77 7269 7465 2822 5c6e 222e     f.write("\n".
-00024de0: 6a6f 696e 286c 696e 6573 2929 0a0a 0a23  join(lines))...#
-00024df0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00024e00: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00024e10: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00024e20: 2323 2323 2323 2323 2323 2323 2323 0a23  ##############.#
-00024e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024e40: 2020 2020 2020 2020 5375 6263 6f6d 6d61          Subcomma
-00024e50: 6e64 7320 2020 2020 2020 2020 2020 2020  nds             
-00024e60: 2020 2020 2020 2020 2020 2020 2023 0a23               #.#
-00024e70: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00024e80: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00024e90: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-00024ea0: 2323 2323 2323 2323 2323 2323 2323 0a0a  ##############..
-00024eb0: 0a64 6566 2063 6d64 5f6c 6973 7428 6d61  .def cmd_list(ma
-00024ec0: 696e 696e 6465 783a 204d 6169 6e49 6e64  inindex: MainInd
-00024ed0: 6578 2c20 6172 6773 2920 2d3e 2062 6f6f  ex, args) -> boo
-00024ee0: 6c3a 0a20 2020 2022 2222 0a20 2020 204c  l:.    """.    L
-00024ef0: 6973 7473 2061 6c6c 2070 6c75 6769 6e73  ists all plugins
-00024f00: 2061 7661 696c 6162 6c65 2066 6f72 2064   available for d
-00024f10: 6f77 6e6c 6f61 640a 2020 2020 2222 220a  ownload.    """.
-00024f20: 2020 2020 6966 2061 7267 732e 6a73 6f6e      if args.json
-00024f30: 3a0a 2020 2020 2020 2020 6420 3d20 6d61  :.        d = ma
-00024f40: 696e 696e 6465 782e 6c69 7374 5f70 6c75  inindex.list_plu
-00024f50: 6769 6e73 5f61 735f 6469 6374 2869 6e73  gins_as_dict(ins
-00024f60: 7461 6c6c 6564 3d61 7267 732e 696e 7374  talled=args.inst
-00024f70: 616c 6c65 6429 0a20 2020 2020 2020 2069  alled).        i
-00024f80: 6620 6172 6773 2e6f 7574 6669 6c65 3a0a  f args.outfile:.
-00024f90: 2020 2020 2020 2020 2020 2020 7769 7468              with
-00024fa0: 206f 7065 6e28 6172 6773 2e6f 7574 6669   open(args.outfi
-00024fb0: 6c65 2c20 2277 2229 2061 7320 663a 0a20  le, "w") as f:. 
-00024fc0: 2020 2020 2020 2020 2020 2020 2020 206a                 j
-00024fd0: 736f 6e2e 6475 6d70 2864 2c20 662c 2069  son.dump(d, f, i
-00024fe0: 6e64 656e 743d 3229 0a20 2020 2020 2020  ndent=2).       
-00024ff0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00025000: 2020 2070 7269 6e74 286a 736f 6e2e 6475     print(json.du
-00025010: 6d70 7328 642c 2069 6e64 656e 743d 3229  mps(d, indent=2)
-00025020: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00025030: 2054 7275 650a 2020 2020 656c 7365 3a0a   True.    else:.
-00025040: 2020 2020 2020 2020 6865 6164 6572 203d          header =
-00025050: 2054 7275 650a 2020 2020 2020 2020 6966   True.        if
-00025060: 2061 7267 732e 6f6e 656c 696e 6520 6f72   args.oneline or
-00025070: 2061 7267 732e 6e61 6d65 6f6e 6c79 206f   args.nameonly o
-00025080: 7220 6172 6773 2e6e 6f68 6561 6465 723a  r args.noheader:
-00025090: 0a20 2020 2020 2020 2020 2020 2068 6561  .            hea
-000250a0: 6465 7220 3d20 4661 6c73 650a 2020 2020  der = False.    
-000250b0: 2020 2020 7265 7475 726e 206d 6169 6e69      return maini
-000250c0: 6e64 6578 2e6c 6973 745f 706c 7567 696e  ndex.list_plugin
-000250d0: 7328 696e 7374 616c 6c65 643d 6172 6773  s(installed=args
-000250e0: 2e69 6e73 7461 6c6c 6564 2c20 6e61 6d65  .installed, name
-000250f0: 6f6e 6c79 3d61 7267 732e 6e61 6d65 6f6e  only=args.nameon
-00025100: 6c79 2c20 6f6e 656c 696e 653d 6172 6773  ly, oneline=args
-00025110: 2e6f 6e65 6c69 6e65 2c0a 2020 2020 2020  .oneline,.      
-00025120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025140: 7570 6772 6164 6561 626c 653d 6172 6773  upgradeable=args
-00025150: 2e75 7067 7261 6465 6162 6c65 2c20 6865  .upgradeable, he
-00025160: 6164 6572 3d68 6561 6465 7229 0a0a 0a64  ader=header)...d
-00025170: 6566 2063 6d64 5f73 686f 7728 696e 6465  ef cmd_show(inde
-00025180: 783a 204d 6169 6e49 6e64 6578 2c20 6172  x: MainIndex, ar
-00025190: 6773 2920 2d3e 2062 6f6f 6c3a 0a20 2020  gs) -> bool:.   
-000251a0: 2022 2222 0a20 2020 2052 6574 7572 6e73   """.    Returns
-000251b0: 2054 7275 6520 6f6e 2073 7563 6365 7373   True on success
-000251c0: 0a20 2020 2022 2222 0a20 2020 2072 6574  .    """.    ret
-000251d0: 7572 6e20 696e 6465 782e 7368 6f77 5f70  urn index.show_p
-000251e0: 6c75 6769 6e28 6172 6773 2e70 6c75 6769  lugin(args.plugi
-000251f0: 6e29 0a0a 0a64 6566 2063 6d64 5f72 6d28  n)...def cmd_rm(
-00025200: 696e 6465 783a 204d 6169 6e49 6e64 6578  index: MainIndex
-00025210: 2c20 6172 6773 2920 2d3e 2062 6f6f 6c3a  , args) -> bool:
-00025220: 0a20 2020 2022 2222 0a20 2020 2052 656d  .    """.    Rem
-00025230: 6f76 6520 6120 706c 7567 696e 0a20 2020  ove a plugin.   
-00025240: 2022 2222 0a20 2020 2065 7272 6f72 7320   """.    errors 
-00025250: 3d20 300a 2020 2020 666f 7220 706c 7567  = 0.    for plug
-00025260: 696e 6e61 6d65 2069 6e20 6172 6773 2e70  inname in args.p
-00025270: 6c75 6769 6e3a 0a20 2020 2020 2020 2070  lugin:.        p
-00025280: 6c75 6764 6566 203d 2069 6e64 6578 2e70  lugdef = index.p
-00025290: 6c75 6769 6e73 2e67 6574 2870 6c75 6769  lugins.get(plugi
-000252a0: 6e6e 616d 6529 0a20 2020 2020 2020 2069  nname).        i
-000252b0: 6620 6e6f 7420 706c 7567 6465 663a 0a20  f not plugdef:. 
-000252c0: 2020 2020 2020 2020 2020 205f 6572 726f             _erro
-000252d0: 726d 7367 2866 2250 6c75 6769 6e20 7b70  rmsg(f"Plugin {p
-000252e0: 6c75 6769 6e6e 616d 657d 206e 6f74 2064  luginname} not d
-000252f0: 6566 696e 6564 2e20 4b6e 6f77 6e20 706c  efined. Known pl
-00025300: 7567 696e 733a 207b 272c 2027 2e6a 6f69  ugins: {', '.joi
-00025310: 6e28 696e 6465 782e 706c 7567 696e 732e  n(index.plugins.
-00025320: 6b65 7973 2829 297d 2229 0a20 2020 2020  keys())}").     
-00025330: 2020 2020 2020 2065 7272 6f72 7320 2b3d         errors +=
-00025340: 2031 0a20 2020 2020 2020 2020 2020 2063   1.            c
-00025350: 6f6e 7469 6e75 650a 2020 2020 2020 2020  ontinue.        
-00025360: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-00025370: 2069 6e64 6578 2e75 6e69 6e73 7461 6c6c   index.uninstall
-00025380: 5f70 6c75 6769 6e28 706c 7567 6465 6629  _plugin(plugdef)
-00025390: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-000253a0: 4578 6365 7074 696f 6e20 6173 2065 3a0a  Exception as e:.
-000253b0: 2020 2020 2020 2020 2020 2020 5f65 7272              _err
-000253c0: 6f72 6d73 6728 7374 7228 6529 290a 2020  ormsg(str(e)).  
-000253d0: 2020 2020 2020 2020 2020 6572 726f 7273            errors
-000253e0: 202b 3d20 310a 2020 2020 7265 7475 726e   += 1.    return
-000253f0: 2065 7272 6f72 7320 3d3d 2030 0a0a 0a64   errors == 0...d
-00025400: 6566 2063 6d64 5f69 6e73 7461 6c6c 2869  ef cmd_install(i
-00025410: 6e64 6578 3a20 4d61 696e 496e 6465 782c  ndex: MainIndex,
-00025420: 2061 7267 7329 202d 3e20 626f 6f6c 3a0a   args) -> bool:.
-00025430: 2020 2020 2222 220a 2020 2020 496e 7374      """.    Inst
-00025440: 616c 6c20 6f72 2075 7067 7261 6465 2061  all or upgrade a
-00025450: 2070 6c75 6769 6e0a 0a20 2020 2049 6620   plugin..    If 
-00025460: 7468 6520 706c 7567 696e 2069 7320 696e  the plugin is in
-00025470: 7374 616c 6c65 6420 6275 7420 7769 7468  stalled but with
-00025480: 2061 2070 7269 6f72 2076 6572 7369 6f6e   a prior version
-00025490: 2c20 6974 2077 696c 6c0a 2020 2020 6265  , it will.    be
-000254a0: 2075 7067 7261 6465 642e 2049 6620 6974   upgraded. If it
-000254b0: 2069 7320 696e 7374 616c 6c65 6420 6275   is installed bu
-000254c0: 7420 7769 7468 2061 6e20 756e 6b6e 6f77  t with an unknow
-000254d0: 6e20 7665 7273 696f 6e2c 0a20 2020 2069  n version,.    i
-000254e0: 6e73 7461 6c6c 6174 696f 6e20 6973 206f  nstallation is o
-000254f0: 6e6c 7920 7065 7266 6f72 6d65 6420 6966  nly performed if
-00025500: 2074 6865 202d 2d66 6f72 6365 2066 6c61   the --force fla
-00025510: 6720 6973 2067 6976 656e 0a0a 2020 2020  g is given..    
-00025520: 5265 7475 726e 7320 5472 7565 2069 6620  Returns True if 
-00025530: 7375 6363 6573 730a 0a20 2020 2046 6c61  success..    Fla
-00025540: 6773 3a0a 2020 2020 2020 2020 2d2d 666f  gs:.        --fo
-00025550: 7263 6520 202d 2066 6f72 6365 2069 6e73  rce  - force ins
-00025560: 7461 6c6c 6174 696f 6e20 6576 656e 2069  tallation even i
-00025570: 6620 706c 7567 696e 2069 7320 616c 7265  f plugin is alre
-00025580: 6164 7920 696e 7374 616c 6c65 640a 0a20  ady installed.. 
-00025590: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-000255a0: 2070 6c75 6769 6e20 2020 2d20 6e61 6d65   plugin   - name
-000255b0: 206f 6620 7468 6520 706c 7567 696e 2074   of the plugin t
-000255c0: 6f20 696e 7374 616c 6c0a 2020 2020 2222  o install.    ""
-000255d0: 220a 2020 2020 616c 6c70 6c75 6769 6e73  ".    allplugins
-000255e0: 3a20 6c69 7374 5b50 6c75 6769 6e5d 203d  : list[Plugin] =
-000255f0: 205b 5d0a 2020 2020 666f 7220 7061 7474   [].    for patt
-00025600: 6572 6e20 696e 2061 7267 732e 706c 7567  ern in args.plug
-00025610: 696e 733a 0a20 2020 2020 2020 206d 6174  ins:.        mat
-00025620: 6368 6564 203d 205b 706c 7567 696e 2066  ched = [plugin f
-00025630: 6f72 206e 616d 652c 2070 6c75 6769 6e20  or name, plugin 
-00025640: 696e 2069 6e64 6578 2e70 6c75 6769 6e73  in index.plugins
-00025650: 2e69 7465 6d73 2829 0a20 2020 2020 2020  .items().       
-00025660: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-00025670: 6e6d 6174 6368 2e66 6e6d 6174 6368 286e  nmatch.fnmatch(n
-00025680: 616d 652c 2070 6174 7465 726e 295d 0a20  ame, pattern)]. 
-00025690: 2020 2020 2020 2069 6620 6d61 7463 6865         if matche
-000256a0: 643a 0a20 2020 2020 2020 2020 2020 2061  d:.            a
-000256b0: 6c6c 706c 7567 696e 732e 6578 7465 6e64  llplugins.extend
-000256c0: 286d 6174 6368 6564 290a 2020 2020 6966  (matched).    if
-000256d0: 206e 6f74 2061 6c6c 706c 7567 696e 733a   not allplugins:
-000256e0: 0a20 2020 2020 2020 205f 6572 726f 726d  .        _errorm
-000256f0: 7367 2822 4e6f 2070 6c75 6769 6e73 206d  sg("No plugins m
-00025700: 6174 6368 6564 2229 0a20 2020 2020 2020  atched").       
-00025710: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
-00025720: 2020 616c 6c70 6c75 6769 6e73 203d 206c    allplugins = l
-00025730: 6973 7428 7365 7428 616c 6c70 6c75 6769  ist(set(allplugi
-00025740: 6e73 2929 2020 2320 7265 6d6f 7665 2064  ns))  # remove d
-00025750: 7570 6c69 6361 7465 730a 2020 2020 6572  uplicates.    er
-00025760: 726f 7273 5f66 6f75 6e64 203d 2046 616c  rors_found = Fal
-00025770: 7365 0a20 2020 2066 6f72 2070 6c75 6769  se.    for plugi
-00025780: 6e20 696e 2061 6c6c 706c 7567 696e 733a  n in allplugins:
-00025790: 0a20 2020 2020 2020 2070 6c75 6769 6e69  .        plugini
-000257a0: 6e66 6f20 3d20 696e 6465 782e 696e 7374  nfo = index.inst
-000257b0: 616c 6c65 645f 706c 7567 696e 5f69 6e66  alled_plugin_inf
-000257c0: 6f28 706c 7567 696e 290a 2020 2020 2020  o(plugin).      
-000257d0: 2020 6966 206e 6f74 2070 6c75 6769 6e69    if not plugini
-000257e0: 6e66 6f3a 0a20 2020 2020 2020 2020 2020  nfo:.           
-000257f0: 2023 204e 6f74 2069 6e73 7461 6c6c 6564   # Not installed
-00025800: 0a20 2020 2020 2020 2020 2020 205f 6465  .            _de
-00025810: 6275 6728 6622 506c 7567 696e 207b 706c  bug(f"Plugin {pl
-00025820: 7567 696e 2e6e 616d 657d 206e 6f74 2069  ugin.name} not i
-00025830: 6e73 7461 6c6c 6564 2c20 696e 7374 616c  nstalled, instal
-00025840: 6c69 6e67 2229 0a20 2020 2020 2020 2065  ling").        e
-00025850: 6c69 6620 6e6f 7420 706c 7567 696e 696e  lif not pluginin
-00025860: 666f 2e76 6572 7369 6f6e 7374 7220 6f72  fo.versionstr or
-00025870: 2070 6c75 6769 6e69 6e66 6f2e 7665 7273   plugininfo.vers
-00025880: 696f 6e73 7472 203d 3d20 554e 4b4e 4f57  ionstr == UNKNOW
-00025890: 4e5f 5645 5253 494f 4e3a 0a20 2020 2020  N_VERSION:.     
-000258a0: 2020 2020 2020 2023 2070 6c75 6769 6e20         # plugin 
-000258b0: 6973 2069 6e73 7461 6c6c 6564 2062 7574  is installed but
-000258c0: 2077 6974 686f 7574 2061 2063 6f72 7265   without a corre
-000258d0: 7370 6f6e 6469 6e67 2069 6e73 7461 6c6c  sponding install
-000258e0: 206d 616e 6966 6573 742e 0a20 2020 2020   manifest..     
-000258f0: 2020 2020 2020 2069 6620 6e6f 7420 6172         if not ar
-00025900: 6773 2e66 6f72 6365 3a0a 2020 2020 2020  gs.force:.      
-00025910: 2020 2020 2020 2020 2020 5f65 7272 6f72            _error
-00025920: 6d73 6728 6622 506c 7567 696e 207b 706c  msg(f"Plugin {pl
-00025930: 7567 696e 2e6e 616d 657d 2069 7320 616c  ugin.name} is al
-00025940: 7265 6164 7920 696e 7374 616c 6c65 642e  ready installed.
-00025950: 2055 7365 202d 2d66 6f72 6365 2074 6f20   Use --force to 
-00025960: 666f 7263 6520 7265 696e 7374 616c 6c22  force reinstall"
-00025970: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00025980: 2020 6572 726f 7273 5f66 6f75 6e64 203d    errors_found =
-00025990: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-000259a0: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
-000259b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000259c0: 2020 2020 2020 2020 2069 6620 706c 7567           if plug
-000259d0: 696e 2e76 6572 7369 6f6e 7475 706c 6520  in.versiontuple 
-000259e0: 3c3d 2070 6c75 6769 6e69 6e66 6f2e 7665  <= plugininfo.ve
-000259f0: 7273 696f 6e74 7570 6c65 3a0a 2020 2020  rsiontuple:.    
-00025a00: 2020 2020 2020 2020 2020 2020 5f64 6562              _deb
-00025a10: 7567 2866 2250 6c75 6769 6e20 7b70 6c75  ug(f"Plugin {plu
-00025a20: 6769 6e2e 6e61 6d65 7d2c 2076 6572 7369  gin.name}, versi
-00025a30: 6f6e 3a20 7b70 6c75 6769 6e2e 7665 7273  on: {plugin.vers
-00025a40: 696f 6e7d 2229 0a20 2020 2020 2020 2020  ion}").         
-00025a50: 2020 2020 2020 205f 6465 6275 6728 6622         _debug(f"
-00025a60: 2020 2020 496e 7374 616c 6c65 6420 7665      Installed ve
-00025a70: 7273 696f 6e3a 207b 706c 7567 696e 696e  rsion: {pluginin
-00025a80: 666f 2e76 6572 7369 6f6e 7374 727d 2229  fo.versionstr}")
-00025a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025aa0: 205f 696e 666f 2866 2249 6e73 7461 6c6c   _info(f"Install
-00025ab0: 6564 2076 6572 7369 6f6e 206f 6620 706c  ed version of pl
-00025ac0: 7567 696e 207b 706c 7567 696e 2e6e 616d  ugin {plugin.nam
-00025ad0: 657d 2069 7320 7570 2d74 6f2d 6461 7465  e} is up-to-date
-00025ae0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00025af0: 2020 2065 7272 6f72 735f 666f 756e 6420     errors_found 
-00025b00: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
-00025b10: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-00025b20: 2020 2020 2020 2020 2020 2020 5f69 6e66              _inf
-00025b30: 6f28 6622 5570 6461 7469 6e67 2070 6c75  o(f"Updating plu
-00025b40: 6769 6e20 7b70 6c75 6769 6e2e 6e61 6d65  gin {plugin.name
-00025b50: 7d3a 2022 0a20 2020 2020 2020 2020 2020  }: ".           
-00025b60: 2020 2020 2020 2066 227b 706c 7567 696e         f"{plugin
-00025b70: 696e 666f 2e76 6572 7369 6f6e 7374 727d  info.versionstr}
-00025b80: 202d 3e20 7b70 6c75 6769 6e2e 7665 7273   -> {plugin.vers
-00025b90: 696f 6e7d 2229 0a20 2020 2020 2020 2065  ion}").        e
-00025ba0: 7272 6f72 203d 2069 6e64 6578 2e69 6e73  rror = index.ins
-00025bb0: 7461 6c6c 5f70 6c75 6769 6e28 706c 7567  tall_plugin(plug
-00025bc0: 696e 290a 2020 2020 2020 2020 6966 2065  in).        if e
-00025bd0: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
-00025be0: 2020 5f64 6562 7567 2866 2245 7272 6f72    _debug(f"Error
-00025bf0: 7320 7768 696c 6520 696e 7374 616c 6c69  s while installi
-00025c00: 6e67 207b 706c 7567 696e 2e6e 616d 657d  ng {plugin.name}
-00025c10: 2229 0a20 2020 2020 2020 2020 2020 205f  ").            _
-00025c20: 6572 726f 726d 7367 2865 7272 6f72 290a  errormsg(error).
-00025c30: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-00025c40: 2069 6620 6572 726f 7273 5f66 6f75 6e64   if errors_found
-00025c50: 2065 6c73 6520 5472 7565 0a0a 0a64 6566   else True...def
-00025c60: 205f 6f70 656e 5f69 6e5f 6465 6661 756c   _open_in_defaul
-00025c70: 745f 6170 706c 6963 6174 696f 6e28 7061  t_application(pa
-00025c80: 7468 3a20 7374 7229 3a0a 2020 2020 2222  th: str):.    ""
-00025c90: 220a 2020 2020 4f70 656e 2070 6174 6820  ".    Open path 
-00025ca0: 7769 7468 2074 6865 2061 7070 2064 6566  with the app def
-00025cb0: 696e 6564 2074 6f20 6861 6e64 6c65 2069  ined to handle i
-00025cc0: 7420 6279 2074 6865 2075 7365 720a 2020  t by the user.  
-00025cd0: 2020 6174 2074 6865 206f 7320 6c65 7665    at the os leve
-00025ce0: 6c20 2878 6467 2d6f 7065 6e20 696e 206c  l (xdg-open in l
-00025cf0: 696e 7578 2c20 7374 6172 7420 696e 2077  inux, start in w
-00025d00: 696e 2c20 6f70 656e 2069 6e20 6f73 7829  in, open in osx)
-00025d10: 0a20 2020 2022 2222 0a20 2020 2070 6c61  .    """.    pla
-00025d20: 7466 6f72 6d20 3d20 7379 732e 706c 6174  tform = sys.plat
-00025d30: 666f 726d 0a20 2020 2069 6620 706c 6174  form.    if plat
-00025d40: 666f 726d 203d 3d20 276c 696e 7578 273a  form == 'linux':
-00025d50: 0a20 2020 2020 2020 2073 7562 7072 6f63  .        subproc
-00025d60: 6573 732e 6361 6c6c 285b 2278 6467 2d6f  ess.call(["xdg-o
-00025d70: 7065 6e22 2c20 7061 7468 5d29 0a20 2020  pen", path]).   
-00025d80: 2065 6c69 6620 706c 6174 666f 726d 203d   elif platform =
-00025d90: 3d20 2277 696e 3332 223a 0a20 2020 2020  = "win32":.     
-00025da0: 2020 206f 732e 7374 6172 7466 696c 6528     os.startfile(
-00025db0: 7061 7468 2920 2023 2074 7970 653a 2069  path)  # type: i
-00025dc0: 676e 6f72 650a 2020 2020 656c 6966 2070  gnore.    elif p
-00025dd0: 6c61 7466 6f72 6d20 3d3d 2022 6461 7277  latform == "darw
-00025de0: 696e 223a 0a20 2020 2020 2020 2073 7562  in":.        sub
-00025df0: 7072 6f63 6573 732e 6361 6c6c 285b 226f  process.call(["o
-00025e00: 7065 6e22 2c20 7061 7468 5d29 0a20 2020  pen", path]).   
-00025e10: 2065 6c73 653a 0a20 2020 2020 2020 2072   else:.        r
-00025e20: 6169 7365 2052 756e 7469 6d65 4572 726f  aise RuntimeErro
-00025e30: 7228 6622 706c 6174 666f 726d 207b 706c  r(f"platform {pl
-00025e40: 6174 666f 726d 7d20 6e6f 7420 7375 7070  atform} not supp
-00025e50: 6f72 7465 6422 290a 0a0a 6465 6620 636d  orted")...def cm
-00025e60: 645f 6d61 6e28 6964 783a 204d 6169 6e49  d_man(idx: MainI
-00025e70: 6e64 6578 2c20 6172 6773 2920 2d3e 2062  ndex, args) -> b
-00025e80: 6f6f 6c3a 0a20 2020 2022 2222 0a20 2020  ool:.    """.   
-00025e90: 2053 686f 7720 6d61 6e20 7061 6765 2066   Show man page f
-00025ea0: 6f72 2061 6e20 696e 7374 616c 6c65 6420  or an installed 
-00025eb0: 6f70 636f 6465 0a0a 2020 2020 5265 7475  opcode..    Retu
-00025ec0: 726e 7320 5472 7565 2069 6620 7375 6363  rns True if succ
-00025ed0: 6573 730a 0a20 2020 2046 6c61 6773 3a0a  ess..    Flags:.
-00025ee0: 2020 2020 2020 2020 2d2d 6874 6d6c 2020          --html  
-00025ef0: 2020 2020 2d20 5573 6520 2e68 746d 6c20      - Use .html 
-00025f00: 6669 6c65 2069 6e73 7465 6164 206f 6620  file instead of 
-00025f10: 2e6d 6420 7665 7273 696f 6e0a 2020 2020  .md version.    
-00025f20: 2020 2020 2d2d 7061 7468 2020 2020 2020      --path      
-00025f30: 2d20 446f 206e 6f74 206f 7065 6e20 6d61  - Do not open ma
-00025f40: 6e70 6167 652c 206f 6e6c 7920 7072 696e  npage, only prin
-00025f50: 7420 7468 6520 7061 7468 0a20 2020 2020  t the path.     
-00025f60: 2020 202d 2d65 7874 6572 6e61 6c20 202d     --external  -
-00025f70: 204f 7065 6e20 6669 6c65 2069 6e20 6578   Open file in ex
-00025f80: 7465 726e 616c 2061 7070 2e20 5468 6973  ternal app. This
-00025f90: 2069 7320 6f6e 6c79 2075 7365 6420 7768   is only used wh
-00025fa0: 656e 206f 7065 6e69 6e67 2074 6865 206d  en opening the m
-00025fb0: 6172 6b64 6f77 6e20 7061 6765 2e20 5769  arkdown page. Wi
-00025fc0: 7468 6f75 7420 7468 6973 0a20 2020 2020  thout this.     
-00025fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025fe0: 2074 6865 206d 6172 6b64 6f77 6e20 6973   the markdown is
-00025ff0: 206f 7574 7075 7420 746f 2074 6865 2074   output to the t
-00026000: 6572 6d69 6e61 6c0a 2020 2020 2020 2020  erminal.        
-00026010: 6f70 636f 6465 2020 2020 2020 2d20 6f70  opcode      - op
-00026020: 636f 6465 2873 2920 746f 2067 6574 206d  code(s) to get m
-00026030: 616e 7061 6765 206f 662e 2043 616e 2062  anpage of. Can b
-00026040: 6520 6120 7769 6c64 6361 7264 0a20 2020  e a wildcard.   
-00026050: 2022 2222 0a20 2020 206f 7063 6f64 6573   """.    opcodes
-00026060: 3a20 6c69 7374 5b4f 7063 6f64 655d 203d  : list[Opcode] =
-00026070: 205b 5d0a 2020 2020 6966 2061 7267 732e   [].    if args.
-00026080: 6874 6d6c 2061 6e64 206e 6f74 2061 7267  html and not arg
-00026090: 732e 6d61 726b 646f 776e 3a0a 2020 2020  s.markdown:.    
-000260a0: 2020 2020 666d 7420 3d20 2268 746d 6c22      fmt = "html"
-000260b0: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-000260c0: 2020 2066 6d74 203d 2022 6d61 726b 646f     fmt = "markdo
-000260d0: 776e 220a 2020 2020 666f 7220 7061 7474  wn".    for patt
-000260e0: 6572 6e20 696e 2061 7267 732e 6f70 636f  ern in args.opco
-000260f0: 6465 3a0a 2020 2020 2020 2020 6f70 636f  de:.        opco
-00026100: 6465 732e 6578 7465 6e64 286f 7063 6f64  des.extend(opcod
-00026110: 6520 666f 7220 6f70 636f 6465 2069 6e20  e for opcode in 
-00026120: 6964 782e 6465 6669 6e65 645f 6f70 636f  idx.defined_opco
-00026130: 6465 7328 290a 2020 2020 2020 2020 2020  des().          
-00026140: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00026150: 666e 6d61 7463 682e 666e 6d61 7463 6828  fnmatch.fnmatch(
-00026160: 6f70 636f 6465 2e6e 616d 652c 2070 6174  opcode.name, pat
-00026170: 7465 726e 2929 0a20 2020 2069 6620 6e6f  tern)).    if no
-00026180: 7420 6f70 636f 6465 733a 0a20 2020 2020  t opcodes:.     
-00026190: 2020 2023 206f 7065 6e20 7468 6520 696e     # open the in
-000261a0: 6465 780a 2020 2020 2020 2020 6874 6d6c  dex.        html
-000261b0: 6964 7820 3d20 5249 5353 4554 5f47 454e  idx = RISSET_GEN
-000261c0: 4552 4154 4544 5f44 4f43 5320 2f20 2273  ERATED_DOCS / "s
-000261d0: 6974 6522 202f 2022 696e 6465 782e 6874  ite" / "index.ht
-000261e0: 6d6c 220a 2020 2020 2020 2020 6966 206e  ml".        if n
-000261f0: 6f74 2068 746d 6c69 6478 2e65 7869 7374  ot htmlidx.exist
-00026200: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-00026210: 205f 6572 726f 726d 7367 2866 2249 6e64   _errormsg(f"Ind
-00026220: 6578 2066 696c 6520 666f 7220 7468 6520  ex file for the 
-00026230: 646f 6375 6d65 6e74 6174 696f 6e20 6e6f  documentation no
-00026240: 7420 666f 756e 6420 2870 6174 683a 207b  t found (path: {
-00026250: 6874 6d6c 6964 782e 6173 5f70 6f73 6978  htmlidx.as_posix
-00026260: 2829 7d22 290a 2020 2020 2020 2020 2020  ()}").          
-00026270: 2020 7265 7475 726e 2046 616c 7365 0a20    return False. 
-00026280: 2020 2020 2020 205f 6f70 656e 5f69 6e5f         _open_in_
-00026290: 6465 6661 756c 745f 6170 706c 6963 6174  default_applicat
-000262a0: 696f 6e28 6874 6d6c 6964 782e 6173 5f70  ion(htmlidx.as_p
-000262b0: 6f73 6978 2829 290a 2020 2020 656c 7365  osix()).    else
-000262c0: 3a0a 2020 2020 2020 2020 666f 7220 6f70  :.        for op
-000262d0: 636f 6465 2069 6e20 6f70 636f 6465 733a  code in opcodes:
-000262e0: 0a20 2020 2020 2020 2020 2020 205f 6465  .            _de
-000262f0: 6275 6728 226d 616e 3a20 7072 6f63 6573  bug("man: proces
-00026300: 7369 6e67 206f 7063 6f64 6520 222c 206f  sing opcode ", o
-00026310: 7063 6f64 652e 6e61 6d65 290a 2020 2020  pcode.name).    
-00026320: 2020 2020 2020 2020 7061 7468 203d 2069          path = i
-00026330: 6478 2e66 696e 645f 6d61 6e70 6167 6528  dx.find_manpage(
-00026340: 6f70 636f 6465 3d6f 7063 6f64 652e 6e61  opcode=opcode.na
-00026350: 6d65 2c20 6d61 726b 646f 776e 3d66 6d74  me, markdown=fmt
-00026360: 203d 3d20 226d 6172 6b64 6f77 6e22 290a   == "markdown").
-00026370: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00026380: 6f74 2070 6174 683a 0a20 2020 2020 2020  ot path:.       
-00026390: 2020 2020 2020 2020 205f 6572 726f 726d           _errorm
-000263a0: 7367 2866 224e 6f20 6d61 6e70 6167 6520  sg(f"No manpage 
-000263b0: 666f 7220 6f70 636f 6465 207b 6f70 636f  for opcode {opco
-000263c0: 6465 2e6e 616d 657d 2229 0a20 2020 2020  de.name}").     
-000263d0: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
-000263e0: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
-000263f0: 6966 2061 7267 732e 7061 7468 3a0a 2020  if args.path:.  
-00026400: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00026410: 6a75 7374 2070 7269 6e74 2074 6865 2070  just print the p
-00026420: 6174 680a 2020 2020 2020 2020 2020 2020  ath.            
-00026430: 2020 2020 7072 696e 7428 6622 7b6f 7063      print(f"{opc
-00026440: 6f64 652e 6e61 6d65 7d3a 7b73 7472 2870  ode.name}:{str(p
-00026450: 6174 6829 7d22 290a 2020 2020 2020 2020  ath)}").        
-00026460: 2020 2020 656c 6966 2061 7267 732e 7369      elif args.si
-00026470: 6d70 6c65 7061 7468 3a0a 2020 2020 2020  mplepath:.      
-00026480: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00026490: 7374 7228 7061 7468 2929 0a20 2020 2020  str(path)).     
-000264a0: 2020 2020 2020 2065 6c69 6620 666d 7420         elif fmt 
-000264b0: 3d3d 2022 6d61 726b 646f 776e 223a 0a20  == "markdown":. 
-000264c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000264d0: 6620 6172 6773 2e65 7874 6572 6e61 6c3a  f args.external:
-000264e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000264f0: 2020 2020 205f 6f70 656e 5f69 6e5f 6465       _open_in_de
-00026500: 6661 756c 745f 6170 706c 6963 6174 696f  fault_applicatio
-00026510: 6e28 7061 7468 2e61 735f 706f 7369 7828  n(path.as_posix(
-00026520: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00026530: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00026540: 2020 2020 2020 2020 2020 2020 205f 7368               _sh
-00026550: 6f77 5f6d 6172 6b64 6f77 6e5f 6669 6c65  ow_markdown_file
-00026560: 2870 6174 682c 2073 7479 6c65 3d61 7267  (path, style=arg
-00026570: 732e 7468 656d 6529 0a20 2020 2020 2020  s.theme).       
-00026580: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00026590: 2020 2020 2020 2020 2020 2023 206f 7065             # ope
-000265a0: 6e20 6974 2069 6e20 7468 6520 6465 6661  n it in the defa
-000265b0: 756c 7420 6170 706c 6963 6174 696f 6e0a  ult application.
-000265c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000265d0: 5f6f 7065 6e5f 696e 5f64 6566 6175 6c74  _open_in_default
-000265e0: 5f61 7070 6c69 6361 7469 6f6e 2873 7472  _application(str
-000265f0: 2870 6174 6829 290a 2020 2020 7265 7475  (path)).    retu
-00026600: 726e 2054 7275 650a 0a0a 6465 6620 636d  rn True...def cm
-00026610: 645f 7265 7365 7463 6163 6865 2861 7267  d_resetcache(arg
-00026620: 7329 202d 3e20 4e6f 6e65 3a0a 2020 2020  s) -> None:.    
-00026630: 5f72 6d5f 6469 7228 5249 5353 4554 5f44  _rm_dir(RISSET_D
-00026640: 4154 4152 4550 4f5f 4c4f 4341 4c50 4154  ATAREPO_LOCALPAT
-00026650: 4829 0a20 2020 205f 726d 5f64 6972 2852  H).    _rm_dir(R
-00026660: 4953 5345 545f 434c 4f4e 4553 5f50 4154  ISSET_CLONES_PAT
-00026670: 4829 0a20 2020 2069 6620 6f73 2e70 6174  H).    if os.pat
-00026680: 682e 6578 6973 7473 285f 4d41 494e 494e  h.exists(_MAININ
-00026690: 4445 585f 5049 434b 4c45 5f46 494c 4529  DEX_PICKLE_FILE)
-000266a0: 3a0a 2020 2020 2020 2020 6f73 2e72 656d  :.        os.rem
-000266b0: 6f76 6528 5f4d 4149 4e49 4e44 4558 5f50  ove(_MAININDEX_P
-000266c0: 4943 4b4c 455f 4649 4c45 290a 0a0a 6465  ICKLE_FILE)...de
-000266d0: 6620 7570 6461 7465 5f73 656c 6628 293a  f update_self():
-000266e0: 0a20 2020 2022 2222 5570 6772 6164 6520  .    """Upgrade 
-000266f0: 7269 7373 6574 2069 7473 656c 6622 2222  risset itself"""
-00026700: 0a20 2020 205f 696e 666f 2822 5570 6461  .    _info("Upda
-00026710: 7469 6e67 2072 6973 7365 7422 290a 2020  ting risset").  
-00026720: 2020 7375 6270 726f 6365 7373 2e63 6865    subprocess.che
-00026730: 636b 5f63 616c 6c28 5b73 7973 2e65 7865  ck_call([sys.exe
-00026740: 6375 7461 626c 652c 2022 2d6d 222c 2022  cutable, "-m", "
-00026750: 7069 7022 2c20 2269 6e73 7461 6c6c 222c  pip", "install",
-00026760: 2022 7269 7373 6574 222c 2022 2d2d 7570   "risset", "--up
-00026770: 6772 6164 6522 5d29 0a0a 0a64 6566 2063  grade"])...def c
-00026780: 6d64 5f6c 6973 745f 696e 7374 616c 6c65  md_list_installe
-00026790: 645f 6f70 636f 6465 7328 706c 7567 696e  d_opcodes(plugin
-000267a0: 735f 696e 6465 783a 204d 6169 6e49 6e64  s_index: MainInd
-000267b0: 6578 2c20 6172 6773 2920 2d3e 2062 6f6f  ex, args) -> boo
-000267c0: 6c3a 0a20 2020 2022 2222 0a20 2020 2050  l:.    """.    P
-000267d0: 7269 6e74 2061 206c 6973 7420 6f66 2069  rint a list of i
-000267e0: 6e73 7461 6c6c 6564 206f 7063 6f64 6573  nstalled opcodes
-000267f0: 0a0a 2020 2020 2222 220a 2020 2020 6966  ..    """.    if
-00026800: 2061 7267 732e 6c6f 6e67 3a0a 2020 2020   args.long:.    
-00026810: 2020 2020 666f 7220 6f70 636f 6465 2069      for opcode i
-00026820: 6e20 706c 7567 696e 735f 696e 6465 782e  n plugins_index.
-00026830: 6465 6669 6e65 645f 6f70 636f 6465 7328  defined_opcodes(
-00026840: 293a 0a20 2020 2020 2020 2020 2020 2070  ):.            p
-00026850: 7269 6e74 2866 227b 6f70 636f 6465 2e6e  rint(f"{opcode.n
-00026860: 616d 652e 6c6a 7573 7428 3230 297d 7b6f  ame.ljust(20)}{o
-00026870: 7063 6f64 652e 706c 7567 696e 2e6c 6a75  pcode.plugin.lju
-00026880: 7374 2831 3229 7d7b 5f61 6262 7265 7628  st(12)}{_abbrev(
-00026890: 6f70 636f 6465 2e61 6273 7472 6163 742c  opcode.abstract,
-000268a0: 2036 3029 7d22 290a 2020 2020 656c 7365   60)}").    else
-000268b0: 3a0a 2020 2020 2020 2020 666f 7220 6f70  :.        for op
-000268c0: 636f 6465 2069 6e20 706c 7567 696e 735f  code in plugins_
-000268d0: 696e 6465 782e 6465 6669 6e65 645f 6f70  index.defined_op
-000268e0: 636f 6465 7328 293a 0a20 2020 2020 2020  codes():.       
-000268f0: 2020 2020 2070 7269 6e74 286f 7063 6f64       print(opcod
-00026900: 652e 6e61 6d65 290a 2020 2020 7265 7475  e.name).    retu
-00026910: 726e 2054 7275 650a 0a0a 6465 6620 636d  rn True...def cm
-00026920: 645f 6465 7628 6964 783a 204d 6169 6e49  d_dev(idx: MainI
-00026930: 6e64 6578 2c20 6172 6773 2920 2d3e 2062  ndex, args) -> b
-00026940: 6f6f 6c3a 0a20 2020 2069 6620 6172 6773  ool:.    if args
-00026950: 2e63 6d64 203d 3d20 276f 7063 6f64 6573  .cmd == 'opcodes
-00026960: 786d 6c27 3a0a 2020 2020 2020 2020 6f75  xml':.        ou
-00026970: 7473 7472 203d 2069 6478 2e67 656e 6572  tstr = idx.gener
-00026980: 6174 655f 6f70 636f 6465 735f 786d 6c28  ate_opcodes_xml(
-00026990: 290a 2020 2020 2020 2020 6f75 7466 696c  ).        outfil
-000269a0: 6520 3d20 6172 6773 2e6f 7574 6669 6c65  e = args.outfile
-000269b0: 206f 7220 5249 5353 4554 5f4f 5043 4f44   or RISSET_OPCOD
-000269c0: 4553 584d 4c0a 2020 2020 2020 2020 6966  ESXML.        if
-000269d0: 206f 7574 6669 6c65 203d 3d20 2773 7464   outfile == 'std
-000269e0: 6f75 7427 3a0a 2020 2020 2020 2020 2020  out':.          
-000269f0: 2020 7072 696e 7428 6f75 7473 7472 290a    print(outstr).
-00026a00: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00026a10: 2020 2020 2020 2020 2020 6f70 656e 286f            open(o
-00026a20: 7574 6669 6c65 2c20 2277 2229 2e77 7269  utfile, "w").wri
-00026a30: 7465 286f 7574 7374 7229 0a20 2020 2020  te(outstr).     
-00026a40: 2020 2020 2020 205f 6465 6275 6728 6622         _debug(f"
-00026a50: 4765 6e65 7261 7465 6420 6f70 636f 6465  Generated opcode
-00026a60: 732e 786d 6c20 6174 2027 7b6f 7574 6669  s.xml at '{outfi
-00026a70: 6c65 7d27 2229 0a20 2020 2065 6c69 6620  le}'").    elif 
-00026a80: 6172 6773 2e63 6d64 203d 3d20 2763 6f64  args.cmd == 'cod
-00026a90: 6573 6967 6e27 3a0a 2020 2020 2020 2020  esign':.        
-00026aa0: 6966 205f 7365 7373 696f 6e2e 706c 6174  if _session.plat
-00026ab0: 666f 726d 2021 3d20 276d 6163 6f73 273a  form != 'macos':
-00026ac0: 0a20 2020 2020 2020 2020 2020 205f 6572  .            _er
-00026ad0: 726f 726d 7367 2866 2243 6f64 6520 7369  rormsg(f"Code si
-00026ae0: 676e 696e 6720 6973 206f 6e6c 7920 6176  gning is only av
-00026af0: 6169 6c61 626c 6520 666f 7220 6d61 636f  ailable for maco
-00026b00: 732c 206e 6f74 2066 6f72 2027 7b5f 7365  s, not for '{_se
-00026b10: 7373 696f 6e2e 706c 6174 666f 726d 7d27  ssion.platform}'
-00026b20: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
-00026b30: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-00026b40: 2020 2020 706c 7567 696e 7320 3d20 6964      plugins = id
-00026b50: 782e 6176 6169 6c61 626c 655f 706c 7567  x.available_plug
-00026b60: 696e 7328 696e 7374 616c 6c65 645f 6f6e  ins(installed_on
-00026b70: 6c79 3d54 7275 652c 2063 6865 636b 3d46  ly=True, check=F
-00026b80: 616c 7365 290a 2020 2020 2020 2020 6479  alse).        dy
-00026b90: 6c69 6273 203d 205b 5d0a 2020 2020 2020  libs = [].      
-00026ba0: 2020 666f 7220 706c 7567 696e 2069 6e20    for plugin in 
-00026bb0: 706c 7567 696e 733a 0a20 2020 2020 2020  plugins:.       
-00026bc0: 2020 2020 2069 6e66 6f20 3d20 6964 782e       info = idx.
-00026bd0: 696e 7374 616c 6c65 645f 706c 7567 696e  installed_plugin
-00026be0: 5f69 6e66 6f28 706c 7567 696e 290a 2020  _info(plugin).  
-00026bf0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-00026c00: 2069 6e66 6f20 6973 206e 6f74 204e 6f6e   info is not Non
-00026c10: 650a 2020 2020 2020 2020 2020 2020 6479  e.            dy
-00026c20: 6c69 6273 2e61 7070 656e 6428 696e 666f  libs.append(info
-00026c30: 2e64 6c6c 7061 7468 2e61 735f 706f 7369  .dllpath.as_posi
-00026c40: 7828 2929 0a0a 2020 2020 2020 2020 6966  x())..        if
-00026c50: 206e 6f74 2064 796c 6962 733a 0a20 2020   not dylibs:.   
-00026c60: 2020 2020 2020 2020 205f 6465 6275 6728           _debug(
-00026c70: 6622 4469 6420 6e6f 7420 6669 6e64 2061  f"Did not find a
-00026c80: 6e79 2062 696e 6172 7920 746f 2073 6967  ny binary to sig
-00026c90: 6e2e 2050 6c75 6769 6e73 3a20 7b70 6c75  n. Plugins: {plu
-00026ca0: 6769 6e73 7d22 290a 2020 2020 2020 2020  gins}").        
-00026cb0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00026cc0: 2020 5f64 6562 7567 2866 2243 6f64 6520    _debug(f"Code 
-00026cd0: 7369 676e 696e 6720 7468 6520 666f 6c6c  signing the foll
-00026ce0: 6f77 696e 6720 706c 7567 696e 2062 696e  owing plugin bin
-00026cf0: 6172 6965 733a 207b 6479 6c69 6273 7d22  aries: {dylibs}"
-00026d00: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
-00026d10: 636f 735f 636f 6465 7369 676e 2864 796c  cos_codesign(dyl
-00026d20: 6962 7329 0a0a 2020 2020 7265 7475 726e  ibs)..    return
-00026d30: 2054 7275 650a 0a0a 6465 6620 636d 645f   True...def cmd_
-00026d40: 6d61 6b65 646f 6373 2869 6478 3a20 4d61  makedocs(idx: Ma
-00026d50: 696e 496e 6465 782c 2061 7267 7329 202d  inIndex, args) -
-00026d60: 3e20 626f 6f6c 3a0a 2020 2020 2222 220a  > bool:.    """.
-00026d70: 2020 2020 4765 6e65 7261 7465 2074 6865      Generate the
-00026d80: 2064 6f63 756d 656e 7461 7469 6f6e 2066   documentation f
-00026d90: 6f72 2061 6c6c 206f 7063 6f64 6573 0a0a  or all opcodes..
-00026da0: 2020 2020 4f70 7469 6f6e 733a 0a20 2020      Options:.   
-00026db0: 2020 2020 202d 2d6f 6e6c 7969 6e73 7461       --onlyinsta
-00026dc0: 6c6c 6564 3a20 6966 2054 7275 652c 206f  lled: if True, o
-00026dd0: 6e6c 7920 6765 6e65 7261 7465 2064 6f63  nly generate doc
-00026de0: 756d 656e 7461 7469 6f6e 2066 6f72 2069  umentation for i
-00026df0: 6e73 7461 6c6c 6564 206f 7063 6f64 6573  nstalled opcodes
-00026e00: 0a20 2020 2020 2020 202d 2d6f 7574 666f  .        --outfo
-00026e10: 6c64 6572 3a20 6966 2067 6976 656e 2074  lder: if given t
-00026e20: 6865 2064 6f63 756d 656e 7461 7469 6f6e  he documentation
-00026e30: 2069 7320 706c 6163 6564 2069 6e20 7468   is placed in th
-00026e40: 6973 2066 6f6c 6465 722e 204f 7468 6572  is folder. Other
-00026e50: 7769 7365 2c20 6974 2069 730a 2020 2020  wise, it is.    
-00026e60: 2020 2020 2020 2020 706c 6163 6564 2069          placed i
-00026e70: 6e20 5249 5353 4554 5f47 454e 4552 4154  n RISSET_GENERAT
-00026e80: 4544 5f44 4f43 530a 2020 2020 2222 220a  ED_DOCS.    """.
-00026e90: 2020 2020 6f75 7466 6f6c 6465 7220 3d20      outfolder = 
-00026ea0: 6172 6773 2e6f 7574 666f 6c64 6572 206f  args.outfolder o
-00026eb0: 7220 5249 5353 4554 5f47 454e 4552 4154  r RISSET_GENERAT
-00026ec0: 4544 5f44 4f43 530a 0a20 2020 2074 7279  ED_DOCS..    try
-00026ed0: 3a0a 2020 2020 2020 2020 5f67 656e 6572  :.        _gener
-00026ee0: 6174 655f 646f 6375 6d65 6e74 6174 696f  ate_documentatio
-00026ef0: 6e28 6964 782c 2064 6573 743d 5061 7468  n(idx, dest=Path
-00026f00: 286f 7574 666f 6c64 6572 292c 2062 7569  (outfolder), bui
-00026f10: 6c64 6874 6d6c 3d54 7275 652c 206f 6e6c  ldhtml=True, onl
-00026f20: 7969 6e73 7461 6c6c 6564 3d61 7267 732e  yinstalled=args.
-00026f30: 6f6e 6c79 696e 7374 616c 6c65 642c 0a20  onlyinstalled,. 
-00026f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026f50: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00026f60: 7063 6f64 6573 786d 6c3d 5249 5353 4554  pcodesxml=RISSET
-00026f70: 5f4f 5043 4f44 4553 584d 4c29 0a20 2020  _OPCODESXML).   
-00026f80: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-00026f90: 6e20 6173 2065 3a0a 2020 2020 2020 2020  n as e:.        
-00026fa0: 5f65 7272 6f72 6d73 6728 7374 7228 6529  _errormsg(str(e)
-00026fb0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00026fc0: 2046 616c 7365 0a0a 2020 2020 5f69 6e66   False..    _inf
-00026fd0: 6f28 6622 446f 6375 6d65 6e74 6174 696f  o(f"Documentatio
-00026fe0: 6e20 6765 6e65 7261 7465 6420 696e 207b  n generated in {
-00026ff0: 6f75 7466 6f6c 6465 727d 2229 0a20 2020  outfolder}").   
-00027000: 205f 696e 666f 2866 2253 6176 6564 206f   _info(f"Saved o
-00027010: 7063 6f64 6573 2e78 6d6c 2074 6f20 7b52  pcodes.xml to {R
-00027020: 4953 5345 545f 4f50 434f 4445 5358 4d4c  ISSET_OPCODESXML
-00027030: 7d22 290a 2020 2020 7265 7475 726e 2054  }").    return T
-00027040: 7275 650a 0a0a 6465 6620 636d 645f 696e  rue...def cmd_in
-00027050: 666f 2869 6478 3a20 4d61 696e 496e 6465  fo(idx: MainInde
-00027060: 782c 2061 7267 7329 202d 3e20 626f 6f6c  x, args) -> bool
-00027070: 3a0a 2020 2020 7069 636b 6c65 6669 6c65  :.    picklefile
-00027080: 203d 205f 4d41 494e 494e 4445 585f 5049   = _MAININDEX_PI
-00027090: 434b 4c45 5f46 494c 450a 2020 2020 6966  CKLE_FILE.    if
-000270a0: 206e 6f74 2070 6963 6b6c 6566 696c 652e   not picklefile.
-000270b0: 6578 6973 7473 2829 3a0a 2020 2020 2020  exists():.      
-000270c0: 2020 6c61 7374 7570 6461 7465 203d 2039    lastupdate = 9
-000270d0: 3939 3939 3939 390a 2020 2020 656c 7365  9999999.    else
-000270e0: 3a0a 2020 2020 2020 2020 696d 706f 7274  :.        import
-000270f0: 2074 696d 650a 2020 2020 2020 2020 6c61   time.        la
-00027100: 7374 7570 6461 7465 203d 2069 6e74 2828  stupdate = int((
-00027110: 7469 6d65 2e74 696d 6528 2920 2d20 7069  time.time() - pi
-00027120: 636b 6c65 6669 6c65 2e73 7461 7428 292e  cklefile.stat().
-00027130: 7374 5f6d 7469 6d65 2920 2f20 3638 3634  st_mtime) / 6864
-00027140: 3030 290a 0a20 2020 2064 203d 207b 0a20  00)..    d = {. 
-00027150: 2020 2020 2020 2027 7665 7273 696f 6e27         'version'
-00027160: 3a20 5f5f 7665 7273 696f 6e5f 5f2c 0a20  : __version__,. 
-00027170: 2020 2020 2020 2027 696e 6465 782d 7665         'index-ve
-00027180: 7273 696f 6e27 3a20 6964 782e 7665 7273  rsion': idx.vers
-00027190: 696f 6e2c 0a20 2020 2020 2020 2027 706c  ion,.        'pl
-000271a0: 7567 696e 7370 6174 6827 3a20 6964 782e  uginspath': idx.
-000271b0: 7573 6572 5f70 6c75 6769 6e73 5f70 6174  user_plugins_pat
-000271c0: 682e 6173 5f70 6f73 6978 2829 2c0a 2020  h.as_posix(),.  
-000271d0: 2020 2020 2020 2772 6973 7365 7472 6f6f        'rissetroo
-000271e0: 7427 3a20 5249 5353 4554 5f52 4f4f 542e  t': RISSET_ROOT.
-000271f0: 6173 5f70 6f73 6978 2829 2c0a 2020 2020  as_posix(),.    
-00027200: 2020 2020 2763 6c6f 6e65 7370 6174 6827      'clonespath'
-00027210: 3a20 5249 5353 4554 5f43 4c4f 4e45 535f  : RISSET_CLONES_
-00027220: 5041 5448 2e61 735f 706f 7369 7828 292c  PATH.as_posix(),
-00027230: 0a20 2020 2020 2020 2027 6173 7365 7473  .        'assets
-00027240: 7061 7468 273a 2052 4953 5345 545f 4153  path': RISSET_AS
-00027250: 5345 5453 5f50 4154 482e 6173 5f70 6f73  SETS_PATH.as_pos
-00027260: 6978 2829 2c0a 2020 2020 2020 2020 2768  ix(),.        'h
-00027270: 746d 6c64 6f63 7327 3a20 2852 4953 5345  tmldocs': (RISSE
-00027280: 545f 4745 4e45 5241 5445 445f 444f 4353  T_GENERATED_DOCS
-00027290: 2f22 7369 7465 2229 2e61 735f 706f 7369  /"site").as_posi
-000272a0: 7828 292c 0a20 2020 2020 2020 2027 6d61  x(),.        'ma
-000272b0: 6e70 6167 6573 273a 2028 5249 5353 4554  npages': (RISSET
-000272c0: 5f47 454e 4552 4154 4544 5f44 4f43 532f  _GENERATED_DOCS/
-000272d0: 2264 6f63 732f 6f70 636f 6465 7322 292e  "docs/opcodes").
-000272e0: 6173 5f70 6f73 6978 2829 2c0a 2020 2020  as_posix(),.    
-000272f0: 2020 2020 2764 6174 6172 6570 6f27 3a20      'datarepo': 
-00027300: 5249 5353 4554 5f44 4154 4152 4550 4f5f  RISSET_DATAREPO_
-00027310: 4c4f 4341 4c50 4154 482e 6173 5f70 6f73  LOCALPATH.as_pos
-00027320: 6978 2829 2c0a 2020 2020 2020 2020 276f  ix(),.        'o
-00027330: 7063 6f64 6573 786d 6c27 3a20 2852 4953  pcodesxml': (RIS
-00027340: 5345 545f 524f 4f54 202f 2022 6f70 636f  SET_ROOT / "opco
-00027350: 6465 732e 786d 6c22 292e 6173 5f70 6f73  des.xml").as_pos
-00027360: 6978 2829 2c0a 2020 2020 2020 2020 2764  ix(),.        'd
-00027370: 6179 732d 7369 6e63 652d 7570 6461 7465  ays-since-update
-00027380: 273a 206c 6173 7475 7064 6174 652c 0a20  ': lastupdate,. 
-00027390: 2020 2020 2020 2027 696e 7374 616c 6c65         'installe
-000273a0: 642d 706c 7567 696e 7327 3a20 5b70 6c75  d-plugins': [plu
-000273b0: 6769 6e2e 6e61 6d65 2066 6f72 2070 6c75  gin.name for plu
-000273c0: 6769 6e20 696e 2069 6478 2e70 6c75 6769  gin in idx.plugi
-000273d0: 6e73 2e76 616c 7565 7328 290a 2020 2020  ns.values().    
-000273e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000273f0: 2020 2020 2020 2020 2020 6966 2069 6478            if idx
-00027400: 2e69 735f 706c 7567 696e 5f69 6e73 7461  .is_plugin_insta
-00027410: 6c6c 6564 2870 6c75 6769 6e2c 2063 6865  lled(plugin, che
-00027420: 636b 3d46 616c 7365 295d 0a20 2020 207d  ck=False)].    }
-00027430: 0a20 2020 2069 6620 6172 6773 2e66 756c  .    if args.ful
-00027440: 6c3a 0a20 2020 2020 2020 2064 5b27 706c  l:.        d['pl
-00027450: 7567 696e 7327 5d20 3d20 6964 782e 6c69  ugins'] = idx.li
-00027460: 7374 5f70 6c75 6769 6e73 5f61 735f 6469  st_plugins_as_di
-00027470: 6374 2829 0a20 2020 206a 736f 6e73 7472  ct().    jsonstr
-00027480: 203d 206a 736f 6e2e 6475 6d70 7328 642c   = json.dumps(d,
-00027490: 2069 6e64 656e 743d 5472 7565 290a 2020   indent=True).  
-000274a0: 2020 6966 2061 7267 732e 6f75 7466 696c    if args.outfil
-000274b0: 653a 0a20 2020 2020 2020 206f 7065 6e28  e:.        open(
-000274c0: 6172 6773 2e6f 7574 6669 6c65 2c20 2277  args.outfile, "w
-000274d0: 2229 2e77 7269 7465 286a 736f 6e73 7472  ").write(jsonstr
-000274e0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
-000274f0: 2020 2020 7072 696e 7428 6a73 6f6e 7374      print(jsonst
-00027500: 7229 0a20 2020 2072 6574 7572 6e20 5472  r).    return Tr
-00027510: 7565 0a0a 0a64 6566 2063 6d64 5f75 7067  ue...def cmd_upg
-00027520: 7261 6465 2869 6478 3a20 4d61 696e 496e  rade(idx: MainIn
-00027530: 6465 782c 2061 7267 7329 202d 3e20 626f  dex, args) -> bo
-00027540: 6f6c 3a0a 2020 2020 2222 2220 5570 6772  ol:.    """ Upgr
-00027550: 6164 6573 2061 6c6c 2069 6e73 7461 6c6c  ades all install
-00027560: 6564 2070 6163 6b61 6765 7320 6966 2074  ed packages if t
-00027570: 6865 7920 6361 6e20 6265 2075 7067 7261  hey can be upgra
-00027580: 6465 6420 2222 220a 2020 2020 666f 7220  ded """.    for 
-00027590: 706c 7567 696e 2069 6e20 6964 782e 706c  plugin in idx.pl
-000275a0: 7567 696e 732e 7661 6c75 6573 2829 3a0a  ugins.values():.
-000275b0: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-000275c0: 6478 2e69 735f 706c 7567 696e 5f69 6e73  dx.is_plugin_ins
-000275d0: 7461 6c6c 6564 2870 6c75 6769 6e29 3a0a  talled(plugin):.
-000275e0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
-000275f0: 696e 7565 0a20 2020 2020 2020 2069 6e66  inue.        inf
-00027600: 6f20 3d20 6964 782e 696e 7374 616c 6c65  o = idx.installe
-00027610: 645f 706c 7567 696e 5f69 6e66 6f28 706c  d_plugin_info(pl
-00027620: 7567 696e 290a 2020 2020 2020 2020 6966  ugin).        if
-00027630: 206e 6f74 2069 6e66 6f20 6f72 2069 6e66   not info or inf
-00027640: 6f2e 7665 7273 696f 6e74 7570 6c65 203d  o.versiontuple =
-00027650: 3d20 2830 2c20 302c 2030 293a 0a20 2020  = (0, 0, 0):.   
-00027660: 2020 2020 2020 2020 205f 6465 6275 6728           _debug(
-00027670: 6622 5570 6772 6164 653a 2070 6c75 6769  f"Upgrade: plugi
-00027680: 6e20 7b70 6c75 6769 6e2e 6e61 6d65 7d20  n {plugin.name} 
-00027690: 696e 7374 616c 6c65 6420 6d61 6e75 616c  installed manual
-000276a0: 6c79 2c20 7769 6c6c 206e 6f74 2075 7067  ly, will not upg
-000276b0: 7261 6465 2229 0a20 2020 2020 2020 2065  rade").        e
-000276c0: 6c69 6620 706c 7567 696e 2e76 6572 7369  lif plugin.versi
-000276d0: 6f6e 7475 706c 6520 3c3d 2069 6e66 6f2e  ontuple <= info.
-000276e0: 7665 7273 696f 6e74 7570 6c65 3a0a 2020  versiontuple:.  
-000276f0: 2020 2020 2020 2020 2020 5f64 6562 7567            _debug
-00027700: 2866 2255 7067 7261 6465 3a20 706c 7567  (f"Upgrade: plug
-00027710: 696e 207b 706c 7567 696e 2e6e 616d 657d  in {plugin.name}
-00027720: 2061 6c72 6561 6479 2075 7020 746f 2064   already up to d
-00027730: 6174 6522 0a20 2020 2020 2020 2020 2020  ate".           
-00027740: 2020 2020 2020 2020 6622 2028 696e 7374          f" (inst
-00027750: 616c 6c65 6420 7665 7273 696f 6e3a 207b  alled version: {
-00027760: 696e 666f 2e76 6572 7369 6f6e 7475 706c  info.versiontupl
-00027770: 657d 2c20 6c61 7465 7374 2076 6572 7369  e}, latest versi
-00027780: 6f6e 3a20 7b70 6c75 6769 6e2e 7665 7273  on: {plugin.vers
-00027790: 696f 6e74 7570 6c65 7d22 290a 2020 2020  iontuple}").    
-000277a0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000277b0: 2020 2020 2020 5f64 6562 7567 2866 2255        _debug(f"U
-000277c0: 7067 7261 6469 6e67 2070 6c75 6769 6e20  pgrading plugin 
-000277d0: 7b70 6c75 6769 6e2e 6e61 6d65 7d20 6672  {plugin.name} fr
-000277e0: 6f6d 207b 696e 666f 2e76 6572 7369 6f6e  om {info.version
-000277f0: 7475 706c 657d 2074 6f20 7b70 6c75 6769  tuple} to {plugi
-00027800: 6e2e 7665 7273 696f 6e74 7570 6c65 7d22  n.versiontuple}"
-00027810: 290a 2020 2020 2020 2020 2020 2020 6572  ).            er
-00027820: 7220 3d20 6964 782e 696e 7374 616c 6c5f  r = idx.install_
-00027830: 706c 7567 696e 2870 6c75 6769 6e29 0a20  plugin(plugin). 
-00027840: 2020 2020 2020 2020 2020 2069 6620 6572             if er
-00027850: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-00027860: 2020 205f 6572 726f 726d 7367 2866 2245     _errormsg(f"E
-00027870: 7272 6f72 2077 6869 6c65 2069 6e73 7461  rror while insta
-00027880: 6c6c 696e 6720 7b70 6c75 6769 6e2e 6e61  lling {plugin.na
-00027890: 6d65 7d22 290a 2020 2020 2020 2020 2020  me}").          
-000278a0: 2020 2020 2020 5f65 7272 6f72 6d73 6728        _errormsg(
-000278b0: 2220 2020 2022 202b 2073 7472 2865 7272  "    " + str(err
-000278c0: 2929 0a0a 2020 2020 7265 7475 726e 2054  ))..    return T
-000278d0: 7275 650a 0a0a 6465 6620 636d 645f 646f  rue...def cmd_do
-000278e0: 776e 6c6f 6164 2869 6478 3a20 4d61 696e  wnload(idx: Main
-000278f0: 496e 6465 782c 2061 7267 7329 202d 3e20  Index, args) -> 
-00027900: 626f 6f6c 3a0a 2020 2020 2222 2244 6f77  bool:.    """Dow
-00027910: 6e6c 6f61 6473 2061 2062 696e 6172 7920  nloads a binary 
-00027920: 666f 7220 6120 6769 7665 6e20 706c 7567  for a given plug
-00027930: 696e 2222 220a 2020 2020 6f75 7466 6f6c  in""".    outfol
-00027940: 6465 7220 3d20 6172 6773 2e70 6174 680a  der = args.path.
-00027950: 2020 2020 6966 206e 6f74 206f 7574 666f      if not outfo
-00027960: 6c64 6572 3a0a 2020 2020 2020 2020 6f75  lder:.        ou
-00027970: 7466 6f6c 6465 7220 3d20 5061 7468 2e63  tfolder = Path.c
-00027980: 7764 2829 2e61 735f 706f 7369 7828 290a  wd().as_posix().
-00027990: 0a20 2020 2069 6620 6e6f 7420 6f73 2e70  .    if not os.p
-000279a0: 6174 682e 6578 6973 7473 286f 7574 666f  ath.exists(outfo
-000279b0: 6c64 6572 293a 0a20 2020 2020 2020 205f  lder):.        _
-000279c0: 6572 726f 726d 7367 2866 2264 6f77 6e6c  errormsg(f"downl
-000279d0: 6f61 643a 204f 7574 7075 7420 666f 6c64  oad: Output fold
-000279e0: 6572 2027 7b6f 7574 666f 6c64 6572 7d27  er '{outfolder}'
-000279f0: 2064 6f65 7320 6e6f 7420 6578 6973 7422   does not exist"
-00027a00: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00027a10: 2046 616c 7365 0a0a 2020 2020 706c 6174   False..    plat
-00027a20: 666f 726d 6964 203d 2061 7267 732e 706c  formid = args.pl
-00027a30: 6174 666f 726d 0a20 2020 2069 6620 6e6f  atform.    if no
-00027a40: 7420 706c 6174 666f 726d 6964 3a0a 2020  t platformid:.  
-00027a50: 2020 2020 2020 706c 6174 666f 726d 6964        platformid
-00027a60: 203d 205f 7365 7373 696f 6e2e 706c 6174   = _session.plat
-00027a70: 666f 726d 6964 0a0a 2020 2020 706c 7567  formid..    plug
-00027a80: 696e 203d 2069 6478 2e70 6c75 6769 6e73  in = idx.plugins
-00027a90: 2e67 6574 2861 7267 732e 706c 7567 696e  .get(args.plugin
-00027aa0: 290a 2020 2020 6966 2070 6c75 6769 6e20  ).    if plugin 
-00027ab0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00027ac0: 2070 6c75 6769 6e6e 616d 6573 203d 2027   pluginnames = '
-00027ad0: 2c20 272e 6a6f 696e 2869 6478 2e70 6c75  , '.join(idx.plu
-00027ae0: 6769 6e73 2e6b 6579 7328 2929 0a20 2020  gins.keys()).   
-00027af0: 2020 2020 205f 6572 726f 726d 7367 2866       _errormsg(f
-00027b00: 2264 6f77 6e6c 6f61 643a 2055 6e6b 6e6f  "download: Unkno
-00027b10: 776e 2070 6c75 6769 6e20 277b 6172 6773  wn plugin '{args
-00027b20: 2e70 6c75 6769 6e7d 272e 2041 7661 696c  .plugin}'. Avail
-00027b30: 6162 6c65 2070 6c75 6769 6e73 3a20 7b70  able plugins: {p
-00027b40: 6c75 6769 6e6e 616d 6573 7d22 290a 2020  luginnames}").  
-00027b50: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-00027b60: 7365 0a0a 2020 2020 646c 6c70 6174 6820  se..    dllpath 
-00027b70: 3d20 6964 782e 6765 745f 706c 7567 696e  = idx.get_plugin
-00027b80: 5f64 6c6c 2870 6c75 6769 6e3d 706c 7567  _dll(plugin=plug
-00027b90: 696e 2c20 706c 6174 666f 726d 6964 3d70  in, platformid=p
-00027ba0: 6c61 7466 6f72 6d69 6429 0a20 2020 2069  latformid).    i
-00027bb0: 6620 6e6f 7420 646c 6c70 6174 682e 6578  f not dllpath.ex
-00027bc0: 6973 7473 2829 3a0a 2020 2020 2020 2020  ists():.        
-00027bd0: 5f65 7272 6f72 6d73 6728 6622 4572 726f  _errormsg(f"Erro
-00027be0: 7220 7768 696c 6520 646f 776e 6c6f 6164  r while download
-00027bf0: 696e 6720 6269 6e61 7279 2066 6f72 2070  ing binary for p
-00027c00: 6c75 6769 6e20 277b 706c 7567 696e 2e6e  lugin '{plugin.n
-00027c10: 616d 657d 272e 2022 0a20 2020 2020 2020  ame}'. ".       
-00027c20: 2020 2020 2020 2020 2020 2066 2245 7870             f"Exp
-00027c30: 6563 7465 6420 746f 2066 696e 6420 7468  ected to find th
-00027c40: 6520 6269 6e61 7279 2061 7420 277b 646c  e binary at '{dl
-00027c50: 6c70 6174 687d 272c 2062 7574 2074 6865  lpath}', but the
-00027c60: 2070 6174 6820 646f 6573 206e 6f74 2065   path does not e
-00027c70: 7869 7374 2229 0a20 2020 2020 2020 2072  xist").        r
-00027c80: 6574 7572 6e20 4661 6c73 650a 0a20 2020  eturn False..   
-00027c90: 206f 7574 6669 6c65 203d 2050 6174 6828   outfile = Path(
-00027ca0: 6f75 7466 6f6c 6465 7229 202f 2064 6c6c  outfolder) / dll
-00027cb0: 7061 7468 2e6e 616d 650a 2020 2020 6966  path.name.    if
-00027cc0: 206f 7574 6669 6c65 2e65 7869 7374 7328   outfile.exists(
-00027cd0: 293a 0a20 2020 2020 2020 205f 6572 726f  ):.        _erro
-00027ce0: 726d 7367 2866 2254 6865 2064 6573 7469  rmsg(f"The desti
-00027cf0: 6e61 7469 6f6e 2070 6174 6820 277b 6f75  nation path '{ou
-00027d00: 7466 696c 657d 2720 616c 7265 6164 7920  tfile}' already 
-00027d10: 6578 6973 7473 2e22 290a 2020 2020 2020  exists.").      
-00027d20: 2020 7265 7475 726e 2046 616c 7365 0a0a    return False..
-00027d30: 2020 2020 7368 7574 696c 2e6d 6f76 6528      shutil.move(
-00027d40: 646c 6c70 6174 682c 206f 7574 666f 6c64  dllpath, outfold
-00027d50: 6572 290a 0a20 2020 205f 696e 666f 2866  er)..    _info(f
-00027d60: 2244 6f77 6e6c 6f61 6465 6420 6269 6e61  "Downloaded bina
-00027d70: 7279 2066 6f72 2070 6c75 6769 6e20 277b  ry for plugin '{
-00027d80: 706c 7567 696e 2e6e 616d 657d 2720 746f  plugin.name}' to
-00027d90: 2027 7b6f 7574 6669 6c65 7d27 2229 0a20   '{outfile}'"). 
-00027da0: 2020 2072 6574 7572 6e20 5472 7565 0a0a     return True..
-00027db0: 0a64 6566 205f 7275 6e6e 696e 675f 6672  .def _running_fr
-00027dc0: 6f6d 5f74 6572 6d69 6e61 6c28 2920 2d3e  om_terminal() ->
-00027dd0: 2062 6f6f 6c3a 0a20 2020 2072 6574 7572   bool:.    retur
-00027de0: 6e20 7379 732e 7374 6469 6e2e 6973 6174  n sys.stdin.isat
-00027df0: 7479 2829 0a0a 0a64 6566 205f 7072 696e  ty()...def _prin
-00027e00: 745f 6669 6c65 2870 6174 683a 2050 6174  t_file(path: Pat
-00027e10: 6829 202d 3e20 4e6f 6e65 3a0a 2020 2020  h) -> None:.    
-00027e20: 7465 7874 203d 206f 7065 6e28 7374 7228  text = open(str(
-00027e30: 7061 7468 2929 2e72 6561 6428 290a 2020  path)).read().  
-00027e40: 2020 7072 696e 7428 7465 7874 290a 0a0a    print(text)...
-00027e50: 6465 6620 5f73 686f 775f 6d61 726b 646f  def _show_markdo
-00027e60: 776e 5f66 696c 6528 7061 7468 3a20 5061  wn_file(path: Pa
-00027e70: 7468 2c20 7374 796c 653d 2764 6172 6b27  th, style='dark'
-00027e80: 2920 2d3e 204e 6f6e 653a 0a20 2020 2069  ) -> None:.    i
-00027e90: 6620 6e6f 7420 5f72 756e 6e69 6e67 5f66  f not _running_f
-00027ea0: 726f 6d5f 7465 726d 696e 616c 2829 3a0a  rom_terminal():.
-00027eb0: 2020 2020 2020 2020 5f6f 7065 6e5f 696e          _open_in
-00027ec0: 5f64 6566 6175 6c74 5f61 7070 6c69 6361  _default_applica
-00027ed0: 7469 6f6e 2873 7472 2870 6174 6829 290a  tion(str(path)).
-00027ee0: 2020 2020 2020 2020 7265 7475 726e 0a0a          return..
-00027ef0: 2020 2020 6672 6f6d 2070 7967 6d65 6e74      from pygment
-00027f00: 7320 696d 706f 7274 2068 6967 686c 6967  s import highlig
-00027f10: 6874 0a20 2020 2066 726f 6d20 7079 676d  ht.    from pygm
-00027f20: 656e 7473 2e6c 6578 6572 7320 696d 706f  ents.lexers impo
-00027f30: 7274 204d 6172 6b64 6f77 6e4c 6578 6572  rt MarkdownLexer
-00027f40: 0a20 2020 2066 726f 6d20 7079 676d 656e  .    from pygmen
-00027f50: 7473 2e66 6f72 6d61 7474 6572 7320 696d  ts.formatters im
-00027f60: 706f 7274 2054 6572 6d69 6e61 6c54 7275  port TerminalTru
-00027f70: 6543 6f6c 6f72 466f 726d 6174 7465 720a  eColorFormatter.
-00027f80: 2020 2020 6672 6f6d 2070 7967 6d65 6e74      from pygment
-00027f90: 732e 7374 796c 6573 2069 6d70 6f72 7420  s.styles import 
-00027fa0: 5354 594c 455f 4d41 500a 2020 2020 2320  STYLE_MAP.    # 
-00027fb0: 6672 6f6d 2070 7967 6d65 6e74 732e 666f  from pygments.fo
-00027fc0: 726d 6174 7465 7273 2069 6d70 6f72 7420  rmatters import 
-00027fd0: 5465 726d 696e 616c 466f 726d 6174 7465  TerminalFormatte
-00027fe0: 720a 2020 2020 636f 6465 203d 206f 7065  r.    code = ope
-00027ff0: 6e28 7061 7468 292e 7265 6164 2829 0a20  n(path).read(). 
-00028000: 2020 2069 6620 7374 796c 6520 3d3d 2027     if style == '
-00028010: 6461 726b 273a 0a20 2020 2020 2020 2073  dark':.        s
-00028020: 7479 6c65 203d 2027 6672 7569 7479 270a  tyle = 'fruity'.
-00028030: 2020 2020 656c 6966 2073 7479 6c65 203d      elif style =
-00028040: 3d20 276c 6967 6874 273a 0a20 2020 2020  = 'light':.     
-00028050: 2020 2073 7479 6c65 203d 2027 6672 6965     style = 'frie
-00028060: 6e64 6c79 270a 2020 2020 656c 7365 3a0a  ndly'.    else:.
-00028070: 2020 2020 2020 2020 6966 2073 7479 6c65          if style
-00028080: 206e 6f74 2069 6e20 5354 594c 455f 4d41   not in STYLE_MA
-00028090: 503a 0a20 2020 2020 2020 2020 2020 2073  P:.            s
-000280a0: 7479 6c65 203d 2027 6465 6661 756c 7427  tyle = 'default'
-000280b0: 0a0a 2020 2020 7072 696e 7428 6869 6768  ..    print(high
-000280c0: 6c69 6768 7428 636f 6465 2c20 4d61 726b  light(code, Mark
-000280d0: 646f 776e 4c65 7865 7228 292c 2054 6572  downLexer(), Ter
-000280e0: 6d69 6e61 6c54 7275 6543 6f6c 6f72 466f  minalTrueColorFo
-000280f0: 726d 6174 7465 7228 7374 796c 653d 7374  rmatter(style=st
-00028100: 796c 6529 2929 0a20 2020 2023 2070 7269  yle))).    # pri
-00028110: 6e74 2868 6967 686c 6967 6874 2863 6f64  nt(highlight(cod
-00028120: 652c 204d 6172 6b64 6f77 6e4c 6578 6572  e, MarkdownLexer
-00028130: 2829 2c20 5465 726d 696e 616c 466f 726d  (), TerminalForm
-00028140: 6174 7465 7228 2929 290a 0a0a 6465 6620  atter()))...def 
-00028150: 6d61 696e 2829 3a0a 2020 2020 2320 5072  main():.    # Pr
-00028160: 656c 696d 696e 6172 7920 6368 6563 6b73  eliminary checks
-00028170: 0a20 2020 2069 6620 7379 732e 706c 6174  .    if sys.plat
-00028180: 666f 726d 206e 6f74 2069 6e20 2822 6c69  form not in ("li
-00028190: 6e75 7822 2c20 2264 6172 7769 6e22 2c20  nux", "darwin", 
-000281a0: 2277 696e 3332 2229 3a0a 2020 2020 2020  "win32"):.      
-000281b0: 2020 5f65 7272 6f72 6d73 6728 6622 506c    _errormsg(f"Pl
-000281c0: 6174 666f 726d 206e 6f74 2073 7570 706f  atform not suppo
-000281d0: 7274 6564 3a20 7b73 7973 2e70 6c61 7466  rted: {sys.platf
-000281e0: 6f72 6d7d 2229 0a20 2020 2020 2020 2073  orm}").        s
-000281f0: 7973 2e65 7869 7428 2d31 290a 0a20 2020  ys.exit(-1)..   
-00028200: 2069 6620 5f67 6574 5f67 6974 5f62 696e   if _get_git_bin
-00028210: 6172 7928 2920 6973 204e 6f6e 653a 0a20  ary() is None:. 
-00028220: 2020 2020 2020 205f 6572 726f 726d 7367         _errormsg
-00028230: 2822 6769 7420 636f 6d6d 616e 6420 6e6f  ("git command no
-00028240: 7420 666f 756e 642e 2043 6865 636b 2074  t found. Check t
-00028250: 6861 7420 6769 7420 6973 2069 6e73 7461  hat git is insta
-00028260: 6c6c 6564 2061 6e64 2069 6e20 7468 6520  lled and in the 
-00028270: 5041 5448 2229 0a20 2020 2020 2020 2073  PATH").        s
-00028280: 7973 2e65 7869 7428 2d31 290a 0a20 2020  ys.exit(-1)..   
-00028290: 2064 6566 2066 6c61 6728 7061 7273 6572   def flag(parser
-000282a0: 2c20 666c 6167 2c20 6865 6c70 3d22 2229  , flag, help="")
-000282b0: 3a0a 2020 2020 2020 2020 7061 7273 6572  :.        parser
-000282c0: 2e61 6464 5f61 7267 756d 656e 7428 666c  .add_argument(fl
-000282d0: 6167 2c20 6163 7469 6f6e 3d22 7374 6f72  ag, action="stor
-000282e0: 655f 7472 7565 222c 2068 656c 703d 6865  e_true", help=he
-000282f0: 6c70 290a 0a20 2020 2023 204d 6169 6e20  lp)..    # Main 
-00028300: 7061 7273 6572 0a20 2020 2070 6172 7365  parser.    parse
-00028310: 7220 3d20 6172 6770 6172 7365 2e41 7267  r = argparse.Arg
-00028320: 756d 656e 7450 6172 7365 7228 290a 2020  umentParser().  
-00028330: 2020 666c 6167 2870 6172 7365 722c 2022    flag(parser, "
-00028340: 2d2d 6465 6275 6722 2c20 6865 6c70 3d22  --debug", help="
-00028350: 5072 696e 7420 6465 6275 6720 696e 666f  Print debug info
-00028360: 726d 6174 696f 6e22 290a 2020 2020 666c  rmation").    fl
-00028370: 6167 2870 6172 7365 722c 2022 2d2d 7570  ag(parser, "--up
-00028380: 6461 7465 222c 2068 656c 703d 2255 7064  date", help="Upd
-00028390: 6174 6520 7468 6520 706c 7567 696e 7320  ate the plugins 
-000283a0: 6461 7461 2062 6566 6f72 6520 616e 7920  data before any 
-000283b0: 6163 7469 6f6e 2229 0a20 2020 2066 6c61  action").    fla
-000283c0: 6728 7061 7273 6572 2c20 222d 2d73 746f  g(parser, "--sto
-000283d0: 706f 6e65 7272 6f72 222c 2068 656c 703d  ponerror", help=
-000283e0: 2253 746f 7020 7061 7273 696e 6720 6966  "Stop parsing if
-000283f0: 2061 6e20 6572 726f 7220 6973 2064 6574   an error is det
-00028400: 6563 7465 6422 290a 2020 2020 666c 6167  ected").    flag
-00028410: 2870 6172 7365 722c 2022 2d2d 7665 7273  (parser, "--vers
-00028420: 696f 6e22 2c20 6865 6c70 3d22 5072 696e  ion", help="Prin
-00028430: 7420 7665 7273 696f 6e20 616e 6420 6578  t version and ex
-00028440: 6974 2229 0a20 2020 2070 6172 7365 722e  it").    parser.
-00028450: 6164 645f 6172 6775 6d65 6e74 2822 2d63  add_argument("-c
-00028460: 222c 2022 2d2d 6373 6f75 6e64 222c 2068  ", "--csound", h
-00028470: 656c 703d 2257 6869 6368 2063 736f 756e  elp="Which csoun
-00028480: 6420 7665 7273 696f 6e20 746f 2075 7365  d version to use
-00028490: 2028 6f6e 6520 6f66 2030 2c20 362c 2037   (one of 0, 6, 7
-000284a0: 292e 2055 7365 2030 2074 6f20 6465 7465  ). Use 0 to dete
-000284b0: 6374 2074 6865 2069 6e73 7461 6c6c 6564  ct the installed
-000284c0: 2076 6572 7369 6f6e 222c 0a20 2020 2020   version",.     
-000284d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000284e0: 2020 2020 6465 6661 756c 743d 302c 2074      default=0, t
-000284f0: 7970 653d 696e 742c 2029 0a0a 2020 2020  ype=int, )..    
-00028500: 7375 6270 6172 7365 7273 203d 2070 6172  subparsers = par
-00028510: 7365 722e 6164 645f 7375 6270 6172 7365  ser.add_subparse
-00028520: 7273 2864 6573 743d 2763 6f6d 6d61 6e64  rs(dest='command
-00028530: 2729 0a0a 2020 2020 2320 4c69 7374 2063  ')..    # List c
-00028540: 6f6d 6d61 6e64 0a20 2020 206c 6973 745f  ommand.    list_
-00028550: 636d 6420 3d20 7375 6270 6172 7365 7273  cmd = subparsers
-00028560: 2e61 6464 5f70 6172 7365 7228 276c 6973  .add_parser('lis
-00028570: 7427 2c20 6865 6c70 3d22 4c69 7374 2070  t', help="List p
-00028580: 6163 6b61 6765 7322 290a 0a20 2020 2066  ackages")..    f
-00028590: 6c61 6728 6c69 7374 5f63 6d64 2c20 222d  lag(list_cmd, "-
-000285a0: 2d6a 736f 6e22 2c20 6865 6c70 3d22 4f75  -json", help="Ou
-000285b0: 7470 7574 7320 6c69 7374 2061 7320 6a73  tputs list as js
-000285c0: 6f6e 2229 0a20 2020 2066 6c61 6728 6c69  on").    flag(li
-000285d0: 7374 5f63 6d64 2c20 222d 2d6e 616d 656f  st_cmd, "--nameo
-000285e0: 6e6c 7922 2c20 6865 6c70 3d22 4f75 7470  nly", help="Outp
-000285f0: 7574 206a 7573 7420 7468 6520 6e61 6d65  ut just the name
-00028600: 206f 6620 6561 6368 2070 6c75 6769 6e22   of each plugin"
-00028610: 290a 2020 2020 666c 6167 286c 6973 745f  ).    flag(list_
-00028620: 636d 642c 2022 2d2d 696e 7374 616c 6c65  cmd, "--installe
-00028630: 6422 2c20 6865 6c70 3d22 4c69 7374 206f  d", help="List o
-00028640: 6e6c 7920 696e 7374 616c 6c65 6420 706c  nly installed pl
-00028650: 7567 696e 7322 290a 2020 2020 666c 6167  ugins").    flag
-00028660: 286c 6973 745f 636d 642c 2022 2d2d 7570  (list_cmd, "--up
-00028670: 6772 6164 6561 626c 6522 2c20 6865 6c70  gradeable", help
-00028680: 3d22 4c69 7374 206f 6e6c 7920 696e 7374  ="List only inst
-00028690: 616c 6c65 6420 7061 636b 6167 6573 2077  alled packages w
-000286a0: 6869 6368 2063 616e 2062 6520 7570 6772  hich can be upgr
-000286b0: 6164 6564 2229 0a20 2020 2066 6c61 6728  aded").    flag(
-000286c0: 6c69 7374 5f63 6d64 2c20 222d 2d6e 6f74  list_cmd, "--not
-000286d0: 696e 7374 616c 6c65 6422 2c20 6865 6c70  installed", help
-000286e0: 3d22 4c69 7374 206f 6e6c 7920 706c 7567  ="List only plug
-000286f0: 696e 7320 7768 6963 6820 6172 6520 6e6f  ins which are no
-00028700: 7420 696e 7374 616c 6c65 6422 290a 2020  t installed").  
-00028710: 2020 666c 6167 286c 6973 745f 636d 642c    flag(list_cmd,
-00028720: 2022 2d2d 6e6f 6865 6164 6572 222c 2068   "--noheader", h
-00028730: 656c 703d 2244 6f20 6e6f 7420 7072 696e  elp="Do not prin
-00028740: 7420 616e 7920 6578 7472 6120 696e 666f  t any extra info
-00028750: 726d 6174 696f 6e22 290a 2020 2020 6c69  rmation").    li
-00028760: 7374 5f63 6d64 2e61 6464 5f61 7267 756d  st_cmd.add_argum
-00028770: 656e 7428 222d 6f22 2c20 222d 2d6f 7574  ent("-o", "--out
-00028780: 6669 6c65 222c 2068 656c 703d 224f 7574  file", help="Out
-00028790: 7075 7473 2074 6f20 6120 6669 6c65 2229  puts to a file")
-000287a0: 0a20 2020 206c 6973 745f 636d 642e 6164  .    list_cmd.ad
-000287b0: 645f 6172 6775 6d65 6e74 2822 2d31 222c  d_argument("-1",
-000287c0: 2022 2d2d 6f6e 656c 696e 6522 2c20 6163   "--oneline", ac
-000287d0: 7469 6f6e 3d22 7374 6f72 655f 7472 7565  tion="store_true
-000287e0: 222c 2068 656c 703d 224c 6973 7420 6561  ", help="List ea
-000287f0: 6368 2070 6c75 6769 6e20 696e 206f 6e65  ch plugin in one
-00028800: 206c 696e 6522 290a 2020 2020 6c69 7374   line").    list
-00028810: 5f63 6d64 2e73 6574 5f64 6566 6175 6c74  _cmd.set_default
-00028820: 7328 6675 6e63 3d63 6d64 5f6c 6973 7429  s(func=cmd_list)
-00028830: 0a0a 2020 2020 2320 496e 7374 616c 6c20  ..    # Install 
-00028840: 636f 6d6d 616e 640a 2020 2020 696e 7374  command.    inst
-00028850: 616c 6c5f 636d 6420 3d20 7375 6270 6172  all_cmd = subpar
-00028860: 7365 7273 2e61 6464 5f70 6172 7365 7228  sers.add_parser(
-00028870: 2269 6e73 7461 6c6c 222c 2068 656c 703d  "install", help=
-00028880: 2249 6e73 7461 6c6c 206f 7220 7570 6461  "Install or upda
-00028890: 7465 2061 2070 6163 6b61 6765 2229 0a20  te a package"). 
-000288a0: 2020 2066 6c61 6728 696e 7374 616c 6c5f     flag(install_
-000288b0: 636d 642c 2022 2d2d 666f 7263 6522 2c20  cmd, "--force", 
-000288c0: 6865 6c70 3d22 466f 7263 6520 696e 7374  help="Force inst
-000288d0: 616c 6c2f 7265 696e 7374 616c 6c22 290a  all/reinstall").
-000288e0: 2020 2020 696e 7374 616c 6c5f 636d 642e      install_cmd.
-000288f0: 6164 645f 6172 6775 6d65 6e74 2822 706c  add_argument("pl
-00028900: 7567 696e 7322 2c20 6e61 7267 733d 222b  ugins", nargs="+
-00028910: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-00028920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028930: 6865 6c70 3d22 4e61 6d65 206f 6620 7468  help="Name of th
-00028940: 6520 706c 7567 696e 2f70 6c75 6769 6e73  e plugin/plugins
-00028950: 2074 6f20 696e 7374 616c 6c2e 2022 0a20   to install. ". 
-00028960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028980: 2022 476c 6f62 2070 6174 7465 726e 2061   "Glob pattern a
-00028990: 7265 2073 7570 706f 7274 6564 2028 656e  re supported (en
-000289a0: 636c 6f73 6520 7468 656d 2069 6e73 6964  close them insid
-000289b0: 6520 7175 6f74 6174 696f 6e20 6d61 726b  e quotation mark
-000289c0: 7329 2229 0a20 2020 2069 6e73 7461 6c6c  s)").    install
-000289d0: 5f63 6d64 2e73 6574 5f64 6566 6175 6c74  _cmd.set_default
-000289e0: 7328 6675 6e63 3d63 6d64 5f69 6e73 7461  s(func=cmd_insta
-000289f0: 6c6c 290a 0a20 2020 2023 2072 656d 6f76  ll)..    # remov
-00028a00: 6520 636f 6d6d 616e 640a 2020 2020 726d  e command.    rm
-00028a10: 5f63 6d64 203d 2073 7562 7061 7273 6572  _cmd = subparser
-00028a20: 732e 6164 645f 7061 7273 6572 2822 7265  s.add_parser("re
-00028a30: 6d6f 7665 222c 2068 656c 703d 2252 656d  move", help="Rem
-00028a40: 6f76 6520 6120 7061 636b 6167 6522 290a  ove a package").
-00028a50: 2020 2020 726d 5f63 6d64 2e61 6464 5f61      rm_cmd.add_a
-00028a60: 7267 756d 656e 7428 2270 6c75 6769 6e22  rgument("plugin"
-00028a70: 2c20 6e61 7267 733d 222b 222c 2068 656c  , nargs="+", hel
-00028a80: 703d 2250 6c75 6769 6e2f 7320 746f 2072  p="Plugin/s to r
-00028a90: 656d 6f76 6522 290a 2020 2020 726d 5f63  emove").    rm_c
-00028aa0: 6d64 2e73 6574 5f64 6566 6175 6c74 7328  md.set_defaults(
-00028ab0: 6675 6e63 3d63 6d64 5f72 6d29 0a0a 2020  func=cmd_rm)..  
-00028ac0: 2020 2320 7368 6f77 2063 6f6d 6d61 6e64    # show command
-00028ad0: 0a20 2020 2073 686f 775f 636d 6420 3d20  .    show_cmd = 
-00028ae0: 7375 6270 6172 7365 7273 2e61 6464 5f70  subparsers.add_p
-00028af0: 6172 7365 7228 2273 686f 7722 2c20 6865  arser("show", he
-00028b00: 6c70 3d22 5368 6f77 2069 6e66 6f72 6d61  lp="Show informa
-00028b10: 7469 6f6e 2061 626f 7574 2061 2070 6c75  tion about a plu
-00028b20: 6769 6e22 290a 2020 2020 7368 6f77 5f63  gin").    show_c
-00028b30: 6d64 2e61 6464 5f61 7267 756d 656e 7428  md.add_argument(
-00028b40: 2270 6c75 6769 6e22 2c20 6865 6c70 3d22  "plugin", help="
-00028b50: 506c 7567 696e 2074 6f20 6761 7468 6572  Plugin to gather
-00028b60: 2069 6e66 6f72 6d61 7469 6f6e 2061 626f   information abo
-00028b70: 7574 2229 0a20 2020 2073 686f 775f 636d  ut").    show_cm
-00028b80: 642e 7365 745f 6465 6661 756c 7473 2866  d.set_defaults(f
-00028b90: 756e 633d 636d 645f 7368 6f77 290a 0a20  unc=cmd_show).. 
-00028ba0: 2020 2023 2062 7569 6c64 2064 6f63 730a     # build docs.
-00028bb0: 2020 2020 6d61 6b65 646f 6373 5f63 6d64      makedocs_cmd
-00028bc0: 203d 2073 7562 7061 7273 6572 732e 6164   = subparsers.ad
-00028bd0: 645f 7061 7273 6572 2822 6d61 6b65 646f  d_parser("makedo
-00028be0: 6373 222c 2068 656c 703d 2242 7569 6c64  cs", help="Build
-00028bf0: 2074 6865 2064 6f63 756d 656e 7461 7469   the documentati
-00028c00: 6f6e 2066 6f72 2061 6c6c 2064 6566 696e  on for all defin
-00028c10: 6564 2070 6c75 6769 6e73 2e20 220a 2020  ed plugins. ".  
-00028c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028c50: 2020 2020 2020 2020 2254 6869 7320 6465          "This de
-00028c60: 7065 6e64 7320 6f6e 206d 6b64 6f63 7320  pends on mkdocs 
-00028c70: 6265 696e 6720 696e 7374 616c 6c65 6422  being installed"
-00028c80: 290a 2020 2020 6d61 6b65 646f 6373 5f63  ).    makedocs_c
-00028c90: 6d64 2e61 6464 5f61 7267 756d 656e 7428  md.add_argument(
-00028ca0: 222d 2d6f 6e6c 7969 6e73 7461 6c6c 6564  "--onlyinstalled
-00028cb0: 222c 2061 6374 696f 6e3d 2273 746f 7265  ", action="store
-00028cc0: 5f74 7275 6522 2c20 6865 6c70 3d22 4275  _true", help="Bu
-00028cd0: 696c 6420 646f 6373 206f 6e6c 7920 666f  ild docs only fo
-00028ce0: 7220 696e 7374 616c 6c65 6420 706c 7567  r installed plug
-00028cf0: 696e 7322 290a 2020 2020 6d61 6b65 646f  ins").    makedo
-00028d00: 6373 5f63 6d64 2e61 6464 5f61 7267 756d  cs_cmd.add_argum
-00028d10: 656e 7428 222d 6f22 2c20 222d 2d6f 7574  ent("-o", "--out
-00028d20: 666f 6c64 6572 222c 2068 656c 703d 2244  folder", help="D
-00028d30: 6573 7469 6e61 7469 6f6e 2066 6f6c 6465  estination folde
-00028d40: 7220 746f 2070 6c61 6365 2074 6865 2064  r to place the d
-00028d50: 6f63 756d 656e 7461 7469 6f6e 222c 0a20  ocumentation",. 
-00028d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028d70: 2020 2020 2020 2020 2020 2020 2064 6566               def
-00028d80: 6175 6c74 3d27 2729 0a20 2020 206d 616b  ault='').    mak
-00028d90: 6564 6f63 735f 636d 642e 7365 745f 6465  edocs_cmd.set_de
-00028da0: 6661 756c 7473 2866 756e 633d 636d 645f  faults(func=cmd_
-00028db0: 6d61 6b65 646f 6373 290a 0a20 2020 2023  makedocs)..    #
-00028dc0: 206d 616e 2063 6f6d 6d61 6e64 0a20 2020   man command.   
-00028dd0: 206d 616e 5f63 6d64 203d 2073 7562 7061   man_cmd = subpa
-00028de0: 7273 6572 732e 6164 645f 7061 7273 6572  rsers.add_parser
-00028df0: 2822 6d61 6e22 2c20 6865 6c70 3d22 4f70  ("man", help="Op
-00028e00: 656e 206d 616e 7561 6c20 7061 6765 2066  en manual page f
-00028e10: 6f72 2061 6e20 696e 7374 616c 6c65 6420  or an installed 
-00028e20: 6f70 636f 6465 2e20 220a 2020 2020 2020  opcode. ".      
-00028e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028e50: 2020 2020 2020 2020 2020 224d 756c 7469            "Multi
-00028e60: 706c 6520 6f70 636f 6465 7320 6f72 2061  ple opcodes or a
-00028e70: 2067 6c6f 6220 7769 6c64 6361 7264 2061   glob wildcard a
-00028e80: 7265 2061 6c6c 6f77 6564 2229 0a20 2020  re allowed").   
-00028e90: 206d 616e 5f63 6d64 2e61 6464 5f61 7267   man_cmd.add_arg
-00028ea0: 756d 656e 7428 222d 7022 2c20 222d 2d70  ument("-p", "--p
-00028eb0: 6174 6822 2c20 6163 7469 6f6e 3d22 7374  ath", action="st
-00028ec0: 6f72 655f 7472 7565 222c 0a20 2020 2020  ore_true",.     
-00028ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028ee0: 2020 2020 6865 6c70 3d22 4f6e 6c79 2070      help="Only p
-00028ef0: 7269 6e74 2074 6865 2070 6174 6820 6f66  rint the path of
-00028f00: 2074 6865 206d 616e 7561 6c20 7061 6765   the manual page
-00028f10: 2e20 5468 6520 666f 726d 6174 2069 7320  . The format is 
-00028f20: 3c6f 7063 6f64 653e 3a3c 7061 7468 3e2c  <opcode>:<path>,
-00028f30: 2061 6c6c 6f77 696e 6720 746f 2022 0a20   allowing to ". 
-00028f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028f50: 2020 2020 2020 2020 2020 2020 2022 7175               "qu
-00028f60: 6572 7920 7468 6520 7061 7468 2066 6f72  ery the path for
-00028f70: 206d 756c 7469 706c 6520 6f70 636f 6465   multiple opcode
-00028f80: 7322 290a 2020 2020 6d61 6e5f 636d 642e  s").    man_cmd.
-00028f90: 6164 645f 6172 6775 6d65 6e74 2822 2d73  add_argument("-s
-00028fa0: 222c 2022 2d2d 7369 6d70 6c65 7061 7468  ", "--simplepath
-00028fb0: 222c 2061 6374 696f 6e3d 2273 746f 7265  ", action="store
-00028fc0: 5f74 7275 6522 2c0a 2020 2020 2020 2020  _true",.        
-00028fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00028fe0: 2068 656c 703d 2250 7269 6e74 206a 7573   help="Print jus
-00028ff0: 7420 7468 6520 7061 7468 206f 6620 7468  t the path of th
-00029000: 6520 6d61 6e75 616c 2070 6167 6522 290a  e manual page").
-00029010: 2020 2020 6d61 6e5f 636d 642e 6164 645f      man_cmd.add_
-00029020: 6172 6775 6d65 6e74 2822 2d6d 222c 2022  argument("-m", "
-00029030: 2d2d 6d61 726b 646f 776e 222c 2061 6374  --markdown", act
-00029040: 696f 6e3d 2273 746f 7265 5f74 7275 6522  ion="store_true"
-00029050: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00029060: 2020 2020 2020 2020 2020 2068 656c 703d             help=
-00029070: 2255 7365 2074 6865 202e 6d64 2070 6167  "Use the .md pag
-00029080: 6520 696e 7374 6561 6420 6f66 2074 6865  e instead of the
-00029090: 202e 6874 6d6c 2076 6572 7369 6f6e 2229   .html version")
-000290a0: 0a20 2020 206d 616e 5f63 6d64 2e61 6464  .    man_cmd.add
-000290b0: 5f61 7267 756d 656e 7428 222d 6522 2c20  _argument("-e", 
-000290c0: 222d 2d65 7874 6572 6e61 6c22 2c20 6163  "--external", ac
-000290d0: 7469 6f6e 3d22 7374 6f72 655f 7472 7565  tion="store_true
-000290e0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-000290f0: 2020 2020 2020 2020 2020 2020 6865 6c70              help
-00029100: 3d22 4f70 656e 2074 6865 206d 616e 2070  ="Open the man p
-00029110: 6167 6520 696e 2074 6865 2064 6566 6175  age in the defau
-00029120: 6c74 2061 7070 2e20 5468 6973 2069 7320  lt app. This is 
-00029130: 6f6e 6c79 220a 2020 2020 2020 2020 2020  only".          
-00029140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029150: 2020 2020 2220 7573 6564 2077 6865 6e20      " used when 
-00029160: 6f70 656e 696e 6720 7468 6520 6d61 726b  opening the mark
-00029170: 646f 776e 206d 616e 2070 6167 652e 2229  down man page.")
-00029180: 0a20 2020 206d 616e 5f63 6d64 2e61 6464  .    man_cmd.add
-00029190: 5f61 7267 756d 656e 7428 222d 2d68 746d  _argument("--htm
-000291a0: 6c22 2c20 6163 7469 6f6e 3d22 7374 6f72  l", action="stor
-000291b0: 655f 7472 7565 222c 0a20 2020 2020 2020  e_true",.       
-000291c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000291d0: 2020 6865 6c70 3d22 4f70 656e 7320 7468    help="Opens th
-000291e0: 6520 2e68 746d 6c20 7665 7273 696f 6e20  e .html version 
-000291f0: 6f66 2074 6865 206d 616e 7061 6765 2069  of the manpage i
-00029200: 6e20 7468 6520 6465 6661 756c 7420 6272  n the default br
-00029210: 6f77 7365 7220 286f 7220 6f75 7470 7574  owser (or output
-00029220: 7320 7468 6520 7061 7468 220a 2020 2020  s the path".    
-00029230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029240: 2020 2020 2020 2020 2020 2220 7769 7468            " with
-00029250: 2074 6865 202d 2d70 6174 6820 6f70 7469   the --path opti
-00029260: 6f6e 2922 290a 2020 2020 6d61 6e5f 636d  on)").    man_cm
-00029270: 642e 6164 645f 6172 6775 6d65 6e74 2822  d.add_argument("
-00029280: 2d2d 7468 656d 6522 2c20 6465 6661 756c  --theme", defaul
-00029290: 743d 2264 6172 6b22 2c0a 2020 2020 2020  t="dark",.      
-000292a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000292b0: 2020 2063 686f 6963 6573 3d5b 2764 6172     choices=['dar
-000292c0: 6b27 2c20 276c 6967 6874 272c 2027 6772  k', 'light', 'gr
-000292d0: 7576 626f 782d 6461 726b 272c 2027 6772  uvbox-dark', 'gr
-000292e0: 7576 626f 782d 6c69 6768 7427 2c20 276d  uvbox-light', 'm
-000292f0: 6174 6572 6961 6c27 2c20 2766 7275 6974  aterial', 'fruit
-00029300: 7927 2c20 276e 6174 6976 6527 5d2c 0a20  y', 'native'],. 
-00029310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029320: 2020 2020 2020 2020 6865 6c70 3d22 5374          help="St
-00029330: 796c 6520 7573 6564 2077 6865 6e20 6469  yle used when di
-00029340: 7370 6c61 7969 6e67 206d 6172 6b64 6f77  splaying markdow
-00029350: 6e20 6669 6c65 7320 2864 6566 6175 6c74  n files (default
-00029360: 3d64 6172 6b29 2229 0a20 2020 206d 616e  =dark)").    man
-00029370: 5f63 6d64 2e61 6464 5f61 7267 756d 656e  _cmd.add_argumen
-00029380: 7428 226f 7063 6f64 6522 2c20 6e61 7267  t("opcode", narg
-00029390: 733d 222a 222c 0a20 2020 2020 2020 2020  s="*",.         
-000293a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000293b0: 6865 6c70 3d22 5368 6f77 2074 6865 206d  help="Show the m
-000293c0: 616e 7561 6c20 7061 6765 206f 6620 7468  anual page of th
-000293d0: 6973 206f 7063 6f64 652f 6f70 636f 6465  is opcode/opcode
-000293e0: 732e 204d 756c 7469 706c 6520 6f70 636f  s. Multiple opco
-000293f0: 6465 7320 220a 2020 2020 2020 2020 2020  des ".          
-00029400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029410: 2020 2020 2263 616e 2062 6520 6769 7665      "can be give
-00029420: 6e20 616e 6420 6561 6368 2065 6e74 7279  n and each entry
-00029430: 2063 616e 2062 6520 616c 736f 2061 2067   can be also a g
-00029440: 6c6f 6220 7061 7474 6572 6e20 286d 616b  lob pattern (mak
-00029450: 6520 7375 7265 2074 6f20 220a 2020 2020  e sure to ".    
-00029460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029470: 2020 2020 2020 2020 2020 2265 6e63 6c6f            "enclo
-00029480: 7365 2069 7420 696e 2071 756f 7461 7469  se it in quotati
-00029490: 6f6e 206d 6172 6b73 2922 290a 2020 2020  on marks)").    
-000294a0: 6d61 6e5f 636d 642e 7365 745f 6465 6661  man_cmd.set_defa
-000294b0: 756c 7473 2866 756e 633d 636d 645f 6d61  ults(func=cmd_ma
-000294c0: 6e29 0a0a 2020 2020 2320 7570 6461 7465  n)..    # update
-000294d0: 2063 6f6d 6d61 6e64 0a20 2020 2075 7064   command.    upd
-000294e0: 6174 655f 636d 6420 3d20 7375 6270 6172  ate_cmd = subpar
-000294f0: 7365 7273 2e61 6464 5f70 6172 7365 7228  sers.add_parser(
-00029500: 2275 7064 6174 6522 2c20 6865 6c70 3d22  "update", help="
-00029510: 5570 6461 7465 2072 6570 6f73 6974 6f72  Update repositor
-00029520: 792e 2055 7064 6174 6573 2074 6865 206d  y. Updates the m
-00029530: 6574 6164 6174 6120 6162 6f75 7420 6176  etadata about av
-00029540: 6169 6c61 626c 6522 0a20 2020 2020 2020  ailable".       
-00029550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029570: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00029580: 7061 636b 6167 6573 2c20 7468 6569 7220  packages, their 
-00029590: 7665 7273 696f 6e73 2c20 6574 632e 2229  versions, etc.")
-000295a0: 0a0a 2020 2020 2320 6c69 7374 2d6f 7063  ..    # list-opc
-000295b0: 6f64 6573 0a20 2020 206c 6973 746f 7063  odes.    listopc
-000295c0: 6f64 6573 5f63 6d64 203d 2073 7562 7061  odes_cmd = subpa
-000295d0: 7273 6572 732e 6164 645f 7061 7273 6572  rsers.add_parser
-000295e0: 2822 6c69 7374 6f70 636f 6465 7322 2c20  ("listopcodes", 
-000295f0: 6865 6c70 3d22 4c69 7374 2069 6e73 7461  help="List insta
-00029600: 6c6c 6564 206f 7063 6f64 6573 2229 0a20  lled opcodes"). 
-00029610: 2020 206c 6973 746f 7063 6f64 6573 5f63     listopcodes_c
-00029620: 6d64 2e61 6464 5f61 7267 756d 656e 7428  md.add_argument(
-00029630: 222d 6c22 2c20 222d 2d6c 6f6e 6722 2c20  "-l", "--long", 
-00029640: 6163 7469 6f6e 3d22 7374 6f72 655f 7472  action="store_tr
-00029650: 7565 222c 2068 656c 703d 224c 6f6e 6720  ue", help="Long 
-00029660: 666f 726d 6174 2229 0a20 2020 206c 6973  format").    lis
-00029670: 746f 7063 6f64 6573 5f63 6d64 2e73 6574  topcodes_cmd.set
-00029680: 5f64 6566 6175 6c74 7328 6675 6e63 3d63  _defaults(func=c
-00029690: 6d64 5f6c 6973 745f 696e 7374 616c 6c65  md_list_installe
-000296a0: 645f 6f70 636f 6465 7329 0a0a 2020 2020  d_opcodes)..    
-000296b0: 2320 7265 7365 740a 2020 2020 7265 7365  # reset.    rese
-000296c0: 745f 636d 6420 3d20 7375 6270 6172 7365  t_cmd = subparse
-000296d0: 7273 2e61 6464 5f70 6172 7365 7228 2272  rs.add_parser("r
-000296e0: 6573 6574 6361 6368 6522 2c20 6865 6c70  esetcache", help
-000296f0: 3d22 5265 6d6f 7665 206c 6f63 616c 2063  ="Remove local c
-00029700: 6c6f 6e65 7320 6f66 2070 6c75 6769 6e27  lones of plugin'
-00029710: 7320 7265 706f 7369 746f 7269 6573 2229  s repositories")
-00029720: 0a0a 2020 2020 2320 696e 666f 0a20 2020  ..    # info.   
-00029730: 2069 6e66 6f5f 636d 6420 3d20 7375 6270   info_cmd = subp
-00029740: 6172 7365 7273 2e61 6464 5f70 6172 7365  arsers.add_parse
-00029750: 7228 2269 6e66 6f22 2c20 6865 6c70 3d22  r("info", help="
-00029760: 4f75 7470 7574 7320 696e 666f 726d 6174  Outputs informat
-00029770: 696f 6e20 6162 6f75 7420 7269 7373 6574  ion about risset
-00029780: 2069 7473 656c 6620 696e 206a 736f 6e20   itself in json 
-00029790: 666f 726d 6174 2229 0a20 2020 2069 6e66  format").    inf
-000297a0: 6f5f 636d 642e 6164 645f 6172 6775 6d65  o_cmd.add_argume
-000297b0: 6e74 2822 2d2d 6f75 7466 696c 6522 2c20  nt("--outfile", 
-000297c0: 6465 6661 756c 743d 4e6f 6e65 2c20 6865  default=None, he
-000297d0: 6c70 3d22 5361 7665 206f 7574 7075 7420  lp="Save output 
-000297e0: 746f 2074 6869 7320 7061 7468 2229 0a20  to this path"). 
-000297f0: 2020 2069 6e66 6f5f 636d 642e 6164 645f     info_cmd.add_
-00029800: 6172 6775 6d65 6e74 2822 2d2d 6675 6c6c  argument("--full
-00029810: 222c 2061 6374 696f 6e3d 2273 746f 7265  ", action="store
-00029820: 5f74 7275 6522 2c20 6865 6c70 3d22 496e  _true", help="In
-00029830: 636c 7564 6520 616c 6c20 6176 6169 6c61  clude all availa
-00029840: 626c 6520 696e 666f 726d 6174 696f 6e22  ble information"
-00029850: 290a 2020 2020 696e 666f 5f63 6d64 2e73  ).    info_cmd.s
-00029860: 6574 5f64 6566 6175 6c74 7328 6675 6e63  et_defaults(func
-00029870: 3d63 6d64 5f69 6e66 6f29 0a0a 2020 2020  =cmd_info)..    
-00029880: 2320 7570 6772 6164 650a 2020 2020 7570  # upgrade.    up
-00029890: 6772 6164 655f 636d 6420 3d20 7375 6270  grade_cmd = subp
-000298a0: 6172 7365 7273 2e61 6464 5f70 6172 7365  arsers.add_parse
-000298b0: 7228 2275 7067 7261 6465 222c 2068 656c  r("upgrade", hel
-000298c0: 703d 2255 7067 7261 6465 2061 6e79 2069  p="Upgrade any i
-000298d0: 6e73 7461 6c6c 6564 2070 6c75 6769 6e20  nstalled plugin 
-000298e0: 746f 2061 206e 6577 2076 6572 7369 6f6e  to a new version
-000298f0: 2c20 6966 2074 6865 7265 220a 2020 2020  , if there".    
-00029900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029930: 2020 2020 2269 7320 6f6e 6522 290a 2020      "is one").  
-00029940: 2020 7570 6772 6164 655f 636d 642e 7365    upgrade_cmd.se
-00029950: 745f 6465 6661 756c 7473 2866 756e 633d  t_defaults(func=
-00029960: 636d 645f 7570 6772 6164 6529 0a0a 2020  cmd_upgrade)..  
-00029970: 2020 2320 646f 776e 6c6f 6164 0a20 2020    # download.   
-00029980: 2064 6f77 6e6c 6f61 645f 636d 6420 3d20   download_cmd = 
-00029990: 7375 6270 6172 7365 7273 2e61 6464 5f70  subparsers.add_p
-000299a0: 6172 7365 7228 2764 6f77 6e6c 6f61 6427  arser('download'
-000299b0: 2c20 6865 6c70 3d27 446f 776e 6c6f 6164  , help='Download
-000299c0: 2061 2070 6c75 6769 6e27 290a 2020 2020   a plugin').    
-000299d0: 646f 776e 6c6f 6164 5f63 6d64 2e61 6464  download_cmd.add
-000299e0: 5f61 7267 756d 656e 7428 272d 2d70 6174  _argument('--pat
-000299f0: 6827 2c20 6865 6c70 3d27 4469 7265 6374  h', help='Direct
-00029a00: 6f72 7920 746f 2064 6f77 6e6c 6f61 6420  ory to download 
-00029a10: 7468 6520 706c 7567 696e 2074 6f20 2864  the plugin to (d
-00029a20: 6566 6175 6c74 3a20 6375 7272 656e 7420  efault: current 
-00029a30: 6469 7265 6374 6f72 7929 2729 0a20 2020  directory)').   
-00029a40: 2064 6f77 6e6c 6f61 645f 636d 642e 6164   download_cmd.ad
-00029a50: 645f 6172 6775 6d65 6e74 2827 2d2d 706c  d_argument('--pl
-00029a60: 6174 666f 726d 272c 2068 656c 703d 2754  atform', help='T
-00029a70: 6865 2070 6c61 7466 6f72 6d20 6f66 2074  he platform of t
-00029a80: 6865 2070 6c75 6769 6e20 746f 2064 6f77  he plugin to dow
-00029a90: 6e6c 6f61 6420 2864 6566 6175 6c74 3a20  nload (default: 
-00029aa0: 6375 7272 656e 7420 706c 6174 666f 726d  current platform
-00029ab0: 2927 2c0a 2020 2020 2020 2020 2020 2020  )',.            
-00029ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029ad0: 2020 6368 6f69 6365 733d 5b27 6c69 6e75    choices=['linu
-00029ae0: 7827 2c20 276d 6163 6f73 272c 2027 7769  x', 'macos', 'wi
-00029af0: 6e64 6f77 272c 2027 6d61 636f 732d 6172  ndow', 'macos-ar
-00029b00: 6d36 3427 2c20 276c 696e 7578 2d61 726d  m64', 'linux-arm
-00029b10: 3634 275d 290a 2020 2020 646f 776e 6c6f  64']).    downlo
-00029b20: 6164 5f63 6d64 2e61 6464 5f61 7267 756d  ad_cmd.add_argum
-00029b30: 656e 7428 2770 6c75 6769 6e27 2c20 6865  ent('plugin', he
-00029b40: 6c70 3d27 5468 6520 6e61 6d65 206f 6620  lp='The name of 
-00029b50: 7468 6520 706c 7567 696e 2074 6f20 646f  the plugin to do
-00029b60: 776e 6c6f 6164 2729 0a20 2020 2064 6f77  wnload').    dow
-00029b70: 6e6c 6f61 645f 636d 642e 7365 745f 6465  nload_cmd.set_de
-00029b80: 6661 756c 7473 2866 756e 633d 636d 645f  faults(func=cmd_
-00029b90: 646f 776e 6c6f 6164 290a 0a20 2020 2023  download)..    #
-00029ba0: 2064 6576 3a20 7269 7373 6574 2064 6576   dev: risset dev
-00029bb0: 206f 7063 6f64 6573 786d 6c0a 2020 2020   opcodesxml.    
-00029bc0: 2320 2020 2020 2072 6973 7365 7420 6465  #      risset de
-00029bd0: 7620 636f 6465 7369 676e 0a20 2020 2064  v codesign.    d
-00029be0: 6576 5f63 6d64 203d 2073 7562 7061 7273  ev_cmd = subpars
-00029bf0: 6572 732e 6164 645f 7061 7273 6572 2822  ers.add_parser("
-00029c00: 6465 7622 2c20 6865 6c70 3d22 436f 6d6d  dev", help="Comm
-00029c10: 616e 6473 2066 6f72 2064 6576 656c 6f70  ands for develop
-00029c20: 6572 2075 7365 2229 0a0a 2020 2020 6465  er use")..    de
-00029c30: 765f 636d 642e 6164 645f 6172 6775 6d65  v_cmd.add_argume
-00029c40: 6e74 2822 2d2d 6f75 7466 696c 6522 2c20  nt("--outfile", 
-00029c50: 6465 6661 756c 743d 4e6f 6e65 2c0a 2020  default=None,.  
-00029c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029c70: 2020 2020 2020 2068 656c 703d 2253 6574         help="Set
-00029c80: 2074 6865 206f 7574 7075 7420 6669 6c65   the output file
-00029c90: 2066 6f72 2061 6e79 2061 6374 696f 6e20   for any action 
-00029ca0: 6765 6e65 7261 7469 6e67 206f 7574 7075  generating outpu
-00029cb0: 7422 290a 2020 2020 6465 765f 636d 642e  t").    dev_cmd.
-00029cc0: 6164 645f 6172 6775 6d65 6e74 2822 636d  add_argument("cm
-00029cd0: 6422 2c20 6368 6f69 6365 733d 5b22 6f70  d", choices=["op
-00029ce0: 636f 6465 7378 6d6c 222c 2022 636f 6465  codesxml", "code
-00029cf0: 7369 676e 225d 2c0a 2020 2020 2020 2020  sign"],.        
-00029d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029d10: 2068 656c 703d 2253 7562 636f 6d6d 616e   help="Subcomman
-00029d20: 642e 206f 7063 6f64 6573 786d 6c3a 2067  d. opcodesxml: g
-00029d30: 656e 6572 6174 6520 786d 6c20 6f75 7470  enerate xml outp
-00029d40: 7574 2073 696d 696c 6172 2074 6f20 6f70  ut similar to op
-00029d50: 636f 6465 732e 786d 6c20 696e 2074 6865  codes.xml in the
-00029d60: 2063 736f 756e 6427 7320 6d61 6e75 616c   csound's manual
-00029d70: 3b20 220a 2020 2020 2020 2020 2020 2020  ; ".            
-00029d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029d90: 2020 2263 6f64 6573 6967 6e3a 2063 6f64    "codesign: cod
-00029da0: 6520 7369 676e 2061 6c6c 2069 6e73 7461  e sign all insta
-00029db0: 6c6c 6564 2070 6c75 6769 6e73 2028 6d61  lled plugins (ma
-00029dc0: 636f 7320 6f6e 6c79 2922 290a 2020 2020  cos only)").    
-00029dd0: 6465 765f 636d 642e 7365 745f 6465 6661  dev_cmd.set_defa
-00029de0: 756c 7473 2866 756e 633d 636d 645f 6465  ults(func=cmd_de
-00029df0: 7629 0a0a 2020 2020 6172 6773 203d 2070  v)..    args = p
-00029e00: 6172 7365 722e 7061 7273 655f 6172 6773  arser.parse_args
-00029e10: 2829 0a20 2020 205f 7365 7373 696f 6e2e  ().    _session.
-00029e20: 6465 6275 6720 3d20 6172 6773 2e64 6562  debug = args.deb
-00029e30: 7567 0a20 2020 205f 7365 7373 696f 6e2e  ug.    _session.
-00029e40: 7374 6f70 5f6f 6e5f 6572 726f 7273 203d  stop_on_errors =
-00029e50: 2061 7267 732e 7374 6f70 6f6e 6572 726f   args.stoponerro
-00029e60: 720a 0a20 2020 2069 6620 6172 6773 2e76  r..    if args.v
-00029e70: 6572 7369 6f6e 3a0a 2020 2020 2020 2020  ersion:.        
-00029e80: 7072 696e 7428 5f5f 7665 7273 696f 6e5f  print(__version_
-00029e90: 5f29 0a20 2020 2020 2020 2073 7973 2e65  _).        sys.e
-00029ea0: 7869 7428 3029 0a0a 2020 2020 6966 206e  xit(0)..    if n
-00029eb0: 6f74 2061 7267 732e 636f 6d6d 616e 643a  ot args.command:
-00029ec0: 0a20 2020 2020 2020 2070 6172 7365 722e  .        parser.
-00029ed0: 7072 696e 745f 6865 6c70 2829 0a20 2020  print_help().   
-00029ee0: 2020 2020 2073 7973 2e65 7869 7428 2d31       sys.exit(-1
-00029ef0: 290a 2020 2020 656c 6966 2061 7267 732e  ).    elif args.
-00029f00: 636f 6d6d 616e 6420 3d3d 2027 7265 7365  command == 'rese
-00029f10: 7463 6163 6865 273a 0a20 2020 2020 2020  tcache':.       
-00029f20: 2063 6d64 5f72 6573 6574 6361 6368 6528   cmd_resetcache(
-00029f30: 6172 6773 290a 2020 2020 2020 2020 7379  args).        sy
-00029f40: 732e 6578 6974 2830 290a 0a20 2020 2075  s.exit(0)..    u
-00029f50: 7064 6174 6520 3d20 6172 6773 2e75 7064  pdate = args.upd
-00029f60: 6174 6520 6f72 2061 7267 732e 636f 6d6d  ate or args.comm
-00029f70: 616e 6420 3d3d 2027 7570 6461 7465 270a  and == 'update'.
-00029f80: 0a20 2020 2069 6620 6172 6773 2e63 736f  .    if args.cso
-00029f90: 756e 6420 3d3d 2030 3a0a 2020 2020 2020  und == 0:.      
-00029fa0: 2020 6373 6f75 6e64 7665 7273 696f 6e2c    csoundversion,
-00029fb0: 206d 696e 6f72 203d 205f 6373 6f75 6e64   minor = _csound
-00029fc0: 5f76 6572 7369 6f6e 2829 0a20 2020 2065  _version().    e
-00029fd0: 6c73 653a 0a20 2020 2020 2020 2063 736f  lse:.        cso
-00029fe0: 756e 6476 6572 7369 6f6e 203d 2061 7267  undversion = arg
-00029ff0: 732e 6373 6f75 6e64 0a0a 2020 2020 7472  s.csound..    tr
-0002a000: 793a 0a20 2020 2020 2020 205f 6465 6275  y:.        _debu
-0002a010: 6728 6622 4372 6561 7469 6e67 206d 6169  g(f"Creating mai
-0002a020: 6e20 696e 6465 7820 2d20 6373 6f75 6e64  n index - csound
-0002a030: 206d 616a 6f72 2076 6572 7369 6f6e 3a20   major version: 
-0002a040: 7b63 736f 756e 6476 6572 7369 6f6e 7d22  {csoundversion}"
-0002a050: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
-0002a060: 2075 7064 6174 653a 0a20 2020 2020 2020   update:.       
-0002a070: 2020 2020 206d 6169 6e69 6e64 6578 203d       mainindex =
-0002a080: 205f 6d61 696e 696e 6465 785f 7265 7472   _mainindex_retr
-0002a090: 6965 7665 2829 206f 7220 4d61 696e 496e  ieve() or MainIn
-0002a0a0: 6465 7828 7570 6461 7465 3d46 616c 7365  dex(update=False
-0002a0b0: 2c20 6d61 6a6f 7276 6572 7369 6f6e 3d63  , majorversion=c
-0002a0c0: 736f 756e 6476 6572 7369 6f6e 290a 2020  soundversion).  
-0002a0d0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0002a0e0: 2020 2020 2020 2020 2320 7468 6973 2077          # this w
-0002a0f0: 696c 6c20 7365 7269 616c 697a 6520 7468  ill serialize th
-0002a100: 6520 6d61 696e 696e 6465 780a 2020 2020  e mainindex.    
-0002a110: 2020 2020 2020 2020 6d61 696e 696e 6465          maininde
-0002a120: 7820 3d20 4d61 696e 496e 6465 7828 7570  x = MainIndex(up
-0002a130: 6461 7465 3d54 7275 652c 206d 616a 6f72  date=True, major
-0002a140: 7665 7273 696f 6e3d 6373 6f75 6e64 7665  version=csoundve
-0002a150: 7273 696f 6e29 0a20 2020 2065 7863 6570  rsion).    excep
-0002a160: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-0002a170: 3a0a 2020 2020 2020 2020 5f65 7272 6f72  :.        _error
-0002a180: 6d73 6728 2246 6169 6c65 6420 746f 2063  msg("Failed to c
-0002a190: 7265 6174 6520 6d61 696e 2069 6e64 6578  reate main index
-0002a1a0: 2229 0a20 2020 2020 2020 2069 6620 5f73  ").        if _s
-0002a1b0: 6573 7369 6f6e 2e64 6562 7567 3a0a 2020  ession.debug:.  
-0002a1c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0002a1d0: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
-0002a1e0: 2020 2020 2020 2020 2020 2020 5f65 7272              _err
-0002a1f0: 6f72 6d73 6728 7374 7228 6529 290a 2020  ormsg(str(e)).  
-0002a200: 2020 2020 2020 2020 2020 7379 732e 6578            sys.ex
-0002a210: 6974 282d 3129 0a0a 2020 2020 6966 2061  it(-1)..    if a
-0002a220: 7267 732e 636f 6d6d 616e 6420 3d3d 2027  rgs.command == '
-0002a230: 7570 6461 7465 273a 0a20 2020 2020 2020  update':.       
-0002a240: 2073 7973 2e65 7869 7428 3029 0a20 2020   sys.exit(0).   
-0002a250: 2065 6c73 653a 0a20 2020 2020 2020 206f   else:.        o
-0002a260: 6b20 3d20 6172 6773 2e66 756e 6328 6d61  k = args.func(ma
-0002a270: 696e 696e 6465 782c 2061 7267 7329 0a20  inindex, args). 
-0002a280: 2020 2020 2020 2069 6620 6e6f 7420 6f6b         if not ok
-0002a290: 3a0a 2020 2020 2020 2020 2020 2020 5f65  :.            _e
-0002a2a0: 7272 6f72 6d73 6728 6622 436f 6d6d 616e  rrormsg(f"Comman
-0002a2b0: 6420 7b61 7267 732e 636f 6d6d 616e 647d  d {args.command}
-0002a2c0: 2066 6169 6c65 6422 290a 2020 2020 2020   failed").      
-0002a2d0: 2020 2020 2020 7379 732e 6578 6974 282d        sys.exit(-
-0002a2e0: 3129 0a20 2020 2020 2020 2073 7973 2e65  1).        sys.e
-0002a2f0: 7869 7428 3029 0a0a 0a69 6620 5f5f 6e61  xit(0)...if __na
-0002a300: 6d65 5f5f 203d 3d20 225f 5f6d 6169 6e5f  me__ == "__main_
-0002a310: 5f22 3a0a 2020 2020 6d61 696e 2829 0a00  _":.    main()..
-0002a320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a3a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a3b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a3c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a3d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a3e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a3f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a400: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-0002a410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a460: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-0002a470: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-0002a480: 3030 3030 3033 3400 3030 3030 3030 3030  0000034.00000000
-0002a490: 3030 3000 3031 3032 3132 0020 7800 0000  000.010212. x...
-0002a4a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a4b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a4c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a4d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a4e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a4f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a500: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-0002a510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a5a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a5b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a5c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a5d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a5e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a5f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a600: 3238 206d 7469 6d65 3d31 3731 3333 3932  28 mtime=1713392
-0002a610: 3337 392e 3132 3037 3236 330a 0000 0000  379.1207263.....
-0002a620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a6a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a6b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a6c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a6d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a6e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a6f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a7a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a7b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a7c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a7d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a7e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a7f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a800: 7269 7373 6574 2d32 2e39 2e30 2f73 6574  risset-2.9.0/set
-0002a810: 7570 2e63 6667 0000 0000 0000 0000 0000  up.cfg..........
-0002a820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a860: 0000 0000 3030 3030 3636 3400 3030 3031  ....0000664.0001
-0002a870: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-0002a880: 3030 3030 3034 3600 3134 3631 3030 3435  0000046.14610045
-0002a890: 3337 3300 3031 3235 3035 0020 3000 0000  373.012505. 0...
-0002a8a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a8b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a8c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a8d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a8e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a8f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a900: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-0002a910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a920: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-0002a930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a9a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a9b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a9c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a9d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a9e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002a9f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aa00: 5b65 6767 5f69 6e66 6f5d 0a74 6167 5f62  [egg_info].tag_b
-0002aa10: 7569 6c64 203d 200a 7461 675f 6461 7465  uild = .tag_date
-0002aa20: 203d 2030 0a0a 0000 0000 0000 0000 0000   = 0............
-0002aa30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aa40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aa50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aa60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aa70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aa80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aa90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aaa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aaf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ab90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002abb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002abc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002abd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002abe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002abf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ac00: 2e2f 2e2f 4050 6178 4865 6164 6572 0000  ././@PaxHeader..
-0002ac10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ac20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ac30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ac40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ac50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ac60: 0000 0000 3030 3030 3030 3000 3030 3030  ....0000000.0000
-0002ac70: 3030 3000 3030 3030 3030 3000 3030 3030  000.0000000.0000
-0002ac80: 3030 3030 3032 3600 3030 3030 3030 3030  0000026.00000000
-0002ac90: 3030 3000 3031 3032 3133 0020 7800 0000  000.010213. x...
-0002aca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002acb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002acc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002acd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ace0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002acf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ad00: 0075 7374 6172 0030 3000 0000 0000 0000  .ustar.00.......
-0002ad10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ad20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ad30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ad40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ad50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ad60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ad70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ad80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ad90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ada0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002adb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002adc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002add0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ade0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002adf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ae00: 3232 206d 7469 6d65 3d31 3730 3739 3838  22 mtime=1707988
-0002ae10: 3337 322e 300a 0000 0000 0000 0000 0000  372.0...........
-0002ae20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ae30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ae40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ae50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ae60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ae70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ae80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ae90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aeb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002af90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002afa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002afb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002afc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002afd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002afe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002aff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b000: 7269 7373 6574 2d32 2e39 2e30 2f73 6574  risset-2.9.0/set
-0002b010: 7570 2e70 7900 0000 0000 0000 0000 0000  up.py...........
-0002b020: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b060: 0000 0000 3030 3030 3636 3400 3030 3031  ....0000664.0001
-0002b070: 3735 3000 3030 3031 3735 3000 3030 3030  750.0001750.0000
-0002b080: 3030 3031 3634 3700 3134 3536 3333 3532  0001647.14563352
-0002b090: 3632 3400 3031 3234 3135 0020 3000 0000  624.012415. 0...
-0002b0a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b0b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b0c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b0d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b0e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b0f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b100: 0075 7374 6172 0030 3065 6d00 0000 0000  .ustar.00em.....
-0002b110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b120: 0000 0000 0000 0000 0065 6d00 0000 0000  .........em.....
-0002b130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b1a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b1b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b1c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b1d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b1e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b1f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b200: 6672 6f6d 2073 6574 7570 746f 6f6c 7320  from setuptools 
-0002b210: 696d 706f 7274 2073 6574 7570 0a69 6d70  import setup.imp
-0002b220: 6f72 7420 7375 6270 726f 6365 7373 0a69  ort subprocess.i
-0002b230: 6d70 6f72 7420 7379 730a 0a69 6620 2873  mport sys..if (s
-0002b240: 7973 2e76 6572 7369 6f6e 5f69 6e66 6f2e  ys.version_info.
-0002b250: 6d61 6a6f 722c 2073 7973 2e76 6572 7369  major, sys.versi
-0002b260: 6f6e 5f69 6e66 6f2e 6d69 6e6f 7229 203c  on_info.minor) <
-0002b270: 2028 332c 2037 293a 0a20 2020 2070 7269   (3, 7):.    pri
-0002b280: 6e74 2822 5079 7468 6f6e 203e 3d20 332e  nt("Python >= 3.
-0002b290: 3820 7265 7175 6972 6564 2229 0a20 2020  8 required").   
-0002b2a0: 2073 7973 2e65 7869 7428 2d31 290a 0a6c   sys.exit(-1)..l
-0002b2b0: 6f6e 675f 6465 7363 7269 7074 696f 6e20  ong_description 
-0002b2c0: 3d20 6f70 656e 2822 5245 4144 4d45 2e6d  = open("README.m
-0002b2d0: 6422 292e 7265 6164 2829 0a76 6572 7369  d").read().versi
-0002b2e0: 6f6e 203d 2073 7562 7072 6f63 6573 732e  on = subprocess.
-0002b2f0: 6368 6563 6b5f 6f75 7470 7574 285b 7379  check_output([sy
-0002b300: 732e 6578 6563 7574 6162 6c65 2c20 2272  s.executable, "r
-0002b310: 6973 7365 742e 7079 222c 2022 2d2d 7665  isset.py", "--ve
-0002b320: 7273 696f 6e22 5d29 2e64 6563 6f64 6528  rsion"]).decode(
-0002b330: 2775 7466 3827 292e 7374 7269 7028 290a  'utf8').strip().
-0002b340: 0a0a 7365 7475 7028 0a20 2020 206e 616d  ..setup(.    nam
-0002b350: 6520 3d20 2272 6973 7365 7422 2c0a 2020  e = "risset",.  
-0002b360: 2020 7665 7273 696f 6e20 3d20 7665 7273    version = vers
-0002b370: 696f 6e2c 0a20 2020 2070 7974 686f 6e5f  ion,.    python_
-0002b380: 7265 7175 6972 6573 203d 2022 3e3d 332e  requires = ">=3.
-0002b390: 3822 2c0a 2020 2020 6465 7363 7269 7074  8",.    descript
-0002b3a0: 696f 6e20 3d20 2241 2070 6163 6b61 6765  ion = "A package
-0002b3b0: 206d 616e 6167 6572 2066 6f72 2063 736f   manager for cso
-0002b3c0: 756e 6422 2c0a 2020 2020 6175 7468 6f72  und",.    author
-0002b3d0: 203d 2022 4564 7561 7264 6f20 4d6f 6775   = "Eduardo Mogu
-0002b3e0: 696c 6c61 6e73 6b79 222c 0a20 2020 2061  illansky",.    a
-0002b3f0: 7574 686f 725f 656d 6169 6c20 3d20 2265  uthor_email = "e
-0002b400: 6475 6172 646f 2e6d 6f67 7569 6c6c 616e  duardo.moguillan
-0002b410: 736b 7940 676d 6169 6c2e 636f 6d22 2c0a  sky@gmail.com",.
-0002b420: 2020 2020 6c6f 6e67 5f64 6573 6372 6970      long_descrip
-0002b430: 7469 6f6e 203d 206c 6f6e 675f 6465 7363  tion = long_desc
-0002b440: 7269 7074 696f 6e2c 0a20 2020 206c 6f6e  ription,.    lon
-0002b450: 675f 6465 7363 7269 7074 696f 6e5f 636f  g_description_co
-0002b460: 6e74 656e 745f 7479 7065 203d 2027 7465  ntent_type = 'te
-0002b470: 7874 2f6d 6172 6b64 6f77 6e27 2c0a 2020  xt/markdown',.  
-0002b480: 2020 7079 5f6d 6f64 756c 6573 3d5b 2272    py_modules=["r
-0002b490: 6973 7365 7422 5d2c 0a0a 2020 2020 7572  isset"],..    ur
-0002b4a0: 6c3d 2268 7474 7073 3a2f 2f67 6974 6875  l="https://githu
-0002b4b0: 622e 636f 6d2f 6373 6f75 6e64 2d70 6c75  b.com/csound-plu
-0002b4c0: 6769 6e73 2f72 6973 7365 7422 2c0a 0a20  gins/risset",.. 
-0002b4d0: 2020 2069 6e73 7461 6c6c 5f72 6571 7569     install_requi
-0002b4e0: 7265 733d 5b0a 2020 2020 2020 2020 2770  res=[.        'p
-0002b4f0: 7967 6d65 6e74 7327 2c0a 2020 2020 2020  ygments',.      
-0002b500: 2020 2763 7463 736f 756e 6437 3e3d 302e    'ctcsound7>=0.
-0002b510: 332e 3027 2c0a 2020 2020 2020 2020 276d  3.0',.        'm
-0002b520: 6b64 6f63 7327 2c0a 2020 2020 2020 2020  kdocs',.        
-0002b530: 2772 6571 7565 7374 7327 0a20 2020 205d  'requests'.    ]
-0002b540: 2c0a 0a20 2020 2065 6e74 7279 5f70 6f69  ,..    entry_poi
-0002b550: 6e74 733d 7b0a 2020 2020 2020 2020 2263  nts={.        "c
-0002b560: 6f6e 736f 6c65 5f73 6372 6970 7473 223a  onsole_scripts":
-0002b570: 205b 0a20 2020 2020 2020 2020 2020 2022   [.            "
-0002b580: 7269 7373 6574 3d72 6973 7365 743a 6d61  risset=risset:ma
-0002b590: 696e 222c 0a20 2020 2020 2020 205d 0a20  in",.        ]. 
-0002b5a0: 2020 207d 0a29 0a00 0000 0000 0000 0000     }.)..........
-0002b5b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b5c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b5d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b5e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b5f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b6a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b6b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b6c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b6d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b6e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b6f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b7a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b7b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b7c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b7d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b7e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b7f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b8a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b8b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b8c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b8d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b8e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b8f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b9a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b9b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b9c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b9d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b9e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002b9f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ba90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002baa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002baf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bb90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bbb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bbc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bbd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bbe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bbf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bc90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bcb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bcc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bcd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bcf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bd90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bda0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bdb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bdc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bdd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bde0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bdf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002be90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002beb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bed0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bf90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bfa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bfb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bfc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bfd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bfe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002bff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c000: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c010: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c020: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c060: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c070: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c0a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c0b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c0c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c0d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c0e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c0f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c100: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c110: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c120: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c130: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c140: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c150: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c160: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c170: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c190: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c1a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c1b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c1c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c1d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c1e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c1f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c210: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c220: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c230: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c240: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c250: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c260: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c270: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c280: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c2a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c2b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c2c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c2d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c2e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c2f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c300: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c310: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c330: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c340: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c360: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c370: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c390: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c3a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c3b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c3c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c3d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c3e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c3f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c400: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c410: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c420: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c440: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c450: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c460: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c470: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c480: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c490: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c4a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c4b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c4c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c4d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c4e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c4f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c500: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c510: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c520: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c530: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c540: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c550: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c560: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c570: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c580: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c590: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c5a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c5b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c5c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c5d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c5e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c5f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c600: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c610: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c620: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c630: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c640: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c650: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c660: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c670: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c680: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c690: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c6a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c6b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c6c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c6d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c6e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c6f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c700: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c740: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c750: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c760: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c770: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c780: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c790: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c7a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c7b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c7c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c7d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c7e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c7f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c800: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c810: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c820: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c830: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c840: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c850: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c860: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c870: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c880: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c890: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c8a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c8b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c8c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c8d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c8e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c8f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c900: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c910: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c920: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c930: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c940: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c960: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c970: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c980: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c990: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c9a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c9b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c9c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c9d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c9e0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002c9f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ca90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002caa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cab0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cac0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cad0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cae0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002caf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cb90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cba0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cbb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cbc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cbd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cbe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cbf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cc90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cca0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ccb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ccc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ccd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cce0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ccf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cd90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cda0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cdb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cdc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cdd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cde0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cdf0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ce90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cea0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ceb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cec0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002ced0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cee0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cef0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf00: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf20: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf30: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf40: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf60: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf70: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf80: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cf90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cfa0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cfb0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cfc0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cfd0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cfe0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
-0002cff0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
+000143e0: 2020 6e6f 745f 696e 7374 616c 6c65 645f    not_installed_
+000143f0: 6f6e 6c79 3d46 616c 7365 2c20 6d65 7468  only=False, meth
+00014400: 6f64 3d27 6373 6f75 6e64 272c 2063 6865  od='csound', che
+00014410: 636b 3d54 7275 650a 2020 2020 2020 2020  ck=True.        
+00014420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014430: 2020 2920 2d3e 206c 6973 745b 506c 7567    ) -> list[Plug
+00014440: 696e 5d3a 0a20 2020 2020 2020 2069 6620  in]:.        if 
+00014450: 6e6f 7420 706c 6174 666f 726d 6964 3a0a  not platformid:.
+00014460: 2020 2020 2020 2020 2020 2020 706c 6174              plat
+00014470: 666f 726d 6964 203d 205f 7365 7373 696f  formid = _sessio
+00014480: 6e2e 706c 6174 666f 726d 6964 0a0a 2020  n.platformid..  
+00014490: 2020 2020 2020 6966 206e 6f74 2063 736f        if not cso
+000144a0: 756e 645f 7665 7273 696f 6e3a 0a20 2020  und_version:.   
+000144b0: 2020 2020 2020 2020 2063 736f 756e 645f           csound_
+000144c0: 7665 7273 696f 6e20 3d20 5f73 6573 7369  version = _sessi
+000144d0: 6f6e 2e63 736f 756e 645f 7665 7273 696f  on.csound_versio
+000144e0: 6e0a 0a20 2020 2020 2020 2070 6c75 6769  n..        plugi
+000144f0: 6e73 203d 205b 5d0a 2020 2020 2020 2020  ns = [].        
+00014500: 666f 7220 706c 7567 696e 2069 6e20 7365  for plugin in se
+00014510: 6c66 2e70 6c75 6769 6e73 2e76 616c 7565  lf.plugins.value
+00014520: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+00014530: 2069 6620 706c 7567 696e 2e66 696e 645f   if plugin.find_
+00014540: 6269 6e61 7279 2870 6c61 7466 6f72 6d69  binary(platformi
+00014550: 643d 706c 6174 666f 726d 6964 2c20 6373  d=platformid, cs
+00014560: 6f75 6e64 5f76 6572 7369 6f6e 3d63 736f  ound_version=cso
+00014570: 756e 645f 7665 7273 696f 6e29 3a0a 2020  und_version):.  
+00014580: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00014590: 2069 6e73 7461 6c6c 6564 5f6f 6e6c 7920   installed_only 
+000145a0: 616e 6420 6e6f 7420 7365 6c66 2e69 735f  and not self.is_
+000145b0: 706c 7567 696e 5f69 6e73 7461 6c6c 6564  plugin_installed
+000145c0: 2870 6c75 6769 6e2c 2063 6865 636b 3d63  (plugin, check=c
+000145d0: 6865 636b 2c20 6d65 7468 6f64 3d6d 6574  heck, method=met
+000145e0: 686f 6429 3a0a 2020 2020 2020 2020 2020  hod):.          
+000145f0: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+00014600: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+00014610: 2020 2065 6c69 6620 6e6f 745f 696e 7374     elif not_inst
+00014620: 616c 6c65 645f 6f6e 6c79 2061 6e64 2073  alled_only and s
+00014630: 656c 662e 6973 5f70 6c75 6769 6e5f 696e  elf.is_plugin_in
+00014640: 7374 616c 6c65 6428 706c 7567 696e 2c20  stalled(plugin, 
+00014650: 6368 6563 6b3d 6368 6563 6b2c 206d 6574  check=check, met
+00014660: 686f 643d 6d65 7468 6f64 293a 0a20 2020  hod=method):.   
+00014670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014680: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+00014690: 2020 2020 2020 2020 2020 706c 7567 696e            plugin
+000146a0: 732e 6170 7065 6e64 2870 6c75 6769 6e29  s.append(plugin)
+000146b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000146c0: 706c 7567 696e 730a 0a20 2020 2064 6566  plugins..    def
+000146d0: 206c 6973 745f 706c 7567 696e 7328 7365   list_plugins(se
+000146e0: 6c66 2c20 696e 7374 616c 6c65 643d 4661  lf, installed=Fa
+000146f0: 6c73 652c 206e 616d 656f 6e6c 793d 4661  lse, nameonly=Fa
+00014700: 6c73 652c 206c 6566 7463 6f6c 7769 6474  lse, leftcolwidt
+00014710: 683d 3230 2c0a 2020 2020 2020 2020 2020  h=20,.          
+00014720: 2020 2020 2020 2020 2020 206f 6e65 6c69             oneli
+00014730: 6e65 3d46 616c 7365 2c20 7570 6772 6164  ne=False, upgrad
+00014740: 6561 626c 653d 4661 6c73 652c 2068 6561  eable=False, hea
+00014750: 6465 723d 5472 7565 0a20 2020 2020 2020  der=True.       
+00014760: 2020 2020 2020 2020 2020 2020 2020 2920                ) 
+00014770: 2d3e 2062 6f6f 6c3a 0a20 2020 2020 2020  -> bool:.       
+00014780: 2022 2222 0a20 2020 2020 2020 2050 7269   """.        Pri
+00014790: 6e74 2061 206c 6973 7420 6f66 2074 6865  nt a list of the
+000147a0: 2069 6e73 7461 6c6c 6564 2070 6c75 6769   installed plugi
+000147b0: 6e73 0a20 2020 2020 2020 2022 2222 0a20  ns.        """. 
+000147c0: 2020 2020 2020 2077 6964 7468 2c20 6865         width, he
+000147d0: 6967 6874 203d 205f 7465 726d 7369 7a65  ight = _termsize
+000147e0: 2829 0a20 2020 2020 2020 2064 6573 6372  ().        descr
+000147f0: 5f6d 6178 5f77 6964 7468 203d 2077 6964  _max_width = wid
+00014800: 7468 202d 2033 360a 0a20 2020 2020 2020  th - 36..       
+00014810: 2069 6620 7570 6772 6164 6561 626c 653a   if upgradeable:
+00014820: 0a20 2020 2020 2020 2020 2020 2069 6e73  .            ins
+00014830: 7461 6c6c 6564 203d 2054 7275 650a 0a20  talled = True.. 
+00014840: 2020 2020 2020 2070 6c61 7466 6f72 6d20         platform 
+00014850: 3d20 5f73 6573 7369 6f6e 2e70 6c61 7466  = _session.platf
+00014860: 6f72 6d69 640a 2020 2020 2020 2020 6373  ormid.        cs
+00014870: 6f75 6e64 7665 7273 696f 6e20 3d20 5f73  oundversion = _s
+00014880: 6573 7369 6f6e 2e63 736f 756e 645f 7665  ession.csound_ve
+00014890: 7273 696f 6e0a 0a20 2020 2020 2020 2069  rsion..        i
+000148a0: 6620 6865 6164 6572 3a0a 2020 2020 2020  f header:.      
+000148b0: 2020 2020 2020 7072 696e 7428 6622 4373        print(f"Cs
+000148c0: 6f75 6e64 2056 6572 7369 6f6e 3a20 7b63  ound Version: {c
+000148d0: 736f 756e 6476 6572 7369 6f6e 7d22 290a  soundversion}").
+000148e0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+000148f0: 7428 290a 0a20 2020 2020 2020 2066 6f72  t()..        for
+00014900: 2070 6c75 6769 6e20 696e 2073 656c 662e   plugin in self.
+00014910: 706c 7567 696e 732e 7661 6c75 6573 2829  plugins.values()
+00014920: 3a0a 2020 2020 2020 2020 2020 2020 6461  :.            da
+00014930: 7461 203d 205b 5d0a 2020 2020 2020 2020  ta = [].        
+00014940: 2020 2020 696e 666f 203d 2073 656c 662e      info = self.
+00014950: 696e 7374 616c 6c65 645f 706c 7567 696e  installed_plugin
+00014960: 5f69 6e66 6f28 706c 7567 696e 290a 2020  _info(plugin).  
+00014970: 2020 2020 2020 2020 2020 706c 7567 696e            plugin
+00014980: 696e 7374 616c 6c65 6420 3d20 696e 666f  installed = info
+00014990: 2069 7320 6e6f 7420 4e6f 6e65 0a0a 2020   is not None..  
+000149a0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+000149b0: 2070 6c75 6769 6e69 6e73 7461 6c6c 6564   plugininstalled
+000149c0: 2061 6e64 2069 6e73 7461 6c6c 6564 3a0a   and installed:.
+000149d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000149e0: 636f 6e74 696e 7565 0a0a 2020 2020 2020  continue..      
+000149f0: 2020 2020 2020 6966 2075 7067 7261 6465        if upgrade
+00014a00: 6162 6c65 2061 6e64 2028 6e6f 7420 696e  able and (not in
+00014a10: 666f 206f 7220 696e 666f 2e76 6572 7369  fo or info.versi
+00014a20: 6f6e 7475 706c 6520 3d3d 2028 302c 2030  ontuple == (0, 0
+00014a30: 2c20 3029 206f 720a 2020 2020 2020 2020  , 0) or.        
+00014a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014a50: 2020 2020 2020 2020 706c 7567 696e 2e76          plugin.v
+00014a60: 6572 7369 6f6e 7475 706c 6520 3c3d 2069  ersiontuple <= i
+00014a70: 6e66 6f2e 7665 7273 696f 6e74 7570 6c65  nfo.versiontuple
+00014a80: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00014a90: 2020 2063 6f6e 7469 6e75 650a 0a20 2020     continue..   
+00014aa0: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
+00014ab0: 6f6e 6c79 3a0a 2020 2020 2020 2020 2020  only:.          
+00014ac0: 2020 2020 2020 7072 696e 7428 706c 7567        print(plug
+00014ad0: 696e 2e6e 616d 6529 0a20 2020 2020 2020  in.name).       
+00014ae0: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00014af0: 650a 0a20 2020 2020 2020 2020 2020 2065  e..            e
+00014b00: 7874 7261 5f6c 696e 6573 203d 205b 5d0a  xtra_lines = [].
+00014b10: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00014b20: 6e66 6f3a 0a20 2020 2020 2020 2020 2020  nfo:.           
+00014b30: 2020 2020 2069 6620 696e 666f 2e76 6572       if info.ver
+00014b40: 7369 6f6e 7374 7220 3d3d 2055 4e4b 4e4f  sionstr == UNKNO
+00014b50: 574e 5f56 4552 5349 4f4e 3a0a 2020 2020  WN_VERSION:.    
+00014b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b70: 6461 7461 2e61 7070 656e 6428 226d 616e  data.append("man
+00014b80: 7561 6c22 290a 2020 2020 2020 2020 2020  ual").          
+00014b90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00014ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014bb0: 6966 206f 6e65 6c69 6e65 3a0a 2020 2020  if oneline:.    
+00014bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014bd0: 2020 2020 6461 7461 2e61 7070 656e 6428      data.append(
+00014be0: 696e 666f 2e76 6572 7369 6f6e 7374 7229  info.versionstr)
+00014bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014c00: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00014c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014c20: 2020 2064 6174 612e 6170 7065 6e64 2866     data.append(f
+00014c30: 2269 6e73 7461 6c6c 6564 3a20 7b69 6e66  "installed: {inf
+00014c40: 6f2e 7665 7273 696f 6e73 7472 7d22 290a  o.versionstr}").
+00014c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014c60: 6966 206e 6f74 2069 6e66 6f2e 696e 7374  if not info.inst
+00014c70: 616c 6c65 645f 696e 5f73 7973 7465 6d5f  alled_in_system_
+00014c80: 666f 6c64 6572 2061 6e64 206e 6f74 206f  folder and not o
+00014c90: 6e65 6c69 6e65 3a0a 2020 2020 2020 2020  neline:.        
+00014ca0: 2020 2020 2020 2020 2020 2020 6578 7472              extr
+00014cb0: 615f 6c69 6e65 732e 6170 7065 6e64 2866  a_lines.append(f
+00014cc0: 2250 6174 683a 207b 696e 666f 2e64 6c6c  "Path: {info.dll
+00014cd0: 7061 7468 7d22 290a 2020 2020 2020 2020  path}").        
+00014ce0: 2020 2020 6966 2064 6174 613a 0a20 2020      if data:.   
+00014cf0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+00014d00: 7475 7320 3d20 225b 2220 2b20 222c 2022  tus = "[" + ", "
+00014d10: 2e6a 6f69 6e28 6461 7461 2920 2b20 225d  .join(data) + "]
+00014d20: 220a 2020 2020 2020 2020 2020 2020 656c  ".            el
+00014d30: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00014d40: 2020 2020 7374 6174 7573 203d 2022 220a      status = "".
+00014d50: 2020 2020 2020 2020 2020 2020 6c65 6674              left
+00014d60: 636f 6c20 3d20 6622 7b70 6c75 6769 6e2e  col = f"{plugin.
+00014d70: 6e61 6d65 7d20 2f7b 706c 7567 696e 2e76  name} /{plugin.v
+00014d80: 6572 7369 6f6e 7d22 0a20 2020 2020 2020  ersion}".       
+00014d90: 2020 2020 2064 6573 6372 203d 2070 6c75       descr = plu
+00014da0: 6769 6e2e 7368 6f72 745f 6465 7363 7269  gin.short_descri
+00014db0: 7074 696f 6e0a 2020 2020 2020 2020 2020  ption.          
+00014dc0: 2020 6269 6e64 6566 203d 2070 6c75 6769    bindef = plugi
+00014dd0: 6e2e 6669 6e64 5f62 696e 6172 7928 290a  n.find_binary().
+00014de0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00014df0: 6f74 2062 696e 6465 663a 0a20 2020 2020  ot bindef:.     
+00014e00: 2020 2020 2020 2020 2020 2061 7661 696c             avail
+00014e10: 6162 6c65 203d 2027 2c20 272e 6a6f 696e  able = ', '.join
+00014e20: 2870 6c75 6769 6e2e 6176 6169 6c61 626c  (plugin.availabl
+00014e30: 655f 6269 6e61 7269 6573 2829 290a 2020  e_binaries()).  
+00014e40: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+00014e50: 7472 615f 6c69 6e65 732e 6170 7065 6e64  tra_lines.append
+00014e60: 2866 222d 2d20 4e6f 2062 696e 6172 6965  (f"-- No binarie
+00014e70: 7320 666f 7220 7b70 6c61 7466 6f72 6d7d  s for {platform}
+00014e80: 2f7b 6373 6f75 6e64 7665 7273 696f 6e7d  /{csoundversion}
+00014e90: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+00014ea0: 2020 2065 7874 7261 5f6c 696e 6573 2e61     extra_lines.a
+00014eb0: 7070 656e 6428 6622 2020 2041 7661 696c  ppend(f"   Avail
+00014ec0: 6162 6c65 2062 696e 6172 6965 733a 207b  able binaries: {
+00014ed0: 6176 6169 6c61 626c 657d 2229 0a20 2020  available}").   
+00014ee0: 2020 2020 2020 2020 2069 6620 6f6e 656c           if onel
+00014ef0: 696e 6520 616e 6420 6c65 6e28 6465 7363  ine and len(desc
+00014f00: 7229 203e 2064 6573 6372 5f6d 6178 5f77  r) > descr_max_w
+00014f10: 6964 7468 3a0a 2020 2020 2020 2020 2020  idth:.          
+00014f20: 2020 2020 2020 6465 7363 7220 3d20 6465        descr = de
+00014f30: 7363 725b 3a64 6573 6372 5f6d 6178 5f77  scr[:descr_max_w
+00014f40: 6964 7468 5d20 2b20 22e2 80a6 220a 2020  idth] + "...".  
+00014f50: 2020 2020 2020 2020 2020 7379 6d62 6f6c            symbol
+00014f60: 203d 2022 2a22 2069 6620 706c 7567 696e   = "*" if plugin
+00014f70: 696e 7374 616c 6c65 6420 656c 7365 2022  installed else "
+00014f80: 2d22 0a20 2020 2020 2020 2020 2020 2070  -".            p
+00014f90: 7269 6e74 2866 227b 7379 6d62 6f6c 7d20  rint(f"{symbol} 
+00014fa0: 7b6c 6566 7463 6f6c 2e6c 6a75 7374 286c  {leftcol.ljust(l
+00014fb0: 6566 7463 6f6c 7769 6474 6829 7d20 7c20  eftcolwidth)} | 
+00014fc0: 7b64 6573 6372 7d20 7b73 7461 7475 737d  {descr} {status}
+00014fd0: 2229 0a20 2020 2020 2020 2020 2020 2069  ").            i
+00014fe0: 6620 6578 7472 615f 6c69 6e65 733a 0a20  f extra_lines:. 
+00014ff0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00015000: 6f72 206c 696e 6520 696e 2065 7874 7261  or line in extra
+00015010: 5f6c 696e 6573 3a0a 2020 2020 2020 2020  _lines:.        
+00015020: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00015030: 7428 2220 2220 2a20 6c65 6674 636f 6c77  t(" " * leftcolw
+00015040: 6964 7468 202b 2066 2220 2020 7c20 2020  idth + f"   |   
+00015050: 222c 206c 696e 6529 0a20 2020 2020 2020  ", line).       
+00015060: 2070 7269 6e74 2829 0a20 2020 2020 2020   print().       
+00015070: 2072 6574 7572 6e20 5472 7565 0a0a 2020   return True..  
+00015080: 2020 6465 6620 7368 6f77 5f70 6c75 6769    def show_plugi
+00015090: 6e28 7365 6c66 2c20 706c 7567 696e 6e61  n(self, pluginna
+000150a0: 6d65 3a20 7374 7229 202d 3e20 626f 6f6c  me: str) -> bool
+000150b0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+000150c0: 2020 2020 2020 5368 6f77 2069 6e66 6f20        Show info 
+000150d0: 6162 6f75 7420 6120 706c 7567 696e 0a0a  about a plugin..
+000150e0: 2020 2020 2020 2020 5265 7475 726e 7320          Returns 
+000150f0: 5472 7565 206f 6e20 7375 6363 6573 730a  True on success.
+00015100: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00015110: 2020 2020 706c 7567 6465 6620 3d20 7365      plugdef = se
+00015120: 6c66 2e70 6c75 6769 6e73 2e67 6574 2870  lf.plugins.get(p
+00015130: 6c75 6769 6e6e 616d 6529 0a20 2020 2020  luginname).     
+00015140: 2020 2069 6620 706c 7567 6465 6620 6973     if plugdef is
+00015150: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00015160: 2020 205f 6572 726f 726d 7367 2866 2250     _errormsg(f"P
+00015170: 6c75 6769 6e20 277b 706c 7567 696e 6e61  lugin '{pluginna
+00015180: 6d65 7d27 2075 6e6b 6e6f 776e 5c6e 220a  me}' unknown\n".
+00015190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000151a0: 2020 2020 2020 6622 4b6e 6f77 6e20 706c        f"Known pl
+000151b0: 7567 696e 733a 207b 272c 2027 2e6a 6f69  ugins: {', '.joi
+000151c0: 6e28 7365 6c66 2e70 6c75 6769 6e73 2e6b  n(self.plugins.k
+000151d0: 6579 7328 2929 7d22 290a 2020 2020 2020  eys())}").      
+000151e0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+000151f0: 7365 0a20 2020 2020 2020 2069 6e66 6f20  se.        info 
+00015200: 3d20 7365 6c66 2e69 6e73 7461 6c6c 6564  = self.installed
+00015210: 5f70 6c75 6769 6e5f 696e 666f 2870 6c75  _plugin_info(plu
+00015220: 6764 6566 290a 2020 2020 2020 2020 7072  gdef).        pr
+00015230: 696e 7428 225c 6e22 0a20 2020 2020 2020  int("\n".       
+00015240: 2020 2020 2020 2066 2250 6c75 6769 6e20         f"Plugin 
+00015250: 2020 2020 2020 203a 207b 706c 7567 6465         : {plugde
+00015260: 662e 6e61 6d65 7d20 2020 205c 6e22 0a20  f.name}    \n". 
+00015270: 2020 2020 2020 2020 2020 2020 2066 2241               f"A
+00015280: 7574 686f 7220 2020 2020 2020 203a 207b  uthor        : {
+00015290: 706c 7567 6465 662e 6175 7468 6f72 7d20  plugdef.author} 
+000152a0: 287b 706c 7567 6465 662e 656d 6169 6c7d  ({plugdef.email}
+000152b0: 2920 5c6e 220a 2020 2020 2020 2020 2020  ) \n".          
+000152c0: 2020 2020 6622 5552 4c20 2020 2020 2020      f"URL       
+000152d0: 2020 2020 3a20 7b70 6c75 6764 6566 2e75      : {plugdef.u
+000152e0: 726c 7d20 2020 2020 5c6e 220a 2020 2020  rl}     \n".    
+000152f0: 2020 2020 2020 2020 2020 6622 5665 7273            f"Vers
+00015300: 696f 6e20 2020 2020 2020 3a20 7b70 6c75  ion       : {plu
+00015310: 6764 6566 2e76 6572 7369 6f6e 7d20 5c6e  gdef.version} \n
+00015320: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+00015330: 290a 2020 2020 2020 2020 6966 2069 6e66  ).        if inf
+00015340: 6f3a 0a20 2020 2020 2020 2020 2020 206d  o:.            m
+00015350: 616e 6966 6573 7420 3d20 2869 6e66 6f2e  anifest = (info.
+00015360: 696e 7374 616c 6c65 645f 6d61 6e69 6665  installed_manife
+00015370: 7374 5f70 6174 682e 6173 5f70 6f73 6978  st_path.as_posix
+00015380: 2829 2069 6620 696e 666f 2e69 6e73 7461  () if info.insta
+00015390: 6c6c 6564 5f6d 616e 6966 6573 745f 7061  lled_manifest_pa
+000153a0: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
+000153b0: 2020 2020 2020 2020 2020 2065 6c73 6520             else 
+000153c0: 274e 6f20 6d61 6e69 6665 7374 2028 696e  'No manifest (in
+000153d0: 7374 616c 6c65 6420 6d61 6e75 616c 6c79  stalled manually
+000153e0: 2927 290a 2020 2020 2020 2020 2020 2020  )').            
+000153f0: 7072 696e 7428 6622 496e 7374 616c 6c65  print(f"Installe
+00015400: 6420 2020 2020 3a20 7b69 6e66 6f2e 7665  d     : {info.ve
+00015410: 7273 696f 6e73 7472 7d20 2870 6174 683a  rsionstr} (path:
+00015420: 207b 696e 666f 2e64 6c6c 7061 7468 2e61   {info.dllpath.a
+00015430: 735f 706f 7369 7828 297d 2920 5c6e 220a  s_posix()}) \n".
+00015440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015450: 2020 6622 4d61 6e69 6665 7374 2020 2020    f"Manifest    
+00015460: 2020 3a20 7b6d 616e 6966 6573 747d 2229    : {manifest}")
+00015470: 0a20 2020 2020 2020 2070 7269 6e74 2866  .        print(f
+00015480: 2241 6273 7472 6163 7420 2020 2020 203a  "Abstract      :
+00015490: 207b 706c 7567 6465 662e 7368 6f72 745f   {plugdef.short_
+000154a0: 6465 7363 7269 7074 696f 6e7d 2229 0a20  description}"). 
+000154b0: 2020 2020 2020 2069 6620 706c 7567 6465         if plugde
+000154c0: 662e 6c6f 6e67 5f64 6573 6372 6970 7469  f.long_descripti
+000154d0: 6f6e 2e73 7472 6970 2829 3a0a 2020 2020  on.strip():.    
+000154e0: 2020 2020 2020 2020 7072 696e 7428 2244          print("D
+000154f0: 6573 6372 6970 7469 6f6e 3a22 290a 2020  escription:").  
+00015500: 2020 2020 2020 2020 2020 666f 7220 6c69            for li
+00015510: 6e65 2069 6e20 7465 7874 7772 6170 2e77  ne in textwrap.w
+00015520: 7261 7028 706c 7567 6465 662e 6c6f 6e67  rap(plugdef.long
+00015530: 5f64 6573 6372 6970 7469 6f6e 2c20 3732  _description, 72
+00015540: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00015550: 2020 2070 7269 6e74 2822 2022 202a 2033     print(" " * 3
+00015560: 2c20 6c69 6e65 290a 2020 2020 2020 2020  , line).        
+00015570: 2020 2020 2320 7072 696e 7428 7465 7874      # print(text
+00015580: 7772 6170 2e77 7261 7069 6e64 656e 7428  wrap.wrapindent(
+00015590: 2220 2020 2020 222c 2070 6c75 6764 6566  "     ", plugdef
+000155a0: 2e6c 6f6e 675f 6465 7363 7269 7074 696f  .long_descriptio
+000155b0: 6e29 290a 2020 2020 2020 2020 7072 696e  n)).        prin
+000155c0: 7428 6622 4f70 636f 6465 733a 2229 0a20  t(f"Opcodes:"). 
+000155d0: 2020 2020 2020 206f 7063 7374 7273 203d         opcstrs =
+000155e0: 2074 6578 7477 7261 702e 7772 6170 2822   textwrap.wrap("
+000155f0: 2c20 222e 6a6f 696e 2870 6c75 6764 6566  , ".join(plugdef
+00015600: 2e6f 7063 6f64 6573 292c 2037 3229 0a20  .opcodes), 72). 
+00015610: 2020 2020 2020 2066 6f72 2073 2069 6e20         for s in 
+00015620: 6f70 6373 7472 733a 0a20 2020 2020 2020  opcstrs:.       
+00015630: 2020 2020 2070 7269 6e74 2822 2020 2022       print("   "
+00015640: 2c20 7329 0a0a 2020 2020 2020 2020 6966  , s)..        if
+00015650: 2070 6c75 6764 6566 2e62 696e 6172 6965   plugdef.binarie
+00015660: 733a 0a20 2020 2020 2020 2020 2020 2070  s:.            p
+00015670: 7269 6e74 2822 4269 6e61 7269 6573 3a22  rint("Binaries:"
+00015680: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
+00015690: 7220 6269 6e61 7279 2069 6e20 706c 7567  r binary in plug
+000156a0: 6465 662e 6269 6e61 7269 6573 3a0a 2020  def.binaries:.  
+000156b0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+000156c0: 696e 7428 6622 2020 2020 2a20 7b62 696e  int(f"    * {bin
+000156d0: 6172 792e 706c 6174 666f 726d 7d2f 6373  ary.platform}/cs
+000156e0: 6f75 6e64 7b62 696e 6172 792e 6373 6f75  ound{binary.csou
+000156f0: 6e64 5f76 6572 7369 6f6e 7d22 290a 0a20  nd_version}").. 
+00015700: 2020 2020 2020 2069 6620 706c 7567 6465         if plugde
+00015710: 662e 6173 7365 7473 3a0a 2020 2020 2020  f.assets:.      
+00015720: 2020 2020 2020 7072 696e 7428 2241 7373        print("Ass
+00015730: 6574 733a 2229 0a20 2020 2020 2020 2020  ets:").         
+00015740: 2020 2066 6f72 2061 7373 6574 2069 6e20     for asset in 
+00015750: 706c 7567 6465 662e 6173 7365 7473 3a0a  plugdef.assets:.
+00015760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015770: 7072 696e 7428 6622 2020 2020 2a20 6964  print(f"    * id
+00015780: 656e 7469 6669 6572 3a20 7b5f 6162 6272  entifier: {_abbr
+00015790: 6576 2861 7373 6574 2e69 6465 6e74 6966  ev(asset.identif
+000157a0: 6965 7228 292c 2037 3029 7d5c 6e22 0a20  ier(), 70)}\n". 
+000157b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000157c0: 2020 2020 2066 2220 2020 2020 2073 6f75       f"      sou
+000157d0: 7263 653a 207b 6173 7365 742e 736f 7572  rce: {asset.sour
+000157e0: 6365 7d5c 6e22 0a20 2020 2020 2020 2020  ce}\n".         
+000157f0: 2020 2020 2020 2020 2020 2020 2066 2220               f" 
+00015800: 2020 2020 2070 6174 7465 726e 733a 207b       patterns: {
+00015810: 272c 2027 2e6a 6f69 6e28 6173 7365 742e  ', '.join(asset.
+00015820: 7061 7474 6572 6e73 297d 5c6e 220a 2020  patterns)}\n".  
+00015830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015840: 2020 2020 6622 2020 2020 2020 706c 6174      f"      plat
+00015850: 666f 726d 3a20 7b61 7373 6574 2e70 6c61  form: {asset.pla
+00015860: 7466 6f72 6d7d 2229 0a20 2020 2020 2020  tform}").       
+00015870: 2070 7269 6e74 2829 0a20 2020 2020 2020   print().       
+00015880: 2072 6574 7572 6e20 5472 7565 0a0a 2020   return True..  
+00015890: 2020 6465 6620 756e 696e 7374 616c 6c5f    def uninstall_
+000158a0: 706c 7567 696e 2873 656c 662c 2070 6c75  plugin(self, plu
+000158b0: 6769 6e3a 2050 6c75 6769 6e2c 2072 656d  gin: Plugin, rem
+000158c0: 6f76 6561 7373 6574 733d 5472 7565 2920  oveassets=True) 
+000158d0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+000158e0: 2022 2222 0a20 2020 2020 2020 2055 6e69   """.        Uni
+000158f0: 6e73 7461 6c6c 2074 6865 2067 6976 656e  nstall the given
+00015900: 2070 6c75 6769 6e0a 0a20 2020 2020 2020   plugin..       
+00015910: 2054 6869 7320 6f70 6572 6174 696f 6e20   This operation 
+00015920: 616c 736f 2072 656d 6f76 6573 2074 6865  also removes the
+00015930: 2069 6e73 7461 6c6c 6174 696f 6e20 6d61   installation ma
+00015940: 6e69 6665 7374 2c20 6966 2074 6865 0a20  nifest, if the. 
+00015950: 2020 2020 2020 2070 6c75 6769 6e20 7761         plugin wa
+00015960: 7320 696e 7374 616c 6c65 6420 7669 6120  s installed via 
+00015970: 7269 7373 6574 2e20 506c 7567 696e 7320  risset. Plugins 
+00015980: 696e 7374 616c 6c65 6420 696e 2074 6865  installed in the
+00015990: 0a20 2020 2020 2020 2073 7973 7465 6d27  .        system'
+000159a0: 7320 6469 7265 6374 6f72 7920 6e65 6564  s directory need
+000159b0: 2074 6f20 6265 2072 656d 6f76 6564 206d   to be removed m
+000159c0: 616e 7561 6c6c 792e 0a0a 2020 2020 2020  anually...      
+000159d0: 2020 5261 6973 6573 2052 756e 7469 6d65    Raises Runtime
+000159e0: 4572 726f 7220 6966 2074 6865 2070 6c75  Error if the plu
+000159f0: 6769 6e20 6973 206e 6f74 2069 6e73 7461  gin is not insta
+00015a00: 6c6c 6564 206f 7220 6973 2069 6e73 7461  lled or is insta
+00015a10: 6c6c 6564 0a20 2020 2020 2020 2069 6e20  lled.        in 
+00015a20: 7468 6520 7379 7374 656d 2773 2066 6f6c  the system's fol
+00015a30: 6465 722e 0a0a 2020 2020 2020 2020 4172  der...        Ar
+00015a40: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00015a50: 706c 7567 696e 3a20 7468 6520 706c 7567  plugin: the plug
+00015a60: 696e 2074 6f20 756e 696e 7374 616c 6c0a  in to uninstall.
+00015a70: 2020 2020 2020 2020 2020 2020 7265 6d6f              remo
+00015a80: 7665 6173 7365 7473 3a20 6966 2054 7275  veassets: if Tru
+00015a90: 652c 2072 656d 6f76 6573 2074 6865 2061  e, removes the a
+00015aa0: 7373 6574 7320 696e 7374 616c 6c65 6420  ssets installed 
+00015ab0: 6279 2074 6869 7320 706c 7567 696e 0a20  by this plugin. 
+00015ac0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00015ad0: 2020 2069 6e66 6f20 3d20 7365 6c66 2e69     info = self.i
+00015ae0: 6e73 7461 6c6c 6564 5f70 6c75 6769 6e5f  nstalled_plugin_
+00015af0: 696e 666f 2870 6c75 6769 6e29 0a20 2020  info(plugin).   
+00015b00: 2020 2020 2069 6620 6e6f 7420 696e 666f       if not info
+00015b10: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00015b20: 6973 6520 5275 6e74 696d 6545 7272 6f72  ise RuntimeError
+00015b30: 2866 2250 6c75 6769 6e20 7b70 6c75 6769  (f"Plugin {plugi
+00015b40: 6e2e 6e61 6d65 7d20 6973 206e 6f74 2069  n.name} is not i
+00015b50: 6e73 7461 6c6c 6564 2229 0a20 2020 2020  nstalled").     
+00015b60: 2020 2069 6620 6e6f 7420 696e 666f 2e64     if not info.d
+00015b70: 6c6c 7061 7468 2e65 7869 7374 7328 293a  llpath.exists():
+00015b80: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00015b90: 7365 2052 756e 7469 6d65 4572 726f 7228  se RuntimeError(
+00015ba0: 6622 436f 756c 6420 6e6f 7420 6669 6e64  f"Could not find
+00015bb0: 2062 696e 6172 7920 666f 7220 706c 7567   binary for plug
+00015bc0: 696e 207b 706c 7567 696e 2e6e 616d 657d  in {plugin.name}
+00015bd0: 2e20 220a 2020 2020 2020 2020 2020 2020  . ".            
+00015be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015bf0: 2020 2066 2244 6563 6c61 7265 6420 6269     f"Declared bi
+00015c00: 6e61 7279 3a20 7b69 6e66 6f2e 646c 6c70  nary: {info.dllp
+00015c10: 6174 682e 6173 5f70 6f73 6978 2829 7d22  ath.as_posix()}"
+00015c20: 290a 2020 2020 2020 2020 6966 2069 6e66  ).        if inf
+00015c30: 6f2e 696e 7374 616c 6c65 645f 696e 5f73  o.installed_in_s
+00015c40: 7973 7465 6d5f 666f 6c64 6572 3a0a 2020  ystem_folder:.  
+00015c50: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00015c60: 5275 6e74 696d 6545 7272 6f72 2866 2250  RuntimeError(f"P
+00015c70: 6c75 6769 6e20 6973 2069 6e73 7461 6c6c  lugin is install
+00015c80: 6564 2069 6e20 7468 6520 7379 7374 656d  ed in the system
+00015c90: 2066 6f6c 6465 7220 616e 6420 6e65 6564   folder and need
+00015ca0: 7320 746f 220a 2020 2020 2020 2020 2020  s to".          
+00015cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015cc0: 2020 2020 2066 2220 6265 2072 656d 6f76       f" be remov
+00015cd0: 6564 206d 616e 7561 6c6c 792e 2050 6174  ed manually. Pat
+00015ce0: 683a 207b 696e 666f 2e64 6c6c 7061 7468  h: {info.dllpath
+00015cf0: 2e61 735f 706f 7369 7828 297d 2229 0a20  .as_posix()}"). 
+00015d00: 2020 2020 2020 206f 732e 7265 6d6f 7665         os.remove
+00015d10: 2869 6e66 6f2e 646c 6c70 6174 682e 6173  (info.dllpath.as
+00015d20: 5f70 6f73 6978 2829 290a 2020 2020 2020  _posix()).      
+00015d30: 2020 6173 7365 7274 206e 6f74 2069 6e66    assert not inf
+00015d40: 6f2e 646c 6c70 6174 682e 6578 6973 7473  o.dllpath.exists
+00015d50: 2829 2c20 6622 4174 7465 6d70 7465 6420  (), f"Attempted 
+00015d60: 746f 2072 656d 6f76 6520 7b69 6e66 6f2e  to remove {info.
+00015d70: 646c 6c70 6174 682e 6173 5f70 6f73 6978  dllpath.as_posix
+00015d80: 2829 7d2c 2062 7574 2066 6169 6c65 6422  ()}, but failed"
+00015d90: 0a20 2020 2020 2020 206d 616e 6966 6573  .        manifes
+00015da0: 7470 6174 6820 3d20 696e 666f 2e69 6e73  tpath = info.ins
+00015db0: 7461 6c6c 6564 5f6d 616e 6966 6573 745f  talled_manifest_
+00015dc0: 7061 7468 0a20 2020 2020 2020 2061 7373  path.        ass
+00015dd0: 6574 7366 6f6c 6465 7220 3d20 5249 5353  etsfolder = RISS
+00015de0: 4554 5f41 5353 4554 535f 5041 5448 202f  ET_ASSETS_PATH /
+00015df0: 2070 6c75 6769 6e2e 6e61 6d65 0a20 2020   plugin.name.   
+00015e00: 2020 2020 2069 6620 6d61 6e69 6665 7374       if manifest
+00015e10: 7061 7468 2061 6e64 206d 616e 6966 6573  path and manifes
+00015e20: 7470 6174 682e 6578 6973 7473 2829 3a0a  tpath.exists():.
+00015e30: 2020 2020 2020 2020 2020 2020 696e 7374              inst
+00015e40: 616c 6c65 645f 6d61 6e69 6665 7374 203d  alled_manifest =
+00015e50: 205f 6c6f 6164 5f69 6e73 7461 6c6c 6174   _load_installat
+00015e60: 696f 6e5f 6d61 6e69 6665 7374 286d 616e  ion_manifest(man
+00015e70: 6966 6573 7470 6174 6829 0a20 2020 2020  ifestpath).     
+00015e80: 2020 2020 2020 2061 7373 6574 6669 6c65         assetfile
+00015e90: 7320 3d20 696e 7374 616c 6c65 645f 6d61  s = installed_ma
+00015ea0: 6e69 6665 7374 2e67 6574 2827 6173 7365  nifest.get('asse
+00015eb0: 7466 696c 6573 272c 205b 5d29 0a20 2020  tfiles', []).   
+00015ec0: 2020 2020 2020 2020 2069 6620 7265 6d6f           if remo
+00015ed0: 7665 6173 7365 7473 2061 6e64 2061 7373  veassets and ass
+00015ee0: 6574 7366 6f6c 6465 722e 6578 6973 7473  etsfolder.exists
+00015ef0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+00015f00: 2020 2020 5f64 6562 7567 2866 2252 656d      _debug(f"Rem
+00015f10: 6f76 696e 6720 6173 7365 7473 2066 6f72  oving assets for
+00015f20: 2070 6c75 6769 6e20 7b70 6c75 6769 6e2e   plugin {plugin.
+00015f30: 6e61 6d65 7d3a 207b 6173 7365 7466 696c  name}: {assetfil
+00015f40: 6573 7d22 290a 2020 2020 2020 2020 2020  es}").          
+00015f50: 2020 2020 2020 666f 7220 6173 7365 7466        for assetf
+00015f60: 696c 6520 696e 2061 7373 6574 6669 6c65  ile in assetfile
+00015f70: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00015f80: 2020 2020 2020 2061 7373 6574 6675 6c6c         assetfull
+00015f90: 7061 7468 203d 2061 7373 6574 7366 6f6c  path = assetsfol
+00015fa0: 6465 7220 2f20 6173 7365 7466 696c 650a  der / assetfile.
+00015fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015fc0: 2020 2020 6966 2061 7373 6574 6675 6c6c      if assetfull
+00015fd0: 7061 7468 2e65 7869 7374 7328 293a 0a20  path.exists():. 
+00015fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ff0: 2020 2020 2020 206f 732e 7265 6d6f 7665         os.remove
+00016000: 2861 7373 6574 6675 6c6c 7061 7468 290a  (assetfullpath).
+00016010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016020: 7265 6d61 696e 696e 6761 7373 6574 7320  remainingassets 
+00016030: 3d20 6c69 7374 2861 7373 6574 7366 6f6c  = list(assetsfol
+00016040: 6465 722e 676c 6f62 2822 2a22 2929 0a20  der.glob("*")). 
+00016050: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00016060: 6620 7265 6d61 696e 696e 6761 7373 6574  f remainingasset
+00016070: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+00016080: 2020 2020 2020 205f 696e 666f 2866 2254         _info(f"T
+00016090: 6865 7265 2061 7265 2072 656d 6169 6e69  here are remaini
+000160a0: 6e67 2061 7373 6574 7320 696e 2074 6865  ng assets in the
+000160b0: 2066 6f6c 6465 7220 7b61 7373 6574 7366   folder {assetsf
+000160c0: 6f6c 6465 727d 3a20 220a 2020 2020 2020  older}: ".      
+000160d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000160e0: 2020 2020 6622 7b27 2c20 272e 6a6f 696e      f"{', '.join
+000160f0: 2870 2e61 735f 706f 7369 7828 2920 666f  (p.as_posix() fo
+00016100: 7220 7020 696e 2072 656d 6169 6e69 6e67  r p in remaining
+00016110: 6173 7365 7473 297d 2229 0a20 2020 2020  assets)}").     
+00016120: 2020 2020 2020 2020 2020 2020 2020 205f                 _
+00016130: 696e 666f 2822 2e2e 2e20 5468 6579 2077  info("... They w
+00016140: 696c 6c20 6265 2072 656d 6f76 6564 2229  ill be removed")
+00016150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016160: 205f 726d 5f64 6972 2861 7373 6574 7366   _rm_dir(assetsf
+00016170: 6f6c 6465 7229 0a20 2020 2020 2020 2020  older).         
+00016180: 2020 206f 732e 7265 6d6f 7665 286d 616e     os.remove(man
+00016190: 6966 6573 7470 6174 682e 6173 5f70 6f73  ifestpath.as_pos
+000161a0: 6978 2829 290a 0a20 2020 2064 6566 2069  ix())..    def i
+000161b0: 6e73 7461 6c6c 5f61 7373 6574 2873 656c  nstall_asset(sel
+000161c0: 662c 2061 7373 6574 3a20 4173 7365 742c  f, asset: Asset,
+000161d0: 2070 7265 6669 783a 2073 7472 2920 2d3e   prefix: str) ->
+000161e0: 206c 6973 745b 7374 725d 3a0a 2020 2020   list[str]:.    
+000161f0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00016200: 496e 7374 616c 6c20 616e 2041 7373 6574  Install an Asset
+00016210: 2075 6e64 6572 2061 2067 6976 656e 2070   under a given p
+00016220: 7265 6669 780a 0a20 2020 2020 2020 2041  refix..        A
+00016230: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+00016240: 2061 7373 6574 3a20 7468 6520 4173 7365   asset: the Asse
+00016250: 7420 746f 2069 6e73 7461 6c6c 0a20 2020  t to install.   
+00016260: 2020 2020 2020 2020 2070 7265 6669 783a           prefix:
+00016270: 2074 6865 2070 7265 6669 7820 746f 2069   the prefix to i
+00016280: 6e73 7461 6c6c 2069 7420 756e 6465 722e  nstall it under.
+00016290: 0a0a 2020 2020 2020 2020 5265 7475 726e  ..        Return
+000162a0: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
+000162b0: 206c 6973 7420 6f66 2069 6e73 7461 6c6c   list of install
+000162c0: 6564 2066 696c 6520 6e61 6d65 7320 286f  ed file names (o
+000162d0: 6e6c 7920 7468 6520 6669 6c65 6e61 6d65  nly the filename
+000162e0: 2c20 6e6f 7420 7468 650a 2020 2020 2020  , not the.      
+000162f0: 2020 2020 2020 6162 736f 6c75 7465 2070        absolute p
+00016300: 6174 682c 2074 6865 2064 6573 7469 6e61  ath, the destina
+00016310: 7469 6f6e 2070 6174 6820 6973 2052 4953  tion path is RIS
+00016320: 5345 545f 4153 5345 5453 5f50 4154 4820  SET_ASSETS_PATH 
+00016330: 2f20 7072 6566 6978 290a 2020 2020 2020  / prefix).      
+00016340: 2020 2222 220a 2020 2020 2020 2020 6465    """.        de
+00016350: 7374 696e 6174 696f 6e5f 666f 6c64 6572  stination_folder
+00016360: 203d 2052 4953 5345 545f 4153 5345 5453   = RISSET_ASSETS
+00016370: 5f50 4154 4820 2f20 7072 6566 6978 0a20  _PATH / prefix. 
+00016380: 2020 2020 2020 2073 6f75 7263 6573 203d         sources =
+00016390: 2061 7373 6574 2e72 6574 7269 6576 6528   asset.retrieve(
+000163a0: 290a 2020 2020 2020 2020 6465 7374 696e  ).        destin
+000163b0: 6174 696f 6e5f 666f 6c64 6572 2e6d 6b64  ation_folder.mkd
+000163c0: 6972 2870 6172 656e 7473 3d54 7275 652c  ir(parents=True,
+000163d0: 2065 7869 7374 5f6f 6b3d 5472 7565 290a   exist_ok=True).
+000163e0: 2020 2020 2020 2020 666f 7220 736f 7572          for sour
+000163f0: 6365 2069 6e20 736f 7572 6365 733a 0a20  ce in sources:. 
+00016400: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
+00016410: 6728 6622 436f 7079 696e 6720 6173 7365  g(f"Copying asse
+00016420: 7420 7b73 6f75 7263 657d 2074 6f20 7b64  t {source} to {d
+00016430: 6573 7469 6e61 7469 6f6e 5f66 6f6c 6465  estination_folde
+00016440: 727d 2229 0a20 2020 2020 2020 2020 2020  r}").           
+00016450: 2069 6620 736f 7572 6365 2e69 735f 6469   if source.is_di
+00016460: 7228 293a 0a20 2020 2020 2020 2020 2020  r():.           
+00016470: 2020 2020 2073 6875 7469 6c2e 636f 7079       shutil.copy
+00016480: 7472 6565 2873 6f75 7263 652c 2064 6573  tree(source, des
+00016490: 7469 6e61 7469 6f6e 5f66 6f6c 6465 722f  tination_folder/
+000164a0: 736f 7572 6365 2e6e 616d 6529 0a20 2020  source.name).   
+000164b0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000164c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000164d0: 6875 7469 6c2e 636f 7079 2873 6f75 7263  hutil.copy(sourc
+000164e0: 652c 2064 6573 7469 6e61 7469 6f6e 5f66  e, destination_f
+000164f0: 6f6c 6465 7229 0a20 2020 2020 2020 2072  older).        r
+00016500: 6574 7572 6e20 5b66 2e6e 616d 6520 666f  eturn [f.name fo
+00016510: 7220 6620 696e 2073 6f75 7263 6573 5d0a  r f in sources].
+00016520: 0a20 2020 2064 6566 2067 656e 6572 6174  .    def generat
+00016530: 655f 6f70 636f 6465 735f 786d 6c28 7365  e_opcodes_xml(se
+00016540: 6c66 2920 2d3e 2073 7472 3a0a 2020 2020  lf) -> str:.    
+00016550: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00016560: 4765 6e65 7261 7465 7320 786d 6c20 666f  Generates xml fo
+00016570: 6c6c 6f77 696e 6720 7468 6520 7363 6865  llowing the sche
+00016580: 6d65 206f 6620 7468 6520 6d61 6e75 616c  me of the manual
+00016590: 2773 206f 7063 6f64 6573 2e78 6d6c 0a0a  's opcodes.xml..
+000165a0: 2020 2020 2020 2020 5468 6973 2063 616e          This can
+000165b0: 2062 6520 7573 6564 2062 7920 6672 6f6e   be used by fron
+000165c0: 7465 6e64 7320 746f 2067 656e 6572 6174  tends to generat
+000165d0: 6520 6865 6c70 2066 6f72 2061 6c6c 2063  e help for all c
+000165e0: 736f 756e 6420 6f70 636f 6465 730a 0a20  sound opcodes.. 
+000165f0: 2020 2020 2020 203c 3f78 6d6c 2076 6572         <?xml ver
+00016600: 7369 6f6e 3d22 312e 3022 2065 6e63 6f64  sion="1.0" encod
+00016610: 696e 673d 2255 5446 2d38 223f 3e0a 2020  ing="UTF-8"?>.  
+00016620: 2020 2020 2020 3c6f 7063 6f64 6573 3e0a        <opcodes>.
+00016630: 2020 2020 2020 2020 2020 3c63 6174 6567            <categ
+00016640: 6f72 7920 6e61 6d65 3d22 4f72 6368 6573  ory name="Orches
+00016650: 7472 6120 5379 6e74 6178 3a48 6561 6465  tra Syntax:Heade
+00016660: 7222 3e0a 2020 2020 2020 2020 2020 2020  r">.            
+00016670: 3c6f 7063 6f64 653e 0a20 2020 2020 2020  <opcode>.       
+00016680: 2020 2020 2020 203c 6465 7363 3e53 6574         <desc>Set
+00016690: 7320 7468 6520 7661 6c75 6520 6f66 2030  s the value of 0
+000166a0: 2064 6563 6962 656c 7320 7573 696e 6720   decibels using 
+000166b0: 6675 6c6c 2073 6361 6c65 2061 6d70 6c69  full scale ampli
+000166c0: 7475 6465 2e3c 2f64 6573 633e 0a20 2020  tude.</desc>.   
+000166d0: 2020 2020 2020 2020 2020 203c 7379 6e6f             <syno
+000166e0: 7073 6973 3e0a 2020 2020 2020 2020 2020  psis>.          
+000166f0: 2020 2020 2020 3c6f 7063 6f64 656e 616d        <opcodenam
+00016700: 653e 3064 6266 733c 2f6f 7063 6f64 656e  e>0dbfs</opcoden
+00016710: 616d 653e 203d 2069 6172 670a 2020 2020  ame> = iarg.    
+00016720: 2020 2020 2020 2020 2020 3c2f 7379 6e6f            </syno
+00016730: 7073 6973 3e0a 2020 2020 2020 2020 2020  psis>.          
+00016740: 2020 3c2f 6f70 636f 6465 3e0a 2020 2020    </opcode>.    
+00016750: 2020 2020 2020 2020 3c6f 7063 6f64 653e          <opcode>
+00016760: 0a20 2020 2020 2020 2020 2020 2020 203c  .              <
+00016770: 6465 7363 3e41 6e20 6f73 6369 6c6c 6174  desc>An oscillat
+00016780: 6f72 2077 6869 6368 2074 616b 6573 2074  or which takes t
+00016790: 6f6e 616c 6974 7920 616e 6420 6272 6967  onality and brig
+000167a0: 6874 6e65 7373 2061 7320 6172 6775 6d65  htness as argume
+000167b0: 6e74 732e 3c2f 6465 7363 3e0a 2020 2020  nts.</desc>.    
+000167c0: 2020 2020 2020 2020 2020 3c73 796e 6f70            <synop
+000167d0: 7369 733e 6172 6573 203c 6f70 636f 6465  sis>ares <opcode
+000167e0: 6e61 6d65 3e68 7362 6f73 6369 6c3c 2f6f  name>hsboscil</o
+000167f0: 7063 6f64 656e 616d 653e 206b 616d 702c  pcodename> kamp,
+00016800: 206b 746f 6e65 2c20 6b62 7269 7465 2c20   ktone, kbrite, 
+00016810: 6962 6173 6672 6571 2c20 6977 666e 2c20  ibasfreq, iwfn, 
+00016820: 696f 6374 666e 205c 0a20 2020 2020 2020  ioctfn \.       
+00016830: 2020 2020 2020 2020 5b2c 2069 6f63 7463          [, ioctc
+00016840: 6e74 5d20 5b2c 2069 7068 735d 0a20 2020  nt] [, iphs].   
+00016850: 2020 2020 2020 2020 2020 203c 2f73 796e             </syn
+00016860: 6f70 7369 733e 0a20 2020 2020 2020 2020  opsis>.         
+00016870: 2020 203c 2f6f 7063 6f64 653e 0a20 2020     </opcode>.   
+00016880: 2020 2020 2020 2020 202e 2e2e 0a20 2020           ....   
+00016890: 2020 2020 2020 203c 2f63 6174 6567 6f72         </categor
+000168a0: 793e 0a20 2020 2020 2020 2020 202e 2e2e  y>.          ...
+000168b0: 0a20 2020 2020 2020 203c 2f6f 7063 6f64  .        </opcod
+000168c0: 6573 3e0a 2020 2020 2020 2020 2222 220a  es>.        """.
+000168d0: 2020 2020 2020 2020 6c69 6e65 7320 3d20          lines = 
+000168e0: 5b5d 0a20 2020 2020 2020 2069 6e64 656e  [].        inden
+000168f0: 7477 6964 7468 203d 2032 0a0a 2020 2020  twidth = 2..    
+00016900: 2020 2020 6465 6620 5f28 732c 2069 6e64      def _(s, ind
+00016910: 656e 743d 3029 3a0a 2020 2020 2020 2020  ent=0):.        
+00016920: 2020 2020 6966 2069 6e64 656e 7420 3e20      if indent > 
+00016930: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00016940: 2020 2073 203d 2028 2220 222a 2869 6e64     s = (" "*(ind
+00016950: 656e 742a 696e 6465 6e74 7769 6474 6829  ent*indentwidth)
+00016960: 2920 2b20 730a 2020 2020 2020 2020 2020  ) + s.          
+00016970: 2020 6c69 6e65 732e 6170 7065 6e64 2873    lines.append(s
+00016980: 290a 0a20 2020 2020 2020 205f 2827 3c3f  )..        _('<?
+00016990: 786d 6c20 7665 7273 696f 6e3d 2231 2e30  xml version="1.0
+000169a0: 2220 656e 636f 6469 6e67 3d22 5554 462d  " encoding="UTF-
+000169b0: 3822 3f3e 2729 0a20 2020 2020 2020 205f  8"?>').        _
+000169c0: 2827 3c6f 7063 6f64 6573 3e27 290a 2020  ('<opcodes>').  
+000169d0: 2020 2020 2020 2320 466f 7220 6e6f 772c        # For now,
+000169e0: 2067 6174 6865 7220 616c 6c20 6f70 636f   gather all opco
+000169f0: 6465 7320 6265 6c6f 6e67 696e 6720 746f  des belonging to
+00016a00: 206f 6e65 2070 6c75 6769 6e20 756e 6465   one plugin unde
+00016a10: 7220 7468 6520 7361 6d65 2063 6174 6567  r the same categ
+00016a20: 6f72 792e 204c 6174 6572 2077 6520 6361  ory. Later we ca
+00016a30: 6e0a 2020 2020 2020 2020 2320 656e 666f  n.        # enfo
+00016a40: 7263 6520 7468 6174 2065 6163 6820 706c  rce that each pl
+00016a50: 7567 696e 2064 6566 696e 6573 2061 2063  ugin defines a c
+00016a60: 6174 6567 6f72 7920 696e 2074 6865 6972  ategory in their
+00016a70: 206d 616e 7061 6765 0a20 2020 2020 2020   manpage.       
+00016a80: 206f 7063 6f64 6573 203d 2073 656c 662e   opcodes = self.
+00016a90: 6f70 636f 6465 735f 6279 5f6e 616d 6528  opcodes_by_name(
+00016aa0: 290a 2020 2020 2020 2020 666f 7220 706c  ).        for pl
+00016ab0: 7567 696e 2069 6e20 7365 6c66 2e70 6c75  ugin in self.plu
+00016ac0: 6769 6e73 2e76 616c 7565 7328 293a 0a20  gins.values():. 
+00016ad0: 2020 2020 2020 2020 2020 205f 2866 273c             _(f'<
+00016ae0: 6361 7465 676f 7279 206e 616d 653d 2245  category name="E
+00016af0: 7874 6572 6e61 6c20 506c 7567 696e 3a7b  xternal Plugin:{
+00016b00: 706c 7567 696e 2e6e 616d 657d 223e 272c  plugin.name}">',
+00016b10: 2031 290a 2020 2020 2020 2020 2020 2020   1).            
+00016b20: 666f 7220 6f70 636f 6465 6e61 6d65 2069  for opcodename i
+00016b30: 6e20 706c 7567 696e 2e6f 7063 6f64 6573  n plugin.opcodes
+00016b40: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00016b50: 2020 6f70 636f 6465 203d 206f 7063 6f64    opcode = opcod
+00016b60: 6573 2e67 6574 286f 7063 6f64 656e 616d  es.get(opcodenam
+00016b70: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+00016b80: 2020 2069 6620 6e6f 7420 6f70 636f 6465     if not opcode
+00016b90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00016ba0: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+00016bb0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00016bc0: 616e 7061 6765 203d 2073 656c 662e 7061  anpage = self.pa
+00016bd0: 7273 655f 6d61 6e70 6167 6528 6f70 636f  rse_manpage(opco
+00016be0: 6465 6e61 6d65 290a 2020 2020 2020 2020  dename).        
+00016bf0: 2020 2020 2020 2020 6966 206e 6f74 206d          if not m
+00016c00: 616e 7061 6765 3a0a 2020 2020 2020 2020  anpage:.        
+00016c10: 2020 2020 2020 2020 2020 2020 5f65 7272              _err
+00016c20: 6f72 6d73 6728 6622 4e6f 206d 616e 7061  ormsg(f"No manpa
+00016c30: 6765 2066 6f75 6e64 2066 6f72 206f 7063  ge found for opc
+00016c40: 6f64 6520 7b6f 7063 6f64 656e 616d 657d  ode {opcodename}
+00016c50: 2c20 736b 6970 7069 6e67 2229 0a20 2020  , skipping").   
+00016c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016c70: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+00016c80: 2020 2020 2020 2020 2020 5f28 6627 3c6f            _(f'<o
+00016c90: 7063 6f64 6520 6e61 6d65 3d22 7b6f 7063  pcode name="{opc
+00016ca0: 6f64 656e 616d 657d 223e 272c 2032 290a  odename}">', 2).
+00016cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016cc0: 5f28 6622 3c64 6573 633e 7b6d 616e 7061  _(f"<desc>{manpa
+00016cd0: 6765 2e61 6273 7472 6163 747d 3c2f 6465  ge.abstract}</de
+00016ce0: 7363 3e22 2c20 3329 0a20 2020 2020 2020  sc>", 3).       
+00016cf0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00016d00: 6d61 6e70 6167 652e 7379 6e74 6178 6573  manpage.syntaxes
+00016d10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00016d20: 2020 2020 2020 5f65 7272 6f72 6d73 6728        _errormsg(
+00016d30: 6622 4e6f 2073 796e 7461 7865 7320 666f  f"No syntaxes fo
+00016d40: 756e 6420 666f 7220 6f70 636f 6465 207b  und for opcode {
+00016d50: 6f70 636f 6465 6e61 6d65 7d2c 2073 6b69  opcodename}, ski
+00016d60: 7070 696e 6722 290a 2020 2020 2020 2020  pping").        
+00016d70: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00016d80: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
+00016d90: 2020 2020 2066 6f72 2073 796e 7461 7820       for syntax 
+00016da0: 696e 206d 616e 7061 6765 2e73 796e 7461  in manpage.synta
+00016db0: 7865 733a 0a20 2020 2020 2020 2020 2020  xes:.           
+00016dc0: 2020 2020 2020 2020 2073 796e 7461 7820           syntax 
+00016dd0: 3d20 7379 6e74 6178 2e72 6570 6c61 6365  = syntax.replace
+00016de0: 286f 7063 6f64 656e 616d 652c 2066 223c  (opcodename, f"<
+00016df0: 6f70 636f 6465 6e61 6d65 3e7b 6f70 636f  opcodename>{opco
+00016e00: 6465 6e61 6d65 7d3c 2f6f 7063 6f64 656e  dename}</opcoden
+00016e10: 616d 653e 2229 0a20 2020 2020 2020 2020  ame>").         
+00016e20: 2020 2020 2020 2020 2020 205f 2866 223c             _(f"<
+00016e30: 7379 6e6f 7073 6973 3e7b 7379 6e74 6178  synopsis>{syntax
+00016e40: 7d3c 2f73 796e 6f70 7369 733e 222c 2033  }</synopsis>", 3
+00016e50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00016e60: 2020 5f28 223c 2f6f 7063 6f64 653e 222c    _("</opcode>",
+00016e70: 2032 290a 2020 2020 2020 2020 2020 2020   2).            
+00016e80: 5f28 273c 2f63 6174 6567 6f72 793e 272c  _('</category>',
+00016e90: 2031 290a 2020 2020 2020 2020 5f28 273c   1).        _('<
+00016ea0: 2f6f 7063 6f64 6573 3e27 290a 2020 2020  /opcodes>').    
+00016eb0: 2020 2020 7265 7475 726e 2022 5c6e 222e      return "\n".
+00016ec0: 6a6f 696e 286c 696e 6573 290a 0a0a 2323  join(lines)...##
+00016ed0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016ee0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016ef0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016f00: 2323 2323 2323 2323 2323 2323 230a 2320  #############.# 
+00016f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016f20: 2020 2020 2020 2044 6f63 756d 656e 7461         Documenta
+00016f30: 7469 6f6e 2020 2020 2020 2020 2020 2020  tion            
+00016f40: 2020 2020 2020 2020 2020 2020 230a 2323              #.##
+00016f50: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016f60: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016f70: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00016f80: 2323 2323 2323 2323 2323 2323 230a 0a0a  #############...
+00016f90: 6465 6620 5f69 735f 7061 636b 6167 655f  def _is_package_
+00016fa0: 696e 7374 616c 6c65 6428 706b 673a 2073  installed(pkg: s
+00016fb0: 7472 2920 2d3e 2062 6f6f 6c3a 0a20 2020  tr) -> bool:.   
+00016fc0: 2069 6d70 6f72 7420 696d 706f 7274 6c69   import importli
+00016fd0: 622e 7574 696c 0a20 2020 2072 6574 7572  b.util.    retur
+00016fe0: 6e20 696d 706f 7274 6c69 622e 7574 696c  n importlib.util
+00016ff0: 2e66 696e 645f 7370 6563 2870 6b67 2920  .find_spec(pkg) 
+00017000: 6973 206e 6f74 204e 6f6e 650a 0a0a 6465  is not None...de
+00017010: 6620 5f63 616c 6c5f 6d6b 646f 6373 2866  f _call_mkdocs(f
+00017020: 6f6c 6465 723a 2050 6174 682c 202a 6172  older: Path, *ar
+00017030: 6773 3a20 7374 7229 202d 3e20 4e6f 6e65  gs: str) -> None
+00017040: 3a0a 2020 2020 6375 7272 656e 7464 6972  :.    currentdir
+00017050: 203d 206f 732e 6765 7463 7764 2829 0a20   = os.getcwd(). 
+00017060: 2020 206f 732e 6368 6469 7228 666f 6c64     os.chdir(fold
+00017070: 6572 290a 2020 2020 5f64 6562 7567 2866  er).    _debug(f
+00017080: 2252 656e 6465 7269 6e67 2064 6f63 7320  "Rendering docs 
+00017090: 7669 6120 6d6b 646f 6373 2e20 4375 7272  via mkdocs. Curr
+000170a0: 656e 7420 6469 723a 207b 6f73 2e67 6574  ent dir: {os.get
+000170b0: 6377 6428 297d 2229 0a20 2020 205f 7375  cwd()}").    _su
+000170c0: 6270 726f 635f 6361 6c6c 285b 7379 732e  bproc_call([sys.
+000170d0: 6578 6563 7574 6162 6c65 2c20 222d 6d22  executable, "-m"
+000170e0: 2c20 226d 6b64 6f63 7322 5d20 2b20 6c69  , "mkdocs"] + li
+000170f0: 7374 2861 7267 7329 290a 2020 2020 6f73  st(args)).    os
+00017100: 2e63 6864 6972 2863 7572 7265 6e74 6469  .chdir(currentdi
+00017110: 7229 0a0a 0a64 6566 205f 6973 5f6d 6b64  r)...def _is_mkd
+00017120: 6f63 735f 696e 7374 616c 6c65 6428 2920  ocs_installed() 
+00017130: 2d3e 2062 6f6f 6c3a 0a20 2020 2072 6574  -> bool:.    ret
+00017140: 7572 6e20 5f69 735f 7061 636b 6167 655f  urn _is_package_
+00017150: 696e 7374 616c 6c65 6428 226d 6b64 6f63  installed("mkdoc
+00017160: 7322 2920 6f72 2073 6875 7469 6c2e 7768  s") or shutil.wh
+00017170: 6963 6828 226d 6b64 6f63 7322 2920 6973  ich("mkdocs") is
+00017180: 206e 6f74 204e 6f6e 650a 0a0a 6465 6620   not None...def 
+00017190: 5f67 656e 6572 6174 655f 646f 6375 6d65  _generate_docume
+000171a0: 6e74 6174 696f 6e28 696e 6465 783a 204d  ntation(index: M
+000171b0: 6169 6e49 6e64 6578 2c0a 2020 2020 2020  ainIndex,.      
+000171c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000171d0: 2020 2020 2020 6465 7374 3a20 5061 7468        dest: Path
+000171e0: 207c 204e 6f6e 6520 3d20 4e6f 6e65 2c0a   | None = None,.
+000171f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017200: 2020 2020 2020 2020 2020 2020 6275 696c              buil
+00017210: 6468 746d 6c3d 5472 7565 2c0a 2020 2020  dhtml=True,.    
+00017220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017230: 2020 2020 2020 2020 6f6e 6c79 696e 7374          onlyinst
+00017240: 616c 6c65 643d 4661 6c73 652c 0a20 2020  alled=False,.   
+00017250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017260: 2020 2020 2020 2020 206f 7063 6f64 6573           opcodes
+00017270: 786d 6c3a 2050 6174 6820 7c20 4e6f 6e65  xml: Path | None
+00017280: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+00017290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000172a0: 2020 2020 2920 2d3e 2050 6174 683a 0a20      ) -> Path:. 
+000172b0: 2020 2022 2222 0a20 2020 2047 656e 6572     """.    Gener
+000172c0: 6174 6520 646f 6375 6d65 6e74 6174 696f  ate documentatio
+000172d0: 6e20 666f 7220 7468 6520 706c 7567 696e  n for the plugin
+000172e0: 730a 0a20 2020 2041 7267 733a 0a20 2020  s..    Args:.   
+000172f0: 2020 2020 2069 6e64 6578 3a20 7468 6520       index: the 
+00017300: 6d61 696e 2069 6e64 6578 0a20 2020 2020  main index.     
+00017310: 2020 2064 6573 743a 2074 6865 2070 6174     dest: the pat
+00017320: 6820 7768 6572 6520 746f 2070 7574 2074  h where to put t
+00017330: 6865 2022 646f 6373 2220 666f 6c64 6572  he "docs" folder
+00017340: 0a20 2020 2020 2020 2062 7569 6c64 6874  .        buildht
+00017350: 6d6c 3a20 6966 2054 7275 652c 2063 616c  ml: if True, cal
+00017360: 6c20 6d6b 646f 6373 2074 6f20 6275 696c  l mkdocs to buil
+00017370: 6420 6874 6d6c 2064 6f63 756d 656e 7461  d html documenta
+00017380: 7469 6f6e 0a20 2020 2020 2020 206f 6e6c  tion.        onl
+00017390: 7969 6e73 7461 6c6c 6564 3a20 6966 2054  yinstalled: if T
+000173a0: 7275 652c 206f 6e6c 7920 6765 6e65 7261  rue, only genera
+000173b0: 7465 2064 6f63 7320 666f 7220 696e 7374  te docs for inst
+000173c0: 616c 6c65 6420 706c 7567 696e 730a 2020  alled plugins.  
+000173d0: 2020 2020 2020 6f70 636f 6465 7378 6d6c        opcodesxml
+000173e0: 3a20 6966 2067 6976 656e 2c20 6765 6e65  : if given, gene
+000173f0: 7261 7465 2061 6e20 6f70 636f 6465 732e  rate an opcodes.
+00017400: 786d 6c20 636f 6d70 6174 6962 6c65 2066  xml compatible f
+00017410: 696c 6520 7769 7468 2074 6865 206f 7063  ile with the opc
+00017420: 6f64 6573 2073 796e 7461 7820 616e 640a  odes syntax and.
+00017430: 2020 2020 2020 2020 2020 2020 6465 7363              desc
+00017440: 7269 7074 696f 6e20 616e 6420 7361 7665  ription and save
+00017450: 7320 6974 2061 7420 7468 6520 6769 7665  s it at the give
+00017460: 6e20 7061 7468 0a0a 2020 2020 5261 6973  n path..    Rais
+00017470: 6573 2052 756e 7469 6d65 4578 6365 0a20  es RuntimeExce. 
+00017480: 2020 2022 2222 0a20 2020 2069 6620 6465     """.    if de
+00017490: 7374 2069 7320 4e6f 6e65 3a0a 2020 2020  st is None:.    
+000174a0: 2020 2020 6465 7374 203d 2052 4953 5345      dest = RISSE
+000174b0: 545f 4745 4e45 5241 5445 445f 444f 4353  T_GENERATED_DOCS
+000174c0: 0a20 2020 205f 636f 6d70 696c 655f 646f  .    _compile_do
+000174d0: 6373 2869 6e64 6578 3d69 6e64 6578 2c20  cs(index=index, 
+000174e0: 6465 7374 3d64 6573 7420 2f20 2264 6f63  dest=dest / "doc
+000174f0: 7322 2c20 6d61 6b65 696e 6465 783d 5472  s", makeindex=Tr
+00017500: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+00017510: 2020 2020 2020 6f6e 6c79 696e 7374 616c        onlyinstal
+00017520: 6c65 643d 6f6e 6c79 696e 7374 616c 6c65  led=onlyinstalle
+00017530: 6429 0a0a 2020 2020 6966 206f 7063 6f64  d)..    if opcod
+00017540: 6573 786d 6c3a 0a20 2020 2020 2020 2078  esxml:.        x
+00017550: 6d6c 7374 7220 3d20 696e 6465 782e 6765  mlstr = index.ge
+00017560: 6e65 7261 7465 5f6f 7063 6f64 6573 5f78  nerate_opcodes_x
+00017570: 6d6c 2829 0a20 2020 2020 2020 206f 7065  ml().        ope
+00017580: 6e28 6f70 636f 6465 7378 6d6c 2c20 2277  n(opcodesxml, "w
+00017590: 2229 2e77 7269 7465 2878 6d6c 7374 7229  ").write(xmlstr)
+000175a0: 0a0a 2020 2020 6966 2062 7569 6c64 6874  ..    if buildht
+000175b0: 6d6c 3a0a 2020 2020 2020 2020 6d6b 646f  ml:.        mkdo
+000175c0: 6373 636f 6e66 6967 203d 2052 4953 5345  csconfig = RISSE
+000175d0: 545f 4441 5441 5245 504f 5f4c 4f43 414c  T_DATAREPO_LOCAL
+000175e0: 5041 5448 202f 2022 6173 7365 7473 2220  PATH / "assets" 
+000175f0: 2f20 226d 6b64 6f63 732e 796d 6c22 0a20  / "mkdocs.yml". 
+00017600: 2020 2020 2020 2069 6620 6e6f 7420 6d6b         if not mk
+00017610: 646f 6373 636f 6e66 6967 2e65 7869 7374  docsconfig.exist
+00017620: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+00017630: 2072 6169 7365 2049 4f45 7272 6f72 2866   raise IOError(f
+00017640: 2244 6964 206e 6f74 2066 696e 6420 6d6b  "Did not find mk
+00017650: 646f 6373 2063 6f6e 6669 6775 7261 7469  docs configurati
+00017660: 6f6e 2066 696c 652e 2053 6561 7263 6865  on file. Searche
+00017670: 643a 207b 6d6b 646f 6373 636f 6e66 6967  d: {mkdocsconfig
+00017680: 7d22 290a 2020 2020 2020 2020 6966 206e  }").        if n
+00017690: 6f74 205f 6973 5f6d 6b64 6f63 735f 696e  ot _is_mkdocs_in
+000176a0: 7374 616c 6c65 6428 293a 0a20 2020 2020  stalled():.     
+000176b0: 2020 2020 2020 2072 6169 7365 2052 756e         raise Run
+000176c0: 7469 6d65 4572 726f 7228 226d 6b64 6f63  timeError("mkdoc
+000176d0: 7320 6973 206e 6565 6465 6420 746f 2062  s is needed to b
+000176e0: 7569 6c64 2074 6865 2068 746d 6c20 646f  uild the html do
+000176f0: 6375 6d65 6e74 6174 696f 6e2e 2049 6e73  cumentation. Ins
+00017700: 7461 6c6c 2069 7420 7669 6120 2770 6970  tall it via 'pip
+00017710: 2069 6e73 7461 6c6c 206d 6b64 6f63 7327   install mkdocs'
+00017720: 2229 0a20 2020 2020 2020 2073 6875 7469  ").        shuti
+00017730: 6c2e 636f 7079 286d 6b64 6f63 7363 6f6e  l.copy(mkdocscon
+00017740: 6669 672c 2064 6573 7429 0a20 2020 2020  fig, dest).     
+00017750: 2020 205f 6361 6c6c 5f6d 6b64 6f63 7328     _call_mkdocs(
+00017760: 6465 7374 2c20 2262 7569 6c64 2229 0a0a  dest, "build")..
+00017770: 2020 2020 7265 7475 726e 2064 6573 740a      return dest.
+00017780: 0a0a 6465 6620 5f63 6f6d 7069 6c65 5f64  ..def _compile_d
+00017790: 6f63 7328 696e 6465 783a 204d 6169 6e49  ocs(index: MainI
+000177a0: 6e64 6578 2c20 6465 7374 3a20 5061 7468  ndex, dest: Path
+000177b0: 2c20 6d61 6b65 696e 6465 783d 5472 7565  , makeindex=True
+000177c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000177d0: 2020 2020 6f6e 6c79 696e 7374 616c 6c65      onlyinstalle
+000177e0: 643d 4661 6c73 6529 202d 3e20 4e6f 6e65  d=False) -> None
+000177f0: 3a0a 2020 2020 2222 220a 2020 2020 4761  :.    """.    Ga
+00017800: 7468 6572 2061 6c6c 206d 616e 7061 6765  ther all manpage
+00017810: 7320 616e 6420 6765 6e65 7261 7465 2061  s and generate a
+00017820: 206d 6b64 6f63 7320 636f 6d70 6174 6962   mkdocs compatib
+00017830: 6c65 2064 6f63 7320 666f 6c64 6572 0a0a  le docs folder..
+00017840: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
+00017850: 2020 696e 6465 783a 2074 6865 206d 6169    index: the mai
+00017860: 6e20 696e 6465 780a 2020 2020 2020 2020  n index.        
+00017870: 6465 7374 3a20 6465 7374 696e 6174 696f  dest: destinatio
+00017880: 6e20 7061 7468 206f 6620 7468 6520 646f  n path of the do
+00017890: 6375 6d65 6e74 6174 696f 6e0a 2020 2020  cumentation.    
+000178a0: 2020 2020 6d61 6b65 696e 6465 783a 2067      makeindex: g
+000178b0: 656e 6572 6174 6520 616e 2069 6e64 6578  enerate an index
+000178c0: 2066 696c 650a 2020 2020 2020 2020 6f6e   file.        on
+000178d0: 6c79 696e 7374 616c 6c65 643a 2069 6620  lyinstalled: if 
+000178e0: 5472 7565 2c20 6f6e 6c79 2067 656e 6572  True, only gener
+000178f0: 6174 6520 646f 6375 6d65 6e74 6174 696f  ate documentatio
+00017900: 6e20 666f 7220 696e 7374 616c 6c65 6420  n for installed 
+00017910: 706c 7567 696e 732f 6f70 636f 6465 730a  plugins/opcodes.
+00017920: 0a20 2020 2022 2222 0a20 2020 2064 6573  .    """.    des
+00017930: 7420 3d20 6465 7374 2e65 7870 616e 6475  t = dest.expandu
+00017940: 7365 7228 292e 6162 736f 6c75 7465 2829  ser().absolute()
+00017950: 0a20 2020 2069 6620 6465 7374 2e65 7869  .    if dest.exi
+00017960: 7374 7328 293a 0a20 2020 2020 2020 205f  sts():.        _
+00017970: 6465 6275 6728 6622 5265 6d6f 7669 6e67  debug(f"Removing
+00017980: 2065 7869 7374 696e 6720 646f 6320 666f   existing doc fo
+00017990: 6c64 6572 3a20 7b73 7472 2864 6573 7429  lder: {str(dest)
+000179a0: 7d22 290a 2020 2020 2020 2020 7368 7574  }").        shut
+000179b0: 696c 2e72 6d74 7265 6528 6465 7374 2e61  il.rmtree(dest.a
+000179c0: 735f 706f 7369 7828 2929 0a20 2020 2063  s_posix()).    c
+000179d0: 7373 5f66 6f6c 6465 7220 3d20 6465 7374  ss_folder = dest
+000179e0: 202f 2022 6373 7322 0a20 2020 206f 7063   / "css".    opc
+000179f0: 6f64 6573 5f66 6f6c 6465 7220 3d20 6465  odes_folder = de
+00017a00: 7374 202f 2022 6f70 636f 6465 7322 0a20  st / "opcodes". 
+00017a10: 2020 206f 7063 6f64 6573 5f61 7373 6574     opcodes_asset
+00017a20: 735f 666f 6c64 6572 203d 206f 7063 6f64  s_folder = opcod
+00017a30: 6573 5f66 6f6c 6465 7220 2f20 2261 7373  es_folder / "ass
+00017a40: 6574 7322 0a0a 2020 2020 666f 7220 666f  ets"..    for fo
+00017a50: 6c64 6572 2069 6e20 5b64 6573 742c 2063  lder in [dest, c
+00017a60: 7373 5f66 6f6c 6465 722c 206f 7063 6f64  ss_folder, opcod
+00017a70: 6573 5f66 6f6c 6465 722c 206f 7063 6f64  es_folder, opcod
+00017a80: 6573 5f61 7373 6574 735f 666f 6c64 6572  es_assets_folder
+00017a90: 5d3a 0a20 2020 2020 2020 2066 6f6c 6465  ]:.        folde
+00017aa0: 722e 6d6b 6469 7228 6578 6973 745f 6f6b  r.mkdir(exist_ok
+00017ab0: 3d54 7275 652c 2070 6172 656e 7473 3d54  =True, parents=T
+00017ac0: 7275 6529 0a0a 2020 2020 2320 636f 7079  rue)..    # copy
+00017ad0: 202e 6373 7320 6669 6c65 0a20 2020 2073   .css file.    s
+00017ae0: 796e 7461 7868 6967 686c 6967 6874 696e  yntaxhighlightin
+00017af0: 6763 7373 203d 2052 4953 5345 545f 4441  gcss = RISSET_DA
+00017b00: 5441 5245 504f 5f4c 4f43 414c 5041 5448  TAREPO_LOCALPATH
+00017b10: 202f 2022 6173 7365 7473 2220 2f20 2273   / "assets" / "s
+00017b20: 796e 7461 782d 6869 6768 6c69 6768 7469  yntax-highlighti
+00017b30: 6e67 2e63 7373 220a 2020 2020 6173 7365  ng.css".    asse
+00017b40: 7274 2073 796e 7461 7868 6967 686c 6967  rt syntaxhighlig
+00017b50: 6874 696e 6763 7373 2e65 7869 7374 7328  htingcss.exists(
+00017b60: 290a 2020 2020 7368 7574 696c 2e63 6f70  ).    shutil.cop
+00017b70: 7928 7379 6e74 6178 6869 6768 6c69 6768  y(syntaxhighligh
+00017b80: 7469 6e67 6373 732c 2063 7373 5f66 6f6c  tingcss, css_fol
+00017b90: 6465 7229 0a0a 2020 2020 666f 7220 706c  der)..    for pl
+00017ba0: 7567 696e 2069 6e20 696e 6465 782e 706c  ugin in index.pl
+00017bb0: 7567 696e 732e 7661 6c75 6573 2829 3a0a  ugins.values():.
+00017bc0: 2020 2020 2020 2020 6966 206f 6e6c 7969          if onlyi
+00017bd0: 6e73 7461 6c6c 6564 2061 6e64 206e 6f74  nstalled and not
+00017be0: 2069 6e64 6578 2e69 735f 706c 7567 696e   index.is_plugin
+00017bf0: 5f69 6e73 7461 6c6c 6564 2870 6c75 6769  _installed(plugi
+00017c00: 6e2c 2063 6865 636b 3d46 616c 7365 293a  n, check=False):
+00017c10: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
+00017c20: 7469 6e75 650a 2020 2020 2020 2020 646f  tinue.        do
+00017c30: 635f 666f 6c64 6572 203d 2070 6c75 6769  c_folder = plugi
+00017c40: 6e2e 7265 736f 6c76 655f 646f 635f 666f  n.resolve_doc_fo
+00017c50: 6c64 6572 2829 0a20 2020 2020 2020 2069  lder().        i
+00017c60: 6620 646f 635f 666f 6c64 6572 2069 7320  f doc_folder is 
+00017c70: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00017c80: 2020 5f64 6562 7567 2866 224e 6f20 646f    _debug(f"No do
+00017c90: 6373 2066 6f75 6e64 2066 6f72 2070 6c75  cs found for plu
+00017ca0: 6769 6e3a 207b 706c 7567 696e 2e6e 616d  gin: {plugin.nam
+00017cb0: 657d 2229 0a20 2020 2020 2020 2020 2020  e}").           
+00017cc0: 2063 6f6e 7469 6e75 650a 0a20 2020 2020   continue..     
+00017cd0: 2020 2064 6f63 7320 3d20 646f 635f 666f     docs = doc_fo
+00017ce0: 6c64 6572 2e67 6c6f 6228 222a 2e6d 6422  lder.glob("*.md"
+00017cf0: 290a 2020 2020 2020 2020 5f64 6562 7567  ).        _debug
+00017d00: 2866 2243 6f70 7969 6e67 2064 6f63 7320  (f"Copying docs 
+00017d10: 746f 207b 6f70 636f 6465 735f 666f 6c64  to {opcodes_fold
+00017d20: 6572 7d22 290a 2020 2020 2020 2020 666f  er}").        fo
+00017d30: 7220 646f 6320 696e 2064 6f63 733a 0a20  r doc in docs:. 
+00017d40: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
+00017d50: 6728 2220 636f 7079 696e 6722 2c20 7374  g(" copying", st
+00017d60: 7228 646f 6329 290a 2020 2020 2020 2020  r(doc)).        
+00017d70: 2020 2020 7368 7574 696c 2e63 6f70 7928      shutil.copy(
+00017d80: 646f 632e 6173 5f70 6f73 6978 2829 2c20  doc.as_posix(), 
+00017d90: 6f70 636f 6465 735f 666f 6c64 6572 2e61  opcodes_folder.a
+00017da0: 735f 706f 7369 7828 2929 0a0a 2020 2020  s_posix())..    
+00017db0: 2020 2020 2320 636f 7079 2061 7373 6574      # copy asset
+00017dc0: 730a 2020 2020 2020 2020 736f 7572 6365  s.        source
+00017dd0: 5f61 7373 6574 735f 666f 6c64 6572 203d  _assets_folder =
+00017de0: 2064 6f63 5f66 6f6c 6465 7220 2f20 2261   doc_folder / "a
+00017df0: 7373 6574 7322 0a20 2020 2020 2020 2069  ssets".        i
+00017e00: 6620 736f 7572 6365 5f61 7373 6574 735f  f source_assets_
+00017e10: 666f 6c64 6572 2e65 7869 7374 7328 2920  folder.exists() 
+00017e20: 616e 6420 736f 7572 6365 5f61 7373 6574  and source_asset
+00017e30: 735f 666f 6c64 6572 2e69 735f 6469 7228  s_folder.is_dir(
+00017e40: 293a 0a20 2020 2020 2020 2020 2020 205f  ):.            _
+00017e50: 6465 6275 6728 6622 436f 7079 696e 6720  debug(f"Copying 
+00017e60: 6173 7365 7473 2066 6f72 2070 6c75 6769  assets for plugi
+00017e70: 6e20 7b70 6c75 6769 6e2e 6e61 6d65 7d22  n {plugin.name}"
+00017e80: 290a 2020 2020 2020 2020 2020 2020 5f63  ).            _c
+00017e90: 6f70 795f 7265 6375 7273 6976 6528 736f  opy_recursive(so
+00017ea0: 7572 6365 5f61 7373 6574 735f 666f 6c64  urce_assets_fold
+00017eb0: 6572 2c20 6f70 636f 6465 735f 6173 7365  er, opcodes_asse
+00017ec0: 7473 5f66 6f6c 6465 7229 0a20 2020 2020  ts_folder).     
+00017ed0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00017ee0: 2020 2020 205f 6465 6275 6728 6622 4e6f       _debug(f"No
+00017ef0: 2061 7373 6574 7320 746f 2063 6f70 7920   assets to copy 
+00017f00: 666f 7220 706c 7567 696e 207b 706c 7567  for plugin {plug
+00017f10: 696e 2e6e 616d 657d 2229 0a0a 2020 2020  in.name}")..    
+00017f20: 6966 206d 616b 6569 6e64 6578 3a0a 2020  if makeindex:.  
+00017f30: 2020 2020 2020 5f64 6f63 735f 6765 6e65        _docs_gene
+00017f40: 7261 7465 5f69 6e64 6578 2869 6e64 6578  rate_index(index
+00017f50: 2c20 6465 7374 202f 2022 696e 6465 782e  , dest / "index.
+00017f60: 6d64 2229 0a0a 0a64 6566 205f 6d61 6e70  md")...def _manp
+00017f70: 6167 655f 7061 7273 6528 6d61 6e70 6167  age_parse(manpag
+00017f80: 653a 2050 6174 682c 206f 7063 6f64 653a  e: Path, opcode:
+00017f90: 2073 7472 2920 2d3e 204d 616e 5061 6765   str) -> ManPage
+00017fa0: 207c 204e 6f6e 653a 0a20 2020 2069 6620   | None:.    if 
+00017fb0: 6e6f 7420 6d61 6e70 6167 653a 0a20 2020  not manpage:.   
+00017fc0: 2020 2020 205f 6572 726f 726d 7367 2866       _errormsg(f
+00017fd0: 224f 7063 6f64 6520 7b6f 7063 6f64 657d  "Opcode {opcode}
+00017fe0: 2068 6173 206e 6f20 6d61 6e70 6167 6522   has no manpage"
+00017ff0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00018000: 204e 6f6e 650a 0a20 2020 2074 6578 7420   None..    text 
+00018010: 3d20 6f70 656e 286d 616e 7061 6765 292e  = open(manpage).
+00018020: 7265 6164 2829 0a20 2020 206c 696e 6573  read().    lines
+00018030: 203d 2074 6578 742e 7370 6c69 746c 696e   = text.splitlin
+00018040: 6573 2829 0a20 2020 2069 7420 3d20 6974  es().    it = it
+00018050: 6572 286c 696e 6573 290a 2020 2020 6162  er(lines).    ab
+00018060: 7374 7261 6374 203d 2027 270a 2020 2020  stract = ''.    
+00018070: 7379 6e74 6178 6c69 6e65 7320 3d20 5b5d  syntaxlines = []
+00018080: 0a20 2020 2066 6f75 6e64 7379 6e74 6178  .    foundsyntax
+00018090: 7461 6720 3d20 4661 6c73 650a 2020 2020  tag = False.    
+000180a0: 666f 7220 6c69 6e65 2069 6e20 6974 3a0a  for line in it:.
+000180b0: 2020 2020 2020 2020 6966 2072 652e 7365          if re.se
+000180c0: 6172 6368 2872 225e 5c73 2a23 2b5c 732b  arch(r"^\s*#+\s+
+000180d0: 5b73 7c53 5d79 6e74 6178 5c73 2a24 222c  [s|S]yntax\s*$",
+000180e0: 206c 696e 6529 3a0a 2020 2020 2020 2020   line):.        
+000180f0: 2020 2020 666f 756e 6473 796e 7461 7874      foundsyntaxt
+00018100: 6167 203d 2054 7275 650a 2020 2020 2020  ag = True.      
+00018110: 2020 2020 2020 6272 6561 6b0a 2020 2020        break.    
+00018120: 6966 2066 6f75 6e64 7379 6e74 6178 7461  if foundsyntaxta
+00018130: 673a 0a20 2020 2020 2020 2066 6f72 206c  g:.        for l
+00018140: 696e 6520 696e 2069 743a 0a20 2020 2020  ine in it:.     
+00018150: 2020 2020 2020 2069 6620 7265 2e73 6561         if re.sea
+00018160: 7263 6828 7222 5e5c 732a 5b23 213b 2f5d  rch(r"^\s*[#!;/]
+00018170: 222c 206c 696e 6529 3a0a 2020 2020 2020  ", line):.      
+00018180: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+00018190: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000181a0: 206f 7063 6f64 6520 696e 206c 696e 6520   opcode in line 
+000181b0: 616e 6420 2872 652e 7365 6172 6368 2872  and (re.search(r
+000181c0: 225e 5c73 2a5b 616b 6967 535c 5b78 5d22  "^\s*[akigS\[x]"
+000181d0: 2c20 6c69 6e65 2920 6f72 206c 696e 652e  , line) or line.
+000181e0: 6c73 7472 6970 2829 2e73 7461 7274 7377  lstrip().startsw
+000181f0: 6974 6828 6f70 636f 6465 2929 3a0a 2020  ith(opcode)):.  
+00018200: 2020 2020 2020 2020 2020 2020 2020 7379                sy
+00018210: 6e74 6178 203d 206c 696e 652e 7374 7269  ntax = line.stri
+00018220: 7028 292e 7370 6c69 7428 223b 222c 206d  p().split(";", m
+00018230: 6178 7370 6c69 743d 3129 5b30 5d0a 2020  axsplit=1)[0].  
+00018240: 2020 2020 2020 2020 2020 2020 2020 7379                sy
+00018250: 6e74 6178 6c69 6e65 732e 6170 7065 6e64  ntaxlines.append
+00018260: 2873 796e 7461 7829 0a0a 2020 2020 6966  (syntax)..    if
+00018270: 2022 2320 4162 7374 7261 6374 2220 696e   "# Abstract" in
+00018280: 2074 6578 743a 0a20 2020 2020 2020 2023   text:.        #
+00018290: 2074 6865 2061 6273 7472 6163 7420 776f   the abstract wo
+000182a0: 756c 6420 6265 2061 6c6c 2074 6865 2074  uld be all the t
+000182b0: 6578 7420 6265 7477 6565 6e20 2320 4162  ext between # Ab
+000182c0: 7374 7261 6374 2061 6e64 2074 6865 206e  stract and the n
+000182d0: 6578 7420 2374 6167 0a20 2020 2020 2020  ext #tag.       
+000182e0: 2069 7420 3d20 6974 6572 286c 696e 6573   it = iter(lines
+000182f0: 290a 2020 2020 2020 2020 666f 7220 6c69  ).        for li
+00018300: 6e65 2069 6e20 6974 3a0a 2020 2020 2020  ne in it:.      
+00018310: 2020 2020 2020 6966 2022 2320 4162 7374        if "# Abst
+00018320: 7261 6374 2220 696e 206c 696e 653a 0a20  ract" in line:. 
+00018330: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00018340: 7265 616b 0a20 2020 2020 2020 2066 6f72  reak.        for
+00018350: 206c 696e 6520 696e 2069 743a 0a20 2020   line in it:.   
+00018360: 2020 2020 2020 2020 206c 696e 6520 3d20           line = 
+00018370: 6c69 6e65 2e73 7472 6970 2829 0a20 2020  line.strip().   
+00018380: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00018390: 6c69 6e65 3a0a 2020 2020 2020 2020 2020  line:.          
+000183a0: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+000183b0: 2020 2020 2020 2020 2020 2061 6273 7472             abstr
+000183c0: 6163 7420 3d20 6c69 6e65 2069 6620 6e6f  act = line if no
+000183d0: 7420 6c69 6e65 2e73 7461 7274 7377 6974  t line.startswit
+000183e0: 6828 2223 2229 2065 6c73 6520 2222 0a20  h("#") else "". 
+000183f0: 2020 2020 2020 2020 2020 2062 7265 616b             break
+00018400: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00018410: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
+00018420: 6728 6622 4e6f 2061 6273 7472 6163 7420  g(f"No abstract 
+00018430: 696e 206d 616e 7061 6765 2066 696c 6520  in manpage file 
+00018440: 7b6d 616e 7061 6765 7d22 290a 2020 2020  {manpage}").    
+00018450: 656c 7365 3a0a 2020 2020 2020 2020 2320  else:.        # 
+00018460: 6e6f 2041 6273 7472 6163 7420 7461 672c  no Abstract tag,
+00018470: 2073 6f20 6162 7374 7261 6374 2069 7320   so abstract is 
+00018480: 7468 6520 7465 7874 2062 6574 7765 656e  the text between
+00018490: 2074 6865 2074 6974 6c65 2061 6e64 2074   the title and t
+000184a0: 6865 2074 6578 7420 7461 670a 2020 2020  he text tag.    
+000184b0: 2020 2020 5f64 6562 7567 2866 2267 6574      _debug(f"get
+000184c0: 5f61 6273 7472 6163 743a 206d 616e 7061  _abstract: manpa
+000184d0: 6765 2066 6f72 206f 7063 6f64 6520 7b6f  ge for opcode {o
+000184e0: 7063 6f64 657d 2068 6173 206e 6f20 2320  pcode} has no # 
+000184f0: 4162 7374 7261 6374 2074 6167 2229 0a20  Abstract tag"). 
+00018500: 2020 2020 2020 2069 7420 3d20 6974 6572         it = iter
+00018510: 286c 696e 6573 290a 2020 2020 2020 2020  (lines).        
+00018520: 666f 7220 6c69 6e65 2069 6e20 6974 3a0a  for line in it:.
+00018530: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
+00018540: 203d 206c 696e 652e 7374 7269 7028 290a   = line.strip().
+00018550: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00018560: 696e 653a 0a20 2020 2020 2020 2020 2020  ine:.           
+00018570: 2020 2020 2069 6620 6c69 6e65 2e73 7461       if line.sta
+00018580: 7274 7377 6974 6828 2223 2229 2061 6e64  rtswith("#") and
+00018590: 206c 696e 652e 7370 6c69 7428 2222 295b   line.split("")[
+000185a0: 2d31 5d20 3d3d 206f 7063 6f64 653a 0a20  -1] == opcode:. 
+000185b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000185c0: 2020 2062 7265 616b 0a20 2020 2020 2020     break.       
+000185d0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000185e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000185f0: 2020 2072 6169 7365 2050 6172 7365 4572     raise ParseEr
+00018600: 726f 7228 6622 4578 7065 6374 6564 2074  ror(f"Expected t
+00018610: 6974 6c65 2c20 676f 7420 7b6c 696e 657d  itle, got {line}
+00018620: 2229 0a20 2020 2020 2020 2066 6f72 206c  ").        for l
+00018630: 696e 6520 696e 2069 743a 0a20 2020 2020  ine in it:.     
+00018640: 2020 2020 2020 206c 696e 6520 3d20 6c69         line = li
+00018650: 6e65 2e73 7472 6970 2829 0a20 2020 2020  ne.strip().     
+00018660: 2020 2020 2020 2069 6620 6c69 6e65 3a0a         if line:.
+00018670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018680: 6162 7374 7261 6374 203d 206c 696e 6520  abstract = line 
+00018690: 6966 206e 6f74 206c 696e 652e 7374 6172  if not line.star
+000186a0: 7473 7769 7468 2822 2322 2920 656c 7365  tswith("#") else
+000186b0: 2022 220a 2020 2020 2020 2020 2020 2020   "".            
+000186c0: 2020 2020 6272 6561 6b0a 0a20 2020 2072      break..    r
+000186d0: 6574 7572 6e20 4d61 6e50 6167 6528 7379  eturn ManPage(sy
+000186e0: 6e74 6178 6573 3d73 796e 7461 786c 696e  ntaxes=syntaxlin
+000186f0: 6573 2c20 6162 7374 7261 6374 3d61 6273  es, abstract=abs
+00018700: 7472 6163 7429 0a0a 0a64 6566 205f 646f  tract)...def _do
+00018710: 6373 5f67 656e 6572 6174 655f 696e 6465  cs_generate_inde
+00018720: 7828 696e 6465 783a 204d 6169 6e49 6e64  x(index: MainInd
+00018730: 6578 2c20 6f75 7466 696c 653a 2050 6174  ex, outfile: Pat
+00018740: 6829 202d 3e20 4e6f 6e65 3a0a 2020 2020  h) -> None:.    
+00018750: 2222 220a 2020 2020 4765 6e65 7261 7465  """.    Generate
+00018760: 2061 6e20 696e 6465 7820 666f 7220 7468   an index for th
+00018770: 6520 646f 6375 6d65 6e74 6174 696f 6e0a  e documentation.
+00018780: 0a20 2020 2041 7267 756d 656e 7473 3a0a  .    Arguments:.
+00018790: 2020 2020 2020 2020 696e 6465 783a 2074          index: t
+000187a0: 6865 206d 6169 6e20 696e 6465 780a 2020  he main index.  
+000187b0: 2020 2020 2020 6f75 7466 696c 653a 2074        outfile: t
+000187c0: 6865 2070 6174 6820 746f 2077 7269 7465  he path to write
+000187d0: 2074 6865 2069 6e64 6578 2074 6f20 286e   the index to (n
+000187e0: 6f72 6d61 6c6c 7920 616e 2069 6e64 6578  ormally an index
+000187f0: 2e6d 6420 6669 6c65 290a 2020 2020 2222  .md file).    ""
+00018800: 220a 2020 2020 6c69 6e65 733a 206c 6973  ".    lines: lis
+00018810: 745b 7374 725d 203d 205b 5d0a 2020 2020  t[str] = [].    
+00018820: 5f20 3d20 6c69 6e65 732e 6170 7065 6e64  _ = lines.append
+00018830: 0a20 2020 205f 2822 2320 506c 7567 696e  .    _("# Plugin
+00018840: 735c 6e22 290a 2020 2020 706c 7567 696e  s\n").    plugin
+00018850: 7320 3d20 736f 7274 6564 2869 6e64 6578  s = sorted(index
+00018860: 2e70 6c75 6769 6e73 2e76 616c 7565 7328  .plugins.values(
+00018870: 292c 206b 6579 3d6c 616d 6264 6120 706c  ), key=lambda pl
+00018880: 7567 696e 3a20 706c 7567 696e 2e6e 616d  ugin: plugin.nam
+00018890: 6529 0a20 2020 2066 6f72 2070 6c75 6769  e).    for plugi
+000188a0: 6e20 696e 2070 6c75 6769 6e73 3a0a 2020  n in plugins:.  
+000188b0: 2020 2020 2020 5f28 6622 2323 207b 706c        _(f"## {pl
+000188c0: 7567 696e 2e6e 616d 657d 5c6e 2229 0a20  ugin.name}\n"). 
+000188d0: 2020 2020 2020 205f 2870 6c75 6769 6e2e         _(plugin.
+000188e0: 7368 6f72 745f 6465 7363 7269 7074 696f  short_descriptio
+000188f0: 6e20 2b20 275c 6e27 290a 2020 2020 2020  n + '\n').      
+00018900: 2020 6f70 636f 6465 7320 3d20 736f 7274    opcodes = sort
+00018910: 6564 2870 6c75 6769 6e2e 6f70 636f 6465  ed(plugin.opcode
+00018920: 7329 0a20 2020 2020 2020 2066 6f72 206f  s).        for o
+00018930: 7063 6f64 6520 696e 206f 7063 6f64 6573  pcode in opcodes
+00018940: 3a0a 2020 2020 2020 2020 2020 2020 6d61  :.            ma
+00018950: 6e70 6167 6520 3d20 706c 7567 696e 2e6d  npage = plugin.m
+00018960: 616e 7061 6765 286f 7063 6f64 6529 0a20  anpage(opcode). 
+00018970: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00018980: 7420 6d61 6e70 6167 653a 0a20 2020 2020  t manpage:.     
+00018990: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
+000189a0: 6728 6622 6f70 636f 6465 207b 6f70 636f  g(f"opcode {opco
+000189b0: 6465 7d20 6861 7320 6e6f 206d 616e 7061  de} has no manpa
+000189c0: 6765 2229 0a20 2020 2020 2020 2020 2020  ge").           
+000189d0: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
+000189e0: 2020 2020 2020 2020 2020 7061 7273 6564            parsed
+000189f0: 6d61 6e70 6167 6520 3d20 5f6d 616e 7061  manpage = _manpa
+00018a00: 6765 5f70 6172 7365 286d 616e 7061 6765  ge_parse(manpage
+00018a10: 2c20 6f70 636f 6465 290a 2020 2020 2020  , opcode).      
+00018a20: 2020 2020 2020 6966 206e 6f74 2070 6172        if not par
+00018a30: 7365 646d 616e 7061 6765 206f 7220 6e6f  sedmanpage or no
+00018a40: 7420 7061 7273 6564 6d61 6e70 6167 652e  t parsedmanpage.
+00018a50: 6162 7374 7261 6374 3a0a 2020 2020 2020  abstract:.      
+00018a60: 2020 2020 2020 2020 2020 5f65 7272 6f72            _error
+00018a70: 6d73 6728 6622 436f 756c 6420 6e6f 7420  msg(f"Could not 
+00018a80: 6765 7420 6162 7374 7261 6374 2066 6f72  get abstract for
+00018a90: 206f 7063 6f64 6520 7b6f 7063 6f64 657d   opcode {opcode}
+00018aa0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+00018ab0: 2020 2063 6f6e 7469 6e75 650a 2020 2020     continue.    
+00018ac0: 2020 2020 2020 2020 5f28 6622 2020 2a20          _(f"  * 
+00018ad0: 5b7b 6f70 636f 6465 7d5d 286f 7063 6f64  [{opcode}](opcod
+00018ae0: 6573 2f7b 6f70 636f 6465 7d2e 6d64 293a  es/{opcode}.md):
+00018af0: 207b 7061 7273 6564 6d61 6e70 6167 652e   {parsedmanpage.
+00018b00: 6162 7374 7261 6374 7d22 290a 0a20 2020  abstract}")..   
+00018b10: 2020 2020 205f 2822 2229 0a20 2020 2077       _("").    w
+00018b20: 6974 6820 6f70 656e 286f 7574 6669 6c65  ith open(outfile
+00018b30: 2c20 2277 2229 2061 7320 663a 0a20 2020  , "w") as f:.   
+00018b40: 2020 2020 2066 2e77 7269 7465 2822 5c6e       f.write("\n
+00018b50: 222e 6a6f 696e 286c 696e 6573 2929 0a0a  ".join(lines))..
+00018b60: 0a23 2323 2323 2323 2323 2323 2323 2323  .###############
+00018b70: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00018b80: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00018b90: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00018ba0: 0a23 2020 2020 2020 2020 2020 2020 2020  .#              
+00018bb0: 2020 2020 2020 2020 2020 5375 6263 6f6d            Subcom
+00018bc0: 6d61 6e64 7320 2020 2020 2020 2020 2020  mands           
+00018bd0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00018be0: 0a23 2323 2323 2323 2323 2323 2323 2323  .###############
+00018bf0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00018c00: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00018c10: 2323 2323 2323 2323 2323 2323 2323 2323  ################
+00018c20: 0a0a 0a64 6566 2063 6d64 5f6c 6973 7428  ...def cmd_list(
+00018c30: 6d61 696e 696e 6465 783a 204d 6169 6e49  mainindex: MainI
+00018c40: 6e64 6578 2c20 6172 6773 2920 2d3e 2062  ndex, args) -> b
+00018c50: 6f6f 6c3a 0a20 2020 2022 2222 0a20 2020  ool:.    """.   
+00018c60: 204c 6973 7473 2061 6c6c 2070 6c75 6769   Lists all plugi
+00018c70: 6e73 2061 7661 696c 6162 6c65 2066 6f72  ns available for
+00018c80: 2064 6f77 6e6c 6f61 640a 2020 2020 2222   download.    ""
+00018c90: 220a 2020 2020 6966 2061 7267 732e 6a73  ".    if args.js
+00018ca0: 6f6e 3a0a 2020 2020 2020 2020 6420 3d20  on:.        d = 
+00018cb0: 6d61 696e 696e 6465 782e 6c69 7374 5f70  mainindex.list_p
+00018cc0: 6c75 6769 6e73 5f61 735f 6469 6374 2869  lugins_as_dict(i
+00018cd0: 6e73 7461 6c6c 6564 3d61 7267 732e 696e  nstalled=args.in
+00018ce0: 7374 616c 6c65 6429 0a20 2020 2020 2020  stalled).       
+00018cf0: 2069 6620 6172 6773 2e6f 7574 6669 6c65   if args.outfile
+00018d00: 3a0a 2020 2020 2020 2020 2020 2020 7769  :.            wi
+00018d10: 7468 206f 7065 6e28 6172 6773 2e6f 7574  th open(args.out
+00018d20: 6669 6c65 2c20 2277 2229 2061 7320 663a  file, "w") as f:
+00018d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018d40: 206a 736f 6e2e 6475 6d70 2864 2c20 662c   json.dump(d, f,
+00018d50: 2069 6e64 656e 743d 3229 0a20 2020 2020   indent=2).     
+00018d60: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00018d70: 2020 2020 2070 7269 6e74 286a 736f 6e2e       print(json.
+00018d80: 6475 6d70 7328 642c 2069 6e64 656e 743d  dumps(d, indent=
+00018d90: 3229 290a 2020 2020 2020 2020 7265 7475  2)).        retu
+00018da0: 726e 2054 7275 650a 2020 2020 656c 7365  rn True.    else
+00018db0: 3a0a 2020 2020 2020 2020 6865 6164 6572  :.        header
+00018dc0: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+00018dd0: 6966 2061 7267 732e 6f6e 656c 696e 6520  if args.oneline 
+00018de0: 6f72 2061 7267 732e 6e61 6d65 6f6e 6c79  or args.nameonly
+00018df0: 206f 7220 6172 6773 2e6e 6f68 6561 6465   or args.noheade
+00018e00: 723a 0a20 2020 2020 2020 2020 2020 2068  r:.            h
+00018e10: 6561 6465 7220 3d20 4661 6c73 650a 2020  eader = False.  
+00018e20: 2020 2020 2020 7265 7475 726e 206d 6169        return mai
+00018e30: 6e69 6e64 6578 2e6c 6973 745f 706c 7567  nindex.list_plug
+00018e40: 696e 7328 696e 7374 616c 6c65 643d 6172  ins(installed=ar
+00018e50: 6773 2e69 6e73 7461 6c6c 6564 2c20 6e61  gs.installed, na
+00018e60: 6d65 6f6e 6c79 3d61 7267 732e 6e61 6d65  meonly=args.name
+00018e70: 6f6e 6c79 2c20 6f6e 656c 696e 653d 6172  only, oneline=ar
+00018e80: 6773 2e6f 6e65 6c69 6e65 2c0a 2020 2020  gs.oneline,.    
+00018e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018eb0: 2020 7570 6772 6164 6561 626c 653d 6172    upgradeable=ar
+00018ec0: 6773 2e75 7067 7261 6465 6162 6c65 2c20  gs.upgradeable, 
+00018ed0: 6865 6164 6572 3d68 6561 6465 7229 0a0a  header=header)..
+00018ee0: 0a64 6566 2063 6d64 5f73 686f 7728 696e  .def cmd_show(in
+00018ef0: 6465 783a 204d 6169 6e49 6e64 6578 2c20  dex: MainIndex, 
+00018f00: 6172 6773 2920 2d3e 2062 6f6f 6c3a 0a20  args) -> bool:. 
+00018f10: 2020 2022 2222 0a20 2020 2052 6574 7572     """.    Retur
+00018f20: 6e73 2054 7275 6520 6f6e 2073 7563 6365  ns True on succe
+00018f30: 7373 0a20 2020 2022 2222 0a20 2020 2072  ss.    """.    r
+00018f40: 6574 7572 6e20 696e 6465 782e 7368 6f77  eturn index.show
+00018f50: 5f70 6c75 6769 6e28 6172 6773 2e70 6c75  _plugin(args.plu
+00018f60: 6769 6e29 0a0a 0a64 6566 2063 6d64 5f72  gin)...def cmd_r
+00018f70: 6d28 696e 6465 783a 204d 6169 6e49 6e64  m(index: MainInd
+00018f80: 6578 2c20 6172 6773 2920 2d3e 2062 6f6f  ex, args) -> boo
+00018f90: 6c3a 0a20 2020 2022 2222 0a20 2020 2052  l:.    """.    R
+00018fa0: 656d 6f76 6520 6120 706c 7567 696e 0a20  emove a plugin. 
+00018fb0: 2020 2022 2222 0a20 2020 2065 7272 6f72     """.    error
+00018fc0: 7320 3d20 300a 2020 2020 666f 7220 706c  s = 0.    for pl
+00018fd0: 7567 696e 6e61 6d65 2069 6e20 6172 6773  uginname in args
+00018fe0: 2e70 6c75 6769 6e3a 0a20 2020 2020 2020  .plugin:.       
+00018ff0: 2070 6c75 6764 6566 203d 2069 6e64 6578   plugdef = index
+00019000: 2e70 6c75 6769 6e73 2e67 6574 2870 6c75  .plugins.get(plu
+00019010: 6769 6e6e 616d 6529 0a20 2020 2020 2020  ginname).       
+00019020: 2069 6620 6e6f 7420 706c 7567 6465 663a   if not plugdef:
+00019030: 0a20 2020 2020 2020 2020 2020 205f 6572  .            _er
+00019040: 726f 726d 7367 2866 2250 6c75 6769 6e20  rormsg(f"Plugin 
+00019050: 7b70 6c75 6769 6e6e 616d 657d 206e 6f74  {pluginname} not
+00019060: 2064 6566 696e 6564 2e20 4b6e 6f77 6e20   defined. Known 
+00019070: 706c 7567 696e 733a 207b 272c 2027 2e6a  plugins: {', '.j
+00019080: 6f69 6e28 696e 6465 782e 706c 7567 696e  oin(index.plugin
+00019090: 732e 6b65 7973 2829 297d 2229 0a20 2020  s.keys())}").   
+000190a0: 2020 2020 2020 2020 2065 7272 6f72 7320           errors 
+000190b0: 2b3d 2031 0a20 2020 2020 2020 2020 2020  += 1.           
+000190c0: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+000190d0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+000190e0: 2020 2069 6e64 6578 2e75 6e69 6e73 7461     index.uninsta
+000190f0: 6c6c 5f70 6c75 6769 6e28 706c 7567 6465  ll_plugin(plugde
+00019100: 6629 0a20 2020 2020 2020 2065 7863 6570  f).        excep
+00019110: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+00019120: 3a0a 2020 2020 2020 2020 2020 2020 5f65  :.            _e
+00019130: 7272 6f72 6d73 6728 7374 7228 6529 290a  rrormsg(str(e)).
+00019140: 2020 2020 2020 2020 2020 2020 6572 726f              erro
+00019150: 7273 202b 3d20 310a 2020 2020 7265 7475  rs += 1.    retu
+00019160: 726e 2065 7272 6f72 7320 3d3d 2030 0a0a  rn errors == 0..
+00019170: 0a64 6566 2063 6d64 5f69 6e73 7461 6c6c  .def cmd_install
+00019180: 2869 6e64 6578 3a20 4d61 696e 496e 6465  (index: MainInde
+00019190: 782c 2061 7267 7329 202d 3e20 626f 6f6c  x, args) -> bool
+000191a0: 3a0a 2020 2020 2222 220a 2020 2020 496e  :.    """.    In
+000191b0: 7374 616c 6c20 6f72 2075 7067 7261 6465  stall or upgrade
+000191c0: 2061 2070 6c75 6769 6e0a 0a20 2020 2049   a plugin..    I
+000191d0: 6620 7468 6520 706c 7567 696e 2069 7320  f the plugin is 
+000191e0: 696e 7374 616c 6c65 6420 6275 7420 7769  installed but wi
+000191f0: 7468 2061 2070 7269 6f72 2076 6572 7369  th a prior versi
+00019200: 6f6e 2c20 6974 2077 696c 6c0a 2020 2020  on, it will.    
+00019210: 6265 2075 7067 7261 6465 642e 2049 6620  be upgraded. If 
+00019220: 6974 2069 7320 696e 7374 616c 6c65 6420  it is installed 
+00019230: 6275 7420 7769 7468 2061 6e20 756e 6b6e  but with an unkn
+00019240: 6f77 6e20 7665 7273 696f 6e2c 0a20 2020  own version,.   
+00019250: 2069 6e73 7461 6c6c 6174 696f 6e20 6973   installation is
+00019260: 206f 6e6c 7920 7065 7266 6f72 6d65 6420   only performed 
+00019270: 6966 2074 6865 202d 2d66 6f72 6365 2066  if the --force f
+00019280: 6c61 6720 6973 2067 6976 656e 0a0a 2020  lag is given..  
+00019290: 2020 5265 7475 726e 7320 5472 7565 2069    Returns True i
+000192a0: 6620 7375 6363 6573 730a 0a20 2020 2046  f success..    F
+000192b0: 6c61 6773 3a0a 2020 2020 2020 2020 2d2d  lags:.        --
+000192c0: 666f 7263 6520 202d 2066 6f72 6365 2069  force  - force i
+000192d0: 6e73 7461 6c6c 6174 696f 6e20 6576 656e  nstallation even
+000192e0: 2069 6620 706c 7567 696e 2069 7320 616c   if plugin is al
+000192f0: 7265 6164 7920 696e 7374 616c 6c65 640a  ready installed.
+00019300: 0a20 2020 2041 7267 733a 0a20 2020 2020  .    Args:.     
+00019310: 2020 2070 6c75 6769 6e20 2020 2d20 6e61     plugin   - na
+00019320: 6d65 206f 6620 7468 6520 706c 7567 696e  me of the plugin
+00019330: 2074 6f20 696e 7374 616c 6c0a 2020 2020   to install.    
+00019340: 2222 220a 2020 2020 616c 6c70 6c75 6769  """.    allplugi
+00019350: 6e73 3a20 6c69 7374 5b50 6c75 6769 6e5d  ns: list[Plugin]
+00019360: 203d 205b 5d0a 2020 2020 666f 7220 7061   = [].    for pa
+00019370: 7474 6572 6e20 696e 2061 7267 732e 706c  ttern in args.pl
+00019380: 7567 696e 733a 0a20 2020 2020 2020 206d  ugins:.        m
+00019390: 6174 6368 6564 203d 205b 706c 7567 696e  atched = [plugin
+000193a0: 2066 6f72 206e 616d 652c 2070 6c75 6769   for name, plugi
+000193b0: 6e20 696e 2069 6e64 6578 2e70 6c75 6769  n in index.plugi
+000193c0: 6e73 2e69 7465 6d73 2829 0a20 2020 2020  ns.items().     
+000193d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000193e0: 2066 6e6d 6174 6368 2e66 6e6d 6174 6368   fnmatch.fnmatch
+000193f0: 286e 616d 652c 2070 6174 7465 726e 295d  (name, pattern)]
+00019400: 0a20 2020 2020 2020 2069 6620 6d61 7463  .        if matc
+00019410: 6865 643a 0a20 2020 2020 2020 2020 2020  hed:.           
+00019420: 2061 6c6c 706c 7567 696e 732e 6578 7465   allplugins.exte
+00019430: 6e64 286d 6174 6368 6564 290a 2020 2020  nd(matched).    
+00019440: 6966 206e 6f74 2061 6c6c 706c 7567 696e  if not allplugin
+00019450: 733a 0a20 2020 2020 2020 205f 6572 726f  s:.        _erro
+00019460: 726d 7367 2822 4e6f 2070 6c75 6769 6e73  rmsg("No plugins
+00019470: 206d 6174 6368 6564 2229 0a20 2020 2020   matched").     
+00019480: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+00019490: 2020 2020 616c 6c70 6c75 6769 6e73 203d      allplugins =
+000194a0: 206c 6973 7428 7365 7428 616c 6c70 6c75   list(set(allplu
+000194b0: 6769 6e73 2929 2020 2320 7265 6d6f 7665  gins))  # remove
+000194c0: 2064 7570 6c69 6361 7465 730a 2020 2020   duplicates.    
+000194d0: 6572 726f 7273 5f66 6f75 6e64 203d 2046  errors_found = F
+000194e0: 616c 7365 0a20 2020 2066 6f72 2070 6c75  alse.    for plu
+000194f0: 6769 6e20 696e 2061 6c6c 706c 7567 696e  gin in allplugin
+00019500: 733a 0a20 2020 2020 2020 2070 6c75 6769  s:.        plugi
+00019510: 6e69 6e66 6f20 3d20 696e 6465 782e 696e  ninfo = index.in
+00019520: 7374 616c 6c65 645f 706c 7567 696e 5f69  stalled_plugin_i
+00019530: 6e66 6f28 706c 7567 696e 290a 2020 2020  nfo(plugin).    
+00019540: 2020 2020 6966 206e 6f74 2070 6c75 6769      if not plugi
+00019550: 6e69 6e66 6f3a 0a20 2020 2020 2020 2020  ninfo:.         
+00019560: 2020 2023 204e 6f74 2069 6e73 7461 6c6c     # Not install
+00019570: 6564 0a20 2020 2020 2020 2020 2020 205f  ed.            _
+00019580: 6465 6275 6728 6622 506c 7567 696e 207b  debug(f"Plugin {
+00019590: 706c 7567 696e 2e6e 616d 657d 206e 6f74  plugin.name} not
+000195a0: 2069 6e73 7461 6c6c 6564 2c20 696e 7374   installed, inst
+000195b0: 616c 6c69 6e67 2229 0a20 2020 2020 2020  alling").       
+000195c0: 2065 6c69 6620 6e6f 7420 706c 7567 696e   elif not plugin
+000195d0: 696e 666f 2e76 6572 7369 6f6e 7374 7220  info.versionstr 
+000195e0: 6f72 2070 6c75 6769 6e69 6e66 6f2e 7665  or plugininfo.ve
+000195f0: 7273 696f 6e73 7472 203d 3d20 554e 4b4e  rsionstr == UNKN
+00019600: 4f57 4e5f 5645 5253 494f 4e3a 0a20 2020  OWN_VERSION:.   
+00019610: 2020 2020 2020 2020 2023 2070 6c75 6769           # plugi
+00019620: 6e20 6973 2069 6e73 7461 6c6c 6564 2062  n is installed b
+00019630: 7574 2077 6974 686f 7574 2061 2063 6f72  ut without a cor
+00019640: 7265 7370 6f6e 6469 6e67 2069 6e73 7461  responding insta
+00019650: 6c6c 206d 616e 6966 6573 742e 0a20 2020  ll manifest..   
+00019660: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00019670: 6172 6773 2e66 6f72 6365 3a0a 2020 2020  args.force:.    
+00019680: 2020 2020 2020 2020 2020 2020 5f65 7272              _err
+00019690: 6f72 6d73 6728 6622 506c 7567 696e 207b  ormsg(f"Plugin {
+000196a0: 706c 7567 696e 2e6e 616d 657d 2069 7320  plugin.name} is 
+000196b0: 616c 7265 6164 7920 696e 7374 616c 6c65  already installe
+000196c0: 642e 2055 7365 202d 2d66 6f72 6365 2074  d. Use --force t
+000196d0: 6f20 666f 7263 6520 7265 696e 7374 616c  o force reinstal
+000196e0: 6c22 290a 2020 2020 2020 2020 2020 2020  l").            
+000196f0: 2020 2020 6572 726f 7273 5f66 6f75 6e64      errors_found
+00019700: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+00019710: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
+00019720: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00019730: 2020 2020 2020 2020 2020 2069 6620 706c             if pl
+00019740: 7567 696e 2e76 6572 7369 6f6e 7475 706c  ugin.versiontupl
+00019750: 6520 3c3d 2070 6c75 6769 6e69 6e66 6f2e  e <= plugininfo.
+00019760: 7665 7273 696f 6e74 7570 6c65 3a0a 2020  versiontuple:.  
+00019770: 2020 2020 2020 2020 2020 2020 2020 5f64                _d
+00019780: 6562 7567 2866 2250 6c75 6769 6e20 7b70  ebug(f"Plugin {p
+00019790: 6c75 6769 6e2e 6e61 6d65 7d2c 2076 6572  lugin.name}, ver
+000197a0: 7369 6f6e 3a20 7b70 6c75 6769 6e2e 7665  sion: {plugin.ve
+000197b0: 7273 696f 6e7d 2229 0a20 2020 2020 2020  rsion}").       
+000197c0: 2020 2020 2020 2020 205f 6465 6275 6728           _debug(
+000197d0: 6622 2020 2020 496e 7374 616c 6c65 6420  f"    Installed 
+000197e0: 7665 7273 696f 6e3a 207b 706c 7567 696e  version: {plugin
+000197f0: 696e 666f 2e76 6572 7369 6f6e 7374 727d  info.versionstr}
+00019800: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+00019810: 2020 205f 696e 666f 2866 2249 6e73 7461     _info(f"Insta
+00019820: 6c6c 6564 2076 6572 7369 6f6e 206f 6620  lled version of 
+00019830: 706c 7567 696e 207b 706c 7567 696e 2e6e  plugin {plugin.n
+00019840: 616d 657d 2069 7320 7570 2d74 6f2d 6461  ame} is up-to-da
+00019850: 7465 2229 0a20 2020 2020 2020 2020 2020  te").           
+00019860: 2020 2020 2065 7272 6f72 735f 666f 756e       errors_foun
+00019870: 6420 3d20 5472 7565 0a20 2020 2020 2020  d = True.       
+00019880: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00019890: 650a 2020 2020 2020 2020 2020 2020 5f69  e.            _i
+000198a0: 6e66 6f28 6622 5570 6461 7469 6e67 2070  nfo(f"Updating p
+000198b0: 6c75 6769 6e20 7b70 6c75 6769 6e2e 6e61  lugin {plugin.na
+000198c0: 6d65 7d3a 2022 0a20 2020 2020 2020 2020  me}: ".         
+000198d0: 2020 2020 2020 2020 2066 227b 706c 7567           f"{plug
+000198e0: 696e 696e 666f 2e76 6572 7369 6f6e 7374  ininfo.versionst
+000198f0: 727d 202d 3e20 7b70 6c75 6769 6e2e 7665  r} -> {plugin.ve
+00019900: 7273 696f 6e7d 2229 0a20 2020 2020 2020  rsion}").       
+00019910: 2065 7272 6f72 203d 2069 6e64 6578 2e69   error = index.i
+00019920: 6e73 7461 6c6c 5f70 6c75 6769 6e28 706c  nstall_plugin(pl
+00019930: 7567 696e 290a 2020 2020 2020 2020 6966  ugin).        if
+00019940: 2065 7272 6f72 3a0a 2020 2020 2020 2020   error:.        
+00019950: 2020 2020 5f64 6562 7567 2866 2245 7272      _debug(f"Err
+00019960: 6f72 7320 7768 696c 6520 696e 7374 616c  ors while instal
+00019970: 6c69 6e67 207b 706c 7567 696e 2e6e 616d  ling {plugin.nam
+00019980: 657d 2229 0a20 2020 2020 2020 2020 2020  e}").           
+00019990: 205f 6572 726f 726d 7367 2865 7272 6f72   _errormsg(error
+000199a0: 290a 2020 2020 7265 7475 726e 2046 616c  ).    return Fal
+000199b0: 7365 2069 6620 6572 726f 7273 5f66 6f75  se if errors_fou
+000199c0: 6e64 2065 6c73 6520 5472 7565 0a0a 0a64  nd else True...d
+000199d0: 6566 205f 6f70 656e 5f69 6e5f 6465 6661  ef _open_in_defa
+000199e0: 756c 745f 6170 706c 6963 6174 696f 6e28  ult_application(
+000199f0: 7061 7468 3a20 7374 7229 3a0a 2020 2020  path: str):.    
+00019a00: 2222 220a 2020 2020 4f70 656e 2070 6174  """.    Open pat
+00019a10: 6820 7769 7468 2074 6865 2061 7070 2064  h with the app d
+00019a20: 6566 696e 6564 2074 6f20 6861 6e64 6c65  efined to handle
+00019a30: 2069 7420 6279 2074 6865 2075 7365 720a   it by the user.
+00019a40: 2020 2020 6174 2074 6865 206f 7320 6c65      at the os le
+00019a50: 7665 6c20 2878 6467 2d6f 7065 6e20 696e  vel (xdg-open in
+00019a60: 206c 696e 7578 2c20 7374 6172 7420 696e   linux, start in
+00019a70: 2077 696e 2c20 6f70 656e 2069 6e20 6f73   win, open in os
+00019a80: 7829 0a20 2020 2022 2222 0a20 2020 2070  x).    """.    p
+00019a90: 6c61 7466 6f72 6d20 3d20 7379 732e 706c  latform = sys.pl
+00019aa0: 6174 666f 726d 0a20 2020 2069 6620 706c  atform.    if pl
+00019ab0: 6174 666f 726d 203d 3d20 276c 696e 7578  atform == 'linux
+00019ac0: 273a 0a20 2020 2020 2020 2073 7562 7072  ':.        subpr
+00019ad0: 6f63 6573 732e 6361 6c6c 285b 2278 6467  ocess.call(["xdg
+00019ae0: 2d6f 7065 6e22 2c20 7061 7468 5d29 0a20  -open", path]). 
+00019af0: 2020 2065 6c69 6620 706c 6174 666f 726d     elif platform
+00019b00: 203d 3d20 2277 696e 3332 223a 0a20 2020   == "win32":.   
+00019b10: 2020 2020 206f 732e 7374 6172 7466 696c       os.startfil
+00019b20: 6528 7061 7468 2920 2023 2074 7970 653a  e(path)  # type:
+00019b30: 2069 676e 6f72 650a 2020 2020 656c 6966   ignore.    elif
+00019b40: 2070 6c61 7466 6f72 6d20 3d3d 2022 6461   platform == "da
+00019b50: 7277 696e 223a 0a20 2020 2020 2020 2073  rwin":.        s
+00019b60: 7562 7072 6f63 6573 732e 6361 6c6c 285b  ubprocess.call([
+00019b70: 226f 7065 6e22 2c20 7061 7468 5d29 0a20  "open", path]). 
+00019b80: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00019b90: 2072 6169 7365 2052 756e 7469 6d65 4572   raise RuntimeEr
+00019ba0: 726f 7228 6622 706c 6174 666f 726d 207b  ror(f"platform {
+00019bb0: 706c 6174 666f 726d 7d20 6e6f 7420 7375  platform} not su
+00019bc0: 7070 6f72 7465 6422 290a 0a0a 6465 6620  pported")...def 
+00019bd0: 636d 645f 6d61 6e28 6964 783a 204d 6169  cmd_man(idx: Mai
+00019be0: 6e49 6e64 6578 2c20 6172 6773 2920 2d3e  nIndex, args) ->
+00019bf0: 2062 6f6f 6c3a 0a20 2020 2022 2222 0a20   bool:.    """. 
+00019c00: 2020 2053 686f 7720 6d61 6e20 7061 6765     Show man page
+00019c10: 2066 6f72 2061 6e20 696e 7374 616c 6c65   for an installe
+00019c20: 6420 6f70 636f 6465 0a0a 2020 2020 5265  d opcode..    Re
+00019c30: 7475 726e 7320 5472 7565 2069 6620 7375  turns True if su
+00019c40: 6363 6573 730a 0a20 2020 2046 6c61 6773  ccess..    Flags
+00019c50: 3a0a 2020 2020 2020 2020 2d2d 6874 6d6c  :.        --html
+00019c60: 2020 2020 2020 2d20 5573 6520 2e68 746d        - Use .htm
+00019c70: 6c20 6669 6c65 2069 6e73 7465 6164 206f  l file instead o
+00019c80: 6620 2e6d 6420 7665 7273 696f 6e0a 2020  f .md version.  
+00019c90: 2020 2020 2020 2d2d 7061 7468 2020 2020        --path    
+00019ca0: 2020 2d20 446f 206e 6f74 206f 7065 6e20    - Do not open 
+00019cb0: 6d61 6e70 6167 652c 206f 6e6c 7920 7072  manpage, only pr
+00019cc0: 696e 7420 7468 6520 7061 7468 0a20 2020  int the path.   
+00019cd0: 2020 2020 202d 2d65 7874 6572 6e61 6c20       --external 
+00019ce0: 202d 204f 7065 6e20 6669 6c65 2069 6e20   - Open file in 
+00019cf0: 6578 7465 726e 616c 2061 7070 2e20 5468  external app. Th
+00019d00: 6973 2069 7320 6f6e 6c79 2075 7365 6420  is is only used 
+00019d10: 7768 656e 206f 7065 6e69 6e67 2074 6865  when opening the
+00019d20: 206d 6172 6b64 6f77 6e20 7061 6765 2e20   markdown page. 
+00019d30: 5769 7468 6f75 7420 7468 6973 0a20 2020  Without this.   
+00019d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019d50: 2020 2074 6865 206d 6172 6b64 6f77 6e20     the markdown 
+00019d60: 6973 206f 7574 7075 7420 746f 2074 6865  is output to the
+00019d70: 2074 6572 6d69 6e61 6c0a 2020 2020 2020   terminal.      
+00019d80: 2020 6f70 636f 6465 2020 2020 2020 2d20    opcode      - 
+00019d90: 6f70 636f 6465 2873 2920 746f 2067 6574  opcode(s) to get
+00019da0: 206d 616e 7061 6765 206f 662e 2043 616e   manpage of. Can
+00019db0: 2062 6520 6120 7769 6c64 6361 7264 0a20   be a wildcard. 
+00019dc0: 2020 2022 2222 0a20 2020 206f 7063 6f64     """.    opcod
+00019dd0: 6573 3a20 6c69 7374 5b4f 7063 6f64 655d  es: list[Opcode]
+00019de0: 203d 205b 5d0a 2020 2020 6966 2061 7267   = [].    if arg
+00019df0: 732e 6874 6d6c 2061 6e64 206e 6f74 2061  s.html and not a
+00019e00: 7267 732e 6d61 726b 646f 776e 3a0a 2020  rgs.markdown:.  
+00019e10: 2020 2020 2020 666d 7420 3d20 2268 746d        fmt = "htm
+00019e20: 6c22 0a20 2020 2065 6c73 653a 0a20 2020  l".    else:.   
+00019e30: 2020 2020 2066 6d74 203d 2022 6d61 726b       fmt = "mark
+00019e40: 646f 776e 220a 2020 2020 666f 7220 7061  down".    for pa
+00019e50: 7474 6572 6e20 696e 2061 7267 732e 6f70  ttern in args.op
+00019e60: 636f 6465 3a0a 2020 2020 2020 2020 6f70  code:.        op
+00019e70: 636f 6465 732e 6578 7465 6e64 286f 7063  codes.extend(opc
+00019e80: 6f64 6520 666f 7220 6f70 636f 6465 2069  ode for opcode i
+00019e90: 6e20 6964 782e 6465 6669 6e65 645f 6f70  n idx.defined_op
+00019ea0: 636f 6465 7328 290a 2020 2020 2020 2020  codes().        
+00019eb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00019ec0: 6620 666e 6d61 7463 682e 666e 6d61 7463  f fnmatch.fnmatc
+00019ed0: 6828 6f70 636f 6465 2e6e 616d 652c 2070  h(opcode.name, p
+00019ee0: 6174 7465 726e 2929 0a20 2020 2069 6620  attern)).    if 
+00019ef0: 6e6f 7420 6f70 636f 6465 733a 0a20 2020  not opcodes:.   
+00019f00: 2020 2020 2023 206f 7065 6e20 7468 6520       # open the 
+00019f10: 696e 6465 780a 2020 2020 2020 2020 6874  index.        ht
+00019f20: 6d6c 6964 7820 3d20 5249 5353 4554 5f47  mlidx = RISSET_G
+00019f30: 454e 4552 4154 4544 5f44 4f43 5320 2f20  ENERATED_DOCS / 
+00019f40: 2273 6974 6522 202f 2022 696e 6465 782e  "site" / "index.
+00019f50: 6874 6d6c 220a 2020 2020 2020 2020 6966  html".        if
+00019f60: 206e 6f74 2068 746d 6c69 6478 2e65 7869   not htmlidx.exi
+00019f70: 7374 7328 293a 0a20 2020 2020 2020 2020  sts():.         
+00019f80: 2020 205f 6572 726f 726d 7367 2866 2249     _errormsg(f"I
+00019f90: 6e64 6578 2066 696c 6520 666f 7220 7468  ndex file for th
+00019fa0: 6520 646f 6375 6d65 6e74 6174 696f 6e20  e documentation 
+00019fb0: 6e6f 7420 666f 756e 6420 2870 6174 683a  not found (path:
+00019fc0: 207b 6874 6d6c 6964 782e 6173 5f70 6f73   {htmlidx.as_pos
+00019fd0: 6978 2829 7d22 290a 2020 2020 2020 2020  ix()}").        
+00019fe0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00019ff0: 0a20 2020 2020 2020 205f 6f70 656e 5f69  .        _open_i
+0001a000: 6e5f 6465 6661 756c 745f 6170 706c 6963  n_default_applic
+0001a010: 6174 696f 6e28 6874 6d6c 6964 782e 6173  ation(htmlidx.as
+0001a020: 5f70 6f73 6978 2829 290a 2020 2020 656c  _posix()).    el
+0001a030: 7365 3a0a 2020 2020 2020 2020 666f 7220  se:.        for 
+0001a040: 6f70 636f 6465 2069 6e20 6f70 636f 6465  opcode in opcode
+0001a050: 733a 0a20 2020 2020 2020 2020 2020 205f  s:.            _
+0001a060: 6465 6275 6728 226d 616e 3a20 7072 6f63  debug("man: proc
+0001a070: 6573 7369 6e67 206f 7063 6f64 6520 222c  essing opcode ",
+0001a080: 206f 7063 6f64 652e 6e61 6d65 290a 2020   opcode.name).  
+0001a090: 2020 2020 2020 2020 2020 7061 7468 203d            path =
+0001a0a0: 2069 6478 2e66 696e 645f 6d61 6e70 6167   idx.find_manpag
+0001a0b0: 6528 6f70 636f 6465 3d6f 7063 6f64 652e  e(opcode=opcode.
+0001a0c0: 6e61 6d65 2c20 6d61 726b 646f 776e 3d66  name, markdown=f
+0001a0d0: 6d74 203d 3d20 226d 6172 6b64 6f77 6e22  mt == "markdown"
+0001a0e0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0001a0f0: 206e 6f74 2070 6174 683a 0a20 2020 2020   not path:.     
+0001a100: 2020 2020 2020 2020 2020 205f 6572 726f             _erro
+0001a110: 726d 7367 2866 224e 6f20 6d61 6e70 6167  rmsg(f"No manpag
+0001a120: 6520 666f 7220 6f70 636f 6465 207b 6f70  e for opcode {op
+0001a130: 636f 6465 2e6e 616d 657d 2229 0a20 2020  code.name}").   
+0001a140: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+0001a150: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+0001a160: 2020 6966 2061 7267 732e 7061 7468 3a0a    if args.path:.
+0001a170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a180: 2320 6a75 7374 2070 7269 6e74 2074 6865  # just print the
+0001a190: 2070 6174 680a 2020 2020 2020 2020 2020   path.          
+0001a1a0: 2020 2020 2020 7072 696e 7428 6622 7b6f        print(f"{o
+0001a1b0: 7063 6f64 652e 6e61 6d65 7d3a 7b73 7472  pcode.name}:{str
+0001a1c0: 2870 6174 6829 7d22 290a 2020 2020 2020  (path)}").      
+0001a1d0: 2020 2020 2020 656c 6966 2061 7267 732e        elif args.
+0001a1e0: 7369 6d70 6c65 7061 7468 3a0a 2020 2020  simplepath:.    
+0001a1f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0001a200: 7428 7374 7228 7061 7468 2929 0a20 2020  t(str(path)).   
+0001a210: 2020 2020 2020 2020 2065 6c69 6620 666d           elif fm
+0001a220: 7420 3d3d 2022 6d61 726b 646f 776e 223a  t == "markdown":
+0001a230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a240: 2069 6620 6172 6773 2e65 7874 6572 6e61   if args.externa
+0001a250: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
+0001a260: 2020 2020 2020 205f 6f70 656e 5f69 6e5f         _open_in_
+0001a270: 6465 6661 756c 745f 6170 706c 6963 6174  default_applicat
+0001a280: 696f 6e28 7061 7468 2e61 735f 706f 7369  ion(path.as_posi
+0001a290: 7828 2929 0a20 2020 2020 2020 2020 2020  x()).           
+0001a2a0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001a2b0: 2020 2020 2020 2020 2020 2020 2020 205f                 _
+0001a2c0: 7368 6f77 5f6d 6172 6b64 6f77 6e5f 6669  show_markdown_fi
+0001a2d0: 6c65 2870 6174 682c 2073 7479 6c65 3d61  le(path, style=a
+0001a2e0: 7267 732e 7468 656d 6529 0a20 2020 2020  rgs.theme).     
+0001a2f0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0001a300: 2020 2020 2020 2020 2020 2020 2023 206f               # o
+0001a310: 7065 6e20 6974 2069 6e20 7468 6520 6465  pen it in the de
+0001a320: 6661 756c 7420 6170 706c 6963 6174 696f  fault applicatio
+0001a330: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
+0001a340: 2020 5f6f 7065 6e5f 696e 5f64 6566 6175    _open_in_defau
+0001a350: 6c74 5f61 7070 6c69 6361 7469 6f6e 2873  lt_application(s
+0001a360: 7472 2870 6174 6829 290a 2020 2020 7265  tr(path)).    re
+0001a370: 7475 726e 2054 7275 650a 0a0a 6465 6620  turn True...def 
+0001a380: 636d 645f 7265 7365 7463 6163 6865 2861  cmd_resetcache(a
+0001a390: 7267 7329 202d 3e20 4e6f 6e65 3a0a 2020  rgs) -> None:.  
+0001a3a0: 2020 5f72 6d5f 6469 7228 5249 5353 4554    _rm_dir(RISSET
+0001a3b0: 5f44 4154 4152 4550 4f5f 4c4f 4341 4c50  _DATAREPO_LOCALP
+0001a3c0: 4154 4829 0a20 2020 205f 726d 5f64 6972  ATH).    _rm_dir
+0001a3d0: 2852 4953 5345 545f 434c 4f4e 4553 5f50  (RISSET_CLONES_P
+0001a3e0: 4154 4829 0a20 2020 2069 6620 6f73 2e70  ATH).    if os.p
+0001a3f0: 6174 682e 6578 6973 7473 285f 4d41 494e  ath.exists(_MAIN
+0001a400: 494e 4445 585f 5049 434b 4c45 5f46 494c  INDEX_PICKLE_FIL
+0001a410: 4529 3a0a 2020 2020 2020 2020 6f73 2e72  E):.        os.r
+0001a420: 656d 6f76 6528 5f4d 4149 4e49 4e44 4558  emove(_MAININDEX
+0001a430: 5f50 4943 4b4c 455f 4649 4c45 290a 0a0a  _PICKLE_FILE)...
+0001a440: 6465 6620 7570 6461 7465 5f73 656c 6628  def update_self(
+0001a450: 293a 0a20 2020 2022 2222 5570 6772 6164  ):.    """Upgrad
+0001a460: 6520 7269 7373 6574 2069 7473 656c 6622  e risset itself"
+0001a470: 2222 0a20 2020 205f 696e 666f 2822 5570  "".    _info("Up
+0001a480: 6461 7469 6e67 2072 6973 7365 7422 290a  dating risset").
+0001a490: 2020 2020 7375 6270 726f 6365 7373 2e63      subprocess.c
+0001a4a0: 6865 636b 5f63 616c 6c28 5b73 7973 2e65  heck_call([sys.e
+0001a4b0: 7865 6375 7461 626c 652c 2022 2d6d 222c  xecutable, "-m",
+0001a4c0: 2022 7069 7022 2c20 2269 6e73 7461 6c6c   "pip", "install
+0001a4d0: 222c 2022 7269 7373 6574 222c 2022 2d2d  ", "risset", "--
+0001a4e0: 7570 6772 6164 6522 5d29 0a0a 0a64 6566  upgrade"])...def
+0001a4f0: 2063 6d64 5f6c 6973 745f 696e 7374 616c   cmd_list_instal
+0001a500: 6c65 645f 6f70 636f 6465 7328 706c 7567  led_opcodes(plug
+0001a510: 696e 735f 696e 6465 783a 204d 6169 6e49  ins_index: MainI
+0001a520: 6e64 6578 2c20 6172 6773 2920 2d3e 2062  ndex, args) -> b
+0001a530: 6f6f 6c3a 0a20 2020 2022 2222 0a20 2020  ool:.    """.   
+0001a540: 2050 7269 6e74 2061 206c 6973 7420 6f66   Print a list of
+0001a550: 2069 6e73 7461 6c6c 6564 206f 7063 6f64   installed opcod
+0001a560: 6573 0a0a 2020 2020 2222 220a 2020 2020  es..    """.    
+0001a570: 6966 2061 7267 732e 6c6f 6e67 3a0a 2020  if args.long:.  
+0001a580: 2020 2020 2020 666f 7220 6f70 636f 6465        for opcode
+0001a590: 2069 6e20 706c 7567 696e 735f 696e 6465   in plugins_inde
+0001a5a0: 782e 6465 6669 6e65 645f 6f70 636f 6465  x.defined_opcode
+0001a5b0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+0001a5c0: 2070 7269 6e74 2866 227b 6f70 636f 6465   print(f"{opcode
+0001a5d0: 2e6e 616d 652e 6c6a 7573 7428 3230 297d  .name.ljust(20)}
+0001a5e0: 7b6f 7063 6f64 652e 706c 7567 696e 2e6c  {opcode.plugin.l
+0001a5f0: 6a75 7374 2831 3229 7d7b 5f61 6262 7265  just(12)}{_abbre
+0001a600: 7628 6f70 636f 6465 2e61 6273 7472 6163  v(opcode.abstrac
+0001a610: 742c 2036 3029 7d22 290a 2020 2020 656c  t, 60)}").    el
+0001a620: 7365 3a0a 2020 2020 2020 2020 666f 7220  se:.        for 
+0001a630: 6f70 636f 6465 2069 6e20 706c 7567 696e  opcode in plugin
+0001a640: 735f 696e 6465 782e 6465 6669 6e65 645f  s_index.defined_
+0001a650: 6f70 636f 6465 7328 293a 0a20 2020 2020  opcodes():.     
+0001a660: 2020 2020 2020 2070 7269 6e74 286f 7063         print(opc
+0001a670: 6f64 652e 6e61 6d65 290a 2020 2020 7265  ode.name).    re
+0001a680: 7475 726e 2054 7275 650a 0a0a 6465 6620  turn True...def 
+0001a690: 636d 645f 6465 7628 6964 783a 204d 6169  cmd_dev(idx: Mai
+0001a6a0: 6e49 6e64 6578 2c20 6172 6773 2920 2d3e  nIndex, args) ->
+0001a6b0: 2062 6f6f 6c3a 0a20 2020 2069 6620 6172   bool:.    if ar
+0001a6c0: 6773 2e63 6d64 203d 3d20 276f 7063 6f64  gs.cmd == 'opcod
+0001a6d0: 6573 786d 6c27 3a0a 2020 2020 2020 2020  esxml':.        
+0001a6e0: 6f75 7473 7472 203d 2069 6478 2e67 656e  outstr = idx.gen
+0001a6f0: 6572 6174 655f 6f70 636f 6465 735f 786d  erate_opcodes_xm
+0001a700: 6c28 290a 2020 2020 2020 2020 6f75 7466  l().        outf
+0001a710: 696c 6520 3d20 6172 6773 2e6f 7574 6669  ile = args.outfi
+0001a720: 6c65 206f 7220 5249 5353 4554 5f4f 5043  le or RISSET_OPC
+0001a730: 4f44 4553 584d 4c0a 2020 2020 2020 2020  ODESXML.        
+0001a740: 6966 206f 7574 6669 6c65 203d 3d20 2773  if outfile == 's
+0001a750: 7464 6f75 7427 3a0a 2020 2020 2020 2020  tdout':.        
+0001a760: 2020 2020 7072 696e 7428 6f75 7473 7472      print(outstr
+0001a770: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+0001a780: 2020 2020 2020 2020 2020 2020 6f70 656e              open
+0001a790: 286f 7574 6669 6c65 2c20 2277 2229 2e77  (outfile, "w").w
+0001a7a0: 7269 7465 286f 7574 7374 7229 0a20 2020  rite(outstr).   
+0001a7b0: 2020 2020 2020 2020 205f 6465 6275 6728           _debug(
+0001a7c0: 6622 4765 6e65 7261 7465 6420 6f70 636f  f"Generated opco
+0001a7d0: 6465 732e 786d 6c20 6174 2027 7b6f 7574  des.xml at '{out
+0001a7e0: 6669 6c65 7d27 2229 0a20 2020 2065 6c69  file}'").    eli
+0001a7f0: 6620 6172 6773 2e63 6d64 203d 3d20 2763  f args.cmd == 'c
+0001a800: 6f64 6573 6967 6e27 3a0a 2020 2020 2020  odesign':.      
+0001a810: 2020 6966 205f 7365 7373 696f 6e2e 706c    if _session.pl
+0001a820: 6174 666f 726d 2021 3d20 276d 6163 6f73  atform != 'macos
+0001a830: 273a 0a20 2020 2020 2020 2020 2020 205f  ':.            _
+0001a840: 6572 726f 726d 7367 2866 2243 6f64 6520  errormsg(f"Code 
+0001a850: 7369 676e 696e 6720 6973 206f 6e6c 7920  signing is only 
+0001a860: 6176 6169 6c61 626c 6520 666f 7220 6d61  available for ma
+0001a870: 636f 732c 206e 6f74 2066 6f72 2027 7b5f  cos, not for '{_
+0001a880: 7365 7373 696f 6e2e 706c 6174 666f 726d  session.platform
+0001a890: 7d27 2229 0a20 2020 2020 2020 2020 2020  }'").           
+0001a8a0: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
+0001a8b0: 2020 2020 2020 706c 7567 696e 7320 3d20        plugins = 
+0001a8c0: 6964 782e 6176 6169 6c61 626c 655f 706c  idx.available_pl
+0001a8d0: 7567 696e 7328 696e 7374 616c 6c65 645f  ugins(installed_
+0001a8e0: 6f6e 6c79 3d54 7275 652c 2063 6865 636b  only=True, check
+0001a8f0: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
+0001a900: 6479 6c69 6273 203d 205b 5d0a 2020 2020  dylibs = [].    
+0001a910: 2020 2020 666f 7220 706c 7567 696e 2069      for plugin i
+0001a920: 6e20 706c 7567 696e 733a 0a20 2020 2020  n plugins:.     
+0001a930: 2020 2020 2020 2069 6e66 6f20 3d20 6964         info = id
+0001a940: 782e 696e 7374 616c 6c65 645f 706c 7567  x.installed_plug
+0001a950: 696e 5f69 6e66 6f28 706c 7567 696e 290a  in_info(plugin).
+0001a960: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+0001a970: 7274 2069 6e66 6f20 6973 206e 6f74 204e  rt info is not N
+0001a980: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0001a990: 6479 6c69 6273 2e61 7070 656e 6428 696e  dylibs.append(in
+0001a9a0: 666f 2e64 6c6c 7061 7468 2e61 735f 706f  fo.dllpath.as_po
+0001a9b0: 7369 7828 2929 0a0a 2020 2020 2020 2020  six())..        
+0001a9c0: 6966 206e 6f74 2064 796c 6962 733a 0a20  if not dylibs:. 
+0001a9d0: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
+0001a9e0: 6728 6622 4469 6420 6e6f 7420 6669 6e64  g(f"Did not find
+0001a9f0: 2061 6e79 2062 696e 6172 7920 746f 2073   any binary to s
+0001aa00: 6967 6e2e 2050 6c75 6769 6e73 3a20 7b70  ign. Plugins: {p
+0001aa10: 6c75 6769 6e73 7d22 290a 2020 2020 2020  lugins}").      
+0001aa20: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001aa30: 2020 2020 5f64 6562 7567 2866 2243 6f64      _debug(f"Cod
+0001aa40: 6520 7369 676e 696e 6720 7468 6520 666f  e signing the fo
+0001aa50: 6c6c 6f77 696e 6720 706c 7567 696e 2062  llowing plugin b
+0001aa60: 696e 6172 6965 733a 207b 6479 6c69 6273  inaries: {dylibs
+0001aa70: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
+0001aa80: 6d61 636f 735f 636f 6465 7369 676e 2864  macos_codesign(d
+0001aa90: 796c 6962 7329 0a0a 2020 2020 7265 7475  ylibs)..    retu
+0001aaa0: 726e 2054 7275 650a 0a0a 6465 6620 636d  rn True...def cm
+0001aab0: 645f 6d61 6b65 646f 6373 2869 6478 3a20  d_makedocs(idx: 
+0001aac0: 4d61 696e 496e 6465 782c 2061 7267 7329  MainIndex, args)
+0001aad0: 202d 3e20 626f 6f6c 3a0a 2020 2020 2222   -> bool:.    ""
+0001aae0: 220a 2020 2020 4765 6e65 7261 7465 2074  ".    Generate t
+0001aaf0: 6865 2064 6f63 756d 656e 7461 7469 6f6e  he documentation
+0001ab00: 2066 6f72 2061 6c6c 206f 7063 6f64 6573   for all opcodes
+0001ab10: 0a0a 2020 2020 4f70 7469 6f6e 733a 0a20  ..    Options:. 
+0001ab20: 2020 2020 2020 202d 2d6f 6e6c 7969 6e73         --onlyins
+0001ab30: 7461 6c6c 6564 3a20 6966 2054 7275 652c  talled: if True,
+0001ab40: 206f 6e6c 7920 6765 6e65 7261 7465 2064   only generate d
+0001ab50: 6f63 756d 656e 7461 7469 6f6e 2066 6f72  ocumentation for
+0001ab60: 2069 6e73 7461 6c6c 6564 206f 7063 6f64   installed opcod
+0001ab70: 6573 0a20 2020 2020 2020 202d 2d6f 7574  es.        --out
+0001ab80: 666f 6c64 6572 3a20 6966 2067 6976 656e  folder: if given
+0001ab90: 2074 6865 2064 6f63 756d 656e 7461 7469   the documentati
+0001aba0: 6f6e 2069 7320 706c 6163 6564 2069 6e20  on is placed in 
+0001abb0: 7468 6973 2066 6f6c 6465 722e 204f 7468  this folder. Oth
+0001abc0: 6572 7769 7365 2c20 6974 2069 730a 2020  erwise, it is.  
+0001abd0: 2020 2020 2020 2020 2020 706c 6163 6564            placed
+0001abe0: 2069 6e20 5249 5353 4554 5f47 454e 4552   in RISSET_GENER
+0001abf0: 4154 4544 5f44 4f43 530a 2020 2020 2222  ATED_DOCS.    ""
+0001ac00: 220a 2020 2020 6f75 7466 6f6c 6465 7220  ".    outfolder 
+0001ac10: 3d20 6172 6773 2e6f 7574 666f 6c64 6572  = args.outfolder
+0001ac20: 206f 7220 5249 5353 4554 5f47 454e 4552   or RISSET_GENER
+0001ac30: 4154 4544 5f44 4f43 530a 0a20 2020 2074  ATED_DOCS..    t
+0001ac40: 7279 3a0a 2020 2020 2020 2020 5f67 656e  ry:.        _gen
+0001ac50: 6572 6174 655f 646f 6375 6d65 6e74 6174  erate_documentat
+0001ac60: 696f 6e28 6964 782c 2064 6573 743d 5061  ion(idx, dest=Pa
+0001ac70: 7468 286f 7574 666f 6c64 6572 292c 2062  th(outfolder), b
+0001ac80: 7569 6c64 6874 6d6c 3d54 7275 652c 206f  uildhtml=True, o
+0001ac90: 6e6c 7969 6e73 7461 6c6c 6564 3d61 7267  nlyinstalled=arg
+0001aca0: 732e 6f6e 6c79 696e 7374 616c 6c65 642c  s.onlyinstalled,
+0001acb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001acc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001acd0: 206f 7063 6f64 6573 786d 6c3d 5249 5353   opcodesxml=RISS
+0001ace0: 4554 5f4f 5043 4f44 4553 584d 4c29 0a20  ET_OPCODESXML). 
+0001acf0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+0001ad00: 696f 6e20 6173 2065 3a0a 2020 2020 2020  ion as e:.      
+0001ad10: 2020 5f65 7272 6f72 6d73 6728 7374 7228    _errormsg(str(
+0001ad20: 6529 290a 2020 2020 2020 2020 7265 7475  e)).        retu
+0001ad30: 726e 2046 616c 7365 0a0a 2020 2020 5f69  rn False..    _i
+0001ad40: 6e66 6f28 6622 446f 6375 6d65 6e74 6174  nfo(f"Documentat
+0001ad50: 696f 6e20 6765 6e65 7261 7465 6420 696e  ion generated in
+0001ad60: 207b 6f75 7466 6f6c 6465 727d 2229 0a20   {outfolder}"). 
+0001ad70: 2020 205f 696e 666f 2866 2253 6176 6564     _info(f"Saved
+0001ad80: 206f 7063 6f64 6573 2e78 6d6c 2074 6f20   opcodes.xml to 
+0001ad90: 7b52 4953 5345 545f 4f50 434f 4445 5358  {RISSET_OPCODESX
+0001ada0: 4d4c 7d22 290a 2020 2020 7265 7475 726e  ML}").    return
+0001adb0: 2054 7275 650a 0a0a 6465 6620 636d 645f   True...def cmd_
+0001adc0: 696e 666f 2869 6478 3a20 4d61 696e 496e  info(idx: MainIn
+0001add0: 6465 782c 2061 7267 7329 202d 3e20 626f  dex, args) -> bo
+0001ade0: 6f6c 3a0a 2020 2020 7069 636b 6c65 6669  ol:.    picklefi
+0001adf0: 6c65 203d 205f 4d41 494e 494e 4445 585f  le = _MAININDEX_
+0001ae00: 5049 434b 4c45 5f46 494c 450a 2020 2020  PICKLE_FILE.    
+0001ae10: 6966 206e 6f74 2070 6963 6b6c 6566 696c  if not picklefil
+0001ae20: 652e 6578 6973 7473 2829 3a0a 2020 2020  e.exists():.    
+0001ae30: 2020 2020 6c61 7374 7570 6461 7465 203d      lastupdate =
+0001ae40: 2039 3939 3939 3939 390a 2020 2020 656c   99999999.    el
+0001ae50: 7365 3a0a 2020 2020 2020 2020 696d 706f  se:.        impo
+0001ae60: 7274 2074 696d 650a 2020 2020 2020 2020  rt time.        
+0001ae70: 6c61 7374 7570 6461 7465 203d 2069 6e74  lastupdate = int
+0001ae80: 2828 7469 6d65 2e74 696d 6528 2920 2d20  ((time.time() - 
+0001ae90: 7069 636b 6c65 6669 6c65 2e73 7461 7428  picklefile.stat(
+0001aea0: 292e 7374 5f6d 7469 6d65 2920 2f20 3638  ).st_mtime) / 68
+0001aeb0: 3634 3030 290a 0a20 2020 2064 203d 207b  6400)..    d = {
+0001aec0: 0a20 2020 2020 2020 2027 7665 7273 696f  .        'versio
+0001aed0: 6e27 3a20 5f5f 7665 7273 696f 6e5f 5f2c  n': __version__,
+0001aee0: 0a20 2020 2020 2020 2027 696e 6465 782d  .        'index-
+0001aef0: 7665 7273 696f 6e27 3a20 6964 782e 7665  version': idx.ve
+0001af00: 7273 696f 6e2c 0a20 2020 2020 2020 2027  rsion,.        '
+0001af10: 706c 7567 696e 7370 6174 6827 3a20 6964  pluginspath': id
+0001af20: 782e 7573 6572 5f70 6c75 6769 6e73 5f70  x.user_plugins_p
+0001af30: 6174 682e 6173 5f70 6f73 6978 2829 2c0a  ath.as_posix(),.
+0001af40: 2020 2020 2020 2020 2772 6973 7365 7472          'rissetr
+0001af50: 6f6f 7427 3a20 5249 5353 4554 5f52 4f4f  oot': RISSET_ROO
+0001af60: 542e 6173 5f70 6f73 6978 2829 2c0a 2020  T.as_posix(),.  
+0001af70: 2020 2020 2020 2763 6c6f 6e65 7370 6174        'clonespat
+0001af80: 6827 3a20 5249 5353 4554 5f43 4c4f 4e45  h': RISSET_CLONE
+0001af90: 535f 5041 5448 2e61 735f 706f 7369 7828  S_PATH.as_posix(
+0001afa0: 292c 0a20 2020 2020 2020 2027 6173 7365  ),.        'asse
+0001afb0: 7473 7061 7468 273a 2052 4953 5345 545f  tspath': RISSET_
+0001afc0: 4153 5345 5453 5f50 4154 482e 6173 5f70  ASSETS_PATH.as_p
+0001afd0: 6f73 6978 2829 2c0a 2020 2020 2020 2020  osix(),.        
+0001afe0: 2768 746d 6c64 6f63 7327 3a20 2852 4953  'htmldocs': (RIS
+0001aff0: 5345 545f 4745 4e45 5241 5445 445f 444f  SET_GENERATED_DO
+0001b000: 4353 2f22 7369 7465 2229 2e61 735f 706f  CS/"site").as_po
+0001b010: 7369 7828 292c 0a20 2020 2020 2020 2027  six(),.        '
+0001b020: 6d61 6e70 6167 6573 273a 2028 5249 5353  manpages': (RISS
+0001b030: 4554 5f47 454e 4552 4154 4544 5f44 4f43  ET_GENERATED_DOC
+0001b040: 532f 2264 6f63 732f 6f70 636f 6465 7322  S/"docs/opcodes"
+0001b050: 292e 6173 5f70 6f73 6978 2829 2c0a 2020  ).as_posix(),.  
+0001b060: 2020 2020 2020 2764 6174 6172 6570 6f27        'datarepo'
+0001b070: 3a20 5249 5353 4554 5f44 4154 4152 4550  : RISSET_DATAREP
+0001b080: 4f5f 4c4f 4341 4c50 4154 482e 6173 5f70  O_LOCALPATH.as_p
+0001b090: 6f73 6978 2829 2c0a 2020 2020 2020 2020  osix(),.        
+0001b0a0: 276f 7063 6f64 6573 786d 6c27 3a20 2852  'opcodesxml': (R
+0001b0b0: 4953 5345 545f 524f 4f54 202f 2022 6f70  ISSET_ROOT / "op
+0001b0c0: 636f 6465 732e 786d 6c22 292e 6173 5f70  codes.xml").as_p
+0001b0d0: 6f73 6978 2829 2c0a 2020 2020 2020 2020  osix(),.        
+0001b0e0: 2764 6179 732d 7369 6e63 652d 7570 6461  'days-since-upda
+0001b0f0: 7465 273a 206c 6173 7475 7064 6174 652c  te': lastupdate,
+0001b100: 0a20 2020 2020 2020 2027 696e 7374 616c  .        'instal
+0001b110: 6c65 642d 706c 7567 696e 7327 3a20 5b70  led-plugins': [p
+0001b120: 6c75 6769 6e2e 6e61 6d65 2066 6f72 2070  lugin.name for p
+0001b130: 6c75 6769 6e20 696e 2069 6478 2e70 6c75  lugin in idx.plu
+0001b140: 6769 6e73 2e76 616c 7565 7328 290a 2020  gins.values().  
+0001b150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b160: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0001b170: 6478 2e69 735f 706c 7567 696e 5f69 6e73  dx.is_plugin_ins
+0001b180: 7461 6c6c 6564 2870 6c75 6769 6e2c 2063  talled(plugin, c
+0001b190: 6865 636b 3d46 616c 7365 295d 0a20 2020  heck=False)].   
+0001b1a0: 207d 0a20 2020 2069 6620 6172 6773 2e66   }.    if args.f
+0001b1b0: 756c 6c3a 0a20 2020 2020 2020 2064 5b27  ull:.        d['
+0001b1c0: 706c 7567 696e 7327 5d20 3d20 6964 782e  plugins'] = idx.
+0001b1d0: 6c69 7374 5f70 6c75 6769 6e73 5f61 735f  list_plugins_as_
+0001b1e0: 6469 6374 2829 0a20 2020 206a 736f 6e73  dict().    jsons
+0001b1f0: 7472 203d 206a 736f 6e2e 6475 6d70 7328  tr = json.dumps(
+0001b200: 642c 2069 6e64 656e 743d 5472 7565 290a  d, indent=True).
+0001b210: 2020 2020 6966 2061 7267 732e 6f75 7466      if args.outf
+0001b220: 696c 653a 0a20 2020 2020 2020 206f 7065  ile:.        ope
+0001b230: 6e28 6172 6773 2e6f 7574 6669 6c65 2c20  n(args.outfile, 
+0001b240: 2277 2229 2e77 7269 7465 286a 736f 6e73  "w").write(jsons
+0001b250: 7472 290a 2020 2020 656c 7365 3a0a 2020  tr).    else:.  
+0001b260: 2020 2020 2020 7072 696e 7428 6a73 6f6e        print(json
+0001b270: 7374 7229 0a20 2020 2072 6574 7572 6e20  str).    return 
+0001b280: 5472 7565 0a0a 0a64 6566 2063 6d64 5f75  True...def cmd_u
+0001b290: 7067 7261 6465 2869 6478 3a20 4d61 696e  pgrade(idx: Main
+0001b2a0: 496e 6465 782c 2061 7267 7329 202d 3e20  Index, args) -> 
+0001b2b0: 626f 6f6c 3a0a 2020 2020 2222 2220 5570  bool:.    """ Up
+0001b2c0: 6772 6164 6573 2061 6c6c 2069 6e73 7461  grades all insta
+0001b2d0: 6c6c 6564 2070 6163 6b61 6765 7320 6966  lled packages if
+0001b2e0: 2074 6865 7920 6361 6e20 6265 2075 7067   they can be upg
+0001b2f0: 7261 6465 6420 2222 220a 2020 2020 666f  raded """.    fo
+0001b300: 7220 706c 7567 696e 2069 6e20 6964 782e  r plugin in idx.
+0001b310: 706c 7567 696e 732e 7661 6c75 6573 2829  plugins.values()
+0001b320: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
+0001b330: 2069 6478 2e69 735f 706c 7567 696e 5f69   idx.is_plugin_i
+0001b340: 6e73 7461 6c6c 6564 2870 6c75 6769 6e29  nstalled(plugin)
+0001b350: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
+0001b360: 6e74 696e 7565 0a20 2020 2020 2020 2069  ntinue.        i
+0001b370: 6e66 6f20 3d20 6964 782e 696e 7374 616c  nfo = idx.instal
+0001b380: 6c65 645f 706c 7567 696e 5f69 6e66 6f28  led_plugin_info(
+0001b390: 706c 7567 696e 290a 2020 2020 2020 2020  plugin).        
+0001b3a0: 6966 206e 6f74 2069 6e66 6f20 6f72 2069  if not info or i
+0001b3b0: 6e66 6f2e 7665 7273 696f 6e74 7570 6c65  nfo.versiontuple
+0001b3c0: 203d 3d20 2830 2c20 302c 2030 293a 0a20   == (0, 0, 0):. 
+0001b3d0: 2020 2020 2020 2020 2020 205f 6465 6275             _debu
+0001b3e0: 6728 6622 5570 6772 6164 653a 2070 6c75  g(f"Upgrade: plu
+0001b3f0: 6769 6e20 7b70 6c75 6769 6e2e 6e61 6d65  gin {plugin.name
+0001b400: 7d20 696e 7374 616c 6c65 6420 6d61 6e75  } installed manu
+0001b410: 616c 6c79 2c20 7769 6c6c 206e 6f74 2075  ally, will not u
+0001b420: 7067 7261 6465 2229 0a20 2020 2020 2020  pgrade").       
+0001b430: 2065 6c69 6620 706c 7567 696e 2e76 6572   elif plugin.ver
+0001b440: 7369 6f6e 7475 706c 6520 3c3d 2069 6e66  siontuple <= inf
+0001b450: 6f2e 7665 7273 696f 6e74 7570 6c65 3a0a  o.versiontuple:.
+0001b460: 2020 2020 2020 2020 2020 2020 5f64 6562              _deb
+0001b470: 7567 2866 2255 7067 7261 6465 3a20 706c  ug(f"Upgrade: pl
+0001b480: 7567 696e 207b 706c 7567 696e 2e6e 616d  ugin {plugin.nam
+0001b490: 657d 2061 6c72 6561 6479 2075 7020 746f  e} already up to
+0001b4a0: 2064 6174 6522 0a20 2020 2020 2020 2020   date".         
+0001b4b0: 2020 2020 2020 2020 2020 6622 2028 696e            f" (in
+0001b4c0: 7374 616c 6c65 6420 7665 7273 696f 6e3a  stalled version:
+0001b4d0: 207b 696e 666f 2e76 6572 7369 6f6e 7475   {info.versiontu
+0001b4e0: 706c 657d 2c20 6c61 7465 7374 2076 6572  ple}, latest ver
+0001b4f0: 7369 6f6e 3a20 7b70 6c75 6769 6e2e 7665  sion: {plugin.ve
+0001b500: 7273 696f 6e74 7570 6c65 7d22 290a 2020  rsiontuple}").  
+0001b510: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001b520: 2020 2020 2020 2020 5f64 6562 7567 2866          _debug(f
+0001b530: 2255 7067 7261 6469 6e67 2070 6c75 6769  "Upgrading plugi
+0001b540: 6e20 7b70 6c75 6769 6e2e 6e61 6d65 7d20  n {plugin.name} 
+0001b550: 6672 6f6d 207b 696e 666f 2e76 6572 7369  from {info.versi
+0001b560: 6f6e 7475 706c 657d 2074 6f20 7b70 6c75  ontuple} to {plu
+0001b570: 6769 6e2e 7665 7273 696f 6e74 7570 6c65  gin.versiontuple
+0001b580: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
+0001b590: 6572 7220 3d20 6964 782e 696e 7374 616c  err = idx.instal
+0001b5a0: 6c5f 706c 7567 696e 2870 6c75 6769 6e29  l_plugin(plugin)
+0001b5b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001b5c0: 6572 723a 0a20 2020 2020 2020 2020 2020  err:.           
+0001b5d0: 2020 2020 205f 6572 726f 726d 7367 2866       _errormsg(f
+0001b5e0: 2245 7272 6f72 2077 6869 6c65 2069 6e73  "Error while ins
+0001b5f0: 7461 6c6c 696e 6720 7b70 6c75 6769 6e2e  talling {plugin.
+0001b600: 6e61 6d65 7d22 290a 2020 2020 2020 2020  name}").        
+0001b610: 2020 2020 2020 2020 5f65 7272 6f72 6d73          _errorms
+0001b620: 6728 2220 2020 2022 202b 2073 7472 2865  g("    " + str(e
+0001b630: 7272 2929 0a0a 2020 2020 7265 7475 726e  rr))..    return
+0001b640: 2054 7275 650a 0a0a 6465 6620 636d 645f   True...def cmd_
+0001b650: 646f 776e 6c6f 6164 2869 6478 3a20 4d61  download(idx: Ma
+0001b660: 696e 496e 6465 782c 2061 7267 7329 202d  inIndex, args) -
+0001b670: 3e20 626f 6f6c 3a0a 2020 2020 2222 2244  > bool:.    """D
+0001b680: 6f77 6e6c 6f61 6473 2061 2062 696e 6172  ownloads a binar
+0001b690: 7920 666f 7220 6120 6769 7665 6e20 706c  y for a given pl
+0001b6a0: 7567 696e 2222 220a 2020 2020 6f75 7466  ugin""".    outf
+0001b6b0: 6f6c 6465 7220 3d20 6172 6773 2e70 6174  older = args.pat
+0001b6c0: 680a 2020 2020 6966 206e 6f74 206f 7574  h.    if not out
+0001b6d0: 666f 6c64 6572 3a0a 2020 2020 2020 2020  folder:.        
+0001b6e0: 6f75 7466 6f6c 6465 7220 3d20 5061 7468  outfolder = Path
+0001b6f0: 2e63 7764 2829 2e61 735f 706f 7369 7828  .cwd().as_posix(
+0001b700: 290a 0a20 2020 2069 6620 6e6f 7420 6f73  )..    if not os
+0001b710: 2e70 6174 682e 6578 6973 7473 286f 7574  .path.exists(out
+0001b720: 666f 6c64 6572 293a 0a20 2020 2020 2020  folder):.       
+0001b730: 205f 6572 726f 726d 7367 2866 2264 6f77   _errormsg(f"dow
+0001b740: 6e6c 6f61 643a 204f 7574 7075 7420 666f  nload: Output fo
+0001b750: 6c64 6572 2027 7b6f 7574 666f 6c64 6572  lder '{outfolder
+0001b760: 7d27 2064 6f65 7320 6e6f 7420 6578 6973  }' does not exis
+0001b770: 7422 290a 2020 2020 2020 2020 7265 7475  t").        retu
+0001b780: 726e 2046 616c 7365 0a0a 2020 2020 706c  rn False..    pl
+0001b790: 6174 666f 726d 6964 203d 2061 7267 732e  atformid = args.
+0001b7a0: 706c 6174 666f 726d 0a20 2020 2069 6620  platform.    if 
+0001b7b0: 6e6f 7420 706c 6174 666f 726d 6964 3a0a  not platformid:.
+0001b7c0: 2020 2020 2020 2020 706c 6174 666f 726d          platform
+0001b7d0: 6964 203d 205f 7365 7373 696f 6e2e 706c  id = _session.pl
+0001b7e0: 6174 666f 726d 6964 0a0a 2020 2020 706c  atformid..    pl
+0001b7f0: 7567 696e 203d 2069 6478 2e70 6c75 6769  ugin = idx.plugi
+0001b800: 6e73 2e67 6574 2861 7267 732e 706c 7567  ns.get(args.plug
+0001b810: 696e 290a 2020 2020 6966 2070 6c75 6769  in).    if plugi
+0001b820: 6e20 6973 204e 6f6e 653a 0a20 2020 2020  n is None:.     
+0001b830: 2020 2070 6c75 6769 6e6e 616d 6573 203d     pluginnames =
+0001b840: 2027 2c20 272e 6a6f 696e 2869 6478 2e70   ', '.join(idx.p
+0001b850: 6c75 6769 6e73 2e6b 6579 7328 2929 0a20  lugins.keys()). 
+0001b860: 2020 2020 2020 205f 6572 726f 726d 7367         _errormsg
+0001b870: 2866 2264 6f77 6e6c 6f61 643a 2055 6e6b  (f"download: Unk
+0001b880: 6e6f 776e 2070 6c75 6769 6e20 277b 6172  nown plugin '{ar
+0001b890: 6773 2e70 6c75 6769 6e7d 272e 2041 7661  gs.plugin}'. Ava
+0001b8a0: 696c 6162 6c65 2070 6c75 6769 6e73 3a20  ilable plugins: 
+0001b8b0: 7b70 6c75 6769 6e6e 616d 6573 7d22 290a  {pluginnames}").
+0001b8c0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+0001b8d0: 616c 7365 0a0a 2020 2020 646c 6c70 6174  alse..    dllpat
+0001b8e0: 6820 3d20 6964 782e 6765 745f 706c 7567  h = idx.get_plug
+0001b8f0: 696e 5f64 6c6c 2870 6c75 6769 6e3d 706c  in_dll(plugin=pl
+0001b900: 7567 696e 2c20 706c 6174 666f 726d 6964  ugin, platformid
+0001b910: 3d70 6c61 7466 6f72 6d69 6429 0a20 2020  =platformid).   
+0001b920: 2069 6620 6e6f 7420 646c 6c70 6174 682e   if not dllpath.
+0001b930: 6578 6973 7473 2829 3a0a 2020 2020 2020  exists():.      
+0001b940: 2020 5f65 7272 6f72 6d73 6728 6622 4572    _errormsg(f"Er
+0001b950: 726f 7220 7768 696c 6520 646f 776e 6c6f  ror while downlo
+0001b960: 6164 696e 6720 6269 6e61 7279 2066 6f72  ading binary for
+0001b970: 2070 6c75 6769 6e20 277b 706c 7567 696e   plugin '{plugin
+0001b980: 2e6e 616d 657d 272e 2022 0a20 2020 2020  .name}'. ".     
+0001b990: 2020 2020 2020 2020 2020 2020 2066 2245               f"E
+0001b9a0: 7870 6563 7465 6420 746f 2066 696e 6420  xpected to find 
+0001b9b0: 7468 6520 6269 6e61 7279 2061 7420 277b  the binary at '{
+0001b9c0: 646c 6c70 6174 687d 272c 2062 7574 2074  dllpath}', but t
+0001b9d0: 6865 2070 6174 6820 646f 6573 206e 6f74  he path does not
+0001b9e0: 2065 7869 7374 2229 0a20 2020 2020 2020   exist").       
+0001b9f0: 2072 6574 7572 6e20 4661 6c73 650a 0a20   return False.. 
+0001ba00: 2020 206f 7574 6669 6c65 203d 2050 6174     outfile = Pat
+0001ba10: 6828 6f75 7466 6f6c 6465 7229 202f 2064  h(outfolder) / d
+0001ba20: 6c6c 7061 7468 2e6e 616d 650a 2020 2020  llpath.name.    
+0001ba30: 6966 206f 7574 6669 6c65 2e65 7869 7374  if outfile.exist
+0001ba40: 7328 293a 0a20 2020 2020 2020 205f 6572  s():.        _er
+0001ba50: 726f 726d 7367 2866 2254 6865 2064 6573  rormsg(f"The des
+0001ba60: 7469 6e61 7469 6f6e 2070 6174 6820 277b  tination path '{
+0001ba70: 6f75 7466 696c 657d 2720 616c 7265 6164  outfile}' alread
+0001ba80: 7920 6578 6973 7473 2e22 290a 2020 2020  y exists.").    
+0001ba90: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+0001baa0: 0a0a 2020 2020 7368 7574 696c 2e6d 6f76  ..    shutil.mov
+0001bab0: 6528 646c 6c70 6174 682c 206f 7574 666f  e(dllpath, outfo
+0001bac0: 6c64 6572 290a 0a20 2020 205f 696e 666f  lder)..    _info
+0001bad0: 2866 2244 6f77 6e6c 6f61 6465 6420 6269  (f"Downloaded bi
+0001bae0: 6e61 7279 2066 6f72 2070 6c75 6769 6e20  nary for plugin 
+0001baf0: 277b 706c 7567 696e 2e6e 616d 657d 2720  '{plugin.name}' 
+0001bb00: 746f 2027 7b6f 7574 6669 6c65 7d27 2229  to '{outfile}'")
+0001bb10: 0a20 2020 2072 6574 7572 6e20 5472 7565  .    return True
+0001bb20: 0a0a 0a64 6566 205f 7275 6e6e 696e 675f  ...def _running_
+0001bb30: 6672 6f6d 5f74 6572 6d69 6e61 6c28 2920  from_terminal() 
+0001bb40: 2d3e 2062 6f6f 6c3a 0a20 2020 2072 6574  -> bool:.    ret
+0001bb50: 7572 6e20 7379 732e 7374 6469 6e2e 6973  urn sys.stdin.is
+0001bb60: 6174 7479 2829 0a0a 0a64 6566 205f 7072  atty()...def _pr
+0001bb70: 696e 745f 6669 6c65 2870 6174 683a 2050  int_file(path: P
+0001bb80: 6174 6829 202d 3e20 4e6f 6e65 3a0a 2020  ath) -> None:.  
+0001bb90: 2020 7465 7874 203d 206f 7065 6e28 7374    text = open(st
+0001bba0: 7228 7061 7468 2929 2e72 6561 6428 290a  r(path)).read().
+0001bbb0: 2020 2020 7072 696e 7428 7465 7874 290a      print(text).
+0001bbc0: 0a0a 6465 6620 5f73 686f 775f 6d61 726b  ..def _show_mark
+0001bbd0: 646f 776e 5f66 696c 6528 7061 7468 3a20  down_file(path: 
+0001bbe0: 5061 7468 2c20 7374 796c 653d 2764 6172  Path, style='dar
+0001bbf0: 6b27 2920 2d3e 204e 6f6e 653a 0a20 2020  k') -> None:.   
+0001bc00: 2069 6620 6e6f 7420 5f72 756e 6e69 6e67   if not _running
+0001bc10: 5f66 726f 6d5f 7465 726d 696e 616c 2829  _from_terminal()
+0001bc20: 3a0a 2020 2020 2020 2020 5f6f 7065 6e5f  :.        _open_
+0001bc30: 696e 5f64 6566 6175 6c74 5f61 7070 6c69  in_default_appli
+0001bc40: 6361 7469 6f6e 2873 7472 2870 6174 6829  cation(str(path)
+0001bc50: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0001bc60: 0a0a 2020 2020 6672 6f6d 2070 7967 6d65  ..    from pygme
+0001bc70: 6e74 7320 696d 706f 7274 2068 6967 686c  nts import highl
+0001bc80: 6967 6874 0a20 2020 2066 726f 6d20 7079  ight.    from py
+0001bc90: 676d 656e 7473 2e6c 6578 6572 7320 696d  gments.lexers im
+0001bca0: 706f 7274 204d 6172 6b64 6f77 6e4c 6578  port MarkdownLex
+0001bcb0: 6572 0a20 2020 2066 726f 6d20 7079 676d  er.    from pygm
+0001bcc0: 656e 7473 2e66 6f72 6d61 7474 6572 7320  ents.formatters 
+0001bcd0: 696d 706f 7274 2054 6572 6d69 6e61 6c54  import TerminalT
+0001bce0: 7275 6543 6f6c 6f72 466f 726d 6174 7465  rueColorFormatte
+0001bcf0: 720a 2020 2020 6672 6f6d 2070 7967 6d65  r.    from pygme
+0001bd00: 6e74 732e 7374 796c 6573 2069 6d70 6f72  nts.styles impor
+0001bd10: 7420 5354 594c 455f 4d41 500a 2020 2020  t STYLE_MAP.    
+0001bd20: 2320 6672 6f6d 2070 7967 6d65 6e74 732e  # from pygments.
+0001bd30: 666f 726d 6174 7465 7273 2069 6d70 6f72  formatters impor
+0001bd40: 7420 5465 726d 696e 616c 466f 726d 6174  t TerminalFormat
+0001bd50: 7465 720a 2020 2020 636f 6465 203d 206f  ter.    code = o
+0001bd60: 7065 6e28 7061 7468 292e 7265 6164 2829  pen(path).read()
+0001bd70: 0a20 2020 2069 6620 7374 796c 6520 3d3d  .    if style ==
+0001bd80: 2027 6461 726b 273a 0a20 2020 2020 2020   'dark':.       
+0001bd90: 2073 7479 6c65 203d 2027 6672 7569 7479   style = 'fruity
+0001bda0: 270a 2020 2020 656c 6966 2073 7479 6c65  '.    elif style
+0001bdb0: 203d 3d20 276c 6967 6874 273a 0a20 2020   == 'light':.   
+0001bdc0: 2020 2020 2073 7479 6c65 203d 2027 6672       style = 'fr
+0001bdd0: 6965 6e64 6c79 270a 2020 2020 656c 7365  iendly'.    else
+0001bde0: 3a0a 2020 2020 2020 2020 6966 2073 7479  :.        if sty
+0001bdf0: 6c65 206e 6f74 2069 6e20 5354 594c 455f  le not in STYLE_
+0001be00: 4d41 503a 0a20 2020 2020 2020 2020 2020  MAP:.           
+0001be10: 2073 7479 6c65 203d 2027 6465 6661 756c   style = 'defaul
+0001be20: 7427 0a0a 2020 2020 7072 696e 7428 6869  t'..    print(hi
+0001be30: 6768 6c69 6768 7428 636f 6465 2c20 4d61  ghlight(code, Ma
+0001be40: 726b 646f 776e 4c65 7865 7228 292c 2054  rkdownLexer(), T
+0001be50: 6572 6d69 6e61 6c54 7275 6543 6f6c 6f72  erminalTrueColor
+0001be60: 466f 726d 6174 7465 7228 7374 796c 653d  Formatter(style=
+0001be70: 7374 796c 6529 2929 0a20 2020 2023 2070  style))).    # p
+0001be80: 7269 6e74 2868 6967 686c 6967 6874 2863  rint(highlight(c
+0001be90: 6f64 652c 204d 6172 6b64 6f77 6e4c 6578  ode, MarkdownLex
+0001bea0: 6572 2829 2c20 5465 726d 696e 616c 466f  er(), TerminalFo
+0001beb0: 726d 6174 7465 7228 2929 290a 0a0a 6465  rmatter()))...de
+0001bec0: 6620 6d61 696e 2829 3a0a 2020 2020 2320  f main():.    # 
+0001bed0: 5072 656c 696d 696e 6172 7920 6368 6563  Preliminary chec
+0001bee0: 6b73 0a20 2020 2069 6620 7379 732e 706c  ks.    if sys.pl
+0001bef0: 6174 666f 726d 206e 6f74 2069 6e20 2822  atform not in ("
+0001bf00: 6c69 6e75 7822 2c20 2264 6172 7769 6e22  linux", "darwin"
+0001bf10: 2c20 2277 696e 3332 2229 3a0a 2020 2020  , "win32"):.    
+0001bf20: 2020 2020 5f65 7272 6f72 6d73 6728 6622      _errormsg(f"
+0001bf30: 506c 6174 666f 726d 206e 6f74 2073 7570  Platform not sup
+0001bf40: 706f 7274 6564 3a20 7b73 7973 2e70 6c61  ported: {sys.pla
+0001bf50: 7466 6f72 6d7d 2229 0a20 2020 2020 2020  tform}").       
+0001bf60: 2073 7973 2e65 7869 7428 2d31 290a 0a20   sys.exit(-1).. 
+0001bf70: 2020 2069 6620 5f67 6574 5f67 6974 5f62     if _get_git_b
+0001bf80: 696e 6172 7928 2920 6973 204e 6f6e 653a  inary() is None:
+0001bf90: 0a20 2020 2020 2020 205f 6572 726f 726d  .        _errorm
+0001bfa0: 7367 2822 6769 7420 636f 6d6d 616e 6420  sg("git command 
+0001bfb0: 6e6f 7420 666f 756e 642e 2043 6865 636b  not found. Check
+0001bfc0: 2074 6861 7420 6769 7420 6973 2069 6e73   that git is ins
+0001bfd0: 7461 6c6c 6564 2061 6e64 2069 6e20 7468  talled and in th
+0001bfe0: 6520 5041 5448 2229 0a20 2020 2020 2020  e PATH").       
+0001bff0: 2073 7973 2e65 7869 7428 2d31 290a 0a20   sys.exit(-1).. 
+0001c000: 2020 2064 6566 2066 6c61 6728 7061 7273     def flag(pars
+0001c010: 6572 2c20 666c 6167 2c20 6865 6c70 3d22  er, flag, help="
+0001c020: 2229 3a0a 2020 2020 2020 2020 7061 7273  "):.        pars
+0001c030: 6572 2e61 6464 5f61 7267 756d 656e 7428  er.add_argument(
+0001c040: 666c 6167 2c20 6163 7469 6f6e 3d22 7374  flag, action="st
+0001c050: 6f72 655f 7472 7565 222c 2068 656c 703d  ore_true", help=
+0001c060: 6865 6c70 290a 0a20 2020 2023 204d 6169  help)..    # Mai
+0001c070: 6e20 7061 7273 6572 0a20 2020 2070 6172  n parser.    par
+0001c080: 7365 7220 3d20 6172 6770 6172 7365 2e41  ser = argparse.A
+0001c090: 7267 756d 656e 7450 6172 7365 7228 290a  rgumentParser().
+0001c0a0: 2020 2020 666c 6167 2870 6172 7365 722c      flag(parser,
+0001c0b0: 2022 2d2d 6465 6275 6722 2c20 6865 6c70   "--debug", help
+0001c0c0: 3d22 5072 696e 7420 6465 6275 6720 696e  ="Print debug in
+0001c0d0: 666f 726d 6174 696f 6e22 290a 2020 2020  formation").    
+0001c0e0: 666c 6167 2870 6172 7365 722c 2022 2d2d  flag(parser, "--
+0001c0f0: 7570 6461 7465 222c 2068 656c 703d 2255  update", help="U
+0001c100: 7064 6174 6520 7468 6520 706c 7567 696e  pdate the plugin
+0001c110: 7320 6461 7461 2062 6566 6f72 6520 616e  s data before an
+0001c120: 7920 6163 7469 6f6e 2229 0a20 2020 2066  y action").    f
+0001c130: 6c61 6728 7061 7273 6572 2c20 222d 2d73  lag(parser, "--s
+0001c140: 746f 706f 6e65 7272 6f72 222c 2068 656c  toponerror", hel
+0001c150: 703d 2253 746f 7020 7061 7273 696e 6720  p="Stop parsing 
+0001c160: 6966 2061 6e20 6572 726f 7220 6973 2064  if an error is d
+0001c170: 6574 6563 7465 6422 290a 2020 2020 666c  etected").    fl
+0001c180: 6167 2870 6172 7365 722c 2022 2d2d 7665  ag(parser, "--ve
+0001c190: 7273 696f 6e22 2c20 6865 6c70 3d22 5072  rsion", help="Pr
+0001c1a0: 696e 7420 7665 7273 696f 6e20 616e 6420  int version and 
+0001c1b0: 6578 6974 2229 0a20 2020 2070 6172 7365  exit").    parse
+0001c1c0: 722e 6164 645f 6172 6775 6d65 6e74 2822  r.add_argument("
+0001c1d0: 2d63 222c 2022 2d2d 6373 6f75 6e64 222c  -c", "--csound",
+0001c1e0: 2064 6566 6175 6c74 3d30 2c20 7479 7065   default=0, type
+0001c1f0: 3d69 6e74 2c0a 2020 2020 2020 2020 2020  =int,.          
+0001c200: 2020 2020 2020 2020 2020 2020 2020 6865                he
+0001c210: 6c70 3d22 5768 6963 6820 6373 6f75 6e64  lp="Which csound
+0001c220: 2076 6572 7369 6f6e 2074 6f20 7573 6520   version to use 
+0001c230: 286f 6e65 206f 6620 302c 2036 2c20 3729  (one of 0, 6, 7)
+0001c240: 2e20 220a 2020 2020 2020 2020 2020 2020  . ".            
+0001c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c260: 2022 5573 6520 3020 746f 2064 6574 6563   "Use 0 to detec
+0001c270: 7420 7468 6520 696e 7374 616c 6c65 6420  t the installed 
+0001c280: 7665 7273 696f 6e22 290a 0a20 2020 2073  version")..    s
+0001c290: 7562 7061 7273 6572 7320 3d20 7061 7273  ubparsers = pars
+0001c2a0: 6572 2e61 6464 5f73 7562 7061 7273 6572  er.add_subparser
+0001c2b0: 7328 6465 7374 3d27 636f 6d6d 616e 6427  s(dest='command'
+0001c2c0: 290a 0a20 2020 2023 204c 6973 7420 636f  )..    # List co
+0001c2d0: 6d6d 616e 640a 2020 2020 6c69 7374 5f63  mmand.    list_c
+0001c2e0: 6d64 203d 2073 7562 7061 7273 6572 732e  md = subparsers.
+0001c2f0: 6164 645f 7061 7273 6572 2827 6c69 7374  add_parser('list
+0001c300: 272c 2068 656c 703d 224c 6973 7420 7061  ', help="List pa
+0001c310: 636b 6167 6573 2229 0a0a 2020 2020 666c  ckages")..    fl
+0001c320: 6167 286c 6973 745f 636d 642c 2022 2d2d  ag(list_cmd, "--
+0001c330: 6a73 6f6e 222c 2068 656c 703d 224f 7574  json", help="Out
+0001c340: 7075 7473 206c 6973 7420 6173 206a 736f  puts list as jso
+0001c350: 6e22 290a 2020 2020 666c 6167 286c 6973  n").    flag(lis
+0001c360: 745f 636d 642c 2022 2d2d 6e61 6d65 6f6e  t_cmd, "--nameon
+0001c370: 6c79 222c 2068 656c 703d 224f 7574 7075  ly", help="Outpu
+0001c380: 7420 6a75 7374 2074 6865 206e 616d 6520  t just the name 
+0001c390: 6f66 2065 6163 6820 706c 7567 696e 2229  of each plugin")
+0001c3a0: 0a20 2020 2066 6c61 6728 6c69 7374 5f63  .    flag(list_c
+0001c3b0: 6d64 2c20 222d 2d69 6e73 7461 6c6c 6564  md, "--installed
+0001c3c0: 222c 2068 656c 703d 224c 6973 7420 6f6e  ", help="List on
+0001c3d0: 6c79 2069 6e73 7461 6c6c 6564 2070 6c75  ly installed plu
+0001c3e0: 6769 6e73 2229 0a20 2020 2066 6c61 6728  gins").    flag(
+0001c3f0: 6c69 7374 5f63 6d64 2c20 222d 2d75 7067  list_cmd, "--upg
+0001c400: 7261 6465 6162 6c65 222c 2068 656c 703d  radeable", help=
+0001c410: 224c 6973 7420 6f6e 6c79 2069 6e73 7461  "List only insta
+0001c420: 6c6c 6564 2070 6163 6b61 6765 7320 7768  lled packages wh
+0001c430: 6963 6820 6361 6e20 6265 2075 7067 7261  ich can be upgra
+0001c440: 6465 6422 290a 2020 2020 666c 6167 286c  ded").    flag(l
+0001c450: 6973 745f 636d 642c 2022 2d2d 6e6f 7469  ist_cmd, "--noti
+0001c460: 6e73 7461 6c6c 6564 222c 2068 656c 703d  nstalled", help=
+0001c470: 224c 6973 7420 6f6e 6c79 2070 6c75 6769  "List only plugi
+0001c480: 6e73 2077 6869 6368 2061 7265 206e 6f74  ns which are not
+0001c490: 2069 6e73 7461 6c6c 6564 2229 0a20 2020   installed").   
+0001c4a0: 2066 6c61 6728 6c69 7374 5f63 6d64 2c20   flag(list_cmd, 
+0001c4b0: 222d 2d6e 6f68 6561 6465 7222 2c20 6865  "--noheader", he
+0001c4c0: 6c70 3d22 446f 206e 6f74 2070 7269 6e74  lp="Do not print
+0001c4d0: 2061 6e79 2065 7874 7261 2069 6e66 6f72   any extra infor
+0001c4e0: 6d61 7469 6f6e 2229 0a20 2020 206c 6973  mation").    lis
+0001c4f0: 745f 636d 642e 6164 645f 6172 6775 6d65  t_cmd.add_argume
+0001c500: 6e74 2822 2d6f 222c 2022 2d2d 6f75 7466  nt("-o", "--outf
+0001c510: 696c 6522 2c20 6865 6c70 3d22 4f75 7470  ile", help="Outp
+0001c520: 7574 7320 746f 2061 2066 696c 6522 290a  uts to a file").
+0001c530: 2020 2020 6c69 7374 5f63 6d64 2e61 6464      list_cmd.add
+0001c540: 5f61 7267 756d 656e 7428 222d 3122 2c20  _argument("-1", 
+0001c550: 222d 2d6f 6e65 6c69 6e65 222c 2061 6374  "--oneline", act
+0001c560: 696f 6e3d 2273 746f 7265 5f74 7275 6522  ion="store_true"
+0001c570: 2c20 6865 6c70 3d22 4c69 7374 2065 6163  , help="List eac
+0001c580: 6820 706c 7567 696e 2069 6e20 6f6e 6520  h plugin in one 
+0001c590: 6c69 6e65 2229 0a20 2020 206c 6973 745f  line").    list_
+0001c5a0: 636d 642e 7365 745f 6465 6661 756c 7473  cmd.set_defaults
+0001c5b0: 2866 756e 633d 636d 645f 6c69 7374 290a  (func=cmd_list).
+0001c5c0: 0a20 2020 2023 2049 6e73 7461 6c6c 2063  .    # Install c
+0001c5d0: 6f6d 6d61 6e64 0a20 2020 2069 6e73 7461  ommand.    insta
+0001c5e0: 6c6c 5f63 6d64 203d 2073 7562 7061 7273  ll_cmd = subpars
+0001c5f0: 6572 732e 6164 645f 7061 7273 6572 2822  ers.add_parser("
+0001c600: 696e 7374 616c 6c22 2c20 6865 6c70 3d22  install", help="
+0001c610: 496e 7374 616c 6c20 6f72 2075 7064 6174  Install or updat
+0001c620: 6520 6120 7061 636b 6167 6522 290a 2020  e a package").  
+0001c630: 2020 666c 6167 2869 6e73 7461 6c6c 5f63    flag(install_c
+0001c640: 6d64 2c20 222d 2d66 6f72 6365 222c 2068  md, "--force", h
+0001c650: 656c 703d 2246 6f72 6365 2069 6e73 7461  elp="Force insta
+0001c660: 6c6c 2f72 6569 6e73 7461 6c6c 2229 0a20  ll/reinstall"). 
+0001c670: 2020 2069 6e73 7461 6c6c 5f63 6d64 2e61     install_cmd.a
+0001c680: 6464 5f61 7267 756d 656e 7428 2270 6c75  dd_argument("plu
+0001c690: 6769 6e73 222c 206e 6172 6773 3d22 2b22  gins", nargs="+"
+0001c6a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001c6b0: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+0001c6c0: 656c 703d 224e 616d 6520 6f66 2074 6865  elp="Name of the
+0001c6d0: 2070 6c75 6769 6e2f 706c 7567 696e 7320   plugin/plugins 
+0001c6e0: 746f 2069 6e73 7461 6c6c 2e20 220a 2020  to install. ".  
+0001c6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c710: 2247 6c6f 6220 7061 7474 6572 6e20 6172  "Glob pattern ar
+0001c720: 6520 7375 7070 6f72 7465 6420 2865 6e63  e supported (enc
+0001c730: 6c6f 7365 2074 6865 6d20 696e 7369 6465  lose them inside
+0001c740: 2071 756f 7461 7469 6f6e 206d 6172 6b73   quotation marks
+0001c750: 2922 290a 2020 2020 696e 7374 616c 6c5f  )").    install_
+0001c760: 636d 642e 7365 745f 6465 6661 756c 7473  cmd.set_defaults
+0001c770: 2866 756e 633d 636d 645f 696e 7374 616c  (func=cmd_instal
+0001c780: 6c29 0a0a 2020 2020 2320 7265 6d6f 7665  l)..    # remove
+0001c790: 2063 6f6d 6d61 6e64 0a20 2020 2072 6d5f   command.    rm_
+0001c7a0: 636d 6420 3d20 7375 6270 6172 7365 7273  cmd = subparsers
+0001c7b0: 2e61 6464 5f70 6172 7365 7228 2272 656d  .add_parser("rem
+0001c7c0: 6f76 6522 2c20 6865 6c70 3d22 5265 6d6f  ove", help="Remo
+0001c7d0: 7665 2061 2070 6163 6b61 6765 2229 0a20  ve a package"). 
+0001c7e0: 2020 2072 6d5f 636d 642e 6164 645f 6172     rm_cmd.add_ar
+0001c7f0: 6775 6d65 6e74 2822 706c 7567 696e 222c  gument("plugin",
+0001c800: 206e 6172 6773 3d22 2b22 2c20 6865 6c70   nargs="+", help
+0001c810: 3d22 506c 7567 696e 2f73 2074 6f20 7265  ="Plugin/s to re
+0001c820: 6d6f 7665 2229 0a20 2020 2072 6d5f 636d  move").    rm_cm
+0001c830: 642e 7365 745f 6465 6661 756c 7473 2866  d.set_defaults(f
+0001c840: 756e 633d 636d 645f 726d 290a 0a20 2020  unc=cmd_rm)..   
+0001c850: 2023 2073 686f 7720 636f 6d6d 616e 640a   # show command.
+0001c860: 2020 2020 7368 6f77 5f63 6d64 203d 2073      show_cmd = s
+0001c870: 7562 7061 7273 6572 732e 6164 645f 7061  ubparsers.add_pa
+0001c880: 7273 6572 2822 7368 6f77 222c 2068 656c  rser("show", hel
+0001c890: 703d 2253 686f 7720 696e 666f 726d 6174  p="Show informat
+0001c8a0: 696f 6e20 6162 6f75 7420 6120 706c 7567  ion about a plug
+0001c8b0: 696e 2229 0a20 2020 2073 686f 775f 636d  in").    show_cm
+0001c8c0: 642e 6164 645f 6172 6775 6d65 6e74 2822  d.add_argument("
+0001c8d0: 706c 7567 696e 222c 2068 656c 703d 2250  plugin", help="P
+0001c8e0: 6c75 6769 6e20 746f 2067 6174 6865 7220  lugin to gather 
+0001c8f0: 696e 666f 726d 6174 696f 6e20 6162 6f75  information abou
+0001c900: 7422 290a 2020 2020 7368 6f77 5f63 6d64  t").    show_cmd
+0001c910: 2e73 6574 5f64 6566 6175 6c74 7328 6675  .set_defaults(fu
+0001c920: 6e63 3d63 6d64 5f73 686f 7729 0a0a 2020  nc=cmd_show)..  
+0001c930: 2020 2320 6275 696c 6420 646f 6373 0a20    # build docs. 
+0001c940: 2020 206d 616b 6564 6f63 735f 636d 6420     makedocs_cmd 
+0001c950: 3d20 7375 6270 6172 7365 7273 2e61 6464  = subparsers.add
+0001c960: 5f70 6172 7365 7228 226d 616b 6564 6f63  _parser("makedoc
+0001c970: 7322 2c20 6865 6c70 3d22 4275 696c 6420  s", help="Build 
+0001c980: 7468 6520 646f 6375 6d65 6e74 6174 696f  the documentatio
+0001c990: 6e20 666f 7220 616c 6c20 6465 6669 6e65  n for all define
+0001c9a0: 6420 706c 7567 696e 732e 2022 0a20 2020  d plugins. ".   
+0001c9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9e0: 2020 2020 2020 2022 5468 6973 2064 6570         "This dep
+0001c9f0: 656e 6473 206f 6e20 6d6b 646f 6373 2062  ends on mkdocs b
+0001ca00: 6569 6e67 2069 6e73 7461 6c6c 6564 2229  eing installed")
+0001ca10: 0a20 2020 206d 616b 6564 6f63 735f 636d  .    makedocs_cm
+0001ca20: 642e 6164 645f 6172 6775 6d65 6e74 2822  d.add_argument("
+0001ca30: 2d2d 6f6e 6c79 696e 7374 616c 6c65 6422  --onlyinstalled"
+0001ca40: 2c20 6163 7469 6f6e 3d22 7374 6f72 655f  , action="store_
+0001ca50: 7472 7565 222c 2068 656c 703d 2242 7569  true", help="Bui
+0001ca60: 6c64 2064 6f63 7320 6f6e 6c79 2066 6f72  ld docs only for
+0001ca70: 2069 6e73 7461 6c6c 6564 2070 6c75 6769   installed plugi
+0001ca80: 6e73 2229 0a20 2020 206d 616b 6564 6f63  ns").    makedoc
+0001ca90: 735f 636d 642e 6164 645f 6172 6775 6d65  s_cmd.add_argume
+0001caa0: 6e74 2822 2d6f 222c 2022 2d2d 6f75 7466  nt("-o", "--outf
+0001cab0: 6f6c 6465 7222 2c20 6865 6c70 3d22 4465  older", help="De
+0001cac0: 7374 696e 6174 696f 6e20 666f 6c64 6572  stination folder
+0001cad0: 2074 6f20 706c 6163 6520 7468 6520 646f   to place the do
+0001cae0: 6375 6d65 6e74 6174 696f 6e22 2c0a 2020  cumentation",.  
+0001caf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cb00: 2020 2020 2020 2020 2020 2020 6465 6661              defa
+0001cb10: 756c 743d 2727 290a 2020 2020 6d61 6b65  ult='').    make
+0001cb20: 646f 6373 5f63 6d64 2e73 6574 5f64 6566  docs_cmd.set_def
+0001cb30: 6175 6c74 7328 6675 6e63 3d63 6d64 5f6d  aults(func=cmd_m
+0001cb40: 616b 6564 6f63 7329 0a0a 2020 2020 2320  akedocs)..    # 
+0001cb50: 6d61 6e20 636f 6d6d 616e 640a 2020 2020  man command.    
+0001cb60: 6d61 6e5f 636d 6420 3d20 7375 6270 6172  man_cmd = subpar
+0001cb70: 7365 7273 2e61 6464 5f70 6172 7365 7228  sers.add_parser(
+0001cb80: 226d 616e 222c 2068 656c 703d 224f 7065  "man", help="Ope
+0001cb90: 6e20 6d61 6e75 616c 2070 6167 6520 666f  n manual page fo
+0001cba0: 7220 616e 2069 6e73 7461 6c6c 6564 206f  r an installed o
+0001cbb0: 7063 6f64 652e 2022 0a20 2020 2020 2020  pcode. ".       
+0001cbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cbe0: 2020 2020 2020 2020 2022 4d75 6c74 6970           "Multip
+0001cbf0: 6c65 206f 7063 6f64 6573 206f 7220 6120  le opcodes or a 
+0001cc00: 676c 6f62 2077 696c 6463 6172 6420 6172  glob wildcard ar
+0001cc10: 6520 616c 6c6f 7765 6422 290a 2020 2020  e allowed").    
+0001cc20: 6d61 6e5f 636d 642e 6164 645f 6172 6775  man_cmd.add_argu
+0001cc30: 6d65 6e74 2822 2d70 222c 2022 2d2d 7061  ment("-p", "--pa
+0001cc40: 7468 222c 2061 6374 696f 6e3d 2273 746f  th", action="sto
+0001cc50: 7265 5f74 7275 6522 2c0a 2020 2020 2020  re_true",.      
+0001cc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cc70: 2020 2068 656c 703d 224f 6e6c 7920 7072     help="Only pr
+0001cc80: 696e 7420 7468 6520 7061 7468 206f 6620  int the path of 
+0001cc90: 7468 6520 6d61 6e75 616c 2070 6167 652e  the manual page.
+0001cca0: 2054 6865 2066 6f72 6d61 7420 6973 203c   The format is <
+0001ccb0: 6f70 636f 6465 3e3a 3c70 6174 683e 2c20  opcode>:<path>, 
+0001ccc0: 616c 6c6f 7769 6e67 2074 6f20 220a 2020  allowing to ".  
+0001ccd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cce0: 2020 2020 2020 2020 2020 2020 2271 7565              "que
+0001ccf0: 7279 2074 6865 2070 6174 6820 666f 7220  ry the path for 
+0001cd00: 6d75 6c74 6970 6c65 206f 7063 6f64 6573  multiple opcodes
+0001cd10: 2229 0a20 2020 206d 616e 5f63 6d64 2e61  ").    man_cmd.a
+0001cd20: 6464 5f61 7267 756d 656e 7428 222d 7322  dd_argument("-s"
+0001cd30: 2c20 222d 2d73 696d 706c 6570 6174 6822  , "--simplepath"
+0001cd40: 2c20 6163 7469 6f6e 3d22 7374 6f72 655f  , action="store_
+0001cd50: 7472 7565 222c 0a20 2020 2020 2020 2020  true",.         
+0001cd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cd70: 6865 6c70 3d22 5072 696e 7420 6a75 7374  help="Print just
+0001cd80: 2074 6865 2070 6174 6820 6f66 2074 6865   the path of the
+0001cd90: 206d 616e 7561 6c20 7061 6765 2229 0a20   manual page"). 
+0001cda0: 2020 206d 616e 5f63 6d64 2e61 6464 5f61     man_cmd.add_a
+0001cdb0: 7267 756d 656e 7428 222d 6d22 2c20 222d  rgument("-m", "-
+0001cdc0: 2d6d 6172 6b64 6f77 6e22 2c20 6163 7469  -markdown", acti
+0001cdd0: 6f6e 3d22 7374 6f72 655f 7472 7565 222c  on="store_true",
+0001cde0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001cdf0: 2020 2020 2020 2020 2020 6865 6c70 3d22            help="
+0001ce00: 5573 6520 7468 6520 2e6d 6420 7061 6765  Use the .md page
+0001ce10: 2069 6e73 7465 6164 206f 6620 7468 6520   instead of the 
+0001ce20: 2e68 746d 6c20 7665 7273 696f 6e22 290a  .html version").
+0001ce30: 2020 2020 6d61 6e5f 636d 642e 6164 645f      man_cmd.add_
+0001ce40: 6172 6775 6d65 6e74 2822 2d65 222c 2022  argument("-e", "
+0001ce50: 2d2d 6578 7465 726e 616c 222c 2061 6374  --external", act
+0001ce60: 696f 6e3d 2273 746f 7265 5f74 7275 6522  ion="store_true"
+0001ce70: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001ce80: 2020 2020 2020 2020 2020 2068 656c 703d             help=
+0001ce90: 224f 7065 6e20 7468 6520 6d61 6e20 7061  "Open the man pa
+0001cea0: 6765 2069 6e20 7468 6520 6465 6661 756c  ge in the defaul
+0001ceb0: 7420 6170 702e 2054 6869 7320 6973 206f  t app. This is o
+0001cec0: 6e6c 7922 0a20 2020 2020 2020 2020 2020  nly".           
+0001ced0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cee0: 2020 2022 2075 7365 6420 7768 656e 206f     " used when o
+0001cef0: 7065 6e69 6e67 2074 6865 206d 6172 6b64  pening the markd
+0001cf00: 6f77 6e20 6d61 6e20 7061 6765 2e22 290a  own man page.").
+0001cf10: 2020 2020 6d61 6e5f 636d 642e 6164 645f      man_cmd.add_
+0001cf20: 6172 6775 6d65 6e74 2822 2d2d 6874 6d6c  argument("--html
+0001cf30: 222c 2061 6374 696f 6e3d 2273 746f 7265  ", action="store
+0001cf40: 5f74 7275 6522 2c0a 2020 2020 2020 2020  _true",.        
+0001cf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf60: 2068 656c 703d 224f 7065 6e73 2074 6865   help="Opens the
+0001cf70: 202e 6874 6d6c 2076 6572 7369 6f6e 206f   .html version o
+0001cf80: 6620 7468 6520 6d61 6e70 6167 6520 696e  f the manpage in
+0001cf90: 2074 6865 2064 6566 6175 6c74 2062 726f   the default bro
+0001cfa0: 7773 6572 2028 6f72 206f 7574 7075 7473  wser (or outputs
+0001cfb0: 2074 6865 2070 6174 6822 0a20 2020 2020   the path".     
+0001cfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cfd0: 2020 2020 2020 2020 2022 2077 6974 6820           " with 
+0001cfe0: 7468 6520 2d2d 7061 7468 206f 7074 696f  the --path optio
+0001cff0: 6e29 2229 0a20 2020 206d 616e 5f63 6d64  n)").    man_cmd
+0001d000: 2e61 6464 5f61 7267 756d 656e 7428 222d  .add_argument("-
+0001d010: 2d74 6865 6d65 222c 2064 6566 6175 6c74  -theme", default
+0001d020: 3d22 6461 726b 222c 0a20 2020 2020 2020  ="dark",.       
+0001d030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d040: 2020 6368 6f69 6365 733d 5b27 6461 726b    choices=['dark
+0001d050: 272c 2027 6c69 6768 7427 2c20 2767 7275  ', 'light', 'gru
+0001d060: 7662 6f78 2d64 6172 6b27 2c20 2767 7275  vbox-dark', 'gru
+0001d070: 7662 6f78 2d6c 6967 6874 272c 2027 6d61  vbox-light', 'ma
+0001d080: 7465 7269 616c 272c 2027 6672 7569 7479  terial', 'fruity
+0001d090: 272c 2027 6e61 7469 7665 275d 2c0a 2020  ', 'native'],.  
+0001d0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0b0: 2020 2020 2020 2068 656c 703d 2253 7479         help="Sty
+0001d0c0: 6c65 2075 7365 6420 7768 656e 2064 6973  le used when dis
+0001d0d0: 706c 6179 696e 6720 6d61 726b 646f 776e  playing markdown
+0001d0e0: 2066 696c 6573 2028 6465 6661 756c 743d   files (default=
+0001d0f0: 6461 726b 2922 290a 2020 2020 6d61 6e5f  dark)").    man_
+0001d100: 636d 642e 6164 645f 6172 6775 6d65 6e74  cmd.add_argument
+0001d110: 2822 6f70 636f 6465 222c 206e 6172 6773  ("opcode", nargs
+0001d120: 3d22 2a22 2c0a 2020 2020 2020 2020 2020  ="*",.          
+0001d130: 2020 2020 2020 2020 2020 2020 2020 2068                 h
+0001d140: 656c 703d 2253 686f 7720 7468 6520 6d61  elp="Show the ma
+0001d150: 6e75 616c 2070 6167 6520 6f66 2074 6869  nual page of thi
+0001d160: 7320 6f70 636f 6465 2f6f 7063 6f64 6573  s opcode/opcodes
+0001d170: 2e20 4d75 6c74 6970 6c65 206f 7063 6f64  . Multiple opcod
+0001d180: 6573 2022 0a20 2020 2020 2020 2020 2020  es ".           
+0001d190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d1a0: 2020 2022 6361 6e20 6265 2067 6976 656e     "can be given
+0001d1b0: 2061 6e64 2065 6163 6820 656e 7472 7920   and each entry 
+0001d1c0: 6361 6e20 6265 2061 6c73 6f20 6120 676c  can be also a gl
+0001d1d0: 6f62 2070 6174 7465 726e 2028 6d61 6b65  ob pattern (make
+0001d1e0: 2073 7572 6520 746f 2022 0a20 2020 2020   sure to ".     
+0001d1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d200: 2020 2020 2020 2020 2022 656e 636c 6f73           "enclos
+0001d210: 6520 6974 2069 6e20 7175 6f74 6174 696f  e it in quotatio
+0001d220: 6e20 6d61 726b 7329 2229 0a20 2020 206d  n marks)").    m
+0001d230: 616e 5f63 6d64 2e73 6574 5f64 6566 6175  an_cmd.set_defau
+0001d240: 6c74 7328 6675 6e63 3d63 6d64 5f6d 616e  lts(func=cmd_man
+0001d250: 290a 0a20 2020 2023 2075 7064 6174 6520  )..    # update 
+0001d260: 636f 6d6d 616e 640a 2020 2020 7570 6461  command.    upda
+0001d270: 7465 5f63 6d64 203d 2073 7562 7061 7273  te_cmd = subpars
+0001d280: 6572 732e 6164 645f 7061 7273 6572 2822  ers.add_parser("
+0001d290: 7570 6461 7465 222c 2068 656c 703d 2255  update", help="U
+0001d2a0: 7064 6174 6520 7265 706f 7369 746f 7279  pdate repository
+0001d2b0: 2e20 5570 6461 7465 7320 7468 6520 6d65  . Updates the me
+0001d2c0: 7461 6461 7461 2061 626f 7574 2061 7661  tadata about ava
+0001d2d0: 696c 6162 6c65 220a 2020 2020 2020 2020  ilable".        
+0001d2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d300: 2020 2020 2020 2020 2020 2020 2020 2270                "p
+0001d310: 6163 6b61 6765 732c 2074 6865 6972 2076  ackages, their v
+0001d320: 6572 7369 6f6e 732c 2065 7463 2e22 290a  ersions, etc.").
+0001d330: 0a20 2020 2023 206c 6973 742d 6f70 636f  .    # list-opco
+0001d340: 6465 730a 2020 2020 6c69 7374 6f70 636f  des.    listopco
+0001d350: 6465 735f 636d 6420 3d20 7375 6270 6172  des_cmd = subpar
+0001d360: 7365 7273 2e61 6464 5f70 6172 7365 7228  sers.add_parser(
+0001d370: 226c 6973 746f 7063 6f64 6573 222c 2068  "listopcodes", h
+0001d380: 656c 703d 224c 6973 7420 696e 7374 616c  elp="List instal
+0001d390: 6c65 6420 6f70 636f 6465 7322 290a 2020  led opcodes").  
+0001d3a0: 2020 6c69 7374 6f70 636f 6465 735f 636d    listopcodes_cm
+0001d3b0: 642e 6164 645f 6172 6775 6d65 6e74 2822  d.add_argument("
+0001d3c0: 2d6c 222c 2022 2d2d 6c6f 6e67 222c 2061  -l", "--long", a
+0001d3d0: 6374 696f 6e3d 2273 746f 7265 5f74 7275  ction="store_tru
+0001d3e0: 6522 2c20 6865 6c70 3d22 4c6f 6e67 2066  e", help="Long f
+0001d3f0: 6f72 6d61 7422 290a 2020 2020 6c69 7374  ormat").    list
+0001d400: 6f70 636f 6465 735f 636d 642e 7365 745f  opcodes_cmd.set_
+0001d410: 6465 6661 756c 7473 2866 756e 633d 636d  defaults(func=cm
+0001d420: 645f 6c69 7374 5f69 6e73 7461 6c6c 6564  d_list_installed
+0001d430: 5f6f 7063 6f64 6573 290a 0a20 2020 2023  _opcodes)..    #
+0001d440: 2072 6573 6574 0a20 2020 2072 6573 6574   reset.    reset
+0001d450: 5f63 6d64 203d 2073 7562 7061 7273 6572  _cmd = subparser
+0001d460: 732e 6164 645f 7061 7273 6572 2822 7265  s.add_parser("re
+0001d470: 7365 7463 6163 6865 222c 2068 656c 703d  setcache", help=
+0001d480: 2252 656d 6f76 6520 6c6f 6361 6c20 636c  "Remove local cl
+0001d490: 6f6e 6573 206f 6620 706c 7567 696e 2773  ones of plugin's
+0001d4a0: 2072 6570 6f73 6974 6f72 6965 7322 290a   repositories").
+0001d4b0: 0a20 2020 2023 2069 6e66 6f0a 2020 2020  .    # info.    
+0001d4c0: 696e 666f 5f63 6d64 203d 2073 7562 7061  info_cmd = subpa
+0001d4d0: 7273 6572 732e 6164 645f 7061 7273 6572  rsers.add_parser
+0001d4e0: 2822 696e 666f 222c 2068 656c 703d 224f  ("info", help="O
+0001d4f0: 7574 7075 7473 2069 6e66 6f72 6d61 7469  utputs informati
+0001d500: 6f6e 2061 626f 7574 2072 6973 7365 7420  on about risset 
+0001d510: 6974 7365 6c66 2069 6e20 6a73 6f6e 2066  itself in json f
+0001d520: 6f72 6d61 7422 290a 2020 2020 696e 666f  ormat").    info
+0001d530: 5f63 6d64 2e61 6464 5f61 7267 756d 656e  _cmd.add_argumen
+0001d540: 7428 222d 2d6f 7574 6669 6c65 222c 2064  t("--outfile", d
+0001d550: 6566 6175 6c74 3d4e 6f6e 652c 2068 656c  efault=None, hel
+0001d560: 703d 2253 6176 6520 6f75 7470 7574 2074  p="Save output t
+0001d570: 6f20 7468 6973 2070 6174 6822 290a 2020  o this path").  
+0001d580: 2020 696e 666f 5f63 6d64 2e61 6464 5f61    info_cmd.add_a
+0001d590: 7267 756d 656e 7428 222d 2d66 756c 6c22  rgument("--full"
+0001d5a0: 2c20 6163 7469 6f6e 3d22 7374 6f72 655f  , action="store_
+0001d5b0: 7472 7565 222c 2068 656c 703d 2249 6e63  true", help="Inc
+0001d5c0: 6c75 6465 2061 6c6c 2061 7661 696c 6162  lude all availab
+0001d5d0: 6c65 2069 6e66 6f72 6d61 7469 6f6e 2229  le information")
+0001d5e0: 0a20 2020 2069 6e66 6f5f 636d 642e 7365  .    info_cmd.se
+0001d5f0: 745f 6465 6661 756c 7473 2866 756e 633d  t_defaults(func=
+0001d600: 636d 645f 696e 666f 290a 0a20 2020 2023  cmd_info)..    #
+0001d610: 2075 7067 7261 6465 0a20 2020 2075 7067   upgrade.    upg
+0001d620: 7261 6465 5f63 6d64 203d 2073 7562 7061  rade_cmd = subpa
+0001d630: 7273 6572 732e 6164 645f 7061 7273 6572  rsers.add_parser
+0001d640: 2822 7570 6772 6164 6522 2c20 6865 6c70  ("upgrade", help
+0001d650: 3d22 5570 6772 6164 6520 616e 7920 696e  ="Upgrade any in
+0001d660: 7374 616c 6c65 6420 706c 7567 696e 2074  stalled plugin t
+0001d670: 6f20 6120 6e65 7720 7665 7273 696f 6e2c  o a new version,
+0001d680: 2069 6620 7468 6572 6522 0a20 2020 2020   if there".     
+0001d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d6c0: 2020 2022 6973 206f 6e65 2229 0a20 2020     "is one").   
+0001d6d0: 2075 7067 7261 6465 5f63 6d64 2e73 6574   upgrade_cmd.set
+0001d6e0: 5f64 6566 6175 6c74 7328 6675 6e63 3d63  _defaults(func=c
+0001d6f0: 6d64 5f75 7067 7261 6465 290a 0a20 2020  md_upgrade)..   
+0001d700: 2023 2064 6f77 6e6c 6f61 640a 2020 2020   # download.    
+0001d710: 646f 776e 6c6f 6164 5f63 6d64 203d 2073  download_cmd = s
+0001d720: 7562 7061 7273 6572 732e 6164 645f 7061  ubparsers.add_pa
+0001d730: 7273 6572 2827 646f 776e 6c6f 6164 272c  rser('download',
+0001d740: 2068 656c 703d 2744 6f77 6e6c 6f61 6420   help='Download 
+0001d750: 6120 706c 7567 696e 2729 0a20 2020 2064  a plugin').    d
+0001d760: 6f77 6e6c 6f61 645f 636d 642e 6164 645f  ownload_cmd.add_
+0001d770: 6172 6775 6d65 6e74 2827 2d2d 7061 7468  argument('--path
+0001d780: 272c 2068 656c 703d 2744 6972 6563 746f  ', help='Directo
+0001d790: 7279 2074 6f20 646f 776e 6c6f 6164 2074  ry to download t
+0001d7a0: 6865 2070 6c75 6769 6e20 746f 2028 6465  he plugin to (de
+0001d7b0: 6661 756c 743a 2063 7572 7265 6e74 2064  fault: current d
+0001d7c0: 6972 6563 746f 7279 2927 290a 2020 2020  irectory)').    
+0001d7d0: 646f 776e 6c6f 6164 5f63 6d64 2e61 6464  download_cmd.add
+0001d7e0: 5f61 7267 756d 656e 7428 272d 2d70 6c61  _argument('--pla
+0001d7f0: 7466 6f72 6d27 2c20 6865 6c70 3d27 5468  tform', help='Th
+0001d800: 6520 706c 6174 666f 726d 206f 6620 7468  e platform of th
+0001d810: 6520 706c 7567 696e 2074 6f20 646f 776e  e plugin to down
+0001d820: 6c6f 6164 2028 6465 6661 756c 743a 2063  load (default: c
+0001d830: 7572 7265 6e74 2070 6c61 7466 6f72 6d29  urrent platform)
+0001d840: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+0001d850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d860: 2063 686f 6963 6573 3d5b 276c 696e 7578   choices=['linux
+0001d870: 272c 2027 6d61 636f 7327 2c20 2777 696e  ', 'macos', 'win
+0001d880: 646f 7727 2c20 276d 6163 6f73 2d61 726d  dow', 'macos-arm
+0001d890: 3634 272c 2027 6c69 6e75 782d 6172 6d36  64', 'linux-arm6
+0001d8a0: 3427 5d29 0a20 2020 2064 6f77 6e6c 6f61  4']).    downloa
+0001d8b0: 645f 636d 642e 6164 645f 6172 6775 6d65  d_cmd.add_argume
+0001d8c0: 6e74 2827 706c 7567 696e 272c 2068 656c  nt('plugin', hel
+0001d8d0: 703d 2754 6865 206e 616d 6520 6f66 2074  p='The name of t
+0001d8e0: 6865 2070 6c75 6769 6e20 746f 2064 6f77  he plugin to dow
+0001d8f0: 6e6c 6f61 6427 290a 2020 2020 646f 776e  nload').    down
+0001d900: 6c6f 6164 5f63 6d64 2e73 6574 5f64 6566  load_cmd.set_def
+0001d910: 6175 6c74 7328 6675 6e63 3d63 6d64 5f64  aults(func=cmd_d
+0001d920: 6f77 6e6c 6f61 6429 0a0a 2020 2020 2320  ownload)..    # 
+0001d930: 6465 763a 2072 6973 7365 7420 6465 7620  dev: risset dev 
+0001d940: 6f70 636f 6465 7378 6d6c 0a20 2020 2023  opcodesxml.    #
+0001d950: 2020 2020 2020 7269 7373 6574 2064 6576        risset dev
+0001d960: 2063 6f64 6573 6967 6e0a 2020 2020 6465   codesign.    de
+0001d970: 765f 636d 6420 3d20 7375 6270 6172 7365  v_cmd = subparse
+0001d980: 7273 2e61 6464 5f70 6172 7365 7228 2264  rs.add_parser("d
+0001d990: 6576 222c 2068 656c 703d 2243 6f6d 6d61  ev", help="Comma
+0001d9a0: 6e64 7320 666f 7220 6465 7665 6c6f 7065  nds for develope
+0001d9b0: 7220 7573 6522 290a 0a20 2020 2064 6576  r use")..    dev
+0001d9c0: 5f63 6d64 2e61 6464 5f61 7267 756d 656e  _cmd.add_argumen
+0001d9d0: 7428 222d 2d6f 7574 6669 6c65 222c 2064  t("--outfile", d
+0001d9e0: 6566 6175 6c74 3d4e 6f6e 652c 0a20 2020  efault=None,.   
+0001d9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001da00: 2020 2020 2020 6865 6c70 3d22 5365 7420        help="Set 
+0001da10: 7468 6520 6f75 7470 7574 2066 696c 6520  the output file 
+0001da20: 666f 7220 616e 7920 6163 7469 6f6e 2067  for any action g
+0001da30: 656e 6572 6174 696e 6720 6f75 7470 7574  enerating output
+0001da40: 2229 0a20 2020 2064 6576 5f63 6d64 2e61  ").    dev_cmd.a
+0001da50: 6464 5f61 7267 756d 656e 7428 2263 6d64  dd_argument("cmd
+0001da60: 222c 2063 686f 6963 6573 3d5b 226f 7063  ", choices=["opc
+0001da70: 6f64 6573 786d 6c22 2c20 2263 6f64 6573  odesxml", "codes
+0001da80: 6967 6e22 5d2c 0a20 2020 2020 2020 2020  ign"],.         
+0001da90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001daa0: 6865 6c70 3d22 5375 6263 6f6d 6d61 6e64  help="Subcommand
+0001dab0: 2e20 6f70 636f 6465 7378 6d6c 3a20 6765  . opcodesxml: ge
+0001dac0: 6e65 7261 7465 2078 6d6c 206f 7574 7075  nerate xml outpu
+0001dad0: 7420 7369 6d69 6c61 7220 746f 2022 0a20  t similar to ". 
+0001dae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001daf0: 2020 2020 2020 2020 2020 2020 2022 6f70               "op
+0001db00: 636f 6465 732e 786d 6c20 696e 2074 6865  codes.xml in the
+0001db10: 2063 736f 756e 6427 7320 6d61 6e75 616c   csound's manual
+0001db20: 3b20 220a 2020 2020 2020 2020 2020 2020  ; ".            
+0001db30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001db40: 2020 2263 6f64 6573 6967 6e3a 2063 6f64    "codesign: cod
+0001db50: 6520 7369 676e 2061 6c6c 2069 6e73 7461  e sign all insta
+0001db60: 6c6c 6564 2070 6c75 6769 6e73 2028 6d61  lled plugins (ma
+0001db70: 636f 7320 6f6e 6c79 2922 290a 2020 2020  cos only)").    
+0001db80: 6465 765f 636d 642e 7365 745f 6465 6661  dev_cmd.set_defa
+0001db90: 756c 7473 2866 756e 633d 636d 645f 6465  ults(func=cmd_de
+0001dba0: 7629 0a0a 2020 2020 6172 6773 203d 2070  v)..    args = p
+0001dbb0: 6172 7365 722e 7061 7273 655f 6172 6773  arser.parse_args
+0001dbc0: 2829 0a20 2020 205f 7365 7373 696f 6e2e  ().    _session.
+0001dbd0: 6465 6275 6720 3d20 6172 6773 2e64 6562  debug = args.deb
+0001dbe0: 7567 0a20 2020 205f 7365 7373 696f 6e2e  ug.    _session.
+0001dbf0: 7374 6f70 5f6f 6e5f 6572 726f 7273 203d  stop_on_errors =
+0001dc00: 2061 7267 732e 7374 6f70 6f6e 6572 726f   args.stoponerro
+0001dc10: 720a 0a20 2020 2069 6620 6172 6773 2e76  r..    if args.v
+0001dc20: 6572 7369 6f6e 3a0a 2020 2020 2020 2020  ersion:.        
+0001dc30: 7072 696e 7428 5f5f 7665 7273 696f 6e5f  print(__version_
+0001dc40: 5f29 0a20 2020 2020 2020 2073 7973 2e65  _).        sys.e
+0001dc50: 7869 7428 3029 0a0a 2020 2020 6966 206e  xit(0)..    if n
+0001dc60: 6f74 2061 7267 732e 636f 6d6d 616e 643a  ot args.command:
+0001dc70: 0a20 2020 2020 2020 2070 6172 7365 722e  .        parser.
+0001dc80: 7072 696e 745f 6865 6c70 2829 0a20 2020  print_help().   
+0001dc90: 2020 2020 2073 7973 2e65 7869 7428 2d31       sys.exit(-1
+0001dca0: 290a 2020 2020 656c 6966 2061 7267 732e  ).    elif args.
+0001dcb0: 636f 6d6d 616e 6420 3d3d 2027 7265 7365  command == 'rese
+0001dcc0: 7463 6163 6865 273a 0a20 2020 2020 2020  tcache':.       
+0001dcd0: 2063 6d64 5f72 6573 6574 6361 6368 6528   cmd_resetcache(
+0001dce0: 6172 6773 290a 2020 2020 2020 2020 7379  args).        sy
+0001dcf0: 732e 6578 6974 2830 290a 0a20 2020 2075  s.exit(0)..    u
+0001dd00: 7064 6174 6520 3d20 6172 6773 2e75 7064  pdate = args.upd
+0001dd10: 6174 6520 6f72 2061 7267 732e 636f 6d6d  ate or args.comm
+0001dd20: 616e 6420 3d3d 2027 7570 6461 7465 270a  and == 'update'.
+0001dd30: 0a20 2020 2069 6620 6172 6773 2e63 736f  .    if args.cso
+0001dd40: 756e 6420 3d3d 2030 3a0a 2020 2020 2020  und == 0:.      
+0001dd50: 2020 6373 6f75 6e64 7665 7273 696f 6e2c    csoundversion,
+0001dd60: 206d 696e 6f72 2c20 7265 7374 203d 205f   minor, rest = _
+0001dd70: 6373 6f75 6e64 5f76 6572 7369 6f6e 2829  csound_version()
+0001dd80: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+0001dd90: 2020 2063 736f 756e 6476 6572 7369 6f6e     csoundversion
+0001dda0: 203d 2061 7267 732e 6373 6f75 6e64 0a0a   = args.csound..
+0001ddb0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0001ddc0: 205f 6465 6275 6728 6622 4372 6561 7469   _debug(f"Creati
+0001ddd0: 6e67 206d 6169 6e20 696e 6465 7820 2d20  ng main index - 
+0001dde0: 6373 6f75 6e64 206d 616a 6f72 2076 6572  csound major ver
+0001ddf0: 7369 6f6e 3a20 7b63 736f 756e 6476 6572  sion: {csoundver
+0001de00: 7369 6f6e 7d22 290a 2020 2020 2020 2020  sion}").        
+0001de10: 6966 206e 6f74 2075 7064 6174 653a 0a20  if not update:. 
+0001de20: 2020 2020 2020 2020 2020 206d 6169 6e69             maini
+0001de30: 6e64 6578 203d 205f 6d61 696e 696e 6465  ndex = _maininde
+0001de40: 785f 7265 7472 6965 7665 2829 206f 7220  x_retrieve() or 
+0001de50: 4d61 696e 496e 6465 7828 7570 6461 7465  MainIndex(update
+0001de60: 3d46 616c 7365 2c20 6d61 6a6f 7276 6572  =False, majorver
+0001de70: 7369 6f6e 3d63 736f 756e 6476 6572 7369  sion=csoundversi
+0001de80: 6f6e 290a 2020 2020 2020 2020 656c 7365  on).        else
+0001de90: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+0001dea0: 7468 6973 2077 696c 6c20 7365 7269 616c  this will serial
+0001deb0: 697a 6520 7468 6520 6d61 696e 696e 6465  ize the maininde
+0001dec0: 780a 2020 2020 2020 2020 2020 2020 6d61  x.            ma
+0001ded0: 696e 696e 6465 7820 3d20 4d61 696e 496e  inindex = MainIn
+0001dee0: 6465 7828 7570 6461 7465 3d54 7275 652c  dex(update=True,
+0001def0: 206d 616a 6f72 7665 7273 696f 6e3d 6373   majorversion=cs
+0001df00: 6f75 6e64 7665 7273 696f 6e29 0a20 2020  oundversion).   
+0001df10: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
+0001df20: 6e20 6173 2065 3a0a 2020 2020 2020 2020  n as e:.        
+0001df30: 5f65 7272 6f72 6d73 6728 2246 6169 6c65  _errormsg("Faile
+0001df40: 6420 746f 2063 7265 6174 6520 6d61 696e  d to create main
+0001df50: 2069 6e64 6578 2229 0a20 2020 2020 2020   index").       
+0001df60: 2069 6620 5f73 6573 7369 6f6e 2e64 6562   if _session.deb
+0001df70: 7567 3a0a 2020 2020 2020 2020 2020 2020  ug:.            
+0001df80: 7261 6973 6520 650a 2020 2020 2020 2020  raise e.        
+0001df90: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0001dfa0: 2020 5f65 7272 6f72 6d73 6728 7374 7228    _errormsg(str(
+0001dfb0: 6529 290a 2020 2020 2020 2020 2020 2020  e)).            
+0001dfc0: 7379 732e 6578 6974 282d 3129 0a0a 2020  sys.exit(-1)..  
+0001dfd0: 2020 6966 2061 7267 732e 636f 6d6d 616e    if args.comman
+0001dfe0: 6420 3d3d 2027 7570 6461 7465 273a 0a20  d == 'update':. 
+0001dff0: 2020 2020 2020 2073 7973 2e65 7869 7428         sys.exit(
+0001e000: 3029 0a20 2020 2065 6c73 653a 0a20 2020  0).    else:.   
+0001e010: 2020 2020 206f 6b20 3d20 6172 6773 2e66       ok = args.f
+0001e020: 756e 6328 6d61 696e 696e 6465 782c 2061  unc(mainindex, a
+0001e030: 7267 7329 0a20 2020 2020 2020 2069 6620  rgs).        if 
+0001e040: 6e6f 7420 6f6b 3a0a 2020 2020 2020 2020  not ok:.        
+0001e050: 2020 2020 5f65 7272 6f72 6d73 6728 6622      _errormsg(f"
+0001e060: 436f 6d6d 616e 6420 7b61 7267 732e 636f  Command {args.co
+0001e070: 6d6d 616e 647d 2066 6169 6c65 6422 290a  mmand} failed").
+0001e080: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
+0001e090: 6578 6974 282d 3129 0a20 2020 2020 2020  exit(-1).       
+0001e0a0: 2073 7973 2e65 7869 7428 3029 0a0a 0a69   sys.exit(0)...i
+0001e0b0: 6620 5f5f 6e61 6d65 5f5f 203d 3d20 225f  f __name__ == "_
+0001e0c0: 5f6d 6169 6e5f 5f22 3a0a 2020 2020 6d61  _main__":.    ma
+0001e0d0: 696e 2829 0a                             in().
```

