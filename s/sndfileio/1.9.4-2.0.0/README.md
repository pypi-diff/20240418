# Comparing `tmp/sndfileio-1.9.4-py3-none-any.whl.zip` & `tmp/sndfileio-2.0.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 744219 bytes, number of entries: 23
+Zip file size: 744344 bytes, number of entries: 23
 -rw-rw-r--  2.0 unx     2413 b- defN 21-Nov-13 21:40 sndfileio/__init__.py
 -rw-rw-r--  2.0 unx     1796 b- defN 22-Mar-07 08:16 sndfileio/backend_lameenc.py
--rw-rw-r--  2.0 unx     3041 b- defN 22-Jul-03 09:12 sndfileio/backend_miniaudio.py
+-rw-rw-r--  2.0 unx     3088 b- defN 24-Mar-02 06:55 sndfileio/backend_miniaudio.py
 -rw-rw-r--  2.0 unx     4880 b- defN 24-Jan-19 13:09 sndfileio/datastructs.py
 -rw-rw-r--  2.0 unx     4796 b- defN 21-Nov-13 21:40 sndfileio/dsp.py
 -rw-rw-r--  2.0 unx     1170 b- defN 21-Nov-13 21:40 sndfileio/mp3.py
 -rw-rw-r--  2.0 unx        0 b- defN 21-Nov-13 21:40 sndfileio/py.typed
 -rw-rw-r--  2.0 unx     7561 b- defN 24-Jan-19 13:10 sndfileio/resampling.py
--rw-rw-r--  2.0 unx    35186 b- defN 23-Jul-12 17:38 sndfileio/sndfileio.py
+-rw-rw-r--  2.0 unx    35543 b- defN 24-Apr-18 10:12 sndfileio/sndfileio.py
 -rw-rw-r--  2.0 unx      585 b- defN 21-Nov-13 21:40 sndfileio/testing.py
--rw-rw-r--  2.0 unx    10013 b- defN 23-Nov-29 07:48 sndfileio/util.py
+-rw-rw-r--  2.0 unx    10077 b- defN 24-Apr-18 09:28 sndfileio/util.py
 -rwxrwxr-x  2.0 unx   188210 b- defN 21-Nov-13 21:40 sndfileio/testfiles/M1F1-float32-format-extensible-stereo.wav
 -rwxrwxr-x  2.0 unx   188168 b- defN 21-Nov-13 21:40 sndfileio/testfiles/M1F1-float32-stereo.wav
 -rwxrwxr-x  2.0 unx   141192 b- defN 21-Nov-13 21:40 sndfileio/testfiles/M1F1-int24-format-extensible-stereo.wav
 -rwxrwxr-x  2.0 unx   141168 b- defN 21-Nov-13 21:40 sndfileio/testfiles/M1F1-int24-mono.wav
 -rwxrwxr-x  2.0 unx   188114 b- defN 21-Nov-13 21:40 sndfileio/testfiles/stereo-float32.aif
 -rwxrwxr-x  2.0 unx   188080 b- defN 21-Nov-13 21:40 sndfileio/testfiles/stereo-int32.aif
 -rwxrwxr-x  2.0 unx   234246 b- defN 21-Nov-13 21:40 sndfileio/testfiles/stereofl32.wav
--rw-rw-r--  2.0 unx     1060 b- defN 24-Jan-19 13:11 sndfileio-1.9.4.dist-info/LICENSE.md
--rw-rw-r--  2.0 unx     3806 b- defN 24-Jan-19 13:11 sndfileio-1.9.4.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 24-Jan-19 13:11 sndfileio-1.9.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx       10 b- defN 24-Jan-19 13:11 sndfileio-1.9.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1982 b- defN 24-Jan-19 13:11 sndfileio-1.9.4.dist-info/RECORD
-23 files, 1347569 bytes uncompressed, 741015 bytes compressed:  45.0%
+-rw-rw-r--  2.0 unx     1060 b- defN 24-Apr-18 15:47 sndfileio-2.0.0.dist-info/LICENSE.md
+-rw-rw-r--  2.0 unx     3781 b- defN 24-Apr-18 15:47 sndfileio-2.0.0.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 24-Apr-18 15:47 sndfileio-2.0.0.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       10 b- defN 24-Apr-18 15:47 sndfileio-2.0.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1982 b- defN 24-Apr-18 15:47 sndfileio-2.0.0.dist-info/RECORD
+23 files, 1348012 bytes uncompressed, 741140 bytes compressed:  45.0%
```

## zipnote {}

```diff
@@ -48,23 +48,23 @@
 
 Filename: sndfileio/testfiles/stereo-int32.aif
 Comment: 
 
 Filename: sndfileio/testfiles/stereofl32.wav
 Comment: 
 
-Filename: sndfileio-1.9.4.dist-info/LICENSE.md
+Filename: sndfileio-2.0.0.dist-info/LICENSE.md
 Comment: 
 
-Filename: sndfileio-1.9.4.dist-info/METADATA
+Filename: sndfileio-2.0.0.dist-info/METADATA
 Comment: 
 
-Filename: sndfileio-1.9.4.dist-info/WHEEL
+Filename: sndfileio-2.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: sndfileio-1.9.4.dist-info/top_level.txt
+Filename: sndfileio-2.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: sndfileio-1.9.4.dist-info/RECORD
+Filename: sndfileio-2.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## sndfileio/backend_miniaudio.py

```diff
@@ -1,7 +1,10 @@
+"""
+miniaudio is used for mp3 reading only
+"""
 from __future__ import annotations
 from .datastructs import SndInfo
 from . import util
 import numpy as np 
 import miniaudio
 from typing import TYPE_CHECKING
 if TYPE_CHECKING:
```

## sndfileio/sndfileio.py

```diff
@@ -518,22 +518,22 @@
         self._file.writeSync()
         del self._file
         self._file = None
 
 
 class Backend:
     def __init__(self, priority: int,
-                 filetypes: list[str],
+                 filetypes_read: list[str],
                  filetypes_write: list[str],
                  can_read_chunked: bool,
                  can_write_chunked: bool,
                  name: str,
                  supports_metadata: bool):
         self.priority = priority
-        self.filetypes = filetypes
+        self.filetypes_read = filetypes_read
         self.filetypes_write = filetypes_write
         self.can_read_chunked = can_read_chunked
         self.can_write_chunked = can_write_chunked
         self.supports_metadata = supports_metadata
         self.name = name
         self._backend = None
         self._writer: Optional[Type[SndWriter]] = None
@@ -589,31 +589,31 @@
         if fileformat not in self.filetypes_write:
             raise ValueError(f"The given format {fileformat} is not supported by the "
                              f"{self.name} backend")
 
     def dump(self) -> None:
         """ Dump information about this backend """
         print(f"Backend: {self.name} (available: {self.is_available()}, priority: {self.priority})")
-        if self.filetypes:
-            readtypes = ", ".join(self.filetypes)
+        if self.filetypes_read:
+            readtypes = ", ".join(self.filetypes_read)
             print(f"    read types : {readtypes}")
         if self.filetypes_write:
             writetypes = ", ".join(self.filetypes_write)
             print(f"    write types: {writetypes}")
         ok, notok = "OK", "--"
         readchunked = ok if self.can_read_chunked else notok
         writechunked = ok if self.can_write_chunked else notok
         print(f"    sndread_chunked: {readchunked}    sndwrite_chunked: {writechunked}")
 
 
 class _Lameenc(Backend):
 
     def __init__(self, priority: int):
         super().__init__(priority=priority,
-                         filetypes=[],
+                         filetypes_read=[],
                          filetypes_write=['mp3'],
                          can_read_chunked=False,
                          can_write_chunked=True,
                          name='lameenc',
                          supports_metadata=False)
 
     def writer(self, outfile: str, sr: int, encoding: str, fileformat: str,
@@ -664,41 +664,43 @@
     subtype_to_encoding = {
         'PCM_24': 'pcm24',
         'PCM_16': 'pcm16',
         'PCM_32': 'pcm32',
         'PCM_64': 'pcm64',
         'FLOAT': 'float32',
         'DOUBLE': 'float64',
-        'VORBIS': 'vorbis'
+        'VORBIS': 'vorbis',
+        'MPEG_LAYER_III': ''
     }
 
     encoding_to_subtype = {
         'pcm16': 'PCM_16',
         'pcm24': 'PCM_24',
         'float32': 'FLOAT',
         'float64': 'DOUBLE',
     }
 
     format_to_fileformat = {
         'WAV': 'wav',
         'WAVEX': 'wav',
         'AIFF': 'aiff',
         'FLAC': 'flac',
-        'OGG': 'ogg'
+        'OGG': 'ogg',
+        'MP3': 'mp3'
     }
 
     # 'comment', 'title', 'artist',
     #             'album', 'tracknumber', 'software'
     metadata_keys = {'comment', 'title', 'artist', 'album', 'tracknumber', 'software'}
 
     def __init__(self, priority: int):
         super().__init__(
             priority=priority,
-            filetypes=["aif", "aiff", "wav", "flac", "ogg"],
-            filetypes_write=["aif", "aiff", "wav", "flac"],
+            filetypes_read=["aif", "aiff", "wav", "flac", "ogg", "mp3"],
+            filetypes_write=["aif", "aiff", "wav", "flac", "mp3"],
             can_read_chunked=True,
             can_write_chunked=True,
             name='soundfile',
             supports_metadata=True
         )
         self._writer = _SoundfileWriter
 
@@ -727,24 +729,24 @@
         for pos, nframes in util.chunks(0, lastframe - firstframe, chunksize):
             yield snd.read(nframes)
 
     def getinfo(self, path: str) -> SndInfo:
         return self._getinfo(_soundfile.SoundFile(path, 'r'))
 
     def _getinfo(self, snd: _soundfile.SoundFile, ) -> SndInfo:
-        encoding = _Soundfile.subtype_to_encoding[snd.subtype]
-        fileformat = _Soundfile.format_to_fileformat[snd.format]
+        encoding = _Soundfile.subtype_to_encoding.get(snd.subtype, '')
+        fileformat = _Soundfile.format_to_fileformat.get(snd.format, '')
         metadata = {}
         for key in self.metadata_keys:
             value = getattr(snd, key, None)
             if value:
                 metadata[key] = value
 
         ext = _os.path.splitext(snd.name)[1]
-        if ext == '.ogg':
+        if ext == '.ogg' or ext == '.mp3':
             metadata = util.tinytagMetadata(snd.name)
             bitrate = metadata.pop('bitrate', None)
         else:
             bitrate = None
 
         return SndInfo(samplerate=snd.samplerate,
                        nframes=snd.frames,
@@ -758,20 +760,27 @@
     def get_format_and_subtype(fmt: str, encoding: str = None
                                ) -> tuple[str, str]:
         soundfile_fmt = {
             'wav': 'WAVEX',
             'aif': 'AIFF',
             'aiff': 'AIFF',
             'flac': 'FLAC',
+            'mp3': 'MP3',
+            'ogg': 'OGG'
         }.get(fmt)
         if not soundfile_fmt:
             raise ValueError(f"Format {fmt} not supported")
-        subformat = _Soundfile.encoding_to_subtype.get(encoding)
-        if not subformat:
-            raise ValueError(f"Encoding {encoding} not supported for {fmt}")
+        if fmt == 'ogg':
+            subformat = 'Vorbis'
+        elif fmt == 'mp3':
+            subformat = 'MPEG_LAYER_III'
+        else:
+            subformat = _Soundfile.encoding_to_subtype.get(encoding)
+            if not subformat:
+                raise ValueError(f"Encoding {encoding} not supported for {fmt}")
         return soundfile_fmt, subformat
 
 
 class _PySndfile(Backend):
     """
     A backend based in pysndfile
 
@@ -784,15 +793,15 @@
                  'SF_STR_SOFTWARE': 'software'}
     # _writer = _PySndfileWriter
 
     def __init__(self, priority: int):
 
         super().__init__(
                 priority  = priority,
-                filetypes = ["aif", "aiff",  "wav", "flac", "ogg", "wav64", "caf", "raw"],
+                filetypes_read= ["aif", "aiff", "wav", "flac", "ogg", "wav64", "caf", "raw"],
                 filetypes_write = ["aif", "aiff",  "wav", "flac", "ogg", "wav64", "caf", "raw"],
                 can_read_chunked = True,
                 can_write_chunked = True,
                 name = 'pysndfile',
                 supports_metadata= True
         )
         self._writer = _PySndfileWriter
@@ -851,15 +860,15 @@
             fileformat: the fileformat, one of 'wav', 'aiff', etc
             encoding: one of *pcmXX* or *floatXX* (where *XX *is the number of bits/sample,
                 one of 16, 24, 32, 64)
 
         Returns:
             the pysndfile format id
         """
-        assert fileformat in self.filetypes
+        assert fileformat in self.filetypes_read
         fmt, bits = encoding[:-2], int(encoding[-2:])
         assert fmt in ('pcm', 'float') and bits in (8, 16, 24, 32, 64)
         if fileformat == 'aif':
             fileformat = 'aiff'
         return self.pysndfile.construct_format(fileformat, f"{fmt}{bits}")
 
     def detect_format(self, path: str) -> Optional[str]:
@@ -870,15 +879,15 @@
 # ----------------------------------------------------------------
 
 class _Miniaudio(Backend):
 
     def __init__(self, priority):
         super().__init__(
                 priority=priority,
-                filetypes= ['mp3', 'ogg'],
+                filetypes_read= ['mp3', 'ogg'],
                 filetypes_write = [],
                 can_read_chunked = True,
                 can_write_chunked = False,
                 name = 'miniaudio',
                 supports_metadata=False
         )
 
@@ -906,15 +915,15 @@
         else:
             raise FormatNotSupported(f'chunked reading is not supported for {ext}')
 
 
 _BACKENDS: dict[str, Backend] = {
     'soundfile': _Soundfile(priority=0),
     'lameenc': _Lameenc(priority=10),
-    'miniaudio': _Miniaudio(priority=10),
+    # 'miniaudio': _Miniaudio(priority=10),
 }
 
 # if _is_package_installed('pysndfile'):
 #     _BACKENDS['pysndfile'] = _PySndfile(priority=1)
 
 
 _cache = {}
@@ -954,15 +963,15 @@
         ...                        key=lambda backend:backend.can_read_chunked())
     """
     filetype = util.detect_format(path)
     backends = _get_backends()
     if key:
         backends = [b for b in backends if key(b)]
     if filetype:
-        backends = [b for b in backends if filetype in b.filetypes]
+        backends = [b for b in backends if filetype in b.filetypes_read]
     if backends:
         return min(backends, key=lambda backend: backend.priority)
     return None
 
 
 def _get_write_backend(fileformat: str) -> Optional[Backend]:
     backends = _get_backends()
```

## sndfileio/util.py

```diff
@@ -312,36 +312,38 @@
     an encoding is selected which is able to represent the data without
     loss. In the case of wav/aiff, if there is sample data outside of the
     -1:1 range, a float32 encoding is chosen, since any pcm representation
     would result in out of range samples.
 
     Args:
         data: the samples
-        fmt: on of 'wav', 'aiff', 'flac'
+        fmt: on of 'wav', 'aiff', 'flac', 'ogg', 'mp3'
 
     Returns:
         the encoding, one of 'pcm16', 'pcm24', 'float32'
     """
     if fmt in ('wav', 'aif', 'aiff'):
         if samples_out_of_range(data):
             return 'float32'
         maxbits = min(32, bitdepth(data, snap=True))
         encoding = {
             16: 'pcm16',
             24: 'pcm24',
-            32: 'flpat32',
+            32: 'float32',
         }.get(maxbits, 'float32')
     elif fmt == "flac":
         maxbits = min(24, bitdepth(data, snap=True))
         encoding = {
             16: 'pcm16',
             24: 'pcm24',
         }.get(maxbits, 'pcm24')
     elif fmt == 'mp3':
         encoding = 'pcm16'
+    elif fmt == 'ogg':
+        encoding = 'pcm16'
     else:
         raise ValueError(f"The format {fmt} is not supported")
     assert encoding in ('pcm16', 'pcm24', 'float32')
     return encoding
 
 
 def chunks(start: int, end: int, step: int) -> Iterator[Tuple[int, int]]:
```

## Comparing `sndfileio-1.9.4.dist-info/LICENSE.md` & `sndfileio-2.0.0.dist-info/LICENSE.md`

 * *Files identical despite different names*

## Comparing `sndfileio-1.9.4.dist-info/METADATA` & `sndfileio-2.0.0.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: sndfileio
-Version: 1.9.4
+Version: 2.0.0
 Summary: Simple API for reading / writing soundfiles
 Author-email: Eduardo Moguillansky <eduardo.moguillansky@gmail.com>
 License: Copyright (c) 2011-2017 GitHub Inc.
         
         Permission is hereby granted, free of charge, to any person obtaining
         a copy of this software and associated documentation files (the
         "Software"), to deal in the Software without restriction, including
@@ -29,15 +29,14 @@
 Classifier: Operating System :: OS Independent
 Requires-Python: >=3.8
 Description-Content-Type: text/x-rst
 License-File: LICENSE.md
 Requires-Dist: numpy >1.8
 Requires-Dist: scipy
 Requires-Dist: soundfile
-Requires-Dist: miniaudio
 Requires-Dist: nnresample
 Requires-Dist: numpyx >=0.4.1
 Requires-Dist: tinytag
 Requires-Dist: filetype
 Requires-Dist: lameenc
 
 *********
```

## Comparing `sndfileio-1.9.4.dist-info/RECORD` & `sndfileio-2.0.0.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 sndfileio/__init__.py,sha256=5gFj5oIOmHNhhZw4TvmSjFGxrsT09VMvEtXQYRY7RYI,2413
 sndfileio/backend_lameenc.py,sha256=rKhFXf8eiSV6ONtkGNiObsoAMLHNnvrFOTTT2YjgNqo,1796
-sndfileio/backend_miniaudio.py,sha256=fnC0s1DcU-z4OFeDfTjuy0edkXQYrfBMyNOd_qsYEZs,3041
+sndfileio/backend_miniaudio.py,sha256=kZWoJ5aDsnlqDewjFLFOFvyiJJb6qsOoaw06kK1Ji6k,3088
 sndfileio/datastructs.py,sha256=Cbh0cpZ-MU0mQ0jBau4V6YW9la8P15EEZKio2Dwt4ZA,4880
 sndfileio/dsp.py,sha256=1-bLOqYXAlsgxqNFnIDRaRgwHoyWxoJKISLSeefcIg8,4796
 sndfileio/mp3.py,sha256=9TQigR4yWnru9ZtjDsSuZAPaN2j95j271D9rf0QrZOI,1170
 sndfileio/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 sndfileio/resampling.py,sha256=3dKA8SNEX7KiemjpnI9l6aY4ZAT59nh4WEcp-ou0q4U,7561
-sndfileio/sndfileio.py,sha256=aSwGvIo5o267kki2ukeU6ZPcNQk6QdqZMiFacYX-l0A,35186
+sndfileio/sndfileio.py,sha256=U7CWSkcDDzK0eVPpbF31HkxR3XFRKXwLLepJS6JMuyw,35543
 sndfileio/testing.py,sha256=9P4L0lkjzU4VAniFrMKKAOljvpXIpH0g-J9aMKGNdGI,585
-sndfileio/util.py,sha256=QajvwEhhhh96lKVDS7fTa4W4GKtwbQyi6yMcUCFcULA,10013
+sndfileio/util.py,sha256=pae6bt32k65OjRm2xOhdLpWkXvFErm3W8gRJN_YZQ3c,10077
 sndfileio/testfiles/M1F1-float32-format-extensible-stereo.wav,sha256=dea3dFAEh-G9az65FpKHMQj6dkDzQ3mhT7HRmJNGpXs,188210
 sndfileio/testfiles/M1F1-float32-stereo.wav,sha256=l7cnFkdXwfbuVWszHNZI-73hE6KSExPIgxkHR1zMBHc,188168
 sndfileio/testfiles/M1F1-int24-format-extensible-stereo.wav,sha256=kmG4YTBgmS1twNHBnYlq-tka9pPb5x2CBmeTtCfHxwg,141192
 sndfileio/testfiles/M1F1-int24-mono.wav,sha256=9mMrIQ-iFovylQ_88YNDyFYOPbgVqMocv_wmu_Z3a-8,141168
 sndfileio/testfiles/stereo-float32.aif,sha256=ee-2SIj83C1OaNK38DAEWt2IZOevwSrl1WaRECUvDgc,188114
 sndfileio/testfiles/stereo-int32.aif,sha256=j9sWTHz-THITBARGGtuRhUbqPtxKZCP3aLoRXheCJ9s,188080
 sndfileio/testfiles/stereofl32.wav,sha256=wWbvr8aRLmSGl_gzCtdpS1w7CqNYBmgUZOQ0T1QJgAw,234246
-sndfileio-1.9.4.dist-info/LICENSE.md,sha256=vjYMqYMp4lDhS_QWyPhZxn-MqGDF45oVUfgZIERh6cQ,1060
-sndfileio-1.9.4.dist-info/METADATA,sha256=_3vs_ieK3BQSYWgu7nD-3Clo8A6525mZFhCYZ13rF5c,3806
-sndfileio-1.9.4.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-sndfileio-1.9.4.dist-info/top_level.txt,sha256=R5QCSwTiJ654MxC9kXMnOPic3R4J1V9et--qXBAHId0,10
-sndfileio-1.9.4.dist-info/RECORD,,
+sndfileio-2.0.0.dist-info/LICENSE.md,sha256=vjYMqYMp4lDhS_QWyPhZxn-MqGDF45oVUfgZIERh6cQ,1060
+sndfileio-2.0.0.dist-info/METADATA,sha256=FXMp9Ch6nPPnD40CV-hMdQjx3nsgk6vjsxRIS6mWHV4,3781
+sndfileio-2.0.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+sndfileio-2.0.0.dist-info/top_level.txt,sha256=R5QCSwTiJ654MxC9kXMnOPic3R4J1V9et--qXBAHId0,10
+sndfileio-2.0.0.dist-info/RECORD,,
```

